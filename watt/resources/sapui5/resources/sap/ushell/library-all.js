sap.ui.controller("sap.ushell.components.factsheet.views.ThingViewer",{setService:function(u){this.getView().setModel(new sap.ui.model.odata.ODataModel(u));}});
// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.catalog.Catalog",{oPopover:null,onInit:function(){sap.ui.getCore().getEventBus().subscribe("showCatalogEvent",this.onShow,this);sap.ui.getCore().byId("catalogSelect").addEventDelegate({onBeforeRendering:this.onBeforeSelectRendering},this);var r=this.getView().parentComponent.getRouter();r.attachRoutePatternMatched(this.onShow.bind(this));},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("showCatalogEvent",this.onShow);},onBeforeRendering:function(){sap.ui.getCore().getEventBus().publish("showCatalog");setTimeout(function(){jQuery('#catalogSelect').focus();},0);},onAfterRendering:function(){var m=this.getView().getModel(),c=m.getProperty('/catalogs'),t=this;if(!c.length){m.setProperty('/catalogs',[{title:sap.ushell.resources.i18n.getText('catalogsLoading'),"static":true,tiles:[],numIntentSupportedTiles:-1}]);m.setProperty('/catalogsNoDataText',sap.ushell.resources.i18n.getText('loadingTiles'));}else if(c[0].title!=sap.ushell.resources.i18n.getText('catalogsLoading')){m.setProperty('/catalogsNoDataText',sap.ushell.resources.i18n.getText('noFilteredItems'));}if(!this.PagingManager){this.lastCatalogId=0;jQuery.sap.require("sap.ushell.components.flp.launchpad.PagingManager");this.PagingManager=new sap.ushell.components.flp.launchpad.PagingManager('catalogPaging',{elementClassName:'sapUshellTile',containerHeight:window.innerHeight,containerWidth:window.innerWidth});}if(this.PagingManager.currentPageIndex===0){t.allocateNextPage();}jQuery("#catalogTilesPage-cont").scroll(function(){var p=sap.ui.getCore().byId('catalogTilesPage'),s=p.getScrollDelegate(),a=s.getScrollTop(),b=s.getMaxScrollTop();if(b-a<=30+t.PagingManager.getTileHeight()){t.allocateNextPage();}});jQuery(window).resize(function(){var w=$(window).width(),a=$(window).height();t.PagingManager.setContainerSize(w,a);t.resetPageFilter();t.applyTileFilters();});},onShow:function(E){var h,m=this.getView().getModel(),c=m.getProperty("/catalogTiles")||[],d=E.getParameter('arguments').filters,D=d?JSON.parse(d):d,p=(D&&decodeURIComponent(D.targetGroup))||"",i;$.extend(this.getView().getViewData(),E);if(this.PagingManager){this.resetPageFilter();}this.categoryFilter=(D&&D.catalogSelector&&D.catalogSelector)||null;this.searchFilter=(D&&D.tileFilter&&D.tileFilter)||null;h=(D&&D.tagFilter&&D.tagFilter)||"";p=p==='undefined'?undefined:p;this._updateModelWithGroupContext(p);if(h){try{this.tagFilter=JSON.parse(h);}catch(e){this.tagFilter=[];}}else{this.tagFilter=[];}if(this.tagFilter){m.setProperty("/selectedTags",this.tagFilter);}m.setProperty("/showCatalogHeaders",true);m.setProperty("/catalogSearchFilter",this.searchFilter);for(i=0;i<c.length;i=i+1){c[i].active=false;}if(this.categoryFilter||this.searchFilter){sap.ui.getCore().byId("catalogSelect").rerender();}else{sap.ui.getCore().byId("catalogSelect").setSelectedItemId("");}this.oRenderingFilter=new sap.ui.model.Filter('','EQ','a');this.oRenderingFilter.fnTest=function(v){if(v.catalogIndex<=this.lastCatalogId){return true;}if(this.allocateTiles>0){this.lastCatalogId=v.catalogIndex;this.allocateTiles--;return true;}return false;}.bind(this);if(this.PagingManager){this.applyTileFilters();}},resetPageFilter:function(){this.lastCatalogId=0;this.allocateTiles=this.PagingManager.getNumberOfAllocatedElements();},allocateNextPage:function(){if(!this.allocateTiles||this.allocateTiles===0){this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.applyTileFilters();}},onBeforeSelectRendering:function(){var s=sap.ui.getCore().byId("catalogSelect"),i=jQuery.grep(s.getItems(),jQuery.proxy(function(I){return I.getBindingContext().getObject().title===this.categoryFilter;},this));if(!i.length){i.push(s.getItemAt(0));}if(i[0]&&s.getSelectedItemId()!==i[0].getId()){window.setTimeout($.proxy(s.setSelectedItem,s,i[0].getId()),500);}},setTagsFilter:function(f){var p={catalogSelector:this.categoryFilter,tileFilter:this.searchFilter,tagFilter:f,targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('catalog',{filters:JSON.stringify(p)},true);},setCategoryFilter:function(f){var p={catalogSelector:f,tileFilter:this.searchFilter,tagFilter:JSON.stringify(this.tagFilter),targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('catalog',{filters:JSON.stringify(p)},true);},setSearchFilter:function(f){var p={catalogSelector:this.categoryFilter,tileFilter:f,tagFilter:JSON.stringify(this.tagFilter),targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('catalog',{'filters':JSON.stringify(p)});},getGroupContext:function(){var m=this.getView().getModel(),g=m.getProperty("/groupContext/path");return g?g:"";},applyTileFilters:function(){var f=[],o,s,c,C;if(this.tagFilter){o=new sap.ui.model.Filter('tags','EQ','v');o.fnTest=function(t){var i,a;if(this.tagFilter.length===0){return true;}for(i=0;i<this.tagFilter.length;i++){a=this.tagFilter[i];if(t.indexOf(a)===-1){return false;}}return true;}.bind(this);f.push(o);}if(this.searchFilter){s=new sap.ui.model.Filter($.map(this.searchFilter.split(/[\s,]+/),function(v){return(v&&new sap.ui.model.Filter("keywords",sap.ui.model.FilterOperator.Contains,v))||(v&&new sap.ui.model.Filter("title",sap.ui.model.FilterOperator.Contains,v))||undefined;}),true);f.push(s);}if(this.categoryFilter){C=this.categoryFilter;c=new sap.ui.model.Filter("catalog",sap.ui.model.FilterOperator.EQ,C);f.push(c);}f.push(new sap.ui.model.Filter("isTileIntentSupported",sap.ui.model.FilterOperator.EQ,true));if(this.oRenderingFilter){f.push(this.oRenderingFilter);}sap.ui.getCore().byId("catalogTiles").getBinding("tiles").filter(f);},onLiveFilter:function(e){var q=e.getParameter("newValue");if(q){this.setSearchFilter(q);}else{this.setSearchFilter();}},onTagsFilter:function(e){var s=e.getParameters("selectedItem").changedItem,a=e.getParameter("selected"),b=[],c=s.getText();if(this.tagFilter){b=this.tagFilter;}if(a){b.push(c);}else{b=b.filter(function(d){return d!==c;});}this.setTagsFilter(b.length>0?JSON.stringify(b):"");},onCategoryFilter:function(e){var s=e.getParameter("selectedItem"),S=s.getBindingContext(),m=S.getModel();if(m.getProperty("static",S)){m.setProperty("/showCatalogHeaders",true);this.setCategoryFilter();this.selectedCategory=undefined;}else{m.setProperty("/showCatalogHeaders",false);this.setCategoryFilter(s.getBindingContext().getObject().title);this.selectedCategory=s.getId();}},onTileAfterRendering:function(e){var f=e.getSource().getFootItems()[0];if(f!==undefined){f.addStyleClass("sapUshellCatalogPlusIcon");}},catalogTilePress:function(c){sap.ui.getCore().getEventBus().publish("launchpad","catalogTileClick");},onTileFooterClick:function(e){var s=e.getSource(),S=s.getBindingContext(),t=this,m=this.getView().getModel(),o,c,p,a=e.oSource,b=a.getDomRef(),P=this.createPopoverData(e),d=new sap.ui.model.json.JSONModel(P.userGroupList),i=192,g=m.getProperty("/groupContext/path"),l,f,n;if(g){this._handleTileFooterClickInGroupContext(S,g);}else{l=this._createPopoverGroupList(P);f=this._setPopoverContainer(i);n=this._createNewGroupUiElements(f,i);f.addContent(n.newGroupItemList);f.addContent(l);if(document.body.clientHeight-b.getBoundingClientRect().bottom>=310){p="Bottom";}else{p="Auto";}this.oPopover=new sap.m.ResponsivePopover({id:"groupsPopover",placement:p,content:[f],enableScrolling:true,title:sap.ushell.resources.i18n.getText("addTileToGroups_popoverTitle"),contentWidth:'20rem',afterClose:function(){n.newGroupItemList.destroy();n.newGroupNameInput.destroy();o.destroy();c.destroy();f.destroy();t.oPopover.destroy();t.oPopover=null;}});if(!sap.ui.Device.system.phone){this.oPopover.setContentHeight(i+"px");}else{this.oPopover.setContentHeight("100%");}o=this._createOkButton(S,d,P,t,t.oPopover,n.newGroupNameInput);c=this._createCancelButton(t.oPopover);this.oPopover.setBeginButton(o);this.oPopover.setEndButton(c);this.oPopover.setInitialFocus('newGroupItem');this.oPopover.openBy(a);}},_getCatalogTileIndexInModel:function(s){var t=s.sPath,a=t.split("/"),b=a[a.length-1];return b;},_handleTileFooterClickInGroupContext:function(s,g){var l=sap.ushell.Container.getService("LaunchPage"),m=this.getView().getModel(),c=this.getCatalogTileDataFromModel(s),a=c.tileData.associatedGroups,G=m.getProperty(g),b=l.getGroupId(G.object),C=$.inArray(b,a),t=this._getCatalogTileIndexInModel(s),o,A,r,T,d,e=this;if(c.isBeingProcessed){return;}m.setProperty('/catalogTiles/'+t+'/isBeingProcessed',true);if(C==-1){o=new sap.ui.model.Context(s.getModel(),g);A=this._addTile(s,o);A.done(function(f){if(f.status==1){e._groupContextOperationSucceeded(s,c,G,true);}else{e._groupContextOperationFailed(c,G,true);}});A.always(function(){m.setProperty('/catalogTiles/'+t+'/isBeingProcessed',false);});}else{T=s.getModel().getProperty(s.getPath()).id;d=g.split('/')[2];r=this._removeTile(T,d);r.done(function(f){if(f.status==1){e._groupContextOperationSucceeded(s,c,G,false);}else{e._groupContextOperationFailed(c,G,false);}});r.always(function(){m.setProperty('/catalogTiles/'+t+'/isBeingProcessed',false);});}},_createPopoverGroupList:function(p){var u=[],P,l=new sap.m.List({mode:sap.m.ListMode.MultiSelect,includeItemInSelection:true}),L=new sap.m.DisplayListItem({label:"{title}",selected:"{selected}",tooltip:"{title}",type:sap.m.ListType.Active}),t=this;l.addEventDelegate({onsapup:function(E){try{E.preventDefault();if(t.getView().getModel().getProperty("/groups/length")){var j,c=jQuery(":focus");if(c.index()==0){j=jQuery("#newGroupItem");j.focus();E._bIsStopHandlers=true;}}}catch(e){}}});l.attachItemPress(function(e){var c=e.getParameter('listItem'),s=e.getParameter('srcControl'),S;if(s.getMetadata().getName()==='sap.m.CheckBox'){S=c.isSelected();s.setSelected(!S);c.setSelected(!S);}});u.push(new sap.ui.model.Filter("isGroupLocked",sap.ui.model.FilterOperator.EQ,false));if(this.getView().getModel().getProperty('/enableHideGroups')){u.push(new sap.ui.model.Filter("isGroupVisible",sap.ui.model.FilterOperator.EQ,true));}l.bindItems("/",L,null,u);P=new sap.ui.model.json.JSONModel(p.userGroupList);l.setModel(P);return l;},_setPopoverContainer:function(p){var a="popoverContainer",b=new sap.m.ScrollContainer({id:a,horizontal:false,vertical:true});if(!sap.ui.Device.system.phone){b.setHeight((p-2)+"px");}else{b.setHeight("100%");}return b;},_createNewGroupUiElements:function(p,P){var m=this.getView().getModel(),n,b,N,h,o,a,t=this;n=new sap.m.Input({id:"newGroupNameInput",type:"Text",placeholder:sap.ushell.resources.i18n.getText("new_group_name")});b=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("nav-back"),press:function(e){t.oPopover.removeAllContent();if(!sap.ui.Device.system.phone){t.oPopover.setContentHeight(P+"px");}else{t.oPopover.setContentHeight("100%");}t.oPopover.setVerticalScrolling(true);t.oPopover.addContent(p);t.oPopover.setTitle(sap.ushell.resources.i18n.getText("addTileToGroups_popoverTitle"));t.oPopover.setCustomHeader();n.enabled=false;n.setValue('');},tooltip:sap.ushell.resources.i18n.getText("newGroupGoBackBtn_tooltip")});b.addStyleClass("sapUshellCatalogNewGroupBackButton");N=new sap.m.Label({text:sap.ushell.resources.i18n.getText("newGroup_popoverTitle")});h=new sap.m.Bar({contentLeft:[b],contentMiddle:[N]});o=new sap.m.StandardListItem({id:"newGroupItem",title:sap.ushell.resources.i18n.getText("newGroup_listItemText"),type:"Navigation",press:function(){t._navigateToCreateNewGroupPanel(t.oPopover,n,h);}});a=new sap.m.List({});if(m.getProperty("/enableHelp")){o.addStyleClass('help-id-newGroupItem');}a.addItem(o);a.addEventDelegate({onsapdown:function(E){try{E.preventDefault();E._bIsStopHandlers=true;if(t.getView().getModel().getProperty("/groups/length")){var j=jQuery("#popoverContainer .sapMListModeMultiSelect li").first();j.focus();}}catch(e){}},onsaptabnext:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#okButton");j.focus();}catch(e){}}});return{newGroupItemList:a,newGroupNameInput:n};},_createOkButton:function(s,p,a,g,P,n,h){var o=new sap.m.Button({id:"okButton",press:function(e){e.preventDefault();e._bIsStopHandlers=true;var u,t=s.getModel().getProperty(s.getPath()).id,G=n.getValue().trim(),b=[],c=this;u=g._handlePopoverGroupsSelection(p,t,s,a,b,g);if(n.enabled){u=g._handleNewGroupCreationPanel(g,s,G,b,u);}jQuery.when.apply(jQuery,b).then(function(){g._handlePopoverGroupsActionPromises(g,c,s,a,u,arguments);});P.close();}.bind(p),text:sap.ushell.resources.i18n.getText("okBtn")});o.addEventDelegate({onsaptabprevious:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#newGroupItem");if(!j.length){j=jQuery("#newGroupNameInput input");}j.focus();}catch(e){}}});return o;},_createCancelButton:function(p){return new sap.m.Button({id:"cancelButton",press:function(e){e.preventDefault();e._bIsStopHandlers=true;p.close();},text:sap.ushell.resources.i18n.getText("cancelBtn")});},_handlePopoverGroupsSelection:function(p,t,s,a,b,g){var l=sap.ushell.Container.getService("LaunchPage"),c={},G,d,r,i,u={selectedGroupsIDsArray:[],numberOfAddedGroups:0,numberOfRemovedGroups:0,firstAddedGroupTitle:"",firstRemovedGroupTitle:""};for(i=0;i<a.userGroupList.length;i=i+1){d=p.oData[i];r=l.getGroupId(d.object);c[r]=d.title;if(d.selected){u.selectedGroupsIDsArray.push(r);G=new sap.ui.model.Context(s.getModel(),"/groups/"+i);if(!p.oData[i].initiallySelected){b.push(g._addTile(s,G));p.oData[i].initiallySelected=true;u.numberOfAddedGroups=u.numberOfAddedGroups+1;if(u.numberOfAddedGroups==1){u.firstAddedGroupTitle=d.title;}}}else if((!d.selected)&&(p.oData[i].initiallySelected)){b.push(g._removeTile(t,i));p.oData[i].initiallySelected=false;u.numberOfRemovedGroups=u.numberOfRemovedGroups+1;if(u.numberOfRemovedGroups==1){u.firstRemovedGroupTitle=d.title;}}}return u;},_handlePopoverGroupsActionPromises:function(g,p,s,a,u,P){if(!(u.numberOfAddedGroups==0&&u.numberOfRemovedGroups==0)){var l=sap.ushell.Container.getService("LaunchPage"),i=false,b=false,e=[],c,d;for(c=0;c<P.length&&(!i||!b);c++){if(P[c].action=="addTileToNewGroup"&&P[c].status==1){var t=p.oData[p.oData.length-1],r=l.getGroupId(t.object);u.selectedGroupsIDsArray.push(r);b=true;}if(!P[c].status){i=true;e.push(P[c]);}}if(i){var E=g.prepareErrorMessage(e,a.tileTitle),f=sap.ushell.components.flp.launchpad.DashboardManager();f.resetGroupsOnFailure(E.messageId,E.parameters);}else{s.getModel().setProperty("/catalogTiles/"+a.tileIndex+"/associatedGroups",u.selectedGroupsIDsArray);d=g.prepareDetailedMessage(a.tileTitle,u.numberOfAddedGroups,u.numberOfRemovedGroups,u.firstAddedGroupTitle,u.firstRemovedGroupTitle);sap.m.MessageToast.show(d,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});}}},_groupContextOperationSucceeded:function(s,c,g,t){var l=sap.ushell.Container.getService("LaunchPage"),G=l.getGroupId(g.object),a=c.tileData.associatedGroups,d,i;if(t){a.push(G);s.getModel().setProperty("/catalogTiles/"+c.tileIndex+"/associatedGroups",a);d=this.prepareDetailedMessage(c.tileData.title,1,0,g.title,"");}else{for(i in a){if(a[i]==G){a.splice(i,1);break;}}s.getModel().setProperty("/catalogTiles/"+c.tileIndex+"/associatedGroups",a);d=this.prepareDetailedMessage(c.tileData.title,0,1,"",g.title);}sap.m.MessageToast.show(d,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_groupContextOperationFailed:function(c,g,t){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),e;if(t){e=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[c.tileData.title,g.title]});}else{e=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[c.tileData.title,g.title]});}d.resetGroupsOnFailure(e.messageId,e.parameters);},_handleNewGroupCreationPanel:function(g,s,G,p,u){var n,e=sap.ushell.resources.i18n.getText("new_group_name");if(G.length>0){n=G;}else{n=e;}p.push(g._createGroupAndSaveTile(s,n));u.numberOfAddedGroups++;u.firstAddedGroupTitle=n;return u;},_navigateToCreateNewGroupPanel:function(p,n,h){p.removeAllContent();p.addContent(n.addStyleClass("sapUshellCatalogNewGroupInput"));p.setCustomHeader(h);p.setContentHeight("");n.setValueState(sap.ui.core.ValueState.None);n.setPlaceholder(sap.ushell.resources.i18n.getText("new_group_name"));n.enabled=true;setTimeout(function(){n.focus();},0);},prepareErrorMessage:function(e,t){var g,a,f,F,n=0,N=0,c=false,m;for(var i in e){g=e[i].group;a=e[i].action;if(a=='add'){n++;if(n==1){f=g.title;}}else if(a=='remove'){N++;if(N==1){F=g.title;}}else if(a=='addTileToNewGroup'){n++;if(n==1){f=g.title;}}else{c=true;}}if(c){if(e.length==1){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_create_new_group"});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}else if(e.length==1){if(n){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[t,f]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[t,F]});}}else{if(N==0){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_several_groups",parameters:[t]});}else if(n==0){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_several_groups",parameters:[t]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}return m;},prepareDetailedMessage:function(t,n,a,f,b){var m;if(n==0){if(a==1){m=sap.ushell.resources.i18n.getText("tileRemovedFromSingleGroup",[t,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileRemovedFromSeveralGroups",[t,a]);}}else if(n==1){if(a==0){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroup",[t,f]);}else if(a==1){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroupAndRemovedFromSingleGroup",[t,f,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroupAndRemovedFromSeveralGroups",[t,f,a]);}}else if(n>1){if(a==0){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroups",[t,n]);}else if(a==1){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSingleGroup",[t,n,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSeveralGroups",[t,n,a]);}}return m;},createPopoverData:function(e){var s=e.getSource(),S=s.getBindingContext(),a=sap.ushell.Container.getService("LaunchPage"),i,m,p,t,r,u=S.getModel().getProperty("/groups"),c=this.getCatalogTileDataFromModel(S),b=c.tileData.associatedGroups,d=c.tileIndex;for(i=0;i<u.length;i=i+1){r=a.getGroupId(u[i].object);u[i].selected=!($.inArray(r,b)==-1);u[i].initiallySelected=u[i].selected;}p=S.getPath(0);m=S.getModel();t=m.getProperty(p).title;return{userGroupList:u,catalogTile:c,tileTitle:t,tileIndex:d};},getCatalogTileDataFromModel:function(s){var t=this._getCatalogTileIndexInModel(s),m=s.getModel(),T=m.getProperty("/catalogTiles/"+t);return{tileData:T,tileIndex:t,isBeingProcessed:T.isBeingProcessed?true:false};},onAddTile:function(e){var s=e.getParameter("control").getBindingContext();if(!s.getProperty("active")){this._addTile(s,e.getSource().getBindingContext());}},onNavButtonPress:function(e){this.getView().parentComponent.getRouter().navTo('home');},_updateModelWithGroupContext:function(p){var l=sap.ushell.Container.getService("LaunchPage"),m=this.getView().getModel(),g,G={path:p,id:"",title:""};if(p&&p!==""){var t=function(){var M=m.getProperty("/groups");if(M.length){g=m.getProperty(p);G.id=l.getGroupId(g.object);G.title=g.title||l.getGroupTitle(g.object);return;}setTimeout(t,100);};t();}m.setProperty("/groupContext",G);},_addTile:function(t,g){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),a=jQuery.Deferred(),p=d.createTile({catalogTileContext:t,groupContext:g});p.done(function(b){a.resolve(b);});return a;},_removeTile:function(t,i){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),a=jQuery.Deferred(),p=d.deleteCatalogTileFromGroup({tileId:t,groupIndex:i});p.done(function(b){a.resolve(b);});return a;},_createGroupAndSaveTile:function(t,n){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),a=jQuery.Deferred(),p=d.createGroupAndSaveTile({catalogTileContext:t,newGroupName:n});p.done(function(b){a.resolve(b);});return a;}});}());(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.group_list.GroupList",{onInit:function(){this.sViewId="#"+this.getView().getId();this.sGroupListId="#"+this.getView().oGroupList.getId();this.handleScroll=this._fHandleScroll.bind(this);},onAfterRendering:function(){this.jqView=jQuery(this.sViewId);this.jgGroupList=jQuery(this.sGroupListId);var e=sap.ui.getCore().getEventBus();e.unsubscribe("grouplist","ScrollAnimationEnd",this._handleScrollAnimationEnd,this);e.subscribe("grouplist","ScrollAnimationEnd",this._handleScrollAnimationEnd,this);e.unsubscribe("grouplist","DashboardRerender",this._addScroll,this);e.subscribe("grouplist","DashboardRerender",this._addScroll,this);e.unsubscribe("launchpad","dashboardScroll",this.handleScroll,this);e.subscribe("launchpad","dashboardScroll",this.handleScroll,this);this._addScroll();},_addScroll:function(){var t=this;setTimeout(function(){this.dashboardElement=document.querySelector(".sapUshellDashboardView section");if(this.dashboardElement){this.dashboardElement.removeEventListener('scroll',t.handleScroll);this.dashboardElement.addEventListener('scroll',t.handleScroll);}}.bind(this),0);},_fHandleScroll:function(){var m=this.getView().getModel(),t=m.getProperty("/topGroupInViewPortIndex");if(!m.getProperty("/scrollingToGroup")){if(!m.getProperty("/groupList-skipScrollToGroup")){var g=jQuery('#groupList li.sapUshellGroupLI');var s=g.removeClass('sapUshellSelected').eq(t);s.addClass('sapUshellSelected');var a=document.getElementById('groupListPage-cont');var b=a.scrollTop;var c=b+a.offsetHeight;var d=s[0]?s[0].offsetTop:undefined;if(d<b){jQuery('#groupListPage section').animate({scrollTop:g[t].offsetTop},0);}else if(d+s[0].offsetHeight>c){jQuery('#groupListPage section').animate({scrollTop:b+g[t].offsetHeight},0);}}sap.ushell.utils.handleTilesVisibility();}},_handleGroupListItemPress:function(e){var s=e.getSource(),f;f=e.getParameter("action")==="sapenter";this._handleScrollToGroup(s,false,f);},_handleScrollToGroup:function(g,a,f){if(!g){return;}var t=this;document.querySelector(".sapUshellDashboardView").removeEventListener('scroll',t.handleScroll);this._publishAsync("launchpad","scrollToGroup",{group:g,groupChanged:a,focus:f});},_handleScrollAnimationEnd:function(){var t=this;document.querySelector(".sapUshellDashboardView").addEventListener('scroll',t.handleScroll);this.getView().getModel().setProperty("/scrollingToGroup",false);},_publishAsync:function(c,e,d){var b=sap.ui.getCore().getEventBus();window.setTimeout($.proxy(b.publish,b,c,e,d),1);}});}());(function(){"use strict";sap.ui.jsview("sap.ushell.components.tiles.applauncher.StaticTile",{getControllerName:function(){return"sap.ushell.components.tiles.applauncher.StaticTile";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');},getTileControl:function(){jQuery.sap.require('sap.ushell.ui.tile.StaticTile');var c=this.getController();return new sap.ushell.ui.tile.StaticTile({title:"{/config/display_title_text}",subtitle:"{/config/display_subtitle_text}",info:"{/config/display_info_text}",infoState:"Neutral",icon:"{/config/display_icon_url}",targetURL:"{/nav/navigation_target_url}",highlightTerms:"{/search/display_highlight_terms}",press:[c.onPress,c]});},getLinkControl:function(){jQuery.sap.require('sap.m.Link');return new sap.m.Link({text:"{/config/display_title_text}",href:"{/nav/navigation_target_url}"});}});}());(function(){"use strict";sap.ui.jsview("sap.ushell.components.tiles.applauncherdynamic.DynamicTile",{getControllerName:function(){return"sap.ushell.components.tiles.applauncherdynamic.DynamicTile";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');},getTileControl:function(){jQuery.sap.require('sap.ushell.ui.tile.DynamicTile');var c=this.getController();return new sap.ushell.ui.tile.DynamicTile({title:"{/data/display_title_text}",subtitle:"{/data/display_subtitle_text}",info:"{/data/display_info_text}",infoState:"{/data/display_info_state}",icon:"{/data/display_icon_url}",numberUnit:"{/data/display_number_unit}",numberValue:"{/data/display_number_value}",numberDigits:"{/data/display_number_digits}",numberState:"{/data/display_number_state}",numberFactor:"{/data/display_number_factor}",stateArrow:"{/data/display_state_arrow}",targetURL:"{/nav/navigation_target_url}",highlightTerms:"{/search/display_highlight_terms}",press:[c.onPress,c]});},getLinkControl:function(){jQuery.sap.require('sap.m.Link');return new sap.m.Link({text:"{/config/display_title_text}",href:"{/nav/navigation_target_url}"});}});}());(function(){"use strict";sap.ui.controller("tiles.indicatorDual.DualTile",{onAfterRendering:function(){var t=this;this.oKpiTileView=this.getView();this.oResourceBundle=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();this.viewData={};t.viewData=this.oKpiTileView.getViewData();this.deferred_left=new jQuery.Deferred();this.deferred_right=new jQuery.Deferred();$.when(this.deferred_left,this.deferred_right).done(function(){t.setTextInTile();t.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oKpiTileView.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"'/>");}).fail(function(){t.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);});t.tileType=t.oKpiTileView.oConfig.TILE_PROPERTIES.tileType;this.oTileApi=t.viewData.chip;if(this.oTileApi.preview.isEnabled()){this.doDummyProcess();}else{this.doProcess();}},setNoData:function(){try{this._updateTileModel({value:"",scale:"",unit:"",footerNum:this.oResourceBundle.getText("sb.noDataAvailable"),footerComp:this.oResourceBundle.getText("sb.noDataAvailable")});this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);}catch(e){}},doProcess:function(){var t=this;var s=sap.ui.getCore().getUIArea(sap.ui.getCore().getStaticAreaRef());var l,r;this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loading);var a=t.tileType.split("-")[1];try{var v;v="tiles.indicatornumeric.NumericTile";l=t._getView(v,this.deferred_left);s.addContent(l);switch(a){case"CM":v="tiles.indicatorcomparison.ComparisonTile";r=t._getView(v,this.deferred_right);s.addContent(r);break;case"CT":v="tiles.indicatorcontribution.ContributionTile";r=t._getView(v,this.deferred_right);s.addContent(r);break;case"AT":v="tiles.indicatordeviation.DeviationTile";r=t._getView(v,this.deferred_right);s.addContent(r);break;case"TT":v="tiles.indicatorArea.AreaChartTile";r=t._getView(v,this.deferred_right);s.addContent(r);break;}}catch(e){this.logError(e);}},setTextInTile:function(){var t=this;var a=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:a.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:a.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m);},getTile:function(){return this.oKpiTileView.oGenericTile;},_getView:function(v,d){var a=this.oKpiTileView.getViewData();var b=sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:v,viewData:jQuery.extend(true,{},a,{parentController:this},{deferredObj:d})});return b;},logError:function(e){this._updateTileModel({value:"",scale:"",unit:""});if(this.getView().getViewData().deferredObj){this.getView().getViewData().deferredObj.reject();}},doDummyProcess:function(){var t=this;try{t.setTextInTile();switch(t.tileType){case"DT-CM":t._updateTileModel({value:1,size:sap.suite.ui.commons.InfoTileSize.Auto,frameType:sap.suite.ui.commons.FrameType.TwoByOne,state:sap.suite.ui.commons.LoadState.Loading,valueColor:sap.suite.ui.commons.InfoTileValueColor.Good,indicator:sap.suite.ui.commons.DeviationIndicator.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1,color:"Good"},{title:"Measure 2",value:2,color:"Good"},{title:"Measure 3",value:3,color:"Good"}]});break;case"DT-AT":t._updateTileModel({valueColor:"Good",value:100,frameType:sap.suite.ui.commons.FrameType.TwoByOne,unit:"USD",actual:{value:120,color:sap.suite.ui.commons.InfoTileValueColor.Good},targetValue:100,thresholds:[{value:0,color:sap.suite.ui.commons.InfoTileValueColor.Error},{value:50,color:sap.suite.ui.commons.InfoTileValueColor.Critical},{value:150,color:sap.suite.ui.commons.InfoTileValueColor.Critical},{value:200,color:sap.suite.ui.commons.InfoTileValueColor.Error}],showActualValue:true,showTargetValue:true});break;case"DT-CT":t._updateTileModel({value:8888,size:sap.suite.ui.commons.InfoTileSize.Auto,frameType:sap.suite.ui.commons.FrameType.TwoByOne,state:sap.suite.ui.commons.LoadState.Loading,valueColor:sap.suite.ui.commons.InfoTileValueColor.Error,indicator:sap.suite.ui.commons.DeviationIndicator.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral",displayValue:""},{title:"EMEA",value:50,color:"Neutral",displayValue:""},{title:"APAC",value:-20,color:"Neutral",displayValue:""}]});break;case"DT-TT":this._updateTileModel({value:8888,size:sap.suite.ui.commons.InfoTileSize.Auto,frameType:sap.suite.ui.commons.FrameType.TwoByOne,state:sap.suite.ui.commons.LoadState.Loading,valueColor:sap.suite.ui.commons.InfoTileValueColor.Error,indicator:sap.suite.ui.commons.DeviationIndicator.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});break;}}catch(e){}}});}());sap.ui.controller("tiles.indicatorDualComparison.DualComparison",{onInit:function(){var t=this;this.firstTimeVisible=false;this.oDualComparisonView=this.getView();this.oChip=this.oDualComparisonView.getViewData().chip;if(this.oChip.visible){this.oChip.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oChip.url.getApplicationSystem();this.oDualComparisonView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oChip.configuration.getParameterValueAsString("tileConfiguration"),function(c){t.oConfig=c;if(t.oChip.preview){t.oChip.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system));}if(t.oChip.preview.isEnabled()){t.setTitle();t._updateTileModel({value:1,size:sap.suite.ui.commons.InfoTileSize.Auto,frameType:"TwoByOne",state:sap.suite.ui.commons.LoadState.Loading,valueColor:sap.suite.ui.commons.InfoTileValueColor.Good,indicator:sap.suite.ui.commons.DeviationIndicator.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1,color:"Good"},{title:"Measure 2",value:2,color:"Good"},{title:"Measure 3",value:3,color:"Good"}]});t.oDualComparisonView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);}else{t.oConfig.TILE_PROPERTIES.FINALVALUE;t.setTitle();t.oDualComparisonView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.comparisionChartODataRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});if(Number(t.oChip.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();}else{t.flowWithDesignTimeCall();}}});}catch(e){this.logError(e);}},getTile:function(){return this.oDualComparisonView.oGenericTile;},setTitle:function(){var t=this;var a=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oChip);this._updateTileModel({header:a.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:a.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m);},flowWithoutDesignTimeCall:function(){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oChip.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(k){this.CALCULATED_KPI_VALUE=k;t.oDualComparisonView.oGenericTile.setFrameType("TwoByOne");t.oDualComparisonView.oGenericTile.removeAllTileContent();t.oDualComparisonView.oGenericTile.addTileContent(t.oDualComparisonView.oNumericTile);t.oDualComparisonView.oGenericTile.addTileContent(t.oDualComparisonView.oComparisonTile);var c=this.CALCULATED_KPI_VALUE;var a,b;for(var i=0;i<c.length;i++){if(c[i].title==t.DEFINITION_DATA.EVALUATION.COLUMN_NAME){b=c[i].value;a=c[i].color||"Neutral";t._updateTileModel({value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(b),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION).toString(),valueColor:a});break;}}if(!a&&!b){a=t.DEFINITION_DATA.valueColor;b=t.DEFINITION_DATA.value;}this._updateTileModel({value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(b),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION).toString(),data:this.CALCULATED_KPI_VALUE});var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oDualComparisonView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oDualComparisonView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);var s="";if(a=="Error"){s="sb.error";}if(a=="Neutral"){s="sb.neutral";}if(a=="Critical"){s="sb.critical";}if(a=="Good"){s="sb.good";}var T=t.setThresholdValues();var m,d,e,v,f,g,h,j,l;if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[0]){m=this.CALCULATED_KPI_VALUE[0].title;v=this.CALCULATED_KPI_VALUE[0].value;h=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[0].color);}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[1]){d=this.CALCULATED_KPI_VALUE[1].title;f=this.CALCULATED_KPI_VALUE[1].value;j=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[1].color);}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[2]){e=this.CALCULATED_KPI_VALUE[2].title;g=this.CALCULATED_KPI_VALUE[2].value;l=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[2].color);}var o={status:s,actual:b,target:T.targetValue,cH:T.criticalHighValue,wH:T.warningHighValue,wL:T.warningLowValue,cL:T.criticalLowValue};var p={m1:m,v1:v,c1:h,m2:d,v2:f,c2:j,m3:e,v3:g,c3:l};var C=t.oDualComparisonView.oGenericTile.getTileContent()[0].getContent();var q=t.oDualComparisonView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,"NT",o);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(q,"COMP",p);},this.logError);}},flowWithDesignTimeCall:function(){var t=this;try{var a=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();});}}catch(e){this.logError(e);}},fetchKpiValue:function(s,E){var t=this;try{var u=this.oConfig.EVALUATION.ODATA_URL;var a=this.oConfig.EVALUATION.ODATA_ENTITYSET;if(this.oConfig.TILE_PROPERTIES.semanticMeasure){var m=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure;}else{var m=this.oConfig.EVALUATION.COLUMN_NAME;var b=m;if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES){for(var j=0;j<this.oConfig.TILE_PROPERTIES.COLUMN_NAMES.length;j++){if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[j].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){b=b+","+this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[j].COLUMN_NAME;}}}}var d=this.oConfig.EVALUATION_VALUES;var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!c){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var o={};o["0"]=m+",asc";o["1"]=m+",desc";var f=o[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var g=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(u),a,b,null,v,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){g.uri+="&$orderby="+f[0]+" "+f[2];}else{g.uri+="&$orderby="+f[0]+" "+f[1];}this.writeData={};this.comparisionChartODataRef=g.model.read(g.uri,null,null,true,function(d){if(d&&d.results&&d.results.length){if(g.unit){t.writeData.unit=g.unit;}t.oConfig.TILE_PROPERTIES.FINALVALUE=d;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,b.split(",")[0],g.unit);t.writeData.data=d;var k,l;for(var i=0;i<t.oConfig.TILE_PROPERTIES.FINALVALUE.length;i++){if(t.oConfig.TILE_PROPERTIES.FINALVALUE[i].title==t.DEFINITION_DATA.EVALUATION.COLUMN_NAME){t.writeData.numericData=t.oConfig.TILE_PROPERTIES.FINALVALUE[i];calculatedValueforScaling=t.oConfig.TILE_PROPERTIES.FINALVALUE[i].value;t.getTrendIndicator(t.setThresholdValues().trendValue,calculatedValueforScaling);t._updateTileModel({valueColor:t.oConfig.TILE_PROPERTIES.FINALVALUE[i].color,value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(l),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION).toString()});break;}}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(d.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=d;t.writeData.data=d;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else{E.call(t,"no Response from QueryServiceUri");}},function(i){if(i&&i.response){jQuery.sap.log.error(i.message+" : "+i.request.requestUri);E.call(t,i);}});if(!t.writeData.numericData){var h=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(t.DEFINITION_DATA.EVALUATION_FILTERS,t.DEFINITION_DATA.ADDITIONAL_FILTERS);var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(u),a,m,null,h);if(q){t.QUERY_SERVICE_MODEL=q.model;t.queryUriForKpiValue=q.uri;t.numericODataReadRef=t.QUERY_SERVICE_MODEL.read(q.uri,null,null,true,function(d){if(d&&d.results&&d.results.length){if(q.unit){t._updateTileModel({unitNumeric:d.results[0][q.unit.name]});t.writeData.unitNumeric=q.unit;t.writeData.unitNumeric.name=q.unit.name;}t.writeData.numericData=d.results[0];t.DEFINITION_DATA.value=t.writeData.numericData[t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];t.writeData.numericData.color=t.getTrendColor(t.setThresholdValues());t.DEFINITION_DATA.valueColor=t.writeData.numericData.color;var S="";var i=d.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var k=t.getTrendIndicator(t.setThresholdValues().trendValue,i);if(t.oConfig.EVALUATION.SCALING==-2){i*=100;t.getView().oNumericContent.setFormatterValue(false);}S=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(i),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}t._updateTileModel({value:S.toString(),valueColor:t.writeData.numericData.color,indicator:k});}else{E.call(t,"no Response from QueryServiceUri");}});}}}else{if(c.unit){t._updateTileModel({unit:c.data.results[0][c.unit.name]});}if(c.data&&c.data.results&&c.data.results.length){t.oConfig.TILE_PROPERTIES.FINALVALUE=c.data;t._updateTileModel({value:c.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME]});t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,b,t.writeData.unit);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(d.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=c.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else{E.call(t,"no Response from QueryServiceUri");}}}catch(e){E.call(t,e);}},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f+=","+o[t[i]];}}return f;},getTrendIndicator:function(t,v){var a=this;t=Number(t);try{var b=sap.suite.ui.commons.DeviationIndicator.None;if(t>v){b=sap.suite.ui.commons.DeviationIndicator.Down;}else if(t<v){b=sap.suite.ui.commons.DeviationIndicator.Up;}return b;}catch(e){a.logError(e);}},getTrendColor:function(t){var a=this;var c,w,b,d;try{var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var r=sap.suite.ui.commons.InfoTileValueColor.Neutral;if(i==="MI"){if(t.criticalHighValue&&t.warningHighValue){c=Number(t.criticalHighValue);w=Number(t.warningHighValue);if(this.CALCULATED_KPI_VALUE<w){r=sap.suite.ui.commons.InfoTileValueColor.Good;}else if(this.CALCULATED_KPI_VALUE<=c){r=sap.suite.ui.commons.InfoTileValueColor.Critical;}else{r=sap.suite.ui.commons.InfoTileValueColor.Error;}}}else if(i==="MA"){if(t.criticalLowValue&&t.warningLowValue){b=Number(t.criticalLowValue);d=Number(t.warningLowValue);if(this.CALCULATED_KPI_VALUE<b){r=sap.suite.ui.commons.InfoTileValueColor.Error;}else if(this.CALCULATED_KPI_VALUE<=d){r=sap.suite.ui.commons.InfoTileValueColor.Critical;}else{r=sap.suite.ui.commons.InfoTileValueColor.Good;}}}else{if(t.warningLowValue&&t.warningHighValue&&t.criticalLowValue&&t.criticalHighValue){c=Number(t.criticalHighValue);w=Number(t.warningHighValue);d=Number(t.warningLowValue);b=Number(t.criticalLowValue);if(this.CALCULATED_KPI_VALUE<b||this.CALCULATED_KPI_VALUE>c){r=sap.suite.ui.commons.InfoTileValueColor.Error;}else if((this.CALCULATED_KPI_VALUE>=b&&this.CALCULATED_KPI_VALUE<=d)||(this.CALCULATED_KPI_VALUE>=w&&this.CALCULATED_KPI_VALUE<=c)){r=sap.suite.ui.commons.InfoTileValueColor.Critical;}else{r=sap.suite.ui.commons.InfoTileValueColor.Good;}}}return r;}catch(e){a.logError(e);}},_processDataForComparisonChart:function(d,m,u){var f=[],L={},i,t,l;var a;var T=[];var b=this;for(i=0;i<d.results.length;i++){var e=d.results[i];}T=sap.ushell.components.tiles.indicatorTileUtils.util.getAllMeasuresWithLabelText(this.oConfig.EVALUATION.ODATA_URL,this.oConfig.EVALUATION.ODATA_ENTITYSET);for(i=0,l=T.length;i<l;i++){t=T[i];L[t.key]=t.value;}var c=b.oConfig.TILE_PROPERTIES.COLUMN_NAMES||b.oConfig.EVALUATION.COLUMN_NAMES;for(i=0;i<c.length;i++){var g={};var h=c[i];g.value=Number(e[h.COLUMN_NAME]);var j=Number(e[h.COLUMN_NAME]);if(b.oConfig.EVALUATION.SCALING==-2){j*=100;}a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(j,b.oConfig.EVALUATION.SCALING,b.oConfig.EVALUATION.DECIMAL_PRECISION);if(b.oConfig.EVALUATION.SCALING==-2){a+=" %";}g.displayValue=a.toString();if(u[i]&&e[u[i].name]){g.displayValue+=" "+e[u[i].name];}g.color=h.semanticColor;g.title=L[h.COLUMN_NAME]||h.COLUMN_NAME;f.push(g);}return f;},setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;}catch(e){t.logError(e);}},logError:function(e){this.oDualComparisonView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);this.oDualComparisonView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e);},refreshHandler:function(c){if(!c.firstTimeVisible){if(Number(this.oChip.configuration.getParameterValueAsString("isSufficient"))){c.flowWithoutDesignTimeCall();}else{c.flowWithDesignTimeCall();}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}if(i){this.refreshHandler(this);}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}});sap.ui.controller("tiles.indicatorDualContribution.DualContribution",{onInit:function(){var t=this;t.writeData={};this.firstTimeVisible=false;this.oDualContributionView=this.getView();this.oChip=this.oDualContributionView.getViewData().chip;if(this.oChip.visible){this.oChip.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oChip.url.getApplicationSystem();this.oDualContributionView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oChip.configuration.getParameterValueAsString("tileConfiguration"),function(c){t.oConfig=c;if(t.oChip.preview){t.oChip.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system));}if(t.oChip.preview.isEnabled()){t.setTitle();t._updateTileModel({value:8888,size:sap.suite.ui.commons.InfoTileSize.Auto,frameType:"TwoByOne",state:sap.suite.ui.commons.LoadState.Loading,valueColor:sap.suite.ui.commons.InfoTileValueColor.Error,indicator:sap.suite.ui.commons.DeviationIndicator.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral",displayValue:""},{title:"EMEA",value:50,color:"Neutral",displayValue:""},{title:"APAC",value:-20,color:"Neutral",displayValue:""}]});t.oDualContributionView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);}else{t.oConfig.TILE_PROPERTIES.FINALVALUE;t.setTitle();t.oDualContributionView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.comparisionChartODataRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});if(Number(t.oChip.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();}else{t.flowWithDesignTimeCall();}}});}catch(e){this.logError(e);}},getTile:function(){return this.oDualContributionView.oGenericTile;},setTitle:function(){var t=this;var a=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oChip);this._updateTileModel({header:a.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:a.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m);this.getTile().getModel().updateBindings();},flowWithoutDesignTimeCall:function(){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oChip.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(k,c){this.CALCULATED_KPI_VALUE=k;if(t.oConfig.TILE_PROPERTIES.frameType=="TwoByOne"){t.oDualContributionView.oGenericTile.setFrameType("TwoByOne");t.oDualContributionView.oGenericTile.removeAllTileContent();t.oDualContributionView.oGenericTile.addTileContent(t.oDualContributionView.oNumericTile);t.oDualContributionView.oGenericTile.addTileContent(t.oDualContributionView.oComparisonTile);}else{t.oDualContributionView.oGenericTile.setFrameType("OneByOne");t.oDualContributionView.oGenericTile.removeAllTileContent();t.oDualContributionView.oGenericTile.addTileContent(t.oDualContributionView.oComparisonTile);}var d=this.CALCULATED_KPI_VALUE;var a=this.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution;for(var i=0;i<this.CALCULATED_KPI_VALUE.length;i++){d[i].color=a;}this._updateTileModel({data:d});var T=t.setThresholdValues();var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oDualContributionView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oDualContributionView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);var s="";if(a=="Error"){s="sb.error";}if(a=="Neutral"){s="sb.neutral";}if(a=="Critical"){s="sb.critical";}if(a=="Good"){s="sb.good";}var T=t.setThresholdValues();var m,b,e,v,f,g,h,j,l;if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[0]){m=this.CALCULATED_KPI_VALUE[0].title;v=this.CALCULATED_KPI_VALUE[0].value;h=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[0].color);}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[1]){b=this.CALCULATED_KPI_VALUE[1].title;f=this.CALCULATED_KPI_VALUE[1].value;j=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[1].color);}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[2]){e=this.CALCULATED_KPI_VALUE[2].title;g=this.CALCULATED_KPI_VALUE[2].value;l=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[2].color);}var o={status:s,actual:c,target:T.targetValue,cH:T.criticalHighValue,wH:T.warningHighValue,wL:T.warningLowValue,cL:T.criticalLowValue};var p={m1:m,v1:v,c1:h,m2:b,v2:f,c2:j,m3:e,v3:g,c3:l};var C=t.oDualContributionView.oGenericTile.getTileContent()[0].getContent();var q=t.oDualContributionView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,"NT",o);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(q,"CONT",p);},this.logError);}},flowWithDesignTimeCall:function(){var t=this;try{var a=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();});}}catch(e){this.logError(e);}},fetchKpiValue:function(s,E){var t=this;try{var u=this.oConfig.EVALUATION.ODATA_URL;var a=this.oConfig.EVALUATION.ODATA_ENTITYSET;if(this.oConfig.TILE_PROPERTIES.semanticMeasure){var m=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure;}else{var m=this.oConfig.EVALUATION.COLUMN_NAME;}var d=this.oConfig.TILE_PROPERTIES.dimension;var b=this.oConfig.EVALUATION_VALUES;var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!c){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var o={};o["0"]=m+",asc";o["1"]=m+",desc";o["2"]=d+",asc";o["3"]=d+",desc";var f=o[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var g=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(u),a,m,d,v,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){g.uri+="&$top=3&$orderby="+f[0]+" "+f[2];}else{g.uri+="&$top=3&$orderby="+f[0]+" "+f[1];}this.comparisionChartODataRef=g.model.read(g.uri,null,null,true,function(b){if(g.unit[0]){t._updateTileModel({unitContribution:b.results[0][g.unit[0].name]});t.writeData.unitContribution=g.unit[0];t.writeData.unitContribution.name=g.unit[0].name;}if(b&&b.results&&b.results.length){d=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oChip.url.addSystemToServiceUrl(u),a,d);t.writeData.dimension=d;t.oConfig.TILE_PROPERTIES.FINALVALUE=b;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,m.split(",")[0],d);t.writeData.data=b;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(b.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=b;t.writeData.data=b;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);}else{E.call(t,"no Response from QueryServiceUri");}},function(k){if(k&&k.response){jQuery.sap.log.error(k.message+" : "+k.request.requestUri);E.call(t,k);}});var h=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(t.DEFINITION_DATA.EVALUATION_FILTERS,t.DEFINITION_DATA.ADDITIONAL_FILTERS);var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(u),a,m,null,h);if(q){t.QUERY_SERVICE_MODEL=q.model;t.queryUriForKpiValue=q.uri;t.numericODataReadRef=t.QUERY_SERVICE_MODEL.read(q.uri,null,null,true,function(b){if(b&&b.results&&b.results.length){if(q.unit){t._updateTileModel({unitNumeric:b.results[0][q.unit.name]});t.writeData.unitNumeric=q.unit;t.writeData.unitNumeric.name=q.unit.name;}t.writeData.numericData=b;var S="";var i=b.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var j=t.getTrendIndicator(t.setThresholdValues().trendValue,i);if(t.oConfig.EVALUATION.SCALING==-2){i*=100;t.getView().oNumericContent.setFormatterValue(false);}t.DEFINITION_DATA.value=i;S=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(i),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}t._updateTileModel({value:S.toString(),valueColor:t.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution,indicator:j});s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE,i);}else{E.call(t,"no Response from QueryServiceUri");}});}}else{var T=t.setThresholdValues();var i;if(c.unitContribution){t._updateTileModel({unitContribution:c.data.results[0][c.unitContribution.name]});}if(c.unitNumeric){t._updateTileModel({unitNumeric:c.numericData.results[0][c.unitNumeric.name]});}if(c.data&&c.data.results&&c.data.results.length){d=c.dimension;t.oConfig.TILE_PROPERTIES.FINALVALUE=c.data;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,m.split(",")[0],d);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(b.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=c.data;}else{E.call(t,"no Response from QueryServiceUri");}if(c.numericData&&c.numericData.results&&c.numericData.results.length){i=c.numericData.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(t.oConfig.EVALUATION.SCALING==-2){i*=100;t.getView().oNumericContent.setFormatterValue(false);}var S=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(i),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}var j=t.getTrendIndicator(T.trendValue,i);t._updateTileModel({value:S.toString(),indicator:j,valueColor:t.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution});s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE,i);}else{E.call(t,"no Response from QueryServiceUri");}}}catch(e){E.call(t,e);}},setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;}catch(e){t.logError(e);}},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f+=","+o[t[i]];}}return f;},getTrendIndicator:function(t,v){var a=this;t=Number(t);try{var b=sap.suite.ui.commons.DeviationIndicator.None;if(t>v){b=sap.suite.ui.commons.DeviationIndicator.Down;}else if(t<v){b=sap.suite.ui.commons.DeviationIndicator.Up;}return b;}catch(e){a.logError(e);}},_processDataForComparisonChart:function(d,m,a){var s=this.oConfig.TILE_PROPERTIES.semanticMeasure;var f=[];var t;for(var i=0;i<d.results.length;i++){var b=d.results[i];var c={};try{c.title=b[a].toString();}catch(e){c.title="";}c.value=Number(b[m]);var g=Number(b[m]);if(this.oConfig.EVALUATION.SCALING==-2){g*=100;}t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(g,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION);c.displayValue=t.toString();if(typeof s==='undefined'){c.color="Neutral";}else{if(this.oConfig.EVALUATION.GOAL_TYPE==="MA"){if(c.value>b[s]){c.color="Good";}else{c.color="Error";}}else if(this.oConfig.EVALUATION.GOAL_TYPE==="MI"){if(c.value<b[s]){c.color="Good";}else{c.color="Error";}}else{c.color="Neutral";}}f.push(c);}return f;},logError:function(e){this.oDualContributionView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);this.oDualContributionView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e);},refreshHandler:function(c){if(!c.firstTimeVisible){if(Number(this.oChip.configuration.getParameterValueAsString("isSufficient"))){c.flowWithoutDesignTimeCall();}else{c.flowWithDesignTimeCall();}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}if(i){this.refreshHandler(this);}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}});(function(){"use strict";sap.ui.controller("tiles.indicatorDualDeviation.DualDeviation",{onInit:function(){var t=this;this.firstTimeVisible=false;this.oDualDeviationView=this.getView();this.oViewData=this.oDualDeviationView.getViewData();this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oTileApi.url.getApplicationSystem();this.oDualDeviationView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(t.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),function(c){t.oConfig=c;t.setTextInTile();if(t.oTileApi.preview){t.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system));}if(t.oTileApi.preview.isEnabled()){t._updateTileModel({valueColor:"Good",value:100,frameType:"TwoByOne",unit:"USD",actual:{value:120,color:sap.suite.ui.commons.InfoTileValueColor.Good},targetValue:100,thresholds:[{value:0,color:sap.suite.ui.commons.InfoTileValueColor.Error},{value:50,color:sap.suite.ui.commons.InfoTileValueColor.Critical},{value:150,color:sap.suite.ui.commons.InfoTileValueColor.Critical},{value:200,color:sap.suite.ui.commons.InfoTileValueColor.Error}],showActualValue:true,showTargetValue:true});t.oDualDeviationView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);}else{t.oDualDeviationView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});if(Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();}else{t.flowWithDesignTimeCall();}}});}catch(e){this.logError(e);}},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new sap.ui.model.json.JSONModel({}));}},getTile:function(){return this.oDualDeviationView.oGenericTile;},_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m);},fetchKpiValue:function(s,E){var t=this;var k=0;try{var u=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var a=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var T=this.setThresholdValues();var m=T.fullyFormedMeasure;var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!c){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),a,m,null,v);if(q){this.QUERY_SERVICE_MODEL=q.model;this.queryUriForKpiValue=q.uri;try{this.queryServiceUriODataReadRef=this.QUERY_SERVICE_MODEL.read(q.uri,null,null,true,function(f){t.writeData={};if(f&&f.results&&f.results.length){k=f.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(q.unit[0]){t._updateTileModel({unit:f.results[0][q.unit[0].name]});t.writeData.unit=q.unit[0];t.writeData.unit.name=q.unit[0].name;}t.writeData.numericData=f;var S="",d;var b=k;if(t.oConfig.EVALUATION.SCALING==-2){b*=100;t.getView().oNumericContent.setFormatterValue(false);}S=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(b),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);d=t.getTrendIndicator(T.trendValue,b);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}t._updateTileModel({value:S.toString(),indicator:d,valueColor:t.getThresholdsObjAndColor(T).returnColor});t.writeData.data=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=f.results[0][T.sCriticalHigh];T.criticalLowValue=f.results[0][T.sCriticalLow];T.warningHighValue=f.results[0][T.sWarningHigh];T.warningLowValue=f.results[0][T.sWarningLow];T.targetValue=f.results[0][T.sTarget];T.trendValue=f.results[0][T.sTrend];}s.call(t,k,T);}else{E.call(t,"no Response from QueryServiceUri");}},function(f){if(f&&f.response){E.call(t,f.message);}});}catch(e){t.logError("Error in Query Service URI");}}}else{if(c.data&&c.data.results&&c.data.results.length){var b,S,d,T;T=t.setThresholdValues();b=c.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(t.oConfig.EVALUATION.SCALING==-2){b*=100;t.getView().oNumericContent.setFormatterValue(true);}if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}S=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(b),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);d=t.getTrendIndicator(T.trendValue,b);if(c.unit){t._updateTileModel({unit:c.data.results[0][c.unit.name]});}t._updateTileModel({indicator:d,value:S.toString()});if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=c.data.results[0][T.sCriticalHigh];T.criticalLowValue=c.data.results[0][T.sCriticalLow];T.warningHighValue=c.data.results[0][T.sWarningHigh];T.warningLowValue=c.data.results[0][T.sWarningLow];T.targetValue=c.data.results[0][T.sTarget];T.trendValue=c.data.results[0][T.sTrend];}s.call(t,c.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME],T);}else{E.call(t,"no Response from QueryServiceUri");}}}catch(e){E.call(t,e);}},getTrendIndicator:function(t,v){var a=this;t=Number(t);try{var b=sap.suite.ui.commons.DeviationIndicator.None;if(t>v){b=sap.suite.ui.commons.DeviationIndicator.Down;}else if(t<v){b=sap.suite.ui.commons.DeviationIndicator.Up;}return b;}catch(e){a.logError(e);}},getThresholdsObjAndColor:function(t){try{var T={};T.arrObj=[];T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Neutral;var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var w,c,a,b;if(i==="MI"){a=Number(t.criticalHighValue)||0;b=Number(t.warningHighValue)||0;if(a&&b){a=window.parseFloat(a);b=window.parseFloat(b);T.arrObj.push({value:a,color:sap.suite.ui.commons.InfoTileValueColor.Error});T.arrObj.push({value:b,color:sap.suite.ui.commons.InfoTileValueColor.Critical});if(this.CALCULATED_KPI_VALUE<b){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Good;}else if(this.CALCULATED_KPI_VALUE<=a){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Critical;}else{T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Error;}}}else if(i==="MA"){c=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(c&&w){c=window.parseFloat(c);w=window.parseFloat(w);T.arrObj.push({value:c,color:sap.suite.ui.commons.InfoTileValueColor.Error});T.arrObj.push({value:w,color:sap.suite.ui.commons.InfoTileValueColor.Critical});if(this.CALCULATED_KPI_VALUE<c){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Error;}else if(this.CALCULATED_KPI_VALUE<=w){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Critical;}else{T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Good;}}}else{a=Number(t.criticalHighValue)||0;b=Number(t.warningHighValue)||0;c=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(w&&b&&c&&c){a=window.parseFloat(a);b=window.parseFloat(b);w=window.parseFloat(w);c=window.parseFloat(c);T.arrObj.push({value:a,color:sap.suite.ui.commons.InfoTileValueColor.Error});T.arrObj.push({value:b,color:sap.suite.ui.commons.InfoTileValueColor.Critical});T.arrObj.push({value:w,color:sap.suite.ui.commons.InfoTileValueColor.Critical});T.arrObj.push({value:c,color:sap.suite.ui.commons.InfoTileValueColor.Error});if(this.CALCULATED_KPI_VALUE<c||this.CALCULATED_KPI_VALUE>a){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Error;}else if((this.CALCULATED_KPI_VALUE>=c&&this.CALCULATED_KPI_VALUE<=w)||(this.CALCULATED_KPI_VALUE>=b&&this.CALCULATED_KPI_VALUE<=a)){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Critical;}else{T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Good;}}}return T;}catch(e){this.logError(e);}},flowWithoutDesignTimeCall:function(){var t=this;var f,a;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(k,b){var c=Number(k);if(this.oConfig.EVALUATION.SCALING==-2){c*=100;}f=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(c),this.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);this.CALCULATED_KPI_VALUE=Number(k);var d={};var e=this.getThresholdsObjAndColor(b);var g={value:Number(k),color:e.returnColor};d.valueColor=g.color;d.actualValueLabel=f.toString();d.actual=g;var h=this.DEFINITION_DATA.EVALUATION_VALUES;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var i=Number(b.targetValue);if(this.oConfig.EVALUATION.SCALING==-2){i*=100;}a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(i,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION);d.targetValue=Number(b.targetValue);d.targetValueLabel=a.toString();}else{for(var j=0;j<h.length;j++){if(h[j].TYPE==="TA"){var i=Number(h[j].FIXED);if(this.oConfig.EVALUATION.SCALING==-2){i*=100;}a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(i);d.targetValue=Number(h[j].FIXED);d.targetValueLabel=a.toString();}}}this._updateTileModel(d);var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oDualDeviationView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oDualDeviationView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);var s="";if(d.valueColor=="Error"){s="sb.error";}if(d.valueColor=="Neutral"){s="sb.neutral";}if(d.valueColor=="Critical"){s="sb.critical";}if(d.valueColor=="Good"){s="sb.good";}var v={status:s,actual:c,target:b.targetValue,cH:b.criticalHighValue,wH:b.warningHighValue,wL:b.warningLowValue,cL:b.criticalLowValue};var l=v;var C=t.oDualDeviationView.oGenericTile.getTileContent()[0].getContent();var o=t.oDualDeviationView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,"NT",v);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(o,"DT",l);},this.logError);}},flowWithDesignTimeCall:function(){var t=this;try{var a=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();});}}catch(e){this.logError(e);}},setTextInTile:function(){var t=this;var a=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:a.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:a.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},logError:function(e){this.oDualDeviationView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);this.oDualDeviationView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e);},setThresholdValues:function(){var t=this;var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f+=","+o[t[i]];}}return f;},refreshHandler:function(c){if(!c.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient"))){c.flowWithoutDesignTimeCall();}else{c.flowWithDesignTimeCall();}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);}if(i){this.refreshHandler(this);}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);}});}());(function(){"use strict";sap.ui.controller("tiles.indicatorDualTrend.DualTrend",{onInit:function(){var t=this;this.firstTimeVisible=false;this.oDualTrendView=this.getView();this.oViewData=this.oDualTrendView.getViewData();this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oTileApi.url.getApplicationSystem();this.oDualTrendView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loading);if(this.oTileApi.preview.isEnabled()){this.setTextInTile();this._updateTileModel({value:8888,size:sap.suite.ui.commons.InfoTileSize.Auto,frameType:"TwoByOne",state:sap.suite.ui.commons.LoadState.Loading,valueColor:sap.suite.ui.commons.InfoTileValueColor.Error,indicator:sap.suite.ui.commons.DeviationIndicator.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});this.oDualTrendView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);}else{try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),function(c){t.oConfig=c;t.setTextInTile();t.oDualTrendView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});if(Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();}else{t.flowWithDesignTimeCall();}});}catch(e){this.logError(e);}}},getTile:function(){return this.oDualTrendView.oGenericTile;},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new sap.ui.model.json.JSONModel({}));}},_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m);},setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;}catch(e){t.logError(e);}},getTrendIndicator:function(t,v){var a=this;t=Number(t);try{var b=sap.suite.ui.commons.DeviationIndicator.None;if(t>v){b=sap.suite.ui.commons.DeviationIndicator.Down;}else if(t<v){b=sap.suite.ui.commons.DeviationIndicator.Up;}return b;}catch(e){a.logError(e);}},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f+=","+o[t[i]];}}return f;},getTrendColor:function(t){var a=this;try{var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var r=sap.suite.ui.commons.InfoTileValueColor.Neutral;if(i==="MI"){if(t.criticalHighValue&&t.warningHighValue){t.criticalHighValue=Number(t.criticalHighValue);t.warningHighValue=Number(t.warningHighValue);if(this.CALCULATED_KPI_VALUE<t.warningHighValue){r=sap.suite.ui.commons.InfoTileValueColor.Good;}else if(this.CALCULATED_KPI_VALUE<=t.criticalHighValue){r=sap.suite.ui.commons.InfoTileValueColor.Critical;}else{r=sap.suite.ui.commons.InfoTileValueColor.Error;}}}else if(i==="MA"){if(t.criticalLowValue&&t.warningLowValue){t.criticalLowValue=Number(t.criticalLowValue);t.warningLowValue=Number(t.warningLowValue);if(this.CALCULATED_KPI_VALUE<t.criticalLowValue){r=sap.suite.ui.commons.InfoTileValueColor.Error;}else if(this.CALCULATED_KPI_VALUE<=t.warningLowValue){r=sap.suite.ui.commons.InfoTileValueColor.Critical;}else{r=sap.suite.ui.commons.InfoTileValueColor.Good;}}}else{if(t.warningLowValue&&t.warningHighValue&&t.criticalLowValue&&t.criticalHighValue){t.criticalHighValue=Number(t.criticalHighValue);t.warningHighValue=Number(t.warningHighValue);t.warningLowValue=Number(t.warningLowValue);t.criticalLowValue=Number(t.criticalLowValue);if(this.CALCULATED_KPI_VALUE<t.criticalLowValue||this.CALCULATED_KPI_VALUE>t.criticalHighValue){r=sap.suite.ui.commons.InfoTileValueColor.Error;}else if((this.CALCULATED_KPI_VALUE>=t.criticalLowValue&&this.CALCULATED_KPI_VALUE<=t.warningLowValue)||(this.CALCULATED_KPI_VALUE>=t.warningHighValue&&this.CALCULATED_KPI_VALUE<=t.criticalHighValue)){r=sap.suite.ui.commons.InfoTileValueColor.Critical;}else{r=sap.suite.ui.commons.InfoTileValueColor.Good;}}}return r;}catch(e){a.logError(e);}},onAfterFinalEvaluation:function(){var t=this;var u=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var E=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var m=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var d=this.DEFINITION_DATA.TILE_PROPERTIES.dimension;if(d==undefined){this.logError();return;}var g=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var c=this.DEFINITION_DATA.EVALUATION_VALUES;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var f=m;switch(g){case"MI":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningHigh&&t.sCriticalHigh&&t.sTarget){f+=","+t.sWarningHigh+","+t.sCriticalHigh+","+t.sTarget;}break;case"MA":t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget){f+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget;}break;case"RA":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget&&t.sWarningHigh&&t.sCriticalHigh){f+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget+","+t.sWarningHigh+","+t.sCriticalHigh;}break;}var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),E,f,d,v);}else{var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),E,m,d,v);}var h=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!h){if(q){this.queryUriForTrendChart=q.uri;t.writeData={};try{this.trendChartODataReadRef=q.model.read(q.uri,null,null,true,function(a){if(a&&a.results&&a.results.length){if(q.unit[0]){t.unit=a.results[0][q.unit[0].name];t.writeData.unit=q.unit[0];t.writeData.unit.name=q.unit[0].name;}t.queryUriResponseForTrendChart=a;d=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oTileApi.url.addSystemToServiceUrl(u),E,d);a.firstXlabel=a.results[0][d];a.lastXlabel=a.results[a.results.length-1][d];t.writeData.data=a;t.writeData.dimensionName=d;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oDualTrendView.oGenericTile.$().wrap("<a href ='"+n+"'/>");t.oDualTrendView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);_(a,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);}else{t.logError("no Response from QueryServiceUri");}},function(a){if(a&&a.response){t.logError("Data call failed");}});}catch(e){t.logError(e);}}else{t.logError();}var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(t.DEFINITION_DATA.EVALUATION_FILTERS,t.DEFINITION_DATA.ADDITIONAL_FILTERS);var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),E,m,null,v);if(q){t.QUERY_SERVICE_MODEL=q.model;t.queryUriForKpiValue=q.uri;t.numericODataReadRef=t.QUERY_SERVICE_MODEL.read(q.uri,null,null,true,function(a){if(a&&a.results&&a.results.length){var s="";var j=a.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];t.writeData.numericData=a;if(t.oConfig.EVALUATION.SCALING==-2){j*=100;}s=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(j),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}var k=t.getTrendIndicator(t.setThresholdValues().trendValue,j);t._updateTileModel({value:s.toString(),valueColor:t.getTrendColor(t.setThresholdValues()),indicator:k});}else{fnError.call(t,"no Response from QueryServiceUri");}});}}else{try{if(h.unit!==undefined){t.unit=h.data.results[0][h.unit.name];}t.queryUriResponseForTrendChart=h.data;d=h.dimensionName;var j=h.numericData.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var k=t.getTrendIndicator(t.setThresholdValues().trendValue,h.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME]);var s=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(j),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);t.oDualTrendView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);_(h.data,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);t._updateTileModel({value:s.toString(),valueColor:t.getTrendColor(t.setThresholdValues()),indicator:k});}catch(e){t.logError(e);}}function _(l,n){var o=[];var p=[];var w=[];var r=[];var x=[];var y=[];var z=l.firstXlabel;var A,B,C,D,F;var G=l.lastXlabel;var H=Number(l.results[0][m]);var I=Number(l.results[l.results.length-1][m]);var i;for(i in l.results){l.results[i][d]=Number(i);l.results[i][m]=Number(l.results[i][m]);t.sWarningHigh?l.results[i][t.sWarningHigh]=Number(l.results[i][t.sWarningHigh]):"";t.sCriticalHigh?l.results[i][t.sCriticalHigh]=Number(l.results[i][t.sCriticalHigh]):"";t.sCriticalLow?l.results[i][t.sCriticalLow]=Number(l.results[i][t.sCriticalLow]):"";t.sWarningLow?l.results[i][t.sWarningLow]=Number(l.results[i][t.sWarningLow]):"";t.sTarget?l.results[i][t.sTarget]=Number(l.results[i][t.sTarget]):"";t.sWarningHigh?w.push(l.results[i][t.sWarningHigh]):"";t.sCriticalHigh?r.push(l.results[i][t.sCriticalHigh]):"";t.sCriticalLow?x.push(l.results[i][t.sCriticalLow]):"";t.sWarningLow?y.push(l.results[i][t.sWarningLow]):"";o.push(l.results[i][d]);p.push(l.results[i][m]);}try{z=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(z);G=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(G);}catch(e){t.logError(e);}var J=Number(H);if(t.oConfig.EVALUATION.SCALING==-2){J*=100;}var K=Math.min.apply(Math,p);var L=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(J,t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){L+=" %";}var M=L.toString();var N=Number(I);if(t.oConfig.EVALUATION.SCALING==-2){N*=100;}var O=Math.max.apply(Math,p);var P=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(N,t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){P+=" %";}var Q=P.toString();try{var R=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.min.apply(Math,o));var S=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.max.apply(Math,o));}catch(e){t.logError(e);}if(n=="MEASURE"){(w.length!=0)?(t.firstwH=w[R])&&(t.lastwH=w[S]):"";(r.length!=0)?(t.firstcH=r[R])&&(t.lastcH=r[S]):"";(x.length!=0)?(t.firstcL=x[R])&&(t.lastcL=x[S]):"";(y.length!=0)?(t.firstwL=y[R])&&(t.lastwL=y[S]):"";}var T={width:"100%",height:"100%",unit:t.unit||"",chart:{color:"Neutral",data:l.results},size:"Auto",minXValue:R,maxXValue:S,minYValue:K,maxYValue:O,firstXLabel:{label:z+"",color:"Neutral"},lastXLabel:{label:G+"",color:"Neutral"},firstYLabel:{label:M+"",color:"Neutral"},lastYLabel:{label:Q+"",color:"Neutral"},minLabel:{},maxLabel:{}};switch(g){case"MA":for(i in c){if(c[i].TYPE=="CL"){T.minThreshold={color:"Error"};var U={};U[d]="";U[m]=Number(c[i].FIXED);t.cl=Number(c[i].FIXED);T.minThreshold.data=(n=="MEASURE")?l.results:[U];A=(n=="MEASURE")?t.sCriticalLow:m;}else if(c[i].TYPE=="WL"){T.maxThreshold={color:"Good"};var U={};U[d]="";U[m]=Number(c[i].FIXED);T.maxThreshold.data=(n=="MEASURE")?l.results:[U];B=(n=="MEASURE")?t.sWarningLow:m;t.wl=Number(c[i].FIXED);}else if(c[i].TYPE=="TA"){var U={};U[d]="";U[m]=Number(c[i].FIXED);T.target={color:"Neutral"};T.target.data=(n=="MEASURE")?l.results:[U];F=(n=="MEASURE")?t.sTarget:m;}}T.innerMinThreshold={data:[]};T.innerMaxThreshold={data:[]};if(n=="FIXED"){T.firstYLabel.color=H<t.cl?"Error":((t.cl<=H)&&(H<=t.wl))?"Critical":(H>t.wl)?"Good":"Neutral";T.lastYLabel.color=I<t.cl?"Error":((t.cl<=I)&&(I<=t.wl))?"Critical":(I>t.wl)?"Good":"Neutral";}else if(n=="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL){T.firstYLabel.color=H<t.firstcL?"Error":((t.firstcL<=H)&&(H<=t.firstwL))?"Critical":(H>t.firstwL)?"Good":"Neutral";T.lastYLabel.color=I<t.lastcL?"Error":((t.lastcL<=I)&&(I<=t.lastwL))?"Critical":(I>t.lastwL)?"Good":"Neutral";}break;case"MI":for(i in c){if(c[i].TYPE=="CH"){var U={};U[d]="";U[m]=Number(c[i].FIXED);t.ch=Number(c[i].FIXED);T.maxThreshold={color:"Error"};T.maxThreshold.data=(n=="MEASURE")?l.results:[U];B=(n=="MEASURE")?t.sCriticalHigh:m;}else if(c[i].TYPE=="WH"){var U={};U[d]="";U[m]=Number(c[i].FIXED);t.wh=Number(c[i].FIXED);T.minThreshold={color:"Good"};T.minThreshold.data=(n=="MEASURE")?l.results:[U];A=(n=="MEASURE")?t.sWarningHigh:m;}else if(c[i].TYPE=="TA"){var U={};U[d]="";U[m]=Number(c[i].FIXED);T.target={color:"Neutral"};T.target.data=(n=="MEASURE")?l.results:[U];F=(n=="MEASURE")?t.sTarget:m;}}if(n=="FIXED"){T.firstYLabel.color=H>t.ch?"Error":((t.wh<=H)&&(H<=t.ch))?"Critical":(H<t.wh)?"Good":"Neutral";T.lastYLabel.color=I>t.ch?"Error":((t.wh<=I)&&(I<=t.ch))?"Critical":(I<t.wh)?"Good":"Neutral";}else if(n=="MEASURE"&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){T.firstYLabel.color=H>t.firstcH?"Error":((t.firstwH<=H)&&(H<=t.firstcH))?"Critical":(H<t.firstwH)?"Good":"Neutral";T.lastYLabel.color=I>t.lastcH?"Error":((t.lastwH<=I)&&(I<=t.lastcH))?"Critical":(I<t.lastwH)?"Good":"Neutral";}T.innerMaxThreshold={data:[]};T.innerMinThreshold={data:[]};break;case"RA":for(i in c){if(c[i].TYPE=="CH"){var U={};U[d]="";U[m]=Number(c[i].FIXED);t.ch=Number(c[i].FIXED);T.maxThreshold={color:"Error"};T.maxThreshold.data=(n=="MEASURE")?l.results:[U];B=(n=="MEASURE")?t.sCriticalHigh:m;}else if(c[i].TYPE=="WH"){var U={};U[d]="";U[m]=Number(c[i].FIXED);t.wh=Number(c[i].FIXED);T.innerMaxThreshold={color:"Good"};T.innerMaxThreshold.data=(n=="MEASURE")?l.results:[U];D=(n=="MEASURE")?t.sWarningHigh:m;}else if(c[i].TYPE=="WL"){var U={};U[d]="";U[m]=Number(c[i].FIXED);t.wl=Number(c[i].FIXED);T.innerMinThreshold={color:"Good"};T.innerMinThreshold.data=(n=="MEASURE")?l.results:[U];C=(n=="MEASURE")?t.sWarningLow:m;}else if(c[i].TYPE=="CL"){var U={};U[d]="";U[m]=Number(c[i].FIXED);t.cl=Number(c[i].FIXED);T.minThreshold={color:"Error"};T.minThreshold.data=(n=="MEASURE")?l.results:[U];A=(n=="MEASURE")?t.sCriticalLow:m;}else if(c[i].TYPE=="TA"){var U={};U[d]="";U[m]=Number(c[i].FIXED);T.target={color:"Neutral"};T.target.data=(n=="MEASURE")?l.results:[U];F=(n=="MEASURE")?t.sTarget:m;}}if(n=="FIXED"){T.firstYLabel.color=(H>t.ch||H<t.cl)?"Error":((t.wh<=H)&&(H<=t.ch))||((t.cl<=H)&&(H<=t.wl))?"Critical":((H>=t.wl)&&(H<=t.wh))?"Good":"Neutral";T.lastYLabel.color=(I>t.ch||I<t.cl)?"Error":((t.wh<=I)&&(I<=t.ch))||((t.cl<=I)&&(I<=t.wl))?"Critical":((I>=t.wl)&&(I<=t.wh))?"Good":"Neutral";}else if(n=="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){T.firstYLabel.color=(H>t.firstcH||H<t.firstcL)?"Error":((t.firstwH<=H)&&(H<=t.firstcH))||((t.firstcL<=H)&&(H<=t.firstwL))?"Critical":((H>=t.firstwL)&&(H<=t.firstwH))?"Good":"Neutral";T.lastYLabel.color=(I>t.lastcH||I<t.lastcL)?"Error":((t.lastwH<=I)&&(I<=t.lastcH))||((t.lastcL<=I)&&(I<=t.lastwL))?"Critical":((I>=t.lastwL)&&(I<=t.lastwH))?"Good":"Neutral";}break;}var V=function(W,a,b,n){return new sap.suite.ui.commons.MicroAreaChartItem({color:"{/"+W+"/color}",points:{path:"/"+W+"/data",template:new sap.suite.ui.commons.MicroAreaChartPoint({x:"{"+a+"}",y:"{"+b+"}"})}});};t.getTile().getTileContent()[1].getContent().setTarget(V("target",d,F));t.getTile().getTileContent()[1].getContent().setInnerMinThreshold(V("innerMinThreshold",d,C));t.getTile().getTileContent()[1].getContent().setInnerMaxThreshold(V("innerMaxThreshold",d,D));t.getTile().getTileContent()[1].getContent().setMinThreshold(V("minThreshold",d,A));t.getTile().getTileContent()[1].getContent().setMaxThreshold(V("maxThreshold",d,B));t.getTile().getTileContent()[1].getContent().setChart(V("chart",d,m));t._updateTileModel(T);}},flowWithoutDesignTimeCall:function(){this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;}this.onAfterFinalEvaluation();},flowWithDesignTimeCall:function(){var t=this;try{var a=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();});}}catch(e){this.logError(e);}},setTextInTile:function(){var t=this;this._updateTileModel({header:t.oTileApi.preview.getTitle()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:t.oTileApi.preview.getDescription()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},logError:function(e){this.oDualTrendView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);this.oDualTrendView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e);},refreshHandler:function(c){if(!c.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient"))){c.flowWithoutDesignTimeCall();}else{c.flowWithDesignTimeCall();}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);}if(i){this.refreshHandler(this);}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);}});}());(function(){"use strict";sap.ui.controller("tiles.indicatorHarveyBall.HarveyBallTile",{onInit:function(){this.getView().setModel(new sap.ui.model.json.JSONModel());this.initializeVariables();this.attachHandlers();this.getVariable("tile").setState(sap.suite.ui.commons.LoadState.Loading);this.readChipConfiguration();},attachHandlers:function(){var t=this;var c=this.getVariable("chip");if(c.visible){c.visible.attachVisible(function(v){if(v){t.onVisible();}else{t.abortAllOpenODataRequests();}});}this.getVariable("tile").attachPress(function(){t.abortAllOpenODataRequests();var i=t.getVariable("indicatorUtils");t.getVariable("cache").setKpivalueById(t.getVariable("chipId"),null);window.location.hash=i.getNavigationTarget(t.getVariable("evalData"),t.getVariable("system"));});},initializeVariables:function(){this._variables={};this._oDataRequests={};var v=this.getView();var V=v.getViewData();var t=v.oTile;var c=V.chip;this.setVariable("indicatorUtils",sap.ushell.components.tiles.indicatorTileUtils.util);this.setVariable("cache",sap.ushell.components.tiles.indicatorTileUtils.cache);this.setVariable("hasAppeared",false);this.setVariable("chip",c);this.setVariable("tile",t);this.setVariable("tileControl",t.getTileContent()[0].getContent());this.setVariable("configurationString",c.configuration.getParameterValueAsString("tileConfiguration"));this.setVariable("system",c.url.getApplicationSystem());},getVariable:function(k){return this._variables[k];},setVariable:function(k,v){this._variables[k]=v;},readChipConfiguration:function(){var t=this;var c=this.getVariable("chip");var u=this.getVariable("indicatorUtils");u.getParsedChip(this.getVariable("configurationString"),function(e){t.setVariable("evalData",e);t.setVariable("chipId",e.TILE_PROPERTIES.id);t.setVariable("tileProperties",e.TILE_PROPERTIES);if(c.preview){c.preview.setTargetUrl(u.getNavigationTarget(e,t.getVariable("system")));t.loadPreviewData();if(c.preview.isEnabled()){t.getVariable("tile").setState(sap.suite.ui.commons.LoadState.Loaded);}else{t.loadActualData();}}});},loadPreviewData:function(){var t=this.getVariable("indicatorUtils").getTileTitleSubtitle(this.getVariable("chip"));this.getView().getModel().setData({fractionValue:34,value:100,size:sap.suite.ui.commons.InfoTileSize.Auto,frameType:"OneByOne",color:"Good",state:sap.suite.ui.commons.LoadState.Loading,header:t.title||this.getVariable("indicatorUtils").getChipTitle(this.getVariable("evalData")),subheader:t.subTitle||this.getVariable("indicatorUtils").getChipSubTitle(this.getVariable("evalData"))});},loadActualData:function(){if(Number(this.getVariable("chip").configuration.getParameterValueAsString("isSufficient"))){this.getVariable("cache").setEvaluationById(this.getVariable("chipId"),this.getVariable("evalData"));this.onEvalFiltersFetched();}else{this.fetchEvalFilters(this.onEvalFiltersFetched);}},registerOpenODataRequest:function(k,r){this._oDataRequests[k]=r;},deregisterOpenODataRequest:function(k){delete this._oDataRequests[k];},abortAllOpenODataRequests:function(){for(var a in this._oDataRequests){try{this.getVariable("indicatorUtils").abortPendingODataCalls(this._oDataRequests[a]);delete this._oDataRequests[a];}catch(e){}}},fetchKpiValue:function(p){function m(o,u,C,S,g){var D=o.read(u,null,null,true,function(h){t.deregisterOpenODataRequest(C.type);if(h&&h.results&&h.results.length){try{if(C.thresholds&&C.thresholds.length){t._setThresholdValues(h.results[0]);}k[C.type]=h.results[0][C.measure];k.unit=k.unit||h.results[0][C.unit]||"";if(--d==0){t.getVariable("cache").setKpivalueById(t.getVariable("chipId"),k);S.call(t,k);}}catch(e){t.logError(e);}}else{g.call(t,"no data");}},function(e){t.deregisterOpenODataRequest(C.type);if(e&&e.response){g.call(t,e.message);}});t.registerOpenODataRequest(C.type,D);}var t=this;var i=this.getVariable("indicatorUtils");var c=this.getVariable("cache").getKpivalueById(this.getVariable("chipId"));if(c){p.fnS.call(t,c);}else{var M=p.measure1,s=p.measure2;var u=p.url,E=p.entitySet;var v=p.filters;var f=p.fractionFilters.concat(v);var q,Q;var a,b,k;var d=2;f.forEach(function(e){e.value=e.value+"";e.valueTo=e.valueTo+"";});if(p.thresholds&&p.thresholds.length){q=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(u),E,M+","+p.thresholds,null,v);}else{q=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(u),E,M,null,v);}Q=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(u),E,s,null,f);a=q.unit[0];b=Q.unit[0];k={kpiValue:null,fractionValue:null,unit:""};if(q){m(q.model,q.uri,{measure:M,type:"kpiValue",unit:a,thresholds:p.thresholds},p.fnS,p.fnE);}if(Q){m(Q.model,Q.uri,{measure:s,type:"fractionValue",unit:b},p.fnS,p.fnE);}if(!(q&&Q)){p.fnE.call(t,"Error Preparing Query Service URI");}}},_setThresholdValues:function(d){var t=this.getVariable("oThreshold");if(t){if(this.getVariable("evalData").EVALUATION.VALUES_SOURCE=="RELATIVE"){if(t["TA"].COLUMN_NAME){t["TA"].VALUE=parseFloat(d[t["TA"].COLUMN_NAME]);for(var e in t){if(!t[e].COLUMN_NAME){t[e].VALUE=t["TA"].VALUE*t[e].VALUE/100;}}}}else{for(var e in t){if(t[e].COLUMN_NAME){t[e].VALUE=parseFloat(d[t[e].COLUMN_NAME]);}}}}this.setVariable("oThreshold",t);},getThresholdObject:function(){var t=this.getVariable("oThreshold");if(!t){var T=this.getVariable("evalData").EVALUATION_VALUES;var t={};for(var i=0,l=T.length;i<l;i++){t[T[i].TYPE]={VALUE:parseFloat(T[i].FIXED),COLUMN_NAME:T[i].COLUMN_NAME};}this.setVariable("oThreshold",t);}return t;},hasSomeValue:function(){var f=true;if(arguments.length){for(var i=0,l=arguments.length;i<l;i++){if(!(arguments[i]||arguments[i]=="0")){f=false;break;}}}else{f=false;}return f;},getTrendColor:function(k){var c="Neutral";var t,g,W,a,C,b;if(this.getVariable("tileProperties").isFractionMeasure){t=this.getThresholdObject();g=this.getVariable("evalData").EVALUATION.GOAL_TYPE;if(g=="MA"){W=t.WL;C=t.CL;if(this.hasSomeValue(W,C)){c="Good";if(k<C.VALUE){c="Error";}else if(k<=W.VALUE){c="Critical";}}}else if(g=='MI'){a=t.WH;b=t.CH;if(this.hasSomeValue(a,b)){c="Error";if(k<a.VALUE){c="Good";}else if(k<=b.VALUE){c="Critical";}}}else{W=t.WL;C=t.CL;a=t.WH;b=t.CH;if(this.hasSomeValue(a,b,C,W)){if(k<=C.VALUE||k>=a.VALUE){c="Error";}else if((W.VALUE>=k&&k>=C.VALUE)||(b.VALUE>=k&&k>=a.VALUE)){c="Critical";}else{c="Good";}}}}return sap.suite.ui.commons.InfoTileValueColor[c];},_getThresholdMeasures:function(){var t=[];var T=this.getThresholdObject();for(var e in T){if(T[e].COLUMN_NAME){t.push(T[e].COLUMN_NAME);}}return t;},onEvalFiltersFetched:function(){var t=this;if(this.getVariable("chip").visible.isVisible()&&!this.getVariable("hasAppeared")){try{var k=this.getVariable("evalData");var u=k.EVALUATION.ODATA_URL;var E=k.EVALUATION.ODATA_ENTITYSET;var a=this.getVariable("tileProperties");var h=[];var v=this.getVariable("indicatorUtils").prepareFilterStructure(k.EVALUATION_FILTERS,k.ADDITIONAL_FILTERS);var f=k.EVALUATION.COLUMN_NAME;var b=f;var c=[];if(a.isFractionMeasure){b=a.harveyTotalMeasure;c=this._getThresholdMeasures();}else{h=this.getVariable("indicatorUtils").prepareFilterStructure(a.harveyFilters||h);}this.setVariable("totalMeasure",b);this.setVariable("fractionMeasure",f);this.fetchKpiValue({measure1:b,measure2:f,entitySet:E,thresholds:c,url:u,filters:v,fractionFilters:h,fnS:function(d){d.kpiValue=Number(d.kpiValue);d.fractionValue=Number(d.fractionValue);t.setVariable("kpiValue",d.kpiValue);t.setVariable("fractionValue",d.fractionValue);t.onKpiValueFetched(d.kpiValue,d.unit,d.fractionValue);},fnE:this.logError});t.setVariable("hasAppeared",true);}catch(e){this.logError(e);}}},fetchEvalFilters:function(s){var t=this;try{var a=this.getVariable("cache").getEvaluationById(this.getVariable("chipId"));if(a){this.getVariable("evalData").EVALUATION_FILTERS=a.EVALUATION_FILTERS;s();}else{var d=this.getVariable("indicatorUtils").getFilterFromRunTimeService(this.getVariable("evalData"),function(f){t.deregisterOpenODataRequest("kpiFilterRequest");t.getVariable("evalData").EVALUATION_FILTERS=f;t.getVariable("cache").setEvaluationById(t.getVariable("chipId"),t.getVariable("evalData"));s.call(t);},function(e){this.logError(e);t.deregisterOpenODataRequest("kpiFilterRequest");});this.registerOpenODataRequest("kpiFilterRequest",d);}}catch(e){this.logError(e);}},onKpiValueFetched:function(k,a,f,b){var i=this.getVariable("indicatorUtils");var s=k;var d=f;var e=this.getVariable("evalData");var g=e.EVALUATION.SCALING;if(g==-2){s*=100;d*=100;}var c=this.isACurrencyMeasure(this.getVariable("totalMeasure"));s=i.getLocaleFormattedValue(Number(s),g,null,c,a);c=this.isACurrencyMeasure(this.getVariable("fractionMeasure"));d=i.getLocaleFormattedValue(Number(d),g,null,c,a);this.getView().getModel().setProperty("/totalLabel",s+" "+a);this.getView().getModel().setProperty("/fractionLabel",d+" "+b);this.getView().getModel().setProperty("/color",this.getTrendColor(f));this.getView().getModel().setProperty("/value",k);this.getView().getModel().setProperty("/fractionValue",f);var n=i.getNavigationTarget(this.getVariable("evalData"),this.getVariable("system"));this.getVariable("tile").$().wrap("<a href ='"+n+"'/>");this.getVariable("tile").setState(sap.suite.ui.commons.LoadState.Loaded);},logError:function(e){this.getVariable("tile").setState(sap.suite.ui.commons.LoadState.Failed);this.getVariable("indicatorUtils").logError(e,this.getVariable("tile"));},onVisible:function(i){if(!this.getVariable("hasAppeared")){if(Number(this.getVariable("chip").configuration.getParameterValueAsString("isSufficient"))){this.onEvalFiltersFetched();}else{this.fetchEvalFilters(this.onEvalFiltersFetched);}}},onExit:function(){this.abortAllOpenODataRequests();}});}());(function(){"use strict";sap.ui.controller("sap.ushell.components.treeview.NavTree",{onInit:function(){var v=this.getView().getViewData(),r=v.data.items,s=v.data.serviceURL||'',t={items:[],entryObject:{}};var m=new sap.ui.model.json.JSONModel(t);this.getView().setModel(m);jQuery.getJSON(s).done(function(r){this.buidModelData(r);}.bind(this)).fail(function(j,a,e){var b=a+", "+e;jQuery.sap.log.error("Request Failed: "+b);this.buidModelData(r);}.bind(this));},buidModelData:function(r){var i,e,g=0,t={items:[],entryObject:{}};for(i in r.nodes){var a=r.nodes[i];if(a.type==='SUBMENU'){var b=a.title;for(e in a.nodes){var c=a.nodes[e];c.groupIndex=g.toString();c.groupName=b;t.items.push(c);t.entryObject[g.toString()]={title:a.title,type:a.type};}}else if(a.type==='URL'||a.type==='APP'){a.groupIndex=g.toString();a.groupName="";t.items.push(a);t.entryObject[g.toString()]={title:a.title,type:a.type,href:a.target};}g++;}var m=new sap.ui.model.json.JSONModel(t);this.getView().setModel(m);},getGroupHeader:function(g){var e=this.getView().getModel().getData().entryObject[g.key];jQuery.sap.require('sap.m.GroupHeaderListItem');if(e.type==="SUBMENU"){var i=new sap.ui.core.Icon({src:'slim-arrow-right',tooltip:e.title}).addStyleClass('sapUshellGroupListItemIcon');var l=new sap.m.Label({text:e.title}).addStyleClass('sapUshellNavTreeLink');return new sap.m.CustomListItem({press:[this.handleClickOnSubMenu,this],type:sap.m.ListType.Active,content:[i,l]}).addStyleClass('sapUshellNavTreeListItem sapUshellNavTreeParent');}else{return new sap.m.CustomListItem({content:new sap.m.Link({text:e.title,href:e.href}).addStyleClass('sapUshellNavTreeLink')}).addEventDelegate({onclick:this.onNavTreeTitleChange.bind(this)}).addStyleClass('sapUshellNavTreeListItem sapUshellNavTreeSingle');}},onNavTreeTitleChange:function(e){if(this._prevSelect){this._prevSelect.removeStyleClass('sapUshellNavTreeItemSelected');}var i=e.srcControl;if(e.srcControl.getContent){window.location.href=e.srcControl.getContent()[0].getHref();i.addStyleClass('sapUshellNavTreeItemSelected');this._prevSelect=i;}else{i.getParent().addStyleClass('sapUshellNavTreeItemSelected');this._prevSelect=i.getParent();}},handleClickOnSubMenu:function(e){var i=e.getSource().getContent()[0];if(i.getSrc()==='slim-arrow-down'){i.setSrc('slim-arrow-right');this.toggleSubItemsState(e,true);}else{i.setSrc('slim-arrow-down');this.toggleSubItemsState(e,false);}},toggleSubItemsState:function(e,i){if(e){var j=jQuery(e.getSource().getDomRef());if(i){j.nextUntil('.sapUshellNavTreeSingle, .sapUshellNavTreeParent').addClass("sapUshellNavTreeChildHide");}else{j.nextUntil('.sapUshellNavTreeSingle, .sapUshellNavTreeParent').removeClass("sapUshellNavTreeChildHide");}}}});}());(function(){"use strict";sap.ui.jsview("sap.ushell.components.treeview.NavTree",{createContent:function(c){jQuery.sap.require('sap.m.List');jQuery.sap.require('sap.m.CustomListItem');var l=new sap.m.CustomListItem({content:new sap.m.Link({text:"{title}",href:"{target}"}).addStyleClass('sapUshellNavTreeLink')}).addEventDelegate({onclick:c.onNavTreeTitleChange.bind(c)}).addStyleClass('sapUshellNavTreeListItem sapUshellNavTreeChild sapUshellNavTreeChildHide sapUshellNavTree_visual_transition');var L=new sap.m.List({items:{path:'/items',groupHeaderFactory:jQuery.proxy(c.getGroupHeader,c),sorter:new sap.ui.model.Sorter("groupIndex",false,true),template:l}});var o=L.onAfterRendering;L.onAfterRendering=function(){o.apply(this,arguments);if(this.getItems().length>0){var f=this.getItems()[0];if(f.getMetadata().getName()==="sap.m.GroupHeaderListItem"&&f.getTitle&&!f.getTitle()){f.destroy();}var O=jQuery('.sapUshellNavTreeParent');O.each(function(){var q=jQuery(this);var i=sap.ui.getCore().byId(q.attr('id'));var I=i.getContent().length&&i.getContent()[0]&&i.getContent()[0].getSrc()||'';if(I==='slim-arrow-down'){q.nextUntil('.sapUshellNavTreeSingle, .sapUshellNavTreeParent').removeClass("sapUshellNavTreeChildHide");}});}};return L;},getControllerName:function(){return"sap.ushell.components.treeview.NavTree";}});}());(function(){"use strict";sap.ui.controller("sap.ushell.renderers.fiori2.compactCozy_selector.CompactCozySelector",{onInit:function(){try{this.userInfoService=sap.ushell.Container.getService("UserInfo");this.oUser=this.userInfoService.getUser();}catch(e){jQuery.sap.log.error("Getting UserInfo service failed.");this.oUser=sap.ushell.Container.getUser();}this.translationBundle=sap.ushell.resources.i18n;this.oModel=new sap.ui.model.json.JSONModel({options:[{id:"cozy",name:this.translationBundle.getText("cozy"),isSelected:true},{id:"compact",name:this.translationBundle.getText("compact"),isSelected:false}]});this.getView().setModel(this.oModel);this.currentContentDensity=this.oUser.getContentDensity();this.origContentDensity=this.currentContentDensity;this.isContentLoaded=false;},getContent:function(){var o=this.oModel.getProperty("/options");for(var i=0;i<o.length;i++){if(o[i].id==this.currentContentDensity){o[i].isSelected=true;}else{o[i].isSelected=false;}}this.oModel.setProperty("/options",o);return jQuery.Deferred().resolve(this.getView());},getValue:function(){return jQuery.Deferred().resolve(this._getModeNameById(this.currentContentDensity));},onCancel:function(){this.currentContentDensity=this.oUser.getContentDensity();},onSave:function(){var d=jQuery.Deferred();var u;if(this.oUser.getContentDensity()!=this.currentContentDensity){if(this.currentContentDensity){this.oUser.setContentDensity(this.currentContentDensity);u=this.userInfoService.updateUserPreferences(this.oUser);u.done(function(){this.oUser.resetChangedProperties();this.origContentDensity=this.currentContentDensity;sap.ui.getCore().getEventBus().publish("launchpad","toggleContentDensity",{contentDensity:this.currentContentDensity});d.resolve();}.bind(this));u.fail(function(e){this.oUser.setContentDensity(this.origContentDensity);this.oUser.resetChangedProperties();this.currentContentDensity=this.origContentDensity;jQuery.sap.log.error(e);d.reject(e);}.bind(this));}else{d.reject("Could not find mode: "+this.currentContentDensity);}}else{d.resolve();}return d.promise();},getCurrentContentDensity:function(){return this.currentContentDensity;},setCurrentContentDensity:function(n){this.currentContentDensity=n;},_getModeNameById:function(c){var d=this.getModel().getProperty('/options');for(var i=0;i<d.length;i++){if(d[i].id==c){return d[i].name;}}return c;},getModel:function(){return this.oModel;}});}());(function(){"use strict";sap.ui.controller("sap.ushell.renderers.fiori2.defaultParameters_selector.DefaultParameters",{onInit:function(){this.oModelRecords={};this.oChangedParameters={};this.oBlockedParameters={};this.aDisplayedUserDefaults=[];var t=this;this.DefaultParametersService=sap.ushell.Container.getService("UserDefaultParameters");this.DefaultParametersService.editorGetParameters().done(function(p){t.oMdlParameter=new sap.ui.model.json.JSONModel(p);t.oMdlParameter.setDefaultBindingMode("TwoWay");t.getView().setModel(t.oMdlParameter,"MdlParameter");t.oOriginalParameters=jQuery.extend(true,{},p);t.oCurrentParameters=jQuery.extend(true,{},p);t.constructControlSet(p);});},overrideOdataModelValue:function(e){var u=e.getParameter('url'),m=e.getSource(),f,F,t=this;this.aDisplayedUserDefaults.forEach(function(r){if(r.editorMetadata&&r.editorMetadata.editorInfo){F=r.editorMetadata.editorInfo.odataURL+r.editorMetadata.editorInfo.bindingPath;if(F===u){f=r.editorMetadata.editorInfo.bindingPath+"/"+r.editorMetadata.editorInfo.propertyName;if(m.getProperty(f)!==r.valueObject.value){m.setProperty(f,r.valueObject.value);}t.oBlockedParameters[r.parameterName]=false;}}});},getOrCreateModelForODataService:function(u){if(!this.oModelRecords[u]){var m=new sap.ui.model.odata.ODataModel(u,true);m.setCountSupported(false);m.setDefaultBindingMode("TwoWay");m.attachRequestCompleted(this.overrideOdataModelValue.bind(this));this.oModelRecords[u]=m;}return this.oModelRecords[u];},constructControlSet:function(p){var u=[];for(var P in p){for(var n=0;n<u.length;n++){if(u[n].parameterName===P){u.splice(n,1);}}p[P].parameterName=P;u.push(p[P]);}this.sortParametersByGroupIdParameterIndex(u);this.aDisplayedUserDefaults=u;this.sForm=new sap.ui.comp.smartform.SmartForm({editable:true});this.getView().addContent(this.sForm);},getValue:function(){var d=jQuery.Deferred();var a=sap.ushell.Container.getService("UserDefaultParameters").editorGetParameters();a.done(function(p){d.resolve({value:Object.keys(p).length,displayText:""});});a.fail(function(e){d.reject(e);});return d.promise();},createPlainModel:function(g,r){r.modelBind.model=this.oMdlParameter;g.setModel(r.modelBind.model);var m="/sUserDef_"+r.nr+"_";r.modelBind.sFullPropertyPath=m;r.modelBind.sPropertyName="{"+m+"}";r.modelBind.model.setProperty(r.modelBind.sFullPropertyPath,r.valueObject.value);},revertToPlainModelControls:function(g,r){jQuery.sap.log.error("Metadata loading for parameter "+r.parameterName+" failed"+JSON.stringify(r.editorMetadata));r.modelBind.isOdata=false;this.createPlainModel(g,r);this.createAppropriateControl(g,r);},getContent:function(){jQuery.sap.require('sap.ui.model.odata.v2.ODataModel');var d=new jQuery.Deferred();var l="nevermore";var g;this.aChangedParameters=[];this.setPropValue=function(r){r.modelBind.model.setProperty(r.modelBind.sFullPropertyPath,r.valueObject.value);this.oBlockedParameters[r.parameterName]=false;};this.oMdlParameter.setProperty("/sUser");for(var i=0;i<this.aDisplayedUserDefaults.length;++i){var r=this.aDisplayedUserDefaults[i];r.nr=i;r.editorMetadata=r.editorMetadata||{};r.valueObject=r.valueObject||{value:""};var a=new sap.ui.comp.smartform.GroupElement({});if(l!=r.editorMetadata.groupId){g=new sap.ui.comp.smartform.Group({label:r.editorMetadata.groupTitle||"no Title","editable":true});l=r.editorMetadata.groupId;this.sForm.addGroup(g);}g.addGroupElement(a);r.modelBind={model:undefined,sModelPath:undefined,sPropertyName:undefined,sFullPropertyPath:undefined};r.valueObject.value=r.valueObject.value||"";if(r.editorMetadata.editorInfo&&r.editorMetadata.editorInfo.propertyName){r.modelBind.isOdata=true;var u=r.editorMetadata.editorInfo.odataURL;r.modelBind.model=this.getOrCreateModelForODataService(u);a.setModel(r.modelBind.model);a.bindElement(r.editorMetadata.editorInfo.bindingPath);r.modelBind.sPropertyName="{"+r.editorMetadata.editorInfo.propertyName+"}";r.modelBind.sFullPropertyPath=r.editorMetadata.editorInfo.bindingPath+"/"+r.editorMetadata.editorInfo.propertyName;}else{this.createPlainModel(a,r);}r.valueObject.value=r.valueObject.value||"";r.modelBind.model.setProperty(r.modelBind.sFullPropertyPath,r.valueObject.value);if(r.modelBind.isOdata){this.oBlockedParameters[r.parameterName]=true;r.modelBind.model.attachMetadataLoaded(this.createAppropriateControl.bind(this,a,r));r.modelBind.model.attachMetadataFailed(this.revertToPlainModelControls.bind(this,a,r));}else{this.createAppropriateControl(a,r);}r.modelBind.model.bindTree(r.modelBind.sFullPropertyPath).attachChange(this.storeChangedData.bind(this));}this.oMdlParameter.bindTree("/").attachChange(this.storeChangedData.bind(this));d.resolve(this.getView());return d.promise();},createAppropriateControl:function(g,r){var s,l;jQuery.sap.log.debug("Creating controls for parameter"+r.parameterName+" type "+r.modelBind.isOdata);var e=g.getElements().slice();e.forEach(function(E){g.removeElement(E);});var f=g.getFields().slice();f.forEach(function(E){g.removeField(E);});if(r.modelBind.isOdata&&r.editorMetadata.editorInfo){s=new sap.ui.comp.smartfield.SmartField({value:r.modelBind.sPropertyName,name:r.parameterName});}else{s=new sap.m.Input({name:r.parameterName,value:r.modelBind.sPropertyName,type:"Text"});l=new sap.ui.comp.smartfield.SmartLabel({text:r.editorMetadata.displayText||r.parameterName,tooltip:r.editorMetadata.description||r.parameterName});l.setLabelFor(s);g.addElement(l);this.setPropValue(r);}s.attachChange(this.storeChangedData.bind(this));g.addElement(s);},sortParametersByGroupIdParameterIndex:function(u){function c(d,D){if(!(D.editorMetadata&&D.editorMetadata.groupId)){return-1;}if(!(d.editorMetadata&&d.editorMetadata.groupId)){return 1;}if(d.editorMetadata.groupId<D.editorMetadata.groupId){return-1;}if(d.editorMetadata.groupId>D.editorMetadata.groupId){return 1;}return 0;}function a(d,D){if(!(D.editorMetadata&&D.editorMetadata.parameterIndex)){return-1;}if(!(d.editorMetadata&&d.editorMetadata.parameterIndex)){return 1;}return d.editorMetadata.parameterIndex-D.editorMetadata.parameterIndex;}u.sort(function(d,D){var r=c(d,D);if(r===0){return a(d,D);}return r;});},storeChangedData:function(){var i=0,t=this,a=t.aDisplayedUserDefaults,c=this.sForm.check(),s=sap.ui.getCore().byId("saveButton");s.setEnabled(!c.length);for(i=0;i<a.length;++i){var p=a[i].parameterName;if(!t.oBlockedParameters[p]){var o=t.oCurrentParameters[p].valueObject&&t.oCurrentParameters[p].valueObject.value;if(a[i].modelBind&&a[i].modelBind.model){var d=a[i].modelBind.model;var P=a[i].modelBind.sFullPropertyPath;var b=d.getProperty(P);if(this.isValueDifferent({value:b},{value:o})){t.oCurrentParameters[p].valueObject.value=b;t.oChangedParameters[p]=true;}}}}},onCancel:function(){sap.ui.getCore().byId("saveButton").setEnabled(true);},isValueDifferent:function(v,V){if(v===V){return false;}if(v===undefined){return false;}if(V===undefined){return false;}if(v.value===""&&V.value===undefined){return false;}if(V.value===""&&v.value===undefined){return false;}return(v.value!==V.value);},onSave:function(){var d=new jQuery.Deferred(),i,c=Object.keys(this.oChangedParameters).sort(),s,p;for(i=0;i<c.length;i++){p=c[i];if(this.isValueDifferent(this.oOriginalParameters[p].valueObject,this.oCurrentParameters[p].valueObject)){if(this.oCurrentParameters[p].valueObject===""||(this.oCurrentParameters[p].valueObject&&this.oCurrentParameters[p].valueObject.value==="")){s=sap.ushell.Container.getService("UserDefaultParameters").editorSetValue(p,undefined);}else{s=sap.ushell.Container.getService("UserDefaultParameters").editorSetValue(p,this.oCurrentParameters[p].valueObject);}s.done(d.resolve);s.fail(d.reject);}}return d.promise();}});}());(function(){"use strict";sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.DivContainer",{metadata:{properties:{"cssClass":"string"},aggregations:{"content":{singularName:"content",multiple:true}}},renderer:function(r,c){r.write('<div');r.writeControlData(c);r.addClass(c.getCssClass());r.writeClasses();r.write('>');var C=c.getContent();for(var i=0;i<C.length;i++){r.renderControl(C[i]);}r.write('</div>');}});})();(function(){"use strict";sap.ui.layout.FixFlex.extend("sap.ushell.renderers.fiori2.search.controls.SearchLayout",{metadata:{properties:{isBusy:{type:"boolean",defaultValue:false},showFacets:{type:"boolean",defaultValue:false}},aggregations:{"resultListContainer":{type:"sap.ui.core.Control",multiple:false},"facets":{type:"sap.ui.core.Control",multiple:false},"busyIndicator":{type:"sap.ui.core.Control",multiple:false}}},constructor:function(o,i){var t=this;sap.ui.layout.FixFlex.prototype.constructor.apply(this,[o],i);this.addEventDelegate({onBeforeRendering:function(){if(t.getShowFacets()&&!sap.ui.Device.system.phone){t.setFixContentSize('18rem');}else{t.setFixContentSize('0rem');}}});},getFacets:function(){return this.getFixContent();},setFacets:function(c){this.addFixContent(c);},getResultListContainer:function(){return this.getFlexContent();},setResultListContainer:function(c){this.setFlexContent(c);},setIsBusy:function(i){if(i){this.getBusyIndicator().open();}else{this.getBusyIndicator().close();}this.setProperty("isBusy",i,true);},setShowFacets:function(a){var $=jQuery(".sapUiFixFlexFixed");var w;var o;var p;if(!a){w="0";o="0";p="2rem";}else{w="18rem";o="1";p="1rem";}$.animate({width:w,opacity:o},{complete:function(){sap.ui.getCore().getEventBus().publish("searchLayoutChanged");},duration:400});var P={};var s;if(jQuery("html").attr("dir")==='rtl'){s="padding-right";}else{s="padding-left";}P[s]=p;if(sap.ui.Device.system.desktop){jQuery(".searchResultListsContainer").animate(P,{duration:400});}this.setProperty("showFacets",a,true);return this;},renderer:"sap.ui.layout.FixFlexRenderer"});})();(function(){"use strict";sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchRelatedObjectsToolbar",{metadata:{properties:{relatedObjects:"object"}},init:function(p){this.oCrossAppNav=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");},renderer:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellSearchResultListItem-RelatedObjectsToolbar");r.writeClasses();r.write(">");c._renderToolbar(r);r.write("</div>");},_renderToolbar:function(r){var t=this;var i;var c=function(l){return function(){var m=sap.ushell.renderers.fiori2.search.getModelSingleton();m.analytics.logCustomEvent('FLP: Search','Launch Related Object',[l]);};};var a=t.getRelatedObjects();if(a.length>0){var b=[];for(i=0;i<a.length;i++){var d=a[i];var l=new sap.m.Link({text:d.label,href:d.href,layoutData:new sap.m.ToolbarLayoutData({shrinkable:false}),press:c(d.href)});l.addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-Element");b.push(l);}var e=[];var f=new sap.m.ToolbarSpacer();e.push(f);for(i=0;i<b.length;i++){e.push(b[i]);}t.overFlowButton=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("overflow")});t.overFlowButton.addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-OverFlowButton");e.push(t.overFlowButton);t.overFlowSheet=new sap.m.ActionSheet({placement:sap.m.PlacementType.Top});t.overFlowButton.attachPress(function(){t.overFlowSheet.openBy(t.overFlowButton);});t.relatedObjectActionsToolbar=new sap.m.Toolbar({design:sap.m.ToolbarDesign.Solid,content:e});t.relatedObjectActionsToolbar.addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-Toolbar");r.renderControl(t.relatedObjectActionsToolbar);}},onAfterRendering:function(){var t=this;var a=$(t.overFlowButton.getDomRef());a.css("display","none");$(window).on("resize",function(){t._layoutToolbarElements();});t._layoutToolbarElements();},_layoutToolbarElements:function(){var t=this;if(!(t.getDomRef()&&t.relatedObjectActionsToolbar.getDomRef())){return;}var a=$(t.relatedObjectActionsToolbar.getDomRef());var b=a.innerWidth();if(b===0||(t.toolbarWidth&&t.toolbarWidth===b)){return;}if($(t.getDomRef()).css("display")==="none"||a.css("display")==="none"){return;}t.toolbarWidth=b;var c=$(t.overFlowButton.getDomRef());c.css("display","none");var d=0;var p=function(j,k){t.oCrossAppNav.toExternal(k);};var e=a.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar-Element");for(var i=0;i<e.length;i++){var f=$(e[i]);f.css("display","");var _=d+f.outerWidth(true);if(_>b){if(i<e.length){c.css("display","");var o=c.outerWidth(true);for(;i>=0;i--){f=$(e[i]);_-=f.outerWidth(true);if(_+o<=b){break;}}}var r=t.getRelatedObjects();t.overFlowSheet.destroyButtons();for(;i<e.length;i++){f=$(e[i]);f.css("display","none");var g=r[i];var h=new sap.m.Button({text:g.label});h.attachPress(g,p);t.overFlowSheet.addButton(h);}break;}d=_;}}});})();(function(){"use strict";sap.m.List.extend('sap.ushell.renderers.fiori2.search.controls.SearchResultList',{renderer:'sap.m.ListRenderer',onAfterRenderingParent:sap.m.List.prototype.onAfterRendering,onAfterRendering:function(){var t=this;t.onAfterRenderingParent();t._prepareResizeHandler();t.collectListItemsForNavigation();},collectListItemsForNavigation:function(){var t=this;var m=t.getItems();if(m.length===0){return;}var d=function(){t._doCollectListItemsForNavigation();};for(var i=0;i<m.length;i++){var M=m[i];if(M.hasStyleClass("sapUshellSearchResultListItemApps")){var c=M.getContent();if(c.length>0){c[0].addEventDelegate({onAfterRendering:d});}}}t._doCollectListItemsForNavigation();},_doCollectListItemsForNavigation:function(){var t=this;var f=t.getDomRef();if(!f){return;}var I=t.getItemNavigation();if(!I){t._startItemNavigation();I=t.getItemNavigation();}if(!I){return;}t._bItemNavigationInvalidated=false;var r=f.getElementsByTagName("li");var d=[];for(var i=0;i<r.length;i++){var R=r[i];if($(R).hasClass("sapUshellSearchResultListItemApps")){var T=R.getElementsByClassName("sapUshellSearchTileWrapper");for(var j=0;j<T.length;j++){if($(T[j]).hasClass("sapUshellSearchShowMoreTile")){continue;}d.push(T[j]);}var s=$(R).find(".sapUshellSearchShowMoreTile button");if(s.length>0){d.push(s[0]);}}else if($(R).hasClass("sapUshellSearchResultListFooter")){var S=R.getElementsByClassName("sapUshellResultListMoreFooter");for(var k=0;k<S.length;k++){d.push(S[k]);}}else if($(R).hasClass("sapUshellSearchResultListItem")){d.push(R);}}if(d.length>0){I.setRootDomRef(d[0].parentElement);}I.setItemDomRefs(d);I.setCycling(false);},_prepareResizeHandler:function(){var t=this;t._previousWindowWidth=$(window).width();$(window).on("resize",function(){t._resizeHandler();});},_resizeHandler:function(){var t=this;if(t.resizeTimeoutID){window.clearTimeout(t.resizeTimeoutID);}t.resizeTimeoutID=window.setTimeout(function(){var p=767;var a=1150;var w=$(window).width();if(w<=p&&t._previousWindowWidth>p||w<=a&&(t._previousWindowWidth<=p||t._previousWindowWidth>a)||w>a&&t._previousWindowWidth<=a){t.rerender();}t._previousWindowWidth=w;},250);}});})();(function(){"use strict";sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListContainer",{metadata:{aggregations:{"topList":{type:"sap.ui.core.Control",multiple:false},"bottomList":{type:"sap.ui.core.Control",multiple:false},"tabStrips":{type:"sap.ui.core.Control",multiple:false},"filterBar":{type:"sap.ui.core.Control",multiple:false},"noResultScreen":{type:"sap.ui.core.Control",multiple:false}}},renderer:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellSearchResultListsContainer");r.writeClasses();if(sap.ui.Device.system.desktop){if(c.getModel()&&c.getModel().getFacetVisibility()===true){r.write('style="padding-left:1rem;"');}else{r.write('style="padding-left:2rem;"');}}r.write('>');r.renderControl(c.getFilterBar());r.renderControl(c.getNoResultScreen());r.renderControl(c.getTabStrips());r.renderControl(c.getTopList());r.renderControl(c.getBottomList());r.write("</div>");}});})();(function(){"use strict";sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListItemFooter",{metadata:{properties:{showSpinner:{type:"boolean",defaultValue:false},text:"string"},aggregations:{content:{singularName:"content"}},events:{showMore:{}}},renderer:function(r,c){var f=new sap.m.Link({text:c.getText(),tooltip:c.getText()});f.addStyleClass('sapUshellResultListMoreFooter');var d=new sap.ui.core.Icon({src:sap.ui.core.IconPool.getIconURI("sys-overflow")});this.busy=new sap.m.BusyIndicator({size:"22px"});this.busy.addStyleClass('sapUshellResultListBusyFooter');if(c.getShowSpinner()===false){this.busy.addStyleClass('hidden');}r.write("<div");r.writeAttribute("tabindex","-1");r.writeControlData(c);r.addClass("sapUshellSearchResultListFooterContainer");r.writeClasses();r.write(">");r.write("<div class='sapUshellResultListFooterContent'>");r.renderControl(d);r.renderControl(f);r.renderControl(this.busy);r.write("</div>");r.write("</div>");},onAfterRendering:function(r,c){var t=this;var a=$(this.getDomRef());a.click(function(){t.fireShowMore();});}});})();(function(){"use strict";sap.ui.controller("sap.ushell.renderers.fiori2.theme_selector.ThemeSelector",{onInit:function(){try{this.userInfoService=sap.ushell.Container.getService("UserInfo");this.oUser=this.userInfoService.getUser();}catch(e){jQuery.sap.log.error("Getting UserInfo service failed.");this.oUser=sap.ushell.Container.getUser();}this.oModel=new sap.ui.model.json.JSONModel({options:[]});this.getView().setModel(this.oModel);this.translationBundle=sap.ushell.resources.i18n;this.currentThemeId=this.oUser.getTheme();this.origThemeId=this.currentThemeId;this.aThemeList=null;this.isContentLoaded=false;},_getIsChangeThemePermitted:function(){return this.oUser.isSetThemePermitted();},getContent:function(){var t=this;var d=jQuery.Deferred();if(this.isContentLoaded===true){d.resolve(this.getView());}else{var a=this._getThemeList();a.done(function(T){if(T.length>0){T.sort(function(b,c){var e=b.name,f=c.name;if(e<f){return-1;}if(e>f){return 1;}return 0;});for(var i=0;i<T.length;i++){if(T[i].id==t.currentThemeId){T[i].isSelected=true;}else{T[i].isSelected=false;}}t.getView().getModel().setProperty("/options",T);d.resolve(t.getView());}else{d.reject();}});a.fail(function(){d.reject();});}return d.promise();},getValue:function(){var d=jQuery.Deferred();var t=this._getThemeList();var a=this;var b;t.done(function(T){a.aThemeList=T;b=a._getThemeNameById(a.currentThemeId);d.resolve(b);});t.fail(function(e){d.reject(e);});return d.promise();},onCancel:function(){this.currentThemeId=this.oUser.getTheme();},onSave:function(){var d=jQuery.Deferred();var u;if(this.oUser.getTheme()!=this.currentThemeId){if(this.currentThemeId){this.oUser.setTheme(this.currentThemeId);u=this.userInfoService.updateUserPreferences(this.oUser);u.done(function(){this.origThemeId=this.currentThemeId;this.oUser.resetChangedProperties();d.resolve();}.bind(this));u.fail(function(e){this.oUser.setTheme(this.origThemeId);this.oUser.resetChangedProperties();this.currentThemeId=this.origThemeId;jQuery.sap.log.error(e);d.reject(e);}.bind(this));}else{d.reject("Could not find theme: "+this.currentThemeId);}}else{d.resolve();}return d.promise();},_getThemeList:function(){var d=jQuery.Deferred();if(this.aThemeList==null){if(this._getIsChangeThemePermitted()==true){var g=this.userInfoService.getThemeList();g.done(function(D){d.resolve(D.options);});g.fail(function(){d.reject("Failed to load theme list.");});}else{d.resolve([this.currentThemeId]);}}else{d.resolve(this.aThemeList);}return d.promise();},getCurrentThemeId:function(){return this.currentThemeId;},setCurrentThemeId:function(n){this.currentThemeId=n;},_getThemeNameById:function(t){if(this.aThemeList){for(var i=0;i<this.aThemeList.length;i++){if(this.aThemeList[i].id==t){return this.aThemeList[i].name;}}}return t;}});}());sap.ui.controller("sap.ushell.ui.footerbar.SaveAsTile",{onExit:function(){var v=this.getView();var t=v.getTileView();t.destroy();},onInit:function(){var a=sap.ushell.services.AppConfiguration.getMetadata();this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");this.oView=this.getView();this.appData=this.oView.viewData.appData||{};if(!jQuery.isEmptyObject(this.appData)){this.oModel=new sap.ui.model.json.JSONModel({showGroupSelection:this.appData.showGroupSelection===false?false:true,title:this.appData.title||'',subtitle:this.appData.subtitle||'',numberValue:'',info:this.appData.info||'',icon:this.appData.icon||a.icon,numberUnit:this.appData.numberUnit,keywords:this.appData.keywords||'',groups:[]});this.oView.setModel(this.oModel);}},calcTileDataFromServiceUrl:function(s){var t=this;OData.read({requestUri:s},function(r){if(typeof r==="string"){r={number:r};}t.oModel.setProperty('/numberValue',r.number);var k=["infoState","stateArrow","numberState","numberDigits","numberFactor","numberUnit"];for(var i=0;i<k.length;i++){var a=k[i];if(r[a]){t.oModel.setProperty('/'+a,r[a]);}}},function(e){window.console.log(e);},{read:function(r){r.data=JSON.parse(r.body).d;}});},loadPersonalizedGroups:function(){var g=this.oPageBuilderService.getGroups(),t=this,d=jQuery.Deferred();g.done(function(G){var p=t.loadGroupsFromArray(G);p.done(function(a){d.resolve(a);});});return d;},loadGroupsFromArray:function(g){var t=this,d=jQuery.Deferred(),m=t.oView.getModel();this.oPageBuilderService.getDefaultGroup().done(function(D){g=g.filter(function(a){return(!t.oPageBuilderService.isGroupLocked(a)&&t.oPageBuilderService.isGroupVisible(a));}).map(function(a){return{title:(a===D&&t.getLocalizedText("my_group"))||t.oPageBuilderService.getGroupTitle(a),object:a};});m.setProperty('/groups',g);m.setProperty("/groups/length",g.length);d.resolve();});return d;},getLocalizedText:function(m,p){return p?sap.ushell.resources.i18n.getText(m,p):sap.ushell.resources.i18n.getText(m);}});(function(){"use strict";sap.ui.jsview("sap.ushell.ui.footerbar.SaveAsTile",{getControllerName:function(){return"sap.ushell.ui.footerbar.SaveAsTile";},createContent:function(c){this.oResourceBundle=sap.ushell.resources.i18n;this.viewData=this.getViewData()||{};this.appData=this.viewData.appData||{};this.oTitleInput=new sap.m.Input('bookmarkTitleInput',{tooltip:this.oResourceBundle.getText("bookmarkDialogoTitle_tooltip"),value:{path:"/title",mode:sap.ui.model.BindingMode.TwoWay}}).addStyleClass("sapUshellInputField");this.oTitleInput.addAriaLabelledBy("titleLbl");this.oSubTitleInput=new sap.m.Input('bookmarkSubTitleInput',{tooltip:this.oResourceBundle.getText("bookmarkDialogoSubTitle_tooltip"),value:{path:"/subtitle",mode:sap.ui.model.BindingMode.TwoWay}}).addStyleClass("sapUshellInputField");this.oSubTitleInput.addAriaLabelledBy("subtitleLbl");this.oInfoInput=new sap.m.Input('bookmarkInfoInput',{tooltip:this.oResourceBundle.getText("bookmarkDialogoInfo_tooltip"),value:{path:"/info",mode:sap.ui.model.BindingMode.TwoWay}}).addStyleClass("sapUshellInputField");this.oInfoInput.addAriaLabelledBy("infoLbl");var t={numberValue:"{/numberValue}",title:"{/title}",subtitle:"{/subtitle}",info:"{/info}",icon:"{/icon}",infoState:"{/infoState}",numberFactor:"{/numberFactor}",numberUnit:"{/numberUnit}",numberDigits:"{/numberDigits}",numberState:"{/numberState}",stateArrow:"{/stateArrow}",targetURL:"{/targetURL}",keywords:"{/keywords}"};var T,s;if(this.viewData.serviceUrl){T=new sap.ushell.ui.tile.DynamicTile("previewTile",t);s=(typeof(this.viewData.serviceUrl)==="function")?this.viewData.serviceUrl():this.viewData.serviceUrl;c.calcTileDataFromServiceUrl(s);}else{T=new sap.ushell.ui.tile.StaticTile("previewTile",t);}this.setTileView(T);var a=new sap.ushell.ui.launchpad.Tile({"long":false,"tall":false,tileViews:[T]}).addStyleClass("sapUshellBookmarkFormPreviewTileMargin");var p=new sap.m.Label("previewLbl",{text:" "+this.oResourceBundle.getText('previewFld')}),o=new sap.m.Label("titleLbl",{required:true,text:" "+this.oResourceBundle.getText('titleFld')}),S=new sap.m.Label("subtitleLbl",{text:this.oResourceBundle.getText('subtitleFld')}),i=new sap.m.Label("infoLbl",{text:this.oResourceBundle.getText('infoMsg')}),h=new sap.m.HBox("saveAsTileHBox",{items:[a],alignItems:sap.m.FlexAlignItems.Center,justifyContent:sap.m.FlexJustifyContent.Center}).addStyleClass("sapUiStrongBackgroundColor").addStyleClass("sapUshellBookmarkFormPreviewBoxBottomMargin");var g=new sap.m.Label("groupLbl",{text:this.oResourceBundle.getText('GroupListItem_label'),visible:"{/showGroupSelection}"});this.oGroupsSelect=new sap.m.Select("groupsSelect",{tooltip:"{i18n>bookmarkDialogoGroup_tooltip}",items:{path:"/groups",template:new sap.ui.core.ListItem({text:"{title}"})},width:"100%",visible:{path:"/showGroupSelection",formatter:function(b){if(b){this.oController.loadPersonalizedGroups();}return b;}.bind(this)}});this.oGroupsSelect.addAriaLabelledBy("groupLbl");return[p,h,o,this.oTitleInput,S,this.oSubTitleInput,i,this.oInfoInput,g,this.oGroupsSelect];},getTitleInput:function(){return this.oTitleInput;},getTileView:function(){return this.tileView;},setTileView:function(t){this.tileView=t;},getBookmarkTileData:function(){var s;if(this.oGroupsSelect&&this.oGroupsSelect.getSelectedItem()){s=this.oGroupsSelect.getSelectedItem().getBindingContext().getObject();}var u;if(this.viewData.customUrl){if(typeof(this.viewData.customUrl)==="function"){u=this.viewData.customUrl();}else{u=this.viewData.customUrl;}}else{u=hasher.getHash()?('#'+hasher.getHash()):window.location.href;}return{title:this.oTitleInput.getValue().trim(),subtitle:this.oSubTitleInput.getValue().trim(),url:u,icon:this.getModel().getProperty('/icon'),info:this.oInfoInput.getValue().trim(),numberUnit:this.viewData.numberUnit,serviceUrl:typeof(this.viewData.serviceUrl)==="function"?this.viewData.serviceUrl():this.viewData.serviceUrl,serviceRefreshInterval:this.viewData.serviceRefreshInterval,group:s,keywords:this.viewData.keywords};}});}());jQuery.sap.declare('sap.ushell.library-all');jQuery.sap.declare('sap.ushell.components.factsheet.views.ThingViewer.controller');jQuery.sap.declare('sap.ushell.components.flp.launchpad.catalog.Catalog.controller');jQuery.sap.declare('sap.ushell.components.flp.launchpad.group_list.GroupList.controller');jQuery.sap.declare('sap.ushell.components.tiles.applauncher.StaticTile.view');jQuery.sap.declare('sap.ushell.components.tiles.applauncherdynamic.DynamicTile.view');jQuery.sap.declare('sap.ushell.components.tiles.indicatorDual.DualTile.controller');jQuery.sap.declare('sap.ushell.components.tiles.indicatorDualComparison.DualComparison.controller');jQuery.sap.declare('sap.ushell.components.tiles.indicatorDualContribution.DualContribution.controller');jQuery.sap.declare('sap.ushell.components.tiles.indicatorDualDeviation.DualDeviation.controller');jQuery.sap.declare('sap.ushell.components.tiles.indicatorDualTrend.DualTrend.controller');jQuery.sap.declare('sap.ushell.components.tiles.indicatorHarveyBall.HarveyBallTile.controller');jQuery.sap.declare('sap.ushell.components.treeview.NavTree.controller');jQuery.sap.declare('sap.ushell.components.treeview.NavTree.view');jQuery.sap.declare('sap.ushell.renderers.fiori2.compactCozy_selector.CompactCozySelector.controller');jQuery.sap.declare('sap.ushell.renderers.fiori2.defaultParameters_selector.DefaultParameters.controller');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.DivContainer');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchLayout');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchRelatedObjectsToolbar');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchResultList');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchResultListContainer');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchResultListItemFooter');jQuery.sap.declare('sap.ushell.renderers.fiori2.theme_selector.ThemeSelector.controller');jQuery.sap.declare('sap.ushell.ui.footerbar.SaveAsTile.controller');jQuery.sap.declare('sap.ushell.ui.footerbar.SaveAsTile.view');if(!jQuery.sap.isDeclared('sap.ushell.Layout')){(function(){"use strict";jQuery.sap.declare("sap.ushell.Layout");var C=function(s){this.init(s);};C.prototype={settings:null,tileWidth:0,tileHeight:0,tileMargin:0,curTouchMatrixCords:null,tilesInRow:null,groupsList:null,item:null,matrix:null,tiles:null,collisionLeft:false,startGroup:null,currentGroup:null,endGroup:null,init:function(s){this.curTouchMatrixCords={column:null,row:null};this.endGroup=null;this.item=null;this.matrix=null;this.tiles=null;this.collisionLeft=false;this.startGroup=null;this.currentGroup=null;this.groupsList=null;this.settings=this.settings||s;jQuery.extend(this,this.settings);this.tileWidth=this.thisLayout.styleInfo.tileWidth;this.tileHeight=this.thisLayout.styleInfo.tileHeight;this.tileMargin=this.thisLayout.styleInfo.tileMarginWidth;this.aExcludedControlClass=this.aExcludedControlClass||[];this.reorderElementsCallback=this.reorderElementsCallback||function(){};},moveDraggable:function(m,a){var i=this.detectCollision(m,a);if(i){this.changePlaceholder();}},layoutStartCallback:function(e){this.init();this.item=sap.ui.getCore().byId(e.id);this.tilesInRow=this.thisLayout.getTilesInRow();this.groupsList=this.thisLayout.getGroups();this.startGroup=this.currentGroup=this.item.getParent();},layoutEndCallback:function(){if(!this.tiles){return{tile:this.item};}var r={srcGroup:this.startGroup,dstGroup:this.endGroup,tile:this.item,dstTileIndex:this.tiles.indexOf(this.item),tileMovedFlag:true};return r;},compareArrays:function(a,b){if(a.length!==b.length){return false;}for(var i=0;i<a.length;i++){if(a[i]!==b[i]){return false;}}return true;},reorderTilesView:function(t,g){this.tiles=t;this.matrix=this.thisLayout.organizeGroup(t);this.thisLayout.applyTilesPositions(g,this.matrix);},changeTilesOrder:function(i,r,t,m){var n=t.slice(0);var d=n.indexOf(i);if(d>-1){n.splice(d,1);}if(r){n.splice(n.indexOf(r),0,this.item);}else{n.push(i);}if(this.currentGroup==this.endGroup){if(this.compareArrays(t,n)){return false;}var a=this.thisLayout.organizeGroup(n);var c=this.thisLayout.getTilePositionInMatrix(i,m);var b=this.thisLayout.getTilePositionInMatrix(i,a);if((c.row==b.row)&&(c.col==b.col)){return false;}}this.tiles=n;this.currentGroup=this.endGroup;return n;},setMatrix:function(n){this.matrix=n;},changePlaceholder:function(){var c=this.currentGroup;var t=(this.endGroup!==this.currentGroup);if(t){var a=this.thisLayout.getGroupTiles(this.currentGroup);if(this.currentGroup===this.startGroup){a=a.slice(0);a.splice(a.indexOf(this.item),1);}var b=this.thisLayout.organizeGroup(a);this.thisLayout.applyTilesPositions(this.currentGroup,b);this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0);if(this.startGroup===this.endGroup){this.tiles.splice(this.tiles.indexOf(this.item),1);}this.matrix=this.thisLayout.organizeGroup(this.tiles);this.endGroup.getInnerContainerDomRef().appendChild(this.item.getDomRef());this.currentGroup=this.endGroup;}this.removeExcludedElementsFromMatrix(this.aExcludedControlClass);var d=this.tiles||this.thisLayout.getGroupTiles(this.endGroup).slice(0);var n;if(this.matrix[this.curTouchMatrixCords.row]&&typeof this.matrix[this.curTouchMatrixCords.row][this.curTouchMatrixCords.column]=="object"){var r=this.matrix[this.curTouchMatrixCords.row][this.curTouchMatrixCords.column];var e=d.indexOf(r);if(this.rightToLeft){this.collisionLeft=!this.collisionLeft;}if(this.collisionLeft){r=d[e+1];}if(r===this.item){if(t){this.reorderElementsCallback({currentGroup:c,endGroup:this.endGroup,tiles:this.tiles,item:this.item});this.reorderTilesView(d,this.endGroup);}return;}n=this.changeTilesOrder(this.item,r,d,this.matrix);if(n){this.reorderElementsCallback({currentGroup:c,endGroup:this.endGroup,tiles:this.tiles,item:this.item});this.reorderTilesView(n,this.endGroup);}return;}var m=this.findTileToPlaceAfter(this.matrix,d);if(d[m+1]==this.item){return;}if(d[m+1]){r=d[m+1];}else if(this.currentGroup.getShowPlaceholder()){r=d[0];}n=this.changeTilesOrder(this.item,r,d,this.matrix);if(n){this.reorderElementsCallback({currentGroup:c,endGroup:this.endGroup,tiles:this.tiles,item:this.item});this.reorderTilesView(n,this.endGroup);}},findTileToPlaceAfter:function(c,t){var x=(this.thisLayout.rightToLeft)?0:this.curTouchMatrixCords.column,I=(this.thisLayout.rightToLeft)?1:-1,m=0,r=c[0].length;for(var i=this.curTouchMatrixCords.row;i>=0;i--){for(var j=x;j>=0&&j<r;j+=I){if(!c[i]||typeof c[i][j]!="object"){continue;}var a=t.indexOf(c[i][j]);m=a>m?a:m;}x=c[0].length-1;}return m;},detectCollision:function(m,a){var r,b,c,d=false;for(var i=0;i<this.groupsList.length;i++){var e=this.groupsList[i].getInnerContainerDomRef();r=e.getBoundingClientRect();b=!(r.right<m||r.left>m);c=!(r.bottom<a||r.top>a);if(b&&c){d=this.groupsList[i];break;}}var f=jQuery.extend({},this.curTouchMatrixCords);if(!d||d.getIsGroupLocked()){return false;}if(d){this.matrix=this.matrix||this.thisLayout.organizeGroup(this.thisLayout.getGroupTiles(d));var g=(r.top*(-1)+a)/(this.tileHeight+this.tileMargin);var h=(r.left*(-1)+m)/(this.tileWidth+this.tileMargin);f={row:Math.floor(g),column:Math.floor(h)};}if((d===this.endGroup)&&(f.column===this.curTouchMatrixCords.column)&&(f.row===this.curTouchMatrixCords.row)){return false;}this.collisionLeft=(f.column-this.curTouchMatrixCords.column)>0;if(f.column===this.curTouchMatrixCords.column){this.collisionLeft=false;}jQuery.extend(this.curTouchMatrixCords,f);this.endGroup=d;return true;},removeExcludedElementsFromMatrix:function(e){if(!e.length){return;}var n=this.matrix.map(function(r){return r.map(function(i){var a=e.some(function(c){return i instanceof c;});return(a)?undefined:i;});});this.setMatrix(n);},setExcludedControl:function(c){if(c){this.aExcludedControlClass.push(c);}},setReorderTilesCallback:function(f){if(typeof f==="function"){this.reorderElementsCallback=f;}}};var L=function(){};L.prototype={init:function(c){var d=jQuery.Deferred();var t=function(){var s=this.getStyleInfo(this.container);if(s.tileWidth>0){this.isInited=true;this.reRenderGroupsLayout();this.layoutEngine=new C({thisLayout:this});d.resolve();return;}setTimeout(t,100);}.bind(this);this.cfg=c||this.cfg;this.minTilesinRow=2;this.maxTilesInRow=8;this.rightToLeft=sap.ui.getCore().getConfiguration().getRTL();this.container=this.cfg.container||document.getElementById('dashboardGroups');t();return d.promise();},getLayoutEngine:function(){return this.layoutEngine;},getStyleInfo:function(c){var t=document.createElement('div'),a=c.getAttribute('id');c=a?document.getElementById(a):c;t.className="sapUshellTile";t.setAttribute('style','position: absolute; visibility: hidden;');c.appendChild(t);var b=window.getComputedStyle(t);var i={"tileMarginHeight":parseInt(b.marginBottom,10)+parseInt(b.marginTop,10),"tileMarginWidth":parseInt(b.marginLeft,10)+parseInt(b.marginRight,10),"tileWidth":t.offsetWidth,"tileHeight":t.offsetHeight,"containerWidth":c.offsetWidth};t.parentNode.removeChild(t);return i;},getGroups:function(){return this.cfg.getGroups();},getTilesInRow:function(i){return this.tilesInRow;},setTilesInRow:function(t){this.tilesInRow=t;},checkPlaceForTile:function(t,m,a,l,i){if(typeof m[a.y]==="undefined"){m.push(new Array(m[0].length));}if(typeof m[a.y+1]==="undefined"){m.push(new Array(m[0].length));}if(typeof m[a.y][a.x]!=="undefined"){return false;}var p=jQuery.extend({},a);if(i||(!t.getLong()&&!t.getTall())){return[p];}var c=[p];if(t.getTall()){if((p.y+1)>l||typeof m[p.y+1][p.x]!=="undefined"){return false;}c.push({y:p.y+1,x:p.x});}if(t.getLong()){if((a.x+1)>=m[0].length||(typeof m[p.y][p.x+1]!=="undefined")){return false;}c.push({y:p.y,x:p.x+1});}if(t.getTall()&&t.getLong()){if(typeof m[p.y+1][p.x+1]!=="undefined"){return false;}c.push({y:p.y+1,x:p.x+1});}return c;},placeTile:function(t,m,c){for(var i=0;i<c.length;i++){m[c[i].y][c[i].x]=t;}},getTilePositionInMatrix:function(t,m){for(var r=0;r<m.length;r++){for(var c=0;c<m[0].length;c++){if(m[r][c]==t){return{row:r,col:c};}}}return false;},fillRowsInLine:function(m,t,s,e,I){if(!t.length){return 0;}var p=[],c,i;var a=e||s;for(i=s;i<=a&&t.length;i++){for(var j=0;j<m[0].length&&t.length;j++){c=this.checkPlaceForTile(t[0],m,{x:j,y:i},e,I);if(c){this.placeTile(t[0],m,c);p.push(t.shift());}}}var b=1,h;for(i=0;i<p.length;i++){h=!I&&p[i].getTall()?2:1;b=h>b?h:b;}return b;},organizeGroup:function(t,I){var a=t.slice(0);var b=[];var c=0;b.push(new Array(I?Math.round(this.tilesInRow/2):this.tilesInRow));while(a.length){var l=this.fillRowsInLine(b,a,c,undefined,I);c++;if(l<=1){continue;}this.fillRowsInLine(b,a,c,c+l-2);c+=(l-1)||1;}if(this.rightToLeft){for(var i=0;i<b.length;i++){b[i].reverse();}}b=this.cleanRows(b);return b;},cleanRows:function(t){var d=false;for(var r=t.length-1;r>0&&!d;r--){for(var c=0;c<t[r].length&&!d;c++){if(typeof t[r][c]==="object"){d=true;}}if(!d){t.pop();}}return t;},applyTilesPositions:function(g,m){var p=[];var s=0;var i;for(i=0;i<m.length;i++){var e=true;for(var j=0;j<m[0].length;j++){if(typeof m[i][j]=="object"&&p.indexOf(m[i][j])<0){var t=m[i][j];if(this.rightToLeft){s=this.tilesInRow-1;if(t.getLong()){s--;}}var a=(j-s)*this.styleInfo.tileWidth+(j-s)*this.styleInfo.tileMarginWidth;var b=(i*this.styleInfo.tileHeight)+(i*this.styleInfo.tileMarginHeight);var c="translate3d("+a+"px,"+b+"px,0px)";var d="translate("+a+"px,"+b+"px)";var f=t.getDomRef();if(f){var h=f.style;h.webkitTransform=c;h.transform=c;h.msTransform=d;}t.data('layoutPosition',{translate3D:c,translate2D:d});p.push(t);}if(typeof m[i][j]!=="undefined"){e=false;}}if(e){m.splice(i,1);i--;}}var k=m.length;var l=(k*(this.styleInfo.tileHeight+this.styleInfo.tileMarginHeight))+'px';g.data('containerHeight',l);var n=g.getInnerContainerDomRef();if(n){n.style.height=l;}if(this.cfg.isLockedGroupsCompactLayoutEnabled&&g.getIsGroupLocked()&&m.length>0){var o=g.getDomRef().parentElement;if(this.cfg.isLockedGroupsCompactLayoutEnabled()){var q=m[0].length;for(i=0;i<m[0].length;i++){if(!m[0][i]){q=i;break;}}var r=q*(this.styleInfo.tileWidth+this.styleInfo.tileMarginWidth);g.getDomRef().style.width="auto";o.style.width=r+"px";o.style.display="inline-block";}else{g.getDomRef().style.width="";o.style.width="";o.style.display="";}}},calcTilesInRow:function(c,t,a){var b=Math.floor(c/(t+a));if(b<=this.maxTilesInRow){b=(b<this.minTilesinRow?this.minTilesinRow:b);}else{b=this.maxTilesInRow;}return b;},reRenderGroupLayout:function(g,t){t=t||this.getGroupTiles(g);var a=this.organizeGroup(t);this.applyTilesPositions(g,a);},getGroupTiles:function(g){var t=g.getTiles();if(g.getShowPlaceholder()){t.push(g.oPlusTile);}return t;},reRenderGroupsLayout:function(g,o){if(!this.isInited){return;}var s=this.getStyleInfo(this.container);if(!s.tileWidth){return;}if(o&&JSON.stringify(s)==JSON.stringify(this.styleInfo)){return;}this.styleInfo=s;this.tilesInRow=this.calcTilesInRow(s.containerWidth,s.tileWidth,s.tileMarginWidth);g=g||this.getGroups();for(var i=0;i<g.length;i++){this.reRenderGroupLayout(g[i]);}}};sap.ushell.Layout=new L();})();};if(!jQuery.sap.isDeclared('sap.ushell.System')){(function(){"use strict";jQuery.sap.declare("sap.ushell.System");sap.ushell.System=function(d){this.getAlias=function(){return d.alias;};this.getBaseUrl=function(){return d.baseUrl;};this.getClient=function(){return d.client;};this.getName=function(){return d.system;};this.getPlatform=function(){return d.platform;};this.adjustUrl=function(u){if(u.indexOf('/')!==0||u==='/'){throw new Error("Invalid URL: "+u);}if(d.baseUrl===";o="){if(d.alias){u=u+";o="+d.alias;}}else if(d.baseUrl){u=d.baseUrl.replace(/\/$/,"")+u;}if(d.client){u+=(u.indexOf("?")>=0?"&":"?")+"sap-client="+d.client;}return u;};this.toString=function(){return JSON.stringify(d);};};}());};if(!jQuery.sap.isDeclared('sap.ushell.UIActions')){(function(){"use strict";jQuery.sap.declare("sap.ushell.UIActions");sap.ushell.UIActions=function(c){if(!c||!c.rootSelector||!c.containerSelector||!c.draggableSelector){throw new Error("No configuration object to initialize User Interaction module.");}this.animationDuration=null;this.captureStart=null;this.captureMove=null;this.captureEnd=null;this.clickCallback=null;this.clickEvent=null;this.clickHandler=null;this.clone=null;this.cloneClass=null;this.container=null;this.contextMenuEvent=null;this.debug=null;this.defaultDragStartEvent=null;this.disabledDraggableSelector=null;this.dragAndScrollCallback=null;this.dragAndScrollDuration=null;this.dragAndScrollTimer=null;this.draggable=null;this.placeHolderClass=null;this.draggableSelector=null;this.draggableSelectorExclude=null;this.doubleTapCallback=null;this.doubleTapDelay=null;this.element=null;this.endX=null;this.endY=null;this.isLayoutEngine=null;this.isTouch=null;this.lastElement=null;this.lastTapTime=null;this.lockMode=null;this.log=null;this.mode=null;this.mouseDownEvent=null;this.mouseMoveEvent=null;this.mouseUpEvent=null;this.moveTolerance=null;this.moveX=null;this.moveY=null;this.noop=null;this.onDragStartUIHandler=null;this.onDragEndUIHandler=null;this.preventClickFlag;this.preventClickTimeoutId;this.scrollContainer=null;this.scrollContainerSelector=null;this.scrollEvent=null;this.scrollTimer=null;this.startX=null;this.startY=null;this.switchModeDelay=null;this.tapsNumber=null;this.timer=null;this.scrollHandler=null;this.touchCancelEvent=null;this.dragCallback=null;this.endCallback=null;this.touchEndEvent=null;this.touchMoveEvent=null;this.startCallback=null;this.touchStartEvent=null;this.wrapper=null;this.wrapperRect=null;this.scrollCallback=null;this.init=function(c){this.startX=-1;this.startY=-1;this.moveX=-1;this.moveY=-1;this.endX=-1;this.endY=-1;this.noop=function(){};this.isLayoutEngine=c.isLayoutEngine||false;if(this.isLayoutEngine){this.moveDraggable=this.noop;}this.isTouch=c.isTouch?!!c.isTouch:false;this.container=document.querySelector(c.containerSelector);this.scrollContainerSelector=c.scrollContainerSelector||c.containerSelector;this.switchModeDelay=c.switchModeDelay||1500;this.dragAndScrollDuration=c.dragAndScrollDuration||230;this.moveTolerance=c.moveTolerance===0?0:c.moveTolerance||10;this.draggableSelector=c.draggableSelector;this.draggableSelectorBlocker=c.draggableSelectorBlocker||c.rootSelector;this.draggableSelectorExclude=c.draggableSelectorExclude;this.mode='normal';this.debug=c.debug||false;this.root=document.querySelector(c.rootSelector);this.animationDuration=c.animationDuration||330;this.tapsNumber=0;this.lastTapTime=0;this.log=this.debug?this.logToConsole:this.noop;this.lockMode=false;this.placeHolderClass=c.placeHolderClass||"";this.cloneClass=c.cloneClass||"";this.wrapper=c.wrapperSelector?document.querySelector(c.wrapperSelector):this.container.parentNode;this.clickCallback=typeof c.clickCallback==='function'?c.clickCallback:this.noop;this.startCallback=typeof c.startCallback==='function'?c.startCallback:this.noop;this.doubleTapCallback=typeof c.doubleTapCallback==='function'?c.doubleTapCallback:this.noop;this.endCallback=typeof c.endCallback==='function'?c.endCallback:this.noop;this.dragCallback=typeof c.dragCallback==='function'?c.dragCallback:this.noop;this.dragAndScrollCallback=typeof c.dragAndScrollCallback==='function'?c.dragAndScrollCallback:this.noop;this.scrollCallback=typeof c.scrollCallback==='function'?c.scrollCallback:this.noop;this.doubleTapDelay=c.doubleTapDelay||500;this.wrapperRect=this.wrapper.getBoundingClientRect();this.scrollEvent='scroll';this.touchStartEvent='touchstart';this.touchMoveEvent='touchmove';this.touchEndEvent='touchend';this.mouseDownEvent='mousedown';this.mouseMoveEvent='mousemove';this.mouseUpEvent='mouseup';this.contextMenuEvent='contextmenu';this.touchCancelEvent='touchcancel';this.defaultDragStartEvent='dragstart';this.clickEvent='click';this.isVerticalDragOnly=c.isVerticalDragOnly||false;this.disabledDraggableSelector=c.disabledDraggableSelector;this.onDragStartUIHandler=typeof c.onDragStartUIHandler==='function'?c.onDragStartUIHandler:this.noop;this.onDragEndUIHandler=typeof c.onDragEndUIHandler==='function'?c.onDragEndUIHandler:this.noop;};this.forEach=function(s,a){return Array.prototype.forEach.call(s,a);};this.indexOf=function(s,i){return Array.prototype.indexOf.call(s,i);};this.insertBefore=function(s,i,r){var a,b,d;d=Array.prototype.splice;a=this.indexOf(s,i);b=this.indexOf(s,r);d.call(s,b-(a<b?1:0),0,d.call(s,a,1)[0]);};this.logToConsole=function(){window.console.log.apply(console,arguments);};this.getDraggableElement=function(a){var e;this.draggable=jQuery(this.draggableSelector,this.container);while(typeof e==='undefined'&&a!==this.root&&!jQuery(a).is(this.draggableSelectorBlocker)){if(this.indexOf(this.draggable,a)>=0&&jQuery(a).not(this.draggableSelectorExclude).length>0){e=a;}a=a.parentNode;}return e;};this.captureStart=function(e){var a;if(e.type==='touchstart'&&e.touches.length===1){a=e.touches[0];}else if(e.type==='mousedown'){a=e;if(e.which!=1){return;}}if(a){this.element=this.getDraggableElement(a.target);this.startX=a.pageX;this.startY=a.pageY;this.lastMoveX=0;this.lastMoveY=0;if(this.lastTapTime&&this.lastElement&&this.element&&(this.lastElement===this.element)&&Math.abs(Date.now()-this.lastTapTime)<this.doubleTapDelay){this.lastTapTime=0;this.tapsNumber=2;}else{this.lastTapTime=Date.now();this.tapsNumber=1;this.lastElement=this.element;}this.log('captureStart('+this.startX+', '+this.startY+')');}};this.startHandler=function(e){this.log('startHandler');clearTimeout(this.timer);delete this.timer;this.captureStart(e);if(this.element){this.startCallback(e,this.element);if(this.lockMode===false){if(this.tapsNumber===2){this.mode='double-tap';return;}if(this.isTouch){this.timer=setTimeout(function(){if(!jQuery(this.element).hasClass(this.disabledDraggableSelector)){this.log('mode switched to drag');this.mode='drag';this.createClone();this.dragCallback(e,this.element);}else{this.onDragStartUIHandler();}}.bind(this),this.switchModeDelay);}}}}.bind(this);this.captureMove=function(e){var a;if(e.type==='touchmove'&&e.touches.length===1){a=e.touches[0];}else if(e.type==='mousemove'){a=e;}if(a){this.moveX=a.pageX;this.moveY=a.pageY;this.log('captureMove('+this.moveX+', '+this.moveY+')');}};this.moveHandler=function(e){var i;this.log('moveHandler');this.captureMove(e);switch(this.mode){case'normal':if((Math.abs(this.startX-this.moveX)>this.moveTolerance||Math.abs(this.startY-this.moveY)>this.moveTolerance)){if(this.isTouch){this.log('-> normal');clearTimeout(this.timer);delete this.timer;}else if(this.element){this.onDragStartUIHandler();if(!jQuery(this.element).hasClass(this.disabledDraggableSelector)){this.log('mode switched to drag');this.mode='drag';this.createClone();}else{this.preventClick();this.element=null;}}}break;case'drag':e.preventDefault();this.onDragStartUIHandler();this.log('-> drag');if(this.isVerticalDragOnly){this.mode='vertical-drag';}else{this.mode='drag-and-scroll';}window.addEventListener(this.mouseUpEvent,this.endHandler,true);this.translateClone();this.scrollContainer=document.querySelector(this.scrollContainerSelector);this.dragAndScroll();if(!this.isTouch){this.dragCallback(e,this.element);}break;case'drag-and-scroll':e.stopPropagation();e.preventDefault();this.log('-> drag-and-scroll');i=this.dragAndScroll();this.translateClone();if(!i){this.moveDraggable();}this.dragAndScrollCallback({evt:e,clone:this.clone,isScrolling:i,moveX:this.moveX,moveY:this.moveY});break;case'vertical-drag':e.stopPropagation();e.preventDefault();i=this.dragAndScroll();this.translateClone();if(!i){this.moveDraggableVerticalOnly(this.moveX,this.moveY);}this.dragAndScrollCallback({evt:e,clone:this.clone,isScrolling:i,moveX:this.moveX,moveY:this.moveY});break;default:break;}}.bind(this);this.captureEnd=function(e){var a;if((e.type==='touchend'||e.type==='touchcancel')&&(e.changedTouches.length===1)){a=e.changedTouches[0];}else if(e.type==='mouseup'){a=e;}if(a){this.endX=a.pageX;this.endY=a.pageY;this.log('captureEnd('+this.endX+', '+this.endY+')');}};this.contextMenuHandler=function(e){if(this.isTouch){e.preventDefault();}}.bind(this);this.clickHandler=function(e){if(this.preventClickFlag){this.preventClickFlag=false;e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();clearTimeout(this.preventClickTimeoutId);}this.clickCallback();}.bind(this);this.preventClick=function(){this.preventClickFlag=true;this.preventClickTimeoutId=setTimeout(function(){this.preventClickFlag=false;}.bind(this),100);};this.endHandler=function(e){this.log('endHandler');this.captureEnd(e);this.onDragEndUIHandler();switch(this.mode){case'normal':this.log('-> normal');break;case'drag':this.log('-> drag');this.removeClone();this.endCallback(e,this.element);this.preventClick();break;case'drag-and-scroll':this.log('-> drag-and-scroll');window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.removeClone();this.endCallback(e,this.element);this.preventClick();e.stopPropagation();e.preventDefault();break;case'vertical-drag':this.log('-> vertical-drag');window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.removeClone();this.endCallback(e,this.element);this.preventClick();e.stopPropagation();e.preventDefault();break;case'double-tap':this.log('-> double-tap');this.doubleTapCallback(e,this.element);break;default:break;}clearTimeout(this.timer);delete this.timer;this.lastMoveX=0;this.lastMoveY=0;this.element=null;this.mode='normal';}.bind(this);this.defaultDragStartHandler=function(e){e.preventDefault();};this.scrollHandler=function(){clearTimeout(this.scrollTimer);this.lockMode=true;this.scrollTimer=setTimeout(function(){this.lockMode=false;}.bind(this),500);}.bind(this);this.createClone=function(){var s,r;r=this.element.getBoundingClientRect();this.clone=this.element.cloneNode(true);this.clone.className+=(' '+this.cloneClass);this.element.className+=(' '+this.placeHolderClass);s=this.clone.style;s.position='fixed';s.display='block';s.top=r.top+'px';s.left=r.left+'px';s.width=r.width+'px';s.zIndex='100';s.webkitTransition='-webkit-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.mozTransition='-moz-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.msTransition='-ms-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.transition='transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.webkitTransform='translate3d(0px, 0px, 0px) ';s.mozTransform='translate3d(0px, 0px, 0px) ';s.msTransform='translate3d(0px, 0px, 0px) ';s.transform='translate3d(0px, 0px, 0px) ';this.root.appendChild(this.clone);this.log('createClone');};this.removeClone=function(){this.element.className=this.element.className.split(' '+this.placeHolderClass).join('');this.clone.parentElement.removeChild(this.clone);this.clone=null;this.log('removeClone');};this.translateClone=function(){var d,a;d=this.moveX-this.startX;a=this.moveY-this.startY;this.clone.style.webkitTransform='translate3d('+d+'px, '+a+'px, 0px)';this.clone.style.mozTransform='translate3d('+d+'px, '+a+'px, 0px)';this.clone.style.msTransform='translate('+d+'px, '+a+'px)';this.clone.style.transform='translate3d('+d+'px, '+a+'px, 0px)';this.log('translateClone ('+d+', '+a+')');};this.dragAndScroll=function(){var d,a,s,t=this;function b(){s.webkitTransition='-webkit-transform '+a+'ms linear';s.transition='transform '+a+'ms linear';s.mozTransition='-moz-transform '+a+'ms linear';s.msTransition='-ms-transform '+a+'ms linear';s.webkitTransform='translate(0px, '+d+'px) scale(1) translateZ(0px)';s.mozTransform='translate(0px, '+d+'px) scale(1) translateZ(0px)';s.msTransform='translate(0px, '+d+'px) scale(1) translateZ(0px)';s.transform='translate(0px, '+d+'px) scale(1) translateZ(0px)';}function e(){s.webkitTransition='';s.mozTransition='';s.msTransition='';s.transition='';s.webkitTransform='';s.mozTransform='';s.msTransform='';s.transform='';t.wrapper.scrollTop-=d;}function g(){var r,h;if(t.clone){r=t.clone.getBoundingClientRect();h=t.wrapperRect.top-r.top;if(h>0){return h;}h=t.wrapper.offsetTop+t.wrapper.offsetHeight-(r.top+t.clone.offsetHeight);if(h<0){return h;}}return 0;}function i(){if(d<0){return t.wrapper.getBoundingClientRect().top-(t.container.getBoundingClientRect().top+t.container.offsetHeight)+t.wrapper.offsetHeight<0;}return t.container.getBoundingClientRect().top-(t.wrapper.getBoundingClientRect().top+t.container.offsetTop)<0;}function f(){b();t.dragAndScrollTimer=setTimeout(function(){e();t.dragAndScrollTimer=undefined;if((d=g())!==0&&i()){f();}t.scrollCallback();},a);}d=g();if(d!==0&&!this.dragAndScrollTimer&&i()){a=this.dragAndScrollDuration;this.scrollContainer=this.scrollContainer||document.querySelector(this.scrollContainerSelector);s=this.scrollContainer.style;f();}this.log('dragAndScroll ('+d+')');return(d!=0)&&i();};this.moveDraggableVerticalOnly=function(){var h,i,r,m=true;this.forEach(this.draggable,function(a,b){if(!h){r=a.getBoundingClientRect();i=!(r.bottom<this.moveY||r.top>this.moveY);if(i){h=a;if(r.top+r.height/2<this.moveY){m=false;}}}}.bind(this));if(h&&this.element!==h){if(m){this.insertBefore(this.draggable,this.element,h);h.parentNode.insertBefore(this.element,h);}else{this.insertBefore(this.draggable,this.element,h.nextSibling);h.parentNode.insertBefore(this.element,h.nextSibling);}this.lastMoveX=this.moveX;this.lastMoveY=this.moveY;}this.log('moveDraggableVerticalonly');};this.moveDraggable=function(m,a){var e,h,b,i,d,r;this.forEach(this.draggable,function(f,g){if(!h){r=f.getBoundingClientRect();i=!(r.right<this.moveX||r.left>this.moveX);d=!(r.bottom<this.moveY||r.top>this.moveY);if(i&&d){h=f;b=g;}}}.bind(this));if(h&&this.element!==h){e=this.indexOf(this.draggable,this.element);if(Math.abs(this.lastMoveX-this.moveX)>=this.moveTolerance||Math.abs(this.lastMoveY-this.moveY)>=this.moveTolerance){if(b<=e){h.parentNode.insertBefore(this.element,h);this.insertBefore(this.draggable,this.element,h);}else if(b>e){h.parentNode.insertBefore(this.element,h.nextSibling);this.insertBefore(this.draggable,this.element,this.draggable[b+1]);}this.lastMoveX=this.moveX;this.lastMoveY=this.moveY;}}this.log('moveDraggable');};this.enable=function(){this.log('enable');this.root.addEventListener(this.touchStartEvent,this.startHandler,false);this.root.addEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.addEventListener(this.touchEndEvent,this.endHandler,false);this.root.addEventListener(this.touchCancelEvent,this.endHandler,false);this.root.addEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.addEventListener(this.mouseDownEvent,this.startHandler,false);this.root.addEventListener(this.mouseUpEvent,this.endHandler,false);this.root.addEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.addEventListener(this.clickEvent,this.clickHandler,true);this.root.addEventListener(this.defaultDragStartEvent,this.defaultDragStartHandler,true);this.wrapper.addEventListener(this.scrollEvent,this.scrollHandler,false);return this;};this.disable=function(){this.log('disable');this.root.removeEventListener(this.touchStartEvent,this.startHandler,false);this.root.removeEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.touchEndEvent,this.endHandler,false);this.root.removeEventListener(this.mouseDownEvent,this.startHandler,false);this.root.removeEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.mouseUpEvent,this.endHandler,false);this.root.removeEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.removeEventListener(this.clickEvent,this.clickHandler,true);this.root.removeEventListener(this.touchCancelEvent,this.endHandler,false);this.wrapper.removeEventListener(this.scrollEvent,this.scrollHandler,false);return this;};this.init(c);this.getMove=function(){return{x:this.moveX,y:this.moveY};};};})();};if(!jQuery.sap.isDeclared('sap.ushell.UIActionsWin8')){(function(){"use strict";function n(){}var U=function(){};U.prototype={init:function(c){this.cfg=c;this.forGroups=this.cfg.forGroups||false;this.wrapper=jQuery(c.wrapperSelector).get(0);this.container=jQuery(c.containerSelector).get(0);this.dragAndScrollCallback=c.dragAndScrollCallback||n;this.dragAndScrollDuration=100;this.dragCallback=c.dragCallback||n;this.draggableSelector=c.draggableSelector;this.endCallback=typeof c.endCallback==='function'?c.endCallback:n;this.placeHolderClass=c.placeHolderClass||"";this.$root=jQuery(c.rootSelector);this.startCallback=typeof c.startCallback==='function'?c.startCallback:n;this.onDragStartUIHandler=typeof c.onDragStartUIHandler==='function'?c.onDragStartUIHandler:n;this.onDragEndUIHandler=typeof c.onDragEndUIHandler==='function'?c.onDragEndUIHandler:n;this._publishAsync=typeof c._publishAsync==='function'?c._publishAsync:n;},enable:function(){if(this.enabled){return this;}this.enabled=true;this.$root.on('dragstart',this.draggableSelector,this,this.dragStartHandler).on('dragend',this.draggableSelector,this,this.dragEndHandler);return this;},disable:function disable(){this.enabled=false;this.$root.off('dragstart',this.draggableSelector).off('dragend',this.draggableSelector);return this;},dragLeaveHandler:function(e){var c=window.getComputedStyle(e.data.container).transform;e.data.container.style.transform=c;e.data.container.style.transition='';var t;var b=c.split(",");if(c.substr(0,8)=="matrix3d"){t=parseInt(b[13],10);}else if(c.substr(0,6)=="matrix"){t=parseInt(b[5],10);}if(isNaN(t)){return;}e.data.container.style.transform="none";e.data.wrapper.scrollTop+=~t+1;},dragEnterHandler:function dragEnterHandler(e){if(e.target==e.data.$bottomScroller.get(0)){e.data.startScroll("down");}if(e.target==e.data.$topScroller.get(0)){e.data.startScroll("up");}},startScroll:function(d){var l;if(d=="up"){l=this.wrapper.scrollTop;if(l<=0){return;}}else{l=this.wrapper.scrollHeight-this.wrapper.offsetHeight-this.wrapper.scrollTop;if(l<=0){return;}}var s=l*3;var t=(d=="up")?l:~l+1;this.container.style.transition='transform '+s+'ms linear';this.container.style.transform='translate(0px, '+t+'px) scale(1) translateZ(0px)';},initScrollRegions:function(){this.$topScroller=jQuery("<div class='UiActionsTopScroller' style='position:absolute; top: 0; height: 70px; left:0; right:0;'></div>");this.$bottomScroller=jQuery("<div class='UiActionsBottomScroller' style='position:absolute; bottom: 0; height: 70px; left:0; right:0;'></div>");jQuery(document.body).append(this.$topScroller).append(this.$bottomScroller);this.$topScroller.add(this.$bottomScroller).on('dragenter',this,this.dragEnterHandler).on('dragleave',this,this.dragLeaveHandler);},removeScrollRegions:function(){jQuery('.UiActionsTopScroller, .UiActionsBottomScroller').remove();}};function G(c){this.init(c);}G.prototype=new U();jQuery.extend(G.prototype,{dragOverTimeout:null,dragStartHandler:function(e){var _=e.data;if(sap.ui.Device.system.phone){_.$root.find(".sapUshellTilesContainer-sortable").addClass("sapUshellTileContainerRemoveContent");_.$root.find(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerRemoveContent");_.$root.find(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");}else{_.$root.find(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerHidden");}_.$originalElement=jQuery(e.target).closest(".sapUshellDashboardGroupsContainerItem");_.originalIndex=_.$originalElement.index();_.$element=_.$originalElement.clone().css("display","none").addClass('sapUshellDashboardGroupsContainerItem-placeholder');_.$element.insertAfter(_.$originalElement);_.$originalElement.addClass("sapUshellDashboardGroupsContainerItem-orignal");_.$root.find('.sapUshellTileContainerAfterContent').last().addClass("sapUshellTileContainerRemoveContent");_.initScrollRegions();setTimeout(function(){_.$originalElement.css("display","none");_.$element.css("display","block");},0);_.$root.on('dragover',".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)",_,_.dragOverHandler);},dragEndHandler:function(e){var _=e.data;_.removeScrollRegions();_.$root.off('dragover',".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)");_.$root.find(".sapUshellTilesContainer-sortable").removeClass("sapUshellTileContainerRemoveContent");_.$root.find(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerRemoveContent");_.$root.find(".sapUshellContainerHeaderActions").removeClass("sapUshellTileContainerHidden");_.$root.find(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerHidden");_.$element.replaceWith(_.$originalElement);var b=_.$originalElement.index();_.$originalElement.css('display','block').removeClass("sapUshellDashboardGroupsContainerItem-orignal");var B=sap.ui.getCore().getEventBus(),f=_.$originalElement.children().eq(0).attr("id"),g=sap.ui.getCore().byId(f),d=sap.ui.getCore().byId("dashboardGroups"),D={group:g,groupChanged:false,focus:false};d.removeAggregation('groups',g,true);d.insertAggregation('groups',g,b,true);_._publishAsync("launchpad","moveGroup",{fromIndex:_.originalIndex,toIndex:b});window.setTimeout(jQuery.proxy(B.publish,B,"launchpad","scrollToGroup",D),1);},dragOverHandler:function dragOverHandler(e){if(e.data.dragOverTimeout){return;}e.data.dragOverTimeout=setTimeout(function(){e.data.dragOverTimeout=null;var o=e.currentTarget;if(e.data.$element.get(0)===o){return;}var b=e.data.isOverAboveMiddle(o,e.originalEvent.pageY);if(o===e.data.overElement&&b===e.data.overAboveMiddle){return;}e.data.overElement=o;e.data.overAboveMiddle=b;e.data.movePlaceholder(e.data.$element,o,b);},50);},isOverAboveMiddle:function(e,p){var m=true;var r=e.getBoundingClientRect();if(r.top+r.height/2<p){m=false;}return m;},movePlaceholder:function(p,e,i){if(i){jQuery(p).insertBefore(jQuery(e));}else{jQuery(p).insertAfter(jQuery(e));}}});function T(c){this.init(c);}T.prototype=new U();jQuery.extend(T.prototype,{dragOverTimeout:null,dragStartHandler:function dragStartHandler(e){var _=e.data;_.element=e.target;_.$root.on('dragover',_.draggableSelector+", .sapUshellTileContainer",_,_.dragOverHandler);var i=e.target.getAttribute("id");_.oTile=sap.ui.getCore().byId(i);if(_.oTile.getParent().getIsGroupLocked()&&_.oTile.getParent().getDefaultGroup()){_.onDragStartUIHandler();e.preventDefault();var m=function m(){_.onDragEndUIHandler();document.removeEventListener("mouseup",m);};document.addEventListener("mouseup",m);return false;}_.initScrollRegions();var $=jQuery(e.target).clone();$.addClass(_.placeHolderClass).css('z-index',"-1");var c=$.get(0);_.$cloned=$;jQuery(e.target).after($);_.getDomRefOriginal=_.oTile.getDomRef;_.oTile.getDomRef=function(){return c;};_.startCallback(e,_.element);_.onDragStartUIHandler();_.dragCallback(e,_.element);setTimeout(function(){jQuery(e.target).css("visibility","hidden");},0);},dragEndHandler:function dragEndHandler(e){var _=e.data;_.$root.off('dragover',_.draggableSelector+", .sapUshellTileContainer",_.dragOverHandler);_.removeScrollRegions();_.oTile.getDomRef=_.getDomRefOriginal;jQuery(_.element).css('visibility','visible');_.$cloned.remove();_.endCallback(e,_.element);_.onDragEndUIHandler();_.element=null;},dragOverHandler:function dragOverHandler(e){if(e.data.dragOverTimeout){return;}e.data.dragOverTimeout=setTimeout(function(){e.data.dragOverTimeout=null;e.data.overElement=this;e.data.dragAndScrollCallback({moveX:e.originalEvent.pageX,moveY:e.originalEvent.pageY});},50);}});var a={getInstance:function(c){return c.forGroups?new G(c):new T(c);}};jQuery.sap.declare("sap.ushell.UIActionsWin8");sap.ushell.UIActionsWin8=a;}());};if(!jQuery.sap.isDeclared('sap.ushell.adapters.local.ClientSideTargetResolutionAdapter')){(function(){"use strict";jQuery.sap.declare("sap.ushell.adapters.local.ClientSideTargetResolutionAdapter");sap.ushell.adapters.local.ClientSideTargetResolutionAdapter=function(s,p,c){this._oConfig=c&&c.config;};sap.ushell.adapters.local.ClientSideTargetResolutionAdapter.prototype.getInbounds=function(){var d=new jQuery.Deferred();d.resolve([]);return d.promise();};}());};if(!jQuery.sap.isDeclared('sap.ushell.adapters.local.EndUserFeedbackAdapter')){(function(){"use strict";jQuery.sap.declare("sap.ushell.adapters.local.EndUserFeedbackAdapter");jQuery.sap.require('jquery.sap.storage');var e;sap.ushell.adapters.local.EndUserFeedbackAdapter=function(s,p,a){var S="com.sap.ushell.adapters.local.EndUserFeedback";this.sendFeedback=function(f){var d,o,n;n=333;d=new jQuery.Deferred();setTimeout(function(){o=jQuery.sap.storage(jQuery.sap.storage.Type.session,S);if(o.put(n,JSON.stringify(f))===true){jQuery.sap.log.info("User Feedback "+JSON.stringify(f)+" has been sent.");d.resolve(n);}else{d.reject("Failed to save end user feedback");}},0);return d.promise();};this.getLegalText=function(){var d,l;l="This is the legal text \n in the users language.\n with multiple line breaks.";d=new jQuery.Deferred();setTimeout(function(){jQuery.sap.log.info("Legal text "+l+" for user feedback dialog has been sent.");d.resolve(l);},0);return d.promise();};this.isEnabled=function(){var d=new jQuery.Deferred();setTimeout(function(){if(e){d.resolve();}else{d.reject();}},0);return d.promise();};e=jQuery.sap.getObject("config.enabled",undefined,a);if(e===undefined){e=true;}};}());};if(!jQuery.sap.isDeclared('sap.ushell.adapters.local.LaunchPageAdapter')){(function(){"use strict";jQuery.sap.declare("sap.ushell.adapters.local.LaunchPageAdapter");jQuery.sap.require('sap.m.Text');sap.ushell.adapters.local.LaunchPageAdapter=function(u,p,a){var c=jQuery.extend(true,[],a.config.groups),C=a.config.catalogs||[],f=0,g=10,m=10,M=10,b,d,h=c[0];this.TileType={Tile:"tile",Link:"link"};if(!b&&a.config.pathToLocalizedContentResources){jQuery.sap.require("sap.ui.model.resource.ResourceModel");b=new sap.ui.model.resource.ResourceModel({bundleUrl:a.config.pathToLocalizedContentResources,bundleLocale:sap.ui.getCore().getConfiguration().getLanguage()});d=b.getResourceBundle();}function _(K){if(d){return d.getText(K);}return K;}jQuery.each(C,function(i,e){if(d){e.title=_(e.title);}jQuery.each(e.tiles,function(i,t){t.getTitle=function(){return t.title;};});});jQuery.each(c,function(i,G){if(d){G.title=_(G.title);}jQuery.each(G.tiles,function(i,t){s(t,true);});});function j(){return(100*Math.random())<f;}function k(){return(100*Math.random())<g;}function l(){return m+M*Math.random();}function o(G,t){var i;for(i=0;i<G.tiles.length;i=i+1){if(t.id===G.tiles[i].id){return i;}}return-1;}function q(G,e){var i;for(i=0;i<G.length;i=i+1){if(e.id===G[i].id){return i;}}return-1;}function r(G){var D=jQuery.Deferred();window.setTimeout(function(){D.resolve(G);},l());return D.promise();}function s(t,n){if(t.tileType!=='sap.ushell.ui.tile.DynamicTile'||!t.properties||!t.properties.serviceUrl){return;}if(t.intervalTimer){clearInterval(t.intervalTimer);t.intervalTimer=undefined;}if(n){var e=t.properties.serviceRefreshInterval;if(e){e=e*1000;}else{e=10000;}t.intervalTimer=setInterval(function(){OData.read(t.properties.serviceUrl+'?id='+t.id+'&t='+new Date().getTime(),function(R){jQuery.sap.log.debug('Dynamic tile service call succeed for tile '+t.id);},function(i){jQuery.sap.log.debug('Dynamic tile service call failed for tile '+t.id+', error message:'+i);});},e);}}this.getGroups=function(){var D=jQuery.Deferred();window.setTimeout(function(){D.resolve(c.slice(0));},l());return D.promise();};this.getDefaultGroup=function(){var D=new jQuery.Deferred();D.resolve(h);return D.promise();};this.addGroup=function(t){var D=jQuery.Deferred(),F=j(),e=this;window.setTimeout(function(){if(!F){var n={id:"group_"+c.length,title:t,tiles:[]};c.push(n);D.resolve(n);}else{e.getGroups().done(function(E){D.reject(E);}).fail(function(){D.reject();});}},l());return D.promise();};this.getGroupTitle=function(G){return G.title;};this.setGroupTitle=function(G,n){var D=jQuery.Deferred(),F=j();window.setTimeout(function(){if(!F){G.title=n;D.resolve();}else{r(G).done(function(e){D.reject(e.title);}).fail(function(){D.reject();});}},l());return D.promise();};this.getGroupId=function(G){return G.id;};this.hideGroups=function(H){if(H&&c){for(var i=0;i<c.length;i++){if(H.indexOf(c[i].id)!=-1){c[i].isVisible=false;}else{c[i].isVisible=true;}}}return jQuery.Deferred().resolve();};this.isGroupVisible=function(G){return G&&(G.isVisible===undefined?true:G.isVisible);};this.moveGroup=function(G,n){var D=jQuery.Deferred(),F=j(),t=this;window.setTimeout(function(){if(!F){c.splice(n,0,c.splice(q(c,G),1)[0]);D.resolve();}else{t.getGroups().done(function(e){D.reject(e);}).fail(function(){D.reject();});}},l());return D.promise();};this.removeGroup=function(G){var D=jQuery.Deferred(),F=j(),t=this;window.setTimeout(function(){if(!F){c.splice(q(c,G),1);jQuery.each(G.tiles,function(i,T){s(T,false);});D.resolve();}else{t.getGroups().done(function(e){D.reject(e);}).fail(function(){D.reject();});}},l());return D.promise();};this.resetGroup=function(G){var D=jQuery.Deferred(),F=j(),t=this;window.setTimeout(function(){if(!F){jQuery.each(G.tiles,function(i,T){s(T,false);});G=jQuery.extend(true,{},a.config.groups[q(a.config.groups,G)]);c.splice(q(c,G),1,G);jQuery.each(G.tiles,function(i,T){s(T,true);});D.resolve(G);}else{t.getGroups().done(function(e){D.reject(e);}).fail(function(){D.reject();});}},l());return D.promise();};this.isGroupRemovable=function(G){return G&&!G.isPreset;};this.isGroupLocked=function(G){return G.isGroupLocked;};this.getGroupTiles=function(G){return G.tiles;};this.getLinkTiles=function(G){return G.links;};this.getTileTitle=function(t){return t.title;};this.getTileType=function(t){if(t.isLink){return this.TileType.Link;}return this.TileType.Tile;};this.getTileId=function(t){return t.id;};this.getTileSize=function(t){return t.size;};this.getTileTarget=function(t){return t.target_url||"";};this.isTileIntentSupported=function(t){if(t&&t.properties&&t.properties.formFactor){var e=t.properties.formFactor;var S=sap.ui.Device.system;var i;if(S.desktop){i="Desktop";}else if(S.tablet){i="Tablet";}else if(S.phone){i="Phone";}if(e.indexOf(i)===-1){return false;}}return true;};this.getTileView=function(t){var D=jQuery.Deferred(),F=j(),e=this;if(k()){window.setTimeout(function(){if(!F){D.resolve(e._getTileView(t));}else{D.reject();}},l());}else{if(!F){D.resolve(e._getTileView(t));}else{D.reject();}}return D.promise();};this._getTileView=function(t){var E='unknown error',V,T,i=this.getTileType(t)==="link";this._translateTileProperties(t);if(t.namespace&&t.path&&t.moduleType){jQuery.sap.registerModulePath(t.namespace,t.path);if(t.moduleType==="UIComponent"){T=new sap.ui.core.ComponentContainer({component:sap.ui.getCore().createComponent({componentData:{properties:t.properties},name:t.moduleName})});}else{T=sap.ui.view({viewName:t.moduleName,type:sap.ui.core.mvc.ViewType[t.moduleType],viewData:{properties:t.properties}});}return T;}else if(t.tileType){jQuery.sap.require(i?"sap.m.Link":t.tileType);V=jQuery.sap.getObject(i?"sap.m.Link":t.tileType);var n=t.properties.targetURL||t.properties.href;if(V){try{if(n){delete t.properties.targetURL;delete t.properties.href;T=new V(t.properties||{});if(i){T.setHref(n);t.properties.href=n;}else{T.setTargetURL(n);t.properties.targetURL=n;}}else{T=new V(t.properties||{});}this._handleTilePress(T);return T;}catch(e){return new sap.m.Text({width:"100%",text:(e&&(e.name+": "+e.message))||"Unknown error while loading Catalog Tile view."});}}else{E='TileType: '+t.tileType+' not found!';}}else{E='No TileType defined!';}return new sap.m.Text({width:"100%",text:E});};this._handleTilePress=function(t){if(typeof t.attachPress==='function'){t.attachPress(function(){if(typeof t.getTargetURL==='function'){var T=t.getTargetURL();if(T){if(T[0]==='#'){hasher.setHash(T);}else{window.open(T,'_blank');}}}});}};this._translateTileProperties=function(t){if(d){if(!t.properties.isTranslated){t.properties.title=_(t.properties.title);t.properties.subtitle=_(t.properties.subtitle);t.properties.info=_(t.properties.info);if(t.properties.keywords){for(var e=0;e<t.properties.keywords.length;e++){t.properties.keywords[e]=_(t.properties.keywords[e]);}}t.properties.isTranslated=true;}}};this.refreshTile=function(t){};this.setTileVisible=function(t,n){s(t,n);};this.addTile=function(e,G){if(!G){G=h;}var D=jQuery.Deferred(),F=j(),t=this;window.setTimeout(function(){if(!F){var n=jQuery.extend(true,{title:"A new tile was added",size:"1x1"},e,{id:"tile_0"+e.chipId});G.tiles.push(n);s(n,true);D.resolve(n);}else{t.getGroups().done(function(E){D.reject(E);}).fail(function(){D.reject();});}},l());return D.promise();};this.removeTile=function(G,t){var D=jQuery.Deferred(),F=j(),e=this;window.setTimeout(function(){if(!F){G.tiles.splice(o(G,t),1);s(t,false);D.resolve();}else{e.getGroups().done(function(E){D.reject(E);}).fail(function(){D.reject();});}},l());return D.promise();};this.moveTile=function(t,e,i,S,T){var D=jQuery.Deferred(),F=j(),n=this;window.setTimeout(function(){if(!F){if(T===undefined){T=S;}S.tiles.splice(e,1);T.tiles.splice(i,0,t);D.resolve(t);}else{n.getGroups().done(function(E){D.reject(E);}).fail(function(){D.reject();});}},l());return D.promise();};this.getTile=function(S,A){var D=jQuery.Deferred();return D.promise();};this.getCatalogs=function(){var D=jQuery.Deferred();C.forEach(function(e){window.setTimeout(function(){D.notify(e);},300);});window.setTimeout(function(){D.resolve(C);},1500);return D.promise();};this.isCatalogsValid=function(){return true;};this.getCatalogError=function(e){return;};this.getCatalogId=function(e){return e.id;};this.getCatalogTitle=function(e){return e.title;};this.getCatalogTiles=function(e){var D=jQuery.Deferred();window.setTimeout(function(){D.resolve(e.tiles);},l());return D.promise();};this.getCatalogTileId=function(e){if(e.chipId){return e.chipId;}else if(e.properties){return e.properties.chipId;}else{return"UnknownCatalogTileId";}};this.getCatalogTileTitle=function(e){return e.title;};this.getCatalogTileSize=function(e){return e.size;};this.getCatalogTileView=function(e){return this._getTileView(e);};this.getCatalogTileTargetURL=function(e){return(e.properties&&e.properties.targetURL)||null;};this.getCatalogTilePreviewTitle=function(e){return(e.properties&&e.properties.title)||null;};this.getCatalogTilePreviewIcon=function(e){return(e.properties&&e.properties.icon)||null;};this.getCatalogTileKeywords=function(e){return jQuery.merge([],jQuery.grep(jQuery.merge([e.title,e.properties&&e.properties.subtitle,e.properties&&e.properties.info],(e.properties&&e.properties.keywords)||[]),function(n,i){return n!==""&&n;}));};this.getCatalogTileTags=function(e){return(e.properties&&e.properties.tags)||[];};this.addBookmark=function(P,G){var G=G?G:h,D=jQuery.Deferred(),F=j(),t=this,e=P.title,i=P.subtitle,n=P.info,v=P.url;window.setTimeout(function(){if(!F){var w={title:e,size:"1x1",chipId:"tile_0"+G.tiles.length,tileType:"sap.ushell.ui.tile.StaticTile",id:"tile_0"+G.tiles.length,properties:{icon:"sap-icon://time-entry-request",keywords:[],info:n,subtitle:i,title:e,targetURL:v}};G.tiles.push(w);s(w,true);D.resolve(w);}else{t.getGroups().done(function(E){D.reject(E);}).fail(function(){D.reject();});}},l());return D.promise();};this.updateBookmarks=function(U,P){var D=new jQuery.Deferred(),G=this.getGroups();G.done(function(R){R.forEach(function(e){e.tiles.forEach(function(t){if(t.properties&&t.properties.targetURL===U){for(var i in P){if(P.hasOwnProperty(i)){t.properties[i]=P[i];}}}});});D.resolve();});G.fail(function(){D.reject();});return D.promise();};this.countBookmarks=function(U){var D=jQuery.Deferred();var i=0;var G,t,e,T;for(e=0;e<c.length;e++){G=c[e];for(T=0;T<G.tiles.length;T++){t=G.tiles[T];if(t.properties.targetURL===U){i++;}}}D.resolve(i);return D.promise();};this.onCatalogTileAdded=function(t){};this.getTileActions=function(t){return(t.properties&&t.properties.actions)||null;};};}());};if(!jQuery.sap.isDeclared('sap.ushell.adapters.local.NavTargetResolutionAdapter')){(function(){"use strict";jQuery.sap.declare("sap.ushell.adapters.local.NavTargetResolutionAdapter");jQuery.sap.require('sap.ui.thirdparty.datajs');sap.ushell.adapters.local.NavTargetResolutionAdapter=function(u,p,a){var A=jQuery.sap.getObject("config.applications",0,a);this.resolveHashFragment=function(h){var d=new jQuery.Deferred(),i,r,R,P;if(h&&h.charAt(0)!=="#"){throw new sap.ushell.utils.Error("Hash fragment expected","sap.ushell.renderers.minimal.Shell");}h=h.substring(1);if(!h&&!A[h]){d.resolve(undefined);}else{jQuery.sap.log.info("Hash Fragment: "+h);i=h.indexOf("?");if(i>=0){P=h.slice(i+1);h=h.slice(0,i);}r=A[h];if(r){R={additionalInformation:r.additionalInformation,applicationType:r.applicationType,url:r.url,text:r.text,fullWidth:r.fullWidth};if(P){R.url+=(R.url.indexOf("?")<0)?"?":"&";R.url+=P;}if(r.navigationMode!==undefined){R.navigationMode=r.navigationMode;}d.resolve(R);}else{d.reject("Could not resolve link '"+h+"'");}}return d.promise();};this.getSemanticObjectLinks=function(s){var I,r=[],i=0,d=new jQuery.Deferred();if(!s){setTimeout(function(){d.resolve([]);},0);}else{jQuery.sap.log.info("getSemanticObjectLinks: "+s);for(I in A){if(A.hasOwnProperty(I)&&I.substring(0,I.indexOf('-'))===s){r[i]=A[I];r[i].id=I;r[i].text=r[i].text||r[i].description||"no text";r[i].intent="#"+I;i+=1;}}if(r){setTimeout(function(){d.resolve(r);},0);}else{setTimeout(function(){d.reject("Could not get links for  '"+s+"'");},0);}}return d.promise();};this.isIntentSupported=function(I){var d=new jQuery.Deferred(),s={},D=[],t=this;function b(i,S){s[i]={supported:S};}I.forEach(function(c,i){var o=new jQuery.Deferred();D.push(o.promise());t.resolveHashFragment(c).fail(function(e){b(c,false);o.resolve();}).done(function(e){b(c,true);o.resolve();});});if(I.length>0){jQuery.when.apply(jQuery,D).always(function(){d.resolve(s);});}else{d.resolve(s);}return d.promise();};};}());};if(!jQuery.sap.isDeclared('sap.ushell.adapters.local.PersonalizationAdapter')){(function(){"use strict";jQuery.sap.declare("sap.ushell.adapters.local.PersonalizationAdapter");var m;sap.ushell.adapters.local.PersonalizationAdapter=function(u,P,a){this._sStorageType=jQuery.sap.getObject("config.storageType",undefined,a)||sap.ushell.adapters.local.PersonalizationAdapter.prototype.constants.storage.LOCAL_STORAGE;switch(this._sStorageType){case sap.ushell.adapters.local.PersonalizationAdapter.prototype.constants.storage.LOCAL_STORAGE:jQuery.sap.require("jquery.sap.storage");break;case sap.ushell.adapters.local.PersonalizationAdapter.prototype.constants.storage.MEMORY:m=jQuery.sap.getObject("config.personalizationData",undefined,a)||{};break;default:throw new sap.ushell.utils.Error("Personalization Adapter Local Platform: unsupported storage type '"+this._sStorageType+"'");}};sap.ushell.adapters.local.PersonalizationAdapter.prototype.constants={"storage":{"MEMORY":"MEMORY","LOCAL_STORAGE":"LOCAL_STORAGE"}};sap.ushell.adapters.local.PersonalizationAdapter.prototype.getAdapterContainer=function(C){return new sap.ushell.adapters.local.AdapterContainer(C,this._sStorageType);};sap.ushell.adapters.local.PersonalizationAdapter.prototype.delAdapterContainer=function(C){return this.getAdapterContainer(C).del();};sap.ushell.adapters.local.AdapterContainer=function(C,S){this._sContainerKey=C;this._sStorageType=S;this._oItemMap=new sap.ushell.utils.Map();};function g(){return jQuery.sap.storage(jQuery.sap.storage.Type.local,"com.sap.ushell.adapters.sandbox.Personalization");}function p(j){try{return JSON.parse(j);}catch(e){return undefined;}}function s(j){return JSON.stringify(j);}function c(j){if(j===undefined){return undefined;}try{return JSON.parse(JSON.stringify(j));}catch(e){return undefined;}}sap.ushell.adapters.local.AdapterContainer.prototype.load=function(){var d=new jQuery.Deferred(),l,i,t=this;switch(this._sStorageType){case sap.ushell.adapters.local.PersonalizationAdapter.prototype.constants.storage.LOCAL_STORAGE:l=g();setTimeout(function(){i=l.get(t._sContainerKey);t._oItemMap.entries=p(i)||{};d.resolve(t);},0);break;case sap.ushell.adapters.local.PersonalizationAdapter.prototype.constants.storage.MEMORY:setTimeout(function(){t._oItemMap.entries=c(m[t._sContainerKey])||{};d.resolve(t);},0);break;default:setTimeout(function(){d.reject("unknown storage type");},0);}return d.promise();};sap.ushell.adapters.local.AdapterContainer.prototype.save=function(){var d=new jQuery.Deferred(),l,i,t=this;switch(this._sStorageType){case sap.ushell.adapters.local.PersonalizationAdapter.prototype.constants.storage.LOCAL_STORAGE:l=g();setTimeout(function(){i=s(t._oItemMap.entries);l.put(t._sContainerKey,i);d.resolve();},0);break;case sap.ushell.adapters.local.PersonalizationAdapter.prototype.constants.storage.MEMORY:setTimeout(function(){m[t._sContainerKey]=c(t._oItemMap.entries);d.resolve();},0);break;default:setTimeout(function(){d.reject("unknown storage type");},0);}return d.promise();};sap.ushell.adapters.local.AdapterContainer.prototype.del=function(){var d=new jQuery.Deferred(),l,t=this;switch(this._sStorageType){case sap.ushell.adapters.local.PersonalizationAdapter.prototype.constants.storage.LOCAL_STORAGE:l=g();setTimeout(function(){l.remove(t._sContainerKey);t._oItemMap.entries={};d.resolve();},0);break;case sap.ushell.adapters.local.PersonalizationAdapter.prototype.constants.storage.MEMORY:setTimeout(function(){if(m&&m[t._sContainerKey]){delete m[t._sContainerKey];}t._oItemMap.entries={};d.resolve();},0);break;default:setTimeout(function(){d.reject("unknown storage type");},0);}return d.promise();};sap.ushell.adapters.local.AdapterContainer.prototype.getItemKeys=function(){return this._oItemMap.keys();};sap.ushell.adapters.local.AdapterContainer.prototype.containsItem=function(i){return this._oItemMap.containsKey(i);};sap.ushell.adapters.local.AdapterContainer.prototype.getItemValue=function(i){return this._oItemMap.get(i);};sap.ushell.adapters.local.AdapterContainer.prototype.setItemValue=function(i,I){this._oItemMap.put(i,I);};sap.ushell.adapters.local.AdapterContainer.prototype.delItem=function(i){this._oItemMap.remove(i);};}());};if(!jQuery.sap.isDeclared('sap.ushell.adapters.local.SearchAdapter')){(function(){"use strict";jQuery.sap.declare("sap.ushell.adapters.local.SearchAdapter");window.sap.bc=window.sap.bc||{};window.sap.bc={ina:{api:{sina:{properties:{systemType:"ABAP",startWithSearch:"false",noSapClientFromUrl:true}}}}};jQuery.sap.require('sap.ushell.renderers.fiori2.search.esh.api.release.sina');sap.ushell.adapters.local.SearchAdapter=function(s,p,a){this.isSearchAvailable=function(){var d=jQuery.Deferred();d.resolve(true);return d.promise();};this.getSina=function(){return sap.bc.ina.api.sina;};};}());};if(!jQuery.sap.isDeclared('sap.ushell.adapters.local.SupportTicketAdapter')){(function(){"use strict";jQuery.sap.declare("sap.ushell.adapters.local.SupportTicketAdapter");sap.ushell.adapters.local.SupportTicketAdapter=function(s,p,a){this.createTicket=function(S){var d=new jQuery.Deferred(),t="1234567";d.resolve(t);return d.promise();};};}());};if(!jQuery.sap.isDeclared('sap.ushell.adapters.local.UserInfoAdapter')){(function(){"use strict";jQuery.sap.declare("sap.ushell.adapters.local.UserInfoAdapter");jQuery.sap.require('sap.ui.thirdparty.datajs');sap.ushell.adapters.local.UserInfoAdapter=function(u,p,a){var U;function g(A){var d=[{id:"sap_bluecrystal",name:"sap_bluecrystal"}],e=jQuery.sap.getObject("config.themes",undefined,A);return e===undefined?d:e;}this.updateUserPreferences=function(o){var d=new jQuery.Deferred();jQuery.sap.log.info("updateUserPreferences: "+o);d.resolve({status:200});return d.promise();};this.getThemeList=function(){var d=new jQuery.Deferred();jQuery.sap.log.info("getThemeList");if(U===undefined){U=g(a);}if(U.length===0){d.reject("no themes were configured");}else{d.resolve({options:U});}return d.promise();};};}());};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.Component')){jQuery.sap.declare("sap.ushell.components.factsheet.Component");jQuery.sap.require('sap.ui.core.UIComponent');sap.ui.core.UIComponent.extend("sap.ushell.components.factsheet.Component",{oMainView:null,metadata:{version:"1.32.6",library:"sap.ushell.components.factsheet",includes:["css/custom.css"],dependencies:{libs:["sap.m","sap.ui.vbm","sap.suite.ui.commons","sap.ui.layout","sap.viz"],components:[]}},createContent:function(){var c=this.getComponentData();var s=(c&&c.startupParameters)||{};this.oMainView=sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.factsheet.views.ThingViewer",viewData:s,height:"100%"}).addStyleClass("ThingViewer");return this.oMainView;},exit:function(){window.console.log("On Exit of factsheet Component.js called : this.getView().getId()"+this.getId());},onExit:function(){window.console.log("On Exit of factsheet Component.js called : this.getView().getId()"+this.getId());}});jQuery.sap.setObject("factsheet.Component",sap.ushell.components.factsheet.Component);};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.annotation.Mapping')){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.factsheet.annotation.Mapping");sap.ushell.components.factsheet.annotation.Mapping={};sap.ushell.components.factsheet.annotation.Mapping.initialized=[];sap.ushell.components.factsheet.annotation.Mapping.parse=function(m,a){var x={},g,b,s,c,d,r,e,f,h,n,o,A,q={},t,u,S={},i,v,w={},y={},z="",B,C,D,E,F,G,H,T,I,J,K,M,L,j,N,O,P,Q,R,U,V,W,X,Y,Z,$,_,a1,b1,c1,d1,e1,f1;if(sap.ui.Device.browser.internet_explorer){x={setNameSpace:function(k){k.setProperty("SelectionNamespaces",'xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" xmlns:d="http://docs.oasis-open.org/odata/ns/edm"');k.setProperty("SelectionLanguage","XPath");return k;},selectNodes:function(k,x,l){return l.selectNodes(x);},nextNode:function(k){return k.nextNode();},getNodeText:function(k){return k.text;}};}else{x={setNameSpace:function(k){return k;},nsResolver:function(p){var k={"edmx":"http://docs.oasis-open.org/odata/ns/edmx","d":"http://docs.oasis-open.org/odata/ns/edm"};return k[p]||null;},selectNodes:function(k,p,l){var g1=k.evaluate(p,l,this.nsResolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);g1.length=g1.snapshotLength;return g1;},nextNode:function(k,l){return k.snapshotItem(l);},getNodeText:function(k){return k.textContent;}};}g=function(k){var l;if(sap.ui.Device.browser.internet_explorer){l=new ActiveXObject("Microsoft.XMLHTTP");l.open("GET",k,false);l.send(null);return l.responseXML;}else{l=jQuery.sap.sjax({url:k,dataType:"xml"});if(l.success){return l.data;}}};b=function(m){var g1={},h1={},i1={},j1=false,i,k1,l1,m1,n1={},j,o1={},p1={},q1=false,r1,l,k,s1,t1,u1,v1,p,w1;for(i=m.dataServices.schema.length-1;i>=0;i-=1){g1=m.dataServices.schema[i];if(g1.entityType){k1=g1.namespace;l1=g1.entityType;m1=g1.complexType;for(j in l1){if(l1.hasOwnProperty(j)){n1=l1[j];p1={};if(n1.hasStream&&n1.hasStream==="true"){continue;}o1={};for(k in n1.property){r1=n1.property[k];if(r1.type.substring(0,k1.length)===k1){for(l in m1){if(m1[l].name===r1.type.substring(k1.length+1)){for(k in m1[l].property){s1=m1[l].property[k];o1[m1[l].name+"/"+s1.name]=s1.type;}}}}else{t1=r1.name;u1=r1.type;for(p in r1.extensions){v1=r1.extensions[p];if((v1.name==="display-format")&&(v1.value==="Date")){u1="Edm.Date";}else{q1=true;if(!p1[t1]){p1[t1]={};}if(v1.namespace&&!p1[t1][v1.namespace]){p1[t1][v1.namespace]={};}p1[t1][v1.namespace][v1.name]=v1.value;}}o1[t1]=u1;}}if(!h1[k1+"."+n1.name]){h1[k1+"."+n1.name]={};}h1[k1+"."+n1.name]=o1;if(q1){if(!i1[k1+"."+n1.name]){j1=true;}i1[k1+"."+n1.name]={};i1[k1+"."+n1.name]=p1;}}}}}if(j1){w1={types:h1,extensions:i1};}else{w1={types:h1};}return w1;};s=function(p,k,l,S){var g1,h1,i1='';for(g1 in p){if(p.hasOwnProperty(g1)){if(p[g1]){h1=p[g1];if(h1.Value&&h1.Value.Path){i1=c(h1.Value.Path,k,l,S);if(i1){p[g1].EdmType=i1;}continue;}if(h1.Path){i1=c(h1.Path,k,l,S);if(i1){p[g1].EdmType=i1;}continue;}if(h1.Facets){p[g1].Facets=s(h1.Facets,k,l,S);continue;}if(h1.Data){p[g1].Data=s(h1.Data,k,l,S);continue;}if(g1==="Data"){p.Data=s(h1,k,l,S);continue;}if(h1.Value&&h1.Value.Apply){p[g1].Value.Apply.Parameters=s(h1.Value.Apply.Parameters,k,l,S);continue;}if(h1.Value&&h1.Type&&(h1.Type==="Path")){i1=c(h1.Value,k,l,S);if(i1){p[g1].EdmType=i1;}}}}}return p;};c=function(p,k,l,S){var g1;if((p.charAt(0)==="@")&&(p.indexOf(S.Alias)===1)){p=p.slice(S.Alias.length+2);}if(p.indexOf("/")>=0){if(k[p.slice(0,p.indexOf("/"))]){l=p.slice(0,p.indexOf("/"));p=p.slice(p.indexOf("/")+1);}}for(g1 in k[l]){if(k[l].hasOwnProperty(g1)){if(p===g1){return k[l][g1];}}}};d=function(k){var l="",p="",i,g1={};for(i=0;i<k.attributes.length;i+=1){if((k.attributes[i].name!=="Property")&&(k.attributes[i].name!=="Term")){l=k.attributes[i].name;p=k.attributes[i].value;}}if(l.length>0){g1[l]=r(p);}return g1;};e=function(t,k){var l={},p,g1,h1,i1,j1,k1;if(k.hasChildNodes()){p=x.selectNodes(t,"./d:String",k);if(p.length>0){g1=x.nextNode(p,0);l["String"]=x.getNodeText(g1);}else{h1=x.selectNodes(t,"./d:Path",k);if(h1.length>0){i1=x.nextNode(h1,0);l["Path"]=x.getNodeText(i1);}else{j1=x.selectNodes(t,"./d:Apply",k);if(j1.length>0){k1=x.nextNode(j1,0);l["Apply"]=n(t,k1);}}}}return l;};f=function(t,k,l){var p={},g1,h1,I,i1,j1,k1,l1,m1,n1={},L,N,W,o1,p1;if(k.hasChildNodes()){g1=x.selectNodes(t,"./d:Record | ./d:Collection/d:Record | ./d:Collection/d:If/d:Record",k);if(g1.length){h1=0;for(I=0;I<g1.length;I+=1){i1=x.nextNode(g1,I);j1=h(t,i1,l);if(i1.getAttribute("Type")){j1["RecordType"]=r(i1.getAttribute("Type"));}if(h1===0){if(i1.nextElementSibling||(i1.parentNode.nodeName==="Collection")||(i1.parentNode.nodeName==="If")){p=[];p.push(j1);}else{p=j1;}}else{p.push(j1);}h1+=1;}}else{k1=x.selectNodes(t,"./d:UrlRef",k);if(k1.length>0){for(I=0;I<k1.length;I+=1){l1=x.nextNode(k1,I);p["UrlRef"]=e(t,l1);}}else{k1=x.selectNodes(t,"./d:Url",k);if(k1.length>0){for(I=0;I<k1.length;I+=1){l1=x.nextNode(k1,I);p["Url"]=e(t,l1);}}else{p1=x.selectNodes(t,"./d:Collection/d:AnnotationPath | ./d:Collection/d:PropertyPath",k);if(p1.length>0){p=[];for(I=0;I<p1.length;I+=1){m1=x.nextNode(p1,I);n1={};n1[m1.nodeName]=x.getNodeText(m1);p.push(n1);}}else{p=d(k);L=x.selectNodes(t,"./d:Annotation",k);N={};for(W=0;W<L.length;W+=1){N=x.nextNode(L,W);if(N.hasChildNodes()===false){o1=r(N.getAttribute("Term"));p[o1]=d(N);}}}}}}}else{p=d(k);}return p;};h=function(t,k,l){var p={},N={},L,W,g1,h1,I,i1,j1,k1,l1,m1;L=x.selectNodes(t,"./d:Annotation",k);for(W=0;W<L.length;W+=1){N=x.nextNode(L,W);if(N.hasChildNodes()===false){g1=r(N.getAttribute("Term"));p[g1]=d(N);}}h1=x.selectNodes(t,"./d:PropertyValue",k);if(h1.length>0){for(I=0;I<h1.length;I+=1){i1=x.nextNode(h1,I);j1=i1.getAttribute("Property");p[j1]=f(t,i1,l);k1=x.selectNodes(t,"./d:Apply",i1);l1=null;for(m1=0;m1<k1.length;m1+=1){l1=x.nextNode(k1,m1);if(l1){p[j1]={};p[j1]['Apply']=n(t,l1);}}}}else{p=f(t,k,l);}return p;};n=function(t,k){var l={},p,g1=null,h1=[],i;p=x.selectNodes(t,"./d:*",k);for(i=0;i<p.length;i+=1){g1=x.nextNode(p,i);switch(g1.nodeName){case"Apply":h1.push({"Type":"Apply","Value":n(t,g1)});break;case"LabeledElement":h1.push({"Name":g1.getAttribute("Name"),"Value":e(t,g1)});break;default:h1.push({"Type":g1.nodeName,"Value":x.getNodeText(g1)});break;}}l['Name']=k.getAttribute('Function');l['Parameters']=h1;return l;};o=function(l,p,g1){var h1,i,i1,j1,j,k;for(i=m.dataServices.schema.length-1;i>=0;i-=1){h1=m.dataServices.schema[i];if(h1.entityType){i1=h1.namespace+".";j1=h1.entityType;for(k=j1.length-1;k>=0;k-=1){if(i1+j1[k].name===l&&j1[k].navigationProperty){for(j=0;j<j1[k].navigationProperty.length;j+=1){if(j1[k].navigationProperty[j].name===p){return true;}}}}}}return false;};r=function(k){for(A in w){if(w.hasOwnProperty(A)){if(k.indexOf(A+".")>=0){k=k.replace(A+".",w[A]+".");return k;}}}return k;};if(this.initialized[a]){return this.initialized[a];}t=g(a);t=x.setNameSpace(t);u=x.selectNodes(t,"//d:Schema",t);for(i=0;i<u.length;i+=1){v=x.nextNode(u,i);S.Alias=v.getAttribute("Alias");S.Namespace=v.getAttribute("Namespace");}B=x.selectNodes(t,"//edmx:Reference",t);for(i=0;i<B.length;i+=1){C=x.nextNode(B,i);D=x.selectNodes(t,"./edmx:Include",C);if(D&&D.length>0){E=x.nextNode(D,0);if(E.getAttribute("Alias")){w[E.getAttribute("Alias")]=E.getAttribute("Namespace");}else{w[E.getAttribute("Namespace")]=E.getAttribute("Namespace");}}F=x.selectNodes(t,"./edmx:IncludeAnnotations",C);if(F.length>0){for(j=0;j<F.length;j+=1){G=x.nextNode(F,j);if(G.getAttribute("TargetNamespace")){z=G.getAttribute("TargetNamespace");if(!y[z]){y[z]={};}y[z][G.getAttribute("TermNamespace")]=C.getAttribute("Uri");}else{y[G.getAttribute("TermNamespace")]=C.getAttribute("Uri");}}}}if(y){q.annotationReferences=y;}q.aliasDefinitions=w;H=x.selectNodes(t,"//d:Term",t);if(H.length>0){T={};for(I=0;I<H.length;I+=1){J=x.nextNode(H,I);K=r(J.getAttribute("Type"));T["@"+S.Alias+"."+J.getAttribute("Name")]=K;}q.termDefinitions=T;}M=b(m);if(M.extensions){q.propertyExtensions=M.extensions;}L=x.selectNodes(t,"//d:Annotations ",t);for(I=0;I<L.length;I+=1){N=x.nextNode(L,I);if(N.hasChildNodes()===false){continue;}O=N.getAttribute("Target");P=O.split(".")[0];if(P&&w[P]){O=O.replace(new RegExp(P,""),w[P]);}Q=O;R=null;if(O.indexOf("/")>0){Q=O.split("/")[0];R=O.replace(Q+"/","");}if(!q[Q]){q[Q]={};}if(R){if(!q.propertyAnnotations){q.propertyAnnotations={};}if(!q.propertyAnnotations[Q]){q.propertyAnnotations[Q]={};}q.propertyAnnotations[Q][R]={};U=x.selectNodes(t,"./d:Annotation",N);for(W=0;W<U.length;W+=1){V=x.nextNode(U,W);if(V.hasChildNodes()===false){X=r(V.getAttribute("Term"));q.propertyAnnotations[Q][R][X]=d(V);}}}else{Z=Q.replace(w[P],P);U=x.selectNodes(t,"./d:Annotation",N);for(Y=0;Y<U.length;Y+=1){V=x.nextNode(U,Y);$=V.getAttribute("Qualifier");_=r(V.getAttribute("Term"));if($){_+="#"+$;}a1=f(t,V,Z);a1=s(a1,M.types,Q,S);q[Q][_]=a1;}b1=x.selectNodes(t,"//d:Annotations[contains(@Target, '"+Z+"')]//d:PropertyValue[contains(@Path, '/')]//@Path",t);for(i=0;i<b1.length;i+=1){c1=x.nextNode(b1,i);d1=c1.value;if(q.propertyAnnotations){if(q.propertyAnnotations[Q]){if(q.propertyAnnotations[Q][d1]){continue;}}}e1=d1.split('/');if(o(Q,e1[0],m)){if(!q.expand){q.expand={};}if(!q.expand[Q]){q.expand[Q]={};}q.expand[Q][e1[0]]=e1[0];}}f1=x.selectNodes(t,"//d:Annotations[contains(@Target, '"+Z+"')]//d:Path[contains(., '/')]",t);for(i=0;i<f1.length;i+=1){c1=x.nextNode(f1,i);d1=x.getNodeText(c1);if(q.propertyAnnotations[Q]){if(q.propertyAnnotations[Q][d1]){continue;}}if(!q.expand){q.expand={};}if(!q.expand[Q]){q.expand[Q]={};}e1=d1.split('/');if(o(Q,e1[0],m)){if(!q.expand){q.expand={};}if(!q.expand[Q]){q.expand[Q]={};}q.expand[Q][e1[0]]=e1[0];}}}this.initialized[a]=q;}return q;};}());};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.controls.PictureTileRenderer')){jQuery.sap.declare("sap.ushell.components.factsheet.controls.PictureTileRenderer");jQuery.sap.require('sap.m.CustomTileRenderer');sap.ushell.components.factsheet.controls.PictureTileRenderer=sap.ui.core.Renderer.extend(sap.m.CustomTileRenderer);sap.ushell.components.factsheet.controls.PictureTileRenderer.render=function(r,c){jQuery.sap.log.debug("PictureTileRenderer :: begin rendering");r.write("<div ");r.writeControlData(c);r.addClass("sapCaUiPictureTile");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapCaUiPictureTileContent");r.writeClasses();r.write(">");r.write("<div id='"+c.getId()+"-wrapper'>");r.renderControl(c._oDeletePictureButton);this._renderContent(r,c);r.write("</div>");r.write("</div></div>");};sap.ushell.components.factsheet.controls.PictureTileRenderer._renderContent=function(r,t){r.renderControl(t.getContent());};};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.controls.PictureViewerRenderer')){jQuery.sap.declare("sap.ushell.components.factsheet.controls.PictureViewerRenderer");jQuery.sap.require('sap.m.TileContainerRenderer');sap.ushell.components.factsheet.controls.PictureViewerRenderer={};sap.ushell.components.factsheet.controls.PictureViewerRenderer.render=function(r,c){jQuery.sap.log.debug("PictureViewerRenderer :: begin rendering");sap.m.TileContainerRenderer.render(r,c);jQuery.sap.log.debug("PictureViewerRenderer :: end rendering");};};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.factory.ThingInspector')){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.factsheet.factory.ThingInspector");sap.ushell.components.factsheet.factory=(function(){jQuery.sap.require("sap.suite.ui.commons.UnifiedThingInspector");jQuery.sap.require("sap.ushell.components.factsheet.annotation.Mapping");jQuery.sap.require("sap.ui.vbm.library");var t,M={},A=[],L={},c,d,g,f,h,q,r,s,u,v,w,x,y={},z,B,C,D,E,F,G,H,I,J,K,N,O,P,Q,R,S,T,U,V,W,X,Y="displayFactSheet";jQuery.sap.require("sap.ui.base.Object");jQuery.sap.require("sap.ui.core.format.NumberFormat");Q=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();if(sap.ui.getCore().getConfiguration().getLanguage()==="ZH"){Q=new sap.ui.core.Locale("zh_CN");}function Z(a){return a<0?true:false;}function _(a){var b=Number(a).toFixed(0);if(Z(a)){b=Number(b)*-1;}return b;}function a1(a,b){var e,o,i,n;if(!a){return"";}o=new RegExp(sap.ui.core.format.NumberFormat.oDefaultFloatFormat.groupingSeparator,"g");if(b>=0){b=parseInt(b,10);n=sap.ui.core.format.NumberFormat.getFloatInstance({minFractionDigits:b,maxFractionDigits:b},Q);}else{n=sap.ui.core.format.NumberFormat.getFloatInstance({minFractionDigits:0,maxFractionDigits:99},Q);}e=n.format(a);i=e.replace(/[\D]/g,"");if(i&&i.length>6){a=a.replace(o,"");if(_(a)<1000){return sap.ui.core.format.NumberFormat.getIntegerInstance().format(a);}n=sap.ui.core.format.NumberFormat.getFloatInstance({minFractionDigits:1,maxFractionDigits:1,style:"short"},Q);return n.format(a);}else{return e;}}function b1(){var p,a,o="",b,m,e,k,i,j,n,l,c1;b=this.getElementBinding().sPath.split("/")[1];m=this.getModel();e=this.mBindingInfos.value.parameters;k=this.mBindingInfos.value.parts;for(i=0;i<e.length;i+=1){o=o+e[i].string;}for(j=0;j<k.length;j+=1){p=k[j].path;l="{"+p+"}";a=m.oData[b][p];o=o.replace(l,a);}n=z(o);if($.isNumeric(n)){c1=this.mBindingInfos.value.parts.filter(function(d1){return(d1.path===p);});n=a1(n,c1[0].type.oFormatOptions.maxFractionDigits);this.setDoubleFontSize(true);}this.setValue(n);this.getElementBinding().detachChange(b1);}V=function(){var a="";if(t.getName()&&t.getDescription()){a=t.getName()+", "+t.getDescription();}else if(t.getName()&&!t.getDescription()){a=t.getName();}else if(!t.getName()&&t.getDescription()){a=t.getDescription();}return a;};f=function(a){var b,e,i;b=a.slice(1).split("/");e="/";for(i=0;i<b.length;i+=1){if((b[i].indexOf("(")>0)&&(b[i].indexOf("sid(")<0)){break;}else{e+=b[i]+"/";}}return e;};h=function(a,m){var e,b,i,n;b=a.slice(m.sServiceUrl.length+1);if(b.indexOf("/")>=0){i=b.split("/");n=i[i.length];e=i[i.length-1];if(e.indexOf("(")>=0){e=e.slice(e.indexOf("("));}e=this.getNavEntitySet(e,n,m.getMetadata());}else{if(b.indexOf("(")>=0){e=b.slice(0,b.indexOf("("));}else{if(b.indexOf("?")>=0){e=b.slice(0,b.indexOf("?"));}else{e=b;}}}return e;};D=function(a,m){var e,k="",o,b;e=a.slice(m.sServiceUrl.length+1);if(e.indexOf("(")>=0){k=e.slice(e.indexOf("(")+1,e.indexOf(")"));if(k.indexOf("=")<=0){o=m.getServiceMetadata();b=r(h(a,m),o);k=E(b,o)+"="+k;}}return k;};E=function(e,m){var i,a,j;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.namespace===e.slice(0,e.lastIndexOf("."))){for(j=0;j<a.entityType.length;j+=1){if(a.entityType[j].name===e.slice(e.lastIndexOf(".")+1)){return a.entityType[j].key.propertyRef[0].name;}}}}};q=function(e,m){var i,a,b,j;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.entityContainer){b=a.entityContainer[0].entitySet;for(j=b.length-1;j>=0;j-=1){if(b[j].entityType===e){return b[j].name;}}}}};r=function(e,m,b){var i,a,k,j,l;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.entityContainer){k=a.entityContainer[0].entitySet;for(j=k.length-1;j>=0;j-=1){if(k[j].name===e){if(b){l=k[j].entityType.slice(a.namespace.length+1);}else{l=k[j].entityType;}return l;}}}}};s=function(e,n,m){var a,i,b,l,k,j,o;a=e.split(".");for(i=m.dataServices.schema.length-1;i>=0;i-=1){b=m.dataServices.schema[i];l=a[0];if(a.length>2){for(k=1;k<a.length-1;k+=1){l+="."+a[k];}}if(b.namespace===l){for(j=0;j<b.entityType.length;j+=1){if(b.entityType[j].name===a[a.length-1]){if(b.entityType[j].navigationProperty){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===n){o=b.entityType[j].navigationProperty[k];return{name:o.relationship,toRole:o.toRole};}}}}}}}};u=function(e,n,m){var a,b,o,i,l,j,p,k;a=r(e,m);if(n.charAt(0)==="@"){if(M.termDefinitions&&M.termDefinitions[n]){b=M.termDefinitions[n];if(b.indexOf("Collection")>=0){b=b.slice(b.indexOf("(")+1,b.indexOf(")"));}return q(b,m);}}else{o=s(a,n,m);if(o){for(i=m.dataServices.schema.length-1;i>=0;i-=1){l=m.dataServices.schema[i];if(l.entityContainer&&l.entityContainer[0].associationSet){for(j=l.entityContainer[0].associationSet.length-1;j>=0;j-=1){p=l.entityContainer[0].associationSet[j];if(p.association===o.name){for(k=0;k<p.end.length;k+=1){if(p.end[k].role===o.toRole){return p.end[k].entitySet;}}}}}}}}};v=function(e,n,m){var a,o,i,b,j,l,k,p,c1;a=r(e,m);p=a.split(".")[a.split(".").length-1];o=s(a,n,m);if(o){for(i=m.dataServices.schema.length-1;i>=0;i-=1){b=m.dataServices.schema[i];for(j=0;j<b.entityType.length&&!c1;j+=1){if(b.entityType[j].name===p){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===n){c1=b.entityType[j].navigationProperty[k].toRole;break;}}}}for(j=b.association.length-1;j>=0;j-=1){l=b.association[j];if(b.namespace+"."+l.name===o.name){for(k=0;k<l.end.length;k+=1){if(l.end[k].role===c1){return l.end[k].multiplicity;}}}}}}else{jQuery.sap.log.error("\""+n+"\" wasn't found in the metadata document. Check whether the corresponding search connector is active.");return 0;}};w=function(e,m){var o,a,b,i;o={};if(M.expand){if(M.expand[r(e,m)]){a=M.expand[r(e,m)];b=[];for(i in a){if(a.hasOwnProperty(i)){b.push(a[i]);}}o.expand=b.join(", ");}}return o;};X=function(a,e,o){var m,b,j,k,l,n;for(m=o.dataServices.schema.length-1;m>=0;m-=1){b=o.dataServices.schema[m];for(j=0;j<b.entityType.length;j+=1){if(b.entityType[j].name===e.split(".")[e.split(".").length-1]){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===a){for(l=0;l<b.association.length;l+=1){for(n=b.association[l].end.length-1;n>=0;n-=1){if(b.association[l].end[n].role===b.entityType[j].navigationProperty[k].toRole){return(b.association[l].end[n].type);}}}}}}}}};x=function(p,o){var b={},j;b.parts=[];b.parameters=[];for(j=p.length-1;j>=0;j-=1){if(p[j].Type==="Path"){if(p[j].EdmType){switch(p[j].EdmType){case"Edm.DateTimeOffset":case"Edm.DateTime":b.parts.push({path:p[j].Value,type:new sap.ui.model.type.DateTime()});break;case"Edm.Time":b.parts.push({path:p[j].Value+"/ms",type:new sap.ui.model.type.Time({source:{pattern:"timestamp"}})});break;case"Edm.Date":b.parts.push({path:p[j].Value,type:new sap.ui.model.type.Date({"UTC":true})});break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":b.parts.push({path:p[j].Value,type:new sap.ui.model.type.Float()});break;case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":b.parts.push({path:p[j].Value,type:new sap.ui.model.type.Integer()});break;default:b.parts.push({path:p[j].Value});break;}}else{b.parts.push({path:p[j].Value});}}else if(p[j].Type==="String"){b.parameters.unshift({string:p[j].Value});}}b.formatter=function(){var a="",e,k,l,i,m="",n=false,c1=0,d1=0;if(arguments&&arguments.length>=1){e=arguments.length-1;l="";i=0;if(p&&p[0]&&(p[0].Type==="String")&&(p[0].Value.substr(0,1)==="#")){n=true;}for(k=0;k<p.length;k+=1){if(p[k].Type==="Path"){l=arguments[e];if(!l||(l.length===0)){if(a.length>i){if(a.indexOf("(")>i){a=a.substr(0,i);}else{a=a.substr(0,i);l=a;}}}else{if(n){l=encodeURIComponent(l);}a+=l;c1+=1;}e-=1;i=a.length;}else{i=a.length;m=p[k].Value;if(m.indexOf("(")!==-1){d1+=1;}if((l&&l.length>0)||(m.indexOf("(")!==-1)||(m&&(m.substr(0,1)==="#"))){a+=p[k].Value;}else{m="";}}}if(o){a=o(a);}a=a.trim();if((c1===1)&&(d1>0)&&(a.substr(0,1)==="(")&&(a.substr(-1)===")")){a=a.substr(1,a.length-2);}return a.trim();}};return b;};J=function(o,p){var k;for(k in o){if(o.hasOwnProperty(k)){if(k==="__metadata"){continue;}else if(k===p){return o[k];}else if(typeof o[k]==="object"){return J(o[k],p);}}}};z=function(a){var l,n,b,e={},i;l=a.lastIndexOf("/");n=a.slice(0,l);b=a.slice(l+1);if(!y[a]){e=new sap.ui.model.json.JSONModel();e.loadData(n,null,false);y[a]=e.getData();}else{e=y[a];}if(y[a]&&y[a].d){if(!y[a].d[b]){i=J(y[a].d,b);}else{i=y[a].d[b];}}return i;};B=function(o,e,m,a){var b,i,n,j,k,l,p,c1;b=new sap.ui.core.Control();i=K(o.Value,o.EdmType,e);if(o.Value&&o.Value["com.sap.vocabularies.UI.v1.IsImageURL"]){b=new sap.m.Image({height:"50px"});if(i.BindingInfo){b.bindProperty("src",i.BindingInfo);}else{b.setProperty("src",i.String);}}else{if(o.UrlRef||o.Url||(o.Target&&o.Target.Path)){b=new sap.m.Link({wrapping:true});}else{b=new sap.m.Text();if(o.EdmType==="Edm.Decimal"||o.EdmType==="Edm.Double"||o.EdmType==="Edm.Single"||o.EdmType==="Edm.Int16"||o.EdmType==="Edm.Int32"||o.EdmType==="Edm.Int64"){b.setTextAlign(sap.ui.core.TextAlign.End);}}b.addStyleClass("sapFactsheetUtiDataField");if(i.BindingInfo){b.bindProperty("text",i.BindingInfo);}else{b.setProperty("text",i.String);}}if((o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigation")&&m){n=o.Target.Path;if(M[e][n.slice(1)]){if(n.charAt(0)==="@"){if(n.indexOf("/")<0){j=M[e][n.slice(1)].UrlRef;}else{j=M[e][n.slice(1,n.indexOf("/"))].UrlRef;}b.bindProperty("href",F(j));}}b.attachPress(function(d1){return false;});}if(o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o.Url.String){b.setHref(o.Url.String);}else{b.bindProperty("href",F(o.Url));k=new sap.m.Text({wrapping:true});if(i.BindingInfo){k.bindProperty("text",i.BindingInfo);}else{k.setProperty("text",i.String);}b.setVisible(false);l=new sap.ui.layout.VerticalLayout();l.addContent(b);l.addContent(k);if(!A[A.indexOf(a)].Links){A[A.indexOf(a)].Links=[];}if(o.Url.Apply){p=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("-"));c1=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("?"));}A[A.indexOf(a)].Links.push({sSemanticObject:p,sIntend:c1,oVL:l});}}if(l){return l;}else{return b;}};C=function(o,l,p,b){var a,e="",i="",m,j,k,n;a=new sap.m.Label(l);a.addStyleClass("sapFactsheetUtiLabel");if(b){e=":";}if(o.Label){if(o.Label.String){a.setText(o.Label.String.trim()+e);a.setTooltip(o.Label.String.trim());}else{if(o.Label.Path){a.bindProperty("text",o.Label.Path);a.bindProperty("tooltip",o.Label.Path);}}}else{if(o.Value){if(o.Value.Path&&p){m=p[o.Value.Path];for(j in m){if(m.hasOwnProperty(j)){if(j==="http://www.sap.com/Protocols/SAPData"){if(m[j].label){i=m[j].label;break;}}}}}else if(o.Value.Apply&&(o.Value.Apply.Name==="odata.concat")){for(k in o.Value.Apply.Parameters){if(o.Value.Apply.Parameters.hasOwnProperty(k)){n=o.Value.Apply.Parameters[k];if(n.Type==="Path"){m=p[n.Value];for(j in m){if(m.hasOwnProperty(j)){if(j==="http://www.sap.com/Protocols/SAPData"){if(m[j].label){i=m[j].label;break;}}}}break;}}}}a.setText(i+e);a.setTooltip(i);}}return a;};K=function(o,e,a){var b={},p,k,l=[],j,m,n,c1=[],d1,e1,i,f1,g1,h1,i1,j1=[],k1;k1=function(a,l1,m1){var p,n1={};p=M.propertyAnnotations[a];if(p&&p[l1]&&p[l1][m1]){if(p[l1][m1].Path){n1.Type="Path";n1.Value=p[l1][m1].Path;}else{n1.Type="String";n1.Value=p[l1][m1].String;}}return n1;};if(!o){return false;}if(o.Apply){if(o.Apply.Name==="odata.concat"){if(a&&M.propertyAnnotations&&M.propertyAnnotations[a]){k=o.Apply.Parameters;for(j=0;j<k.length;j+=1){l.push(k[j]);if(k[j].Type==="Path"){p=k1(a,k[j].Value,"Org.OData.Measures.V1.ISOCurrency");if(!$.isEmptyObject(p)){l.push({Type:"String",Value:" "});l.push({Type:p.Type,Value:p.Value});}p=k1(a,k[j].Value,"Org.OData.Measures.V1.Unit");if(!$.isEmptyObject(p)){l.push({Type:"String",Value:" "});l.push({Type:p.Type,Value:p.Value});}}}b.BindingInfo=x(l);}else{b.BindingInfo=x(o.Apply.Parameters);}}}else{if(o.Path){if(o.Path.charAt(0)==="@"){m=M[a][o.Path.slice(1,o.Path.indexOf("/"))].UrlRef;n=o.Path.slice(o.Path.indexOf("/")+1);if(m&&m.Apply){d1=m.Apply.Parameters;switch(m.Apply.Name){case"odata.concat":c1=d1;c1.push({Type:"String",Value:"/"+n});break;case"odata.fillUriTemplate":e1=d1[0].Value.split("{");for(i in e1){if(e1.hasOwnProperty(i)){if(e1[i].indexOf("}")<0){c1.push({Type:"String",Value:e1[i]});}else{f1=e1[i].split("}");for(j=1;j<d1.length;j+=1){if(d1[j].Name===f1[0]){g1=d1[j].Value;if(g1.Path){c1.push({Type:"Path",Value:g1.Path});}else{if(g1.Apply&&g1.Apply.Name&&(g1.Apply.Name.toLowerCase()==="odata.uriencode")){h1=g1.Apply.Parameters[0];c1.push({Type:h1.Type,Value:encodeURIComponent(h1.Value)});c1.push({Type:"String",Value:"{"+encodeURIComponent(h1.Value)+"}"});}}}}c1.push({Type:"String",Value:f1[1]});}}}c1.push({Type:"String",Value:"/"+n});b.fnChange=b1;break;default:break;}b.BindingInfo=x(c1,z);}else{if(m&&m.Path){c1.push({Type:"Path",Value:m.Path},{Type:"String",Value:"/"+n});b.BindingInfo=x(c1,z);}else{if(m&&m.String){b.String=z(m.String+"/"+n);}}}}else{b.BindingInfo={};switch(e){case"Edm.DateTimeOffset":case"Edm.DateTime":b.BindingInfo={path:o.Path,type:new sap.ui.model.type.DateTime()};break;case"Edm.Time":b.BindingInfo={path:o.Path+"/ms",type:new sap.ui.model.type.Time({source:{pattern:"timestamp"}})};break;case"Edm.Date":b.BindingInfo={path:o.Path,type:new sap.ui.model.type.Date({"UTC":true})};break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":if((e==="Edm.Decimal")||(e==="Edm.Double")||(e==="Edm.Single")){i1=new sap.ui.model.type.Float();}else if((e==="Edm.Int16")||(e==="Edm.Int32")||(e==="Edm.Int64")){i1=new sap.ui.model.type.Integer();}if(M.propertyAnnotations){j1.push({Type:"Path",Value:o.Path,EdmType:e},{Type:"String",Value:" "});p=k1(a,o.Path,"Org.OData.Measures.V1.ISOCurrency");if(!$.isEmptyObject(p)){j1.push({Type:p.Type,Value:p.Value});}p=k1(a,o.Path,"Org.OData.Measures.V1.Unit");if(!$.isEmptyObject(p)){j1.push({Type:p.Type,Value:p.Value});}b.BindingInfo=x(j1);}else{b.BindingInfo={path:o.Path,type:i1};}break;default:b.BindingInfo={path:o.Path};break;}}}else{if(o.String){b.String=o.String;}}}return b;};F=function(o){var a=[],p,b,j,e,i={},k,l,m;if(o&&o.Apply){p=o.Apply.Parameters;switch(o.Apply.Name){case"odata.fillUriTemplate":p[0].Value=p[0].Value.trim();b=p[0].Value.split("{");for(j=0;j<b.length;j+=1){if(b[j].indexOf("}")<0){a.push({"Value":b[j],"Type":"String"});}else{e=b[j].split("}");i={};i.Value=e[0];i.Type="Path";for(j=1;j<p.length;j+=1){if(p[j].Name===i.Value){k=p[j].Value;if(k.Path){i.Value=k.Path;}else{if(k.Apply&&k.Apply.Name&&k.Apply.Name.toLowerCase()==="odata.uriencode"){i.Value=k.Apply.Parameters[0].Value;}}break;}}a.push(i);a.push({"Value":e[1],"Type":"String"});}}l=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(l&&l.url){m=jQuery.sap.getUriParameters(l.url).get("sap-system");if(m){a.push({Type:"String",Value:"&sap-system="+m});}}break;default:break;}}return x(a);};G=function(o){var a=sap.ui.core.TextAlign.Begin;if(o.EdmType==="Edm.Decimal"||o.EdmType==="Edm.Double"||o.EdmType==="Edm.Single"||o.EdmType==="Edm.Int16"||o.EdmType==="Edm.Int32"||o.EdmType==="Edm.Int64"){a=sap.ui.core.TextAlign.End;}return a;};N=function(m,e,a,o,b,k){var l,p,j=0,n=0,c1=0,d1=0,e1,i,f1,g1,h1;if(!b){b=m.getServiceMetadata();}if(!a){a=[];}l=r(e,b);h1=new sap.ui.layout.form.SimpleForm({labelMinWidth:150,maxContainerCols:2});p=(M.propertyExtensions)?M.propertyExtensions[l]:[];if(o&&o.High){n=o.High;}if(o&&o.Medium){c1=o.Medium;}if(o&&o.Low){d1=o.Low;}for(i=0;i<a.length;i+=1){e1=W(a[i]);if(o&&(e1==="High")){if(n){n-=1;}else{continue;}}else if(o&&(e1==="Medium")){if(c1){c1-=1;}else{continue;}}else if(o&&(e1==="Low")){if(d1){d1-=1;}else{continue;}}if(o&&o.Total&&(j>=o.Total)){break;}j+=1;f1=new sap.ui.core.Control().setModel(m);g1=C(a[i],{textAlign:sap.ui.core.TextAlign.End},p,false);g1.addStyleClass("sapFactsheetUtiFormPadding");f1=B(a[i],l,b,k);f1.addStyleClass("sapFactsheetUtiFormPadding");if(f1.setTextAlign){f1.setTextAlign(sap.ui.core.TextAlign.Begin);}h1.addContent(g1);h1.addContent(f1);}h1.addStyleClass("sapFactsheetUtiFormLayout");return h1;};O=function(m,e,o,b,a){var j,k="",l,n,p,c1,d1,e1,f1,g1,h1,i1,j1=[],i,k1,l1,m1;j=m.getServiceMetadata();switch(o.RecordType){case"com.sap.vocabularies.UI.v1.ReferenceFacet":l=new sap.suite.ui.commons.UnifiedThingGroup();if(o.Label&&o.Label.String){l.setTitle(o.Label.String);}n=o.Target.AnnotationPath;p=n.substring(n.lastIndexOf("@")+1);n=n.substring(0,n.lastIndexOf("@")-1);if(n){k=v(e,n,j);}c1=p.split("#");switch(c1[0]){case"com.sap.vocabularies.UI.v1.LineItem":case"com.sap.vocabularies.UI.v1.Chart":case"com.sap.vocabularies.UI.v1.Badge":case"com.sap.vocabularies.UI.v1.Identification":if(n){d1=u(e,n,j);k1=r(d1,j);}else{k1=r(e,j);}if(c1[0]==="com.sap.vocabularies.UI.v1.Chart"){p="com.sap.vocabularies.UI.v1.LineItem";}l1=M[k1][p];if(M.propertyExtensions){m1=M.propertyExtensions[k1];}if(k==="*"&&c1[0]!=="com.sap.vocabularies.UI.v1.Identification"){e1=P(m,l1,k1,j,b+"/"+n,o,m1,a);l.setContent(e1);}if(c1[0]==="com.sap.vocabularies.UI.v1.Identification"){f1=M[k1]["com.sap.vocabularies.UI.v1.Identification"];g1=new sap.ui.layout.VerticalLayout({width:"100%"}).setModel(m);if(n){g1.addContent(N(m,d1,f1,null,null,a)).addStyleClass("sapFactsheetUtiPanel");g1.bindElement(b+"/"+n);}else{g1.addContent(N(m,e,f1,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}l.setContent(g1);}break;case"com.sap.vocabularies.UI.v1.StatusInfo":if(n){d1=u(e,n,j);h1=M[r(d1,j)]["com.sap.vocabularies.UI.v1.StatusInfo"];l.setContent(N(m,d1,h1,null,null,a).addStyleClass("sapFactsheetUtiPanel").bindElement(b+"/"+n));}else{h1=M[r(e,j)]["com.sap.vocabularies.UI.v1.StatusInfo"];l.setContent(N(m,e,h1,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}break;case"com.sap.vocabularies.UI.v1.FieldGroup":i1=M[r(e,j)][p];if(i1){if(!l.getTitle()||(l.getTitle()==="")){if(i1.Label){if(i1.Label.String){l.setTitle(i1.Label.String);}else{if(i1.Label.Path){l.bindProperty("title",i1.Label.Path);}}}}if(n){d1=u(e,n,j);l.setContent(N(m,d1,i1.Data,null,null,a).addStyleClass("sapFactsheetUtiPanel").bindElement(b+"/"+n));}else{l.setContent(N(m,e,i1.Data,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}}break;default:break;}return l;case"com.sap.vocabularies.UI.v1.ReferenceURLFacet":l=new sap.ui.ux3.ThingGroup({title:o.Label.String});l.setContent(H(o));return l;case"com.sap.vocabularies.UI.v1.CollectionFacet":for(i=0;i<o.Facets.length;i+=1){j1.push(O(m,e,o.Facets[i],b,a));}return j1;default:break;}};H=function(o){var i,a,b;switch(o.UrlContentType.String){case"image/png":case"image/jpeg":case"image/gif":i=new sap.m.Image({width:"100%"});if(o.Url.String){i.setSrc(o.Url.String);}return i;default:a=new sap.ui.core.HTML();if(o.Url.String){a.setContent("<iframe src = '"+o.Url.String+"' width='100%' height='250px' frameborder='0'></iframe>");}else{if(o.Url.Path){a.bindProperty("content",{path:o.Url.Path,formatter:function(e){b="<iframe src = '"+o.Url.Path+"' width='100%' height='250px' frameborder='0'></iframe>";return b;}});}}return a;}};P=function(m,a,e,o,b,l,n,c1){var d1,e1,f1,g1,h1,i,k,i1=[],j1=[],k1=[],l1=[],m1,n1,o1,p1,q1,r1,s1,t1=[],u1,v1,w1,x1=[],y1,z1,A1,B1,C1,D1,E1,F1,G1=false,H1,I1;F1=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");if(!o){o=m.getServiceMetadata();}d1=(M.propertyExtensions)?M.propertyExtensions[e]:[];e1=6;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){e1=5;}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){e1=4;}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){e1=3;}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){e1=2;}f1=0;g1=0;for(i=0;i<a.length;i+=1){h1=W(a[i]);if(h1==="High"){f1+=1;}}if(e1>f1){g1=e1-f1;}else if(e1<f1){f1=e1;}j1.push(new sap.m.Column({visible:false}));i1.push(new sap.m.Text().bindText("__metadata/uri"));for(i=0;i<a.length;i+=1){I1="";o1=new sap.ui.core.Control();h1=W(a[i]);o1=B(a[i],e,o,c1);m1=C(a[i],null,d1);if(a[i].Value.Path){w1=a[i].Value.Path;if(n&&n[w1]&&n[w1]["http://www.sap.com/Protocols/SAPData"]&&n[w1]["http://www.sap.com/Protocols/SAPData"].sortable){m1.data("IsSortable",n[w1]["http://www.sap.com/Protocols/SAPData"].sortable);if(n[w1]["http://www.sap.com/Protocols/SAPData"].sortable==="true"){G1=true;}}else{m1.data("IsSortable","true");G1=true;}if(n&&n[w1]&&n[w1]["http://www.sap.com/Protocols/SAPData"]&&n[w1]["http://www.sap.com/Protocols/SAPData"].filterable){m1.data("IsFilterable",n[w1]["http://www.sap.com/Protocols/SAPData"].filterable);if(n[w1]["http://www.sap.com/Protocols/SAPData"].filterable==="true"){G1=true;}}else{m1.data("IsFilterable","true");G1=true;}}else{H1=true;for(k=0;k<a[i].Value.Apply.Parameters.length;k+=1){if(a[i].Value.Apply.Parameters[k].Type==="Path"){w1=a[i].Value.Apply.Parameters[k].Value;if(n[w1]&&n[w1]["http://www.sap.com/Protocols/SAPData"]&&n[w1]["http://www.sap.com/Protocols/SAPData"].sortable){if(n[w1]["http://www.sap.com/Protocols/SAPData"].sortable==="false"){H1=false;I1="";break;}}if(I1){I1+=";";}I1+=w1;}}w1=I1;if(H1===false){m1.data("IsSortable","false");}else{m1.data("IsSortable","true");G1=true;}m1.data("IsFilterable","false");}if(a[i].EdmType){m1.data("EdmType",a[i].EdmType);}m1.data("ColumnName",w1);k1.push(m1);l1.push(o1);if(h1==="High"){if(f1>0){n1=true;f1-=1;}else{n1=false;}}else if(h1==="Medium"){if(g1>0){n1=true;g1-=1;}else{n1=false;}}else{n1=false;}j1.push(new sap.m.Column({header:m1,hAlign:G(a[i]),visible:n1}));i1.push(o1);}p1=new sap.m.ColumnListItem({type:sap.m.ListType.Navigation,unread:false,cells:i1});if(l){q1=l.Label.String;}p1.attachPress({aColumns:a,aLabels:k1,aControls:l1,sTitle:q1},function(j,p){var J1,K1,m1,i,L1,M1,N1;J1=j.getSource().getCells()[0].getText().substr(j.getSource().getCells()[0].getText().lastIndexOf("/"));K1=new sap.m.Table({backgroundDesign:sap.m.BackgroundDesign.Transparent,showSeparators:sap.m.ListSeparators.None,columns:[new sap.m.Column({hAlign:sap.ui.core.TextAlign.End}),new sap.m.Column()]});K1.addStyleClass("sapFactsheetUtiPanel");K1.addStyleClass("sapFactsheetUtiTilePadding");K1.addStyleClass("sapFactsheetUtiTableNoTopBorder");K1.bindElement(J1);for(i=0;i<a.length;i+=1){m1=k1[i].clone();m1.setText(m1.getText()+":");N1=l1[i].clone();m1.setLabelFor(N1);K1.addItem(new sap.m.ColumnListItem({cells:[m1,N1]}));}L1=new sap.suite.ui.commons.UnifiedThingGroup({content:K1,title:q1,description:V()});M1=new sap.m.Page({title:t.getTitle(),showNavButton:true,content:[L1]});t.navigateToPage(M1,true);t.attachAfterNavigate(K1,function(j){if(j.getParameters().getParameters().toId.indexOf("__page")>=0){var O1;O1=K1.getItems();if(O1.length>0&&A.indexOf(c1)>=0){A[A.indexOf(c1)].bLoaded=true;A[A.indexOf(c1)].bProcessed=false;A[A.indexOf(c1)].bIsTable=true;A[A.indexOf(c1)].oTableItems=O1;c(A.indexOf(c1));}}});});r1=new sap.m.Table({growing:true,columns:j1});r1.setModel(m);r1.bindItems({path:b,template:p1});z1=new sap.m.VBox({items:[new sap.m.Input({placeholder:F1.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,J1,K1,L1,i;p=j.getSource().getParent().getParent().getId();J1=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));K1=J1.getFilterItems();for(i=0;i<K1.length;i+=1){if(K1[i]instanceof sap.m.ViewSettingsCustomItem&&K1[i].getKey()===this.oParent.data("ColumnName")){L1=K1[i];break;}}if(L1){if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){L1.setSelected(false);L1.setFilterCount(0);}else{L1.setSelected(true);L1.setFilterCount(1);}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});A1=new sap.m.VBox({items:[new sap.m.List({mode:sap.m.ListMode.SingleSelectLeft,includeItemInSelection:true,items:[new sap.m.StandardListItem({title:F1.getText("USHELL_FACTSHEET_GREATER_THEN")}).data("FilterOperator",sap.ui.model.FilterOperator.GT),new sap.m.StandardListItem({title:F1.getText("USHELL_FACTSHEET_EQUALS")}).data("FilterOperator",sap.ui.model.FilterOperator.EQ),new sap.m.StandardListItem({title:F1.getText("USHELL_FACTSHEET_LESS_THEN")}).data("FilterOperator",sap.ui.model.FilterOperator.LT)]}),new sap.m.Input({placeholder:F1.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,J1,K1,L1,i;p=j.getSource().getParent().getParent().getId();J1=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));K1=J1.getFilterItems();for(i=0;i<K1.length;i+=1){if((K1[i]instanceof sap.m.ViewSettingsCustomItem)&&(K1[i].getKey()===this.oParent.data("ColumnName"))){L1=K1[i];break;}}if(L1){if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){L1.setSelected(false);L1.setFilterCount(0);}else{L1.setSelected(true);L1.setFilterCount(1);}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});new sap.m.VBox({items:[new sap.m.List({mode:sap.m.ListMode.SingleSelectLeft,includeItemInSelection:true,items:[new sap.m.StandardListItem({title:F1.getText("USHELL_FACTSHEET_AFTER")}).data("FilterOperator",sap.ui.model.FilterOperator.GT),new sap.m.StandardListItem({title:F1.getText("USHELL_FACTSHEET_AT")}).data("FilterOperator",sap.ui.model.FilterOperator.EQ),new sap.m.StandardListItem({title:F1.getText("USHELL_FACTSHEET_BEFORE")}).data("FilterOperator",sap.ui.model.FilterOperator.LT)]}),new sap.m.DateTimeInput({type:sap.m.DateTimeInputType.Date,valueFormat:new sap.ui.model.type.DateTime({pattern:"yyyy/MM/dd HH:mm:ss UTC+00:00"}).getOutputPattern(),placeholder:F1.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,J1,K1,L1,i;p=j.getSource().getParent().getParent().getId();J1=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));K1=J1.getFilterItems();for(i=0;i<K1.length;i+=1){if((K1[i]instanceof sap.m.ViewSettingsCustomItem)&&(K1[i].getKey()===this.oParent.data("ColumnName"))){L1=K1[i];break;}}if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){L1.setSelected(false);L1.setFilterCount(0);}else{L1.setSelected(true);L1.setFilterCount(1);}}}).addStyleClass("sapFactsheetUtiFilterInput")]});B1=function(o1){var j=[],i,p,J1=o1.getItems(),K1;if(J1[0].getParent().data("EdmType")==="Edm.String"&&J1[0].getValue()){j.push(new sap.ui.model.Filter(J1[0].getParent().data("ColumnName"),sap.ui.model.FilterOperator.Contains,J1[0].getValue()));}else if(J1[0].getParent().data("EdmType")==="Edm.Decimal"&&J1[1].getValue()){for(i=0;i<J1[0].getItems().length;i+=1){if(J1[0].getItems()[i].getSelected()===true){p=J1[0].getItems()[i].data("FilterOperator");break;}}K1=J1[1].getValue();for(i=K1.length-1;i>0;i-=1){if(K1[i]===","){K1=K1.replace(K1[i],".");break;}}j.push(new sap.ui.model.Filter(J1[1].getParent().data("ColumnName"),p,K1));}else if(J1[0].getParent().data("EdmType")==="Edm.Date"&&J1[1].getValue()){for(i=0;i<J1[0].getItems().length;i+=1){if(J1[0].getItems()[i].getSelected()===true){p=J1[0].getItems()[i].data("FilterOperator");break;}}j.push(new sap.ui.model.Filter(J1[1].getParent().data("ColumnName"),p,J1[1].getValue()));}else{j.push(new sap.ui.model.Filter(J1[0].getParent().data("ColumnName"),sap.ui.model.FilterOperator.EQ,J1[0].getValue()));}return j;};C1=function(p){var J1=p.getSource(),K1=J1.getFilterItems(),L1,i,j;for(i=0;i<K1.length;i+=1){if(K1[i]&&K1[i]instanceof sap.m.ViewSettingsCustomItem){K1[i].setSelected(false);K1[i].setFilterCount(0);L1=K1[i].getCustomControl().getItems();for(j=0;j<L1.length;j+=1){if((L1[j]instanceof sap.m.Input)||(L1[j]instanceof sap.m.DateTimeInput)){L1[j].setValue("");}if((L1[j]instanceof sap.m.List)&&(L1[j].getSelectedItem()!==null)){L1[j].removeSelections();}}}}};D1=C1;for(i=0;i<j1.length;i+=1){if(j1[i+1]){m1=k1[i].clone();if(m1.getText()&&(m1.data("IsSortable")==="true")&&j1[i+1].getVisible()){u1=new sap.m.ViewSettingsItem({text:m1.getText(),key:m1.data("ColumnName")});if(i===0){u1.setSelected(true);}u1.Sort=m1.Sort;t1.push(u1);}if(m1.getText()&&(m1.data("IsFilterable")==="true")){if(m1.data("EdmType")==="Edm.String"){E1=z1.clone().data("ColumnName",m1.data("ColumnName")).data("EdmType",m1.data("EdmType"));}else if(m1.data("EdmType")==="Edm.Decimal"){E1=A1.clone().data("ColumnName",m1.data("ColumnName")).data("EdmType",m1.data("EdmType"));}if((m1.data("EdmType")==="Edm.String")||(m1.data("EdmType")==="Edm.Decimal")){y1=new sap.m.ViewSettingsCustomItem({key:m1.data("ColumnName"),text:m1.getText(),customControl:E1,customData:new sap.ui.core.CustomData({key:"callback",value:B1})});x1.push(y1);}}}}v1=new sap.m.ViewSettingsDialog({sortItems:t1,filterItems:x1,cancel:D1,resetFilters:C1,confirm:function(j){var J1,K1,L1=[],M1,N1=[],O1,P1=[],Q1=[],p,i,R1;J1=j.getParameters();K1=r1.getBinding("items");if(J1.sortItem){M1=J1.sortItem.getKey();O1=J1.sortDescending;if(M1.indexOf(";")>0){N1=M1.split(";");for(i=0;i<N1.length;i+=1){L1.push(new sap.ui.model.Sorter(N1[i],O1));}}else if(M1){L1.push(new sap.ui.model.Sorter(M1,O1));}K1.sort(L1);}p=J1;for(i=0;i<p.filterItems.length;i+=1){if(p.filterItems[i]instanceof sap.m.ViewSettingsCustomItem){R1=p.filterItems[i].getCustomData()[0].getValue();P1=R1.apply(this,[p.filterItems[i].getCustomControl()]);if(P1){if(!Array.isArray(P1)){P1=[P1];}Q1=Q1.concat(P1);}}else if(p.filterItems[i]instanceof sap.m.ViewSettingsItem){P1=p.filterItems[i].getCustomData()[0].getValue();if(P1){if(!Array.isArray(P1)){P1=[P1];}Q1=Q1.concat(P1);}}}K1.filter(Q1);}});if(G1===true&&(t1.length>0||x1.length>0)){r1.setHeaderToolbar(new sap.m.Toolbar({content:[new sap.m.Label(),new sap.m.ToolbarSpacer(),new sap.m.Button({icon:"sap-icon://drop-down-list",press:function(j){v1.open();},tooltip:sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("P13NDIALOG_VIEW_SETTINGS")})]}));}r1.setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"));s1=(function(c1){return function(j){var p=this.getItems();if(p.length===0){this.setNoDataText(F1.getText("FACETOVERVIEW_NO_CONTENT_TEXT"));}else{this.setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"));}if(p.length>0&&A.indexOf(c1)>=0){A[A.indexOf(c1)].bLoaded=true;A[A.indexOf(c1)].bProcessed=false;A[A.indexOf(c1)].bIsTable=true;A[A.indexOf(c1)].oTableItems=p;}c(A.indexOf(c1));};}(c1));r1.attachUpdateFinished(s1);return r1;};R=function(a,o,b,e){var i;switch(a){case"com.sap.vocabularies.UI.v1.ChartType/Area":i=new sap.viz.ui5.Area({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bar":i=new sap.viz.ui5.Bar({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bubble":i=new sap.viz.ui5.Bubble({});break;case"com.sap.vocabularies.UI.v1.ChartType/Column":i=new sap.viz.ui5.Column({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked":i=new sap.viz.ui5.StackedColumn({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked100":i=new sap.viz.ui5.StackedColumn100({});break;case"com.sap.vocabularies.UI.v1.ChartType/Donut":i=new sap.viz.ui5.Donut({});break;case"com.sap.vocabularies.UI.v1.ChartType/HeatMap":i=new sap.viz.ui5.Heatmap({});break;case"com.sap.vocabularies.UI.v1.ChartType/HorizontalArea":i=new sap.viz.ui5.HorizontalArea({});break;case"com.sap.vocabularies.UI.v1.ChartType/Line":i=new sap.viz.ui5.Line({});break;case"com.sap.vocabularies.UI.v1.ChartType/Pie":i=new sap.viz.ui5.Pie({});break;case"com.sap.vocabularies.UI.v1.ChartType/Scatter":i=new sap.viz.ui5.Scatter({});break;case"com.sap.vocabularies.UI.v1.ChartType/TreeMap":i=new sap.viz.ui5.Treemap({});break;case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked100":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/Radar":case"com.sap.vocabularies.UI.v1.ChartType/Waterfall":break;}if(i){if(o&&o.String){i.setTitle(new sap.viz.ui5.types.Title({visible:true,text:o.String}));}if(b&&b.String){i.setTooltip(b.String);}i.setWidth("100%");i.setHeight("17rem");i.setDataset(e);}else{i=new sap.m.Text({});}return i;};S=function(i){var a;i=i||1;if(jQuery.device.is.phone){a=(7*i)+"rem";}else{a=(11*i-1)+"rem";}return a;};T=function(a){var i,b=0,e=0,j=0,o;for(i=0;i<a.length;i+=1){o=W(a[i]);if(o){switch(o){case"High":b+=1;break;case"Medium":e+=1;break;case"Low":j+=1;break;}}}return{High:b,Medium:e,Low:j};};W=function(o){var e="";if(o.Importance){e=o.Importance.EnumMember;}else if(o["com.sap.vocabularies.UI.v1.Importance"]){e=o["com.sap.vocabularies.UI.v1.Importance"].EnumMember;}return e.substr(e.indexOf("/")+1);};U=function(m,a,e,b){var i=false,o,j,k,l;o=new sap.suite.ui.commons.KpiTile({doubleFontSize:false});if(a.ValueFormat){j=a.ValueFormat.NumberOfFractionalDigits.Int;}if(a.Title&&a.Title.String){o.setDescription(a.Title.String);}else{if(a.Title&&a.Title.Path){o.bindProperty("description",{path:a.Title.Path});}}if(a.Value&&a.Value.String){o.setValue(a.Value.String);}else{if(a.Value&&a.Value.Path){k=K(a.Value,a.Value.EdmType,e);if(k.fnChange){o.setModel(m);o.bindElement(b);o.getElementBinding().attachChange(k.fnChange,o);}if(k.String){if($.isNumeric(k.String)){i=true;o.setValue(a1(k.String,j));}else{o.setValue(k.String);}}else if(k.BindingInfo){l=k.BindingInfo;if(l.parts&&l.parts.length===2){o.bindProperty("valueUnit",l.parts[0]);l.parts[1].type=undefined;l.parts[1].formatter=(function(){return function(n){return a1(n,j);};}(j));o.bindProperty("value",l.parts[1]);}else if(l.parts&&l.parts.length===1){l.parts[0].type=undefined;l.parts[0].formatter=(function(){return function(n){return a1(n,j);};}(j));o.bindProperty("value",l);}else{o.bindProperty("value",l);}}}}if(a.Value.EdmType==="Edm.Decimal"||a.Value.EdmType==="Edm.Double"||a.Value.EdmType==="Edm.Single"||a.Value.EdmType==="Edm.Int16"||a.Value.EdmType==="Edm.Int32"||a.Value.EdmType==="Edm.Int64"||i===true){o.setDoubleFontSize(true);}return o;};g=function(m){var a=[],b=[],e,j,k,i,l;j=function(o){if(k(o)===false){if(o.constructor===Array){for(i=0;i<o.length;i+=1){k(o[i]);}}if(o.constructor===Object){for(l in o){if(o.hasOwnProperty(l)){if(o[l].constructor!==String){j(o[l]);}}}}}};k=function(o){if(o.RecordType&&o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o.Url&&o.Url.Apply){e=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("-"));if(a.indexOf(e)<0){a.push(e);}return true;}}else{return false;}};for(l in M){if(M.hasOwnProperty(l)){if(l.indexOf(m.dataServices.schema[0].namespace)>=0){j(M[l]);}}}for(i=0;i<a.length;i+=1){if(!L.hasOwnProperty(a[i])){b.push(a[i]);}}return b;};d=function(a){var i,o,l,b;if(a.length>0){o=new sap.ui.model.json.JSONModel();l="/sap/opu/odata/UI2/INTEROP/SemanticObjects?$expand=Links&$format=json";b="&$filter=id%20eq%20%27";for(i=0;i<a.length;i+=1){if(b.length>22){b+="%20or%20id%20eq%20%27"+a[i]+"%27";}else{b+=a[i]+"%27";}}l+=l+b;o.loadData(l);o.attachRequestCompleted(function(){var i,j,e,k=[];if(this.getData().d&&this.getData().d.results){e=this.getData().d.results;for(i=0;i<e.length;i+=1){L[e[i].id]="";k=e[i].Links.results;for(j=0;j<k.length;j+=1){L[k[j].id.slice(0,k[j].id.indexOf("~"))]="";}}}L.InteropCompleted=true;c();});}else{L.InteropCompleted=true;}};c=function(a){var i,j,k,n,b,e,l;if(L.InteropCompleted===true){for(i=0;i<A.length;i+=1){if(A[i].bLoaded&&!A[i].bProcessed&&A[i].Links){l=A[i].Links;for(j=0;j<l.length;j+=1){if(L.hasOwnProperty(l[j].sIntend)===true){if(A[i].bIsTable===true){if(A[i].oTableItems){b=A[i].oTableItems;for(k=0;k<b.length;k+=1){e=b[k].getCells();for(n=0;n<e.length;n+=1){if(e[n]instanceof sap.ui.layout.VerticalLayout&&e[n].getContent()[0].getBindingInfo("href").parts===l[j].oVL.getContent()[0].getBindingInfo("href").parts&&e[n].getContent()[1].getBindingInfo("text").parts===l[j].oVL.getContent()[1].getBindingInfo("text").parts){e[n].getContent()[0].setVisible(true);e[n].getContent()[1].setVisible(false);}}}}}else{l[j].oVL.getContent()[0].setVisible(true);l[j].oVL.getContent()[1].setVisible(false);}}else if(A[i].bIsTable===false){l[j].oVL.getContent()[1].setText(l[j].oVL.getContent()[0].getText());}A[i].bProcessed=true;}}}}if(a>=0){if(A[a].bLoaded&&!A[a].bProcessed&&A[a].Links){l=A[a].Links;for(j=0;j<l.length;j+=1){if(A[a].bIsTable===false){l[j].oVL.getContent()[1].setText(l[j].oVL.getContent()[0].getText());}}}}};I=function(e,l,t){var m,n,p,c1,d1,e1,f1,g1,i,h1={},i1,j1,k1,l1,j,m1,n1,o1,p1,q1,r1,s1,t1,u1,v1=0,w1=0,x1,y1,z1,A1,B1,C1,D1,E1=[],F1,G1,H1,I1,J1,K1,L1,M1,N1,O1,P1,Q1,R1,S1,T1,U1,V1,W1=0,X1,Y1,Z1,$1,_1,a2,b2,c2;m=f(e);r1=l.substring(0,l.substring(0,l.lastIndexOf("/")).lastIndexOf("/"));s1=l.substring(l.substring(0,l.lastIndexOf("/")).lastIndexOf("/"));if(window.location.search.indexOf("cbn_keep_anno_case%3Dtrue")===-1){s1=s1.toLowerCase();}n=new sap.ui.model.odata.ODataModel(m,{annotationURI:r1+s1,loadAnnotationsJoined:true,loadMetadataAsync:false,json:true});n.setCountSupported(false);t.setModel(n);p=h(e,n);c1="/"+e.slice(m.length);d1=n.getServiceMetadata();M=n.getServiceAnnotations();e1=r(p,d1);f1=M[e1]["com.sap.vocabularies.UI.v1.HeaderInfo"];g1=M[e1]["com.sap.vocabularies.UI.v1.Facets"];t.bindElement(c1,w(p,d1));t1=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");L.InteropCompleted=false;d(g(d1));t.addStyleClass("sapFactsheetUtiThingType"+p.replace(/\s/g,""));if(f1.TypeName.String){t.setTitle(f1.TypeName.String);}else{if(f1.TypeName.Path){t.bindProperty("title",{path:f1.TypeName.Path});}}if(f1.ImageUrl&&f1.ImageUrl.String){t.setIcon(f1.ImageUrl.String);}else if(f1.ImageUrl&&f1.ImageUrl.Path){t.bindProperty("icon",{path:f1.ImageUrl.Path});}else if(f1.TypeImageUrl&&f1.TypeImageUrl.String){t.setIcon(f1.TypeImageUrl.String);}else if(f1.TypeImageUrl&&f1.TypeImageUrl.Path){t.bindProperty("icon",{path:f1.TypeImageUrl.Path});}if(f1.Title.Value.String){t.setName(f1.Title.Value.String);}else{t.bindProperty("name",K(f1.Title.Value,f1.Title.EdmType,e1).BindingInfo);}if(f1.Description&&f1.Description.Value){if(f1.Description.Value.String){t.setDescription(f1.Description.Value.String);}else{t.bindProperty("description",K(f1.Description.Value,f1.Description.EdmType,e1).BindingInfo);}}for(X1 in M[e1]){if(M[e1].hasOwnProperty(X1)){if(X1.search("com.sap.vocabularies.UI.v1.DataPoint")!==-1){Y1=M[e1][X1];if(Y1){t.addKpi(U(n,Y1,e1,c1));W1+=1;}}if(W1>=3){break;}}}for(i=0;i<g1.length;i+=1){if(g1[i]["com.sap.vocabularies.UI.v1.IsSummary"]){n1=g1[i];break;}}if(n1){u1=15;for(j=0;j<n1.Facets.length;j+=1){x1=n1.Facets[j].Target.AnnotationPath.substring(n1.Facets[j].Target.AnnotationPath.lastIndexOf("@")+1);i1=n1.Facets[j].Target.AnnotationPath;i1=i1.substring(0,i1.lastIndexOf("@")-1);n1.Facets[j].NavPath=i1;y1=u(p,i1,d1);n1.Facets[j].NavEntitySet=y1;if(y1){z1=y1;}else{z1=p;}n1.Facets[j].EntitySet=z1;A1=r(y1,d1);if(A1){B1=A1;}else{B1=e1;}n1.Facets[j].EntityType=B1;C1=[];if(M[B1][x1].length){C1=M[B1][x1];}else if(M[B1][x1].Data.length){C1=M[B1][x1].Data;}n1.Facets[j].Content=C1;for(i=0;i<C1.length;i+=1){D1=W(C1[i]);if(D1==="High"){v1+=1;}else if(D1==="Medium"){w1+=1;}}}if(v1>=u1){v1=u1;w1=0;}else if((v1+w1)>u1){w1=u1-v1;if(w1<0){w1=0;}}if(jQuery.device.is.phone){w1=0;}H1=u1-v1-w1;P1=new sap.suite.ui.commons.FacetOverview({title:t1.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT")});A=[];A.push(P1);A[0].bLoaded=false;A[0].bProcessed=false;A[0].bIsTable=false;I1=[];K1=w1+v1;for(j=0;j<n1.Facets.length;j+=1){L1=N(n,n1.Facets[j].EntitySet,n1.Facets[j].Content,{High:v1,Medium:w1,Low:0},null,P1).addStyleClass("sapFactsheetUtiTilePadding");if(j>0){L1.addStyleClass("sapFactsheetUtiPaddingTop");}if(n1.Facets[j].NavPath){L1.bindElement(c1+"/"+n1.Facets[j].NavPath);}J1=T(n1.Facets[j].Content);v1-=J1.High;w1-=J1.Medium;if(((J1.High>0)&&((v1+J1.High)>0))||((J1.Medium>0)&&((w1+J1.Medium)>0))){I1.push(L1);if(j>0){if(H1>0){H1-=1;}else if(w1>0){w1-=1;}else if(v1>0){v1-=1;}}}if((v1<1)&&(w1<1)){break;}}if(v1<0){v1=0;}if(w1<0){w1=0;}h1=new sap.ui.layout.VerticalLayout({content:I1,width:"100%"});M1=S();O1=1;if((K1>3)&&(K1<=9)){M1=S(2);O1=2;}else if(K1>9){M1=S(3);O1=3;}P1.setContent(h1);P1.setRowSpan(O1);if(jQuery.device.is.phone){P1.setHeightType(sap.suite.ui.commons.FacetOverviewHeight.Auto);}else{P1.setHeight(M1);}P1.addStyleClass("sapFactsheetUtiGeneralInformationOverviewFacet");P1.attachPress({facets:n1},function(o,a){var b,k,d2,e2,h1;t.removeAllFacetContent();d2=new sap.suite.ui.commons.UnifiedThingGroup();d2.setDescription(V());d2.setTitle(t1.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"));d2.addStyleClass("sapFactsheetUtiGeneralInformationUtg");if(a.facets.Facets.length>1){b="L6 M12 S12";}else{b="L12 M12 S12";}A[0].Links=[];e2=new sap.ui.layout.VerticalLayout({width:"100%"});for(i=0;i<a.facets.Facets.length;i+=1){if(i%2===0){k=new sap.ui.layout.Grid({hSpacing:1,vSpacing:1,defaultSpan:b});}h1=O(n,p,a.facets.Facets[i],c1,this);h1.addStyleClass("sapFactsheetUtiGeneralInformationUtgContent");if((i===0)&&(a.facets.Facets.length>1)&&(h1.getTitle().trim()==="")){h1.setTitle(t1.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"));}k.addContent(h1);if(i%2!==0){e2.addContent(k);}}A[0].bLoaded=true;A[0].bProcessed=false;A[0].bIsTable=false;c(0);if(i%2!==0){e2.addContent(k);}d2.setContent(e2);t.addFacetContent(d2);t.navigateToDetail();});t.addFacet(P1);}k1=function(l1){return function(a){var o,b,k,d2,e2,f2,g2,h2,i2,j2,c1,k2,l2,m2,n2,o2,p2,q2,r2,i;if((l1.cardinality==="*"&&a.results&&a.results.length&&a.results.length!==0)||(l1.cardinality==="1"&&a)){j2=new sap.ui.model.json.JSONModel();if(l1.cardinality==="*"){if(a.results&&a.results.length){j2.setData(a);}}else{j2.setData({result:a});c1="/result";}o=new sap.ui.model.odata.ODataModel("/sap/opu/odata/sap/VBI_APPL_DEF_SRV",false);b=M[l1.navigationType]["com.sap.vocabularies.UI.v1.GeoLocation"];l2=M[l1.navigationType]["com.sap.vocabularies.UI.v1.HeaderInfo"];m2=M[l1.navigationType]["com.sap.vocabularies.UI.v1.Identification"];if(b.Longitude&&b.Latitude){d2={"Data":{"Set":{"N":[{"name":"Spots","E":[]}]}}};if(l1.cardinality==="1"){if(b.Longitude.Path&&b.Latitude.Path){k=a[b.Longitude.Path]+";"+a[b.Latitude.Path]+";0";}d2.Data.Set.N[0].E.push({"A":k,"I":"pin_blue.png"});}else{for(i=0;i<a.results.length;i+=1){if(b.Longitude.Path&&b.Latitude.Path){k=a.results[i][b.Longitude.Path]+";"+a.results[i][b.Latitude.Path]+";0";}d2.Data.Set.N[0].E.push({"A":k,"I":"pin_blue.png"});}if(a.results.length!==0){k=a.results[0][b.Longitude.Path]+";"+a.results[0][b.Latitude.Path]+";0";}}}r2=parseInt(a.__count,10);if(Number(r2)){l1.facet.setQuantity(r2);}g2=function(s2){var t2,u2,v2,w2,x2;t2=$.parseJSON(s2.getParameters().data);if(t2.Action.name==="DETAIL_REQUEST"&&t2.Action.instance){u2=t2.Action.instance;if(j2.oData.results){c1="/results/"+u2.split(".")[1];}q2=l2.TypeName.String.substring(0,17);w2=parseFloat(S(0.7))*16;x2=parseFloat(S(1.5))*16;v2={"SAPVB":{"version":"2.0","xmlns:VB":"VB","Windows":{"Remove":{"name":"Detail1"},"Set":{"name":"Detail1","Window":{"id":"Detail1","type":"callout","refParent":"Main","refScene":"","offsetX":"16","offsetY":"-27","modal":"false","width":x2,"height":w2,"caption":q2,"pos.bind":u2+".GeoPosition"}}},"Scenes":{"Set":{"name":"Details","Scene":{"id":"Details","navControlVisible":"false"}}}}};this.load(v2);}};h2=function(s2){var X1,t2,y1,u2;if(!n2){n2=B(l2.Title,l1.navigationType,d1,l1.facet);n2.setModel(j2);n2.bindElement(c1);o2=B(l2.Description,l1.navigationType,d1,l1.facet);o2.setModel(j2);o2.bindElement(c1);for(X1 in b.Address){if(X1==="label"){k2=B({Value:b.Address[X1]},l1.navigationType,d1,l1.facet);k2.setModel(j2);k2.bindElement(c1);break;}}u2=7;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){u2=4;}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){u2=5;}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){u2=2;}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){u2=3;}p2=new sap.ui.layout.VerticalLayout({width:"100%"}).setModel(n);if(l1.navigationPath){y1=u(l1.entitySet,l1.navigationPath,d1);p2.addContent(N(n,y1,m2,{High:u2},null,l1.facet));p2.setModel(j2).bindElement(c1);}else{p2.addContent(N(n,l1.entitySet,m2,{High:u2},null,l1.facet)).setModel(j2).bindElement(c1);}}else{n2.bindElement(c1);if(o2){o2.bindElement(c1);}if(k2){k2.bindElement(c1);}if(p2){p2.bindElement(c1);}}t2=parseFloat(S(1.5))*16*0.95+"px";if(n2){n2.placeAt(s2.getParameter("contentarea").id);n2.addStyleClass("sapFactsheetUtiGeoPopupHead");if(jQuery.device.is.phone){n2.addStyleClass("sapFactsheetUtiGeoPopupHeadFontPhone");}n2.setWidth(t2);}if(o2){o2.placeAt(s2.getParameter("contentarea").id);o2.addStyleClass("sapFactsheetUtiGeoPopupDescr");if(jQuery.device.is.phone){o2.addStyleClass("sapFactsheetUtiGeoPopupDescrFontPhone");}o2.setWidth(t2);}if(k2){k2.placeAt(s2.getParameter("contentarea").id);k2.addStyleClass("sapFactsheetUtiGeoPopupText");k2.setWidth(t2);}if(p2&&p2.getContent()[0]&&p2.getContent()[0].getContent&&p2.getContent()[0].getContent().length>0){p2.placeAt(s2.getParameter("contentarea").id);p2.addStyleClass("sapFactsheetUtiGeoPopupText");p2.setWidth(t2);}if(A.indexOf(l1.facet)>=0){A[A.indexOf(l1.facet)].bLoaded=true;A[A.indexOf(l1.facet)].bProcessed=false;A[A.indexOf(l1.facet)].bIsTable=false;}c(A.indexOf(l1.facet));};i2=function(s2){if(n2){n2.destroy();n2=undefined;}if(o2){o2.destroy();o2=undefined;}if(k2){k2.destroy();k2=undefined;}if(p2){p2.destroy();p2=undefined;}$(s2.getParameter("contentarea").id).empty();};e2=function(l1){return function(a){var s2,t2,u2,v2,i;v2=a.ProjectJSON;v2=v2.indexOf("{")?v2.substr(v2.indexOf("{")):v2;s2=$.parseJSON(v2);s2.SAPVB.Scenes.Set.SceneGeo.initialStartPosition=k;s2.SAPVB.Scenes.Set.SceneGeo.initialZoom=12;s2.SAPVB.Actions.Set.Action.push({id:"200",name:"TAP_ON_MAP",refEvent:"Click",refScene:"MainScene",refVO:"Map"});if(d2){s2.SAPVB.Data=d2.Data;}for(i=0;i<s2.SAPVB.Scenes.Set.SceneGeo.VO.length;i+=1){if(s2.SAPVB.Scenes.Set.SceneGeo.VO[i].datasource==="Spots"){if(s2.SAPVB.Scenes.Set.SceneGeo.VO[i].scale&&s2.SAPVB.Scenes.Set.SceneGeo.VO[i].scale.split(";").length!==3){s2.SAPVB.Scenes.Set.SceneGeo.VO[i].scale="1.0;1.0;1.0";break;}}}l1.facet.getContent().attachSubmit(function(w2){if(jQuery.device.is.tablet||jQuery.device.is.phone){l1.facet.firePress();}});l1.facet.getContent().load(s2);l1.facet.attachPress("",function(w2,x2){var y2=[],z2=[],i,A2;if(!t2){t2=new sap.ui.vbm.VBI({width:"100%",height:"100%",plugin:false,config:null});t2.addStyleClass("sapFactsheetUtiGeoPopup");}s2.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.move="false";s2.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.zoom="false";s2.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.pitch="false";s2.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.yaw="false";s2.SAPVB.Scenes.Set.SceneGeo.SuppressedNavControlVisibility="false";t2.load(s2);if(l1.cardinality==="*"){for(i=0;i<j2.oData.results.length;i+=1){y2.push(j2.oData.results[i][b.Longitude.Path]);z2.push(j2.oData.results[i][b.Latitude.Path]);}}t2.attachSubmit(g2);t2.attachOpenWindow(h2);t2.attachCloseWindow(i2);u2=new sap.suite.ui.commons.UnifiedThingGroup({content:t2,title:l1.facetContent.Label.String,description:V()});t.removeAllFacetContent();t.addFacetContent(u2);t.navigateToDetail();t.attachAfterNavigate(y2,function(w2){if(w2.getParameters().getParameters().toId.indexOf("-detail-page")!==-1){if(jQuery.device.is.phone){A2="300px";}else{A2=Math.floor($("#"+w2.getParameters().getParameters().toId+"-cont").height()-128)+"px";}t2.setHeight(A2);if(y2.length>1){t2.zoomToGeoPosition(y2,z2);}}});});};};f2=function(s2){return function(t2){t.removeFacet(s2);};};o.read("VBIApplicationSet('ZFACTSHEETS')","","",false,e2(l1),f2(l1.facet));}else{l1.facet.setQuantity(undefined);l1.facet.addStyleClass("sapFactsheetUtiEmptyTile");l1.facet.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.S);l1.facet.setContent(undefined);l1.facet.setTitle(undefined);}};};b2=function(o){var a,b;a=o.srcControl.getParent().getParent().getDomRef().clientWidth;b=a;if(o.srcControl.getParent().getContent()[0]){b-=o.srcControl.getParent().getContent()[0].getDomRef().clientWidth;if(a<o.srcControl.getParent().getContent()[0].getDomRef().clientWidth){o.srcControl.getParent().getContent()[0].getDomRef().setAttribute("style","width:"+a+"px");return;}}if(o.srcControl.getParent().getContent()[1]){b-=o.srcControl.getParent().getContent()[1].getDomRef().clientWidth;}if(b<10){b=0;}if(o.srcControl.getParent().getContent()[2]){o.srcControl.getParent().getContent()[2].getDomRef().setAttribute("style","width:"+b+"px");}};j1=function(l1){return function(a){var o,b,k,d2,e2,f2,i,j,h1,g2,h2,i2,j2,k2,l2,m2,n2,o2,p2,q2,r2,s2,t2,u2,v2,w2="",x2,y2,z2,A2,B2,C2;o=new sap.ui.model.json.JSONModel();if(l1.facetContent.Target&&l1.facetContent.Target.AnnotationPath&&l1.facetContent.Target.AnnotationPath.split("#")[1]&&M[l1.navigationType]["com.sap.vocabularies.UI.v1.Badge#"+l1.facetContent.Target.AnnotationPath.split("#")[1]]){b=M[l1.navigationType]["com.sap.vocabularies.UI.v1.Badge#"+l1.facetContent.Target.AnnotationPath.split("#")[1]];}else{b=M[l1.navigationType]["com.sap.vocabularies.UI.v1.Badge"];}if(l1.cardinality==="*"){if(a.results&&a.results.length){x2=l1.facetContent.Target.AnnotationPath;Z1=x2.substring(x2.lastIndexOf("@")+1);if(Z1==="com.sap.vocabularies.UI.v1.Chart"){jQuery.sap.require("sap.viz.ui5.data.FlattenedDataset");y2=M[l1.navigationType]["com.sap.vocabularies.UI.v1.Chart"];z2=M.propertyExtensions[l1.navigationType];A2=[];for(i=0;i<y2.Dimensions.length;i+=1){A2.push({axis:1,name:z2[y2.Dimensions[i].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:"{"+y2.Dimensions[i].PropertyPath+"}"});}B2=[];for(i=0;i<y2.Measures.length;i+=1){B2.push({name:z2[y2.Measures[i].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:"{"+y2.Measures[i].PropertyPath+"}"});}C2=new sap.viz.ui5.data.FlattenedDataset({dimensions:A2,measures:B2,data:{path:"/results"}});h1=R(y2.ChartType.EnumMember,y2.Title,y2.Description,C2);h1.setModel(o);l1.facet.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.XL);}else{h1=new sap.ui.layout.VerticalLayout({width:"100%"}).addStyleClass("sapFactsheetUtiVLayoutPadding");for(i=0;i<a.results.length;i+=1){e2=new sap.ui.layout.HorizontalLayout().addStyleClass("sapFactsheetUtiHLayoutPadding");k=B(b.Title,l1.navigationType,d1,l1.facet);if(k.setWrapping){k.setWrapping(false);}k.addDelegate({onAfterRendering:b2});o=new sap.ui.model.json.JSONModel();o.setData({result:a.results[i]});k.setModel(o);k.bindElement("/result");f2=false;if(a.results[i][b.Title.Value.Path]){f2=true;}if(b.Title.Value.Apply){for(j=0;j<b.Title.Value.Apply.Parameters.length;j+=1){if(b.Title.Value.Apply.Parameters[j].Type==="Path"){if(a.results[i][b.Title.Value.Apply.Parameters[j].Value]){f2=true;break;}}}}w2="";if(f2){e2.addContent(k);if(b.MainInfo&&((b.MainInfo.EdmType&&b.MainInfo.EdmType==="Edm.Decimal")||(b.MainInfo.Value&&b.MainInfo.Value.Apply&&b.MainInfo.Value.Apply.Parameters[0]&&b.MainInfo.Value.Apply.Parameters[0].EdmType&&b.MainInfo.Value.Apply.Parameters[0].EdmType==="Edm.Decimal"))){w2="comma";}else if(b.MainInfo&&b.MainInfo.Value.Path&&a.results[i][b.MainInfo.Value.Path]){w2="dash";}else if(b.MainInfo&&b.MainInfo.Value.Apply){for(j=0;j<b.MainInfo.Value.Apply.Parameters.length;j+=1){if(b.MainInfo.Value.Apply.Parameters[j].Type==="Path"){if(a.results[i][b.MainInfo.Value.Apply.Parameters[j].Value]){w2="dash";break;}}}}if(w2==="dash"){e2.addContent(new sap.ui.core.HTML({content:"<span class=\"sapFactsheetUtiSeparatorPadding sapMText\"> &ndash; </span>"}));}if(w2==="comma"){e2.addContent(new sap.m.Text({text:", "}).addStyleClass("sapFactsheetUtiSeparatorPaddingForDecimal"));}}if(b.MainInfo){d2=B(b.MainInfo,l1.navigationType,d1,l1.facet);if(d2.setWrapping){d2.setWrapping(false);}d2.addDelegate({onAfterRendering:b2});d2.setModel(o);d2.bindElement("/result");e2.addContent(d2);}h1.addContent(e2);}}g2=parseInt(a.__count,10);if(Number(g2)){l1.facet.setQuantity(g2);}l1.facet.setContent(h1);l1.facet.attachPress({facet:l1.facetContent},function(D2,E2){var h1;t.removeAllFacetContent();A[A.indexOf(l1.facet)].Links=[];h1=O(n,l1.entitySet,E2.facet,l1.bindingPath,this);h1.setDescription(V());t.addFacetContent(h1);if(A.indexOf(l1.facet)>=0){A[A.indexOf(l1.facet)].bLoaded=false;A[A.indexOf(l1.facet)].bProcessed=false;A[A.indexOf(l1.facet)].bIsTable=true;}c(A.indexOf(l1.facet));t.navigateToDetail();});}else{l1.facet.setQuantity(0);l1.facet.addStyleClass("sapFactsheetUtiEmptyTile");l1.facet.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.S);}if(A.indexOf(l1.facet)>=0){A[A.indexOf(l1.facet)].bLoaded=true;A[A.indexOf(l1.facet)].bProcessed=false;A[A.indexOf(l1.facet)].bIsTable=false;}c(A.indexOf(l1.facet));}else{o.setData({result:a});for(u2 in a){if(a.hasOwnProperty(u2)){if(u2!=="__metadata"){if(typeof a[u2]==="string"&&a[u2]){if(parseInt(a[u2],10)!==0){v2=true;break;}}else if(typeof a[u2]==="number"&&parseInt(a[u2],10)!==0){v2=true;break;}}}}if(v2){h2=new sap.ui.layout.VerticalLayout();i2=(M.propertyExtensions)?M.propertyExtensions[l1.navigationType]:[];j2=new sap.ui.layout.HorizontalLayout().addStyleClass("sapFactsheetUtiHLayoutLabelValue");k2=C(b.Title,{},i2,true).addStyleClass("sapFactsheetUtiLabelMargin");k=B(b.Title,l1.navigationType,d1,l1.facet);k.setModel(o);k.bindElement("/result");j2.addContent(k2);j2.addContent(k);h2.addContent(j2);if(b.MainInfo){l2=new sap.ui.layout.HorizontalLayout().addStyleClass("sapFactsheetUtiHLayoutLabelValue");m2=C(b.MainInfo,{},i2,true).addStyleClass("sapFactsheetUtiLabelMargin");d2=B(b.MainInfo,l1.navigationType,d1,l1.facet);d2.setModel(o);d2.bindElement("/result");l2.addContent(m2);l2.addContent(d2);h2.addContent(l2);}if(b.SecondaryInfo){n2=new sap.ui.layout.HorizontalLayout().addStyleClass("sapFactsheetUtiHLayoutLabelValue");o2=C(b.SecondaryInfo,{},i2,true).addStyleClass("sapFactsheetUtiLabelMargin");p2=B(b.SecondaryInfo,l1.navigationType,d1,l1.facet);p2.setModel(o);p2.bindElement("/result");n2.addContent(o2);n2.addContent(p2);h2.addContent(n2);}if(b.TypeImageUrl||b.ImageUrl){if(b.ImageUrl){q2=b.ImageUrl;}else{q2=b.TypeImageUrl;}r2=new sap.ui.layout.HorizontalLayout();s2="64px";if(jQuery.device.is.phone){s2="48px";}if(q2.String&&(q2.String.substr(0,11)==="sap-icon://")){t2=new sap.ui.core.Icon({size:s2,width:s2});}else{t2=new sap.m.Image({width:s2});}t2.addStyleClass("sapFactsheetUtiRelIcon");if(q2&&q2.String){t2.setSrc(q2.String);}else{if(q2&&q2.Path){t2.bindProperty("src",q2.Path);}}r2.addContent(t2);r2.addContent(h2);l1.facet.setContent(r2);}else{l1.facet.setContent(h2);}l1.facet.attachPress({facet:l1.facetContent},function(D2,E2){var h1;t.removeAllFacetContent();A[A.indexOf(l1.facet)].Links=[];h1=O(n,l1.entitySet,E2.facet,l1.bindingPath,this);h1.setDescription(V());t.addFacetContent(h1);if(A.indexOf(l1.facet)>=0){A[A.indexOf(l1.facet)].bLoaded=true;A[A.indexOf(l1.facet)].bProcessed=false;A[A.indexOf(l1.facet)].bIsTable=false;}c(A.indexOf(l1.facet));t.navigateToDetail();});}else{l1.facet.addStyleClass("sapFactsheetUtiEmptyTile");l1.facet.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.S);}if(A.indexOf(l1.facet)>=0){A[A.indexOf(l1.facet)].bLoaded=true;A[A.indexOf(l1.facet)].bProcessed=false;A[A.indexOf(l1.facet)].bIsTable=false;}c(A.indexOf(l1.facet));}};};a2=function(l1){return function(a){t.removeFacet(l1.facet);};};$1=function(l1){return function(a){var o,b,i,k,d2;b=M[l1.navigationType]["com.sap.vocabularies.UI.v1.MediaResource"];if(l1.cardinality==="*"){if(a.results&&a.results.length){o=new sap.ui.layout.HorizontalLayout().addStyleClass("sapFactsheetUtiPictureViewerOverview");for(i=0;i<a.results.length;i+=1){o.addContent(new sap.m.Image({src:a.results[i][b.Thumbnail.Url.Path],height:"85px"}));if(i===3){break;}}k=parseInt(a.__count,10);if(Number(k)){l1.facet.setQuantity(k);}l1.facet.setContent(o);l1.facet.attachPress({facet:l1.facetContent,data:a},function(e2,f2){var g2,_1,h2;t.removeAllFacetContent();d2=new sap.suite.ui.commons.UnifiedThingGroup();if(f2.facet.Label&&f2.facet.Label.String){d2.setTitle(f2.facet.Label.String);}d2.setDescription(V());if(jQuery.device.is.phone){_1="350px";}else{_1="550px";}g2=new sap.m.Carousel({height:_1});for(i=0;i<f2.data.results.length;i+=1){h2=new sap.m.Image({src:f2.data.results[i][b.Url.Path]});if(jQuery.device.is.phone){h2.addStyleClass("sapFactsheetUtiCarouselMaxImageHeightPhone");}else{h2.addStyleClass("sapFactsheetUtiCarouselMaxImageHeight");}g2.addPage(h2);}d2.setContent(g2);t.addFacetContent(d2);t.navigateToDetail();});}else{l1.facet.setQuantity(0);l1.facet.addStyleClass("sapFactsheetUtiEmptyTile");l1.facet.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.S);}}};};c2=function(o,d2){var k,i,j,e2=[],f2={},g2,h2,i2,j2,k2,l2,m2,n2;h2=function(d1,a){var i,b="";if(d1){if(d1.Path){return a[d1.Path];}else if(d1.String){return d1.String;}else if(d1.Apply.Name==="odata.concat"){for(i=0;i<d1.Apply.Parameters.length;i+=1){if(d1.Apply.Parameters[i].Type==="Path"){b=b+a[d1.Apply.Parameters[i].Value];}else if(d1.Apply.Parameters[i].Type==="String"){b=b+d1.Apply.Parameters[i].Value;}}return b;}}};f2.iCount=0;f2.aContacts=[];for(i=0;i<o.__batchResponses.length;i+=1){if(!o.__batchResponses[i].data){continue;}e2=o.__batchResponses[i].data.results;if(!e2){e2=[];e2.push(o.__batchResponses[i].data);}if(e2.length>0){g2=M[e2[0].__metadata.type]["com.sap.vocabularies.Communication.v1.Contact"];if(g2){for(j=0;j<e2.length;j+=1){i2=j2=k2="";if(g2.tel){for(k=0;k<g2.tel.length;k+=1){if(g2.tel[k].type&&g2.tel[k].type.EnumMember){l2=h2(g2.tel[k].uri,e2[j]);switch(g2.tel[k].type.EnumMember){case"com.sap.vocabularies.Communication.v1.PhoneType/voice":i2=l2?l2.replace("tel:",""):"";i2=i2?i2.replace(";ext=",""):"";break;case"com.sap.vocabularies.Communication.v1.PhoneType/cell":j2=l2?l2.replace("tel:",""):"";j2=j2?j2.replace(";ext=",""):"";break;case"com.sap.vocabularies.Communication.v1.PhoneType/fax":k2=l2?l2.replace("tel:",""):"";k2=k2?k2.replace(";ext=",""):"";break;}}}}n2=g2.email&&g2.email.address?g2.email.address:"";m2=h2(g2.photo,e2[j]);f2.iCount+=1;f2.aContacts.push({fn:h2(g2.fn,e2[j]),title:h2(g2.title,e2[j]),org:h2(g2.org,e2[j]),phone:i2,mobile:j2,fax:k2,photo:m2,email:h2(n2,e2[j]),sEntity:e2[0].__metadata.type,bExistsPhoto:m2?true:false,bUseIcon:m2?false:true,sOrder:f2.iCount});}}}}if(d2){f2.aContacts.sort(function(a,b){return a[d2]>b[d2]?1:-1;});}return f2;};G1=function(l1){return function(o){var i,a,b,k,d2,e2,f2,g2;a=c2(o,"sOrder");b=new sap.ui.layout.Grid({defaultSpan:"L6 M6 S12",hSpacing:0,vSpacing:0}).addStyleClass("sapFactsheetUtiContactsGrid");for(i=0;i<a.aContacts.length&&i<4;i+=1){e2=new sap.ui.layout.VerticalLayout();if(a.aContacts[i].photo){f2=new sap.m.Image({height:"55px",src:a.aContacts[i].photo});}else{f2=new sap.ui.core.Icon({size:"50px",src:sap.ui.core.IconPool.getIconURI("person-placeholder")}).addStyleClass("sapFactsheetUtiRelIcon");}e2.addContent(f2);e2.addStyleClass("sapFactsheetUtiContactsImage");d2=new sap.ui.layout.VerticalLayout({content:[new sap.m.Text({text:a.aContacts[i].fn}).addStyleClass("sapFactsheetUtiTextName"),new sap.m.Text({text:a.aContacts[i].title}).addStyleClass("sapFactsheetUtiTextValue")]});k=new sap.ui.layout.HorizontalLayout({content:[e2,d2]}).addStyleClass("sapFactsheetUtiContactsBox");b.addContent(k);}P1=sap.ui.getCore().byId(t.data("contactFacetId"));P1.setQuantity(a.iCount);if(i>0){P1.setContent(b);if(i<=2){g2=sap.suite.ui.commons.FacetOverviewHeight.M;}else{g2=sap.suite.ui.commons.FacetOverviewHeight.L;}P1.attachPress(function(){var i,E1=[],F1;n.clearBatch();for(i=0;i<M[e1]["com.sap.vocabularies.UI.v1.Contacts"].length;i+=1){i1=M[e1]["com.sap.vocabularies.UI.v1.Contacts"][i].AnnotationPath;i1=i1.substring(0,i1.lastIndexOf("@")-1);if(i1!==""){F1=c1+"/"+i1;}else{F1=c1;}E1.push(n.createBatchOperation(F1,"GET"));}n.addBatchReadOperations(E1);n.submitBatch(function(o){var a,h2,i2,j2,k2,l2,m2;m2=jQuery.sap.resources({url:jQuery.sap.getModulePath("sap.ushell.components.container.")+"/resources/resources.properties",language:sap.ui.getCore().getConfiguration().getLanguage()});a=c2(o,"sEntity");h2=new sap.ui.model.json.JSONModel();h2.setData(a);i2=new sap.m.ColumnListItem({type:sap.m.Inactive,unread:false,cells:[new sap.ui.layout.VerticalLayout({content:[new sap.m.Image({src:"{photo}",width:"74px",visible:"{bExistsPhoto}"}),new sap.ui.core.Icon({size:"76px",src:sap.ui.core.IconPool.getIconURI("person-placeholder"),visible:"{bUseIcon}"}).addStyleClass("sapFactsheetUtiRelIcon")]}),new sap.ui.layout.VerticalLayout({content:[new sap.m.Text({text:"{fn}"}).addStyleClass("sapFactsheetUtiContactsName"),new sap.m.Label({text:"{title}"}),new sap.m.Label({text:"{org}"})]}),new sap.m.Link({text:"{phone}",href:"tel:{phone}"}),new sap.m.Link({text:"{mobile}",href:"tel:{mobile}"}),new sap.m.Link({text:"{fax}",href:"tel:{fax}"}),new sap.m.Link({text:"{email}",href:"mailto:{email}"})]});j2=new sap.m.Table({threshold:2,inset:false,showUnread:true,scrollToLoad:true,columns:[new sap.m.Column({hAlign:sap.ui.core.TextAlign.Center,width:"12%",header:new sap.m.Text({text:""})}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Begin,header:new sap.m.Text({text:m2.getText("USHELL_FACTSHEET_NAME")})}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Begin,width:"12%",header:new sap.m.Text({text:m2.getText("USHELL_FACTSHEET_PHONE")}),minScreenWidth:"Tablet",demandPopin:true}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Begin,width:"12%",header:new sap.m.Text({text:sap.ushell.resources.i18n.getText("mobile")}),minScreenWidth:"Tablet",demandPopin:true}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Begin,width:"12%",header:new sap.m.Text({text:sap.ushell.resources.i18n.getText("fax")}),minScreenWidth:"Tablet",demandPopin:true}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Begin,width:"26%",header:new sap.m.Text({text:m2.getText("USHELL_FACTSHEET_EMAIL")}),minScreenWidth:"Tablet",demandPopin:true})],items:{path:"/aContacts",template:i2}});k2=new sap.m.ViewSettingsDialog({sortItems:[new sap.m.ViewSettingsItem({key:"fn",text:m2.getText("USHELL_FACTSHEET_NAME")}),new sap.m.ViewSettingsItem({key:"phone",text:m2.getText("USHELL_FACTSHEET_PHONE")}),new sap.m.ViewSettingsItem({key:"mobile",text:sap.ushell.resources.i18n.getText("mobile")}),new sap.m.ViewSettingsItem({key:"fax",text:sap.ushell.resources.i18n.getText("fax")}),new sap.m.ViewSettingsItem({key:"email",text:m2.getText("USHELL_FACTSHEET_EMAIL")})],confirm:function(n2){var o2,p2,q2=[];o2=n2.getParameters();p2=j2.getBinding("items");if(o2.sortItem){q2.push(new sap.ui.model.Sorter(o2.sortItem.getKey(),o2.sortDescending));p2.sort(q2);}}});j2.setHeaderToolbar(new sap.m.Toolbar({content:[new sap.m.Label(),new sap.m.ToolbarSpacer(),new sap.m.Button({icon:"sap-icon://drop-down-list",press:function(n2){k2.open();}})]}));j2.setModel(h2);l2=new sap.suite.ui.commons.UnifiedThingGroup({title:P1.getTitle(),description:V(),content:j2});t.removeAllFacetContent();t.addFacetContent(l2);t.navigateToDetail();});});}else{g2=sap.suite.ui.commons.FacetOverviewHeight.S;P1.addStyleClass("sapFactsheetUtiEmptyTile");P1.setQuantity(0);}P1.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:g2);};};for(i=0;i<g1.length;i+=1){if(g1[i]["com.sap.vocabularies.UI.v1.Map"]){i1=g1[i].Target.AnnotationPath;i1=i1.substring(0,i1.lastIndexOf("@")-1);S1="1";R1=e1;if(i1){R1=X(i1,e1,d1);S1=v(p,i1,d1);}_1="100%";if(jQuery.device.is.phone){_1="150px";}Q1=new sap.ui.vbm.VBI({width:"100%",height:_1,plugin:false,config:null});P1=new sap.suite.ui.commons.FacetOverview({title:g1[i].Label.String.trim(),heightType:jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.L,content:Q1});A.push(P1);A[A.length-1].bLoaded=false;A[A.length-1].bProcessed=false;A[A.length-1].bIsTable=false;l1={cardinality:S1,navigationPath:i1,facet:P1,facetContent:g1[i],navigationType:R1,metadata:d1,bindingPath:c1,entitySet:p};if(S1==="*"){T1=["$inlinecount=allpages","$top=1000"];}else{T1=[];}n.read(c1+"/"+i1,"",T1,true,k1(l1));t.addFacet(P1);}else{if(g1[i].Target){i1=g1[i].Target.AnnotationPath;i1=i1.substring(0,i1.lastIndexOf("@")-1);Z1=g1[i].Target.AnnotationPath.substring(g1[i].Target.AnnotationPath.lastIndexOf("@")+1);if(i1){R1=X(i1,e1,d1);P1=new sap.suite.ui.commons.FacetOverview({title:g1[i].Label.String.trim(),heightType:jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.M});S1=v(p,i1,d1);if(S1!==0){l1={cardinality:S1,navigationPath:i1,facet:P1,facetContent:g1[i],navigationType:R1,metadata:d1,bindingPath:c1,entitySet:p};if(g1[i]["com.sap.vocabularies.UI.v1.Gallery"]){if(S1==="*"){T1=["$inlinecount=allpages"];}else{T1=[];}n.read(c1+"/"+i1,"",T1,true,$1(l1));}else{A.push(P1);A[A.length-1].bLoaded=false;A[A.length-1].bProcessed=false;A[A.length-1].bIsTable=false;if(S1==="*"){T1=["$inlinecount=allpages","$top=3"];}else{T1=[];}n.read(c1+"/"+i1,"",T1,true,j1(l1),a2(l1));}t.addFacet(P1);}}else{if(Z1==="com.sap.vocabularies.UI.v1.Contacts"){P1=new sap.suite.ui.commons.FacetOverview({title:g1[i].Label.String.trim(),heightType:jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.M});t.data("contactFacetId",P1.sId);l1={facet:P1};n.clearBatch();for(j=0;j<M[e1][Z1].length;j+=1){i1=M[e1][Z1][j].AnnotationPath;i1=i1.substring(0,i1.lastIndexOf("@")-1);if(i1!==""){S1=v(p,i1,d1);if(S1==="*"){F1=c1+"/"+i1+"?$top=4"+"&$inlinecount=allpages";}else{F1=c1+"/"+i1;}}else{F1=c1;}E1.push(n.createBatchOperation(F1,"GET"));}n.addBatchReadOperations(E1);n.submitBatch(G1(l1));t.addFacet(P1);}}}}}N1=new sap.ushell.ui.footerbar.AddBookmarkButton();V1=function(){var b,i,Z1,a,k,d2={},X1,e2,f2,g2,o,h2;N1.setAppData({title:t.getTitle(),subtitle:t.getName()+" - "+t.getDescription()});N1.setEnabled(true);f2=r(p,d1,true);p1=new sap.suite.ui.commons.LinkActionSheet({showCancelButton:true,placement:sap.m.PlacementType.Top});m1=D(e,n);b=m1.split(",");for(i=0;i<b.length;i+=1){b[i]=b[i].replace("='","=","g");if(b[i].lastIndexOf("'")===b[i].length-1){b[i]=b[i].slice(0,-1);}}for(Z1 in M[e1]){if(M[e1].hasOwnProperty(Z1)){if(Z1.indexOf("com.sap.vocabularies.Common.v1.SecondaryKey")===0){a=M[e1][Z1];for(i=0;i<a.length;i+=1){k=this.getBoundContext().getProperty(a[i].PropertyPath);if(k){b.push(a[i].PropertyPath+"="+k);}}}}}for(i=0;i<b.length;i+=1){X1=b[i].substr(0,b[i].indexOf("="));e2=b[i].substr(b[i].indexOf("=")+1,b[i].length);d2[decodeURIComponent(X1)]=decodeURIComponent(e2);}o1=sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(f2,d2);o1.done(jQuery.proxy(function(i2){var i,j2;for(i=0;i<i2.length;i+=1){if(i2[i].intent.indexOf(Y)<0){j2=sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal({target:{shellHash:i2[i].intent}});p1.addItem(new sap.m.Link({text:i2[i].text,href:j2}));t.setTransactionsVisible(true);}}}));t.attachTransactionsButtonPress(function(i2){p1.openBy(i2.getParameter("caller"));});this.detachChange(V1);sap.ushell.services.AppConfiguration.setWindowTitle(t.getTitle().trim()+": "+t.getName().trim()+" ("+t.getDescription().trim()+")");t.setActionsVisible(true);U1=new sap.m.Button({text:t1.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_EMAIL_LINK"),icon:"sap-icon://email",press:function(oE){sap.m.URLHelper.triggerEmail("",t.getName(),window.location.href);}});q1=new sap.m.ActionSheet({placement:sap.m.PlacementType.Top});g2=e.substr(0,e.lastIndexOf("/")+1);for(o in n.oData){if(n.oData.hasOwnProperty(o)){g2=g2+o;h2=o.substring(o.indexOf("(")+1,o.indexOf(")"));break;}}q1.addButton(new sap.ushell.ui.footerbar.JamDiscussButton({jamData:{businessObject:{appContext:"CB",odataServicePath:e.substr(0,e.lastIndexOf("/")+1),collection:p,key:h2,name:t.getTitle(),ui_url:window.location.href}}}));q1.addButton(new sap.ushell.ui.footerbar.JamShareButton({jamData:{object:{id:window.location.href,display:new sap.m.Text({text:t.getTitle()}),share:""},externalObject:{appContext:"CB",odataServicePath:e.substr(0,e.lastIndexOf("/")+1),collection:p,key:h2,name:t.getTitle()}}}));q1.addButton(N1);q1.addButton(U1);t.attachActionsButtonPress(function(i2){q1.openBy(i2.getParameter("caller"));});A[0].bLoaded=true;A[0].bProcessed=false;c(0);};t.getElementBinding().attachChange(V1);t.attachBackAction(function(o){history.back();});t.addDelegate({onAfterRendering:function(){t._adjustFacetLayout();}});return t;};return{ThingInspector:function(a,b){try{t=I(a,b,new sap.suite.ui.commons.UnifiedThingInspector({configurationVisible:false}));}catch(e){throw e;}return t;}};}());}());};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.tools.ODataUrlTemplating')){(function(){"use strict";function P(p,t,u){this.parameter=p;this.template=t;this.semiConvertedUrl=u;this.message=" is a missing key parameter for constructing the entity url";this.toString=function(){return this.parameter+this.message;};}jQuery.sap.declare("sap.ushell.components.factsheet.tools.ODataUrlTemplating");sap.ushell.components.factsheet.tools.ODataUrlTemplating={ParameterException:P,resolve:function(t,d){var e,v,p,i,b=t.match(/{\s*[\w\.]+\s*}/g);e=t;for(i=b.length-1;i>=0;i-=1){p=b[i];v=d[p.replace(/[{}]/g,"")];if(v!==undefined){if(typeof v!=="string"){v=v[0];}v=encodeURIComponent(decodeURIComponent(v));e=e.replace(p,v);}}p=e.match(/{\s*[\w\.]+\s*}/g);if(p){jQuery.sap.log.error(" "+e);throw new this.ParameterException(p,t,e);}return e;}};})();};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.views.ThingViewer.view')){jQuery.sap.declare('sap.ushell.components.factsheet.views.ThingViewer.view');(function(){"use strict";sap.ui.jsview("sap.ushell.components.factsheet.views.ThingViewer",{getControllerName:function(){return"sap.ushell.components.factsheet.views.ThingViewer";},createContent:function(c){var e,a,E,t,v;v=this.getViewData();jQuery.sap.require("sap.ushell.components.factsheet.factory.ThingInspector");e=v.entity||v.service;if(!e){E=v.entityTemplateURI||v.template;if(E){if(typeof E!=="string"){E=E[0];}E=E.replace(/%25/g,"%");E=E.replace(/%28/g,"(");E=E.replace(/%29/g,")");E=E.replace(/%27/g,"'");E=E.replace(/%3D/g,"=");E=E.replace(/%7B/g,"{");E=E.replace(/%7D/g,"}");e=sap.ushell.components.factsheet.tools.ODataUrlTemplating.resolve(E,v);}}a=v.annotationURI||v.annotation;if(typeof e!=="string"){e=e[0];}if(typeof a!=="string"){a=a[0];}if(v["sap-system"]&&v["sap-system"][0]&&(v["sap-system"][0].substr(0,4)==="sid(")){e=e.substr(0,e.lastIndexOf("/"))+";o="+e.substr(e.lastIndexOf("/"));e=sap.ushell.Container.getService("URLParsing").addSystemToServiceUrl(e);}t=sap.ushell.components.factsheet.factory.ThingInspector(e,a);t.addStyleClass("ThingInspector");return t;}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.flp.ActionMode')){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.ActionMode");var A=function(){this.oEventBus=sap.ui.getCore().getEventBus();this.oEventBus.subscribe('launchpad','actionModeInactive',this.scrollToViewPoint,this);this.oEventBus.subscribe('launchpad','actionModeActive',this.scrollToViewPoint,this);this.viewPoint=undefined;this.init=function(m){this.oModel=m;var n=sap.ui.getCore().byId('navContainerFlp'),c=n.getCurrentPage().getViewName(),i=c=="sap.ushell.components.flp.launchpad.dashboard.DashboardContent";if(i){b(m);}};},_=function(m){var t=new sap.m.Button("ActionModeBtn",{text:sap.ushell.resources.i18n.getText("activateActionMode"),icon:'sap-icon://edit',tooltip:sap.ushell.resources.i18n.getText("activateActionMode"),press:function(){sap.ushell.components.flp.ActionMode.toggleActionMode(m,"Menu Item");}});sap.ushell.renderers.fiori2.RendererExtensions.addOptionsActionSheetButton(t,"home");if(m.getProperty("/enableHelp")){t.addStyleClass('help-id-ActionModeBtn');}},a=function(m){var f=new sap.ushell.ui.shell.ShellFloatingAction({id:"floatingActionBtn",icon:'sap-icon://edit',press:function(e){sap.ushell.components.flp.ActionMode.toggleActionMode(m,"Floating Button");},tooltip:sap.ushell.resources.i18n.getText("activateActionMode")});f.data("sap-ui-fastnavgroup","true",true);f.addEventDelegate({onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;},onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}});if(m.getProperty("/enableHelp")){f.addStyleClass('help-id-floatingActionBtn');}sap.ushell.renderers.fiori2.RendererExtensions.addFloatingActionButton(f,"home");},b=function(m){if(m.getProperty("/actionModeMenuButtonEnabled")){_(m);}if(m.getProperty("/actionModeFloatingButtonEnabled")){a(m);}},s=function(e){var c=e.target;if(!$(c).hasClass("sapUshellTileActionLayerDiv")){setTimeout($.proxy(sap.ushell.components.flp.ActionMode.deactivate(),sap.ushell.components.flp.ActionMode),0);}};A.prototype.activate=function(){var f,t;this.eventDelegateObj={ontap:s,ontouchstart:s,onmousedown:s};jQuery.sap.require("sap.m.MessageToast");sap.m.MessageToast.show(sap.ushell.resources.i18n.getText("actionModeActivated"),{duration:4000});this.calcViewPosition();this.oModel.setProperty('/tileActionModeActive',true);this.aOrigHiddenGroupsIds=sap.ushell.utils.getCurrentHiddenGroupIds(this.oModel);f=sap.ui.getCore().byId("floatingActionBtn");if(f){f.addStyleClass("sapUshellActive");f.setTooltip(sap.ushell.resources.i18n.getText("deactivateActionMode"));}t=sap.ui.getCore().byId("ActionModeBtn");if(t){t.setTooltip(sap.ushell.resources.i18n.getText("exitPersonalizationMode"));t.setText(sap.ushell.resources.i18n.getText("exitPersonalizationMode"));}this.oEventBus.publish('launchpad','actionModeActive');};A.prototype.calcViewPosition=function(){var j=jQuery('#dashboardGroups').find('.sapUshellTileContainer').not('.sapUshellHidden'),i;if(j){for(i=0;i<j.length;i++){var u=j[i],f=jQuery(u).parent().offset().top;if(f>0){var c=jQuery(u).attr("id"),g=sap.ui.getCore().byId(c),d={group:g,fromTop:f};this.viewPoint=d;return;}}}};A.prototype.scrollToViewPoint=function(){window.setTimeout(jQuery.proxy(this.oEventBus.publish,this.oEventBus,"launchpad","scrollToFirstVisibleGroup",this.viewPoint),0);};A.prototype.deactivate=function(){var t=sap.ui.getCore().byId("TileActions"),T,f;this.calcViewPosition();this.oModel.setProperty('/tileActionModeActive',false);this.oEventBus.publish("launchpad",'actionModeInactive',this.aOrigHiddenGroupsIds);if(t!==undefined){t.destroy();}f=sap.ui.getCore().byId("floatingActionBtn");if(f){f.removeStyleClass("sapUshellActive");f.setTooltip(sap.ushell.resources.i18n.getText("activateActionMode"));}T=sap.ui.getCore().byId("ActionModeBtn");if(T){T.setTooltip(sap.ushell.resources.i18n.getText("activateActionMode"));T.setText(sap.ushell.resources.i18n.getText("activateActionMode"));}};A.prototype.toggleActionMode=function(m,S){var t=m.getProperty('/tileActionModeActive');if(t){this.deactivate();}else{this.activate();sap.ui.getCore().getEventBus().publish("launchpad","enterEditMode",{source:S});}};A.prototype.activateGroupEditMode=function(g){var j=jQuery(g.getDomRef()).find('.sapUshellTileContainerContent');j.addClass("sapUshellTileContainerEditMode");};A.prototype._openActionsMenu=function(e,t){var c=this,T=t||e.getSource(),l=sap.ushell.Container.getService("LaunchPage"),d=[],o=sap.ui.getCore().byId("TileActions"),i,n,B,f,g,h;if(T){g=T.getBindingContext().getObject().object;d=l.getTileActions(g);}c.oTileControl=T;jQuery(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");var j=jQuery(e.getSource().getDomRef()).find(".sapUshellTileActionLayerDiv");j.addClass("sapUshellTileActionLayerDivSelected");if(o===undefined){o=new sap.m.ActionSheet("TileActions",{placement:sap.m.PlacementType.Auto,afterClose:function(){$(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");var E=sap.ui.getCore().getEventBus();E.publish("dashboard","actionSheetClose",c.oTileControl);}});}else{o.destroyButtons();}if(d.length===0||T.oParent.getProperty("isGroupLocked")){n=new sap.m.Button({text:sap.ushell.resources.i18n.getText("tileHasNoActions"),enabled:false});o.addButton(n);}else{for(i=0;i<d.length;i++){f=d[i];h=function(f){return function(){c._handleActionPress(f);};}(f);B=new sap.m.Button({text:f.text,icon:f.icon,press:h});o.addButton(B);}}o.openBy(e.getSource());};A.prototype._handleActionPress=function(o){if(o.press){o.press.call();}else if(o.targetURL){if(o.targetURL.indexOf("#")==0){hasher.setHash(o.targetURL);}else{window.open(o.targetURL,'_blank');}}else{sap.m.MessageToast.show("No Action");}};sap.ushell.components.flp.ActionMode=new A();}());};if(!jQuery.sap.isDeclared('sap.ushell.components.flp.ComponentKeysHandler')){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.ComponentKeysHandler");var c=function(){this.aTileWrapperClasses=['.sapUshellTile','.sapUshellLinkTile'];};c.prototype={keyCodes:jQuery.sap.KeyCodes,handleCatalogKey:function(){this.oRouter.navTo("catalog");},handleHomepageKey:function(){this.oRouter.navTo("home");},getNumberOfTileInRow:function(p,i){var j=jQuery(i?".sapUshellLinkTile:first":".sapUshellTile:first");if(!j.length){return false;}var a=sap.ui.getCore();var t=a.byId(j.attr('id'));var f=!i&&(t.getLong()===true)?2:1;var b;if(p==="catalog"){b=jQuery("#catalogTiles .sapUshellTileContainerContent").width();}else{b=jQuery("#dashboardGroups").width();}var d=j.outerWidth(true)/f;var n=Math.floor(b/d);return n;},goToTileContainer:function(k){var i=this.oModel.getProperty('/tileActionModeActive');if(i){sap.ushell.components.flp.ComponentKeysHandler.goToEdgeTileContainer('first');}else{sap.ushell.components.flp.ComponentKeysHandler.goToEdgeTile('first');}return true;},goToEdgeTile:function(s){var t=jQuery(".sapUshellTile:visible:not('.sapUshellPlusTile')")[s]();if(!t.length){return false;}this.setTileFocus(t);return true;},goToEdgeTileContainer:function(s){var j=jQuery('.sapUshellTileContainer:visible')[s]();if(!j.length){return false;}this.setTileContainerSelectiveFocus(j);return true;},goToFirstTileOfSiblingGroup:function(s,e){e.preventDefault();var a=jQuery(":focus").closest(".sapUshellDashboardGroupsContainerItem");if(!a.length){return;}var n=a[s+"All"](".sapUshellDashboardGroupsContainerItem:has(.sapUshellTile:visible):not(.sapUshellCloneArea)");var t='first';if(!n.length){n=a;t=(s==="next")?'last':'first';}else{n=n.first();}var j=n.find(".sapUshellTile:visible:not('.sapUshellPlusTile')")[t]();this.moveScrollDashboard(j);return false;},goToFirstTileOfSiblingGroupInCatalog:function(s,e){e.preventDefault();var j=this.getFocusOnTile(jQuery(":focus"));if(!j){return;}var a;if(s=="next"){var i=j.nextAll("h3").length?false:true;if(!i){a=j.nextAll("h3").first().nextAll().filter(":visible").first();}else{a=j.nextAll(".sapUshellTile").last();}}else{var b=j.prevAll("h3").length===1?true:false;if(!b){a=jQuery(j.prevAll("h3")[1]).next();}else{a=j.prevAll("h3").last().next();}}this.setTileFocus(a);this.moveScrollCatalog(a);return false;},swapTwoTilesInGroup:function(g,f,s){var a=g.getBindingContext().getObject();var b=a.tiles.indexOf(f.getBindingContext().getObject());var d=a.tiles.indexOf(s.getBindingContext().getObject());var e=a.tiles.splice(b,1,null);var h=a.tiles.splice(d,1,e[0]);a.tiles.splice(b,1,h[0]);var i=g.getBindingContext().getPath();g.getModel().setProperty(i,a);},moveTileInGroup:function(g,f,s){if(this.oModel.getProperty("/personalization")){var a=g.getBindingContext().getObject();var b=a.tiles.indexOf(f.getBindingContext().getObject());var d=a.tiles.indexOf(s.getBindingContext().getObject());var e=a.tiles.splice(b,1);a.tiles.splice(d,0,e[0]);var h=g.getBindingContext().getPath();g.getModel().setProperty(h,a);}},moveTileToDifferentGroup:function(s,d,a,b){if(this.oModel.getProperty("/personalization")){if(s.getIsGroupLocked()||d.getIsGroupLocked()){return;}var e=s.getBindingContext().getObject();var f=d.getBindingContext().getObject();var t=e.tiles.indexOf(a.getBindingContext().getObject());if(b==="left"||b==="up"||b==="down"){f.tiles.push(e.tiles[t]);}if(b==="right"){f.tiles.splice(0,0,e.tiles[t]);}e.tiles.splice(t,1);var g=d.getBindingContext().getPath();d.getModel().setProperty(g,f);var h=s.getBindingContext().getPath();s.getModel().setProperty(h,e);var i=d.getTiles();if(b==="left"||b==="up"||b==="down"){return i[i.length-1];}else{return i[0];}}},moveTile:function(d,s){var j=jQuery(".sapUshellDashboardView"),a=sap.ui.getCore().byId(j.attr("id"));a.markDisableGroups();setTimeout(function(){a.unmarkDisableGroups();},300);if(this.oModel.getProperty("/personalization")){if(typeof s==="undefined"){s=false;}var i=this.getGroupAndTilesInfo();if(!i||i.group.getProperty('isGroupLocked')){return;}var m=true,I,n=this.getNextTile(d,i,I,m);if(!n){return;}else{var b=n.getParent();}if(s){this.swapTwoTilesInGroup(i.group,i.curTile,n);}else{if(b===i.group){this.moveTileInGroup(i.group,i.curTile,n);}else{n=this.moveTileToDifferentGroup(i.group,b,i.curTile,d);}}if(sap.ushell.Layout&&sap.ushell.Layout.isInited){sap.ushell.Layout.reRenderGroupLayout(i.group);}setTimeout(function(){if(n){this.setTileFocus(jQuery(n.getDomRef()));}}.bind(this),100);}},getNextUpDownTileInCatalog:function(d,a){var n,b;var o=parseFloat(a.curTile.getDomRef().offsetLeft);if(d=="down"){n=a.tiles.slice(a.curTileIndex+1,a.curTileIndex+(a.sizeOfLine*2));}else{var s=a.curTileIndex-(a.sizeOfLine*2);s=(s>0)?s:0;n=a.tiles.slice(s,a.curTileIndex-1).reverse();}for(var i=0,l=n.length;i<l;i++){var t=n[i].getDomRef();var e=parseFloat(t.offsetLeft);var w=parseFloat(t.offsetWidth);var f=e+w;if(e<=o&&f>=o){b=n[i];break;}}return b;},getNextUpDownTileWithLayout:function(d,i){var n,a;var t=!i.curTile.isLink&&i.curTile.getTall()?2:1;var b=d==="down"?(t):-1;var e=!i.tiles.length&&!i.links.length;var I=i.group.getIsGroupLocked();var f=jQuery(i.curTile.getDomRef()).hasClass('sapUshellPlusTile');var l=i.group.getLinks();var g=sap.ushell.Layout.organizeGroup(i.curTile.isLink?i.links:i.tiles,i.curTile.isLink);var h=sap.ushell.Layout.getTilePositionInMatrix(i.curTile,g);var j=this.isLastLineFull(g);var k=this.oModel.getProperty('/tileActionModeActive');if(!h&&!e&&!f){return;}if(!g[h.row+b]){if(k&&!I&&!f&&j&&d==="down"){return i.group.oPlusTile;}if(!i.curTile.isLink&&l.length&&d==='down'){return l[0];}if(i.curTile.isLink&&i.tiles.length&&d==='up'){return i.tiles[0];}h=e||f?{row:0,col:0}:h;a=this.getNextGroup(d,i);if(!a){return;}e=!a.getTiles().length&&!a.getLinks().length;if(!e){var F=this._getAggregationToFocusInNextGroup(a,d);var N=this._isNextTileLink(F);g=sap.ushell.Layout.organizeGroup(F,N);b=0;h.row=d==="down"?0:g.length-1;}}if(e&&I){return undefined;}if(e){return a.oPlusTile;}if(typeof g[h.row+b][h.col]==="object"&&!e){n=g[h.row+b][h.col];}else{n=this.getNextUpDownTile(g,h.row+b,h.col,d);}return n;},_isNextTileLink:function(t){if(t&&t.length){var j=jQuery(t[0].getDomRef());return j.hasClass("sapUshellLinkTile");}return false;},_getAggregationToFocusInNextGroup:function(n,d){if(d==="down"||d==="right"){if(n.getTiles().length){return n.getShowPlaceholder()?[].concat(n.getTiles(),n.oPlusTile):n.getTiles();}if(n.getLinks().length){return n.getLinks();}}else if(d==="up"||d==="left"){if(n.getLinks().length){return n.getLinks();}if(n.getTiles().length){return n.getShowPlaceholder()?[].concat(n.getTiles(),n.oPlusTile):n.getTiles();}}},isLastLineFull:function(l){var m=this.getNumberOfTileInRow(),a=l[l.length-1].filter(Boolean);return a.length===m;},getNextUpDownTile:function(l,r,a,d){var n=r,b=l.length,e,f=d==="up"?-1:1;while((n>=0&&n<b)&&!e){if(typeof l[n][a]!=="object"){e=l[n][a];}n=n+f;}if(e){return;}n=r;while((typeof l[n][a]!=="object")&&a>=0){a--;}return l[n][a];},getNextTile:function(d,a,I,m){var n,b,e,s,t,l,w,f,o,g=sap.ui.getCore().getConfiguration().getRTL()?-1:1,h=!a.tiles.length,j=d==="right"?1:-1;if(a.pageName==='catalog'){if(d=='right'||d=='left'){n=!h?a.tiles[a.curTileIndex+(g*j)]:undefined;return n;}if(a.curTileIndex==='0'&&d==='up'){return undefined;}b=this.whichTileRow(a.curTileIndex,a);o=parseFloat(a.curTile.getDomRef().offsetLeft);if(d=="down"){e=a.tiles.slice(a.curTileIndex+1,a.curTileIndex+(a.sizeOfLine*2));}else{s=(s>0)?s:0;e=a.tiles.slice(s,a.curTileIndex).reverse();}for(var i=0,k=e.length;i<k;i++){t=e[i].getDomRef();l=parseFloat(t.offsetLeft);w=parseFloat(t.offsetWidth);f=l+w;if(l<=o&&f>=o){n=e[i];return n;}}if(this.nextRowIsShorter(d,b,a)){n=this.getNextTileInShorterRow(d,b,a);return n;}}else{if(d==="left"||d==="right"){var p=a.curTileIndex+(g*j);var F=a.curTile.isLink?a.links:a.tiles;if(F[p]&&!(m&&F[p].getDomRef().className.indexOf("sapUshellPlusTile")>0)){n=F.length?F[p]:undefined;}if(n){return n;}if(d==="right"&&!a.curTile.isLink&&a.links.length){return a.links[0];}if(d==="left"&&a.curTile.isLink&&a.tiles.length){return a.group.getShowPlaceholder()?a.group.oPlusTile:a.tiles[a.tiles.length-1];}var q=this.getNextGroup(d,a);if(!q){return;}else{var r=this._getAggregationToFocusInNextGroup(q,d);if(r&&r.length){var u=r.length-1;if(d==="right"){n=r[g===1?0:u];}else{n=r[g===1?u:0];}}else{n=q.oPlusTile;}}}if(d==="down"||d==="up"){if(a.pageName==="catalog"){n=this.getNextUpDownTileInCatalog(d,a);}else if(sap.ushell.Layout&&sap.ushell.Layout.isInited){n=this.getNextUpDownTileWithLayout(d,a,I);}}}return n;},getNextTileInShorterRow:function(d,a,i){var l=d==='down'?this.getLastTileIdInRow(i,a+1):this.getLastTileIdInRow(i,a-1);return i.tiles[l];},getLastTileIdInRow:function(a,l){var b=0;for(var i=0;i<a.rowsData.length;i++){b+=a.rowsData[i];if(i===l){break;}}return b-1;},nextRowIsShorter:function(d,a,i){if(d==='down'&&a!=i.rowsData.length-1){return i.rowsData[a]>i.rowsData[a+1];}if(d==='up'&&a!=0){return i.rowsData[a]>i.rowsData[a-1];}else{return false;}},getNextGroup:function(d,i){var n,g=i.group.getParent().getGroups(),a=sap.ui.getCore().getConfiguration().getRTL(),b=g.indexOf(i.group);if(d==="right"||d==="left"){if(a){d=(d==="right")?"up":"down";}else{d=(d==="right")?"down":"up";}}if(d==="down"||d==="up"){var e=d==="up"?-1:1;n=g[b+e];if(!n){return;}while(!n.getVisible()&&(b>=0&&b<g.length)){b=b+e;n=g[b];}}if(!n.getVisible()){return;}return n;},getGroupAndTilesInfo:function(j,p){if(!j){j=this.getFocusOnTile(jQuery(":focus"));}if(!j.length){return;}var a=sap.ui.getCore().byId(j.attr('id'));var g=a.getParent();var r;var t;var l;a.isLink=j.hasClass('sapUshellLinkTile');if(p=="catalog"){r=this.getCatalogLayoutData();t=[];var b=jQuery('#catalogTiles').find('.sapUshellTile:visible');for(var i=0;i<b.length;i++){t.push(sap.ui.getCore().byId(b[i].id));}}else{t=g.getTiles();l=g.getLinks();if(g.getShowPlaceholder()&&!a.isLink){t.push(g.oPlusTile);}}var s=this.getNumberOfTileInRow(p,a.isLink);return{pageName:p,curTile:a,curTileIndex:a.isLink?l.indexOf(a):t.indexOf(a),tiles:t,links:l,sizeOfLine:s,group:g,rowsData:r};},getCatalogLayoutData:function(){var j=jQuery('#catalogTiles .sapUshellInner').children(':visible'),m=this.getNumberOfTileInRow('catalog'),r=[],a=0;for(var i=1;i<j.length;i++){if(jQuery(j[i]).hasClass("sapUshellTile")){a++;}if(jQuery(j[i]).hasClass("sapUshellHeaderTile")){r.push(a);a=0;}if(a>=m){r.push(a);a=0;}}if(a>0){r.push(a);}return r;},whichTileRow:function(a,b){var t=0,i;for(i=0;i<b.rowsData.length;i++){t+=b.rowsData[i];if(a<t){return i;}}},goToSiblingElementInTileContainer:function(d,j,p){var a=j.closest('.sapUshellTileContainer'),b,e,f;if(b=this.getFocusTileContainerBeforeContent(j)){if(d==='up'||d==="left"){this._goToNextTileContainer(b,d);}else{f=a.find('.sapUshellTileContainerHeader:first');this.setTabIndexOnTileContainerHeader(f);f.focus();}return;}if(b=this.getFocusTileContainerHeader(j)){if(d==='up'){this.setTabIndexOnTileContainerHeader(f);if(!this._goToTileContainerBeforeContent(a)){this._goToNextTileContainer(b,d);}}else if(d==="down"){e=a.find('.sapUshellTile:first');if(e.length){this.setTileFocus(e);}else{this._goToNextTileContainer(b,d);}}else if(d==="left"){if(j.hasClass("sapUshellTileContainerHeader")){if(!this._goToTileContainerBeforeContent(a)){this._goToNextTileContainer(b,"left");}}else{f=j.closest(".sapUshellTileContainerHeader");f.focus();}}else if(d==="right"){var g=j.hasClass("sapMInputBaseInner");if(!g){e=a.find('.sapUshellTile:first');if(e.length){this.setTileFocus(e);}else{this._goToNextTileContainer(b,"down");}}}return;}if(b=this.getFocusOnTile(j)){this.goFromFocusedTile(d,b,p,true);return;}if(b=this.getFocusOnTileContainerAfterContent(j)){if(d==='up'||d==="left"){this._goToFirstTileInTileContainer(b);}else{this._goToNextTileContainer(b,d);}}},_goToNextTileContainer:function(j,d){var a=j.closest('.sapUshellTileContainer'),A=jQuery('.sapUshellTileContainer:visible'),n=(d==='down')?1:-1,b,e;b=jQuery(A[A.index(a)+n]);if(b){e=b.find('.sapUshellTileContainerHeader');if(d==='down'){if(!this._goToTileContainerBeforeContent(b)){this.setTabIndexOnTileContainerHeader(e);this.setTileContainerSelectiveFocus(b);}}else{if(this._goToTileContainerAfterContent(b)){return;}if(d==='up'){if(!this._goToFirstTileInTileContainer(b)){this.setTabIndexOnTileContainerHeader(e);e.focus();}}else if(d==='left'){if(!this._goToLastTileInTileContainer(b)){this.setTabIndexOnTileContainerHeader(e);e.focus();}}}}},_goToLastTileInTileContainer:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=a.find('.sapUshellTile:last'),d=a.find('.sapUshellLinkTile:last');if(!d.length&&!b.length){return false;}this.setTileFocus(d.length?d:b);return true;},_goToFirstTileInTileContainer:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=jQuery(a.find('.sapUshellTile').get(0));if(b.length){this.setTileFocus(b);return true;}else{return false;}},_goToTileContainerBeforeContent:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=a.find('.sapUshellTileContainerBeforeContent button:visible');if(b.length){b.focus();return true;}else{return false;}},_goToTileContainerAfterContent:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=a.find('.sapUshellTileContainerAfterContent button:visible');if(b.length){b.focus();return true;}else{return false;}},goFromFocusedTile:function(d,j,p,i){var a=this.getGroupAndTilesInfo(j,p),n,b,e,f,g,I;if(!a){return;}n=this.getNextTile(d,a,i);if(i){b=jQuery(j).closest('.sapUshellTileContainer');if(!n){if(d==='down'||d==='right'){g=jQuery(b).find('.sapUshellTileContainerAfterContent button:visible');g.focus();return;}if(d==='up'){this.setTabIndexOnTileContainerHeader(b.find('.sapUshellTileContainerHeader'));this.setTileContainerSelectiveFocus(b);return;}if(d==='left'){f=b.find('.sapUshellTileContainerHeader');f.focus();}}else{e=jQuery(n.getDomRef()).closest('.sapUshellTileContainer');I=b.length&&e.length&&(b.attr('id')===e.attr('id'));if(I){this.setTileFocus(jQuery(n.getDomRef()));}else{if(d==='down'||d==='right'){if(!this._goToTileContainerAfterContent(b)){this.setTabIndexOnTileContainerHeader(e.find('.sapUshellTileContainerHeader'));this.setTileContainerSelectiveFocus(e);}}else if(d==='up'||'left'){f=b.find('.sapUshellTileContainerHeader');this.setTabIndexOnTileContainerHeader(f);f.focus();}}}}else if(n){this.setTileFocus(jQuery(n.getDomRef()));}},deleteTile:function(j){var t=j.attr("id");if(!t){return;}var T=sap.ui.getCore().byId(t);var a=this.getGroupAndTilesInfo(j);var n=this.getNextTile("right",a);if(!n||(n&&n.getParent()!=a.group)){n=this.getNextTile("left",a);}if(!n||(n&&n.getParent()!=a.group)){n=a.group.oPlusTile;}if(n){setTimeout(function(g,b){var d=g.getTiles();if(!d.length){if(a.group.getProperty('defaultGroup')){var f=this.getNextGroup("right",a);n=f.getTiles()[0]||f.oPlusTile;this.setTileFocus(jQuery(n.getDomRef()));}this.setTileFocus(jQuery(g.oPlusTile.getDomRef()));return;}var n;for(var i=0;i<d.length;i++){if(d[i].getProperty('uuid')==b){n=d[i];break;}}if(n){this.setTileFocus(jQuery(n.getDomRef()));}}.bind(this,a.group,n.getProperty('uuid')),100);}var e=sap.ui.getCore().getEventBus();e.publish("launchpad","deleteTile",{tileId:T.getUuid()});},setTabIndexOnTileContainerHeader:function(j){jQuery(".sapUshellTileContainerHeader").attr("tabindex",-1);jQuery(".sapUshellTileContainerHeader .sapUshellContainerTitle").attr("tabindex",-1);jQuery(".sapUshellTileContainerHeader .sapUshellContainerHeaderActions button").attr("tabindex",-1);if(j){var a=j.find('.sapUshellContainerTitle:first'),b=j.find('.sapUshellContainerHeaderActions:first');j.attr('tabindex',0);a.attr('tabindex',0);b.find('button').attr('tabindex',0);}},setTileContainerSelectiveFocus:function(j){var a=j.find('.sapUshellTileContainerBeforeContent button'),b=j.find('.sapUshellTileContainerHeader:first'),B=a.length&&a.is(":visible");if(B){a.focus();}else if(b.length){this.setTabIndexOnTileContainerHeader(b);b.focus();}},setTileFocus:function(j){if(!j.hasClass('sapUshellPlusTile')){var a=this.oModel.getProperty("/currentViewName"),b;b=j.find('[tabindex]');if(a==="catalog"){var h=sap.ushell.components.flp.ComponentKeysHandler;h.setFocusOnCatalogTile(b.eq(0));}if(!b.length){j.attr("tabindex","0");b=j.find('[tabindex], a').andSelf().filter('[tabindex], a');}b.filter('[tabindex!="-1"]');jQuery.each(this.aTileWrapperClasses,function(i,t){var d=b.eq(0).closest(t);j=d.length?d:b.eq(0);return!(d.length);});}j.focus();},setFocusOnCatalogTile:function(j){var p=jQuery(".sapUshellTile[tabindex=0]"),a,v,b;if(p.length){jQuery(".sapUshellTileContainerContent").find('[tabindex*=0]').attr("tabindex",-1);a=p.find('[tabindex], a').andSelf().filter('[tabindex], a');a.attr("tabindex",-1);}if(!j){v=jQuery(".sapUshellTile:visible");if(v.length){b=jQuery(v[0]);j=b.find('[tabindex], a').eq(0);}else{return;}}j.closest(".sapUshellTile").attr("tabindex",0);j.attr("tabindex",0);j.closest(".sapUshellTile").find("button").attr("tabindex",0);},moveScrollDashboard:function(j){var a=j.closest(".sapUshellTileContainer")[0].id,y=-1*(document.getElementById('dashboardGroups').getBoundingClientRect().top)+document.getElementById(a).getBoundingClientRect().top;jQuery('.sapUshellDashboardView').animate({scrollTop:y},200,function(){this.setTileFocus(j);}.bind(this));},moveScrollCatalog:function(j){var a=jQuery("#catalogTilesPage-cont");var t=jQuery('#shell-hdr').height()+jQuery('.sapMPageHeader').height()+(parseInt(jQuery('.sapMPanelHdr').css('margin-top'),10)*2);var y=j.offset().top+a.scrollTop()-t;sap.ui.getCore().byId("catalogTilesPage").scrollTo(y,200);},goToNearbySidePanelGroup:function(d,j){var s=(d=="up")?"prev":"next";var n=j[s]();while(n.css('display')=="none"){n=n[s]();}if(!n){return;}n.focus();},deleteSidePanelGroup:function(j){var a=sap.ui.getCore();var g=a.byId(j.attr('id'));var r=g.getRemovable();var e=a.getEventBus();e.publish("launchpad",r?"deleteGroup":"resetGroup",{groupId:g.getGroupId()});},moveGroupFromDashboard:function(d,j){var a,t=jQuery(".sapUshellDashboardGroupsContainerItem"),i,b;a=j.closest(".sapUshellDashboardGroupsContainerItem");i=t.index(a);b=d=="up"||d=="left"?i-1:i+1;this.moveGroup(i,b);},moveGroup:function(f,t){var g=jQuery(".sapUshellDashboardGroupsContainerItem"),n=jQuery(".sapUshellDisableDragAndDrop").length;if(t<0||t>=g.length||t<n){return;}var a=sap.ui.getCore();var d={fromIndex:f,toIndex:t};var b=a.getEventBus();b.publish("launchpad","moveGroup",d);setTimeout(function(){var e=jQuery(".sapUshellTileContainerHeader")[t];this.setTabIndexOnTileContainerHeader(jQuery(e));jQuery(e).focus();}.bind(this),100);},goToEdgeSidePanelGroup:function(s){var j=jQuery(".sapUshellGroupLI");j[s]().focus();},getFocusGroupFromSidePanel:function(j){var a=j.closest(".sapUshellGroupLI");return a.length?a:false;},getFocusGroupFromDashboard:function(j){var i=j.closest('.sapUshellTileContainerHeader').length&&j[0].tagName==='H2';return i?j:false;},getFocusTileContainerBeforeContent:function(j){var a=j.closest('.sapUshellTileContainerBeforeContent');return a.length?a:false;},getFocusTileContainerHeader:function(j){var a=j.closest('.sapUshellTileContainerHeader');return a.length?a:false;},getFocusOnTileContainerAfterContent:function(j){var a=j.closest('.sapUshellTileContainerAfterContent');return a.length?a:false;},getFocusOnTile:function(j){var a;jQuery.each(this.aTileWrapperClasses,function(i,t){var b=j.closest(t);a=b.length?b:false;return!(a);});return a;},getFocusOnCatalogPopover:function(j){var a=j.closest(".sapMPopover");return a.length?a:false;},addGroup:function(j){var a=sap.ui.getCore();var b=a.byId(j.attr('id'));b.firePress();},renameGroup:function(){var j=jQuery(":focus");var a=this.getFocusGroupFromDashboard(j);if(a){a.click();}},upDownButtonsHandler:function(d,p){var j=jQuery(":focus"),a=this.getFocusGroupFromSidePanel(j);this.goFromFocusedTile(d,a,p);},arrowsButtonsHandler:function(d,p){var j,a=jQuery(":focus"),i=this.oModel.getProperty('/tileActionModeActive');if((j=this.getFocusGroupFromSidePanel(a))&&(d==="up"||d==="down")){this.goToNearbySidePanelGroup(d,j);}else{if(i){if(!a.hasClass('sapMInputBaseInner')){this.goToSiblingElementInTileContainer(d,a,p);}}else{this.goFromFocusedTile(d,j,p);}}},homeEndButtonsHandler:function(s,e){var j=jQuery(":focus"),a=this.getFocusGroupFromSidePanel(j);if(j.closest("#dashboardGroups").length||j.closest("#catalogTiles").length){e.preventDefault();this.goToEdgeTile(s);return;}if(a&&a[0].id==j[0].id){e.preventDefault();this.goToEdgeSidePanelGroup(s);return;}},deleteButtonHandler:function(){if(this.oModel.getProperty("/personalization")&&this.oModel.getProperty("/tileActionModeActive")){var j,a=jQuery(":focus");if(j=this.getFocusOnTile(a)){if(!j.hasClass('sapUshellLockedTile')&&!j.hasClass('sapUshellPlusTile')){this.deleteTile(j);}return;}if(j=this.getFocusGroupFromSidePanel(a)){if(!j.hasClass('sapUshellEditing')&&!j.hasClass("sapUshellDefaultGroupItem")&&!j.hasClass("sapUshellTileContainerLocked")){this.deleteSidePanelGroup(j);return;}}}},ctrlPlusArrowKeyButtonsHandler:function(s){var j,a=jQuery(":focus");if(j=this.getFocusOnTile(a)){this.moveTile(s,false,j);return;}if(j=this.getFocusTileContainerHeader(a)){var b=j.closest('.sapUshellTileContainerContent');if(b.hasClass('sapUshellTileContainerDefault')||b.hasClass('sapUshellTileContainerLocked')){return;}else{this.moveGroupFromDashboard(s,j);}}},spaceButtonHandler:function(e){var j,a=jQuery(":focus");if(j=this.getFocusGroupFromSidePanel(a)){j.click();return false;}},goToFirstCatalogTile:function(){var h=sap.ushell.components.flp.ComponentKeysHandler;var f=jQuery('#catalogTiles .sapUshellTile:visible:first');h.setTileFocus(f);},goToFirstCatalogHeaderItem:function(){var n=jQuery("#catalogTilesPage header button")[0];n.focus();},handleFocusOnMe:function(k,f){var h=sap.ushell.components.flp.ComponentKeysHandler;if(h.oModel.getProperty("/currentViewName")==="home"){if(f){if(k.shiftKey){h.goToTileContainer(k);}else{var j=jQuery(".sapUshellGroupLI:first:visible");if(!j.length){h.goToTileContainer(k);}else{j.focus();}}}else{h.mainKeydownHandler(k);h.dashboardKeydownHandler(k);}}else{if(f){if(k.shiftKey){h.goToFirstCatalogTile();}else{h.goToFirstCatalogHeaderItem();}}else{h.mainKeydownHandler(k);h.catalogKeydownHandler(k);}}},groupHeaderNavigation:function(){var j=jQuery(":focus"),a;if(j.hasClass("sapUshellTileContainerHeader")){a=j.find(".sapUshellContainerTitle");a.focus();}else if(a=j.closest(".sapUshellTileContainerHeader")){a.focus();}},handleShortcuts:function(e){var h=sap.ushell.components.flp.ComponentKeysHandler;if(e.altKey){switch(String.fromCharCode(e.keyCode)){case'C':if(h.oModel.getProperty("/personalization")){h.handleCatalogKey();}break;case'H':h.handleHomepageKey();break;}}},mainKeydownHandler:function(e){e=e||window.event;switch(e.keyCode){case this.keyCodes.SPACE:this.spaceButtonHandler(e);break;case this.keyCodes.HOME:this.homeEndButtonsHandler("first",e);break;case this.keyCodes.END:this.homeEndButtonsHandler("last",e);break;}},catalogKeydownHandler:function(k){var h=sap.ushell.components.flp.ComponentKeysHandler;var p="catalog";switch(k.keyCode){case h.keyCodes.ARROW_UP:h.upDownButtonsHandler("up",p);break;case h.keyCodes.ARROW_DOWN:h.upDownButtonsHandler("down",p);break;case h.keyCodes.ARROW_RIGHT:h.goFromFocusedTile("right","",p);break;case h.keyCodes.ARROW_LEFT:h.goFromFocusedTile("left","",p);break;case h.keyCodes.PAGE_UP:h.goToFirstTileOfSiblingGroupInCatalog('prev',k);break;case h.keyCodes.PAGE_DOWN:h.goToFirstTileOfSiblingGroupInCatalog('next',k);break;}},dashboardKeydownHandler:function(k){var h=sap.ushell.components.flp.ComponentKeysHandler;switch(k.keyCode){case h.keyCodes.F2:h.renameGroup();break;case h.keyCodes.F7:h.groupHeaderNavigation();break;case h.keyCodes.DELETE:h.deleteButtonHandler();break;case h.keyCodes.ARROW_UP:if(k.ctrlKey===true){h.ctrlPlusArrowKeyButtonsHandler("up");}else{h.arrowsButtonsHandler("up");}break;case h.keyCodes.ARROW_DOWN:if(k.ctrlKey===true){h.ctrlPlusArrowKeyButtonsHandler("down");}else{h.arrowsButtonsHandler("down");}break;case h.keyCodes.ARROW_RIGHT:if(k.ctrlKey===true){h.ctrlPlusArrowKeyButtonsHandler("right");}else{h.arrowsButtonsHandler('right');}break;case h.keyCodes.ARROW_LEFT:if(k.ctrlKey===true){h.ctrlPlusArrowKeyButtonsHandler("left");}else{h.arrowsButtonsHandler('left');}break;case h.keyCodes.PAGE_UP:h.goToFirstTileOfSiblingGroup('prev',k);break;case h.keyCodes.PAGE_DOWN:h.goToFirstTileOfSiblingGroup('next',k);break;}return true;},init:function(m,r){this.oModel=m;this.oRouter=r;}};sap.ushell.components.flp.ComponentKeysHandler=new c();}());};if(!jQuery.sap.isDeclared('sap.ushell.components.flp.CustomRouter')){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.CustomRouter");sap.ui.core.routing.Router.extend("sap.ushell.components.flp.CustomRouter",{constructor:function(){sap.ui.core.routing.Router.apply(this,arguments);this.attachRouteMatched(this._onHandleRouteMatched,this);},navTo:function(){if(!this._bIsInitialized){this.initialize();}sap.ui.core.routing.Router.prototype.navTo.apply(this,arguments);},destroy:function(){sap.ui.core.routing.Router.prototype.destroy.apply(this,arguments);},_onHandleRouteMatched:function(e){var p=e.getParameters(),t=sap.ui.getCore().byId(p.config.controlId);var r=this.getTarget(p.config.target).display();t.to(r.oTargetParent);}});})();};if(!jQuery.sap.isDeclared('sap.ushell.components.flp.FLPAnalytics')){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.FLPAnalytics");var o=["appOpened","deleteTile","createGroup","enterEditMode","catalogTileClick","dashboardTileClick","dashboardTileLinkClick"],E=sap.ui.getCore().getEventBus(),t=this,l={};function s(c){var m=sap.ushell.services.AppConfiguration.getMetadata();l[c]={};l[c].startTime=new Date();l[c].title=m.title;}function a(c){var d=0;try{d=(new Date()-l[c].startTime)/1000;sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Time in Application (sec)",d,[l[c].title]);}catch(e){jQuery.sap.log.warning("Duration in application "+c+" could not be calculated",null,"sap.ushell.components.flp.FLPAnalytics");}}function h(c,d,D){var A=window.location.hash.substr(1),f;window.swa.custom1={ref:A};switch(d){case'appOpened':s(A);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Opened","First Load",[l[A].title]);E.unsubscribe("launchpad","appOpened",h);break;case'bookmarkTileAdded':f=window.document.title;sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Personalization","Save as Tile",[f,D.group.title,D.group.id,D.tile.title]);break;case'enterEditMode':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Personalization","Enter Action Mode",[D.source]);break;case'catalogTileClick':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Catalog",[]);break;case'dashboardTileClick':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Homepage",[]);break;case'dashboardTileLinkClick':window.swa.custom1={ref:D.targetHash.substr(1)};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Tile Group Link",[]);break;default:break;}}function b(c){var f,T,d;f=c.getParameter("from").getId().replace("application-","").replace("applicationShellPage-","");window.swa.custom1={ref:f};a(f);d=c.getParameter("to");T=d.getId().replace("application-","").replace("applicationShellPage-","");s(T);window.swa.custom1={ref:T};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Opened","Through navContainer",[l[T].title]);}jQuery(window).unload(function(c){var d=window.location.hash.substr(1);a(d);});try{sap.ui.getCore().byId('navContainer').attachAfterNavigate(b,t);}catch(e){jQuery.sap.log.warning("Failure when subscribing to navContainer 'AfterNavigate' event",null,"sap.ushell.components.flp.FLPAnalytics");}E.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",h,t);o.forEach(function(c,i,d){E.subscribe("launchpad",c,h,t);});})();};if(!jQuery.sap.isDeclared('sap.ushell.components.flp.launchpad.PagingManager')){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.launchpad.PagingManager");sap.ui.base.EventProvider.extend("sap.ushell.components.flp.launchpad.PagingManager",{metadata:{publicMethods:["setElementClass","setContainerSize","getNumberOfAllocatedElements","moveToNextPage","getTileHeight"]},constructor:function(i,s){sap.ushell.components.flp.launchpad.getPagingManager=jQuery.sap.getter(this.getInterface());this.currentPageIndex=0;this.containerHeight=s.containerHeight||0;this.containerWidth=s.containerWidth||0;this.ElementClass=s.elementClassName||"";this.tileHeight=0;},getTileHeight:function(){return this.tileHeight;},setElementClass:function(c){this.ElementClass=c;},setContainerSize:function(n,a){var t=this.getNumberOfAllocatedElements();this.containerHeight=n;this.containerWidth=a;this._changePageSize(t);},getNumberOfAllocatedElements:function(){return this._calcElementsPerPage()*this.currentPageIndex;},_changePageSize:function(t){this.currentPageIndex=Math.ceil(t/this._calcElementsPerPage());},moveToNextPage:function(){this.currentPageIndex++;},_calcElementsPerPage:function(){var e=jQuery("<div>").addClass(this.ElementClass);jQuery('body').append(e);var a=e.height();var b=e.width();if(a<100||b<100){b=100;a=100;}var c=Math.round(this.containerWidth/b),d=Math.round(this.containerHeight/a);this.tileHeight=a;e.remove();if(!c||!d||d===Infinity||c===Infinity||d===0||c===0){return 10;}return c*d;}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper')){(function(){jQuery.sap.declare("sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper");sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper=function(t){this.tile=t;};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setErrorState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Failed);};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setLoadingState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Loading);};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setLoadedState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Loaded);};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendDown=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.Down);};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendUp=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.Up);};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendNeutral=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.None);};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdGood=function(){};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdBad=function(){};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdCritical=function(){};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdNeutral=function(){};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.calculateThreshold=function(a,v,i){};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTile=function(t){this.tile=t;};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.getTile=function(){return this.tile;};}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorTileUtils.oData4Analytics')){jQuery.sap.declare("sap.ushell.components.tiles.indicatorTileUtils.oData4Analytics");jQuery.sap.require('sap.ui.core.Core');sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics||{};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants={};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants["SAP_NAMESPACE"]="http://www.sap.com/Protocols/SAPData";sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants["VERSION"]="0.7";sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper={renderPropertyKeyValue:function(f,p){if(f.charAt(0)=="'"){throw"Illegal property value starting with a quote";}switch(p){case'Edm.String':return"'"+f+"'";case'Edm.DateTime':return"datetime'"+f+"'";case'Edm.Guid':return"guid'"+f+"'";case'Edm.Time':return"time'"+f+"'";case'Edm.DateTimeOffset':return"datetimeoffset'"+f+"'";default:return f;}},renderPropertyFilterValue:function(f,p){if(f.charAt(0)=="'"){throw"Illegal property value starting with a quote";}switch(p){case'Edm.String':return"'"+f+"'";case'Edm.DateTime':return"datetime'"+f+"'";case'Edm.Guid':return"guid'"+f+"'";case'Edm.Time':return"time'"+f+"'";case'Edm.DateTimeOffset':return"datetimeoffset'"+f+"'";default:return f;}},tokenizeNametoLabelText:function(n){var l="";l=n.replace(/([^A-Z0-9_]+)([A-Z0-9_])/g,"$1 $2");l=l.replace(/([A-Z0-9_]{2,})([A-Z0-9_])([^A-Z0-9_]+)/g,"$1 $2$3");l=l.replace(/(.*) _E$/,"$1");l=l.replace(/(.*) _(.*)/g,"$1 $2");return l;}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model=function(m,a){this._init(m,a);};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByURI=function(u){return{sServiceURI:u};};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByModel=function(m){return{oModel:m};};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceWithWorkaround=function(m,w){return{oModelReference:m,aWorkaroundID:w};};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.prototype={_init:function(m,a){this._oActivatedWorkarounds={};if(m&&m.aWorkaroundID){var w=m.aWorkaroundID;for(var i=0;i<w.length;i++){this._oActivatedWorkarounds[w[i]]=true;}m=m.oModelReference;}if(!m||(!m.sServiceURI&&!m.oModel)){throw"Usage with oModelReference being an instance of Model.ReferenceByURI or Model.ReferenceByModel";}if(m.oModel){this._oModel=m.oModel;}else{this._oModel=new sap.ui.model.odata.ODataModel(m.sServiceURI);}if(this._oModel.getServiceMetadata().dataServices==undefined){throw"Model could not be loaded";}this.mergeV2Annotations(a);this._oQueryResultSet={};this._oParameterizationSet={};this._oEntityTypeSet={};this._oEntitySetSet={};this._oEntityTypeNameToEntitySetMap={};var s=this._oModel.getServiceMetadata().dataServices.schema[0];for(var i=-1,c;c=s.entityContainer[++i];){if(c.isDefaultEntityContainer=="true"){this._oDefaultEntityContainer=c;break;}}var e=s.entityType;var q=[],p=[],u=[];for(var i=-1,t;t=e[++i];){var P=false;if(t.extensions!=undefined){for(var j=-1,E;E=t.extensions[++j];){if(E.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE&&E.name=="semantics"){P=true;switch(E.value){case"aggregate":q.push(t);break;case"parameters":p.push(t);break;default:u.push(t);}}if(P){continue;}}if(!P){u.push(t);}}else{u.push(t);}}for(var i=-1,t;t=u[++i];){var o=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),s,t);this._oEntityTypeSet[o.getQName()]=o;var b=this._getEntitySetsOfType(s,o.getQName());if(b.length==0){throw"Invalid consumption model: No entity set for entity type annotated with parameters semantics";}if(b.length>1){throw"Unsupported consumption model: More than one entity set for entity type annotated with parameters semantics";}var d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),s,b[0][0],b[0][1]);this._oEntitySetSet[d.getQName()]=d;this._oEntityTypeNameToEntitySetMap[o.getQName()]=d;}var f={};for(var i=-1,t;t=p[++i];){var o=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),s,t);this._oEntityTypeSet[o.getQName()]=o;var b=this._getEntitySetsOfType(s,o.getQName());if(b.length==0){throw"Invalid consumption model: No entity set for entity type annotated with parameters semantics";}if(b.length>1){throw"Unsupported consumption model: More than one entity set for entity type annotated with parameters semantics";}var d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),s,b[0][0],b[0][1]);this._oEntitySetSet[d.getQName()]=d;this._oEntityTypeNameToEntitySetMap[o.getQName()]=d;var g=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization(o,d);this._oParameterizationSet[g.getName()]=g;f[o.getQName()]=g;var h=o.getQName();if(s.association!=undefined){for(var j=-1,A;A=s.association[++j];){if(A.referentialConstraint==undefined){continue;}var k=null;if(A.end[0].type==h&&A.end[0].multiplicity=="*"&&A.end[1].multiplicity=="1"){k=A.end[1].type;}else if(A.end[1].type==h&&A.end[1].multiplicity=="*"&&A.end[0].multiplicity=="1"){k=A.end[0].type;}if(!k){continue;}if(A.referentialConstraint.dependent.propertyRef.length!=1){continue;}var l=g.findParameterByName(A.referentialConstraint.dependent.propertyRef[0].name);if(l==null){continue;}var v=this._oEntityTypeSet[k];var V=this._oEntityTypeNameToEntitySetMap[k];l.setValueSetEntity(v,V);}}}for(var i=-1,t;t=q[++i];){var o=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),s,t);this._oEntityTypeSet[o.getQName()]=o;var Q=o.getQName();var g=null;var n=null;if(s.association!=undefined){for(var j=-1,A;A=s.association[++j];){var r=null;if(A.end[0].type==Q){r=A.end[1].type;}else if(A.end[1].type==Q){r=A.end[0].type;}else{continue;}var M=null;M=f[r];if(M!=null){if(g!=null){throw"LIMITATION: Unable to handle multiple parameter entity types of query entity "+o.name;}else{g=M;n=A;}}}}var b=this._getEntitySetsOfType(s,o.getQName());if(b.length!=1){throw"Invalid consumption model: There must be exactly one entity set for an entity type annotated with aggregating semantics";}var d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),s,b[0][0],b[0][1]);this._oEntitySetSet[d.getQName()]=d;this._oEntityTypeNameToEntitySetMap[o.getQName()]=d;var x=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult(this,o,d,g);this._oQueryResultSet[x.getName()]=x;if(g){g.setTargetQueryResult(x,n);}}},oUI5ODataModelAnnotatableObject:{objectName:"schema",keyPropName:"namespace",extensions:true,aSubObject:[{objectName:"entityType",keyPropName:"name",extensions:true,aSubObject:[{objectName:"property",keyPropName:"name",aSubObject:[],extensions:true}]},{objectName:"entityContainer",keyPropName:"name",extensions:false,aSubObject:[{objectName:"entitySet",keyPropName:"name",extensions:true,aSubObject:[]}]}]},mergeV2Annotations:function(a){try{var A=JSON.parse(a);}catch(e){return;}var m;try{m=this._oModel.getServiceMetadata().dataServices;}catch(e){return;}for(var p in A){if(!(this.oUI5ODataModelAnnotatableObject.objectName==p)){continue;}if(!(A[p]instanceof Array)){continue;}this.mergeV2AnnotationLevel(m[this.oUI5ODataModelAnnotatableObject.objectName],A[this.oUI5ODataModelAnnotatableObject.objectName],this.oUI5ODataModelAnnotatableObject);break;}return;},mergeV2AnnotationLevel:function(M,a,u){for(var i=-1,A;A=a[++i];){for(var j=-1,o;o=M[++j];){if(!(A[u.keyPropName]==o[u.keyPropName])){continue;}if(A["extensions"]!=undefined){if(o["extensions"]==undefined){o["extensions"]=[];}for(var l=-1,b;b=A["extensions"][++l];){var f=false;for(var m=-1,c;c=o["extensions"][++m];){if(b.name==c.name&&b.namespace==c.namespace){c.value=b.value;f=true;break;}}if(!f){o["extensions"].push(b);}}}for(var k=-1,U;U=u.aSubObject[++k];){for(var p in A){if(!(U.objectName==p)){continue;}if(!(A[U.objectName]instanceof Array)){continue;}if((o[U.objectName]==undefined)||(!(o[U.objectName]instanceof Array))){continue;}this.mergeV2AnnotationLevel(o[U.objectName],A[U.objectName],U);break;}}}}return;},findQueryResultByName:function(n){var q=this._oQueryResultSet[n];if(!q&&this._oDefaultEntityContainer){var Q=this._oDefaultEntityContainer.name+"."+n;q=this._oQueryResultSet[Q];}return q;},getAllQueryResultNames:function(){if(this._aQueryResultNames){return this._aQueryResultNames;}this._aQueryResultNames=new Array(0);for(var n in this._oQueryResultSet)this._aQueryResultNames.push(this._oQueryResultSet[n].getName());return this._aQueryResultNames;},getAllQueryResults:function(){return this._oQueryResultSet;},getODataModel:function(){return this._oModel;},_getEntitySetsOfType:function(s,q){var e=[];for(var i=-1,E;E=s.entityContainer[++i];){for(var j=-1,o;o=E.entitySet[++j];){if(o.entityType==q){e.push([E,o]);}}}return e;},_oModel:null,_oDefaultEntityContainer:null,_aQueryResultNames:null,_oQueryResultSet:null,_oParameterizationSet:null,_oEntityTypeSet:null,_oEntitySetSet:null,_oEntityTypeNameToEntitySetMap:null,_oActivatedWorkarounds:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult=function(m,e,E,p){this._init(m,e,E,p);};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult.prototype={_init:function(m,e,E,p,a){this._oModel=m;this._oEntityType=e;this._oEntitySet=E;this._oParameterization=p;this._oDimensionSet={};this._oMeasureSet={};var P=e.getTypeDescription().property;var A={};for(var i=-1,o;o=P[++i];){if(o.extensions==undefined){continue;}for(var j=-1,b;b=o.extensions[++j];){if(!b.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(b.name){case"aggregation-role":switch(b.value){case"dimension":var d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension(this,o);this._oDimensionSet[d.getName()]=d;break;case"measure":var M=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure(this,o);this._oMeasureSet[M.getName()]=M;break;case"totaled-properties-list":this._oTotaledPropertyListProperty=o;break;}break;case"attribute-for":var D=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute(this,o);A[D.getKeyProperty()]=D;break;}}}for(var s in A){var D=A[s];D.getDimension().addAttribute(D);}if(m._oActivatedWorkarounds.IdentifyTextPropertiesByName){var c=[];for(var f in this._oDimensionSet){var d=this._oDimensionSet[f];if(!d.getTextProperty()){var t=null;t=e.findPropertyByName(f+"Name");if(!t){t=e.findPropertyByName(f+"Text");}if(!t){t=e.findPropertyByName(f+"Desc");}if(!t){t=e.findPropertyByName(f+"Description");}if(t){d.setTextProperty(t);c.push(t.name);}}}for(var i=-1,g;g=c[++i];){delete this._oDimensionSet[g];}}},getName:function(){return this.getEntitySet().getQName();},getParameterization:function(){return this._oParameterization;},getAllDimensionNames:function(){if(this._aDimensionNames){return this._aDimensionNames;}this._aDimensionNames=[];for(var n in this._oDimensionSet)this._aDimensionNames.push(this._oDimensionSet[n].getName());return this._aDimensionNames;},getAllDimensions:function(){return this._oDimensionSet;},getAllMeasureNames:function(){if(this._aMeasureNames){return this._aMeasureNames;}this._aMeasureNames=[];for(var n in this._oMeasureSet)this._aMeasureNames.push(this._oMeasureSet[n].getName());return this._aMeasureNames;},getAllMeasures:function(){return this._oMeasureSet;},findDimensionByName:function(n){return this._oDimensionSet[n];},getTotaledPropertiesListProperty:function(){return this._oTotaledPropertyListProperty;},findMeasureByName:function(n){return this._oMeasureSet[n];},getModel:function(){return this._oModel;},getEntityType:function(){return this._oEntityType;},getEntitySet:function(){return this._oEntitySet;},_oModel:null,_oEntityType:null,_oEntitySet:null,_oParameterization:null,_aDimensionNames:null,_oDimensionSet:null,_aMeasureNames:null,_oMeasureSet:null,_oTotaledPropertyListProperty:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization=function(e,E){this._init(e,E);};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization.prototype={_init:function(e,E){this._oEntityType=e;this._oEntitySet=E;this._oParameterSet={};var p=e.getTypeDescription().property;for(var i=-1,P;P=p[++i];){if(P.extensions==undefined){continue;}for(var j=-1,o;o=P.extensions[++j];){if(!o.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(o.name){case"parameter":var a=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter(this,P);this._oParameterSet[a.getName()]=a;break;}}}},setTargetQueryResult:function(q,a){this._oQueryResult=q;var Q=this._oEntityType.getSchema().namespace+"."+a.name;var n=this._oEntityType.getTypeDescription().navigationProperty;if(!n){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type";}for(var i=-1,N;N=n[++i];){if(N.relationship==Q){this._oNavPropToQueryResult=N.name;}}if(!this._oNavPropToQueryResult){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type";}},getName:function(){return this.getEntitySet().getQName();},getAllParameterNames:function(){if(this._aParameterNames){return this._aParameterNames;}this._aParameterNames=[];for(var n in this._oParameterSet)this._aParameterNames.push(this._oParameterSet[n].getName());return this._aParameterNames;},getAllParameters:function(){return this._oParameterSet;},findParameterByName:function(n){return this._oParameterSet[n];},getNavigationPropertyToQueryResult:function(){return this._oNavPropToQueryResult;},getEntityType:function(){return this._oEntityType;},getEntitySet:function(){return this._oEntitySet;},_oEntityType:null,_oEntitySet:null,_oQueryResult:null,_oNavPropToQueryResult:null,_aParameterNames:null,_oParameterSet:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter=function(p,P){this._init(p,P);};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter.prototype={_init:function(p,P){this._oParameterization=p;this._oProperty=P;var e=p.getEntityType();if(P.extensions!=undefined){for(var i=-1,E;E=P.extensions[++i];){if(!E.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(E.name){case"parameter":switch(E.value){case"mandatory":this._bRequired=true;break;case"optional":this._bRequired=false;break;default:throw"Invalid annotation value for parameter property";}break;case"label":this._sLabelText=E.value;break;case"text":this._oTextProperty=e.findPropertyByName(E.value);break;case"upper-boundary":this._bIntervalBoundaryParameter=true;this._oUpperIntervalBoundaryParameterProperty=e.findPropertyByName(E.value);break;case"lower-boundary":this._bIntervalBoundaryParameter=true;this._oLowerIntervalBoundaryParameterProperty=e.findPropertyByName(E.value);break;}}}if(!this._sLabelText){this._sLabelText="";}},setValueSetEntity:function(e,E){this._oValueSetEntityType=e;this._oValueSetEntitySet=E;},getTextProperty:function(){return this._oTextProperty;},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.tokenizeNametoLabelText(this.getName());}return this._sLabelText;},isOptional:function(){return(!this._bRequired);},isIntervalBoundary:function(){return this._bIntervalBoundaryParameter;},isLowerIntervalBoundary:function(){return(this._oUpperIntervalBoundaryParameterProperty?true:false);},getPeerIntervalBoundaryParameter:function(){var p=null;if(this._oLowerIntervalBoundaryParameterProperty){p=this._oLowerIntervalBoundaryParameterProperty.name;}else{p=this._oUpperIntervalBoundaryParameterProperty.name;}if(!p){throw"Parameter is not an interval boundary";}return this._oParameterization.findParameterByName(p);},isValueSetAvailable:function(){return(this._oValueSetEntityType?true:false);},getName:function(){return this._oProperty.name;},getProperty:function(){return this._oProperty;},getContainingParameterization:function(){return this._oParameterization;},getURIToValueEntitySet:function(s){var u=null;u=(s?s:"")+"/"+this._oValueSetEntitySet.getQName();return u;},_oParameterization:null,_oProperty:null,_sLabelText:null,_oTextProperty:null,_bRequired:false,_bIntervalBoundaryParameter:false,_oLowerIntervalBoundaryParameterProperty:null,_oUpperIntervalBoundaryParameterProperty:null,_oValueSetEntityType:null,_oValueSetEntitySet:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension=function(q,p){this._init(q,p);};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension.prototype={_init:function(q,p){this._oQueryResult=q;this._oProperty=p;this._oAttributeSet={};if(p.extensions!=undefined){for(var i=-1,e;e=p.extensions[++i];){if(!e.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(e.name){case"label":this._sLabelText=e.value;break;case"text":this._oTextProperty=q.getEntityType().findPropertyByName(e.value);break;case"super-ordinate":this._sSuperOrdinatePropertyName=e.value;break;}}}if(!this._sLabelText){this._sLabelText="";}},getName:function(){return this._oProperty.name;},getKeyProperty:function(){return this._oProperty;},getTextProperty:function(){return this._oTextProperty;},setTextProperty:function(t){this._oTextProperty=t;},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.tokenizeNametoLabelText(this.getName());}return this._sLabelText;},getSuperOrdinateDimension:function(){if(!this._sSuperOrdinatePropertyName){return null;}return this._oQueryResult.findDimensionByName(this._sSuperOrdinatePropertyName);},getHierarchy:function(){if(!this._oHierarchy){this._oHierarchy=this._oQueryResult.getEntityType().getHierarchy(this._oProperty.name);}return this._oHierarchy;},getAllAttributeNames:function(){if(this._aAttributeNames){return this._aAttributeNames;}this._aAttributeNames=[];for(var n in this._oAttributeSet)this._aAttributeNames.push(this._oAttributeSet[n].getName());return this._aAttributeNames;},getAllAttributes:function(){return this._oAttributeSet;},findAttributeByName:function(n){return this._oAttributeSet[n];},addAttribute:function(d){this._oAttributeSet[d.getName()]=d;},getContainingQueryResult:function(){return this._oQueryResult;},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sSuperOrdinatePropertyName:null,_aAttributeNames:null,_oAttributeSet:null,_oHierarchy:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute=function(q,p){this._init(q,p);};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute.prototype={_init:function(q,p){this._oQueryResult=q;this._oProperty=p;if(p.extensions!=undefined){for(var i=-1,e;e=p.extensions[++i];){if(!e.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(e.name){case"attribute-for":this._sDimensionName=e.value;break;case"label":this._sLabelText=e.value;break;case"text":this._oTextProperty=q.getEntityType().findPropertyByName(e.value);break;}}}},getName:function(){return this._oProperty.name;},getKeyProperty:function(){return this._oProperty;},getTextProperty:function(){return this._oTextProperty;},getLabelText:function(){return this._sLabelText;},getDimension:function(){return this._oQueryResult.findDimensionByName(this._sDimensionName);},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sDimensionName:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure=function(q,p){this._init(q,p);};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure.prototype={_init:function(q,p){this._oQueryResult=q;this._oProperty=p;if(p.extensions!=undefined){for(var i=-1,e;e=p.extensions[++i];){if(!e.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(e.name){case"label":this._sLabelText=e.value;break;case"text":this._oTextProperty=q.getEntityType().findPropertyByName(e.value);break;case"unit":this._oUnitProperty=q.getEntityType().findPropertyByName(e.value);break;}}}if(!this._sLabelText){this._sLabelText="";}},getName:function(){return this._oProperty.name;},getRawValueProperty:function(){return this._oProperty;},getFormattedValueProperty:function(){return this._oTextProperty;},getUnitProperty:function(){return this._oUnitProperty;},getLabelText:function(){return this._sLabelText;},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_oUnitProperty:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet=function(m,s,c,e){this._init(m,s,c,e);};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet.prototype={_init:function(m,s,c,e){this._oEntitySet=e;this._oContainer=c;this._oSchema=s;this._oModel=m;if(s.entityContainer.length>1){this._sQName=c.name+"."+e.name;}else{this._sQName=e.name;}},getQName:function(){return this._sQName;},getSetDescription:function(){return this._oEntitySet;},getSchema:function(){return this._oSchema;},getModel:function(){return this._oModel;},_oEntitySet:null,_oContainer:null,_oSchema:null,_oModel:null,_sQName:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType=function(m,s,e){this._init(m,s,e);};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType.prototype={_init:function(m,s,e){this._oEntityType=e;this._oSchema=s;this._oModel=m;this._oPropertySet={};this._aFilterablePropertyNames=[];this._aSortablePropertyNames=[];this._aRequiredFilterPropertyNames=[];this._sQName=s.namespace+"."+e.name;var r={};var R=null;for(var i=-1,p;p=e.property[++i];){this._aFilterablePropertyNames.push(p.name);this._aSortablePropertyNames.push(p.name);if(p.extensions==undefined){continue;}for(var j=-1,E;E=p.extensions[++j];){if(!E.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(E.name){case"filterable":if(E.value=="false"){this._aFilterablePropertyNames.pop(p.name);}break;case"sortable":if(E.value=="false"){this._aSortablePropertyNames.pop(p.name);}break;case"required-filter":if(E.value=="true"){this._aRequiredFilterPropertyNames.push(p.name);}break;case"hierarchy-node-for":if(!(R=r[p.name])){R=r[p.name]={};}R.dimensionName=E.value;break;case"hierarchy-parent-node-for":case"hierarchy-parent-nod":if(!(R=r[E.value])){R=r[E.value]={};}R.parentNodeIDProperty=p;break;case"hierarchy-level-for":if(!(R=r[E.value])){R=r[E.value]={};}R.levelProperty=p;break;case"hierarchy-drill-state-for":case"hierarchy-drill-stat":if(!(R=r[E.value])){R=r[E.value]={};}R.drillStateProperty=p;break;}}this._oPropertySet[p.name]=p;}this._oRecursiveHierarchySet={};for(var h in r){var H=r[h];var o=this._oPropertySet[h];var d=this._oPropertySet[H.dimensionName];if(d==null){d=o;}this._oRecursiveHierarchySet[d.name]=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy(e,o,H.parentNodeIDProperty,H.levelProperty,d);}},findPropertyByName:function(n){return this._oPropertySet[n];},getFilterablePropertyNames:function(){return this._aFilterablePropertyNames;},getSortablePropertyNames:function(){return this._aSortablePropertyNames;},getRequiredFilterPropertyNames:function(){return this._aRequiredFilterPropertyNames;},getAllHierarchyPropertyNames:function(){if(this._aHierarchyPropertyNames){return this._aHierarchyPropertyNames;}this._aHierarchyPropertyNames=[];for(var n in this._oRecursiveHierarchySet)this._aHierarchyPropertyNames.push(this._oRecursiveHierarchySet[n].getNodeValueProperty().name);return this._aHierarchyPropertyNames;},getHierarchy:function(n){if(this._oRecursiveHierarchySet[n]==undefined){return null;}return this._oRecursiveHierarchySet[n];},getQName:function(){return this._sQName;},getTypeDescription:function(){return this._oEntityType;},getSchema:function(){return this._oSchema;},getModel:function(){return this._oModel;},_oEntityType:null,_oSchema:null,_oModel:null,_sQName:null,_oPropertySet:null,_aFilterablePropertyNames:null,_aRequiredFilterPropertyNames:null,_aHierarchyPropertyNames:null,_oRecursiveHierarchySet:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy=function(e,n,p,N,o){this._init(e,n,p,N,o);};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy.prototype={_init:function(e,n,p,N,o){this._oEntityType=e;this._oNodeIDProperty=n;this._oParentNodeIDProperty=p;this._oNodeLevelProperty=N;this._oNodeValueProperty=o;},isRecursiveHierarchy:function(){return true;},isLeveledHierarchy:function(){return false;},getNodeIDProperty:function(){return this._oNodeIDProperty;},getParentNodeIDProperty:function(){return this._oParentNodeIDProperty;},getNodeLevelProperty:function(){return this._oNodeLevelProperty;},getNodeValueProperty:function(){return this._oNodeValueProperty;},_oNodeIDProperty:null,_oParentNodeIDProperty:null,_oNodeLevelProperty:null,_oNodeValueProperty:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression=function(m,s,e){this._init(m,s,e);};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression.prototype={_init:function(m,s,e){this._oEntityType=e;this._oSchema=s;this._oModel=m;this._aFilterCondition=[];},clear:function(){this._aFilterCondition=[];},addCondition:function(p,o,v,V){var P=this._oEntityType.findPropertyByName(p);if(P==null){throw"Cannot add filter condition for unknown property name "+p;}var f=this._oEntityType.getFilterablePropertyNames();if(f.indexOf(p)===-1){throw"Cannot add filter condition for not filterable property name "+p;}this._aFilterCondition.push({property:P,op:o,val1:v,val2:V});return this._aFilterablePropertyNames;},addSetCondition:function(p,v){var P=this._oEntityType.findPropertyByName(p);if(P==null){throw"Cannot add filter condition for unknown property name "+p;}var f=this._oEntityType.getFilterablePropertyNames();if(f.indexOf(p)===-1){throw"Cannot add filter condition for not filterable property name "+p;}for(var i=-1,V;V=v[++i];){this._aFilterCondition.push({property:P,op:sap.ui.model.FilterOperator.EQ,val1:V});}return this._aFilterablePropertyNames;},getExpressionAsUI5FilterArray:function(){var f=[];for(var i=-1,c;c=this._aFilterCondition[++i];){f.push(new sap.ui.model.Filter(c.property.name,c.op,c.val1,c.val2));}return f;},getURIFilterOptionValue:function(){if(this._aFilterCondition.length==0){return"";}this._aFilterCondition.sort(function(a,b){if(a.property.name==b.property.name){return 0;}if(a.property.name>b.property.name){return 1;}else{return-1;}});var p=this._aFilterCondition[0].property.name;var o="";var s="";for(var i=-1,c;c=this._aFilterCondition[++i];){if(p!=c.property.name){o+=(o==""?"":" and ")+"("+s+")";s="";p=c.property.name;}switch(c.op){case sap.ui.model.FilterOperator.BT:s+=(s==""?"":" or ")+"("+c.property.name+" "+sap.ui.model.FilterOperator.GE.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(c.val1,c.property.type)+" and "+c.property.name+" "+sap.ui.model.FilterOperator.LE.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(c.val2,c.property.type)+")";break;default:s+=(s==""?"":" or ")+"("+c.property.name+" "+c.op.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(c.val1,c.property.type)+")";}}o+=(o==""?"":" and ")+"("+s+")";return o;},getEntityType:function(){return this._oEntityType;},getSchema:function(){return this._oSchema;},getModel:function(){return this._oModel;},_oEntityType:null,_oSchema:null,_oModel:null,_aFilterCondition:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortOrder={Ascending:"asc",Descending:"desc"};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression=function(m,s,e){this._init(m,s,e);};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression.prototype={_init:function(m,s,e){this._oEntityType=e;this._oSchema=s;this._oModel=m;this._aSortCondition=[];},_containsSorter:function(p){var r=null;for(var i=-1,c;c=this._aSortCondition[++i];){if(c.property.name===p){r={sorter:c,index:i};break;}}return r;},_removeFromArray:function(a,f,t){var r=a.slice((t||f)+1||a.length);a.length=f<0?a.length+f:f;return a.push.apply(a,r);},clear:function(){this._aSortCondition=[];},addSorter:function(p,s){var P=this._oEntityType.findPropertyByName(p);if(P==null){throw"Cannot add sort condition for unknown property name "+p;}if(this._containsSorter(p)!=null){throw"Sort condition for this property name is already defined "+p;}var S=this._oEntityType.getSortablePropertyNames();if(S.indexOf(p)===-1){throw"Cannot add sort condition for not sortable property name "+p;}this._aSortCondition.push({property:P,order:s});return this;},removeSorter:function(p){if(!p){return;}var s=this._containsSorter(p);if(s){this._removeFromArray(this._aSortCondition,s.index);}},getExpressionsAsUI5SorterArray:function(){var s=[];for(var i=-1,c;c=this._aSortCondition[++i];){s.push(new sap.ui.model.Sorter(c.property.name,c.order==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortOrder.Descending));}return s;},getExpressionAsUI5Sorter:function(){var s=this.getExpressionsAsUI5SorterArray();if(s.length==0){return null;}else{return s[0];}},getURIOrderByOptionValue:function(){if(this._aSortCondition.length==0){return"";}var o="";for(var i=-1,c;c=this._aSortCondition[++i];){o+=c.property.name+" "+c.order;if(i<this._aSortCondition.length-1){o+=", ";}}return o;},getEntityType:function(){return this._oEntityType;},getSchema:function(){return this._oSchema;},getModel:function(){return this._oModel;},_oEntityType:null,_oSchema:null,_oModel:null,_aSortCondition:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest=function(p){this._init(p);};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest.prototype={_init:function(p){if(!p){throw"No parameterization given";}this._oParameterization=p;this._oParameterValueAssignment=[];},getParameterization:function(){return this._oParameterization;},setParameterValue:function(p,v,t){var P=this._oParameterization.findParameterByName(p);if(!P){throw"Invalid parameter name "+p;}if(t!=null){if(!P.isIntervalBoundary()){throw"Range value cannot be applied to parameter "+p+" accepting only single values";}if(!P.isLowerIntervalBoundary()){throw"Range value given, but parameter "+p+" does not hold the lower boundary";}}if(!P.isIntervalBoundary()){if(v==null){delete this._oParameterValueAssignment[p];}else{this._oParameterValueAssignment[p]=v;}}else{if(v==null&&t!=null){throw"Parameter "+p+": An upper boundary cannot be given without the lower boundary";}if(v==null){delete this._oParameterValueAssignment[p];t=null;}else{this._oParameterValueAssignment[p]=v;}var u=P.getPeerIntervalBoundaryParameter();if(t==null){t=v;}if(v==null){delete this._oParameterValueAssignment[u.getName()];}else{this._oParameterValueAssignment[u.getName()]=t;}}return;},getURIToParameterizationEntitySet:function(s){return(s?s:"")+"/"+this._oParameterization.getEntitySet().getQName();},getURIToParameterizationEntry:function(s){var d=this._oParameterization.getAllParameters();for(var D in d){if(this._oParameterValueAssignment[D]==undefined){throw"Parameter "+D+" has no value assigned";}}var k="",f=true;for(var p in this._oParameterValueAssignment){k+=(f?"":",")+p+"="+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyKeyValue(this._oParameterValueAssignment[p],d[p].getProperty().type);f=false;}return(s?s:"")+"/"+this._oParameterization.getEntitySet().getQName()+"("+k+")";},_oParameterization:null,_oParameterValueAssignment:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest=function(q,p){this._init(q);};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest.prototype={_init:function(q,p){this._oQueryResult=q;this._oParameterizationRequest=p;this._oAggregationLevel={};this._oMeasures={};this._bIncludeEntityKey=false;this._oFilterExpression=null;},setParameterizationRequest:function(p){this._oParameterizationRequest=p;},getQueryResult:function(){return this._oQueryResult;},setAggregationLevel:function(d){this._oAggregationLevel={};if(!d){d=this._oQueryResult.getAllDimensionNames();}this.addToAggregationLevel(d);},addToAggregationLevel:function(d){if(!d){return;}for(var i=-1,D;D=d[++i];){if(!this._oQueryResult.findDimensionByName(D)){throw D+" is not a valid dimension name";}this._oAggregationLevel[D]={key:true,text:false,attributes:null};}},removeFromAggregationLevel:function(d){if(!d){return;}for(var i=-1,D;D=d[++i];){if(!this._oQueryResult.findDimensionByName(D)){throw D+" is not a valid dimension name";}if(this._oAggregationLevel[D]!=undefined){delete this._oAggregationLevel[D];this.getSortExpression().removeSorter(D);}}},getAggregationLevel:function(){var d=[];for(var D in this._oAggregationLevel){d.push(D);}return d;},getAggregationLevelDetails:function(d){if(this._oAggregationLevel[d]==undefined){throw"Aggregation level does not include dimension "+d;}return this._oAggregationLevel[d];},setMeasures:function(m){if(!m){m=this._oQueryResult.getAllMeasureNames();}this._oMeasures={};for(var i=-1,M;M=m[++i];){if(!this._oQueryResult.findMeasureByName(M)){throw M+" is not a valid measure name";}this._oMeasures[M]={value:true,text:false,unit:false};}},getMeasureNames:function(){var m=[];for(var M in this._oMeasures){m.push(M);}return m;},includeDimensionKeyTextAttributes:function(d,I,b,a){var D=[];if(d){if(this._oAggregationLevel[d]==undefined){throw d+" is not included in the aggregation level";}D.push(d);}else{for(var n in this._oAggregationLevel){D.push(n);}a=null;}for(var i=-1,s;s=D[++i];){if(I!=null){this._oAggregationLevel[s].key=I;}if(b!=null){this._oAggregationLevel[s].text=b;}if(a!=null){this._oAggregationLevel[s].attributes=a;}}},includeMeasureRawFormattedValueUnit:function(m,I,b,a){var M=[];if(m){if(this._oMeasures[m]==undefined){throw m+" is not part of the query result";}M.push(m);}else{for(var n in this._oMeasures){M.push(n);}}for(var i=-1,s;s=M[++i];){if(I!=null){this._oMeasures[s].value=I;}if(b!=null){this._oMeasures[s].text=b;}if(a!=null){this._oMeasures[s].unit=a;}}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oQueryResult.getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e);}return this._oFilterExpression;},setFilterExpression:function(f){this._oFilterExpression=f;},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e);}return this._oSortExpression;},setSortExpression:function(s){this._oSortExpression=s;},setRequestOptions:function(i,I){if(i){this._bIncludeEntityKey=i;}if(I){this._bIncludeCount=I;}},setResultPageBoundaries:function(s,e){if(s!=null&&typeof s!=="number"){throw"Start value must be null or numeric";}if(e!==null&&typeof e!=="number"){throw"End value must be null or numeric";}if(s==null){s=1;}if(s<1||s>(e==null?s:e)){throw"Invalid values for requested page boundaries";}this._iSkipRequestOption=(s>1)?s:null;this._iTopRequestOption=(e!=null)?(e-s+1):null;},getResultPageBoundaries:function(){return{start:(this._iSkipRequestOption==null)?1:this._iSkipRequestOption,end:(this._iTopRequestOption!=null)?(this._iSkipRequestOption==null)?1:this._iSkipRequestOption+this._iTopRequestOption:null};},getURIToQueryResultEntitySet:function(s){var u=null;if(this._oQueryResult.getParameterization()){if(!this._oParameterizationRequest){throw"Missing parameterization request";}else{u=this._oParameterizationRequest.getURIToParameterizationEntry(s)+"/"+this._oQueryResult.getParameterization().getNavigationPropertyToQueryResult();}}else{u=(s?s:"")+"/"+this._oQueryResult.getEntitySet().getQName();}return u;},getURIQueryOptionValue:function(q){var Q=null;switch(q){case"$select":{var s="";for(var d in this._oAggregationLevel){var D=this._oQueryResult.findDimensionByName(d);var o=this._oAggregationLevel[d];if(o.key==true){s+=(s==""?"":",")+D.getKeyProperty().name;}if(o.text==true&&D.getTextProperty()){s+=(s==""?"":",")+D.getTextProperty().name;}if(o.attributes){for(var i=-1,a;a=o.attributes[++i];){s+=(s==""?"":",")+D.findAttributeByName(a).getName();}}}for(var m in this._oMeasures){var M=this._oQueryResult.findMeasureByName(m);var b=this._oMeasures[m];if(b.value==true){s+=(s==""?"":",")+M.getRawValueProperty().name;}if(b.text==true&&M.getFormattedValueProperty()){s+=(s==""?"":",")+M.getFormattedValueProperty().name;}if(b.unit==true&&M.getUnitProperty()){s+=(s==""?"":",")+M.getUnitProperty().name;}}if(this._bIncludeEntityKey){var k=this._oQueryResult.getEntityType().getTypeDescription().key.propertyRef;for(var i=-1,K;K=k[++i];){s+=(s==""?"":",")+K.name;}}Q=(s?s:null);break;}case"$filter":{var f=null;if(this._oFilterExpression){f=this._oFilterExpression.getURIFilterOptionValue();}Q=(f?f:null);break;}case"$orderby":{var S=null;if(this._oSortExpression){S=this._oSortExpression.getURIOrderByOptionValue();}Q=(S?S:null);break;}case"$top":{if(this._iTopRequestOption!==null){Q=this._iTopRequestOption;}break;}case"$skip":{Q=this._iSkipRequestOption;break;}default:break;}return Q;},getURIToQueryResultEntries:function(s){var r=this.getURIToQueryResultEntitySet(s);var S=this.getURIQueryOptionValue("$select");var f=this.getURIQueryOptionValue("$filter");var a=this.getURIQueryOptionValue("$orderby");var t=this.getURIQueryOptionValue("$top");var b=this.getURIQueryOptionValue("$skip");var u=r;var q=false;if(S){u+="?$select="+S;q=true;}if(this._oFilterExpression&&f){if(!q){u+="?";q=true;}else{u+="&";}u+="$filter="+f;}if(this._oSortExpression&&a){if(!q){u+="?";q=true;}else{u+="&";}u+="$orderby="+a;}if(this._iTopRequestOption&&t){if(!q){u+="?";q=true;}else{u+="&";}u+="$top="+t;}if(this._iSkipRequestOption&&b){if(!q){u+="?";q=true;}else{u+="&";}u+="$skip="+b;}if(this._bIncludeCount){if(!q){u+="?";q=true;}else{u+="&";}u+="$inlinecount=allpages";}return u;},_oQueryResult:null,_oParameterizationRequest:null,_oAggregationLevel:null,_oMeasures:null,_bIncludeEntityKey:null,_bIncludeCount:null,_oFilterExpression:null,_oSortExpression:null,_iSkipRequestOption:0,_iTopRequestOption:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterValueSetRequest=function(p){this._init(p);};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterValueSetRequest.prototype={_init:function(p){this._oParameter=p;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null;},includeParameterText:function(i){if(i!=null){this._oValueSetResult.text=i;}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oParameter.getContainingParameterization().getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e);}return this._oFilterExpression;},setFilterExpression:function(f){this._oFilterExpression=f;},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e);}return this._oSortExpression;},setSortExpression:function(s){this._oSortExpression=s;},getURIQueryOptionValue:function(q){var Q=null;switch(q){case"$select":{var s="";s+=(s==""?"":",")+this._oParameter.getProperty().name;if(this._oValueSetResult.text==true&&this._oParameter.getTextProperty()){s+=(s==""?"":",")+this._oParameter.getTextProperty().name;}Q=(s?s:null);break;}case"$filter":{var f=null;if(this._oFilterExpression){f=this._oFilterExpression.getURIFilterOptionValue();}Q=(f?f:null);break;}case"$orderby":{var S=null;if(this._oSortExpression){S=this._oSortExpression.getURIOrderByOptionValue();}Q=(S?S:null);break;}default:break;}return Q;},getURIToParameterValueSetEntries:function(s){var r=null;r=(s?s:"")+"/"+this._oParameter.getContainingParameterization().getEntitySet().getQName();var S=this.getURIQueryOptionValue("$select");var f=this.getURIQueryOptionValue("$filter");var a=this.getURIQueryOptionValue("$orderby");var u=r;var q=false;if(S){u+="?$select="+S;q=true;}if(this._oFilterExpression&&f){if(!q){u+="?";q=true;}else{u+="&";}u+="$filter="+f;}if(this._oSortExpression&&a){if(!q){u+="?";q=true;}else{u+="&";}u+="$orderby="+a;}return u;},_oParameter:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionMemberSetRequest=function(d,p){this._init(d,p);};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionMemberSetRequest.prototype={_init:function(d,p){this._oDimension=d;this._oParameterizationRequest=p;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null;},setParameterizationRequest:function(p){this._oParameterizationRequest=p;},includeDimensionTextAttributes:function(i,a){if(i!=null){this._oValueSetResult.text=i;}if(a!=null){this._oValueSetResult.attributes=a;}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oDimension.getContainingQueryResult().getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e);}return this._oFilterExpression;},setFilterExpression:function(f){this._oFilterExpression=f;},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e);}return this._oSortExpression;},setSortExpression:function(s){this._oSortExpression=s;},hasMasterDataAvailable:function(){return false;},getURIQueryOptionValue:function(q){var Q=null;switch(q){case"$select":{var s="";s+=(s==""?"":",")+this._oDimension.getKeyProperty().name;if(this._oValueSetResult.text==true&&this._oDimension.getTextProperty()){s+=(s==""?"":",")+this._oDimension.getTextProperty().name;}if(this._oValueSetResult.attributes){for(var i=-1,a;a=this._oValueSetResult.attributes[++i];){s+=(s==""?"":",")+this._oDimension.findAttributeByName(a).getName();}}Q=(s?s:null);break;}case"$filter":{var f=null;if(this._oFilterExpression){f=this._oFilterExpression.getURIFilterOptionValue();}Q=(f?f:null);break;}case"$orderby":{var S=null;if(this._oSortExpression){S=this._oSortExpression.getURIOrderByOptionValue();}Q=(S?S:null);break;}default:break;}return Q;},getURIToDimensionMemberEntries:function(s){var r=null;if(this._oDimension.getContainingQueryResult().getParameterization()){if(!this._oParameterizationRequest){throw"Missing parameterization request";}else{r=this._oParameterizationRequest.getURIToParameterizationEntry(s)+"/"+this._oDimension.getContainingQueryResult().getParameterization().getNavigationPropertyToQueryResult();}}else{r=(s?s:"")+"/"+this._oDimension.getContainingQueryResult().getEntitySet().getQName();}var S=this.getURIQueryOptionValue("$select");var f=this.getURIQueryOptionValue("$filter");var a=this.getURIQueryOptionValue("$orderby");var u=r;var q=false;if(S){u+="?$select="+S;q=true;}if(this._oFilterExpression&&f){if(!q){u+="?";q=true;}else{u+="&";}u+="$filter="+f;}if(this._oSortExpression&&a){if(!q){u+="?";q=true;}else{u+="&";}u+="$orderby="+a;}return u;},_oDimension:null,_oParameterizationRequest:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorTileUtils.smartBusinessUtil')){jQuery.sap.declare("sap.ushell.components.tiles.indicatorTileUtils.smartBusinessUtil");sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.util=sap.ushell.components.tiles.indicatorTileUtils.util||{};sap.ushell.components.tiles.indicatorTileUtils.util=(function(g,$){var f=function(){var o={};$.ajax({type:"GET",async:false,dataType:"json",url:"/sap/hba/apps/kpi/s/logic/__token.xsjs",headers:{"X-CSRF-Token":"Fetch"},success:function(d,s,x){o.userName=d.userName;o.token=x.getResponseHeader("X-CSRF-Token");},error:function(){$.sap.log.error("Error Fetching AUTH TOKEN");}});return o;};var a=function(s){var r=[];for(var i=0;i<s.length;i++){r.push(JSON.parse(s[i]));}return r;};"use strict";var c={};return{getAuthToken:function(){return f().token;},getHanaUser:function(){return authObject.userName;},getEdmType:function(u,p){var d=null;if(u instanceof sap.ui.model.odata.ODataModel){d=u;}else{d=this.getODataModelByServiceUri(u);}if(d&&d.getServiceMetadata()){var s=d.getServiceMetadata();var e=s.dataServices.schema[0].entityType;if(e){for(var i=0;i<e.length;i++){var b=e[i];var h=b.property;for(var j=0;j<h.length;j++){var k=h[j];if(k.name==p){return k.type;}}}}}return null;},getODataModelByServiceUri:function(s){s=this.addSystemToServiceUrl(s);if(!c[s]){var m=new sap.ui.model.odata.ODataModel(s,true);c[s]=m;}return c[s];},addSystemToServiceUrl:function(u,s){jQuery.sap.log.info("Hana Adapter --> Add System to Service Url");if(sap.ushell&&sap.ushell.Container){if(s){u=sap.ushell.Container.getService("URLParsing").addSystemToServiceUrl(u,s);}else{u=sap.ushell.Container.getService("URLParsing").addSystemToServiceUrl(u);}}return u;},getMantissaLength:function(n){var N=n.toString();var i=0;if(n<0){i=1;}return(N.indexOf('.')===-1)?(n<0?N.length-1:N.length):N.substring(i,N.indexOf('.')).length;},getLocaleFormattedValue:function(n,s,d,i,b){jQuery.sap.require("sap.ui.core.format.NumberFormat");i=i||false;b=b||null;if(i){return sap.ui.core.format.NumberFormat.getCurrencyInstance({style:"short",showMeasure:false}).format(n,b);}var D=2;var F={style:"short"};var N;if(!(d==-1||d==null)){F.shortDecimals=Number(d);F.minFractionDigits=Number(d);F.maxFractionDigits=Number(d);}var v=sap.ui.core.format.NumberFormat.getInstance(F);if(s==-2){if(n>9999){N="????";}else if(n<0.001){N="0";}else{if(n.toString().indexOf('.')!=-1){N=Number(n).toFixed(4-n.toString().indexOf('.'));}else{N=Number(n);}N=v.format(N);}}else if(d==-1||d==null){var m=this.getMantissaLength(n);if(!(m%3)){D=1;}if(m%3===1){D=3;}if(m%3===2){D=2;}if(Math.abs(n)%Math.pow(10,m-1)==0){D=0;}else if((Math.abs(n)%Math.pow(10,m-1))<6*Math.pow(10,m-4)){D=0;}v=sap.ui.core.format.NumberFormat.getInstance({style:"short",shortDecimals:D});N=v.format(n);}else{N=v.format(n);}return N;},getPlatform:function(p){return(jQuery.sap.getUriParameters().get("sb_metadata")||p||"HANA").toUpperCase();},getRunTimeUri:function(p){if(p.toUpperCase()=="HANA"){return"/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata";}return"/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV";},getTileTitleSubtitle:function(C){var t={};if(C.bag&&C.bag.getBagIds()&&C.bag.getBagIds().length){t.title=C.bag.getBag("sb_tileProperties").getText("title")||C.bag.getBag("sb_tileProperties").getProperty("title")||C.preview.getTitle();t.subTitle=C.bag.getBag("sb_tileProperties").getText("description")||C.bag.getBag("sb_tileProperties").getProperty("description")||C.preview.getDescription();}else{t.title=C.preview.getTitle();t.subTitle=C.preview.getDescription();}return t;},getModelerRuntimeServiceModel:function(){return this.getODataModelByServiceUri("/sap/hba/apps/kpi/s/odata/smart_business_runtime_services.xsodata");},getSapFontErrorCode:function(){return String.fromCharCode(0xe0b1);},getSapFontBusyCode:function(){return String.fromCharCode(0xe1f2);},prepareFilterStructure:function(b,d){var v=[];if(d){b=b.concat(d);}for(var i=0;i<b.length;i++){var p={};p.comparator=b[i].OPERATOR;p.filterPropertyName=b[i].NAME;if(b[i].ID){p.id=b[i].ID;}p.type=b[i].TYPE;p.value=b[i].VALUE_1;p.valueTo=b[i].VALUE_2;v.push(p);}return v;},getODataModelByServiceUriFromChipAPI:function(s,t){s=t.url.addSystemToServiceUrl(s);if(!c[s]){var m=new sap.ui.model.odata.ODataModel(s,true);c[s]=m;}return c[s];},getFilterFromRunTimeService:function(C,t,s,e){var p=C.TILE_PROPERTIES.sb_metadata;var K=this.getODataModelByServiceUriFromChipAPI(this.getRunTimeUri(p),t);var b="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",C.EVALUATION.ID);var k=K.read("/EVALUATION_FILTERS",null,{"$filter":b},true,function(d){var h=[];if(d.results.length){h=d.results;}s.call(this,h);},e);return k;},findTextPropertyForDimension:function(u,b,d){try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(b);var D=q.findDimensionByName(d);if(D.getTextProperty()){return D.getTextProperty().name;}else{return d;}}catch(e){$.sap.log.error("Error Fetching Text Property for "+d+" : "+e.toString());}},getEvalValueMeasureName:function(C,t,r){var e=C.EVALUATION_VALUES;for(var i=0;i<e.length;i++){if(e[i].TYPE==t){if(r==="FIXED"){return e[i].FIXED;}else{return e[i].COLUMN_NAME;}}}},getSemanticColorName:function(b){var s="";if(b=="Error"){s="sb.error";}if(b=="Neutral"){s="sb.neutral";}if(b=="Critical"){s="sb.critical";}if(b=="Good"){s="sb.good";}return s;},setTooltipInTile:function(C,t,v){var b="";var r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();if(t=="NT"||t=="DT"){if(v.status){b+=r.getText("sb.status")+": "+r.getText(v.status)+"\n";}if(v.actual){b+=r.getText("sb.actual")+": "+v.actual+"\n";}if(v.target){b+=r.getText("sb.target")+": "+v.target+"\n";}if(v.cH){b+=r.getText("sb.ch")+": "+v.cH+"\n";}if(v.wH){b+=r.getText("sb.wh")+": "+v.wH+"\n";}if(v.wL){b+=r.getText("sb.wl")+": "+v.wL+"\n";}if(v.cL){b+=r.getText("sb.cl")+": "+v.cL+"\n";}}if(t=="CONT"||t=="COMP"){if(v.measure&&t=="CONT"){b+=r.getText("sb.topn")+": "+v.measure+"\n";}if(v.m1&&((v.v1==undefined||v.v1==null)?false:v.v1.toString())&&v.c1){b+=v.m1+": "+v.v1+" "+r.getText(v.c1)+"\n";}if(v.m2&&((v.v2==undefined||v.v2==null)?false:v.v2.toString())&&v.c2){b+=v.m2+": "+v.v2+" "+r.getText(v.c2)+"\n";}if(v.m3&&((v.v3==undefined||v.v3==null)?false:v.v3.toString())&&v.c3){b+=v.m3+": "+v.v3+" "+r.getText(v.c3)+"\n";}}C.setTooltip(b);},_getFormattedTileProperties:function(t){t=t||{};var p=["sb_metadata","sb_navigation","sb_catalog"];var b=false;for(var i=0;!b&&i<p.length;i++){b=b||jQuery.sap.getUriParameters().get(p[i])||t[p[i]];}t.sb_metadata=(jQuery.sap.getUriParameters().get("sb_metadata")||t.sb_metadata||"HANA").toLowerCase();t.sb_navigation=(jQuery.sap.getUriParameters().get("sb_navigation")||t.sb_navigation||"abap").toLowerCase();t.sb_catalog=(jQuery.sap.getUriParameters().get("sb_catalog")||t.sb_catalog||"HANA").toLowerCase();t.isPlatformInfoPresent=b;return t;},getParsedChip:function(C,b){var p={};var d=JSON.parse(C);var e=JSON.parse(d.TILE_PROPERTIES).evaluationId||"";var t=this;if(d.TAGS){p["TAGS"]=JSON.parse(d.TAGS);}if(d.ADDITIONAL_FILTERS){p["ADDITIONAL_FILTERS"]=JSON.parse(d.ADDITIONAL_FILTERS);}if(d.ADDITIONAL_APP_PARAMETERS){p["ADDITIONAL_APP_PARAMETERS"]=JSON.parse(d.ADDITIONAL_APP_PARAMETERS);}p.TILE_PROPERTIES=this._getFormattedTileProperties(JSON.parse(d.TILE_PROPERTIES));var P=p.TILE_PROPERTIES.sb_metadata;if(d.EVALUATION_FILTERS){p["EVALUATION_FILTERS"]=JSON.parse(d.EVALUATION_FILTERS);if(d.EVALUATION_VALUES){p["EVALUATION_VALUES"]=JSON.parse(d.EVALUATION_VALUES);if(d.EVALUATION){p.EVALUATION=JSON.parse(d.EVALUATION);b(p);}else{t.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",P,e,function(h){p.EVALUATION=h;b(p);});}}else{t.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",P,e,function(h){p["EVALUATION_VALUES"]=h;if(d.EVALUATION){p.EVALUATION=JSON.parse(d.EVALUATION);b(p);}else{t.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",P,e,function(h){p.EVALUATION=h;b(p);});}});}}else{t.getEvaluationDetailsFromRunTimeService("/EVALUATION_FILTERS",P,e,function(h){p["EVALUATION_FILTERS"]=h;if(d.EVALUATION_VALUES){p["EVALUATION_VALUES"]=JSON.parse(d.EVALUATION_VALUES);if(d.EVALUATION){p.EVALUATION=JSON.parse(d.EVALUATION);b(p);}else{t.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",P,e,function(h){p.EVALUATION=h;b(p);});}}else{t.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",P,e,function(h){p["EVALUATION_VALUES"]=h;if(d.EVALUATION){p.EVALUATION=JSON.parse(d.EVALUATION);b(p);}else{t.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",P,e,function(h){p.EVALUATION=h;b(p);});}});}});}},getEvaluationDetailsFromRunTimeService:function(e,p,i,b){var K=this.getODataModelByServiceUri(this.getRunTimeUri(p));var d="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",i);var k=K.read(e,null,{"$filter":d},true,function(h){var j=[];if(h.results.length){j=h.results;}b.call(this,j);});},getNavigationTarget:function(C,s){var b=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService;var o=b&&b("CrossApplicationNavigation");var e;var p={};p["evaluationId"]=C.EVALUATION.ID;p["chipId"]=C.TILE_PROPERTIES.id;if(s){p["sap-system"]=s;}p["tileType"]=C.TILE_PROPERTIES.tileType;if(C.TILE_PROPERTIES.dimension){p["dimension"]=C.TILE_PROPERTIES.dimension;}if(C.TILE_PROPERTIES.storyId){p["storyId"]=C.TILE_PROPERTIES.storyId;}if(C.TILE_PROPERTIES.apfConfId){p["sap-apf-configuration-id"]=C.TILE_PROPERTIES.apfConfId;}if(C.TILE_PROPERTIES.isPlatformInfoPresent){p["sb_metadata"]=C.TILE_PROPERTIES.sb_metadata;p["sb_navigation"]=C.TILE_PROPERTIES.sb_navigation;p["sb_catalog"]=C.TILE_PROPERTIES.sb_catalog;}if(C.ADDITIONAL_APP_PARAMETERS){for(e in C.ADDITIONAL_APP_PARAMETERS){if(C.ADDITIONAL_APP_PARAMETERS.hasOwnProperty(e)){if(C.ADDITIONAL_APP_PARAMETERS[e].constructor==Array){var d=C.ADDITIONAL_APP_PARAMETERS[e];for(var i=0;i<d.length;i++){p[e]=d[i];}}else{p[e]=C.ADDITIONAL_APP_PARAMETERS[e];}}}}var t=o&&o.hrefForExternal({target:{semanticObject:C.TILE_PROPERTIES.semanticObject,action:C.TILE_PROPERTIES.semanticAction},params:p})||"";if(C.ADDITIONAL_FILTERS){var h=C.ADDITIONAL_FILTERS;var k="&";for(var j=0;j<h.length;j++){if(h[j].OPERATOR==="EQ"){k=k+"/"+h[j].NAME+"="+h[j].VALUE_1;}}t+=k;}return t;},getChipTitle:function(C){var t="";if(C){var b=C.EVALUATION||{};t=b.INDICATOR_TITLE||"";}return t;},getstringifyTileConfig:function(C){var s={};s.EVALUATION=JSON.stringify(C.EVALUATION);s.EVALUATION_FILTERS=JSON.stringify(C.EVALUATION_FILTERS);s.EVALUATION_VALUES=JSON.stringify(C.EVALUATION_VALUES);s.TILE_PROPERTIES=JSON.stringify(C.TILE_PROPERTIES);return JSON.stringify(s);},getChipSubTitle:function(C){var t="";if(C){var b=C.EVALUATION||{};t=b.TITLE||"";}return t;},getFormattingMetadata:function(u,e,p){var b={};b._hasCurrency=false;b._hasSapText=false;var m=null;if(u instanceof sap.ui.model.odata.ODataModel){m=sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(u);}else{var t=this.getODataModelByServiceUri(u);m=sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(t);}var O=new sap.ui.model.analytics.odata4analytics.Model(m);var q=O.findQueryResultByName(e);var d=q.getAllMeasures();if(d[p]){var s=(d[p]._oTextProperty&&d[p]._oTextProperty.name)?d[p]._oTextProperty.name:"";if(s!=""){b._hasSapText=true;b._sapTextColumn=s;}else if(d[p].hasOwnProperty("_oUnitProperty")){var h=d[p]._oUnitProperty.extensions;for(var i=0;i<d[p]._oUnitProperty.extensions.length;i++){if(h[i].name==="semantics"&&h[i].value==="currency-code"){b._hasCurrency=true;b._currencyColumn=d[p]._oUnitProperty.name;}}}}return b;},prepareQueryServiceUri:function(u,b,m,d,v,o,t){function _(R){return R.replace(/'/g,"''");}var h=null;try{var n=null;if(u instanceof sap.ui.model.odata.ODataModel){n=sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(u);}else{var p=this.getODataModelByServiceUri(u);n=sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(p);}var O=new sap.ui.model.analytics.odata4analytics.Model(n);var q=O.findQueryResultByName(b);var Q=new sap.ui.model.analytics.odata4analytics.QueryResultRequest(q);if(m){Q.setMeasures(m.split(","));Q.includeMeasureRawFormattedValueUnit(null,true,true,true);}if(d){if(typeof d=="string"){h=d;h=h.split(",");}for(var i=0;i<h.length;i++){Q.addToAggregationLevel([h[i]]);var r=q.getAllDimensions();if(r[h[i]].getTextProperty()!=null){Q.includeDimensionKeyTextAttributes([h[i]],true,true,null);}}}if(v&&v.length){var s=[];var w=[];for(var i=0,l=v.length;i<l;i++){var x=v[i];if(x.type==="PA"){w.push(x);}else if(x.type==="FI"){s.push(x);}}function A(R){var S=R.toJSON();var T=S.charAt(S.length-1).toUpperCase();if(T.charCodeAt(0)>=65&&T.charCodeAt(0)<=90){S=S.slice(0,-1);}return S;};function B(R){if(R){try{if(R==+R){R=window.parseInt(R);}var S=new Date(R);var T=S.getTime();if(isNaN(T)){return R;}else{return A(S);}}catch(e){}}return R;};if(s.length){var F=Q.getFilterExpression();for(var i=0,l=s.length;i<l;i++){var x=s[i];if(this.getEdmType(u,x.filterPropertyName)=="Edm.DateTime"){x.value=B(x.value);x.valueTo=B(x.valueTo);}if(x.comparator==sap.ui.model.FilterOperator.BT){F.addCondition(x.filterPropertyName,x.comparator,_(x.value),x.valueTo);}else{var C=x.value.split(",");for(var j=0,k=C.length;j<k;j++){F.addCondition(x.filterPropertyName,x.comparator,_(C[j].replace(/\^\|/g,",")),null);}}}}if(w.length){if(q.getParameterization()){var P=new sap.ui.model.analytics.odata4analytics.ParameterizationRequest(q.getParameterization());var D=q.getParameterization();var E,G,H,I,J;for(var y=0,z=w.length;y<z;y++){E=w[y];G=D.findParameterByName(E.filterPropertyName);if(G.isIntervalBoundary()===true&&G.isLowerIntervalBoundary()===true){J=G.getPeerIntervalBoundaryParameter();for(var i=0,l=w.length;i<l;i++){if(w[i].filterPropertyName===J.getName()){I=_(w[i].value);break;}}H=_(E.value);if(I){P.setParameterValue(E.filterPropertyName,H,I);}}else if(G.isIntervalBoundary()===true&&G.isLowerIntervalBoundary()===false){jQuery.sap.log.info("Future development");}else{P.setParameterValue(E.filterPropertyName,_(E.value));}}Q.setParameterizationRequest(P);}}}var K=Q.getURIToQueryResultEntries();if(o&&o.length){K=K+"&$orderby=";for(var y=0,z=o.length;y<z;y++){var L=o[y].sortOrder||"asc";if(L){K+=o[y].element+" "+L+",";}}K=K.slice(0,K.length-1);}if(t){K=K+"&$top="+t;}var M=q.getAllMeasures();var N=[];for(var i=0;i<m.split(",").length;i++){N.push(M[m.split(",")[i]].getUnitProperty());}return{uri:K,model:O.getODataModel(),unit:N};}catch(e){$.sap.log.error("Error Preparing Query Service Uri using OData4Analytics Library : "+e.toString());if(arguments.length){$.sap.log.error("Arguments Passed to this function");$.sap.log.error(arguments[0]+","+arguments[1]+","+arguments[2]+","+arguments[3]);}else{$.sap.log.error("NO Arguments passed to this function");}return null;}},_getOData4AnalyticsObject:function(u){var m=null;if(u instanceof sap.ui.model.odata.ODataModel){m=u;}else if(typeof u=="string"){m=this.getODataModelByServiceUri(u);}else{throw new Error("Invalid Input to Create ODataModel Object : "+u);}var O=new sap.ui.model.analytics.odata4analytics.Model(sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(m));return O;},getAllEntitySet:function(u){var b=[];try{var o=this._getOData4AnalyticsObject(u);b=o.getAllQueryResultNames();}catch(e){$.sap.log.error("Error fetching Enity Set : "+e.toString());}return b;},getAllMeasures:function(u,b){var m=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(b);m=q.getAllMeasureNames();}catch(e){$.sap.log.error("Error Fetching All Measures : "+e.toString());}return m;},getAllMeasuresWithLabelText:function(u,b){var m=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(b);var d=q.getAllMeasureNames();for(var i=0;i<d.length;i++){var h=d[i];g.oMeasure=q.findMeasureByName(h);m.push({key:h,value:oMeasure.getLabelText()});}}catch(e){$.sap.log.error("Error Fetching All Measures : "+e.toString());}return m;},getAllDimensions:function(u,b){function i(j,k){var l=0,m=0;var r=[];while(l<j.length&&m<k.length){if(j[l]<k[m]){l++;}else if(j[l]>k[m]){m++;}else{r.push(j[l]);l++;m++;}}return r;}var d=[];var F=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(b);var h=q.getEntityType();F=h.getFilterablePropertyNames();d=q.getAllDimensionNames();if(F&&F.length){d=i(F.sort(),d.sort());}}catch(e){$.sap.log.error("Error Fetching All Dimesions : "+e.toString());}return d;},getAllDimensionsWithLabelText:function(u,b){var d=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(b);var h=q.getAllDimensionNames();for(var i=0;i<h.length;i++){var j=h[i];var D=q.findDimensionByName(j);var t=null;if(D.getTextProperty()!=null){t=D.getTextProperty().name;}d.push({key:j,value:D.getLabelText(),textProperty:t});}}catch(e){$.sap.log.error("Error Fetching All Dimesions : "+e.toString());}return d;},getAllInputParams:function(u,b){var i=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(b);if(q.getParameterization()){var p=q.getParameterization();i=p.getAllParameterNames();}}catch(e){$.sap.log.error("Error Fetching Input Params : "+e.toString());}return i;},getAllInputParamsWithFlag:function(u,b){var d=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(b);if(q.getParameterization()){var p=q.getParameterization();var h=p.getAllParameterNames();for(var i=0;i<h.length;i++){var j=h[i];var k=p.findParameterByName(j);d.push({name:j,optional:k.isOptional()});}}}catch(e){$.sap.log.error("Error Fetching Input Params : "+e.toString());}return d;},formatOdataObjectToString:function(v){if(v&&v.constructor==Object){if(v.__edmType=="Edm.Time"){var m=v.ms;var s=Math.floor((m/1000)%60);var b=Math.floor((m/60000)%60);var h=Math.floor((m/3600000)%24);return h+"H"+b+"M"+s+"S";}}return v;},generateCombinations:function(b){function d(h,s){while(s.length<h){s='0'+s;}return s;}var m=Math.pow(2,b.length);var r=[];var e=0;while(m>1){var s=(m-1).toString(2);s=d(b.length,s);r[e]=[];for(var i=0;i<s.length;i++){if(Number(s[i])){r[e].push(b[i]);}}m--;e++;}return r;},logError:function(e,C){if(e=="no data"&&C){var r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();C.setFailedText(r.getText("sb.noData"));}jQuery.sap.log.error(e.toString());},numberOfLeadingZeros:function(n){n=String(n);var b=0;var d=n.indexOf('.');if(d==-1){return 0;}if(Number(n.split('.')[0])!=0){return 0;}var i=d+1;while(n[i++]=='0'){++b;}return b;},formatValue:function(v,s,M){M=M||3;var u={3:"K",6:"M",9:"B",12:"T",0:""};u["-3"]="m";u["-6"]="u";u["-9"]="n";u["-12"]="t";u["-2"]="%";var t,p,b;t=Number(v).toPrecision(M);var z=this.numberOfLeadingZeros(t);if(z>0&&s<0){p=t*Math.pow(10,z+M);b=-(z+M);}else{p=Number(t.split("e")[0]);b=Number(t.split("e")[1])||0;}if(!v&&v!=0){return{value:"",unitPrefix:""};}if(s>=0){if(b%3!=0){if(b%3==2){if(b+1==s){b=b+1;p=p/10;}else{b=b-2;p=p*100;}}else{if(b+2==s){b=b+2;p=p/100;}else{b--;p=p*10;}}}else if(b==15){p=p*1000;b=12;}}else{if(s=="-2"){var x=this.formatValue((v*100),0);}else if(b>=0&&v<10&&s=="-3"){p=v*Math.pow(10,3);b=-3;}else if(b>=0){return this.formatValue(v,0);}else{b=Math.abs(b);s=Math.abs(s);if(s>b){p=p/(Math.pow(10,b%3));b=b-(b%3);}else{var d=b-s;p=p/(Math.pow(10,d));b=b-d;}b=0-b;}}p+="";if(s=="-2"){var e=(x.unitPrefix=="")?Number(x.value+"").toFixed(4-(x.value+"").indexOf('.')):Number(x.value+"").toFixed(3-(x.value+"").indexOf('.'));return{value:Number(e),unitPrefix:(x.unitPrefix)+u[-2]};}p=Number(p).toFixed(4-p.indexOf('.'));return{value:Number(p),unitPrefix:u[b]};},getHanaClient:function(){var b;var e=sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED||jQuery.Deferred();var h=sap.ushell.components.tiles.indicatorTileUtils.cache.getCacheHanaClient();if(h!=undefined){b=h;sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.resolve(b);}else if(sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED){return sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.promise();}else{sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED=e;jQuery.ajax({type:"GET",async:false,dataType:"json",url:"/sap/hba/r/sb/core/logic/GetSessionClient.xsjs",success:function(d,s,x){b=d.sessionClient;sap.ushell.components.tiles.indicatorTileUtils.cache.setCacheHanaClient(b);sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.resolve(b);},error:function(j,t,d){jQuery.sap.log.error(j.responseText);jQuery.sap.log.error("session client call failed");sap.ushell.components.tiles.indicatorTileUtils.cache.setCacheHanaClient(null);sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.reject();}});}return sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.promise();},abortPendingODataCalls:function(d){try{if(d){d.abort();}}catch(e){this.logError(e);}}};})(window,jQuery);sap.ushell.components.tiles.indicatorTileUtils.cache=(function(){var B={};var K={};var s="HANA_CLIENT";return{getCacheHanaClient:function(){return B[s];},setCacheHanaClient:function(d){B[s]=d;},getEvaluationById:function(k){return this.getEvaluationByChipId(k);},getEvaluationByChipId:function(k){if(B[k]){return B[k];}return null;},setEvaluationById:function(k,d){B[k]=d;},getKpivalueById:function(k){if(K[k]){return K[k];}return null;},setKpivalueById:function(k,d){K[k]=d;}};})();};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorcomparison.ComparisonTile.view')){jQuery.sap.declare('sap.ushell.components.tiles.indicatorcomparison.ComparisonTile.view');(function(){"use strict";jQuery.sap.require('sap.ui.model.analytics.odata4analytics');jQuery.sap.require('sap.ca.ui.model.format.NumberFormat');sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorcomparison.ComparisonTile",{getControllerName:function(){return"tiles.indicatorcomparison.ComparisonTile";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var t=this;t.tileData;t.oGenericTileData={};t.oCmprsDataTmpl=new sap.suite.ui.commons.ComparisonData({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oCmprsChrtTmpl=new sap.suite.ui.commons.ComparisonChart({size:"{/size}",scale:"{/scale}",data:{template:t.oCmprsDataTmpl,path:"/data"}});t.oComparisonTile=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:t.oCmprsChrtTmpl});t.oGenericTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oComparisonTile]});t.oGenericTileModel=new sap.ui.model.json.JSONModel();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorcontribution.ContributionTile.view')){jQuery.sap.declare('sap.ushell.components.tiles.indicatorcontribution.ContributionTile.view');(function(){"use strict";jQuery.sap.require('sap.ui.model.analytics.odata4analytics');jQuery.sap.require('sap.ca.ui.model.format.NumberFormat');sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorcontribution.ContributionTile",{getControllerName:function(){return"tiles.indicatorcontribution.ContributionTile";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var t=this;t.tileData;t.oGenericTileData={};t.oCmprsDataTmpl=new sap.suite.ui.commons.ComparisonData({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oCmprsChrtTmpl=new sap.suite.ui.commons.ComparisonChart({size:"{/size}",scale:"{/scale}",data:{template:t.oCmprsDataTmpl,path:"/data"}});t.oComparisonTile=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:t.oCmprsChrtTmpl});t.oGenericTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oComparisonTile]});t.oGenericTileModel=new sap.ui.model.json.JSONModel();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatordeviation.DeviationTile.view')){jQuery.sap.declare('sap.ushell.components.tiles.indicatordeviation.DeviationTile.view');(function(){"use strict";jQuery.sap.require('sap.ui.model.analytics.odata4analytics');jQuery.sap.require('sap.ca.ui.model.format.NumberFormat');sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatordeviation.DeviationTile",{getControllerName:function(){return"tiles.indicatordeviation.DeviationTile";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var h="Lorem ipsum";var s="Lorem ipsum";var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(t.title&&t.subTitle){h=t.title;s=t.subTitle;}var d={subheader:s,header:h,footerNum:"",footerComp:"",frameType:"OneByOne",state:sap.suite.ui.commons.LoadState.Loading,scale:""};var b=new sap.suite.ui.commons.BulletChartData({value:"{value}",color:"{color}"});this.oBCTmpl=new sap.suite.ui.commons.BulletChart({size:sap.suite.ui.commons.InfoTileSize.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:b,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});var n=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oBCTmpl});this.oGenericTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[n]});var g=new sap.ui.model.json.JSONModel();g.setData(d);this.oGenericTile.setModel(g);return this.oGenericTile;}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatornumeric.NumericTile.view')){jQuery.sap.declare('sap.ushell.components.tiles.indicatornumeric.NumericTile.view');(function(){"use strict";jQuery.sap.require('sap.ui.model.analytics.odata4analytics');jQuery.sap.require('sap.ca.ui.model.format.NumberFormat');sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatornumeric.NumericTile",{getControllerName:function(){return"tiles.indicatornumeric.NumericTile";},createContent:function(c){var h="Lorem ipsum";var s="Lorem ipsum";var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(t.title&&t.subTitle){h=t.title;s=t.subTitle;}var g={subheader:s,header:h,footerNum:"",footerComp:"",scale:"",unit:"",value:"",size:"Auto",frameType:"OneByOne",state:sap.suite.ui.commons.LoadState.Loading,valueColor:sap.suite.ui.commons.InfoTileValueColor.Neutral,indicator:sap.suite.ui.commons.DeviationIndicator.None,title:"",footer:"",description:""};this.oNVConfContS=new sap.suite.ui.commons.NumericContent({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",valueColor:"{/valueColor}",size:"{/size}",formatterValue:true,truncateValueTo:5,nullifyValue:false});var n=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oNVConfContS});this.oGenericTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[n]});var G=new sap.ui.model.json.JSONModel();G.setData(g);this.oGenericTile.setModel(G);return this.oGenericTile;}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.utils')){this.sap=this.sap||{};(function(){"use strict";jQuery.sap.declare("sap.ushell.components.tiles.utils");sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles=sap.ushell.components.tiles||{};sap.ushell.components.tiles.utils=sap.ushell.components.tiles.utils||{};if(sap.ushell.components.tiles.utils.getConfiguration){return;}sap.ushell.components.tiles.utils.isInitial=function(T){return T==="App Launcher – Static"||T==="App Launcher – Dynamic"||T==="Target Mapping";};sap.ushell.components.tiles.utils.getResourceBundleModel=function(){jQuery.sap.require("sap.ushell.resources");return sap.ushell.resources.i18nModel;};sap.ushell.components.tiles.utils.getConfiguration=function(T,a,e){var r;var C=T.configuration.getParameterValueAsString('tileConfiguration');var o=JSON.parse(C||"{}");o.editable=true;if(T.configurationUi&&T.configurationUi.isReadOnly){if(T.configurationUi.isReadOnly()){o.editable=false;}}var s=sap.ushell.components.tiles.utils.getTranslatedTitle(T);var S=sap.ushell.components.tiles.utils.getTranslatedSubtitle(T,o);var i=sap.ushell.components.tiles.utils.getTranslatedProperty(T,o,'display_info_text');var k=sap.ushell.components.tiles.utils.getTranslatedProperty(T,o,'display_search_keywords');if(a){r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();if(e&&T.bag){var b=T.bag.getOriginalLanguage();var u=sap.ui.getCore().getConfiguration().getLanguage();o.isLocaleSuitable=b===""||b.toLowerCase()===u.toLowerCase();o.orgLocale=b;o.userLocale=u;}}o.display_icon_url=o.display_icon_url||"";if(i!==undefined){o.display_info_text=i;}else if(o.display_info_text===undefined){if(a&&!e){o.display_info_text="["+r.getText("configuration.display_info_text")+"]";}else{o.display_info_text="";}}o.navigation_semantic_object=o.navigation_semantic_object||"";o.navigation_semantic_action=o.navigation_semantic_action||"";o.navigation_semantic_parameters=o.navigation_semantic_parameters||"";o.display_number_unit=o.display_number_unit||"";o.display_number_factor=o.display_number_factor||"";o.service_refresh_interval=o.service_refresh_interval?parseInt(o.service_refresh_interval,10):0;o.service_url=o.service_url||"";o.navigation_target_url=o.navigation_target_url||"";if(a&&sap.ushell.components.tiles.utils.isInitial(s)){o.display_title_text=e?"":"["+r.getText("configuration.display_title_text")+"]";o.display_subtitle_text=e?"":"["+r.getText("configuration.display_subtitle_text")+"]";}else{o.display_title_text=s||o.display_title_text||"";if(S!==undefined){o.display_subtitle_text=S;}else if(o.display_subtitle_text===undefined){o.display_subtitle_text="";}}o.navigation_use_semantic_object=(o.navigation_use_semantic_object===false?false:true);o.display_search_keywords=k||o.display_search_keywords||"";if(a){o.display_number_value=o.display_number_value||1234;}o.form_factors=o.form_factors?o.form_factors:this.getDefaultFormFactors();o.desktopChecked=o.form_factors.manual.desktop;o.tabletChecked=o.form_factors.manual.tablet;o.phoneChecked=o.form_factors.manual.phone;o.manualFormFactor=!(o.form_factors.appDefault)&&o.editable;o.appFormFactor=o.form_factors.appDefault;o.formFactorConfigDefault=o.form_factors.defaultParam?true:false;o.rows=(o.mapping_signature&&o.mapping_signature!=="*=*")?this.getMappingSignatureTableData(o.mapping_signature,e&&o.editable):[this.getEmptyRowObj(o.editable)];o.isUnknownAllowed=(o.mapping_signature!==undefined)?this.getAllowUnknownParametersValue(o.mapping_signature):true;if(a){o.tile_actions_rows=this.getTileNavigationActionsRows(T,o.editable);}else{if(!o.actions){o.actions=this.getTileNavigationActions(T);}}return o;};sap.ushell.components.tiles.utils.getEmptyRowObj=function(e){return{name:"",mandatory:false,value:"",isRegularExpression:false,defaultValue:"",valEnabled:false||!e,defValEnabled:true,editable:e};};sap.ushell.components.tiles.utils.getEmptyTileActionsRowObj=function(e){var r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();return{menu_title:"",target_type:r.getText("configuration.tile_actions.table.target_type.url"),navigation_target:"",action:"",icon:"",isTargetTypeIntent:false,editable:e};};sap.ushell.components.tiles.utils.getTileNavigationActionsRows=function(T,e){var a=[],b=[];b=this.getTileNavigationActions(T);if(b.length){for(var i=0;i<b.length;i++){a.push(t(b[i],e));}}else{a=[this.getEmptyTileActionsRowObj(e)];}return a;};sap.ushell.components.tiles.utils.getTileNavigationActions=function(T){var a=[],s='';var b=T.bag.getBag('tileNavigationActions');if(b.getPropertyNames().indexOf('tile_navigation_actions')>=0){a=JSON.parse(b.getProperty('tile_navigation_actions'));for(var i=0;i<a.length;i++){if(a[i].text){if(b.getTextNames().indexOf('action_tile_'+(i+1))>=0){s=b.getText('action_tile_'+(i+1));}a[i].text=s;}}}return a;};var t=function(T,e){var a={},r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();a.menu_title=T.text;a.icon=T.icon;if((T.targetURL).charAt(0)==="#"){a.target_type=r.getText("configuration.tile_actions.table.target_type.intent");var n=T.targetURL.split("-");a.navigation_target=n[0].substring(1,n[0].length);a.action=n[1];a.isTargetTypeIntent=true;}else{a.target_type=r.getText("configuration.tile_actions.table.target_type.url");a.navigation_target=T.targetURL;a.action="";a.isTargetTypeIntent=false;}a.editable=e;return a;};sap.ushell.components.tiles.utils.tileActionsRows2TileActionsArray=function(T){var a=[];for(var i=0;i<T.length;i++){if(T[i].menu_title){a.push(c(T[i]));}}return a;};var c=function(T){var o={};o.text=T.menu_title;o.icon=T.icon;if(T.action){o.targetURL="#"+T.navigation_target+"-"+T.action;}else{o.targetURL=T.navigation_target;}return o;};sap.ushell.components.tiles.utils.populateTileNavigationActionsBag=function(a,n){a.setProperty('tile_navigation_actions',JSON.stringify(n));for(var i=0;i<n.length;i++){var A=n[i].text;a.setText('action_tile_'+(i+1),A);}};sap.ushell.components.tiles.utils.getDefaultFormFactors=function(){return{"appDefault":false,"manual":{"desktop":true,"tablet":true,"phone":true},"defaultParam":true};};sap.ushell.components.tiles.utils.buildFormFactorsObject=function(m){return{"appDefault":m.getProperty("/config/appFormFactor"),"manual":{"desktop":m.getProperty("/config/desktopChecked"),"tablet":m.getProperty("/config/tabletChecked"),"phone":m.getProperty("/config/phoneChecked")}};};sap.ushell.components.tiles.utils.tableHasDuplicateParameterNames=function(T){var p={};for(var i=0;i<T.length;i++){var a=T[i].name;if(a!==""){if(p[a]){return true;}else{p[a]=true;}}}return false;};sap.ushell.components.tiles.utils.getMappingSignatureString=function(a,b){var m="";for(var i=0;i<a.length;i++){if(a[i].name){m+=(g(a[i])+"&");}}return b?m+"*=*":m.substring(0,m.length-1);};var g=function(a){var p="";if(a.mandatory){if(a.isRegularExpression){p="{"+a.name+"="+encodeURIComponent(a.value)+"}";}else{p=a.name+"="+encodeURIComponent(a.value);}}else{p="["+a.name+"="+encodeURIComponent(a.defaultValue)+"]";}return p;};sap.ushell.components.tiles.utils.getMappingSignatureTableData=function(m,e){var p=[];var a=m.split("&");for(var i=0;i<a.length;i++){var b=a[i];if(b!=="*=*"){p.push(d(a[i],e));}}return p;};var d=function(p,e){var a={};if(p.charAt(0)==="["){a.mandatory=false;a.isRegularExpression=false;a.value="";p=p.substring(1,p.length-1);a.name=p.substring(0,p.indexOf("="));a.defaultValue=decodeURIComponent(p.substring(p.indexOf("=")+1));}else{a.mandatory=true;a.defaultValue="";if(p.charAt(0)==="{"){a.isRegularExpression=true;p=p.substring(1,p.length-1);}else{a.isRegularExpression=false;}a.name=p.substring(0,p.indexOf("="));a.value=decodeURIComponent(p.substring(p.indexOf("=")+1));}a.editable=e;if(e){a.valEnabled=a.mandatory;a.defValEnabled=!a.mandatory;}else{a.valEnabled=true;a.defValEnabled=true;}return a;};sap.ushell.components.tiles.utils.getAllowUnknownParametersValue=function(m){if(m&&(m.substring(m.length-3,m.length)==="*=*")){return true;}else{return false;}};sap.ushell.components.tiles.utils.getTranslatedTitle=function(T){if(T.bag){var b=T.bag.getBag('tileProperties');if(b.getTextNames().indexOf("display_title_text")>=0){return b.getText('display_title_text');}}if(T.title){return T.title.getTitle();}if(T.preview){return T.preview.getTitle();}return"";};sap.ushell.components.tiles.utils.getTranslatedSubtitle=function(T,C){if(T.bag){var b=T.bag.getBag('tileProperties');if(b.getTextNames().indexOf("display_subtitle_text")>=0){return b.getText('display_subtitle_text');}}if(T.preview&&T.preview.getDescription&&T.preview.getDescription()){return T.preview.getDescription();}return C['display_subtitle_text'];};sap.ushell.components.tiles.utils.getTranslatedProperty=function(T,o,p){if(T.bag){var b=T.bag.getBag('tileProperties');if(b.getTextNames().indexOf(p)>=0){return b.getText(p);}}return o[p];};sap.ushell.components.tiles.utils.getActionConfiguration=function(T,a){var C=T.configuration.getParameterValueAsString('tileConfiguration');var o=JSON.parse(C||"{}"),r;if(typeof a=="undefined"){a=T.configurationUi.isEnabled();}if(a){r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();}o.semantic_object=o.semantic_object||(a?"["+r.getText("configuration.semantic_object")+"]":"");o.semantic_action=o.semantic_action||(a?"["+r.getText("configuration.semantic_action")+"]":"");o.navigation_provider=o.navigation_provider||"";o.navigation_provider_role=o.navigation_provider_role||"";o.navigation_provider_instance=o.navigation_provider_instance||"";o.target_application_id=o.target_application_id||"";o.target_application_alias=o.target_application_alias||"";o.display_info_text=o.display_info_text||"";o.editable=true;if(T.configurationUi&&T.configurationUi.isReadOnly){if(T.configurationUi.isReadOnly()){o.editable=false;}}return o;};sap.ushell.components.tiles.utils.getConfigurationUi=function(v,V){var o=v.getViewData();var T=o.chip;var C,s,r,i,a,A;var b=sap.ushell.components.tiles.utils.getConfiguration(T,true,true);var e=new sap.ui.model.json.JSONModel({config:b,tileModel:v.getModel()});C=new sap.ui.view({type:sap.ui.core.mvc.ViewType.XML,viewData:o,viewName:V});C.setModel(e);s=C.byId("navigation_semantic_objectInput")||C.byId("semantic_objectInput");if(s){s.getModel().setProperty("/enabled",b.navigation_use_semantic_object);s.getModel().setProperty("/value",b.semantic_object||b.navigation_semantic_object);}r=C.byId("navigation_provider_roleInput");if(r){r.getModel().setProperty("/value",b.navigation_provider_role);}i=C.byId("navigation_provider_instanceInput");if(i){i.getModel().setProperty("/value",b.navigation_provider_instance);}a=C.byId("target_application_aliasInput");if(a){a.getModel().setProperty("/value",b.target_application_alias);}A=C.byId("targetTypeInput");if(A){if(!C.getModel().getProperty("/config/transaction")){C.getModel().setProperty("/config/transaction",{});}if(!C.getModel().getProperty("/config/web_dynpro")){C.getModel().setProperty("/config/web_dynpro",{});}if(v.getModel().getProperty('/config/navigation_provider')=="LPD"){sap.ushell.components.tiles.utils.displayLpdCustApplicationTypeFields(C);}else if(v.getModel().getProperty('/config/navigation_provider')=="SAPUI5"||v.getModel().getProperty('/config/navigation_provider')==''){A.setSelectedKey("SAPUI5");sap.ushell.components.tiles.utils.displaySapui5ApplicationTypeFields(C);}else if(v.getModel().getProperty('/config/navigation_provider')=="TR"){sap.ushell.components.tiles.utils.displayTransactionApplicationTypeFields(C);}else if(v.getModel().getProperty('/config/navigation_provider')=="WDA"){sap.ushell.components.tiles.utils.displayWebDynproApplicationTypeFields(C);}else if(v.getModel().getProperty('/config/navigation_provider')=="URL"){sap.ushell.components.tiles.utils.displayURLApplicationTypeFields(C);}}return C;};sap.ushell.components.tiles.utils.getDataToDisplay=function(C,D){var a=0,i,n,o,s,b={display_icon_url:D.icon||C.display_icon_url||"",display_title_text:D.title||C.display_title_text||"",display_number_value:!isNaN(D.number)?D.number:"...",display_number_unit:D.numberUnit||C.display_number_unit||"",display_info_text:D.info||C.display_info_text||"",display_info_state:D.infoState||"Neutral",display_subtitle_text:D.subtitle||C.display_subtitle_text||"",display_state_arrow:D.stateArrow||"None",display_number_state:D.numberState||"Neutral",display_number_digits:D.numberDigits>=0?D.numberDigits:4,display_number_factor:D.numberFactor||"",display_search_keyword:D.keywords||C.display_search_keyword||"",targetParams:[]};if(D.infoStatus){b.display_info_state=D.infoStatus;}if(D.targetParams){b.targetParams.push(D.targetParams);}if(D.results){for(i=0,n=D.results.length;i<n;i=i+1){o=D.results[i].number||0;if(typeof o==="string"){o=parseInt(o,10);}a=a+o;s=D.results[i].targetParams;if(s){b.targetParams.push(s);}}b.display_number_value=a;}return b;};sap.ushell.components.tiles.utils.getSemanticNavigationUrl=function(C){var u="#"+jQuery.trim(C.navigation_semantic_object);u+="-"+jQuery.trim(C.navigation_semantic_action);if(C.navigation_semantic_parameters&&jQuery.trim(C.navigation_semantic_parameters).length>0){u+="?"+jQuery.trim(C.navigation_semantic_parameters);}return u;};sap.ushell.components.tiles.utils.addParamsToUrl=function(u,D){var p="",U=u.indexOf("?")!==-1,T=D.targetParams,i;if(T&&T.length>0){for(i=0;i<T.length;i=i+1){p+=T[i];if(i<T.length-1){p+="&";}}}if(p.length>0){if(!U){u+="?";}else{u+="&";}u+=p;}return u;};sap.ushell.components.tiles.utils.aData=[];sap.ushell.components.tiles.utils.aActionData=[];sap.ushell.components.tiles.utils.aRoleData=[];sap.ushell.components.tiles.utils.aAliasData=[];sap.ushell.components.tiles.utils.objectSelectDoSearch=function(e){var f=[],v=e.getParameter("value"),i,s,a;if(v!==undefined){i=e.getParameter("itemsBinding");s=new sap.ui.model.Filter("name",sap.ui.model.FilterOperator.Contains,v);a=new sap.ui.model.Filter("obj",sap.ui.model.FilterOperator.Contains,v);f.push(a);f.push(s);i.filter(new sap.ui.model.Filter(f,false));}};sap.ushell.components.tiles.utils.actionSelectDoSearch=function(e){var f=[],v=e.getParameter("value"),i,s;if(v!==undefined){i=e.getParameter("itemsBinding");s=new sap.ui.model.Filter("text",sap.ui.model.FilterOperator.Contains,v);f.push(s);i.filter(new sap.ui.model.Filter(f,false));}};sap.ushell.components.tiles.utils.roleSelectDoSearch=function(e){var f=[],v=e.getParameter("value"),i,s,a;if(v!==undefined){i=e.getParameter("itemsBinding");s=new sap.ui.model.Filter("role",sap.ui.model.FilterOperator.Contains,v);a=new sap.ui.model.Filter("instance",sap.ui.model.FilterOperator.Contains,v);f.push(s);f.push(a);i.filter(new sap.ui.model.Filter(f,false));}};sap.ushell.components.tiles.utils.instanceSelectDoSearch=function(e){var f=[],v=e.getParameter("value"),a,r,i,s,b;a=e.getSource().getCustomData();r=a[0].getValue();if(v!==undefined){i=e.getParameter("itemsBinding");if(v!=""){b=new sap.ui.model.Filter("instance",sap.ui.model.FilterOperator.Contains,v);f.push(b);}if(r!=""){s=new sap.ui.model.Filter("role",sap.ui.model.FilterOperator.EQ,r);f.push(s);}if(f.length>0){i.filter(new sap.ui.model.Filter(f,true));}}};sap.ushell.components.tiles.utils.instanceSuggest=function(C,e){var v=C.getView(),f=[],V=e.getParameter("value"),r,R,s,a,b;r=v.byId("navigation_provider_roleInput");R=r.getValue();V=e.getParameter("suggestValue");if(V!=""){b=new sap.ui.model.Filter("instance",sap.ui.model.FilterOperator.Contains,V);f.push(b);}if(R!=""){a=new sap.ui.model.Filter("role",sap.ui.model.FilterOperator.EQ,R);f.push(a);}if(f.length>0){s=e.oSource.getBinding("suggestionItems");s.filter(new sap.ui.model.Filter(f,true));}};sap.ushell.components.tiles.utils.aliasSuggest=function(C,e){var v=C.getView(),f=[],V=e.getParameter("value"),i,I,s,a,b;i=v.byId("navigation_provider_instanceInput");I=i.getValue();V=e.getParameter("suggestValue");if(V!=""){b=new sap.ui.model.Filter("alias",sap.ui.model.FilterOperator.Contains,V);f.push(b);}if(I!=""){a=new sap.ui.model.Filter("instance",sap.ui.model.FilterOperator.EQ,I);f.push(a);}if(f.length>0){s=e.oSource.getBinding("suggestionItems");s.filter(new sap.ui.model.Filter(f,true));}};sap.ushell.components.tiles.utils.aliasSelectDoSearch=function(e){var f=[],v=e.getParameter("value"),a,i,b,s,h;a=e.getSource().getCustomData();i=a[0].getValue();if(v!==undefined){b=e.getParameter("itemsBinding");s=new sap.ui.model.Filter("instance",sap.ui.model.FilterOperator.EQ,i);if(v!=""){h=new sap.ui.model.Filter("alias",sap.ui.model.FilterOperator.Contains,v);f.push(h);}f.push(s);b.filter(new sap.ui.model.Filter(f,true));}};sap.ushell.components.tiles.utils.objectSelectUpdateDialog=function(s,v){var f=[],i=s.getBinding("items"),a;if(v!==undefined){a=new sap.ui.model.Filter("name",sap.ui.model.FilterOperator.Contains,v);f.push(a);i.filter(f);}};sap.ushell.components.tiles.utils.actionSelectUpdateDialog=function(s,v){var f=[],i=s.getBinding("items"),a;if(v!==undefined){a=new sap.ui.model.Filter("text",sap.ui.model.FilterOperator.Contains,v);f.push(a);i.filter(f);}};sap.ushell.components.tiles.utils.roleSelectUpdateDialog=function(s,v){var f=[],i=s.getBinding("items"),a;if(v!==undefined){a=new sap.ui.model.Filter("role",sap.ui.model.FilterOperator.Contains,v);f.push(a);i.filter(f);}};sap.ushell.components.tiles.utils.instanceSelectUpdateDialog=function(s,v){var f=[],a,i=s.getBinding("items"),b,r,e;a=s.getCustomData();r=a[0].getValue();if(v!==undefined){b=new sap.ui.model.Filter("instance",sap.ui.model.FilterOperator.Contains,v);f.push(b);}if(r!==""){e=new sap.ui.model.Filter("role",sap.ui.model.FilterOperator.EQ,r);f.push(e);}if(f.length>0){i.filter(f,true);}};sap.ushell.components.tiles.utils.aliasSelectUpdateDialog=function(s,v){var f=[],a,i,b=s.getBinding("items"),e,h;a=s.getCustomData();i=a[0].getValue();if(v!==undefined){h=new sap.ui.model.Filter("alias",sap.ui.model.FilterOperator.Contains,v);f.push(h);}if(i!==""){e=new sap.ui.model.Filter("instance",sap.ui.model.FilterOperator.EQ,i);f.push(e);}if(f.length>0){b.filter(f,true);}};sap.ushell.components.tiles.utils.sSelectedColor=(jQuery(".sapMStdTileIconDiv").css('color')||"#007cc0").split(" ").join("");sap.ushell.components.tiles.utils.sDeselectedColor=(jQuery(".sapMLabel:not(.sapFioriDropZoneText )").css('color')||"#666666").split(" ").join("");sap.ushell.components.tiles.utils.iconSelect=function(i,s){i.setColor(s?sap.ushell.components.tiles.utils.sSelectedColor:sap.ushell.components.tiles.utils.sDeselectedColor);i.setActiveColor(s?sap.ushell.components.tiles.utils.sDeselectedColor:sap.ushell.components.tiles.utils.sSelectedColor);};sap.ushell.components.tiles.utils.onSelectIcon=function(C,i,T,o){var m=C.getView().getModel(),s;if(i){s=m.getProperty("/config/tile_actions_selected_icon");}else{s=m.getProperty("/config/selected_icon");}if(s){sap.ushell.components.tiles.utils.iconSelect(s,false);}s=o.getSource();sap.ushell.components.tiles.utils.iconSelect(s,true);m.setProperty("/config/ok.enabled",true);if(i){m.setProperty("/config/tile_actions_selected_icon",s);T.setValue(s.getSrc());}else{m.setProperty("/config/selected_icon",s);}C.byId("selectIconDialog").setTitle(s.getSrc());};sap.ushell.components.tiles.utils.onSelectIconClose=function(v){v.byId("selectIconDialog").close();};sap.ushell.components.tiles.utils.onSelectIconOk=function(v){var s=v.getModel().getProperty("/config/selected_icon");if(s){v.getModel().setProperty("/config/display_icon_url",s.getSrc());}sap.ushell.components.tiles.utils.onSelectIconClose(v);};sap.ushell.components.tiles.utils.iconSelectOnValueHelpRequest=function(C,e,a){var m=C.getView().getModel(),r=C.getView().byId("icons"),b=sap.ui.core.IconPool.getIconCollectionNames(),f,D=C.getView().byId("selectIconDialog"),I,T,h,i,j,u,B=false;r.destroyContent();if(a){T=sap.ui.getCore().byId(e.getParameter('id'));I=T.getValue();}else{I=m.getProperty("/config/display_icon_url");}b.sort();b=jQuery.grep(b,function(v){if(v==="BusinessSuiteInAppSymbols"){B=true;return false;}return true;});if(B){b.push("BusinessSuiteInAppSymbols");}for(i=0;i<b.length;i+=1){h=sap.ui.core.IconPool.getIconNames(b[i]);h.sort();for(j=0;j<h.length;j+=1){u=sap.ui.core.IconPool.getIconURI(h[j],b[i]);r.addContent(new sap.ui.core.Icon({height:"38px",press:sap.ushell.components.tiles.utils.onSelectIcon.bind(null,C,a,T),size:"2rem",src:u,tooltip:u,width:"38px"}));}}f=r.getContent();m.setProperty("/config/ok.enabled",false);D.bindProperty("title",{model:"i18n",path:"configuration.select_icon"});for(i=0;i<f.length;i+=1){if(f[i].getSrc()===I){if(a){m.setProperty("/config/tile_actions_selected_icon",f[i]);}else{m.setProperty("/config/selected_icon",f[i]);}sap.ushell.components.tiles.utils.iconSelect(f[i],true);m.setProperty("/config/ok.enabled",true);D.setTitle(I);}else{sap.ushell.components.tiles.utils.iconSelect(f[i],false);}}D.open();};sap.ushell.components.tiles.utils.objectSelectOnValueHelpRequest=function(C,e,i){var v=C.getView(),T=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_object"),s,V,S=new sap.ui.model.json.JSONModel(),o=new sap.m.SelectDialog("semantic_object_select_dialog",{title:T,search:sap.ushell.components.tiles.utils.objectSelectDoSearch,liveChange:sap.ushell.components.tiles.utils.objectSelectDoSearch}),a=new sap.m.StandardListItem({title:"{obj}"});if(i){s=sap.ui.getCore().byId(e.getParameter('id'));}else{s=v.byId("semantic_objectInput")||v.byId("navigation_semantic_objectInput");}V=s.getValue();o.open(V);S.setData(C.aDefaultObjects.concat(sap.ushell.components.tiles.utils.aData));o.bindAggregation("items","/",a);o.setModel(S);sap.ushell.components.tiles.utils.objectSelectUpdateDialog(o,V);o.attachCancel(function(b){s.setValue(V);if(!i){s.fireChange();}o.destroy();o=null;});o.attachConfirm(function(b){var f=b.getParameter("selectedItem");if(f){s.setValue(f.getTitle());if(!i){s.fireChange();}}o.destroy();o=null;});};sap.ushell.components.tiles.utils.actionSelectOnValueHelpRequest=function(C,e,i){var v=C.getView(),T=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_action"),a,V,s=new sap.ui.model.json.JSONModel(),S=new sap.m.SelectDialog("semantic_action_select_dialog",{title:T,search:sap.ushell.components.tiles.utils.actionSelectDoSearch,liveChange:sap.ushell.components.tiles.utils.actionSelectDoSearch}),b=new sap.m.StandardListItem({title:"{text}"});if(i){a=sap.ui.getCore().byId(e.getParameter('id'));}else{a=v.byId("semantic_actionInput")||v.byId("navigation_semantic_actionInput");}V=a.getValue();S.open(V);s.setData(sap.ushell.components.tiles.utils.aActionData);S.bindAggregation("items","/items",b);S.setModel(s);sap.ushell.components.tiles.utils.actionSelectUpdateDialog(S,V);S.attachCancel(function(f){a.setValue(V);if(!i){a.fireChange();}S.destroy();S=null;});S.attachConfirm(function(f){var h=f.getParameter("selectedItem");if(h){a.setValue(h.getTitle());if(!i){a.fireChange();a.fireLiveChange({"newValue":h.getTitle()});}}S.destroy();S=null;});};sap.ushell.components.tiles.utils.roleSelectOnValueHelpRequest=function(C,e){var v=C.getView(),T=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role"),r,i,V,s=new sap.ui.model.json.JSONModel(),S=new sap.m.TableSelectDialog("role_select_dialog",{title:T,search:sap.ushell.components.tiles.utils.roleSelectDoSearch,liveChange:sap.ushell.components.tiles.utils.roleSelectDoSearch,columns:[new sap.m.Column({header:[new sap.m.Text({text:sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role")})]}),new sap.m.Column({header:[new sap.m.Text({text:sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance")})]})]}),a=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:"{role}"}),new sap.m.Text({text:"{instance}"})]});r=v.byId("navigation_provider_roleInput");i=v.byId("navigation_provider_instanceInput");V=r.getValue();S.open(V);s.setData(C.aDefaultObjects.concat(sap.ushell.components.tiles.utils.aRoleData));S.bindAggregation("items","/",a);S.setModel(s);sap.ushell.components.tiles.utils.roleSelectUpdateDialog(S,V);S.attachCancel(function(b){r.setValue(V);r.fireChange();S.destroy();S=null;});S.attachConfirm(function(b){var f=b.getParameter("selectedItem");if(f){r.setValue(f.getCells()[0].getText());i.setValue(f.getCells()[1].getText());r.fireChange();i.fireChange();}S.destroy();S=null;});};sap.ushell.components.tiles.utils.instanceSelectOnValueHelpRequest=function(C,e){var v=C.getView(),r,T=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance"),i,V,s=new sap.ui.model.json.JSONModel(),S=new sap.m.SelectDialog("instance_select_dialog",{title:T,search:sap.ushell.components.tiles.utils.instanceSelectDoSearch,liveChange:sap.ushell.components.tiles.utils.instanceSelectDoSearch}),a=new sap.m.StandardListItem({title:"{instance}"});i=v.byId("navigation_provider_instanceInput");V=i.getValue();r=v.byId("navigation_provider_roleInput").getValue();S.addCustomData(new sap.ui.core.CustomData({key:"role",value:r}));S.open(V);s.setData(C.aDefaultObjects.concat(sap.ushell.components.tiles.utils.aRoleData));S.bindAggregation("items","/",a);S.setModel(s);sap.ushell.components.tiles.utils.instanceSelectUpdateDialog(S,V);S.attachCancel(function(b){i.setValue(V);i.fireChange();S.destroy();S=null;});S.attachConfirm(function(b){var f=b.getParameter("selectedItem");if(f){i.setValue(f.getTitle());i.fireChange();}S.destroy();S=null;});};sap.ushell.components.tiles.utils.applicationAliasSelectOnValueHelpRequest=function(C,e){var v=C.getView(),T=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle().getText("configuration.target_application_alias"),a,V,i,s=new sap.ui.model.json.JSONModel(),S=new sap.m.SelectDialog("alias_select_dialog",{title:T,search:sap.ushell.components.tiles.utils.aliasSelectDoSearch,liveChange:sap.ushell.components.tiles.utils.aliasSelectDoSearch}),b=new sap.m.StandardListItem({title:"{alias}"});a=v.byId("target_application_aliasInput");V=a.getValue();i=v.byId("navigation_provider_instanceInput").getValue();S.addCustomData(new sap.ui.core.CustomData({key:"instance",value:i}));S.open(V);s.setData(C.aDefaultObjects.concat(sap.ushell.components.tiles.utils.aAliasData));S.bindAggregation("items","/",b);S.setModel(s);sap.ushell.components.tiles.utils.aliasSelectUpdateDialog(S,V);S.attachCancel(function(f){a.setValue(V);a.fireChange();S.destroy();S=null;});S.attachConfirm(function(f){var h=f.getParameter("selectedItem");if(h){a.setValue(h.getTitle());a.fireChange();}S.destroy();S=null;});};sap.ushell.components.tiles.utils.onTargetTypeChange=function(T){var i=T.getParameter('id');var p=sap.ui.getCore().byId(i).getParent().getCells();var s=T.getParameter('newValue');if(s=="Intent"){p[3].setEnabled(true);p[2].setShowValueHelp(true);p[2].setValue("");}else{p[2].setShowValueHelp(false);p[2].setValue("");p[3].setEnabled(false);p[3].setValue("");}};sap.ushell.components.tiles.utils.addTileActionsRow=function(C){var m=C.getModel();var r=m.getProperty('/config/tile_actions_rows');var n=this.getEmptyTileActionsRowObj();r.push(n);m.setProperty('/config/tile_actions_rows',r);};sap.ushell.components.tiles.utils.deleteTileActionsRow=function(C){var m=C.getModel();var r=m.getProperty('/config/tile_actions_rows');var e=C.byId("tileActions");var s=e.getSelectedIndices();var S=s.sort(function(a,b){return b-a;}).slice();for(var i=0;i<S.length;i++){e.removeSelectionInterval(S[i],S[i]);r.splice(S[i],1);}m.setProperty('/config/tile_actions_rows',r);};sap.ushell.components.tiles.utils.checkInput=function(C,o){var T=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle(),i=C.byId("iconInput"),u=C.byId("useLpdCheckbox"),s=C.byId("navigation_semantic_objectInput")||C.byId("semantic_objectInput"),S=C.byId("navigation_semantic_actionInput")||C.byId("semantic_actionInput"),n=jQuery.trim(o.getParameter("newValue")),I,f,v=sap.ui.core.ValueState.None,V=null,j;switch(o.getSource()){case i:if(n!=""&&n.substring(0,11)!=="sap-icon://"){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.display_icon_url.warning");}break;case u:if(!u.getSelected()){S.setValueState(sap.ui.core.ValueState.None);s.setValueState(sap.ui.core.ValueState.None);}break;case s:I=s.getModel("suggest").getProperty("/items");f=false;for(j=0;j<I.length;j=j+1){if(I[j].obj===n){f=true;break;}}if(/[\-#&? ]/.test(n)){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.semantic_object.error_invalid_chars");}else if(!f){v=sap.ui.core.ValueState.Warning;V=T.getText("configuration.semantic_object.warning");}else if(n==""){v=sap.ui.core.ValueState.Error;}break;case S:if(/[\-#&? ]/.test(n)){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.semantic_action.error_invalid_chars");}else if(n==""){v=sap.ui.core.ValueState.Error;}break;default:break;}if(v){o.getSource().setValueState(v);if(V!==null){o.getSource().setValueStateText(V||"");}}};sap.ushell.components.tiles.utils.checkInputOnSaveConfig=function(C){var i=C.byId("iconInput");var s=C.byId("navigation_semantic_objectInput");var S=C.byId("navigation_semantic_actionInput");var u=C.byId("useLpdCheckbox");var T=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();var I=s.getModel("suggest").getProperty("/items");var f=false,r=false,j;if(i.getValue()!=""&&i.getValue().substring(0,11)!=="sap-icon://"){i.setValueState(sap.ui.core.ValueState.Error);i.setValueStateText(T.getText("configuration.display_icon_url.warning"));r=true;}for(j=0;j<I.length;j=j+1){if(I[j].obj===s.getValue()){f=true;break;}}if(u.getSelected()&&/[\-#&? ]/.test(s.getValue())){s.setValueState(sap.ui.core.ValueState.Error);s.setValueStateText(T.getText("configuration.semantic_object.error_invalid_chars"));r=true;}else if(u.getSelected()&&!f){s.setValueState(sap.ui.core.ValueState.Warning);s.setValueStateText(T.getText("configuration.semantic_object.warning"));}else if(u.getSelected()&&s.getValue()==""){s.setValueState(sap.ui.core.ValueState.Error);r=true;}if(/[\-#&? ]/.test(S.getValue())){S.setValueState(sap.ui.core.ValueState.Error);S.setValueStateText(T.getText("configuration.semantic_action.error_invalid_chars"));r=true;}else if(u.getSelected()&&S.getValue()==""){S.setValueState(sap.ui.core.ValueState.Error);r=true;}return r;};sap.ushell.components.tiles.utils.checkTMInput=function(C,o){var T=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle(),s=C.byId("semantic_objectInput"),S=C.byId("semantic_actionInput"),a=C.byId("target_application_descriptionInput"),b=C.byId("target_application_urlInput"),e=C.byId("target_application_componentInput"),n=C.byId("navigation_provider_roleInput"),N=C.byId("navigation_provider_instanceInput"),f=C.byId("target_application_aliasInput"),h=C.byId("target_application_idInput"),i=jQuery.trim(o.getParameter("newValue")),I,F,v=sap.ui.core.ValueState.None,V=null,j;switch(o.getSource()){case s:I=s.getModel("suggest").getProperty("/items");F=false;for(j=0;j<I.length;j=j+1){if(I[j].obj===i){F=true;break;}}if(/[\-#&? ]/.test(i)){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.semantic_object.error_invalid_chars");}else if(!F){v=sap.ui.core.ValueState.Warning;V=T.getText("configuration.semantic_object.warning");}if(S.getValue()==""){S.setValueState(sap.ui.core.ValueState.Error);}break;case S:if(/[\-#&? ]/.test(i)){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.semantic_action.error_invalid_chars");}else if(i==""){v=sap.ui.core.ValueState.Error;}break;case a:if(i==""){v=sap.ui.core.ValueState.Error;}break;case b:if(i==""){v=sap.ui.core.ValueState.Error;}else if(!(/^[-~+,;:?%&#=/.\w]+$/.test(i))){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.url.error_invalid_chars");}break;case e:if(i==""){v=sap.ui.core.ValueState.Error;}else if(i.substring(0,17)=="SAPUI5.Component="){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.component.error_invalid_input");}break;case n:if(i==""){v=sap.ui.core.ValueState.Error;}else if(!(/^[\w]+$/.test(i))){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.role.error_invalid_chars");}break;case N:if(i==""){v=sap.ui.core.ValueState.Error;}else if(!(/^[\w]+$/.test(i))){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.instance.error_invalid_chars");}break;case f:if(i==""&&h.getValue()==""){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.alias_id.warning");}else if(i!=""&&h.getValue()!=""){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.alias_id.warning");h.setValueState(v);h.setValueStateText(V);}else{h.setValueState(sap.ui.core.ValueState.None);}break;case h:if(i==""&&f.getValue()==""){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.alias_id.warning");}else if(i!=""&&f.getValue()!=""){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.alias_id.warning");f.setValueState(v);f.setValueStateText(V);}else if(i!=""&&!(/^[A-Fa-f0-9]+$/.test(i))){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.alias_id.error_invalid_chars");}else{f.setValueState(sap.ui.core.ValueState.None);}break;default:break;}if(v){o.getSource().setValueState(v);if(V!==null){o.getSource().setValueStateText(V||"");}}};sap.ushell.components.tiles.utils.checkTMInputOnSaveConfig=function(C){var T=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();var s=C.byId("semantic_objectInput");var S=C.byId("semantic_actionInput");var o=C.byId("target_application_descriptionInput");var a=C.byId("target_application_urlInput");var b=C.byId("target_application_componentInput");var n=C.byId("navigation_provider_roleInput");var N=C.byId("navigation_provider_instanceInput");var e=C.byId("target_application_aliasInput");var f=C.byId("target_application_idInput");var h=C.byId("targetTypeInput");var i=C.byId("target_transactionInput");var w=C.byId("target_web_dynpro_applicationInput");var F=C.byId("desktopCB");var k=C.byId("tabletCB");var l=C.byId("phoneCB");var I=s.getModel("suggest").getProperty("/items");var m=false,r=false,j;if(I!=undefined){for(j=0;j<I.length;j=j+1){if(I[j].obj===s.getValue()){m=true;break;}}}if(/[\-#&? ]/.test(s.getValue())){s.setValueState(sap.ui.core.ValueState.Error);s.setValueStateText(T.getText("configuration.semantic_object.error_invalid_chars"));r=true;}else if(!m){s.setValueState(sap.ui.core.ValueState.Warning);s.setValueStateText(T.getText("configuration.semantic_object.warning"));}if(/[\-#&? ]/.test(S.getValue())){S.setValueState(sap.ui.core.ValueState.Error);S.setValueStateText(T.getText("configuration.semantic_action.error_invalid_chars"));r=true;}else if(S.getValue()==""){S.setValueState(sap.ui.core.ValueState.Error);r=true;}var p=C.getModel().getProperty("/config/navigation_provider");if(p==="SAPUI5"){if(o.getValue()==""){o.setValueState(sap.ui.core.ValueState.Error);r=true;}if(a.getValue()==""){a.setValueState(sap.ui.core.ValueState.Error);r=true;}else if(!(/^[-~+,;:?%&#=/.\w]+$/.test(a.getValue()))){a.setValueState(sap.ui.core.ValueState.Error);a.setValueStateText(T.getText("configuration.target_application.url.error_invalid_chars"));r=true;}if(b.getValue()==""){b.setValueState(sap.ui.core.ValueState.Error);r=true;}else if(b.getValue().substring(0,17)=="SAPUI5.Component="){b.setValueState(sap.ui.core.ValueState.Error);b.setValueStateText(T.getText("configuration.target_application.component.error_invalid_input"));r=true;}}else if(p==="LPD"){if(n.getValue()==""){n.setValueState(sap.ui.core.ValueState.Error);r=true;}if(!(/^[\w]+$/.test(n.getValue()))){n.setValueState(sap.ui.core.ValueState.Error);var v=T.getText("configuration.target_application.role.error_invalid_chars");n.setValueStateText(v);r=true;}if(N.getValue()==""){N.setValueState(sap.ui.core.ValueState.Error);r=true;}if(!(/^[\w]+$/.test(N.getValue()))){N.setValueState(sap.ui.core.ValueState.Error);var v=T.getText("configuration.target_application.instance.error_invalid_chars");N.setValueStateText(v);r=true;}if(e.getValue()==""&&f.getValue()==""){var v=T.getText("configuration.target_application.alias_id.warning");e.setValueState(sap.ui.core.ValueState.Error);e.setValueStateText(v);f.setValueState(sap.ui.core.ValueState.Error);f.setValueStateText(v);r=true;}if(e.getValue()!=""&&f.getValue()!=""){var v=T.getText("configuration.target_application.alias_id.warning");e.setValueState(sap.ui.core.ValueState.Error);e.setValueStateText(v);f.setValueState(sap.ui.core.ValueState.Error);f.setValueStateText(v);r=true;}if(f.getValue()!=""&&!(/^[A-Fa-f0-9]+$/.test(f.getValue()))){f.setValueState(sap.ui.core.ValueState.Error);f.setValueStateText(T.getText("configuration.target_application.alias_id.error_invalid_chars"));r=true;}}else if(p==="TR"){if(i.getValue()==""){i.setValueState(sap.ui.core.ValueState.Error);r=true;}}else if(p==="WDA"){if(w.getValue()==""){w.setValueState(sap.ui.core.ValueState.Error);r=true;}}else if(p==="URL"){if(a.getValue()==""){a.setValueState(sap.ui.core.ValueState.Error);r=true;}else if(!(/^[-~+,;:?%&#=/.\w]+$/.test(a.getValue()))){a.setValueState(sap.ui.core.ValueState.Error);a.setValueStateText(T.getText("configuration.target_application.url.error_invalid_chars"));r=true;}}else{h.setValueState(sap.ui.core.ValueState.Error);h.setValueStateText(T.getText("configuration.navigation_provider.error_invalid_provider"));r=true;}if(!F.getSelected()&&!k.getSelected()&&!l.getSelected()){var v=T.getText("configuration.form_factor.warning");F.setValueState(sap.ui.core.ValueState.Error);F.setValueStateText(v);k.setValueState(sap.ui.core.ValueState.Error);k.setValueStateText(v);l.setValueState(sap.ui.core.ValueState.Error);l.setValueStateText(v);r=true;}return r;};sap.ushell.components.tiles.utils.updateTooltipForDisabledProperties=function(C){var m=C.getModel();var i=m.getProperty("/config/isLocaleSuitable");if(!i){var r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();var a=r.getText("edit_configuration.original_locale_not_fit_tooltip",[m.getProperty("/config/userLocale"),m.getProperty("/config/orgLocale")]);C.byId("titleInput").setTooltip(a);C.byId("subtitleInput").setTooltip(a);C.byId("keywordsInput").setTooltip(a);C.byId("infoInput").setTooltip(a);}};sap.ushell.components.tiles.utils.updateMessageStripForOriginalLanguage=function(C){var m=C.getModel();if(m.getProperty("/config/isLocaleSuitable")===false){var M=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle().getText("edit_configuration.original_locale_not_fit_message",[m.getProperty("/config/orgLocale").toUpperCase(),m.getProperty("/config/userLocale").toUpperCase()]);var o=C.byId("messageStrip");o.setVisible(true);o.setText(M);o.setType(sap.ui.core.MessageType.Warning);}};sap.ushell.components.tiles.utils.createSemanticObjectModel=function(C,s,D){var v=C.getView(),u="/sap/opu/odata/UI2/INTEROP/SemanticObjects",a=[{obj:"",name:""},{obj:"*",name:"*"}],b=(D||a).slice(0),S=new sap.ui.model.json.JSONModel();S.setSizeLimit(999999);S.setProperty("/value","");S.setProperty("/enabled",true);s.bindAggregation("suggestionItems","suggest>/items",new sap.ui.core.Item({text:"{suggest>obj}"}));s.setModel(S,"suggest");if(sap.ushell.components.tiles.utils.aData.length>0){S.setData({items:b.concat(sap.ushell.components.tiles.utils.aData)},true);return;}OData.read({requestUri:u,headers:{"Accept":"application/json"}},function(o,r){var I,T,i;for(i=0;i<o.results.length;i=i+1){I=o.results[i].id;T=o.results[i].text;sap.ushell.components.tiles.utils.aData.push({obj:I,name:T||I});}S.setData({items:b.concat(sap.ushell.components.tiles.utils.aData)},true);},function(e){var m=e&&e.message?e.message:e;if(e.response){m+=" - "+e.response.statusCode+" "+e.response.statusText;}jQuery.sap.log.error("Could not fetch data: "+u+": "+m,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};sap.ushell.components.tiles.utils.createRoleModel=function(C,r,I){var v=C.getView(),u="/sap/opu/odata/UI2/INTEROP/GetLPDInstances",s=new sap.ui.model.json.JSONModel(),o=new sap.ui.model.json.JSONModel();s.setSizeLimit(999999);o.setSizeLimit(999999);s.setProperty("/value","");s.setProperty("/enabled",true);o.setProperty("/value","");o.setProperty("/enabled",true);var a=new sap.m.ColumnListItem({cells:[new sap.m.Label({text:"{role}"}),new sap.m.Label({text:"{instance}"})]});r.bindAggregation("suggestionRows","/items",a);I.bindAggregation("suggestionItems","/items",new sap.ui.core.Item({text:"{instance}"}));I.setModel(o);r.setModel(s);r.attachSuggestionItemSelected(function(e){I.setValue(e.getParameter("selectedRow").getCells()[1].getText());I.fireChange();});if(sap.ushell.components.tiles.utils.aRoleData.length>0){s.setData({items:sap.ushell.components.tiles.utils.aRoleData},false);o.setData({items:sap.ushell.components.tiles.utils.aRoleData},false);return;}OData.read({requestUri:u,headers:{"Accept":"application/json"}},function(D,R){var b,e,i;for(i=0;i<D.results.length;i=i+1){b=D.results[i].lpdRole;e=D.results[i].instance;sap.ushell.components.tiles.utils.aRoleData.push({role:b,instance:e});}s.setData({items:sap.ushell.components.tiles.utils.aRoleData},true);o.setData({items:sap.ushell.components.tiles.utils.aRoleData},true);},function(e){var m=e&&e.message?e.message:e;if(e.response){m+=" - "+e.response.statusCode+" "+e.response.statusText;}jQuery.sap.log.error("Could not fetch data: "+u+": "+m,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};sap.ushell.components.tiles.utils.createAliasModel=function(C,a){var v=C.getView(),o,u="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias",s=new sap.ui.model.json.JSONModel();s.setSizeLimit(999999);s.setProperty("/value","");s.setProperty("/enabled",true);a.bindAggregation("suggestionItems","/items",new sap.ui.core.Item({text:"{alias}"}));a.setModel(s);o=sap.ushell.components.tiles.utils.getConfiguration(v.oViewData.chip,true,true);if(o&&o.navigation_provider_role&&o.navigation_provider_instance){if(o.navigation_provider_role!=""&&o.navigation_provider_instance!=""){u=u+"?role='"+o.navigation_provider_role+"'&instance='"+o.navigation_provider_instance+"'";}}OData.read({requestUri:u,headers:{"Accept":"application/json"}},function(D,r){var A,R,I,i,m;sap.ushell.components.tiles.utils.aAliasData=[];for(i=0;i<D.results.length;i=i+1){A=D.results[i].lpdApplicationAlias;R=D.results[i].lpdRole;I=D.results[i].lpdInstance;sap.ushell.components.tiles.utils.aAliasData.push({role:R,instance:I,alias:A});}m=s.getData();if(m){m.items=sap.ushell.components.tiles.utils.aAliasData;}else{m={items:sap.ushell.components.tiles.utils.aAliasData};}s.setData(m,false);},function(e){var m=e&&e.message?e.message:e;if(e.response){m+=" - "+e.response.statusCode+" "+e.response.statusText;}jQuery.sap.log.error("Could not fetch data: "+u+": "+m,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};sap.ushell.components.tiles.utils.updateAliasModel=function(v,a){var u,I,r,s=a.getModel();I=v.byId("navigation_provider_instanceInput").getValue();r=v.byId("navigation_provider_roleInput").getValue();u="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias?role='"+r+"'&instance='"+I+"'";OData.read({requestUri:u,headers:{"Accept":"application/json"}},function(D,R){var A,r,I,i,m;sap.ushell.components.tiles.utils.aAliasData=[];for(i=0;i<D.results.length;i=i+1){A=D.results[i].lpdApplicationAlias;r=D.results[i].lpdRole;I=D.results[i].lpdInstance;sap.ushell.components.tiles.utils.aAliasData.push({role:r,instance:I,alias:A});}m=s.getData();if(m){m.items=sap.ushell.components.tiles.utils.aAliasData;}else{m={items:sap.ushell.components.tiles.utils.aAliasData};}s.setData(m,false);},function(e){var m=e&&e.message?e.message:e;if(e.response){m+=" - "+e.response.statusCode+" "+e.response.statusText;}jQuery.sap.log.error("Could not fetch data: "+u+": "+m,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};sap.ushell.components.tiles.utils.createActionModel=function(C,a){var i=new sap.ui.model.json.JSONModel();var v=C.getView(),o,A;i.setData({"items":[{"text":"display"},{"text":"approve"},{"text":"displayFactSheet"},{"text":"manage"},{"text":"create"},{"text":"monitor"},{"text":"track"},{"text":"change"},{"text":"register"},{"text":"release"},{"text":"analyzeKPIDetails"},{"text":"lookup"},{"text":"manageLineItems"}]});sap.ushell.components.tiles.utils.aActionData=i.getData();o=sap.ushell.components.tiles.utils.getConfiguration(v.oViewData.chip,true,true);A=o.navigation_semantic_action||o.semantic_action;if(A){if(!i.getData().items.some(function(I){return I.text===A;})){i.getData().items.push({"text":A});}}a.bindAggregation("suggestionItems","items>/items",new sap.ui.core.Item({text:"{items>text}"}));a.setModel(i,"items");a.getBinding("suggestionItems").sort(new sap.ui.model.Sorter("text",false));};sap.ushell.components.tiles.utils.createNavigationProviderModel=function(C,T){var i=new sap.ui.model.json.JSONModel();var r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();i.setData({"items":[{"key":"SAPUI5","text":r.getText('configuration.target_application.sapui5')},{"key":"LPD","text":r.getText('configuration.target_application.lpd_cust')},{"key":"TR","text":r.getText('configuration.target_application.transaction')},{"key":"WDA","text":r.getText('configuration.target_application.web_dynpro')},{"key":"URL","text":r.getText('configuration.target_application.url')}]});T.bindItems("items>/items",new sap.ui.core.Item({key:"{items>key}",text:"{items>text}"}));T.setModel(i,"items");T.getBinding("items").sort(new sap.ui.model.Sorter("text",false));};sap.ushell.components.tiles.utils.displayApplicationTypeFields=function(a,C){switch(a){case'LPD':sap.ushell.components.tiles.utils.displayLpdCustApplicationTypeFields(C);break;case'SAPUI5':sap.ushell.components.tiles.utils.displaySapui5ApplicationTypeFields(C);break;case'TR':sap.ushell.components.tiles.utils.displayTransactionApplicationTypeFields(C);break;case'WDA':sap.ushell.components.tiles.utils.displayWebDynproApplicationTypeFields(C);break;case'URL':sap.ushell.components.tiles.utils.displayURLApplicationTypeFields(C);break;}};sap.ushell.components.tiles.utils.displaySapui5ApplicationTypeFields=function(C){C.byId('navigation_provider_role').setVisible(false);C.byId('navigation_provider_roleInput').setVisible(false);C.byId('navigation_provider_instance').setVisible(false);C.byId('navigation_provider_instanceInput').setVisible(false);C.byId('target_application_alias').setVisible(false);C.byId('target_application_aliasInput').setVisible(false);C.byId('target_application_id').setVisible(false);C.byId('target_application_idInput').setVisible(false);C.byId('application_description').setVisible(true);C.byId('target_application_descriptionInput').setVisible(true);C.byId('application_url').setVisible(true);C.byId('target_application_urlInput').setVisible(true);C.byId('application_component').setVisible(true);C.byId('target_application_componentInput').setVisible(true);C.byId('target_transaction').setVisible(false);C.byId('target_transactionInput').setVisible(false);C.byId('target_web_dynpro_applicationInput').setVisible(false);C.byId('target_web_dynpro_configurationInput').setVisible(false);C.byId('target_system_alias').setVisible(false);C.byId('target_system_aliasInput').setVisible(false);};sap.ushell.components.tiles.utils.displayLpdCustApplicationTypeFields=function(C){C.byId('application_description').setVisible(false);C.byId('target_application_descriptionInput').setVisible(false);C.byId('application_url').setVisible(false);C.byId('target_application_urlInput').setVisible(false);C.byId('application_component').setVisible(false);C.byId('target_application_componentInput').setVisible(false);C.byId('navigation_provider_role').setVisible(true);C.byId('navigation_provider_roleInput').setVisible(true);C.byId('navigation_provider_instance').setVisible(true);C.byId('navigation_provider_instanceInput').setVisible(true);C.byId('target_application_alias').setVisible(true);C.byId('target_application_aliasInput').setVisible(true);C.byId('target_application_id').setVisible(true);C.byId('target_application_idInput').setVisible(true);C.byId('target_transaction').setVisible(false);C.byId('target_transactionInput').setVisible(false);C.byId('target_web_dynpro_applicationInput').setVisible(false);C.byId('target_web_dynpro_configurationInput').setVisible(false);C.byId('target_system_alias').setVisible(false);C.byId('target_system_aliasInput').setVisible(false);};sap.ushell.components.tiles.utils.displayTransactionApplicationTypeFields=function(C){C.byId('application_description').setVisible(true);C.byId('target_application_descriptionInput').setVisible(true);C.byId('application_url').setVisible(false);C.byId('target_application_urlInput').setVisible(false);C.byId('application_component').setVisible(false);C.byId('target_application_componentInput').setVisible(false);C.byId('navigation_provider_role').setVisible(false);C.byId('navigation_provider_roleInput').setVisible(false);C.byId('navigation_provider_instance').setVisible(false);C.byId('navigation_provider_instanceInput').setVisible(false);C.byId('target_application_alias').setVisible(false);C.byId('target_application_aliasInput').setVisible(false);C.byId('target_application_id').setVisible(false);C.byId('target_application_idInput').setVisible(false);C.byId('target_transaction').setVisible(true);C.byId('target_transactionInput').setVisible(true);C.byId('target_web_dynpro_applicationInput').setVisible(false);C.byId('target_web_dynpro_configurationInput').setVisible(false);C.byId('target_system_alias').setVisible(true);C.byId('target_system_aliasInput').setVisible(true);};sap.ushell.components.tiles.utils.displayWebDynproApplicationTypeFields=function(C){C.byId('application_description').setVisible(true);C.byId('target_application_descriptionInput').setVisible(true);C.byId('application_url').setVisible(false);C.byId('target_application_urlInput').setVisible(false);C.byId('application_component').setVisible(false);C.byId('target_application_componentInput').setVisible(false);C.byId('navigation_provider_role').setVisible(false);C.byId('navigation_provider_roleInput').setVisible(false);C.byId('navigation_provider_instance').setVisible(false);C.byId('navigation_provider_instanceInput').setVisible(false);C.byId('target_application_alias').setVisible(false);C.byId('target_application_aliasInput').setVisible(false);C.byId('target_application_id').setVisible(false);C.byId('target_application_idInput').setVisible(false);C.byId('target_transaction').setVisible(false);C.byId('target_transactionInput').setVisible(false);C.byId('target_web_dynpro_applicationInput').setVisible(true);C.byId('target_web_dynpro_configurationInput').setVisible(true);C.byId('target_system_alias').setVisible(true);C.byId('target_system_aliasInput').setVisible(true);};sap.ushell.components.tiles.utils.displayURLApplicationTypeFields=function(C){C.byId('navigation_provider_role').setVisible(false);C.byId('navigation_provider_roleInput').setVisible(false);C.byId('navigation_provider_instance').setVisible(false);C.byId('navigation_provider_instanceInput').setVisible(false);C.byId('target_application_alias').setVisible(false);C.byId('target_application_aliasInput').setVisible(false);C.byId('target_application_id').setVisible(false);C.byId('target_application_idInput').setVisible(false);C.byId('application_description').setVisible(true);C.byId('target_application_descriptionInput').setVisible(true);C.byId('application_url').setVisible(true);C.byId('target_application_urlInput').setVisible(true);C.byId('application_component').setVisible(false);C.byId('target_application_componentInput').setVisible(false);C.byId('target_transaction').setVisible(false);C.byId('target_transactionInput').setVisible(false);C.byId('target_web_dynpro_applicationInput').setVisible(false);C.byId('target_web_dynpro_configurationInput').setVisible(false);C.byId('target_system_alias').setVisible(true);C.byId('target_system_aliasInput').setVisible(true);};sap.ushell.components.tiles.utils.getTileSettingsAction=function(m,s){var r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();return{text:r.getText('tileSettingsButtonTitle'),press:function(){var a=sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.ui.footerbar.SaveAsTile",viewData:{appData:{showGroupSelection:false,title:m.getProperty('/config/display_title_text'),subtitle:m.getProperty('/config/display_subtitle_text'),info:m.getProperty('/config/display_info_text'),icon:m.getProperty('/config/display_icon_url'),keywords:m.getProperty('/config/display_search_keywords')}}});var S=new sap.ui.layout.form.SimpleForm({id:'tileSettings',layout:sap.ui.layout.form.SimpleFormLayout.GridLayout,content:[a]}).addStyleClass("sapUshellAddBookmarkForm");var o=new sap.m.Button('bookmarkOkBtn',{text:r.getText('okBtn'),press:function(){s(a);D.close();},enabled:true}),b=new sap.m.Button('bookmarkCancelBtn',{text:r.getText('cancelBtn'),press:function(){D.close();}});var e=function(f){o.setEnabled(f.trim()?true:false);};a.getTitleInput().attachLiveChange(function(){e(this.getValue());});var D=new sap.m.Dialog({id:'settingsDialog',title:r.getText('tileSettingsButtonTitle'),contentWidth:'400px',content:S,beginButton:o,endButton:b,horizontalScrolling:false,afterClose:function(){D.destroy();}});D.open();}};};}());};if(!jQuery.sap.isDeclared('sap.ushell.functionBindPrototype')){(function(){"use strict";jQuery.sap.declare("sap.ushell.functionBindPrototype");if(!Function.prototype.bind){Function.prototype.bind=function(t){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}var a=Array.prototype.slice.call(arguments,1),b=this,n=function(){},B=function(){return b.apply(this instanceof n&&t?this:t,a.concat(Array.prototype.slice.call(arguments)));};n.prototype=this.prototype;B.prototype=new n();return B;};}}());};if(!jQuery.sap.isDeclared('sap.ushell.iconfonts')){(function(){"use strict";jQuery.sap.require('sap.ui.core.IconPool');jQuery.sap.declare("sap.ushell.iconfonts");sap.ushell.iconfonts={};sap.ushell.iconfonts.registerFiori2IconFont=function(){var l={fontFamily:"BusinessSuiteInAppSymbols",collectionName:"BusinessSuiteInAppSymbols",icons:[["icon-heart","E000"],["icon-quarter","E001"],["icon-year","E002"],["icon-equalizer","E003"],["icon-component","E004"],["icon-component-private","E005"],["icon-raw-material","E006"],["icon-sms","E007"],["icon-add-note","E008"],["icon-change-time-horizon","E009"],["icon-table-chart-customization","E00a"],["icon-delegated-important-task","E00b"],["icon-forklift","E00c"],["icon-coins","E00d"],["icon-filter-menu","E00e"],["icon-target-to-date","E00f"],["icon-program","E010"],["icon-phase","E011"],["icon-checklist","E012"],["icon-mirrored-task","E013"],["icon-sub-project","E014"],["icon-checklist-item","E015"],["icon-adhoc-analysis","E016"],["icon-change-analysis","E017"],["icon-review-demands","E018"],["icon-project-definition","E019"],["icon-data-access","E01a"],["icon-define-shortage","E01b"],["icon-review-supplies","E01c"],["icon-change-log","E01d"],["icon-priority-1","E01e"],["icon-priority-2","E01f"],["icon-jam","E020"],["icon-milestone","E021"],["icon-bulleting-with-numbers","E022"],["icon-decrease-indent","E023"],["icon-increase-indent","E024"],["icon-bold","E025"],["icon-italic","E026"],["icon-strike-through","E027"],["icon-underline","E028"],["icon-save-as","E029"],["icon-segmentation","E02A"],["icon-context-menu","E02B"],["icon-snapshot","E02C"],["icon-substraction-b-a","E02D"],["icon-substraction-a-b","E02E"],["icon-intersection","E02F"],["icon-union","E030"],["icon-top","E031"],["icon-bottom","E032"],["icon-page-up","E033"],["icon-page-down","E034"],["icon-create-dashboard","E035"],["icon-excelsius-file","E036"],["icon-open-folder","E037"],["icon-neutral","E038"],["icon-split-segmentation","E039"],["icon-manage-budget","E03A"],["icon-blocked","E03B"],["icon-pipette","E03C"],["icon-top-recipe","E03D"],["icon-recipe","E03E"],["icon-ingredients","E03F"],["icon-multiple-charts","E040"],["icon-descending-bars","E041"],["icon-descending-stacked-bars","E042"],["icon-scatter-plot","E043"],["icon-spill","E044"],["icon-fire","E045"],["icon-stratification","E046"],["icon-relationship","E047"],["icon-margin-decomposition","E048"],["icon-control-group","E049"],["icon-bullet-chart","E04A"],["icon-responsible-area","E04B"],["icon-increase","E04C"],["icon-decrease","E04D"],["icon-current-stock","E04E"],["icon-expedite","E04F"],["icon-postpone","E050"],["icon-approved","E051"],["icon-partially-delivered","E052"],["icon-line-bar-chart","E053"],["icon-expand-all","E054"],["icon-submission","E055"],["icon-change-request","E056"],["icon-column-unselected","E057"],["icon-column-selected","E058"],["icon-row-unselected","E059"],["icon-row-selected","E05A"],["icon-stock-requirements","E05B"],["icon-gender-male-and-female","E05C"],["icon-icon-marital-status","E05D"],["icon-birthday","E05E"],["icon-classification","E05F"],["icon-marked-for-deletion","E060"],["icon-bullet-chart","E061"],["icon-remove-filter","E062"],["icon-bank-account","E063"],["icon-savings-account","E064"],["icon-debit-card","E065"],["icon-vip-customer","E066"],["icon-undesirable-customer","E067"],["icon-answered-change-request","E068"],["icon-collected-change-request","E069"],["icon-draw-freehand","E06A"],["icon-draw-circle","E06B"],["icon-completed","E06C"],["icon-answered","E06D"],["icon-traffic-cone","E06E"],["icon-traffic-lights","E06F"],["icon-container","E070"],["icon-container-loading","E071"],["icon-traffic-jam","E072"],["icon-products","E073"],["icon-sidepanel","E074"],["icon-split-screen","E075"],["icon-truck-driver","E076"],["icon-keep-segment","E077"],["icon-exclude-segment","E078"],["icon-separate-segments","E079"],["icon-distribute-segments","E07A"],["icon-next-open-item","E07B"],["icon-where-used","E07C"],["icon-outbound-delivery","E07D"],["icon-outbound-delivery-inactive","E07E"],["icon-outbound-delivery-active","E07F"],["icon-target","E080"],["icon-source","E081"],["icon-material","E082"],["icon-due-date","E083"],["icon-overdue","E084"],["icon-set-as-default","E085"],["icon-face-very-bad","E086"],["icon-face-bad","E087"],["icon-face-skeptical","E088"],["icon-face-neutral","E089"],["icon-face-astonished","E08A"],["icon-face-happy","E08B"],["icon-face-very-happy","E08C"],["icon-face-awful","E08D"],["icon-face-devastated","E08E"],["icon-face-okey-dokey","E08F"],["icon-alarm","E090"],["icon-activate","E091"],["icon-segment-preview-reference-objects","E092"],["icon-radius","E093"],["icon-polygon-black","E094"],["icon-polygon-white","E095"],["icon-polygon","E096"],["icon-no-filter","E097"],["icon-grip","E098"],["icon-water","E09A"],["icon-liquid","E09C"],["icon-gas","E09B"],["icon-gas-2","e09d"],["icon-water-2","e09e"],["icon-operator","e09f"],["icon-target-filter","e0a0"]]},f={fontFamily:"SAP-Icons",collectionName:"Fiori2",icons:[["F0017","e05e"],["F0018","e0c3"],["F0019","e0c3"],["F0020","e0c3"],["F0021","e10d"],["F0366","e129"],["F0392","e04f"],["F0394","e044"],["F0395","e132"],["F0396","e064"],["F0397","e0a4"],["F0398","e0a4"],["F0399","e044"],["F0401","e08d"],["F0402","e13e"],["F0403","e13e"],["F0404","e033"],["F0405","e0b3"],["F0406","e043"],["F0407","e043"],["F0408","e043"],["F0409","e075"],["F0410","e007"],["F0411","e075"]]},F={fontFamily:"Fiori2",collectionName:"Fiori3",icons:[["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0263","E2A8"],["F0508","E2A9"],["F0509","E2AA"],["F0510","E2AB"],["F0533","E2AC"],["F0534","E2AD"],["F0535","E2AE"],["F0536","E2AF"],["F0537","E2B0"],["F0538","E2B1"],["Lumira001","E2B2"]]},a={fontFamily:"Fiori2",collectionName:"Fiori2",icons:[["F0002","E236"],["F0003","E202"],["F0004","E203"],["F0005","E204"],["F0006","E205"],["F0009","E206"],["F0010","E207"],["F0012","E208"],["F0014","E209"],["F0018","E200"],["F0019","E201"],["F0023","E20A"],["F0024","E20B"],["F0025","E20C"],["F0026","E20D"],["F0072","E23A"],["F0100","E23B"],["F0101","E23C"],["F0102","E23D"],["F0106","E20F"],["F0144","E210"],["F0190","E23E"],["F0194","E23F"],["F0210","E242"],["F0211","E243"],["F0212","E244"],["F0217","E211"],["F0220","E213"],["F0243","E215"],["F0244","E216"],["F0245","E217"],["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0248","E21A"],["F0249","E21B"],["F0252","E21E"],["F0257","E21F"],["F0281","E220"],["F0282","E221"],["F0283","E222"],["F0284","E223"],["F0292","E224"],["F0295","E225"],["F0296","E226"],["F0316","E227"],["F0317","E228"],["F0321","E229"],["F0339","E22A"],["F0340","E22B"],["F0341","E22C"],["F0342","E22D"],["F0365","E212"],["F0366","E22F"],["F0367","E230"],["F0368","E231"],["F0369","E235"],["F0370","E22E"],["F0372","E232"],["F0380","E233"],["F0381","E234"],["F0382","E246"],["F0390","E20E"],["F0412","E213"],["F0429","E2A6"],["F0xx1","E240"],["F0xx2","E241"],["F0013","E237"],["F0016","E238"],["F0028","E239"],["F0029","E283"],["F0030","E284"],["F0031","E285"],["F0032","E286"],["F0033","E287"],["F0034","E288"],["F0036","E289"],["F0038","E28A"],["F0039","E28B"],["F0041","E28C"],["F0044","E28D"],["F0293","E28E"],["F0294","E28F"],["F0297","E290"],["F0298","E291"],["F0299","E292"],["F0300","E293"],["F0301","E294"],["F0302","E295"],["F0303","E296"],["F0304","E297"],["F0305","E298"],["F0306","E299"],["F0323","E29A"],["F0324","E29B"],["F0326","E29C"],["F0327","E29D"],["F0328","E29E"],["F0329","E29F"],["F0331","E2A1"],["F0332","E2A2"],["F0343","E2A3"],["F0344","E2A4"],["F0345","E2A5"],["F0388","E2A7"],["F0391","E2A0"],["F0260","E2B4"],["FD10N","E2B5"],["FK10N","E2B6"],["FS10N","E2B7"],["FBL5N","E2B8"],["FBL1N","E2B9"],["FFS01","E2BA"],["FBL3N","E2BB"],["FCOA1","E2BC"]]},o={fontFamily:"Fiori2",collectionName:"Fiori4",icons:[["F0194","E2BD"],["F0260","E2B4"],["F0433","E21C"],["F0251","E2BE"],["F0499","E2BF"],["F0500","E2C0"],["F0501","E2C1"],["F0502","E2C2"],["F0503","E2C3"],["F0504","E2C4"],["F0507","E2C5"],["F0530","E2C6"],["F0531","E2C7"],["F0539","E2C8"],["F0544","E2C9"],["F0545","E2CA"],["F0547","E2CB"],["F0576","E2CC"],["F0578","E2CD"],["F0579","E2CE"],["F0580","E2CF"],["F0581","E2D0"],["F0582","E2D1"],["F0583","E2D2"],["F0584","E2D3"],["F0586","E2D4"],["F0587","E2D5"],["F0588","E2D6"],["F0589","E2D7"],["F0590","E2D8"],["F0591","E2D9"],["F0593","E2DA"],["F0594","E2DB"],["F0597","E2DC"],["F0603","E2DD"],["F0604","E2DE"],["F0605","E2DF"],["F0606","E2E0"],["F0607","E2E1"],["F0608","E2E2"],["F0609","E2E3"],["F0615","E2E4"],["F0616","E2E5"],["F0618","E2E6"],["F0617","E2E7"],["F0622","E2E8"],["F0623","E2E9"],["F0624","E2BC"],["F0625","E2EB"],["F0626","E2EC"],["F0627","E2ED"],["F0629","E2EE"],["F0630","E2EF"],["F0632","E2F0"],["F0633","E2F1"],["F0634","E2F2"],["F0635","E2F3"],["F0636","E2F4"],["F0638","E2F5"],["F0639","E2F6"],["F0643","E2F7"],["F0644","E2F8"],["F0645","E2F9"],["F0646","E2FA"],["F0648","E2FB"],["F0649","E2FC"],["F0650","E2FD"],["F0654","E2FE"],["F0655","E2FF"],["F0659","E300"],["F0660","E301"],["F0661","E302"],["F0665","E303"],["F0666","E304"],["F0667","E305"],["F0671","E306"],["F0672","E307"],["F0673","E308"],["F0675","E309"],["F0676","E30A"],["F0677","E30B"],["F0678","E30C"],["F0679","E30D"],["F0680","E30E"],["F0682","E30F"],["F0683","E310"],["F0684","E240"],["F0685","E312"],["F0686","E313"],["F0687","E314"],["F0690","E315"],["F0691","E316"],["F0692","E317"],["F0693","E318"],["F0694","E319"],["F0695","E31A"],["F0700","E31B"],["F0598","E31C"],["F0600","E38A"]]},b={fontFamily:"Fiori2",collectionName:"Fiori5",icons:[["F0263","E321"],["F0266","E322"],["F0834","E31D"],["F2001","E31E"],["F0839","E320"],["F0270","E323"],["F0273","E324"],["F0439","E325"],["F0443","E326"],["F0549","E327"],["F0550","E328"],["F0551","E329"],["F0577","E32A"],["F0585","E32B"],["F0637","E32C"],["F0668","E32D"],["F0669","E32E"],["F0670","E330"],["F0688","E331"],["F0689","E332"],["F0701","E333"],["F0702","E334"],["F0703","E335"],["F0706","E336"],["F0707","E337"],["F0708","E338"],["F0711","E339"],["F0712","E33A"],["F0731","E33B"],["F0732","E33C"],["F0733","E33D"],["F0735","E33E"],["F0736","E340"],["F0737","E341"],["F0742","E342"],["F0743","E343"],["F0744","E344"],["F0745","E345"],["F0746","E346"],["F0747","E347"],["F0748","E348"],["F0749","E349"],["F0750","E34A"],["F0751","E34B"],["F0755","E34C"],["F0756","E34D"],["F0757","E34E"],["F0758","E350"],["F0759","E351"],["F0760","E352"],["F0761","E353"],["F0763","E354"],["F0764","E355"],["F0765","E356"],["F0768","E357"],["F0770","E358"],["F0771","E359"],["F0772","E35A"],["F0774","E35B"],["F0776","E35C"],["F0777","E35D"],["F0778","E35E"],["F0788","E360"],["F0789","E361"],["F0790","E362"],["F0791","E363"],["F0792","E364"],["F0793","E365"],["F0794","E366"],["F0806","E367"],["F0807","E368"],["F0808","E369"],["F0809","E36A"],["F0810","E36B"],["F0811","E36C"],["F0812","E36D"],["F0813","E36E"],["F0814","E370"],["F0815","E371"],["F0816","E372"],["F0817","E373"],["F0818","E374"],["F0819","E375"],["F0820","E376"],["F0821","E377"],["F0822","E378"],["F0823","E379"],["F0824","E37A"],["F0825","E37B"],["F0826","E37C"],["F0827","E37D"],["F0828","E37E"],["F0829","E380"],["F0830","E381"],["F0831","E382"],["F0717","E383"],["F0718","E384"],["F0241","E385"],["F0246","E386"],["F0250","E387"],["F0248","E388"],["F0252","E389"],["F0600","E38A"],["F0674","E38B"],["F0247","E38E"],["F0251","E390"]]},c={fontFamily:"Fiori2",collectionName:"Fiori6",icons:[["F0795","E397"],["F0866","E3A0"],["F0865","E3A1"],["F0867","E3A2"],["F0868","E3A3"],["F0869","E3A4"],["F0870","E3A5"],["F0138","E3A6"],["F0752","E3A7"],["F0753","E3A8"],["F0773","E3A9"],["F0891","E3AA"],["F0892","E3AB"],["F1023","E3AC"],["F0767","E3AD"],["F0849","E3AE"],["F0670-1","E393"],["F0670-2","E394"],["F0670-3","E395"],["F0670-4","E396"]]},d={fontFamily:"Fiori2",collectionName:"Fiori7",icons:[["F1079","E3B0"],["F0738","E3B1"],["F1301","E3B2"],["F1302","E3B3"],["F1303","E3B4"],["F1338","E3B5"],["F1263","E3B6"],["F1373","E3B7"],["F0863","E3B8"],["F1068","E3BA"],["F0955","E3B9"],["F1242","E3BB"],["F1405","E3BC"],["F1406","E3BD"],["F1407","E3BE"],["F1408","E3BF"],["F1409","E3C0"],["F1410","E3C1"],["F1411","E3C2"],["F1412","E3C3"],["F1413","E3C4"],["F1414","E3C5"],["F1415","E3C6"],["F0797","E3C8"],["F0798","E3C9"],["F0800","E3CA"],["F0801","E3CB"],["F0804","E3CC"],["F0850","E3CD"],["F0890","E3CE"],["F1075","E3CF"],["F1394","E3D0"],["F1061","E3D1"],["F1062","E3D2"],["F1255","E3D3"],["F1077","E3D4"],["F0843","E3D5"],["F1076","E3D6"],["F0859","E3D7"],["F1060","E3D8"],["F1053","E3D9"],["F0900","E3DA"],["F0840","E3DB"],["F0842-1","E3A6"],["F0842-2","E22C"],["F1476","E3C7"]]},e={fontFamily:"Fiori2",collectionName:"Fiori8",icons:[["F1317","E3DC"],["F1318","E3DD"],["F1319","E3DE"],["F1369","E3DF"],["F1475","E3E0"],["F1345","E3E1"],["F1248","E3E2"],["F1067","E3E3"],["F1332","E3E4"],["F1333","E3E5"],["F1334","E3E6"],["F1335","E3E7"],["F1030","E3E8"],["F1457","E3E9"],["F1504","E3EA"],["F1505","E3EB"]]},g={fontFamily:"Fiori2",collectionName:"Fiori9",icons:[["F1094","E3EC"],["F1096","E3ED"],["F1353","E3EE"],["F1354","E3EF"],["F1428","E3F0"],["F1492","E3F1"],["F1515","E3F2"],["F1516","E3F3"],["F0997","E400"],["F1512","E401"],["F1563","E402"],["F1564","E403"],["F1599","E404"],["F1596","E405"],["F1254","E406"],["F1618","E407"],["F1561","E408"]]},s={fontFamily:"Fiori2",collectionName:"S4Hana",icons:[["S0001","E3F4"],["S0002","E3F5"],["S0003","E3F6"],["S0004","E3F7"],["S0005","E3F8"],["S0006","E3F9"],["S0007","E3FA"],["S0008","E3FB"],["S0009","E3FC"],["S0010","E3FD"],["S0011","E3FE"],["S0012","E3FF"]]},t={fontFamily:"SAPIconsTNT",collectionName:"TNTIcons",icons:[["Technical System","e000"],["Java System","e001"],["ABAP System","e002"],["System","e004"],["System TREX","e005"],["System Tracks","e006"],["System Recommendation","e003"],["System HANA","e00e"],["Technical Scenario","e007"],["Technical Instance","e008"],["Throughput Backlog","e009"],["Batch Processing","e00a"],["Database Consistency","e00b"],["Intermediate Message","e00c"],["Exceptions","e00d"]]},h={fontFamily:"FioriInAppIcons",collectionName:"FioriInAppIcons",icons:[["Hierarchal Tree","E700"],["Open","E701"],["Blocked","E702"],["Partially Blocked","E703"],["Open1","E704"],["Partially Adopted","E705"],["Due","E706"],["Overdue","E707"],["Sort","E708"],["Missing Parts","E709"],["Fire","E70A"],["Dangerous Chemicals","E70B"],["Share","E70C"],["Entertainment","E70D"],["Gift","E70E"],["QR Code","E70F"]]},i={fontFamily:"Fiori2",collectionName:"FioriNonNative",icons:[["FN0001","E392"],["FN0002","E398"],["FN0003","E399"],["FN0004","E39A"],["FN0005","E39B"],["FN0006","E39C"],["FN0007","E39D"],["FN0008","E39E"],["FN0009","E39F"]]};this.registerFonts(f,F,a,l,h,o,b,i,c,d,e,g,s,t);};sap.ushell.iconfonts.registerFonts=function(){var I,i,j;for(i=0;i<arguments.length;i=i+1){I=arguments[i];for(j=0;j<I.icons.length;j=j+1){sap.ui.core.IconPool.addIcon(I.icons[j][0],I.collectionName,I.fontFamily,I.icons[j][1],false,true);}}};}());};if(!jQuery.sap.isDeclared('sap.ushell.library')){jQuery.sap.declare("sap.ushell.library");jQuery.sap.require('sap.ui.core.Core');jQuery.sap.require('sap.ui.core.library');jQuery.sap.require('sap.ui.layout.library');jQuery.sap.require('sap.m.library');sap.ui.getCore().initLibrary({name:"sap.ushell",dependencies:["sap.ui.core","sap.ui.layout","sap.m"],types:["sap.ushell.ui.tile.State","sap.ushell.ui.tile.StateArrow"],interfaces:[],controls:["sap.ushell.components.factsheet.controls.PictureTile","sap.ushell.components.factsheet.controls.PictureViewer","sap.ushell.components.factsheet.controls.PictureViewerItem","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.AddBookmarkButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.EndUserFeedback","sap.ushell.ui.footerbar.HideGroupsButton","sap.ushell.ui.footerbar.JamDiscussButton","sap.ushell.ui.footerbar.JamShareButton","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.SettingsButton","sap.ushell.ui.footerbar.UserPreferencesButton","sap.ushell.ui.launchpad.DashboardGroupsContainer","sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage","sap.ushell.ui.launchpad.GroupHeaderActions","sap.ushell.ui.launchpad.GroupListItem","sap.ushell.ui.launchpad.HeaderTile","sap.ushell.ui.launchpad.LinkTileWrapper","sap.ushell.ui.launchpad.LoadingDialog","sap.ushell.ui.launchpad.Panel","sap.ushell.ui.launchpad.PlusTile","sap.ushell.ui.launchpad.SearchSuggestionList","sap.ushell.ui.launchpad.SearchSuggestionListItem","sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.TileContainer","sap.ushell.ui.launchpad.TileState","sap.ushell.ui.tile.DynamicTile","sap.ushell.ui.tile.ImageTile","sap.ushell.ui.tile.StaticTile","sap.ushell.ui.tile.TileBase"],elements:[],version:"1.32.6"});jQuery.sap.declare("sap.ushell.ui.tile.State");sap.ushell.ui.tile.State={Neutral:"Neutral",None:"None",Negative:"Negative",Error:"Error",Positive:"Positive",Success:"Success",Critical:"Critical",Warning:"Warning"};jQuery.sap.declare("sap.ushell.ui.tile.StateArrow");sap.ushell.ui.tile.StateArrow={None:"None",Up:"Up",Down:"Down"};};if(!jQuery.sap.isDeclared('sap.ushell.override')){(function(){"use strict";jQuery.sap.declare("sap.ushell.override");sap.ushell.override={};sap.ushell.override.updateAggregation=function(n){if(this.isTreeBinding(n)){sap.ui.base.ManagedObject.prototype.updateAggregation.apply(this,arguments);}else{var b=this.mBindingInfos[n],B=b.binding,a=B.getContexts(),f=b.factory,A=this.getMetadata().getJSONKeys()[n],g=A._sMutator+"Group",G=B.isGrouped()&&this[g],i=0,I=[],c=jQuery.proxy(function(C){var s=this.getId()+"-"+jQuery.sap.uid(),o=f(s,C);o.setBindingContext(C,b.model);this[A._sMutator](o);},this);if(G){sap.ui.base.ManagedObject.prototype.updateAggregation.apply(this,arguments);}else{I=this[A._sGetter]();for(i=0;i<a.length;++i){if(i<I.length){I[i].setBindingContext(a[i],b.model);}else{c(a[i]);}}for(;i<I.length;++i){I[i].destroy();}I.length=a.length;}}};sap.ushell.override.updateAggregationGrouped=function(n){var b=this.mBindingInfos[n],B=b.binding,f=b.factory,c,N=null,g=null,G=null,t=this,I=t.getItems(),l=0,L=0,i,s,T=[];g=B.isGrouped()&&this.addItemGroup;jQuery.each(B.getContexts(),function(a,C){if(g&&B.aSorters.length>0){N=B.aSorters[0].fnGroup(C);if(typeof N==="string"){N={key:N};}if(N.key!==G){var o,h;if(b.groupHeaderFactory){o=b.groupHeaderFactory(N);}h=o||new sap.m.GroupHeaderListItem({title:N.text||N.key}).addStyleClass("sapMListHdr");t.insertAggregation("items",h,L,true);L=L+1;G=N.key;}}I=t.getItems();for(i=L;i<I.length;i=i+1){if(I[i].constructor===sap.m.GroupHeaderListItem){T.push(t.removeItem(I[i]));I=t.getItems();}}if(L<I.length){I[L].setBindingContext(C,b.model);if(I[L].aDelegates){jQuery.each(I[L].aDelegates,function(i,v){v.vThis=C;});}}else{s=t.getId()+"-"+L;c=f(s,C);c.setBindingContext(C,b.model);t.addItem(c);}L=L+1;l=L;});for(i=I.length-1;i>=l;i=i-1){T.push(t.removeItem(I[i]));}setTimeout(function(){jQuery.each(T,function(i,v){v.destroy();});},1);};sap.ushell.override.updateAggregatesFactory=function(n){return function(){jQuery.proxy(sap.ushell.override.updateAggregation,this,n)();};};}());};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.AccessKeysHandler')){(function(){"use strict";jQuery.sap.declare("sap.ushell.renderers.fiori2.AccessKeysHandler");var a=function(){};a.prototype={keyCodes:jQuery.sap.KeyCodes,bFocusOnShell:true,bFocusPassedToExternalHandlerFirstTime:true,isFocusHandledByAnotherHandler:false,fnExternalKeysHandler:null,fnExternalShortcuts:null,handleSearchKey:function(){var s=sap.ui.getCore().byId('sf');var j=jQuery(s.getDomRef());j.click();},handleUserMenuKey:function(){var u=sap.ui.getCore().byId('userPreferencesButton'),s=sap.ui.getCore().byId("mainShell").oController;if(!u){u=new sap.ushell.ui.footerbar.UserPreferencesButton("userPreferencesButton");u.setModel(s.getModel());s._setUserPrefModel();}u.showUserPreferencesDialog();},handleAccessOverviewKey:function(){var t=sap.ushell.resources.i18n,i=this.oModel.getProperty("/searchAvailable"),c=[];this.aShortcutsDescriptions.forEach(function(v){c.push(new sap.m.Label({text:v.text}));c.push(new sap.m.Text({text:v.description}));});if(i){c.push(new sap.m.Label({text:"Alt+S"}));c.push(new sap.m.Text({text:t.getText("actionSearch")}));}c.push(new sap.m.Label({text:"Alt+U"}));c.push(new sap.m.Text({text:t.getText("actionLoginDetails")}));var s=new sap.ui.layout.form.SimpleForm({editable:false,content:c}),d,o=new sap.m.Button({text:t.getText("okBtn"),press:function(){d.close();}});d=new sap.m.Dialog({id:"hotKeysGlossary",title:t.getText("hotKeysGlossary"),contentWidth:"29.6rem",leftButton:o,afterClose:function(){d.destroy();}});d.addContent(s);d.open();},handleShortcuts:function(k){if(k.altKey){switch(String.fromCharCode(k.keyCode)){case'S':this.handleSearchKey();break;case'U':this.handleUserMenuKey();break;case'0':this.handleAccessOverviewKey();break;}}},registerAppKeysHandler:function(h){this.fnExternalKeysHandler=h;},resetAppKeysHandler:function(){this.fnExternalKeysHandler=null;},getAppKeysHandler:function(){return this.fnExternalKeysHandler;},registerAppShortcuts:function(h,s){this.fnExternalShortcuts=h;this.aShortcutsDescriptions=s;},handleFocusBackToMe:function(k){k.preventDefault();var h=sap.ushell.renderers.fiori2.AccessKeysHandler;this.bFocusOnShell=true;if(k.shiftKey){if(k.keyCode===h.keyCodes.TAB){jQuery("#actionsBtn").focus();}if(k.keyCode===h.keyCodes.F6){jQuery("#configBtn").focus();}}else{jQuery("#floatingActionBtn").focus();}this.bFocusPassedToExternalHandlerFirstTime=true;},setIsFocusHandledByAnotherHandler:function(h){this.isFocusHandledByAnotherHandler=h;},sendFocusBackToShell:function(e){this.handleFocusBackToMe(e);},init:function(m){this.oModel=m;jQuery(document).on('keydown',function(e){if(!this.bFocusOnShell&&!this.isFocusHandledByAnotherHandler){if(this.fnExternalKeysHandler&&jQuery.isFunction(this.fnExternalKeysHandler)){this.fnExternalKeysHandler(e,this.bFocusPassedToExternalHandlerFirstTime);this.bFocusPassedToExternalHandlerFirstTime=false;}}this.handleShortcuts(e);if(this.fnExternalShortcuts){this.fnExternalShortcuts(e);}this.setIsFocusHandledByAnotherHandler(false);}.bind(this));}};sap.ushell.renderers.fiori2.AccessKeysHandler=new a();}());};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.History')){(function(){"use strict";jQuery.sap.declare("sap.ushell.renderers.fiori2.History");sap.ushell.renderers.fiori2.History=function(){this._history=[];this.backwards=false;this._historyPosition=-1;this._virtual={};};sap.ushell.renderers.fiori2.History.prototype.hashChange=function(n,o){var h=this._history.indexOf(n);if(h===-1){if(this._historyPosition+1<this._history.length){this._history=this._history.slice(0,this._historyPosition+1);}this._history.push(n);this._historyPosition+=1;this.backwards=false;this.forwards=false;}else{this.backwards=this._historyPosition>h;this.forwards=this._historyPosition<h;this._historyPosition=h;}};sap.ushell.renderers.fiori2.History.prototype.pop=function(){var l;if(this._history.length>0){l=this._history.pop();this._historyPosition--;}return l;};sap.ushell.renderers.fiori2.History.prototype.isVirtualHashchange=function(n,o){return this._virtual.hasOwnProperty(o)&&this.getCurrentHash()===n&&this._history.length-1>this._historyPosition&&this._history[this._historyPosition+1]===o;};sap.ushell.renderers.fiori2.History.prototype.setVirtualNavigation=function(h){this._virtual[h]=true;};sap.ushell.renderers.fiori2.History.prototype.getCurrentHash=function(){return this._history[this._historyPosition]||null;};sap.ushell.renderers.fiori2.History.prototype.getHashIndex=function(h){return this._history.indexOf(h);};sap.ushell.renderers.fiori2.History.prototype.getHistoryLength=function(){return this._history.length;};}());};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.Navigation')){(function(){"use strict";jQuery.sap.declare("sap.ushell.renderers.fiori2.Navigation");sap.ushell.renderers.fiori2.Navigation=function(){this.SEARCH={ID:"ShellSearch",SEMANTICOBJECT:"shell",ACTION:"search"};sap.ushell.Container.getService("NavTargetResolution").registerCustomResolver({name:"Search App Container",isApplicable:function(h){return h==="#Action-search";},resolveHashFragment:function(h){var d=new jQuery.Deferred(),r={};if(h==="#Action-search"){r={"additionalInformation":"SAPUI5.Component=sap.ushell.renderers.fiori2.search.container","applicationType":"URL","url":jQuery.sap.getResourcePath("sap/ushell/renderers/fiori2/search/container")};}d.resolve(r);return d.promise();}});};sap.ushell.Container.getService("NavTargetResolution").registerCustomResolver({name:"FLP Resolver",isApplicable:function(h){return h==="#Shell-home"||h==="#shell-catalog";},resolveHashFragment:function(h){var d=new jQuery.Deferred(),r={};if(h==="#Shell-home"||h==="#shell-catalog"){r={"additionalInformation":"SAPUI5.Component=sap.ushell.components.flp","applicationType":"URL","url":jQuery.sap.getResourcePath("sap/ushell/components/flp")};}d.resolve(r);return d.promise();}});sap.ushell.renderers.fiori2.Navigation=new sap.ushell.renderers.fiori2.Navigation();}());};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.RendererExtensions')){(function(){"use strict";jQuery.sap.declare("sap.ushell.renderers.fiori2.RendererExtensions");function _(C){a("rendererLoaded");}function a(E,D){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",E,D);},0);}sap.ushell.renderers.fiori2.utils={};sap.ushell.renderers.fiori2.utils.publishExternalEvent=a;sap.ushell.renderers.fiori2.utils.init=_;function b(I,L,w){sap.ushell.Container.getRenderer("fiori2").showSubHeader(I.getId(),false,[L,w]);}function c(I,L,w){sap.ushell.Container.getRenderer("fiori2").hideSubHeader(I.getId(),false,[L,w]);}function d(I,L,w){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(I.getId(),false,[L,w]);}function e(I,L,w){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(I.getId(),false,[L,w]);}function f(B,L,w){sap.ushell.Container.getRenderer("fiori2").showActionButton(B.getId(),false,[L,w]);}function g(B,L,w){sap.ushell.Container.getRenderer("fiori2").hideActionButton(B.getId(),false,[L,w]);}function h(C,L,w){sap.ushell.Container.getRenderer("fiori2").showLeftPaneContent(C.getId(),false,[L,w]);}function i(L,w){sap.ushell.Container.getRenderer("fiori2").hideLeftPaneContent(false,[L,w]);}function j(I,L,w){sap.ushell.Container.getRenderer("fiori2").showFloatingActionButton(I.getId(),false,[L,w]);}function k(I,L,w){sap.ushell.Container.getRenderer("fiori2").hideFloatingActionButton(I.getId(),false,[L,w]);}function l(I,L,w){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(I.getId(),false,[L,w]);}function m(I,L,w){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(I.getId(),false,[L,w]);}function n(){return sap.ushell.Container.getRenderer("fiori2").getModelConfiguration();}function o(I,L,T,w){var x=sap.ui.getCore().byId(I);if(w){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(x.getId(),T,[L]);}}function p(C,S){sap.ushell.Container.getRenderer("fiori2").addEndUserFeedbackCustomUI(C,S);}function q(w){sap.ushell.Container.getRenderer("fiori2").addUserPreferencesEntry(w);}function r(T){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(T);}function s(L,V){sap.ushell.Container.getRenderer("fiori2").setLeftPaneVisibility(L,V);}function t(H){sap.ushell.Container.getRenderer("fiori2").setHeaderHiding(H);}function u(F){sap.ushell.Container.getRenderer("fiori2").setFooter(F);}function v(){sap.ushell.Container.getRenderer("fiori2").removeFooter();}function R(){this.addHeaderItem=d;this.setHeaderItemVisibility=o;this.addSubHeader=b;this.removeSubHeader=c;this.addHeaderEndItem=l;this.removeHeaderItem=e;this.removeHeaderEndItem=m;this.addEndUserFeedbackCustomUI=p;this.addOptionsActionSheetButton=f;this.removeOptionsActionSheetButton=g;this.setFooter=u;this.removeFooter=v;this.addUserPreferencesEntry=q;this.setHeaderTitle=r;this.setHeaderHiding=t;this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=j;this.removeFloatingActionButton=k;this.setLeftPaneContent=h;this.removeLeftPaneContent=i;this.setLeftPaneVisibility=s;this.getConfiguration=n;}sap.ushell.renderers.fiori2.RendererExtensions=new R();}());};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.SearchHelper')){(function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchHelper');var m=sap.ushell.renderers.fiori2.search.SearchHelper={};jQuery.sap.require('jquery.sap.storage');m.Tester=function(){this.init.apply(this,arguments);};m.Tester.prototype={init:function(s){s=s||"*";s=s.replace(/([.+?^=!:${}()|\[\]\/\\])/g,"\\$1");this.aSearchTerms=this.tokenizeSearchTerms(s);for(var j=0;j<this.aSearchTerms.length;++j){this.aSearchTerms[j]=this.aSearchTerms[j].replace(/\*/g,"[^\\s]*");var i=this.aSearchTerms[j].match(/[\u3400-\u9faf]/)!==null?true:false;if(i){this.aSearchTerms[j]=new RegExp(this.aSearchTerms[j],'gi');}else{this.aSearchTerms[j]=new RegExp('(?:^|\\s)'+this.aSearchTerms[j],'gi');}}},test:function(t){var r={bMatch:false,sHighlightedText:''};if(!t){return r;}this.initializeBoldArray(t);this.globalBold=false;var R;var M=false;var a;for(var j=0;j<this.aSearchTerms.length;++j){R=this.aSearchTerms[j];if(R.toString()==='/(?:^|\\s)[^\\s]*/gi'||R.toString()==='/[^\\s]*/gi'){continue;}M=false;var l=-1;while((a=R.exec(t))!==null){M=true;if(R.lastIndex===l){break;}l=R.lastIndex;var s=this.indexOfFirstNoneWhiteSpaceChar(t,a.index);if(s<0){continue;}this.markBoldArray(s,R.lastIndex);}if(M===false){return r;}}r.bMatch=true;r.sHighlightedText=this.render(t);return r;},indexOfFirstNoneWhiteSpaceChar:function(t,s){t=t.substring(s);var a=/[^\s]/.exec(t);if(!a){return-1;}return a.index+s;},tokenizeSearchTerms:function(t){var a=t.split(" ");var n=[];$.each(a,function(i,b){b=$.trim(b);if(b.length>0&&b!=='.*'){n.push(b);}});return n;},initializeBoldArray:function(t){this.bold=new Array(t.length);for(var i=0;i<this.bold.length;++i){this.bold[i]=false;}},markBoldArray:function(n,a){for(var i=n;i<a;i++){this.bold[i]=true;this.globalBold=true;}},render:function(o){if(!this.globalBold){return o;}var b=false;var r=[];var s=0;var i;for(i=0;i<o.length;++i){if((!b&&this.bold[i])||(b&&!this.bold[i])){r.push(o.substring(s,i));if(b){r.push("</b>");}else{r.push("<b>");}b=!b;s=i;}}r.push(o.substring(s,i));if(b){r.push("</b>");}return r.join("");}};m.delayedExecution=function(o,d){var t=null;var a=function(){var b=arguments;var c=this;if(t){window.clearTimeout(t);}t=window.setTimeout(function(){t=null;o.apply(c,b);},d);};a.abort=function(){if(t){window.clearTimeout(t);}};return a;};m.refuseOutdatedRequests=function(o,r){var l=0;var d=function(){var a=arguments;var t=this;var b=++l;var c=new jQuery.Deferred();o.apply(t,a).done(function(){if(b!==l){return;}c.resolve.apply(c,arguments);}).fail(function(){if(b!==l){return;}c.reject.apply(c,arguments);});return c;};d.abort=function(){++l;};if(r){m.outdatedRequestAdministration.registerDecorator(r,d);}return d;};m.abortRequests=function(r){var d=m.outdatedRequestAdministration.getDecorators(r);for(var i=0;i<d.length;++i){var a=d[i];a.abort();}};m.outdatedRequestAdministration={decoratorMap:{},registerDecorator:function(r,d){var a=this.decoratorMap[r];if(!a){a=[];this.decoratorMap[r]=a;}a.push(d);},getDecorators:function(r){var d=this.decoratorMap[r];if(!d){d=[];}return d;}};m.boldTagUnescaper=function(d){var i=d.innerHTML;while(i.indexOf('&lt;b&gt;')+i.indexOf('&lt;/b&gt;')>=-1){i=i.replace('&lt;b&gt;','<b>');i=i.replace('&lt;/b&gt;','</b>');}while(i.indexOf('&lt;i&gt;')+i.indexOf('&lt;/i&gt;')>=-1){i=i.replace('&lt;i&gt;','<i>');i=i.replace('&lt;/i&gt;','</i>');}d.innerHTML=i;};m.boldTagUnescaperByText=function(d){var a=$(d);var s=a.text().replace(/<b>/gi,'').replace(/<\/b>/gi,'');if(s.indexOf('<')===-1){a.html(a.text());}};m.forwardEllipsis4Whyfound=function(d){var a=$(d);var p=a.html().indexOf("<b>");if(p>2&&d.offsetWidth<d.scrollWidth){var e="..."+a.html().substring(p);a.html(e);}};m.hasher={hash:null,setHash:function(h){if(decodeURIComponent(window.location.hash)!==decodeURIComponent(h)){try{window.location.hash=h;}catch(e){this.showUrlUpdateError(e);}}this.hash=h;},hasChanged:function(){if(decodeURIComponent(this.hash)!==decodeURIComponent(window.location.hash)){return true;}return false;},showUrlUpdateError:function(e){if(this.urlError){return;}this.urlError=true;jQuery.sap.require("sap.m.MessageBox");var a=sap.ushell.resources.i18n.getText('searchUrlErrorMessage',e.toString());sap.m.MessageBox.alert(a,{title:sap.ushell.resources.i18n.getText('searchUrlErrorTitle'),icon:sap.m.MessageBox.Icon.ERROR});}};m.loadFilterButtonStatus=function(){if(jQuery.sap.storage&&jQuery.sap.storage.isSupported()){var f=jQuery.sap.storage.get("showSearchFacets");if(!f){return false;}else{return true;}}else{return false;}};m.saveFilterButtonStatus=function(a){if(jQuery.sap.storage.isSupported()){jQuery.sap.storage.put("showSearchFacets",a);}};m.idMap={};m.subscribeOnlyOnce=function(i,e,c,s){if(m.idMap[i]){m.idMap[i].unsubscribe();}var w=function(){c.apply(s);sap.ui.getCore().getEventBus().unsubscribe(e,w,s);};sap.ui.getCore().getEventBus().subscribe(e,w,s);m.idMap[i]={unsubscribe:function(){sap.ui.getCore().getEventBus().unsubscribe(e,w,s);}};};m.SearchFocusHandler=function(){this.init.apply(this,arguments);};m.SearchFocusHandler.prototype={init:function(s){this.oSearchView=s;},get2BeFocusedControlDomRef:function(){if(!this.oModel){this.oModel=this.oSearchView.getModel();}var i=0;var c=null;var a=null;var s=this.oModel.getSkip();if(this.oModel.getProperty('/boCount')>0&&this.oModel.getProperty('/appCount')>0){i=(s>0)?(s+1):0;c=this.oSearchView.resultList.getItems()[i];if(c&&c.getDomRef){a=c.getDomRef();}}else if(this.oModel.getProperty('/boCount')>0){i=(s>0)?s:0;c=this.oSearchView.resultList.getItems()[i];if(c&&c.getDomRef){a=c.getDomRef();}}else if(this.oModel.getProperty('/appCount')>0){var t=this.oSearchView.appSearchResult;i=(s>0)?(Math.floor((s+1)/t.getTilesPerRow())*t.getTilesPerRow()-1):0;c=t.getTiles()[i];if(c&&c.getDomRef){a=window.$(c.getDomRef()).closest(".sapUshellSearchTileWrapper")[0];}}return a;},setFocus:function(){var t=this;var r=10;var d=function(){t.focusSetter=null;var c=t.get2BeFocusedControlDomRef();if(!c||sap.ui.getCore().getUIDirty()||sap.ui.getCore().byId('loadingDialog').isOpen()||jQuery('.sapUshellSearchTileContainerDirty').length>0||jQuery('.sapMBusyDialog').length>0){if(--r){t.focusSetter=setTimeout(d,100);}return;}c.focus();var a=sap.ui.getCore().byId(c.getAttribute('id'));if(a&&a.getContent&&a.getContent()[0]){var b=a.getContent()[0];if(b.showDetails){b.showDetails();}}t.oSearchView.resultList.collectListItemsForNavigation();};if(this.focusSetter){clearTimeout(this.focusSetter);this.focusSetter=null;}d();}};})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.SearchIntentsResolver')){(function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchIntentsResolver');var m=sap.ushell.renderers.fiori2.search.SearchIntentsResolver=function(){this.init.apply(this,arguments);};m.prototype={init:function(a){this._oCrossAppNav=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");this._model=a;},resolveIntents:function(r){var t=this;var d=new $.Deferred();t._model.sina.sinaSystem().getServerInfo().then(function(s){var a=false;for(var i=0;i<s.rawServerInfo.Services.length;++i){var b=s.rawServerInfo.Services[i];if(b.Service==='Search'){for(var j=0;j<b.Capabilities.length;++j){var c=b.Capabilities[j];if(c.Capability==='SemanticObjectType'){a=true;break;}}break;}}if(!a){d.resolve();}else{var p=[];for(var k=0;k<r.length;k++){var e=r[k];e.uri="";if(e.semanticObjectType&&e.semanticObjectType.length>0){var f=t._doResolveIntents(e);p.push(f);}}$.when.apply(null,p).always(function(g){d.resolve();});}});return d.promise();},_doResolveIntents:function(r){var t=this;var o=new $.Deferred();var p=t._oCrossAppNav.getSemanticObjectLinks(r.semanticObjectType,r.semanticObjectTypeAttrs);p.done(function(a){var f="-displayFactSheet";var b=false;r.intents=[];for(var i=0;i<a.length;i++){var c=a[i];var e={target:{shellHash:c.intent}};var d=t._oCrossAppNav.hrefForExternal(e);if(!b&&c.intent.substr(c.intent.indexOf("-"),f.length)===f){r.uri=d;b=true;}else{c.target=e.target;c.externalHash=d;r.intents.push(c);}}o.resolve();});p.fail(function(a){o.resolve();});return o;}};})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.SearchLogger')){(function(g){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchLogger');var m=sap.ushell.renderers.fiori2.search.SearchLogger={};m.NavigationEvent=function(){this.init.apply(this,arguments);};m.NavigationEvent.prototype={init:function(p){this.sina=sap.ushell.Container.getService("Search").getSina();},_createUserHistoryEntry:function(t){function a(p){var n=p;for(var i=0,o=n.length;i<o;i++){var q=n[i];if(q.indexOf("sap-system")!==-1){var r=q.split("=");return{"System":r[1].slice(4,7),"Client":r[1].slice(8,-2)};}}}function b(H){return H.split("-")[0];}function c(H){return H.split("-")[1].split("&")[0];}function d(p){var n=p;var o=[];for(var i=0,q=n.length;i<q;i++){var r=n[i];if(r.indexOf("sap-system")!==-1){continue;}var v=r.split("=")[0];var w=r.split("=")[1];o.push({"Name":v,Value:w});}return o;}var u={"NavigationEventList":[{"SourceApplication":{"SemanticObjectType":"","Intent":"","ParameterList":[]}},{"TargetApplication":{"SemanticObjectType":"","Intent":"","ParameterList":[]}}]};var h=window.hasher.getHashAsArray();var s=b(h[0]);u.NavigationEventList[0].SourceApplication.SemanticObjectType=s;var e=c(h[0]);u.NavigationEventList[0].SourceApplication.Intent=e;var f=d(h[1].split("&"));u.NavigationEventList[0].SourceApplication.ParameterList=f;h=t.split("?");var j=b(h[0]).split("#")[1];u.NavigationEventList[1].TargetApplication.SemanticObjectType=j;var k=c(h[0]);u.NavigationEventList[1].TargetApplication.Intent=k;var l=d(h[1].split("&"));u.NavigationEventList[1].TargetApplication.ParameterList=l;var S=a(h[1].split("&"));u.NavigationEventList[1].TargetApplication=jQuery.extend(u.NavigationEventList[1].TargetApplication,S);return u;},addUserHistoryEntry:function(t){if(!t){return;}if(t.indexOf("#")===-1){return;}var s=this.sina.getSystem().getServices();if(s.PersonalizedSearch&&s.PersonalizedSearch.capabilities&&s.PersonalizedSearch.capabilities.SetUserStatus){var u=this._createUserHistoryEntry(t);this.sina.addUserHistoryEntry(u).done(function(d){}).fail(function(e){});}}};}(window));};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.SearchResultListFormatter')){(function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchResultListFormatter');var m=sap.ushell.renderers.fiori2.search.SearchResultListFormatter=function(){this.init.apply(this,arguments);};m.prototype={init:function(){},format:function(s,t){return this._doFormat(s.getElements(),t);},_getImageUrl:function(r){var i={imageUrl:'',name:''};for(var p in r){var a=r[p];var b=false;try{if(a.value&&a.$$MetaData$$.presentationUsage.indexOf('Thumbnail')>=0){b=true;}}catch(e){}if(!b){continue;}i.imageUrl=a.value;i.name=p;return i;}return i;},_moveWhyFound2ResponseAttr:function(w,p){var l=w.length;while(l--){if(w[l].labelRaw===p.labelRaw&&p!==undefined){p.value=w[l].value;p.whyfound=true;w.splice(l,1);}}},_appendRemainingWhyfounds2FormattedResultItem:function(w,i){var l=w.length;while(l--){if(w[l].labelRaw!==undefined){var I={};I.name=w[l].label;I.value=w[l].value;I.whyfound=true;i.push(I);w.splice(l,1);}}},_doFormat:function(r,t){var s=function(a,b){return a.displayOrder-b.displayOrder;};var f=[];for(var i=0;i<r.length;i++){var c=r[i];var u='';var d=c.$$RelatedActions$$;for(var e in d){if(d[e].type==="Navigation"){u=encodeURI(d[e].uri);}}var w=c.$$WhyFound$$||[];var g=[];var h=[];var j='';var k={};for(var p in c){if(!c[p].label||!c[p].$$MetaData$$){continue;}var l=c[p].$$MetaData$$.presentationUsage||[];if(l&&l.length>0){if(l.indexOf("Title")>-1&&c[p].value){this._moveWhyFound2ResponseAttr(w,c[p]);j=j+" "+c[p].value;}if(l.indexOf("Summary")>-1){g.push({property:p,displayOrder:c[p].$$MetaData$$.displayOrder});}else if(l.indexOf("Detail")>-1){h.push({property:p,displayOrder:c[p].$$MetaData$$.displayOrder});}}var n=c[p].$$MetaData$$.semanticObjectType;if(n&&n.length>0){k[n]=c[p].valueRaw;}}g.sort(s);h.sort(s);var o=g.concat(h);var q={};q.semanticObjectTypeAttrs=k;var v=this._getImageUrl(c);q.imageUrl=v.imageUrl;q.dataSourceName=c.$$DataSourceMetaData$$.label;q.uri=u;q.semanticObjectType=c.$$DataSourceMetaData$$.semanticObjectType||"";q.$$Name$$='';var I=[];for(var z=0;z<o.length;z++){var x=o[z].property;var y={};if(x!==v.name){this._moveWhyFound2ResponseAttr(w,c[x]);y.name=c[x].label;y.value=c[x].value;if(c[x].whyfound){y.whyfound=c[x].whyfound;}I.push(y);}}q.$$Name$$=j.trim();q.numberofattributes=o.length;q.title=c.title;q.itemattributes=I;this._appendRemainingWhyfounds2FormattedResultItem(w,q.itemattributes);f.push(q);}return f;}};})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.SearchTabStripsFormatter')){(function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchTabStripsFormatter');var m=sap.ushell.renderers.fiori2.search.SearchTabStripsFormatter={};m.Node=function(){this.init.apply(this,arguments);};m.Node.prototype={init:function(d,c){this.dataSource=d;this.children=[];this.parent=null;this.count=c;},_arraysEqual:function(a,b){if(a===b){return true;}if(a==null||b==null){return false;}if(a.length!=b.length){return false;}for(var i=0;i<a.length;++i){if(a[i]!==b[i]){return false;}}return true;},equals:function(o){var p=false;var e=this.dataSource.equals(o.dataSource)&&this.count===o.count&&this._arraysEqual(this.children,o.children);if(this.parent){if(o.parent){p=this.parent.equals(o.parent);}else{p=false;}}else{if(o.parent){p=false;}else{p=true;}}return e&&p;},setCount:function(c){this.count=c;},childrenHaveUpToDateCount:function(){for(var i=0;i<this.children.length;++i){var c=this.children[i];if(c.count===null){return false;}}return true;},invalidateCount:function(){this.count=null;for(var i=0;i<this.children.length;++i){var c=this.children[i];c.invalidateCount();}},getChildrenSortedByCount:function(){if(!this.childrenHaveUpToDateCount()){throw'Count invalidated - cannot sort';}var c=this.children.slice();c.sort(function(a,b){return b.count-a.count;});return c;},clearChildren:function(){this.children=[];},appendNode:function(n){n.parent=this;this.children.push(n);},removeChildNode:function(n){var i=this.children.indexOf(n);if(i<0){return;}this.children.splice(i,1);},findNode:function(d,r){if(this.dataSource.equals(d)){r.push(this);return;}for(var i=0;i<this.children.length;++i){var c=this.children[i];c.findNode(d,r);if(r.length>0){return;}}},hasChild:function(n){for(var i=0;i<this.children.length;++i){var c=this.children[i];if(c===n){return true;}}return false;},hasSibling:function(n){if(this.equals(n)){return false;}if(!this.parent){return null;}for(var i=0;i<this.parent.children.length;++i){var c=this.parent.children[i];if(c===n){return true;}}return false;},getLevel1Node:function(){if(!this.parent){return null;}if(this.parent.dataSource.key&&this.parent.dataSource.key.indexOf('$$ALL$$')>-1){return this;}return this.parent.getLevel1Node();}};m.Tree=function(){this.init.apply(this,arguments);};m.Tree.prototype={init:function(){this.rootNode=null;},findNode:function(d){if(!this.rootNode){return null;}var r=[];this.rootNode.findNode(d,r);return r.length>0?r[0]:null;},hasChild:function(d,a){if(a&&a.key&&a.key.indexOf('$$ALL$$')>-1){return false;}var n=this.findNode(d);if(!n){return false;}var b=this.findNode(a);if(!b){return false;}return n.hasChild(b);},hasSibling:function(d,a){if(a&&a.key&&a.key.indexOf('$$ALL$$')>-1){return false;}var n=this.findNode(d);if(!n){return false;}var b=this.findNode(a);if(!b){return false;}return n.hasSibling(b);},updateFromPerspective:function(d,p,a){if(!this.rootNode){this.rootNode=new m.Node(d,null);}var c=null;try{c=p.getSearchFacet().getQuery().getResultSetSync().totalcount;}catch(e){}var b=this.findNode(d);if(!b){this.rootNode=new m.Node(d,c);b=this.rootNode;}else{b.setCount(c);}this.updateFromPerspectiveChildDataSources(b,p);this.updateAppTreeNode(d,a);},updateAppTreeNode:function(d,a){if(!this.rootNode.dataSource.equals(a.allDataSource)){return;}if(!d.equals(a.allDataSource)&&!d.equals(a.appDataSource)){return;}var b=a.getProperty('/appCount');var c=this.findNode(a.appDataSource);if(c){this.rootNode.removeChildNode(c);}if(b===0){return;}c=new m.Node(a.appDataSource,b);if(!this.rootNode.childrenHaveUpToDateCount()){this.rootNode.clearChildren();}this.rootNode.appendNode(c);},updateFromPerspectiveChildDataSources:function(c,p){if(!p){return;}var f=p.getChartFacets();if(f.length===0){return;}var d=f[0];if(d.facetType!=='datasource'){return;}var a=d.getQuery().getResultSetSync().getElements();c.clearChildren();for(var i=0;i<a.length;++i){var b=a[i];c.appendNode(new m.Node(b.dataSource,b.valueRaw));}}};m.Formatter=function(){this.init.apply(this,arguments);};m.Formatter.prototype={init:function(){this.tree=new m.Tree();},format:function(d,p,a){this.tree.updateFromPerspective(d,p,a);var t=this.generateTabStrips(d,a);return t;},invalidateCount:function(){if(!this.tree.rootNode){return;}this.tree.rootNode.invalidateCount();},generateTabStrips:function(d,a){var t=9999;var i,c,b;var e={strips:[],selected:null};var n=this.tree.findNode(d);if(!n){if(!d.equals(a.allDataSource)){e.strips.push(a.allDataSource);}e.strips.push(d);e.selected=d;return e;}if(n.dataSource.equals(a.allDataSource)){e.strips.push(a.allDataSource);if(n.childrenHaveUpToDateCount()){b=n.getChildrenSortedByCount();for(i=0;i<b.length&&e.strips.length<t;++i){c=b[i];e.strips.push(c.dataSource);}}e.selected=a.allDataSource;return e;}if(n.parent&&n.parent.dataSource.equals(a.allDataSource)){e.strips.push(a.allDataSource);if(n.parent.childrenHaveUpToDateCount()){var f=false;b=n.parent.getChildrenSortedByCount();for(i=0;i<b.length;++i){c=b[i];if(f){if(e.strips.length>=t){break;}e.strips.push(c.dataSource);}else{if(e.strips.length<t-1||n===c){e.strips.push(c.dataSource);if(n===c){f=true;}}}}}else{e.strips.push(n.dataSource);}e.selected=n.dataSource;return e;}e.strips.push(a.allDataSource);e.strips.push(n.dataSource);e.selected=n.dataSource;return e;}};})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.SemanticObjectsHandler')){(function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SemanticObjectsHandler');var m=sap.ushell.renderers.fiori2.search.SemanticObjectsHandler={};m.SemanticObject=function(){this.init.apply(this,arguments);};m.SemanticObject.prototype={init:function(p){this.type=p.type;this.action=p.action;this.key=p.key;},getSemanticLinks:function(){var t=this;return m.getSemanticObjectsMetadata().then(function(a){var r={};var b=a[t.type];for(var i=0;i<b.Links.results.length;++i){var l=b.Links.results[i];if(l.id.indexOf(t.type+"-displayFactSheet~")>=0){if(t.action!=="displayFactSheet"){if(!r.displayFactSheet){r.displayFactSheet=[];r.displayFactSheet.push({link:l.id+'?'+t.key,text:l.text,shortText:sap.ushell.resources.i18n.getText("action_display")});}}}else if(l.id.indexOf(t.type+"-change~")>=0){if(!r.change){r.change=[];r.change.push({link:l.id+'?'+t.key,text:l.text,shortText:sap.ushell.resources.i18n.getText("action_change")});}}else if(l.id.indexOf(t.type+"-display~")>=0){if(!r.display){r.display=[];r.display.push({link:l.id+'?'+t.key,text:l.text,shortText:sap.ushell.resources.i18n.getText("action_display")});}}else if(l.id.indexOf(t.type+"-manage~")>=0){if(!r.manage){r.manage=[];r.manage.push({link:l.id+'?'+t.key,text:l.text,shortText:sap.ushell.resources.i18n.getText("action_manage")});}}else if(l.id.indexOf(t.type+"-approve~")>=0){if(!r.approve){r.approve=[];r.approve.push({link:l.id+'?'+t.key,text:l.text,shortText:sap.ushell.resources.i18n.getText("action_approve")});}}else{if(!r.other){r.other=[];}r.other.push({link:l.id+'?'+t.key,text:l.text});}}return r;});}};m.createSemanticObjectFromLink=function(l){var i=l.indexOf('-');if(i<0){throw'Error when parsing link, missing \'-\' delimiter in \''+l+'\'';}var t=l.slice(0,i);l=l.slice(i+1);i=l.indexOf('?');if(i<0){throw'Error when parsing link, missing \'?\' delimiter in \''+l+'\'';}var a=l.slice(0,i);var k=l.slice(i+1);return new m.SemanticObject({type:t,action:a,key:k});};m.semanticObjectsMetadataDeferred=null;m.metaDataUrl='/sap/opu/odata/UI2/INTEROP/SemanticObjects?$expand=Links&$format=json';m.getSemanticObjectsMetadata=function(){if(m.semanticObjectsMetadataDeferred){return m.semanticObjectsMetadataDeferred;}m.semanticObjectsMetadataDeferred=new jQuery.Deferred();var j=new sap.ui.model.json.JSONModel();j.loadData(m.metaDataUrl);j.attachRequestCompleted(function(){var r={};var t=this.getData().d.results;for(var i=0;i<t.length;++i){var a=t[i];r[a.id]=a;}m.semanticObjectsMetadataDeferred.resolve(r);});return m.semanticObjectsMetadataDeferred;};m.linkDetermination=function(a){return m.getSemanticObjectsMetadata().then(function(b){var r={},l=a;var c=l.indexOf("-");if(c<0){throw"Error when parsing link, missing \'-\' delimiter in \'"+l+"\'";}var s=l.slice(0,c);l=l.slice(c+1);c=l.indexOf("?");if(c<0){throw"Error when parsing link, missing \'?\' delimiter in \'"+l+"\'";}var d=l.slice(0,c);var k=l.slice(c+1);if(d==="displayFactSheet"){r.mainLink=a;return r;}var t=b[s];var f={},A="";for(var i=0;i<t.Links.results.length;++i){l=t.Links.results[i];if(l.id.indexOf("-"+d+"~")>=0){A=a;}if(l.id.indexOf(s+"-displayFactSheet~")>=0){f.link=l.id+"?"+k;f.text=sap.ushell.resources.i18n.getText("show_related_objects");}}if(A){r.mainLink=A;if(f.link){r.relatedLink=f;}}else{if(f.link){r.mainLink=f.link;}}return r;});};m.test=function(){var s=m.createSemanticObjectFromLink('SalesOrder-displayFactSheet?SalesOrder=0000027');s.getSemanticLinks().done(function(l){for(var i=0;i<l.length;++i){var a=l[i];}});s.getSemanticLinks().done(function(l){for(var i=0;i<l.length;++i){var a=l[i];}});};})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.UXLog')){(function(){"use strict";var S=sap.ushell.renderers.fiori2.search.SearchHelper;jQuery.sap.declare('sap.ushell.renderers.fiori2.search.UXLog');var m=sap.ushell.renderers.fiori2.search.UXLog={};jQuery.extend(m,{logLines:[],log:function(){this._log.apply(this,arguments);},_log:function(t){this.logLines.push(t);this._save();},_save:function(){jQuery.ajax({type:'PUT',url:'/uxlog.txt',data:this.logLines.join('\n')+'\n',contentType:'text/plain'});this.logLines=[];}});m._save=S.delayedExecution(m._save,2000);})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.container.Component')){jQuery.sap.declare("sap.ushell.renderers.fiori2.search.container.Component");jQuery.sap.require('sap.ui.core.UIComponent');sap.ui.core.UIComponent.extend("sap.ushell.renderers.fiori2.search.container.Component",{metadata:{version:"1.32.6",library:"sap.ushell.renderers.fiori2.search.container",includes:[],dependencies:{libs:["sap.m"],components:[]},config:{}},createContent:function(){"use strict";return sap.ui.view({id:"searchContainerApp",viewName:"sap.ushell.renderers.fiori2.search.container.App",type:sap.ui.core.mvc.ViewType.JS});}});};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.container.ResultListKeyEventHandler')){(function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.container.ResultListKeyEventHandler');var d={getAncestorByClass:function(e,c){while(e){if(e.classList.contains(c)){return e;}e=e.parentElement;}return false;}};var R=function(){this.init.apply(this,arguments);};R.prototype={init:function(e,m){this.element=e;this.model=m;},checkItem:function(n){if(!n){return null;}if(n.classList.contains('searchResultListItem')){return new R(n,this.model);}var t=n.querySelector('.sapUshellSearchTileContainer');if(!t){return null;}var a=t.children.item(1);if(!a){return null;}if(!a.classList.contains('sapUiHLayoutChildWrapper')){return null;}var b=a.children.item(0).children.item(0);if(!b){return null;}return new T(b,this.model);},getLowerObj:function(){var n=this.element.nextElementSibling;return this.checkItem(n);},getUpperObj:function(){var n=this.element.previousElementSibling;return this.checkItem(n);},getLeftObj:function(){return this.getUpperObj();},getRightObj:function(){return this.getLowerObj();},focus:function(){this.element.focus();}};var T=function(){this.init.apply(this,arguments);};T.prototype={init:function(e,m){this.element=e;this.model=m;},getWrapperElement:function(){return this.element.parentElement.parentElement;},getResultListItemElement:function(){var t=d.getAncestorByClass(this.element,'sapUshellSearchTileContainer');return t.parentElement.parentElement;},checkElement:function(e){if(!e){return null;}if(!e.classList.contains('sapUiHLayoutChildWrapper')){var s=this.model.getAppSkip()+1;this.model.setAppSkip(s);return null;}var t=e.children.item(0).children.item(0);if(!t){return null;}return new T(t,this.model);},getLeftObj:function(){var n=this.getWrapperElement().previousElementSibling;return this.checkElement(n);},getRightObj:function(){var p=this.getWrapperElement().nextElementSibling;return this.checkElement(p);},getLowerObj:function(){return(new R(this.getResultListItemElement(),this.model)).getLowerObj();},getUpperObj:function(){return(new R(this.getResultListItemElement(),this.model)).getUpperObj();},focus:function(){this.element.focus();}};sap.ushell.renderers.fiori2.search.container.ResultListKeyEventHandler=function(){this.init.apply(this,arguments);};sap.ushell.renderers.fiori2.search.container.ResultListKeyEventHandler.prototype={init:function(m){this.model=m;},getObject:function(e){var t=d.getAncestorByClass(e,'sapUshellTileBase');if(t){return new T(t,this.model);}var i=d.getAncestorByClass(e,'searchResultListItem');if(i){return new R(i,this.model);}return null;},onsapdown:function(e){return this.navigate('getLowerObj',e);},onsapup:function(e){return this.navigate('getUpperObj',e);},onsapleft:function(e){return this.navigate('getLeftObj',e);},onsapright:function(e){return this.navigate('getRightObj',e);},navigate:function(n,e){e.preventDefault();var o=this.getObject(e.target);if(!o){return;}var t=o[n].apply(o,[]);if(!t){return;}t.focus();},onAfterRendering:function(){}};})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchBar')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchBar');(function(){"use strict";jQuery.sap.require('sap.m.Bar');jQuery.sap.require('sap.m.Label');jQuery.sap.require('sap.m.Button');jQuery.sap.require('sap.m.ButtonType');jQuery.sap.require('sap.m.ToggleButton');sap.m.Bar.extend('sap.ushell.renderers.fiori2.search.controls.SearchBar',{metadata:{properties:{filterButtonVisible:{type:"boolean",defaultValue:true},filterButtonPressed:{type:"boolean",defaultValue:false}}},constructor:function(o,i){var t=this;t.sMarginPropValueSmall="0.5rem";t.sMarginPropValueBigNormalMode="12.5rem";t.sMarginPropValueBigCompactMode="13.5rem";t.sMarginPropValueBig=t.sMarginPropValueBigNormalMode;if(jQuery("html").attr("dir")==='rtl'){t.sMarginPropName="margin-right";}else{t.sMarginPropName="margin-left";}t.filterButtonPressed=o.filterButtonPressed;t.filterBtn=new sap.m.ToggleButton({icon:sap.ui.core.IconPool.getIconURI("filter"),tooltip:t.filterButtonPressed?sap.ushell.resources.i18n.getText("hideFacetBtn_tooltip"):sap.ushell.resources.i18n.getText("showFacetBtn_tooltip"),pressed:t.filterButtonPressed,press:function(){if(this.getPressed()){t.getModel().setFacetVisibility(true);t._animateFilterBtn(this.getPressed(),400,function(){jQuery(this).attr("title",sap.ushell.resources.i18n.getText("hideFacetBtn_tooltip"));});}else{t.getModel().setFacetVisibility(false);t._animateFilterBtn(this.getPressed(),400,function(){jQuery(this).attr("title",sap.ushell.resources.i18n.getText("showFacetBtn_tooltip"));});}}});t.filterBtn.addStyleClass('searchBarFilterButton');t.filterBtn.addEventDelegate({onAfterRendering:function(){if(jQuery(t.getDomRef()).parents(".sapUiSizeCompact").length>0){t.sMarginPropValueBig=t.sMarginPropValueBigCompactMode;}t._animateFilterBtn(t.filterBtn.getPressed(),0);}});o=jQuery.extend({},{contentLeft:[new sap.m.Button({type:sap.m.ButtonType.Back,press:function(e){window.history.back(1);},tooltip:"{i18n>backBtn_tooltip}"})]},o);if(!sap.ui.Device.system.phone){o.contentLeft.push(this.filterBtn);}sap.m.Bar.prototype.constructor.apply(this,[o],i);this.addStyleClass('searchBar');},getFilterButtonVisible:function(){this.filterBtn.getVisible();},setFilterButtonVisible:function(i){this.filterBtn.setVisible(i);this.setProperty("filterButtonVisible",i);},getFilterButtonPressed:function(){this.filterBtn.getPressed();},setFilterButtonPressed:function(i){this.filterBtn.setPressed(i);this.setProperty("filterButtonPressed",i);this._animateFilterBtn(i);},_animateFilterBtn:function(p,n,c){var t=this;var m={};if(p){m[t.sMarginPropName]=t.sMarginPropValueBig;}else{m[t.sMarginPropName]=t.sMarginPropValueSmall;}jQuery(t.filterBtn.getDomRef()).animate(m,{duration:n,complete:c});},renderer:'sap.m.BarRenderer'});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchButton')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchButton');(function(){"use strict";jQuery.sap.require('sap.m.Button');sap.m.Button.extend('sap.ushell.renderers.fiori2.search.controls.SearchButton',{constructor:function(i,o){o=jQuery.extend({},{icon:sap.ui.core.IconPool.getIconURI("search"),tooltip:sap.ushell.resources.i18n.getText("search")},o);sap.m.Button.prototype.constructor.apply(this,[i,o]);this.addStyleClass('searchBtn');},renderer:'sap.m.ButtonRenderer'});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchFacetDialog')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchFacetDialog');(function(){"use strict";jQuery.sap.require('sap.m.Dialog');jQuery.sap.require('sap.ushell.renderers.fiori2.search.FacetItem');sap.m.Dialog.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetDialog',{constructor:function(o){var t=this;t.facetListPosition=0;t.settingContainerPosition=0;t.separatorPosition=1;t.attributeListPosition=2;t.advancedPosition=3;t.sortingSelectPosition=0;t.showOnTopCheckBoxPosition=1;t.bSingleCall=false;o=jQuery.extend({},{showHeader:false,horizontalScrolling:false,verticalScrolling:false,beginButton:new sap.m.Button({text:sap.ushell.resources.i18n.getText("okDialogBtn"),press:function(e){t.onOkClick(e);t.close();t.destroy();}}),endButton:new sap.m.Button({text:sap.ushell.resources.i18n.getText("cancelDialogBtn"),press:function(e){t.close();t.destroy();}}),content:[t.createContainer()]},o);t.selectedAttribute=o.selectedAttribute?o.selectedAttribute:"";sap.m.Dialog.prototype.constructor.apply(this,[o]);this.addStyleClass('sapUiSizeCompact');this.addStyleClass('sapUshellSearchFacetDialog');},renderer:'sap.m.DialogRenderer',createContainer:function(){var t=this;t.oSplitContainer=new sap.m.SplitContainer({masterPages:t.masterPagesFactory()});t.oSplitContainer.bindAggregation("detailPages","/facetDialog",function(i,c){return t.detailPagesFactory(i,c);});t.oSplitContainer.addStyleClass('sapUshellSearchFacetDialogContainer');return t.oSplitContainer;},masterPagesFactory:function(){var t=this;var f=new sap.m.List({mode:sap.m.ListMode.SingleSelectMaster,selectionChange:function(e){t.onMasterPageSelectionChange(e);}});f.bindAggregation("items","/facetDialog",function(I,c){var l=new sap.m.StandardListItem({title:"{title}",infoState:"Success"});var F=c.oModel.getProperty(c.sPath).facetType;var a=c.oModel.getProperty(c.sPath).items;var b=0;for(var i=0;i<a.length;i++){if(a[i].selected){b++;}}if(b>0){if(F==="attribute"){l.setCounter(b);}}if(F==="search"){l.addStyleClass('sapUshellSearchFacetDialogListItemBold');}return l;});var m=new sap.m.ScrollContainer({height:'100%',horizontal:false,vertical:true,content:[f]}).addStyleClass('sapUshellSearchFacetDialogMasterContainer');m.addEventDelegate({onAfterRendering:function(e){if(t.selectedAttribute){for(var i=0;i<f.getItems().length;i++){var l=f.getItems()[i];var b=l.getBindingContext().getObject();if(t.selectedAttribute===b.dimension){f.setSelectedItem(l);}}}if(!f.getSelectedItem()){f.setSelectedItem(f.getItems()[0]);}var s=f.getSelectedItem();t.updateDetailPage(s);}});var M=[m];return M;},onMasterPageSelectionChange:function(e){var t=this;var l=e.mParameters.listItem;t.updateDetailPage(l);},detailPagesFactory:function(I,c){var t=this;var f=c.oModel.getProperty(c.sPath).facetType;var a=c.oModel.getProperty(c.sPath).items;var b=0;for(var i=0;i<a.length;i++){if(a[i].selected){b++;}}var s=new sap.m.Select({items:[new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("notSorted"),key:"notSorted"}),new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("sortByCount"),key:"sortCount"}),new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("sortByName"),key:"sortName"})],selectedKey:"notSorted",change:function(E){t.onSelectChange(E);}}).addStyleClass('sapUshellSearchFacetDialogSettingsSelect');var C=new sap.m.CheckBox({text:"Show Selected on Top",enabled:b>0?true:false,select:function(E){t.onCheckBoxSelect(E);}});var S=new sap.ui.layout.VerticalLayout({content:[s,C]}).addStyleClass('sapUshellSearchFacetDialogSettingsContainer');S.setVisible(false);var l=new sap.m.List({includeItemInSelection:true,showNoData:false,showSeparators:sap.m.ListSeparators.None,selectionChange:function(E){t.onDetailPageSelectionChange(E);}}).addStyleClass('sapUshellSearchFacetDialogDetailPageList');if(f==="attribute"){l.setMode(sap.m.ListMode.MultiSelect);}else{l.setMode(sap.m.ListMode.SingleSelectMaster);}var B={path:"items",factory:function(I,c){var j=c.oModel.getProperty(c.sPath);var k=new sap.m.StandardListItem({title:"{label}",tooltip:"{label}"+"  "+"{value}",info:"{valueLabel}",selected:j.selected});if(!t.bSingleCall&&j.selected&&!c.oModel.hasFilter(j)){c.oModel.aFilters.push(j);}return k;}};B.filters=new sap.ui.model.Filter("advanced",sap.ui.model.FilterOperator.NE,true);l.bindAggregation("items",B);var L=new sap.m.ScrollContainer({height:'67.2%',horizontal:false,vertical:true,content:[l]}).addStyleClass('sapUshellSearchFacetDialogDetailPageListContainer');var o=new sap.m.StandardListItem({});var d=new sap.m.List({items:[o],showSeparators:sap.m.ListSeparators.None}).addStyleClass('sapUshellSearchFacetDialogDetailPageSeparator');var e=c.oModel.getProperty(c.sPath).items[0].filterCondition;var D=t.getAttributeDataType(e);var A=t.advancedConditionFactory(D);var g=new sap.m.ScrollContainer({height:'32%',horizontal:false,vertical:true,content:[A]}).addStyleClass('sapUshellSearchFacetDialogDetailPageAdvancedContainer');g.data('dataType',D);t.updateAdvancedConditions(g,a,D);var p=new sap.m.Page({showHeader:true,title:sap.ushell.resources.i18n.getText("filters"),subHeader:new sap.m.Toolbar({content:[new sap.m.SearchField({placeholder:sap.ushell.resources.i18n.getText("filterPlaceholder"),liveChange:function(E){t.onSearchFieldLiveChange(E);}}),new sap.m.ToggleButton({icon:"sap-icon://sort",press:function(E){t.onSettingButtonPress(E);}})]}),content:[S,d,L,g]}).addStyleClass('sapUshellSearchFacetDialogDetailPage');if(f==="datasource"){p.destroySubHeader();}if(f==="search"){p.getSubHeader().removeContent(1);var h=c.oModel.getProperty('/searchBoxTerm');p.getSubHeader().getContent()[0].setValue(h);}return p;},advancedConditionFactory:function(t){var a=this;var A=new sap.m.CheckBox({select:function(e){a.updateCountInfo(e.getSource().getParent().getParent().getParent());}}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionCheckBox');var i;switch(t){case'date':i=new sap.m.DateRangeSelection({width:'90%',change:function(e){a.onDateRangeSelectionChange(e);}}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionInput');break;case'string':i=new sap.m.Input({width:'90%',liveChange:function(e){a.onAdvancedInputChange(e);}}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionInput');break;case'number':var I=new sap.m.Input({width:'46.5%',liveChange:function(e){a.onAdvancedNumberInputChange(e);},type:sap.m.InputType.Number}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionInput');var o=new sap.m.Input({width:'46.5%',liveChange:function(e){a.onAdvancedNumberInputChange(e);},type:sap.m.InputType.Number}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionInput');var l=new sap.m.Label({text:'...'}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionLabel');i=new sap.ui.layout.HorizontalLayout({allowWrapping:true,content:[I,l,o]});break;default:break;}var b=new sap.ui.layout.HorizontalLayout({allowWrapping:true,content:[A,i]}).addStyleClass('sapUshellSearchFacetDialogDetailPageCondition');return b;},onDetailPageSelectionChange:function(e){var t=this;var s=e.mParameters.listItem;var S=s.getBindingContext().sPath+"/selected";s.getBindingContext().oModel.setProperty(S,s.getSelected());var b=s.getBindingContext().getObject();if(s.getSelected()){t.getModel().addFilter(b);}else{t.getModel().removeFilter(b);}var l=e.oSource;var d=l.getParent().getParent();t.updateCountInfo(d);var o=l.getParent().getParent().getContent()[t.settingContainerPosition];var c=o.getContent()[t.showOnTopCheckBoxPosition];var a=o.getContent()[t.sortingSelectPosition];if(c.getSelected()){c.setSelected(false);a.setSelectedKey("notSorted");}if(l.getSelectedContexts().length>0){c.setEnabled(true);}else{c.setEnabled(false);}},onSearchFieldLiveChange:function(e){var t=this;var f=e.getSource().getValue();var s=t.getFacetList().getSelectedItem();t.updateDetailPage(s,f);},onSettingButtonPress:function(e){var t=this;var p=e.oSource.getPressed();var s=e.oSource.getParent().getParent().getContent()[t.settingContainerPosition];var S=e.oSource.getParent().getParent().getContent()[t.separatorPosition];var l=e.oSource.getParent().getParent().getContent()[t.attributeListPosition];if(p){s.setVisible(true);S.setShowSeparators(sap.m.ListSeparators.All);l.setHeight('54%');}else{s.setVisible(false);S.setShowSeparators(sap.m.ListSeparators.None);l.setHeight('67.2%');}},onSelectChange:function(e){var t=this;t.sortingAttributeList(e.oSource.getParent().getParent());},onCheckBoxSelect:function(e){var t=this;t.sortingAttributeList(e.oSource.getParent().getParent());},onDateRangeSelectionChange:function(e){var t=this;var d=e.getSource();var a=d.getParent();var A=a.getContent()[0];if(d.getDateValue()&&d.getSecondDateValue()){A.setSelected(true);t.insertNewAdvancedCondition(a,"date");t.updateCountInfo(a.getParent().getParent());}else{A.setSelected(false);}},onAdvancedInputChange:function(e){var t=this;var i=e.getSource();var a=i.getParent();var A=a.getContent()[0];if(i.getValue()){A.setSelected(true);t.insertNewAdvancedCondition(a,"string");t.updateCountInfo(a.getParent().getParent());}else{A.setSelected(false);}},onAdvancedNumberInputChange:function(e){var t=this;var i=e.getSource();var a=i.getParent().getParent();var A=a.getContent()[0];if(i.getParent().getContent()[0].getValue()&&i.getParent().getContent()[2].getValue()){A.setSelected(true);t.insertNewAdvancedCondition(a,"number");t.updateCountInfo(a.getParent().getParent());}else{A.setSelected(false);}},onOkClick:function(e){var t=this;var M=t.getModel();var s=t.getModel('searchModel');s.resetFilterConditions(false);var d=t.oSplitContainer.getDetailPages();for(var m=0;m<M.aFilters.length;m++){var a=M.aFilters[m];if(!a.advanced){s.addFilterCondition(a,false);}}for(var i=0;i<d.length;i++){if(d[i].getContent()[t.advancedPosition]){var A=d[i].getContent()[t.advancedPosition];var D=A.data('dataType');var o=d[i].getContent()[t.advancedPosition].getContent();var k,b,c,f,g,C,h;switch(D){case'date':for(k=0;k<o.length;k++){b=o[k];c=b.getContent()[0];var j=b.getContent()[1];if(c.getSelected()&&j.getDateValue()&&j.getSecondDateValue()){var F={"pattern":"yyyy-MM-dd HH:mm:ss.SSSSSSS"};var S={"pattern":"yyyy-MM-dd 23:59:59.9999999"};var l=sap.ui.core.format.DateFormat.getDateTimeInstance(F).format(j.getDateValue());var n=sap.ui.core.format.DateFormat.getDateTimeInstance(S).format(j.getSecondDateValue());f=s.sina.createFilterCondition({attribute:t.getFacetList().getItems()[i].getBindingContext().getObject().dimension,operator:">=",value:l});g=s.sina.createFilterCondition({attribute:t.getFacetList().getItems()[i].getBindingContext().getObject().dimension,operator:"<=",value:n});C=t.getModel().sina.createFilterConditionGroup();C.label=j.getValue();C.conditions[0]=f;C.conditions[1]=g;h=t.createAdvancedFacetItem(C,t.getFacetList().getItems()[i].getBindingContext().getObject().title);s.addFilterCondition(h,false);}}break;case'string':for(k=0;k<o.length;k++){b=o[k];c=b.getContent()[0];var p=b.getContent()[1];if(c.getSelected()&&p.getValue()){var q=s.sina.createFilterCondition({attribute:t.getFacetList().getItems()[i].getBindingContext().getObject().dimension,operator:"=",value:p.getValue()});h=t.createAdvancedFacetItem(q,t.getFacetList().getItems()[i].getBindingContext().getObject().title);s.addFilterCondition(h,false);}}break;case'number':for(k=0;k<o.length;k++){b=o[k];c=b.getContent()[0];var r=b.getContent()[1].getContent()[0];var u=b.getContent()[1].getContent()[2];var v=b.getContent()[1].getContent()[1];if(c.getSelected()&&r.getValue()&&u.getValue()){f=s.sina.createFilterCondition({attribute:t.getFacetList().getItems()[i].getBindingContext().getObject().dimension,operator:">=",value:r.getValue()});g=s.sina.createFilterCondition({attribute:t.getFacetList().getItems()[i].getBindingContext().getObject().dimension,operator:"<=",value:u.getValue()});C=t.getModel().sina.createFilterConditionGroup();C.label=r.getValue()+v.getText()+u.getValue();C.conditions[0]=f;C.conditions[1]=g;h=t.createAdvancedFacetItem(C,t.getFacetList().getItems()[i].getBindingContext().getObject().title);s.addFilterCondition(h,false);}}break;default:break;}}}s.filterChanged=true;s._searchFireQuery();},getFacetList:function(){var t=this;return t.oSplitContainer.getMasterPages()[0].getContent()[this.facetListPosition];},updateCountInfo:function(d){var t=this;var l=d.getContent()[t.attributeListPosition].getContent()[0];var c=l.getSelectedContexts();var a=l.getParent().getParent().getContent()[t.advancedPosition];var b=0;for(var i=0;i<a.getContent().length;i++){var C=a.getContent()[i];var o=C.getContent()[0];if(o.getSelected()){b++;}}var m=t.getFacetList();var M=m.getSelectedItem();if(!M){M=m.getItems()[0];}var s=M.getBindingContext().sPath;var f=M.getBindingContext().oModel.getProperty(s).facetType;if(f==="attribute"){var e=c.length+b;if(e>0){M.setCounter(e);}else{M.setCounter(null);}}},sortingAttributeList:function(d){var t=this;var s=d.getContent()[t.settingContainerPosition];var S=s.getContent()[t.sortingSelectPosition];var c=s.getContent()[t.showOnTopCheckBoxPosition];var l=d.getContent()[t.attributeListPosition].getContent()[0];var b=l.getBinding("items");var a=[];if(c.getSelected()){a.push(new sap.ui.model.Sorter("selected",true,false));}switch(S.getSelectedKey()){case"sortName":a.push(new sap.ui.model.Sorter("label",false,false));break;case"sortCount":a.push(new sap.ui.model.Sorter("value",true,false));break;default:break;}b.sort(a);},getAttributeDataType:function(c){var t=this;var d;if(c.attribute){if(t.getModel().aAttributesMetaData[c.attribute]){d=t.getModel().aAttributesMetaData[c.attribute].$$MetaData$$.dataType;}}else if(c.conditions){if(t.getModel().aAttributesMetaData[c.conditions[0].attribute]){d=t.getModel().aAttributesMetaData[c.conditions[0].attribute].$$MetaData$$.dataType;}}switch(d){case"Double":return"number";case"Timestamp":return"date";case"String":return"string";default:return"string";}},createAdvancedFacetItem:function(f,F){var a=new sap.ushell.renderers.fiori2.search.FacetItem({value:"",filterCondition:f,facetTitle:F,label:f.label?f.label:f.value,selected:true,level:0});return a;},insertNewAdvancedCondition:function(a,t){var b=this;var A=a.getParent();var i=A.indexOfAggregation("content",a);if(i===(A.getAggregation("content").length-1)){var n=b.advancedConditionFactory(t);A.addContent(n);}},updateAdvancedConditions:function(a,I,t){var b=this;var c,C,o,d;for(var i=I.length;i>0;i--){var e=I[i-1];if(e.advanced){b.getModel().aFilters.push(e);c=a.getContent();C=c[c.length-1];o=C.getContent()[0];o.setSelected(true);d=C.getContent()[1];if(t==="number"){var f=d.getContent()[0];var g=d.getContent()[2];if(e.filterCondition.conditions){for(var j=0;j<e.filterCondition.conditions.length;j++){var h=e.filterCondition.conditions[j];if(h.operator===">="){f.setValue(h.value);}if(h.operator==="<="){g.setValue(h.value);}}}}else{d.setValue(e.label);}b.insertNewAdvancedCondition(C,t);}}},applyFacetQueryFilter:function(e){var t=this;t.getModel().resetFacetQueryFilterConditions();var d=t.oSplitContainer.getDetailPages();for(var i=0;i<d.length;i++){if(i===e){continue;}var l=d[i].getContent()[t.attributeListPosition].getContent()[0];for(var j=0;j<l.getItems().length;j++){var L=l.getItems()[j];var o=L.getBindingContext().getObject();var f=o.filterCondition;if(f.attribute||f.conditions){if(L.getSelected()){if(!t.getModel().facetQuery.getFilter().hasFilterCondition(f)){t.getModel().facetQuery.addFilterCondition(f);}}}}}},updateDetailPage:function(l,f){var t=this;var m=l.getBindingContext().oModel;var b=l.getBindingContext().sPath;var i=t.getFacetList().indexOfAggregation("items",l);var d=t.oSplitContainer.getDetailPages()[i];var D=d.getContent()[t.attributeListPosition].getContent()[0];var n=d.getId();D.setBusy(true);t.oSplitContainer.toDetail(n,"show");var s=m.getProperty(b);var p={sAttribute:s.dimension,sBindingPath:b,oList:D};t.applyFacetQueryFilter(i);if(f){var a=m.sina.createFilterCondition({attribute:s.dimension,operator:"=",value:f+"*"});m.facetQuery.addFilterCondition(a);}t.bSingleCall=true;m.facetDialogSingleCall(p).done(function(){t.updateDetailPageListItemsSelected(D);});},updateDetailPageListItemsSelected:function(d){var t=this;var a=d.getParent().getParent().getContent()[t.advancedPosition];var D=a.data('dataType');for(var j=0;j<d.getItems().length;j++){var l=d.getItems()[j];var L=l.getBindingContext().getObject();if(d.getModel().hasFilter(L)){l.setSelected(true);d.getModel().changeFilterAdvaced(L,false);t.removeAdvancedCondition(a,l,D);}else{l.setSelected(false);}var s=l.getBindingContext().sPath+"/selected";l.getBindingContext().oModel.setProperty(s,l.getSelected());}t.sortingAttributeList(d.getParent().getParent());d.setBusy(false);},removeAdvancedCondition:function(a,l,t){var c=a.getContent();var C,I,b;for(var i=0;i<c.length;i++){C=c[i];I=C.getContent()[1];if(t==="string"){var v=I.getValue();var L=l.getBindingContext().getObject();if(v===L.filterCondition.value){b=i;break;}}}a.removeContent(b);}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchFacetItem')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchFacetItem');(function(){"use strict";jQuery.sap.require('sap.m.StandardListItem');sap.m.StandardListItem.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetItem',{constructor:function(i,o){var t=this;t.options=jQuery.extend({},{type:sap.m.ListType.Active,title:"{label}",tooltip:"{label}"+" "+"{value}",key:"{id}",info:"{valueLabel}",selected:"{selected}",level:"{level}"},o);sap.m.StandardListItem.prototype.constructor.apply(this,[i,t.options]);this.addStyleClass('sapUshellSearchFacetItem');this.addEventDelegate({onAfterRendering:function(){if(t.getBindingContext()&&t.getBindingContext().getObject()){var l=t.getBindingContext().getObject().level;if(jQuery("html").attr("dir")==='rtl'){jQuery(t.getDomRef()).children(".sapMLIBContent").css("padding-right",l+"rem");}else{jQuery(t.getDomRef()).children(".sapMLIBContent").css("padding-left",l+"rem");}}}});},renderer:'sap.m.StandardListItemRenderer'});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchFilterBar')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchFilterBar');(function(){"use strict";jQuery.sap.require('sap.m.Toolbar');sap.m.Toolbar.extend("sap.ushell.renderers.fiori2.search.controls.SearchFilterBar",{constructor:function(o){var t=this;o=jQuery.extend({},{design:sap.m.ToolbarDesign.Info},o);sap.m.Toolbar.prototype.constructor.apply(this,[o]);this.addStyleClass('sapUshellSearchFilterContextualBar');this.bindAggregation("content","/filterConditions",function(i,c){return t.contentFactory(i,c);});},contentFactory:function(i,c){var l=new sap.m.Label({text:"{label}"+", "});l.addStyleClass('filterLabel');return l;},renderer:'sap.m.ToolbarRenderer',onAfterRendering:function(){var l=sap.ushell.resources.i18n.getText("filtered_by");var $=jQuery('.sapUshellSearchFilterContextualBar').children('label');var a=$.last();jQuery('.sapUshellSearchFilterContextualBar').prepend('<label class="filterTitle">'+l+':</label>');$.attr('aria-label',l);a.text(a.text().substring(0,a.text().length-2));}});}());};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchLink')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchLink');(function(){"use strict";var s=sap.ushell.renderers.fiori2.search.SearchHelper;sap.m.Link.extend('sap.ushell.renderers.fiori2.search.controls.SearchLink',{renderer:'sap.m.LinkRenderer',onAfterRendering:function(){var d=this.getDomRef();s.boldTagUnescaperByText(d);}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchNoResultScreen')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchNoResultScreen');(function(){"use strict";jQuery.sap.require('sap.ui.core.format.NumberFormat');sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchNoResultScreen",{metadata:{properties:{searchBoxTerm:"string"}},renderer:function(r,c){var e=$('<div>').text(c.getSearchBoxTerm()).html();r.write('<div class="sapUshellSearch-no-result"');r.writeControlData(c);r.write('>');r.write('<div class="sapUshellSearch-no-result-icon">');r.writeIcon(sap.ui.core.IconPool.getIconURI("travel-request"));r.write('</div><div class="sapUshellSearch-no-result-text">');r.write('<div class="sapUshellSearch-no-result-info">'+sap.ushell.resources.i18n.getText("no_results_info").replace('&1',e)+'</div>');r.write('<div class="sapUshellSearch-no-result-tips">'+sap.ushell.resources.i18n.getText("no_results_tips")+'</div> ');r.write('</div></div>');}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchSelect')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchSelect');(function(){"use strict";jQuery.sap.require('sap.m.Select');sap.m.Select.extend('sap.ushell.renderers.fiori2.search.controls.SearchSelect',{constructor:function(i,o){o=jQuery.extend({},{visible:"{/businessObjSearchEnabled}",autoAdjustWidth:true,maxWidth:"16rem",items:{path:"/dataSources",template:new sap.ui.core.Item({key:"{key}",text:"{labelPlural}"})},selectedKey:{path:'/dataSource/key',mode:sap.ui.model.BindingMode.OneWay},change:function(e){var a=this.getSelectedItem();var c=a.getBindingContext();var d=c.getObject();this.getModel().setDataSource(d,false);this.getModel().abortSuggestions();}},o);sap.m.Select.prototype.constructor.apply(this,[i,o]);this.addStyleClass('searchSelect');},renderer:'sap.m.SelectRenderer',setDisplayMode:function(m){if(m==='icon'){this.setType(sap.m.SelectType.IconOnly);this.setIcon('sap-icon://slim-arrow-down');}}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchText')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchText');(function(){"use strict";var s=sap.ushell.renderers.fiori2.search.SearchHelper;sap.m.Text.extend('sap.ushell.renderers.fiori2.search.controls.SearchText',{renderer:'sap.m.TextRenderer',onAfterRendering:function(){var d=this.getDomRef();s.boldTagUnescaperByText(d);}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchTileHighlighter')){(function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchTileHighlighter');var T=sap.ushell.renderers.fiori2.search.SearchHelper.Tester;var H=sap.ushell.renderers.fiori2.search.controls.SearchTileHighlighter=function(){this.init.apply(this,arguments);};H.prototype={init:function(){},setHighlightTerms:function(h){this.tester=new T(h);},highlight:function(t){var n=t.getDomRef();if(!n){return;}this.doHighlight(n);},doHighlight:function(n){if(n.nodeType===window.Node.TEXT_NODE){this.highlightTextNode(n);return;}for(var i=0;i<n.childNodes.length;++i){var c=n.childNodes[i];this.doHighlight(c);}},highlightTextNode:function(n){var t=this.tester.test(n.textContent);if(!t.bMatch){return;}var s=document.createElement('span');s.innerHTML=t.sHighlightedText;n.parentNode.insertBefore(s,n);n.parentNode.removeChild(n);}};})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchTilesContainerKeyHandler')){(function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchTilesContainerKeyHandler');var d={getAncestorByClass:function(e,c){while(e){if(e.classList.contains(c)){return e;}e=e.parentElement;}return false;}};var T=function(){this.init.apply(this,arguments);};T.prototype={init:function(t,e){this.tilesContainer=t;this.tilesContainerElement=t.getDomRef();this.element=e;},getIndexInTilesContainer:function(){return Array.prototype.indexOf.call(this.tilesContainerElement.children,this.element);},next:function(){if((this.getIndexInTilesContainer()+1)%this.tilesContainer.getTilesPerRow()===0){return null;}if(this.element.nextElementSibling){return new T(this.tilesContainer,this.element.nextElementSibling);}return null;},previous:function(){if((this.getIndexInTilesContainer())%this.tilesContainer.getTilesPerRow()===0){return null;}if(this.element.previousElementSibling){return new T(this.tilesContainer,this.element.previousElementSibling);}return null;},upper:function(){var i=this.getIndexInTilesContainer()-this.tilesContainer.getTilesPerRow();if(i<0){return null;}return new T(this.tilesContainer,this.tilesContainerElement.children.item(i));},lower:function(){var i=this.getIndexInTilesContainer()+this.tilesContainer.getTilesPerRow();if(i>=this.tilesContainerElement.children.length){return null;}return new T(this.tilesContainer,this.tilesContainerElement.children.item(i));},focus:function(){if(this.element.classList.contains('sapUshellSearchShowMoreTile')){this.element.focus();}else{this.element.focus();}}};var K=sap.ushell.renderers.fiori2.search.controls.SearchTilesContainerKeyHandler=function(){this.init.apply(this,arguments);};K.prototype={init:function(t){this.tilesContainer=t;},getFocusedObject:function(e){var t=d.getAncestorByClass(e,'sapUshellSearchTileWrapper');if(!t){return null;}return new T(this.tilesContainer,t);},onsapdown:function(e){this.navigate('lower',e);},onsapup:function(e){this.navigate('upper',e);},onsapleft:function(e){this.navigate('previous',e);},onsapright:function(e){this.navigate('next',e);},onsapenter:function(e){var c=e.target;if(!c){return;}if(c.classList.contains('sapUshellSearchShowMoreTile')){var b=c.children.item(0);var a=sap.ui.getCore().byId(b.getAttribute('id'));a.firePress();return;}var r=window.$(e.target).find(".sapUshellTileBase, .sapUiCockpitReportTile");if(r.length>0){var t=sap.ui.getCore().byId(window.$(r[0]).attr('id'));if(t&&t.firePress){t.firePress();}}},navigate:function(m,e){e.stopPropagation();e.preventDefault();var o=this.getFocusedObject(e.target);if(!o){return;}var n=o[m].apply(o,[]);if(!n){return;}n.focus();}};})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.suggestions.SuggestionProvider')){(function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.SuggestionProvider');var m=sap.ushell.renderers.fiori2.search.suggestions.SuggestionProvider=function(){this.init.apply(this,arguments);};m.prototype={init:function(p){jQuery.extend(this,p);},abortSuggestions:function(){},getSuggestions:function(){}};})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.suggestions.SuggestionTypes')){(function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.SuggestionTypes');sap.ushell.renderers.fiori2.search.suggestions.SuggestionTypes={SUGGESTION_TYPE_DATASOURCE:'datasource',SUGGESTION_TYPE_APPS:'apps',SUGGESTION_TYPE_HISTORY:'history',SUGGESTION_TYPE_OBJECT_DATA:'businessobject',datasource:{position:10,limit:2},apps:{position:20,limitDsAll:3,limitDsApps:jQuery.device.is.phone?7:7},history:{position:30,limit:3},objectData:{position:40,limit:jQuery.device.is.phone?7:7}};})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.userpref.SearchPrefsDialog.view')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.userpref.SearchPrefsDialog.view');(function(){"use strict";jQuery.sap.require('sap.m.MessageBox');sap.ui.jsview("sap.ushell.renderers.fiori2.search.userpref.SearchPrefsDialog",{createContent:function(c){var t=this;var s=new sap.m.Switch({state:{path:"/sessionUserActive",mode:sap.ui.model.BindingMode.TwoWay},enabled:{parts:[{path:'/searchPrefsActive'},{path:'/personalizationPolicy'}],formatter:function(b,p){var m=t.getModel();if(b&&p!==m.personalizationPolicyEnforced&&p!==m.personalizationPolicyDisabled){return true;}else{return false;}},mode:sap.ui.model.BindingMode.OneWay}});var u=new sap.m.Label({text:sap.ushell.resources.i18n.getText("sp.userProfilingField")+':'});this.resetButton=new sap.m.Button({text:sap.ushell.resources.i18n.getText("sp.clearCollectedData"),press:this.resetHistory.bind(this),enabled:{parts:[{path:'/searchPrefsActive'},{path:'/personalizationPolicy'}],formatter:function(b,p){var m=t.getModel();if(b&&p!==m.personalizationPolicyDisabled){return true;}else{return false;}},mode:sap.ui.model.BindingMode.OneWay}});var e=new sap.m.Text({text:sap.ushell.resources.i18n.getText('sp.disclaimer')});var a=[u,s,e,this.resetButton];return a;},resetHistory:function(){var t=this;this.getModel().resetProfile().then(function(){t.resetButton.setEnabled(false);},function(r){var e=sap.ushell.resources.i18n.getText('sp.resetFailed');if(r.statusText&&r.statusText.length>0&&r.statusText!=='OK'){e+='('+r.statusText+')';}sap.m.MessageBox.show(e,{title:sap.ushell.resources.i18n.getText("sp.resetFailedTitle"),icon:sap.m.MessageBox.Icon.ERROR,actions:[sap.m.MessageBox.Action.OK]});});},switchChangeHandler:function(e){var s=e.getSource();if(s.getState()){return;}var i=sap.ushell.resources.i18n;var d=i.getText("sp.disable");sap.m.MessageBox.confirm(i.getText('sp.disablingUserProfiling'),{title:sap.ushell.resources.i18n.getText("sp.disableUserProfiling"),icon:sap.m.MessageBox.Icon.QUESTION,actions:[d,sap.m.MessageBox.Action.CANCEL],onClose:function(a){if(a==sap.m.MessageBox.Action.CANCEL){s.setState(true);}}});},openMessageBox:function(){var t=this;var i=sap.ushell.resources.i18n;var c=i.getText("sp.clear");sap.m.MessageBox.confirm(i.getText('sp.profileWillBeReset'),{title:sap.ushell.resources.i18n.getText("sp.clearCollectedData"),icon:sap.m.MessageBox.Icon.QUESTION,actions:[c,sap.m.MessageBox.Action.CANCEL],onClose:function(a){if(a==c){t.getModel().resetProfile();}}});}});}());};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.userpref.SearchPrefsModel')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.userpref.SearchPrefsModel');(function(){"use strict";jQuery.sap.require('sap.ui.model.json.JSONModel');var p='sap.ushell.renderers.fiori2.search.userpref.SearchPrefsModel';sap.ui.model.json.JSONModel.extend(p,{constructor:function(a){var t=this;sap.ui.model.json.JSONModel.prototype.constructor.apply(t,[]);t.sina=sap.ushell.Container.getService("Search").getSina();this.reset();},personalizationPolicyOptOut:'Opt-Out',personalizationPolicyOptIn:'Opt-In',personalizationPolicyEnforced:'Enforced',personalizationPolicyDisabled:'Disabled',personalizationPolicies:['Opt-Out','Opt-In','Enforced','Disabled'],isBusinessObjSearchConfigured:function(){try{var c=window['sap-ushell-config'].renderers.fiori2.componentData.config;return c.searchBusinessObjects!=='hidden';}catch(e){return true;}},isSearchPrefsActive:function(){if(!this.isBusinessObjSearchConfigured()){return jQuery.when(false);}return this.sina.getSystem().getServerInfo().then(function(s){s=s.rawServerInfo;for(var i=0;i<s.Services.length;++i){var a=s.Services[i];if(a.Service==='PersonalizedSearch'){return jQuery.when(true);}}return jQuery.when(false);},function(){return jQuery.when(false);});},reset:function(){this.initializedDeferred=null;this.setData({searchPrefsActive:false,sessionUserActive:false,personalizationPolicy:'Enforced'});},asyncInit:function(){var t=this;if(t.initializedDeferred){return t.initializedDeferred;}t.initializedDeferred=t.isSearchPrefsActive().then(function(i){t.setProperty('/searchPrefsActive',i);if(!i){return jQuery.when(true);}return t.loadPreferences();});return t.initializedDeferred;},loadPreferences:function(){var t=this;t.searchConfiguration=t.sina.getSearchConfiguration();return t.searchConfiguration.load().then(function(c){var s=c.Data.PersonalizedSearch.SessionUserActive;t.setProperty('/sessionUserActive',s);var a=c.Data.PersonalizedSearch.PersonalizationPolicy;if(t.personalizationPolicies.indexOf(a)<0){a=this.personalizationPolicyDisabled;}t.setProperty('/personalizationPolicy',a);});},savePreferences:function(){var a=this.getProperty('/personalizationPolicy');var s=this.getProperty('/searchPrefsActive');if(!s||a===this.personalizationPolicyEnforced||a===this.personalizationPolicyDisabled){return jQuery.when(true);}var t=this;var d={"SearchConfiguration":{"Action":"Update","Data":{"PersonalizedSearch":{"SessionUserActive":t.getProperty('/sessionUserActive')}}}};return t.searchConfiguration.save(d);},resetProfile:function(){return this.sina.emptyUserHistory();}});})();};if(!jQuery.sap.isDeclared('sap.ushell.resources')){(function(){"use strict";jQuery.sap.declare("sap.ushell.resources");jQuery.sap.require('sap.ui.model.resource.ResourceModel');sap.ushell.resources={};sap.ushell.resources.getTranslationModel=function(l){var t=new sap.ui.model.resource.ResourceModel({bundleUrl:jQuery.sap.getModulePath("sap.ushell.renderers.fiori2.resources.resources",".properties"),bundleLocale:l});return t;};sap.ushell.resources.i18nModel=sap.ushell.resources.getTranslationModel(sap.ui.getCore().getConfiguration().getLanguage());sap.ushell.resources.i18n=sap.ushell.resources.i18nModel.getResourceBundle();}());};if(!jQuery.sap.isDeclared('sap.ushell.services.AppConfiguration')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.AppConfiguration");function A(){var m={},c=null,I=[];this.getCurrentAppliction=function(a){return c;};this.getMetadata=function(a){if(!a){a=c;}if(a){var k=this.getApplicationUrl(a);if(!(m.hasOwnProperty(k))){this.addMetadata(a);}if(!m[k]){m[k]={};}if(!m[k].title){m[k].title=a.text||sap.ushell.resources.i18n.getText("default_app_title");}return m[k];}return{};};this.setCurrentApplication=function(a){c=a;};this.setHeaderHiding=function(e){var s=sap.ui.getCore().byId('shell');if(s){if(sap.ui.Device.system.phone){s.setHeaderHiding(e);}else{jQuery.sap.log.warning("Application configuration could not be trigger setHeaderHiding on Shell as the running devic is not a phone");}}else{jQuery.sap.log.warning("Application configuration could not be trigger setHeaderHiding on Shell");}};this.addApplicationSettingsButtons=function(b){var i,a=[];for(i=0;i<b.length;i++){var C=b[i];a.push(C.getId());C.setIcon(C.getIcon()||sap.ui.core.IconPool.getIconURI('action-settings'));}if(sap.ushell.Container&&sap.ushell.Container.getRenderer("fiori2")){if(I.length){sap.ushell.Container.getRenderer("fiori2").hideActionButton(I,true);}I=a;sap.ushell.Container.getRenderer("fiori2").showActionButton(a,true,undefined,true);}};this.setWindowTitle=function(t){window.document.title=t;};this.setIcons=function(i){jQuery.sap.setIcons(i);};this.getSettingsControl=function(){jQuery.sap.require("sap.ushell.ui.footerbar.SettingsButton");return new sap.ushell.ui.footerbar.SettingsButton();};this.getApplicationName=function(a){var M,s=(a&&a.additionalInformation)||null;if(s){M=/^SAPUI5\.Component=(.+)$/i.exec(s);if(M){return M[1];}}return null;};this.getApplicationUrl=function(a){var u=(a&&a.url)||null,s="P_TCODE",i;if(u){if(a.applicationType==="NWBC"&&u.indexOf(s)){return u;}i=u.indexOf("?");if(i>=0){u=u.slice(0,i);}if(u.slice(-1)!=='/'){u+='/';}}return u;};this.getPropertyValueFromConfig=function(C,p,r){var v;if(r&&C.hasOwnProperty(p+"Resource")){v=r.getText(C[p+"Resource"]);}else if(C.hasOwnProperty(p)){v=C[p];}return v;};this.getPropertyValueFromManifest=function(l,p,P){var M=p[P].manifestEntryKey,s=p[P].path,o=l.getManifestEntry(M);return jQuery.sap.getObject(s,undefined,o);};this.addMetadata=function(a){try{var C=this.getApplicationName(a),u=this.getApplicationUrl(a),o,l,b,p={"fullWidth":{"manifestEntryKey":"sap.fiori","path":"fullWidth"},"hideLightBackground":{"manifestEntryKey":"sap.fiori","path":"hideLightBackground"},"title":{"manifestEntryKey":"sap.app","path":"title"},"icon":{"manifestEntryKey":"sap.ui","path":"icons.icon"},"favIcon":{"manifestEntryKey":"sap.ui","path":"icons.favIcon"},"homeScreenIconPhone":{"manifestEntryKey":"sap.ui","path":"icons.phone"},"homeScreenIconPhone@2":{"manifestEntryKey":"sap.ui","path":"icons.phone@2"},"homeScreenIconTablet":{"manifestEntryKey":"sap.ui","path":"icons.tablet"},"homeScreenIconTablet@2":{"manifestEntryKey":"sap.ui","path":"icons.tablet@2"},"startupImage320x460":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x920"},"startupImage640x920":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x920"},"startupImage640x1096":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x1096"},"startupImage768x1004":{"manifestEntryKey":"sap.ui","path":"icons.startupImage768x1004"},"startupImage748x1024":{"manifestEntryKey":"sap.ui","path":"icons.startupImage748x1024"},"startupImage1536x2008":{"manifestEntryKey":"sap.ui","path":"icons.startupImage1536x2008"},"startupImage1496x2048":{"manifestEntryKey":"sap.ui","path":"icons.startupImage1496x2048"},"compactContentDensity":{"manifestEntryKey":"sap.ui5","path":"contentDensities.compact"},"cozyContentDensity":{"manifestEntryKey":"sap.ui5","path":"contentDensities.cozy"}},d,s,i,M,P,e,r;if(u&&!(m.hasOwnProperty(u))){m[u]={};o=sap.ui.component.load({url:u,name:C});l=o.getMetadata();if(l){b=l.getConfig();M=(l.getManifest()!==undefined);if(b){e=b.resourceBundle||"";if(e){if(e.slice(0,1)!=='/'){e=u+e;}r=jQuery.sap.resources({url:e,locale:sap.ui.getCore().getConfiguration().getLanguage()});}}for(P in p){if(p.hasOwnProperty(P)){if(M){m[u][P]=this.getPropertyValueFromManifest(l,p,P);}if(b&&m[u][P]===undefined){m[u][P]=this.getPropertyValueFromConfig(b,P,r);}}}}}m[u].version=l.getVersion();m[u].libraryName=l.getLibraryName();d=["favIcon","homeScreenIconPhone","homeScreenIconPhone@2","homeScreenIconTablet","homeScreenIconTablet@2","startupImage320x460","startupImage640x920","startupImage640x1096","startupImage768x1004","startupImage748x1024","startupImage1536x2008","startupImage1496x2048"];s=(u&&u[u.length-1]==='/')?u.substring(0,u.length-1):u;i=function(u){if(u.match(/^https?:\/\/.*/)){return false;}return u&&u[0]!=='/';};d.forEach(function(g){var O=m[u][g],F=null;if(O){F=i(O)?s+"/"+O:O;}m[u][g]=F;});}catch(f){jQuery.sap.log.warning("Application configuration could not be parsed");}};}sap.ushell.services.AppConfiguration=new A();}());};if(!jQuery.sap.isDeclared('sap.ushell.services.Bookmark')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.Bookmark");sap.ushell.services.Bookmark=function(){var t=this,l=sap.ushell.Container.getService("LaunchPage");sap.ushell.utils.testPublishAt(t);function i(c,r){var C=l.getCatalogData(c);return C.remoteId===r.remoteId&&C.baseUrl.replace(/\/$/,"")===r.baseUrl.replace(/\/$/,"");}this.addBookmark=function(p,g){var P=l.addBookmark(p,g);P.done(function(T){var D={tile:T,group:g};sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","bookmarkTileAdded",D);});return P;};sap.ushell.utils.testPublishAt(t);function d(D,c,C,g){var e,f=D.reject.bind(D);function a(G){l.getCatalogTiles(C).fail(f).done(function(b){var g=l.getGroupId(G),T=b.some(function(o){if(l.getCatalogTileId(o)===c){l.addTile(o,G).fail(f).done(function(){D.resolve();sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","catalogTileAdded",g);});return true;}});if(!T){e="No tile '"+c+"' in catalog '"+l.getCatalogId(C)+"'";jQuery.sap.log.error(e,null,"sap.ushell.services.Bookmark");f(e);}});}if(g){l.getGroups().fail(f).done(function(G){var b=G.some(function(o){if(l.getGroupId(o)===g){a(o);return true;}});if(!b){e="Group '"+g+"' is unknown";jQuery.sap.log.error(e,null,"sap.ushell.services.Bookmark");f(e);}});}else{l.getDefaultGroup().fail(f).done(a);}return D.promise();}this.addCatalogTileToGroup=function(c,g,C){var D=new jQuery.Deferred(),e,f=D.reject.bind(D),m,L="X-SAP-UI2-HANA:hana?remoteId=HANA_CATALOG";function a(o){return l.getCatalogId(o)===L;}m=C?i:a;C=C||{id:L};l.onCatalogTileAdded(c);l.getCatalogs().fail(f).done(function(b){var s;b.forEach(function(o){if(m(o,C)){if(!s){s=o;}else{jQuery.sap.log.warning("More than one matching catalog: "+JSON.stringify(C),null,"sap.ushell.services.Bookmark");}}});if(s){d(D,c,s,g);}else{e="No matching catalog found: "+JSON.stringify(C);jQuery.sap.log.error(e,null,"sap.ushell.services.Bookmark");D.reject(e);}});return D.promise();};this.countBookmarks=function(u){return l.countBookmarks(u);};this.deleteBookmarks=function(u){var p=l.deleteBookmarks(u);p.done(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","bookmarkTileDeleted",u);});return p;};this.updateBookmarks=function(u,p){return l.updateBookmarks(u,p);};};sap.ushell.services.Bookmark.hasNoAdapter=true;}());};if(!jQuery.sap.isDeclared('sap.ushell.services.Container')){jQuery.sap.declare('sap.ushell.services.Container');(function(){"use strict";var S="sap.ushell.services.Container",b="sap.ushell.Container.dirtyState.",c="sap-ushell-plugin-type",d="UserDefaults",C,p,u,f;jQuery.sap.declare(S);if(!jQuery.sap.isDeclared('sap.ushell.utils')){(function(){"use strict";jQuery.sap.declare("sap.ushell.utils");sap.ushell.utils={};var v;sap.ushell.utils.Error=function(M,s){this.name="sap.ushell.utils.Error";this.message=M;jQuery.sap.log.error(M,null,s);};sap.ushell.utils.Error.prototype=new Error();sap.ushell.utils.localStorageSetItem=function(K,V,L){var E;try{localStorage.setItem(K,V);if(L){E=document.createEvent("StorageEvent");E.initStorageEvent("storage",false,false,K,"",V,"",localStorage);dispatchEvent(E);}}catch(e){jQuery.sap.log.warning("Error calling localStorage.setItem(): "+e,null,"sap.ushell.utils");}};sap.ushell.utils.calculateOrigin=function(D){var U;if(D.origin){return D.origin;}if(D.protocol&&D.hostname){return D.protocol+"//"+D.hostname+(D.port?':'+D.port:'');}if(D.href){U=new URI(D.href);return U.protocol()+"://"+U.hostname()+(U.port()?':'+U.port():'');}};sap.ushell.utils.hasNativeNavigationCapability=function(){var F="0",P;if(window.external&&window.external&&typeof window.external.getPrivateEpcm!=="undefined"){P=window.external.getPrivateEpcm();try{F=P.getNwbcFeatureBits();jQuery.sap.log.debug("Detected epcm getNwbcFeatureBits returned feature bits: "+F);}catch(e){jQuery.sap.log.error("failed to get feature bit vector via call getNwbcFeatureBits on private epcm object",e.stack,"sap.ushell.utils");}}return(parseInt(F,16)&1)>0;};sap.ushell.utils.isNativeWebGuiNavigation=function(R){if(this.hasNativeNavigationCapability()&&R&&R.applicationType==="TR"){return true;}return false;};sap.ushell.utils.Map=function(){this.entries={};};sap.ushell.utils.Map.prototype.put=function(K,V){var o=this.get(K);this.entries[K]=V;return o;};sap.ushell.utils.Map.prototype.containsKey=function(K){if(typeof K!=="string"){throw new sap.ushell.utils.Error("Not a string key: "+K,"sap.ushell.utils.Map");}return Object.prototype.hasOwnProperty.call(this.entries,K);};sap.ushell.utils.Map.prototype.get=function(K){if(this.containsKey(K)){return this.entries[K];}};sap.ushell.utils.Map.prototype.keys=function(){return Object.keys(this.entries);};sap.ushell.utils.Map.prototype.remove=function(K){delete this.entries[K];};sap.ushell.utils.Map.prototype.toString=function(){var R=['sap.ushell.utils.Map('];R.push(JSON.stringify(this.entries));R.push(')');return R.join('');};sap.ushell.utils.getParameterValueBoolean=function(P,s){var a=jQuery.sap.getUriParameters(s).mParams&&jQuery.sap.getUriParameters(s).mParams[P],t=["true","x"],F=["false",""],V;if(!a||a.length===0){return undefined;}V=a[0].toLowerCase();if(t.indexOf(V)>=0){return true;}if(F.indexOf(V)>=0){return false;}return undefined;};sap.ushell.utils.testPublishAt=function(o,e){};sap.ushell.utils.call=function(s,F,a){var M;if(a){setTimeout(function(){sap.ushell.utils.call(s,F,false);},0);return;}try{s();}catch(e){M=e.message||e.toString();jQuery.sap.log.error("Call to success handler failed: "+M,e.stack,"sap.ushell.utils");if(F){F(M);}}};sap.ushell.utils.getIndexOfTopGroupInViewPort=function(){var a=jQuery('#dashboardGroups').find('.sapUshellTileContainer'),o=a.not('.sapUshellHidden').first().offset(),e=(o&&o.top)||0,t=[],i=0,q,s;if(document.getElementById('dashboard')){i=document.getElementById('dashboard').scrollTop;}if(!a||!o){return undefined;}a.each(function(){if(!jQuery(this).hasClass("sapUshellHidden")){var w=jQuery(this).parent().offset().top;t.push([w,w+jQuery(this).parent().height()]);}});q=i+e;jQuery.each(t,function(w,x){var y=x[0],z=x[1];if(y<=q&&q<=z){s=w;return;}});return s;};sap.ushell.utils.handleTilesVisibility=function(){clearTimeout(v);v=setTimeout(function(){var s=new Date(),t=sap.ushell.utils.getVisibleTiles(),a,e;if(t&&t.length){e=sap.ushell.Container.getService("LaunchPage");t.forEach(function(T){var i=sap.ushell.utils.getTileObject(T);if(i!==null){e.setTileVisible(i,T.isDisplayedInViewPort);}});jQuery.sap.log.debug("Visible Tiles: "+t.filter(function(T){return T.isDisplayedInViewPort;}).length);jQuery.sap.log.debug("NonVisible Tiles: "+t.filter(function(T){return!T.isDisplayedInViewPort;}).length);}a=new Date()-s;jQuery.sap.log.debug("Start time is: "+s+" and duration is: "+a);},1000);};sap.ushell.utils.setTilesNoVisibility=function(){var t=sap.ushell.utils.getVisibleTiles(),a;if((typeof t!=="undefined")&&t.length>0){a=sap.ushell.Container.getService("LaunchPage");t.forEach(function(T){a.setTileVisible(sap.ushell.utils.getTileObject(T),false);});jQuery.sap.log.debug("Visible Tiles: "+t.filter(function(T){return T.isDisplayedInViewPort;}).length);jQuery.sap.log.debug("NonVisible Tiles: "+t.filter(function(T){return!T.isDisplayedInViewPort;}).length);}};sap.ushell.utils.getBasicHash=function(a){if(!sap.ushell.utils.validHash(a)){jQuery.sap.log.debug("Utils ; getBasicHash ; Got invalid hash");return false;}var U=sap.ushell.Container.getService("URLParsing"),s=U.parseShellHash(a);return s?s.semanticObject+"-"+s.action:a;};sap.ushell.utils.validHash=function(a){return(a&&a.constructor===String&&jQuery.trim(a)!="");};sap.ushell.utils.handleTilesOpacity=function(M){jQuery.sap.require("sap.ui.core.theming.Parameters");var t,a,e,s=sap.ui.core.theming.Parameters.get("sapUshellTileBackgroundColor"),i=this.hexToRgb(s),o,q,R,w,x,y,z,A,B,D,U=sap.ushell.Container.getService("UserRecents");if(i){R="rgba("+i.r+","+i.g+","+i.b+",{0})";e=U.getAppsUsage();e.done(function(E){t=E.usageMap;o=jQuery('.sapUshellTile').not('.sapUshellTileFooter');var F=M.getProperty("/groups");M.setProperty('/animationRendered',true);for(var G=0;G<o.length;G++){w=jQuery(o[G]);x=this.getBasicHash(w.find('.sapUshellTileBase').attr('data-targeturl'));if(x){q=this.convertToRealOpacity(t[x],E.maxUsage);y=R.replace("{0}",q);a=sap.ui.getCore().byId(w.attr('id'));z=a.getBindingContext();A=z.sPath.split('/');B=A[2];D=A[4];F[B].tiles[D].rgba=y;}}M.setProperty("/groups",F);}.bind(this));}};sap.ushell.utils.convertToRealOpacity=function(a,e){var o=[1,0.95,0.9,0.85,0.8],O=Math.floor(e/o.length),i;if(!a){return o[0];}else if(!e){return o[o.length-1];}else{i=Math.floor((e-a)/O);return i<o.length?o[i]:o[o.length-1];}};sap.ushell.utils.getCurrentHiddenGroupIds=function(M){var G=M.getProperty('/groups'),H=[],s,a;for(a in G){if(!G[a].isGroupVisible){s=G[a].groupId;H.push(s);}}return H;};sap.ushell.utils.hexToRgb=function(a){var i=!a||a[0]!='#'||(a.length!=4&&a.length!=7),e;a=!i&&a.length===4?'#'+a[1]+a[1]+a[2]+a[2]+a[3]+a[3]:a;e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null;};sap.ushell.utils.getFormFactor=function(){var s=sap.ui.Device.system;if(s.desktop){return s.SYSTEMTYPE.DESKTOP;}else if(s.tablet){return s.SYSTEMTYPE.TABLET;}else{return s.phone?s.SYSTEMTYPE.PHONE:undefined;}};sap.ushell.utils.getVisibleTiles=function(){var a=document.body.clientHeight,o=sap.ui.getCore().byId("dashboardGroups"),N=sap.ui.getCore().byId("navContainer"),e,t,i,q,T,s,w,x,y,z=jQuery('#shell-hdr').height(),A=[];if(o&&o.getGroups()&&N){var I=(N.getCurrentPage().sId==="application-Shell-home")&&(o.getModel().getProperty("/currentViewName")==="home"),G=o.getGroups();for(e=0;e<G.length;e=e+1){i=G[e];q=i.getTiles();if(q){for(t=0;t<q.length;t=t+1){T=q[t];if(!I){T.isDisplayedInViewPort=false;}else{s=jQuery(T.getDomRef());w=s.offset();if(!w){return null;}x=s.offset().top;y=x+s.height();T.isDisplayedInViewPort=(y>z)&&(x<a);}A.push(T);}}}}return A;};sap.ushell.utils.getTileObject=function(a){var e=a.getBindingContext();return e.getObject()?e.getObject().object:null;};sap.ushell.utils.addBottomSpace=function(){var a=jQuery('#dashboardGroups').find('.sapUshellTileContainer:visible'),e=a.last(),i=jQuery(".sapUshellShellHead").height(),o=e.parent().height(),q=parseInt(e.find(".sapUshellContainerTitle").css("margin-top"),10),s=parseInt(jQuery('.sapUshellDashboardGroupsContainer').css("padding-bottom"),10);var t=jQuery(window).height()-i-o-q-s;t=(t<0)?0:t;jQuery('.sapUshellDashboardGroupsContainer').css("margin-bottom",t+"px");};sap.ushell.utils.groupHasVisibleTiles=function(a,e){var i=false,t,o,q=!a?[]:a,s=!e?[]:e;q=q.concat(s);if(q.length===0){return false;}for(t=0;t<q.length;t=t+1){o=q[t];if(o.isTileIntentSupported){i=true;break;}}return i;};sap.ushell.utils.invokeUnfoldingArrayArguments=function(F,A){var e;if(!jQuery.isArray(A[0])){return F.apply(this,A);}else{e=A[0];if(e.length===0){return new jQuery.Deferred().resolve([]).promise();}else{var D=new jQuery.Deferred(),P=[],R=[],t=new jQuery.Deferred().resolve();e.forEach(function(i,I){if(!jQuery.isArray(i)){jQuery.sap.log.error("Expected Array as nTh Argument of multivalue invokation: first Argument must be array of array of arguments: single valued f(p1,p2), f(p1_2,p2_2), f(p1_3,p2_3) : multivalued : f([[p1,p2],[p1_2,p2_2],[p1_3,p2_3]]");throw new Error("Expected Array as nTh Argument of multivalue invokation: first Argument must be array of array of arguments: single valued f(p1,p2), f(p1_2,p2_2), f(p1_3,p2_3) : multivalued : f([[p1,p2],[p1_2,p2_2],[p1_3,p2_3]]");}var o=F.apply(this,i),q=new jQuery.Deferred();o.done(function(){var a=Array.prototype.slice.call(arguments);R[I]=a;q.resolve();}).fail(q.reject.bind(q));P.push(q.promise());t=jQuery.when(t,q);});jQuery.when.apply(jQuery,P).done(function(){D.resolve(R);}).fail(function(){D.reject("failure");});return D.promise();}}};sap.ushell.utils.isClientSideNavTargetResolutionEnabled=function(){var D=true,L;if(jQuery.sap.storage===undefined){L=window.localStorage.getItem("targetresolution-client");L=(L===false||L==="false"||L==="")?false:true;}else{L=jQuery.sap.storage(jQuery.sap.getObject("jQuery.sap.storage.Type.local"),"targetresolution").get("client");}if(L===""||L===false||sap.ushell.utils.getParameterValueBoolean("sap-ushell-nav-cs")===false){return false;}return D;};}());};sap.ushell.utils.testPublishAt(sap.ushell.services);function g(){close();}sap.ushell.utils.testPublishAt(sap.ushell.services);function r(){document.location="about:blank";}sap.ushell.utils.testPublishAt(sap.ushell.services);function h(){return localStorage;}function j(P){if(p&&p[P]){return p[P];}return"sap.ushell.adapters."+P;}function k(s){return(C.services&&C.services[s])||{};}function l(N,s,P){var a=k(N).adapter||{},A=a.module||j(s.getPlatform())+"."+N+"Adapter";jQuery.sap.require(A);return new(jQuery.sap.getObject(A))(s,P,{config:a.config||{}});}function m(o){var P=o.bootstrapPlugins,i={},U=[];function I(C,D){var a={name:C.component,url:C.url,componentData:{config:C.config||{}},async:true};if(C.hasOwnProperty("asyncHints")){if(jQuery.isPlainObject(C.asyncHints)){a.asyncHints=C.asyncHints;}else{jQuery.sap.log.error("Cannot pass asyncHints to plugin component: "+C.component,"The value of 'asyncHint' must be an object in the plugin configuration",S);}}return sap.ui.component(a).then(function(){if(D){D.resolve();}},function(e){e=e||"";jQuery.sap.log.error("Cannot create UI5 plugin component: "+e,e.stack,S);if(D){D.reject(e);}});}if(P){Object.keys(P).forEach(function(s){var a=P[s],e,q,t;try{if(a.hasOwnProperty("component")){t=a.component;e=a.config||{};if(e.hasOwnProperty(c)&&e[c]===d){q=new jQuery.Deferred();U.push(q.promise());}if(i.hasOwnProperty(t)){i[t].then(function(){I(a,q);},function(){I(a,q);});}else{i[t]=I(a,q);}}else if(a.hasOwnProperty("module")){jQuery.sap.require(a.module);}else{jQuery.sap.log.error("Invalid plugin configuration",["the plugin configuration for",s,"must contain <component> OR <module> keys"].join(" "),S);}}catch(E){jQuery.sap.log.error(["Error while loading bootstrap plugin:",s].join(" "),E,S);if(q){q.reject(E);}}});jQuery.when.apply(undefined,U).done(u.resolve.bind()).fail(u.reject.bind());}else{u.resolve();}}function n(a){var L=new sap.ui.base.EventProvider(),o=false,R=[],q={},s="sap.ushell.Container."+a.getSystem().getPlatform()+".remoteSystem.",t={},G,v,w=h(),x=new sap.ushell.utils.Map(),y="sap.ushell.Container."+a.getSystem().getPlatform()+".sessionTermination",z=this;this.cancelLogon=function(){if(this.oFrameLogonManager){this.oFrameLogonManager.cancelXHRLogon();}};this.createRenderer=function(e){var i,D,E,F;e=e||C.defaultRenderer;if(!e){throw new Error("Missing renderer name");}F=(C.renderers&&C.renderers[e])||{};D=F.module||(e.indexOf(".")<0?"sap.ushell.renderers."+e+".Renderer":e);jQuery.sap.require(D);if(F.componentData&&F.componentData.config){i={config:F.componentData.config};}E=new(jQuery.sap.getObject(D))({componentData:i});if(E instanceof sap.ui.core.UIComponent){E=new sap.ui.core.ComponentContainer({component:E,height:"100%",width:"100%"});}if(!(E instanceof sap.ui.core.Control)){throw new Error("Unsupported renderer type for name "+e);}q[e]=E;return E;};this.getRenderer=function(e){e=e||C.defaultRenderer;if(q[e]){return q[e].getComponentInstance();}return undefined;};this.DirtyState={CLEAN:"CLEAN",DIRTY:"DIRTY",MAYBE_DIRTY:"MAYBE_DIRTY",PENDING:"PENDING",INITIAL:"INITIAL"};this.getGlobalDirty=function(){var i,D=new jQuery.Deferred(),U=jQuery.sap.uid(),E,P=0,F=this.DirtyState.CLEAN;function H(){if(P===0||F===z.DirtyState.DIRTY){D.resolve(F);jQuery.sap.log.debug("getGlobalDirty() Resolving: "+F,null,"sap.ushell.Container");}}function I(J){if(J.key.indexOf(b)===0&&J.newValue!==z.DirtyState.INITIAL&&J.newValue!==z.DirtyState.PENDING){jQuery.sap.log.debug("getGlobalDirty() Receiving event key: "+J.key+" value: "+J.newValue,null,"sap.ushell.Container");if(J.newValue===z.DirtyState.DIRTY||J.newValue===z.DirtyState.MAYBE_DIRTY){F=J.newValue;}P-=1;H();}}try{w.setItem(U,"CHECK");w.removeItem(U);}catch(e){jQuery.sap.log.warning("Error calling localStorage.setItem(): "+e,null,"sap.ushell.Container");return D.resolve(this.DirtyState.MAYBE_DIRTY).promise();}if(G){throw new Error("getGlobalDirty already called!");}G=D;window.addEventListener('storage',I);D.always(function(){window.removeEventListener('storage',I);G=undefined;});for(i=w.length-1;i>=0;i-=1){E=w.key(i);if(E.indexOf(b)===0){if(w.getItem(E)==='PENDING'){w.removeItem(E);jQuery.sap.log.debug("getGlobalDirty() Cleanup of unresolved 'PENDINGS':"+E,null,"sap.ushell.Container");}else{P+=1;sap.ushell.utils.localStorageSetItem(E,this.DirtyState.PENDING,true);jQuery.sap.log.debug("getGlobalDirty() Requesting status for: "+E,null,"sap.ushell.Container");}}}H();setTimeout(function(){if(D.state()!=="resolved"){D.resolve('MAYBE_DIRTY');jQuery.sap.log.debug("getGlobalDirty() Timeout reached, - resolved 'MAYBE_DIRTY'",null,"sap.ushell.Container");}},P*2000);return D.promise();};this.getLogonSystem=function(){return a.getSystem();};this.getUser=function(){return a.getUser();};this.getDirtyFlag=function(){for(var i=0;i<R.length;i++){o=o||R[i].call();}return o;};this.setDirtyFlag=function(i){o=i;};this.registerDirtyStateProvider=function(D){if(typeof D!=="function"){throw new Error("fnDirty must be a function");}R.push(D);};this.getService=function(e,P){var i={},M,K,D,E,F,H,I;function J(N){var O=new jQuery.Deferred();if(!N){throw new Error("Missing system");}O.resolve(l(e,N,P));sap.ushell.Container.addRemoteSystem(N);return O.promise();}if(!e){throw new Error("Missing service name");}if(e.indexOf(".")>=0){throw new Error("Unsupported service name");}H=k(e);M=H.module||"sap.ushell.services."+e;K=M+"/"+(P||"");I={config:H.config||{}};if(!x.containsKey(K)){jQuery.sap.require(M);D=jQuery.sap.getObject(M);if(D.hasNoAdapter===true){E=new D(i,P,I);}else{F=l(e,a.getSystem(),P);i.createAdapter=J;E=new D(F,i,P,I);}x.put(K,E);return E;}return x.get(K);};sap.ushell.utils.testPublishAt(z);function A(){var D,E,i,K;for(i=w.length-1;i>=0;i-=1){K=w.key(i);if(K.indexOf(s)===0){try{D=K.substring(s.length);E=JSON.parse(w.getItem(K));t[D]=new sap.ushell.System(E);}catch(e){w.removeItem(K);}}}return t;}sap.ushell.utils.testPublishAt(z,"suppressOData");function B(){function e(E,i,F){jQuery.sap.log.warning(E,null,"sap.ushell.Container");if(F){setTimeout(F.bind(null,E),5000);}return{abort:function(){return;}};}OData.read=function(i,D,F){return e("OData.read('"+(i&&i.Uri?i.requestUri:i)+"') disabled during logout processing",D,F);};OData.request=function(i,D,F){return e("OData.request('"+(i?i.requestUri:"")+"') disabled during logout processing",D,F);};}this.addRemoteSystem=function(e){var i=e.getAlias(),O=t[i];if(O){if(O.toString()===e.toString()){return;}jQuery.sap.log.warning("Replacing "+O+" by "+e,null,"sap.ushell.Container");}else{jQuery.sap.log.debug("Added "+e,null,"sap.ushell.Container");}t[i]=e;sap.ushell.utils.localStorageSetItem(s+i,e);};this.addRemoteSystemForServiceUrl=function(e){var M,i={baseUrl:";o="};if(!e||e.charAt(0)!=='/'||e.indexOf('//')===0){return;}M=/^[^?]*;o=([^\/;?]*)/.exec(e);if(M&&M.length>=2){i.alias=M[1];}e=e.replace(/;[^\/?]*/g,"");if(/^\/sap\/(bi|hana|hba)\//.test(e)){i.platform="hana";i.alias=i.alias||"hana";}else if(/^\/sap\/opu\//.test(e)){i.platform="abap";}if(i.alias&&i.platform){this.addRemoteSystem(new sap.ushell.System(i));}};this.attachLogoutEvent=function(F){L.attachEvent("Logout",F);};this.detachLogoutEvent=function(F){L.detachEvent("Logout",F);};this.logout=function(){var D=new jQuery.Deferred();function i(){a.logout(true).always(function(){w.removeItem(y);D.resolve();});}function E(){if(L.fireEvent("Logout",true)){i();}else{setTimeout(i,1000);}}function F(){var t,H=[];if(v){window.removeEventListener('storage',v);}sap.ushell.utils.localStorageSetItem(y,"pending");B();t=A();Object.keys(t).forEach(function(I){try{H.push(l("Container",t[I]).logout(false));}catch(e){jQuery.sap.log.warning("Could not create adapter for "+I,e.toString(),"sap.ushell.Container");}w.removeItem(s+I);});jQuery.when.apply(jQuery,H).done(E);}if(typeof a.addFurtherRemoteSystems==='function'){a.addFurtherRemoteSystems().always(F);}else{F();}return D.promise();};this.setLogonFrameProvider=function(e){if(this.oFrameLogonManager){this.oFrameLogonManager.setLogonFrameProvider(e);}};this.getUserDefaultPluginsPromise=function(){return u.promise();};u=new jQuery.Deferred();sap.ui.getCore().getEventBus().subscribe("sap.ushell.Container","addRemoteSystemForServiceUrl",function(e,E,D){z.addRemoteSystemForServiceUrl(D);});if(typeof a.logoutRedirect==='function'){v=function(e){function i(){g();r();}if(sap.ushell.Container!==z){return;}if(e.key.indexOf(s)===0&&e.newValue&&e.newValue!==w.getItem(e.key)){sap.ushell.utils.localStorageSetItem(e.key,e.newValue);}if(e.key===y){if(e.newValue==="pending"){B();if(L.fireEvent("Logout",true)){i();}else{setTimeout(i,1000);}}}};window.addEventListener('storage',v);}}sap.ushell.bootstrap=function(P,a){var A,e;if(sap.ushell.Container!==undefined){e=new Error("Unified shell container is already initialized - cannot initialize twice.\nStacktrace of first initialization:"+f);jQuery.sap.log.error(e,e.stack,S);throw e;}sap.ushell.Container=null;f=(new Error()).stack;C=JSON.parse(JSON.stringify(window["sap-ushell-config"]||{}));p=a;if(typeof window["sap.ushell.bootstrap.callback"]==="function"){setTimeout(window["sap.ushell.bootstrap.callback"]);}if(C.modulePaths){Object.keys(C.modulePaths).forEach(function(M){jQuery.sap.registerModulePath(M,C.modulePaths[M]);});}A=l("Container",new sap.ushell.System({alias:"",platform:C.platform||P}));return A.load().done(function(){sap.ushell.Container=new n(A);m(C);});};}());};if(!jQuery.sap.isDeclared('sap.ushell.services.EndUserFeedback')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.EndUserFeedback");function g(p,o){return jQuery.sap.getObject(p,undefined,o)||"";}sap.ushell.services.EndUserFeedback=function(a,c,p,s){var S=(s&&s.config)||{};this.sendFeedback=function(e){var u,n,A,b,E,f,U,d,h;u=g("clientContext.navigationData.applicationInformation.url",e);n=g("clientContext.navigationData.navigationHash",e);A=g("clientContext.navigationData.applicationInformation.additionalInformation",e);b=g("clientContext.navigationData.applicationInformation.applicationType",e);f=g("clientContext.navigationData.formFactor",e);U=g("clientContext.userDetails.userId",e);d=g("clientContext.userDetails.eMail",e);h=e.feedbackText||"";E={feedbackText:h.slice(0,2000),ratings:e.ratings||{},additionalInformation:A,applicationType:b,url:u?this.getPathOfURL(u):"",navigationIntent:n.replace(/\?.*$/,''),formFactor:f,isAnonymous:e.isAnonymous||false,userId:e.isAnonymous?"":U,eMail:e.isAnonymous?"":d};return a.sendFeedback(E);};this.getLegalText=function(){return a.getLegalText();};this.isEnabled=function(){var d=new jQuery.Deferred();if(S.enabled===false){setTimeout(function(){d.reject();},0);return d.promise();}a.isEnabled().done(function(l){d.resolve();}).fail(function(e){d.reject();});return d.promise();};this.getPathOfURL=function(u){var U=new URI(u);return U.pathname();};};}());};if(!jQuery.sap.isDeclared('sap.ushell.services.LaunchPage')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.LaunchPage");sap.ushell.services.LaunchPage=function(a,c){var t=this,T=[];this._getAdapter=function(){return a;};this.getGroups=function(){var p=a.getGroups();p.fail(function(){jQuery.sap.log.error("getGroups failed");});return p;};this.getDefaultGroup=function(){var p=a.getDefaultGroup();p.fail(function(){jQuery.sap.log.error("getDefaultGroup failed");});return p;};this.getGroupTitle=function(g){return a.getGroupTitle(g);};this.getGroupId=function(g){return a.getGroupId(g);};this.getGroupTiles=function(g){return a.getGroupTiles(g);};this.getLinkTiles=function(g){return a.getLinkTiles(g);};this.addGroupAt=function(s,i){var p,b=i;if(a.addGroupAt){p=a.addGroupAt(s,i);p.fail(function(){jQuery.sap.log.error("addGroup "+s+" failed");});}else{var d=new jQuery.Deferred();p=a.addGroup(s);p.done(function(n,g){var m=this.moveGroup(n,b),e=n;m.done(function(){d.resolve(e);});m.fail(function(){d.reject();});}.bind(this));p.fail(function(){jQuery.sap.log.error("addGroup "+s+" failed");d.reject();});return d.promise();}return p;};this.addGroup=function(s){var p=a.addGroup(s);p.fail(function(){jQuery.sap.log.error("addGroup "+s+" failed");});return p;};this.removeGroup=function(g,i){var p=a.removeGroup(g,i);p.fail(function(){jQuery.sap.log.error("Fail to removeGroup "+t.getGroupTitle(g));});return p;};this.resetGroup=function(g,i){var p=a.resetGroup(g,i);p.fail(function(){jQuery.sap.log.error("Fail to resetGroup "+t.getGroupTitle(g));});return p;};this.isGroupRemovable=function(g){return a.isGroupRemovable(g);};this.isGroupLocked=function(g){if(typeof a.isGroupLocked==="function"){return a.isGroupLocked(g);}return false;};this.moveGroup=function(g,n){var p=a.moveGroup(g,n);p.fail(function(){jQuery.sap.log.error("Fail to moveGroup "+t.getGroupTitle(g));});return p;};this.setGroupTitle=function(g,s){var p=a.setGroupTitle(g,s);p.fail(function(){jQuery.sap.log.error("Fail to set Group title: "+t.getGroupTitle(g));});return p;};this.hideGroups=function(h){var d=jQuery.Deferred();if(typeof a.hideGroups!=="function"){d.reject('hideGroups() is not implemented in the Adapter.');}else{a.hideGroups(h).done(function(){d.resolve();}).fail(function(m){jQuery.sap.log.error("Fail to store groups visibility."+m);d.reject();});}return d.promise();};this.isGroupVisible=function(g){if(typeof a.isGroupVisible==="function"){return a.isGroupVisible(g);}return true;};this.addTile=function(C,g){var p=a.addTile(C,g);p.fail(function(){jQuery.sap.log.error("Fail to add Tile: "+t.getCatalogTileId(C));});return p;};this.removeTile=function(g,o,i){var p=a.removeTile(g,o,i);p.fail(function(){jQuery.sap.log.error("Fail to remove Tile: "+t.getTileId(o));});return p;};this.moveTile=function(o,s,i,S,b){var p=a.moveTile(o,s,i,S,b);p.fail(function(){jQuery.sap.log.error("Fail to move Tile: "+t.getTileId(o));});return p;};this.getTileId=function(o){return a.getTileId(o);};this.getTileTitle=function(o){return a.getTileTitle(o);};this.getTileType=function(o){if(a.getTileType){return a.getTileType(o);}return'tile';};this.getTileView=function(o){var d=a.getTileView(o);if(!jQuery.isFunction(d.promise)){d=jQuery.Deferred().resolve(d).promise();}return d;};this.getTileSize=function(o){return a.getTileSize(o);};this.getTileTarget=function(o){return a.getTileTarget(o);};this.getTileDebugInfo=function(o){if(typeof a.getTileDebugInfo==="function"){return a.getTileDebugInfo(o);}return undefined;};this.isTileIntentSupported=function(o){if(typeof a.isTileIntentSupported==="function"){return a.isTileIntentSupported(o);}return true;};this.refreshTile=function(o){a.refreshTile(o);};this.setTileVisible=function(o,n){return a.setTileVisible(o,n);};this.registerTileActionsProvider=function(p){if(typeof p!=='function'){throw new Error("Tile actions Provider is not a function");}T.push(p);};this.getTileActions=function(o){var b=[];var A;if(typeof a.getTileActions==='function'){A=a.getTileActions(o);if(A&&A.length&&A.length>0){b.push.apply(b,A);}}for(var i=0;i<T.length;i++){A=T[i](o);if(A&&A.length&&A.length>0){b.push.apply(b,A);}}return b;};this.getCatalogs=function(){return a.getCatalogs();};this.isCatalogsValid=function(){return a.isCatalogsValid();};this.getCatalogData=function(C){if(typeof a.getCatalogData!=="function"){jQuery.sap.log.warning("getCatalogData not implemented in adapter",null,"sap.ushell.services.LaunchPage");return{id:this.getCatalogId(C)};}return a.getCatalogData(C);};this.getCatalogError=function(C){return a.getCatalogError(C);};this.getCatalogId=function(C){return a.getCatalogId(C);};this.getCatalogTitle=function(C){return a.getCatalogTitle(C);};this.getCatalogTiles=function(C){var p=a.getCatalogTiles(C);p.fail(function(){jQuery.sap.log.error("Fail to get Tiles of Catalog: "+t.getCatalogTitle(C));});return p;};this.getCatalogTileId=function(o){return a.getCatalogTileId(o);};this.getCatalogTileTitle=function(C){return a.getCatalogTileTitle(C);};this.getCatalogTileSize=function(C){return a.getCatalogTileSize(C);};this.getCatalogTileView=function(C){return a.getCatalogTileView(C);};this.getCatalogTileTargetURL=function(C){return a.getCatalogTileTargetURL(C);};this.getCatalogTileTags=function(C){if(typeof a.getCatalogTileTags==="function"){return a.getCatalogTileTags(C);}return[];};this.getCatalogTileKeywords=function(C){return a.getCatalogTileKeywords(C);};this.getCatalogTilePreviewTitle=function(C){return a.getCatalogTilePreviewTitle(C);};this.getCatalogTilePreviewIcon=function(C){return a.getCatalogTilePreviewIcon(C);};this.addBookmark=function(p,g){var P,d,m;if(!p.title){jQuery.sap.log.error("Add Bookmark - Missing title");throw new Error("Title missing in bookmark configuration");}if(!p.url){jQuery.sap.log.error("Add Bookmark - Missing URL");throw new Error("URL missing in bookmark configuration");}if(g&&this.isGroupLocked(g)){d=new jQuery.Deferred();P=d.promise();m='Tile cannot be added, target group ('+this.getGroupTitle(g)+')is locked!';d.reject(m);jQuery.sap.log.error(m);}else{P=a.addBookmark(p,g);P.fail(function(){jQuery.sap.log.error("Fail to add bookmark for URL: "+p.url+" and Title: "+p.title);});}return P;};this.countBookmarks=function(u){if(!u||typeof u!=="string"){jQuery.sap.log.error("Fail to count bookmarks. No valid URL");throw new Error("Missing URL");}var p=a.countBookmarks(u);p.fail(function(){jQuery.sap.log.error("Fail to count bookmarks");});return p;};this.deleteBookmarks=function(u){if(!u||typeof u!=="string"){throw new Error("Missing URL");}var p=a.deleteBookmarks(u);p.fail(function(){jQuery.sap.log.error("Fail to delete bookmark for: "+u);});return p;};this.updateBookmarks=function(u,p){if(!u||typeof u!=="string"){jQuery.sap.log.error("Fail to update bookmark. No valid URL");throw new Error("Missing URL");}if(!p||typeof p!=="object"){jQuery.sap.log.error("Fail to update bookmark. No valid parameters, URL is: "+u);throw new Error("Missing parameters");}var P=a.updateBookmarks(u,p);P.fail(function(){jQuery.sap.log.error("Fail to update bookmark for: "+u);});return P;};this.onCatalogTileAdded=function(s){return a.onCatalogTileAdded(s);};};}());};if(!jQuery.sap.isDeclared('sap.ushell.services.Message')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.Message");sap.ushell.services.Message=function(){var s=null;this.init=function(S){s=S;return this;};this.show=function(t,m,p){if(!m){jQuery.sap.log.error("Message must not be empty.");}else{if(s){s(t,m,p||{});}else{jQuery.sap.log.error("MessageService not initialized. [Message: '"+m+"']");}}};this.info=function(m,d){this.show(sap.ushell.services.Message.Type.INFO,m,{duration:d||3000});};this.error=function(m,t){m=(t!==undefined)?t+" , "+m:m;jQuery.sap.log.error(m);this.show(sap.ushell.services.Message.Type.ERROR,m,{title:t});};this.confirm=function(m,c,t,a){this.show(sap.ushell.services.Message.Type.CONFIRM,m,{title:t,callback:c,actions:a});};};sap.ushell.services.Message.hasNoAdapter=true;sap.ushell.services.Message.Type={INFO:0,ERROR:1,CONFIRM:2};}());};if(!jQuery.sap.isDeclared('sap.ushell.services.NavTargetResolution')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.NavTargetResolution");sap.ushell.services.NavTargetResolution=function(A,c,p,s){var S=s&&s.config,l,r=[{name:"DefaultAdapter",isApplicable:function(){return true;},resolveHashFragment:A.resolveHashFragment.bind(A)}],C;this._nextResolveHashFragment=function(a,h){var R,f;R=a.pop();if(R.isApplicable(h)){jQuery.sap.log.info("NavTargetResolution: custom resolver "+R.name+" resolves "+h);f=this._nextResolveHashFragment.bind(this,a);return R.resolveHashFragment(h,f);}return this._nextResolveHashFragment(a,h);};this.expandCompactHash=function(h){var u=sap.ushell.Container.getService("URLParsing"),P,d=new jQuery.Deferred();P=u.parseShellHash(h);if(P&&P.params&&P.params["sap-intent-param"]){sap.ushell.Container.getService("AppState").getAppState(P.params["sap-intent-param"][0]).done(function(o){var v=o.getData("sap-intent-param"),H=h;if(v){H=sap.ushell.Container.getService("URLShortening").expandParamGivenRetrievalFunction(h,"sap-intent-param",function(){return v;});}d.resolve(H);}).fail(function(){d.resolve(h);});}else{d.resolve(h);}return d.promise();};this._getNavigationMode=function(R){var a=R.additionalInformation,b=R.applicationType,u,U;if((a===null||typeof a==="string"||typeof a==="undefined")&&b==="URL"){if(a&&a.indexOf("managed=")===0){if(a==="managed=FioriWave1"){return"embedded";}if(a==="managed="){return"newWindow";}return undefined;}if(a&&a.indexOf("SAPUI5.Component=")===0){u="[a-zA-Z0-9_]+";U=["^SAPUI5.Component=",u,"([.]",u,")*$"].join("");if(!(new RegExp(U)).test(a)){jQuery.sap.log.warning(["The UI5 component name in",a,"is not valid.","Please use names satisfying",U].join(" "));}return"embedded";}return"newWindow";}if(b==="NWBC"){return"newWindowThenEmbedded";}return undefined;};var w=["NWBC","WDA","TR"];this._getSapSystem=function(h,R){var a;if(R&&R["sap-system"]){return R["sap-system"];}if(R&&R.url){a=jQuery.sap.getUriParameters(R.url).get("sap-system");if(a){return a;}}if(w.indexOf(R.applicationType)>=0&&h&&h.substring(1)){a=jQuery.sap.getUriParameters(h.substring(1)).get("sap-system");if(a){return a;}}return undefined;};this.resolveHashFragment=function(h){var d=new jQuery.Deferred(),a,t=this;this.expandCompactHash(h).done(function(H){t._invokeResolveHashChain(H).done(function(R){if(R&&R.applicationType&&R.applicationType==="SAPUI5"){R.applicationType="URL";}if(jQuery.isPlainObject(R)&&!R.hasOwnProperty("navigationMode")){R.navigationMode=t._getNavigationMode(R);}if(jQuery.isPlainObject(R)&&!R.hasOwnProperty("sap-system")){a=t._getSapSystem(h,R);if(a){R["sap-system"]=a;}}d.resolve(R);}).fail(function(m){d.reject(m);});}).fail(function(m){d.reject(m);});return d.promise();};this._invokeResolveHashChain=function(h){var o=r.map(function(a){return a;});return this._nextResolveHashFragment(o,h).done(function(R){C=R;});};this.baseResolveHashFragment=function(h){return A.resolveHashFragment(h);};this.getSemanticObjectLinks=function(a,P,i,o,b,d){var t=this,e,f,g=new jQuery.Deferred(),h;if(/\?/.test(a)){throw new Error("Parameter must not be part of semantic object");}e=(P===undefined)?undefined:JSON.parse(JSON.stringify(P));if(b){e=e||{};e["sap-xapp-state"]=encodeURIComponent(b);}f={target:{semanticObject:a,action:"dummyAction"},params:e};h=sap.ushell.Container.getService("ShellNavigation");h.hrefForExternal(f,true,o,true).done(function(R){e=R.params||e;if(A.getSemanticObjectLinks){A.getSemanticObjectLinks(a,e,i).done(function(j){if(d){t._shortenGetSemanticObjectLinksResults(j,o).done(function(k){g.resolve(k);});}else{g.resolve(j);}}).fail(function(m){g.reject(m);});}else{g.resolve([]);}}).fail(function(m){g.reject(m);});return g.promise();};this._shortenGetSemanticObjectLinksResults=function(g,o){var t=this,a=[],i=0,P=g.length,u=sap.ushell.Container.getService("URLParsing"),b=sap.ushell.Container.getService("ShellNavigation"),d=new jQuery.Deferred();g.forEach(function(I){var U=u.parseShellHash(I.intent),e=b.compactParams(U.params,undefined,o);a.push(e);a[i].done(function(f,h){a[f]={text:I.text,intent:"#"+U.semanticObject+"-"+U.action+"?"+u.paramsToString(h)};}.bind(t,i)).fail(function(f,m){jQuery.sap.log.warning("Cannot shorten GetSemanticObjectLinks result, using expanded form","Failure message: "+m+"; intent had title ''"+I.title+"'' and link ''"+I.intent+"'","sap.ushell.services.NavTargetResolution");a[f]={text:I.text,intent:I.intent};}.bind(t,i)).always(function(){P--;if(P===0){d.resolve(a);}});i++;});return d.promise();};this.isIntentSupported=function(i){var R={};if(A.isIntentSupported){return A.isIntentSupported(i);}i.forEach(function(I){R[I]={supported:undefined};});return(new jQuery.Deferred()).resolve(R).promise();};this.isNavigationSupported=function(i){var u=sap.ushell.Container.getService("URLParsing"),d=new jQuery.Deferred(),I=[];I=i.map(function(a){if(typeof a==="string"){return a;}return"#"+u.constructShellHash(a);});this.isIntentSupported(I).done(function(R){var a=I.map(function(b){return R[b]||{supported:false};});d.resolve(a);}).fail(d.reject.bind(d));return d.promise();};this.registerCustomResolver=function(R){if(typeof R.name!=="string"){jQuery.sap.log.error("NavTargetResolution: Custom Resolver must have name {string} member");return false;}if(typeof R.isApplicable!=="function"){jQuery.sap.log.error("NavTargetResolution: Custom Resolver must have isApplicable member");return false;}if(typeof R.resolveHashFragment!=="function"){jQuery.sap.log.error("NavTargetResolution: Custom Resolver must have \"resolveHashFragment\" member");return false;}r.push(R);return true;};if(S&&jQuery.isArray(S.resolveLocal)){l=S.resolveLocal.map(function(a){return a.linkId;});this.registerCustomResolver({name:"localResolveNavigationResolver",cleanHash:function(h){if(h===""){return"#";}var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1));if(!a){return"#";}h="#"+a.semanticObject+"-"+a.action;return h;},_getIndex:function(o){var h=this.cleanHash(o);return l.indexOf(h.substring(1));},isApplicable:function(o){return this._getIndex(o)>=0;},resolveHashFragment:function(h){var d,i=this._getIndex(h),R,o,a,n;d=new jQuery.Deferred();R=JSON.parse(JSON.stringify(S.resolveLocal[i].resolveTo));o=sap.ushell.Container.getService("URLParsing").parseShellHash(h);if(o&&o.params){n=sap.ushell.Container.getService("URLParsing").paramsToString(o.params);a=R.url.indexOf('?')>=0;R.url=R.url+(a?"":"?")+n;}d.resolve(R);return d.promise();}});}this.registerCustomResolver({name:"StandaloneLocalResolver",aElement:undefined,cleanHash:function(h){if(h===""){return undefined;}var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1));if(!a){return undefined;}h="#"+a.semanticObject+"-"+a.action;return h;},isRunStandaloneHash:function(h){return typeof h==="string"&&h.indexOf("#Shell-runStandaloneApp")===0;},isApplicable:function(h){h=this.cleanHash(h);if(!h){return false;}return h==="#Test-url"||h==="#Test-local1"||h==="#Test-local2"||h==="#Test-config"||h==="#Test-clear"||this.isRunStandaloneHash(h);},parseUrl:function(u){if(!this.aElement){this.aElement=window.document.createElement('a');}this.aElement.href=u;return this.aElement;},resolveHashFragment:function(h){var d=new jQuery.Deferred(),b=null,t=this,e,P,L,f,g,n,i,o,F=h,u;h=this.cleanHash(h);if(!h){return false;}b={"#Test-config":{applicationType:"URL",url:"/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/demoapps/FioriSandboxConfigApp",additionalInformation:"SAPUI5.Component=sap.ushell.demoapps.FioriSandboxConfigApp"},"none":{applicationType:"URL",url:"",additionalInformation:""}};function j(K){if(localStorage){return localStorage[K];}return undefined;}function k(o,K){var e={},a;for(a in o){if(o.hasOwnProperty(a)){if(a!==K){e[a]=o[a];}}}return e;}function m(U){if(sap.ushell.utils.calculateOrigin(t.parseUrl(U))!==sap.ushell.utils.calculateOrigin(window.location)){return undefined;}var a=(new URI(t.parseUrl(U).href)).normalizePathname().pathname(),R=jQuery.sap.getObject("runStandaloneAppFolderWhitelist",0,S),E;if(!R){return undefined;}for(E in R){if(R.hasOwnProperty(E)){if(R[E]){if(E==="*"||a.indexOf((new URI(t.parseUrl(E).href)).normalizePathname().pathname())===0){return U;}}}}return undefined;}function q(K){return jQuery.sap.getUriParameters().get(K);}function v(a,K){return(a.params&&a.params[K]&&a.params[K][0])||q(K);}function x(K,V){if(localStorage){localStorage[K]=V;}}if(b[h]){e=b[h];}else if(h==="#Test-clear"){x("sap.ushell.#Test-local1",undefined);x("sap.ushell.#Test-local2",undefined);jQuery.sap.log.info("NavTargetResolution: Local storage keys for #Test have been cleared");e=b["#Test-config"];}else if(this.isRunStandaloneHash(h)){L={applicationType:"URL"};P=sap.ushell.Container.getService("URLParsing").parseShellHash(F);f=(v(P,"sap-ushell-SAPUI5.Component")&&"SAPUI5.Component="+v(P,"sap-ushell-SAPUI5.Component"))||(v(P,"sap-ushell-additionalInformation"));u=v(P,"sap-ushell-url")||"";o=k(P.params,"sap-ushell-SAPUI5.Component");o=k(o,"sap-ushell-additionalInformation");o=k(o,"sap-ushell-url");n=sap.ushell.Container.getService("URLParsing").paramsToString(o);i=u.indexOf('?')>=0;if(n){u=u+(i?(((u[u.length-1]!=="&")&&"&")||""):"?")+n;}L.url=m(u);L.additionalInformation=f;e=L;}else if(h==="#Test-local1"||h==="#Test-local2"||h==="#Test-url"){e=j("sap.ushell."+h);if(!e||e==="undefined"){L={applicationType:"URL"};}else{L=JSON.parse(e);}if((window.location.hostname==="localhost")||S.allowTestUrlComponentConfig){g="sap-ushell-test-"+h.substring(6);f=q(g+"-additionalInformation");if(f){L.additionalInformation=f;}u=q(g+"-url");if(u){L.url=m(u);}}if(!L.url){jQuery.sap.log.info("NavTargetResolution: No configured app for "+h+" found ( local storage or url params sap-ushell-test-local1-url  sap-ushell-test-local1-additionalInfo  not supplied? ");jQuery.sap.log.info("NavTargetResolution: Defaulting to config app ...\n");d.reject("URL is not resolvable");return d.promise();}L.url=m(L.url);e=L;}if(e.url===undefined){d.reject("URL is not resolvable");return d.promise();}jQuery.sap.log.info("NavTargetResolution: As URL:  http://localhost:8080/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html?sap-ushell-test-local1-url="+encodeURIComponent((e&&e.url)||"")+"&sap-ushell-test-local1-additionalInformation="+encodeURIComponent((e&&e.additionalInfo)||"")+"#Test-local1");jQuery.sap.log.info("NavTargetResolution: Resolving "+h+" to "+JSON.stringify(e));d.resolve(e);return d.promise();}});this.getCurrentResolution=function(){return C;};};}());};if(!jQuery.sap.isDeclared('sap.ushell.services.PageBuilding')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.PageBuilding");jQuery.sap.require('sap.ui2.srvc.factory');jQuery.sap.require('sap.ui2.srvc.page');sap.ushell.services.PageBuilding=function(a,c){this.getFactory=function(){return a.getFactory();};this.getPage=function(p){return a.getFactory().createPage(p);};this.getPageSet=function(i){var d=new jQuery.Deferred();a.getFactory().createPageSet(i,d.resolve.bind(d),d.reject.bind(d));return d.promise();};};}());};if(!jQuery.sap.isDeclared('sap.ushell.services.Search')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.Search");var s=sap.ushell.renderers.fiori2.search.SearchHelper;sap.ushell.services.Search=function(a,c){this.init.apply(this,arguments);};sap.ushell.services.Search.prototype={init:function(a,c){this.oAdapter=a;this.oContainerInterface=c;this.oLpdService=sap.ushell.Container.getService("LaunchPage");},isSearchAvailable:function(){return this.oAdapter.isSearchAvailable();},getSina:function(){return this.oAdapter.getSina();},_getCatalogTiles:function(){var t=this;if(t.allTilesDeferred){return t.allTilesDeferred;}var c=[];t.allTilesDeferred=t.oLpdService.getCatalogs().then(function(d){var D=[];var o=t._getPersonalizedGroupTiles(new jQuery.Deferred());D.push(o);for(var i=0;i<d.length;i++){D.push(t.oLpdService.getCatalogTiles(d[i]));}return jQuery.when.apply(jQuery,D).then(function(){var T=arguments;for(var i=0;i<T.length;i++){var f=T[i];for(var j=0;j<f.length;j++){try{var g=f[j],h=t.oLpdService.getCatalogTileView(g),k=t.oLpdService.getCatalogTileKeywords(g),l=t.oLpdService.getCatalogTileTargetURL(g),m=t.oLpdService.getCatalogTilePreviewTitle(g)||t.oLpdService.getCatalogTileTitle(g),S=t.oLpdService.getCatalogTileSize(g),I=t.oLpdService.getCatalogTilePreviewIcon(g)||"sap-icon://business-objects-experience";c.push({tile:g,keywords:k,url:l,title:m||'',icon:I,size:S});h.destroy();g.getContract("preview").setEnabled(false);}catch(e){jQuery.sap.log.error(e);}}}c=t._removeDuplicateTiles(c);c.sort(function(a,b){if(a.title.toUpperCase()<b.title.toUpperCase()){return-1;}if(a.title.toUpperCase()>b.title.toUpperCase()){return 1;}return 0;});return c;});});return t.allTilesDeferred;},_getPersonalizedGroupTiles:function(d){var t=this;t.oLpdService.getGroups().then(function(g){var D=[];var G;for(var j=0;j<g.length;j++){G=t.oLpdService.getGroupTiles(g[j])||[];D=D.concat(G);}d.resolve(D);});return d.promise();},_removeDuplicateTiles:function(t){var I={},k,u=[];for(var i=0;i<t.length;++i){var T=t[i];if(!T.url){continue;}var f=new RegExp('DisplayFactSheet','i');if(f.test(T.url)){continue;}k=T.title+T.url;if(I[k]===undefined){I[k]=T;u.push(T);}}return u;},_searchTiles:function(p){var S=p.searchTerm;var c=p.aCatalogTiles;var t=p.top||10;var i=p.skip||0;var m=0;var b=p.searchInKeywords||false;var f=[],T;var a=function(T,h){m+=1;if(m<=i){return;}if(m>(i+t)){return;}var r=jQuery.extend({},T);r.tooltip=r.title;if(h.length>0){r.label=h;}else{r.label=T.title;}f.push(r);};var d=S.replace(/\*/g,'');var o=new s.Tester(d);var e;for(var j=0;j<c.length;j++){T=c[j];e=o.test(T.title);if(e.bMatch===true){a(T,e.sHighlightedText);continue;}if(b&&T.keywords&&Array.isArray(T.keywords)){e=o.test(T.keywords.join(' '));if(e.bMatch===true){a(T,"");}}}return{totalResults:m,searchTerm:S,getElements:function(){return f;}};},queryApplications:function(p){var t=this;return this._getCatalogTiles().then(function(c){p.aCatalogTiles=c;return t._searchTiles(p);});},queryApplicationsByTarget:function(S,r){this._getCatalogTiles().done(function(c){var R=[];for(var j=0,l=S&&S.length||0;j<l;j++){var o=S[j],u=sap.ushell.Container.getService("URLParsing");for(var i=0;i<c.length;i++){var t=u.parseShellHash(c[i].url);if(t&&(t.semanticObject===o.semanticObject)&&(t.action===o.action)){R.push(c[i]);break;}}}r(R);});}};}());};if(!jQuery.sap.isDeclared('sap.ushell.services.ShellNavigation')){(function(){"use strict";jQuery.sap.require('sap.ui.thirdparty.signals');jQuery.sap.require('sap.ui.thirdparty.hasher');jQuery.sap.require('sap.ui.core.routing.HashChanger');jQuery.sap.declare("sap.ushell.services.ShellNavigation");sap.ui.core.routing.HashChanger.extend("sap.ushell.services.ShellNavigationHashChanger",{constructor:function(c){var u;this.oServiceConfig=c;if(jQuery.sap.getUriParameters().get("sap-ushell-reload")){if(jQuery.sap.getUriParameters().get("sap-ushell-reload")==="X"||jQuery.sap.getUriParameters().get("sap-ushell-reload")==="true"){u=true;}else{u=false;}}if(u!==undefined){if(typeof this.oServiceConfig!=="object"){this.oServiceConfig={};}this.oServiceConfig.reload=u;}sap.ui.core.routing.HashChanger.apply(this);this.priv_initializedByShellNav=false;this.oURLShortening=sap.ushell.Container.getService("URLShortening");this.privfnShellCallback=null;this.privappHashPrefix="&/";this.privhashPrefix="#";this.aNavigationFilters=[];this.NavigationFilterStatus={Continue:"Continue",Custom:"Custom",Abandon:"Abandon"};this.privgetCurrentShellHash=function(){var r=this.privsplitHash(hasher.getHash());return{hash:"#"+((r&&r.shellPart)?r.shellPart:"")};};this.privconstructHash=function(A){var o=this.privgetCurrentShellHash();o.hash=o.hash+A;return o;};this.privconstructShellHash=function(s){return sap.ushell.Container.getService("URLParsing").constructShellHash(s);};this.privsplitHash=function(h){var s,o,A;if(h===undefined||h===null||h===""){return{shellPart:null,appSpecificRoute:null,intent:null,params:null};}s=sap.ushell.Container.getService("URLParsing").parseShellHash(h);if(s===undefined||s===null){return null;}o=(s.params&&!jQuery.isEmptyObject(s.params))?s.params:null;A=s.appSpecificRoute;s.appSpecificRoute=undefined;return{shellPart:this.privstripLeadingHash(this.privconstructShellHash(s))||null,appSpecificRoute:A||null,intent:(s.semanticObject&&s.action&&(s.semanticObject+"-"+s.action+(s.contextRaw||"")))||null,params:o};};this.privsetHash=function(f,A,w){hasher.prependHash="";f=this.privstripLeadingHash(f);A=A||"";if(w===undefined){w=true;}if(w){this.fireEvent("hashSet",{sHash:A});hasher.setHash(f);}else{this.fireEvent("hashReplaced",{sHash:A});hasher.replaceHash(f);}};this.privstripLeadingHash=function(h){if(h[0]==='#'){return h.substring(1);}return h;};this.registerNavigationFilter=function(f){if(typeof f!=="function"){throw new Error("fnFilter must be a function");}this.aNavigationFilters.push(f);};function a(C){this.oAppState=undefined;this.oPromise=(new jQuery.Deferred()).resolve();this.getNextKey=function(){this.oAppState=sap.ushell.Container.getService("AppState").createEmptyAppState(C);return this.oAppState.getKey();};this.store=function(v){var n;this.oAppState.setData(v);n=this.oAppState.save();this.oPromise=jQuery.when(this.oPromise,n);};this.getPromise=function(){return this.oPromise;};}this.compactParams=function(p,r,C){var U=sap.ushell.Container.getService("URLParsing"),s,o,R,P,d=new jQuery.Deferred(),h=U.constructShellHash({"target":{"semanticObject":"SO","action":"action"},"params":p},s);if(p===undefined||Object.keys(p).length===0){return d.resolve(p).promise();}s=new a(C);R=this.oURLShortening.compactHash(h,r,s);o=U.parseParameters(R.hash.match(/\?.*/)[0]);P=s.getPromise();P.done(function(){d.resolve(o);}).fail(function(m){d.reject(m);});return d;};this.hrefForExternal=function(A,v,C,b){var r=this.hrefForExternalNoEnc(A,v,C,b);function e(R,v){if(v===true){R.hash=encodeURI(R.hash);}else{R=encodeURI(R);}return R;}if(!b){return e(r,v);}var d=new jQuery.Deferred();r.done(function(R){d.resolve(e(R,v));}).fail(d.reject.bind(d));return d;};this.hrefForExternalNoEnc=function(A,v,C,b){var t,p,d,s=new a(C),r;t=this.privhrefForExternalNoEnc(A,s);if(v===true){r={hash:t.hash,params:t.params,skippedParams:t.skippedParams};}else{r=t.hash;}if(!b){return r;}p=s.getPromise();d=new jQuery.Deferred();p.done(function(){d.resolve(r);}).fail(function(m){d.reject(m);});return d;};this.privhrefForExternalNoEnc=function(A,s){var r;if(A===undefined){return this.privgetCurrentShellHash();}if(A&&A.target&&(typeof A.target.semanticObject==="string"||typeof A.target.shellHash==="string")){r="#"+this.privconstructShellHash(A);return this.oURLShortening.compactHash(r,undefined,s);}return this.privgetCurrentShellHash();};this.privgetAppHash=function(A){var s,o;if(A&&A.target&&(typeof A.target.shellHash==="string")){o=sap.ushell.Container.getService("URLParsing").parseShellHash(A.target.shellHash);s=o&&o.appSpecificRoute;s=s&&s.substring(2);}return s;};this.hrefForAppSpecificHash=function(A){return encodeURI(this.privconstructHash(this.privappHashPrefix+A).hash);};this.toExternal=function(A,C){var h,s=new a(C),b;h=this.privhrefForExternalNoEnc(A,s).hash;b=this.privgetAppHash(A);this.privsetHash(h,b);};this.toAppHash=function(A,w){var h=this.privconstructHash(this.privappHashPrefix+A).hash;this.privsetHash(h,A,w);};}});sap.ushell.services.ShellNavigationHashChanger.prototype.initShellNavigation=function(s){if(this.priv_initializedByShellNav){jQuery.sap.log.info("initShellNavigation already called on this ShellNavigationHashChanger instance.");return false;}this.privfnShellCallback=s;hasher.changed.add(this.treatHashChanged,this);if(!hasher.isActive()){hasher.initialized.addOnce(this.treatHashChanged,this);hasher.init();}else{this.treatHashChanged(hasher.getHash());}this.priv_initializedByShellNav=true;return true;};sap.ushell.services.ShellNavigationHashChanger.prototype.init=function(){if(this.priv_initialized){jQuery.sap.log.info("init already called on this ShellNavigationHashChanger instance.");return false;}var n=this.privsplitHash(hasher.getHash()),a=n&&(n.appSpecificRoute||"  ").substring(2);this.fireEvent("hashChanged",{newHash:a});this.priv_initialized=true;return true;};sap.ushell.services.ShellNavigationHashChanger.prototype.treatHashChanged=function(n,o){if(this.inAbandonFlow){return;}var a,O,N,b,s,c,d,f,E,i,F;n=this.oURLShortening.expandHash(n);o=this.oURLShortening.expandHash(o);N=this.privsplitHash(n);b=this.privsplitHash(o);if(!N){E=new Error("Illegal new hash - cannot be parsed: '"+n+"'");this.fireEvent("shellHashChanged",{newShellHash:n,newAppSpecificRoute:null,oldShellHash:(b?b.shellPart:o),error:E});this.privfnShellCallback(n,null,(b?b.shellPart:o),(b?b.appSpecificRoute:null),E);return;}else{s=N.intent;}if(!b){b={shellPart:o,appSpecificRoute:null};}else{c=b.intent;}for(i=0;i<this.aNavigationFilters.length;i=i+1){try{F=this.aNavigationFilters[i].call(undefined,n,o);if(F===this.NavigationFilterStatus.Custom){return;}if(F===this.NavigationFilterStatus.Abandon){this.inAbandonFlow=true;hasher.replaceHash(o);this.inAbandonFlow=false;return;}}catch(e){jQuery.sap.log.error("Error while calling Navigation filter! ignoring filter...",e.message,"sap.ushell.services.ShellNavigation");}}if(s===c&&(o!==undefined)){if(!this._parametersChanged(N.params,b.params)){a=(N.appSpecificRoute||"  ").substring(2);O=(b.appSpecificRoute||"  ").substring(2);jQuery.sap.log.info("Inner App Hash changed from '"+O+"' to '"+a+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent("hashChanged",{newHash:a,oldHash:O});return;}if(this.hasListeners("shellHashParameterChanged")){d=sap.ushell.Container.getService("URLParsing").paramsToString(N.params);f=sap.ushell.Container.getService("URLParsing").paramsToString(b.params);jQuery.sap.log.info("Shell hash parameters changed from '"+f+"' to '"+d+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent("shellHashParameterChanged",{oNewParameters:N.params,oOldParameters:b.params});return;}}function r(h){window.location.hash='#'+encodeURI(h);window.location.reload();}if(o!==undefined){if(this.oServiceConfig&&this.oServiceConfig.reload){r(n);}}jQuery.sap.log.info("Outer shell hash changed from '"+o+"' to '"+n+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent("shellHashChanged",{newShellHash:N.shellPart,newAppSpecificRoute:N.appSpecificRoute,oldShellHash:b.shellPart,oldAppSpecificRoute:b.appSpecificRoute});this.privfnShellCallback(N.shellPart,N.appSpecificRoute,b.shellPart,b.appSpecificRoute);};sap.ushell.services.ShellNavigationHashChanger.prototype._parametersChanged=function(n,o){return!jQuery.sap.equal(n,o);};sap.ushell.services.ShellNavigationHashChanger.prototype.setHash=function(h){this.toAppHash(h,true);};sap.ushell.services.ShellNavigationHashChanger.prototype.replaceHash=function(h){this.toAppHash(h,false);};sap.ushell.services.ShellNavigationHashChanger.prototype.getHash=function(){return this.getAppHash();};sap.ushell.services.ShellNavigationHashChanger.prototype.getAppHash=function(){var n=this.privsplitHash(hasher.getHash()),a=n&&(n.appSpecificRoute||"  ").substring(2);return a;};sap.ushell.services.ShellNavigationHashChanger.prototype.destroy=function(){hasher.changed.remove(this.treatHashChanged,this);sap.ui.core.routing.HashChanger.prototype.destroy.apply(this,arguments);};function S(c,p,s){var o=s&&s.config;this.hashChanger=new sap.ushell.services.ShellNavigationHashChanger(o);this.hrefForExternal=function(a,v,C,A){return this.hashChanger.hrefForExternal(a,v,C,A);};this.hrefForAppSpecificHash=function(a){return this.hashChanger.hrefForAppSpecificHash(a);};this.compactParams=function(P,r,C){return this.hashChanger.compactParams(P,r,C);};this.toExternal=function(a,C){this.hashChanger.toExternal(a,C);};this.toAppHash=function(a,w){this.hashChanger.toAppHash(a,w);};this.init=function(f){hasher.prependHash="";sap.ui.core.routing.HashChanger.replaceHashChanger(this.hashChanger);this.hashChanger.initShellNavigation(f);return this;};this.NavigationFilterStatus=this.hashChanger.NavigationFilterStatus;this.registerNavigationFilter=function(f){this.hashChanger.registerNavigationFilter(f);};}sap.ushell.services.ShellNavigation=S;sap.ushell.services.ShellNavigation.hasNoAdapter=true;}());};if(!jQuery.sap.isDeclared('sap.ushell.services.SupportTicket')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.SupportTicket");sap.ushell.services.SupportTicket=function(a,c,p,s){var S=(s&&s.config)||{};this.createTicket=function(o){return a.createTicket(o);};this.isEnabled=function(){return S.enabled===true;};};}());};if(!jQuery.sap.isDeclared('sap.ushell.services.URLParsing')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.URLParsing");sap.ushell.services.URLParsing=function(){var r=/^(([A-Za-z0-9_\/]+)-([A-Za-z0-9_\/\-]+)(~([A-Z0-9a-z=+\/]+))?)?([?]([^&]|(&[^\/]))*&?)?$/;this.getShellHash=function(s){var a=/[^#]*#(([^&]|&[^\/])*)(&\/.*)?/,m=a.exec(s);if(m){return m[1];}return undefined;};this.getHash=function(u){var a=/#(.*)/,m=a.exec(u);if(m){return m[1];}return undefined;};this.isIntentUrl=function(u){var a=/^#/,t,l,T,L,h,p;if(typeof u!=="string"){return false;}if(!a.test(u)){t=(new URI(u)).normalize();T=t.protocol()+"://"+t.host()+t.pathname();l=(new URI(window.location.href)).normalize();L=l.protocol()+"://"+l.host()+l.pathname();if(T!==L){return false;}}h=this.getHash(u);if(!h){return false;}p=this.parseShellHash(h);if(p&&p.semanticObject&&p.action){return true;}return false;};this.parseParameters=function(p){if(!p){return{};}return jQuery.sap.getUriParameters(p).mParams||{};};this.paramsToString=function(p){var f,a,k,i,l,s="";f="";a=null;l=[];for(a in p){if(p.hasOwnProperty(a)){l.push(a);}}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];if(jQuery.isArray(p[a])){for(i=0;i<p[a].length;i=i+1){s+=f+encodeURIComponent(a)+"="+encodeURIComponent(p[a][i]);f="&";}}else{s+=f+encodeURIComponent(a)+"="+encodeURIComponent(p[a]);f="&";}}return s;};this.parseShellHash=function(h){var a=r,s,S,A,c,p,m,d;if(!h){return undefined;}s=this.splitHash(h);m=a.exec(s.shellPart);if(m){S=m[2];A=m[3];c=m[5];p=m[6];d=this.parseParameters(p);return{semanticObject:S,action:A,contextRaw:c,params:d,appSpecificRoute:s.appSpecificRoute};}if(s.appSpecificRoute){return{semanticObject:undefined,action:undefined,contextRaw:undefined,params:{},appSpecificRoute:s.appSpecificRoute};}return undefined;};this.privstripLeadingHash=function(h){if(h[0]==='#'){return h.substring(1);}return h;};this.splitHash=function(h){var a=/^(?:#|)([\S\s]*?)(&\/[\S\s]*)?$/,m,s,A;if(h===undefined||h===null||h===""){return{};}m=a.exec(h);s=m[1];if(s!==""&&!r.test(s)){return{};}A=m[2];if(s||A){return{shellPart:s,appSpecificRoute:A};}return{};};function b(u,a){if(a){return u+a;}return u;}this.constructShellHash=function(s){var c,p,d,i=null,k,l=[],f="?",a=null;if(!s){return"";}if(!s.target){s.target={};s.target.semanticObject=s.semanticObject;s.target.action=s.action;s.target.contextRaw=s.contextRaw;}if(s.target.shellHash||s.target.shellHash===""){d=this.privstripLeadingHash(s.target.shellHash);return b(d,s.appSpecificRoute);}if(s.target.semanticObject&&s.target.action){c=s.target.semanticObject+"-"+s.target.action;}else{return b("",s.appSpecificRoute);}if(s.target.contextRaw){c+="~"+s.target.contextRaw;}f="?";a=null;l=[];for(a in s.params){if(s.params.hasOwnProperty(a)){l.push(a);}}p=(s.params&&JSON.parse(JSON.stringify(s.params)))||{};if(s.appStateKey){l.push("sap-xapp-state");p["sap-xapp-state"]=s.appStateKey;}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];if(jQuery.isArray(p[a])){if(p[a].length>1){jQuery.sap.log.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!");}for(i=0;i<p[a].length;i=i+1){c+=f+encodeURIComponent(a)+"="+encodeURIComponent(p[a][i]);f="&";}}else{c+=f+encodeURIComponent(a)+"="+encodeURIComponent(p[a]);f="&";}}return b(c,s.appSpecificRoute);};this.addSystemToServiceUrl=function(s,c){var R,C,S=c;if(!s||s.indexOf('/')!==0||s.indexOf('//')===0){throw new sap.ui2.srvc.Error("Invalid URL: "+s,"sap.ushell.services.URLParsing");}if(c instanceof sap.ui.core.Component){C=(typeof c.getComponentData==="function")&&c.getComponentData();S=C&&C.startupParameters&&C.startupParameters["sap-system"]&&C.startupParameters["sap-system"][0];}R=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(!S&&!c&&R&&R.url){S=jQuery.sap.getUriParameters(R.url).get("sap-system");}if(/^[^?]*(;mo([\/;?]|$))/.test(s)){s=s;}else if(/^[^?]*(;o=([\/;?]|$))/.test(s)){s=s.replace(/;o=([\/;?]|$)/,(S?";o="+S:"")+"$1");}else if(!/^[^?]*;o=/.test(s)&&S){s=s.replace(/(\/[^?]*?)(\/$|$|(\/?\?.*))/,"$1;o="+S+"$2");}sap.ushell.Container.addRemoteSystemForServiceUrl(s);return s;};};sap.ushell.services.URLParsing.hasNoAdapter=true;}());};if(!jQuery.sap.isDeclared('sap.ushell.services.URLShortening')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.URLShortening");jQuery.sap.require('jquery.sap.storage');sap.ushell.services.URLShortening=function(){var t=this;this.ABBREV_PARAM_NAME="sap-intent-param";this.URL_LENGTH_LIMIT=1023;this.URL_PARAMS_LENGTH_LIMIT=512;this._replaceSapXAppStateRawWithKeyIfRequired=function(v,s){var V,k;if(typeof v!=="string"||/^[A-Z0-9]{40}$/.test(v)){return v;}try{V=JSON.parse(v);}catch(e){jQuery.sap.log.error("This cannot happen: sap-xapp-state parameter value is neither key nor JSON parseable");return v;}k=s&&s.getNextKey();this._storeValue(k,V,s);return k;};this.compactHash=function(u,r,s){var S,k,R,p,U,a,b=[this.ABBREV_PARAM_NAME,"sap-system","sap-xapp-state"];if(r){r.forEach(function(A){b.push(A);});}U=sap.ushell.Container.getService("URLParsing");S=U.parseShellHash(u);if(!S){jQuery.sap.log.error("the URL is not compliant and may break in a future version "+u);}p='';if(u.charAt(0)==='#'){p='#';}var v=S&&S.params&&S.params["sap-xapp-state"]&&S.params["sap-xapp-state"][0];if(v){S.params["sap-xapp-state"]=[this._replaceSapXAppStateRawWithKeyIfRequired(v,s)];u=p+U.constructShellHash({target:{semanticObject:S.semanticObject,action:S.action,contextRaw:S.contextRaw},params:S.params,appSpecificRoute:S.appSpecificRoute});}if(typeof u!=="string"||u.length<t.URL_LENGTH_LIMIT){return{hash:u};}if(S&&((S.params&&S.params[t.ABBREV_PARAM_NAME]))){return{hash:u};}k=s&&s.getNextKey();R=this._splitParameters(S.params,b,k);if(!R.key){return{hash:u};}a=U.paramsToString(R.tailParams);this._storeValue(R.key,a,s);return{hash:p+U.constructShellHash({target:{semanticObject:S.semanticObject,action:S.action,contextRaw:S.contextRaw},params:R.headParams,appSpecificRoute:S.appSpecificRoute}),params:R.headParams,skippedParams:R.tailParams};};this.checkHashLength=function(u){var s,r,p,U;if(typeof u!=="string"||u.length<t.URL_LENGTH_LIMIT){return{hash:u};}U=sap.ushell.Container.getService("URLParsing");s=U.parseShellHash(u);p='';if(u.charAt(0)==='#'){p='#';}r=this._splitParameters(s.params,[],"DummyKey");if(r.key){jQuery.sap.log.error("Application startup parameter length exceeds "+t.URL_PARAMS_LENGTH_LIMIT+" characters, truncation occured!");delete r.headParams[this.ABBREV_PARAM_NAME];return{hash:p+U.constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:r.headParams,appSpecificRoute:s.appSpecificRoute}),params:r.headParams,skippedParams:r.tailParams};}jQuery.sap.log.error("URL exceeds dangerous limits, arbitrary shortening or worse may occur!");return{hash:u};};this._findIndex=function(a,T){var r=a.indexOf(T);if(r>=0){return r;}r=-1;a.every(function(A,i){if(A.length>0&&A[A.length-1]==="*"&&A.substring(0,A.length-1)===T.substring(0,A.length-1)){r=i;return false;}return true;});return r;};this._cmpByList=function(a,A,b){var i,c;a=a||[];if(A===b){return 0;}i=this._findIndex(a,A);c=this._findIndex(a,b);if(i>=0&&c>=0){if((i-c)!==0){return i-c;}if(A<b){return-1;}if(A>b){return+1;}return 0;}if(i>=0){return-1;}if(c>=0){return+1;}if(A<b){return-1;}return+1;};this._sortByPriority=function(l,r){return l.sort(this._cmpByList.bind(this,r));};this._splitParameters=function(p,r,K){var a,i,k,h={},b={},c=false,o,d,e=0,f,l=[];if(!K||typeof K!=="string"){throw new Error("sap.ushell.services.URLShortening._splitParameters: key must be supplied!");}for(a in p){if(Object.prototype.hasOwnProperty.call(p,a)){l.push(a);}}l.sort();l=this._sortByPriority(l,r);for(k=0;k<l.length;k=k+1){a=l[k];o=p[a];if(o.length>1){jQuery.sap.log.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!");}for(i=0;i<o.length;i=i+1){d=p[a][i];f=a.length+d.length;if(f+e>this.URL_PARAMS_LENGTH_LIMIT){if(b[a]){b[a].push(d);}else{b[a]=[d];}c=true;}else if(h[a]){h[a].push(d);}else{h[a]=[d];}e=e+f+1;}}if(c){h[this.ABBREV_PARAM_NAME]=[K];}return{key:K,tailParams:b,headParams:h};};this.expandHash=function(u){var r=function(k){return t._retrieveValue(k);};return this.expandParamGivenRetrievalFunction(u,this.ABBREV_PARAM_NAME,r);};this.expandParamGivenRetrievalFunction=function(u,p,r){var s,v,k,a,b;if(typeof u!=="string"){return u;}s=sap.ushell.Container.getService("URLParsing").parseShellHash(u);k=s&&s.params&&s.params[p]&&s.params[p][0];if(!k){return u;}a='';if(u.charAt(0)==='#'){a='#';}v=r(k);if(!v){return u;}b=this._blendParameters(s.params,p,v);return a+sap.ushell.Container.getService("URLParsing").constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:b,appSpecificRoute:s.appSpecificRoute});};this._retrieveValue=function(k){return undefined;};this._storeValue=function(k,v,s){if(s&&typeof s.store==="function"){s.store(v);}};this._blendParameters=function(p,P,v){var n=sap.ushell.Container.getService("URLParsing").parseParameters("?"+v),a;delete p[P];for(a in n){if(Object.prototype.hasOwnProperty.call(n,a)){if(p[a]){p[a]=p[a].concat(n[a]);}else{p[a]=n[a];}}}return p;};};sap.ushell.services.URLShortening.hasNoAdapter=true;}());};if(!jQuery.sap.isDeclared('sap.ushell.services.UsageAnalytics')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.UsageAnalytics");sap.ushell.services.UsageAnalytics=function(c,p,S){var o=(S&&S.config)||{},D=[],a=false,i=false,e=true;window.oCustomProperties={};this.isEnabled=function(){if(!i){if(!o.enabled||!o.pubToken){e=false;if(!o.pubToken){jQuery.sap.log.warning("No valid pubToken was found in the service configuration");}}else{e=true;}}return e;};this.init=function(){if(this.isEnabled()&&!i){this._initUsageAnalyticsLogging();i=true;}};this.setCustomAttributes=function(C){var b,P="attribute",s,d="custom",f,F,g="customFunction";if(!this.isEnabled()){return;}for(b=1;b<5;b++){f=d.concat(b+2);if(window.swa[f]!==undefined){continue;}s=P+b;if(C[s]===undefined){continue;}if(jQuery.isFunction(C[s])){F=g+b;window[F]=C[s];window.swa[f]={ref:F};}else{window.swa[f]={ref:C[s]};}}};this.logCustomEvent=function(b,d,A){var f,C,s;if(!this.isEnabled()){return;}if(!this._isAnalyticsScriptLoaded()){this._addDelayedEvent(b,d,A);return;}if(A){for(f=0;f<4&&f<A.length;f++){C=f+7;s="custom"+C;window.oCustomProperties[s]=A[f];window.swa[s]={ref:"_getCustomValue",params:[C]};}}this._trackCustomEvent(b,d);};window._trackingScriptsLoaded=function(){var b,t;a=true;for(b=0;b<D.length;b++){t=D[b];this.logCustomEvent(t.eventType,t.customEventValue,t.aAdditionalValues);}D=null;};this._trackCustomEvent=function(b,d){window.swa.trackCustomEvent(b,d);};this._initUsageAnalyticsLogging=function(){if(window.swa===undefined){window.swa={};}window.swa.pubToken=o.pubToken;window.swa.baseUrl=o.baseUrl;window.swa.bannerEnabled=false;window.swa.loggingEnabled=true;window.swa.visitorCookieTimeout=63113852;window.swa.dntLevel=1;window.swa.trackerReadyCallback=window._trackingScriptsLoaded.bind(this);window.swa.clicksEnabled=(o.logClickEvents===false?false:true);window.swa.pageLoadEnabled=(o.logPageLoadEvents===false?false:true);this._handlingTrackingScripts();};this._handlingTrackingScripts=function(){var d=document,g=d.createElement('script'),s=d.getElementsByTagName('script')[0];g.onerror=function(){e=false;jQuery.sap.log.warning("SWA scripts not loaded!");};g.type='text/javascript';g.defer=true;g.async=true;g.src=window.swa.baseUrl+'js/privacy.js';s.parentNode.insertBefore(g,s);};this._isAnalyticsScriptLoaded=function(){return a;};this._addDelayedEvent=function(b,d,A){var f={eventType:b,customEventValue:d,aAdditionalValues:A};D.push(f);};window._getCustomValue=function(b){var C="custom"+b,v=window.oCustomProperties[C];window.oCustomProperties[C]=undefined;return v;};};sap.ushell.services.UsageAnalytics.hasNoAdapter=true;}());};if(!jQuery.sap.isDeclared('sap.ushell.services.UserDefaultParameterPersistence')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.UserDefaultParameterPersistence");var v=["value","noEdit","alwaysAskPlugin","_shellData","pluginData"];sap.ushell.services.UserDefaultParameterPersistence=function(a,c,p,C){this._oAdapter=a;this._oData={};};sap.ushell.services.UserDefaultParameterPersistence.prototype._cleanseValue=function(V){var r=jQuery.extend(true,{},V),a;for(a in r){if(r.hasOwnProperty(a)){if(v.indexOf(a)<0){delete r[a];}}}return r;};sap.ushell.services.UserDefaultParameterPersistence.prototype._testValue=function(V){return true;};sap.ushell.services.UserDefaultParameterPersistence.prototype.loadParameterValue=function(p){var d=new jQuery.Deferred(),t=this;if(this._oData[p]){d.resolve(this._oData[p]);}else{this._oAdapter.loadParameterValue(p).done(function(V){var c=t._cleanseValue(V);if(t._testValue(c)){d.resolve(c);}else{jQuery.sap.log.error("flawed value returned from persistence");d.reject("flawed value returned from persistence");}}).fail(d.reject.bind(this));}return d.promise();};sap.ushell.services.UserDefaultParameterPersistence.prototype.saveParameterValue=function(p,V){var d,c;if(!V){return this.deleteParameter(p);}c=this._cleanseValue(V);d=new jQuery.Deferred();if(!this._testValue(c)||(V&&V.noStore===true)){return d.resolve().promise();}this._oData[p]=c;return this._oAdapter.saveParameterValue(p,c);};sap.ushell.services.UserDefaultParameterPersistence.prototype.deleteParameter=function(p){delete this._oData[p];return this._oAdapter.deleteParameter(p);};sap.ushell.services.UserDefaultParameterPersistence.prototype.getStoredParameterNames=function(){var d=new jQuery.Deferred();this._oAdapter.getStoredParameterNames().done(function(r){r.sort();d.resolve(r);}).fail(d.reject.bind(d));return d.promise();};}());};if(!jQuery.sap.isDeclared('sap.ushell.services.UserDefaultParameters')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.UserDefaultParameters");var e="valueStored";var r=["value","noEdit","noStore","extendedValue","alwaysAskPlugin"];sap.ushell.services.UserDefaultParameters=function(a,c,p,C){var t=this,s=new sap.ui.base.EventProvider();this._aPlugins=[];function g(P){var v=(typeof P.getComponentData==="function"&&P.getComponentData()&&P.getComponentData().config&&P.getComponentData().config["sap-priority"])||0;if(typeof v!=="number"||isNaN(v)){return 0;}return v;}this._insertPluginOrdered=function(P,o){var f=g(o),i,h;for(i=0;(i<P.length)&&o;++i){h=g(P[i]);if(o&&(f>h)){P.splice(i,0,o);o=undefined;}}if(o){P.push(o);}return P;};this.registerPlugin=function(P){this._aPlugins=this._insertPluginOrdered(this._aPlugins,P);};function b(i,P,f,v,D){if(i>=P.length){D.resolve(v);return;}if(typeof P[i].getUserDefault!=="function"){b(i+1,P,f,v,D);return;}P[i].getUserDefault(f,v).done(function(n){if(n){b(i+1,P,f,n,D);}else{b(i+1,P,f,v,D);}}).fail(function(){jQuery.sap.log.error("invocation of getUserDefault(\""+f+"\") for plugin "+t._getComponentNameOfPlugin(P[i])+" rejected.",null,"sap.ushell.services.UserDefaultParameters");b(i+1,P,f,v,D);});return;}function d(o){return jQuery.extend(true,{},o);}this._getStoreDate=function(){return new Date().toString();};this._storeValue=function(P,v,f){if(f&&this._isInitial(v)){v=undefined;}else{v._shellData=jQuery.extend(true,{storeDate:this._getStoreDate()},v._shellData);}return sap.ushell.Container.getService("UserDefaultParameterPersistence").saveParameterValue(P,v).always(function(){var S={parameterName:P,parameterValue:d(v)};s.fireEvent(e,S);});};this._getCurrentValue=function(P){var D=new jQuery.Deferred();sap.ushell.Container.getService("UserDefaultParameterPersistence").loadParameterValue(P).done(function(v){D.resolve(v);}).fail(function(){D.resolve({value:undefined});});return D.promise();};this._isNeverSetValue=function(v){return!v||(!v._shellData&&!v.value&&!v.extendedValue);};this._isInitial=function(v){return!(v&&(v.value||v.extendedValue));};this._isStoreDistinct=function(v,V){return!r.every(function(m){return(v[m]===V[m]||jQuery.sap.equal(v[m],V[m]));});};this.getValue=function(P){var t=this,D=new jQuery.Deferred(),o=new jQuery.Deferred();this._getCurrentValue(P).done(function(v){var O;if(!v){v={};}O=d(v);if((v._shellData||!t._isInitial(v))&&!v.noStore&&!v.alwaysAskPlugin){o.resolve(v);}else{sap.ushell.Container.getUserDefaultPluginsPromise().done(function(){b(0,t._aPlugins,P,v,o);}).fail(function(){jQuery.sap.log.error("Cannot get value for "+P+". One or more plugins could not be loaded.");o.reject("Initialization of plugins failed");});}o.done(function(n){if(t._isNeverSetValue(O)||t._isStoreDistinct(O,n)){t._storeValue(P,n);}D.resolve(n);}).fail(D.reject.bind(D));});return D.promise();};this._addParameterValuesToParameters=function(P,f){var D=new jQuery.Deferred();var h=[];var t=this;f.forEach(function(i){var n=t.getValue(i);h.push(n);n.done(function(v){P[i].valueObject=v;});});jQuery.when.apply(jQuery,h).done(D.resolve.bind(D,P)).fail(D.reject.bind(D,P));return D.promise();};this._arrayToObject=function(P){var R={};P.forEach(function(f){R[f]={};});return R;};this._getComponentNameOfPlugin=function(P){if(typeof P!=="object"||typeof P.getMetadata!=="function"||!P.getMetadata()||typeof P.getMetadata().getComponentName!=="function"){return"'name of plugin could not be determined'";}return P.getMetadata().getComponentName()||"";};this._getEditorDataAndValue=function(D,P,m){var t=this;var f=[];var R=[];t._aPlugins.forEach(function(o,i){if(typeof o.getEditorMetadata==="function"){var n=new jQuery.Deferred();f.push(n);try{var h=f.length-1;o.getEditorMetadata(m).done(function(k){R[h]=k;}).always(function(){n.resolve();}).fail(function(){jQuery.sap.log.error("EditorMetadata for plugin "+t._getComponentNameOfPlugin(o)+"cannot be invoked.",null,"sap.ushell.services.UserDefaultParameters");n.resolve();});}catch(j){jQuery.sap.log.error("Error invoking getEditorMetaData on plugin: "+j+j.stack,null,"sap.ushell.services.UserDefaultParameters");n.resolve();}}});jQuery.when.apply(jQuery,f).done(function(){var h=[];var o=R.reverse().reduce(function(i,n){P.forEach(function(j){if(n[j]&&n[j].editorMetadata){i[j].editorMetadata=n[j].editorMetadata;}});return i;},m);P.forEach(function(i){if(!(o[i]&&o[i].editorMetadata)){h.push(i);}});if(h.length>0){jQuery.sap.log.error("The following parameter names have no editor metadata and thus likely no configured plugin:\n\""+h.join("\",\n\"")+"\".");}t._addParameterValuesToParameters(o,P).done(function(i){var j=jQuery.extend(true,{},i),k;k=Object.keys(j).splice(0);k.forEach(function(l){var n;if(j[l].valueObject&&j[l].valueObject.noEdit===true){delete j[l];n=h.indexOf(l);if(n>=0){h.splice(n,1);}}});if(h.length>0){jQuery.sap.log.error("The following parameter names have no editor metadata and thus likely no configured plugin:\n\""+h.join("\",\n\"")+"\".");}D.resolve(j);}).fail(D.reject.bind(D));});};this.editorGetParameters=function(){var D=new jQuery.Deferred();var t=this;sap.ushell.Container.getService("ClientSideTargetResolution").getUserDefaultParameterNames().done(function(P){var m=t._arrayToObject(P);if(m.length===0){D.resolve({});}else{sap.ushell.Container.getUserDefaultPluginsPromise().done(function(){t._getEditorDataAndValue(D,P,m);}).fail(function(){jQuery.sap.log.error("One or more plugins could not be loaded");D.reject("Initialization of plugins failed");});}});return D.promise();};this.editorSetValue=function(P,v){return this._storeValue(P,v,true);};this.attachValueStored=function(f){s.attachEvent(e,f);};this.detachValueStored=function(f){s.detachEvent(e,f);};};sap.ushell.services.UserDefaultParameters.hasNoAdapter=true;}());};if(!jQuery.sap.isDeclared('sap.ushell.services.UserInfo')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.UserInfo");sap.ushell.services.UserInfo=function(a,c){this.getId=function(){return sap.ushell.Container.getUser().getId();};this.getUser=function(){return sap.ushell.Container.getUser();};this.getThemeList=function(){if(this.getUser().isSetThemePermitted()===false){jQuery.sap.log.error("getThemeList failed");throw true;}var p=a.getThemeList();p.fail(function(){jQuery.sap.log.error("getThemeList failed");});return p;};this.updateUserPreferences=function(){var p=a.updateUserPreferences(sap.ushell.Container.getUser());p.fail(function(){jQuery.sap.log.error("updateAttributes: ");});return p;};};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.AboutButton')){jQuery.sap.declare("sap.ushell.ui.footerbar.AboutButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.AboutButton",{metadata:{library:"sap.ushell"}});(function(){"use strict";jQuery.sap.require('sap.ui.layout.form.SimpleForm');jQuery.sap.require('sap.m.ObjectHeader');jQuery.sap.require('sap.m.VBox');jQuery.sap.require('sap.m.Dialog');jQuery.sap.require('sap.m.Button');jQuery.sap.declare("sap.ushell.ui.footerbar.AboutButton");sap.ushell.ui.footerbar.AboutButton.prototype.init=function(){this.setIcon('sap-icon://hint');this.setWidth('100%');this.setText(sap.ushell.resources.i18n.getText("about"));this.setTooltip(sap.ushell.resources.i18n.getText("about"));this.attachPress(this.showAboutDialog);if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments);}};sap.ushell.ui.footerbar.AboutButton.prototype.showAboutDialog=function(){jQuery.sap.require("sap.ushell.services.AppConfiguration");var t=sap.ushell.resources.i18n,m=sap.ushell.services.AppConfiguration.getMetadata(),s=new sap.ui.layout.form.SimpleForm({id:'aboutDialogFormID',editable:false,content:[new sap.m.Label({text:t.getText("technicalName")}),new sap.m.Text({text:m.libraryName||''}),new sap.m.Label({text:t.getText("fioriVersionFld")}),new sap.m.Text({text:m.version||''}),new sap.m.Label({text:t.getText("sapui5Fld")}),new sap.m.Text({text:(sap.ui.version||"")+(' ('+(sap.ui.buildinfo.buildtime||"")+')')||''}),new sap.m.Label({text:t.getText("userAgentFld")}),new sap.m.Text({text:navigator.userAgent||''}),new sap.m.Label({text:''})]}),h=new sap.m.ObjectHeader({title:m.title,icon:m.icon}).addStyleClass('sapUshellAboutDialogHeader'),d,v,o=new sap.m.Button({text:t.getText("okBtn"),press:function(){d.close();}});if(jQuery.isEmptyObject(m)||!m.icon){v=new sap.m.VBox({items:[s]});}else{v=new sap.m.VBox({items:[h,s]});}d=new sap.m.Dialog({id:"aboutContainerDialogID",title:t.getText("about"),contentWidth:"25rem",horizontalScrolling:false,leftButton:o,afterClose:function(){d.destroy();}});d.addContent(v);d.open();};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.AboutButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.AboutButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.AboutButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer);}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.AddBookmarkButton')){jQuery.sap.declare("sap.ushell.ui.footerbar.AddBookmarkButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.AddBookmarkButton",{metadata:{library:"sap.ushell",properties:{"beforePressHandler":{type:"any",group:"Misc",defaultValue:null},"afterPressHandler":{type:"any",group:"Misc",defaultValue:null},"title":{type:"string",group:"Misc",defaultValue:null},"subtitle":{type:"string",group:"Misc",defaultValue:null},"info":{type:"string",group:"Misc",defaultValue:null},"tileIcon":{type:"string",group:"Misc",defaultValue:null},"numberUnit":{type:"string",group:"Misc",defaultValue:null},"keywords":{type:"string",group:"Misc",defaultValue:null},"customUrl":{type:"any",group:"Misc",defaultValue:null},"serviceUrl":{type:"any",group:"Misc",defaultValue:null},"serviceRefreshInterval":{type:"string",group:"Misc",defaultValue:null},"showGroupSelection":{type:"boolean",group:"Misc",defaultValue:true},"appData":{type:"object",group:"Misc",defaultValue:null}}}});(function(){"use strict";jQuery.sap.require('sap.ui.layout.form.SimpleForm');jQuery.sap.require('sap.m.Label');jQuery.sap.require('sap.m.Input');jQuery.sap.require('sap.m.Dialog');jQuery.sap.require('sap.m.Button');jQuery.sap.declare("sap.ushell.ui.footerbar.AddBookmarkButton");sap.ushell.ui.footerbar.AddBookmarkButton.prototype.init=function(){this.setIcon('sap-icon://add-favorite');this.setText(sap.ushell.resources.i18n.getText("addToHomePageBtn"));this.setTooltip(sap.ushell.resources.i18n.getText("addToHomePageBtn_tooltip"));this.setEnabled();this.oModel=new sap.ui.model.json.JSONModel({showGroupSelection:true,title:'',subtitle:'',numberValue:'',info:'',icon:'',numberUnit:'',keywords:''});var t=this;this.attachPress(function(){if(t.getBeforePressHandler()){t.getBeforePressHandler()();}t.showAddBookmarkDialog(function(){if(t.getAfterPressHandler()){t.getAfterPressHandler()();}});});if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments);}};sap.ushell.ui.footerbar.AddBookmarkButton.prototype.exit=function(){if(this.oDialog){this.oDialog.destroy();}if(sap.m.Button.prototype.exit){sap.m.Button.prototype.exit.apply(this,arguments);}};sap.ushell.ui.footerbar.AddBookmarkButton.prototype.setBookmarkTileView=function(v){this.bookmarkTileView=v;};sap.ushell.ui.footerbar.AddBookmarkButton.prototype.getBookmarkTileView=function(){return this.bookmarkTileView;};sap.ushell.ui.footerbar.AddBookmarkButton.prototype.showAddBookmarkDialog=function(c){this.oResourceBundle=sap.ushell.resources.i18n;this.appData=this.getAppData()||{};var t=this;this.cb=c;var i=jQuery.isEmptyObject(this.appData),b=sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.ui.footerbar.SaveAsTile",viewData:{appData:this.appData,serviceUrl:i?this.getServiceUrl():this.appData.serviceUrl,customUrl:i?this.getCustomUrl():this.appData.customUrl,numberUnit:i?this.getNumberUnit():this.appData.numberUnit,serviceRefreshInterval:i?this.getServiceRefreshInterval():this.appData.serviceRefreshInterval,keywords:i?this.getKeywords():this.appData.keywords}});if(jQuery.isEmptyObject(this.appData)){b.setModel(this.oModel);}t.setBookmarkTileView(b);this.oSimpleForm=new sap.ui.layout.form.SimpleForm({id:'bookmarkFormId',layout:sap.ui.layout.form.SimpleFormLayout.GridLayout,content:[b]}).addStyleClass("sapUshellAddBookmarkForm");var d=t._openDialog(this.oSimpleForm);b.getTitleInput().attachLiveChange(function(){t._toggleOkButton(this.getValue().trim(),d.getBeginButton());});};sap.ushell.ui.footerbar.AddBookmarkButton.prototype._toggleOkButton=function(v,o){o.setEnabled(v?true:false);};sap.ushell.ui.footerbar.AddBookmarkButton.prototype._openDialog=function(c){var e=this.bookmarkTileView.getTitleInput().getValue().length?true:false,o=new sap.m.Button('bookmarkOkBtn',{text:this.oResourceBundle.getText('okBtn'),press:this._handleOkButtonPress.bind(this),enabled:e}),a=new sap.m.Button('bookmarkCancelBtn',{text:this.oResourceBundle.getText('cancelBtn'),press:function(){this.oDialog.close();this.cb();}.bind(this)});this.oDialog=new sap.m.Dialog({id:'bookmarkDialog',title:this.oResourceBundle.getText('addToHomePageBtn'),contentWidth:'25rem',content:c,beginButton:o,endButton:a,stretchOnPhone:true,horizontalScrolling:false,afterClose:function(){this.oDialog.destroy();delete(this.oDialog);}.bind(this)});this.oDialog.open();return this.oDialog;};sap.ushell.ui.footerbar.AddBookmarkButton.prototype.setTitle=function(t){this.setProperty("title",t,true);this.oModel.setProperty("/title",t);};sap.ushell.ui.footerbar.AddBookmarkButton.prototype.setSubtitle=function(s){this.setProperty("subtitle",s,true);this.oModel.setProperty("/subtitle",s);};sap.ushell.ui.footerbar.AddBookmarkButton.prototype.setInfo=function(i){this.setProperty("info",i,true);this.oModel.setProperty("/info",i);};sap.ushell.ui.footerbar.AddBookmarkButton.prototype.setTileIcon=function(i){this.setProperty("tileIcon",i,true);this.oModel.setProperty("/icon",i);};sap.ushell.ui.footerbar.AddBookmarkButton.prototype.setShowGroupSelection=function(s){this.setProperty("showGroupSelection",s,true);this.oModel.setProperty("/showGroupSelection",s);};sap.ushell.ui.footerbar.AddBookmarkButton.prototype.setNumberUnit=function(n){this.setProperty("numberUnit",n,true);this.oModel.setProperty("/numberUnit",n);};sap.ushell.ui.footerbar.AddBookmarkButton.prototype.setKeywords=function(k){this.setProperty("keywords",k,true);this.oModel.setProperty("/keywords",k);};sap.ushell.ui.footerbar.AddBookmarkButton.prototype._handleOkButtonPress=function(){var b=this.getBookmarkTileView(),d=b.getBookmarkTileData(),t=d.group?d.group.object:"";delete d.group;var r=sap.ushell.Container.getService("Bookmark").addBookmark(d,t),R=sap.ushell.resources.i18n;r.done(function(){if(sap.ushell.Container){sap.ushell.Container.getService('Message').info(R.getText('tile_created_msg'));}});r.fail(function(m){jQuery.sap.log.error("Failed to add bookmark",m,"sap.ushell.ui.footerbar.AddBookmarkButton");if(sap.ushell.Container){sap.ushell.Container.getService('Message').error(R.getText('fail_to_add_tile_msg'));}});this.oDialog.close();this.cb();};sap.ushell.ui.footerbar.AddBookmarkButton.prototype.setEnabled=function(e){var s="",p=true,S;if(sap.ushell.renderers&&sap.ushell.renderers.fiori2){S=sap.ushell.renderers.fiori2.RendererExtensions.getConfiguration();if(S.appState){s=S.appState;}if(S.enablePersonalization!==undefined){p=S.enablePersonalization;}}if(s==='headerless'||s==='standalone'||s==='embedded'||!p){e=false;}if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling 'Save as Tile' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.AddBookmarkButton");}e=false;}sap.m.Button.prototype.setEnabled.call(this,e);if(!e){this.addStyleClass("sapUshellAddBookmarkButton");}};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.AddBookmarkButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.AddBookmarkButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.AddBookmarkButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer);}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.ContactSupportButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.ContactSupportButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.ContactSupportButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer);}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.EndUserFeedbackRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.EndUserFeedbackRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.EndUserFeedbackRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer);}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.HideGroupsButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.HideGroupsButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.HideGroupsButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer);}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.JamDiscussButton')){jQuery.sap.declare("sap.ushell.ui.footerbar.JamDiscussButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.JamDiscussButton",{metadata:{library:"sap.ushell",properties:{"beforePressHandler":{type:"any",group:"Misc",defaultValue:null},"afterPressHandler":{type:"any",group:"Misc",defaultValue:null},"jamData":{type:"object",group:"Misc",defaultValue:null}}}});(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.JamDiscussButton");sap.ushell.ui.footerbar.JamDiscussButton.prototype.init=function(){jQuery.sap.require("sap.ushell.services.Container");var t=this;this.setEnabled();this.setIcon('sap-icon://discussion-2');this.setText(sap.ushell.resources.i18n.getText("discussBtn"));this.attachPress(function(){if(t.getBeforePressHandler()){t.getBeforePressHandler()();}this.showDiscussDialog(t.getAfterPressHandler());});if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments);}};sap.ushell.ui.footerbar.JamDiscussButton.prototype.showDiscussDialog=function(c){jQuery.sap.require('sap.collaboration.components.fiori.feed.dialog.Component');if(!this.discussComponent){this.discussComponent=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.feed.dialog"});}this.discussComponent.setSettings(this.getJamData());this.discussComponent.open();if(c){c();}};sap.ushell.ui.footerbar.JamDiscussButton.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling JamDiscussButton: unified shell container not initialized",null,"sap.ushell.ui.footerbar.JamDiscussButton");}e=false;}else{var u=sap.ushell.Container.getUser();if(!(u&&u.isJamActive())){if(this.getEnabled()){jQuery.sap.log.info("Disabling JamDiscussButton: user not logged in or Jam not active",null,"sap.ushell.ui.footerbar.JamDiscussButton");}e=false;this.setVisible(false);}}sap.m.Button.prototype.setEnabled.call(this,e);};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.JamDiscussButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.JamDiscussButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.JamDiscussButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer);}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.JamShareButton')){jQuery.sap.declare("sap.ushell.ui.footerbar.JamShareButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.JamShareButton",{metadata:{library:"sap.ushell",properties:{"beforePressHandler":{type:"any",group:"Misc",defaultValue:null},"afterPressHandler":{type:"any",group:"Misc",defaultValue:null},"jamData":{type:"object",group:"Misc",defaultValue:null}}}});(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.JamShareButton");sap.ushell.ui.footerbar.JamShareButton.prototype.init=function(){jQuery.sap.require("sap.ushell.services.Container");var t=this;this.setEnabled();this.setIcon('sap-icon://share-2');this.setText(sap.ushell.resources.i18n.getText("shareBtn"));this.attachPress(function(){if(t.getBeforePressHandler()){t.getBeforePressHandler()();}this.showShareDialog(t.getAfterPressHandler());});if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments);}};sap.ushell.ui.footerbar.JamShareButton.prototype.showShareDialog=function(c){jQuery.sap.require('sap.collaboration.components.fiori.sharing.dialog.Component');if(!this.shareComponent){this.shareComponent=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog"});}this.shareComponent.setSettings(this.getJamData());this.shareComponent.open();if(c){c();}};sap.ushell.ui.footerbar.JamShareButton.prototype.exit=function(){if(this.shareComponent){this.shareComponent.destroy();}if(sap.m.Button.prototype.exit){sap.m.Button.prototype.exit.apply(this,arguments);}};sap.ushell.ui.footerbar.JamShareButton.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling JamShareButton: unified shell container not initialized",null,"sap.ushell.ui.footerbar.JamShareButton");}e=false;}else{var u=sap.ushell.Container.getUser();if(!(u&&u.isJamActive())){if(this.getEnabled()){jQuery.sap.log.info("Disabling JamShareButton: user not logged in or Jam not active",null,"sap.ushell.ui.footerbar.JamShareButton");}e=false;this.setVisible(false);}}sap.m.Button.prototype.setEnabled.call(this,e);};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.JamShareButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.JamShareButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.JamShareButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer);}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.LogoutButton')){jQuery.sap.declare("sap.ushell.ui.footerbar.LogoutButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.LogoutButton",{metadata:{library:"sap.ushell"}});(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.LogoutButton");sap.ushell.ui.footerbar.LogoutButton.prototype.init=function(){this.setIcon('sap-icon://log');this.setTooltip(sap.ushell.resources.i18n.getText("logoutBtn_tooltip"));this.setWidth('100%');this.setText(sap.ushell.resources.i18n.getText("logoutBtn_title"));this.attachPress(this.logout);this.setEnabled();if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments);}};sap.ushell.ui.footerbar.LogoutButton.prototype.logout=function(){jQuery.sap.require('sap.m.MessageBox');var s=true,i=false,l=new sap.ushell.ui.launchpad.LoadingDialog({text:""});sap.ushell.Container.getGlobalDirty().done(function(d){s=false;if(i===true){l.exit();l=new sap.ushell.ui.launchpad.LoadingDialog({text:""});}var _=function(d){var L={},r=sap.ushell.resources.i18n;if(d===sap.ushell.Container.DirtyState.DIRTY){L.message=r.getText('unsaved_data_warning_popup_message');L.icon=sap.m.MessageBox.Icon.WARNING;L.messageTitle=r.getText("unsaved_data_warning_popup_title");}else{L.message=r.getText('logoutConfirmationMsg');L.icon=sap.m.MessageBox.Icon.QUESTION;L.messageTitle=r.getText("logoutMsgTitle");}return L;};var L=_(d);sap.m.MessageBox.show(L.message,L.icon,L.messageTitle,[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],function(a){if(a===sap.m.MessageBox.Action.OK){l.openLoadingScreen();l.showAppInfo(sap.ushell.resources.i18n.getText('beforeLogoutMsg'),null);sap.ushell.Container.logout();}},sap.ui.core.ElementMetadata.uid("confirm"));});if(s===true){l.openLoadingScreen();i=true;}};sap.ushell.ui.footerbar.LogoutButton.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling 'Logout' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.LogoutButton");}e=false;}sap.m.Button.prototype.setEnabled.call(this,e);};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.LogoutButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.LogoutButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.LogoutButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer);}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.SettingsButton')){jQuery.sap.declare("sap.ushell.ui.footerbar.SettingsButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.SettingsButton",{metadata:{library:"sap.ushell"}});(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.SettingsButton");sap.ushell.ui.footerbar.SettingsButton.prototype.init=function(){jQuery.sap.require("sap.ushell.ui.footerbar.AboutButton");jQuery.sap.require("sap.ushell.ui.footerbar.UserPreferencesButton");jQuery.sap.require("sap.ushell.ui.footerbar.LogoutButton");this.setIcon('sap-icon://action-settings');this.setTooltip(sap.ushell.resources.i18n.getText("helpBtn_tooltip"));this.attachPress(this.showSettingsMenu);var a=new sap.ushell.ui.footerbar.AboutButton(),u=new sap.ushell.ui.footerbar.UserPreferencesButton(),l=new sap.ushell.ui.footerbar.LogoutButton();this.defaultMenuItems=[a,u,l];if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments);}};sap.ushell.ui.footerbar.SettingsButton.prototype.setMenuItems=function(b){this.menuItems=b;};sap.ushell.ui.footerbar.SettingsButton.prototype.showSettingsMenu=function(){var a=new sap.m.ActionSheet({id:'settingsMenu',showHeader:false,buttons:(this.menuItems||[]).concat(this.defaultMenuItems)});a.setPlacement(sap.m.PlacementType.Vertical);a.openBy(this);a.attachAfterClose(function(){a.removeAllButtons();a.destroy();});};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.SettingsButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.SettingsButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.SettingsButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer);}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.UserPreferencesButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.UserPreferencesButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.UserPreferencesButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer);}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.AccessibilityCustomData')){
/*!
 * ${copyright}
 */
jQuery.sap.declare('sap.ushell.ui.launchpad.AccessibilityCustomData');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.CustomData');sap.ui.define("sap/ushell/ui/launchpad/AccessibilityCustomData",['jquery.sap.global','sap/ui/core/CustomData','sap/ushell/library'],function(q,C,l){"use strict";var A=C.extend("sap.ushell.ui.launchpad.AccessibilityCustomData"),o=C.prototype._checkWriteToDom;A.prototype._checkWriteToDom=function(r){var k=this.getKey().toLowerCase(),i=sap.ui.getCore().getConfiguration().getAccessibility();if(!i){return;}if(k.indexOf("aria")===0||k==="role"){if(!this.getWriteToDom()){return null;}var v=this.getValue();if(typeof v!="string"){q.sap.log.error("CustomData with key "+k+" should be written to HTML of "+r+" but the value is not a string.");return null;}if(!(sap.ui.core.ID.isValid(k))||(k.indexOf(":")!=-1)){q.sap.log.error("CustomData with key "+k+" should be written to HTML of "+r+" but the key is not valid (must be a valid sap.ui.core.ID without any colon).");return null;}if(k==q.sap._FASTNAVIGATIONKEY){v=/^\s*(x|true)\s*$/i.test(v)?"true":"false";}else if(k.indexOf("sap-ui")==0){q.sap.log.error("CustomData with key "+k+" should be written to HTML of "+r+" but the key is not valid (may not start with 'sap-ui').");return null;}return{key:k,value:v};}else{return o.apply(this,arguments);}};return A;},true);};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.DashboardGroupsContainer')){
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.DashboardGroupsContainer");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.ushell.ui.launchpad.DashboardGroupsContainer",{metadata:{library:"sap.ushell",properties:{"accessibilityLabel":{type:"string",group:"",defaultValue:null}},aggregations:{"groups":{type:"sap.ui.core.Control",multiple:true,singularName:"group"}},events:{"afterRendering":{}}}});sap.ushell.ui.launchpad.DashboardGroupsContainer.M_EVENTS={'afterRendering':'afterRendering'};(function(){"use strict";sap.ushell.ui.launchpad.DashboardGroupsContainer.prototype.updateGroups=sap.ushell.override.updateAggregatesFactory("groups");sap.ushell.ui.launchpad.DashboardGroupsContainer.prototype.onAfterRendering=function(){this.fireAfterRendering();};sap.ushell.ui.launchpad.DashboardGroupsContainer.prototype.getGroupControlByGroupId=function(g){try{var a=this.getGroups();for(var i=0;i<a.length;i++){if(a[i].getGroupId()==g){return a[i];}}}catch(e){}return null;};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.DashboardGroupsContainerRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.DashboardGroupsContainerRenderer");sap.ushell.ui.launchpad.DashboardGroupsContainerRenderer={};sap.ushell.ui.launchpad.DashboardGroupsContainerRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellDashboardGroupsContainer");r.writeClasses();if(c.getAccessibilityLabel()){r.writeAccessibilityState(c,{role:"navigation",label:c.getAccessibilityLabel()});}r.write(">");var g=c.getGroups();jQuery.each(g,function(i,G){r.write("<div");r.addClass("sapUshellDashboardGroupsContainerItem");if(G.getIsGroupLocked()||G.getDefaultGroup()){r.addClass("sapUshellDisableDragAndDrop");}r.writeClasses();r.write(">");r.renderControl(this);r.write("</div>");});r.write("</div>");};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage')){jQuery.sap.declare("sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage");jQuery.sap.require('sap.m.Dialog');sap.m.Dialog.extend("sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage",{metadata:{library:"sap.ushell",events:{"afterClose":{}}}});sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage.M_EVENTS={'afterClose':'afterClose'};(function(){"use strict";jQuery.sap.require('sap.m.Dialog');jQuery.sap.require('sap.m.Button');jQuery.sap.declare("sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage");sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage.prototype.open=function(){var c,C;this.translationBundle=sap.ushell.resources.i18n;c=new sap.m.Button({id:sap.ui.core.ElementMetadata.uid("supportBtn"),text:this.translationBundle.getText("contactSupportBtn"),press:function(){this.close();jQuery.sap.require("sap.ushell.ui.footerbar.ContactSupportButton");this.oContactSupport=new sap.ushell.ui.footerbar.ContactSupportButton("ContactSupportErrorMsg",{visible:true});if(this.oContactSupport){this.oContactSupport.showContactSupportDialog();this.oContactSupport.destroy();}}.bind(this)});C=new sap.m.Button({id:sap.ui.core.ElementMetadata.uid("closeBtn"),text:this.translationBundle.getText("close"),press:function(){this.close();}.bind(this)});this.setType(sap.m.DialogType.Message);this.setIcon('sap-icon://alert');this.setRightButton(C);this.setLeftButton(c);this._addStyleClassToContent();this.addStyleClass('sapMMessageBoxError');this.attachAfterClose(function(){this.destroy();}.bind(this));if(sap.m.Dialog.prototype.open){sap.m.Dialog.prototype.open.apply(this,arguments);}};sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage.prototype._addStyleClassToContent=function(){var c=this.getContent(),C,i;for(i in c){C=c[i];if(C.getMetadata().getName()==="sap.m.Text"&&!C.aCustomStyleClasses){C.addStyleClass("sapMMsgBoxText");}}};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.EmbeddedSupportErrorMessageRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.EmbeddedSupportErrorMessageRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.DialogRenderer');sap.ushell.ui.launchpad.EmbeddedSupportErrorMessageRenderer=sap.ui.core.Renderer.extend(sap.m.DialogRenderer);}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.GroupHeaderActions')){jQuery.sap.declare("sap.ushell.ui.launchpad.GroupHeaderActions");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.ushell.ui.launchpad.GroupHeaderActions",{metadata:{library:"sap.ushell",properties:{"isOverflow":{type:"boolean",group:"Misc",defaultValue:false},"tileActionModeActive":{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{"content":{type:"sap.ui.core.Control",multiple:true,singularName:"content"},"overflowCtrl":{type:"sap.ui.core.Control",multiple:true,singularName:"overflowCtrl"}},events:{"afterRendering":{}}}});sap.ushell.ui.launchpad.GroupHeaderActions.M_EVENTS={'afterRendering':'afterRendering'};(function(){"use strict";sap.ushell.ui.launchpad.GroupHeaderActions.prototype.onAfterRendering=function(){this.fireAfterRendering();};sap.ushell.ui.launchpad.GroupHeaderActions.prototype._getActionOverflowControll=function(){var t=this;return[new sap.m.Button({icon:'sap-icon://overflow',type:'Transparent',press:function(e){var a=new sap.m.ActionSheet({placement:sap.m.PlacementType.Auto});t.getContent().forEach(function(b){var c=b.clone();c.setModel(b.getModel());c.setBindingContext(b.getBindingContext());a.addButton(c);});a.openBy(e.getSource());}}).addStyleClass('sapUshellHeaderActionButton')];};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.GroupHeaderActionsRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.GroupHeaderActionsRenderer");sap.ushell.ui.launchpad.GroupHeaderActionsRenderer={};sap.ushell.ui.launchpad.GroupHeaderActionsRenderer.render=function(r,c){var i=c.getIsOverflow(),a=c.getTileActionModeActive();r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");var C=c.getContent();if(a){if(i){jQuery.each(c._getActionOverflowControll(),function(){r.renderControl(this);});}else{jQuery.each(C,function(){r.renderControl(this);});}}r.write("</div>");};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.GroupListItem')){jQuery.sap.declare("sap.ushell.ui.launchpad.GroupListItem");jQuery.sap.require('sap.m.ListItemBase');sap.m.ListItemBase.extend("sap.ushell.ui.launchpad.GroupListItem",{metadata:{library:"sap.ushell",properties:{"title":{type:"string",group:"Misc",defaultValue:null},"defaultGroup":{type:"boolean",group:"Misc",defaultValue:false},"show":{type:"boolean",group:"Misc",defaultValue:true},"groupId":{type:"string",group:"Misc",defaultValue:null},"index":{type:"int",group:"Misc",defaultValue:null},"numberOfTiles":{type:"int",group:"Misc",defaultValue:0},"isGroupVisible":{type:"boolean",group:"Misc",defaultValue:true}},events:{"press":{},"afterRendering":{}}}});sap.ushell.ui.launchpad.GroupListItem.M_EVENTS={'press':'press','afterRendering':'afterRendering'};(function(){"use strict";jQuery.sap.require('sap.m.Input');sap.ushell.ui.launchpad.GroupListItem.prototype.exit=function(){sap.m.ListItemBase.prototype.exit.apply(this,arguments);};sap.ushell.ui.launchpad.GroupListItem.prototype.onAfterRendering=function(){this.fireAfterRendering();};sap.ushell.ui.launchpad.GroupListItem.prototype.groupHasVisibleTiles=function(){var g=this.getModel().getProperty("/groups/"+this.getIndex()+"/tiles");var a=this.getModel().getProperty("/groups/"+this.getIndex()+"/links");return sap.ushell.utils.groupHasVisibleTiles(g,a);};sap.ushell.ui.launchpad.GroupListItem.prototype.onclick=function(){this.firePress({id:this.getId()});};sap.ushell.ui.launchpad.GroupListItem.prototype.onsapenter=function(){this.firePress({id:this.getId(),action:"sapenter"});};sap.ushell.ui.launchpad.GroupListItem.prototype.setGroupId=function(g){this.setProperty("groupId",g,true);return this;};sap.ushell.ui.launchpad.GroupListItem.prototype.setTitle=function(t){this.setProperty("title",t);this.$().find(".sapMSLITitleOnly").text(t);return this;};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.GroupListItemRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.GroupListItemRenderer");jQuery.sap.require('sap.m.ListItemBaseRenderer');sap.ushell.ui.launchpad.GroupListItemRenderer=sap.ui.core.Renderer.extend(sap.m.ListItemBaseRenderer);var t=sap.ushell.resources.i18n;sap.ushell.ui.launchpad.GroupListItemRenderer.renderLIAttributes=function(r){r.addClass("sapUshellGroupLI");};sap.ushell.ui.launchpad.GroupListItemRenderer.renderLIContent=function(r,l){r.write("<div");r.addClass("sapMSLIDiv");r.addClass("sapMSLITitleDiv");r.writeClasses();if(!l.getVisible()){r.addStyle("display","none");r.writeStyles();}r.write(">");r.write("<div");r.addClass("sapMSLITitleOnly");r.writeClasses();r.writeAccessibilityState(l,{label:l.getTitle()+t.getText("GroupListItem_label")});r.write(">");r.writeEscaped(l.getTitle());r.write("</div>");r.write("</div>");};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.HeaderTileRenderer')){jQuery.sap.declare("sap.ushell.ui.launchpad.HeaderTileRenderer");sap.ushell.ui.launchpad.HeaderTileRenderer={};var translationBundle=sap.ushell.resources.i18n;sap.ushell.ui.launchpad.HeaderTileRenderer.render=function(r,c){r.write("<");r.write(c.getHeaderLevel().toLowerCase());r.writeControlData(c);r.addClass("sapUshellHeaderTile");r.addClass("sapUiStrongBackgroundTextColor");if(!c.getVisible()){r.addClass("sapUshellHidden");}r.writeClasses();r.writeAccessibilityState(c,{label:c.getHeaderText()+translationBundle.getText("HeaderCategory")});r.write(">");r.writeEscaped(c.getHeaderText());r.write("</");r.write(c.getHeaderLevel().toLowerCase());r.write(">");};};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.LinkTileWrapper')){jQuery.sap.declare("sap.ushell.ui.launchpad.LinkTileWrapper");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.ushell.ui.launchpad.LinkTileWrapper",{metadata:{library:"sap.ushell",properties:{"uuid":{type:"string",group:"Misc",defaultValue:null},"tileCatalogId":{type:"string",group:"Misc",defaultValue:null},"target":{type:"string",group:"Misc",defaultValue:null},"visible":{type:"boolean",group:"Misc",defaultValue:true},"debugInfo":{type:"string",group:"Misc",defaultValue:null},"animationRendered":{type:"boolean",group:"Misc",defaultValue:false},"isLocked":{type:"boolean",group:"Misc",defaultValue:false},"ieHtml5DnD":{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{"tileViews":{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},"footItems":{type:"sap.ui.core.Control",multiple:true,singularName:"footItem"}},events:{"press":{},"coverDivPress":{},"afterRendering":{},"showActions":{}}}});sap.ushell.ui.launchpad.LinkTileWrapper.M_EVENTS={'press':'press','coverDivPress':'coverDivPress','afterRendering':'afterRendering','showActions':'showActions'};(function(){"use strict";sap.ushell.ui.launchpad.LinkTileWrapper.prototype.ontap=function(e,u){jQuery.sap.log.info("Tile clicked:",this.getDebugInfo(),"sap.ushell.ui.launchpad.LinkTileWrapper");return;};sap.ushell.ui.launchpad.LinkTileWrapper.prototype.destroy=function(s){this.destroyTileViews();sap.ui.core.Control.prototype.destroy.call(this,s);};sap.ushell.ui.launchpad.LinkTileWrapper.prototype.addTileView=function(o,s){o.setParent(null);sap.ui.base.ManagedObject.prototype.addAggregation.call(this,"tileViews",o,s);};sap.ushell.ui.launchpad.LinkTileWrapper.prototype.destroyTileViews=function(){if(this.mAggregations["tileViews"]){this.mAggregations["tileViews"].length=0;}};sap.ushell.ui.launchpad.LinkTileWrapper.prototype.onAfterRendering=function(){this.fireAfterRendering();};sap.ushell.ui.launchpad.LinkTileWrapper.prototype._launchTileViaKeyboard=function(e){if(e.target.tagName!=="BUTTON"){var t=this.getTileViews()[0],p=false;if(t.firePress){var c=document.createEvent('MouseEvents');c.initEvent('click',false,true);t.getDomRef().dispatchEvent(c);}else{while(t.getContent&&!p){t=t.getContent()[0];if(t.firePress){t.firePress({id:this.getId()});p=true;}}}}};sap.ushell.ui.launchpad.LinkTileWrapper.prototype.onsapenter=function(e){this._launchTileViaKeyboard(e);};sap.ushell.ui.launchpad.LinkTileWrapper.prototype.onsapspace=function(e){this._launchTileViaKeyboard(e);};sap.ushell.ui.launchpad.LinkTileWrapper.prototype.onclick=function(){var c=this.getTileViews()[0],C=c.getHref();sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileLinkClick",{targetHash:C});};sap.ushell.ui.launchpad.LinkTileWrapper.prototype.setVisible=function(v){this.setProperty("visible",v,true);return this.toggleStyleClass("sapUshellHidden",!v);};sap.ushell.ui.launchpad.LinkTileWrapper.prototype.setAnimationRendered=function(v){this.setProperty('animationRendered',v,true);};sap.ushell.ui.launchpad.LinkTileWrapper.prototype._handleTileShadow=function(j,a){if(j.length){j.unbind('mouseenter mouseleave');var u,t=j.css("border").split("px")[0],m=this.getModel();if(t>0){u=j.css("border-color");}else{u=this.getRgba();}j.hover(function(){if(!m.getProperty('/tileActionModeActive')){var o=jQuery(j).css('box-shadow'),T=o?o.split(') ')[1]:null,U;if(T){U=T+" "+u;jQuery(this).css('box-shadow',U);}}},function(){jQuery(this).css('box-shadow','');});}};sap.ushell.ui.launchpad.LinkTileWrapper.prototype.setUuid=function(u){this.setProperty("uuid",u,true);return this;};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.LinkTileWrapperRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.LinkTileWrapperRenderer");sap.ushell.ui.launchpad.LinkTileWrapperRenderer={};sap.ushell.ui.launchpad.LinkTileWrapperRenderer.render=function(r,c){var t=null,m=c.getModel(),T;try{t=c.getTileViews()[0];}catch(e){jQuery.sap.log.warning("Failed to load tile view: ",e.message);t=new sap.m.Text({text:"Failed to load. "});}T=t&&t.getId()?t.getId():'';r.write("<div");if(m&&m.getProperty("/enableHelp")){r.writeAttribute("data-tileCatalogId",c.getTileCatalogId());}r.writeControlData(c);r.addClass("sapUshellLinkTile");if(!c.getVisible()){r.addClass("sapUshellHidden");}if(c.getIsLocked()){r.addClass("sapUshellLockedTile");}r.writeClasses();if(c.getIeHtml5DnD()){r.writeAttribute("draggable","true");}r.writeAttributeEscaped("tabindex","-1");var l=c.data('layoutPosition');if(l){var s='-webkit-transform:'+l.translate3D+';-ms-transform:'+l.translate2D+';transform:'+l.translate3D;r.writeAttribute("style",s);}r.writeAttributeEscaped("aria-flowto",T);r.write(">");r.addClass("sapUshellTileInner");if(this.renderTileView){this.renderTileView(r,t,c.getTarget());}r.write("</div>");};sap.ushell.ui.launchpad.LinkTileWrapperRenderer.renderTileView=function(r,t,T){if((T||"")!==""){r.write("<a");r.writeClasses();r.writeAttributeEscaped("href","#"+T);r.write(">");r.renderControl(t);r.write("</a>");}else{r.write("<div");r.writeClasses();r.writeAttribute("title",t.getText?t.getText():'');r.write(">");r.renderControl(t);r.write("</div>");}};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.LoadingDialog')){jQuery.sap.declare("sap.ushell.ui.launchpad.LoadingDialog");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.ushell.ui.launchpad.LoadingDialog",{metadata:{library:"sap.ushell",properties:{"iconUri":{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},"text":{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null}}}});(function(){"use strict";jQuery.sap.require('sap.ui.core.Icon');jQuery.sap.require('sap.ui.core.Popup');jQuery.sap.require('sap.m.Label');sap.ushell.ui.launchpad.LoadingDialog.prototype.init=function(){this._oPopup=new sap.ui.core.Popup();this._oPopup.setShadow(false);this._oPopup.setModal(true,"sapUshellLoadingDialog");this.oIcon=new sap.ui.core.Icon();this._oLabel=new sap.m.Label(this.getId()+'loadingLabel');};sap.ushell.ui.launchpad.LoadingDialog.prototype.exit=function(){this._oPopup.close();this._oPopup.destroy();this.oIcon.destroy();this._oLabel.destroy();};sap.ushell.ui.launchpad.LoadingDialog.prototype.isOpen=function(){return this._oPopup.isOpen();};sap.ushell.ui.launchpad.LoadingDialog.prototype.openLoadingScreen=function(){if(!this.getVisible()){this.setProperty('visible',true,true);this.$().show();}if(!this.isOpen()){this._oPopup.setContent(this);this._oPopup.setPosition("center center","center center",document,"0 0","fit");this._oPopup.open();}};sap.ushell.ui.launchpad.LoadingDialog.prototype.showAppInfo=function(a,i){this.setProperty('text',a,true);this.setProperty('iconUri',i,true);this.oIcon.setSrc(i);this._oLabel.setText(a);};sap.ushell.ui.launchpad.LoadingDialog.prototype.closeLoadingScreen=function(){if(this.getVisible()){this.setProperty('visible',false,true);this.$().hide();this._oPopup.close();}};sap.ushell.ui.launchpad.LoadingDialog.prototype.onAfterRendering=function(){this.$().css("width","20rem");};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.LoadingDialogRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.LoadingDialogRenderer");sap.ushell.ui.launchpad.LoadingDialogRenderer={};sap.ushell.ui.launchpad.LoadingDialogRenderer.render=function(r,c){var t=c.getTooltip_AsString();c._oLabel.addStyleClass("sapUshellLoadingDialogLabel");r.write("<div");r.writeControlData(c);r.addClass("sapUshellLoadingDialogControl");r.writeClasses();if(t){r.writeAttributeEscaped("title",t);}r.write(">");if(jQuery.os.ios||!c._isPlatformDependent){this.renderAppInfo(r,c);this.renderFioriFlower(r,c);}else{this.renderFioriFlower(r,c);this.renderAppInfo(r,c);}r.write("</div>");};sap.ushell.ui.launchpad.LoadingDialogRenderer.renderAppInfo=function(r,c){r.write("<div").addClass("sapUshellLoadingDialogAppData").writeClasses().write(">");if(c.getIconUri()){r.renderControl(c.oIcon);}r.renderControl(c._oLabel);r.write("</div>");};sap.ushell.ui.launchpad.LoadingDialogRenderer.renderFioriFlower=function(r,c){var i,R=false,u=[/Android\s4\.2.+GT-I9505.+Chrome\/18/];if(navigator.userAgent){for(i=0;i<u.length;i=i+1){if(u[i].test(navigator.userAgent)){R=true;break;}}}if(jQuery.support.cssAnimations&&!R){r.write("<div id='fiori2-loader'>");r.write("<div class='fiori2-blossom'>");for(i=1;i<6;i=i+1){r.write("<div class='fiori2-leafContainer fiori2-leafContainer"+i+"'>");r.write("<div class='fiori2-leaf fiori2-leaf"+i+"'></div>");r.write("</div>");}r.write("</div>");r.write("</div>");}};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.Panel')){jQuery.sap.declare("sap.ushell.ui.launchpad.Panel");jQuery.sap.require('sap.m.Panel');sap.m.Panel.extend("sap.ushell.ui.launchpad.Panel",{metadata:{library:"sap.ushell",properties:{"translucent":{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{"headerContent":{type:"sap.ui.core.Control",multiple:true,singularName:"headerContent"},"headerBar":{type:"sap.m.Bar",multiple:false}}}});sap.ushell.ui.launchpad.Panel.prototype.updateAggregation=sap.ushell.override.updateAggregation;};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.PanelRenderer')){jQuery.sap.declare("sap.ushell.ui.launchpad.PanelRenderer");sap.ushell.ui.launchpad.PanelRenderer={};sap.ushell.ui.launchpad.PanelRenderer.render=function(r,c){if(!c.getVisible()){return;}r.write("<section");r.writeControlData(c);r.addClass("sapMPanel");r.addClass("sapUshellPanel");if(!c.getTranslucent()){r.addClass("sapMPanelBG");}r.addStyle("width",c.getWidth());r.addStyle("height",c.getHeight());r.writeClasses();r.writeStyles();r.write(">");var h=c.getHeaderContent();var l=h.length;if(c.getHeaderText()||l>0||c.getHeaderBar()){r.write("<header");r.addClass("sapMPanelHdr");r.addClass("sapUshellCatalogHeader");r.writeClasses();r.write(">");if(c.getHeaderText()||l>0){r.write("<");r.write(c.getHeaderLevel().toLowerCase());r.write(">");if(c.getHeaderText()){r.writeEscaped(c.getHeaderText());}for(var j=0;j<l;j++){r.renderControl(h[j]);}r.write("</");r.write(c.getHeaderLevel().toLowerCase());r.write(">");}if(c.getHeaderBar()){r.renderControl(c.getHeaderBar());}r.write("</header>");}r.write("<div");r.addClass("sapMPanelContent");r.addClass("sapUshellPanelContent");r.writeClasses();r.write(">");var C=c.getContent();var L=C.length;for(var i=0;i<L;i++){r.renderControl(C[i]);}r.write("</div>");r.write("</section>");};};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.PlusTileRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.PlusTileRenderer");sap.ushell.ui.launchpad.PlusTileRenderer={};var t=sap.ushell.resources.i18n;sap.ushell.ui.launchpad.PlusTileRenderer.render=function(r,c){r.write("<div");r.writeAttribute("tabindex","-1");r.writeControlData(c);r.addClass("sapUshellTile");r.addClass("sapUshellPlusTile");r.writeClasses();r.writeAccessibilityState(c,{label:t.getText("TilePlus_label")});r.write(">");r.renderControl(c.oIcon);r.write("</div>");};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.SearchSuggestionList')){jQuery.sap.declare("sap.ushell.ui.launchpad.SearchSuggestionList");jQuery.sap.require('sap.m.List');sap.m.List.extend("sap.ushell.ui.launchpad.SearchSuggestionList",{metadata:{library:"sap.ushell",properties:{"disableKeyboardNavigation":{type:"boolean",group:"Misc",defaultValue:false}},events:{"pressEsc":{},"pressUpFirstItem":{}}}});sap.ushell.ui.launchpad.SearchSuggestionList.M_EVENTS={'pressEsc':'pressEsc','pressUpFirstItem':'pressUpFirstItem'};(function(){"use strict";jQuery.sap.require('sap.ui.core.delegate.ItemNavigation');sap.ushell.ui.launchpad.SearchSuggestionList.prototype.init=function(e){sap.m.List.prototype.init.call(this,e);this.setShowNoData(false);this.setShowSeparators(sap.m.ListSeparators.Inner);this.oItemNavigation=new sap.ui.core.delegate.ItemNavigation();this.oItemNavigation.attachEvent("AfterFocus",this._afterFocus);};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.exit=function(e){this.oItemNavigation.detachEvent("AfterFocus",this._afterFocus);this.oItemNavigation.destroy();};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.updateAggregation=sap.ushell.override.updateAggregation;sap.ushell.ui.launchpad.SearchSuggestionList.prototype.addItem=function(i){if(i instanceof sap.ushell.ui.launchpad.SearchSuggestionListItem){i.attachFocus(this._focusItem,this);}return sap.m.List.prototype.addItem.call(this,i);};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.removeItem=function(i){if(i instanceof sap.ushell.ui.launchpad.SearchSuggestionListItem){i.detachFocus(this._focusItem,this);}return sap.m.List.prototype.removeItem.call(this,i);};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.setDisableKeyboardNavigation=function(d){if(d){this.removeDelegate(this.oItemNavigation);}else{this.addDelegate(this.oItemNavigation);}this.setProperty("disableKeyboardNavigation",d);return this;};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.onsapright=function(){var s=this.oItemNavigation;s.setFocusedIndex(s.getItemDomRefs().lastIndexOf(s.getFocusedDomRef()));};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.onsapup=function(e){if(e.srcControl===this.getItems()[0]){this.removeDelegate(this.oItemNavigation);this.firePressUpFirstItem();}};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.onsapescape=function(){this.removeDelegate(this.oItemNavigation);this.firePressEsc();};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.onAfterRendering=function(){var f=this.getDomRef(),d=f.getElementsByTagName("li"),I=[],m=0;jQuery.each(d,function(i,v){var c=v.getElementsByClassName("sapUshellSearchSuggestionListItemNavItem").length;if(c>m){m=c;}});jQuery.each(d,function(i,v){var l=v.getElementsByClassName("sapUshellSearchSuggestionListItemNavItem"),j=0;if(l.length>0){for(j;j<m;j=j+1){I.push(l[j]||I[I.length-1]);}}});this.oItemNavigation.setRootDomRef(f).setItemDomRefs(I).setCycling(true).setColumns(m).setSelectedIndex(0);};sap.ushell.ui.launchpad.SearchSuggestionList.prototype._afterFocus=function(e){this.setFocusedIndex(this.getItemDomRefs().indexOf(this.getFocusedDomRef()));};sap.ushell.ui.launchpad.SearchSuggestionList.prototype._focusItem=function(){this.addDelegate(this.oItemNavigation);};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.SearchSuggestionListItem')){jQuery.sap.declare("sap.ushell.ui.launchpad.SearchSuggestionListItem");jQuery.sap.require('sap.m.ListItemBase');sap.m.ListItemBase.extend("sap.ushell.ui.launchpad.SearchSuggestionListItem",{metadata:{library:"sap.ushell",properties:{"text":{type:"string",group:"Misc",defaultValue:null},"isGroupFooter":{type:"boolean",group:"Misc",defaultValue:false},"categorySeperator":{type:"string",group:"Misc",defaultValue:'/'},"categoryFirstSeperator":{type:"string",group:"Misc",defaultValue:''},"icon":{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},"maxCategories":{type:"int",group:"Misc",defaultValue:2},"isGroupHeader":{type:"boolean",group:"Misc",defaultValue:null}},aggregations:{"categories":{type:"sap.ui.core.Control",multiple:true,singularName:"category"}},events:{"press":{},"focus":{}}}});sap.ushell.ui.launchpad.SearchSuggestionListItem.M_EVENTS={'press':'press','focus':'focus'};(function(){"use strict";sap.ushell.ui.launchpad.SearchSuggestionListItem.prototype.addCategory=function(c){this.addAggregation("categories",c);c.addEventDelegate({onmouseover:this._focusCategory},this);c.addEventDelegate({onsapenter:this.onsapenter},c);return this;};sap.ushell.ui.launchpad.SearchSuggestionListItem.prototype.setActive=function(e){return this;};sap.ushell.ui.launchpad.SearchSuggestionListItem.prototype.updateAggregation=sap.ushell.override.updateAggregation;sap.ushell.ui.launchpad.SearchSuggestionListItem.prototype.firePress=function(e){if(!this.getIsGroupFooter()){sap.m.ListItemBase.prototype.firePress.call(this);}};sap.ushell.ui.launchpad.SearchSuggestionListItem.prototype.onmouseover=function(e){if(jQuery(e.target).hasClass('sapUshellSearchSuggestionListItemNavItem')){this.focus();this.fireFocus();}};sap.ushell.ui.launchpad.SearchSuggestionListItem.prototype.onsapenter=function(){this.firePress();};sap.ushell.ui.launchpad.SearchSuggestionListItem.prototype.getFocusDomRef=function(){return(this.getDomRef()&&this.getDomRef().getElementsByClassName("sapUshellSearchSuggestionListItemNavItem")[0])||null;};sap.ushell.ui.launchpad.SearchSuggestionListItem.prototype._focusCategory=function(e){e.srcControl.focus();e.preventDefault();e.stopPropagation();this.fireFocus();};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ListItemBaseRenderer');sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer=sap.ui.core.Renderer.extend(sap.m.ListItemBaseRenderer);sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLIAttributes=function(r,l){r.addClass("sapUshellSearchSuggestionListItem");if(l.getIsGroupFooter()){r.addClass("sapUshellSearchSuggestionListItemGroupFooter");}if(l.getIsGroupHeader()){r.addClass("sapMGHLI sapMGHLIUpperCase sapMLIBTypeInactive sapMListHdr");}};sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLIContent=function(r,l){var c=l.getCategories();if(l.getIsGroupHeader()){this.renderLIGroupHeader(r,l);}else if(l.getIsGroupFooter()){this.renderLIGroupFooter(r,l);}else if(l.getText()){if(l.getIcon()){this.renderLIIcon(r,l);}this.renderLIText(r,l);}if(c.length>0){this.renderLICategories(r,l,c);}};sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLIIcon=function(r,l){r.write("<div");r.addClass("sapUshellSearchSuggestionListItemIcon");r.writeClasses();r.write(">");r.renderControl(new sap.ui.core.Icon({src:l.getIcon()}));r.write('</div>');};sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLIGroupHeader=function(r,l){r.write("<label");r.addClass("sapMGHLITitle");r.writeClasses();r.write(">");r.writeEscaped(l.getText());r.write('</label>');};sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLIGroupFooter=function(r,l){r.write("<span>");r.writeEscaped(l.getText());r.write('</span>');};sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLIText=function(r,l){r.write("<div");r.addClass("sapUshellSearchSuggestionListItemText");r.writeClasses();r.write(">");r.write("<a");r.addClass("sapUshellSearchSuggestionListItemNavItem");r.writeClasses();r.write("style='display: inline-block;' tabindex='0'>");r.write(l.getText());r.write('</a>');r.write('</div>');};sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLICategories=function(r,l,c){var m=l.getMaxCategories(),C=c.length<m?c.length:m,i;r.write("<div");r.addClass("sapUshellSearchSuggestionListItemCategory");r.writeClasses();r.write(">");this.renderLICategoryFirstSeperator(r,l);for(i=0;i<C;i=i+1){r.renderControl(c[i].addStyleClass("sapUshellSearchSuggestionListItemNavItem"));if((i+1)<C){this.renderLICategorySeperator(r,l);}}r.write('</div>');};sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLICategoryFirstSeperator=function(r,l){r.write("<div");r.addClass("sapUshellSearchSuggestionListItemCategoryFirstSeperator");r.writeClasses();r.write(">");r.writeEscaped(l.getCategoryFirstSeperator());r.write('</div>');};sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLICategorySeperator=function(r,l){r.write("<div");r.addClass("sapUshellSearchSuggestionListItemCategorySeperator");r.writeClasses();r.write(">");r.writeEscaped(l.getCategorySeperator());r.write('</div>');};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.SearchSuggestionListRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.SearchSuggestionListRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ListRenderer');sap.ushell.ui.launchpad.SearchSuggestionListRenderer=sap.ui.core.Renderer.extend(sap.m.ListRenderer);sap.ushell.ui.launchpad.SearchSuggestionListRenderer.renderContainerAttributes=function(r,c){r.addClass("sapUshellSearchSuggestionList");};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.Tile')){jQuery.sap.declare("sap.ushell.ui.launchpad.Tile");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.ushell.ui.launchpad.Tile",{metadata:{library:"sap.ushell",properties:{"tall":{type:"boolean",group:"Misc",defaultValue:false},"long":{type:"boolean",group:"Misc",defaultValue:false},"uuid":{type:"string",group:"Misc",defaultValue:null},"tileCatalogId":{type:"string",group:"Misc",defaultValue:null},"target":{type:"string",group:"Misc",defaultValue:null},"visible":{type:"boolean",group:"Misc",defaultValue:true},"debugInfo":{type:"string",group:"Misc",defaultValue:null},"rgba":{type:"string",group:"Misc",defaultValue:null},"animationRendered":{type:"boolean",group:"Misc",defaultValue:false},"isLocked":{type:"boolean",group:"Misc",defaultValue:false},"showActionsIcon":{type:"boolean",group:"Misc",defaultValue:false},"tileActionModeActive":{type:"boolean",group:"Misc",defaultValue:false},"ieHtml5DnD":{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{"tileViews":{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},"footItems":{type:"sap.ui.core.Control",multiple:true,singularName:"footItem"}},events:{"press":{},"coverDivPress":{},"afterRendering":{},"showActions":{},"deletePress":{}}}});sap.ushell.ui.launchpad.Tile.M_EVENTS={'press':'press','coverDivPress':'coverDivPress','afterRendering':'afterRendering','showActions':'showActions','deletePress':'deletePress'};(function(){"use strict";sap.ushell.ui.launchpad.Tile.prototype.ontap=function(e,u){jQuery.sap.log.info("Tile clicked:",this.getDebugInfo(),"sap.ushell.ui.launchpad.Tile");this.firePress();return;};sap.ushell.ui.launchpad.Tile.prototype.destroy=function(s){this.destroyTileViews();sap.ui.core.Control.prototype.destroy.call(this,s);};sap.ushell.ui.launchpad.Tile.prototype.addTileView=function(o,s){o.setParent(null);sap.ui.base.ManagedObject.prototype.addAggregation.call(this,"tileViews",o,s);};sap.ushell.ui.launchpad.Tile.prototype.destroyTileViews=function(){if(this.mAggregations["tileViews"]){this.mAggregations["tileViews"].length=0;}};sap.ushell.ui.launchpad.Tile.prototype.onAfterRendering=function(){var c=this.$().find("div.sapUshellTileActionLayerDiv"),r;if(this.getTileActionModeActive()){c.css("display","block");}else{c.css("display","none");}r=this.getRgba();if(r){this._redrawRGBA();}this.fireAfterRendering();};sap.ushell.ui.launchpad.Tile.prototype._launchTileViaKeyboard=function(e){if(this.getTileActionModeActive()){this.fireCoverDivPress({id:this.getId()});}else{if(e.target.tagName!=="BUTTON"){var t=this.getTileViews()[0],p=false;if(t.firePress){t.firePress({id:this.getId()});}else{while(t.getContent&&!p){t=t.getContent()[0];if(t.firePress){t.firePress({id:this.getId()});p=true;}}}}}};sap.ushell.ui.launchpad.Tile.prototype.onsapenter=function(e){this._launchTileViaKeyboard(e);};sap.ushell.ui.launchpad.Tile.prototype.onsapspace=function(e){this._launchTileViaKeyboard(e);};sap.ushell.ui.launchpad.Tile.prototype.onclick=function(e){if(this.getTileActionModeActive()){var s=e.originalEvent.srcElement;if(jQuery(s).hasClass('sapUshellTileDeleteClickArea')){this.fireDeletePress();}else{this.fireCoverDivPress({id:this.getId()});}}};sap.ushell.ui.launchpad.Tile.prototype._initDeleteAction=function(){var t=this;if(!this.deleteIcon){this.deleteIcon=new sap.ui.core.Icon({src:"sap-icon://decline",tooltip:sap.ushell.resources.i18n.getText("removeButtonTItle")});this.deleteIcon.addEventDelegate({onclick:function(e){t.fireDeletePress();e.stopPropagation();}});this.deleteIcon.addStyleClass("sapUshellTileDeleteIconInnerClass");}return this.deleteIcon;};sap.ushell.ui.launchpad.Tile.prototype.setShowActionsIcon=function(s){var t=this,i;if(s){i=new sap.ui.core.Icon({size:"1rem",src:"sap-icon://overflow",press:function(e){t.fireShowActions();t.addStyleClass('showTileActionsIcon');var E=sap.ui.getCore().getEventBus(),a=function(n,b,c){c.removeStyleClass('showTileActionsIcon');E.unsubscribe("dashboard","actionSheetClose",a);};E.subscribe("dashboard","actionSheetClose",a);}});i.addStyleClass("sapUshellTileActionsIconClass");this.actionIcon=i;}else if(this.actionIcon){this.actionIcon.destroy(true);}this.setProperty("showActionsIcon",s);};sap.ushell.ui.launchpad.Tile.prototype.setVisible=function(v){this.setProperty("visible",v,true);return this.toggleStyleClass("sapUshellHidden",!v);};sap.ushell.ui.launchpad.Tile.prototype.setRgba=function(v){this.setProperty("rgba",v,true);this._redrawRGBA(arguments);};sap.ushell.ui.launchpad.Tile.prototype.setAnimationRendered=function(v){this.setProperty('animationRendered',v,true);};sap.ushell.ui.launchpad.Tile.prototype._handleTileShadow=function(j,a){if(j.length){j.unbind('mouseenter mouseleave');var u,t=j.css("border").split("px")[0],m=this.getModel();if(t>0){u=j.css("border-color");}else{u=this.getRgba();}j.hover(function(){if(!m.getProperty('/tileActionModeActive')){var o=jQuery(j).css('box-shadow'),T=o?o.split(') ')[1]:null,U;if(T){U=T+" "+u;jQuery(this).css('box-shadow',U);}}},function(){jQuery(this).css('box-shadow','');});}};sap.ushell.ui.launchpad.Tile.prototype._redrawRGBA=function(a){var r=this.getRgba(),j,i;if(r){j=jQuery.sap.byId(this.getId());i=(jQuery.browser.msie&&(parseInt(jQuery.browser.version,9)===9));if(!j){return;}if(!this.getModel().getProperty('/animationRendered')){if(i){j.animate({backgroundColor:r},2000);}else{j.css('transition','background-color 2s');j.css('background-color',r);}}else{j.css('background-color',r);}this._handleTileShadow(j,a);}};sap.ushell.ui.launchpad.Tile.prototype.setLong=function(l){this.setProperty("long",l,true);return this.toggleStyleClass("sapUshellLong",l);};sap.ushell.ui.launchpad.Tile.prototype.setTall=function(t){this.setProperty("tall",t,true);return this.toggleStyleClass("sapUshellTall",t);};sap.ushell.ui.launchpad.Tile.prototype.setUuid=function(u){this.setProperty("uuid",u,true);return this;};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.TileContainer')){jQuery.sap.declare("sap.ushell.ui.launchpad.TileContainer");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.ushell.ui.launchpad.TileContainer",{metadata:{library:"sap.ushell",properties:{"scrollType":{type:"string",group:"Misc",defaultValue:'item'},"animationSpeed":{type:"int",group:"Misc",defaultValue:500},"groupId":{type:"string",group:"Misc",defaultValue:null},"showHeader":{type:"boolean",group:"Misc",defaultValue:true},"showPlaceholder":{type:"boolean",group:"Misc",defaultValue:true},"defaultGroup":{type:"boolean",group:"Misc",defaultValue:false},"isLastGroup":{type:"boolean",group:"Misc",defaultValue:false},"headerText":{type:"string",group:"Misc",defaultValue:null},"headerLevel":{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:sap.m.HeaderLevel.H2},"groupHeaderLevel":{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:sap.m.HeaderLevel.H4},"showGroupHeader":{type:"boolean",group:"Misc",defaultValue:true},"visible":{type:"boolean",group:"Misc",defaultValue:true},"sortable":{type:"boolean",group:"Misc",defaultValue:true},"showNoData":{type:"boolean",group:"Misc",defaultValue:false},"noDataText":{type:"string",group:"Misc",defaultValue:null},"isGroupLocked":{type:"boolean",group:"Misc",defaultValue:null},"editMode":{type:"boolean",group:"Misc",defaultValue:false},"showBackground":{type:"boolean",group:"Misc",defaultValue:false},"icon":{type:"string",group:"Misc",defaultValue:'sap-icon://locked'},"showIcon":{type:"boolean",group:"Misc",defaultValue:false},"deluminate":{type:"boolean",group:"Misc",defaultValue:false},"showMobileActions":{type:"boolean",group:"Misc",defaultValue:false},"enableHelp":{type:"boolean",group:"Misc",defaultValue:false},"tileActionModeActive":{type:"boolean",group:"Misc",defaultValue:false},"ieHtml5DnD":{type:"boolean",group:"Misc",defaultValue:false},"showDragIndicator":{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{"tiles":{type:"sap.ushell.ui.launchpad.Tile",multiple:true,singularName:"tile"},"links":{type:"sap.ushell.ui.launchpad.LinkTileWrapper",multiple:true,singularName:"link"},"beforeContent":{type:"sap.ui.core.Control",multiple:true,singularName:"beforeContent"},"afterContent":{type:"sap.ui.core.Control",multiple:true,singularName:"afterContent"},"footerContent":{type:"sap.ui.core.Control",multiple:true,singularName:"footerContent"},"headerActions":{type:"sap.ui.core.Control",multiple:true,singularName:"headerAction"}},events:{"afterRendering":{},"add":{},"titleChange":{}}}});sap.ushell.ui.launchpad.TileContainer.M_EVENTS={'afterRendering':'afterRendering','add':'add','titleChange':'titleChange'};(function(){"use strict";sap.ushell.ui.launchpad.TileContainer.prototype.init=function(){jQuery.sap.require("sap.ushell.ui.launchpad.PlusTile");this._sDefaultValue=sap.ushell.resources.i18n.getText("new_group_name");this._sOldTitle="";this.oIcon=new sap.ui.core.Icon({src:this.getIcon()});this.oIcon.addStyleClass('sapUshellContainerIcon');this.oPlusTile=new sap.ushell.ui.launchpad.PlusTile({groupId:this.getGroupId(),press:[this.fireAdd,this]});this.oPlusTile.setParent(this);};sap.ushell.ui.launchpad.TileContainer.prototype.exit=function(){if(this.oPlusTile){this.oPlusTile.destroy();}};sap.ushell.ui.launchpad.TileContainer.prototype.onAfterRendering=function(){var t=this,j;if(this.getEnableHelp()){this.oPlusTile.addStyleClass("help-id-plusTile");}this.handleNoItemsToDisplayMessage();var E=this.getModel()&&this.getModel().getProperty("/enableRenameLockedGroup")||false;jQuery("#"+this.getId()+"-title").find(this.getHeaderLevel()).click(function(){var e=E||!t.getIsGroupLocked()&&!t.getDefaultGroup()&&t.getTileActionModeActive();t.setEditMode(e);});if((document.documentMode)&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints)){j=jQuery(this.getDomRef());j.on("MSHoldVisual contextmenu",".sapUshellTile",function(e){e.preventDefault();});}this.fireAfterRendering();};sap.ushell.ui.launchpad.TileContainer.prototype.updateAggregation=sap.ushell.override.updateAggregation;sap.ushell.ui.launchpad.TileContainer.prototype.updateTiles=function(r){var n="tiles";if(this.isTreeBinding(n)){sap.ui.base.ManagedObject.prototype.updateAggregation.apply(this,arguments);}else{jQuery.sap.log.debug("Updating TileContainer. Reason: ",r);switch(r){case"filter":try{this.filterTiles();}catch(e){this.updateAggregation(n);}break;default:this.updateAggregation(n);}}};sap.ushell.ui.launchpad.TileContainer.prototype.handleNoItemsToDisplayMessage=function(){var t=this.getBinding('tiles'),i=t&&t.getContexts().length;if(i){this.$().find(".sapUshellNoFilteredItems").hide();}else{if(this.getShowNoData()){if(this.getNoDataText()){this.setNoDataText(this.getNoDataText());}else{this.setNoDataText(sap.ushell.resources.i18n.getText("noFilteredItems"));}this.$().find(".sapUshellNoFilteredItems").show();}}};sap.ushell.ui.launchpad.TileContainer.prototype.createMissingElementsInOnScreenElements=function(i,e,a,g,s,b,f,A){var p,n=null,G=null,j=a,S=this.getShowGroupHeader(),c=e.length,o;for(j=a;j<c;j++){p=e[j].getPath();if(!i.onScreenPathIndexMap[p]){if(g&&s.length>0){n=s[0].fnGroup(e[j]);if(typeof n==="string"){n={key:n};}if(G===null&&j>0){G=s[0].fnGroup(e[j-1]);}if(n.key!==G){if(b.groupHeaderFactory){o=b.groupHeaderFactory(n);}if(!i.onScreenHeaders[n.key]){A(n,o);i.onScreenHeaders[n.key]={aItemsRefrenceIndex:this.getTiles().length-1,isVisible:S};}G=n.key;}}f(e[j]);i.onScreenPathIndexMap[p]={aItemsRefrenceIndex:this.getTiles().length-1,isVisible:true};}else{throw true;}}};sap.ushell.ui.launchpad.TileContainer.prototype.addNewItem=function(e){var n="tiles",a=this.getMetadata().getJSONKeys()[n],b=this.mBindingInfos[n],f=b.factory,c=jQuery.proxy(function(C){var i=this.getId()+"-"+jQuery.sap.uid(),o=f(i,C);o.setBindingContext(C,b.model);this[a._sMutator](o);},this);c(e);};sap.ushell.ui.launchpad.TileContainer.prototype.markVisibleOnScreenElements=function(e,i){var a=0,p,b=e.length;for(a=0;a<b;a++){p=e[a].getPath();if(i.onScreenPathIndexMap[p]){i.onScreenPathIndexMap[p].isVisible=true;}else{return a;}}return a;};sap.ushell.ui.launchpad.TileContainer.prototype.indexOnScreenElements=function(o){var p,i,a={onScreenHeaders:{},onScreenPathIndexMap:{}},b=o.length,c;for(i=0;i<b;i++){c=o[i];if(c.getHeaderText){a.onScreenHeaders[c.getHeaderText()]={aItemsRefrenceIndex:i,isVisible:false};}else if(c.getBindingContext()){p=c.getBindingContext().getPath();a.onScreenPathIndexMap[p]={aItemsRefrenceIndex:i,isVisible:false};}}return a;};sap.ushell.ui.launchpad.TileContainer.prototype.showHideTilesAndHeaders=function(i,o){var s,n="tiles",S=this.getShowGroupHeader(),b=this.mBindingInfos[n].binding,g,r,e;for(s in i.onScreenPathIndexMap){if(i.onScreenPathIndexMap.hasOwnProperty(s)){e=i.onScreenPathIndexMap[s];r=o[e.aItemsRefrenceIndex];r.setVisible(e.isVisible);if(e.isVisible){g=b.aSorters[0].fnGroup(r.getBindingContext());i.onScreenHeaders[g].isVisible=S;}}}for(s in i.onScreenHeaders){if(i.onScreenHeaders.hasOwnProperty(s)){e=i.onScreenHeaders[s];o[e.aItemsRefrenceIndex].setVisible(e.isVisible);}}};sap.ushell.ui.launchpad.TileContainer.prototype.filterTiles=function(){var n="tiles",b=this.mBindingInfos[n],B=this.mBindingInfos[n].binding,a=B.getContexts(),i=this.getTiles(),c,d,l,f,s,e,g,h;d=this.indexOnScreenElements(i);c=this.markVisibleOnScreenElements(a,d);if(a[c]&&this.getTiles().length>0){l=this.getTiles()[this.getTiles().length-1].getBindingContext().getPath();f=a[c].getPath();s=l.split('/');e=f.split('/');h=s[s.length-1];g=e[e.length-1];if(parseInt(h,10)>parseInt(g,10)){throw true;}}this.createMissingElementsInOnScreenElements(d,a,c,B.isGrouped(),B.aSorters,b,this.addNewItem.bind(this),this.addTileGroup.bind(this));i=this.getTiles();this.showHideTilesAndHeaders(d,i);this.handleNoItemsToDisplayMessage();};sap.ushell.ui.launchpad.TileContainer.prototype.addTileGroup=function(g,h){this.addAggregation("tiles",h||new sap.ushell.ui.launchpad.HeaderTile({headerText:g.text||g.key,headerLevel:g.headerLevel||this.getGroupHeaderLevel(),visible:this.getShowGroupHeader()}).addStyleClass("sapUshellTileContainerHdr"));};sap.ushell.ui.launchpad.TileContainer.prototype.setNoDataText=function(n){this.setProperty("noDataText",n,true);if(this.getShowNoData()){this.$().find(".sapUshellNoFilteredItems").text(n);}return this;};sap.ushell.ui.launchpad.TileContainer.prototype.setGroupId=function(v){this.setProperty("groupId",v,true);if(this.oPlusTile){this.oPlusTile.setGroupId(v);}return this;};sap.ushell.ui.launchpad.TileContainer.prototype.setHeaderText=function(h){this.setProperty("headerText",h,true);this.$().find(".sapUshellContainerTitle").text(h);return this;};sap.ushell.ui.launchpad.TileContainer.prototype.setVisible=function(v){this.setProperty("visible",v,true);this.toggleStyleClass("sapUshellHidden",!v);return this;};sap.ushell.ui.launchpad.TileContainer.prototype.setShowMobileActions=function(s){var S=true;if(this.oHeaderButton){this.oHeaderButton.setVisible(s);}else if(s){S=false;}this.setProperty('showMobileActions',s,S);};sap.ushell.ui.launchpad.TileContainer.prototype.setShowIcon=function(s){this.setProperty('showIcon',s,true);jQuery('#'+this.getId()).find('.'+'sapUshellContainerIcon').toggleClass('sapUshellContainerIconHidden',!s);};sap.ushell.ui.launchpad.TileContainer.prototype.setDeluminate=function(d){this.setProperty('deluminate',d,true);this.toggleStyleClass('sapUshellDisableLockedGroupDuringDrag',d);return this;};sap.ushell.ui.launchpad.TileContainer.prototype.groupHasVisibleTiles=function(){var p='',t=this.getTiles(),l=this.getLinks();if(this.getBindingContext()){p=this.getBindingContext().sPath;t=this.getModel().getProperty(p).tiles;l=this.getModel().getProperty(p).links;}return sap.ushell.utils.groupHasVisibleTiles(t,l);};sap.ushell.ui.launchpad.TileContainer.prototype.getInnerContainerDomRef=function(){var c=this.getDomRef(),i;if(!c){return null;}i=jQuery(c).find('.sapUshellTilesContainer-sortable');return i[0];};sap.ushell.ui.launchpad.TileContainer.prototype.setEditMode=function(v){this.setProperty('editMode',v,false);if(v){this.addStyleClass('sapUshellEditing');this._startEdit();}else{this.removeStyleClass('sapUshellEditing');}};sap.ushell.ui.launchpad.TileContainer.prototype._startEdit=function(){if(this.getModel()&&!this.getModel().getProperty("/editTitle")){this.getModel().setProperty("/editTitle",true,false);}if(!this.oEditInputField){jQuery.sap.require("sap.m.Input");var t=this;this.oEditInputField=new sap.m.Input({placeholder:this._sDefaultValue,value:this.getHeaderText()}).addStyleClass('sapUshellTileContainerTitleInput');this.oEditInputField.addEventDelegate({onfocusout:function(e){t._stopEdit();jQuery.proxy(t.setEditMode,t,false)();},onsapenter:function(e){t._stopEdit();jQuery.proxy(t.setEditMode,t,false)();setTimeout(function(){sap.ushell.renderers.fiori2.AccessKeysHandler.setTabIndexOnTileContainerHeader(jQuery(t.getDomRef()));var T=e.srcControl,j=jQuery(T.getDomRef()).prev();j.focus();},0);}});}this._sOldTitle=this._sDefaultValue;this.oEditInputField.setValue(this.getHeaderText());var t=this;setTimeout(function(){if(sap.ui.Device.system.phone){var e=sap.ui.getCore().getEventBus();e.publish("launchpad","scrollToGroup",{group:t,groupChanged:false,focus:false});}jQuery(t.oEditInputField.getDomRef()).find('input').focus();t.oEditInputField.selectText(0,t.oEditInputField.getValue().length);},100);};sap.ushell.ui.launchpad.TileContainer.prototype._stopEdit=function(){var c=this.getHeaderText();var n=this.oEditInputField.getValue(),h;n=n.trim()||this._sDefaultValue;h=n!==c;if(this.getModel()&&this.getModel().getProperty("/editTitle")){this.getModel().setProperty("/editTitle",false,false);}if(!this._sOldTitle){this._sOldTitle=c;this.setHeaderText(c);}else if(h){this.fireTitleChange({newTitle:n});this.setHeaderText(n);}};sap.ushell.ui.launchpad.TileContainer.prototype.exit=function(){if(this.oHeaderButton){this.oHeaderButton.destroy();}if(this.oActionSheet){this.oActionSheet.destroy();}if(sap.ui.core.Control.prototype.exit){sap.ui.core.Control.prototype.exit.apply(this,arguments);}};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.TileContainerRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.TileContainerRenderer");sap.ushell.ui.launchpad.TileContainerRenderer={};sap.ushell.ui.launchpad.TileContainerRenderer.render=function(r,c){var t=c.getTiles(),h=c.getHeaderActions(),b=c.getBeforeContent(),a=c.getAfterContent(),f=c.getFooterContent()||[],v=false,d,l=c.getLinks();r.write("<div");r.writeControlData(c);r.addClass("sapUshellTileContainer");r.writeClasses();r.writeAccessibilityState(undefined,{role:"list"});r.write(">");if(b.length){r.write("<div");r.addClass("sapUshellTileContainerBeforeContent");r.writeClasses();r.write(">");jQuery.each(b,function(){r.renderControl(this);});r.write("</div>");}r.write("<div");r.addClass("sapUshellTileContainerContent");if(c.getIsGroupLocked()){r.addClass("sapUshellTileContainerLocked");}if(c.getDefaultGroup()){r.addClass("sapUshellTileContainerDefault");}if(c.getShowBackground()){r.addClass("sapUshellTileContainerEditMode");}r.writeClasses();r.writeAttribute("tabindex","-1");r.write(">");if(c.getShowDragIndicator()){r.write("<div");r.addClass("sapUshellCircleBase");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapUshellCircle");r.writeClasses();r.write(">");r.write("</div>");r.write("<div");r.addClass("sapUshellCircle");r.writeClasses();r.write(">");r.write("</div>");r.write("<div");r.addClass("sapUshellCircle");r.writeClasses();r.write(">");r.write("</div>");r.write("<div");r.addClass("sapUshellCircle");r.writeClasses();r.write(">");r.write("</div>");r.write("</div>");}if(c.getShowHeader()){r.write("<div");r.addClass("sapUshellTileContainerHeader");r.writeClasses();if(c.getIeHtml5DnD()&&!c.getIsGroupLocked()&&!c.getDefaultGroup()&&c.getTileActionModeActive()){r.writeAttribute("draggable","true");}r.writeAccessibilityState(c,{label:sap.ushell.resources.i18n.getText("tileContainerHeader")});r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-title");r.write(">");r.write("<");r.write(c.getHeaderLevel().toLowerCase());r.addClass('sapUshellContainerTitle');r.addClass("sapUiStrongBackgroundTextColor");r.writeClasses();r.writeAttributeEscaped("title",c.getHeaderText());r.writeAccessibilityState(c,{label:sap.ushell.resources.i18n.getText("tileContainerTitle")+c.getHeaderText()});r.write(">");r.writeEscaped(c.getHeaderText());r.write("</");r.write(c.getHeaderLevel().toLowerCase());r.write(">");if(c.getShowIcon()){c.oIcon.removeStyleClass('sapUshellContainerIconHidden');}else{c.oIcon.addStyleClass('sapUshellContainerIconHidden');}r.renderControl(c.oIcon);r.renderControl(c.oEditInputField);r.write("<div");r.addClass('sapUshellContainerHeaderActions');r.writeClasses();r.write(">");jQuery.each(h,function(){r.renderControl(this);});r.write("</div>");r.write("</div>");r.write("</div>");}r.write("<div");d=c.data('containerHeight');if(d){r.writeAttribute("style",'height:'+d);}r.addClass('sapUshellTilesContainer-sortable');r.addClass('sapUshellInner');r.writeClasses();r.write(">");jQuery.each(t,function(){if(this.getVisible()){v=true;}if(this.getVisible){r.renderControl(this);}});if(c.getShowPlaceholder()){r.renderControl(c.oPlusTile);}if(c.getShowNoData()){this.renderNoData(r,c,!t.length||!v);}r.write("</div>");if(l.length>0){if(c.getShowBackground()&&!(c.getIsGroupLocked()&&t.length===0)){r.write("<div");r.addClass('sapUshellTilesContainerSeparator');r.writeClasses();r.write(">");r.write("</div>");}r.write("<div");r.addClass('sapUshellLinksContainer');r.writeClasses();r.write(">");jQuery.each(l,function(){r.renderControl(this);});r.write("</div>");}if(f.length>0){r.write("<footer");r.addClass('sapUshellTilesContainerFtr');r.writeClasses();r.write(">");jQuery.each(f,function(){r.renderControl(this);});r.write("</footer>");}r.write("</div>");if(a.length){r.write("<div");r.addClass("sapUshellTileContainerAfterContent");r.writeClasses();r.write(">");jQuery.each(a,function(){r.renderControl(this);});r.write("</div>");}r.write("</div>");};sap.ushell.ui.launchpad.TileContainerRenderer.renderNoData=function(r,c,d){r.write("<div id='"+c.getId()+"-listNoData' class='sapUshellNoFilteredItems sapUiStrongBackgroundTextColor'>");if(d){if(c.getNoDataText()){r.writeEscaped(c.getNoDataText());}else{r.writeEscaped(c.getNoDataText(sap.ushell.resources.i18n.getText("noFilteredItems")));}}else{r.writeEscaped("");}r.write("</div>");};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.TileRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.TileRenderer");sap.ushell.ui.launchpad.TileRenderer={};sap.ushell.ui.launchpad.TileRenderer.render=function(r,c){var t=null,m=c.getModel(),T;try{t=c.getTileViews()[0];}catch(e){jQuery.sap.log.warning("Failed to load tile view: ",e.message);t=new sap.m.Text({text:"Failed to load. "});}T=t&&t.getId()?t.getId():'';r.write("<div");if(m&&m.getProperty("/enableHelp")){r.writeAttribute("data-tileCatalogId",c.getTileCatalogId());}r.writeControlData(c);r.addClass("sapUshellTile");if(c.getFootItems()&&c.getFootItems().length>0){r.addClass("sapUshellTileFooter");}if(c.getLong()){r.addClass("sapUshellLong");}if(c.getTall()){r.addClass("sapUshellTall");}if(!c.getVisible()){r.addClass("sapUshellHidden");}if(c.getIsLocked()){r.addClass("sapUshellLockedTile");}r.writeClasses();r.writeAccessibilityState(undefined,{role:"list item"});if(c.getIeHtml5DnD()){r.writeAttribute("draggable","true");}r.writeAttributeEscaped("tabindex","-1");var l=c.data('layoutPosition');if(l){var s='-webkit-transform:'+l.translate3D+';-ms-transform:'+l.translate2D+';transform:'+l.translate3D;r.writeAttribute("style",s);}r.writeAttributeEscaped("aria-flowto",T);r.write(">");r.write("<div");r.addClass("sapUshellTileActionLayerDiv");r.writeClasses();r.write(">");r.write("</div>");r.addClass("sapUshellTileInner");if(c.getProperty('tileActionModeActive')){r.addClass("sapUshellTileActionBG");}if(this.renderTileView){this.renderTileView(r,t,c.getTarget());}if(c.getShowActionsIcon()){r.renderControl(c.actionIcon);}else{if(!c.getIsLocked()&&c.getTileActionModeActive()){r.write("<div");r.addClass("sapUshellTileDeleteClickArea");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapUshellTileDeleteIconOuterClass");r.writeClasses();r.write(">");r.renderControl(c._initDeleteAction());r.write("</div>");r.write("</div>");}}r.write("<footer");if(m&&m.getProperty("/enableHelp")){r.writeAttribute("data-tileCatalogId","addRemoveTile-"+c.getTileCatalogId());}r.addClass("sapUshellTileFooterElement");r.writeClasses();r.write(">");jQuery.each(c.getFootItems(),function(){r.renderControl(this);});r.write("</footer>");if(c.getTileActionModeActive()){r.write("<div");r.addClass("sapUshellTileActionIconDivBottom");r.writeClasses();r.write(">");r.renderControl((new sap.ui.core.Icon({src:"sap-icon://overflow"})).addStyleClass('sapUshellTileActionIconDivBottomInner'));r.write("</div>");}r.write("</div>");};sap.ushell.ui.launchpad.TileRenderer.renderTileView=function(r,t,T){if((T||"")!==""){r.write("<a");r.writeClasses();r.writeAttributeEscaped("href","#"+T);r.write(">");r.renderControl(t);r.write("</a>");}else{r.write("<div");r.writeClasses();r.writeAttribute("title",sap.ushell.resources.i18n.getText("launchTile_tooltip"));r.write(">");r.renderControl(t);r.write("</div>");}};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.TileState')){jQuery.sap.declare("sap.ushell.ui.launchpad.TileState");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.ushell.ui.launchpad.TileState",{metadata:{library:"sap.ushell",properties:{"state":{type:"string",group:"Misc",defaultValue:'Loaded'}}}});jQuery.sap.require('sap.m.Text');jQuery.sap.require('sap.ui.core.IconPool');sap.ushell.ui.launchpad.TileState.prototype.init=function(){this._rb=sap.ushell.resources.i18n;this._sFailedToLoad=this._rb.getText("cannotLoadTile");this._oWarningIcon=new sap.ui.core.Icon(this.getId()+"-warn-icon",{src:"sap-icon://notification",size:"1.37rem"});this._oWarningIcon.addStyleClass("sapSuiteGTFtrFldIcnMrk");};sap.ushell.ui.launchpad.TileState.prototype.exit=function(){this._oWarningIcon.destroy();};sap.ushell.ui.launchpad.TileState.prototype.setState=function(s,i){this.setProperty("state",s,i);return this;};};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.TileStateRenderer')){jQuery.sap.declare("sap.ushell.ui.launchpad.TileStateRenderer");sap.ushell.ui.launchpad.TileStateRenderer={};sap.ushell.ui.launchpad.TileStateRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellGT");r.write(">");var s=c.getState();r.write("<div");r.addClass("sapUshellOverlay");r.writeClasses();r.writeAttribute("id",c.getId()+"-overlay");if(s==="Failed"){r.writeAttribute("title",c._sFailedToLoad);}r.write(">");switch(s){case"Loading":var b=new sap.ui.core.HTML({content:"<div class='sapUshellTileStateLoading'><div>"});b.setBusyIndicatorDelay(0);b.setBusy(true);r.renderControl(b);break;case"Failed":r.write("<div");r.writeAttribute("id",c.getId()+"-failed-ftr");r.addClass("sapUshellTileStateFtrFld");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-failed-icon");r.addClass("sapUshellTileStateFtrFldIcn");r.writeClasses();r.write(">");r.renderControl(c._oWarningIcon);r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-failed-text");r.addClass("sapUshellTileStateFtrFldTxt");r.writeClasses();r.write(">");r.writeEscaped(c._sFailedToLoad);r.write("</div>");r.write("</div>");break;default:}r.write("</div>");r.write("</div>");};};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.ShellFloatingAction')){jQuery.sap.declare('sap.ushell.ui.shell.ShellFloatingAction');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.m.Button');sap.ui.define("sap/ushell/ui/shell/ShellFloatingAction",['jquery.sap.global','sap/m/Button','sap/ushell/library'],function(q,B){"use strict";var S=B.extend("sap.ushell.ui.shell.ShellFloatingAction");S.prototype.init=function(){this.addStyleClass("sapUshellShellFloatingAction");if(B.prototype.init){B.prototype.init.apply(this,arguments);}};S.prototype.exit=function(){B.prototype.exit.apply(this,arguments);};S.prototype.onAfterRendering=function(){if(this.data("transformY")){this.removeStyleClass('sapUshellShellFloatingActionTransition');q(this.getDomRef()).css('transform',"translateY("+this.data("transformY")+")");}else{this.addStyleClass('sapUshellShellFloatingActionTransition');}};});};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.ShellFloatingActionRenderer')){jQuery.sap.declare('sap.ushell.ui.shell.ShellFloatingActionRenderer');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ui.define("sap/ushell/ui/shell/ShellFloatingActionRenderer",['jquery.sap.global','sap/ui/core/Renderer','sap/m/ButtonRenderer'],function(q,R,B){"use strict";var S=R.extend(B);return S;},true);};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.ShellFloatingActions')){
/*!
 * ${copyright}
 */
jQuery.sap.declare('sap.ushell.ui.shell.ShellFloatingActions');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ushell/ui/shell/ShellFloatingActions",['jquery.sap.global','./ShellFloatingAction','sap/ushell/library'],function(q,S){"use strict";var a=sap.ui.core.Control.extend("sap.ushell.ui.shell.ShellFloatingActions",{metadata:{properties:{isFooterVisible:{type:"boolean",defaultValue:false}},aggregations:{floatingActions:{type:"sap.ushell.ui.shell.ShellFloatingAction",multiple:true,singularName:"floatingAction"}}},renderer:{render:function(r,A){var f=A.getFloatingActions();r.write("<div");r.writeControlData(A);r.addClass("sapUshellShellFloatingActions");r.writeClasses();r.write(">");if(f.length){var F;if(f.length===1){F=f[0];}else{F=A._createMultipleFloatingActionsButton(f);q.each(f,function(){this.setVisible(false);r.renderControl(this);});}r.renderControl(F);}r.write("</div>");}}});a.prototype._createMultipleFloatingActionsButton=function(f){var F;var t=this;return new S({id:this.getId()+"-multipleFloatingActions",icon:'sap-icon://add',visible:true,press:function(){if(!this.hasStyleClass('sapUshellShellFloatingActionRotate')){this.addStyleClass('sapUshellShellFloatingActionRotate');if(!F){F=parseInt(this.$().outerHeight(),10)+parseInt(t.$().css('bottom'),10);}f.forEach(function(o){o.setVisible(true);});setTimeout(function(){f.forEach(function(o,i){var b=F*(i+1);o.$().css('transform',"translateY(-"+b+"px)");o.data("transformY","-"+b+"px");});},0);}else{this.removeStyleClass('sapUshellShellFloatingActionRotate');f.forEach(function(o){o.$().css('transform',"translateY(0)");});setTimeout(function(){f.forEach(function(o){o.setVisible(false);o.data("transformY",undefined);});},150);}}});};a.prototype.addFloatingAction=function(A){this.addAggregation('floatingActions',A,true);if(this.getDomRef()){var r=sap.ui.getCore().createRenderManager();r.renderControl(A);r.flush(this.getDomRef());r.destroy();}return this;};a.prototype.removeFloatingAction=function(A){if(typeof A==='number'){A=this.getAggregation('floatingActions')[A];}this.removeAggregation('floatingActions',A,true);var i=A.getId();q('#'+i).remove();return this;};return a;},true);};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.ShellHeadItem')){jQuery.sap.declare('sap.ushell.ui.shell.ShellHeadItem');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Element');jQuery.sap.require('sap.ui.core.IconPool');sap.ui.define("sap/ushell/ui/shell/ShellHeadItem",['jquery.sap.global','sap/ui/core/Element','sap/ui/core/IconPool','sap/ushell/library'],function(q,E,I){"use strict";var S=E.extend("sap.ushell.ui.shell.ShellHeadItem",{metadata:{properties:{startsSection:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},showSeparator:{type:"boolean",group:"Appearance",defaultValue:true},selected:{type:"boolean",group:"Appearance",defaultValue:false},showMarker:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},target:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Appearance",defaultValue:null},visible:{type:"boolean",group:"Appearance",defaultValue:true}},events:{press:{}}}});S.prototype.onclick=function(e){this.firePress();if(!this.getTarget()){e.preventDefault();}};S.prototype.onsapspace=S.prototype.onclick;S.prototype.setStartsSection=function(s){s=!!s;this.setProperty("startsSection",s,true);this.$().toggleClass("sapUshellShellHeadItmDelim",s);return this;};S.prototype.setShowSeparator=function(s){s=!!s;this.setProperty("showSeparator",s,true);this.$().toggleClass("sapUshellShellHeadItmSep",s);return this;};S.prototype.setSelected=function(s){s=!!s;this.setProperty("selected",s,true);this.$().toggleClass("sapUshellShellHeadItmSel",s);return this;};S.prototype.setAriaLabel=function(a){this.setProperty('ariaLabel',a);return this;};S.prototype.setVisible=function(v){this.setProperty("visible",!!v,true);if(v){this.$().removeClass('sapUshellShellHidden');}else{this.$().addClass('sapUshellShellHidden');}return this;};S.prototype.setShowMarker=function(m){m=!!m;this.setProperty("showMarker",m,true);this.$().toggleClass("sapUshellShellHeadItmMark",m);return this;};S.prototype.setIcon=function(i){this.setProperty("icon",i,true);if(this.getDomRef()){this._refreshIcon();}return this;};S.prototype._refreshIcon=function(){var i=q(this.$().children()[0]);var s=this.getIcon();if(I.isIconURI(s)){var o=I.getIconInfo(s);i.html("").css("style","");if(o){i.text(o.content).css("font-family","'"+o.fontFamily+"'");}}else{var $=this.$("img-inner");if($.length===0||$.attr("src")!==s){i.css("style","").html("<img id='"+this.getId()+"-img-inner' src='"+q.sap.encodeHTML(s)+"'></img>");}}};q.sap.declare('sap.ui.unified.ShellHeadItem');sap.ui.unified.ShellHeadItem=S;return S;},true);};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.ShellHeadUserItem')){jQuery.sap.declare('sap.ushell.ui.shell.ShellHeadUserItem');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Element');jQuery.sap.require('sap.ui.core.IconPool');sap.ui.define("sap/ushell/ui/shell/ShellHeadUserItem",['jquery.sap.global','sap/ui/core/Element','sap/ui/core/IconPool','sap/ushell/library'],function(q,E,I){"use strict";var S=E.extend("sap.ushell.ui.shell.ShellHeadUserItem",{metadata:{properties:{username:{type:"string",group:"Appearance",defaultValue:''},ariaLabel:{type:"string",group:"Appearance",defaultValue:null},image:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null}},events:{press:{}}}});I.getIconInfo("","");S.prototype.onclick=function(e){this.firePress();e.preventDefault();};S.prototype.onsapspace=S.prototype.onclick;S.prototype.setImage=function(i){this.setProperty("image",i,true);if(this.getDomRef()){this._refreshImage();}return this;};S.prototype.setAriaLabel=function(a){this.setProperty('ariaLabel',a);return this;};S.prototype._refreshImage=function(){var i=this.$("img");var s=this.getImage();if(!s){i.html("").css("style","").css("display","none");}else if(I.isIconURI(s)){var o=I.getIconInfo(s);i.html("").css("style","");if(o){i.text(o.content).css("font-family","'"+o.fontFamily+"'");}}else{var $=this.$("img-inner");if($.length===0||$.attr("src")!==s){i.css("style","").html("<img id='"+this.getId()+"-img-inner' src='"+q.sap.encodeHTML(s)+"'></img>");}}};S.prototype._checkAndAdaptWidth=function(s){if(!this.getDomRef()){return false;}var r=this.$(),n=this.$("name");var b=r.width();r.toggleClass("sapUshellShellHeadActionLimit",false);var m=240;if(s){m=Math.min(m,0.5*document.documentElement.clientWidth-225);}if(m<n.width()){r.toggleClass("sapUshellShellHeadActionLimit",true);}return b!==r.width();};return S;},true);};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.ShellHeader')){jQuery.sap.declare('sap.ushell.ui.shell.ShellHeader');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ushell/ui/shell/ShellHeader",['jquery.sap.global','sap/ushell/library'],function(q,l){"use strict";var S=sap.ui.core.Control.extend("sap.ushell.ui.shell.ShellHeader",{metadata:{properties:{logo:{type:"sap.ui.core.URI",defaultValue:""},searchVisible:{type:"boolean",defaultValue:true},ariaLabel:{type:"string",defaultValue:undefined}},aggregations:{headItems:{type:"sap.ushell.ui.shell.ShellHeadItem",multiple:true},headEndItems:{type:"sap.ushell.ui.shell.ShellHeadItem",multiple:true},search:{type:"sap.ui.core.Control",multiple:false},user:{type:"sap.ushell.ui.shell.ShellHeadUserItem",multiple:false},title:{type:"sap.ushell.ui.shell.ShellTitle",multiple:false}}},renderer:{render:function(r,h){var i=h.getId();r.write("<div");r.writeControlData(h);if(h.getAriaLabel()){r.writeAccessibilityState({label:h.getAriaLabel(),role:"banner"});}r.writeAttribute("class","sapUshellShellHeader");r.write(">");r.write("<div id='",i,"-hdr-begin' class='sapUshellShellHeadBegin'>");this.renderHeaderItems(r,h,true);r.write("</div>");r.write("<div id='",i,"-hdr-center' class='sapUshellShellHeadCenter'>");this.rendererTitle(r,h);this.renderSearch(r,h);r.write("</div>");r.write("<div id='",i,"-hdr-end' class='sapUshellShellHeadEnd'>");this.renderHeaderItems(r,h,false);r.write("</div>");r.write("</div>");},renderSearch:function(r,h){var s=h.getSearch();r.write("<div id='",h.getId(),"-hdr-search'");r.writeAttribute("class","sapUshellShellSearch"+(h.getSearchVisible()?"":" sapUshellShellHidden"));r.write("><div>");if(s){r.renderControl(s);}r.write("</div></div>");},rendererTitle:function(r,h){r.write("<div id='",h.getId(),"-hdr-title' class='sapUshellShellHeadTitle'>");r.renderControl(h.getTitle());r.write("</div>");},renderHeaderItems:function(r,h,b){r.write("<div class='sapUshellShellHeadContainer'>");var I=b?h.getHeadItems():h.getHeadEndItems(),i;for(i=0;i<I.length;i++){if((I[i].getTarget()||"")!==""){r.write("<a tabindex='0' href='");r.writeEscaped(I[i].getTarget());r.write("'");}else{r.write("<a tabindex='0'");}r.writeElementData(I[i]);r.addClass("sapUshellShellHeadItm");if(I[i].getStartsSection()){r.addClass("sapUshellShellHeadItmDelim");}if(I[i].getShowSeparator()){r.addClass("sapUshellShellHeadItmSep");}if(!I[i].getVisible()){r.addClass("sapUshellShellHidden");}if(I[i].getAriaLabel()){r.writeAccessibilityState({label:I[i].getAriaLabel(),role:"button"});}if(I[i].getSelected()){r.addClass("sapUshellShellHeadItmSel");}if(I[i].getShowMarker()){r.addClass("sapUshellShellHeadItmMark");}r.writeClasses();var t=I[i].getTooltip_AsString();if(t){r.writeAttributeEscaped("title",t);}r.write("><span></span><div class='sapUshellShellHeadItmMarker'><div></div></div></a>");}var u=h.getUser();if(!b&&u){r.write("<a tabindex='0' href='javascript:void(0);'");r.writeElementData(u);r.addClass("sapUshellShellHeadAction sapUshellShellHeadSeparator");r.writeClasses();var t=u.getTooltip_AsString();if(t){r.writeAttributeEscaped("title",t);}if(u.getAriaLabel()){r.writeAccessibilityState({label:u.getAriaLabel(),role:"button"});}r.write("><span id='",u.getId(),"-img' class='sapUshellShellHeadActionImg'></span>");r.write("<span id='"+u.getId()+"-name' class='sapUshellShellHeadActionName'");r.write(">");var U=u.getUsername()||"";r.writeEscaped(U);r.write("</span><span class='sapUshellShellHeadActionExp'></span></a>");}r.write("</div>");if(b){this._renderLogo(r,h);}},_renderLogo:function(r,h){var L=sap.ushell.resources.i18n.getText("SHELL_LOGO_TOOLTIP"),i=h._getLogo();r.write("<div class='sapUshellShellIco'>");r.write("<img id='",h.getId(),"-icon'");r.writeAttributeEscaped("title",L);r.writeAttributeEscaped("alt",L);r.write("src='");r.writeEscaped(i);r.write("' style='",i?"":"display:none;","'></img>");r.write("</div>");}}});S.prototype.init=function(){var t=this;this._rtl=sap.ui.getCore().getConfiguration().getRTL();this._handleMediaChange=function(p){if(!t.getDomRef()){return;}t._refresh();};sap.ui.Device.media.attachHandler(this._handleMediaChange,this,sap.ui.Device.media.RANGESETS.SAP_STANDARD);this._handleResizeChange=function(){if(!t.getDomRef()||!t.getUser()){return;}var u=this.getUser();var c=u._checkAndAdaptWidth(!t.$("hdr-search").hasClass("sapUshellShellHidden")&&!!t.getSearch());if(c){t._refresh();}};sap.ui.Device.resize.attachHandler(this._handleResizeChange,this);this.data("sap-ui-fastnavgroup","true",true);this.oTitle=null;};S.prototype.exit=function(){sap.ui.Device.media.detachHandler(this._handleMediaChange,this,sap.ui.Device.media.RANGESETS.SAP_STANDARD);delete this._handleMediaChange;sap.ui.Device.resize.detachHandler(this._handleResizeChange,this);delete this._handleResizeChange;if(this.oTitle){this.oTitle.destroy();}};S.prototype.onAfterRendering=function(){this._refresh();this.$("hdr-center").toggleClass("sapUshellShellAnim",!this._noHeadCenterAnim);};S.prototype.onThemeChanged=function(){if(this.getDomRef()){this.invalidate();}};S.prototype._getLogo=function(){var i=this.getLogo();if(!i){q.sap.require("sap.ui.core.theming.Parameters");i=sap.ui.core.theming.Parameters._getThemeImage(null,true);}return i;};S.prototype._refresh=function(){function u(I){for(var i=0;i<I.length;i++){I[i]._refreshIcon();}}u(this.getHeadItems());u(this.getHeadEndItems());var U=this.getUser(),a=q("html").hasClass("sapUiMedia-Std-Phone"),s=!this.$("hdr-search").hasClass("sapUshellShellHidden"),$=this.$("icon");if(U){U._refreshImage();U._checkAndAdaptWidth(s&&!!this.getSearch());}$.parent().toggleClass("sapUshellShellHidden",a&&s&&!!this.getSearch());var b=this.$("hdr-end").outerWidth(),c=this.$("hdr-begin").outerWidth(),w=this.$().width(),d=568,e=Math.max(b,c),f=((w-c-b<d)&&s?c:e)+"px",g=((w-c-b<d)&&s?b:e)+"px";this.$("hdr-center").css({"left":this._rtl?g:f,"right":this._rtl?f:g});this.$("hdr-title").css({"left":this._rtl?g:f,"right":this._rtl?f:g});};S.prototype.setTitleControl=function(t,i){if(this.oTitle){this.oTitle.destroy();}this.oTitle=new sap.ushell.ui.shell.ShellTitle("shellTitle",{text:t,icon:sap.ui.core.IconPool.getIconURI("overflow")});this.oTitle.setInnerControl(i);this.setTitle(this.oTitle);};S.prototype.removeHeadItem=function(i){if(typeof i==='number'){i=this.getHeadItems()[i];}i.setVisible(false);this.removeAggregation('headItems',i,true);};S.prototype.addHeadItem=function(i){if(!i.getDomRef()){this.addAggregation('headItems',i);i.setVisible(true);}else{this.addAggregation('headItems',i,true);i.setVisible(true);}};return S;},true);};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.ShellLayoutRenderer')){jQuery.sap.declare('sap.ushell.ui.shell.ShellLayoutRenderer');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ushell/ui/shell/ShellLayoutRenderer",['jquery.sap.global'],function(q){"use strict";var S={};S.render=function(r,s){var i=s.getId();r.write("<div");r.writeControlData(s);r.addClass("sapUshellShell");if(s._animation){r.addClass("sapUshellShellAnim");}if(!s.getHeaderVisible()){r.addClass("sapUshellShellNoHead");}r.addClass("sapUshellShellHead"+(s._showHeader?"Visible":"Hidden"));if(s.getShowCurtain()){r.addClass("sapUshellShellCurtainVisible");}else{r.addClass("sapUshellShellCurtainHidden");r.addClass("sapUshellShellCurtainClosed");}r.writeClasses();r.write(">");r.write("<hr id='",i,"-brand' class='sapUshellShellBrand'/>");r.write("<header id='",i,"-hdr'  class='sapUshellShellHead'><div>");r.write("<div id='",i,"-hdrcntnt' class='sapUshellShellCntnt'>");if(s.getHeader()){r.renderControl(s.getHeader());}r.write("</div>","</div>","</header>");if(s.getToolArea()){r.write("<aside>");r.renderControl(s.getToolArea());r.write("</aside>");}r.write("<section id='",i,"-curt' class='sapUshellShellCntnt sapUshellShellCurtain'>");r.write("<div id='",i,"-curtcntnt' class='sapUshellShellCntnt'>");r.renderControl(s._curtCont);r.write("</div>");r.write("<span id='",i,"-curt-focusDummyOut' tabindex='0'></span>");r.write("</section>");r.write("<div id='",i,"-cntnt' class='sapUshellShellCntnt sapUshellShellCanvas sapUiGlobalBackgroundColor sapUiGlobalBackgroundColorForce'>");r.write("<div id='",i,"-strgbg' class='sapUshellShellBG"+(s._useStrongBG?" sapUiStrongBackgroundColor":"")+"'></div>");r.write("<div class='sapUiGlobalBackgroundImage sapUiGlobalBackgroundImageForce sapUshellShellBG'></div>");r.renderControl(s._cont);r.write("</div>");r.write("<span id='",i,"-main-focusDummyOut' tabindex='"+(s.getShowCurtain()?0:-1)+"'></span>");r.renderControl(s._floatingActions);r.write("</div>");};return S;},true);};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.ShellOverlayRenderer')){jQuery.sap.declare('sap.ushell.ui.shell.ShellOverlayRenderer');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ushell/ui/shell/ShellOverlayRenderer",['jquery.sap.global'],function(q){"use strict";var S={};S.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellShellOvrly");if(c._opening){r.addClass("sapUshellShellOvrlyCntntHidden");r.addClass("sapUshellShellOvrlyOpening");}if(c._getAnimActive()){r.addClass("sapUshellShellOvrlyAnim");}r.writeClasses();r.write("><div>");r.write("<header class='sapUshellShellOvrlyHead'>");r.write("<hr class='sapUshellShellOvrlyBrand'/>");r.write("<div class='sapUshellShellOvrlyHeadCntnt'>");r.write("<div id='"+c.getId()+"-hdr-center' class='sapUshellShellOvrlyHeadCenter'>");S.renderSearch(r,c);r.write("</div>");var C=sap.ushell.resources.i18n.getText("SHELL_OVERLAY_CLOSE");r.write("<a tabindex='0' href='javascript:void(0);' id='"+c.getId()+"-close' class='sapUshellShellOvrlyHeadClose'");r.writeAttributeEscaped("title",C);r.write(">");r.writeEscaped(C);r.write("</a></div></header>");r.write("<div id='"+c.getId()+"-cntnt' class='sapUshellShellOvrlyCntnt'>");S.renderContent(r,c);r.write("</div>");r.write("</div></div>");};S.renderSearch=function(r,c){var w=c._getSearchWidth();var s="";if(w>0&&c._opening){s="style='width:"+w+"px'";}r.write("<div id='"+c.getId()+"-search' class='sapUshellShellOvrlySearch' "+s+"><div>");var o=c.getSearch();if(o){r.renderControl(o);}r.write("</div></div>");};S.renderContent=function(r,c){r.write("<div>");var C=c.getContent();for(var i=0;i<C.length;i++){r.renderControl(C[i]);}r.write("</div>");};return S;},true);};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.ShellRenderer')){jQuery.sap.declare('sap.ushell.ui.shell.ShellRenderer');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Renderer');sap.ui.define("sap/ushell/ui/shell/ShellRenderer",['jquery.sap.global','sap/ui/core/Renderer','./ShellLayoutRenderer'],function(q,R,S){"use strict";var a=R.extend(S);return a;},true);};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.ShellTitle')){jQuery.sap.declare('sap.ushell.ui.shell.ShellTitle');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.m.Button');jQuery.sap.require('sap.ui.core.IconPool');jQuery.sap.require('sap.m.Button');sap.ui.define("sap/ushell/ui/shell/ShellTitle",['jquery.sap.global','sap/m/Button','sap/ui/core/IconPool','sap/m/Button','sap/ushell/library'],function(q,B,I){"use strict";var S=B.extend("sap.ushell.ui.shell.ShellTitle",{metadata:{properties:{text:{type:"string",group:"Misc",defaultValue:null},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null}},events:{press:{}}},renderer:{render:function(r,c){var i=c.getInnerControl();var t=c.getText();if(!t){return;}if(i){r.write("<a tabindex='0' href='javascript:void(0);'");r.addClass("sapUshellShellHeadAction sapUshellHideIconOnDesktop");r.writeClasses();if(c.getTooltip()){r.writeAttributeEscaped("title",c.getTooltip());}r.writeControlData(c);r.write("><span class='sapUshellShellHeadActionImg sapUshellShellTitleHeadActionImg'>");var o=I.createControlByURI(c.getIcon());r.renderControl(o);r.write("</span>");r.write("<span class='sapUshellShellHeadActionName sapUshellHeadTitle'");r.writeAttributeEscaped("title",c.getText());r.write(">");r.writeEscaped(c.getText());r.write("</span><span class='sapUshellShellHeadActionExp'></span></a>");}else{r.write('<span class="sapUshellHeadTitle">');r.writeEscaped(c.getText());r.write("</span>");}}}});S.prototype.init=function(){if(B.prototype.init){B.prototype.init.apply(this,arguments);}this.innerControl=null;this.oPopover=null;};S.prototype.getInnerControl=function(){return this.innerControl;};S.prototype.setInnerControl=function(i){this.innerControl=i;};S.prototype.onclick=function(e){if(!this.oPopover){this.oPopover=new sap.m.Popover("shellTitlePopover",{showHeader:false,content:this.getInnerControl(),placement:sap.m.PlacementType.VerticalPreferedBottom});}this.oPopover.openBy(this);this.firePress();};S.prototype.exit=function(){if(this.oPopover){this.innerControl.destroy();this.oPopover.destroy();}};S.prototype.onsapspace=S.prototype.onclick;return S;},true);};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.ShellUtilities')){jQuery.sap.declare('sap.ushell.ui.shell.ShellUtilities');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ushell/ui/shell/ShellUtilities",['jquery.sap.global','sap/ushell/library'],function(q){"use strict";sap.ui.base.Object.extend("sap.ushell.ui.shell.shell_ContentRenderer",{constructor:function(c,C,o,a){sap.ui.base.Object.apply(this);this._id=C;this._cntnt=o;this._ctrl=c;this._rm=sap.ui.getCore().createRenderManager();this._cb=a||function(){};},destroy:function(){this._rm.destroy();delete this._rm;delete this._id;delete this._cntnt;delete this._cb;delete this._ctrl;if(this._rerenderTimer){q.sap.clearDelayedCall(this._rerenderTimer);delete this._rerenderTimer;}sap.ui.base.Object.prototype.destroy.apply(this,arguments);},render:function(){if(!this._rm){return;}if(this._rerenderTimer){q.sap.clearDelayedCall(this._rerenderTimer);}this._rerenderTimer=q.sap.delayedCall(0,this,function(){var $=q.sap.byId(this._id);var d=$.length>0;if(d){if(typeof(this._cntnt)==="string"){var c=this._ctrl.getAggregation(this._cntnt,[]);for(var i=0;i<c.length;i++){this._rm.renderControl(c[i]);}}else{this._cntnt(this._rm);}this._rm.flush($[0]);}this._cb(d);});}});sap.ushell.ui.shell.shell_iNumberOfOpenedShellOverlays=0;},false);};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.SplitContainer')){jQuery.sap.declare('sap.ushell.ui.shell.SplitContainer');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Control');jQuery.sap.require('sap.ui.core.theming.Parameters');sap.ui.define("sap/ushell/ui/shell/SplitContainer",['jquery.sap.global','sap/ui/core/Control','sap/ui/core/theming/Parameters','sap/ushell/library'],function(q,C,P){"use strict";var S=C.extend("sap.ushell.ui.shell.SplitContainer",{metadata:{library:"sap.ushell.ui.shell",properties:{showSecondaryContent:{type:"boolean",group:"Appearance",defaultValue:null},secondaryContentSize:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:'250px'},secondaryContentWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:'250px',deprecated:true},orientation:{type:"sap.ui.core.Orientation",group:"Appearance",defaultValue:sap.ui.core.Orientation.Horizontal}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},subHeaders:{type:"sap.ui.core.Control",multiple:true,singularName:"subHeader"},secondaryContent:{type:"sap.ui.core.Control",multiple:true,singularName:"secondaryContent"}}}});(function(w){S.prototype.init=function(){this.bRtl=sap.ui.getCore().getConfiguration().getRTL();this._paneRenderer=new sap.ushell.ui.shell.shell_ContentRenderer(this,this.getId()+"-panecntnt","secondaryContent");this._subHeadersRenderer=new sap.ushell.ui.shell.shell_ContentRenderer(this,this.getId()+"-canvassubHeaders","subHeaders");this._canvasRenderer=new sap.ushell.ui.shell.shell_ContentRenderer(this,this.getId()+"-canvasrootContent","content");this._moveContent=true;};S.prototype.addSubHeader=function(c){var s=this.getId()+'-canvassubHeaders',j=q(this.getDomRef()),b=q(j).find("#"+s).length?true:false;if(b){return this._mod(function(r){return this.addAggregation("subHeaders",c,r);},this._subHeadersRenderer);}else{return this.addAggregation("subHeaders",c);}};S.prototype.removeSubHeader=function(c){return this._mod(function(r){return this.removeAggregation("subHeaders",c,r);},this._subHeadersRenderer);};S.prototype.insertSubHeader=function(c,i){return this._mod(function(r){return this.insertAggregation("subHeaders",c,i,r);},this._subHeadersRenderer);};S.prototype.removeAllSubHeaders=function(){return this._mod(function(r){return this.removeAllAggregation("subHeaders",r);},this._subHeadersRenderer);};S.prototype.destroySubHeaders=function(){return this._mod(function(r){return this.destroyAggregation("subHeaders",r);},this._subHeadersRenderer);};S.prototype.exit=function(){this._paneRenderer.destroy();delete this._paneRenderer;this._canvasRenderer.destroy();delete this._canvasRenderer;delete this._contentContainer;delete this._secondaryContentContainer;};S.prototype.onAfterRendering=function(){this._contentContainer=this.$("canvas");this._secondaryContentContainer=this.$("pane");this._toolArea=this.getParent()&&this.getParent().getToolArea&&this.getParent().getToolArea()?this.getParent().getToolArea():{};this._applySecondaryContentSize();};S.prototype._applySecondaryContentSize=function(){if(this.getDomRef()){var v=this.getOrientation()===sap.ui.core.Orientation.Vertical;var s,o;var d,O,D;var a=this.getSecondaryContentSize();var b=this.getShowSecondaryContent();if(v){s="height";o="width";d="top";O=this.bRtl?"right":"left";}else{s="width";o="height";d=this.bRtl?"right":"left";O="top";}if(this._closeContentDelayId){q.sap.clearDelayedCall(this._closeContentDelayId);}this._secondaryContentContainer.css(s,a);this._secondaryContentContainer.css(o,"");if(this._toolArea.getVisible&&!this._toolArea.getVisible()){D="0";}else{D=this._toolArea.getSize?this._toolArea.getSize():"0";}this._secondaryContentContainer.css(d,b?D:"-"+a);this._secondaryContentContainer.css(O,"");if(this._moveContent){a=this._adjustSecondaryContentSize();this._contentContainer.css(d,b?a:D);}else{this._contentContainer.css(d,D);}if(!b){var h=parseInt(P.get("sapUshellSplitContAnimationDuration"),10);this._closeContentDelayId=q.sap.delayedCall(h,this,function(){if(this._secondaryContentContainer){this._secondaryContentContainer.toggleClass("sapUshellSplitContSecondClosed",true);}});}else{this._secondaryContentContainer.toggleClass("sapUshellSplitContSecondClosed",false);}}};S.prototype._mod=function(m,d){var r=!!this.getDomRef();var a=m.apply(this,[r]);if(r&&d){d.render();}return a;};S.prototype._adjustSecondaryContentSize=function(){var c=this.getProperty("secondaryContentSize"),b=this._toolArea.getVisible&&this._toolArea.getVisible()?this._toolArea.getSize():"0rem";c=parseFloat(c,10)+parseFloat(b,10)+"rem";return c;};S.prototype.setShowSecondaryContent=function(s){var r=this.getDomRef();this.setProperty("showSecondaryContent",!!s,r);this._applySecondaryContentSize();return this;};S.prototype.setSecondaryContentSize=function(s){this.setProperty("secondaryContentSize",s,true);this._applySecondaryContentSize();return this;};S.prototype.getSecondaryContentWidth=function(){q.sap.log.warning("SplitContainer: Use of deprecated property \"SecondaryContentWidth\", please use "+"\"SecondaryContentSize\" instead.");return this.getSecondaryContentSize.apply(this,arguments);};S.prototype.setSecondaryContentWidth=function(){q.sap.log.warning("SplitContainer: Use of deprecated property \"SecondaryContentWidth\", please use "+"\"SecondaryContentSize\" instead.");return this.setSecondaryContentSize.apply(this,arguments);};S.prototype.insertContent=function(c,i){return this._mod(function(r){return this.insertAggregation("content",c,i,r);},this._canvasRenderer);};S.prototype.addContent=function(c){return this._mod(function(r){return this.addAggregation("content",c,r);},this._canvasRenderer);};S.prototype.removeContent=function(i){return this._mod(function(r){return this.removeAggregation("content",i,r);},this._canvasRenderer);};S.prototype.removeAllContent=function(){return this._mod(function(r){return this.removeAllAggregation("content",r);},this._canvasRenderer);};S.prototype.destroyContent=function(){return this._mod(function(r){return this.destroyAggregation("content",r);},this._canvasRenderer);};S.prototype.insertSecondaryContent=function(c,i){return this._mod(function(r){return this.insertAggregation("secondaryContent",c,i,r);},this._paneRenderer);};S.prototype.addSecondaryContent=function(c){return this._mod(function(r){return this.addAggregation("secondaryContent",c,r);},this._paneRenderer);};S.prototype.removeSecondaryContent=function(i){return this._mod(function(r){return this.removeAggregation("secondaryContent",i,r);},this._paneRenderer);};S.prototype.removeAllSecondaryContent=function(){return this._mod(function(r){return this.removeAllAggregation("secondaryContent",r);},this._paneRenderer);};S.prototype.destroySecondaryContent=function(){return this._mod(function(r){return this.destroyAggregation("secondaryContent",r);},this._paneRenderer);};})(window);return S;},true);};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.SplitContainerRenderer')){jQuery.sap.declare('sap.ushell.ui.shell.SplitContainerRenderer');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ushell/ui/shell/SplitContainerRenderer",['jquery.sap.global'],function(q){"use strict";var S={};S.render=function(r,c){var i=c.getId();var v=c.getOrientation()===sap.ui.core.Orientation.Vertical;r.write("<div");r.writeControlData(c);r.addClass("sapUshellSpltCont");r.addClass("sapUshellSpltCont"+(v?"V":"H"));if(sap.ui.getCore().getConfiguration().getAnimation()){r.addClass("sapUshellSpltContAnim");}if(!c.getShowSecondaryContent()){r.addClass("sapUshellSpltContPaneHidden");}r.writeClasses();r.write(">");var s=i+"-pane";var w=c.getShowSecondaryContent()?c.getSecondaryContentSize():"0";r.write("<aside id='",s,"' style='width:",w,"'");r.addClass("sapUshellSpltContPane");if(!c.getShowSecondaryContent()){r.addClass("sapUshellSplitContSecondClosed");}r.writeClasses();r.write(">");this.renderContent(r,s,c.getSecondaryContent(),c._bRootContent);r.write("</aside>");var C=i+"-canvas";r.write("<section id='",C,"' class='sapUshellSpltContCanvas'>");var a=c.getAggregation('subHeaders');this.renderContent(r,C,c.getContent(),c._bRootContent,a);r.write("</section>");r.write("</div>");};S.renderContent=function(r,i,c,R,s){if(R){this.renderRootContent(r,i,c,s);}else{this.renderSecondaryContent(r,i,c);}};S.renderRootContent=function(r,i,c,s){r.write("<div id='",i,"cntnt' class='sapUshellSpltContCntnt'");r.writeAttribute("data-sap-ui-root-content","true");r.write(">");if(s&&s.length){r.write("<div id='",i,"subHeaders'>");s.forEach(function(o,a){r.renderControl(o);});r.write("</div>");}if(c&&c.length){r.write("<div id='",i,"rootContent' class='sapUshellSpltContainerContentWrapper'>");c.forEach(function(C,a){r.renderControl(C);});r.write("</div>");}r.write("</div>");};S.renderSecondaryContent=function(r,I,c){r.write("<div id='",I,"secondaryContent' class='sapUshellSpltContCntnt'>");for(var i=0;i<c.length;i++){r.renderControl(c[i]);}r.write("</div>");};return S;},true);};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.ToolAreaItem')){jQuery.sap.declare('sap.ushell.ui.shell.ToolAreaItem');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Control');jQuery.sap.require('sap.ui.core.IconPool');sap.ui.define("sap/ushell/ui/shell/ToolAreaItem",['jquery.sap.global','sap/ui/core/Control','sap/ui/core/IconPool','sap/ushell/library'],function(q,C,I){"use strict";var T=C.extend("sap.ushell.ui.shell.ToolAreaItem",{metadata:{properties:{icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},selected:{type:"boolean",group:"Appearance",defaultValue:false},text:{type:"string",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Appearance",defaultValue:null},visible:{type:"boolean",group:"Appearance",defaultValue:true},expandable:{type:"boolean",group:"Appearance",defaultValue:false}},events:{press:{},expand:{}}},renderer:{render:function(r,t){var i;r.write("<div");r.writeControlData(t);if(!t.getIcon()){r.addClass("sapUshellToolAreaItmTextOnly");}else{r.addClass("sapUshellToolAreaItm");}if(!t.getVisible()){r.addClass("sapUshellShellHidden");}if(t.getAriaLabel()){r.writeAccessibilityState({label:this.getAriaLabel(),role:"button"});}r.writeClasses();var a=t.getTooltip_AsString();if(a){r.writeAttributeEscaped("title",a);}r.write(">");if(t.getIcon()){i=I.createControlByURI(t.getIcon());i.setUseIconTooltip(false);i.addStyleClass("sapUshellToolAreaItemIcon");r.renderControl(i);}if(t.getText()){r.write("<span");r.addClass("sapUshellToolAreaItemText");r.writeClasses();r.write(">");r.writeEscaped(t.getText());r.write("</span>");}if(t.getExpandable()){this.renderExpandable(r);}r.write("</div>");},renderExpandable:function(r){var i=I.createControlByURI("sap-icon://icon-dropdown");i.addStyleClass("sapUshellToolAreaItemExpandable");r.renderControl(i);}}});T.prototype.onclick=function(e){if(this.$().parent().hasClass("sapUshellToolAreaItemSelected")){this.setSelected(false);}else{this.setSelected(true);}if(e.target.className.indexOf("sapUshellToolAreaItemExpandable")>0){this.fireExpand();}else{this.firePress();}};T.prototype.onsapenter=T.prototype.onclick;T.prototype.setExpandable=function(e){e=!!e;this.setProperty("expandable",e,true);this.$().toggleClass("sapUshellToolAreaItemExpandable",e);};T.prototype.setSelected=function(s){s=!!s;if(s){var j=q(".sapUshellToolAreaItemSelected");j.each(function(){q(this).removeClass("sapUshellToolAreaItemSelected");});}this.setProperty("selected",s,true);this.$().parent().toggleClass("sapUshellToolAreaItemSelected",s);};T.prototype.setVisible=function(v){var r=this.getParent().getDomRef();this.setProperty("visible",!!v,r);this.$().toggleClass("sapUshellShellHidden",!v);};T.prototype.setAriaLabel=function(a){this.setProperty('ariaLabel',a);return this;};return T;},true);};if(!jQuery.sap.isDeclared('sap.ushell.ui.tile.TileBase')){
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
jQuery.sap.declare("sap.ushell.ui.tile.TileBase");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.ushell.ui.tile.TileBase",{metadata:{library:"sap.ushell",properties:{"title":{type:"string",group:"Data",defaultValue:null},"subtitle":{type:"string",group:"Data",defaultValue:null},"icon":{type:"string",group:"Data",defaultValue:null},"info":{type:"string",group:"Data",defaultValue:null},"infoState":{type:"sap.ushell.ui.tile.State",group:"",defaultValue:sap.ushell.ui.tile.State.Neutral},"targetURL":{type:"string",group:"Behavior",defaultValue:null},"highlightTerms":{type:"any",group:"Appearance",defaultValue:[]}},aggregations:{"content":{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},events:{"press":{}}}});sap.ushell.ui.tile.TileBase.M_EVENTS={'press':'press'};(function(){"use strict";sap.ushell.ui.tile.TileBase.prototype.ontap=function(e){this.firePress({});};sap.ushell.ui.tile.TileBase.prototype.onsapenter=function(e){this.firePress({});};sap.ushell.ui.tile.TileBase.prototype.onsapspace=function(e){this.firePress({});};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.tile.TileBaseRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.tile.TileBaseRenderer");sap.ushell.ui.tile.TileBaseRenderer={};var t=sap.ushell.resources.i18n;sap.ushell.ui.tile.TileBaseRenderer.highlight=function(h,T){var i,r,e=jQuery.sap.encodeHTML(T).replace(/&#xa;/g,"<br/>");if(h&&h.length&&h.length>0){for(i=0;i<h.length;i=i+1){r=new RegExp("("+jQuery.sap.encodeHTML(h[i]).replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1")+")","gi");e=e.replace(r,"<b>$1</b>");}}return e;};sap.ushell.ui.tile.TileBaseRenderer.render=function(r,c){var T=t.getText('launchTileTitle_tooltip',[c.getTitle()]),s=t.getText([c.getSubtitle()]),i,I;r.write("<div");r.writeControlData(c);if(c.getTargetURL()){r.writeAttributeEscaped("data-targeturl",c.getTargetURL());}r.writeAttributeEscaped("tabindex","-1");if(s===""){r.writeAttributeEscaped('title',T);}else{r.writeAttributeEscaped('title',T+"\r\n"+s);}r.addClass("sapUshellTileBase");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapUshellTileBaseHeader");r.writeClasses();r.write(">");r.write("<h3");r.addClass("sapUshellTileBaseTitle");r.writeClasses();r.writeAccessibilityState(c,{label:t.getText("TileDetails_lable")+t.getText("TileTitle_lable")+c.getTitle()});r.write(">");r.write(this.highlight(c.getHighlightTerms(),c.getTitle()||""));r.write("</h3>");if(c.getSubtitle()){r.write("<h4");r.addClass("sapUshellTileBaseSubtitle");r.writeClasses();r.writeAccessibilityState(c,{label:t.getText("TileSubTitle_lable")+c.getSubtitle()});r.write(">");r.write(this.highlight(c.getHighlightTerms(),c.getSubtitle()));r.write("</h4>");}r.write("</div>");if(typeof(this.renderPart)==='function'){this.renderPart(r,c);}if(c.getIcon()){I=new sap.ui.core.Icon({src:c.getIcon()});I.addStyleClass("sapUshellTileBaseIcon");r.renderControl(I);}if(c.getInfo()||((typeof(this.getInfoPrefix)==='function'))&&this.getInfoPrefix(c)){r.write("<div");r.addClass("sapUshellTileBaseInfo");r.addClass(c.getInfoState()?"sapUshellTileBase"+c.getInfoState():"sapUshellTileBase"+sap.ushell.ui.tile.State.Neutral);r.writeClasses();r.writeAccessibilityState(c,{label:t.getText("TileInfo_lable")+c.getInfo()});r.write(">");if(typeof(this.getInfoPrefix)==='function'){i=this.getInfoPrefix(c);r.writeEscaped(i);}if(c.getInfo()){if(i){r.write(", ");}r.write(this.highlight(c.getHighlightTerms(),c.getInfo()));}r.write("</div>");}r.write("</div>");};}());};if(!jQuery.sap.isDeclared('sap.ushell.User')){(function(){"use strict";jQuery.sap.declare("sap.ushell.User");function d(t,s){if(t.indexOf("sap_")===0){return"";}return s;}function c(o){if(o===undefined){return undefined;}try{return JSON.parse(JSON.stringify(o));}catch(e){return undefined;}}sap.ushell.User=function(C){var a=[],s=C.themeRoot||"",o=C.bootTheme||{theme:"",root:""},n=o;this.getEmail=function(){return C.email;};this.getFirstName=function(){return C.firstName;};this.getFullName=function(){return C.fullName;};this.getId=function(){return C.id;};this.getLanguage=function(){return C.language;};this.getLanguageBcp47=function(){return C.languageBcp47;};this.getLastName=function(){return C.lastName;};this.getImage=function(){return C.image;};this.isJamActive=function(){return C.isJamActive===true;};this.getTheme=function(){return o.theme;};this.setTheme=function(N){if(this.isSetThemePermitted()===false){var e="setTheme not permitted";jQuery.sap.log.error(e);throw new Error(e);}if(N!==n.theme){this.setChangedProperties("THEME",n.theme,N);n.theme=N;}o.theme=N;o.root=d(N,s);if(o.root){sap.ui.getCore().applyTheme(o.theme,o.root+"/UI5/");}else{sap.ui.getCore().applyTheme(o.theme);}};this.getAccessibilityMode=function(){return C.accessibility;};this.setAccessibilityMode=function(b){if(this.isSetAccessibilityPermitted()===false){var e="setAccessibilityMode not permitted";jQuery.sap.log.error(e);throw new Error(e);}C.accessibility=b;};this.isSetAccessibilityPermitted=function(){return C.setAccessibilityPermitted;};this.isSetThemePermitted=function(){return C.setThemePermitted;};this.getContentDensity=function(){return C.contentDensity;};this.setContentDensity=function(b){if(this.isSetContentDensityPermitted()===false){var e="setContentDensity not permitted";jQuery.sap.log.error(e);throw new Error(e);}this.setChangedProperties("CONTENT_DENSITY",C.contentDensity,b);C.contentDensity=b;};this.isSetContentDensityPermitted=function(){return C.setContentDensityPermitted;};this.getChangedProperties=function(){return c(a);};this.setChangedProperties=function(p,b,e){a.push({name:p,oldValue:b,newValue:e});};this.resetChangedProperties=function(){a=[];};};}());};if(!jQuery.sap.isDeclared('sap.ushell.UserActivityLog')){(function(){"use strict";jQuery.sap.declare("sap.ushell.UserActivityLog");var U=function(){};U.prototype={_maxLoggedMessages:30,_maxMessageByteSize:2048,_maxQueueByteSize:30720,_isActive:false,_observedLaunchpadActions:["createGroup","deleteGroup","resetGroup","changeGroupTitle","moveGroup","addTile","deleteTile","moveTile","externalSearch","openApp","addBookmarkTile"],_observedGeneralActions:["showCatalog","openApp"],messageType:{ACTION:0,ERROR:1},_tileOntapOrigFunc:undefined,activate:function(c){if(this._isActive){return;}this._isActive=true;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(a,i,b){e.subscribe("launchpad",a,t._handleAction,t);});this._observedGeneralActions.forEach(function(a,i,b){e.subscribe(a,t._handleAction,t);});jQuery.sap.log.addLogListener(this);setTimeout(function(){jQuery.sap.require("sap.ushell.ui.launchpad.Tile");t._tileOntapOrigFunc=sap.ushell.ui.launchpad.Tile.prototype.ontap;sap.ushell.ui.launchpad.Tile.prototype.ontap=t._tileOnTapDecorator(t._tileOntapOrigFunc);},0);},deactivate:function(){if(!this._isActive){return;}this._isActive=false;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(a,i,b){e.unsubscribe("launchpad",a,t._handleAction,t);});this._observedGeneralActions.forEach(function(a,i,b){e.unsubscribe(a,t._handleAction,t);});jQuery.sap.log.removeLogListener(this);sap.ushell.ui.launchpad.Tile.prototype.ontap=this._tileOntapOrigFunc;},addMessage:function(t,m,a){if(this._isActive){this._addMessageInternal(t,m,a);}},getLog:function(){return this._getLoggingQueueFromStorage();},getMessageInfo:function(u){var r={userDetails:this._getUserDetails(),shellState:this._getShellState(),navigationData:this._getLastNavActionFromStorage(),userLog:this.getLog(),formFactor:sap.ushell.utils.getFormFactor()};return r;},getMessageInfoAsString:function(u){return JSON.stringify(this.getMessageInfo(u));},onLogEntry:function(d){var e=(typeof d.details!="undefined"&&(d.details!==""))?(d.message+" , "+d.details):d.message;this.addMessage(this.messageType.ERROR,e);},onAttachToLog:function(){},onDetachFromLog:function(){},_tileOnTapDecorator:function(o){var t=this,n,l,a,b,c,d;return function(e,u){var f=this.getMetadata().getName();if(f=="sap.ushell.ui.launchpad.PlusTile"){t.addMessage(t.messageType.ACTION,"Open Catalog for empty group "+this.getGroupId());}else if(f=="sap.ushell.ui.launchpad.Tile"){n=jQuery(e.currentTarget).find('a').first().attr('href');if(n){var g=sap.ushell.Container.getService("URLParsing");var h=g.parseShellHash(n);n='#'+g.constructShellHash({target:{semanticObject:h.semanticObject,action:h.action}});}l=t._getLastNavActionFromStorage();l.time=new Date();l.navigationHash=n;l.tileDebugInfo=this.getDebugInfo();a=sap.ui.getCore().byId(this.getId());b=a.getModel();c=this.getBindingContext();d=c.getPath();l.tileTitle=c.getModel().getProperty(d).title;t._putInLocalStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));t.addMessage(t.messageType.ACTION,"Click on Tile: "+b.getData().title+" Tile debugInfo: "+this.getDebugInfo());}o.apply(this,arguments);};},_addMessageInternal:function(t,m,a){var l=this._getLoggingQueueFromStorage(),b={type:null},p;for(p in this.messageType){if(t==this.messageType[p]){b.type=p;break;}}if(b.type===null){return;}jQuery.extend(b,{messageID:a,messageText:m,time:new Date(),toString:function(){var c=[this.type,this.time];if(typeof this.messageID!=="undefined"){c.push(this.messageID);}c.push(this.messageText);return c.join(" :: ");}});l.push(b);if(l.length>this._maxLoggedMessages){l.shift();}this._putInLocalStorage("sap.ushell.UserActivityLog.loggingQueue",JSON.stringify(l));},_handleAction:function(c,e,d){var m;switch(e){case'deleteTile':m="Delete Tile "+(d.tileId||"");break;case'moveTile':m="Move Tile "+(d.sTileId||"")+" to Group "+(d.toGroupId||"");break;case'createGroup':m="Create Group";break;case'changeGroupTitle':m="Change Group Title of "+(d.groupId||"")+" to "+(d.newTitle||"");break;case'deleteGroup':m="Delete Group "+(d.groupId||"");break;case'addTile':var t=d.catalogTileContext.oModel.oData,T=d.catalogTileContext.sPath,a=this._findInModel(T,t),b=a.id,g=d.groupContext.oModel.oData,G=d.groupContext.sPath,f=this._findInModel(G,g),h=f.groupId;m="Add Tile "+(b||"")+" to Group "+(h||"");break;case'moveGroup':m="Move Group from index "+(d.fromIndex||"")+" to index "+(d.toIndex||"");break;case'openApp':m="Open application "+d.action;var l=this._getLastNavActionFromStorage();l.applicationInformation=d.oApplication;if(!this._hashSegmentsEqual(l.navigationHash,d.sShellHash)){l.tileDebugInfo="";}l.navigationHash=d.sShellHash;this._putInLocalStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));break;case'addBookmarkTile':m="Add Bookmark "+(d.title||"")+" "+(d.subtitle||"")+" for URL: "+(d.url||"");break;case'showCatalog':m="Show Catalog";break;default:break;}this.addMessage(this.messageType.ACTION,m);},_findInModel:function(p,m){var a,b=m,i,c;try{a=p.split("/");for(i=0;i<a.length;i=i+1){if(c!==a[i]){continue;}b=b[c];}}catch(e){return undefined;}return b;},_getUserDetails:function(u){var a=sap.ushell.Container.getUser();return{fullName:a.getFullName()||"",userId:a.getId()||"",eMail:a.getEmail()||"",Language:a.getLanguage()||""};},_getShellState:function(){var n=sap.ui.getCore().byId("navContainer"),m,r="";if(n!==undefined){m=n.getModel();r=m.getProperty("/currentState/stateName");}return r;},_getLoggingQueueFromStorage:function(){var l=this._getFromLocalStorage("sap.ushell.UserActivityLog.loggingQueue");var q=[];if(l){try{q=JSON.parse(l);}catch(e){}}return q;},_getLastNavActionFromStorage:function(){var l=this._getFromLocalStorage("sap.ushell.UserActivityLog.lastNavigationActionData");return(l?JSON.parse(l):{});},_hashSegmentsEqual:function(u,a){if((!u)||(!a)){return false;}return(this._getHashSegment(u)==this._getHashSegment(a))?true:false;},_getHashSegment:function(u){var i=u.indexOf("~"),a;if(i>-1){return u.substring(0,i);}a=u.indexOf("?");if(a>-1){return u.substring(0,a);}return u;},_getFromLocalStorage:function(k){var r=null;try{r=localStorage.getItem(k);}catch(e){}return r;},_putInLocalStorage:function(k,v){try{localStorage.setItem(k,v);}catch(e){}}};sap.ushell.UserActivityLog=new U();})();};if(!jQuery.sap.isDeclared('sap.ushell.adapters.local.ContainerAdapter')){(function(){"use strict";jQuery.sap.declare("sap.ushell.adapters.local.ContainerAdapter");sap.ushell.adapters.local.ContainerAdapter=function(s,p,a){var A,u,U,k;A=jQuery.sap.getObject("config",0,a);u={id:"DEFAULT_USER",firstName:"Default",lastName:"User",fullName:"Default User",accessibility:false,isJamActive:false,language:"en",bootTheme:{theme:"sap_bluecrystal",root:""},setAccessibilityPermitted:true,setThemePermitted:true};for(k in A){if(A.hasOwnProperty(k)){u[k]=A[k];}}this.getSystem=function(){return s;};this.getUser=function(){return U;};this.load=function(){var b,c,o,d,D=new jQuery.Deferred();if(A&&typeof A.setUserCallback==="string"){d=new jQuery.Deferred();b=A.setUserCallback.split(".");c=b.pop();if(b.length===0){o=window;}else{o=jQuery.sap.getObject(b.join("."));}if(o&&typeof o[c]==="function"){o[c](d);}else{throw new sap.ushell.utils.Error("ContainerAdapter local platform: Cannot execute setUserCallback - "+A.setUserCallback);}d.done(function(e){["id","firstName","lastName","fullName"].forEach(function(v){if(e[v]&&typeof A.setUserCallback!=="function"){u[v]=e[v];}});U=new sap.ushell.User(u);D.resolve();});}else{U=new sap.ushell.User(u);D.resolve();}return D.promise();};this.logout=function(l){jQuery.sap.log.info("Demo system logged out: "+s.getAlias(),null,"sap.ushell.adapters.local.ContainerAdapter");r();return(new jQuery.Deferred()).resolve().promise();};};sap.ushell.utils.testPublishAt(sap.ushell.adapters.local.ContainerAdapter);function r(){location.reload();}}());};if(!jQuery.sap.isDeclared('sap.ushell.components.container.ApplicationContainer')){(function(){"use strict";var p="sap.ushell.components.container.",c=p+"ApplicationContainer",d="sap.ushell.Container.dirtyState.",l,r,f=true;jQuery.sap.declare("sap.ushell.components.container.ApplicationContainer");jQuery.sap.require('sap.ui.core.UIComponent');jQuery.sap.require('sap.m.MessagePopover');sap.ushell.utils.testPublishAt(sap.ushell.components.container);function a(T){var C=sap.ushell.Container.getService("CrossApplicationNavigation");C.isUrlSupported(T.url).done(function(){T.promise.resolve({"allowed":true,"id":T.id});}).fail(function(){T.promise.resolve({"allowed":false,"id":T.id});});}l=new sap.ushell.utils.Map();sap.ushell.components.container.ApplicationType={URL:"URL",WDA:"WDA",NWBC:"NWBC"};sap.ushell.utils.testPublishAt(sap.ushell.components.container);function g(C){return l.get(C.getId());}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function b(U){var P=jQuery.sap.getUriParameters(U).mParams,e=P["sap-xapp-state"];delete P["sap-xapp-state"];return{startupParameters:P,"sap-xapp-state":e};}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function h(K,e){if(!r){r=jQuery.sap.resources({url:jQuery.sap.getModulePath(p)+"/resources/resources.properties",language:sap.ui.getCore().getConfiguration().getLanguage()});}return r.getText(K,e);}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function i(){return new sap.ui.core.Icon({size:"2rem",src:"sap-icon://error",tooltip:h("an_error_has_occured")});}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function j(C){var e=C.getAggregation("child"),B;if(e instanceof sap.ui.core.ComponentContainer){B=e.getComponentInstance().getMetadata().getName().replace(/\.Component$/,"");jQuery.sap.log.debug("unloading component "+B,null,c);}C.destroyAggregation("child");}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function k(C,U,e){var B,D,I,L,M,E,N,V={},F,G;I=U.indexOf("?");if(I>=0){E=b(U);V=E.startupParameters;U=U.slice(0,I);}if(U.slice(-1)!=='/'){U+='/';}if(/\.view\.(\w+)$/i.test(e)){M=/^SAPUI5=(?:([^\/]+)\/)?([^\/]+)\.view\.(\w+)$/i.exec(e);if(!M){jQuery.sap.log.error("Invalid SAPUI5 URL",e,c);return i();}N=M[1];F=M[2];G=M[3].toUpperCase();if(N){F=N+"."+F;}else{L=F.lastIndexOf(".");if(L<1){jQuery.sap.log.error("Missing namespace",e,c);return i();}N=F.slice(0,L);}}else{N=e.replace(/^SAPUI5=/,"");}jQuery.sap.registerModulePath(N,U+N.replace(/\./g,'/'));j(C);if(F){if(C.getApplicationConfiguration()){V.config=C.getApplicationConfiguration();}D=sap.ui.view({id:C.getId()+"-content",type:G,viewData:V||{},viewName:F});C.fireEvent("applicationConfiguration");}else{jQuery.sap.log.debug("loading component "+N,null,c);var H=E?{startupParameters:E.startupParameters,"sap-xapp-state":E["sap-xapp-state"]}:{startupParameters:{}};if(C.getApplicationConfiguration()){H.config=C.getApplicationConfiguration();}B=sap.ui.component({id:C.getId()+"-component",componentData:H,name:N});C.fireEvent("applicationConfiguration",{"configuration":B.getMetadata().getConfig()});D=new sap.ui.core.ComponentContainer({id:C.getId()+"-content",component:B});}D.setWidth(C.getWidth());D.setHeight(C.getHeight());D.addStyleClass("sapUShellApplicationContainer");C.setAggregation("child",D,true);return D;}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function m(e,D){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.components.container.ApplicationContainer",e,D);},0);}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function n(C,U,e){var I,B,D,E,F={startupParameters:{}};I=U.indexOf("?");if(I>=0){E=b(U);F={startupParameters:E.startupParameters,"sap-xapp-state":E["sap-xapp-state"]};U=U.slice(0,I);}if(C.getApplicationConfiguration()){F.config=C.getApplicationConfiguration();}if(U.slice(-1)!=='/'){U+='/';}jQuery.sap.registerModulePath(e,U);jQuery.sap.require("sap.ushell.services.CrossApplicationNavigation");j(C);jQuery.sap.log.debug("loading component "+e,null,c);sap.ui.getCore().getEventBus().publish("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",{name:e});B=sap.ui.component({id:C.getId()+"-component",name:e,componentData:F});C.fireEvent("applicationConfiguration",{"configuration":B.getMetadata().getConfig()});D=new sap.ui.core.ComponentContainer({id:C.getId()+"-content",component:B});D.setHeight(C.getHeight());D.setWidth(C.getWidth());D.addStyleClass("sapUShellApplicationContainer");C._disableRouterEventHandler=o.bind(this,B);sap.ui.getCore().getEventBus().subscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",C._disableRouterEventHandler);C.setAggregation("child",D,true);m("componentCreated",{component:B});return D;}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function o(C){var e;if((C instanceof sap.ui.core.Component)&&(typeof C.getRouter==="function")){e=C.getRouter();if(e&&(typeof e.stop==="function")){jQuery.sap.log.info("router stopped for instance "+C.getId());e.stop();}}}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function q(U){var e=document.createElement("a"),C=jQuery.sap.getUriParameters(U).get("sap-client"),B;e.href=U;B=e.protocol+"//"+e.host;return new sap.ushell.System({alias:C?B+"?sap-client="+C:B,baseUrl:B,client:C||undefined,platform:"abap"});}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function s(C,M){var T=false,D=C.getDomRef(),e=C.getApplicationType(),U,O;if(D){if(e===sap.ushell.components.container.ApplicationType.NWBC){U=URI(D.src);O=U.protocol()+"://"+U.host();T=(M.source===D.contentWindow)||(M.origin===O);}else if(e===sap.ushell.components.container.ApplicationType.URL){U=URI();O=U.protocol()+"://"+U.host();T=(M.origin===O);}}return T;}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function t(C,M,e){var P=jQuery.sap.getObject("sap-ushell-config.services.PostMessage.config",0),S=e&&e.service;if(!S||S.indexOf("sap.ushell.services.CrossApplicationNavigation")!==0||e.type!=="request"){return;}if(P&&P.enabled===false){jQuery.sap.log.warning("Received message for CrossApplicationNavigation, but this "+"feature is disabled. It can be enabled via launchpad configuration "+"property 'services.PostMessage.config.enabled: true'",undefined,"sap.ushell.components.container.ApplicationContainer");return;}if(!s(C,M)){jQuery.sap.log.warning("Received message from untrusted origin: "+M.origin,M.data,"sap.ushell.components.container.ApplicationContainer");return;}function B(F,G){M.source.postMessage(JSON.stringify({type:"response",service:e.service,request_id:e.request_id,status:F,body:G}),M.origin);}function D(F){switch(F){case"sap.ushell.services.CrossApplicationNavigation.hrefForExternal":return new jQuery.Deferred().resolve(sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal(e.body.oArgs)).promise();case"sap.ushell.services.CrossApplicationNavigation.getSemanticObjectLinks":return sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(e.body.sSemanticObject,e.body.mParameters,e.body.bIgnoreFormFactors,undefined,undefined,e.body.bCompactIntents);case"sap.ushell.services.CrossApplicationNavigation.isIntentSupported":return sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported(e.body.aIntents);case"sap.ushell.services.CrossApplicationNavigation.isNavigationSupported":return sap.ushell.Container.getService("CrossApplicationNavigation").isNavigationSupported(e.body.aIntents);case"sap.ushell.services.CrossApplicationNavigation.toExternal":return new jQuery.Deferred().resolve(sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(e.body.oArgs)).promise();case"sap.ushell.services.CrossApplicationNavigation.getAppStateData":return sap.ushell.Container.getService("CrossApplicationNavigation").getAppStateData(e.body.sAppStateKey);default:return undefined;}}try{D(e.service).done(function(R){B("success",{result:R});}).fail(function(F){B("error",{message:F});});}catch(E){B("error",{message:E.message});}}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function u(C,M){var B=M.data;if(typeof B==="string"){try{B=JSON.parse(M.data);}catch(e){jQuery.sap.log.debug("Message received from origin '"+M.origin+"' cannot be parsed: "+e,B,"sap.ushell.components.container.ApplicationContainer");return;}}if(B.action==="pro54_setGlobalDirty"&&localStorage.getItem(C.globalDirtyStorageKey)===sap.ushell.Container.DirtyState.PENDING){if(!s(C,M)){jQuery.sap.log.warning("Received message from untrusted origin: "+M.origin,B,"sap.ushell.components.container.ApplicationContainer");return;}jQuery.sap.log.debug("getGlobalDirty() pro54_setGlobalDirty SetItem key:"+C.globalDirtyStorageKey+" value: "+B.parameters.globalDirty,null,"sap.ushell.components.container.ApplicationContainer");sap.ushell.utils.localStorageSetItem(C.globalDirtyStorageKey,B.parameters.globalDirty,true);}else{t(C,M,B);}}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function v(C,e){var I=C.getDomRef();if(C.getApplicationType()===sap.ushell.components.container.ApplicationType.NWBC&&I&&I.tagName==="IFRAME"){I.contentWindow.postMessage(JSON.stringify({action:"pro54_disableDirtyHandler"}),'*');e.preventDefault();}}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function w(R,C,e){R.write("<div").writeControlData(C).writeAccessibilityState(C).addClass("sapUShellApplicationContainer").writeClasses(C).addStyle("height",C.getHeight()).addStyle("width",C.getWidth()).writeStyles().write(">").renderControl(e);R.write("</div>");}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function x(U){var T,e=function(){return jQuery.sap.getUriParameters().get("sap-theme")||sap.ushell.Container.getUser().getTheme()||sap.ui.getCore().getConfiguration().getTheme();},B=function(){var D=sap.ushell.utils.getParameterValueBoolean("sap-accessibility");if(D!==undefined){return D;}return sap.ushell.Container.getUser().getAccessibilityMode();},V,C=function(){var V=sap.ui.getVersionInfo().version,M=/\d+\.\d+\.\d+/.exec(V);if(M&&M[0]){V=M[0];}return V;};U+=U.indexOf("?")>=0?"&":"?";U+="sap-ie=edge";T=e();if(T){U+=U.indexOf("?")>=0?"&":"?";U+="sap-theme="+encodeURIComponent(T);}if(B()){U+=U.indexOf("?")>=0?"&":"?";U+="sap-accessibility=X";}V=C();if(V){U+=U.indexOf("?")>=0?"&":"?";U+="sap-shell="+encodeURIComponent("FLP"+V+"-NWBC");}return U;}function y(R,C,U,e){var B=C.getAggregation("child");if(!B||C._bRecreateChild){B=n(C,U,e);C._bRecreateChild=false;}w(R,C,B);}function z(C,K,V){var O=C.getProperty(K);if(jQuery.sap.equal(O,V)){return;}C.setProperty(K,V);C._bRecreateChild=true;}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function A(R,C,e,U,B){var L;localStorage.removeItem(C.globalDirtyStorageKey);if(B&&B.indexOf("SAPUI5.Component=")===0&&e===sap.ushell.components.container.ApplicationType.URL){y(R,C,U,B.replace(/^SAPUI5\.Component=/,""));return;}if(B&&B.indexOf("SAPUI5=")===0&&e===sap.ushell.components.container.ApplicationType.URL){w(R,C,k(C,U,B));return;}jQuery.sap.log.debug("Not resolved as \"SAPUI5.Component=\" or \"SAPUI5=\" , "+"will attempt to load into iframe "+B);try{U=C.getFrameSource(e,U,B);}catch(D){jQuery.sap.log.error(D.message||D,null,c);C.fireEvent("applicationConfiguration");R.renderControl(i());return;}if(sap.ushell.Container){L=g(C);if(!L){if(e===sap.ushell.components.container.ApplicationType.NWBC){L=v.bind(null,C);l.put(C.getId(),L);sap.ushell.Container.attachLogoutEvent(L);sap.ushell.Container.addRemoteSystem(q(U));}}else{if(e!==sap.ushell.components.container.ApplicationType.NWBC){sap.ushell.Container.detachLogoutEvent(L);l.remove(C.getId());}}}if(e===sap.ushell.components.container.ApplicationType.NWBC){U=x(U);sap.ushell.utils.localStorageSetItem(C.globalDirtyStorageKey,sap.ushell.Container.DirtyState.INITIAL);}C.fireEvent("applicationConfiguration");R.write("<iframe").writeControlData(C).writeAccessibilityState(C).writeAttributeEscaped("src",U).addClass("sapUShellApplicationContainer").writeClasses(C).addStyle("height",C.getHeight()).addStyle("width",C.getWidth()).writeStyles().write("></iframe>");}sap.ui.core.Control.extend(c,{metadata:{properties:{additionalInformation:{defaultValue:"",type:"string"},application:{type:"object"},applicationConfiguration:{type:"object"},applicationType:{defaultValue:"URL",type:p+"ApplicationType"},height:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},navigationMode:{defaultValue:"",type:"string"},text:{defaultValue:"",type:"string"},url:{defaultValue:"",type:"string"},visible:{defaultValue:true,type:"boolean"},width:{defaultValue:"100%",type:"sap.ui.core.CSSSize"}},events:{"applicationConfiguration":{}},aggregations:{child:{multiple:false,type:"sap.ui.core.Control",visibility:"hidden"}},library:"sap.ushell"},exit:function(){var L;if(sap.ushell.Container){L=g(this);if(L){sap.ushell.Container.detachLogoutEvent(L);l.remove(this.getId());}}localStorage.removeItem(this.globalDirtyStorageKey);if(this._unloadEventListener){removeEventListener("unload",this._unloadEventListener);}if(this._disableRouterEventHandler){sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",this._disableRouterEventHandler);}if(this._storageEventListener){removeEventListener("storage",this._storageEventListener);}if(this._messageEventListener){removeEventListener("message",this._messageEventListener);}j(this);if(sap.ui.core.Control.exit){sap.ui.core.Control.exit.apply(this);}},init:function(){var e=this;this.globalDirtyStorageKey=d+jQuery.sap.uid();this._unloadEventListener=this.exit.bind(this);addEventListener("unload",this._unloadEventListener);this._storageEventListener=function(S){if(S.key===e.globalDirtyStorageKey&&S.newValue===sap.ushell.Container.DirtyState.PENDING&&e.getApplicationType()===sap.ushell.components.container.ApplicationType.NWBC){var I=e.getDomRef();if(I&&I.tagName==="IFRAME"){jQuery.sap.log.debug("getGlobalDirty() send pro54_getGlobalDirty ",null,"sap.ushell.components.container.ApplicationContainer");I.contentWindow.postMessage(JSON.stringify({action:"pro54_getGlobalDirty"}),'*');}}};addEventListener('storage',this._storageEventListener);this._messageEventListener=u.bind(null,this);addEventListener('message',this._messageEventListener);if(f){var M={"asyncURLHandler":a};if(sap.m.MessagePopover&&sap.m.MessagePopover.setDefaultHandlers){sap.m.MessagePopover.setDefaultHandlers(M);}f=false;}},renderer:function(R,C){var e=C.getApplication(),L=C.launchpadData,B;if(!C.getVisible()){w(R,C);return;}if(C.error){delete C.error;w(R,C,i());}else if(!e){A(R,C,C.getApplicationType(),C.getUrl(),C.getAdditionalInformation());}else if(!e.isResolvable()){A(R,C,e.getType(),e.getUrl(),"");}else if(L){A(R,C,L.applicationType,L.Absolute.url.replace(/\?$/,""),L.applicationData);}else{jQuery.sap.log.debug("Resolving "+e.getUrl(),null,c);e.resolve(function(D){jQuery.sap.log.debug("Resolved "+e.getUrl(),JSON.stringify(D),c);C.launchpadData=D;j(C);},function(E){var D=e.getMenu().getDefaultErrorHandler();if(D){D(E);}j(C);C.error=E;});B=new sap.m.Text({text:h("loading",[e.getText()])});j(C);C.setAggregation("child",B);w(R,C,B);}}});sap.ushell.components.container.ApplicationContainer.prototype.getFrameSource=function(e,U,B){if(!Object.prototype.hasOwnProperty.call(sap.ushell.components.container.ApplicationType,e)){throw new Error("Illegal application type: "+e);}return U;};sap.ushell.components.container.ApplicationContainer.prototype.setUrl=function(V){z(this,"url",V);};sap.ushell.components.container.ApplicationContainer.prototype.setAdditionalInformation=function(V){z(this,"additionalInformation",V);};sap.ushell.components.container.ApplicationContainer.prototype.setApplicationType=function(V){z(this,"applicationType",V);};}());};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.controls.PictureTile')){jQuery.sap.declare("sap.ushell.components.factsheet.controls.PictureTile");jQuery.sap.require('sap.m.CustomTile');sap.m.CustomTile.extend("sap.ushell.components.factsheet.controls.PictureTile",{metadata:{deprecated:true,library:"sap.ushell",properties:{"height":{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'32px'},"width":{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'32px'}},associations:{"tileContent":{type:"sap.ushell.components.factsheet.controls.PictureViewerItem",multiple:false}},events:{"pictureDelete":{}}}});sap.ushell.components.factsheet.controls.PictureTile.M_EVENTS={'pictureDelete':'pictureDelete'};sap.ushell.components.factsheet.controls.PictureTile.prototype.init=function(t){this._oDeletePictureButton=new sap.m.Button({icon:"sap-icon://sys-cancel",press:jQuery.proxy(this._deletePictureRequestHandler,this),type:sap.m.ButtonType.Transparent}).addStyleClass("sapCaUiPTDeleteButton");if(!sap.ui.Device.system.desktop){this.attachPress(this._tilePressedHandler);this.attachBrowserEvent("swipe",jQuery.proxy(this._tileSwipedHandler,this));this._oDeletePictureButton.addStyleClass("hide");}};sap.ushell.components.factsheet.controls.PictureTile.prototype.setTileContent=function(t){this.setContent(null);if(t){var i=t.getImage();this.setContent(i);}else{this.setContent(null);}this.setAssociation("tileContent",t);};sap.ushell.components.factsheet.controls.PictureTile.prototype.setSize=function(w,h){this._width=w;this._height=h;var $=this.$();if($){$.css({width:w+"px",height:h+"px"});jQuery.sap.byId(this.getId()+"-wrapper").addClass("sapCaUiPTWrapper");}};sap.ushell.components.factsheet.controls.PictureTile.prototype._tilePressedHandler=function(e){this.switchVisibility();};sap.ushell.components.factsheet.controls.PictureTile.prototype.switchVisibility=function(v){var $=this._oDeletePictureButton.$();if(v===undefined){$.toggleClass("hide");}else{$.toggleClass("hide",!v);}};sap.ushell.components.factsheet.controls.PictureTile.prototype._tileSwipedHandler=function(e){var $=this._oDeletePictureButton.$();if($&&!$.hasClass("hide")){$.addClass("hide");}};sap.ushell.components.factsheet.controls.PictureTile.prototype._deletePictureRequestHandler=function(){this.firePictureDelete();};};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.controls.PictureViewer')){jQuery.sap.declare("sap.ushell.components.factsheet.controls.PictureViewer");jQuery.sap.require('sap.m.TileContainer');sap.m.TileContainer.extend("sap.ushell.components.factsheet.controls.PictureViewer",{metadata:{deprecated:true,library:"sap.ushell",properties:{"tileScaling":{type:"float",group:"Misc",defaultValue:0.95},"removable":{type:"boolean",group:"Misc",defaultValue:false}},defaultAggregation:"items",aggregations:{"items":{type:"sap.ushell.components.factsheet.controls.PictureViewerItem",multiple:true,singularName:"item"}},events:{"pictureDeleted":{}}}});sap.ushell.components.factsheet.controls.PictureViewer.M_EVENTS={'pictureDeleted':'pictureDeleted'};jQuery.sap.declare("sap.ushell.components.factsheet.controls.PictureViewer");jQuery.sap.require('sap.ui.core.ResizeHandler');jQuery.sap.require('sap.m.TileContainer');sap.ushell.components.factsheet.controls.PictureViewer.prototype.init=function(){sap.m.TileContainer.prototype.init.apply(this);this.setEditable(false);if(sap.ui.getCore().isMobile()){jQuery(window).bind("tap",jQuery.proxy(this._reset,this));var s=sap.ui.getCore().getStaticAreaRef();this.$blocker=jQuery("<div class='sapCaPVBly sapUiBLy'></div>").css("visibility","hidden");jQuery(s).append(this.$blocker);}if(!sap.ui.getCore().isMobile()){jQuery(window).bind("resize",jQuery.proxy(this._resize,this));}this.addStyleClass("sapCaPW");this.addStyleClass("sapCaPWRendering");};sap.ushell.components.factsheet.controls.PictureViewer.prototype._resize=function(){if(this._oDragSession){return;}setTimeout(jQuery.proxy(function(){this._applyDimension();this._update(false);delete this._iInitialResizeTimeout;},this),this._iInitialResizeTimeout);this._iInitialResizeTimeout=0;};sap.ushell.components.factsheet.controls.PictureViewer.prototype.exit=function(){this.$blocker.remove();if(!sap.ui.getCore().isMobile()){jQuery(window).unbind("resize",jQuery.proxy(this._resize,this));}sap.m.TileContainer.prototype.exit.apply(this);if(!sap.ui.Device.system.desktop){jQuery(window).unbind("tap",jQuery.proxy(this._reset,this));}};sap.ushell.components.factsheet.controls.PictureViewer.prototype.setTileScaling=function(t){if(t<0||t>1){t=0.75;jQuery.sap.log.error("Tile Scaling should be a float value between 0 and 1 and not "+t+". Setting it to 0.75 by default.");}this.setProperty('tileScaling',t);};sap.ushell.components.factsheet.controls.PictureViewer.prototype.addItem=function(i){this.insertItem(i,this.getItems().length);};sap.ushell.components.factsheet.controls.PictureViewer.prototype.insertItem=function(i,I){var t=new sap.ushell.components.factsheet.controls.PictureTile({tileContent:i});t.attachPictureDelete(jQuery.proxy(this._deletePictureRequestHandler,this));this.insertTile(t,I);this.insertAggregation("items",i,I);return this;};sap.ushell.components.factsheet.controls.PictureViewer.prototype.insertTile=function(t,i){t.attachPictureDelete(jQuery.proxy(this._deletePictureRequestHandler,this));sap.m.TileContainer.prototype.insertTile.apply(this,arguments);};sap.ushell.components.factsheet.controls.PictureViewer.prototype.deleteTile=function(t){sap.m.TileContainer.prototype.deleteTile.apply(this,arguments);t.destroy();};sap.ushell.components.factsheet.controls.PictureViewer.prototype.deletePicture=function(i){var p,a,n;n=this.getTiles().length;if(typeof i!="number"||i<0||i>=n){p=this.getPageFirstTileIndex();}else{p=i;}if(p>-1){a=this.getTiles()[p];a.detachPictureDelete(jQuery.proxy(this._deletePictureRequestHandler,this));this.deleteTile(a);this.removeAggregation("items",p,true);}else{jQuery.sap.log.warning("Cannot find and delete a picture at index : "+i);}return this;};sap.ushell.components.factsheet.controls.PictureViewer.prototype.selectPicture=function(i){var n=this.getTiles().length;if(typeof i!="number"){i=0;}else if(i<0){i=0;}else if(i>=n){i=n-1;}if(this._bRendered){this.addStyleClass("sapCaPWRendering");}this._selectedIndex=i;return this;};sap.ushell.components.factsheet.controls.PictureViewer.prototype.setSelectedIndex=function(i){this.selectPicture(i);};sap.ushell.components.factsheet.controls.PictureViewer.prototype.getCurrentPictureIndex=function(){return this.getPageFirstTileIndex();};sap.ushell.components.factsheet.controls.PictureViewer.prototype._deletePictureRequestHandler=function(e){var p=this.indexOfTile(e.getSource());this.deleteTile(e.getSource());this.firePictureDeleted({index:p});};sap.ushell.components.factsheet.controls.PictureViewer.prototype._reset=function(e){var i=this.getCurrentPictureIndex();var t=this.getTiles();if(i>-1&&t&&t.length>i){var T=t[i];if(T){var $=jQuery(e.target);var a=this.$();if(a.length>0&&$.length>0){var b=$.closest(this.$());if(b.length===0){T.switchVisibility(false);}}}}};sap.ushell.components.factsheet.controls.PictureViewer.prototype.setRemovable=function(v){this.setProperty("removable",v,true);this.toggleStyleClass("sapCaPWEditable",v);};sap.ushell.components.factsheet.controls.PictureViewer.prototype.setEditable=function(v){sap.m.TileContainer.prototype.setEditable.call(this,false);};sap.ushell.components.factsheet.controls.PictureViewer.prototype._getTileDimension=function(){if(!this._bRendered){return;}var $=jQuery.sap.byId(this.getId()+"-scrl");var t={width:$.width(),height:$.height()};return t;};sap.ushell.components.factsheet.controls.PictureViewer.prototype.onBeforeRendering=function(){this.addStyleClass("sapCaPWRendering");};sap.ushell.components.factsheet.controls.PictureViewer.prototype.onAfterRendering=function(){var t=this;this._bRendered=true;this._applyDimension();this.$().toggleClass("sapCaPWEditable",this.getRemovable()===true);this._sInitialResizeTimeoutId=setTimeout(function(){t.addStyleClass("sapCaPWRendering");t._applyPageStartIndex(t._selectedIndex);t._update(false);},this._iInitialResizeTimeout);if(sap.ui.Device.system.desktop){var f=this.getTiles()[0],T=this._iInitialResizeTimeout;if(!!f){setTimeout(jQuery.proxy(function(){this._findTile(f.$()).focus();},this),T);}}};sap.ushell.components.factsheet.controls.PictureViewer.prototype._update=function(a){sap.m.TileContainer.prototype._update.apply(this,arguments);this.removeStyleClass("sapCaPWRendering");if(sap.ui.getCore().isMobile()){var t=this;var b=this.$blocker;setTimeout(jQuery.proxy(function(){b.fadeOut(200,function(){t.css("visibility","hidden").css("z-index",0);});},this),250);}};sap.ushell.components.factsheet.controls.PictureViewer.prototype._applyDimension=function(){var d=this._getContainerDimension(),i=this.getId(),$=this.$(),t,o=10,T=60,c=jQuery.sap.byId(i+"-cnt"),a,b,p=jQuery.sap.byId(i+"-pager").outerHeight();jQuery.sap.byId(i+"-scrl").css({width:d.outerwidth+"px",height:(d.outerheight-p)+"px"});c.css({height:(d.outerheight-p)+"px",visibility:"visible"});$.css("visibility","visible");t=$.position();a=c.position();b=c.outerHeight();if(jQuery.device.is.phone){o=2;}else if(sap.ui.Device.system.desktop){o=0;}jQuery.sap.byId(i+"-blind").css({top:(a.top+o)+"px",left:(a.left+o)+"px",width:(c.outerWidth()-o)+"px",height:(b-o)+"px"});jQuery.sap.byId(i+"-rightedge").css({top:(t.top+o+T)+"px",right:o+"px",height:(b-o-T)+"px"});jQuery.sap.byId(i+"-leftedge").css({top:(t.top+o+T)+"px",left:(t.left+o)+"px",height:(b-o-T)+"px"});};sap.ushell.components.factsheet.controls.PictureViewer.prototype.showBlockerLayer=function(c){if(sap.ui.getCore().isMobile()){var a=20;jQuery(sap.ui.getCore().getStaticAreaRef()).children().each(function(i,v){var z=parseInt(jQuery(v).css("z-index"),10);if(!isNaN(z)){a=Math.max(a,z);}});jQuery.sap.log.debug("blocker layer z-index calculated : "+a+1);this.$blocker.css("z-index",a+1).css("visibility","visible").fadeIn(200,function(){if(c){c.call();}});}else{if(c){c.call();}}};};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.controls.PictureViewerItem')){jQuery.sap.declare("sap.ushell.components.factsheet.controls.PictureViewerItem");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.ushell.components.factsheet.controls.PictureViewerItem",{metadata:{deprecated:true,library:"sap.ushell",properties:{"src":{type:"string",group:"Misc",defaultValue:null}},aggregations:{"image":{type:"sap.m.Image",multiple:false}}}});
/*!
 * @copyright@
*/
sap.ushell.components.factsheet.controls.PictureViewerItem.prototype.setSrc=function(s){this.setProperty("src",s);var i=this.getImage();if(i==null){i=new sap.m.Image();}i.setSrc(s);this.setImage(i);return this;};sap.ushell.components.factsheet.controls.PictureViewerItem.prototype.exit=function(){var i=this.getImage();if(i){i.destroy();}};};if(!jQuery.sap.isDeclared('sap.ushell.components.flp.Component')){
// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
jQuery.sap.declare("sap.ushell.components.flp.Component");if(!window['sap-ui-debug']){try{jQuery.sap.require('sap.fiori.flp-controls');}catch(e){jQuery.sap.log.warning('flp-controls failed to load: '+e.message);}}jQuery.sap.require('sap.ui.core.UIComponent');sap.ui.core.UIComponent.extend("sap.ushell.components.flp.Component",{metadata:{routing:{config:{viewType:"JS",controlAggregation:"pages",controlId:"navContainerFlp",clearAggregation:false,routerClass:sap.ushell.components.flp.CustomRouter},targets:{catalog:{viewName:"sap.ushell.components.flp.launchpad.catalog.Catalog"},home:{viewName:"sap.ushell.components.flp.launchpad.dashboard.DashboardContent"}},routes:[{name:"home",target:'home',pattern:"home"}]},version:"1.32.6",library:"sap.ushell.components.flp",dependencies:{libs:["sap.m"]},config:{semanticObject:'Shell',action:'home',title:sap.ushell.resources.i18n.getText("homeBtn_tooltip"),fullWidth:true,hideLightBackground:true,compactContentDensity:true,cozyContentDensity:true}},parseOldCatalogParams:function(u){var p=jQuery.sap.getUriParameters(u).mParams,v;for(var k in p){if(p.hasOwnProperty(k)){v=p[k][0];p[k]=v.indexOf('/')!==-1?encodeURIComponent(v):v;}}return p;},handleNavigationFilter:function(n){"use strict";var s=sap.ushell.Container.getService("URLParsing").parseShellHash(n);if(s&&s.semanticObject==='shell'&&s.action==='catalog'){var p=this.parseOldCatalogParams(n);setTimeout(function(){this.getRouter().navTo('catalog',{filters:JSON.stringify(p)});}.bind(this),0);return this.oShellNavigation.NavigationFilterStatus.Abandon;}return this.oShellNavigation.NavigationFilterStatus.Continue;},createContent:function(){"use strict";this.oRouter=this.getRouter();this.oModel=new sap.ui.model.json.JSONModel({groups:[],animationRendered:false,tagFiltering:true,catalogSelection:true,tileActionModeEnabled:false,tileActionModeActive:false,isInDrag:false,rtl:sap.ui.getCore().getConfiguration().getRTL(),personalization:true,editTitle:false,tagList:[],selectedTags:[],userPreferences:{entries:[]}});this.oModel.setSizeLimit(10000);this.setModel(this.oModel);this.oConfig=this.getComponentData().config;this.oShellConfig=sap.ushell.renderers.fiori2.RendererExtensions.getConfiguration();var p=(this.oConfig&&(this.oConfig.enablePersonalization||this.oConfig.enablePersonalization===undefined))&&(this.oShellConfig&&this.oShellConfig.enablePersonalization||this.oShellConfig.enablePersonalization===undefined);if(p){this.oRouter.addRoute({name:"catalog",target:'catalog',pattern:"catalog/:filters:"});}this.oRouter.addRoute({name:"all",target:'home',pattern:":all*:"});this._setConfigurationToModel(this.oConfig);jQuery.sap.require("sap.ushell.components.flp.launchpad.DashboardManager");this.oDashboardManager=new sap.ushell.components.flp.launchpad.DashboardManager("dashboardMgr",{model:this.oModel,config:this.oConfig,router:this.oRouter});jQuery.sap.require("sap.ushell.resources");this.setModel(sap.ushell.resources.i18nModel,"i18n");var n,m=window.matchMedia("(min-width: 800px)"),h=function(a){this.oModel.setProperty("/isPhoneWidth",!a.matches);}.bind(this);if(m.addListener){m.addListener(h);h(m);}sap.ui.getCore().getEventBus().subscribe("showCatalog",this.showCatalog,this);sap.ui.getCore().getEventBus().subscribe("launchpad","togglePane",this._createAndAddGroupList,this);this.bContactSupportEnabled=sap.ushell.Container.getService("SupportTicket").isEnabled();if(this.bContactSupportEnabled){jQuery.sap.require("sap.ushell.UserActivityLog");sap.ushell.UserActivityLog.activate();}n=this.initNavContainer();this.setInitialConfiguration();this.oShellNavigation=sap.ushell.Container.getService("ShellNavigation");this.oShellNavigation.registerNavigationFilter(jQuery.proxy(this.handleNavigationFilter,this));var H=hasher.getHash();var s=sap.ushell.Container.getService("URLParsing").parseShellHash(H);if(s&&s.semanticObject==='shell'&&s.action==='catalog'){var P=this.parseOldCatalogParams(H);var c=this.getMetadata().getConfig();this.oShellNavigation.toExternal({target:{semanticObject:c.semanticObject,action:c.action}});this.getRouter().navTo('catalog',{filters:JSON.stringify(P)});}return n;},_createAndAddGroupList:function(c,e,d){if(d.currentContent&&(d.currentContent.indexOf('groupList')!==-1||!d.currentContent.length)){var C=this.oConfig,g=this.runAsOwner(function(){return this.oDashboardManager.getGroupListView(C);}.bind(this));if(!g.alreadyCreated){g.groupList.setModel(this.oModel);g.groupList.setModel(sap.ushell.resources.i18nModel,"i18n");sap.ushell.renderers.fiori2.RendererExtensions.setLeftPaneContent(g.groupList,"home");}}},_setConfigurationToModel:function(c){var m=this.oModel,t;if(c){if(c.enablePersonalization!==undefined&&this.oShellConfig.enablePersonalization!==undefined){m.setProperty("/personalization",c.enablePersonalization&&this.oShellConfig.enablePersonalization);}else if(c.enablePersonalization!==undefined){m.setProperty("/personalization",c.enablePersonalization);}else if(this.oShellConfig.enablePersonalization!==undefined){m.setProperty("/personalization",this.oShellConfig.enablePersonalization);}if(c.enableTagFiltering!==undefined){m.setProperty("/tagFiltering",c.enableTagFiltering);}if(c.enableLockedGroupsCompactLayout!==undefined){m.setProperty("/enableLockedGroupsCompactLayout",c.enableLockedGroupsCompactLayout);}if(c.enableCatalogSelection!==undefined){m.setProperty("/catalogSelection",c.enableCatalogSelection);}if(c.enableSearchFiltering!==undefined){m.setProperty("/searchFiltering",c.enableSearchFiltering);}if(c.enableTilesOpacity!==undefined){m.setProperty("/tilesOpacity",c.enableTilesOpacity);}if(c.enableDragIndicator!==undefined){m.setProperty("/enableDragIndicator",c.enableDragIndicator);}t=false;if(c.enableActionModeMenuButton!==undefined){m.setProperty("/actionModeMenuButtonEnabled",c.enableActionModeMenuButton);t=c.enableActionModeMenuButton;}if(c.enableRenameLockedGroup!==undefined){m.setProperty("/enableRenameLockedGroup",c.enableRenameLockedGroup);}else{m.setProperty("/enableRenameLockedGroup",false);}if(c.enableActionModeFloatingButton!==undefined){m.setProperty("/actionModeFloatingButtonEnabled",c.enableActionModeFloatingButton);t=t||c.enableActionModeFloatingButton;}m.setProperty("/tileActionModeEnabled",t);if(c.enableTileActionsIcon!==undefined){m.setProperty("/tileActionsIconEnabled",sap.ui.Device.system.desktop?c.enableTileActionsIcon:false);}if(c.enableHideGroups!==undefined){m.setProperty("/enableHideGroups",c.enableHideGroups);}if(c.title){m.setProperty("/title",c.title);}m.setProperty("/enableHelp",!!this.oShellConfig.enableHelp);m.setProperty("/disableSortedLockedGroups",!!c.disableSortedLockedGroups);}},initNavContainer:function(c){var n=new sap.m.NavContainer({id:"navContainerFlp"});n.addCustomTransition("slideBack",sap.m.NavContainer.transitions.slide.back,sap.m.NavContainer.transitions.slide.back);return n;},setInitialConfiguration:function(){this.oRouter.initialize();sap.ushell.components.flp.ComponentKeysHandler.init(this.oModel,this.oRouter);sap.ushell.renderers.fiori2.AccessKeysHandler.registerAppKeysHandler(sap.ushell.components.flp.ComponentKeysHandler.handleFocusOnMe);var t=sap.ushell.resources.i18n,s=[];s.push({text:"Alt+H",description:t.getText("actionHomePage")});if(this.oModel.getProperty("/personalization")){s.push({text:"Alt+C",description:t.getText("actionCatalog")});}sap.ushell.renderers.fiori2.AccessKeysHandler.registerAppShortcuts(sap.ushell.components.flp.ComponentKeysHandler.handleShortcuts,s);},exit:function(){this.oDashboardManager.destroy();}});};if(!jQuery.sap.isDeclared('sap.ushell.components.flp.launchpad.DashboardManager')){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.launchpad.DashboardManager");var g=function(m,p){return p?sap.ushell.resources.i18n.getText(m,p):sap.ushell.resources.i18n.getText(m);},c=function(C){var a=this.oModel.getProperty('/catalogTiles'),b=a.filter(function(t){return t.catalog===C.title&&t.isTileIntentSupported===true;});return b.length;};sap.ui.base.EventProvider.extend("sap.ushell.components.flp.launchpad.DashboardManager",{metadata:{publicMethods:["getModel","getDashboardView","getGroupListView","isGroupListViewCreated","loadPersonalizedGroups","attachEvent","detachEvent","attachEventOnce","createTile","deleteCatalogTileFromGroup","resetGroupsOnFailure","createGroupAndSaveTile"]},analyticsConstants:{PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"},constructor:function(i,s){if(sap.ushell.components.flp.launchpad.getDashboardManager&&sap.ushell.components.flp.launchpad.getDashboardManager()){return sap.ushell.components.flp.launchpad.getDashboardManager();}sap.ushell.components.flp.launchpad.getDashboardManager=jQuery.sap.getter(this.getInterface());this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");this.oModel=s.model;this.oConfig=s.config;this.oRouter=s.router;this.oSortableDeferred=$.Deferred();this.oSortableDeferred.resolve();this.aRequestQueue=[];this.bRequestRunning=false;this.tagsPool=[];this.registerEvents();this.oTileCatalogToGroupsMap={};this.tileViewUpdateQueue=[];this.tileViewUpdateTimeoutID=0;this.oPopover=null;this.tileUuid=null;this.oGroupNotLockedFilter=new sap.ui.model.Filter("isGroupLocked",sap.ui.model.FilterOperator.EQ,false);if(this.oRouter){var t=this.oRouter.getTarget('home');t.attachDisplay(function(e){this.oDashboardView=e.getParameter('view');}.bind(this));}},createMoveActionDialog:function(){var G=this.oGroupNotLockedFilter;this.moveDialog=new sap.m.SelectDialog("moveDialog",{title:sap.ushell.resources.i18n.getText('moveTileDialog_title'),rememberSelections:false,search:function(e){var v=e.getParameter("value"),f=new sap.ui.model.Filter("title",sap.ui.model.FilterOperator.Contains,v),b=e.getSource().getBinding("items");b.filter([f,G]);},contentWidth:'400px',confirm:function(e){var C=e.getParameter("selectedContexts"),E=sap.ui.getCore().getEventBus();if(C.length){E.publish("launchpad","moveTile",{sTileId:this.tileUuid,toGroupId:C[0].getObject().groupId,toIndex:C[0].getObject().tiles.length,source:this.moveDialog.getId()});E.publish("launchpad","scrollToGroup",{groupId:C[0].getObject().groupId,groupChanged:false,focus:false});}}.bind(this),items:{path:"/groups",filters:[G],template:new sap.m.StandardListItem({title:"{title}"})}});this.moveDialog.setModel(this.oModel);},registerEvents:function(){var e=sap.ui.getCore().getEventBus(),t=this;e.subscribe("launchpad","addBookmarkTile",this._createBookmark,this);e.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",this._addBookmarkToModel,this);e.subscribe("sap.ushell.services.Bookmark","catalogTileAdded",this._refreshGroupInModel,this);e.subscribe("sap.ushell.services.Bookmark","bookmarkTileDeleted",this.loadPersonalizedGroups,this);e.subscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);e.subscribe("launchpad","createGroupAt",this._createGroupAt,this);e.subscribe("launchpad","createGroup",this._createGroup,this);e.subscribe("launchpad","deleteGroup",this._deleteGroup,this);e.subscribe("launchpad","resetGroup",this._resetGroup,this);e.subscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);e.subscribe("launchpad","moveGroup",this._moveGroup,this);e.subscribe("launchpad","deleteTile",this._deleteTile,this);e.subscribe("launchpad","moveTile",this._moveTile,this);e.subscribe("launchpad","sortableStart",this._sortableStart,this);e.subscribe("launchpad","sortableStop",this._sortableStop,this);e.subscribe("showCatalog",this.loadAllCatalogs,this);this.oPageBuilderService.registerTileActionsProvider(function(T){jQuery.sap.require("sap.m.MessageBox");return[{text:sap.ushell.resources.i18n.getText('moveTileDialog_action'),press:function(E){t.tileUuid=t.getModelTileById(t.oPageBuilderService.getTileId(T)).uuid;if(!t.moveDialog){t.createMoveActionDialog();}t.moveDialog.getBinding("items").filter([t.oGroupNotLockedFilter]);t.moveDialog.open();}}];});},destroy:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","addBookmarkTile",this._createBookmark,this);e.unsubscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);e.unsubscribe("launchpad","createGroupAt",this._createGroupAt,this);e.unsubscribe("launchpad","createGroup",this._createGroup,this);e.unsubscribe("launchpad","deleteGroup",this._deleteGroup,this);e.unsubscribe("launchpad","resetGroup",this._resetGroup,this);e.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);e.unsubscribe("launchpad","moveGroup",this._moveGroup,this);e.unsubscribe("launchpad","deleteTile",this._deleteTile,this);e.unsubscribe("launchpad","moveTile",this._moveTile,this);e.unsubscribe("launchpad","sortableStart",this._sortableStart,this);e.unsubscribe("launchpad","sortableStop",this._sortableStop,this);e.unsubscribe("showCatalog",this.loadAllCatalogs,this);sap.ushell.components.flp.launchpad.getDashboardManager=undefined;},_refreshTiles:function(){var t=this,G=this.oModel.getProperty("/groups");jQuery.each(G,function(n,o){jQuery.each(o.tiles,function(n,T){t.oPageBuilderService.refreshTile(T.object);});});},_sortableStart:function(){this.oSortableDeferred=$.Deferred();},_createBookmark:function(C,e,d){var t=d.group?d.group.object:"";delete d.group;this._addRequest($.proxy(function(){var r=sap.ushell.Container.getService("Bookmark").addBookmark(d,t),R=sap.ushell.resources.i18n;r.always($.proxy(this._checkRequestQueue,this));r.done(function(){if(sap.ushell.Container){sap.ushell.Container.getService('Message').info(R.getText('tile_created_msg'));}});r.fail(function(m){jQuery.sap.log.error("Failed to add bookmark",m,"sap.ushell.ui.footerbar.AddBookmarkButton");if(sap.ushell.Container){sap.ushell.Container.getService('Message').error(R.getText('fail_to_add_tile_msg'));}});},this));},_addBookmarkToModel:function(C,e,d){var t=d.tile,G=d.group,i,s,T,n,a,b;if(!d||!t){this.loadPersonalizedGroups();return;}i=G?G.isGroupLocked:false;s=this.oPageBuilderService;T=s.getTileType(t);n=this._getTileModel(t,i,T);a=G?this._getIndexOfGroupByObject(G):0;b=this.oModel.getProperty("/groups/"+a);b.tiles.push(n);this.oModel.setProperty("/groups/"+a,b);},_refreshGroupInModel:function(C,e,G){var l=sap.ushell.Container.getService("LaunchPage"),E='Failed to refresh group with id:'+G+' in the model',t=this;l.getGroups().fail(jQuery.sap.log.error(E,null,"sap.ushell.components.flp.launchpad.DashboardManager")).done(function(a){a.some(function(o){if(l.getGroupId(o)===G){l.getDefaultGroup().done(function(d){var i=G===d.getId()?true:false,b=t._getGroupModel(o,i),f=t._getIndexOfGroupByObject(b.object);t.oModel.setProperty("/groups/"+f,b);});return true;}});});},_sortableStop:function(){this.oSortableDeferred.resolve();},_handleAfterSortable:function(f){return $.proxy(function(){var o=Array.prototype.slice.call(arguments);this.oSortableDeferred.done(function(){f.apply(null,o);});},this);},_addRequest:function(r){this.aRequestQueue.push(r);if(!this.bRequestRunning){this.bRequestRunning=true;this.aRequestQueue.shift()();}},_checkRequestQueue:function(){if(this.aRequestQueue.length===0){this.bRequestRunning=false;}else{this.aRequestQueue.shift()();}},_requestFailed:function(){this.aRequestQueue=[];this.bRequestRunning=false;},_createGroup:function(C,e,d){var G=this._getGroupModel(null),a=this.oModel.getProperty("/groups"),m=this.oModel;m.setProperty("/groupList-skipScrollToGroup",true);window.setTimeout(function(){m.setProperty("/groups/"+a.length,G);},500);window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false);},1000);},_createGroupAt:function(C,e,d){var n=parseInt(d.location,10),G=this.oModel.getProperty("/groups"),o=this._getGroupModel(null,false,n===G.length),m=this.oModel,i;o.index=n;G.splice(n,0,o);for(i=0;i<G.length-1;i++){G[i].isLastGroup=false;}for(i=n+1;i<G.length;i++){G[i].index++;}m.setProperty("/groups",G);},_getIndexOfGroup:function(G){var n=null,a=this.oModel.getProperty("/groups");jQuery.each(a,function(b,o){if(o.groupId===G){n=b;return false;}});return n;},_getIndexOfGroupByObject:function(G){var n=null,a=this.oModel.getProperty("/groups"),s=this.oPageBuilderService.getGroupId(G);a.forEach(function(m,b){var C=this.oPageBuilderService.getGroupId(m.object);if(C===s){n=b;return false;}}.bind(this));return n;},_getPathOfGroup:function(G){return"/groups/"+this._getIndexOfGroup(G);},_getPathOfTile:function(t){var G=this.oModel.getProperty("/groups"),n=null,a=null;jQuery.each(G,function(b,o){jQuery.each(o.tiles,function(d,T){if(T.uuid===t){n=b;a=d;return false;}});if(n!==null){return false;}});return n!==null?"/groups/"+n+"/tiles/"+a:null;},_moveInArray:function(a,n,b){if(b>=a.length){var k=b-a.length;while((k--)+1){a.push(undefined);}}a.splice(b,0,a.splice(n,1)[0]);},_updateGroupIndices:function(a){var k;for(k=0;k<a.length;k++){a[k].index=k;}},_deleteGroup:function(C,e,d){var t=this,G=d.groupId,s,a=this.oModel.getProperty("/groups"),n=this._getIndexOfGroup(G),i=a.length-1===n,o=null,r,m,b,B;b=i?n-1:n;this._destroyGroupModel("/groups/"+n);o=a.splice(n,1)[0].object;if(i){this.oModel.setProperty("/groups/"+b+"/isLastGroup",i);}s=sap.ushell.Container.getService("LaunchPage").getGroupId(o);m=this.oModel;m.setProperty("/groupList-skipScrollToGroup",true);m.setProperty("/groups",a);this._updateGroupIndices(a);if(b>=0){B=sap.ui.getCore().getEventBus();window.setTimeout($.proxy(B.publish,B,"launchpad","scrollToGroup",{groupId:this.oModel.getProperty("/groups")[b].groupId}),200);}window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false);},1000);this._addRequest($.proxy(function(){var f=sap.ushell.Container.getService("LaunchPage").getGroupTitle(o);try{r=this.oPageBuilderService.removeGroup(o);}catch(h){this._resetGroupsOnFailure("fail_to_delete_group_msg");return;}r.done(function(){sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(this.analyticsConstants.PERSONALIZATION,this.analyticsConstants.DELETE_GROUP,[f,s]);this._showLocalizedMessage("group_deleted_msg",[f]);}.bind(this));r.fail(this._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_delete_group_msg")));r.always($.proxy(this._checkRequestQueue,this));},this));},_resetGroup:function(C,e,d){var t=this,G=d.groupId,n=this._getIndexOfGroup(G),o=this.oModel.getProperty("/groups/"+n),s,a,r,b;this.oModel.setProperty("/groups/"+n+"/sortable",false);a=sap.ushell.Container.getService("LaunchPage").getGroupId(o.object);s=sap.ushell.Container.getService("LaunchPage").getGroupTitle(o.object);this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.resetGroup(o.object);}catch(f){this._resetGroupsOnFailure("fail_to_reset_group_msg");return;}r.done(this._handleAfterSortable($.proxy(function(G,o,R){sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(this.analyticsConstants.PERSONALIZATION,this.analyticsConstants.RESET_GROUP,[s,a]);var n=t._getIndexOfGroup(G);this._loadGroup(n,R||o.object);this._showLocalizedMessage("group_reset_msg",[o.title]);this.oModel.setProperty("/groups/"+n+"/sortable",true);b=sap.ui.getCore().byId('dashboardGroups').getGroupControlByGroupId(G);if(b){b.rerender();}},this,G,o)));r.fail(this._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_reset_group_msg")));r.always($.proxy(this._checkRequestQueue,this));},this));},_moveGroup:function(C,e,d){var f=d.fromIndex,t=d.toIndex,G=this.oModel.getProperty("/groups"),m=this.oModel,a=this.oModel.getProperty("/tileActionModeActive"),r,o,s,b=this,i;if(!a){f=this._adjustFromGroupIndex(f,G);}o=G[f];s=o.groupId;if(!a){t=this._adjustToGroupIndex(t,G,s);}this._moveInArray(G,f,t);this._updateGroupIndices(G);m.setProperty("/groupList-skipScrollToGroup",true);for(i=0;i<G.length-1;i++){G[i].isLastGroup=false;}G[G.length-1].isLastGroup=true;m.setProperty("/groups",G);window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false);},1000);this._addRequest($.proxy(function(){var o=this.oModel.getProperty(this._getPathOfGroup(s));try{r=this.oPageBuilderService.moveGroup(o.object,t);}catch(h){this._resetGroupsOnFailure("fail_to_move_group_msg");return;}r.done(function(){sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(b.analyticsConstants.PERSONALIZATION,b.analyticsConstants.MOVE_GROUP,[o.title,f,t,s]);});r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_move_group_msg")));r.always($.proxy(this._checkRequestQueue,this));},this));},_adjustToGroupIndex:function(t,a,b){var v=0,I=false,i=0;for(i=0;i<a.length&&v<t;i++){if(a[i].isGroupVisible){if(a[i].groupId===b){I=true;}else{v++;}}}if(I){return i-1;}return i;},_adjustFromGroupIndex:function(a,b){var v=0,i;for(i=0;i<b.length;i++){if(b[i].isGroupVisible){v++;}if(v===a+1){return i;}}return a;},_changeGroupTitle:function(C,e,d){var n=d.newTitle,G=this.oModel.getProperty("/groups"),s=d.groupId,a=d.groupId,b=this._getIndexOfGroup(s),o=this.oModel.getProperty("/groups/"+b),O=o.title,r,t=this;this.oModel.setProperty("/groups/"+b+"/title",n);if(!o.object){this._addRequest($.proxy(function(){try{if(b===G.length-1){r=this.oPageBuilderService.addGroup(n,b);}else{r=this.oPageBuilderService.addGroupAt(n,b);}}catch(f){this._resetGroupsOnFailure("fail_to_create_group_msg");return;}r.done(this._handleAfterSortable($.proxy(function(s,N){var b=this._getIndexOfGroup(s);this._loadGroup(b,N);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.RENAME_GROUP,[O,n,s]);},this,s)));r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_create_group_msg")));},this));}else{this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.setGroupTitle(o.object,n);}catch(f){this._resetGroupsOnFailure("fail_to_rename_group_msg");return;}r.done(function(){a=sap.ushell.Container.getService("LaunchPage").getGroupId(o.object);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.RENAME_GROUP,[O,n,a]);});r.fail(this._handleAfterSortable($.proxy(function(s,O){var h=this._getPathOfGroup(s);this._showLocalizedError("fail_to__msg");this.oModel.setProperty(h+"/title",O);this._requestFailed();},this,s)));},this));}r.always($.proxy(this._checkRequestQueue,this));},createTile:function(d){var C=d.catalogTileContext,o=d.groupContext,G=this.oModel.getProperty(o.getPath()),s=G.groupId,r,a=jQuery.Deferred(),R={},b;b=sap.ui.getCore().getEventBus();b=sap.ui.getCore().getEventBus();$.proxy(b.publish,b,"launchpad","addTile",{catalogTileContext:C,groupContext:o});if(!C){jQuery.sap.log.warning("DashboardManager: Did not receive catalog tile object. Abort.",this);return;}this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.addTile(C.getProperty("src"),o.getProperty("object"));}catch(e){this._resetGroupsOnFailure("fail_to_add_tile_msg");return;}var t=this;r.done(function(T){var f=t._getPathOfGroup(s),h=sap.ushell.Container.getService("LaunchPage").getTileTitle(T);t._addTileToGroup(f,T);R={group:G,status:1,action:'add'};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.ADD_TILE,[G.title,h]);a.resolve(R);}).fail(function(){R={group:G,status:0,action:'add'};a.resolve(R);}).always(function(){t._checkRequestQueue();});},this));return a.promise();},createGroupAndSaveTile:function(d){var C=d.catalogTileContext,n=d.newGroupName,r,a=jQuery.Deferred(),R={},G,b,s,i;if(sap.ushell.utils.validHash(n)&&C){G=this._getGroupModel(null,false,true);b=this.oModel.getProperty("/groups");s=G.groupId;i=b.length;if(i>0){b[i-1].isLastGroup=false;}G.title=n;G.index=i;G.editMode=false;b.push(G);this.oModel.setProperty("/groups/",b);if(!C){jQuery.sap.log.warning("DashboardManager: Did not receive catalog tile object. Abort.",this);return;}this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.addGroup(n);}catch(e){this._resetGroupsOnFailure("fail_to_create_group_msg");return;}r.done(this._handleAfterSortable($.proxy(function(s,N){var f=this._getIndexOfGroup(s),o,p;this._loadGroup(f,N);o=new sap.ui.model.Context(this.oModel,"/groups/"+f);p=this.createTile({catalogTileContext:C,groupContext:o});p.done(function(h){R={group:h.group,status:1,action:'addTileToNewGroup'};a.resolve(R);}).fail(function(h){R={group:h.group,status:0,action:'addTileToNewGroup'};a.resolve(R);});},this,s)));r.fail(function(f){this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_create_group_msg"));R={group:f.group,status:0,action:'createNewGroup'};a.resolve(R);}.bind(this));r.always($.proxy(this._checkRequestQueue,this));},this));}return a.promise();},_deleteTile:function(C,e,d){var t=this,T=d.tileId||d.originalTileId,G=this.oModel.getProperty("/groups");jQuery.each(G,function(n,o){var f=false;jQuery.each(o.tiles,function(a,b){if(b.uuid===T||b.originalTileId===T){t._destroyTileModel("/groups/"+n+"/tiles/"+a);var h=o.tiles.splice(a,1)[0],r,s=sap.ushell.Container.getService("LaunchPage").getTileTitle(h.object),i=sap.ushell.Container.getService("LaunchPage").getCatalogTileId(h.object),j=sap.ushell.Container.getService("LaunchPage").getCatalogTileTitle(h.object),k=sap.ushell.Container.getService("LaunchPage").getTileId(h.object);t.oModel.setProperty("/groups/"+n+"/tiles",o.tiles);t._addRequest(function(){try{r=t.oPageBuilderService.removeTile(o.object,h.object);}catch(l){this._resetGroupsOnFailure("fail_to_remove_tile_msg");return;}r.done(t._handleAfterSortable(function(){if(s){t._showLocalizedMessage("tile_deleted_msg",[s,o.title]);}else{t._showLocalizedMessage("tile_deleted_msg",[s,o.title]);}sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.DELETE_TILE,[s||k,i,j,o.title]);}));r.fail(t._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_remove_tile_msg")));r.always($.proxy(t._checkRequestQueue,t));});sap.ushell.utils.handleTilesVisibility();f=true;return false;}});if(f){return false;}});},_sendDeleteTileRequest:function(G,t){var r,a=sap.ushell.Container.getService('LaunchPage');try{r=a.removeTile(G,t.object);}catch(e){jQuery.sap.log.error("deleteCatalogTileFromGroup ; removeTile ; Exception occurred: "+e);}return r;},deleteCatalogTileFromGroup:function(d){var t=this,D=decodeURIComponent(d.tileId),G=d.groupIndex,o=this.oModel.getProperty("/groups/"+G),s=sap.ushell.Container.getService("LaunchPage"),a=jQuery.Deferred(),b=[],f,p,e;f=o.tiles.filter(function(T){var h=s.getCatalogTileId(T.object);if(h!==D){return true;}else{p=jQuery.Deferred();e=t._sendDeleteTileRequest(o.object,T);e.done((function(a){return function(){a.resolve({status:true});};})(p));e.fail((function(a){return function(){a.resolve({status:false});};})(p));b.push(p);return false;}});o.tiles=f;jQuery.when.apply(jQuery,b).done(function(r){var S=true,i=0,h=b.length;for(i;i<h;i++){if(!r.status){S=false;break;}}if(S){t.oModel.setProperty("/groups/"+G,o);}a.resolve({group:o,status:S,action:'remove'});});return a.promise();},_moveTile:function(C,e,d){var n=d.toIndex,N=d.toGroupId,t=d.sTileId,s=d.source,T,a,o,b,f,h,i=sap.ushell.Container.getService("LaunchPage"),G=this.oModel.getProperty("/groups"),S,j,r;jQuery.each(G,function(k,l){var F=false;jQuery.each(l.tiles,function(m,p){if(p.uuid===t){T=p;a=m;o=l;b=k;F=true;return false;}});if(F){return false;}});jQuery.each(G,function(k,l){if(l.groupId===N){f=l;h=k;}});if(o.groupId==f.groupId&&(s==="moveDialog"||n===null)){return;}if(n&&n>f.tiles.length){n=f.tiles.length;}if(o.groupId===N){if(n===null||n===undefined){o.tiles.splice(a,1);n=o.tiles.length;o.tiles.push(T);}else{n=this._adjustTileIndex(n,T,o);this._moveInArray(o.tiles,a,n);}this.oModel.setProperty("/groups/"+b+"/tiles",o.tiles);}else{o.tiles.splice(a,1);this.oModel.setProperty("/groups/"+b+"/tiles",o.tiles);if(n===null||n===undefined){n=f.tiles.length;f.tiles.push(T);}else{n=this._adjustTileIndex(n,T,f);f.tiles.splice(n,0,T);}this.oModel.setProperty("/groups/"+h+"/tiles",f.tiles);}this.mapCatalogTilesToGroups();this.updateCatalogTilesToGroupsMap();sap.ushell.utils.handleTilesVisibility();S=this.oModel.getProperty("/groups/"+b).object;j=this.oModel.getProperty("/groups/"+h).object;this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.moveTile(T.object,a,n,S,j);}catch(k){this._resetGroupsOnFailure("fail_to_move_tile_msg");return;}T.tileIsBeingMoved=true;r.done(this._handleAfterSortable($.proxy(function(t,l){var m,u=[i.getTileTitle(T.object),i.getGroupTitle(S),i.getGroupTitle(j),t];sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(this.analyticsConstants.PERSONALIZATION,this.analyticsConstants.MOVE_TILE,u);m=this._getPathOfTile(t);if(m){this.oModel.setProperty(m+"/object",l);this.oModel.setProperty(m+"/originalTileId",this.oPageBuilderService.getTileId(l));this.oPageBuilderService.getTileView(l).done(function(v){var p=this.oModel.getProperty(m+"/content");this.oModel.setProperty(m+"/content",[v]);if(p&&p[0]){p[0].destroy();}this.oModel.setProperty(m+"/tileIsBeingMoved",false);}.bind(this));}},this,t)));r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_move_tile_msg")));r.always($.proxy(this._checkRequestQueue,this));},this));},_adjustTileIndex:function(n,t,a){var v=0,I=false,i=0;for(i=0;i<a.tiles.length&&v<n;i++){if(a.tiles[i].isTileIntentSupported){if(a.tiles[i]===t){I=true;}else{v++;}}}if(I){return i-1;}return i;},getModel:function(){return this.oModel;},getDashboardView:function(){return this.oDashboardView;},getGroupListView:function(a){var A=true;if(!sap.ui.getCore().byId('groupList')){A=false;this.oGroupListView=sap.ui.view("groupList",{viewName:"sap.ushell.components.flp.launchpad.group_list.GroupList",type:'JS',viewData:a||{}});}return{groupList:this.oGroupListView,alreadyCreated:A};},isGroupListViewCreated:function(){return this.oGroupListView!==undefined;},loadAllCatalogs:function(C,e,d){var G=new jQuery.Deferred(),t=this,s;G.resolve();s=function(){G.done(function(){var a=t.getModel().getProperty("/groups");if(a&&a.length!==0){t.mapCatalogTilesToGroups();t.updateCatalogTilesToGroupsMap();}});};if(!this.oModel.getProperty("/catalogs")||!sap.ushell.Container.getService("LaunchPage").isCatalogsValid()){if(!this.oModel.getProperty("/groups")||this.oModel.getProperty("/groups").length===0){G=this.loadPersonalizedGroups();}this._destroyAllGroupModels("/catalogs");this._destroyAllTileModels("/catalogTiles");this.oModel.setProperty("/catalogs",[]);this.oModel.setProperty("/catalogTiles",[]);this.aPromises=[];sap.ushell.Container.getService("LaunchPage").getCatalogs().done(function(a){jQuery.when.apply(jQuery,this.aPromises).then(this.onDoneLoadingCatalogs(a));s();}.bind(this)).fail(t._showLocalizedErrorHelper("fail_to_load_catalog_msg")).progress(this.addCatalogToModel.bind(this));}else{s();}},updateCatalogTilesToGroupsMap:function(){var a=this.getModel().getProperty("/catalogTiles"),t,i,b,d,G,s=sap.ushell.Container.getService("LaunchPage");if(a){for(i=0;i<a.length;i++){t=a[i];b=encodeURIComponent(s.getCatalogTileId(t.src));d=this.getModel().getProperty("/catalogTiles/"+i+"/associatedGroups");G=this.oTileCatalogToGroupsMap[b];d=G?G:[];a[i].associatedGroups=d;}}this.getModel().setProperty("/catalogTiles",a);},addCatalogToModel:function(C){var a=this.oModel.getProperty('/catalogs'),s=sap.ushell.Container.getService("LaunchPage"),b=s.getCatalogId(C),d=false,o,p;a.forEach(function(e){if(e.id===b){d=true;}});if(!d){o={title:s.getCatalogTitle(C),id:s.getCatalogId(C),"static":false,tiles:[],numberOfTiles:0};p=s.getCatalogTiles(C);this.aPromises.push(p);p.done(function(t){if(!t.length){return;}var e={catalog:o.title,id:o.id,index:a.length,numberOfExistingTiles:0};var u=function(){if(!this.oModel.getProperty('/isCatalogInUpdate')){this.oModel.setProperty('/isCatalogInUpdate',true);var E=this.searchModelCatalogByTitle(o.title),f;if(E.result){e.index=E.indexOfPreviousInstanceInModel;e.numberOfExistingTiles=E.numOfTilesInCatalog;this.setCatalogTiles("/catalogTiles",true,e,t);f=this.oModel.getProperty('/catalogs');C=f[E.indexOfPreviousInstanceInModel];C.numIntentSupportedTiles=c.call(this,o);C.numberOfTiles=E.numOfTilesInCatalog+t.length;a[E.indexOfPreviousInstanceInModel]=C;}else{this.setCatalogTiles("/catalogTiles",true,e,t);o.numIntentSupportedTiles=c.call(this,o);o.numberOfTiles=t.length;a.push(o);}this.oModel.setProperty('/catalogs',a);this.oModel.setProperty('/isCatalogInUpdate',false);return;}setTimeout(u,50);}.bind(this);u();}.bind(this)).fail(this._showLocalizedErrorHelper("fail_to_load_catalog_tiles_msg"));}},searchModelCatalogByTitle:function(a){var b=this.oModel.getProperty('/catalogs'),d=false,i,n=0,G=false;$.each(b,function(e,t){if(t.title===sap.ushell.resources.i18n.getText('catalogsLoading')){G=true;}else if(a==t.title){i=e;n=t.numberOfTiles;d=true;return false;}});return{result:d,indexOfPreviousInstanceInModel:i,indexOfPreviousInstanceInPage:G?i-1:i,numOfTilesInCatalog:n};},getTagList:function(m){var i={},d=0,t=[],e,T,s;for(d=0;d<this.tagsPool.length;d++){T=this.tagsPool[d];if(i[T]){i[T]++;}else{i[T]=1;}}for(e in i){t.push({tag:e,occ:i[e]});}s=t.sort(function(a,b){return b.occ-a.occ;});if(s.length===0){this.oModel.setProperty("/tagFiltering",false);}if(m){this.oModel.setProperty("/tagList",s.slice(0,m));}else{this.oModel.setProperty("/tagList",s);}},onDoneLoadingCatalogs:function(C){if(!C.length){this.oModel.setProperty("/catalogsNoDataText",sap.ushell.resources.i18n.getText('noCatalogs'));}var s=sap.ushell.Container.getService("LaunchPage"),l=C.filter(function(o){return!s.getCatalogError(o);}),a;if(l.length!==C.length){this._showLocalizedError("partialCatalogFail");}if(this.oModel.getProperty("/tagFiltering")===true){this.getTagList();}a=this.oModel.getProperty('/catalogs');if(a[0]&&a[0].title===sap.ushell.resources.i18n.getText('catalogsLoading')){a.splice(0,1);}a.splice(0,0,{title:g("catalogSelect_initial_selection"),"static":true,tiles:[],numIntentSupportedTiles:-1});this.oModel.setProperty('/catalogs',a);sap.ushell.utils.handleTilesVisibility();},setCatalogTiles:function(p,a,d,C){var s=sap.ushell.Container.getService("LaunchPage"),u=$.map(C,function(o,t){var b=encodeURIComponent(s.getCatalogTileId(o)),e=this.oTileCatalogToGroupsMap[b]||[],f=s.getCatalogTileTags(o)||[];if(f.length>0){this.tagsPool=this.tagsPool.concat(f);}return{associatedGroups:e,src:o,catalog:d.catalog,catalogIndex:this.calculateCatalogTileIndex(d.index,d.numberOfExistingTiles,t),catalogId:d.id,title:s.getCatalogTileTitle(o),tags:f,keywords:(s.getCatalogTileKeywords(o)||[]).join(','),id:b,size:s.getCatalogTileSize(o),content:[s.getCatalogTileView(o)],isTileIntentSupported:s.isTileIntentSupported(o)};}.bind(this));this.oModel.setProperty(p,$.merge((a&&this.oModel.getProperty(p))||[],u));},calculateCatalogTileIndex:function(a,n,t){var r=parseInt(a*100000,10);r+=(n!==undefined?n:0)+t;return r;},mapCatalogTilesToGroups:function(){this.oTileCatalogToGroupsMap={};var G=this.oModel.getProperty("/groups"),s=sap.ushell.Container.getService("LaunchPage"),i=0,o,t,T,a,b,d;for(i=0;i<G.length;i++){o=G[i];T=o.tiles;if(T){for(t=0;t<T.length;++t){a=encodeURIComponent(s.getCatalogTileId(T[t].object));b=this.oTileCatalogToGroupsMap[a]||[];d=s.getGroupId(o.object);if(b.indexOf(d)===-1&&(typeof(o.isGroupVisible)==='undefined'||o.isGroupVisible)&&!o.isGroupLocked){b.push(d);}this.oTileCatalogToGroupsMap[a]=b;}}}},_showLocalizedMessage:function(m,p,t){sap.ushell.Container.getService("Message").show(t||sap.ushell.services.Message.Type.INFO,g(m,p),p);},_showLocalizedError:function(m,p){this._showLocalizedMessage(m,p,sap.ushell.services.Message.Type.ERROR);},_showLocalizedErrorHelper:function(m,p){var t=this;return function(){t._showLocalizedError(m,p);};},_resetGroupsOnFailureHelper:function(m){var t=this;return function(G){t._showLocalizedError(m);setTimeout(function(){t.loadGroupsFromArray(G);});};},_resetGroupsOnFailure:function(m,p){this._requestFailed();this._showLocalizedError(m,p);this.loadPersonalizedGroups();this.oModel.updateBindings(true);},resetGroupsOnFailure:function(){this._resetGroupsOnFailure.apply(this,arguments);},loadGroupsFromArray:function(G){var t=this;this.oPageBuilderService.getDefaultGroup().done(function(d){if(G.length==0&&d==undefined){return;}var i=0,l=[],b,a=G.indexOf(d),n,N,e=[],o,f,h,m;G.splice(a,1);while(i<G.length){o=G[i];f=t.oPageBuilderService.isGroupLocked(o);if(f){l.push(o);G.splice(i,1);}else{i++;}}n=l.length;if(!t.oModel.getProperty('/disableSortedLockedGroups')){l.sort(function(x,y){var j=t.oPageBuilderService.getGroupTitle(x).toLowerCase(),k=t.oPageBuilderService.getGroupTitle(y).toLowerCase();return j<k?-1:1;});}b=l;b.push(d);b.push.apply(b,G);G=b;h=G.length;m=t.oModel.getProperty("/groups/length");t.oModel.setProperty("/groups/indexOfDefaultGroup",n);for(i=h;i<m;++i){t._destroyGroupModel("/groups/"+i);}for(i=0;i<h;++i){N=t._getGroupModel(G[i],i===n,i===h-1);N.index=i;e.push(N);}t.oModel.setProperty('/groups',e);t.oModel.setProperty("/groups/length",h);if(t.oModel.getProperty('/currentState/stateName')==="catalog"){t.mapCatalogTilesToGroups();t.updateCatalogTilesToGroupsMap();}}).fail(t._resetGroupsOnFailureHelper("fail_to_get_default_group_msg"));},_loadGroup:function(n,G){var t=this,s="/groups/"+n,d=t.oModel.getProperty("/groups/indexOfDefaultGroup"),i=t.oModel.getProperty(s).isLastGroup,o,N;this._destroyGroupModel(s);o=this.oModel.getProperty(s+"/groupId");N=this._getGroupModel(G,n===d,i);if(o){N.groupId=o;}N.index=n;this.oModel.setProperty(s,N);},_getGroupModel:function(G,d,l){var s=this.oPageBuilderService,a=(G&&s.getGroupTiles(G))||[],m=[],M=[],i,b,o=this.getModel();b=o.getProperty("/personalization");var e=G&&s.isGroupLocked(G)?true:false;for(i=0;i<a.length;++i){var t=a[i],T=s.getTileType(t).toLowerCase();if(T==="tile"){m.push(this._getTileModel(a[i],e,T));}else if(T==="link"){M.push(this._getTileModel(a[i],e,T));}else{jQuery.sap.log.error("Unknown tile type: '"+T+"'",undefined,"sap.ushell.components.flp.launchpad.DashboardManager");}}return{title:(d&&g("my_group"))||(G&&s.getGroupTitle(G))||"",object:G,groupId:jQuery.sap.uid(),links:M,tiles:m,isDefaultGroup:d||false,editMode:!G,isGroupLocked:e,removable:!G||s.isGroupRemovable(G),sortable:b,isGroupVisible:!G||s.isGroupVisible(G),isEnabled:!d,isLastGroup:l||false};},_addTileToGroup:function(G,t){var T=G+"/tiles",n=this.oModel.getProperty(T).length,s=this.oPageBuilderService,a=s.getTileType(t);var i=this.oModel.getProperty(G+"/isGroupLocked");this.oModel.setProperty(T+"/"+n,this._getTileModel(t,i,a));},_updateModelWithTileView:function(t,T){var a=this;this.tileViewUpdateQueue.push({uuid:t,view:T});if(this.tileViewUpdateTimeoutID){clearTimeout(this.tileViewUpdateTimeoutID);}this.tileViewUpdateTimeoutID=setTimeout(function(){a.tileViewUpdateTimeoutID=undefined;a.oSortableDeferred.done(function(){a._updateModelWithTilesViews();});},50);},_updateModelWithTilesViews:function(){var G=this.oModel.getProperty("/groups"),t,l,T,u,s,b,L,r={};if(!G){return;}for(var i=0;i<G.length;i=i+1){t=G[i].tiles;l=G[i].links;t=t.concat(l);for(var j=0;j<t.length;j=j+1){T=t[j];for(var q=0;q<this.tileViewUpdateQueue.length;q++){u=this.tileViewUpdateQueue[q];if(T.uuid==u.uuid){if(u.view){T.content[0].destroy();T.content=[u.view];s=this.oPageBuilderService.getTileSize(T.object);L=((s!==null)&&(s==="1x2"||s==="2x2"))||false;b=((s!==null)&&(s==="2x1"||s==="2x2"))||false;if(T['long']!==L||T.tall!==b){T['long']=L;T.tall=b;r[G[i].groupId]=true;}}else{T.content[0].setState("Failed");}break;}}}}this.tileViewUpdateQueue=[];this.oModel.setProperty("/groups",G);var d=this.getDashboardView();if(!jQuery.isEmptyObject(r)&&d){if(d&&d.oDashboardGroupsBox){var a=d.oDashboardGroupsBox.getGroups();for(var e in r){for(var i=0;i<a.length;i++){if(a[i].getGroupId()===e){sap.ushell.Layout.reRenderGroupLayout(a[i]);break;}}}}}},getModelTileById:function(i){var G=this.oModel.getProperty('/groups'),m;G.forEach(function(o){o.tiles.forEach(function(t){if(t.uuid===i||t.originalTileId===i){m=t;return;}});});return m;},_getTileModel:function(t,i,T){var s=this.oPageBuilderService,a=jQuery.sap.uid(),o,u,b=this,d,e;this.sTileType=T;s.setTileVisible(t,false);d=s.getTileView(t);d.done(function(v){o=v;if(u){u.apply(b,[a,o]);}});d.fail(function(){if(u){u.apply(b,[a]);}else{jQuery.sap.require('sap.ushell.ui.launchpad.TileState');if(b.sTileType==="link"){o=new sap.m.Link({text:sap.ushell.resources.i18n.getText('cannotLoadTile')});}else{o=new sap.ushell.ui.launchpad.TileState({state:"Failed"});}}});if(!o){u=this._updateModelWithTileView;jQuery.sap.require('sap.ushell.ui.launchpad.TileState');o=new sap.ushell.ui.launchpad.TileState({state:"Loading"});}if(T==="link"){e={"object":t,"originalTileId":s.getTileId(t),"uuid":a,"tileCatalogId":encodeURIComponent(s.getCatalogTileId(t)),"content":[o],"target":s.getTileTarget(t)||"","debugInfo":s.getTileDebugInfo(t),"isTileIntentSupported":s.isTileIntentSupported(t),"isLocked":i};}else if(T==="tile"){var S=s.getTileSize(t);e={"object":t,"originalTileId":s.getTileId(t),"uuid":a,"tileCatalogId":encodeURIComponent(s.getCatalogTileId(t)),"content":[o],"long":((S!==null)&&(S==="1x2"||S==="2x2"))||false,"tall":((S!==null)&&(S==="2x1"||S==="2x2"))||false,"target":s.getTileTarget(t)||"","debugInfo":s.getTileDebugInfo(t),"isTileIntentSupported":s.isTileIntentSupported(t),"rgba":"","isLocked":i,"showActionsIcon":this.oModel.getProperty("/tileActionsIconEnabled")||false};}return e;},_destroyAllGroupModels:function(t){var G=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(G){for(i=0;i<G.length;i=i+1){this._destroyGroupModel(G[i]);}}},_destroyGroupModel:function(t){var G=(typeof t==="string")?this.oModel.getProperty(t):t;if(G){this._destroyAllTileModels(G.tiles);}},_destroyAllTileModels:function(t){var T=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(T){for(i=0;i<T.length;i=i+1){this._destroyTileModel(T[i]);}}},_destroyTileModel:function(t){var T=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(T&&T.content){for(i=0;i<T.content.length;i=i+1){T.content[i].destroy();}}},loadPersonalizedGroups:function(){var t=this,G=this.oPageBuilderService.getGroups(),d=new jQuery.Deferred();G.done(function(a){t.loadGroupsFromArray(a);d.resolve();});G.fail(function(){t._showLocalizedErrorHelper("fail_to_load_groups_msg");d.reject();});return d;}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.flp.launchpad.catalog.Catalog.view')){jQuery.sap.declare('sap.ushell.components.flp.launchpad.catalog.Catalog.view');(function(){"use strict";jQuery.sap.require('sap.ui.core.IconPool');sap.ui.jsview("sap.ushell.components.flp.launchpad.catalog.Catalog",{oController:null,createContent:function(c){this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);var m=this.parentComponent.getModel();this.setModel(m);this.oController=c;this.addEventDelegate({onAfterShow:function(){var e=sap.ui.getCore().byId("homeBtn");if(e){sap.ushell.renderers.fiori2.RendererExtensions.addHeaderItem(e,"home");}},onBeforeShow:function(){m.setProperty("/currentViewName","catalog");var i=sap.ui.Device.system.phone;sap.ushell.renderers.fiori2.RendererExtensions.setHeaderHiding(i);sap.ushell.renderers.fiori2.RendererExtensions.setLeftPaneVisibility("home",false);},onAfterHide:function(){var e=sap.ui.getCore().byId("homeBtn");if(e){sap.ushell.renderers.fiori2.RendererExtensions.removeHeaderItem(e,"home");}}});function a(L){return((L!==null)&&(L==="1x2"||L==="2x2"))||false;}function b(s){return((s!==null)&&(s==="2x2"||s==="2x1"))||false;}function t(v){return parseInt(v,10)||0;}function g(G,s,e){var i;if(s){var n=$.inArray(e,G);i=n!==-1?"accept":"add";}else{i=(G&&G.length>0)?"accept":"add";}return sap.ui.core.IconPool.getIconURI(i);}function d(A,s,G,e,i,n){var p;if(e){var r=sap.ushell.resources.i18n,q=$.inArray(i,G);p=r.getText(q!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup",n);}else{p=G&&G.length?s:A;}return p;}var B=new sap.m.Button({icon:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:function(A,e,G,s){return g(A,G,s);}},tooltip:{parts:["i18n>addTileToGroup","i18n>addAssociatedTileToGroup","associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(A,s,G,e,i,n,p){return d(A,s,G,i,n,p);}},press:[c.onTileFooterClick,c]}),T=new sap.ushell.ui.launchpad.Tile({afterRendering:[c.onTileAfterRendering,c],tileViews:{path:"content",factory:function(i,e){return e.getObject();}},footItems:[B],"long":{path:"size",formatter:a},"tall":{path:"size",formatter:b},index:{path:"id",formatter:t},tileCatalogId:"{id}",press:[c.catalogTilePress,c]}),f=new sap.ushell.ui.launchpad.TileContainer("catalogTiles",{showHeader:false,showPlaceholder:false,showGroupHeader:"{/showCatalogHeaders}",noDataText:"{/catalogsNoDataText}",groupHeaderLevel:sap.m.HeaderLevel.H3,showNoData:true,tiles:{path:"/catalogTiles",template:T,sorter:new sap.ui.model.Sorter("catalogIndex",false,function(e){return(e&&e.getProperty("catalog"))||"";})},afterRendering:function(e){var m=this.getModel(),n,i;if(this.getTiles().length||m.getProperty('/catalogTiles/length')){setTimeout(function(){sap.ui.getCore().byId("catalogSearch").setEnabled(true);});m.setProperty("/catalogsNoDataText",sap.ushell.resources.i18n.getText('noFilteredItems'));sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");if(!sap.ui.Device.os.ios){sap.ui.getCore().getEventBus().publish("launchpad","contentRefresh");}}jQuery.sap.byId("catalogTiles").removeAttr("tabindex",0);jQuery.sap.byId("catalogTilesPage-intHeader-BarPH").removeAttr("tabindex",0);n=jQuery(".sapUshellTile button");for(i=0;i<n.length;i++){n[i].setAttribute("tabindex",-1);}}});f.addEventDelegate({onsapskipback:function(E){try{E.preventDefault();var n=jQuery("#catalogSelect");n.focus();}catch(e){}}});B.constructor.prototype.setIcon=function(v){this.setProperty("icon",v,true);if(v&&this._image&&this._image.setSrc){this._image.setSrc(v);}return this;};var F=new sap.ui.model.Filter("numIntentSupportedTiles",sap.ui.model.FilterOperator.NE,0),C=new sap.m.Select("catalogSelect",{visible:"{/catalogSelection}",name:"Browse",tooltip:"{i18n>catalogSelect_tooltip}",width:"17rem",items:{path:"/catalogs",template:new sap.ui.core.ListItem({text:"{title}"}),filters:[F]},change:[c.onCategoryFilter,c]}),o=C.onAfterRendering;C.addEventDelegate({onsapskipforward:function(E){try{E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.setFocusOnCatalogTile();var i=jQuery('#catalogTiles .sapUshellTile:visible:first');i.focus();}catch(e){}},onsaptabprevious:function(E){try{E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var n=jQuery("#catalogTilesPage header button")[0];n.focus();}catch(e){}},onsapskipback:function(E){try{E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var n=jQuery("#catalogTilesPage header button")[0];n.focus();}catch(e){}}});if(m.getProperty("/enableHelp")){C.addStyleClass('help-id-catalogCategorySelect');}C.onAfterRendering=function(){if(o){o.apply(this,arguments);}jQuery.sap.byId("catalogSelect").attr("tabindex",0);};var h=C._onAfterRenderingPopover;C._onAfterRenderingPopover=function(){if(this._oPopover){this._oPopover.setFollowOf(false);}if(h){h.apply(this,arguments);}};var j=new sap.m.SearchField("catalogSearch",{visible:"{/searchFiltering}",tooltip:"{i18n>catalogSearch_tooltip}",width:"17rem",enabled:false,value:{path:"/catalogSearchFilter"},placeholder:"{i18n>search_catalog}",liveChange:[c.onLiveFilter,c]}).addStyleClass("sapUshellCatalogSearch"),k=j.onAfterRendering;if(m.getProperty("/enableHelp")){j.addStyleClass('help-id-catalogSearch');}j.onAfterRendering=function(){k.apply(this,arguments);jQuery.sap.byId("catalogSearch").find("input").attr("tabindex",0);this.data("sap-ui-fastnavgroup","true",true);};j.addEventDelegate({onsapskipback:function(E){try{E.preventDefault();var n=jQuery("#catalogTilesPage header button")[0];n.focus();}catch(e){}},onsapskipforward:function(E){try{E.preventDefault();var i=jQuery('#catalogTiles .sapUshellTile:visible:first');sap.ushell.components.flp.ComponentKeysHandler.setTileFocus(i);}catch(e){}},onsaptabnext:function(E){try{if(!l.getVisible()){E.preventDefault();var v=jQuery(".sapUshellTile:visible"),i=jQuery(v[0]);sap.ushell.components.flp.ComponentKeysHandler.setFocusOnCatalogTile();i.focus();}}catch(e){}}});var l=new sap.m.MultiComboBox("catalogTagFilter",{visible:"{/tagFiltering}",selectedKeys:{path:"/selectedTags",mode:sap.ui.model.BindingMode.TwoWay},tooltip:"{i18n>catalogTilesTagfilter_tooltip}",width:"17rem",placeholder:"{i18n>catalogTilesTagfilter_HintText}",items:{path:"/tagList",sorter:new sap.ui.model.Sorter("tag",false,false),template:new sap.ui.core.ListItem({text:"{tag}",key:"{tag}"})},selectionChange:[c.onTagsFilter,c]});if(m.getProperty("/enableHelp")){l.addStyleClass('help-id-catalogTagFilter');}l.addEventDelegate({onsaptabnext:function(E){try{E.preventDefault();var v=jQuery(".sapUshellTile:visible"),i=jQuery(v[0]);sap.ushell.components.flp.ComponentKeysHandler.setFocusOnCatalogTile();i.focus();}catch(e){}},onsapskipback:function(E){try{E.preventDefault();jQuery("#catalogSelect").focus();}catch(e){}},onsapskipforward:function(E){try{E.preventDefault();var i=jQuery('#catalogTiles .sapUshellTile:visible:first');sap.ushell.components.flp.ComponentKeysHandler.setTileFocus(i);}catch(e){}}});var D=new sap.m.Page("catalogTilesPage",{showHeader:true,showFooter:false,showNavButton:true,title:{parts:["/groupContext/title"],formatter:function(e){var r=sap.ushell.resources.i18n;return!e?r.getText("tile_catalog"):r.getText("catalog_group_context_title",e);}},content:[new sap.ushell.ui.launchpad.Panel({translucent:true,headerText:"",headerLevel:sap.m.HeaderLevel.H2,headerBar:new sap.m.Bar("catalogHeader",{translucent:true,tooltip:"{i18n>tile_catalog_header_tooltip}",contentLeft:[C,j,l]}).addStyleClass("sapUshellCatalogHeaderBar"),content:[f]}).addStyleClass("sapUshellCatalogPage")],navButtonPress:[c.onNavButtonPress,c]});D.addDelegate({onAfterRendering:function(){jQuery("#catalogTilesPage header button").attr("tabindex",-1);}});return D;},getControllerName:function(){return"sap.ushell.components.flp.launchpad.catalog.Catalog";}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.flp.launchpad.dashboard.DashboardContent.controller')){jQuery.sap.declare('sap.ushell.components.flp.launchpad.dashboard.DashboardContent.controller');(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.dashboard.DashboardContent",{onInit:function(){var e=sap.ui.getCore().getEventBus();this.handleDashboardScroll=this._handleDashboardScroll.bind(this);e.subscribe('launchpad','actionModeInactive',this._handleExitActionMode,this);e.subscribe('launchpad','actionModeActive',this._enableGroupsUIActions,this.oView);e.subscribe("launchpad","appClosed",this._resizeHandler,this);e.subscribe("launchpad","appOpened",this._appOpenedHandler,this);this.sViewId="#"+this.oView.getId();if(sap.ui.Device.browser.mobile){e.subscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);}this.isDesktop=(sap.ui.Device.system.desktop&&(navigator.userAgent.toLowerCase().indexOf('tablet')<0));},onExit:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);e.unsubscribe("launchpad","appClosed",this._resizeHandler,this);e.unsubscribe("launchpad","appOpened",this._appOpenedHandler,this);},onAfterRendering:function(){var e=sap.ui.getCore().getEventBus(),v=this.getView(),d=v.getDomRef(),s=d.getElementsByTagName('section'),t;s[0].removeEventListener('scroll',this.handleDashboardScroll);s[0].addEventListener('scroll',this.handleDashboardScroll);e.unsubscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.subscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.unsubscribe("launchpad","scrollToFirstVisibleGroup",this._scrollToFirstVisibleGroup,this);e.subscribe("launchpad","scrollToFirstVisibleGroup",this._scrollToFirstVisibleGroup,this);sap.ui.Device.orientation.attachHandler(function(){var j=jQuery('#dashboardGroups').find('.sapUshellTileContainer:visible');if(j.length){var m=this.getView().getModel(),a=m.getProperty('/topGroupInViewPortIndex'),g,i;if(j.get(a)){g=sap.ui.getCore().byId(j.get(a).id);i=m.getProperty('/editTitle');this._publishAsync("launchpad","scrollToGroup",{group:g,isInEditTitle:i});}}},this);jQuery(window).bind("resize",function(){clearTimeout(t);t=setTimeout(this._resizeHandler.bind(this),300);}.bind(this));if(this.getView().getModel().getProperty("/personalization")&&!sap.ushell.components.flp.ActionMode){jQuery.sap.require("sap.ushell.components.flp.ActionMode");sap.ushell.components.flp.ActionMode.init(this.getView().getModel());}this._updateTopGroupInModel();},dashboardTilePress:function(){sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileClick");},_updateTopGroupInModel:function(){var m=this.getView().getModel(),t=this._getIndexOfTopGroupInViewPort();m.setProperty('/topGroupInViewPortIndex',t);},_getIndexOfTopGroupInViewPort:function(){var v=this.getView(),d=v.getDomRef(),s=d.getElementsByTagName('section'),j=$(s).find('.sapUshellTileContainer'),o=j.not('.sapUshellHidden').first().offset(),f=(o&&o.top)||0,t=[],n=s[0].scrollTop,a,b=0;if(!j||!o){return b;}j.each(function(){if(!jQuery(this).hasClass("sapUshellHidden")){var c=jQuery(this).parent().offset().top;t.push([c,c+jQuery(this).parent().height()+jQuery(this).parent()[0].offsetTop]);}});a=n+f;jQuery.each(t,function(i,c){var e=c[0],g=c[1];if(e<=a&&a<=g){b=i;return;}});return b;},_handleDashboardScroll:function(){this._updateTopGroupInModel();sap.ushell.utils.handleTilesVisibility();sap.ui.getCore().getEventBus().publish("launchpad","dashboardScroll");},_handleClick:function(){if(sap.ui.Device.system.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}},_handleActionModeStartDrag:function(e,u){this.uiActions.disable();var g=jQuery(".sapUshellDashboardGroupsContainerItem-clone"),a=g.find(".sapUshellContainerTitle"),t=a.height(),b=a.width();if(!sap.ui.Device.system.phone){g.find(".sapUshellTileContainerEditMode").offset({top:this.uiEditModeActions.getMove().y-t,left:this.uiEditModeActions.getMove().x-(b/2)});jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerHidden");}else{jQuery(".sapUshellTilesContainer-sortable").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");}jQuery(".sapUshellTileContainerAfterContent").addClass("sapUshellTileContainerHidden");jQuery(u).find(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");this.getModel().setProperty('/isInDrag',true);jQuery(u).attr('startPos',jQuery(u).index());jQuery.sap.log.info('startPos - '+jQuery(u).index());setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},0);var c=jQuery("#dashboardGroups").offset().top,d=jQuery(".sapUshellDashboardGroupsContainerItem-placeholder").offset().top,f=jQuery(".sapUshellDashboardGroupsContainerItem-clone").offset().top,s=d-c-f;jQuery('.sapUshellDashboardView section').animate({scrollTop:s},0);},_handleActionModeUIStart:function(e,u){jQuery(u).find(".sapUshellTileContainerContent").css("outline-color","transparent");jQuery('body').addClass("sapUshellDisableUserSelect");},_handleActionModeDrop:function(e,u){if(sap.ui.Device.system.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}var b=sap.ui.getCore().getEventBus(),q=jQuery(u),f=jQuery(q.children()[0]).attr("id"),g=sap.ui.getCore().byId(f),d=sap.ui.getCore().byId("dashboardGroups"),D={group:g,groupChanged:false,focus:false},n=q.index();q.startPos=window.parseInt(q.attr('startPos'),10);d.removeAggregation('groups',g,true);d.insertAggregation('groups',g,n,true);this.oController._handleActionModeGroupMove(e,{item:q});q.removeAttr('startPos');sap.ui.getCore().getEventBus().publish("launchpad","sortableStop");setTimeout(function(){jQuery(".sapUshellContainerHeaderActions").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerAfterContent").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTilesContainer-sortable").removeClass("sapUshellTileContainerRemoveContent");},0);window.setTimeout(jQuery.proxy(b.publish,b,"launchpad","scrollToGroup",D),1);this.uiActions.enable();},_handleActionModeGroupMove:function(e,u){var f=u.item.startPos,t=u.item.index(),m=this.getView().getModel();if(t!==-1){this._publishAsync("launchpad","moveGroup",{fromIndex:f,toIndex:t});setTimeout(function(){m.setProperty('/isInDrag',false);},100);}},_handleGroupDeletion:function(g){jQuery.sap.require('sap.m.MessageBox');var e=sap.ui.getCore().getEventBus(),G=g.getObject(),i=G.removable,s=G.title,a=G.groupId,r=sap.ushell.resources.i18n,m=sap.ushell.Container.getService("Message"),A=sap.m.MessageBox.Action,c=(i?A.DELETE:r.getText('ResetGroupBtn'));m.confirm(r.getText(i?'delete_group_msg':'reset_group_msg',s),function(o){if(o===c){e.publish("launchpad",i?'deleteGroup':'resetGroup',{groupId:a});}},r.getText(i?'delete_group':'reset_group'),[c,A.CANCEL]);},_enableGroupsUIActions:function(){if(this.uiEditModeActions){this.uiEditModeActions.enable();}},_handleExitActionMode:function(c){this.oView.uiEditModeActions.disable();},_forceBrowserRerenderElement:function(e){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame;if(a){a(function(){var d=e.style.display;e.style.display='none';e.offsetHeight;e.style.display=d;});}else{jQuery.sap.log.info('unsupported browser for animation frame');}},_webkitMobileRenderFix:function(){if(sap.ui.Device.browser.chrome||sap.ui.Device.os.android){this._forceBrowserRerenderElement(document.body);}},_resizeHandler:function(){this._addBottomSpace();sap.ushell.utils.handleTilesVisibility();var n=this.getView().getParent(),c=n&&n.getCurrentPage().getViewName(),i=c==this.getView().getViewName();if(sap.ushell.Layout&&i){sap.ushell.Layout.reRenderGroupsLayout(null,true);}},_appOpenedHandler:function(c,e,d){var p=this.getOwnerComponent(),P=p.getMetadata().getComponentName();if(d.additionalInformation.indexOf(P)===-1){sap.ushell.utils.setTilesNoVisibility();}},_addBottomSpace:function(){sap.ushell.utils.addBottomSpace();},_scrollToFirstVisibleGroup:function(c,e,d){var g,f=0,t=this;if(d.group){g=d.group.getGroupId();}else{g=d.groupId;}if(d.fromTop){f=d.fromTop-50;}jQuery.each(this.oView.oDashboardGroupsBox.getGroups(),function(n,G){if(G.getGroupId()===g){var y;y=-1*(document.getElementById('dashboardGroups').getBoundingClientRect().top)+document.getElementById(G.sId).getBoundingClientRect().top;jQuery('.sapUshellDashboardView section').animate({scrollTop:y-f},0,t.fHandleScrollEnd);if(d.group&&d.focus){jQuery.sap.byId(G.sId).focus();}return false;}});sap.ushell.utils.addBottomSpace();},_scrollToGroup:function(c,e,d){var g,t=this,m=this.getView().getModel();if(d.group){g=d.group.getGroupId();}else{g=d.groupId;}m.setProperty("/scrollingToGroup",true);jQuery.each(this.oView.oDashboardGroupsBox.getGroups(),function(n,G){if(G.getGroupId()===g){var y;setTimeout(function(){y=-1*(document.getElementById('dashboardGroups').getBoundingClientRect().top)+document.getElementById(G.sId).getBoundingClientRect().top;jQuery('.sapUshellDashboardView section').animate({scrollTop:y},500,t.fHandleScrollEnd);if(d.isInEditTitle){G.setEditMode(true);}},300);if(d.group&&d.focus){jQuery.sap.byId(G.sId).focus();}if(d.groupId||d.groupChanged){t._addBottomSpace();}jQuery('#groupList li').removeClass('sapUshellSelected').eq(n).addClass('sapUshellSelected');sap.ushell.utils.handleTilesVisibility();return false;}});},fHandleScrollEnd:function(){var e=sap.ui.getCore().getEventBus();e.publish("grouplist","ScrollAnimationEnd");},_handleDrop:function(e,u){if(sap.ui.Device.system.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}var t=sap.ushell.Layout.getLayoutEngine().layoutEndCallback(),E=sap.ui.getCore().getEventBus(),n,a;if(!t.tileMovedFlag){return;}n=true;a=true;if((t.srcGroup!==t.dstGroup)){n=a=false;}else if(t.tile!==t.dstGroup.getTiles()[t.dstTileIndex]){a=false;}t.srcGroup.removeAggregation('tiles',t.tile,n);t.dstGroup.insertAggregation('tiles',t.tile,t.dstTileIndex,a);E.publish("launchpad","moveTile",{sTileId:t.tile.getUuid(),toGroupId:t.dstGroup.getGroupId(),toIndex:t.dstTileIndex});E.publish("launchpad","sortableStop");},_publishAsync:function(c,e,d){var b=sap.ui.getCore().getEventBus();window.setTimeout(jQuery.proxy(b.publish,b,c,e,d),1);}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.flp.launchpad.dashboard.DashboardContent.view')){jQuery.sap.declare('sap.ushell.components.flp.launchpad.dashboard.DashboardContent.view');(function(){"use strict";sap.ui.jsview("sap.ushell.components.flp.launchpad.dashboard.DashboardContent",{createContent:function(c){this.bFirstRendering=true;this.bAnimate=false;this.isTouch=!sap.ui.Device.system.desktop;this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);this.addStyleClass("sapUshellDashboardView");this.bTileContainersContentAdded=false;var m=this.parentComponent.getModel(),t=this;this.oModel=m;this.ieHtml5DnD=!!(m.getProperty("/personalization")&&sap.ui.Device.browser.msie&&sap.ui.Device.browser.version>=11&&(sap.ui.Device.system.combi||sap.ui.Device.system.tablet));this.oDashboardGroupsBox=this._getDashboardGroupsBox(c,m);sap.ui.getCore().getEventBus().subscribe("launchpad","enterEditMode",this._addTileContainersContent,this);sap.ui.getCore().byId('navContainerFlp').attachAfterNavigate(this.onAfterNavigate,this);this.addEventDelegate({onAfterShow:function(){var r=sap.ushell.renderers.fiori2.RendererExtensions.getConfiguration().rootIntent,C;if(r==="Shell-home"){C=sap.ui.getCore().byId("configBtn");sap.ushell.renderers.fiori2.RendererExtensions.addHeaderItem(C,"home");}},onBeforeFirstShow:function(){var d=sap.ushell.components.flp.launchpad.getDashboardManager();d.loadPersonalizedGroups();t.onAfterNavigate();},onBeforeShow:function(){},onAfterHide:function(e){var a=sap.ui.getCore().byId("configBtn");if(a){sap.ushell.renderers.fiori2.RendererExtensions.removeHeaderItem(a,"home");}this.oHideGroupsButton=sap.ui.getCore().byId("hideGroupsBtn");if(this.oHideGroupsButton){sap.ushell.Container.getRenderer("fiori2").hideActionButton([this.oHideGroupsButton.getId()],true);sap.ushell.renderers.fiori2.RendererExtensions.removeOptionsActionSheetButton(this.oHideGroupsButton,"home");}this.oActionModeBtn=sap.ui.getCore().byId("ActionModeBtn");if(this.oActionModeBtn){sap.ushell.renderers.fiori2.RendererExtensions.removeOptionsActionSheetButton(this.oActionModeBtn,"home");}var b=sap.ui.getCore().byId("floatingActionBtn");if(b){sap.ushell.renderers.fiori2.RendererExtensions.removeFloatingActionButton(b,"home");b.setVisible(false);}}});var p=new sap.m.Page({showHeader:false,content:[this.oDashboardGroupsBox]});return[p];},onAfterNavigate:function(e){var n=sap.ui.getCore().byId('navContainerFlp'),c=n.getCurrentPage().getViewName(),i=c=="sap.ushell.components.flp.launchpad.dashboard.DashboardContent";if(i){this.oModel.setProperty("/currentViewName","home");sap.ushell.renderers.fiori2.RendererExtensions.setHeaderHiding(false);this.oHideGroupsButton=sap.ui.getCore().byId("hideGroupsBtn");if(!this.oHideGroupsButton){this.oHideGroupsButton=sap.ushell.Container.getRenderer("fiori2").addActionButton("sap.ushell.ui.footerbar.HideGroupsButton",{id:"hideGroupsBtn"},true,true);this.oHideGroupsButton.setModel(this.oModel);if(this.oModel.getProperty("/enableHelp")){this.oHideGroupsButton.addStyleClass('help-id-hideGroupsBtn');}if(!this.oModel.getProperty('/enableHideGroups')){this.oHideGroupsButton.setVisible(false);}}else{sap.ushell.Container.getRenderer("fiori2").showActionButton([this.oHideGroupsButton.getId()],true);}this.oActionModeBtn=sap.ui.getCore().byId("ActionModeBtn");if(this.oActionModeBtn){sap.ushell.renderers.fiori2.RendererExtensions.addOptionsActionSheetButton(this.oActionModeBtn,"home");if(this.oModel.getProperty('/actionModeMenuButtonEnabled')){this.oActionModeBtn.setVisible(true);}}this.oActionModeFloatingBtn=sap.ui.getCore().byId("floatingActionBtn");if(this.oActionModeFloatingBtn){sap.ushell.renderers.fiori2.RendererExtensions.addFloatingActionButton(this.oActionModeFloatingBtn,"home");if(this.oModel.getProperty('/actionModeFloatingButtonEnabled')){this.oActionModeFloatingBtn.setVisible(true);}}}},_addTileContainersContent:function(){if(!this.bTileContainersContentAdded){var g=this.oDashboardGroupsBox.getGroups();g.forEach(function(a,b){this._addTileContainerContent(b);}.bind(this));this.bTileContainersContentAdded=true;}},_addTileContainerContent:function(g){var G=this.oDashboardGroupsBox.getGroups()[g];if(G){var b=G.getBindingContext().getPath()+'/';G.addBeforeContent(this._getBeforeContent(this.oController,b));G.addAfterContent(this._getAfterContent(this.oController,b));G.addHeaderAction(this._getHeaderAction(this.oController,b));}},_getDashboardGroupsBox:function(c,m){var t=this;var T=this._getTileContainerTemplate(c);var E=function(){return m.getProperty('/enableLockedGroupsCompactLayout')&&!m.getProperty('/tileActionModeActive');};var g=function(o){var b;var p;if(o&&(b=o.getDomRef())){p=b.querySelector('.sapUshellPlusTile');if(p){return p;}}return null;};var r=function(l){var p=g(l.currentGroup);var b=g(l.endGroup);var i=(l.tiles[l.tiles.length-2]===l.item)||(l.endGroup.getTiles().length==0);if(i){t._hidePlusTile(b);}else{t._showPlusTile(b);}if(l.currentGroup!=l.endGroup){t._showPlusTile(p);}};var a=function(){sap.ushell.Layout.getLayoutEngine().setExcludedControl(sap.ushell.ui.launchpad.PlusTile);sap.ushell.Layout.getLayoutEngine().setReorderTilesCallback.call(sap.ushell.Layout.layoutEngine,r);};var A=function(){if(!sap.ushell.Layout.isInited){sap.ushell.Layout.init({getGroups:this.getGroups.bind(this),isLockedGroupsCompactLayoutEnabled:E}).done(a);sap.ui.Device.media.attachHandler(function(){if(!this.bIsDestroyed){sap.ushell.Layout.reRenderGroupsLayout(null,true);}},this,sap.ui.Device.media.RANGESETS.SAP_STANDARD);}sap.ushell.Layout.reRenderGroupsLayout(null,true);if(this.getGroups().length){if(this.getModel().getProperty("/personalization")){if(!c.getView().ieHtml5DnD){jQuery.sap.require('sap.ushell.UIActions');t._disableUIActions();t._disableEditModeUIActions();t.uiActions=new sap.ushell.UIActions({containerSelector:'#dashboardGroups',wrapperSelector:"#"+this.getDomRef().parentNode.id,draggableSelector:".sapUshellTile",draggableSelectorExclude:".sapUshellPlusTile",rootSelector:"#shell-container",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",scrollContainerSelector:t.bAnimate?"#cloneArea":undefined,clickCallback:c._handleClick.bind(t),startCallback:t._handleTileUIStart.bind(t),endCallback:t._handleDrop.bind(t),dragCallback:t._handleStartDrag.bind(t),dragAndScrollCallback:t._handleDragMove.bind(t),moveTolerance:t.isTouch?10:3,switchModeDelay:1000,isLayoutEngine:true,isTouch:t.isTouch,debug:false,disabledDraggableSelector:'sapUshellLockedTile',onDragStartUIHandler:t.markDisableGroups.bind(t),onDragEndUIHandler:t.unmarkDisableGroups.bind(t)}).enable();t.uiEditModeActions=new sap.ushell.UIActions({containerSelector:'#dashboardGroups',wrapperSelector:"#"+this.getDomRef().parentNode.id,draggableSelector:".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)",draggableSelectorBlocker:".sapUshellTilesContainer-sortable, .sapUshellTileContainerBeforeContent, .sapUshellTileContainerAfterContent",rootSelector:"#shell-container",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",cloneClass:"sapUshellDashboardGroupsContainerItem-clone",clickCallback:c._handleClick.bind(t),startCallback:c._handleActionModeUIStart.bind(t),endCallback:c._handleActionModeDrop.bind(t),dragCallback:c._handleActionModeStartDrag.bind(t),moveTolerance:t.isTouch?10:0.1,switchModeDelay:1000,isLayoutEngine:false,isTouch:t.isTouch,isVerticalDragOnly:true,debug:false});}else{jQuery.sap.require('sap.ushell.UIActionsWin8');t._disableUIActions();t._disableEditModeUIActions();t.uiActions=sap.ushell.UIActionsWin8.getInstance({containerSelector:'#dashboardGroups',wrapperSelector:"#"+this.getDomRef().parentNode.id,draggableSelector:".sapUshellTile",rootSelector:"#shell-container",placeHolderClass:"sapUshellTile-placeholder",startCallback:t._handleTileUIStart.bind(t),endCallback:t._handleDrop.bind(t),dragCallback:t._handleStartDrag.bind(t),dragAndScrollCallback:t._handleDragMove.bind(t),onDragStartUIHandler:t.markDisableGroups.bind(t),onDragEndUIHandler:t.unmarkDisableGroups.bind(t)}).enable();t.uiEditModeActions=sap.ushell.UIActionsWin8.getInstance({forGroups:true,containerSelector:'#dashboardGroups',wrapperSelector:"#"+this.getDomRef().parentNode.id,draggableSelector:".sapUshellTileContainerHeader",rootSelector:"#shell-container",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",_publishAsync:c._publishAsync}).enable();}}if(this.getModel().getProperty("/tileActionModeActive")){t.uiEditModeActions.enable();}sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");sap.ui.getCore().getEventBus().publish("launchpad","contentRefresh");var l=sap.ui.getCore().byId("loadingDialog");l.closeLoadingScreen();c._addBottomSpace();if(this.getModel().getProperty("/tilesOpacity")){sap.ushell.utils.handleTilesOpacity(this.getModel());}}try{sap.ushell.utils.handleTilesVisibility();}catch(e){}};jQuery.sap.require("sap.ushell.ui.launchpad.DashboardGroupsContainer");var G=new sap.ushell.ui.launchpad.DashboardGroupsContainer("dashboardGroups",{accessibilityLabel:sap.ushell.resources.i18n.getText("DashboardGroups_label"),groups:{path:"/groups",template:T},afterRendering:A});G.addEventDelegate({onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var j=jQuery(".sapUshellGroupLI:first:visible");if(!j.length){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}j.focus();},onsapskipforward:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);},onsaptabnext:function(e){if(!t.getModel().getProperty("/tileActionModeActive")){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}},onsaptabprevious:function(e){sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var j=jQuery(":focus");if(j.hasClass("sapUshellTileContainerHeader")){e.preventDefault();var b=jQuery("#openCatalogActionItem:visible");if(b.length){b.focus();}else{sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}}}});return G;},markDisableGroups:function(){this.getModel().setProperty('/isInDrag',true);},unmarkDisableGroups:function(){if(this.getModel()){this.getModel().setProperty('/isInDrag',false);}},_getBeforeContent:function(c){var a=new sap.m.Button({icon:"sap-icon://add",text:sap.ushell.resources.i18n.getText("add_group_at"),visible:{parts:["/tileActionModeActive"],formatter:function(t){return(!this.getParent().getIsGroupLocked()&&!this.getParent().getDefaultGroup()&&t);}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},type:sap.m.ButtonType.Transparent,press:[function(d){var p=d.getSource().getBindingContext().getPath(),b=p.split("/");var i=window.parseInt(b[b.length-1],10);sap.ui.getCore().getEventBus().publish("launchpad","createGroupAt",{title:sap.ushell.resources.i18n.getText("new_group_name"),location:i});},c]}).addStyleClass("sapUshellAddGroupButton");a.addDelegate({onAfterRendering:function(){jQuery(".sapUshellAddGroupButton").attr("tabindex",-1);}});return a;},_getAfterContent:function(c){var a=new sap.m.Button({icon:"sap-icon://add",text:sap.ushell.resources.i18n.getText("add_group_at"),visible:{parts:["isLastGroup","/tileActionModeActive","/isInDrag"],formatter:function(i,t,b){return(i&&t);}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},type:sap.m.ButtonType.Transparent,press:[function(d){var p=d.getSource().getBindingContext().getPath(),b=p.split("/");var i=window.parseInt(b[b.length-1],10);sap.ui.getCore().getEventBus().publish("launchpad","createGroupAt",{title:sap.ushell.resources.i18n.getText("new_group_name"),location:i+1});},c]}).addStyleClass("sapUshellAddGroupButton");a.addDelegate({onAfterRendering:function(){jQuery(".sapUshellAddGroupButton").attr("tabindex",-1);}});return a;},_getHeaderAction:function(c,b){jQuery.sap.require("sap.ushell.ui.launchpad.GroupHeaderActions");return new sap.ushell.ui.launchpad.GroupHeaderActions({content:this._getHeaderActions(),tileActionModeActive:{parts:['/tileActionModeActive',b+'isDefaultGroup'],formatter:function(i,I){return i&&!I;}},isOverflow:'{/isPhoneWidth}'}).addStyleClass("sapUshellOverlayGroupActionPanel");},_getTileContainerTemplate:function(){var f=new sap.ui.model.Filter("isTileIntentSupported",sap.ui.model.FilterOperator.EQ,true),t=this;var T=new sap.ushell.ui.launchpad.TileContainer({headerText:"{title}",tooltip:"{title}",tileActionModeActive:'{/tileActionModeActive}',ieHtml5DnD:this.ieHtml5DnD,enableHelp:'{/enableHelp}',groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",isGroupLocked:"{isGroupLocked}",showHeader:true,editMode:"{editMode}",titleChange:function(e){sap.ui.getCore().getEventBus().publish("launchpad","changeGroupTitle",{groupId:e.getSource().getGroupId(),newTitle:e.getParameter("newTitle")});},showPlaceholder:{parts:["/tileActionModeActive","tiles/length"],formatter:function(a){return(a||!this.groupHasVisibleTiles())&&!this.getIsGroupLocked();}},visible:{parts:["/tileActionModeActive","isGroupVisible","links/length","tiles/length"],formatter:function(a,i,l){if(!this.groupHasVisibleTiles()&&!l&&(!this.getModel().getProperty("/personalization")||(this.getIsGroupLocked()&&!a)||(this.getDefaultGroup()&&!a))){return false;}return i||a;}},links:{path:"links",templateShareable:true,template:new sap.ushell.ui.launchpad.LinkTileWrapper({uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",target:"{target}",isLocked:"{isLocked}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.ieHtml5DnD,afterRendering:function(e){var c=e.getSource().getBindingContext(),o;if(c){o=c.getObject();sap.ui.getCore().getEventBus().publish("launchpad","tileRendered",{tileId:o.originalTileId,tileDomElementId:e.getSource().getId()});}},tileViews:{path:"content",factory:function(i,c){return c.getObject();}}}),filters:[f]},tiles:{path:"tiles",templateShareable:true,template:new sap.ushell.ui.launchpad.Tile({"long":"{long}","tall":"{tall}",uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",target:"{target}",isLocked:"{isLocked}",tileActionModeActive:"{/tileActionModeActive}",showActionsIcon:"{showActionsIcon}",rgba:"{rgba}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.ieHtml5DnD,afterRendering:function(e){var c=e.getSource().getBindingContext(),o;if(c){o=c.getObject();sap.ui.getCore().getEventBus().publish("launchpad","tileRendered",{tileId:o.originalTileId,tileDomElementId:e.getSource().getId()});}},tileViews:{path:"content",factory:function(i,c){return c.getObject();}},coverDivPress:function(e){if(!e.oSource.getBindingContext().getObject().tileIsBeingMoved){sap.ushell.components.flp.ActionMode._openActionsMenu(e);}},showActions:function(e){sap.ushell.components.flp.ActionMode._openActionsMenu(e);},deletePress:function(e){var o=e.getSource(),a=o.getBindingContext().getObject().object;var d={originalTileId:sap.ushell.Container.getService("LaunchPage").getTileId(a)};sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",d,this);},press:[this.oController.dashboardTilePress,this.oController]}),filters:[f]},add:function(e){t.parentComponent.getRouter().navTo('catalog',{filters:JSON.stringify({targetGroup:encodeURIComponent(e.getSource().getBindingContext().sPath)})});},afterRendering:function(e){if(sap.ushell.Layout.isInited){sap.ushell.Layout.reRenderGroupLayout(e.getSource());}this.bindProperty("showBackground","/tileActionModeActive");this.bindProperty("showDragIndicator",{parts:['/tileActionModeActive','/enableDragIndicator'],formatter:function(I,d){return I&&d&&!this.getIsGroupLocked()&&!this.getDefaultGroup();}});this.bindProperty("showMobileActions",{parts:['/tileActionModeActive'],formatter:function(I){return I&&!this.getDefaultGroup();}});this.bindProperty("showIcon",{parts:['/isInDrag','/tileActionModeActive'],formatter:function(I,b){return(this.getIsGroupLocked()&&(I||b))||(this.getDefaultGroup()&&b);}});this.bindProperty("deluminate",{parts:['/isInDrag'],formatter:function(I){return this.getIsGroupLocked()&&I;}});if(t.bTileContainersContentAdded&&!this.getBeforeContent().length){var g=this.getModel().getProperty("/groups");var i;for(i=0;i<g.length;i++){if(g[i].groupId===this.getGroupId()){break;}}t._addTileContainerContent(i);}if(t.bFirstRendering){t.bFirstRendering=false;if(!t.getModel().getProperty("/tileActionModeActive")){var a=jQuery('.sapUshellDashboardGroupsContainer .sapUshellTile:first');if(a.length){a.focus();}else{jQuery("#ConfigBtn").focus();}}}jQuery(".sapUshellLinksContainer a").attr("tabindex",-1);jQuery(".sapUshellContainerHeaderActions button").attr("tabindex",-1);}});return T;},_getHeaderActions:function(){return new sap.m.Button({text:{path:'removable',formatter:function(i){if(sap.ui.Device.system.phone){if(i){this.setIcon("sap-icon://delete");}else{this.setIcon("sap-icon://refresh");}}return sap.ushell.resources.i18n.getText(i?'DeleteGroupBtn':'ResetGroupBtn');}},type:sap.m.ButtonType.Transparent,visible:{parts:['/tileActionModeActive','isDefaultGroup'],formatter:function(i,I){return i&&!I;}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},press:function(e){var s=e.getSource(),g=s.getBindingContext();this.oController._handleGroupDeletion(g);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton");},_handleTileUIStart:function(e,u){if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))){this.titleElement=u.querySelector("[title]");this.titleElement.setAttribute("data-title",this.titleElement.getAttribute("title"));this.titleElement.removeAttribute("title");}if(sap.ui.Device.system.desktop){jQuery('body').addClass("sapUshellDisableUserSelect");}},_handleStartDrag:function(a,t){if(window.getSelection){var s=window.getSelection();try{s.removeAllRanges();}catch(e){}}sap.ushell.Layout.getLayoutEngine().layoutStartCallback(t);jQuery(t).find("a").removeAttr('href');this.placeHolderElement=jQuery(".sapUshellTile-placeholder");sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");if(this.bAnimate){this._startDragNDropAnimate(a,t);}},_handleDrop:function(e,t){jQuery('#dashboardGroups .sapUshellHidePlusTile').removeClass('sapUshellHidePlusTile');if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}this.oController._handleDrop.call(this.oController,e,t);if(sap.ui.Device.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}},_handleDragMove:function(c){if(!c.isScrolling){sap.ushell.Layout.getLayoutEngine().moveDraggable(c.moveX,c.moveY);}if(!c.isScrolling&&this.bAnimate){this._changeDragNDropAnimate(c.evt,c.clone);}},_hidePlusTile:function(p){if(p){p.className+=" sapUshellHidePlusTile";}},_showPlusTile:function(p){if(p){p.className=p.className.split(' '+'sapUshellHidePlusTile').join('');}},_getTileTopOffset:function(t,a,d){var T=0+d;T+=t.closest(".sapUshellDashboardGroupsContainerItem").position().top;T+=a.top;return T;},_startDragNDropAnimate:function(e,u){this.dragNDropData={};this.dragNDropData.jqCloneArea=jQuery("<div id='cloneArea' class='sapUshellCloneArea sapUshellDashboardGroupsContainerItem'></div>");var j=jQuery.sap.byId(this.oDashboardGroupsBox.getId());var t=j.find('.sapUshellTileContainer:visible:first');this.dragNDropData.jqDashboard=jQuery(".sapUshellDashboardView");var d=this.dragNDropData.jqDashboard.scrollTop();this.dragNDropData.containerLeftMargin=parseInt(t.css("margin-left"),10);var c=parseFloat(jQuery("#dashboardPage-scroll").offset().left);var a=j.offset().left;this.dragNDropData.jqCloneArea.css("left",a-c);this.dragNDropData.jqDraggableElements=jQuery(".sapUshellTile[role='link'],.sapUshellPlusTile",j);this.dragNDropData.jqGroupTitles=jQuery(".sapUshellContainerTitle:visible",j);var b,f,T,C,g,i;for(i=0;i<this.dragNDropData.jqDraggableElements.length;i++){b=this.dragNDropData.jqDraggableElements.eq(i);f=b[0];C=b.clone(true);f.tilePosition=b.position();f.tileOffset=b.offset();C.attr("id",C.attr("id")+'-clone');C.css("font-size",b.css("font-size"));C.addClass("sapUshellClonedTile");b.data("clone",C);T=parseInt(f.tilePosition.left,10)+this.dragNDropData.containerLeftMargin+"px";g=this._getTileTopOffset(b,f.tilePosition,d);C.css("left",T);C.css("top",g+"px");this.dragNDropData.jqCloneArea.append(C);b.css("visibility","hidden");}var h,k,G,o,l;for(i=0;i<this.dragNDropData.jqGroupTitles.length;i++){h=this.dragNDropData.jqGroupTitles.eq(i);k=h[0];o=h.clone(true);k.titlePosition=h.position();k.titleOffset=h.offset();o.attr("id",o.attr("id")+'-clone');o.css("font-size",h.css("font-size"));o.addClass("sapUshellClonedTile");h.data("clone",o);G=parseInt(k.titlePosition.left,10)+this.dragNDropData.containerLeftMargin+"px";l=this._getTileTopOffset(h,k.titlePosition,d);o.css("left",G);o.css("top",l+"px");this.dragNDropData.jqCloneArea.append(o);h.css("visibility","hidden");}this.dragNDropData.jqDashboard.append(this.dragNDropData.jqCloneArea);},_changeDragNDropAnimate:function(e,u){var d=this.dragNDropData.jqDashboard.scrollTop();var j,t,c,a,b,T,i,C;for(i=0;i<this.dragNDropData.jqDraggableElements.length;i++){j=this.dragNDropData.jqDraggableElements.eq(i);t=j[0];c=j.position();a=j.offset();if((a.left===t.tileOffset.left)&&(a.top===t.tileOffset.top)){continue;}t.tilePosition=c;t.tileOffset=a;C=j.data("clone");if(!C){continue;}b=t.tilePosition.left+this.dragNDropData.containerLeftMargin;T=this._getTileTopOffset(j,t.tilePosition,d);C.stop(true,false).animate({left:b,top:T},{duration:250},{easing:"swing"});}},_stopDragNDropAnimation:function(e,u){if(this.bAnimate){this.dragNDropData.jqDraggableElements.removeData("clone");this.dragNDropData.jqDraggableElements.css("visibility","visible");this.dragNDropData.jqGroupTitles.css("visibility","visible");this.dragNDropData.jqCloneArea.empty();this.dragNDropData.jqCloneArea.remove();}},_disableUIActions:function(){if(this.uiActions){this.uiActions.disable();this.uiActions=null;}},_disableEditModeUIActions:function(){if(this.uiEditModeActions){this.uiEditModeActions.disable();this.uiEditModeActions=null;}},getControllerName:function(){return"sap.ushell.components.flp.launchpad.dashboard.DashboardContent";},exit:function(){sap.ui.core.mvc.View.prototype.exit.apply(this,arguments);if(sap.ui.getCore().byId("hideGroupsBtn")){sap.ui.getCore().byId("hideGroupsBtn").destroy();}if(sap.ui.getCore().byId("ActionModeBtn")){sap.ui.getCore().byId("ActionModeBtn").destroy();}if(sap.ui.getCore().byId("floatingActionBtn")){sap.ui.getCore().byId("floatingActionBtn").destroy();}}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.flp.launchpad.group_list.GroupList.view')){jQuery.sap.declare('sap.ushell.components.flp.launchpad.group_list.GroupList.view');(function(){"use strict";jQuery.sap.require('sap.ui.core.IconPool');sap.ui.jsview("sap.ushell.components.flp.launchpad.group_list.GroupList",{createContent:function(c){this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);this.oModel=this.parentComponent.getModel();var t=this,o=this._getOpenCatalogItem(c),g=this._getGroupListItemTemplate(c);this.bAnimate=sap.ui.Device.system.desktop;this.isTouch=!sap.ui.Device.system.desktop;this.oGroupList=new sap.m.List("groupListItems",{items:{path:"/groups",template:g}}).addStyleClass("sapUshellGroupItemList");jQuery.extend(this.oGroupList,{onsapskipforward:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.goToTileContainer(e);},onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);},onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}});this.oGroupList.onAfterRendering=function(){this.data("sap-ui-fastnavgroup","false",false);jQuery("#groupListFooter").attr("data-sap-ui-fastnavgroup","false");t.oController.handleScroll();};jQuery.sap.require("sap.ushell.override");this.oGroupList.updateItems=sap.ushell.override.updateAggregatesFactory("items");if(this.getViewData().enablePersonalization===undefined||this.getViewData().enablePersonalization!==false){this.oActionList=new sap.m.List({items:[o]});var a=this.oActionList.onAfterRendering;this.oActionList.onAfterRendering=function(e){a.call(this,e);};var b=new sap.m.Bar({id:"groupListFooter",contentMiddle:[this.oActionList]});b.addStyleClass("sapUshellPersonalizationOn");this.groupListPage=new sap.m.Page({id:"groupListPage",showHeader:false,showFooter:true,content:[this.oGroupList],footer:b});this.groupListPage.addStyleClass("sapUshellPersonalizationOn");}else{this.groupListPage=new sap.m.Page({id:"groupListPage",showHeader:false,showFooter:false,content:[this.oGroupList]});}this.addStyleClass("sapUshellGroupList");return[this.groupListPage];},_getOpenCatalogItem:function(){var t=this,o=function(){t.parentComponent.getRouter().navTo('catalog');},O=new sap.m.ActionListItem("openCatalogActionItem",{text:"{i18n>open_catalog}",tooltip:"{i18n>openCatalog_tooltip}",press:o});O.addEventDelegate({onsaptabnext:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.goToTileContainer();},onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var j=jQuery(".sapUshellGroupLI:first:visible");if(!j.length){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}j.focus();}});if(this.oModel.getProperty("/enableHelp")){O.addStyleClass('help-id-openCatalogActionItem');}return O;},_getGroupListItemTemplate:function(c){var o=function(e){var x=this.getModel()&&this.getModel().getProperty('/enableHelp');if(this.getDefaultGroup()){this.addStyleClass("sapUshellDefaultGroupItem");if(x){this.addStyleClass("help-id-homeGroupListItem");}}else{this.addStyleClass("sapUshellGroupListItem");if(x){this.addStyleClass("help-id-groupListItem");}}jQuery(this.getDomRef()).attr("tabindex","0");};return new sap.ushell.ui.launchpad.GroupListItem({index:"{index}",title:"{title}",tooltip:"{title}",defaultGroup:"{isDefaultGroup}",groupId:"{groupId}",numberOfTiles:"{tiles/length}",afterRendering:o,isGroupVisible:"{isGroupVisible}",press:[function(e){this._handleGroupListItemPress(e);},c],visible:{parts:["/tileActionModeActive","isGroupVisible","/personalization","isGroupLocked","tiles/length","isDefaultGroup"],formatter:function(t,i,p,a,n,b){if(!this.groupHasVisibleTiles()&&(!p||(a&&!t)||(b&&!t))){return false;}return i||t;}}});},getControllerName:function(){return"sap.ushell.components.flp.launchpad.group_list.GroupList";}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.action.ActionTile.controller')){jQuery.sap.declare('sap.ushell.components.tiles.action.ActionTile.controller');(function(){"use strict";sap.ui.getCore().loadLibrary("sap.m");jQuery.sap.require('sap.ui.core.IconPool');sap.ui.controller("sap.ushell.components.tiles.action.ActionTile",{onInit:function(){var v=this.getView();var V=v.getViewData();var r=sap.ushell.components.tiles.utils.getResourceBundleModel();var t=V.chip;var c=sap.ushell.components.tiles.utils.getActionConfiguration(t);var m;var a=this;function f(s,S){var b=r.getResourceBundle(),R=b.getText("configuration.semantic_object")+":\n"+s+"\n\n"+b.getText("configuration.semantic_action")+":\n"+S;return R;}v.setModel(r,"i18n");m=new sap.ui.model.json.JSONModel({config:c,displayText:f(c.semantic_object,c.semantic_action)});v.setModel(m);if(t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var C=sap.ushell.components.tiles.utils.getConfigurationUi(a.getView(),"sap.ushell.components.tiles.action.Configuration");t.configurationUi.attachCancel(this.onCancelConfiguration.bind(null,C));t.configurationUi.attachSave(this.onSaveConfiguration.bind(this,C,f));return C;}.bind(this));v.byId("actionTile").setTooltip(r.getResourceBundle().getText("edit_configuration.tooltip"));}},onPress:function(e){var t=this.getView().getViewData().chip;if(t.configurationUi.isEnabled()){t.configurationUi.display();}},onSaveConfiguration:function(c,f){var d=jQuery.Deferred(),m=c.getModel(),t=m.getProperty("/tileModel"),T=c.getViewData().chip;function l(E){jQuery.sap.log.warning(E,null,"sap.ushell.components.tiles.action.ActionTile.controller");d.reject(E);}var r=sap.ushell.components.tiles.utils.checkTMInputOnSaveConfig(c);if(r){d.reject("mandatory_fields_missing");return d.promise();}if(sap.ushell.components.tiles.utils.tableHasDuplicateParameterNames(m.getProperty("/config/rows"))){var b=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();d.reject(b.getText("configuration.signature.uniqueParamMessage.text"));}else{var F=m.getProperty("/config/formFactorConfigDefault")?undefined:sap.ushell.components.tiles.utils.buildFormFactorsObject(m);var M=sap.ushell.components.tiles.utils.getMappingSignatureString(m.getProperty("/config/rows"),m.getProperty("/config/isUnknownAllowed"));var a={semantic_object:jQuery.trim(m.getProperty("/config/semantic_object"))||"",semantic_action:jQuery.trim(m.getProperty("/config/semantic_action"))||"",display_title_text:jQuery.trim(m.getProperty("/config/display_title_text"))||"",url:jQuery.trim(m.getProperty("/config/url"))||"",ui5_component:jQuery.trim(m.getProperty("/config/ui5_component"))||"",navigation_provider:jQuery.trim(m.getProperty("/config/navigation_provider")),navigation_provider_role:jQuery.trim(m.getProperty("/config/navigation_provider_role"))||"",navigation_provider_instance:jQuery.trim(m.getProperty("/config/navigation_provider_instance"))||"",target_application_id:jQuery.trim(m.getProperty("/config/target_application_id"))||"",target_application_alias:jQuery.trim(m.getProperty("/config/target_application_alias"))||"",transaction:{code:jQuery.trim(m.getProperty("/config/transaction/code"))},web_dynpro:{application:jQuery.trim(m.getProperty("/config/web_dynpro/application")),configuration:jQuery.trim(m.getProperty("/config/web_dynpro/configuration"))},target_system_alias:jQuery.trim(m.getProperty("/config/target_system_alias")),display_info_text:jQuery.trim(m.getProperty("/config/display_info_text")),form_factors:F,mapping_signature:M};var e=T.bag.getBag('tileProperties');e.setText('display_title_text',a.display_title_text);T.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(a)},function(){var C=sap.ushell.components.tiles.utils.getActionConfiguration(T,false);var o=sap.ushell.components.tiles.utils.getActionConfiguration(T,true);m=new sap.ui.model.json.JSONModel({config:C,tileModel:t});c.setModel(m);t.setData({config:o,displayText:f(o.semantic_object,o.semantic_action)},false);e.save(function(){jQuery.sap.log.debug("property bag 'tileProperties' saved successfully");d.resolve();},l);},l);}return d.promise();},onCancelConfiguration:function(c){var v=c.getViewData();var m=c.getModel();var t=m.getProperty("/tileModel");var T=v.chip;var C=sap.ushell.components.tiles.utils.getActionConfiguration(T,false);c.getModel().setData({config:C,tileModel:t},false);}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.action.Configuration.controller')){jQuery.sap.declare('sap.ushell.components.tiles.action.Configuration.controller');(function(){"use strict";sap.ui.controller("sap.ushell.components.tiles.action.Configuration",{sEnterValuePlaceHolder:"",sDuplicateErrorMsg:"",sDuplicateErrorTitle:"",sInvalidParmMsg:"",aDefaultObjects:[{obj:"",name:""},{obj:"*",name:"*"}],onConfigurationInputChange:function(c){sap.ushell.components.tiles.utils.checkTMInput(this.getView(),c);},onInit:function(){var v=this.getView();var s=v.byId("semantic_objectInput");var r=v.byId("navigation_provider_roleInput");var i=v.byId("navigation_provider_instanceInput");var a=v.byId("target_application_aliasInput");var A=v.byId("semantic_actionInput");var t=v.byId("targetTypeInput");var R=sap.ushell.components.tiles.utils.getResourceBundleModel();v.setModel(R,"i18n");v.setViewName("sap.ushell.components.tiles.action.Configuration");sap.ushell.components.tiles.utils.createSemanticObjectModel(this,s,this.aDefaultObjects);sap.ushell.components.tiles.utils.createRoleModel(this,r,i);sap.ushell.components.tiles.utils.createAliasModel(this,a);sap.ushell.components.tiles.utils.createActionModel(this,A);sap.ushell.components.tiles.utils.createNavigationProviderModel(this,t);s.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/semantic_object",V);});r.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/navigation_provider_role",V);sap.ushell.components.tiles.utils.updateAliasModel(v,a);});i.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/navigation_provider_instance",V);});a.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/target_application_alias",V);});var b=R.getResourceBundle();this.sEnterValuePlaceHolder=b.getText("configuration.signature.table.valueFieldLbl");this.sDuplicateErrorMsg=b.getText("configuration.signature.uniqueParamMessage.text");this.sDuplicateErrorTitle=b.getText("configuration.signature.uniqueParamMessage.title");this.sInvalidParmMsg=b.getText("configuration.signature.invalidParamMessage.text");},handleMandatoryChange:function(m){var i=m.getParameter('id');var p=sap.ui.getCore().byId(i).getParent().getCells();var I=m.getParameter('checked');if(I){p[2].setEnabled(true);p[2].setPlaceholder(this.sEnterValuePlaceHolder);p[4].setEnabled(false);p[4].setValue("");p[4].setPlaceholder("");p[3].setEnabled(true);}else{p[2].setEnabled(false);p[2].setValue("");p[2].setPlaceholder("");p[4].setEnabled(true);p[4].setPlaceholder(this.sEnterValuePlaceHolder);p[3].setEnabled(false);p[3].setChecked(false);}},addRow:function(){var v=this.getView();var m=v.getModel();var r=m.getProperty('/config/rows');var n=sap.ushell.components.tiles.utils.getEmptyRowObj();r.push(n);m.setProperty('/config/rows',r);},deleteRow:function(){var v=this.getView();var m=v.getModel();var r=m.getProperty('/config/rows');var t=v.byId("mappingSignatureTable");var s=t.getSelectedIndices();var S=s.sort(function(a,b){return b-a;}).slice();for(var i=0;i<S.length;i++){t.removeSelectionInterval(S[i],S[i]);r.splice(S[i],1);}m.setProperty('/config/rows',r);},checkDuplicateNames:function(c){var m=this.getView().getModel();var r=m.getProperty('/config/rows');var n=sap.ui.getCore().byId(c.getParameter('id'));var N=c.getParameter('newValue');if(N!=""&&!(/^[\w-]+$/.test(N))){n.setValueState(sap.ui.core.ValueState.Error);sap.m.MessageBox.alert(this.sInvalidParmMsg,this.focusNameField.bind(n),this.sDuplicateErrorTitle);}if(sap.ushell.components.tiles.utils.tableHasDuplicateParameterNames(r)){n.setValueState(sap.ui.core.ValueState.Error);sap.m.MessageBox.alert(this.sDuplicateErrorMsg,this.focusNameField.bind(n),this.sDuplicateErrorTitle);}else{n.setValueState(sap.ui.core.ValueState.None);}},focusNameField:function(){this.focus();},onValueHelpRequest:function(e){sap.ushell.components.tiles.utils.objectSelectOnValueHelpRequest(this,e,false);},onActionValueHelpRequest:function(e){sap.ushell.components.tiles.utils.actionSelectOnValueHelpRequest(this,e);},onRoleValueHelpRequest:function(e){sap.ushell.components.tiles.utils.roleSelectOnValueHelpRequest(this,e);},onInstanceValueHelpRequest:function(e){sap.ushell.components.tiles.utils.instanceSelectOnValueHelpRequest(this,e);},instanceSuggest:function(e){sap.ushell.components.tiles.utils.instanceSuggest(this,e);},aliasSuggest:function(e){sap.ushell.components.tiles.utils.aliasSuggest(this,e);},onAliasValueHelpRequest:function(e){sap.ushell.components.tiles.utils.applicationAliasSelectOnValueHelpRequest(this,e);},onFormFactorChange:function(){var m=this.getView().getModel();m.setProperty('/config/formFactorConfigDefault',false);},onApplicationTypeChange:function(e){var p=e.getParameters();if(p.selectedItem){sap.ushell.components.tiles.utils.displayApplicationTypeFields(p.selectedItem.getKey(),this.getView());}}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.applauncher.Configuration.controller')){jQuery.sap.declare('sap.ushell.components.tiles.applauncher.Configuration.controller');(function(){"use strict";sap.ui.controller("sap.ushell.components.tiles.applauncher.Configuration",{onConfigurationInputChange:function(c){sap.ushell.components.tiles.utils.checkInput(this.getView(),c);},aDefaultObjects:[{obj:"",name:""}],onInit:function(){var v=this.getView(),t=v.byId("targetUrl"),s=v.byId("navigation_semantic_objectInput"),a=v.byId("navigation_semantic_actionInput"),r=sap.ushell.components.tiles.utils.getResourceBundleModel();v.setModel(r,"i18n");var b=r.getResourceBundle();v.setViewName("sap.ushell.components.tiles.applauncher.Configuration");sap.ushell.components.tiles.utils.createSemanticObjectModel(this,s,this.aDefaultObjects);sap.ushell.components.tiles.utils.createActionModel(this,a);s.attachChange(function(C){var V=C.getSource().getValue();v.getModel().setProperty("/config/navigation_semantic_object",V);});function c(u){return!u;}t.bindProperty("enabled",{formatter:c,path:"/config/navigation_use_semantic_object"});var i=new sap.ui.core.ListItem({text:b.getText("configuration.tile_actions.table.target_type.url")});v.byId("targetTypeCB").addItem(i);i=new sap.ui.core.ListItem({text:b.getText("configuration.tile_actions.table.target_type.intent")});v.byId("targetTypeCB").addItem(i);},onAfterRendering:function(){sap.ushell.components.tiles.utils.updateMessageStripForOriginalLanguage(this.getView());},onValueHelpRequest:function(e){sap.ushell.components.tiles.utils.objectSelectOnValueHelpRequest(this,e,false);},onActionValueHelpRequest:function(e){sap.ushell.components.tiles.utils.actionSelectOnValueHelpRequest(this,e,false);},onCheckBoxChange:function(e){var v=this.getView(),s=v.byId("navigation_semantic_objectInput"),m=s.getModel(),a=e.getSource().getSelected();m.setProperty("/enabled",a);sap.ushell.components.tiles.utils.checkInput(this.getView(),e);},onIconValueHelpRequest:function(e){sap.ushell.components.tiles.utils.iconSelectOnValueHelpRequest(this,e,false);},onSelectIconClose:function(){sap.ushell.components.tiles.utils.onSelectIconClose(this.getView());},onSelectIconOk:function(){sap.ushell.components.tiles.utils.onSelectIconOk(this.getView());},handleTargetTypeChange:function(t){sap.ushell.components.tiles.utils.onTargetTypeChange(t);},onTileActionValueHelp:function(e){sap.ushell.components.tiles.utils.objectSelectOnValueHelpRequest(this,e,true);},onTileActionIconValueHelp:function(e){sap.ushell.components.tiles.utils.iconSelectOnValueHelpRequest(this,e,true);},addRow:function(){sap.ushell.components.tiles.utils.addTileActionsRow(this.getView());},deleteRow:function(){sap.ushell.components.tiles.utils.deleteTileActionsRow(this.getView());}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.applauncher.StaticTile.controller')){jQuery.sap.declare('sap.ushell.components.tiles.applauncher.StaticTile.controller');(function(){"use strict";sap.ui.getCore().loadLibrary("sap.m");jQuery.sap.require('sap.ui.core.IconPool');sap.ui.controller("sap.ushell.components.tiles.applauncher.StaticTile",{onInit:function(){var s=this.getView(),v=s.getViewData(),t=v.chip,c=sap.ushell.components.tiles.utils.getConfiguration(t,t.configurationUi.isEnabled(),false),m,k,K,a=this,N=c.navigation_target_url,S;S=t.url.getApplicationSystem();if(S){N+=((N.indexOf("?")<0)?"?":"&")+"sap-system="+S;}this.navigationTargetUrl=N;m=new sap.ui.model.json.JSONModel({config:c,nav:{navigation_target_url:(t.configurationUi&&t.configurationUi.isEnabled()?"":N)},search:{display_highlight_terms:[]}});s.setModel(m);var T=this.getView().getTileControl();this.getView().addContent(T);if(t.types){t.types.attachSetType(function(d){if(d==='link'){a.getView().removeAllContent();var l=a.getView().getLinkControl();a.getView().addContent(l);}else{a.getView().removeAllContent();var T=a.getView().getTileControl();a.getView().addContent(T);}});}if(t.search){k=s.getModel().getProperty("/config/display_search_keywords");K=jQuery.grep(k.split(/[, ]+/),function(n,i){return n&&n!=="";});t.search.setKeywords(K);t.search.attachHighlight(function(h){s.getModel().setProperty("/search/display_highlight_terms",h);});}if(t.preview){t.preview.setTargetUrl(N);t.preview.setPreviewIcon(c.display_icon_url);t.preview.setPreviewTitle(c.display_title_text);}if(t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var C=sap.ushell.components.tiles.utils.getConfigurationUi(s,"sap.ushell.components.tiles.applauncher.Configuration");t.configurationUi.attachCancel(a.onCancelConfiguration.bind(null,C));t.configurationUi.attachSave(a.onSaveConfiguration.bind(null,C));return C;});this.getView().getContent()[0].setTooltip(sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"));}if(t.actions){var A=c.actions,e;if(A){e=A.slice();}else{e=[];}var b=sap.ushell.components.tiles.utils.getTileSettingsAction(m,this.onSaveRuntimeSettings.bind(this));e.push(b);t.actions.setActionsProvider(function(){return e;});}},onPress:function(e){var s=this.getView(),v=s.getViewData(),t=v.chip;if(t.configurationUi.isEnabled()){t.configurationUi.display();}else if(this.navigationTargetUrl){if(this.navigationTargetUrl[0]==='#'){hasher.setHash(this.navigationTargetUrl);}else{window.open(this.navigationTargetUrl,'_blank');}}},onSaveRuntimeSettings:function(s){var v=s.getModel(),t=this.getView().getViewData().chip,c=this.getView().getModel().getProperty("/config");c.display_title_text=v.getProperty('/title');c.display_subtitle_text=v.getProperty('/subtitle');c.display_info_text=v.getProperty('/info');c.display_search_keywords=v.getProperty('/keywords');var a=t.bag.getBag('tileProperties');a.setText('display_title_text',c.display_title_text);a.setText('display_subtitle_text',c.display_subtitle_text);a.setText('display_info_text',c.display_info_text);a.setText('display_search_keywords',c.display_search_keywords);function l(e){jQuery.sap.log.error(e,null,"sap.ushell.components.tiles.applauncher.StaticTile.controller");}a.save(function(){jQuery.sap.log.debug("property bag 'tileProperties' saved successfully");this.getView().getModel().setProperty('/config/display_title_text',c.display_title_text);this.getView().getModel().setProperty('/config/display_subtitle_text',c.display_subtitle_text);this.getView().getModel().setProperty('/config/display_info_text',c.display_info_text);this.getView().getModel().setProperty('/config/display_search_keywords',c.display_search_keywords);this.getView().getModel().refresh();}.bind(this),l);},onSaveConfiguration:function(c){var d=jQuery.Deferred(),m=c.getModel(),t=m.getProperty("/tileModel"),T=c.getViewData().chip,a=sap.ushell.components.tiles.utils.tileActionsRows2TileActionsArray(m.getProperty("/config/tile_actions_rows")),b={display_icon_url:m.getProperty("/config/display_icon_url"),navigation_use_semantic_object:m.getProperty("/config/navigation_use_semantic_object"),navigation_target_url:m.getProperty("/config/navigation_target_url"),navigation_semantic_object:jQuery.trim(m.getProperty("/config/navigation_semantic_object"))||"",navigation_semantic_action:jQuery.trim(m.getProperty("/config/navigation_semantic_action"))||"",navigation_semantic_parameters:jQuery.trim(m.getProperty("/config/navigation_semantic_parameters")),display_search_keywords:m.getProperty("/config/display_search_keywords")};var r=sap.ushell.components.tiles.utils.checkInputOnSaveConfig(c);if(r){d.reject("mandatory_fields_missing");return d.promise();}if(b.navigation_use_semantic_object){b.navigation_target_url=sap.ushell.components.tiles.utils.getSemanticNavigationUrl(b);m.setProperty("/config/navigation_target_url",b.navigation_target_url);}var e=T.bag.getBag('tileProperties');e.setText('display_title_text',m.getProperty("/config/display_title_text"));e.setText('display_subtitle_text',m.getProperty("/config/display_subtitle_text"));e.setText('display_info_text',m.getProperty("/config/display_info_text"));e.setText('display_search_keywords',b.display_search_keywords);var f=T.bag.getBag('tileNavigationActions');sap.ushell.components.tiles.utils.populateTileNavigationActionsBag(f,a);function l(E,o){jQuery.sap.log.error(E,null,"sap.ushell.components.tiles.applauncher.StaticTile.controller");d.reject(E,o);}T.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(b)},function(){var C=sap.ushell.components.tiles.utils.getConfiguration(T,false,false),o=sap.ushell.components.tiles.utils.getConfiguration(T,true,false),m=new sap.ui.model.json.JSONModel({config:C,nav:{navigation_target_url:""},tileModel:t});c.setModel(m);t.setData({config:o,nav:{navigation_target_url:""}},false);if(T.preview){T.preview.setTargetUrl(C.navigation_target_url);T.preview.setPreviewIcon(C.display_icon_url);T.preview.setPreviewTitle(C.display_title_text);}e.save(function(){jQuery.sap.log.debug("property bag 'tileProperties' saved successfully");if(T.title){T.title.setTitle(b.display_title_text,function(){d.resolve();},l);}else{d.resolve();}},l);f.save(function(){jQuery.sap.log.debug("property bag 'navigationProperties' saved successfully");},l);},l);return d.promise();},onCancelConfiguration:function(c){var v=c.getViewData(),m=c.getModel(),t=m.getProperty("/tileModel"),T=v.chip,C=sap.ushell.components.tiles.utils.getConfiguration(T,T.configurationUi.isEnabled(),false);c.getModel().setData({config:C,nav:{navigation_target_url:""},tileModel:t},false);}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.applauncherdynamic.Configuration.controller')){jQuery.sap.declare('sap.ushell.components.tiles.applauncherdynamic.Configuration.controller');(function(){"use strict";sap.ui.controller("sap.ushell.components.tiles.applauncherdynamic.Configuration",{onConfigurationInputChange:function(c){sap.ushell.components.tiles.utils.checkInput(this.getView(),c);},aDefaultObjects:[{obj:"",name:""}],onInit:function(){var v=this.getView(),s=v.byId("navigation_semantic_objectInput"),a=v.byId("navigation_semantic_actionInput"),r=sap.ushell.components.tiles.utils.getResourceBundleModel();v.setModel(r,"i18n");var b=r.getResourceBundle();v.setViewName("sap.ushell.components.tiles.applauncherdynamic.Configuration");sap.ushell.components.tiles.utils.createSemanticObjectModel(this,s,this.aDefaultObjects);sap.ushell.components.tiles.utils.createActionModel(this,a,this.aDefaultObjects);s.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/navigation_semantic_object",V);});a.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/navigation_semantic_action",V);});v.byId("targetUrl").bindProperty("enabled",{formatter:function(u){return!u;},path:"/config/navigation_use_semantic_object"});var i=new sap.ui.core.ListItem({text:b.getText("configuration.tile_actions.table.target_type.url")});v.byId("targetTypeCB").addItem(i);i=new sap.ui.core.ListItem({text:b.getText("configuration.tile_actions.table.target_type.intent")});v.byId("targetTypeCB").addItem(i);},onAfterRendering:function(){sap.ushell.components.tiles.utils.updateMessageStripForOriginalLanguage(this.getView());},onValueHelpRequest:function(e){sap.ushell.components.tiles.utils.objectSelectOnValueHelpRequest(this,e,false);},onActionValueHelpRequest:function(e){sap.ushell.components.tiles.utils.actionSelectOnValueHelpRequest(this,e,false);},onCheckBoxChange:function(e){var v=this.getView(),s=v.byId("navigation_semantic_objectInput"),m=s.getModel(),a=e.getSource().getSelected();m.setProperty("/enabled",a);sap.ushell.components.tiles.utils.checkInput(this.getView(),e);},onIconValueHelpRequest:function(e){sap.ushell.components.tiles.utils.iconSelectOnValueHelpRequest(this,e,false);},onSelectIconClose:function(){sap.ushell.components.tiles.utils.onSelectIconClose(this.getView());},onSelectIconOk:function(){sap.ushell.components.tiles.utils.onSelectIconOk(this.getView());},handleTargetTypeChange:function(t){sap.ushell.components.tiles.utils.onTargetTypeChange(t);},onTileActionValueHelp:function(e){sap.ushell.components.tiles.utils.objectSelectOnValueHelpRequest(this,e,true);},onTileActionIconValueHelp:function(e){sap.ushell.components.tiles.utils.iconSelectOnValueHelpRequest(this,e,true);},addRow:function(){sap.ushell.components.tiles.utils.addTileActionsRow(this.getView());},deleteRow:function(){sap.ushell.components.tiles.utils.deleteTileActionsRow(this.getView());}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller')){jQuery.sap.declare('sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller');(function(){"use strict";sap.ui.getCore().loadLibrary("sap.m");jQuery.sap.require('sap.ui.core.IconPool');jQuery.sap.require('sap.ui.thirdparty.datajs');sap.ui.controller("sap.ushell.components.tiles.applauncherdynamic.DynamicTile",{timer:null,oDataRequest:null,onInit:function(){var v=this.getView(),V=v.getViewData(),t=V.chip,c=sap.ushell.components.tiles.utils.getConfiguration(t,t.configurationUi.isEnabled(),false),m,k,K,a=this,N=c.navigation_target_url,s;s=t.url.getApplicationSystem();if(s){N+=((N.indexOf("?")<0)?"?":"&")+"sap-system="+s;}this.navigationTargetUrl=N;m=new sap.ui.model.json.JSONModel({config:c,data:sap.ushell.components.tiles.utils.getDataToDisplay(c,{number:(t.configurationUi.isEnabled()?1234:"...")}),nav:{navigation_target_url:(t.configurationUi&&t.configurationUi.isEnabled()?"":N)},search:{display_highlight_terms:[]}});v.setModel(m);var T=this.getView().getTileControl();this.getView().addContent(T);if(t.types){t.types.attachSetType(function(d){if(d==='link'){a.getView().removeAllContent();var l=a.getView().getLinkControl();a.getView().addContent(l);}else{a.getView().removeAllContent();var T=a.getView().getTileControl();a.getView().addContent(T);}});}if(t.search){k=v.getModel().getProperty("/config/display_search_keywords");K=jQuery.grep(k.split(/[, ]+/),function(n,i){return n&&n!=="";});t.search.setKeywords(K);t.search.attachHighlight(function(h){v.getModel().setProperty("/search/display_highlight_terms",h);});}if(t.preview){t.preview.setTargetUrl(N);t.preview.setPreviewIcon(c.display_icon_url);t.preview.setPreviewTitle(c.display_title_text);}if(t.refresh){t.refresh.attachRefresh(this.refreshHandler.bind(null,this));}if(t.visible){t.visible.attachVisible(this.visibleHandler.bind(this));}if(t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var C=sap.ushell.components.tiles.utils.getConfigurationUi(v,"sap.ushell.components.tiles.applauncherdynamic.Configuration");t.configurationUi.attachCancel(a.onCancelConfiguration.bind(null,C));t.configurationUi.attachSave(a.onSaveConfiguration.bind(null,C));return C;});this.getView().getContent()[0].setTooltip(sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"));}else{if(!t.preview||!t.preview.isEnabled()){if(!s){sap.ushell.Container.addRemoteSystemForServiceUrl(c.service_url);}this.onUpdateDynamicData();}}if(t.actions){var A=c.actions,e;if(A){e=A.slice();}else{e=[];}var b=sap.ushell.components.tiles.utils.getTileSettingsAction(m,this.onSaveRuntimeSettings.bind(this));e.push(b);t.actions.setActionsProvider(function(){return e;});}},stopRequests:function(){if(this.timer){clearTimeout(this.timer);}if(this.oDataRequest){try{this.oDataRequest.abort();}catch(e){jQuery.sap.log.warning(e.name,e.message);}}},onExit:function(){this.stopRequests();},onPress:function(){var v=this.getView(),V=v.getViewData(),m=v.getModel(),t=m.getProperty("/nav/navigation_target_url"),T=V.chip;if(T.configurationUi.isEnabled()){T.configurationUi.display();}else if(t){if(t[0]==='#'){hasher.setHash(t);}else{window.open(t,'_blank');}}},onUpdateDynamicData:function(){var v=this.getView(),c=v.getModel().getProperty("/config"),n=c.service_refresh_interval;if(!n){n=0;}else if(n<10){jQuery.sap.log.warning("Refresh Interval "+n+" seconds for service URL "+c.service_url+" is less than 10 seconds, which is not supported. "+"Increased to 10 seconds automatically.",null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller");n=10;}if(c.service_url){this.loadData(n);}},extractData:function(d){var n,k=["results","icon","title","number","numberUnit","info","infoState","infoStatus","targetParams","subtitle","stateArrow","numberState","numberDigits","numberFactor"];if(typeof d==="object"&&Object.keys(d).length===1){n=Object.keys(d)[0];if(jQuery.inArray(n,k)===-1){return d[n];}}return d;},onSaveRuntimeSettings:function(s){var v=s.getModel(),t=this.getView().getViewData().chip,c=this.getView().getModel().getProperty("/config");c.display_title_text=v.getProperty('/title');c.display_subtitle_text=v.getProperty('/subtitle');c.display_info_text=v.getProperty('/info');c.display_search_keywords=v.getProperty('/keywords');var a=t.bag.getBag('tileProperties');a.setText('display_title_text',c.display_title_text);a.setText('display_subtitle_text',c.display_subtitle_text);a.setText('display_info_text',c.display_info_text);a.setText('display_search_keywords',c.display_search_keywords);function l(e){jQuery.sap.log.error(e,null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller");}a.save(function(){jQuery.sap.log.debug("property bag 'tileProperties' saved successfully");this.getView().getModel().setProperty("/config",c);this.getView().getModel().setProperty('/data/display_title_text',c.display_title_text);this.getView().getModel().setProperty('/data/display_subtitle_text',c.display_subtitle_text);this.getView().getModel().setProperty('/data/display_info_text',c.display_info_text);this.getView().getModel().refresh();}.bind(this),l);},onSaveConfiguration:function(c){var d=jQuery.Deferred(),m=c.getModel(),t=m.getProperty("/tileModel"),T=c.getViewData().chip,a=sap.ushell.components.tiles.utils.tileActionsRows2TileActionsArray(m.getProperty("/config/tile_actions_rows")),b={display_icon_url:m.getProperty("/config/display_icon_url"),display_number_unit:m.getProperty("/config/display_number_unit"),service_url:m.getProperty("/config/service_url"),service_refresh_interval:m.getProperty("/config/service_refresh_interval"),navigation_use_semantic_object:m.getProperty("/config/navigation_use_semantic_object"),navigation_target_url:m.getProperty("/config/navigation_target_url"),navigation_semantic_object:jQuery.trim(m.getProperty("/config/navigation_semantic_object"))||"",navigation_semantic_action:jQuery.trim(m.getProperty("/config/navigation_semantic_action"))||"",navigation_semantic_parameters:jQuery.trim(m.getProperty("/config/navigation_semantic_parameters")),display_search_keywords:m.getProperty("/config/display_search_keywords")};var r=sap.ushell.components.tiles.utils.checkInputOnSaveConfig(c);if(r){d.reject("mandatory_fields_missing");return d.promise();}if(b.navigation_use_semantic_object){b.navigation_target_url=sap.ushell.components.tiles.utils.getSemanticNavigationUrl(b);m.setProperty("/config/navigation_target_url",b.navigation_target_url);}var e=T.bag.getBag('tileProperties');e.setText('display_title_text',m.getProperty("/config/display_title_text"));e.setText('display_subtitle_text',m.getProperty("/config/display_subtitle_text"));e.setText('display_info_text',m.getProperty("/config/display_info_text"));e.setText('display_search_keywords',b.display_search_keywords);var f=T.bag.getBag('tileNavigationActions');sap.ushell.components.tiles.utils.populateTileNavigationActionsBag(f,a);function l(E,o){jQuery.sap.log.error(E,null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller");d.reject(E,o);}T.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(b)},function(){var C=sap.ushell.components.tiles.utils.getConfiguration(T,false,false),o=sap.ushell.components.tiles.utils.getConfiguration(T,true,false),m=new sap.ui.model.json.JSONModel({config:C,tileModel:t});c.setModel(m);t.setData({data:o,nav:{navigation_target_url:""}},false);if(T.preview){T.preview.setTargetUrl(C.navigation_target_url);T.preview.setPreviewIcon(C.display_icon_url);T.preview.setPreviewTitle(C.display_title_text);}e.save(function(){jQuery.sap.log.debug("property bag 'tileProperties' saved successfully");if(T.title){T.title.setTitle(b.display_title_text,function(){d.resolve();},l);}else{d.resolve();}},l);f.save(function(){jQuery.sap.log.debug("property bag 'navigationProperties' saved successfully");},l);},l);return d.promise();},successHandleFn:function(r){var c=this.getView().getModel().getProperty("/config");this.oDataRequest=undefined;var d=r,D;if(typeof r==="object"){var u=jQuery.sap.getUriParameters(c.service_url).get("$inlinecount");if(u&&u==="allpages"){d={number:r.__count};}else{d=this.extractData(d);}}else if(typeof r==="string"){d={number:r};}D=sap.ushell.components.tiles.utils.getDataToDisplay(c,d);this.getView().getModel().setProperty("/data",D);this.getView().getModel().setProperty("/nav/navigation_target_url",sap.ushell.components.tiles.utils.addParamsToUrl(this.navigationTargetUrl,D));},errorHandlerFn:function(m){var c=this.getView().getModel().getProperty("/config");this.oDataRequest=undefined;var M=m&&m.message?m.message:m,r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();if(m.response){M+=" - "+m.response.statusCode+" "+m.response.statusText;}jQuery.sap.log.error("Failed to update data via service "+c.service_url+": "+M,null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile");this.getView().getModel().setProperty("/data",sap.ushell.components.tiles.utils.getDataToDisplay(c,{number:"???",info:r.getText("dynamic_data.error"),infoState:"Critical"}));},onCancelConfiguration:function(c,s,e){var v=c.getViewData(),m=c.getModel(),t=m.getProperty("/tileModel"),T=v.chip,C=sap.ushell.components.tiles.utils.getConfiguration(T,false,false);c.getModel().setData({config:C,tileModel:t},false);},loadData:function(n){var d=this.getView(),c=d.getModel().getProperty("/config"),u=c.service_url,t=this;var T=this.getView().getViewData().chip;if(!u){return;}if(/;o=([;\/?]|$)/.test(u)){u=T.url.addSystemToServiceUrl(u);}if(n>0){jQuery.sap.log.info("Wait "+n+" seconds before calling "+c.service_url+" again",null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller");this.timer=setTimeout(t.loadData.bind(t,n,false),(n*1000));}if(T.visible.isVisible()&&!t.oDataRequest){t.oDataRequest=OData.read({requestUri:u,headers:{"Cache-Control":"no-cache, no-store, must-revalidate","Pragma":"no-cache","Expires":"0"}},this.successHandleFn.bind(this),this.errorHandlerFn.bind(this));}},refreshHandler:function(d){var t=d.getView().getViewData().chip;if(!t.configurationUi.isEnabled()){d.loadData(0);}else{d.stopRequests();}},visibleHandler:function(i){if(i){this.refreshHandler(this);}}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.generic')){jQuery.sap.declare('sap.ushell.components.tiles.generic');jQuery.sap.require('sap.ui.model.analytics.odata4analytics');jQuery.sap.require('sap.ui.core.mvc.Controller');sap.ui.core.mvc.Controller.extend("sap.ushell.components.tiles.generic",{onAfterRendering:function(){var t=this;this.firstTimeVisible=false;this.oKpiTileView=this.getView();this.oViewData=this.oKpiTileView.getViewData();if(!sap.ushell.components.tiles.utils){jQuery.sap.require("sap.ushell.components.tiles.utils");}this.oResourceBundle=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loading);this.getChipConfiguration(function(){if(t.oTileApi.preview.isEnabled()){t.doDummyProcess();}else{t.oKpiTileView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});t.fetchEvaluation(t.oConfig,function(){t.DEFINITION_DATA=t.oConfig;if(t.KPI_VALUE_REQUIRED){t.fetchKpiValue(function(k,T){this.KPIVALUE=k;t.doProcess(k,T);},t.logError);}else{t.doProcess();}});}});},getChipConfiguration:function(c){var t=this;try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(t.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),function(a){t.oConfig=a;var b=sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig);var s=sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig);if(t.oTileApi.search){t.oTileApi.search.setKeywords([b,s]);}if(t.oTileApi.preview){t.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system));}c.call();});}catch(e){t.logError(e.message);}},fetchEvaluation:function(c,a){var t=this;var p=this.oConfig.TILE_PROPERTIES.sb_metadata||"HANA";if(Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.DEFINITION_DATA=c;t._updateTileModel(this.DEFINITION_DATA);if(t.oTileApi.visible.isVisible()&&!t.firstTimeVisible){t.firstTimeVisible=true;var b=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(t.oConfig.TILE_PROPERTIES.id);if(b){t.oConfig.EVALUATION_FILTERS=b.EVALUATION_FILTERS;a.call(b);}else{try{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(t.oConfig,t.oTileApi,function(f){t.oConfig.EVALUATION_FILTERS=f;if(p.toUpperCase()==="HANA"){t.parse_sapclient();}sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);a.call(f);});}catch(e){t.logError("no evaluation data");}}}else{try{var b=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(t.oConfig.TILE_PROPERTIES.id);if(b){t.oConfig.EVALUATION_FILTERS=b.EVALUATION_FILTERS;a.call(b);}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(t.oConfig,t.oTileApi,function(f){t.oConfig.EVALUATION_FILTERS=f;if(p.toUpperCase()==="HANA"){t.parse_sapclient();}sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);a.call(f);});}}catch(e){t.logError("no evaluation data");}}}else{try{var b=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(t.oConfig.TILE_PROPERTIES.id);if(b){t.oConfig.EVALUATION_FILTERS=b.EVALUATION_FILTERS;a.call(b);}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(t.oConfig,t.oTileApi,function(f){t.oConfig.EVALUATION_FILTERS=f;if(p.toUpperCase()==="HANA"){t.parse_sapclient();}sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);a.call(f);});}}catch(e){t.logError("no evaluation data");}}},fetchKpiValue:function(c,E){var t=this;var k=0;try{var u=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var s=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var T=this.setThresholdValues();var m=T.fullyFormedMeasure;var a=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!a){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),s,m,null,v);if(q){this.QUERY_SERVICE_MODEL=q.model;this.queryUriForKpiValue=q.uri;this.queryServiceUriODataReadRef=this.QUERY_SERVICE_MODEL.read(q.uri,null,null,true,function(d){if(d&&d.results&&d.results.length&&d.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME]!=null){k=d.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var w={};if(q.unit[0]){t._updateTileModel({unit:d.results[0][q.unit[0].name]});w.unit=q.unit[0];w.unit.name=q.unit[0].name;}if(t.oConfig.TILE_PROPERTIES.frameType=="TwoByOne"){if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id)){w=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);}w.numericData=d;}else{w.data=d;}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,w);if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=d.results[0][T.sCriticalHigh];T.criticalLowValue=d.results[0][T.sCriticalLow];T.warningHighValue=d.results[0][T.sWarningHigh];T.warningLowValue=d.results[0][T.sWarningLow];T.targetValue=d.results[0][T.sTarget];T.trendValue=d.results[0][T.sTrend];}else if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){T.targetValue=Number(d.results[0][T.sTarget]);T.criticalHighValue=T.targetValue*T.criticalHighValue/100;T.criticalLowValue=T.targetValue*T.criticalLowValue/100;T.warningHighValue=T.targetValue*T.warningHighValue/100;T.warningLowValue=T.targetValue*T.warningLowValue/100;T.trendValue=Number(d.results[0][T.sTrend]);}c.call(t,k,T);}else{t.setNoData();}},function(b){if(b&&b.response){jQuery.sap.log.error(b.message+" : "+b.request.requestUri);E.call(t,b);}});}else{t.logError("Error Preparing Query Service URI");}}else{if(t.DEFINITION_DATA.TILE_PROPERTIES.frameType==sap.suite.ui.commons.FrameType.OneByOne){if(a.data.results&&a.data.results.length&&a.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME]!=null){k=a.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(a.unit){t._updateTileModel({unit:a.data.results[0][a.unit.name]});}if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=a.data.results[0][T.sCriticalHigh];T.criticalLowValue=a.data.results[0][T.sCriticalLow];T.warningHighValue=a.data.results[0][T.sWarningHigh];T.warningLowValue=a.data.results[0][T.sWarningLow];T.targetValue=a.data.results[0][T.sTarget];T.trendValue=a.data.results[0][T.sTrend];}else if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){T.targetValue=Number(a.data.results[0][T.sTarget]);T.criticalHighValue=T.targetValue*T.criticalHighValue/100;T.criticalLowValue=T.targetValue*T.criticalLowValue/100;T.warningHighValue=T.targetValue*T.warningHighValue/100;T.warningLowValue=T.targetValue*T.warningLowValue/100;T.trendValue=Number(a.data.results[0][T.sTrend]);}c.call(t,k,T);}else{t.setNoData();}}else{if(a.numericData&&a.numericData.results&&a.numericData.results.length&&a.numericData.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME]!=null){k=a.numericData.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(a.unit){t._updateTileModel({unit:a.numericData.results[0][a.unit.name]});}if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=a.numericData.results[0][T.sCriticalHigh];T.criticalLowValue=a.numericData.results[0][T.sCriticalLow];T.warningHighValue=a.numericData.results[0][T.sWarningHigh];T.warningLowValue=a.numericData.results[0][T.sWarningLow];T.targetValue=a.numericData.results[0][T.sTarget];T.trendValue=a.numericData.results[0][T.sTrend];}else if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){T.targetValue=Number(a.numericData.results[0][T.sTarget]);T.criticalHighValue=T.targetValue*T.criticalHighValue/100;T.criticalLowValue=T.targetValue*T.criticalLowValue/100;T.warningHighValue=T.targetValue*T.warningHighValue/100;T.warningLowValue=T.targetValue*T.warningLowValue/100;T.trendValue=Number(a.numericData.results[0][T.sTrend]);}c.call(t,k,T);}else{t.setNoData();}}}}catch(e){t.logError(e);}},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new sap.ui.model.json.JSONModel({}));}},getTile:function(){return this.oKpiTileView.oGenericTile;},_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m);},isACurrencyMeasure:function(m){var u=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var e=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;return sap.ushell.components.tiles.indicatorTileUtils.util.getFormattingMetadata(this.oTileApi.url.addSystemToServiceUrl(u),e,m)._hasCurrency;},autoFormatter:function(n,i){i=i||false;if(!n){return"";}return sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(n),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,i);},setToolTip:function(a,c,t){var b=this;var C;var T=this.setThresholdValues();var m=this.oConfig.EVALUATION.COLUMN_NAME;var i=this.isACurrencyMeasure(m);if(t=="CONT"||t=="COMP"){if(this.oKpiTileView.getContent()[0].getTileContent().length){C=b.oKpiTileView.getContent()[0].getTileContent()[0].getContent();var d,e,f,v,g,h,j,k,l;if(c&&c[0]){d=c[0].title;v=this.autoFormatter(c[0].value,i);j=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(c[0].color);}if(c&&c[1]){e=c[1].title;g=this.autoFormatter(c[1].value,i);k=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(c[1].color);}if(c&&c[2]){f=c[2].title;h=this.autoFormatter(c[2].value,i);l=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(c[2].color);}var n={measure:this.oConfig.EVALUATION.COLUMN_NAME,m1:d,v1:v,c1:j,m2:e,v2:g,c2:k,m3:f,v3:h,c3:l};sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,t,n);}}else{var s="";if(a=="Error"){s="sb.error";}if(a=="Neutral"){s="sb.neutral";}if(a=="Critical"){s="sb.critical";}if(a=="Good"){s="sb.good";}var n={status:s,actual:this.autoFormatter(c,i),target:this.autoFormatter(T.targetValue,i),cH:this.autoFormatter(T.criticalHighValue,i),wH:this.autoFormatter(T.warningHighValue,i),wL:this.autoFormatter(T.warningLowValue,i),cL:this.autoFormatter(T.criticalLowValue,i)};var C=b.oKpiTileView.getContent()[0].getTileContent()[0].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,t,n);}},getTrendColor:function(t){var a=this,w,c,b,d;try{var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;this.DEFINITION_DATA.EVALUATION_VALUES;var r=sap.suite.ui.commons.InfoTileValueColor.Neutral;if(i==="MI"){if(t.criticalHighValue&&t.warningHighValue){d=Number(t.criticalHighValue);b=Number(t.warningHighValue);if(this.CALCULATED_KPI_VALUE<b){r=sap.suite.ui.commons.InfoTileValueColor.Good;}else if(this.CALCULATED_KPI_VALUE<=d){r=sap.suite.ui.commons.InfoTileValueColor.Critical;}else{r=sap.suite.ui.commons.InfoTileValueColor.Error;}}}else if(i==="MA"){if(t.criticalLowValue&&t.warningLowValue){c=Number(t.criticalLowValue);w=Number(t.warningLowValue);if(this.CALCULATED_KPI_VALUE<c){r=sap.suite.ui.commons.InfoTileValueColor.Error;}else if(this.CALCULATED_KPI_VALUE<=w){r=sap.suite.ui.commons.InfoTileValueColor.Critical;}else{r=sap.suite.ui.commons.InfoTileValueColor.Good;}}}else{if(t.warningLowValue&&t.warningHighValue&&t.criticalLowValue&&t.criticalHighValue){d=Number(t.criticalHighValue);b=Number(t.warningHighValue);w=Number(t.warningLowValue);c=Number(t.criticalLowValue);if(this.CALCULATED_KPI_VALUE<c||this.CALCULATED_KPI_VALUE>d){r=sap.suite.ui.commons.InfoTileValueColor.Error;}else if((this.CALCULATED_KPI_VALUE>=c&&this.CALCULATED_KPI_VALUE<=w)||(this.CALCULATED_KPI_VALUE>=b&&this.CALCULATED_KPI_VALUE<=d)){r=sap.suite.ui.commons.InfoTileValueColor.Critical;}else{r=sap.suite.ui.commons.InfoTileValueColor.Good;}}}return r;}catch(e){a.logError(e);}},getTrendIndicator:function(t){var a=this;t=Number(t);try{var b=sap.suite.ui.commons.DeviationIndicator.None;if(t>this.CALCULATED_KPI_VALUE){b=sap.suite.ui.commons.DeviationIndicator.Down;}else if(t<this.CALCULATED_KPI_VALUE){b=sap.suite.ui.commons.DeviationIndicator.Up;}return b;}catch(e){a.logError(e);}},setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);if(c&&c.data&&c.data.results&&c.data.results.length){T.trendValue=Number(c.data.results[0][T.sTrend]);T.targetValue=Number(c.data.results[0][T.sTarget]);T.criticalHighValue=Number(c.data.results[0][T.sCriticalHigh]);T.warningHighValue=Number(c.data.results[0][T.sWarningHigh]);}break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);if(c&&c.data&&c.data.results&&c.data.results.length){T.criticalLowValue=Number(c.data.results[0][T.sCriticalLow]);T.warningLowValue=Number(c.data.results[0][T.sWarningLow]);T.trendValue=Number(c.data.results[0][T.sTrend]);T.targetValue=Number(c.data.results[0][T.sTarget]);}break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);if(c&&c.data&&c.data.results&&c.data.results.length){T.criticalLowValue=Number(c.data.results[0][T.sCriticalLow]);T.warningLowValue=Number(c.data.results[0][T.sWarningLow]);T.trendValue=Number(c.data.results[0][T.sTrend]);T.targetValue=Number(c.data.results[0][T.sTarget]);T.criticalHighValue=Number(c.data.results[0][T.sCriticalHigh]);T.warningHighValue=Number(c.data.results[0][T.sWarningHigh]);}break;}}else if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;}catch(e){t.logError(e);}},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f=f+","+o[t[i]];}}return f;},parse_sapclient:function(){var i,S,r,f,a;S="P_SAPClient";r="$$$";f=this.oConfig.EVALUATION_FILTERS;if(f.constructor!==Array){return;}if(f.length<1){return;}for(i in f){a=f[i];if(a["NAME"]===S&&a["VALUE_1"]===r){break;}a=null;}if(a){jQuery.when(sap.ushell.components.tiles.indicatorTileUtils.util.getHanaClient()).done(function(c){a["VALUE_1"]=c;});}},setTextInTile:function(){var t=this;var a=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:a.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:a.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},logError:function(e){this._updateTileModel({value:"",scale:"",unit:""});if(this.getView().getViewData().deferredObj){this.getView().getViewData().deferredObj.reject();}else{this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);}},setNoData:function(){var v=this.getView().getViewData();if(v.parentController){v.parentController.setNoData();if(v.deferredObj){v.deferredObj.resolve();}}else{try{this._updateTileModel({value:"",scale:"",unit:"",footerNum:this.oResourceBundle.getText("sb.noDataAvailable"),footerComp:this.oResourceBundle.getText("sb.noDataAvailable")});this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);}catch(e){}}},refreshHandler:function(){var t=this;var c={};if(this.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient"))){if(this.KPI_VALUE_REQUIRED){var T=this.setThresholdValues();c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=c.data.results[0][T.sCriticalHigh];T.criticalLowValue=c.data.results[0][T.sCriticalLow];T.warningHighValue=c.data.results[0][T.sWarningHigh];T.warningLowValue=c.data.results[0][T.sWarningLow];T.targetValue=c.data.results[0][T.sTarget];T.trendValue=c.data.results[0][T.sTrend];}else if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){T.targetValue=Number(c.data.results[0][T.sTarget]);T.criticalHighValue=T.targetValue*T.criticalHighValue/100;T.criticalLowValue=T.targetValue*T.criticalLowValue/100;T.warningHighValue=T.targetValue*T.warningHighValue/100;T.warningLowValue=T.targetValue*T.warningLowValue/100;T.trendValue=Number(c.data.results[0][T.sTrend]);}this.doProcess(this.KPIVALUE,T);}else{this.doProcess();}}else{this.fetchEvaluation(this.oConfig,function(){if(this.KPI_VALUE_REQUIRED){var T=this.setThresholdValues();c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=c.data.results[0][T.sCriticalHigh];T.criticalLowValue=c.data.results[0][T.sCriticalLow];T.warningHighValue=c.data.results[0][T.sWarningHigh];T.warningLowValue=c.data.results[0][T.sWarningLow];T.targetValue=c.data.results[0][T.sTarget];T.trendValue=c.data.results[0][T.sTrend];}else if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){T.targetValue=Number(c.data.results[0][T.sTarget]);T.criticalHighValue=T.targetValue*T.criticalHighValue/100;T.criticalLowValue=T.targetValue*T.criticalLowValue/100;T.warningHighValue=T.targetValue*T.warningHighValue/100;T.warningLowValue=T.targetValue*T.warningLowValue/100;T.trendValue=Number(c.data.results[0][T.sTrend]);}this.doProcess(this.KPIVALUE,T);}else{this.doProcess();}});}}},visibleHandler:function(i){if(!i){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}if(i){this.refreshHandler(this);}},_getEvaluationThresholdMeasures:function(){var t=[];t.push(this.oConfig.EVALUATION.COLUMN_NAME);if(this.oConfig.EVALUATION.VALUES_SOURCE==="MEASURE"){var a=this.oConfig.EVALUATION_VALUES;if(a&&a.length){for(var i=0;i<a.length;i++){if((a[i]).COLUMN_NAME&&!((a[i]).FIXED)){t.push((a[i]).COLUMN_NAME);}}}}return t;},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}});};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorArea.AreaChartTile.controller')){jQuery.sap.declare('sap.ushell.components.tiles.indicatorArea.AreaChartTile.controller');(function(){"use strict";sap.ushell.components.tiles.generic.extend("tiles.indicatorArea.AreaChartTile",{onInit:function(){this.KPI_VALUE_REQUIRED=false;},doProcess:function(){this.onAfterFinalEvaluation();},onAfterFinalEvaluation:function(){var t=this;var u=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var E=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var m=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var d=this.DEFINITION_DATA.TILE_PROPERTIES.dimension;if(d==undefined){this.logError();return;}var g=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var f=this.DEFINITION_DATA.EVALUATION_VALUES;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var h=m;switch(g){case"MI":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningHigh&&t.sCriticalHigh&&t.sTarget){h+=","+t.sWarningHigh+","+t.sCriticalHigh+","+t.sTarget;}break;case"MA":t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget){h+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget;}break;case"RA":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget&&t.sWarningHigh&&t.sCriticalHigh){h+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget+","+t.sWarningHigh+","+t.sCriticalHigh;}break;}var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),E,h,d,v);}else{var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),E,m,d,v);}var j=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!j){if(q){this.queryUriForTrendChart=q.uri;var w={};try{this.trendChartODataReadRef=q.model.read(q.uri,null,null,true,function(a){if(a&&a.results&&a.results.length){if(q.unit[0]){t.unit=a.results[0][q.unit[0].name];t.CURRENCY_CODE=t.unit;w.unit=q.unit[0];w.unit.name=q.unit[0].name;}t.queryUriResponseForTrendChart=a;d=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oTileApi.url.addSystemToServiceUrl(u),E,d);a.firstXlabel=a.results[0][d];a.lastXlabel=a.results[a.results.length-1][d];if(t.oConfig.TILE_PROPERTIES.frameType==sap.suite.ui.commons.FrameType.TwoByOne){if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id)){w=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);}w.data=a;}else{w.data=a;}w.dimensionName=d;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,w);_(a,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);if(t.DEFINITION_DATA.TILE_PROPERTIES.frameType==sap.suite.ui.commons.FrameType.TwoByOne){t.getView().getViewData().deferredObj.resolve();}else{var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"'/>");t.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);}}else{t.setNoData();}},function(a){if(a&&a.response){t.logError("Data call failed");}});}catch(e){t.logError(e);}}else{t.logError();}}else{try{if(j.unit){t.unit=j.data.results[0][j.unit.name];t.CURRENCY_CODE=t.unit;}t.queryUriResponseForTrendChart=j.data;d=j.dimensionName;_(j.data,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);if(t.oConfig.TILE_PROPERTIES.frameType==sap.suite.ui.commons.FrameType.OneByOne){t.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);}else{t.getView().getViewData().deferredObj.resolve();}}catch(e){t.logError(e);}}function _(k,l){var n=[];var o=[];var p=[];var r=[];var s=[];var x=[];var y=k.firstXlabel;var z,A,B,C,D;var F=k.lastXlabel;var G=Number(k.results[0][m]);var H=Number(k.results[k.results.length-1][m]);var i;for(i in k.results){k.results[i][d]=Number(i);k.results[i][m]=Number(k.results[i][m]);t.sWarningHigh?k.results[i][t.sWarningHigh]=Number(k.results[i][t.sWarningHigh]):"";t.sCriticalHigh?k.results[i][t.sCriticalHigh]=Number(k.results[i][t.sCriticalHigh]):"";t.sCriticalLow?k.results[i][t.sCriticalLow]=Number(k.results[i][t.sCriticalLow]):"";t.sWarningLow?k.results[i][t.sWarningLow]=Number(k.results[i][t.sWarningLow]):"";t.sTarget?k.results[i][t.sTarget]=Number(k.results[i][t.sTarget]):"";t.sWarningHigh?p.push(k.results[i][t.sWarningHigh]):"";t.sCriticalHigh?r.push(k.results[i][t.sCriticalHigh]):"";t.sCriticalLow?s.push(k.results[i][t.sCriticalLow]):"";t.sWarningLow?x.push(k.results[i][t.sWarningLow]):"";n.push(k.results[i][d]);o.push(k.results[i][m]);}try{y=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(y);F=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(F);}catch(e){t.logError(e);}var I=Number(G);if(t.oConfig.EVALUATION.SCALING==-2){I*=100;}var J=Math.min.apply(Math,o);var c=t.isACurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);var K=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(I,t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION,c,t.CURRENCY_CODE);if(t.oConfig.EVALUATION.SCALING==-2){K+=" %";}var L=K.toString();var M=Number(H);if(t.oConfig.EVALUATION.SCALING==-2){M*=100;}var N=Math.max.apply(Math,o);c=t.isACurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);var O=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(M,t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION,c,t.CURRENCY_CODE);if(t.oConfig.EVALUATION.SCALING==-2){O+=" %";}var P=O.toString();try{var Q=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.min.apply(Math,n));var R=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.max.apply(Math,n));}catch(e){t.logError(e);}if(l=="MEASURE"){(p.length!=0)?(t.firstwH=p[Q])&&(t.lastwH=p[R]):"";(r.length!=0)?(t.firstcH=r[Q])&&(t.lastcH=r[R]):"";(s.length!=0)?(t.firstcL=s[Q])&&(t.lastcL=s[R]):"";(x.length!=0)?(t.firstwL=x[Q])&&(t.lastwL=x[R]):"";}var S={width:"100%",height:"100%",unit:t.unit||"",chart:{color:"Neutral",data:k.results},size:"Auto",minXValue:Q,maxXValue:R,minYValue:J,maxYValue:N,firstXLabel:{label:y+"",color:"Neutral"},lastXLabel:{label:F+"",color:"Neutral"},firstYLabel:{label:L+"",color:"Neutral"},lastYLabel:{label:P+"",color:"Neutral"},minLabel:{},maxLabel:{}};switch(g){case"MA":for(i in f){if(f[i].TYPE=="CL"){S.minThreshold={color:"Error"};var T={};T[d]="";T[m]=Number(f[i].FIXED);t.cl=Number(f[i].FIXED);S.minThreshold.data=(l=="MEASURE")?k.results:[T];z=(l=="MEASURE")?t.sCriticalLow:m;}else if(f[i].TYPE=="WL"){S.maxThreshold={color:"Good"};var T={};T[d]="";T[m]=Number(f[i].FIXED);S.maxThreshold.data=(l=="MEASURE")?k.results:[T];A=(l=="MEASURE")?t.sWarningLow:m;t.wl=Number(f[i].FIXED);}else if(f[i].TYPE=="TA"){var T={};T[d]="";T[m]=Number(f[i].FIXED);S.target={color:"Neutral"};S.target.data=(l=="MEASURE")?k.results:[T];D=(l=="MEASURE")?t.sTarget:m;}}S.innerMinThreshold={data:[]};S.innerMaxThreshold={data:[]};if(l=="FIXED"){S.firstYLabel.color=G<t.cl?"Error":((t.cl<=G)&&(G<=t.wl))?"Critical":(G>t.wl)?"Good":"Neutral";S.lastYLabel.color=H<t.cl?"Error":((t.cl<=H)&&(H<=t.wl))?"Critical":(H>t.wl)?"Good":"Neutral";}else if(l=="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL){S.firstYLabel.color=G<t.firstcL?"Error":((t.firstcL<=G)&&(G<=t.firstwL))?"Critical":(G>t.firstwL)?"Good":"Neutral";S.lastYLabel.color=H<t.lastcL?"Error":((t.lastcL<=H)&&(H<=t.lastwL))?"Critical":(H>t.lastwL)?"Good":"Neutral";}break;case"MI":for(i in f){if(f[i].TYPE=="CH"){var T={};T[d]="";T[m]=Number(f[i].FIXED);t.ch=Number(f[i].FIXED);S.maxThreshold={color:"Error"};S.maxThreshold.data=(l=="MEASURE")?k.results:[T];A=(l=="MEASURE")?t.sCriticalHigh:m;}else if(f[i].TYPE=="WH"){var T={};T[d]="";T[m]=Number(f[i].FIXED);t.wh=Number(f[i].FIXED);S.minThreshold={color:"Good"};S.minThreshold.data=(l=="MEASURE")?k.results:[T];z=(l=="MEASURE")?t.sWarningHigh:m;}else if(f[i].TYPE=="TA"){var T={};T[d]="";T[m]=Number(f[i].FIXED);S.target={color:"Neutral"};S.target.data=(l=="MEASURE")?k.results:[T];D=(l=="MEASURE")?t.sTarget:m;}}if(l=="FIXED"){S.firstYLabel.color=G>t.ch?"Error":((t.wh<=G)&&(G<=t.ch))?"Critical":(G<t.wh)?"Good":"Neutral";S.lastYLabel.color=H>t.ch?"Error":((t.wh<=H)&&(H<=t.ch))?"Critical":(H<t.wh)?"Good":"Neutral";}else if(l=="MEASURE"&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){S.firstYLabel.color=G>t.firstcH?"Error":((t.firstwH<=G)&&(G<=t.firstcH))?"Critical":(G<t.firstwH)?"Good":"Neutral";S.lastYLabel.color=H>t.lastcH?"Error":((t.lastwH<=H)&&(H<=t.lastcH))?"Critical":(H<t.lastwH)?"Good":"Neutral";}S.innerMaxThreshold={data:[]};S.innerMinThreshold={data:[]};break;case"RA":for(i in f){if(f[i].TYPE=="CH"){var T={};T[d]="";T[m]=Number(f[i].FIXED);t.ch=Number(f[i].FIXED);S.maxThreshold={color:"Error"};S.maxThreshold.data=(l=="MEASURE")?k.results:[T];A=(l=="MEASURE")?t.sCriticalHigh:m;}else if(f[i].TYPE=="WH"){var T={};T[d]="";T[m]=Number(f[i].FIXED);t.wh=Number(f[i].FIXED);S.innerMaxThreshold={color:"Good"};S.innerMaxThreshold.data=(l=="MEASURE")?k.results:[T];C=(l=="MEASURE")?t.sWarningHigh:m;}else if(f[i].TYPE=="WL"){var T={};T[d]="";T[m]=Number(f[i].FIXED);t.wl=Number(f[i].FIXED);S.innerMinThreshold={color:"Good"};S.innerMinThreshold.data=(l=="MEASURE")?k.results:[T];B=(l=="MEASURE")?t.sWarningLow:m;}else if(f[i].TYPE=="CL"){var T={};T[d]="";T[m]=Number(f[i].FIXED);t.cl=Number(f[i].FIXED);S.minThreshold={color:"Error"};S.minThreshold.data=(l=="MEASURE")?k.results:[T];z=(l=="MEASURE")?t.sCriticalLow:m;}else if(f[i].TYPE=="TA"){var T={};T[d]="";T[m]=Number(f[i].FIXED);S.target={color:"Neutral"};S.target.data=(l=="MEASURE")?k.results:[T];D=(l=="MEASURE")?t.sTarget:m;}}if(l=="FIXED"){S.firstYLabel.color=(G>t.ch||G<t.cl)?"Error":((t.wh<=G)&&(G<=t.ch))||((t.cl<=G)&&(G<=t.wl))?"Critical":((G>=t.wl)&&(G<=t.wh))?"Good":"Neutral";S.lastYLabel.color=(H>t.ch||H<t.cl)?"Error":((t.wh<=H)&&(H<=t.ch))||((t.cl<=H)&&(H<=t.wl))?"Critical":((H>=t.wl)&&(H<=t.wh))?"Good":"Neutral";}else if(l=="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){S.firstYLabel.color=(G>t.firstcH||G<t.firstcL)?"Error":((t.firstwH<=G)&&(G<=t.firstcH))||((t.firstcL<=G)&&(G<=t.firstwL))?"Critical":((G>=t.firstwL)&&(G<=t.firstwH))?"Good":"Neutral";S.lastYLabel.color=(H>t.lastcH||H<t.lastcL)?"Error":((t.lastwH<=H)&&(H<=t.lastcH))||((t.lastcL<=H)&&(H<=t.lastwL))?"Critical":((H>=t.lastwL)&&(H<=t.lastwH))?"Good":"Neutral";}break;}var U=function(W,a,b,l){return new sap.suite.ui.commons.MicroAreaChartItem({color:"{/"+W+"/color}",points:{path:"/"+W+"/data",template:new sap.suite.ui.commons.MicroAreaChartPoint({x:"{"+a+"}",y:"{"+b+"}"})}});};var V=t.getTile().getTileContent()[0].getContent();V.setTarget(U("target",d,D));V.setInnerMinThreshold(U("innerMinThreshold",d,B));V.setInnerMaxThreshold(U("innerMaxThreshold",d,C));V.setMinThreshold(U("minThreshold",d,z));V.setMaxThreshold(U("maxThreshold",d,A));V.setChart(U("chart",d,m));t.setTextInTile();if(t.getView().getViewData().parentController){t.getView().getViewData().parentController._updateTileModel(S);}else{t._updateTileModel(S);}}},doDummyProcess:function(){var t=this;this.setTextInTile();t._updateTileModel({footer:"",description:"",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorArea.AreaChartTile.view')){jQuery.sap.declare('sap.ushell.components.tiles.indicatorArea.AreaChartTile.view');(function(){"use strict";jQuery.sap.require('sap.ui.model.analytics.odata4analytics');sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorArea.AreaChartTile",{getControllerName:function(){return"tiles.indicatorArea.AreaChartTile";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var h="Lorem ipsum";var s="Lorem ipsum";var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(t.title&&t.subTitle){h=t.title;s=t.subTitle;}var b=function(d){return new sap.suite.ui.commons.MicroAreaChartItem({color:"Good",points:{path:"/"+d+"/data",template:new sap.suite.ui.commons.MicroAreaChartPoint({x:"{day}",y:"{balance}"})}});};var a=function(d){return new sap.suite.ui.commons.MicroAreaChartLabel({label:"{/"+d+"/label}",color:"{/"+d+"/color}"});};var g={subheader:s,header:h,footerNum:"",footerComp:"",scale:"",unit:"",value:8888,size:"Auto",frameType:"OneByOne",state:sap.suite.ui.commons.LoadState.Loading};var n=new sap.suite.ui.commons.MicroAreaChart({width:"{/width}",height:"{/height}",size:"{/size}",target:b("target"),innerMinThreshold:b("innerMinThreshold"),innerMaxThreshold:b("innerMaxThreshold"),minThreshold:b("minThreshold"),maxThreshold:b("maxThreshold"),chart:b("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:a("firstXLabel"),lastXLabel:a("lastXLabel"),firstYLabel:a("firstYLabel"),lastYLabel:a("lastYLabel"),minLabel:a("minLabel"),maxLabel:a("maxLabel")});var N=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:n});this.oGenericTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[N]});var G=new sap.ui.model.json.JSONModel();G.setData(g);this.oGenericTile.setModel(G);return this.oGenericTile;}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorDual.DualTile.view')){jQuery.sap.declare('sap.ushell.components.tiles.indicatorDual.DualTile.view');
//Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.require('sap.ca.ui.model.format.NumberFormat');sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorDual.DualTile",{getControllerName:function(){return"tiles.indicatorDual.DualTile";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var t=this;t.tileData;t.oGenericTileData={};sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(t.getViewData().chip.configuration.getParameterValueAsString("tileConfiguration"),function(e){t.oConfig=e;});t.tileType=t.oConfig.TILE_PROPERTIES.tileType;t.oNumericContent=new sap.suite.ui.commons.NumericContent({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:"{/isFormatterValue}",truncateValueTo:5,valueColor:"{/valueColor}",nullifyValue:false});t.oLeftTileContent=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oNumericContent});switch(t.tileType){case"DT-CM":var C=new sap.suite.ui.commons.ComparisonData({value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oComparisionContent=new sap.suite.ui.commons.ComparisonChart({size:"{/size}",scale:"{/scale}",data:{template:C,path:"/data"}});t.oRightContent=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oComparisionContent});break;case"DT-CT":var C=new sap.suite.ui.commons.ComparisonData({value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oContributionContent=new sap.suite.ui.commons.ComparisonChart({size:"{/size}",scale:"{/scale}",data:{template:C,path:"/data"}});t.oRightContent=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oContributionContent});break;case"DT-TT":var b=function(n){return new sap.suite.ui.commons.MicroAreaChartItem({color:"Good",points:{path:"/"+n+"/data",template:new sap.suite.ui.commons.MicroAreaChartPoint({x:"{day}",y:"{balance}"})}});};var a=function(n){return new sap.suite.ui.commons.MicroAreaChartLabel({label:"{/"+n+"/label}",color:"{/"+n+"/color}"});};var d=new sap.suite.ui.commons.MicroAreaChart({width:"{/width}",height:"{/height}",size:"{/size}",target:b("target"),innerMinThreshold:b("innerMinThreshold"),innerMaxThreshold:b("innerMaxThreshold"),minThreshold:b("minThreshold"),maxThreshold:b("maxThreshold"),chart:b("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:a("firstXLabel"),lastXLabel:a("lastXLabel"),firstYLabel:a("firstYLabel"),lastYLabel:a("lastYLabel"),minLabel:a("minLabel"),maxLabel:a("maxLabel")});t.oRightContent=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",content:d});break;case"DT-AT":var B=new sap.suite.ui.commons.BulletChartData({value:"{value}",color:"{color}"});var o=new sap.suite.ui.commons.BulletChart({size:sap.suite.ui.commons.InfoTileSize.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:B,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});t.oRightContent=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:o});break;}t.oGenericTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"TwoByOne",size:"{/size}",header:"{/header}",tileContent:[t.oLeftTileContent,t.oRightContent]});t.oGenericTileModel=new sap.ui.model.json.JSONModel();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorDualComparison.DualComparison.view')){jQuery.sap.declare('sap.ushell.components.tiles.indicatorDualComparison.DualComparison.view');
// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.require('sap.ui.model.analytics.odata4analytics');jQuery.sap.require('sap.ca.ui.model.format.NumberFormat');sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorDualComparison.DualComparison",{getControllerName:function(){return"tiles.indicatorDualComparison.DualComparison";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var t=this;t.tileData;t.oGenericTileData={};t.oNumericContent=new sap.suite.ui.commons.NumericContent({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});t.oNumericTile=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oNumericContent});t.oCmprsDataTmpl=new sap.suite.ui.commons.ComparisonData({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oCmprsChrtTmpl=new sap.suite.ui.commons.ComparisonChart({size:"{/size}",scale:"{/scale}",data:{template:t.oCmprsDataTmpl,path:"/data"}});t.oComparisonTile=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:t.oCmprsChrtTmpl});t.oGenericTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNumericTile,t.oComparisonTile]});t.oGenericTileModel=new sap.ui.model.json.JSONModel();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorDualContribution.DualContribution.view')){jQuery.sap.declare('sap.ushell.components.tiles.indicatorDualContribution.DualContribution.view');(function(){"use strict";jQuery.sap.require('sap.ui.model.analytics.odata4analytics');jQuery.sap.require('sap.ca.ui.model.format.NumberFormat');sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorDualContribution.DualContribution",{getControllerName:function(){return"tiles.indicatorDualContribution.DualContribution";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var t=this;t.tileData;t.oGenericTileData={};t.oNumericContent=new sap.suite.ui.commons.NumericContent({value:"{/value}",scale:"{/scale}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});t.oNumericTile=new sap.suite.ui.commons.TileContent({unit:"{/unitNumeric}",size:"{/size}",footer:"{/footerNum}",content:t.oNumericContent});t.oCmprsDataTmpl=new sap.suite.ui.commons.ComparisonData({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oCmprsChrtTmpl=new sap.suite.ui.commons.ComparisonChart({size:"{/size}",scale:"{/scale}",data:{template:t.oCmprsDataTmpl,path:"/data"}});t.oComparisonTile=new sap.suite.ui.commons.TileContent({unit:"{/unitContribution}",size:"{/size}",footer:"{/footerComp}",content:t.oCmprsChrtTmpl});t.oGenericTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNumericTile,t.oComparisonTile]});t.oGenericTileModel=new sap.ui.model.json.JSONModel();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorDualDeviation.DualDeviation.view')){jQuery.sap.declare('sap.ushell.components.tiles.indicatorDualDeviation.DualDeviation.view');(function(){"use strict";jQuery.sap.require('sap.ui.model.analytics.odata4analytics');jQuery.sap.require('sap.ca.ui.model.format.NumberFormat');sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorDualDeviation.DualDeviation",{getControllerName:function(){return"tiles.indicatorDualDeviation.DualDeviation";},createContent:function(c){var t=this;this.setHeight('100%');this.setWidth('100%');this.getViewData().chip.preview;var h="Lorem ipsum";var s="Lorem ipsum";var a=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(a.title&&a.subTitle){h=a.title;s=a.subTitle;}var d={subheader:s,header:h,footerNum:"",footerComp:"",frameType:"TwoByOne",state:sap.suite.ui.commons.LoadState.Loading,scale:""};t.oNumericContent=new sap.suite.ui.commons.NumericContent({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});t.oNumericTile=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oNumericContent});var b=new sap.suite.ui.commons.BulletChartData({value:"{value}",color:"{color}"});t.oBCTmpl=new sap.suite.ui.commons.BulletChart({size:sap.suite.ui.commons.InfoTileSize.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:b,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});var n=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oBCTmpl});t.oGenericTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNumericTile,n]});var g=new sap.ui.model.json.JSONModel();g.setData(d);t.oGenericTile.setModel(g);return t.oGenericTile;}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorDualTrend.DualTrend.view')){jQuery.sap.declare('sap.ushell.components.tiles.indicatorDualTrend.DualTrend.view');(function(){"use strict";jQuery.sap.require('sap.ui.model.analytics.odata4analytics');jQuery.sap.require('sap.ca.ui.model.format.NumberFormat');sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorDualTrend.DualTrend",{getControllerName:function(){return"tiles.indicatorDualTrend.DualTrend";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var b=function(s){return new sap.suite.ui.commons.MicroAreaChartItem({color:"Good",points:{path:"/"+s+"/data",template:new sap.suite.ui.commons.MicroAreaChartPoint({x:"{day}",y:"{balance}"})}});};var a=function(s){return new sap.suite.ui.commons.MicroAreaChartLabel({label:"{/"+s+"/label}",color:"{/"+s+"/color}"});};var g={footer:"",header:"",subheader:""};var n=new sap.suite.ui.commons.MicroAreaChart({width:"{/width}",height:"{/height}",size:"{/size}",target:b("target"),innerMinThreshold:b("innerMinThreshold"),innerMaxThreshold:b("innerMaxThreshold"),minThreshold:b("minThreshold"),maxThreshold:b("maxThreshold"),chart:b("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:a("firstXLabel"),lastXLabel:a("lastXLabel"),firstYLabel:a("firstYLabel"),lastYLabel:a("lastYLabel"),minLabel:a("minLabel"),maxLabel:a("maxLabel")});var N=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",content:n});var o=new sap.suite.ui.commons.NumericContent({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});var d=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",content:o});this.oGenericTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"TwoByOne",size:"{/size}",header:"{/header}",tileContent:[d,N]});var G=new sap.ui.model.json.JSONModel();G.setData(g);this.oGenericTile.setModel(G);return this.oGenericTile;}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorHarveyBall.HarveyBallTile.view')){jQuery.sap.declare('sap.ushell.components.tiles.indicatorHarveyBall.HarveyBallTile.view');(function(){"use strict";jQuery.sap.require('sap.ui.model.analytics.odata4analytics');jQuery.sap.require('sap.ca.ui.model.format.NumberFormat');sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorHarveyBall.HarveyBallTile",{getControllerName:function(){},createContent:function(c){var m=new sap.suite.ui.commons.HarveyBallMicroChart({total:"{/value}",size:"{/size}",totalLabel:"{/totalLabel}",items:[new sap.suite.ui.commons.HarveyBallMicroChartItem({fraction:"{/fractionValue}",fractionLabel:"{/fractionLabel}",color:"{/color}"})]});var t=new sap.suite.ui.commons.TileContent({size:"{/size}",content:m});this.oTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t]});}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorcomparison.ComparisonTile.controller')){jQuery.sap.declare('sap.ushell.components.tiles.indicatorcomparison.ComparisonTile.controller');(function(){"use strict";sap.ushell.components.tiles.generic.extend("tiles.indicatorcomparison.ComparisonTile",{onInit:function(){this.KPI_VALUE_REQUIRED=false;},doProcess:function(){var t=this;this.setTextInTile();this.fetchChartData(function(k){this.CALCULATED_KPI_VALUE=k;this._updateTileModel({data:this.CALCULATED_KPI_VALUE});if(t.oConfig.TILE_PROPERTIES.frameType==sap.suite.ui.commons.FrameType.TwoByOne){t.oKpiTileView.oGenericTile.setFrameType(sap.suite.ui.commons.FrameType.TwoByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.oKpiTileView.oGenericTile.addTileContent(t.oKpiTileView.oComparisonTile);var c={};c.data=this.CALCULATED_KPI_VALUE;t.getView().getViewData().parentController._updateTileModel(c);t.getView().getViewData().deferredObj.resolve();}else{t.oKpiTileView.oGenericTile.setFrameType(sap.suite.ui.commons.FrameType.OneByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.oKpiTileView.oGenericTile.addTileContent(t.oKpiTileView.oComparisonTile);var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);}this.setToolTip(null,this.CALCULATED_KPI_VALUE,"COMP");},this.logError);},fetchChartData:function(s,E){function c(g,h){var k=false;if(g&&g.results&&g.results.length){for(var i=0,l=h.length;i<l&&!k;i++){k=g.results[0][h[i].COLUMN_NAME]!==null;}}return k;}var t=this;try{var u=this.oConfig.EVALUATION.ODATA_URL;var a=this.oConfig.EVALUATION.ODATA_ENTITYSET;var m=this.oConfig.EVALUATION.COLUMN_NAME;var b=m;if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES){for(var j=0;j<this.oConfig.TILE_PROPERTIES.COLUMN_NAMES.length;j++){if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[j].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){b=b+","+this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[j].COLUMN_NAME;}}}else{for(var j=0;j<this.oConfig.EVALUATION.COLUMN_NAMES.length;j++){if(this.oConfig.EVALUATION.COLUMN_NAMES[j].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){b=b+","+this.oConfig.EVALUATION.COLUMN_NAMES[j].COLUMN_NAME;}}}var d=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!d){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var f=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),a,b,null,v,3);this.comparisionChartODataRef=f.model.read(f.uri,null,null,true,function(g){var w={};if(f.unit){w.unit=f.unit;}if(c(g,t.oConfig.TILE_PROPERTIES.COLUMN_NAMES||t.oConfig.EVALUATION.COLUMN_NAMES)){t.oConfig.TILE_PROPERTIES.FINALVALUE=g;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,b.split(",")[0],f.unit);if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id)){w=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);w.data=g;}else{w.data=g;}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,w);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(g.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=g;if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id)){w=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);w.data=g;}else{w.data=g;}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,w);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);t.setNoData();}else{t.setNoData();}},function(g){if(g&&g.response){jQuery.sap.log.error(g.message+" : "+g.request.requestUri);E.call(t,g);}});}else{if(d.data&&c(d.data,t.oConfig.TILE_PROPERTIES.COLUMN_NAMES||t.oConfig.EVALUATION.COLUMN_NAMES)){t.oConfig.TILE_PROPERTIES.FINALVALUE=d.data;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,b,d.unit);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else{t.oConfig.TILE_PROPERTIES.FINALVALUE=d.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);t.setNoData();}}}catch(e){E.call(t,e);}},_processDataForComparisonChart:function(d,m,u){var f=[],L={},i,t,l;var a;var T=[];var b=this;var e=null;for(i=0;i<d.results.length;i++){var g=d.results[i];}T=sap.ushell.components.tiles.indicatorTileUtils.util.getAllMeasuresWithLabelText(this.oConfig.EVALUATION.ODATA_URL,this.oConfig.EVALUATION.ODATA_ENTITYSET);for(i=0,l=T.length;i<l;i++){t=T[i];L[t.key]=t.value;}var h=b.oConfig.TILE_PROPERTIES.COLUMN_NAMES||b.oConfig.EVALUATION.COLUMN_NAMES;for(i=0;i<h.length;i++){var j={};var k=h[i];j.value=Number(g[k.COLUMN_NAME]);var n=Number(g[k.COLUMN_NAME]);var o=false;var s=0;var p=b._getEvaluationThresholdMeasures();var I=jQuery.inArray(k.COLUMN_NAME,p);if(I>-1){o=true;s=b.oConfig.EVALUATION.SCALING;}if(b.oConfig.EVALUATION.SCALING==-2&&o){n*=100;}var c=b.isACurrencyMeasure(k.COLUMN_NAME);if(u&&u[i]&&g[u[i].name]){e=g[u[i].name];}a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(n,s,b.oConfig.EVALUATION.SCALING,b.oConfig.EVALUATION.DECIMAL_PRECISION,c,e);if(b.oConfig.EVALUATION.SCALING==-2&&o){a+=" %";}j.displayValue=a.toString();if(u){if(u[i]&&g[u[i].name]){j.displayValue+=" "+g[u[i].name];}}j.color=k.semanticColor;j.title=L[k.COLUMN_NAME]||k.COLUMN_NAME;f.push(j);}return f;},doDummyProcess:function(){var t=this;this.setTextInTile();t._updateTileModel({value:8888,size:sap.suite.ui.commons.InfoTileSize.Auto,frameType:sap.suite.ui.commons.FrameType.OneByOne,state:sap.suite.ui.commons.LoadState.Loading,valueColor:sap.suite.ui.commons.InfoTileValueColor.Error,indicator:sap.suite.ui.commons.DeviationIndicator.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1.2,color:"Good"},{title:"Measure 2",value:0.78,color:"Good"},{title:"Measure 3",value:1.4,color:"Error"}]});this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorcontribution.ContributionTile.controller')){jQuery.sap.declare('sap.ushell.components.tiles.indicatorcontribution.ContributionTile.controller');(function(){"use strict";sap.ushell.components.tiles.generic.extend("tiles.indicatorcontribution.ContributionTile",{onInit:function(){this.KPI_VALUE_REQUIRED=false;},doProcess:function(){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);this.setTextInTile();this.fetchChartData(function(k){this.CALCULATED_KPI_VALUE=k;this._updateTileModel({data:this.CALCULATED_KPI_VALUE});if(t.oConfig.TILE_PROPERTIES.frameType==sap.suite.ui.commons.FrameType.TwoByOne){t.oKpiTileView.oGenericTile.setFrameType(sap.suite.ui.commons.FrameType.TwoByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());t.getView().getViewData().deferredObj.resolve();}else{t.oKpiTileView.oGenericTile.setFrameType(sap.suite.ui.commons.FrameType.OneByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.oKpiTileView.oGenericTile.addTileContent(t.oKpiTileView.oComparisonTile);var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);}this.setToolTip(null,this.CALCULATED_KPI_VALUE,"CONT");},this.logError);},fetchChartData:function(s,E){var t=this;try{var u=this.oConfig.EVALUATION.ODATA_URL;var a=this.oConfig.EVALUATION.ODATA_ENTITYSET;t.setThresholdValues();if(this.oConfig.TILE_PROPERTIES.semanticMeasure){var m=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure;}else{var m=this.oConfig.EVALUATION.COLUMN_NAME;}var b=null;var d=this.oConfig.TILE_PROPERTIES.dimension;this.oConfig.EVALUATION_VALUES;var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!c){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var o={};o["0"]=m+",asc";o["1"]=m+",desc";o["2"]=d+",asc";o["3"]=d+",desc";var f=o[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var g=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),a,m,d,v,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){g.uri+="&$top=3&$orderby="+f[0]+" "+f[2];}else{g.uri+="&$top=3&$orderby="+f[0]+" "+f[1];}this.comparisionChartODataRef=g.model.read(g.uri,null,null,true,function(h){var w={};if(h&&h.results&&h.results.length){if(g.unit[0]){t._updateTileModel({unit:h.results[0][g.unit[0].name]});b=g.unit[0].name;w.unit=g.unit[0];w.unit.name=g.unit[0].name;}d=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oTileApi.url.addSystemToServiceUrl(u),a,d);w.dimension=d;t.oConfig.TILE_PROPERTIES.FINALVALUE=h;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,m.split(",")[0],d,b);if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id)){w=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);w.data=h;}else{w.data=h;}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,w);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(h.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=h;if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id)){w=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);w.data=h;}else{w.data=h;}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,w);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);t.setNoData();}else{t.setNoData();}},function(h){if(h&&h.response){jQuery.sap.log.error(h.message+" : "+h.request.requestUri);E.call(t,h);}});}else{if(c.data&&c.data.results&&c.data.results.length){if(c.unit){t._updateTileModel({unit:c.data.results[0][c.unit.name]});b=c.unit.name;}d=c.dimension;t.oConfig.TILE_PROPERTIES.FINALVALUE=c.data;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,m.split(",")[0],d,b);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(c.data.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=c.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);t.setNoData();}else{t.setNoData();}}}catch(e){E.call(t,e);}},_processDataForComparisonChart:function(d,m,a,u){var s=this.oConfig.TILE_PROPERTIES.semanticColorContribution;var f=[];var t;var b;for(var i=0;i<d.results.length;i++){var g=d.results[i];var h={};try{h.title=g[a].toString();}catch(e){h.title="";}h.value=Number(g[m]);var j=Number(g[m]);if(this.oConfig.EVALUATION.SCALING==-2){j*=100;}var c=this.isACurrencyMeasure(m);b=g[u];t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(j,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,b);if(this.oConfig.EVALUATION.SCALING==-2){t+=" %";}h.displayValue=t.toString();if(typeof s==='undefined'){h.color="Neutral";}else{h.color=s;}f.push(h);}return f;},doDummyProcess:function(){var t=this;t.setTextInTile();t._updateTileModel({value:8888,size:sap.suite.ui.commons.InfoTileSize.Auto,frameType:sap.suite.ui.commons.FrameType.OneByOne,state:sap.suite.ui.commons.LoadState.Loading,valueColor:sap.suite.ui.commons.InfoTileValueColor.Error,indicator:sap.suite.ui.commons.DeviationIndicator.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral"},{title:"EMEA",value:50,color:"Neutral"},{title:"APAC",value:-20,color:"Neutral"}]});this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatordeviation.DeviationTile.controller')){jQuery.sap.declare('sap.ushell.components.tiles.indicatordeviation.DeviationTile.controller');(function(){"use strict";sap.ushell.components.tiles.generic.extend("tiles.indicatordeviation.DeviationTile",{onInit:function(){this.KPI_VALUE_REQUIRED=true;},doProcess:function(k,t){var a=this;var f,b;var d=Number(k);var e=this.setThresholdValues();if(this.oConfig.EVALUATION.SCALING==-2){d*=100;}var c=this.isACurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);b=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(d),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);this.CALCULATED_KPI_VALUE=Number(k);var g={};var h=this.getThresholdsObjAndColor(e).returnColor;var i={value:Number(k),color:h};g.actualValueLabel=b.toString();g.actual=i;g.thresholds=[];g.thresholds=this.getThresholdsObjAndColor(e).arrObj;var j=this.DEFINITION_DATA.EVALUATION_VALUES;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var l=Number(e.targetValue);if(this.oConfig.EVALUATION.SCALING==-2){l*=100;}c=this.isACurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);f=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(l,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);g.targetValue=Number(e.targetValue);g.targetValueLabel=f.toString();}else{for(var m=0;m<j.length;m++){if(j[m].TYPE==="TA"){var l=Number(j[m].FIXED);if(this.oConfig.EVALUATION.SCALING==-2){l*=100;}c=this.isACurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);f=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(l,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);g.targetValue=Number(j[m].FIXED);g.targetValueLabel=f.toString();}}}if(this.oConfig.EVALUATION.SCALING==-2){g.scale="%";}this._updateTileModel(g);if(this.DEFINITION_DATA.TILE_PROPERTIES.frameType==sap.suite.ui.commons.FrameType.TwoByOne){a.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());a.getView().getViewData().deferredObj.resolve();}else{var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(a.oConfig,a.system);a.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);}this.setToolTip(h,d,"DT");},getThresholdsObjAndColor:function(t){try{var T={};T.arrObj=[];T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Neutral;var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var w,c,a,b;if(i==="MI"){a=Number(t.criticalHighValue)||0;b=Number(t.warningHighValue)||0;if(a&&b){a=window.parseFloat(a);b=window.parseFloat(b);T.arrObj.push({value:a,color:sap.suite.ui.commons.InfoTileValueColor.Error});T.arrObj.push({value:b,color:sap.suite.ui.commons.InfoTileValueColor.Critical});if(this.CALCULATED_KPI_VALUE<b){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Good;}else if(this.CALCULATED_KPI_VALUE<=a){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Critical;}else{T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Error;}}}else if(i==="MA"){c=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(c&&w){c=window.parseFloat(c);w=window.parseFloat(w);T.arrObj.push({value:c,color:sap.suite.ui.commons.InfoTileValueColor.Error});T.arrObj.push({value:w,color:sap.suite.ui.commons.InfoTileValueColor.Critical});if(this.CALCULATED_KPI_VALUE<c){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Error;}else if(this.CALCULATED_KPI_VALUE<=w){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Critical;}else{T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Good;}}}else{a=Number(t.criticalHighValue)||0;b=Number(t.warningHighValue)||0;c=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(w&&b&&c&&c){a=window.parseFloat(a);b=window.parseFloat(b);w=window.parseFloat(w);c=window.parseFloat(c);T.arrObj.push({value:a,color:sap.suite.ui.commons.InfoTileValueColor.Error});T.arrObj.push({value:b,color:sap.suite.ui.commons.InfoTileValueColor.Critical});T.arrObj.push({value:w,color:sap.suite.ui.commons.InfoTileValueColor.Critical});T.arrObj.push({value:c,color:sap.suite.ui.commons.InfoTileValueColor.Error});if(this.CALCULATED_KPI_VALUE<c||this.CALCULATED_KPI_VALUE>a){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Error;}else if((this.CALCULATED_KPI_VALUE>=c&&this.CALCULATED_KPI_VALUE<=w)||(this.CALCULATED_KPI_VALUE>=b&&this.CALCULATED_KPI_VALUE<=a)){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Critical;}else{T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Good;}}}return T;}catch(e){this.logError(e);}},doDummyProcess:function(){var t=this;this.setTextInTile();t._updateTileModel({actual:{value:120,color:sap.suite.ui.commons.InfoTileValueColor.Good},targetValue:100,thresholds:[{value:0,color:sap.suite.ui.commons.InfoTileValueColor.Error},{value:50,color:sap.suite.ui.commons.InfoTileValueColor.Critical},{value:150,color:sap.suite.ui.commons.InfoTileValueColor.Critical},{value:200,color:sap.suite.ui.commons.InfoTileValueColor.Error}],showActualValue:true,showTargetValue:true});this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);}});}());};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatornumeric.NumericTile.controller')){jQuery.sap.declare('sap.ushell.components.tiles.indicatornumeric.NumericTile.controller');(function(){"use strict";sap.ushell.components.tiles.generic.extend("tiles.indicatornumeric.NumericTile",{onInit:function(){this.KPI_VALUE_REQUIRED=true;},doProcess:function(k,t){var a=this;this.CALCULATED_KPI_VALUE=k;this.DEFINITION_DATA.EVALUATION_VALUES;var b=this.getTrendColor(t);var d=this.getTrendIndicator(t.trendValue);var s="";var e=this.CALCULATED_KPI_VALUE;if(this.oConfig.EVALUATION.SCALING==-2){e*=100;this.getView().oNVConfContS.setFormatterValue(false);}var c=this.isACurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);s=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(e),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);if(this.oConfig.EVALUATION.SCALING==-2){this._updateTileModel({scale:"%"});}this._updateTileModel({value:s.toString(),valueColor:b,indicator:d});if(a.oConfig.TILE_PROPERTIES.frameType==sap.suite.ui.commons.FrameType.OneByOne){var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(a.oConfig,a.system);a.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);this.setToolTip(b,e,"NT");}else{a.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());a.getView().getViewData().deferredObj.resolve();}this.setToolTip(b,e,"NT");},doDummyProcess:function(){var t=this;this.setTextInTile();t._updateTileModel({value:"10.34",scale:"M",valueColor:sap.suite.ui.commons.InfoTileValueColor.Neutral,indicator:sap.suite.ui.commons.DeviationIndicator.None});this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);}});}());};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.Shell.controller')){jQuery.sap.declare('sap.ushell.renderers.fiori2.Shell.controller');(function(){"use strict";jQuery.sap.require('sap.ui.core.IconPool');var c=true,a=true,b=sap.ui.Device.system.phone,u,U,m=new sap.ui.model.json.JSONModel({searchAvailable:false,title:"",searchFiltering:true,showEndUserFeedback:false,searchTerm:"",isPhoneWidth:false,states:{"home":{"stateName":"home","showCurtain":false,"headerHiding":false,"headerVisible":true,"showCatalog":false,"showPane":false,"headItems":[],"headEndItems":["sf"],"search":"","paneContent":[],"actions":["ContactSupportBtn","EndUserFeedbackBtn","userPreferencesButton","logoutBtn"],"floatingActions":[],"subHeaders":[],"toolAreaItems":[],"toolAreaVisible":false},"app":{"stateName":"app","showCurtain":false,"headerHiding":b,"headerVisible":true,"headEndItems":["sf"],"showCatalog":false,"showPane":false,"paneContent":[],"search":"","headItems":["homeBtn"],"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn","userPreferencesButton","logoutBtn"],"floatingActions":[],"subHeaders":[],"toolAreaItems":[],"toolAreaVisible":false},"minimal":{"stateName":"minimal","showCurtain":false,"headerHiding":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"paneContent":[],"headItems":[],"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn","userPreferencesButton","logoutBtn"],"floatingActions":[],"subHeaders":[],"toolAreaItems":[],"toolAreaVisible":false},"standalone":{"stateName":"standalone","showCurtain":false,"headerHiding":b,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"paneContent":[],"headItems":[],"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"],"floatingActions":[],"subHeaders":[],"toolAreaItems":[],"toolAreaVisible":false},"embedded":{"stateName":"embedded","showCurtain":false,"headerHiding":b,"headerVisible":true,"headEndItems":["standardActionsBtn"],"showCatalog":false,"showPane":false,"paneContent":[],"headItems":[],"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"],"floatingActions":[],"subHeaders":[],"toolAreaItems":[],"toolAreaVisible":false},"headerless":{"stateName":"headerless","showCurtain":false,"headerHiding":b,"headerVisible":false,"headEndItems":[],"showCatalog":false,"showPane":false,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeaders":[],"toolAreaItems":[],"toolAreaVisible":false}},userPreferences:{entries:[]}}),n={embedded:"embedded",newWindowThenEmbedded:"newWindowThenEmbedded",newWindow:"newWindow",replace:"replace"},C={},d=['minimal','app','standalone','embedded','headerless','home'];sap.ui.controller("sap.ushell.renderers.fiori2.Shell",{oCoreExtLoadingDeferred:undefined,onInit:function(){this.oEndUserFeedbackConfiguration={showAnonymous:true,showLegalAgreement:true,showCustomUIContent:true,feedbackDialogTitle:true,textAreaPlaceholder:true,customUIContent:undefined};this.getView().setModel(m);this.getView().setModel(sap.ushell.resources.i18nModel,"i18n");this.managedElementsQueue=[];sap.ui.getCore().getEventBus().subscribe("externalSearch",this.externalSearchTriggered,this);this._setConfigurationToModel();sap.ui.getCore().getEventBus().subscribe("openApp",this.openApp,this);sap.ui.getCore().getEventBus().subscribe("launchpad","contentRendered",this._loadCoreExt,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell.renderers.fiori2.Renderer","appOpened",this.loadUserImage,this);sap.ui.getCore().getEventBus().subscribe("launchpad","contentRendered",this.checkEUFeedback,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell.renderers.fiori2.Renderer","appOpened",this.checkEUFeedback,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell.renderers.fiori2.Renderer","appOpened",this.closeLoadingScreen,this);sap.ui.getCore().getEventBus().subscribe("launchpad","toggleContentDensity",this.toggleContentDensity,this);var C=this.getView().getViewData()?this.getView().getViewData().config:null,r=C?C.rootIntent:"",s=hasher.getHash(),S=sap.ushell.Container.getService("URLParsing").parseShellHash(s);if(!s.length||r===S.semanticObject+"-"+S.action){this.switchViewState('home');}if(sap.ushell.Container.getService("UsageAnalytics").isEnabled()===true){sap.ushell.Container.getService("UsageAnalytics").init();jQuery.sap.require("sap.ushell.components.flp.FLPAnalytics");}u=sap.ushell.Container.getService("UserRecents");this.history=new sap.ushell.renderers.fiori2.History();this.oNavContainer=sap.ui.getCore().byId("navContainer");this.oLoadingDialog=sap.ui.getCore().byId("loadingDialog");this.oShellNavigation=sap.ushell.Container.getService("ShellNavigation");this.oShellNavigation.registerNavigationFilter(jQuery.proxy(this._handleEmptyHash,this));this.oShellNavigation.init(jQuery.proxy(this.doHashChange,this));this.oShellNavigation.registerNavigationFilter(jQuery.proxy(this.handleDataLoss,this));sap.ushell.Container.getService("Message").init(jQuery.proxy(this.doShowMessage,this));sap.ushell.Container.setLogonFrameProvider(this._getLogonFrameProvider());this.bContactSupportEnabled=sap.ushell.Container.getService("SupportTicket").isEnabled();sap.ushell.renderers.fiori2.AccessKeysHandler.init(m);window.onbeforeunload=function(){if(sap.ushell.Container&&sap.ushell.Container.getDirtyFlag()){if(!sap.ushell.resources.browserI18n){sap.ushell.resources.browserI18n=sap.ushell.resources.getTranslationModel(window.navigator.language).getResourceBundle();}return sap.ushell.resources.browserI18n.getText("dataLossExternalMessage");}};if(this.bContactSupportEnabled){sap.ushell.UserActivityLog.activate();}if(m.getProperty("/contentDensity")){this._applyContentDensity();}},_isCompactContentDensity:function(){var i;if(!sap.ui.Device.support.touch){i=true;}else if(!sap.ui.Device.system.combi){i=false;}else{var o;try{var f=sap.ushell.Container.getService("UserInfo");o=f.getUser();}catch(e){jQuery.sap.log.error("Getting UserInfo service failed.");o=sap.ushell.Container.getUser();}i=(o.getContentDensity()==='compact')?true:false;}return i;},_applyContentDensity:function(i){if(!this.getModel().getProperty("/contentDensity")){return;}if(i===undefined){i=this._isCompactContentDensity();}var e=sap.ushell.services.AppConfiguration.getMetadata();if(i&&!e.compactContentDensity){i=false;}else if(e.compactContentDensity&&!e.cozyContentDensity){i=true;}if(i){jQuery('body').removeClass('sapUiSizeCozy');jQuery('body').addClass('sapUiSizeCompact');}else{jQuery('body').removeClass('sapUiSizeCompact');jQuery('body').addClass('sapUiSizeCozy');}},toggleContentDensity:function(s,e,D){var i=D.contentDensity==="compact";this._applyContentDensity(i);},checkEUFeedback:function(){if(!this.bFeedbackServiceChecked){this.bFeedbackServiceChecked=true;try{sap.ushell.Container.getService("EndUserFeedback").isEnabled().done(function(){m.setProperty('/showEndUserFeedback',true);}).fail(function(){m.setProperty('/showEndUserFeedback',false);});}catch(e){jQuery.sap.log.error("EndUserFeedback adapter is not found",e.message||e);m.setProperty('/showEndUserFeedback',false);}}},_handleEmptyHash:function(h){if(h.length===0){var v=this.getView()?this.getView().getViewData():{};C=v.config||{};if(C.migrationConfig){return this.oShellNavigation.NavigationFilterStatus.Continue;}if(C.rootIntent){setTimeout(function(){hasher.setHash(C.rootIntent);},0);return this.oShellNavigation.NavigationFilterStatus.Abandon;}}return this.oShellNavigation.NavigationFilterStatus.Continue;},_setConfigurationToModel:function(){var v=this.getView().getViewData(),s,e;if(v){C=v.config||{};}if(C){if(C.states){e=m.getProperty('/states');for(s in C.states){if(C.states.hasOwnProperty(s)){e[s]=C.states[s];}}m.setProperty('/states',e);}if(C.appState==="headerless"){m.setProperty("/personalization",false);m.setProperty("/states/home/headerVisible",false);C.enablePersonalization=false;}else if(C.enablePersonalization!==undefined){m.setProperty("/personalization",C.enablePersonalization);}if(C.changeEndUserFeedbackTitle!==undefined){this.oEndUserFeedbackConfiguration.feedbackDialogTitle=C.changeEndUserFeedbackTitle;}if(C.changeEndUserFeedbackPlaceholder!==undefined){this.oEndUserFeedbackConfiguration.textAreaPlaceholder=C.changeEndUserFeedbackPlaceholder;}if(C.showEndUserFeedbackAnonymousCheckbox!==undefined){this.oEndUserFeedbackConfiguration.showAnonymous=C.showEndUserFeedbackAnonymousCheckbox;}if(C.showEndUserFeedbackLegalAgreement!==undefined){this.oEndUserFeedbackConfiguration.showLegalAgreement=C.showEndUserFeedbackLegalAgreement;}if(C.enableSetTheme!==undefined){m.setProperty("/setTheme",C.enableSetTheme);}if(C.enableContentDensity!==undefined){m.setProperty("/contentDensity",C.enableContentDensity);}if(C.title){m.setProperty("/title",C.title);}if(C.migrationConfig!==undefined){m.setProperty("/migrationConfig",C.migrationConfig);}if(C.enableUserDefaultParameters!==undefined){m.setProperty("/userDefaultParameters",C.enableUserDefaultParameters);}if(C.disableHomeAppCache!==undefined){m.setProperty("/disableHomeAppCache",C.disableHomeAppCache);}m.setProperty("/enableHelp",!!C.enableHelp);m.setProperty("/searchAvailable",(C.enableSearch!==false));}},getModelConfiguration:function(){var v=this.getView().getViewData(),o,s;if(v){o=v.config||{};s=jQuery.extend({},o);}delete s.applications;return s;},_getLogonFrameProvider:function(){var v=this.getView();return{create:function(){return v.createIFrameDialog();},show:function(){v.showIFrameDialog();},destroy:function(){v.destroyIFrameDialog();}};},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().unsubscribe("openApp",this.openApp,this);sap.ui.getCore().getEventBus().unsubscribe("toggleContentDensity",this.toggleContentDensity,this);this.oShellNavigation.hashChanger.destroy();this.getView().aDanglingControls.forEach(function(o){if(o.destroyContent){o.destroyContent();}o.destroy();});sap.ushell.UserActivityLog.deactivate();},getAnimationType:function(){return sap.ui.Device.os.android?"show":"slide";},onCurtainClose:function(e){jQuery.sap.log.warning("Closing Curtain",e);},handleDataLoss:function(e,o){if(sap.ushell.Container.getDirtyFlag()){if(!sap.ushell.resources.browserI18n){sap.ushell.resources.browserI18n=sap.ushell.resources.getTranslationModel(window.navigator.language).getResourceBundle();}if(confirm(sap.ushell.resources.browserI18n.getText("dataLossInternalMessage"))){sap.ushell.Container.setDirtyFlag(false);return this.oShellNavigation.NavigationFilterStatus.Continue;}else{return this.oShellNavigation.NavigationFilterStatus.Abandon;}}return this.oShellNavigation.NavigationFilterStatus.Continue;},doShowMessage:function(t,M,p){jQuery.sap.require("sap.m.MessageToast");jQuery.sap.require("sap.m.MessageBox");if(t===sap.ushell.services.Message.Type.ERROR){if(sap.ushell.Container.getService("SupportTicket").isEnabled()&&M!==sap.ushell.resources.i18n.getText("supportTicketCreationFailed")){try{jQuery.sap.require("sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage");var f=new sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage("EmbeddedSupportErrorMessage",{title:p.title||sap.ushell.resources.i18n.getText("error"),content:new sap.m.Text({text:M})});f.open();}catch(e){sap.m.MessageBox.show(M,sap.m.MessageBox.Icon.ERROR,p.title||sap.ushell.resources.i18n.getText("error"));}}else{sap.m.MessageBox.show(M,sap.m.MessageBox.Icon.ERROR,p.title||sap.ushell.resources.i18n.getText("error"));}}else if(t===sap.ushell.services.Message.Type.CONFIRM){if(p.actions){sap.m.MessageBox.show(M,sap.m.MessageBox.Icon.QUESTION,p.title,p.actions,p.callback);}else{sap.m.MessageBox.confirm(M,p.callback,p.title);}}else{sap.m.MessageToast.show(M,{duration:p.duration||3000});}},_isColdStart:function(){if(this.history.getHistoryLength()<=1){return true;}this._isColdStart=function(){return false;};return false;},_generateExpandedUrl:function(r,s,D,e){return this.oShellNavigation.hrefForExternal({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:"navResCtx"},params:jQuery.extend({url:r.url,additionalInformation:r.additionalInformation,applicationType:r.applicationType,navigationMode:r.navigationMode,"original_intent":D,title:e},s.params)},true,undefined,true);},_logOpenAppAction:function(f){if(C&&C.enableTilesOpacity){setTimeout(function(){if(sap.ushell.Container){u.addAppUsage(f);}},700);}},_performTransition:function(i){if(this.history.backwards&&this.oNavContainer.getInitialPage()!==this.oNavContainer.getCurrentPage().getId()){this.oNavContainer.to(i,"slideBack");return;}this.oNavContainer.to(i,"slide");},doHashChange:function(s,A,o,O,p){var t=this,i,f;if(!a){a=true;this.closeLoadingScreen();return;}if(p){this.hashChangeFailure(this.history.getHistoryLength(),p.message,null,"sap.ushell.renderers.fiori2.Shell.controller");return;}if(sap.m.InstanceManager&&c){sap.m.InstanceManager.closeAllDialogs();sap.m.InstanceManager.closeAllPopovers();}c=true;this.oLoadingDialog.setText("");this.oLoadingDialog.openLoadingScreen();i=this.history.getHistoryLength();f=this.fixShellHash(s);this.history.hashChange(f,o);this._resolveHashFragment(f).done(function(r,P){if(t.getModel().getProperty("/migrationConfig")){var C=t.getView().oViewData.config;C.migrationConfig=false;t.getModel().setProperty("/migrationConfig",false);if(r&&f==='#'){C.rootIntent="";}else if(f==='#'){setTimeout(function(){hasher.setHash(C.rootIntent);},0);return;}}t._loadAppComponentDependencies(r).done(function(){if(t.oCoreExtLoadingDeferred!==undefined){t.oCoreExtLoadingDeferred.promise().fail(function(){jQuery.sap.log.warning("failed to load core-ext by web worker, performing require");t._requireCoreExt(f);}).always(function(){t._initiateApplication(r,f,P,i);});}else{t._requireCoreExt(f);t._initiateApplication(r,f,P,i);}}).fail(function(M){t.hashChangeFailure(i,"Failed to load U5 component from "+f,M,"sap.ushell.renderers.fiori2.Shell.controller");});}).fail(function(M){t.hashChangeFailure(i,"Failed to resolve navigation target: "+f,M,"sap.ushell.renderers.fiori2.Shell.controller");});},_loadAppComponentDependencies:function(r){var o=new jQuery.Deferred(),s,M=r&&r.ui5ComponentName,A;if(!M){o.resolve();}else{A=(r.applicationDependencies&&r.applicationDependencies.asyncHints)||{"libs":["sap.ca.scfld.md","sap.ca.ui","sap.me","sap.ui.unified"]};A.preloadOnly=true;s=(typeof r.url==="string")?r.url.replace(/[?].*$/,""):r.url;sap.ui.component.load({name:r.ui5ComponentName,url:s,async:true,asyncHints:A}).then(function(){o.resolve();},function(e){jQuery.sap.log.warning("Failed to preload component dependency before navigation",e,"sap.ushell.renderers.fiori2.Shell");o.resolve();});}return o.promise();},_initiateApplication:function(r,f,p,o){var M=sap.ushell.services.AppConfiguration.getMetadata(r);this._logOpenAppAction(f);try{this.navigate(p,f,M,r);}catch(e){if(e.stack){jQuery.sap.log.error("Application initialization failed due to an Exception:\n"+e.stack);}this.restoreNavContainerAfterFailure();this.hashChangeFailure(o,e.name,e.message,M?M.title:"");}},_resolveHashFragment:function(s){var r,p,P=sap.ushell.Container.getService("URLParsing").parseShellHash(s),D=new jQuery.Deferred();if(P&&P.contextRaw&&P.contextRaw==="navResCtx"){p=P.params||{};r={additionalInformation:p.additionalInformation[0],applicationType:p.applicationType[0],url:p.url[0],navigationMode:p.navigationMode[0]};if(p.title){r.text=p.title[0];}D.resolve(r,P);}else{sap.ushell.Container.getService("NavTargetResolution").resolveHashFragment(s).done(function(r){D.resolve(r,P);}).fail(function(M){D.reject(M);});}return D.promise();},_handleConditionalNavigation:function(p,f,M,r){var t=this,N=r.navigationMode;if(N===n.newWindowThenEmbedded){if(this._isColdStart()||(p.contextRaw&&p.contextRaw==="navResCtx")||this.history.backwards){r.navigationMode=n.embedded;this.navigate(p,f,M,r);}else{t._generateExpandedUrl(r,p,f,M.title).done(function(s){r.navigationMode=n.newWindow;if(s.skippedParams||s.hash.length>=1023){r.url=encodeURI(f);}else{r.url=s.hash;}t.navigate(p,f,M,r);}).fail(function(s){throw new Error(s);});}return true;}if(N===n.newWindow&&this._isColdStart()){r.navigationMode=n.replace;this.navigate(p,f,M,r);return true;}return false;},navigate:function(p,f,M,r){var N=r.navigationMode,E;if(sap.ushell.utils.isNativeWebGuiNavigation(r)){try{E=window.external.getPrivateEpcm();E.doNavigate(r.url);a=false;this.closeLoadingScreen();this._windowHistoryBack(1);}catch(e){if(e.stack){jQuery.sap.log.error("Application initialization failed due to an Exception:\n"+e.stack);}this.restoreNavContainerAfterFailure();this.hashChangeFailure(this.history.getHistoryLength(),e.name,e.message,M.title);}return;}if(this._handleConditionalNavigation.apply(this,arguments)){return;}if(N===n.embedded){this._handleEmbeddedNavMode(f,p,M,r);if(p&&p.contextRaw==="navResCtx"){a=false;hasher.replaceHash(p.params.original_intent[0]);this.history._history[0]=p.params.original_intent[0];}return;}if(N===n.replace){a=false;this._changeWindowLocation(r.url);return;}if(N===n.newWindow){a=false;this._openAppNewWindow(r.url);this.history.pop();this._windowHistoryBack(1);return;}this.hashChangeFailure(this.history.getHistoryLength(),"Navigation mode is not recognized",null,"sap.ushell.renderers.fiori2.Shell.controller");},_handleEmbeddedNavMode:function(f,p,M,r){var A,i,N,I,s;sap.ushell.services.AppConfiguration.setCurrentApplication(r);this.setAppIcons(M);A='-'+p.semanticObject+'-'+p.action;N=r.applicationType==="NWBC";I=f==="#"||(C.rootIntent&&C.rootIntent===p.semanticObject+"-"+p.action);if(I&&!this.oHomeApp&&!C.disableHomeAppCache){this._saveHomePageComponent();}s=p?p.semanticObject+"-"+p.action:"";this.oLoadingDialog.showAppInfo(M.title,M.icon||null);if(N){this.switchViewState("minimal");}else if(I){this.switchViewState("home");}else{this.switchViewState(d.indexOf(C.appState)>=0?C.appState:"app");}i=this.getWrappedApplication(s,M,r,A,r.fullWidth||M.fullWidth||N);if(I&&!C.disableHomeAppCache){if(!this.oNavContainer.getInitialPage()){this.oNavContainer.setInitialPage(i);}}this._performTransition(i);},getWrappedApplication:function(i,M,r,A,f){var I,e,o;e=this.oNavContainer.getPage("application"+A)||this.oNavContainer.getPage("applicationShellPage"+A);if(e&&i!==C.rootIntent){e.destroy();}else if(e){return e;}jQuery.sap.require('sap.ushell.components.container.ApplicationContainer');setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","appOpening",r);jQuery.sap.log.info('app is being opened');},0);if(C.applications){r.applicationConfiguration=C.applications[i];}o=new sap.ushell.components.container.ApplicationContainer("application"+A,r);this.publishNavigationStateEvents(o,r);if(f){if(!M.hideLightBackground){o.addStyleClass('sapMShellGlobalInnerBackground');}I=o;}else{jQuery.sap.require("sap.m.Shell");I=new sap.m.Shell("applicationShellPage"+A,{logo:sap.ui.resource('sap.ui.core','themes/base/img/1x1.gif'),title:M.title,showLogout:false,app:o}).addStyleClass("sapUshellApplicationPage");if(!M.title){I.addStyleClass("sapUshellApplicationPageNoHdr");}}this._applyContentDensity();o.onfocusin=function(){sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusPassedToExternalHandlerFirstTime=false;};o.onfocusout=function(){sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=true;sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusPassedToExternalHandlerFirstTime=true;};this.oNavContainer.addPage(I);return I;},_saveHomePageComponent:function(){if(this.oHomeApp){return;}var t=this,s="sap.ushell.components.container.ApplicationContainer",l=function(e,f,D){t.oHomeApp=D.component;sap.ui.getCore().getEventBus().unsubscribe(s,'componentCreated',l);};sap.ui.getCore().getEventBus().subscribe(s,'componentCreated',l);},hashChangeFailure:function(h,M,D,s){this.reportError(M,D,s);this.closeLoadingScreen();this.delayedMessageError(sap.ushell.resources.i18n.getText("fail_to_start_app_try_later"));c=false;if(h===0){hasher.setHash("");}else{this._windowHistoryBack(1);}},reportError:function(M,D,s){jQuery.sap.log.error(M,D,s);},delayedMessageError:function(M){setTimeout(function(){if(sap.ushell.Container!==undefined){sap.ushell.Container.getService("Message").error(M);}},0);},fixShellHash:function(s){if(!s){s='#';}else if(s.charAt(0)!=='#'){s='#'+s;}return s;},restoreNavContainerAfterFailure:function(){var o=this.oNavContainer.getCurrentPage(),e,O;if(o){this.oNavContainer.removePage(o).destroy();}O=this.oNavContainer.removeAllPages();this.oNavContainer.destroy();this.oNavContainer=this.getView().initNavContainer(this);e=this.getView().getOUnifiedShell();e.addContent(this.oNavContainer);jQuery.each(O,jQuery.proxy(function(i,v){if(!this.oNavContainer.getPage(v.getId())){this.oNavContainer.addPage(v);}if(v.getId()===this.oNavContainer.getInitialPage()){v.removeStyleClass("sapMNavItemHidden");}},this));},publishNavigationStateEvents:function(A,o){var e=A.onAfterRendering,f,t=this;A.onAfterRendering=function(){if(e){e.apply(this,arguments);}setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","appOpened",o);jQuery.sap.log.info('app was opened');},0);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appOpened",o);};f=A.exit;A.exit=function(){if(f){f.apply(this,arguments);}t._applyContentDensity();setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","appClosed",o);jQuery.sap.log.info('app was closed');},0);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appClosed",o);};},_openAppNewWindow:function(s){var e=window.open(s);if(!e){var f=sap.ushell.resources.i18n.getText("fail_to_start_app_popup_blocker");this.delayedMessageError(f);}},_windowHistoryBack:function(s){window.history.back(s);},_changeWindowLocation:function(s){window.location.href=s;},setAppIcons:function(M){var s=jQuery.sap.getModulePath("sap.ushell"),l=(M&&M.homeScreenIconPhone)||(s+'/themes/base/img/launchicons/57_iPhone_Desktop_Launch.png'),L=(M&&M["homeScreenIconPhone@2"])||(s+'/themes/base/img/launchicons/114_iPhone-Retina_Web_Clip.png'),o=(M&&M.homeScreenIconTablet)||(s+'/themes/base/img/launchicons/72_iPad_Desktop_Launch.png'),e=(M&&M["homeScreenIconTablet@2"])||(s+'/themes/base/img/launchicons/144_iPad_Retina_Web_Clip.png'),f=(M&&M.favIcon)||(s+'/themes/base/img/launchpad_favicon.ico'),t=(M&&M.title)||"",g=this.getFavIconHref();if(sap.ui.Device.os.ios){jQuery.sap.setIcons({'phone':l,'phone@2':L,'tablet':o,'tablet@2':e,'favicon':f,'precomposed':true});}else if(g!==f){jQuery.sap.setIcons({'phone':'','phone@2':'','tablet':'','tablet@2':'','favicon':f,'precomposed':true});}window.document.title=t;},getFavIconHref:function(){return jQuery('link').filter('[rel="shortcut icon"]').attr('href')||'';},externalSearchTriggered:function(s,e,D){m.setProperty("/searchTerm",D.searchTerm);D.query=D.searchTerm;},onAfterNavigate:function(e){var h=this.oNavContainer.getInitialPage(),f=e.getParameter("fromId");if(f&&f!==h){this.oNavContainer.removePage(sap.ui.getCore().byId(f));sap.ui.getCore().byId(f).destroy();}this.closeLoadingScreen();if(e.mParameters&&e.mParameters.toId===h){sap.ui.getCore().byId("configBtn").focus();if(this.oHomeApp&&this.oHomeApp.setInitialConfiguration){this.oHomeApp.setInitialConfiguration();}}},closeLoadingScreen:function(){this.oLoadingDialog.closeLoadingScreen();},togglePane:function(e){var s=e.getSource(),S=s.getSelected();sap.ui.getCore().getEventBus().publish("launchpad","togglePane",{currentContent:s.getModel().getProperty("/currentState/paneContent")});if(e.getParameter("id")==="categoriesBtn"){s.getModel().setProperty("/currentState/showCurtainPane",!S);}else{s.getModel().setProperty("/currentState/showPane",!S);}},loadUserImage:function(){if(!U){this.getView().loadUserImage();U=true;}},_requireCoreExt:function(f){if((C.preloadLibrariesForRootIntent||C.preloadLibrariesForRootIntent===undefined)||(f!=='#'+C.rootIntent&&f)){try{jQuery.sap.require('sap.fiori.core-ext-light');}catch(e){jQuery.sap.log.warning("failed to load sap.fiori.core-ext-light!");}}},_loadCoreExt:function(){var A=jQuery.sap.isDeclared('sap.fiori.core',true)||jQuery.sap.isDeclared('sap.fiori.core-ext-light',true),M=window['sap-ui-debug']?'sap/fiori/core-ext-light-dbg.js':'sap/fiori/core-ext-light.js',t=this;if(A){return;}this.oCoreExtLoadingDeferred=new jQuery.Deferred();jQuery.sap._loadJSResourceAsync(M).then(function(){t.oCoreExtLoadingDeferred.resolve();setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","coreExtLoaded");},0);}).catch(function(){jQuery.sap.log.warning('failed to load sap.fiori.core-ext-light');t.oCoreExtLoadingDeferred.reject();});},removeHeaderItem:function(i,e,s){this._removeShellItem("headItems",i,e,s);},removeToolAreaItem:function(i,e,s){this._removeShellItem("toolAreaItems",i,e,s);},removeHeaderEndItem:function(i,e,s){this._removeShellItem("headEndItems",i,e,s);},removeSubHeader:function(i,e,s){this._removeShellItem("subHeaders",i,e,s);},removeActionButton:function(i,e,s){this._removeShellItem("actions",i,e,s);},removeLeftPaneContent:function(i,e,s){this._removeShellItem("paneContent",i,e,s);},removeFloatingActionButton:function(i,e,s){this._removeShellItem("floatingActions",i,e,s);},addHeaderItem:function(i,e,s){this._addUpToThreeItem("headItems",i,e,s);},addToolAreaItem:function(i,e,s){this._addToolAreaItem("toolAreaItems",i,e,s);},addHeaderEndItem:function(i,e,s){this._addUpToThreeItem("headEndItems",i,e,s);},addSubHeader:function(i,e,s){this._addShellItem("subHeaders",i,e,s);},addActionButton:function(i,e,s,I){if(I){this._addActionButtonAtStart("actions",i,e,s);}else{this._addActionButton("actions",i,e,s);}},addLeftPaneContent:function(i,e,s){this._addShellItem("paneContent",i,e,s);},addFloatingActionButton:function(i,e,s){this._addShellItem("floatingActions",i,e,s);},_addActionButtonAtStart:function(p,i,e,s){var v=function(A,i,S){return true;},f=function(g,I){var A=m.getProperty(g),h=I.slice(0);m.setProperty(g,h.concat(A));};this._setShellItem(p,i,e,s,v,f);},_addActionButton:function(p,i,e,s){var v=function(A,i,S){return true;},f=function(g,I){var A=m.getProperty(g);var l=A.indexOf("logoutBtn");if(l>-1){A.splice(l,0,I[0]);}else{A.push(I[0]);}m.setProperty(g,A);};this._setShellItem(p,i,e,s,v,f);},_addUpToThreeItem:function(p,i,e,s){var v=function(I,g,S){var h=0,j,k;for(j=0;j<I.length;j++){k=I[j];if(k==='actionsBtn'){h+=2;}else{h++;}if(h+g.length>3){jQuery.sap.log.warning("maximum of three items has reached, cannot add more items.");return false;}}return true;},f=function(g,I){var h=m.getProperty(g),j=h.slice(0);m.setProperty(g,j.concat(I));};this._setShellItem(p,i,e,s,v,f);},_addShellItem:function(p,i,e,s){var v=function(I,i,S){if(I.length>0){jQuery.sap.log.warning("You can only add one item. Replacing existing item: "+I[0]+" in state: "+S+", with the new item: "+i[0]+".");}return true;},f=function(g,I){m.setProperty(g,i.slice(0));};this._setShellItem(p,i,e,s,v,f);},_addToolAreaItem:function(p,i,e,s){var v=function(){return true;},f=function(h,i){var I=m.getProperty(h);I.push(i);m.setProperty(h,I);};var g,P=this._getPassStates(s);for(g=0;g<P.length;g++){this.showShellItem("/toolAreaVisible",P[g],true);}this._setShellItem(p,i,e,s,v,f);},_removeShellItem:function(p,i,e,s){var v=function(I,g){var l,i,h;for(h=0;h<g.length;h++){i=g[h];l=I.indexOf(i);if(l<0){jQuery.sap.log.warning("You cannot remove Item: "+i+", the headItem does not exists.");return false;}}return true;},f=function(g,I){var h=m.getProperty(g),l,i,j;for(j=0;j<I.length;j++){i=I[j];l=h.indexOf(i);if(l>-1){h.splice(l,1);}}m.setProperty(g,h);};this._setShellItem(p,i,e,s,v,f);},_setShellItem:function(p,I,e,s,v,f){var g,h;if(e===true){g="/currentState/"+p;h=m.getProperty(g);if(v(h,I,"currentState")===false){return;}f(g,I);}else{var P=this._getPassStates(s),i,o=m.getProperty("/currentState/stateName");for(i=0;i<P.length;i++){var S=P[i],j;g="/states/"+S+"/"+p;h=m.getProperty(g);if(v(h,I,S)===false){return;}var M=this._getModelStates(S);for(j=0;j<M.length;j++){g="/states/"+M[j]+"/"+p;f(g,I);if(o===M[j]){g="/currentState/"+p;f(g,I);}}}}},_getPassStates:function(s){var p=[],i;s=s||[];for(i=0;i<s.length;i++){if(s[i]!==undefined){if(s[i]!=="home"&&s[i]!=="app"){throw new Error("sLaunchpadState value is invalid");}p.push(s[i]);}}if(!p.length){p=["app","home"];}return p;},_getModelStates:function(s){var M=[];if(s==="app"){var e=["app","minimal","standalone","embedded"];M=M.concat(e);}else{M.push(s);}return M;},showShellItem:function(p,s,v){var M="/states/"+s+p,e="/currentState"+p;m.setProperty(M,v);if(m.getProperty("/currentState/stateName")===s){m.setProperty(e,v);}},_setHeaderTitle:function(t,i){if(typeof t!=="string"){throw new Error("sTitle type is invalid");}this.getView().getOUnifiedShell().setTitle(t,i);},_setHeaderHiding:function(h){if(typeof h!=="boolean"){throw new Error("bHiding type is invalid");}m.setProperty("/currentState/headerHiding",h);},addEndUserFeedbackCustomUI:function(o,s){if(o){this.oEndUserFeedbackConfiguration.customUIContent=o;}if(s===false){this.oEndUserFeedbackConfiguration.showCustomUIContent=s;}},setFooter:function(f){if(typeof f!=="object"||!f.getId){throw new Error("oFooter value is invalid");}if(this.getView().oShellPage.getFooter()!==null){jQuery.sap.log.warning("You can only set one footer. Replacing existing footer: "+this.getView().oShellPage.getFooter().getId()+", with the new footer: "+f.getId()+".");}this.getView().oShellPage.setFooter(f);},removeFooter:function(){if(this.getView().oShellPage.getFooter()===null){jQuery.sap.log.warning("There is no footer to remove.");return;}this.getView().oShellPage.setFooter(null);},addUserPreferencesEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateUserPrefModel(e);},_validateUserPrefEntryConfiguration:function(e){if((!e)||(typeof e!=="object")){throw new Error("object oConfig was not provided");}if(!e.title){throw new Error("title was not provided");}if(!e.value){throw new Error("value was not provided");}if(typeof e.entryHelpID!=="undefined"){if(typeof e.entryHelpID!=="string"){throw new Error("entryHelpID type is invalid");}else{if(e.entryHelpID===""){throw new Error("entryHelpID type is invalid");}}}if(e.title&&typeof e.title!=="string"){throw new Error("title type is invalid");}if(typeof e.value!=="function"&&typeof e.value!=="string"&&typeof e.value!=="number"){throw new Error("value type is invalid");}if(e.onSave&&typeof e.onSave!=="function"){throw new Error("onSave type is invalid");}if(e.content&&typeof e.content!=="function"){throw new Error("content type is invalid");}if(e.onCancel&&typeof e.onCancel!=="function"){throw new Error("onCancel type is invalid");}},addElementToManagedQueue:function(i){this.managedElementsQueue.push(i);},destroyManageQueue:function(){var i;if(this.managedElementsQueue){i=this.managedElementsQueue.pop();while(i){i.destroy();i=this.managedElementsQueue.pop();}}},switchViewState:function(s,S){var p=s[0]==="/"?s:"/states/"+s,o=m.getProperty(p),e=m.getProperty("/currentState")||{};if(!!S){m.setProperty("/lastState",e);}m.setProperty("/currentState",jQuery.extend(true,{},{},o));this.destroyManageQueue();if(s==="searchResults"){m.setProperty("/lastSearchScreen",'');if(!hasher.getHash().indexOf("Action-search")===0){var f=sap.ui.getCore().getModel("searchModel");hasher.setHash("Action-search&/searchTerm="+f.getProperty("/searchBoxTerm")+"&dataSource="+JSON.stringify(f.getDataSourceJson()));}}sap.ushell.renderers.fiori2.AccessKeysHandler.resetAppKeysHandler();},_updateUserPrefModel:function(e){var f={"entryHelpID":e.entryHelpID,"title":e.title,"editable":e.content?true:false,"valueArgument":e.value,"valueResult":null,"onSave":e.onSave,"onCancel":e.onCancel,"contentFunc":e.content,"contentResult":null};var g=m.getProperty("/userPreferences/entries");g.push(f);m.setProperty("/userPreferences/entries",g);},pressActionBtn:function(e){if(!sap.ui.Device.system.desktop){var o=m.getProperty("/currentState").headerHiding;m.setProperty("/currentState/headerHiding",false);}var A=sap.ui.getCore().byId('headActions');if(!A){var f=sap.ui.getCore().byId("userPreferencesButton"),l=new sap.ushell.ui.footerbar.LogoutButton("logoutBtn"),g=new sap.ushell.ui.footerbar.AboutButton("aboutBtn");if(!f){f=new sap.ushell.ui.footerbar.UserPreferencesButton("userPreferencesButton");this._setUserPrefModel();}jQuery.sap.require('sap.ushell.ui.footerbar.ContactSupportButton');jQuery.sap.require('sap.ushell.ui.footerbar.EndUserFeedback');var h=new sap.ushell.ui.footerbar.ContactSupportButton("ContactSupportBtn",{visible:this.bContactSupportEnabled}),E,i=m.getProperty('/showEndUserFeedback');if(i){E=new sap.ushell.ui.footerbar.EndUserFeedback("EndUserFeedbackBtn",{showAnonymous:this.oEndUserFeedbackConfiguration.showAnonymous,showLegalAgreement:this.oEndUserFeedbackConfiguration.showLegalAgreement,showCustomUIContent:this.oEndUserFeedbackConfiguration.showCustomUIContent,feedbackDialogTitle:this.oEndUserFeedbackConfiguration.feedbackDialogTitle,textAreaPlaceholder:this.oEndUserFeedbackConfiguration.textAreaPlaceholder,customUIContent:this.oEndUserFeedbackConfiguration.customUIContent});}if(m.getProperty("/enableHelp")){f.addStyleClass('help-id-loginDetails');l.addStyleClass('help-id-logoutBtn');g.addStyleClass('help-id-aboutBtn');if(i){E.addStyleClass('help-id-EndUserFeedbackBtn');}h.addStyleClass('help-id-contactSupportBtn');}var F=new sap.ui.model.Filter('','EQ','a');F.fnTest=function(B){var j=m.getProperty("/currentState/actions"),s,k;for(k=0;k<j.length;k++){s=j[k];if(s.toUpperCase()==B){return!!sap.ui.getCore().byId(s);}}};A=new sap.m.ActionSheet("headActions",{placement:sap.m.PlacementType.Bottom,buttons:{path:"/currentState/actions",filters:[F],factory:function(I,j){return sap.ui.getCore().byId(j.getObject());}}});A.updateAggregation=this.getView().updateShellAggregation;A.setModel(m);this.getView().aDanglingControls.push(A,f,l,g,h);if(i){this.getView().aDanglingControls.push(E);}A.attachAfterClose(A,function(){if(!sap.ui.Device.system.desktop){m.setProperty("/currentState/headerHiding",o);}});}A.openBy(e.getSource());},_setUserPrefModel:function(){var e=m.getProperty("/userPreferences/entries");var D=this._getUserPrefDefaultModel();D.entries=D.entries.concat(e);m.setProperty("/userPreferences",D);},_getUserPrefDefaultModel:function(){var t=this;var o=sap.ushell.Container.getUser();var l=o.getLanguage();var s=window.location.host;var e=sap.ushell.resources.i18n.getText("languageFld");var f=sap.ushell.resources.i18n.getText("serverFld");jQuery.sap.require('sap.ushell.renderers.fiori2.search.userpref.SearchPrefs');var S=sap.ushell.renderers.fiori2.search.userpref.SearchPrefs;var g=S.getEntry();g.isSearchPrefsActive().done(function(k){if(!k){return;}t.addUserPreferencesEntry(g);});function T(){this.view=null;this.getView=function(){if(!this.view||!sap.ui.getCore().byId('userPrefThemeSelector')){this.view=sap.ui.jsview("userPrefThemeSelector","sap.ushell.renderers.fiori2.theme_selector.ThemeSelector");}return this.view;};var k=function(){var w=this.getView().getController().onSave();w.done(function(){if(m.getProperty("/tilesOpacity")===true){sap.ushell.utils.handleTilesOpacity();}});return w;}.bind(this);var p=function(){return this.getView().getController().onCancel();}.bind(this);var q=function(){return this.getView().getController().getContent();}.bind(this);var r=function(){return this.getView().getController().getValue();}.bind(this);var v;if(m.getProperty("/setTheme")!==undefined){v=m.getProperty("/setTheme")&&o.isSetThemePermitted();}else{v=o.isSetThemePermitted();}return{entryHelpID:"themes",title:sap.ushell.resources.i18n.getText("theme"),editable:v,valueArgument:r,valueResult:null,onSave:k,onCancel:p,contentFunc:q,contentResult:null};}var h=new T();function i(){this.view=null;this.getView=function(){if(!this.view||!sap.ui.getCore().byId('userPrefCompactCozySelector')){this.view=sap.ui.jsview("userPrefCompactCozySelector","sap.ushell.renderers.fiori2.compactCozy_selector.CompactCozySelector");}return this.view;};var k=function(){return this.getView().getController().onSave();}.bind(this);var p=function(){return this.getView().getController().onCancel();}.bind(this);var q=function(){return this.getView().getController().getContent();}.bind(this);var r=function(){return this.getView().getController().getValue();}.bind(this);return{entryHelpID:"contentDensity",title:sap.ushell.resources.i18n.getText("displayDensity"),editable:true,valueArgument:r,valueResult:null,onSave:k,onCancel:p,contentFunc:q,contentResult:null};}function D(){this.view=null;this.getView=function(){if(!this.view||!sap.ui.getCore().byId('defaultParametersSelector')){this.view=sap.ui.jsview("defaultParametersSelector","sap.ushell.renderers.fiori2.defaultParameters_selector.DefaultParameters");}return this.view;};var k=function(){return this.getView().getController().onSave();}.bind(this);var p=function(){return this.getView().getController().onCancel();}.bind(this);var q=function(){return this.getView().getController().getContent();}.bind(this);var r=function(){return this.getView().getController().getValue();}.bind(this);return{title:sap.ushell.resources.i18n.getText("userDefaults"),editable:true,visible:false,valueArgument:r,valueResult:null,onSave:k,onCancel:p,contentFunc:q,contentResult:null};}var j=[{entryHelpID:"serverName",title:f,editable:false,valueArgument:s,valueResult:null},{entryHelpID:"language",title:e,editable:false,valueArgument:l,valueResult:null},h];if(sap.ui.Device.system.combi&&m.getProperty("/contentDensity")){j.push(new i());}if(m.getProperty("/userDefaultParameters")){j.push(new D());}return{dialogTitle:sap.ushell.resources.i18n.getText("userPreferences"),isDetailedEntryMode:false,activeEntryPath:null,entries:j};},getModel:function(){return m;}});}());};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.compactCozy_selector.CompactCozySelector.view')){jQuery.sap.declare('sap.ushell.renderers.fiori2.compactCozy_selector.CompactCozySelector.view');(function(){"use strict";sap.ui.jsview("sap.ushell.renderers.fiori2.compactCozy_selector.CompactCozySelector",{createContent:function(c){var C=this._getCompactCozyListItemTemplate();this.translationBundle=sap.ushell.resources.i18n;this.oList=new sap.m.List('compactCozySelectorList',{includeItemInSelection:true,mode:"SingleSelectLeft",items:{path:"/options",template:C}});this.info=new sap.m.Text({text:this.translationBundle.getText("displayDensityInfo")}).addStyleClass("sapUiSmallMargin");return[this.oList,this.info];},getControllerName:function(){return"sap.ushell.renderers.fiori2.compactCozy_selector.CompactCozySelector";},_getCompactCozyListItemTemplate:function(){var t=this;var o=function(e){var i=e.srcControl;t.oController.setCurrentContentDensity(i.getBindingContext().getProperty("id"));};var i=new sap.m.StandardListItem({title:"{name}",selected:"{isSelected}"});i.addEventDelegate({onclick:o});return i;}});}());};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.defaultParameters_selector.DefaultParameters.view')){jQuery.sap.declare('sap.ushell.renderers.fiori2.defaultParameters_selector.DefaultParameters.view');(function(){"use strict";jQuery.sap.require('sap.ui.comp.smartform.SmartForm');jQuery.sap.require('sap.ui.comp.smartfield.SmartField');sap.ui.jsview("sap.ushell.renderers.fiori2.defaultParameters_selector.DefaultParameters",{createContent:function(c){},getControllerName:function(){return"sap.ushell.renderers.fiori2.defaultParameters_selector.DefaultParameters";}});}());};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchFacet')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchFacet');(function(){"use strict";jQuery.sap.require('sap.m.List');sap.m.List.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacet',{metadata:{properties:{eshRole:{type:"string",defaultValue:"datasource"}}},constructor:function(i,o){var t=this;o=jQuery.extend({},{mode:sap.m.ListMode.SingleSelectMaster,showSeparators:sap.m.ListSeparators.None,includeItemInSelection:true,selectionChange:function(e){if(this.getEshRole()==="attribute"){this.handleItemPress(e);}},itemPress:function(e){if(this.getEshRole()==="datasource"){this.handleItemPress(e);}}},o);sap.m.List.prototype.constructor.apply(this,[i,o]);this.addStyleClass('sapUshellSearchFacet');this.addEventDelegate({onAfterRendering:function(){if(t.getEshRole()==="datasource"){jQuery(t.getDomRef()).append("<hr>");}}});},handleItemPress:function(e){var l=e.mParameters.listItem;var s=l.getBindingContext().getObject();if(l.getSelected()){this.getModel().addFilterCondition(s);}else{this.getModel().removeFilterCondition(s);}},renderer:'sap.m.ListRenderer',setEshRole:function(r){var i={path:"items",template:new sap.ushell.renderers.fiori2.search.controls.SearchFacetItem(),groupHeaderFactory:function(g){return new sap.m.GroupHeaderListItem({title:g.key,upperCase:false});}};switch(r.toLowerCase()){default:case"datasource":this.setMode(sap.m.ListMode.SingleSelectMaster);this.setHeaderText(sap.ushell.resources.i18n.getText("searchIn"));break;case"attribute":this.setMode(sap.m.ListMode.MultiSelect);this.setHeaderText("");i.sorter=new sap.ui.model.Sorter("facetTitle",false,true);break;}this.bindAggregation("items",i);this.setProperty("eshRole",r);return this;}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchInput')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchInput');(function(){"use strict";jQuery.sap.require('sap.m.Input');var s=sap.ushell.renderers.fiori2.search.SearchHelper;var S=sap.ushell.renderers.fiori2.search.suggestions.SuggestionTypes;sap.m.Input.extend('sap.ushell.renderers.fiori2.search.controls.SearchInput',{constructor:function(i,o){var t=this;o=jQuery.extend({},{showValueStateMessage:false,showTableSuggestionValueHelp:false,showSuggestion:true,filterSuggests:false,suggestionColumns:[new sap.m.Column({})],placeholder:{path:'/searchTermPlaceholder',mode:sap.ui.model.BindingMode.OneWay}},o);sap.m.Input.prototype.constructor.apply(this,[i,o]);this.addEventDelegate({onsapenter:function(e){if(t.getValue()!==''){t.triggerSearch(e);}}});this.bindAggregation("suggestionRows","/suggestions",function(i,c){return t.suggestionItemFactory(i,c);});this.addStyleClass('searchInput');this._bUseDialog=false;this._bFullScreen=false;},renderer:'sap.m.InputRenderer',fireChange:function(e){sap.m.Input.prototype.fireChange.apply(this,arguments);if(sap.ui.Device.system.phone){this.triggerSearch(e);}},triggerSearch:function(e){var t=this;this.changeTimer=window.setTimeout(function(){t.changeTimer=null;s.subscribeOnlyOnce('triggerSearch','allSearchFinished',function(){t.getModel().autoStartApp();},t);t.getModel().setSearchBoxTerm(t.getValue(),false);t.navigateToSearchApp();t.destroySuggestionRows();t.getModel().abortSuggestions();},100);},fireLiveChange:function(){sap.m.Input.prototype.fireLiveChange.apply(this,arguments);var a=this.getValue();var m=this.getModel();m.setSearchBoxTerm(a,false);if(m.getSearchBoxTerm().length>0&&!sap.ui.Device.system.phone){m.doSuggestion();}else{this.destroySuggestionRows();m.abortSuggestions();}},fireSuggestionItemSelected:function(e){sap.m.Input.prototype.fireSuggestionItemSelected.apply(this,arguments);if(this.changeTimer){window.clearTimeout(this.changeTimer);this.changeTimer=null;}this.doHandleSuggestionItemSelected(e);},doHandleSuggestionItemSelected:function(e){var m=this.getModel();var a=m.getSearchBoxTerm();var b=e.selectedRow.getBindingContext().getObject();var c=b.labelRaw;var d=b.dataSource;var t=b.url;var f=b.type;switch(f){case S.SUGGESTION_TYPE_APPS:m.analytics.logCustomEvent('FLP: Search','Suggestion Select App',[b.title,t,a]);m.analytics.logCustomEvent('FLP: Application Launch point','Search Suggestions',[b.title,t,a]);if(t[0]==='#'){window.location.href=t;}else{window.open(t,'_blank');}break;case S.SUGGESTION_TYPE_DATASOURCE:m.analytics.logCustomEvent('FLP: Search','Suggestion Select Datasource',[d.key,a]);m.setDataSource(d,false);m.setSearchBoxTerm('',false);this.focus();break;case S.SUGGESTION_TYPE_OBJECT_DATA:m.analytics.logCustomEvent('FLP: Search','Suggestion Select Object Data',[c,d.key,a]);m.setDataSource(d,false);m.setSearchBoxTerm(c,false);this.navigateToSearchApp();this.setValue(c);break;case S.SUGGESTION_TYPE_HISTORY:m.analytics.logCustomEvent('FLP: Search','Suggestion Select History',[c,d.key,a]);m.setDataSource(d,false);m.setSearchBoxTerm(c,false);this.navigateToSearchApp();this.setValue(c);break;default:break;}},suggestionItemFactory:function(i,c){var a=new sap.m.Label({text:{path:"icon",formatter:function(v){if(v){return"<i>"+sap.ushell.resources.i18n.getText("label_app")+"</i>";}return"";}}}).addStyleClass('suggestText').addStyleClass('suggestNavItem');a.addEventDelegate({onAfterRendering:function(){s.boldTagUnescaper(this.getDomRef());}},a);var b=new sap.ui.core.Icon({src:"{icon}"}).addStyleClass('suggestIcon').addStyleClass('sapUshellSearchSuggestAppIcon');var l=new sap.m.Label({text:"{label}"}).addStyleClass('suggestText').addStyleClass('suggestNavItem');l.addEventDelegate({onAfterRendering:function(){s.boldTagUnescaper(this.getDomRef());}},l);var d=new sap.m.CustomListItem({type:sap.m.ListType.Active,content:[a,b,l]});var e=c.oModel.getProperty(c.sPath);d.getText=function(){return e.labelRaw?e.labelRaw:'';};var f=new sap.m.ColumnListItem({cells:[d],type:"Active"});if(e.type===S.SUGGESTION_TYPE_APPS){f.addStyleClass('searchAppSuggestion');}if(e.type===S.SUGGESTION_TYPE_DATASOURCE){f.addStyleClass('searchDataSourceSuggestion');}if(e.type===S.SUGGESTION_TYPE_OBJECT_DATA){f.addStyleClass('searchBOSuggestion');}if(e.type===S.SUGGESTION_TYPE_HISTORY){f.addStyleClass('searchHistorySuggestion');}f.addStyleClass('searchSuggestion');return f;},navigateToSearchApp:function(){if(this.getModel().getProperty('/searchBoxTerm')===""){return;}if(window.location.hash.indexOf('#Action-search')===0){this.getModel()._searchFireQuery();}else{var h=this.getModel().createSearchURL();window.location.hash=h;}}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchResultListItem')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchResultListItem');(function(){"use strict";var S=sap.ushell.renderers.fiori2.search.controls.SearchText;var a=sap.ushell.renderers.fiori2.search.controls.SearchLink;var b=sap.ushell.renderers.fiori2.search.SearchHelper;var c=sap.ushell.renderers.fiori2.search.SearchLogger;var e=sap.ushell.renderers.fiori2.search.controls.SearchRelatedObjectsToolbar;var n='\u2013';sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListItem",{metadata:{properties:{title:"string",titleUrl:"string",type:"string",imageUrl:"string",previewButton:"string",data:"object"}},renderer:function(r,C){C._resetPrecalculatedValues();C._renderOuterContainer(r);},_renderOuterContainer:function(r){var t=this;r.write("<div");r.writeControlData(t);if(t.status==="open"||t.getData().selected===true){r.addClass("sapUshellSearchResultListItem-open");}r.addClass("sapUshellSearchResultListItem-content");r.writeClasses();r.write(">");t._renderIntermediateContainer(r);t._renderExpandButton(r);r.write("</div>");},_renderIntermediateContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-main">');t._renderInnerContainer(r);r.write("</div>");},_renderInnerContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-titleContainer">');t._renderImageForPhone(r);t._renderTitle(r);r.write('</div>');var i=t.getData().itemattributes;t._renderAllAttributes(r,i);},_renderTitle:function(r){var t=this;var d=t._titleUrl;t.title=new a({href:d,press:function(){var N=new c.NavigationEvent();N.addUserHistoryEntry(d);var m=sap.ushell.renderers.fiori2.search.getModelSingleton();m.analytics.logCustomEvent('FLP: Search','Launch Object',[d]);}});t.title.setText(t.getTitle());t.title.setTooltip((sap.ushell.resources.i18n.getText('linkTo_tooltip')+' '+t.getTitle()).replace(/<b>/gi,'').replace(/<\/b>/gi,''));t.title.addStyleClass("sapUshellSearchResultListItem-title");r.renderControl(t.title);var f=new S();f.setText(t.getType());f.setTooltip((''+t.getType()).replace(/<b>/gi,'').replace(/<\/b>/gi,''));f.addStyleClass("sapUshellSearchResultListItem-type");r.renderControl(f);},_renderImage:function(r){var t=this;if(t.getImageUrl()){r.write('<div class="sapUshellSearchResultListItem-attribute sapUshellSearchResultListItem-imageDesktop-outerContainer">');r.write('<div class="sapUshellSearchResultListItem-imageDesktop-innerContainer">');r.write('<div class="sapUshellSearchResultListItem-imageDesktop-alignmentHelper">');r.write('</div>');r.write('<img class="sapUshellSearchResultListItem-imageDesktop" src="');r.write(t.getImageUrl());r.write('">');r.write('</div>');r.write('</div>');}},_renderImageForPhone:function(r){var t=this;if(t.getImageUrl()){r.write('<div class="sapUshellSearchResultListItem-imagePhone-container">');r.write('<img class="sapUshellSearchResultListItem-imagePhone" src="');r.write(t.getImageUrl());r.write('">');r.write('</div>');}},_renderAllAttributes:function(r,i){var t=this;var p=0;r.write('<div class="sapUshellSearchResultListItem-attributes">');r.write('<div class="sapUshellSearchResultListItem-visibleAttributes">');p=t._renderSummaryAttributes(r,i,p);t._renderImage(r);r.write("</div>");p=t._renderDetailAttributes(r,i,p);r.write("</div>");return p;},_renderSummaryAttributes:function(r,i,p){var t=this;var s=[];var v=t._getNumberOfVisibleAttributes();for(;p<i.length&&p<v;p++){s.push(i[p]);}t._renderAttributes(r,s);return p;},_renderDetailAttributes:function(r,i,p){var t=this;var d;if(t._isPhoneSize()){return p;}var l,v;var f=8;var g=[];var h=p+f;for(;p<h&&p<i.length;p++){var j=i[p];l=j.name;v=j.value;if(l===undefined||v===undefined){continue;}if(!v||v===""){v=n;}d={name:l,value:v};g.push(d);}if(g.length>0){t._showExpandButton=true;}r.write('<div class="sapUshellSearchResultListItemDetails2"');if(t.status!=="open"){r.write(' style="height:0; overflow:hidden" ');}r.write('>');r.write('<div class="sapUshellSearchResultListItem-detailsAttributes">');t._renderAttributes(r,g);r.write('</div>');p=t._renderWhyFoundAttributes(r,i,p);t._renderRelatedObjectsToolbar(r);r.write('</div>');return p;},_renderWhyFoundAttributes:function(r,i,p){var t=this;var l,v;var w=[];var d;for(;p<i.length;p++){var f=i[p];if(!f.whyfound){continue;}l=f.name;v=f.value;if(l===undefined||v===undefined){continue;}if(!v||v===""){v=n;}d={name:l,value:v};w.push(d);}if(w.length>0){t._showExpandButton=true;r.write('<div class="sapUshellSearchResultListItem-whyFoundContainer">');t._renderAttributes(r,w);r.write("</div>");}return p;},_renderAttributes:function(r,d,l){l=l||d.length;for(var i=0;i<l;i++){var f=d[i];var g=f.name;var v=f.value;if(g===undefined||v===undefined){return;}if(!v||v===""){v=n;}r.write('<div class="sapUshellSearchResultListItem-attribute">');var h=new sap.m.Label();h.setText(g);h.setTooltip((''+g).replace(/<b>/gi,'').replace(/<\/b>/gi,''));h.addStyleClass("sapUshellSearchResultListItem-attribute-label");var j=new S();j.setText(v);j.setTooltip((''+v).replace(/<b>/gi,'').replace(/<\/b>/gi,''));j.addStyleClass("sapUshellSearchResultListItem-attribute-value");h.setLabelFor(j);r.renderControl(h);r.renderControl(j);r.write("</div>");}},_renderRelatedObjectsToolbar:function(r){var t=this;if(!t._intents||t._intents.length==0){return;}t._showExpandButton=true;var d=[];for(var i=0;i<t._intents.length;i++){var f=t._intents[i];d.push({label:f.text,href:f.externalHash,target:f.target});}t.relatedObjectActionsToolbar=new e({relatedObjects:d});t.relatedObjectActionsToolbar.addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar");r.renderControl(t.relatedObjectActionsToolbar);},_renderExpandButton:function(r){var t=this;var s=(t._showExpandButton&&t.getPreviewButton()!=="false");r.write('<div class="sapUshellSearchResultListItemButton">');r.write('<div class="sapUshellSearchResultListItemButtonContainer');if(!s){r.write(' sapUshellSearchResultListItemButtonContainer-hidden');}r.write('">');var i=sap.ui.core.IconPool.getIconURI("slim-arrow-down");t.button=new sap.m.Button({icon:i,type:sap.m.ButtonType.Transparent,tooltip:sap.ushell.resources.i18n.getText("showDetailBtn_tooltip"),press:function(){t.toggleDetails();}});r.renderControl(t.button);r.write('</div>');r.write('</div>');},_getDetailsArea:function(){if(!this._detailsArea){var d=$(this.getDomRef()).find('.sapUshellSearchResultListItemDetails2');if(d&&d.length===1){this._detailsArea=d;}}return this._detailsArea;},isShowingDetails:function(){var i=false;var d=this._getDetailsArea();if(d){i=d.css('display')!=="none";}return i;},showDetails:function(d){var t=this;if(t.isShowingDetails()){return;}var f=t._getDetailsArea();if(f){var g=function(){var i=sap.ui.core.IconPool.getIconURI("slim-arrow-up");t.button.setTooltip(sap.ushell.resources.i18n.getText("hideDetailBtn_tooltip"));t.button.setIcon(i);t.button.rerender();};d=typeof d==='undefined'?true:d;if(d){f.slideDown({start:function(){if(t.relatedObjectActionsToolbar){t.relatedObjectActionsToolbar._layoutToolbarElements();}},duration:"fast",complete:g});}else{f.css("display","");g();if(t.relatedObjectActionsToolbar){t.relatedObjectActionsToolbar._layoutToolbarElements();}}}},hideDetails:function(d){var t=this;if(!t.isShowingDetails()){return;}var f=t._getDetailsArea();if(f){var g=function(){var i=sap.ui.core.IconPool.getIconURI("slim-arrow-down");t.button.setTooltip(sap.ushell.resources.i18n.getText("showDetailBtn_tooltip"));t.button.setIcon(i);t.button.rerender();};d=typeof d==='undefined'?true:d;if(d){f.slideUp("fast",g);}else{f.css("display","none");g();}}},toggleDetails:function(d){if(this.isShowingDetails()){this.hideDetails(d);}else{this.showDetails(d);}},onAfterRendering:function(){var t=this;var p=767;var w=$(window).width();if(w<=p){var d=t._titleUrl;if(d&&d.length>0){d=encodeURI(d);$(t.getDomRef()).find(".sapUshellSearchResultListItem-left").bind('click',t.fireNavigate(d));}}t.forwardEllipsis($(t.getDomRef()).find(".sapUshellSearchResultListItem-title, .sapUshellSearchResultListItem-attribute-value, .sapUshellSearchResultListItem-type"));var f=$(t.getDomRef()).find('.sapUshellSearchResultListItemDetails2');f.css("display","none");f.css("height","auto");f.css("overflow","visible");},_isDesktopSize:function(){if(!(this._isTabletSize()||this._isPhoneSize())){return true;}return false;},_isTabletSize:function(){var w=$(window).width();if(w<=1150&&!this._isPhoneSize()){return true;}return false;},_isPhoneSize:function(){var w=$(window).width();if(w<=767){return true;}return false;},_getNumberOfVisibleAttributes:function(){var t=this;if(!t._visibleAttributes){var v=4;if(!t._isDesktopSize()){v=3;}if(!t._isPhoneSize()&&t.getImageUrl()){v--;}t._visibleAttributes=v;}return t._visibleAttributes;},_resetPrecalculatedValues:function(){this._visibleAttributes=undefined;this._detailsArea=undefined;this._showExpandButton=false;this._titleUrl=this.getTitleUrl();this._intents=this.getData().intents;},fireNavigate:function(u){return function(){if(u){window.location.href=u;}};},forwardEllipsis:function(o){o.each(function(i,d){b.forwardEllipsis4Whyfound(d);});}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchTilesContainer')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchTilesContainer');(function(){"use strict";jQuery.sap.require('sap.m.Button');var K=sap.ushell.renderers.fiori2.search.controls.SearchTilesContainerKeyHandler;var T=sap.ushell.renderers.fiori2.search.controls.SearchTileHighlighter;sap.ui.core.Control.extend('sap.ushell.renderers.fiori2.search.controls.SearchTilesContainer',{metadata:{properties:{'totalLength':{type:'int',defaultValue:0},'maxRows':{type:'int',defaultValue:1},'highlightTerms':{type:'string',defaultValue:''},'enableKeyHandler':{type:'boolean',defaultValue:true}},aggregations:{'tiles':{type:'sap.ui.core.Control',multiple:true}},events:{showMore:{}}},constructor:function(){sap.ui.core.Control.prototype.constructor.apply(this,arguments);if(this.getEnableKeyHandler()){this.addEventDelegate(new K(this));}this.tileHighlighter=new T();},setHighlightTerms:function(t){this.setProperty('highlightTerms',t,true);},delayedRerender:function(){var t=this;setTimeout(function(){t.rerender();},0);},renderer:function(r,c){var t=c.getTiles();if(!t||t.length===0){return;}r.write('<div');r.writeControlData(c);r.addClass('sapUshellSearchTileContainer');r.writeClasses();r.write('>');c.renderTiles(r,c);r.write('</div>');},logUsageAnalytics:function(t){var c=t.getContent(),i,m;if(t.attachPress){t.attachPress(function(){m=sap.ushell.renderers.fiori2.search.getModelSingleton();m.analytics.logCustomEvent('FLP: Search','Launch App',[t.usageAnalyticsTitle,t.getTargetURL()]);m.analytics.logCustomEvent('FLP: Application Launch point','Search Results',[t.usageAnalyticsTitle,t.getTargetURL()]);});return;}if(c.length!==1){return;}i=c[0];if(!i.attachPress){return;}i.attachPress(function(){m=sap.ushell.renderers.fiori2.search.getModelSingleton();m.analytics.logCustomEvent('FLP: Search','Launch App',[t.usageAnalyticsTitle,i.getTargetURL()]);m.analytics.logCustomEvent('FLP: Application Launch point','Search Results',[t.usageAnalyticsTitle,i.getTargetURL()]);});},renderTiles:function(r,c){var t=c.getTiles();for(var i=0;i<t.length;i++){var a=t[i];c.logUsageAnalytics(a);c.registerAfterRenderingForTile(a);r.write('<div');r.addClass('sapUshellSearchTileWrapper');r.writeClasses();r.writeAttribute("title",sap.ushell.resources.i18n.getText("launchTile_tooltip"));r.writeAttribute("tabindex",0);r.write('>');r.renderControl(a);r.write('</div>');}c.renderPlusTile(r,c);c.tileHighlighter.setHighlightTerms(c.getHighlightTerms());},renderPlusTile:function(r,c){r.write('<div');r.addClass('sapUshellSearchTileWrapper');r.addClass('sapUshellSearchShowMoreTile');r.writeClasses();r.writeAttribute('style','display:none');r.writeAttribute("tabindex",0);r.write('>');var b=new sap.m.Button({text:sap.ushell.resources.i18n.getText('showMoreApps'),tooltip:sap.ushell.resources.i18n.getText('showMoreApps'),press:function(){c.fireShowMore();}});r.renderControl(b);r.write('</div>');},onAfterRendering:function(e){while(this.getNumberRows()>this.getMaxRows()){this.removeLastTile();}var c=this.getDomRef();var n=c.children.length-1;if(this.getTotalLength()>n){this.makePlusTileVisible();this.cutAtRow();}jQuery('.sapUshellSearchTileWrapper .sapUshellTileBase').attr('role','button');},registerAfterRenderingForTile:function(t){var a=this;t.addEventDelegate({onAfterRendering:function(){a.tileHighlighter.highlight(t);window.$(t.getDomRef()).find(".sapUshellTileBase, .sapUiCockpitReportTile").removeAttr("tabindex");}});},makePlusTileVisible:function(){var c=this.getDomRef();var p=c.children.item(c.children.length-1);p.style.display='inline-block';},removeLastTile:function(){var c=this.getDomRef();var l=c.children.item(c.children.length-2);l.parentNode.removeChild(l);},cutAtRow:function(){var c=this.getDomRef();while(!this.isLastRowCompletelyFilled()||this.getNumberRows()>this.getMaxRows()){if(c.children.length<=2){break;}this.removeLastTile();}},isLastRowCompletelyFilled:function(){var c=this.getDomRef();var t=this.getTilesPerRow();var a=-1;for(var i=0;i<t;++i){var b=c.children.item(c.children.length-1-i);if(b.style.display==='none'){t++;continue;}if(a<0){a=b.offsetLeft;continue;}if(b.offsetLeft>a){return false;}}return true;},getNumberRows:function(){var c=this.getDomRef();var t=-1;var a=0;for(var i=0;i<c.children.length-1;++i){var b=c.children.item(i);if(b.style.display==='none'){continue;}if(t<0||b.offsetLeft<=t){a++;}t=b.offsetLeft;}return a;},getTilesPerRow:function(){var c=this.getDomRef();var t=-1;var a=0;for(var i=0;i<c.children.length;++i){var b=c.children.item(i);if(b.style.display==='none'){continue;}if(b.offsetLeft<=t){return a;}a++;t=b.offsetLeft;}return a;}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.suggestions.AppSuggestionProvider')){(function(){"use strict";var S=sap.ushell.renderers.fiori2.search.SearchHelper;var a=sap.ushell.renderers.fiori2.search.suggestions.SuggestionProvider;var b=sap.ushell.renderers.fiori2.search.suggestions.SuggestionTypes;jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.AppSuggestionProvider');var m=sap.ushell.renderers.fiori2.search.suggestions.AppSuggestionProvider=function(){this.init.apply(this,arguments);};m.prototype=jQuery.extend(new a(),{init:function(p){a.prototype.init.apply(this,arguments);this.suggestApplications=S.refuseOutdatedRequests(this.suggestApplications);},abortSuggestions:function(){this.suggestApplications.abort();},getSuggestions:function(){var t=this;var d=t.model.getDataSource();if(!d.equals(t.model.allDataSource)&&!d.equals(t.model.appDataSource)){return jQuery.when([]);}var s=t.model.getProperty('/searchBoxTerm');return t.suggestApplications(s).then(function(r){var c=r.getElements();var e={};for(var i=0;i<c.length;i++){if(e[c[i].title]){if(!e[c[i].title].alreadyFound){var f="#Action-search&/searchterm="+c[i].title+"&datasource="+JSON.stringify(t.model.appDataSource);e[c[i].title].url=f;var g=sap.ushell.resources.i18n.getText("suggestion_in_apps",e[c[i].title].label);e[c[i].title].label=g;e[c[i].title].alreadyFound=true;var h=sap.ushell.resources.i18n.getText("suggestion_in_apps",c[i].title);e[h]=e[c[i].title];delete e[c[i].title];}}else{e[c[i].title]=c[i];}}c=[];for(var j in e){if(e.hasOwnProperty(j)){c.push(e[j]);}}return[c,r.totalResults];}).then(function(r){var c=r[0];var e=r[1];jQuery.each(c,function(i,j){j.type=b.SUGGESTION_TYPE_APPS;j.dataSource=t.model.appDataSource;j.position=b.apps.position;});var f;if(t.model.isBusinessObjSearchEnabled()&&t.model.isAllCategory()){f=b.apps.limitDsAll;}else{f=b.apps.limitDsApps;}c=c.slice(0,f);if(e>f){if(d.equals(t.model.appDataSource)||t.model.getProperty("/businessObjSearchEnabled")===false){var g=sap.ushell.resources.i18n.getText("showAllNApps",e);g=g.replace(/"/g,"");var h=g;var l="<i>"+g+"</i>";c.push({title:g,tooltip:h,label:l,dataSource:t.model.appDataSource,labelRaw:t.model.getProperty("/searchBoxTerm"),type:b.SUGGESTION_TYPE_OBJECT_DATA});}}return c;});},suggestApplications:function(s){return sap.ushell.Container.getService("Search").queryApplications({searchTerm:s,searchInKeywords:true});}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.suggestions.DataSourceSuggestionProvider')){(function(){"use strict";var S=sap.ushell.renderers.fiori2.search.SearchHelper;var a=sap.ushell.renderers.fiori2.search.suggestions.SuggestionProvider;var b=sap.ushell.renderers.fiori2.search.suggestions.SuggestionTypes;jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.DataSourceSuggestionProvider');var m=sap.ushell.renderers.fiori2.search.suggestions.DataSourceSuggestionProvider=function(){this.init.apply(this,arguments);};m.prototype=jQuery.extend(new a(),{init:function(p){a.prototype.init.apply(this,arguments);this.suggestDataSources=S.refuseOutdatedRequests(this.suggestDataSources);},abortSuggestions:function(){this.suggestDataSources.abort();},getSuggestions:function(){if(!this.model.isBusinessObjSearchEnabled()){return jQuery.when([]);}if(!this.model.getDataSource().equals(this.model.allDataSource)){return jQuery.when([]);}return this.suggestDataSources();},suggestDataSources:function(){var t=this;return t.model.getServerDataSources().then(function(d){if(jQuery.inArray(t.model.appDataSource,d)<0){d.unshift(t.model.appDataSource);}if(jQuery.inArray(t.model.allDataSource,d)<0){d.unshift(t.model.allDataSource);}var s=t.model.getProperty('/searchBoxTerm');var c=s.replace(/\*/g,'');var T=new S.Tester(c);var o;var e;var f=[];for(var i=0;i<d.length;++i){var g=d[i];if(g.equals(t.model.getDataSource())){continue;}o=T.test(g.label);if(o.bMatch===true){e={};e.label='<i>'+sap.ushell.resources.i18n.getText("searchInPlaceholder",o.sHighlightedText)+'</i>';e.labelRaw='';e.dataSource=g;e.type=b.SUGGESTION_TYPE_DATASOURCE;e.position=b.datasource.position;f.push(e);if(f.length===b.datasource.limit){break;}}}return f;});}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.suggestions.InABaseSuggestionProvider')){(function(){"use strict";var S=sap.ushell.renderers.fiori2.search.suggestions.SuggestionProvider;jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.InABaseSuggestionProvider');var m=sap.ushell.renderers.fiori2.search.suggestions.InABaseSuggestionProvider=function(){this.init.apply(this,arguments);};m.prototype=jQuery.extend(new S(),{init:function(){S.prototype.init.apply(this,arguments);},splitSuggestionTerm:function(t){var s=t.lastIndexOf(' ');if(s<0){return{searchTerm:null,suggestionTerm:t};}var a=t.slice(0,s);a=a.replace(/\s+$/,"");if(a.length===0){return{searchTerm:null,suggestionTerm:t};}var b=t.slice(s);b=b.replace(/^\s+/,"");if(b.length===0){return{searchTerm:null,suggestionTerm:t};}return{searchTerm:a,suggestionTerm:b};},escapeRegExp:function(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");},concatenateSearchTerm:function(s,a){var t=this;if(!a.searchTerm){return;}var b=jQuery.map(a.searchTerm.split(' '),function(f){f=f.trim();return{term:f,regExp:new RegExp(t.escapeRegExp(f),'i')};});for(var i=0;i<s.length;++i){var c=s[i];var n=[];for(var j=0;j<b.length;++j){var d=b[j];if(!d.regExp.test(c.labelRaw)){n.push(d.term);}}var p=n.join(' ');var e=jQuery.map(n,function(f){return'<b>'+f+'</b>';}).join(' ');c.label=e+' '+c.label;c.labelRaw=p+' '+c.labelRaw;}}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.userpref.SearchPrefs')){(function(){"use strict";var S=sap.ushell.renderers.fiori2.search.userpref.SearchPrefsModel;jQuery.sap.declare('sap.ushell.renderers.fiori2.search.userpref.SearchPrefs');var m=sap.ushell.renderers.fiori2.search.userpref.SearchPrefs={};jQuery.extend(m,{model:new S(),getEntry:function(){var t=this;return{title:sap.ushell.resources.i18n.getText('sp.userProfiling'),editable:true,isSearchPrefsActive:t.model.isSearchPrefsActive.bind(t.model),value:function(){t.model.reset();return t.model.asyncInit().then(function(){return t.model.getProperty('/sessionUserActive')?sap.ushell.resources.i18n.getText('sp.on'):sap.ushell.resources.i18n.getText('sp.off');});},onSave:function(){return t.model.savePreferences();},onCancel:function(){},content:function(){return t.model.asyncInit().then(function(){var u=sap.ui.view({id:'searchPrefsView',type:sap.ui.core.mvc.ViewType.JS,viewName:'sap.ushell.renderers.fiori2.search.userpref.SearchPrefsDialog'});u.setModel(t.model);return u;});}};}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.theme_selector.ThemeSelector.view')){jQuery.sap.declare('sap.ushell.renderers.fiori2.theme_selector.ThemeSelector.view');(function(){"use strict";sap.ui.jsview("sap.ushell.renderers.fiori2.theme_selector.ThemeSelector",{createContent:function(c){var t=this._getThemeListItemTemplate(),a=this,o=function(e){var i=e.getParameters().listItem;a.oController.setCurrentThemeId(i.getBindingContext().getProperty("id"));};this.oList=new sap.m.List('themeSelectorList',{includeItemInSelection:true,mode:"SingleSelectLeft",items:{path:"/options",template:t},selectionChange:o});return this.oList;},getControllerName:function(){return"sap.ushell.renderers.fiori2.theme_selector.ThemeSelector";},_getThemeListItemTemplate:function(){return new sap.m.StandardListItem({title:"{name}",selected:"{isSelected}"});}});}());};if(!jQuery.sap.isDeclared('sap.ushell.services.AppState')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.AppState");var S,a,W=50;sap.ushell.services.AppState=function(A,c,p,C){this._oConfig=C;this._sSessionKey="";this._oAdapter=new sap.ushell.services.AppState.SequentializingAdapter(A);this._oAdapter=new sap.ushell.services.AppState.WindowAdapter(this,this._oAdapter);};sap.ushell.services.AppState.prototype._getSessionKey=function(){if(!this._sSessionKey){this._sSessionKey=this._getGeneratedKey();}return this._sSessionKey;};sap.ushell.services.AppState.prototype.getAppState=function(k){var d=new jQuery.Deferred(),t=this,A;this._loadAppState(k).done(function(k,D){A=new sap.ushell.services.AppState.AppState(t,k,false,D);d.resolve(A);}).fail(function(m){A=new sap.ushell.services.AppState.AppState(t,k);d.resolve(A);});return d.promise();};sap.ushell.services.AppState.prototype._getGeneratedKey=function(){var s=sap.ushell.Container.getService("Personalization").getGeneratedKey();s=("AS"+s).substring(0,40);return s;};sap.ushell.services.AppState.prototype.createEmptyAppState=function(c){var k=this._getGeneratedKey(),A,s="",b="";if(c){if(!(c instanceof sap.ui.core.UIComponent)){throw new Error("oComponent passed must be a UI5 Component");}if(c.getMetadata&&c.getMetadata()&&typeof c.getMetadata().getName==="function"){s=c.getMetadata().getName()||"";}if(!s&&c.getMetadata&&c.getMetadata().getLibraryName){s=c.getMetadata().getLibraryName();}if(c.getMetadata&&c.getMetadata()&&typeof c.getMetadata().getManifest==="function"&&typeof c.getMetadata().getManifest()==="object"&&typeof c.getMetadata().getManifest()["sap.app"]==="object"){b=c.getMetadata().getManifest()["sap.app"].ach||"";}}A=new sap.ushell.services.AppState.AppState(this,k,true,undefined,s,b);return A;};sap.ushell.services.AppState.prototype.createEmptyUnmodifiableAppState=function(c){var k=this._getGeneratedKey(),A;A=new sap.ushell.services.AppState.AppState(this,k,false);return A;};a=function(){var d=new jQuery.Deferred();this._oServiceInstance._saveAppState(this._sKey,this._sData,this._sAppName,this._sACHComponent).done(function(){d.resolve();}).fail(function(m){d.reject(m);});return d.promise();};sap.ushell.services.AppState.AppState=function(s,k,m,d,A,b){this._oServiceInstance=s;this._sKey=k;this._sData=d;this._sAppName=A;this._sACHComponent=b;if(m){this.setData=function(D){try{this._sData=JSON.stringify(D);}catch(e){jQuery.sap.log.error("Data can not be serialized","sap.ushell.services.AppState.AppState");this._sData=undefined;}};this.save=a.bind(this);}};sap.ushell.services.AppState.AppState.prototype.getData=function(){var o;if(this._sData===undefined||this._sData===""){return undefined;}try{o=JSON.parse(this._sData);}catch(e){jQuery.sap.log.error("Could not parse ["+this._sData+"]"+e);}return o;};sap.ushell.services.AppState.AppState.prototype.getKey=function(){return this._sKey;};sap.ushell.services.AppState.prototype._saveAppState=function(k,d,A,c){var s=this._getSessionKey();return this._oAdapter.saveAppState(k,s,d,A,c);};sap.ushell.services.AppState.prototype._loadAppState=function(k){return this._oAdapter.loadAppState(k);};function L(c){this.index=-1;this.capacity=c;this.array=[];}L.prototype._clear=function(){this.array=[];this.index=-1;};L.prototype.addAsHead=function(k,v){this.index=(this.index+1)%this.capacity;this.array[this.index]={key:k,value:v};};L.prototype.getByKey=function(k){var i,e;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===k){return this.array[e];}}return undefined;};sap.ushell.services.AppState.WindowAdapter=function(s,b){this._oServiceInstance=s;this._oBackendAdapter=b;if(!sap.ushell.services.AppState.WindowAdapter.prototype.data){sap.ushell.services.AppState.WindowAdapter.prototype.data=new L(W);}};sap.ushell.services.AppState.WindowAdapter.prototype.saveAppState=function(k,s,d,A,c){this.sComponent=c;var D=new jQuery.Deferred();sap.ushell.services.AppState.WindowAdapter.prototype.data.addAsHead(k,d);if(this._oBackendAdapter){return this._oBackendAdapter.saveAppState(k,s,d,A,c);}D.resolve();return D.promise();};sap.ushell.services.AppState.WindowAdapter.prototype.loadAppState=function(k){var d=new jQuery.Deferred(),b=sap.ushell.services.AppState.WindowAdapter.prototype.data.getByKey(k);if(b){setTimeout(function(){d.resolve(k,b.value);},0);return d.promise();}if(this._oBackendAdapter){return this._oBackendAdapter.loadAppState(k);}d.reject("AppState.js loadAppState: Application State could not be loaded");return d.promise();};S=function(){this.oLastPromise=new jQuery.Deferred();this.oLastPromise.resolve();};S.prototype.addToQueue=function(f){var n=new jQuery.Deferred();this.oLastPromise.always(function(){var r=f();r.done(function(){n.resolve.apply(n,arguments);}).fail(function(){n.reject.apply(n,arguments);});});this.oLastPromise=n;return n.promise();};sap.ushell.services.AppState._getSequentializer=function(){return new S();};sap.ushell.services.AppState.SequentializingAdapter=function(u){this._oSequentializer=new S();this._oUnderlyingAdapter=u;};sap.ushell.services.AppState.SequentializingAdapter.prototype.saveAppState=function(k,s,d,A,c){var f;f=this._oUnderlyingAdapter.saveAppState.bind(this._oUnderlyingAdapter,k,s,d,A,c);return this._oSequentializer.addToQueue(f);};sap.ushell.services.AppState.SequentializingAdapter.prototype.loadAppState=function(k){return this._oUnderlyingAdapter.loadAppState(k);};}());};if(!jQuery.sap.isDeclared('sap.ushell.services.ClientSideTargetResolution')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.ClientSideTargetResolution");sap.ushell.services.ClientSideTargetResolution=function(a,c,p,S){var _=[],h,u;this._ensureTargetMappings=function(){var g=a.getInbounds;if(!g){g=a.getTMs;}if(!h){h=new jQuery.Deferred();g.call(a).done(function(t){_=t;h.resolve(_);}).fail(h.reject.bind(h));}return h.promise();};this._getURLParsing=function(){if(u){return u;}return sap.ushell.Container.getService("URLParsing");};this._addDefaultParameterValues=function(i,s,k,m,d){var I={},D={};Object.keys(i).forEach(function(P){if(P!=="sap-ushell-defaultedParameterNames"){I[P]=i[P];}});if(!s){return I;}Object.keys(s).forEach(function(P){var t=s[P],T,v=false;if(!I[P]&&t.hasOwnProperty("defaultValue")){if(t.defaultValue.format&&t.defaultValue.format==="reference"){T=t.defaultValue.value;if(k.hasOwnProperty(T)){if(typeof k[T]==="string"){I[P]=[k[T]];v=true;}}else{I[P]=[t.defaultValue];m.push(t.defaultValue.value);}}else{I[P]=[t.defaultValue.value];v=true;}if(v){D[P]=true;}}});Object.keys(D).forEach(function(P){d.push(P);});return I;};this._matchesFilter=function(v,f,k,m){var F;if(!f){return true;}if(!v&&v!==""){return false;}F=f.value;if(f.format==="reference"){if(k.hasOwnProperty(F)){return v===k[F];}m[F]=true;return true;}if(f.format==="value"||f.format==="plain"||f.format===undefined){return v===f.value;}else if(f.format==="regexp"){return!!v.match("^"+f.value+"$");}else{jQuery.sap.log.error("illegal oFilter format");return false;}};this._addSortString=function(m){function b(n){var s="000"+n;return s.substr(s.length-3);}m.priorityString=[m.genericSO?"g":"x","MTCH="+b(m.countMatchingParams),"MREQ="+b(m.countMatchingRequiredParams),"NFIL="+b(m.countMatchingFilterParams),"NDEF="+b(m.countDefaultedParams),"POT="+b(m.countPotentiallyMatchingParams),"RFRE="+b(999-m.countFreeTargetMappingParams)].join(" ");};this._checkAdditionalParameters=function(t,i){var A=false;if(t.signature.additionalParameters==="allowed"||t.signature.additionalParameters==="ignored"){return true;}if(t.signature.additionalParameters==="nomatch"||t.signature.additionalParameters===undefined){A=Object.keys(i).every(function(P){return(!t.signature.parameters[P]&&P.indexOf("sap-")!==0)?false:true;});}else{jQuery.sap.log.error("Unexpected value of target mapping for signature.additionalParameters");}return A;};this._addFoundParametersToUserDefaultRefs=function(U,m){U.forEach(function(r){m[r]=true;});};this._extractSapPriority=function(i,m){var s;if(i&&i["sap-priority"]&&i["sap-priority"][0]){s=parseInt(i["sap-priority"][0],10);if(!isNaN(s)){m["sap-priority"]=s;}}return;};this._matchToTargetMapping=function(i,t,k,m){function n(r,R,D){r.matches=false;r.noMatchReason=R;r.noMatchDebug=D;return r;}function M(r){r.matches=true;return r;}var b=this,o={targetMapping:t};o.genericSO=(t.semanticObject==="*");if(!(i.semanticObject===undefined||i.semanticObject===t.semanticObject||t.semanticObject==='*')){return n(o,"Semantic object did not match",t.semanticObject);}if(!(i.action===undefined||i.action===t.action||t.action==='*')){return n(o,"Action did not match","Intent:"+i.action+" TM:"+t.action);}if(t.deviceTypes&&!(i.formFactor===undefined||t.deviceTypes[i.formFactor])){return n(o,"Form factor did not match","Intent:"+i.formFactor+" TM:"+JSON.stringify(t.deviceTypes));}var U=[],d=[],I=i.params;var e=this._addDefaultParameterValues(I,t.signature&&t.signature.parameters,k,U,d);o.intentParamsPlusDefaults=e;o.defaultedParamNames=d;this._extractSapPriority(e,o);var f=0,g=0,j=0,l=0;var s=Object.keys(t.signature.parameters).every(function(P){var v=e[P],V=v&&v[0],q=t.signature.parameters[P],r=I.hasOwnProperty(P);if(q.required&&(V===null||V===undefined)){return false;}if(q.filter){if(!b._matchesFilter(V,q.filter,k,m)){return false;}if(r){++j;}}if(r&&q.required){++g;}if(r){++f;}if(!r&&(V===null||V===undefined)){++l;}return true;});o.countMatchingParams=f;o.countMatchingRequiredParams=g;o.countMatchingFilterParams=j;o.countDefaultedParams=d.length;o.countPotentiallyMatchingParams=Object.keys(i.params).length;o.countFreeTargetMappingParams=l;if(!s){return n(o,"Target mapping parameter signature did not match",this._compactSignatureNotation(t.signature));}if(!this._checkAdditionalParameters(t,e)){return n(o,"Additional parameters not allowed",this._compactSignatureNotation(t.signature));}if(t.signature.additionalParameters==="ignored"){this._filterObjectKeys(e,function(K){if(K.indexOf("sap-")===0){return true;}if(t.signature.parameters.hasOwnProperty(K)){return true;}return false;},true);o.countPotentiallyMatchingParams=Object.keys(i.params).filter(function(q){return t.signature.parameters.hasOwnProperty(q);}).length;}this._constructEffectiveResolutionResult(o,t);this._addSortString(o);this._addFoundParametersToUserDefaultRefs(U,m);return M(o);};this._filterObjectKeys=function(o,f,i){var O=i?o:jQuery.extend(true,{},o);Object.keys(O).forEach(function(k){if(f(k)===false){delete O[k];}});return O;};this._constructEffectiveResolutionResult=function(m,t){var U,r=t&&t.resolutionResult;m.resolutionResult={};if(t&&t.hasOwnProperty("hideIntentLink")){m.resolutionResult.hideIntentLink=t.hideIntentLink;}m.resolutionResult.requiresFallback=!!(!t||!r||(r.applicationType!=="URL"&&r.applicationType!=="SAPUI5")||r.additionalInformation.indexOf("SAPUI5.Component")===-1||(t.parameterMapping&&Object.keys(t.parameterMapping).length>0));if(!m.resolutionResult.requiresFallback){["applicationType","additionalInformation","url","applicationDependencies"].forEach(function(P){if(t.resolutionResult.hasOwnProperty(P)){m.resolutionResult[P]=t.resolutionResult[P];}});U=this._getURLParsing().paramsToString(m.intentParamsPlusDefaults);if(U){m.resolutionResult.url=t.resolutionResult.url+((t.resolutionResult.url.indexOf("?")<0)?"?":"&")+U;}if(typeof t.resolutionResult.ui5ComponentName!=="undefined"){m.resolutionResult.ui5ComponentName=t.resolutionResult.ui5ComponentName;}if(typeof t.resolutionResult.text!=="undefined"){m.resolutionResult.text=t.resolutionResult.text;}}};this.resolveHashFragment=function(H,f){var t=this,d=new jQuery.Deferred();this._ensureTargetMappings().done(function(){t._resolveHashFragment(H,f).done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(d.reject.bind(d));return d.promise();};this._resolveHashFragment=function(H,f){var U=this._getURLParsing(),d=new jQuery.Deferred(),F=H.indexOf("#")===0?H:"#"+H,s=U.parseShellHash(F);if(s===undefined){jQuery.sap.log.error("Could not parse shell hash '"+H+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return d.reject().promise();}var g=new jQuery.Deferred();s.formFactor=sap.ushell.utils.getFormFactor();this._getMatchingTargets(s,_).fail(function(e){jQuery.sap.log.error("Could not resolve "+H,"_getMatchingTargets promise rejected with: "+e,"sap.ushell.services.ClientSideTargetResolution");d.reject(e);}).done(function(m){if(m.length===0){jQuery.sap.log.warning("Could not resolve "+H,"rejecting promise","sap.ushell.services.ClientSideTargetResolution");d.reject("Could not resolve navigation target");return;}var M=m[0],r=M.resolutionResult;if(!r.requiresFallback){g.resolve(M,r);return;}if(typeof f!=="function"){jQuery.sap.log.error("Cannot resolve hash fragment",F+" has matched a target mapping that cannot be resolved client side and no fallback logic can be used","sap.ushell.services.ClientSideTargetResolution");d.reject("client side resolution without valid result");return;}jQuery.sap.log.warning("Cannot resolve hash fragment client side",F+" has matched a target mapping that cannot be resolved client side. Using fallback logic","sap.ushell.services.ClientSideTargetResolution");f(F,jQuery.extend(true,{},M.targetMapping),M.intentParamsPlusDefaults).done(g.resolve.bind(g,M)).fail(d.reject.bind(d));});g.done(function(m,r){if(r&&typeof r.url==="string"&&m.defaultedParamNames.length>0){var D=U.paramsToString({"sap-ushell-defaultedParameterNames":[JSON.stringify(m.defaultedParamNames)]});r.url+=(r.url.indexOf("?")<0?"?":"&")+D;}d.resolve(r);});return d.promise();};this.getSemanticObjectLinks=function(s,P,i){var t=this,d=new jQuery.Deferred();this._ensureTargetMappings().done(function(){t._getSemanticObjectLinks(s,P,i).done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(d.reject.bind(d));return d.promise();};this._getSemanticObjectLinks=function(s,P,i){if(typeof s!=="string"){jQuery.sap.log.error("invalid input for _getSemanticObjectLinks","the semantic object must be a string, got "+Object.prototype.toString.call(s)+" instead","sap.ushell.services.ClientSideTargetResolution");return new jQuery.Deferred().reject("invalid semantic object").promise();}if(s.match(/^\s+$/)){jQuery.sap.log.error("invalid input for _getSemanticObjectLinks","the semantic object must be a non-empty string, got '"+s+"' instead","sap.ushell.services.ClientSideTargetResolution");return new jQuery.Deferred().reject("invalid semantic object").promise();}if(s==="*"){return new jQuery.Deferred().resolve([]).promise();}function C(U,P){var b=U.paramsToString(P);return b?"?"+b:"";}var t=this,U=this._getURLParsing(),d=new jQuery.Deferred(),f=sap.ushell.utils.getFormFactor(),A=U.parseParameters(C(U,P)),o={semanticObject:(s===""?undefined:s),action:undefined,formFactor:(i?undefined:f),params:A};this._getMatchingTargets(o,_).done(function(m){var b={},r=m.map(function(M){var e=s||M.targetMapping.semanticObject,I="#"+e+"-"+M.targetMapping.action,n;if(e==="*"){return undefined;}if(M.resolutionResult.hideIntentLink===true){return undefined;}if(!b.hasOwnProperty(I)){b[I]=1;if(M.targetMapping.signature.additionalParameters==="ignored"){n=t._filterObjectKeys(A,function(g){return(g.indexOf("sap-")===0)||M.targetMapping.signature.parameters.hasOwnProperty(g);},false);}else{n=A;}return{"intent":I+C(U,n),"text":M.targetMapping.resolutionResult._original.text};}else{b[I]++;}return undefined;}).filter(function(e){return typeof e==="object";}).sort(function(g,G){return g.intent<G.intent?-1:1;});jQuery.sap.log.debug("_getSemanticObjectLinks filtered to unique intents.","Reporting histogram: "+JSON.stringify(b,null,"   "),"sap.ushell.services.ClientSideTargetResolution");d.resolve(r);}).fail(d.reject.bind(d));return d.promise();};this._serializeMatchingResult=function(m){var r=m.targetMapping.resolutionResult;return["applicationType","ui5ComponentName","url","additionalInformation","text"].map(function(k){return r.hasOwnProperty(k)?r[k]:"";}).join("");};this._resolveAllReferences=function(r){var t=this,d=new jQuery.Deferred(),U,R,A=true,b=r.map(function(s){var e=t._extractUserDefaultReferenceName(s);if(typeof e!=="string"){A=false;}return{full:s,name:e};});if(!A){return d.reject("Cannot determine value for all references "+r.join(", ")).promise();}U=sap.ushell.Container.getService("UserDefaultParameters");R=b.map(function(o){return U.getValue(o.name);});jQuery.when.apply(jQuery,R).done(function(){var k={},e=arguments,i=0;b.forEach(function(o){k[o.full]=e[i].value;++i;});d.resolve(k);});return d.promise();};this._getMatchingTargets=function(s,t){var b=this,d=new jQuery.Deferred(),r=new jQuery.Deferred(),R=new jQuery.Deferred();function w(f){if(jQuery.sap.log.getLevel()>=jQuery.sap.log.Level.INFO){f();}}setTimeout(function(){var m=[],M={},P=[],n={};jQuery.sap.log.debug("Matching intent to target mappings (first round)",JSON.stringify(s,null,"   "),"sap.ushell.services.ClientSideTargetResolution");t.forEach(function(T){var o=b._matchToTargetMapping(s,T,{},M);if(o.matches){m.push(o);P.push(T);}else{w(function(){if(!n[o.noMatchReason]){n[o.noMatchReason]=[];}n[o.noMatchReason].push("#"+(o.targetMapping||{}).semanticObject+"-"+(o.targetMapping||{}).action+"|"+o.noMatchDebug);});}});w(function(){Object.keys(n).forEach(function(e){jQuery.sap.log.debug(e+": "+n[e].join("; "),null,"sap.ushell.services.ClientSideTargetResolution");});});if(jQuery.isEmptyObject(M)){r.resolve(m);}else{b._resolveAllReferences(Object.keys(M)).done(function(o){R.resolve(o,P);}).fail(function(e){jQuery.sap.log.error("Failed to resolve all references",e,"sap.ushell.services.ClientSideTargetResolution");r.resolve([]);});}},0);R.done(function(k,P){jQuery.sap.log.debug("Matching intent to target mappings (rematch)","Known References:"+JSON.stringify(k,null,"   "),"sap.ushell.services.ClientSideTargetResolution");var e=[],m={};P.forEach(function(T){var M=b._matchToTargetMapping(s,T,k,m);if(M.matches){e.push(M);}});if(jQuery.isEmptyObject(m)){r.resolve(e);}else{jQuery.sap.log.error("Still obtained unknown references during rematch",JSON.stringify(m,null,"   "),"sap.ushell.services.ClientSideTargetResolution");d.reject("Rematching returned unknown references!");}});r.done(function(P){b._sortMatchingResultsDeterministic(P);w(function(){jQuery.sap.log.debug("Returning sorted results","\n"+P.map(function(m){return"#"+(m.targetMapping||{}).semanticObject+"-"+(m.targetMapping||{}).action+" "+(m["sap-priority"]||"")+" Priority: "+(m["sap-priority"]?"sap-priority : "+m["sap-priority"]:"")+m.priorityString+" Signature: "+b._compactSignatureNotation((m.targetMapping||{}).signature)+" Deterministic: "+b._serializeMatchingResult(m);}).join("\n")+"\nwith first Result being:"+JSON.stringify(P[0],null,"   "),"sap.ushell.services.ClientSideTargetResolution");});d.resolve(P);});return d.promise();};this._sortMatchingResultsDeterministic=function(m){var t=this;m.sort(function(M,o){if((M["sap-priority"]||0)-(o["sap-priority"]||0)!==0){return-((M["sap-priority"]||0)-(o["sap-priority"]||0));}if(M.priorityString<o.priorityString){return 1;}if(M.priorityString>o.priorityString){return-1;}return(t._serializeMatchingResult(M)<t._serializeMatchingResult(o))?1:-1;});};this._isIntentSupportedOne=function(i){var d=new jQuery.Deferred(),s=this._getURLParsing().parseShellHash(i);if(s===undefined){jQuery.sap.log.error("Could not parse shell hash '"+i+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return d.reject().promise();}s.formFactor=sap.ushell.utils.getFormFactor();this._getMatchingTargets(s,_).done(function(t){d.resolve(t.length>0);}).fail(function(){d.reject();});return d.promise();};this.isIntentSupported=function(i){var t=this,d=new jQuery.Deferred();this._ensureTargetMappings().done(function(){t._isIntentSupported(i).done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(d.reject.bind(d));return d.promise();};this._isIntentSupported=function(i){var t=this,d=new jQuery.Deferred(),s={};d.resolve();function b(I,e){s[I]={supported:e};}i.forEach(function(I){var n=t._isIntentSupportedOne(I);n.fail(function(e){b(I,false);});n.done(function(R){b(I,R);});d=jQuery.when(d,n);});var r=new jQuery.Deferred();d.done(function(){r.resolve(s);}).fail(function(){r.reject.bind(d);});return r.promise();};this._extractUserDefaultReferenceName=function(r){if(typeof r!=="string"||r.indexOf("UserDefault.")!==0){return undefined;}return r.replace(/^UserDefault[.]/,"");};this.getUserDefaultParameterNames=function(){var t=this,d=new jQuery.Deferred();this._ensureTargetMappings().done(function(T){try{d.resolve(t._getUserDefaultParameterNames());}catch(e){d.reject("Cannot get user default parameters from target mappings: "+e);}}).fail(d.reject.bind(d));return d.promise();};this._getUserDefaultParameterNames=function(){var U={},t=this;_.forEach(function(T){var s=T.signature&&T.signature.parameters||[];Object.keys(s).forEach(function(P){var o=s[P],b;if(o){if(o.filter&&o.filter.format==="reference"){b=o.filter.value;}else if(o.defaultValue&&o.defaultValue.format==="reference"){b=o.defaultValue.value;}if(typeof b==="string"){var r=t._extractUserDefaultReferenceName(b);if(typeof r==="string"){U[r]=1;}}}});});return Object.keys(U);};this._compactSignatureNotation=function(s){var f=s||{};var P=f.parameters||{},t={optional:"[FORMAT]",required:"FORMAT"},F={regexp:"/VALUE/",reference:"@VALUE",value:"VALUE",plain:"VALUE",_unknown:"?VALUE"},A={allowed:"<+>",nomatch:"<->",ignored:"<o>",_unknown:"<?>"};if(jQuery.isEmptyObject(P)){return"<no params>"+(A[f.additionalParameters||"_unknown"]);}var r=[];Object.keys(P).forEach(function(b){var o=P[b],d=o.required?"required":"optional",e=o.filter&&o.filter.value,g=o.defaultValue&&o.defaultValue.value,i=(o.filter&&o.filter.format)||"plain",j=(o.defaultValue&&o.defaultValue.format)||"plain";var v=[],k=F[i]||F._unknown,l=F[j]||F._unknown;if(e){v.push(t["required"].replace("FORMAT",k.replace("VALUE",e)));}if(g){v.push(t["optional"].replace("FORMAT",l.replace("VALUE",g)));}r.push(t[d].replace("FORMAT",b+":"+v.join("")));});return r.join(";")+(A[f.additionalParameters||"_unknown"]);};};sap.ushell.services.ClientSideTargetResolution.hasNoAdapter=false;}());};if(!jQuery.sap.isDeclared('sap.ushell.services.Personalization')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.Personalization");jQuery.sap.require('sap.ui.core.format.DateFormat');var c="sap.ushell.personalization#",I="ITEM#",v="VARIANTSET#",A="yyyyMMddHHmmss",d="ADMIN#",f="sap-ushell-container-scope",g="sap-ushell-container-storageUTCTimestamp",h="sap-ushell-container-expireUTCTimestamp";function j(C){return c+C;}sap.ushell.services.Personalization=function(a,C,p,b){this._oConfig=b;this._sSeed=jQuery.sap.getObject("config.seed",undefined,b)||"ABC";this._oAdapterWithBackendAdapter=new sap.ushell.services.Personalization.WindowAdapter(this,a);this._oAdapterWindowOnly=new sap.ushell.services.Personalization.WindowAdapter(this,undefined);this._supportsGetWithoutSubsequentLoad=(a&&a.supportsGetWithoutSubsequentLoad===true);this._oContainerMap=new sap.ushell.utils.Map();this._oPendingOperationsMap=new sap.ushell.utils.Map();};sap.ushell.services.Personalization.prototype.SAVE_DEFERRED_DROPPED="Deferred save dropped (OK) - Data superseeded by subsequent save";sap.ushell.services.Personalization.prototype.constants={keyCategory:{"FIXED_KEY":"FIXED_KEY","GENERATED_KEY":"GENERATED_KEY"},writeFrequency:{"HIGH":"HIGH","LOW":"LOW"}};sap.ushell.services.Personalization.prototype.getGeneratedKey=function(){var C="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",D=new Date().getTime().toString(),R="",s,a=0,i;while(this._sSeed.length<40){this._sSeed=this._sSeed+Math.random().toString().substring(2);}for(i=0;i<3;i=i+1){a=this._sSeed.charCodeAt(i)+31*a;a=a&a;R=R+C[Math.abs(a%36)];}s=Math.random().toString().substring(2)+D+Math.random().toString().substring(2)+D+"1234523413542345698772";for(i=0;i<37;i=i+1){a=this._sSeed.charCodeAt(i)+parseInt(s[i],10)+31*a;a=a&a;R=R+C[Math.abs(a%36)];}return R.substring(0,40);};sap.ushell.services.Personalization.prototype.getPersonalizer=function(p,s,C){return new sap.ushell.services.Personalizer(this,this._oAdapterWithBackendAdapter,p,s,C);};sap.ushell.services.Personalization.prototype.getTransientPersonalizer=function(){return new sap.ushell.services.TransientPersonalizer();};function k(e,p){var a;for(a in p){if(typeof p[a]!=='function'){if(p.hasOwnProperty(a)){if(a===e){return true;}}}}return false;}sap.ushell.utils.testPublishAt(sap.ushell.services.Personalization);function r(s){var C=sap.ushell.services.Personalization.prototype.constants,D={validity:Infinity,keyCategory:C.keyCategory.GENERATED_KEY,writeFrequency:C.writeFrequency.HIGH,clientStorageAllowed:false};if(!s){return D;}D.validity=s&&s.validity;if(D.validity===null||D.validity===undefined||typeof D.validity!=="number"){D.validity=Infinity;}if(!(typeof D.validity==="number"&&((D.validity>=0&&D.validity<1000)||D.validity===Infinity))){D.liftime=Infinity;}D.keyCategory=k(s.keyCategory,C.keyCategory)?s.keyCategory:D.keyCategory;D.writeFrequency=k(s.writeFrequency,C.writeFrequency)?s.writeFrequency:D.writeFrequency;if(typeof s.clientStorageAllowed==='boolean'&&(s.clientStorageAllowed===true||s.clientStorageAllowed===false)){D.clientStorageAllowed=s.clientStorageAllowed;}return D;}sap.ushell.utils.testPublishAt(sap.ushell.services.Personalization);function l(C,s,_,a){var p="",L,b;if(typeof C!=="string"){throw new sap.ushell.utils.Error("sContainerKey is not a string: sap.ushell.services.Personalization");}if(C.length>40){jQuery.sap.log.error("Personalization Service container key (\""+C+"\") should be less than 40 characters [current :"+C.length+"]");}s=r(s);p=j(C);L=window["sap-ushell-config"]&&window["sap-ushell-config"].services&&window["sap-ushell-config"].services.ShellNavigation&&window["sap-ushell-config"].services.ShellNavigation.config&&window["sap-ushell-config"].services.ShellNavigation.config.reload;b=_;if(s&&s.validity===0){if(L){s.validity=1440;}else{b=a;}}return{oAdapterForScope:b,oScope:s,sPrefixedContainerKey:p};}sap.ushell.services.Personalization.prototype.getContainer=function(C,s,a){return this._createContainer(C,s,false,a);};sap.ushell.services.Personalization.prototype.createEmptyContainer=function(C,s,a){return this._createContainer(C,s,true,a);};sap.ushell.services.Personalization.prototype._createContainer=function(C,s,b,a){var D=new jQuery.Deferred(),e,L,i;e=l(C,s,this._oAdapterWithBackendAdapter,this._oAdapterWindowOnly);i=new sap.ushell.services.Personalization.ContextContainer(this,e.oAdapterForScope,e.sPrefixedContainerKey,e.oScope,a);if(b&&this._supportsGetWithoutSubsequentLoad){L=new jQuery.Deferred();L.resolve(i);}else{L=i.load();}L.fail(function(){D.reject();}).done(function(){if(b||i._isExpired()){i.clear();}D.resolve(i);});return D.promise();};sap.ushell.services.Personalization.prototype.delContainer=function(C,s){var D={},p,P="",t=this;s=r(s);P=j(C);D=new jQuery.Deferred();p=t._pendingContainerOperations_cancelAddNext(C,null);p.always(function(){t.getContainer(C,s).fail(function(){t._pendingContainerOperations_cancelAddNext(C,D);D.reject();}).done(function(a){var b;t._pendingContainerOperations_cancelAddNext(C,D);if(s.validity===0){b=t._oAdapterWindowOnly;}else{b=t._oAdapterWithBackendAdapter;}b.delAdapterContainer(P,s).fail(function(){D.reject();}).done(function(){D.resolve();});});});return D.promise();};sap.ushell.services.Personalization.prototype._pendingContainerOperations_flushAddNext=function(C,D){var p,s;p=this._oPendingOperationsMap.get(C);if(!p){p=new jQuery.Deferred();p.resolve();}if(D!==null){this._oPendingOperationsMap.put(C,D);}if(!p||p.state()!=="pending"){return p;}clearTimeout(p._sapTimeoutId);p._sapTimeoutId=undefined;if(typeof p._sapFnSave==="function"){s=p._sapFnSave;p._sapFnSave=undefined;s();}return p;};sap.ushell.services.Personalization.prototype._pendingContainerOperations_cancelAddNext=function(C,D){var p;p=this._oPendingOperationsMap.get(C);if(!p){p=new jQuery.Deferred();p.resolve();}if(D!==null){this._oPendingOperationsMap.put(C,D);}if(!p||p.state()!=="pending"){return p;}if(p._sapTimeoutId){clearTimeout(p._sapTimeoutId);p._sapTimeoutId=undefined;p.resolve(sap.ushell.services.Personalization.prototype.SAVE_DEFERRED_DROPPED);}return p;};sap.ushell.services.Personalization.prototype.getPersonalizationContainer=function(C){var p="",P={},D={};if(typeof C!=="string"){throw new sap.ushell.utils.Error("sContainerKey is not a string: sap.ushell.services.Personalization");}p=j(C);if(this._oContainerMap.containsKey(p)){return this._oContainerMap.get(p).promise();}D=new jQuery.Deferred();P=new sap.ushell.services.PersonalizationContainer(this._oAdapterWithBackendAdapter,p);P.done(function(a){D.resolve(a);}).fail(function(a){D.reject(a);});this._oContainerMap.put(p,D);return D.promise();};sap.ushell.services.Personalization.prototype.delPersonalizationContainer=function(C){var D={},p="",t=this;p=j(C);D=new jQuery.Deferred();this.getPersonalizationContainer(C).fail(function(){D.reject();}).done(function(a){t._oAdapterWithBackendAdapter.delAdapterContainer(p).fail(function(){D.reject();}).done(function(){t._oContainerMap.remove(p);D.resolve();});});return D.promise();};sap.ushell.services.Personalizer=function(s,a,p,S,C){this._sPersContainer="";this._sPersItem="";this._sPersVariant=null;this._oAdapter=a;this._oService=s;this._oScope=S;this._oComponent=C;if(!p||!p.container||!p.item||typeof p.container!=="string"||typeof p.item!=="string"){throw new sap.ushell.utils.Error("Invalid input for oPersId: sap.ushell.services.Personalization");}this._sPersContainer=p.container;this._sPersItem=p.item;};sap.ushell.services.Personalizer.prototype._getContainer=function(p){if(!this._oGetContainerPromise){this._oGetContainerPromise=this._oService.getContainer(p,this._oScope,this._oComponent);}return this._oGetContainerPromise;};sap.ushell.services.Personalizer.prototype.getPersData=function(){var D={},t=this;D=new jQuery.Deferred();this._getContainer(this._sPersContainer).fail(function(){D.reject();}).done(function(C){D.resolve(C.getItemValue(t._sPersItem));});D.fail(function(){jQuery.sap.log.error("Fail to get Personalization data for Personalizer container: "+t._sPersContainer);});return D.promise();};sap.ushell.services.Personalizer.prototype.setPersData=function(V){var D={},t=this;D=new jQuery.Deferred();this._getContainer(this._sPersContainer).fail(function(){D.reject();}).done(function(C){C.setItemValue(t._sPersItem,V);C.save().fail(function(){D.reject();}).done(function(){D.resolve();});});D.fail(function(){jQuery.sap.log.error("Fail to set Personalization data for Personalizer container: "+t._sPersContainer);});return D.promise();};sap.ushell.services.Personalizer.prototype.delPersData=function(){var D={},t=this,M;D=new jQuery.Deferred();this._oService.getPersonalizationContainer(this._sPersContainer).fail(function(){D.reject();}).done(function(C){C.delItem(t._sPersItem);C.save().fail(function(){D.reject();}).done(function(){D.resolve();});});M=D.promise();M.fail(function(){jQuery.sap.log.error("Fail to delete Personalization data for Personalizer container: "+this._sPersContainer);});return M;};sap.ushell.services.TransientPersonalizer=function(){this._oValue=undefined;};sap.ushell.services.TransientPersonalizer.prototype.getPersData=function(){var D;D=new jQuery.Deferred();D.resolve(this._oValue);return D.promise();};sap.ushell.services.TransientPersonalizer.prototype.setPersData=function(V){var D;D=new jQuery.Deferred();this._oValue=V;D.resolve();return D.promise();};sap.ushell.services.TransientPersonalizer.prototype.delPersData=function(){var D;D=new jQuery.Deferred();this._oValue=undefined;D.resolve();return D.promise();};sap.ushell.services.TransientPersonalizer.prototype.setValue=function(V){this._oValue=V;};sap.ushell.services.TransientPersonalizer.prototype.getValue=function(){return this._oValue;};sap.ushell.services.PersonalizationContainer=function(a,C){this._sContainerKey=C;this._oAdapterContainer={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];var D={},t=this;this._init();D=new jQuery.Deferred();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new sap.ushell.utils.Error("Invalid container key: sap.ushell.services.Personalization");}this._oAdapterContainer=a.getAdapterContainer(this._sContainerKey);this.load().fail(function(){D.reject();}).done(function(){D.resolve(t);});return D.promise();};sap.ushell.services.PersonalizationContainer.prototype._init=function(){this._oVariantSetMap={};this._oItemMap={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];this._oVariantSetMap=new sap.ushell.utils.Map();this._oItemMap=new sap.ushell.utils.Map();};function m(O){if(O===undefined){return undefined;}try{return JSON.parse(JSON.stringify(O));}catch(e){return undefined;}}function n(O){if(O===undefined){return undefined;}try{return JSON.parse(O);}catch(e){return undefined;}}sap.ushell.services.PersonalizationContainer.prototype.load=function(){var D={},i=[],V=[],a=[],M=[],t=this;function b(a){var N=[],p=[];N=a.filter(function(s){return s.indexOf(I)!==0;});if(N.length===0){return a;}p=a.filter(function(s){return s.indexOf(I)===0;});N.forEach(function(s){var e={},P="";P=I+s;e=m(t._oAdapterContainer.getItemValue(s));t._oAdapterContainer.setItemValue(P,e);t._oAdapterContainer.delItem(s);if(jQuery.inArray(P,p)===-1){p.push(P);}});return p;}D=new jQuery.Deferred();if(!this._sContainerKey){throw new sap.ushell.utils.Error("Invalid container key: sap.ushell.services.Personalization");}this._init();this._oAdapterContainer.load().fail(function(){D.reject();}).done(function(){i=t._oAdapterContainer.getItemKeys().splice(0);V=i.filter(function(s){return s.indexOf(v)===0;});V.forEach(function(s){var e={};e=new sap.ushell.services.PersonalizationContainerVariantSet(s,t._oAdapterContainer);t._oVariantSetMap.put(s,e);});a=i.filter(function(s){return s.indexOf(v)!==0;});M=b(a);M.forEach(function(s){t._oItemMap.put(s,m(t._oAdapterContainer.getItemValue(s)));});t._aLoadedVariantSetKeys=t._oVariantSetMap.keys().splice(0);t._aLoadedItemKeys=t._oItemMap.keys().splice(0);D.resolve();});return D.promise();};sap.ushell.services.PersonalizationContainer.prototype.save=function(){var s,i;this._serializeVariantSets();this._serializeItems();s=new jQuery.Deferred();function S(){s.resolve();}function a(){s.reject();}try{i=this._oAdapterContainer.save();i.fail(a);i.done(S);}catch(e){s.reject();}return s.promise();};sap.ushell.services.PersonalizationContainer.prototype.getItemKeys=function(){return this._oItemMap.keys().map(function(e){return e.replace(I,"","");});};sap.ushell.services.PersonalizationContainer.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.get(I+i);};sap.ushell.services.PersonalizationContainer.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(I+i);};sap.ushell.services.PersonalizationContainer.prototype.setItemValue=function(i,a){if(typeof i!=="string"){throw new sap.ushell.utils.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization");}this._oItemMap.put(I+i,a);};sap.ushell.services.PersonalizationContainer.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}if(this.containsItem(i)){this._oItemMap.remove(I+i);}};sap.ushell.services.PersonalizationContainer.prototype._serializeItems=function(){var i=[],D=[],t=this;i=this._oItemMap.keys();i.forEach(function(s){t._oAdapterContainer.setItemValue(s,m(t._oItemMap.get(s)));});D=this._aLoadedItemKeys.filter(function(s){return!(i.indexOf(s)>-1);});D.forEach(function(s){t._oAdapterContainer.delItem(s);});};sap.ushell.services.PersonalizationContainer.prototype.getVariantSetKeys=function(){var V=[],p=[];p=this._oVariantSetMap.keys();V=p.map(function(e){return e.replace(v,"","");});return V;};sap.ushell.services.PersonalizationContainer.prototype.containsVariantSet=function(V){return this._oVariantSetMap.containsKey(v+V);};sap.ushell.services.PersonalizationContainer.prototype.getVariantSet=function(V){var p,a={};p=v+V;a=this._oVariantSetMap.get(p);return a;};sap.ushell.services.PersonalizationContainer.prototype.addVariantSet=function(V){var e={},a={},p="";if(this.containsVariantSet(V)){throw new sap.ushell.utils.Error("Container already contains a variant set with key '"+V+"': sap.ushell.services.Personalization");}p=v+V;e={currentVariant:null,variants:{}};this._oAdapterContainer.setItemValue(p,e);a=new sap.ushell.services.PersonalizationContainerVariantSet(p,this._oAdapterContainer);this._oVariantSetMap.put(p,a);return a;};sap.ushell.services.PersonalizationContainer.prototype._serializeVariantSets=function(){var V=[],D=[],t=this;V=this._oVariantSetMap.keys();V.forEach(function(s){var a={},b={};a=t._oVariantSetMap.get(s);b=a._serialize();t._oAdapterContainer.setItemValue(s,m(b));});D=this._aLoadedVariantSetKeys.filter(function(s){return!(V.indexOf(s)>-1);});D.forEach(function(s){t._oAdapterContainer.delItem(s);});};sap.ushell.services.PersonalizationContainer.prototype.delVariantSet=function(V){var p="";p=v+V;this._oVariantSetMap.remove(p);return this._oAdapterContainer.delItem(p);};sap.ushell.services.Personalization.ContextContainer=function(s,a,C,S,b){this._oService=s;this._sContainerKey=C;this._oAdapterContainer={};this._oScope=S||r(S);this._aLoadedKeys=[];this._oUnmodifiableContainer=undefined;var e;if(!(b instanceof sap.ui.core.UIComponent)&&b!==undefined){throw new Error("oComponent passed must be a UI5 Component or must be undefined");}if(b&&b.getMetadata&&b.getMetadata().getLibraryName){e=b.getMetadata().getLibraryName();}this.clear();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new sap.ushell.utils.Error("Invalid container key: sap.ushell.services.Personalization");}this._oAdapterContainer=a.getAdapterContainer(this._sContainerKey,this._oScope,e);return this;};sap.ushell.services.Personalization.ContextContainer.prototype.getValidity=function(){return this._oScope.validity;};sap.ushell.services.Personalization.ContextContainer.prototype.clear=function(){this._oItemMap={};this._aLoadedItemKeys=[];this._clear=true;this._oItemMap=new sap.ushell.utils.Map();};sap.ushell.services.Personalization.ContextContainer.prototype.load=function(){var D={},p,t=this;D=new jQuery.Deferred();if(!this._sContainerKey){throw new sap.ushell.utils.Error("Invalid container key: sap.ushell.services.Personalization");}this.clear();p=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,D);p.always(function(){t._oAdapterContainer.load().fail(function(){D.reject();}).done(function(){t._copyFromAdapter();if(t._isExpired()){t.clear();}D.resolve();});});return D.promise();};sap.ushell.services.Personalization.ContextContainer.prototype._copyFromAdapter=function(){var t=this,a;a=t._oAdapterContainer.getItemKeys().splice(0);a.forEach(function(i){t._oItemMap.put(i,JSON.stringify(t._oAdapterContainer.getItemValue(i)));});this._aLoadedItemKeys=t._oItemMap.keys().splice(0);};sap.ushell.services.Personalization.ContextContainer.prototype._isExpired=function(){var F,t,T;if(this.getValidity()===Infinity||this.getValidity()===0){return false;}t=this._getItemValueInternal(d,h);F=sap.ui.core.format.DateFormat.getDateInstance({pattern:A});T=F.format(this._getNow(),true);return t&&T>t;};sap.ushell.services.Personalization.ContextContainer.prototype._getNow=function(){return new Date();};sap.ushell.services.Personalization.ContextContainer.prototype._copyToAdapterUpdatingValidity=function(){var i=[],D=[],t=this,N,F,T,s;if(this._clear){i=this._oAdapterContainer.getItemKeys().splice(0);i.forEach(function(a){t._oAdapterContainer.delItem(a);});this._clear=false;}if(this.getValidity()===Infinity||this.getValidity()===0){this._delItemInternal(d,f);this._delItemInternal(d,h);this._delItemInternal(d,g);}else{F=sap.ui.core.format.DateFormat.getDateInstance({pattern:A});N=this._getNow();s=F.format(N,true);T=F.format(new Date(N.getTime()+this.getValidity()*60000),true);this._setItemValueInternal(d,f,this._oScope);this._setItemValueInternal(d,h,T);this._setItemValueInternal(d,g,s);}i=this._oItemMap.keys();i.forEach(function(a){t._oAdapterContainer.setItemValue(a,n(t._oItemMap.get(a)));});D=this._aLoadedItemKeys.filter(function(a){return!(i.indexOf(a)>-1);});D.forEach(function(a){t._oAdapterContainer.delItem(a);});};sap.ushell.services.Personalization.ContextContainer.prototype.save=function(){var s,p,t=this;this._copyToAdapterUpdatingValidity();s=new jQuery.Deferred();p=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,s);p.always(function(){try{t._oAdapterContainer.save().fail(function(){s.reject();}).done(function(){s.resolve();});}catch(e){s.reject();}});return s.promise();};sap.ushell.services.Personalization.ContextContainer.prototype.saveDeferred=function(a){var s,p,t=this;this._copyToAdapterUpdatingValidity();s=new jQuery.Deferred();p=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,s);function D(){p.always(function(){try{t._oAdapterContainer.save().fail(function(){s.reject();}).done(function(){s.resolve();});}catch(e){s.reject();}});}s._sapFnSave=D;s._sapTimeoutId=setTimeout(D,a);return s.promise();};sap.ushell.services.Personalization.ContextContainer.prototype.flush=function(){var s,p;this._copyToAdapterUpdatingValidity();s=new jQuery.Deferred();p=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,s);p.fail(function(){s.reject();}).done(function(){s.resolve();});return s.promise();};sap.ushell.services.Personalization.ContextContainer.prototype.getItemKeys=function(){var F=this._oItemMap.keys().filter(function(s){return s.indexOf(I)===0;});return F.map(function(e){return e.replace(I,"","");});};sap.ushell.services.Personalization.ContextContainer.prototype._getInternalKeys=function(){return this._oItemMap.keys().splice(0);};sap.ushell.services.Personalization.ContextContainer.prototype.getItemValue=function(i){return this._getItemValueInternal(I,i);};sap.ushell.services.Personalization.ContextContainer.prototype._getItemValueInternal=function(p,i){if(typeof i!=="string"||typeof p!=="string"){return undefined;}return n(this._oItemMap.get(p+i));};sap.ushell.services.Personalization.ContextContainer.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(I+i);};sap.ushell.services.Personalization.ContextContainer.prototype.setItemValue=function(i,a){this._setItemValueInternal(I,i,a);};sap.ushell.services.Personalization.ContextContainer.prototype._setItemValueInternal=function(i,s,a){if(typeof s!=="string"||typeof i!=="string"){throw new sap.ushell.utils.Error("Parameter value of sItemKey or sItemValue is not a string: sap.ushell.services.Personalization");}if(s.length>40){jQuery.sap.log.error("Personalization Service item key/variant set name (\""+s+"\") should be less than 40 characters [current :"+s.length+"]");}this._oItemMap.put(i+s,JSON.stringify(a));};sap.ushell.services.Personalization.ContextContainer.prototype.delItem=function(i){this._delItemInternal(I,i);};sap.ushell.services.Personalization.ContextContainer.prototype._delItemInternal=function(p,i){if(typeof i!=="string"){return undefined;}if(typeof p!=="string"){return undefined;}this._oItemMap.remove(p+i);};sap.ushell.services.Personalization.ContextContainer.prototype.getKey=function(){return this._sContainerKey.substring(c.length);};sap.ushell.services.Personalization.ContextContainer.prototype.getUnmodifiableContainer=function(){var t=this;if(!this._oUnmodifiableContainer){this._oUnmodifiableContainer=(function(){var u={};["clear","delItem","flush","load","save","saveDeferred","setItemValue"].forEach(function(F){u[F]=function(N){throw new sap.ushell.utils.Error("Function "+N+" can't be called on unmodifiable container","sap.ushell.services.Personalization.ContextContainer");}.bind(undefined,F);});["containsItem","getItemKeys","getItemValue","getUnmodifiableContainer","getValidity"].forEach(function(F){if(t[F]){u[F]=t[F].bind(t);}});return u;}());}return this._oUnmodifiableContainer;};sap.ushell.services.Personalization.VariantSetAdapter=function(C){this._oContextContainer=C;};sap.ushell.services.Personalization.VariantSetAdapter.prototype.save=function(){return this._oContextContainer.save();};sap.ushell.services.Personalization.VariantSetAdapter.prototype.getVariantSetKeys=function(){var p=this._oContextContainer._getInternalKeys(),V=[];V=p.map(function(e){return e.replace(v,"","");});return V;};sap.ushell.services.Personalization.VariantSetAdapter.prototype.containsVariantSet=function(V){return this.getVariantSetKeys().indexOf(V)>=0;};sap.ushell.services.Personalization.VariantSetAdapter.prototype.getVariantSet=function(V){var a=this._oContextContainer._getItemValueInternal(v,V);if(!a){return undefined;}return new sap.ushell.services.Personalization.VariantSet(V,this._oContextContainer);};sap.ushell.services.Personalization.VariantSetAdapter.prototype.addVariantSet=function(V){var e={},a={};if(this.containsVariantSet(V)){throw new sap.ushell.utils.Error("Container already contains a variant set with key '"+V+"': sap.ushell.services.Personalization");}e={currentVariant:null,variants:{}};this._oContextContainer._setItemValueInternal(v,V,e);a=new sap.ushell.services.Personalization.VariantSet(V,this._oContextContainer);return a;};sap.ushell.services.Personalization.VariantSetAdapter.prototype.delVariantSet=function(V){this._oContextContainer._delItemInternal(v,V);};sap.ushell.services.Personalization.VariantSet=function(V,C){var s,a,b=new sap.ushell.utils.Map(),e=new sap.ushell.utils.Map(),i,p;this._oContextContainer=C;this._sVariantSetKey=V;this._oVariantSetData=this._oContextContainer._getItemValueInternal(v,this._sVariantSetKey);if(!Object.prototype.hasOwnProperty.call(this._oVariantSetData,"currentVariant")){throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization");}if(Object.prototype.hasOwnProperty.call(this._oVariantSetData,"variants")){for(s in this._oVariantSetData.variants){if(Object.prototype.hasOwnProperty.call(this._oVariantSetData.variants,s)){a=this._oVariantSetData.variants[s].name;i=this._oVariantSetData.variants[s].variantData;if(b.containsKey(a)){throw new sap.ushell.utils.Error("Variant name already exists: sap.ushell.services.Personalization");}else{b.put(a,s);p=new sap.ushell.services.PersonalizationContainerVariant(s,a,i);e.put(s,p);}}}}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization");}return this;};sap.ushell.services.Personalization.VariantSet.prototype._getVariantSet=function(){return this._oVariantSetData;};sap.ushell.services.Personalization.VariantSet.prototype._serialize=function(){this._oContextContainer._setItemValueInternal(v,this._sVariantSetKey,this._oVariantSetData);};sap.ushell.services.Personalization.VariantSet.prototype.getCurrentVariantKey=function(){return this._getVariantSet().currentVariant;};sap.ushell.services.Personalization.VariantSet.prototype.setCurrentVariantKey=function(V){this._getVariantSet().currentVariant=V;this._serialize();};sap.ushell.services.Personalization.VariantSet.prototype.getVariantKeys=function(){var V=new sap.ushell.utils.Map(),a=this._getVariantSet(this._sVariantSetKey),s;if(Object.prototype.hasOwnProperty.call(a,"variants")){for(s in a.variants){if(Object.prototype.hasOwnProperty.call(a.variants,s)){V.put(s,"dummy");}}}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization");}return V.keys();};sap.ushell.services.Personalization.VariantSet.prototype.getVariantNamesAndKeys=function(){var V=new sap.ushell.utils.Map(),a=new sap.ushell.utils.Map(),b=this._getVariantSet(this._sVariantSetKey),s,e;if(Object.prototype.hasOwnProperty.call(b,"variants")){for(s in b.variants){if(Object.prototype.hasOwnProperty.call(b.variants,s)){e=b.variants[s].name;if(V.containsKey(e)){throw new sap.ushell.utils.Error("Variant name already exists: sap.ushell.services.Personalization");}else{V.put(e,s);}a.put(s,"dummy");}}}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization");}return V.entries;};sap.ushell.services.Personalization.VariantSet.prototype.getVariant=function(V){if(typeof V!=="string"){return undefined;}var a=this._getVariantSet(this._sVariantSetKey),s,b,e;if(Object.prototype.hasOwnProperty.call(a,"variants")&&Object.prototype.hasOwnProperty.call(a.variants,V)){s=a.variants[V].name;e=a.variants[V].variantData;b=new sap.ushell.services.Personalization.Variant(this,V,s,e);return b;}return undefined;};sap.ushell.services.Personalization.VariantSet.prototype.getVariantKeyByName=function(V){if(typeof V!=="string"){return undefined;}var a=this._getVariantSet(this._sVariantSetKey),s;if(Object.prototype.hasOwnProperty.call(a,"variants")){for(s in a.variants){if(Object.prototype.hasOwnProperty.call(a.variants,s)){if(V===a.variants[s].name){return s;}}}}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization");}return undefined;};sap.ushell.services.Personalization.VariantSet.prototype.containsVariant=function(V){var a=this._getVariantSet();if(typeof V!=="string"){return undefined;}return Object.prototype.hasOwnProperty.call(a,"variants")&&Object.prototype.hasOwnProperty.call(a.variants,V);};sap.ushell.services.Personalization.VariantSet.prototype.addVariant=function(V){var K=[],M=0,s="",e={};K=this.getVariantKeys();M=parseInt(K.sort(function(a,b){return a-b;}).reverse()[0],10);s=isNaN(M)?"0":(M+1).toString();if(K.indexOf(s)>=0){throw new sap.ushell.utils.Error("Variant key '"+s+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization");}if(typeof V!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization");}if(this.getVariantKeyByName(V)!==undefined){throw new sap.ushell.utils.Error("Variant name '"+V+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this.getVariantKeyByName(V)+"' New key: '"+s+"') ': sap.ushell.services.Personalization");}e=new sap.ushell.services.Personalization.Variant(this,s,V);this._getVariantSet(this._sVariantSetKey).variants[s]={name:V,variantData:{}};this._serialize();return e;};sap.ushell.services.Personalization.VariantSet.prototype.delVariant=function(V){var a;if(typeof V!=="string"){return undefined;}a=this._getVariantSet();if(a&&a.variants){delete this._oVariantSetData.variants[V];}this._serialize();};sap.ushell.services.PersonalizationContainerVariantSet=function(V,a){var b,s,e,i,p;this._sVariantSetKey=V;this._oAdapterContainer=a;this._oVariantNameMap=new sap.ushell.utils.Map();this._oVariantMap=new sap.ushell.utils.Map();b=m(this._oAdapterContainer.getItemValue(V));if(b.hasOwnProperty("currentVariant")){this._sCurrentVariantKey=b.currentVariant;}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization");}if(b.hasOwnProperty("variants")){for(s in b.variants){if(b.variants.hasOwnProperty(s)){e=b.variants[s].name;i=b.variants[s].variantData;if(this._oVariantNameMap.containsKey(e)){throw new sap.ushell.utils.Error("Variant name already exists: sap.ushell.services.Personalization");}else{this._oVariantNameMap.put(e,s);p=new sap.ushell.services.PersonalizationContainerVariant(s,e,i);this._oVariantMap.put(s,p);}}}}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization");}return this;};sap.ushell.services.PersonalizationContainerVariantSet.prototype.getCurrentVariantKey=function(){return this._sCurrentVariantKey;};sap.ushell.services.PersonalizationContainerVariantSet.prototype.setCurrentVariantKey=function(V){this._sCurrentVariantKey=V;};sap.ushell.services.PersonalizationContainerVariantSet.prototype.getVariantKeys=function(){return this._oVariantMap.keys();};sap.ushell.services.PersonalizationContainerVariantSet.prototype.getVariantNamesAndKeys=function(){return JSON.parse(JSON.stringify(this._oVariantNameMap.entries));};sap.ushell.services.PersonalizationContainerVariantSet.prototype.getVariant=function(V){if(typeof V!=="string"){return undefined;}return this._oVariantMap.get(V);};sap.ushell.services.PersonalizationContainerVariantSet.prototype.getVariantKeyByName=function(V){if(typeof V!=="string"){return undefined;}return this._oVariantNameMap.get(V);};sap.ushell.services.PersonalizationContainerVariantSet.prototype.containsVariant=function(V){if(typeof V!=="string"){return undefined;}return this._oVariantMap.containsKey(V);};sap.ushell.services.PersonalizationContainerVariantSet.prototype.addVariant=function(V){var M=0,s="",e={};M=parseInt(this._oVariantMap.keys().sort(function(a,b){return a-b;}).reverse()[0],10);s=isNaN(M)?"0":(M+1).toString();if(this._oVariantMap.containsKey(s)){throw new sap.ushell.utils.Error("Variant key '"+s+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization");}if(typeof V!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization");}if(this._oVariantNameMap.containsKey(V)){throw new sap.ushell.utils.Error("Variant name '"+V+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this._oVariantNameMap.get(V)+"' New key: '"+s+"') ': sap.ushell.services.Personalization");}e=new sap.ushell.services.PersonalizationContainerVariant(s,V);this._oVariantMap.put(s,e);this._oVariantNameMap.put(V,s);return e;};sap.ushell.services.PersonalizationContainerVariantSet.prototype._serialize=function(){var V=[],a={},b={},t=this;a.currentVariant=this._sCurrentVariantKey;V=this.getVariantKeys();V.forEach(function(s){var e={};e=t._oVariantMap.get(s);b[s]=e._serialize();});a.variants=b;return a;};sap.ushell.services.PersonalizationContainerVariantSet.prototype.delVariant=function(V){var a=this._oVariantMap.get(V);if(a){this._oVariantNameMap.remove(a.getVariantName());this._oVariantMap.remove(V);}};sap.ushell.services.Personalization.Variant=function(V,s,a){if(typeof s!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization");}if(typeof a!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization");}this._oVariantSet=V;this._sVariantKey=s;this._sVariantName=a;};sap.ushell.services.Personalization.Variant.prototype.getVariantKey=function(){return this._sVariantKey;};sap.ushell.services.Personalization.Variant.prototype.getVariantName=function(){return this._sVariantName;};sap.ushell.services.Personalization.Variant.prototype.setVariantName=function(V){var a=this._oVariantSet._getVariantSet(),b;if(typeof V!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization");}if(this._oVariantSet.getVariantKeyByName(V)!==undefined){throw new sap.ushell.utils.Error("Variant with name '"+V+"' already exists in variant set '"+this._oVariantSet._sVariantSetKey+"': sap.ushell.services.Personalization");}if(Object.prototype.hasOwnProperty.call(a,"variants")&&Object.prototype.hasOwnProperty.call(a.variants,this._sVariantKey)){b=a.variants[this._sVariantKey];b.name=V;this._sVariantName=V;this._oVariantSet._serialize();}else{throw new sap.ushell.utils.Error("Variant does not longer exist");}};sap.ushell.services.Personalization.Variant.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}var a=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(a,i)&&m(a[i]);};sap.ushell.services.Personalization.Variant.prototype.setItemValue=function(i,a){if(typeof i!=="string"){throw new sap.ushell.utils.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization");}var b,e=this._oVariantSet._getVariantSet().variants&&this._oVariantSet._getVariantSet().variants[this._sVariantKey];if(!e){throw new sap.ushell.utils.Error("Variant does not longer exist");}if(!e.variantData){e.variantData={};}b=e.variantData;b[i]=m(a);this._oVariantSet._serialize();};sap.ushell.services.Personalization.Variant.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}var a=this.oAccess.variantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(a,i);};sap.ushell.services.Personalization.Variant.prototype.getItemKeys=function(){var a=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData,i,b=[];for(i in a){if(Object.prototype.hasOwnProperty.call(a,i)){b.push(i);}}b.sort();return b;};sap.ushell.services.Personalization.Variant.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}var a=this.oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;delete a[i];this.oVariantSet._serialize();};sap.ushell.services.PersonalizationContainerVariant=function(V,s,a){if(typeof V!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization");}if(typeof s!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization");}if(a&&typeof a!=="object"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization");}this._oVariantKey=V;this._oVariantName=s;this._oItemMap=new sap.ushell.utils.Map();this._oItemMap.entries=a||{};};sap.ushell.services.PersonalizationContainerVariant.prototype.getVariantKey=function(){return this._oVariantKey;};sap.ushell.services.PersonalizationContainerVariant.prototype.getVariantName=function(){return this._oVariantName;};sap.ushell.services.PersonalizationContainerVariant.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.get(i);};sap.ushell.services.PersonalizationContainerVariant.prototype.setItemValue=function(i,a){if(typeof i!=="string"){throw new sap.ushell.utils.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization");}return this._oItemMap.put(i,a);};sap.ushell.services.PersonalizationContainerVariant.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(i);};sap.ushell.services.PersonalizationContainerVariant.prototype.getItemKeys=function(){return this._oItemMap.keys();};sap.ushell.services.PersonalizationContainerVariant.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.remove(i);};sap.ushell.services.PersonalizationContainerVariant.prototype._serialize=function(){var i=[],V={},a={},t=this;V.name=this.getVariantName();i=this._oItemMap.keys();i.forEach(function(s){a[s]=t.getItemValue(s);});V.variantData=a;return V;};sap.ushell.services.Personalization.WindowAdapter=function(s,b){this._oBackendAdapter=b;if(!sap.ushell.services.Personalization.WindowAdapter.prototype.data){sap.ushell.services.Personalization.WindowAdapter.prototype.data={};}};sap.ushell.services.Personalization.WindowAdapter.prototype.getAdapterContainer=function(C,s,a){var b=this._oBackendAdapter&&this._oBackendAdapter.getAdapterContainer(C,s,a);return new sap.ushell.services.Personalization.WindowAdapterContainer(C,s,b);};sap.ushell.services.Personalization.WindowAdapter.prototype.delAdapterContainer=function(C,s){var D=new jQuery.Deferred();delete sap.ushell.services.Personalization.WindowAdapter.prototype.data[C];if(this._oBackendAdapter){this._oBackendAdapter.delAdapterContainer(C,s).done(function(){D.resolve();}).fail(function(M){D.reject(M);});}else{D.resolve();}return D.promise();};sap.ushell.services.Personalization.WindowAdapterContainer=function(C,s,b){this._oBackendContainer=b;this._oItemMap=new sap.ushell.utils.Map();this._sContainerKey=C;};function o(C){var i,a=C.getItemKeys();for(i=0;i<a.length;i=i+1){C.delItem(a[i]);}}sap.ushell.services.Personalization.WindowAdapterContainer.prototype.load=function(){var D=new jQuery.Deferred(),i,a,t=this;if(sap.ushell.services.Personalization.WindowAdapter.prototype.data[this._sContainerKey]){this._oItemMap.entries=m(sap.ushell.services.Personalization.WindowAdapter.prototype.data[this._sContainerKey]);if(this._oBackendContainer){o(this._oBackendContainer);a=this.getItemKeys();for(i=0;i<a.length;i=i+1){this._oBackendContainer.setItemValue(a[i],this._oItemMap.get(a[i]));}}D.resolve();}else{if(this._oBackendContainer){this._oBackendContainer.load().done(function(){a=t._oBackendContainer.getItemKeys();for(i=0;i<a.length;i=i+1){t.setItemValue(a[i],t._oBackendContainer.getItemValue(a[i]));}sap.ushell.services.Personalization.WindowAdapter.prototype.data[t._sContainerKey]=m(t._oItemMap.entries);D.resolve();}).fail(function(M){D.reject(M);});}else{sap.ushell.services.Personalization.WindowAdapter.prototype.data[this._sContainerKey]={};D.resolve();}}return D.promise();};sap.ushell.services.Personalization.WindowAdapterContainer.prototype.save=function(){var D=new jQuery.Deferred();sap.ushell.services.Personalization.WindowAdapter.prototype.data[this._sContainerKey]=m(this._oItemMap.entries);if(this._oBackendContainer){this._oBackendContainer.save().done(function(){D.resolve();}).fail(function(M){D.reject(M);});}else{D.resolve();}return D.promise();};sap.ushell.services.Personalization.WindowAdapterContainer.prototype.getItemKeys=function(){return this._oItemMap.keys();};sap.ushell.services.Personalization.WindowAdapterContainer.prototype.containsItem=function(i){this._oItemMap.containsKey(i);};sap.ushell.services.Personalization.WindowAdapterContainer.prototype.getItemValue=function(i){return this._oItemMap.get(i);};sap.ushell.services.Personalization.WindowAdapterContainer.prototype.setItemValue=function(i,a){this._oItemMap.put(i,a);if(this._oBackendContainer){this._oBackendContainer.setItemValue(i,a);}};sap.ushell.services.Personalization.WindowAdapterContainer.prototype.delItem=function(i){this._oItemMap.remove(i);if(this._oBackendContainer){this._oBackendContainer.delItem(i);}};}());};if(!jQuery.sap.isDeclared('sap.ushell.services.UserRecents')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.UserRecents");function R(m,e,c,l,s){var r=[],u=function(I,t){return r.some(function(o){var f;if(e(o.oItem,I)){o.oItem=I;o.iTimestamp=t;o.iCount=o.iCount+1;f=true;}else{f=false;}return f;});},i=function(I,t){var n={oItem:I,iTimestamp:t,iCount:1};if(r.length===m){r.sort(c);r.pop();}r.push(n);};this.newItem=function(I){var t=+new Date(),A;l().done(function(L){r=L||[];A=u(I,t);if(!A){i(I,t);}s(r);});};this.getRecentItems=function(){var d=new jQuery.Deferred();l().done(function(L){L=L||[];L.sort(c);r=L.slice(0,m);d.resolve(jQuery.map(r,function(o){return o.oItem;}));});return d.promise();};}function a(l,s){var A,t=this,m=30;this.init=function(){var t=this,p,c=this.getDayFromDateObj(this.getCurrentDate()),d=false;if(t._oInitDeferred===undefined){t._oInitDeferred=jQuery.Deferred();}if(!d||c!==A.recentDay){d=true;p=l();p.done(function(b){A=b||{recentDay:null,recentAppsUsageMap:{}};t.calculateInitialUsage(c);t._oInitDeferred.resolve(A);});p.fail(function(){jQuery.sap.log.error("UShell-lib ; RecentAppsUsage ; Load data in Init failed");t._oInitDeferred.reject();});}return this._oInitDeferred.promise();};this.calculateInitialUsage=function(c){var t=this;if(c!=A.recentDay){this.addNewDay();A.recentDay=c;setTimeout(function(){t.cleanUnusedHashes();},3000);this.saveAppsUsage(A);}};this.addAppUsage=function(h){if(!sap.ushell.utils.validHash(h)){return jQuery.Deferred().reject("Non valid hash").promise();}var p=this.init();p.done(function(){var b=A.recentAppsUsageMap[h]||[];if(b.length==0){b[0]=1;}else{b[b.length-1]+=1;}A.recentAppsUsageMap[h]=b;t.saveAppsUsage(A);});p.fail(function(){jQuery.sap.log.error("Ushell-lib ; addAppUsage ; Initialization falied!");});return p;};this.getAppsUsage=function(){var r,p,t=this,d=jQuery.Deferred();p=t.init();p.done(function(){r=t.summarizeUsage();d.resolve(r);});p.fail(function(){d.reject("Not initialized yet");});return d.promise();};this.summarizeUsage=function(){var u={},h,b,c,f=true;for(h in A.recentAppsUsageMap){u[h]=this.getHashUsageSum(h);if(f){b=c=u[h];f=false;}else{if(u[h]<c){c=u[h];}else if(u[h]>b){b=u[h];}}}return{usageMap:u,maxUsage:b,minUsage:c};};this.addNewDay=function(){var h,b;for(h in A.recentAppsUsageMap){b=A.recentAppsUsageMap[h];b[b.length]=0;if(b.length>m){b=b.shift();}}};this.cleanUnusedHashes=function(){var u,h;for(h in A.recentAppsUsageMap){u=t.getHashUsageSum(h);if(u==0){delete(A.recentAppsUsageMap[h]);}}};this.getHashUsageSum=function(h){var b=0,d,c=A.recentAppsUsageMap[h],e=c.length;for(d=0;d<e;d++){b+=c[d];}return b;};this.saveAppsUsage=function(o){var p=s(o);p.fail(function(){jQuery.sap.log.error("Ushell-lib ; saveAppsUsage ; Save action failed");});p.done(function(d){});return p;};this.getCurrentDate=function(){return new Date();};this.getDayFromDateObj=function(d){return(d.getUTCFullYear()+"/"+(d.getUTCMonth()+1)+"/"+d.getUTCDate());};}sap.ushell.services.UserRecents=function(){var r,o,A,b,p,c,s,d,e,l,S,f="RecentApps",g="AppsUsage",h="RecentSearches",i="RecentDataSources",P="sap.ushell.services.UserRecents";this.noticeDataSource=function(D){if((D&&D.objectName&&D.objectName.value&&D.objectName.value.toLowerCase()==="$$all$$")||(D.objectName&&D.objectName.toLowerCase&&D.objectName.toLowerCase()==="$$all$$")){return;}b.newItem(D);return b.getRecentItems();};this.getRecentDataSources=function(){return b.getRecentItems();};this.noticeSearch=function(k){r.newItem(k);return r.getRecentItems();};this.getRecentSearches=function(){return r.getRecentItems();};this.noticeApp=function(k){o.newItem(k);return o.getRecentItems();};this.getRecentApps=function(){return o.getRecentItems();};this.initAppsUsage=function(){A.init(new Date());};this.addAppUsage=function(k){var m=sap.ushell.utils.getBasicHash(k);A.addAppUsage(m);};this.getAppsUsage=function(){return A.getAppsUsage();};p=sap.ushell.Container.getService("Personalization");try{c=p.getPersonalizer({container:P,item:f});s=p.getPersonalizer({container:P,item:h});d=p.getPersonalizer({container:P,item:i});e=p.getPersonalizer({container:P,item:g});}catch(j){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(j.name+": "+j.message);}l=function(k){var m,D;try{m=k.getPersData();}catch(j){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(j.name+": "+j.message);D=new jQuery.Deferred();D.reject(j);m=D.promise();}return m;};S=function(k,L){var m;try{m=k.setPersData(L);}catch(j){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(j.name+": "+j.message);}return m;};r=new R(10,function(x,y){var k=false;if(x.oDataSource&&y.oDataSource){if(x.oDataSource.objectName&&y.oDataSource.objectName){k=((x.sTerm===y.sTerm)&&(x.oDataSource.objectName.value===y.oDataSource.objectName.value));}if(!x.oDataSource.objectName&&!y.oDataSource.objectName){k=(x.sTerm===y.sTerm);}}if(!x.oDataSource&&!y.oDataSource){k=(x.sTerm===y.sTerm);}return k;},function(x,y){return y.iTimestamp-x.iTimestamp;},l.bind(this,s),S.bind(this,s));b=new R(6,function(x,y){if(x.objectName&&y.objectName){return x.objectName.value===y.objectName.value;}return false;},function(x,y){return y.iTimestamp-x.iTimestamp;},l.bind(this,d),S.bind(this,d));o=new R(6,function(x,y){return x.semanticObject===y.semanticObject&&x.action===y.action;},function(x,y){return y.iTimestamp-x.iTimestamp;},l.bind(this,c),S.bind(this,c));A=new a(l.bind(this,e),S.bind(this,e));};sap.ushell.services.UserRecents.hasNoAdapter=true;}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.ContactSupportButton')){jQuery.sap.declare("sap.ushell.ui.footerbar.ContactSupportButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.ContactSupportButton",{metadata:{library:"sap.ushell"}});(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.ContactSupportButton");sap.ushell.ui.footerbar.ContactSupportButton.prototype.init=function(){this.setIcon('sap-icon://email');this.setWidth('100%');this.setText(sap.ushell.resources.i18n.getText("contactSupportBtn"));this.setTooltip(sap.ushell.resources.i18n.getText("contactSupportBtn_tooltip"));this.attachPress(this.showContactSupportDialog);this.setEnabled();};sap.ushell.ui.footerbar.ContactSupportButton.prototype.showContactSupportDialog=function(){jQuery.sap.require("sap.ushell.services.Container");jQuery.sap.require("sap.ui.layout.form.SimpleForm");jQuery.sap.require("sap.m.TextArea");jQuery.sap.require("sap.m.Link");jQuery.sap.require("sap.m.Label");jQuery.sap.require("sap.m.Text");jQuery.sap.require("sap.m.Dialog");jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.ushell.UserActivityLog");this.translationBundle=sap.ushell.resources.i18n;this.oClientContext=sap.ushell.UserActivityLog.getMessageInfo();this.oLink=new sap.m.Link({text:this.translationBundle.getText("technicalDataLink")});this.oBottomSimpleForm=new sap.ui.layout.form.SimpleForm("bottomForm",{editable:false,content:[this.oLink]});this.sendButton=new sap.m.Button("contactSupportSendBtn",{text:this.translationBundle.getText("sendBtn"),enabled:false,press:function(){var s=sap.ushell.Container.getService("SupportTicket"),t=this.oTextArea.getValue(),S={text:t,clientContext:this.oClientContext},p=s.createTicket(S);p.done(function(){sap.ushell.Container.getService("Message").info(this.translationBundle.getText("supportTicketCreationSuccess"));}.bind(this));p.fail(function(){sap.ushell.Container.getService("Message").error(this.translationBundle.getText("supportTicketCreationFailed"));}.bind(this));this.oDialog.close();}.bind(this)});this.cancelButton=new sap.m.Button("contactSupportCancelBtn",{text:this.translationBundle.getText("cancelBtn"),press:function(){this.oDialog.close();}.bind(this)});this.oTextArea=new sap.m.TextArea("textArea",{rows:7,liveChange:function(){if(/\S/.test(this.oTextArea.getValue())){this.sendButton.setEnabled(true);}else{this.sendButton.setEnabled(false);}}.bind(this)});this.oTopSimpleForm=new sap.ui.layout.form.SimpleForm("topForm",{editable:false,content:[this.oTextArea]});this.oDialog=new sap.m.Dialog({id:"ContactSupportDialog",title:this.translationBundle.getText("contactSupportBtn"),contentWidth:"29.6rem",leftButton:this.sendButton,rightButton:this.cancelButton,initialFocus:"textArea",afterOpen:function(){jQuery("#textArea").on("focusout",function(){window.scrollTo(0,0);});},afterClose:function(){this.oDialog.destroy();}.bind(this)}).addStyleClass("sapUshellContactSupportDialog");this.oTextArea.setPlaceholder(this.translationBundle.getText("txtAreaPlaceHolderHeader"));this.oLink.attachPress(this._embedLoginDetailsInBottomForm.bind(this));this.oDialog.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:this.translationBundle.getText("ContactSupportArialLabel"),writeToDom:true}));this.oDialog.addContent(this.oTopSimpleForm);this.oDialog.addContent(this.oBottomSimpleForm);this.oDialog.open();};sap.ushell.ui.footerbar.ContactSupportButton.prototype._embedLoginDetailsInBottomForm=function(){this.oDialog.removeContent(this.oBottomSimpleForm.getId());this.oBottomSimpleForm.destroy();var a="",u="",b="",B=[];if(this.oClientContext.navigationData.applicationInformation){a=this.oClientContext.navigationData.applicationInformation.applicationType;u=this.oClientContext.navigationData.applicationInformation.url;b=this.oClientContext.navigationData.applicationInformation.additionalInformation;}B.push(new sap.m.Text({text:this.translationBundle.getText("loginDetails")}).addStyleClass('sapUshellContactSupportHeaderInfoText'));B.push(new sap.m.Label({text:this.translationBundle.getText("userFld")}));B.push(new sap.m.Text({text:this.oClientContext.userDetails.fullName||''}));B.push(new sap.m.Label({text:this.translationBundle.getText("serverFld")}));B.push(new sap.m.Text({text:window.location.host}));if(this.oClientContext.userDetails.eMail&&this.oClientContext.userDetails.eMail!==''){B.push(new sap.m.Label({text:this.translationBundle.getText("eMailFld")}));B.push(new sap.m.Text({text:this.oClientContext.userDetails.eMail||''}));}B.push(new sap.m.Label({text:this.translationBundle.getText("languageFld")}));B.push(new sap.m.Text({text:this.oClientContext.userDetails.Language||''}));if(this.oClientContext.shellState==="app"||this.oClientContext.shellState==="standalone"){B.push(new sap.m.Text({text:''}));B.push(new sap.m.Text({text:this.translationBundle.getText("navigationDataFld")}).addStyleClass('sapUshellContactSupportHeaderInfoText'));B.push(new sap.m.Label({text:this.translationBundle.getText("hashFld")}));B.push(new sap.m.Text({text:this.oClientContext.navigationData.navigationHash||''}));B.push(new sap.m.Text({text:''}));B.push(new sap.m.Text({text:this.translationBundle.getText("applicationInformationFld")}).addStyleClass('sapUshellContactSupportHeaderInfoText'));B.push(new sap.m.Label({text:this.translationBundle.getText("applicationTypeFld")}));B.push(new sap.m.Text({text:a}));B.push(new sap.m.Label({text:this.translationBundle.getText("urlFld")}));B.push(new sap.m.Text({text:u}));B.push(new sap.m.Label({text:this.translationBundle.getText("additionalInfoFld")}));B.push(new sap.m.Text({text:b}));}this.oBottomSimpleForm=new sap.ui.layout.form.SimpleForm('technicalInfoBox',{layout:sap.ui.layout.form.SimpleFormLayout.ResponsiveLayout,content:B}).addStyleClass("sapUshellTechnicalInfoBox");if(sap.ui.Device.os.ios&&sap.ui.Device.system.phone){this.oBottomSimpleForm.addStyleClass("sapUshellContactSupportFixWidth");}var o=this.oBottomSimpleForm.onAfterRendering;this.oBottomSimpleForm.onAfterRendering=function(){o.apply(this,arguments);var n=jQuery(this.getDomRef());n.attr("tabIndex",0);jQuery.sap.delayedCall(700,n,function(){this.focus();});};this.oDialog.addContent(this.oBottomSimpleForm);};sap.ushell.ui.footerbar.ContactSupportButton.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling 'Contact Support' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.ContactSupportButton");}e=false;}sap.m.Button.prototype.setEnabled.call(this,e);};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.EndUserFeedback')){jQuery.sap.declare("sap.ushell.ui.footerbar.EndUserFeedback");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.EndUserFeedback",{metadata:{library:"sap.ushell",properties:{"showAnonymous":{type:"boolean",group:"Misc",defaultValue:true},"showLegalAgreement":{type:"boolean",group:"Misc",defaultValue:true},"showCustomUIContent":{type:"boolean",group:"Misc",defaultValue:true},"feedbackDialogTitle":{type:"string",group:"Misc",defaultValue:null},"textAreaPlaceholder":{type:"string",group:"Misc",defaultValue:null}},aggregations:{"customUIContent":{type:"sap.ui.core.Control",multiple:true,singularName:"customUIContent"}}}});(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.EndUserFeedback");sap.ushell.ui.footerbar.EndUserFeedback.prototype.init=function(){jQuery.sap.require("sap.ushell.services.Container");var u=sap.ushell.Container.getUser(),f=sap.ushell.utils.getFormFactor();this.oUserDetails={userId:u.getId(),eMail:u.getEmail()};this.translationBundle=sap.ushell.resources.i18n;this.oEndUserFeedbackService=sap.ushell.Container.getService("EndUserFeedback");this.appConfiguration=sap.ushell.services.AppConfiguration;this.oEndUserFeedbackModel=new sap.ui.model.json.JSONModel();this.oEndUserFeedbackModel.setData({feedbackViewTitle:this.translationBundle.getText("userFeedback_title"),legalAgreementViewTitle:this.translationBundle.getText("userFeedbackLegal_title"),textAreaPlaceholderText:this.translationBundle.getText("feedbackPlaceHolderHeader"),presentationStates:{showAnonymous:this.getShowLegalAgreement(),showLegalAgreement:this.getShowLegalAgreement(),showCustomUIContent:this.getShowCustomUIContent()},clientContext:{userDetails:jQuery.extend(true,{},this.oUserDetails),navigationData:{formFactor:f,applicationInformation:{},navigationHash:null}},isAnonymous:true,applicationIconPath:'',leftButton:{feedbackView:this.translationBundle.getText("sendBtn"),legalAgreementView:this.translationBundle.getText("approveBtn")},rightButton:{feedbackView:this.translationBundle.getText("cancelBtn"),legalAgreementView:this.translationBundle.getText("declineBtn")},states:{isLegalAgreementChecked:false,isRatingSelected:false,isInFeedbackView:true},technicalLink:{state:0,title:[this.translationBundle.getText("technicalDataLink"),this.translationBundle.getText("technicalDataLinkHide")]},textArea:{inputText:''},contextText:'',ratingButtons:[{text:sap.ushell.resources.i18n.getText("ratingExcellentText"),color:'sapUshellRatingLabelFeedbackPositiveText',iconSymbol:'sap-icon://BusinessSuiteInAppSymbols/icon-face-very-happy',id:'rateBtn1',index:1},{text:sap.ushell.resources.i18n.getText("ratingGoodText"),color:'sapUshellRatingLabelFeedbackPositiveText',iconSymbol:'sap-icon://BusinessSuiteInAppSymbols/icon-face-happy',id:'rateBtn2',index:2},{text:sap.ushell.resources.i18n.getText("ratingAverageText"),color:'sapUshellRatingLabelFeedbackNeutralText',iconSymbol:'sap-icon://BusinessSuiteInAppSymbols/icon-face-neutral',id:'rateBtn3',index:3},{text:sap.ushell.resources.i18n.getText("ratingPoorText"),color:'sapUshellRatingLabelFeedbackCriticalText',iconSymbol:'sap-icon://BusinessSuiteInAppSymbols/icon-face-bad',id:'rateBtn4',index:4},{text:sap.ushell.resources.i18n.getText("ratingVeyPoorText"),color:'sapUshellRatingLabelFeedbackNegativeText',iconSymbol:'sap-icon://BusinessSuiteInAppSymbols/icon-face-very-bad',id:'rateBtn5',index:5}],selectedRating:{text:'',color:'',index:0}});this.setIcon('sap-icon://marketing-campaign');this.setWidth('100%');this.setText(sap.ushell.resources.i18n.getText("endUserFeedbackBtn"));this.setTooltip(sap.ushell.resources.i18n.getText("endUserFeedbackBtn_tooltip"));this.attachPress(this.ShowEndUserFeedbackDialog);this.setEnabled();};sap.ushell.ui.footerbar.EndUserFeedback.prototype.ShowEndUserFeedbackDialog=function(){this.updateModelContext();if(this.oDialog){this.updateTechnicalInfo();this.oDialog.open();return;}jQuery.sap.require("sap.ui.layout.form.SimpleForm");jQuery.sap.require("sap.ui.layout.HorizontalLayout");jQuery.sap.require("sap.ui.layout.VerticalLayout");jQuery.sap.require("sap.m.TextArea");jQuery.sap.require("sap.m.Link");jQuery.sap.require("sap.m.Label");jQuery.sap.require("sap.m.Text");jQuery.sap.require("sap.m.Dialog");jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.m.Image");var m=jQuery.sap.getModulePath("sap.ushell"),d=m+'/themes/base/img/launchpadDefaultIcon.jpg',i=this.oEndUserFeedbackModel.getProperty('/clientContext/navigationData/formFactor')==='desktop';this.oLegalAgreementInfoLayout=null;this.oBackButton=new sap.m.Button('endUserFeedbackBackBtn',{visible:{path:"/states/isInFeedbackView",formatter:function(I){return!I;}},icon:sap.ui.core.IconPool.getIconURI("nav-back"),press:function(){this.oEndUserFeedbackModel.setProperty('/states/isInFeedbackView',true);}.bind(this),tooltip:sap.ushell.resources.i18n.getText("feedbackGoBackBtn_tooltip")});this.oPopoverTitle=new sap.m.Text("PopoverTitle",{text:{parts:[{path:'/states/isInFeedbackView'},{path:'/feedbackViewTitle'}],formatter:function(I){return this.oEndUserFeedbackModel.getProperty(I?"/feedbackViewTitle":"/legalAgreementViewTitle");}.bind(this)}});this.oHeadBar=new sap.m.Bar({contentLeft:[this.oBackButton],contentMiddle:[this.oPopoverTitle]});this.oLogoImg=new sap.m.Image('sapFeedbackLogo',{src:d,width:'4.5rem',height:'4.5rem',visible:{path:'/applicationIconPath',formatter:function(b){return!b;}}});this.oAppIcon=new sap.ui.core.Icon('sapFeedbackAppIcon',{src:'{/applicationIconPath}',width:'4.5rem',height:'4.5rem',visible:{path:'/applicationIconPath',formatter:function(b){return!!b;}}}).addStyleClass("sapUshellFeedbackAppIcon");this.oContextName=new sap.m.Text('contextName',{text:'{/contextText}'});this.oContextLayout=new sap.ui.layout.HorizontalLayout('contextLayout',{content:[this.oLogoImg,this.oAppIcon,this.oContextName]});this.oRatingLabel=new sap.m.Label('ratingLabel',{required:true,text:sap.ushell.resources.i18n.getText("ratingLabelText")});this.oRatingSelectionText=new sap.m.Text('ratingSelectionText',{text:{path:'/selectedRating',formatter:function(s){if(this.lastSelectedColor){this.removeStyleClass(this.lastSelectedColor);}if(s.color){this.addStyleClass(s.color);}this.lastSelectedColor=s.color;return s.text;}}});this.oRatingButtonTemplate=new sap.m.Button({icon:'{iconSymbol}',height:'100%',width:'20%'});this.oRatingButtons=new sap.m.SegmentedButton('ratingButtons',{width:"98%",selectedButton:'noDefalut',buttons:{path:"/ratingButtons",template:this.oRatingButtonTemplate},select:function(e){var I=e.mParameters.id,p=sap.ui.getCore().byId(I).getBindingContext().getPath(),b=this.oEndUserFeedbackModel.getProperty(p);this.oEndUserFeedbackModel.setProperty('/selectedRating',{text:b.text,color:b.color,index:b.index});this.oEndUserFeedbackModel.setProperty('/states/isRatingSelected',true);}.bind(this)});this.oRatingButtons.addAriaLabelledBy("ratingLabel");if(i){this.oRatingIndicationLayout=new sap.ui.layout.HorizontalLayout('ratingIndicationLayout',{content:[this.oRatingLabel,this.oRatingSelectionText]});}else{this.oRatingIndicationLayout=new sap.ui.layout.VerticalLayout('ratingIndicationLayoutMob',{content:[this.oRatingLabel,this.oRatingSelectionText]});}this.oRatingLayout=new sap.ui.layout.VerticalLayout('ratingLayout',{width:"100%",content:[this.oRatingIndicationLayout,this.oRatingButtons]});this.oAnonymousCheckbox=new sap.m.CheckBox('anonymousCheckbox',{name:'anonymousCheckbox',visible:'{/presentationStates/showAnonymous}',text:sap.ushell.resources.i18n.getText("feedbackSendAnonymousText"),selected:'{/isAnonymous}',select:function(e){var c=e.getParameter("selected");this._handleAnonymousSelection(c);}.bind(this)});var a=(!this.oEndUserFeedbackModel.getProperty("/presentationStates/showAnonymous")||this.oEndUserFeedbackModel.getProperty("/isAnonymous"));this._handleAnonymousSelection(a);this.oLegalAgrementCheckbox=new sap.m.CheckBox('legalAgreement',{name:'legalAgreement',visible:'{/presentationStates/showLegalAgreement}',selected:'{/states/isLegalAgreementChecked}',text:this.translationBundle.getText("agreementAcceptanceText")});this.oLegalAgreeementLink=new sap.m.Link('legalAgreementLink',{text:this.translationBundle.getText("legalAgreementLinkText"),visible:'{/presentationStates/showLegalAgreement}',press:function(){var p=this.oEndUserFeedbackService.getLegalText();p.done(this._showLegalAgreementInfo.bind(this));}.bind(this)});this.aCustomUIContent=jQuery.extend([],this.getCustomUIContent());this.oCustomUILayout=new sap.ui.layout.VerticalLayout('customUILayout',{visible:{path:'/presentationStates/showCustomUIContent',formatter:function(s){return(s&&this.aCustomUIContent.length)?true:false;}.bind(this)},content:this.getCustomUIContent(),width:"100%"});this.oLegalLayout=new sap.ui.layout.VerticalLayout('legalLayout',{content:[this.oAnonymousCheckbox,this.oLegalAgrementCheckbox,this.oLegalAgreeementLink]});this.oTechnicalDataLink=new sap.m.Link('technicalDataLink',{text:{path:'/technicalLink/state',formatter:function(s){return this.getModel().getProperty('/technicalLink/title/'+s);}},press:function(){var _=this.oEndUserFeedbackModel.getProperty("/technicalLink/state");this.oEndUserFeedbackModel.setProperty('/technicalLink/state',Math.abs(_-1));}.bind(this)});this.oTechnicalDataLayout=new sap.ui.layout.HorizontalLayout('technicalDataLayout',{content:[this.oTechnicalDataLink]});this.leftButton=new sap.m.Button("EndUserFeedbackLeftBtn",{text:{path:"/states/isInFeedbackView",formatter:function(I){return this.getModel().getProperty('/leftButton/'+(I?'feedbackView':'legalAgreementView'));}},enabled:{parts:[{path:'/states/isInFeedbackView'},{path:'/states/isLegalAgreementChecked'},{path:'/states/isRatingSelected'},{path:'/presentationStates/showLegalAgreement'}],formatter:function(I,b,c,s){return!I||(c&&(b||!s));}},press:function(){var I=this.oEndUserFeedbackModel.getProperty("/states/isInFeedbackView");if(I){var f={feedbackText:this.oEndUserFeedbackModel.getProperty('/textArea/inputText'),ratings:[{questionId:"Q10",value:this.oEndUserFeedbackModel.getProperty('/selectedRating/index')}],clientContext:this.oEndUserFeedbackModel.getProperty('/clientContext'),isAnonymous:this.oEndUserFeedbackModel.getProperty('/isAnonymous')},p=this.oEndUserFeedbackService.sendFeedback(f);p.done(function(){sap.ushell.Container.getService("Message").info(this.translationBundle.getText('feedbackSendToastTxt'));}.bind(this));p.fail(function(){sap.ushell.Container.getService("Message").error(this.translationBundle.getText('feedbackFailedToastTxt'));}.bind(this));this.oDialog.close();}else{this.oEndUserFeedbackModel.setProperty('/states/isInFeedbackView',true);this.oEndUserFeedbackModel.setProperty('/states/isLegalAgreementChecked',true);}}.bind(this)});this.rightButton=new sap.m.Button("EndUserFeedbackRightBtn",{text:{path:"/states/isInFeedbackView",formatter:function(I){return this.getModel().getProperty('/rightButton/'+(I?'feedbackView':'legalAgreementView'));}},press:function(){var I=this.oEndUserFeedbackModel.getProperty("/states/isInFeedbackView");if(I){this.oDialog.close();}else{this.oEndUserFeedbackModel.setProperty('/states/isInFeedbackView',true);this.oEndUserFeedbackModel.setProperty('/states/isLegalAgreementChecked',false);}}.bind(this)});this.oTextArea=new sap.m.TextArea("feedbackTextArea",{rows:6,value:'{/textArea/inputText}',placeholder:'{/textAreaPlaceholderText}'});this.oTextArea.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:this.oEndUserFeedbackModel.getProperty('/textAreaPlaceholderText'),writeToDom:true}));this.oDialog=new sap.m.Dialog({id:"UserFeedbackDialog",contentWidth:"25rem",leftButton:this.leftButton,rightButton:this.rightButton,stretchOnPhone:true,initialFocus:"textArea",afterOpen:function(){jQuery("#textArea").on("focusout",function(){window.scrollTo(0,0);});}}).addStyleClass("sapUshellEndUserFeedbackDialog");this.oDialog.setModel(this.oEndUserFeedbackModel);this.oDialog.setCustomHeader(this.oHeadBar);this.oDialog.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:this.translationBundle.getText("endUserFeedbackAreaLabel"),writeToDom:true}));this.oTechnicalInfoBoxLayout=this._createTechnicalDataContent();this.oFeedbackLayout=new sap.ui.layout.VerticalLayout('feedbackLayout',{visible:'{/states/isInFeedbackView}',content:[this.oContextLayout,this.oRatingLayout,this.oTextArea,this.oTechnicalDataLayout,this.oTechnicalInfoBoxLayout,this.oLegalLayout,this.oCustomUILayout]}).addStyleClass("sapUshellFeedbackLayout");this.oMainLayout=new sap.ui.layout.VerticalLayout("mainLayout",{editable:false,content:[this.oFeedbackLayout]});this.oDialog.addContent(this.oMainLayout);this.oDialog.open();};sap.ushell.ui.footerbar.EndUserFeedback.prototype._handleAnonymousSelection=function(c){var a=this.translationBundle.getText('feedbackAnonymousTechFld');this.oEndUserFeedbackModel.setProperty('/isAnonymous',c);this.oEndUserFeedbackModel.setProperty('/clientContext/userDetails/eMail',c?a:this.oUserDetails.eMail);this.oEndUserFeedbackModel.setProperty('/clientContext/userDetails/userId',c?a:this.oUserDetails.userId);};sap.ushell.ui.footerbar.EndUserFeedback.prototype._createTechnicalDataContent=function(){this.oTechnicalInfoBox=new sap.ui.layout.form.SimpleForm('feedbackTechnicalInfoBox',{layout:sap.ui.layout.form.SimpleFormLayout.ResponsiveLayout,content:this.getTechnicalInfoContent()});if(sap.ui.Device.os.ios&&sap.ui.Device.system.phone){this.oTechnicalInfoBox.addStyleClass("sapUshellContactSupportFixWidth");}var o=this.oTechnicalInfoBox.onAfterRendering;this.oTechnicalInfoBox.onAfterRendering=function(){o.apply(this,arguments);var n=jQuery(this.getDomRef());n.attr("tabIndex",0);jQuery.sap.delayedCall(700,n,function(){this.focus();});};return new sap.ui.layout.HorizontalLayout('technicalInfoBoxLayout',{visible:{path:'/technicalLink/state',formatter:function(s){return s===1;}},content:[this.oTechnicalInfoBox]});};sap.ushell.ui.footerbar.EndUserFeedback.prototype._createLegalAgreementLayout=function(l){this.oLegalText=new sap.m.TextArea('legalText',{cols:50,rows:22});this.oLegalText.setValue([l]);this.oLegalText.setEditable(false);var o=this.oLegalText.onAfterRendering;this.oLegalText.onAfterRendering=function(){if(o){o.apply(this,arguments);}var j=jQuery(this.getDomRef());j.find("textarea").attr("tabindex","0");};this.oLegalAgreementInfoLayout=new sap.ui.layout.VerticalLayout('legalAgreementInfoLayout',{visible:{path:"/states/isInFeedbackView",formatter:function(i){return!i;}},content:[this.oLegalText]});this.oMainLayout.addContent(this.oLegalAgreementInfoLayout);};sap.ushell.ui.footerbar.EndUserFeedback.prototype._showLegalAgreementInfo=function(l){this.oEndUserFeedbackModel.setProperty('/states/isInFeedbackView',false);if(!this.oLegalAgreementInfoLayout){this._createLegalAgreementLayout(l);}};sap.ushell.ui.footerbar.EndUserFeedback.prototype.addCustomUIContent=function(c){var i=c&&c.getMetadata&&c.getMetadata().getStereotype&&c.getMetadata().getStereotype()==='control';if(i){if(this.getShowCustomUIContent()){this.oEndUserFeedbackModel.setProperty('/presentationStates/showCustomUIContent',true);}this.addAggregation('customUIContent',c);}};sap.ushell.ui.footerbar.EndUserFeedback.prototype.setShowAnonymous=function(v){if(typeof v==='boolean'){this.oEndUserFeedbackModel.setProperty('/presentationStates/showAnonymous',v);this.setProperty('showAnonymous',v,true);}};sap.ushell.ui.footerbar.EndUserFeedback.prototype.setShowLegalAgreement=function(v){if(typeof v==='boolean'){this.oEndUserFeedbackModel.setProperty('/presentationStates/showLegalAgreement',v);this.setProperty('showLegalAgreement',v,true);}};sap.ushell.ui.footerbar.EndUserFeedback.prototype.setShowCustomUIContent=function(v){if(typeof v==='boolean'){this.oEndUserFeedbackModel.setProperty('/presentationStates/showCustomUIContent',v);this.setProperty('showCustomUIContent',v,true);}};sap.ushell.ui.footerbar.EndUserFeedback.prototype.setFeedbackDialogTitle=function(v){if(typeof v==='string'){this.oEndUserFeedbackModel.setProperty('/feedbackViewTitle',v);this.setProperty('feedbackDialogTitle',v,true);}};sap.ushell.ui.footerbar.EndUserFeedback.prototype.setTextAreaPlaceholder=function(v){if(typeof v==='string'){this.oEndUserFeedbackModel.setProperty('/textAreaPlaceholderText',v);this.setProperty('textAreaPlaceholder',v,true);}};sap.ushell.ui.footerbar.EndUserFeedback.prototype.updateModelContext=function(){var u=sap.ushell.Container.getService("URLParsing"),h,p,i,c,s,U;h=u.getShellHash(window.location);p=u.parseShellHash(h);i=(p!==undefined)?p.semanticObject+"-"+p.action:"";c=this.getModel().getProperty("/currentState/stateName");if(c==="home"||c==="catalog"){s=this.translationBundle.getText(c+'_title');}this.currentApp=this.appConfiguration.getCurrentAppliction();this.bHasAppName=(this.currentApp&&this.appConfiguration.getMetadata(this.currentApp)&&this.appConfiguration.getMetadata(this.currentApp).title);this.sAppIconPath=(this.currentApp&&this.appConfiguration.getMetadata(this.currentApp)&&this.appConfiguration.getMetadata(this.currentApp).icon);this.oEndUserFeedbackModel.setProperty('/contextText',this.bHasAppName?this.appConfiguration.getMetadata(this.currentApp).title:this.translationBundle.getText('feedbackHeaderText'));U=null;if(this.currentApp&&this.currentApp.url){U=this.currentApp.url.split('?')[0];}else if(c){U=this.translationBundle.getText("flp_page_name");}this.oEndUserFeedbackModel.setProperty('/clientContext/navigationData/applicationInformation',{url:U,additionalInformation:(this.currentApp&&this.currentApp.additionalInformation)?this.currentApp.additionalInformation:null,applicationType:(this.currentApp&&this.currentApp.applicationType)?this.currentApp.applicationType:null});this.oEndUserFeedbackModel.setProperty('/clientContext/navigationData/navigationHash',s?s:i);this.oEndUserFeedbackModel.setProperty('/selectedRating',{text:'',color:'',index:0});this.oEndUserFeedbackModel.setProperty('/states/isRatingSelected',false);this.oEndUserFeedbackModel.setProperty('/states/isLegalAgreementChecked',false);this.oEndUserFeedbackModel.setProperty('/technicalLink/state',0);this.oEndUserFeedbackModel.setProperty('/textArea/inputText','');this.oEndUserFeedbackModel.setProperty('/applicationIconPath',this.sAppIconPath);this._handleAnonymousSelection(true);};sap.ushell.ui.footerbar.EndUserFeedback.prototype.updateTechnicalInfo=function(){this.oTechnicalInfoBox.destroyContent();this.oTechnicalInfoBox.removeAllContent();var t=this.getTechnicalInfoContent(),c;for(c in t){this.oTechnicalInfoBox.addContent(t[c]);}this.oRatingButtons.setSelectedButton('noDefalut');};sap.ushell.ui.footerbar.EndUserFeedback.prototype.getTechnicalInfoContent=function(){var f=[],F=this.oEndUserFeedbackModel.getProperty('/clientContext/navigationData/formFactor'),u=this.oEndUserFeedbackModel.getProperty('/clientContext/userDetails/userId'),e=this.oEndUserFeedbackModel.getProperty('/clientContext/userDetails/eMail'),a=this.oEndUserFeedbackModel.getProperty('/clientContext/navigationData/applicationInformation/url'),A=this.oEndUserFeedbackModel.getProperty('/clientContext/navigationData/applicationInformation/applicationType'),s=this.oEndUserFeedbackModel.getProperty('/clientContext/navigationData/applicationInformation/additionalInformation'),n=this.oEndUserFeedbackModel.getProperty('/clientContext/navigationData/navigationHash'),c=this.getModel().getProperty("/currentState/stateName"),d=(c==="home"||c==="catalog")?false:true;f.push(new sap.m.Text({text:this.translationBundle.getText("loginDetails")}).addStyleClass('sapUshellContactSupportHeaderInfoText'));f.push(u?new sap.m.Label({text:this.translationBundle.getText("userFld")}):null);f.push(u?new sap.m.Text('technicalInfoUserIdTxt',{text:'{/clientContext/userDetails/userId}'}):null);f.push(e?new sap.m.Label({text:this.translationBundle.getText("eMailFld")}):null);f.push(e?new sap.m.Text({text:'{/clientContext/userDetails/eMail}'}):null);f.push(F?new sap.m.Label({text:this.translationBundle.getText('formFactorFld')}):null);f.push(F?new sap.m.Text({text:'{/clientContext/navigationData/formFactor}'}):null);f.push(new sap.m.Text({text:''}));f.push(new sap.m.Text({text:this.translationBundle.getText(this.currentApp?'applicationInformationFld':'feedbackHeaderText')}).addStyleClass('sapUshellEndUserFeedbackHeaderInfoText').addStyleClass("sapUshellEndUserFeedbackInfoTextSpacing"));f.push(a&&d?new sap.m.Label({text:this.translationBundle.getText("urlFld")}):null);f.push(a&&d?new sap.m.Text({text:'{/clientContext/navigationData/applicationInformation/url}'}):null);f.push(A?new sap.m.Label({text:this.translationBundle.getText("applicationTypeFld")}):null);f.push(A?new sap.m.Text({text:'{/clientContext/navigationData/applicationInformation/applicationType}'}):null);f.push(s?new sap.m.Label({text:this.translationBundle.getText("additionalInfoFld")}):null);f.push(s?new sap.m.Text({text:'{/clientContext/navigationData/applicationInformation/additionalInformation}'}):null);f.push(n&&d?new sap.m.Label({text:this.translationBundle.getText("hashFld")}):null);f.push(n&&d?new sap.m.Text({text:'{/clientContext/navigationData/navigationHash}'}):null);return f.filter(Boolean);};sap.ushell.ui.footerbar.EndUserFeedback.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling 'End User Feedback' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.EndUserFeedback");}e=false;}sap.m.Button.prototype.setEnabled.call(this,e);};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.HideGroupsButton')){jQuery.sap.declare("sap.ushell.ui.footerbar.HideGroupsButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.HideGroupsButton",{metadata:{library:"sap.ushell"}});(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.HideGroupsButton");sap.ushell.ui.footerbar.HideGroupsButton.prototype.init=function(){this.setIcon('sap-icon://group-2');this.setTooltip(sap.ushell.resources.i18n.getText("hideGroupsBtn_tooltip"));this.setWidth('100%');this.setText(sap.ushell.resources.i18n.getText("hideGroupsBtn_title"));this.attachPress(this.openHideGroupsDialog);if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments);}};sap.ushell.ui.footerbar.HideGroupsButton.prototype.openHideGroupsDialog=function(){jQuery.sap.require("sap.m.Dialog");jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.m.Table");jQuery.sap.require("sap.m.Switch");var t=this;this.oModel=this.getModel();this.handleChange=function(a){var b=a.oSource.getParent(),g=b.getBindingContextPath(),c=this.oModel.getProperty(g);var d=jQuery.grep(this.aGroupsStates,function(G){return G.groupId===c.groupId;})[0];if(d){d.isGroupVisible=!d.isGroupVisible;}b.toggleStyleClass('sapUshellHideGroupsTableItem');b.getCells()[0].toggleStyleClass('sapUshellHideGroupsDisabledCell');}.bind(this);var s=function(a,l){return a&&!l;};this.groupsTableTemplate=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:"{title}"}),new sap.m.Switch({visible:{parts:[{path:"isEnabled"},{path:"isGroupLocked"}],formatter:s},change:t.handleChange,customTextOff:" ",customTextOn:" ",tooltip:sap.ushell.resources.i18n.getText("hideGroups_switchTooltip")})]});this.groupsTable=new sap.m.Table("sapUshellHideGroupsTable",{backgroundDesign:sap.m.BackgroundDesign.Transparent,showSeparators:sap.m.ListSeparators.Inner,columns:[new sap.m.Column({vAlign:"Middle"}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Right,vAlign:"Middle",width:"4.94rem"})]});this.groupsTable.addStyleClass('sapUshellHideGroupsTable');var o=this.groupsTable.onAfterRendering;this.groupsTable.onAfterRendering=function(a){o.apply(t.groupsTable,arguments);var b=a.srcControl.mAggregations.items;if(b){var m=b[0].getModel(),i,g;for(i=0;i<b.length;i++){g=m.getProperty(b[i].getBindingContextPath());b[i].getCells()[1].setState(g.isGroupVisible);if(g&&g.isGroupLocked&&(g.tiles.length===0||!sap.ushell.utils.groupHasVisibleTiles(g.tiles))){b[i].setVisible(false);}else if(!b[i].getCells()[1].getState()){b[i].addStyleClass('sapUshellHideGroupsTableItem');b[i].getCells()[0].addStyleClass('sapUshellHideGroupsDisabledCell');}}}setTimeout(function(){jQuery('.sapMListTblRow').first().focus();},200);};this.groupsTable.setModel(this.getModel());var p=this.getModel().getProperty("/personalization");var e=[];if(!p){e.push(new sap.ui.model.Filter("tiles/length",sap.ui.model.FilterOperator.GT,0));}this.groupsTable.bindItems({path:"/groups",template:this.groupsTableTemplate,filters:e});this.saveButton=new sap.m.Button("saveBtn",{text:sap.ushell.resources.i18n.getText("okBtn"),press:function(){setTimeout(function(){var m=this.getModel();var g=t.aGroupsStates;if(g){var l=sap.ushell.Container.getService("LaunchPage");var h=[],i,a;for(i=0;i<g.length;i++){if(!g[i].isGroupVisible){a=l.getGroupId(g[i].object);h.push(a);}}l.hideGroups(h).done(function(){m.setProperty("/groups",g);t.handleToastMessage(h.length);}).fail(function(){var b=new sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage("HideGroupsErrorMessage",{title:sap.ushell.resources.i18n.getText("error"),content:new sap.m.Text({text:sap.ushell.resources.i18n.getText("hideGroups_error")})});b.open();});}}.bind(this),100);this.oDialog.close();}.bind(this)});this.handleToastMessage=function(n){var m="";if(typeof n===undefined){return;}if(n===0){m=sap.ushell.resources.i18n.getText("hideGroups_none");}else if(n===1){m=sap.ushell.resources.i18n.getText("hideGroups_single");}else{m=sap.ushell.resources.i18n.getText("hideGroups_multiple",n);}sap.ushell.Container.getService("Message").show(sap.ushell.services.Message.Type.INFO,m);};this.cancelButton=new sap.m.Button("CancelBtn",{text:sap.ushell.resources.i18n.getText("cancelBtn"),press:function(){if(t.aGroupsOriginalStates){var g=this.getModel().getProperty('/groups'),i;for(i=0;i<t.aGroupsOriginalStates.length;i++){if(g[i].groupId===t.aGroupsOriginalStates[i].groupId){g[i].isGroupVisible=t.aGroupsOriginalStates[i].isVisible;}}}this.oDialog.close();}.bind(this)});this.oDialog=new sap.m.Dialog({id:"groupsVisibilityDialog",title:sap.ushell.resources.i18n.getText("hideGroups_title"),contentWidth:"29.6rem",stretch:jQuery.device.is.phone,content:this.groupsTable,beginButton:this.saveButton,endButton:this.cancelButton,initialFocus:"groupsVisibilityDialog",afterClose:function(){this.oDialog.destroy();}.bind(this)}).addStyleClass("sapUshellGroupsVisibilityDialog");this.oDialog.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:sap.ushell.resources.i18n.getText("hideGroupsDialog_ariaLabel"),writeToDom:true}));this.getModelStates=function(g){if(!g){return;}var S=[],i;for(i=0;i<g.length;i++){S.push({groupId:g[i].groupId,isVisible:g[i].isGroupVisible});}return S;};this.aGroupsStates=this.oModel.getProperty('/groups');this.aGroupsOriginalStates=this.getModelStates(this.aGroupsStates);this.oDialog.open();};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.UserPreferencesButton')){jQuery.sap.declare("sap.ushell.ui.footerbar.UserPreferencesButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.UserPreferencesButton",{metadata:{library:"sap.ushell"}});(function(){"use strict";jQuery.sap.require('sap.m.Dialog');jQuery.sap.require('sap.m.Button');jQuery.sap.declare("sap.ushell.ui.footerbar.UserPreferencesButton");sap.ushell.ui.footerbar.UserPreferencesButton.prototype.init=function(){this.setIcon('sap-icon://person-placeholder');this.setWidth('100%');this.translationBundle=sap.ushell.resources.i18n;this.setText(this.translationBundle.getText("userPreferences"));this.setTooltip(this.translationBundle.getText("userPreferences_tooltip"));this.attachPress(this.showUserPreferencesDialog);if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments);}};sap.ushell.ui.footerbar.UserPreferencesButton.prototype.createDialog=function(){var s;var c;var t=this;s=this._createSaveButton();c=this._createCancelButton();this.oDialog=new sap.m.Dialog({id:"userPreferencesDialog",title:"{/userPreferences/dialogTitle}",contentWidth:"29.6rem",content:null,contentHeight:"17rem",buttons:[s,c],afterClose:function(){t.oDialog.destroy();this.oUser.resetChangedProperties();}.bind(t),stretchOnPhone:true}).addStyleClass("sapUshellUserPreferencesDialog");this._addDialogBackButton();this.oDialog.setModel(this.getModel());this.oDialog.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:t.translationBundle.getText("UserPreferences_Dialog_Main_label"),writeToDom:true}));this.oDialog.addContent(this._getOriginalDialogContent());};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._getOriginalDialogContent=function(){if(!this.oInitialContent){var u;var e;u=this._getUserDetailsControl();e=this._getEntryListControl();this.oInitialContent=new sap.ui.layout.VerticalLayout('userPreferencesLayout',{content:[u,e],width:"100%"});}return this.oInitialContent;};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._getEntryListControl=function(){var e=this._getUserPrefEntriesTemplate();var x=this.getModel()&&this.getModel().getProperty('/enableHelp');var t=this,u=this.oUser.getFullName();var a=new sap.m.List('userPrefEnteryList',{items:{path:"/userPreferences/entries",template:e}});a.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:t.translationBundle.getText("UserPreferences_EntryList_label")+u,writeToDom:true}));var o=a.onAfterRendering;a.onAfterRendering=function(){var E=this.getItems();var b;o.apply(this,arguments);for(var i=0;i<E.length;i++){b=E[i].getBindingContext().getPath();if(!t.getModel().getProperty(b+"/valueResult")){t._setEntryValueResult(b);}if(x){t._addXRayHelpId(b,E[i]);}}};return a;};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._addXRayHelpId=function(e,l){var h=this.getModel().getProperty(e+"/entryHelpID");if(h){l.addStyleClass("help-id-"+h);}};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._setEntryValueResult=function(e){var t=this;var i=this.getModel().getProperty(e+"/editable");var v=this.getModel().getProperty(e+"/valueArgument");if(typeof v==="function"){this.getModel().setProperty(e+"/valueResult",this.translationBundle.getText("genericLoading"));this.getModel().setProperty(e+"/editable",false);var V=v();V.done(function(a){t.getModel().setProperty(e+"/editable",i);t.getModel().setProperty(e+"/visible",typeof(a)==='object'?!!a.value:true);t.getModel().setProperty(e+"/valueResult",typeof(a)==='object'?a.displayText:a);});V.fail(function(){t.getModel().setProperty(e+"/valueResult",t.translationBundle.getText("loadingErrorMessage"));});}else if(!!v){this.getModel().setProperty(e+"/valueResult",v);this.getModel().setProperty(e+"/editable",i);}else{this.getModel().setProperty(e+"/valueResult",this.translationBundle.getText("loadingErrorMessage"));}};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._getUserPrefEntriesTemplate=function(){var t=this;var p=function(e){var i=true;var a=e.getSource().getLabel();var b=e.getSource().getBindingContext().getPath();t.getModel().setProperty("/userPreferences/activeEntryPath",b);t._setDetailedEntryModeMode(true,b,a,b);t.oDialog.removeAllContent();var c=t.getModel().getProperty(b+"/contentResult");if(c){t.oDialog.addContent(c);}else{var B=null;var s=true,I=false;var d=t.getModel().getProperty(b+"/contentFunc");if(typeof d==="function"){t.getModel().setProperty(b+"/isDirty",true);var C=d();C.done(function(f){s=false;if(I===true){t.oDialog.removeAllContent();B.destroy();}if(f instanceof sap.ui.core.Control){t.getModel().setProperty(b+"/contentResult",f);t.oDialog.addContent(f);}else{i=false;}});C.fail(function(){s=false;if(I===true){t.oDialog.removeAllContent();B.destroy();}i=false;});C.always(function(){if(i===false){var E=new sap.m.FlexBox("userPrefErrorFlexBox",{height:"5rem",alignItems:sap.m.FlexAlignItems.Center,justifyContent:sap.m.FlexJustifyContent.Center,items:[new sap.m.Text("userPrefErrorText",{text:t.translationBundle.getText("loadingErrorMessage")})]});t.getModel().setProperty(b+"/contentResult",E);t.oDialog.addContent(E);}});if(s===true){B=new sap.m.BusyIndicator('userPrefLoadingBusyIndicator',{size:"4rem"});t.oDialog.addContent(B);I=true;}}}};return new sap.m.DisplayListItem({label:"{title}",value:"{valueResult}",tooltip:{path:"valueResult",formatter:function(v){return typeof(v)==='string'?v:"";}},type:{path:"editable",formatter:function(e){return(e===true)?"Navigation":"Inactive";}},visible:{path:"visible",formatter:function(v){return(v!==undefined)?v:true;}},press:p});};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._getUserDetailsControl=function(){return new sap.m.ObjectIdentifier({title:this.oUser.getFullName(),text:this.oUser.getEmail()}).addStyleClass("sapUshellUserPrefUserIdentifier");};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._createCancelButton=function(){var t=this;return new sap.m.Button({id:"cancelButton",text:{parts:['/userPreferences/entries'],formatter:function(e){var E=e.some(function(o){return o.editable;});return E>0?t.translationBundle.getText("cancelBtn"):t.translationBundle.getText("close");}},press:t._dialogCancelButtonHandler.bind(t),visible:true});};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._createSaveButton=function(){var t=this;return new sap.m.Button({id:"saveButton",text:this.translationBundle.getText("saveBtn"),press:t._dialogSaveButtonHandler.bind(t),visible:{parts:['/userPreferences/entries'],formatter:function(e){return e.some(function(E){return E.editable;});}}});};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._setDetailedEntryModeMode=function(i,e,a,b){this.getModel().setProperty("/userPreferences/isDetailedEntryMode",!!i);this.getModel().setProperty("/userPreferences/dialogTitle",a);};sap.ushell.ui.footerbar.UserPreferencesButton.prototype.showUserPreferencesDialog=function(){this.oUser=sap.ushell.Container.getUser();this.createDialog();this.oDialog.open();};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._dialogBackButtonHandler=function(e){this.getModel().setProperty("/userPreferences/isDetailedEntryMode",false);this.getModel().setProperty("/userPreferences/dialogTitle",this.translationBundle.getText("userPreferences"));this.oDialog.removeAllContent();this.oDialog.addContent(this._getOriginalDialogContent());this._setEntryValueResult(this.getModel().getProperty("/userPreferences/activeEntryPath"));this.getModel().setProperty("/userPreferences/activeEntryPath",null);};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._destroyDialog=function(){this.oHeadBar.destroy();this.oInitialContent.destroy();this.oInitialContent=null;this._modelCleanUpToInitial();this._entriesCleanUp();this.oDialog.destroy();};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._entriesCleanUp=function(){var e=this.getModel().getProperty("/userPreferences/entries");for(var i=0;i<e.length;i++){if(e[i].contentResult){e[i].contentResult.destroy();e[i].contentResult=null;}e[i].isDirty=false;e[i].valueResult=null;}this.getModel().setProperty("/userPreferences/entries",e);};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._modelCleanUpToInitial=function(){this.getModel().setProperty("/userPreferences/isDetailedEntryMode",false);this.getModel().setProperty("/userPreferences/dialogTitle",this.translationBundle.getText("userPreferences"));};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._dialogSaveButtonHandler=function(){var s;s=this._saveUserPrefEntries();var t=this;var i=this.getModel().getProperty("/userPreferences/isDetailedEntryMode");if(i){this.getModel().setProperty("/userPreferences/activeEntryPath",null);}s.done(function(){t._showSaveMessageToast();});s.fail(function(f){jQuery.sap.require("sap.m.MessageBox");var e;var a="";if(f.length===1){e=t.translationBundle.getText("savingEntryError")+" ";}else{e=t.translationBundle.getText("savingEntriesError")+"\n";}f.forEach(function(b){e+=b.entry+"\n";a+="Entry: "+b.entry+" - Error message: "+b.message+"\n";});sap.m.MessageBox.show(e,{icon:sap.m.MessageBox.Icon.ERROR,title:t.translationBundle.getText("Error"),actions:[sap.m.MessageBox.Action.OK]});jQuery.sap.log.error("Failed to save the following entries",a,"sap.ushell.ui.footerbar.UserPreferencesButton");});this.oDialog.close();this._destroyDialog();};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._dialogCancelButtonHandler=function(){var e=this.getModel().getProperty("/userPreferences/entries");for(var i=0;i<e.length;i++){if(e[i]&&e[i].onCancel){e[i].onCancel();}}this.oDialog.close();this._destroyDialog();};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._saveUserPrefEntries=function(){var e=this.getModel().getProperty("/userPreferences/entries");var r=jQuery.Deferred();var w;var c;var t=0;var f=0;var s=0;var p=[];var a=[];var b;var d=function(){s++;r.notify();};var g=function(h){a.push({entry:b,message:h});f++;r.notify();};for(var i=0;i<e.length;i++){if(e[i]&&e[i].isDirty===true){c=e[i].onSave();c.done(d);b=e[i].title;c.fail(g);p.push(c);t++;}}w=jQuery.when.apply(null,p);w.done(function(){r.resolve();});r.progress(function(){if(f>0&&(f+s===t)){r.reject(a);}});return r.promise();};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._addDialogBackButton=function(){var t=this;var b=new sap.m.Button('userPrefBackBtn',{visible:"{/userPreferences/isDetailedEntryMode}",icon:sap.ui.core.IconPool.getIconURI("nav-back"),press:t._dialogBackButtonHandler.bind(t),tooltip:this.translationBundle.getText("feedbackGoBackBtn_tooltip")});var d=new sap.m.Text("userPrefTitle",{text:"{/userPreferences/dialogTitle}"});this.oHeadBar=new sap.m.Bar({contentLeft:[b],contentMiddle:[d]});this.oDialog.setCustomHeader(this.oHeadBar);};sap.ushell.ui.footerbar.UserPreferencesButton.prototype._showSaveMessageToast=function(){jQuery.sap.require("sap.m.MessageToast");var m=this.translationBundle.getText("savedChanges");sap.m.MessageToast.show(m,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.HeaderTile')){jQuery.sap.declare("sap.ushell.ui.launchpad.HeaderTile");sap.ushell.ui.launchpad.Tile.extend("sap.ushell.ui.launchpad.HeaderTile",{metadata:{library:"sap.ushell",properties:{"headerLevel":{type:"sap.m.HeaderLevel",group:"Appearance",defaultValue:sap.m.HeaderLevel.H3},"headerText":{type:"string",group:"Appearance",defaultValue:null}}}});};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.PlusTile')){jQuery.sap.declare("sap.ushell.ui.launchpad.PlusTile");sap.ushell.ui.launchpad.Tile.extend("sap.ushell.ui.launchpad.PlusTile",{metadata:{library:"sap.ushell",properties:{"groupId":{type:"string",group:"Misc",defaultValue:''}},events:{"press":{}}}});sap.ushell.ui.launchpad.PlusTile.M_EVENTS={'press':'press'};(function(){"use strict";sap.ushell.ui.launchpad.PlusTile.prototype.init=function(){this.oIcon=new sap.ui.core.Icon({src:'sap-icon://add',tooltip:sap.ushell.resources.i18n.getText("open_catalog")});};sap.ushell.ui.launchpad.PlusTile.prototype.exit=function(){if(this.oIcon){this.oIcon.destroy();}};sap.ushell.ui.launchpad.PlusTile.prototype.onclick=function(){var g=this.getParent().getBindingContext().getObject();if(!g.object){return;}this.firePress();};sap.ushell.ui.launchpad.PlusTile.prototype.onsapspace=function(){this.firePress();};sap.ushell.ui.launchpad.PlusTile.prototype.onsapenter=function(){this.firePress();};sap.ushell.ui.launchpad.PlusTile.prototype.setGroupId=function(v){this.setProperty("groupId",v,true);return this;};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.ToolArea')){
/*!
 * ${copyright}
 */
jQuery.sap.declare('sap.ushell.ui.shell.ToolArea');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.Device');sap.ui.define("sap/ushell/ui/shell/ToolArea",['jquery.sap.global','sap/ushell/library','sap/ui/Device','./ToolAreaItem'],function(q,l,D,T){"use strict";var a=sap.ui.core.Control.extend("sap.ushell.ui.shell.ToolArea",{metadata:{properties:{visible:{type:"boolean",group:"Appearance",defaultValue:true},size:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:'56px'},textVisible:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{toolAreaItems:{type:"sap.ushell.ui.shell.ToolAreaItem",multiple:true}}},renderer:{render:function(r,t){if(!t.getToolAreaItems().length){return;}else{var i=t.getId();r.write("<div");r.writeControlData(t);r.writeAttribute("class","sapUshellToolArea");r.write(">");r.write("<div id='",i,"-cntnt' class='sapUshellToolAreaContainer'>");this.renderToolAreaItems(r,t);r.write("</div>");}},renderToolAreaItems:function(r,t){var I=t.getToolAreaItems(),i;for(i=0;i<I.length;i++){r.write("<div");r.addClass("sapUshellToolAreaContent");if(I[i].getSelected()){r.addClass("sapUshellToolAreaItemSelected");}r.writeClasses();r.write(">");r.renderControl(I[i]);r.write("</div>");r.write("<div class='sapUshellToolAreaContentSeparator'></div>");}}}});a.prototype.init=function(){D.media.attachHandler(this._setSize,this);D.resize.attachHandler(this._setSize,this);};a.prototype.addToolAreaItem=function(t){if(!this.getVisible()){this.setVisible(true);}this.addAggregation("toolAreaItems",t,true);if(this.getDomRef()){var r=sap.ui.getCore().createRenderManager();r.renderControl(t);r.flush(this.getDomRef());r.destroy();}};a.prototype.removeToolAreaItem=function(i){var t=this.getToolAreaItems(),o=typeof i==='object'?i:t[i];this.removeAggregation("toolAreaItems",o);if(this.getToolAreaItems().length<1){this.setVisible(false);}};a.prototype.setVisible=function(v){var r=this.getDomRef();this.setProperty("visible",!!v,r);this.$().toggleClass("sapUshellShellHidden",!v);};a.prototype.onBeforeRendering=function(){var I=this.getToolAreaItems(),i;this._bRenderText=I.length;for(i=0;i<I.length;i++){if(!I[i].getText()){this._bRenderText=false;}}};a.prototype._setSize=function(){var s=q(".sapUshellToolArea").width()/16;if(!this._bRenderText){this.setProperty("textVisible",false,true);s=q(".sapUshellToolAreaItm").height()/16;this.$().toggleClass("sapUshellToolAreaTextHidden",true);}this.setProperty("size",s+"rem",true);};a.prototype.onAfterRendering=function(){if(this.getToolAreaItems().length){this.setVisible(true);this._setSize();}};return a;},true);};if(!jQuery.sap.isDeclared('sap.ushell.ui.tile.DynamicTile')){
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
jQuery.sap.declare("sap.ushell.ui.tile.DynamicTile");sap.ushell.ui.tile.TileBase.extend("sap.ushell.ui.tile.DynamicTile",{metadata:{library:"sap.ushell",properties:{"numberValue":{type:"string",group:"Data",defaultValue:'0.0'},"numberState":{type:"sap.ushell.ui.tile.State",group:"Appearance",defaultValue:sap.ushell.ui.tile.State.Neutral},"numberUnit":{type:"string",group:"Data",defaultValue:null},"numberDigits":{type:"int",group:"Appearance",defaultValue:0},"stateArrow":{type:"sap.ushell.ui.tile.StateArrow",group:"Appearance",defaultValue:sap.ushell.ui.tile.StateArrow.None},"numberFactor":{type:"string",group:"Data",defaultValue:null}}}});};if(!jQuery.sap.isDeclared('sap.ushell.ui.tile.DynamicTileRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.tile.DynamicTileRenderer");jQuery.sap.require('sap.ushell.ui.tile.State');jQuery.sap.require('sap.ui.core.format.NumberFormat');sap.ushell.ui.tile.DynamicTileRenderer=sap.ui.core.Renderer.extend(sap.ushell.ui.tile.TileBaseRenderer);var t=sap.ushell.resources.i18n;sap.ushell.ui.tile.DynamicTileRenderer.renderPart=function(r,c){var n=c.getNumberValue(),a=c.getNumberFactor(),d=n.toString();var m=c.getIcon()?4:5;var s=this._shouldProcessDigits(d,c);if(d.length>m||s){var N=this._normalizeNumber(n,m,a,c);a=N.numberFactor;d=N.displayNumber;}else{var o=sap.ui.core.format.NumberFormat.getFloatInstance({maxFractionDigits:m});d=o.format(n);}r.write("<div");r.addClass("sapUshellDynamicTile");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapUshellDynamicTileData");r.addClass((c.getNumberState()?"sapUshellDynamicTileData"+c.getNumberState():"sapUshellDynamicTileData"+sap.ushell.ui.tile.State.Neutral));r.writeClasses();r.write(">");r.write("<div class='sapUshellDynamicTileIndication'>");if(c.getStateArrow()){r.write("<div");r.addClass("sapUshellDynamicTileStateArrow");r.addClass("sapUshellDynamicTileData"+c.getStateArrow());r.writeClasses();r.write(">");r.write("</div>");}r.write('<br><div');r.addClass("sapUshellDynamicTileNumberFactor");r.writeClasses();r.writeAccessibilityState(c,{label:t.getText("TileUnits_lable")+a});r.write('>');r.writeEscaped(a);r.write('</div>');r.write("</div>");r.write('<div');r.addClass("sapUshellDynamicTileNumber");r.writeClasses();if(d&&d!==""){r.writeAccessibilityState(c,{label:t.getText("TileValue_lable")+d});r.write('>');r.writeEscaped(d);}else{r.write('>');r.writeEscaped(c.getNumberValue());}r.write('</div>');r.write("</div>");r.write("</div>");};sap.ushell.ui.tile.DynamicTileRenderer._normalizeNumber=function(n,m,a,c){var b;if(isNaN(n)){b=n;}else{var N=sap.ui.core.format.NumberFormat.getFloatInstance({maxFractionDigits:c.getNumberDigits()});if(!a){if(n>=1000000000){a='B';n/=1000000000;}else if(n>=1000000){a='M';n/=1000000;}else if(n>=1000){a='K';n/=1000;}}b=N.format(n);}var d=b;var e=d[m-1];m-=(e==='.'||e===',')?1:0;d=d.substring(0,m);return{displayNumber:d,numberFactor:a};};sap.ushell.ui.tile.DynamicTileRenderer._shouldProcessDigits=function(d,c){var n=c.getNumberDigits(),a;if(d.indexOf('.')!==-1){a=d.split(".")[1].length;if(a>n){return true;}}return false;};sap.ushell.ui.tile.DynamicTileRenderer.getInfoPrefix=function(c){return c.getNumberUnit();};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.tile.ImageTile')){jQuery.sap.declare("sap.ushell.ui.tile.ImageTile");sap.ushell.ui.tile.TileBase.extend("sap.ushell.ui.tile.ImageTile",{metadata:{library:"sap.ushell",properties:{"imageSource":{type:"string",group:"Appearance",defaultValue:null}}}});};if(!jQuery.sap.isDeclared('sap.ushell.ui.tile.ImageTileRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.tile.ImageTileRenderer");sap.ushell.ui.tile.ImageTileRenderer=sap.ui.core.Renderer.extend(sap.ushell.ui.tile.TileBaseRenderer);sap.ushell.ui.tile.ImageTileRenderer.renderPart=function(r,c){r.write("<img");r.addClass("sapUshellImageTile");r.writeClasses();r.writeAttributeEscaped("src",c.getImageSource());r.write("/>");};}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.tile.StaticTile')){jQuery.sap.declare("sap.ushell.ui.tile.StaticTile");sap.ushell.ui.tile.TileBase.extend("sap.ushell.ui.tile.StaticTile",{metadata:{library:"sap.ushell"}});};if(!jQuery.sap.isDeclared('sap.ushell.ui.tile.StaticTileRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.tile.StaticTileRenderer");sap.ushell.ui.tile.StaticTileRenderer=sap.ui.core.Renderer.extend(sap.ushell.ui.tile.TileBaseRenderer);sap.ushell.ui.tile.StaticTileRenderer.renderPart=function(r,c){r.write("<span");r.addClass("sapUshellStaticTile");r.writeClasses();r.write(">");r.write("</span>");};}());};if(!jQuery.sap.isDeclared('sap.ushell.adapters.local.AppStateAdapter')){(function(){"use strict";jQuery.sap.declare("sap.ushell.adapters.local.AppStateAdapter");sap.ushell.adapters.local.AppStateAdapter=function(s,p,c){this._oConfig=c&&c.config;};sap.ushell.adapters.local.AppStateAdapter.prototype._getPersonalizationService=function(){return sap.ushell.Container.getService("Personalization");};sap.ushell.adapters.local.AppStateAdapter.prototype.saveAppState=function(k,s,v,a,c){var p=this._getPersonalizationService(),d=new jQuery.Deferred();p.createEmptyContainer(k,{keyCategory:p.constants.keyCategory.GENERATED_KEY,writeFrequency:p.constants.writeFrequency.HIGH,clientStorageAllowed:false}).done(function(C){C.setItemValue("appStateData",v);C.save().done(function(){d.resolve();}).fail(function(m){d.reject(m);jQuery.sap.log.error(m);});}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};sap.ushell.adapters.local.AppStateAdapter.prototype.loadAppState=function(k){var p=this._getPersonalizationService(),d=new jQuery.Deferred();p.getContainer(k,{keyCategory:p.constants.keyCategory.GENERATED_KEY,writeFrequency:p.constants.writeFrequency.HIGH,clientStorageAllowed:false}).done(function(c){var v=c.getItemValue("appStateData");d.resolve(k,v);}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};}());};if(!jQuery.sap.isDeclared('sap.ushell.adapters.local.UserDefaultParameterPersistenceAdapter')){(function(){"use strict";jQuery.sap.declare("sap.ushell.adapters.local.UserDefaultParameterPersistenceAdapter");sap.ushell.adapters.local.UserDefaultParameterPersistenceAdapter=function(s,p,c){this._oConfig=c&&c.config;};sap.ushell.adapters.local.UserDefaultParameterPersistenceAdapter.prototype._getPersonalizationService=function(){return sap.ushell.Container.getService("Personalization");};sap.ushell.adapters.local.UserDefaultParameterPersistenceAdapter.prototype.saveParameterValue=function(p,v){var d=new jQuery.Deferred();if(!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p))){jQuery.sap.log.error("Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}this._getUDContainer().done(function(c){c.setItemValue(p,v);c.save().done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};sap.ushell.adapters.local.UserDefaultParameterPersistenceAdapter.prototype.deleteParameter=function(p,v){var d=new jQuery.Deferred();if(!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p))){jQuery.sap.log.error("Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}this._getUDContainer().done(function(c){c.delItem(p);c.save().done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};sap.ushell.adapters.local.UserDefaultParameterPersistenceAdapter.prototype.loadParameterValue=function(p){var d=new jQuery.Deferred();this._getUDContainer().done(function(c){var v=c.getItemValue(p);if(v){d.resolve(v);}else{d.reject("no value ");}}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};sap.ushell.adapters.local.UserDefaultParameterPersistenceAdapter.prototype.getStoredParameterNames=function(){var d=new jQuery.Deferred();this._getUDContainer().done(function(c){var v=c.getItemKeys();d.resolve(v);}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};sap.ushell.adapters.local.UserDefaultParameterPersistenceAdapter.prototype._getUDContainer=function(){var p=this._getPersonalizationService();if(this._oPromise){return this._oPromise;}this._oPromise=p.getContainer("sap.ushell.UserDefaultParameter",{keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true});return this._oPromise;};}());};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchFieldGroup')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchFieldGroup');(function(){"use strict";sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchFieldGroup",{metadata:{properties:{"selectActive":{defaultValue:true,type:"boolean"},"inputActive":{defaultValue:true,type:"boolean"},"buttonActive":{defaultValue:true,type:"boolean"}},aggregations:{"select":{type:"sap.ui.core.Control",multiple:false},"input":{type:"sap.ui.core.Control",multiple:false},"button":{type:"sap.ui.core.Control",multiple:false}}},init:function(){var t=this;t.initSelect();t.initInput();t.initButton();},initSelect:function(){var t=this;var s=new sap.ushell.renderers.fiori2.search.controls.SearchSelect(t.getId()+'-select',{});s.attachChange(function(){if(t.getAggregation("input")){var i=t.getAggregation("input");i.focus();i.destroySuggestionRows();}});t.setAggregation("select",s);},initInput:function(){var t=this;var i=new sap.ushell.renderers.fiori2.search.controls.SearchInput(t.getId()+'-input',{});t.setAggregation("input",i);},initButton:function(){var t=this;var b=new sap.ushell.renderers.fiori2.search.controls.SearchButton(t.getId()+'-button',{press:function(e){if(t.getAggregation("input")&&t.getAggregation("input").getValue()!==''){b.getModel().invalidateQuery();var i=t.getAggregation("input");i.destroySuggestionRows();i.triggerSearch(e);}}});t.setAggregation("button",b);},setModel:function(m){if(this.getSelectActive()){this.getAggregation("select").setModel(m);}if(this.getInputActive()){this.getAggregation("input").setModel(m);}if(this.getButtonActive()){this.getAggregation("button").setModel(m);}},renderer:function(r,c){r.write('<div');r.writeControlData(c);r.addClass("SearchFieldGroup");r.writeClasses();r.write('>');r.write('<div class="sapUshellSearchFieldGroupContainer">');r.write('<div class="sapUshellSearchFieldGroupSubContainer">');if(c.getSelectActive()===true){r.renderControl(c.getAggregation("select"));}if(c.getInputActive()===true){r.renderControl(c.getAggregation("input"));}r.write('</div>');if(c.getButtonActive()===true){r.renderControl(c.getAggregation("button"));}r.write('</div>');r.write('</div>');}});}());};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.suggestions.InA1SuggestionProvider')){(function(){"use strict";var S=sap.ushell.renderers.fiori2.search.SearchHelper;var I=sap.ushell.renderers.fiori2.search.suggestions.InABaseSuggestionProvider;var a=sap.ushell.renderers.fiori2.search.suggestions.SuggestionTypes;jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.InA1SuggestionProvider');var m=sap.ushell.renderers.fiori2.search.suggestions.InA1SuggestionProvider=function(){this.init.apply(this,arguments);};m.prototype=jQuery.extend(new I(),{init:function(p){I.prototype.init.apply(this,arguments);this.getResultSet=S.refuseOutdatedRequests(this.getResultSet);},getResultSet:function(){return this.suggestionQuery.getResultSet();},abortSuggestions:function(){this.getResultSet.abort();},getSuggestions:function(){var t=this;if(!t.model.isBusinessObjSearchEnabled()){return jQuery.when([]);}if(t.model.getDataSource().equals(t.model.appDataSource)){return jQuery.when([]);}var s=t.model.getProperty('/searchBoxTerm');if(s.length<3&&t.model.isAllCategory()){return jQuery.when([]);}var b=t.splitSuggestionTerm(s);t.suggestionQuery.clearSearchTerms();if(b.searchTerm){t.suggestionQuery.addSearchTerm(b.searchTerm);}t.suggestionQuery.setSuggestionTerm(b.suggestionTerm);t.suggestionQuery.setDataSource(t.model.getProperty("/dataSource"));return t.getResultSet().then(function(r){var c=r.getElements();t.concatenateSearchTerm(c,b);var n=t.assembleNormalSuggestionItems(c,s);for(var i=0;i<n.length;i++){var d=n[i];if(t.model.isAllCategory()&&d.dataSourceLabel){d.label=d.label+" <i>in "+d.dataSourceLabel+"</i>";}}return n;});},assembleNormalSuggestionItems:function(s,b){var t=this;var r=[];for(var i=0;i<s.length;i++){var c=s[i];var f;if(i===0){f=c.labelRaw;}if(c.attribute.value!=="$$AllAttributes$$"){continue;}if(t.model.isAllCategory()){if(!c.dataSource.equals(t.model.allDataSource)){if(f===c.labelRaw){c.dataSourceLabel=c.dataSource.getLabel();}else{continue;}}}else{if(c.dataSource.equals(t.model.allDataSource)===true){c.dataSource=t.model.getDataSource();c.dataSourceLabel=c.dataSource.getLabel();}else{continue;}}if(jQuery.type(c.label)==="string"&&c.label.length<1){c.label=c.labelRaw;}c.type=a.SUGGESTION_TYPE_OBJECT_DATA;c.position=a.objectData.position;r.push(c);if(a.objectData.limit===r.length){break;}}return r;}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.suggestions.InA2SuggestionProvider')){(function(){"use strict";var S=sap.ushell.renderers.fiori2.search.SearchHelper;var I=sap.ushell.renderers.fiori2.search.suggestions.InABaseSuggestionProvider;var a=sap.ushell.renderers.fiori2.search.suggestions.SuggestionTypes;jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.InA2SuggestionProvider');var b=function(){this.init.apply(this,arguments);};b.prototype={init:function(){this.terms={};},addTerm:function(t){t=t.trim().toLowerCase();this.terms[t]=true;},hasTerm:function(t){t=t.trim().toLowerCase();return!!this.terms[t];},reset:function(){this.terms={};}};var m=sap.ushell.renderers.fiori2.search.suggestions.InA2SuggestionProvider=function(){this.init.apply(this,arguments);};m.prototype=jQuery.extend(new I(),{suggestionLimit:jQuery.device.is.phone?5:7,init:function(p){I.prototype.init.apply(this,arguments);this.getResultSet=S.refuseOutdatedRequests(this.getResultSet);this.dataSourceDeferred=null;},abortSuggestions:function(){this.getResultSet.abort();},getResultSet:function(){return this.suggestionQuery.getResultSet();},getSuggestions:function(){var t=this;var s=t.getAllAndAppSuggestions();if(!t.model.isBusinessObjSearchEnabled()){return jQuery.when(s);}if(t.model.getDataSource().equals(t.model.appDataSource)){return jQuery.when(s);}var c=t.model.getProperty('/searchBoxTerm');var d=t.splitSuggestionTerm(c);t.suggestionQuery.clearSearchTerms();if(d.searchTerm){t.suggestionQuery.addSearchTerm(d.searchTerm);}t.suggestionQuery.setSuggestionTerm(d.suggestionTerm);if(!t.suggestionQuery.getDataSource()||!t.model.getProperty('/dataSource').equals(t.suggestionQuery.getDataSource())){t.suggestionQuery.resetFilterConditions();}t.suggestionQuery.setDataSource(t.model.getProperty("/dataSource"));return t.getResultSet().then(function(r){var e=r.getElements();t.concatenateSearchTerm(e,d);var f=t.formatSinaSuggestions(e);s.push.apply(s,f);return s;});},getAllAndAppSuggestions:function(){if(!this.model.getDataSource().equals(this.model.allDataSource)){return[];}var d=[];d.unshift(this.model.appDataSource);d.unshift(this.model.allDataSource);var c=[];var s=this.model.getProperty('/searchBoxTerm');var e=s.replace(/\*/g,'');var t=new S.Tester(e);for(var i=0;i<d.length;++i){var f=d[i];if(f.key===this.model.getDataSource().key){continue;}var T=t.test(f.label);if(T.bMatch===true){var g={};g.label='<i>'+sap.ushell.resources.i18n.getText("searchInPlaceholder",T.sHighlightedText)+'</i>';g.labelRaw='';g.dataSource=f;g.type=a.SUGGESTION_TYPE_DATASOURCE;g.position=a.datasource.position;c.push(g);}}return c;},formatSinaSuggestions:function(s){this.suggestions=[];this.firstSuggestionTerm=null;this.numberObjectDataSuggestions=0;this.numberDataSourceSuggestions=0;this.numberHistorySuggestions=0;this.suggestionTermBuffer=new b();this.formatSinaSuggestionsInternal(s,['DataSources','ObjectData']);this.formatSinaSuggestionsInternal(s,['SearchHistory']);return this.suggestions;},formatSinaSuggestionsInternal:function(s,c){for(var i=0;i<s.length;++i){var d=s[i];if(c.indexOf(d.scope)<0){continue;}switch(d.scope){case'DataSources':this.formatDataSourceSuggestion(d);break;case'ObjectData':this.formatObjectDataSuggestion(d);break;case'SearchHistory':this.formatHistorySuggestion(d);break;default:break;}}},formatDataSourceSuggestion:function(s){if(!this.model.getDataSource().equals(this.model.allDataSource)){return;}if(this.numberDataSourceSuggestions>=a.datasource.limit){return;}if(!s.dataSource.equals(this.model.allDataSource)){return;}if(!s.labelRaw){return;}this.numberDataSourceSuggestions++;this.suggestions.push({label:'<i>'+sap.ushell.resources.i18n.getText("searchInPlaceholder",s.label)+'</i>',labelRaw:'',dataSource:s.labelRaw,type:a.SUGGESTION_TYPE_DATASOURCE,position:a.datasource.position});},formatObjectDataSuggestion:function(s){if(this.numberObjectDataSuggestions>=a.objectData.limit){return;}if(s.attribute.value!=='$$AllAttributes$$'){return;}if(this.firstSuggestionTerm===null){this.firstSuggestionTerm=s.labelRaw;}if(s.dataSource.equals(this.model.allDataSource)===true){this.numberObjectDataSuggestions++;this.suggestionTermBuffer.addTerm(s.labelRaw);var l;if(this.firstSuggestionTerm===s.labelRaw&&this.model.getDataSource().equals(this.model.allDataSource)){l=this.assembleSearchInSuggestionLabel(s);}else{l=s.label;}this.suggestions.push({label:l,labelRaw:s.labelRaw,position:a.objectData.position,type:a.SUGGESTION_TYPE_OBJECT_DATA,dataSource:this.model.getDataSource()});}else{if(this.firstSuggestionTerm!==s.labelRaw){return;}if(!this.model.getDataSource().equals(this.model.allDataSource)){return;}this.numberObjectDataSuggestions++;this.suggestions.push({label:this.assembleSearchInSuggestionLabel(s),labelRaw:s.labelRaw,position:a.objectData.position,type:a.SUGGESTION_TYPE_OBJECT_DATA,dataSource:s.dataSource});}},formatHistorySuggestion:function(s){if(this.numberHistorySuggestions>=a.history.limit){return;}if(s.dataSource.equals(this.model.allDataSource)!==true){return;}if(this.suggestionTermBuffer.hasTerm(s.labelRaw)){return;}this.numberHistorySuggestions++;this.suggestions.push({label:s.label,labelRaw:s.labelRaw,position:a.history.position,type:a.SUGGESTION_TYPE_HISTORY,dataSource:this.model.getDataSource()});},assembleSearchInSuggestionLabel:function(s){return s.label+' <i>in '+s.dataSource.label+"</i>";}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.suggestions.SuggestionHandler')){(function(){"use strict";var S=sap.ushell.renderers.fiori2.search.SearchHelper;var I=sap.ushell.renderers.fiori2.search.suggestions.InA1SuggestionProvider;var a=sap.ushell.renderers.fiori2.search.suggestions.InA2SuggestionProvider;var D=sap.ushell.renderers.fiori2.search.suggestions.DataSourceSuggestionProvider;var A=sap.ushell.renderers.fiori2.search.suggestions.AppSuggestionProvider;jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.SuggestionHandler');var s=sap.ushell.renderers.fiori2.search.suggestions;s.SuggestionHandler=function(){this.init.apply(this,arguments);};s.SuggestionHandler.prototype={init:function(p){var t=this;t.model=p.model;t.sina=t.model.sina;t.suggestionProviders=[];t.inA1SuggestionProvider=new I({model:t.model,sina:t.sina,suggestionQuery:t.model.suggestionQuery});t.suggestionProviders.push(t.inA1SuggestionProvider);t.inA2SuggestionProvider=new a({model:t.model,sina:t.sina,suggestionQuery:t.model.suggestionQuery});t.suggestionProviders.push(t.inA2SuggestionProvider);t.dataSourceSuggestionProvider=new D({model:t.model,sina:t.sina});t.suggestionProviders.push(t.dataSourceSuggestionProvider);t.appSuggestionProvider=new A({model:t.model});t.suggestionProviders.push(t.appSuggestionProvider);t.doSuggestionInternal=S.delayedExecution(t.doSuggestionInternal,400);},abortSuggestions:function(c){if(c===undefined||c===true){this.model.setProperty("/suggestions",[]);}if(this.clearSuggestionTimer){clearTimeout(this.clearSuggestionTimer);this.clearSuggestionTimer=null;}this.doSuggestionInternal.abort();this.getSuggestionProviders().done(function(b){for(var i=0;i<b.length;++i){var d=b[i];d.abortSuggestions();}});},supportsScopeTypes:function(b){for(var i=0;i<b.rawServerInfo.Services.length;++i){var c=b.rawServerInfo.Services[i];if(c.Service==='Suggestions2'){for(var j=0;j<c.Capabilities.length;++j){var d=c.Capabilities[j];if(d.Capability==='ScopeTypes'){return true;}}}}return false;},getSuggestionProviders:function(){var t=this;if(t.suggestionProvidersDeferred){return t.suggestionProvidersDeferred;}t.suggestionProvidersDeferred=t.sina.sinaSystem().getServerInfo().then(function(b){if(!b.rawServerInfo){return[t.appSuggestionProvider];}if(t.supportsScopeTypes(b)){t.model.suggestionQuery.setOptions(['SynchronousRun','SuggestObjectData','SuggestDataSources','SuggestSearchHistory']);return[t.appSuggestionProvider,t.inA2SuggestionProvider];}else{t.model.suggestionQuery.setOptions(['SynchronousRun','SuggestObjectData']);return[t.appSuggestionProvider,t.dataSourceSuggestionProvider,t.inA1SuggestionProvider];}},function(){return jQuery.when([t.appSuggestionProvider]);});return t.suggestionProvidersDeferred;},isSuggestionPopupVisible:function(){return jQuery('.searchBOSuggestion').filter(':visible').length>0;},doSuggestion:function(){var t=this;if(this.isSuggestionPopupVisible()){this.abortSuggestions(false);this.clearSuggestionTimer=setTimeout(function(){t.clearSuggestionTimer=null;t.model.setProperty("/suggestions",[]);},1000);}else{this.abortSuggestions();}this.doSuggestionInternal();},doSuggestionInternal:function(){var t=this;var b=t.model.getProperty("/searchBoxTerm");if(b.length===0){return;}if(b.trim()==='*'){return;}t.model.analytics.logCustomEvent('FLP: Search','Suggestion',[t.model.getProperty('/searchBoxTerm'),t.model.getProperty('/dataSource').key]);t.getSuggestionProviders().done(function(c){var f=true;var p=c.length;for(var i=0;i<c.length;++i){var d=c[i];d.getSuggestions().done(function(r){p--;if(p>0&&r.length===0){return;}if(t.clearSuggestionTimer){clearTimeout(t.clearSuggestionTimer);t.clearSuggestionTimer=null;}t.insertSuggestions(r,f);f=false;});}});},insertSuggestions:function(i,f){var s=this.model.getProperty('/suggestions');if(f){s=[];}var g=this._groupByPosition(i);for(var p in g){var b=g[p];this._insertSuggestions(s,b);}this.model.setProperty('/suggestions',s);},_groupByPosition:function(s){var g={};for(var i=0;i<s.length;++i){var b=s[i];var c=g[b.position];if(!c){c=[];g[b.position]=c;}c.push(b);}return g;},_insertSuggestions:function(s,i){if(i.length<=0){return;}var b=i[0];var c=0;for(;c<s.length;++c){var d=s[c];if(d.position>b.position){break;}}var e=[c,0];e.push.apply(e,i);s.splice.apply(s,e);}};})();};if(!jQuery.sap.isDeclared('sap.ushell.services.CrossApplicationNavigation')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.CrossApplicationNavigation");sap.ushell.services.CrossApplicationNavigation=function(){var a;function g(t,c){var r,s,S,C,b,o;if(typeof t!=="string"&&!jQuery.isPlainObject(t)&&t!==undefined){jQuery.sap.log.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined;}if(t===undefined){return undefined;}if(c){if(typeof c.getComponentData!=="function"||!jQuery.isPlainObject(c.getComponentData())||!c.getComponentData().startupParameters||!jQuery.isPlainObject(c.getComponentData().startupParameters)){jQuery.sap.log.error("Cannot call getComponentData on component","the component should be an application root component","sap.ushell.services.CrossApplicationNavigation");}else{o=c.getComponentData().startupParameters;if(o.hasOwnProperty("sap-system")){S=o["sap-system"][0];}}}else{r=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(r&&r["sap-system"]){S=r["sap-system"];}else if(r&&r.url){S=jQuery.sap.getUriParameters(r.url).get("sap-system");}}if(jQuery.isPlainObject(t)){C=jQuery.extend(true,{},t);if(!S){return C;}if(C.target&&C.target.shellHash){if(typeof C.target.shellHash==="string"){C.target.shellHash=g(C.target.shellHash,c);}return C;}C.params=C.params||{};if(!Object.prototype.hasOwnProperty.call(C.params,"sap-system")){C.params["sap-system"]=S;}return C;}else{b=t;if(!S){return b;}if(!/[?&]sap-system=/.test(b)){s=(b.indexOf("?")>-1)?"&":"?";b+=s+"sap-system="+S;}return b;}}this.hrefForExternal=function(A,c,b){var o;if(sap.ushell&&sap.ushell.services&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation")){o=g(A,c);return sap.ushell.Container.getService("ShellNavigation").hrefForExternal(o,undefined,c,b);}jQuery.sap.log.debug("Shell not available, no Cross App Navigation");if(b){return(new jQuery.Deferred()).resolve("").promise();}return"";};this.expandCompactHash=function(h){return sap.ushell.Container.getService("NavTargetResolution").expandCompactHash(h);};this.backToPreviousApp=function(){this.historyBack();};this.historyBack=function(){window.history.back();};this.toExternal=function(A,c){var o;if(sap.ushell&&sap.ushell.services&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation")){o=g(A,c);sap.ushell.Container.getService("ShellNavigation").toExternal(o,c);return;}jQuery.sap.log.debug("Shell not avialable, no Cross App Navigation");return;};this.hrefForAppSpecificHash=function(A){if(sap.ushell&&sap.ushell.services&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation")){return sap.ushell.Container.getService("ShellNavigation").hrefForAppSpecificHash(A);}jQuery.sap.log.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return"#"+encodeURI(A);};this.getSemanticObjectLinks=function(s,p,i,c,A,C){var P=g({params:p},c).params,S=sap.ushell.Container.getService("NavTargetResolution"),e=sap.ushell.utils.invokeUnfoldingArrayArguments(S.getSemanticObjectLinks.bind(S),[s,P,i,c,A,!!C]);return e;};this.isIntentSupported=function(i,c){var d=new jQuery.Deferred(),o={},C=i.map(function(I){var s=g(I,c);o[s]=I;return s;});sap.ushell.Container.getService("NavTargetResolution").isIntentSupported(C).done(function(I){var m={};Object.keys(I).forEach(function(k){m[o[k]]=I[k];});d.resolve(m);}).fail(d.reject.bind(d));return d.promise();};this.isNavigationSupported=function(i,c){var C=i.map(function(I){return g(I,c);});return sap.ushell.Container.getService("NavTargetResolution").isNavigationSupported(C);};this.isUrlSupported=function(u){var d=new jQuery.Deferred(),U,h;if(typeof u!=="string"){d.reject();return d.promise();}U=sap.ushell.Container.getService("URLParsing");if(U.isIntentUrl(u)){h=U.getHash(u);this.isIntentSupported(["#"+h]).done(function(r){if(r["#"+h]&&r["#"+h].supported){d.resolve();}else{d.reject();}}).fail(function(){d.reject();});}else{d.resolve();}return d.promise();};this.createComponentInstance=function(i,c){var d=new jQuery.Deferred(),u=sap.ushell.Container.getService("URLParsing"),C=u.constructShellHash(u.parseShellHash(i));if(!C){d.reject("Navigation intent invalid!");return d.promise();}sap.ushell.Container.getService("NavTargetResolution").resolveHashFragment("#"+C).done(function(r){var I=r.url.indexOf("?"),o={startupParameters:{}};c=c||{};if(r.applicationType!==sap.ushell.components.container.ApplicationType.URL&&!(/^SAPUI5\.Component=/.test(r.additionalInformation))){d.reject("The resolved target mapping is not of type UI5 component.");return d.promise();}if(I>=0){o.startupParameters=jQuery.sap.getUriParameters(r.url).mParams;o["sap-xapp-state"]=o.startupParameters["sap-xapp-state"];delete o.startupParameters["sap-xapp-state"];r.url=r.url.slice(0,I);}c.name=r.additionalInformation&&r.additionalInformation.replace(/^SAPUI5\.Component=/,"");c.url=r.url;if(c.componentData){jQuery.extend(true,o,c.componentData);}c.componentData=o;if(c.async===true){sap.ui.component(c).then(function(b){d.resolve(b);},function(e){e=e||"";jQuery.sap.log.error("Cannot create UI5 component: "+e,e.stack,"sap.ushell.services.CrossApplicationNavigation");d.reject(e);});}else{d.resolve(sap.ui.component(c));}}).fail(function(m){d.reject(m);});return d.promise();};this.createEmptyAppState=function(A){if(!a){a=sap.ushell.Container.getService("AppState");}if(!(A instanceof sap.ui.core.UIComponent)){throw new Error("oAppComponent passed must be a UI5 Component");}return a.createEmptyAppState(A);};this.getStartupAppState=function(A){this._checkComponent(A);var c=A.getComponentData()&&A.getComponentData()["sap-xapp-state"]&&A.getComponentData()["sap-xapp-state"][0];return this.getAppState(A,c);};this._checkComponent=function(A){if(!(A instanceof sap.ui.core.UIComponent)){throw new Error("oComponent passed must be a UI5 Component");}};this.getAppState=function(A,s){var c,d=new jQuery.Deferred();this._checkComponent(A);if(!a){a=sap.ushell.Container.getService("AppState");}if(typeof s!=="string"){if(s!==undefined){jQuery.sap.log.error("Illegal Argument sAppStateKey ");}setTimeout(function(){c=a.createEmptyUnmodifiableAppState(A);d.resolve(c);},0);return d.promise();}return a.getAppState(s);};this.getAppStateData=function(A){return sap.ushell.utils.invokeUnfoldingArrayArguments(this._getAppStateData.bind(this),[A]);};this._getAppStateData=function(A){var d=new jQuery.Deferred();if(!a){a=sap.ushell.Container.getService("AppState");}if(typeof A!=="string"){if(A!==undefined){jQuery.sap.log.error("Illegal Argument sAppStateKey ");}setTimeout(function(){d.resolve(undefined);},0);}else{a.getAppState(A).done(function(o){d.resolve(o.getData());}).fail(d.resolve.bind(d,undefined));}return d.promise();};this.saveMultipleAppStates=function(A){var r=[],d=new jQuery.Deferred();A.forEach(function(o){r.push(o.save());});jQuery.when.apply(this,r).done(function(){d.resolve(r);}).fail(function(){d.reject("save failed");});return d.promise();};};sap.ushell.services.CrossApplicationNavigation.hasNoAdapter=true;}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.ShellLayout')){
/*!
 * ${copyright}
 */
jQuery.sap.declare('sap.ushell.ui.shell.ShellLayout');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.Device');jQuery.sap.require('sap.ui.core.Control');jQuery.sap.require('sap.ui.core.Popup');jQuery.sap.require('sap.ui.core.theming.Parameters');jQuery.sap.require('jquery.sap.dom');jQuery.sap.require('jquery.sap.script');sap.ui.define("sap/ushell/ui/shell/ShellLayout",['jquery.sap.global','sap/ui/Device','sap/ui/core/Control','sap/ui/core/Popup','sap/ui/core/theming/Parameters','./SplitContainer','./ToolArea','./ToolAreaItem','./ShellTitle','sap/ushell/library','jquery.sap.dom','jquery.sap.script'],function(q,D,C,P,a,S,T,b){"use strict";var c=C.extend("sap.ushell.ui.shell.ShellLayout",{metadata:{properties:{showPane:{type:"boolean",group:"Appearance",defaultValue:false},headerHiding:{type:"boolean",group:"Appearance",defaultValue:false},headerVisible:{type:"boolean",group:"Appearance",defaultValue:true},toolAreaVisible:{type:"boolean",group:"Appearance",defaultValue:false},title:{type:"string",group:"Appearance"}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},paneContent:{type:"sap.ui.core.Control",multiple:true,singularName:"paneContent"},header:{type:"sap.ui.core.Control",multiple:false},toolArea:{type:"sap.ushell.ui.shell.ToolArea",multiple:false},toolAreaItems:{type:"sap.ushell.ui.shell.ToolAreaItem",multiple:true,singularName:"toolAreaItem"},canvasSplitContainer:{type:"sap.ushell.ui.shell.SplitContainer",multiple:false,visibility:"hidden"},curtainSplitContainer:{type:"sap.ushell.ui.shell.SplitContainer",multiple:false,visibility:"hidden"},subHeaders:{type:"sap.ui.core.Control",multiple:true,singularName:"subHeader"}}}});c._SIDEPANE_WIDTH_PHONE=13;c._SIDEPANE_WIDTH_TABLET=13;c._SIDEPANE_WIDTH_DESKTOP=15;c._HEADER_ALWAYS_VISIBLE=true;c._HEADER_AUTO_CLOSE=true;c._HEADER_TOUCH_TRESHOLD=15;if(D.browser.chrome&&D.browser.version<36){c._HEADER_TOUCH_TRESHOLD=10;}c.prototype.init=function(){this._rtl=sap.ui.getCore().getConfiguration().getRTL();this._animation=sap.ui.getCore().getConfiguration().getAnimation();this._showHeader=true;this._showCurtain=false;this._iHeaderHidingDelay=3000;this._useStrongBG=false;this._cont=new S(this.getId()+"-container");this._cont._bRootContent=true;this.setAggregation("canvasSplitContainer",this._cont,true);this._curtCont=new S(this.getId()+"-curt-container");this._curtCont._bRootContent=true;this.setAggregation("curtainSplitContainer",this._curtCont,true);this._toolArea=new T(this.getId()+"-toolarea");this.setToolArea(this._toolArea);this._setSidePaneWidth();D.media.attachHandler(this._handleMediaChange,this,D.media.RANGESETS.SAP_STANDARD);D.resize.attachHandler(this._handleResizeChange,this);};c.prototype.exit=function(){D.media.detachHandler(this._handleMediaChange,this,D.media.RANGESETS.SAP_STANDARD);D.resize.detachHandler(this._handleResizeChange,this);delete this._cont;delete this._curtCont;};c.prototype.addSubHeader=function(o){this.addAggregation('subHeaders',o,true);this._cont.addSubHeader(o.clone());return this;};c.prototype.removeSubHeader=function(o){var i=this.indexOfSubHeader(o),d=this._cont.getAggregation("subHeaders")[i];if(d){this._cont.removeSubHeader(d);this.removeAggregation("subHeaders",o);}return this;};c.prototype.insertSubHeader=function(o,i){this.insertAggregation('subHeaders',o,i,true);this._cont.insertSubHeader(o.clone(),i);return this;};c.prototype.removeAllSubHeaders=function(){this.removeAllAggregation('subHeaders',true);return this._cont.removeAllSubHeaders();};c.prototype.destroySubHeaders=function(){this.destroyAggregation('subHeaders',true);this._cont.destroySubHeaders();return this;};c.prototype.onAfterRendering=function(){var t=this;function h(B){var e=q.event.fix(B);if(q.sap.containsOrEquals(t.getDomRef("hdr"),e.target)){t._timedHideHeader(e.type==="focus");}}if(window.addEventListener&&!c._HEADER_ALWAYS_VISIBLE){var H=this.getDomRef("hdr");H.addEventListener("focus",h,true);H.addEventListener("blur",h,true);}this._cont._applySecondaryContentSize();this._refreshAfterRendering();};c.prototype.onThemeChanged=function(){this._refreshAfterRendering();};c.prototype.onfocusin=function(e){var i=this.getId();if(e.target.id===i+"-curt-focusDummyOut"){q.sap.focus(this.$("hdrcntnt").firstFocusableDomRef());}else if(e.target.id===i+"-main-focusDummyOut"){q.sap.focus(this.$("curtcntnt").firstFocusableDomRef());}};(function(){function _(s){if(s._startY===undefined||s._currY===undefined){return;}var y=s._currY-s._startY;if(Math.abs(y)>c._HEADER_TOUCH_TRESHOLD){s._doShowHeader(y>0);s._startY=s._currY;}}if(D.support.touch){c._HEADER_ALWAYS_VISIBLE=false;c.prototype.ontouchstart=function(e){this._startY=e.touches[0].pageY;if(this._startY>2*48){this._startY=undefined;}this._currY=this._startY;};c.prototype.ontouchend=function(){_(this);this._startY=undefined;this._currY=undefined;};c.prototype.ontouchcancel=c.prototype.ontouchend;c.prototype.ontouchmove=function(e){this._currY=e.touches[0].pageY;_(this);};}})();c.prototype.setHeaderHiding=function(e){e=!!e;return this._mod(function(r){return this.setProperty("headerHiding",e,r);},function(){this._doShowHeader(!e?true:this._showHeader);});};c.prototype.setHeaderHidingDelay=function(d){this._iHeaderHidingDelay=d;return this;};c.prototype.getHeaderHidingDelay=function(){return this._iHeaderHidingDelay;};c.prototype.getShowPane=function(){return this._cont.getShowSecondaryContent();};c.prototype.setShowPane=function(s){this._cont.setShowSecondaryContent(s);this.setProperty("showPane",!!s,true);return this;};c.prototype.getToolAreaVisible=function(){return this.getToolArea().getVisible();};c.prototype.getToolAreaItems=function(){return this.getToolArea().getToolAreaItems();};c.prototype.addToolAreaItem=function(t){this.getToolArea().addToolAreaItem(t);};c.prototype.setTitle=function(t,i){this.getHeader().setTitleControl(t,i);};c.prototype.getTitle=function(t,i){var o=this.getHeader().getTitle();if(o){return o.getText();}return null;};c.prototype.removeToolAreaItem=function(t){this.getToolArea().removeToolAreaItem(t);};c.prototype.setToolAreaVisible=function(v){this.getToolArea().setVisible(!!v);this.setProperty("toolAreaVisible",!!v,true);this._cont._applySecondaryContentSize();return this;};c.prototype.setShowCurtainPane=function(s){this._curtCont.setShowSecondaryContent(s);return this;};c.prototype.getShowCurtainPane=function(){return this._curtCont.getShowSecondaryContent();};c.prototype.setHeaderVisible=function(h){h=!!h;this.setProperty("headerVisible",h,true);this.$().toggleClass("sapUshellShellNoHead",!h);return this;};c.prototype.setShowCurtain=function(s){s=!!s;return this._mod(function(){this._showCurtain=s;return this;},function(){this.$("main-focusDummyOut").attr("tabindex",s?0:-1);this.$().toggleClass("sapUshellShellCurtainHidden",!s).toggleClass("sapUshellShellCurtainVisible",s);if(s){var z=P.getNextZIndex();this.$("curt").css("z-index",z+1);this.$("hdr").css("z-index",z+3);this.$("brand").css("z-index",z+7);this.$().toggleClass("sapUshellShellCurtainClosed",false);}this._timedCurtainClosed(s);this._doShowHeader(true);});};c.prototype.getShowCurtain=function(){return this._showCurtain;};c.prototype.getContent=function(){return this._cont.getContent();};c.prototype.insertContent=function(o,i){this._cont.insertContent(o,i);return this;};c.prototype.addContent=function(o){this._cont.addContent(o);return this;};c.prototype.removeContent=function(i){return this._cont.removeContent(i);};c.prototype.removeAllContent=function(){return this._cont.removeAllContent();};c.prototype.destroyContent=function(){this._cont.destroyContent();return this;};c.prototype.indexOfContent=function(o){return this._cont.indexOfContent(o);};c.prototype.getPaneContent=function(){return this._cont.getSecondaryContent();};c.prototype.insertPaneContent=function(o,i){this._cont.insertSecondaryContent(o,i);return this;};c.prototype.addPaneContent=function(o){this._cont.addSecondaryContent(o);return this;};c.prototype.removePaneContent=function(i){return this._cont.removeSecondaryContent(i);};c.prototype.removeAllPaneContent=function(){return this._cont.removeAllSecondaryContent();};c.prototype.destroyPaneContent=function(){this._cont.destroySecondaryContent();return this;};c.prototype.indexOfPaneContent=function(o){return this._cont.indexOfSecondaryContent(o);};c.prototype.setHeader=function(h){this.setAggregation("header",h,true);h=this.getHeader();if(this.getDomRef()){if(!h){this.$("hdrcntnt").html("");}else{var r=sap.ui.getCore().createRenderManager();r.renderControl(h);r.flush(this.getDomRef("hdrcntnt"));r.destroy();}}return this;};c.prototype.destroyHeader=function(){this.destroyAggregation("header",true);this.$("hdrcntnt").html("");return this;};c.prototype.setToolArea=function(t){this.setAggregation("toolArea",t,true);t=this.getToolArea();if(this.getDomRef()){if(!t){this.$("toolareacntnt").html("");}else{var r=sap.ui.getCore().createRenderManager();r.renderControl(t);r.flush(this.getDomRef("toolareacntnt"));r.destroy();}}return this;};c.prototype.destroyToolArea=function(){this.destroyAggregation("toolArea",true);this.$("toolareacntnt").html("");return this;};c.prototype.getCurtainContent=function(){return this._curtCont.getContent();};c.prototype.insertCurtainContent=function(o,i){this._curtCont.insertContent(o,i);return this;};c.prototype.addCurtainContent=function(o){this._curtCont.addContent(o);return this;};c.prototype.removeCurtainContent=function(i){return this._curtCont.removeContent(i);};c.prototype.removeAllCurtainContent=function(){return this._curtCont.removeAllContent();};c.prototype.destroyCurtainContent=function(){this._curtCont.destroyContent();return this;};c.prototype.indexOfCurtainContent=function(o){return this._curtCont.indexOfCurtainContent(o);};c.prototype.getCurtainPaneContent=function(){return this._curtCont.getSecondaryContent();};c.prototype.insertCurtainPaneContent=function(o,i){this._curtCont.insertSecondaryContent(o,i);return this;};c.prototype.addCurtainPaneContent=function(o){this._curtCont.addSecondaryContent(o);return this;};c.prototype.removeCurtainPaneContent=function(i){return this._curtCont.removeSecondaryContent(i);};c.prototype.removeAllCurtainPaneContent=function(){return this._curtCont.removeAllSecondaryContent();};c.prototype.destroyCurtainPaneContent=function(){this._curtCont.destroySecondaryContent();return this;};c.prototype.indexOfCurtainPaneContent=function(o){return this._curtCont.indexOfSecondaryContent(o);};c.prototype._setStrongBackground=function(u){this._useStrongBG=!!u;this.$("strgbg").toggleClass("sapUiStrongBackgroundColor",this._useStrongBG);};c.prototype._mod=function(m,d){var r=!!this.getDomRef();var e=m.apply(this,[r]);if(r&&d){if(d instanceof sap.ushell.ui.shell.shell_ContentRenderer){d.render();}else{d.apply(this);}}return e;};c.prototype._doShowHeader=function(s){var w=this._showHeader;this._showHeader=this._isHeaderHidingActive()?!!s:true;this.$().toggleClass("sapUshellShellHeadHidden",!this._showHeader).toggleClass("sapUshellShellHeadVisible",this._showHeader);if(this._showHeader){this._timedHideHeader();}if(w!==this._showHeader&&this._isHeaderHidingActive()){q.sap.delayedCall(500,this,function(){try{var r=document.createEvent("UIEvents");r.initUIEvent("resize",true,false,window,0);window.dispatchEvent(r);}catch(e){q.sap.log.error(e);}});}};c.prototype._timedHideHeader=function(d){if(this._headerHidingTimer){q.sap.clearDelayedCall(this._headerHidingTimer);this._headerHidingTimer=null;}if(d||!c._HEADER_AUTO_CLOSE||!this._isHeaderHidingActive()||this._iHeaderHidingDelay<=0){return;}this._headerHidingTimer=q.sap.delayedCall(this._iHeaderHidingDelay,this,function(){if(this._isHeaderHidingActive()&&this._iHeaderHidingDelay>0&&!q.sap.containsOrEquals(this.getDomRef("hdr"),document.activeElement)){this._doShowHeader(false);}});};c.prototype._timedCurtainClosed=function(d){if(this._curtainClosedTimer){q.sap.clearDelayedCall(this._curtainClosedTimer);this._curtainClosedTimer=null;}if(d){return;}var e=parseInt(a.get("sapUshellShellAnimDuration"),10);if(!this._animation||(D.browser.internet_explorer&&D.browser.version<10)){e=0;}this._curtainClosedTimer=q.sap.delayedCall(e,this,function(){this._curtainClosedTimer=null;this.$("curt").css("z-index","");this.$("hdr").css("z-index","");this.$("brand").css("z-index","");this.$().toggleClass("sapUshellShellCurtainClosed",true);});};c.prototype._isHeaderHidingActive=function(){if(c._HEADER_ALWAYS_VISIBLE||this.getShowCurtain()||!this.getHeaderHiding()||sap.ushell.ui.shell.shell_iNumberOfOpenedShellOverlays>0||!this.getHeaderVisible()){return false;}return true;};c.prototype._refreshCSSWorkaround=function(){if(!D.browser.webkit||!D.support.touch){return;}if(this._cssWorkaroundTimer){q.sap.clearDelayedCall(this._cssWorkaroundTimer);this._cssWorkaroundTimer=null;}this.$("css").remove();this._cssWorkaroundTimer=q.sap.delayedCall(10,this,function(){this._cssWorkaroundTimer=null;q.sap.log.debug("sap.ushell.ui.shell.ShellLayout: CSS Workaround applied.");q("head").append("<link type='text/css' rel='stylesheet' id='"+this.getId()+"-css' href='data:text/css;base64,LnNhcFVpVWZkU2hlbGxDaHJvbWVSZXBhaW50e291dGxpbmUtY29sb3I6aW5pdGlhbDt9'/>");this._cssWorkaroundTimer=q.sap.delayedCall(100,this,function(){this.$("css").remove();});});};c.prototype._setSidePaneWidth=function(r){if(!r){r=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;}var w=c["_SIDEPANE_WIDTH_"+r.toUpperCase()]+"rem";this._cont.setSecondaryContentSize(w);this._curtCont.setSecondaryContentSize(w);};c.prototype._handleMediaChange=function(p){if(!this.getDomRef()){return false;}this._setSidePaneWidth(p.name);this._cont._applySecondaryContentSize();};c.prototype._handleResizeChange=function(){};c.prototype._refreshAfterRendering=function(){var d=this.getDomRef();if(!d){return false;}setTimeout(function(){this._repaint(d);}.bind(this),700);this._timedHideHeader();return true;};c.prototype._repaint=function(d){if(D.browser.webkit){var e=d.style.display;d.style.display="none";d.offsetHeight;d.style.display=e;this._refreshCSSWorkaround();}};c.prototype._getSearchWidth=function(){return-1;};return c;},true);};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.SearchModel')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchModel');(function(g){"use strict";jQuery.sap.require('sap.ushell.renderers.fiori2.search.INAV2SearchFacetsFormatter');jQuery.sap.require('sap.ushell.renderers.fiori2.search.FacetItem');var s=g.sap;var S=s.ushell.renderers.fiori2.search.SearchHelper;var a=s.ushell.renderers.fiori2.search.SearchResultListFormatter;var T=s.ushell.renderers.fiori2.search.SearchTabStripsFormatter.Formatter;var b=s.ushell.renderers.fiori2.search.suggestions.SuggestionHandler;s.ushell.renderers.fiori2.search.getModelSingleton=function(){if(!s.ushell.renderers.fiori2.search.oModel){s.ushell.renderers.fiori2.search.oModel=new s.ushell.renderers.fiori2.search.SearchModel();}return s.ushell.renderers.fiori2.search.oModel;};s.ui.model.json.JSONModel.extend("sap.ushell.renderers.fiori2.search.SearchModel",{constructor:function(p){var t=this;p=p||{};s.ui.model.json.JSONModel.prototype.constructor.apply(t,[]);t.urlParameters=t.parseUrlParameters();t.setSizeLimit(200);t.sina=s.ushell.Container.getService("Search").getSina();this.suggestionQuery=this.sina.createSuggestionQuery();t.suggestionHandler=new b({model:this});t.query=t.sina.createPerspectiveQuery({templateFactsheet:true});t.resetFilterConditions(false);t.createAllAndAppDataSource();t.query.getResultSet=S.refuseOutdatedRequests(t.query.getResultSet,'search');t.searchApplications=S.refuseOutdatedRequests(t.searchApplications,'search');t.oFacetFormatter=new s.ushell.renderers.fiori2.search.INAV2SearchFacetsFormatter();t.tabStripFormatter=new T();t.dataSourceTree=t.tabStripFormatter.tree;t.appTopDefault=20;t.boTopDefault=10;this.setProperty('/isInvalidated',true);t.setProperty('/searchBoxTerm','');t.setProperty('/lastSearchTerm',null);t.setProperty('/isBusy',false);t.setProperty('/dataSource',null);t.setProperty('/lastDataSource',null);t.setProperty('/top',10);t.setProperty('/lastTop',10);t.setProperty('/skip',0);t.setProperty('/lastSkip',0);t.setProperty('/results',[]);t.setProperty('/appResults',[]);t.setProperty('/boResults',[]);t.setProperty('/count',0);t.setProperty('/boCount',0);t.setProperty('/appCount',0);t.setProperty('/facets',[]);t.setProperty('/filterConditions',[]);t.setProperty('/lastFilterConditions',[]);t.setProperty('/dataSources',[t.allDataSource,t.appDataSource]);t.setProperty('/recentDataSources',[]);t.setProperty('/businessObjSearchEnabled',true);t.setProperty('/suggestions',[]);t.setProperty('/resultsVisibility',true);t.setProperty('/appsVisibility',true);t.setProperty('/facetVisibility',S.loadFilterButtonStatus());t.setProperty('/lastFacetVisibility',false);t.resetDataSource(false);t.initBusinessObjSearch();try{t.analytics=s.ushell.Container.getService("UsageAnalytics");}catch(e){}if(!t.analytics){t.analytics={logCustomEvent:function(){}};}},doSuggestion:function(){this.suggestionHandler.doSuggestion();},abortSuggestions:function(){this.suggestionHandler.abortSuggestions();},parseUrlParameters:function(){var u=s.ushell.Container.getService("URLParsing");var p=u.parseParameters(window.location.search);var n={};for(var k in p){var v=p[k];if(v.length!==1){continue;}v=v[0];if(typeof v!=='string'){continue;}n[k.toLowerCase()]=v.toLowerCase();}return n;},setProperty:function(n,v){var t=this;var r=s.ui.model.json.JSONModel.prototype.setProperty.apply(this,arguments);switch(n){case'/boResults':case'/appResults':t.calculateResultList();break;case'/appCount':case'/boCount':r=t.setProperty('/count',t.getProperty('/appCount')+t.getProperty('/boCount'));break;default:break;}return r;},calculateResultList:function(){var t=this;var r=[];var c=t.getProperty('/boResults');if(c&&c.length){r.push.apply(r,c);}var d=t.getProperty('/appResults');if(d&&d.length>0){var e={type:'appcontainer',tiles:d};if(r.length>0){if(r.length>3){r.splice(3,0,e);}else{r.push(e);}}else{r=[e];}}s.ui.model.json.JSONModel.prototype.setProperty.apply(this,['/results',r]);},initBusinessObjSearch:function(){var t=this;if(!t.isBusinessObjSearchConfigured()){t.setDataSource(t.appDataSource,false);t.setProperty('/businessObjSearchEnabled',false);t.setProperty('/facetVisibility',false);return;}t.sina.sinaSystem().getServerInfo().done(function(){t.loadDataSources();}).fail(function(){t.setDataSource(t.appDataSource,false);t.setProperty('/businessObjSearchEnabled',false);t.setProperty('/facetVisibility',false);});},loadDataSources:function(){var t=this;t.getServerDataSources().done(function(d){if(!jQuery.isArray(d)){d=[];}d=d.slice();d.splice(0,0,t.appDataSource);d.splice(0,0,t.allDataSource);d=t._concatenateLabelAndRemoteSystem(d);t.setProperty("/dataSources",d);t.updateDataSourceList(t.getDataSource());var c=t.getDataSource();t.setProperty("/dataSource",{});t.setProperty("/dataSource",c);});},_concatenateLabelAndRemoteSystem:function(d){var f=d;for(var i=0;i<f.length-1;i++){if(f[i].remoteSystem!==undefined&&f[i].remoteSystem!==""){f[i].label=f[i].label+' '+s.ushell.resources.i18n.getText("textIn")+' '+f[i].remoteSystem;f[i].labelPlural=f[i].labelPlural+' '+s.ushell.resources.i18n.getText("textIn")+' '+f[i].remoteSystem;}}return f;},getServerDataSources:function(){var t=this;if(t.getDataSourcesDeffered){return t.getDataSourcesDeffered;}t.getDataSourcesDeffered=t.sina.getAllDataSources({top:1000});return t.getDataSourcesDeffered;},isBusinessObjSearchConfigured:function(){try{var c=window['sap-ushell-config'].renderers.fiori2.componentData.config;return c.searchBusinessObjects!=='hidden';}catch(e){return true;}},isBusinessObjSearchEnabled:function(){return this.getProperty('/businessObjSearchEnabled');},isFacetSearchEnabled:function(){if(this.urlParameters.disableeshfacets==='true'){return false;}return true;},searchApplications:function(c,t,d){return s.ushell.Container.getService("Search").queryApplications({searchTerm:c,searchInKeywords:true,top:t,skip:d});},createAllAndAppDataSource:function(){this.allDataSource=this.sina.getRootDataSource();this.allDataSource.label=s.ushell.resources.i18n.getText("label_all");this.allDataSource.labelPlural=s.ushell.resources.i18n.getText("label_all");this.appDataSource=new s.bc.ina.api.sina.base.datasource.DataSource({label:s.ushell.resources.i18n.getText("label_apps"),labelPlural:s.ushell.resources.i18n.getText("label_apps"),type:'Apps',name:'Apps'});},isAllCategory:function(){var d=this.getProperty("/dataSource");return d.equals(this.allDataSource);},isAppCategory:function(){var d=this.getProperty("/dataSource");return d.equals(this.appDataSource);},addFilterCondition:function(f,c){var t=this,d=f.filterCondition;function e(f){var n=t.getProperty("/filterConditions");n.push(f);t.setProperty("/filterConditions",n);}if(d.attribute||d.conditions){if(!t.query.getFilter().hasFilterCondition(d)){t.query.addFilterCondition(d);e(f);}if(!t.suggestionQuery.getFilter().hasFilterCondition(d)){t.suggestionQuery.addFilterCondition(d);}}else{t.setDataSource(d,false);}if(c||c===undefined){t._searchFireQuery();}},removeFilterCondition:function(f,c){var t=this,d=f.filterCondition;function r(f){var n=t.getProperty("/filterConditions");var i=t.getProperty("/filterConditions").length;while(i--){var e=t.getProperty("/filterConditions")[i].filterCondition;if(e.equals(f.filterCondition)){n.splice(i,1);break;}}t.setProperty("/filterConditions",n);}if(d.attribute){r(f);t.query.removeFilterCondition(d.attribute,d.operator,d.value);t.suggestionQuery.removeFilterCondition(d.attribute,d.operator,d.value);}else if(d.conditions){r(f);t.query.getFilter().removeFilterConditionGroup(d);t.suggestionQuery.getFilter().removeFilterConditionGroup(d);}else{t.setDataSource(d,false);}if(c||c===undefined){t._searchFireQuery();}},hasFilterCondition:function(f){return this.query.getFilter().hasFilterCondition(f);},resetFilterConditions:function(f){var t=this;t.query.resetFilterConditions();t.suggestionQuery.resetFilterConditions();t.setProperty("/filterConditions",[]);t.query.addFilterCondition('$$RenderingTemplatePlatform$$','=','html');t.query.addFilterCondition('$$RenderingTemplateTechnology$$','=','Tempo');t.query.addFilterCondition('$$RenderingTemplateVariant$$','=','');t.query.addFilterCondition('$$RenderingTemplateType$$','=','ItemDetails');t.query.addFilterCondition('$$RenderingTemplateType$$','=','ResultItem');if(f||f===undefined){t._searchFireQuery();}},getFacets:function(){var t=this;return t.getProperty('/facets');},getTop:function(){return this.getProperty('/top');},setTop:function(t,f){this.setProperty('/top',t);if(f||f===undefined){this._searchFireQuery();}},getSkip:function(){return this.getProperty('/skip');},setSkip:function(c,f){this.setProperty('/skip',c);if(f||f===undefined){this._searchFireQuery();}},calculatePlaceholder:function(){var t=this;if(t.isAllCategory()){return s.ushell.resources.i18n.getText("search");}else{return s.ushell.resources.i18n.getText("searchInPlaceholder",t.getDataSource().label);}},setFacetVisibility:function(v,f){var t=this;if(v===this.getProperty('/facetVisibility')){return;}if(!v||t.getDataSource().getType().value==='Category'||t.isAppCategory()){t.setProperty('/lastFacetVisibility',v);}this.setProperty('/facetVisibility',v);S.saveFilterButtonStatus(v);if(f||f===undefined){this._searchFireQuery();}},getFacetVisibility:function(){return this.getProperty('/facetVisibility');},getDataSource:function(){var t=this;return t.getProperty("/dataSource");},setDataSource:function(d,f){var t=this;var o=t.getProperty('/dataSource');var c=false;var r=t.getProperty("/recentDataSources");for(var i=0,l=r.length;i<l;i++){var e=r[i];if(d.equals(e)){c=true;r.splice(i,Number.MAX_VALUE);t.setProperty("/recentDataSources",r);break;}}if(!c){if(o&&!this.allDataSource.equals(o)&&!this.appDataSource.equals(o)){if(this.tabStripFormatter.tree.hasChild(o,d)){r.push(o);}else if(this.tabStripFormatter.tree.hasSibling(o,d)){}else if(d.equals(o)){t.resetFilterConditions(false);}}}if(this.allDataSource.equals(d)){t.setProperty("/recentDataSources",[]);}t.updateDataSourceList(d);t.setProperty("/dataSource",d);t.setProperty("/searchTermPlaceholder",t.calculatePlaceholder());t.setSkip(0,false);if(t.isAppCategory()){t.setTop(t.appTopDefault,false);}else{t.setTop(t.boTopDefault,false);}if(f||f===undefined){t._searchFireQuery();}},updateDataSourceList:function(n){var d=this.getProperty('/dataSources');while(d.length>0&&!d[0].equals(this.allDataSource)){d.shift();}if(n.equals(this.allDataSource)||n.equals(this.appDataSource)){return;}if(n&&n.key){if(n.key.indexOf('~')>=0){return;}}for(var i=0;i<d.length;++i){var c=d[i];if(c.equals(n)){return;}}d.unshift(n);this.setProperty('/dataSources',d);},resetDataSource:function(f){this.setDataSource(this.allDataSource,f);},getSearchBoxTerm:function(){var t=this;return t.getProperty("/searchBoxTerm");},setSearchBoxTerm:function(c,f){var t=this;var d=c.replace(/^\s+/,"");t.setProperty("/searchBoxTerm",d);if(d.length===0){return;}if(f||f===undefined){t._searchFireQuery();}},invalidateQuery:function(){this.setProperty('/isInvalidated',true);},_searchFireQuery:function(d){var t=this;var f=!t.checkFiltersIdentical(t.getProperty('/filterConditions'),t.getProperty('/lastFilterConditions'));if(t.getProperty('/lastSearchTerm')===t.getProperty('/searchBoxTerm')&&t.getProperty('/lastDataSource').equals(t.getProperty('/dataSource'))&&t.getProperty('/lastTop')===t.getProperty('/top')&&t.getProperty('/lastSkip')===t.getProperty('/skip')&&t.getProperty('/lastFacetVisibility')===t.getProperty('/facetVisibility')&&!t.getProperty('/isInvalidated')&&!f){return;}if(t.getProperty('/searchBoxTerm').length===0&&t.getProperty('/lastSearchTerm').length!==0){t.setProperty('/searchBoxTerm',t.getProperty('/lastSearchTerm'));}if(t.getProperty('/lastSearchTerm')||t.getProperty('/lastDataSource')){if(t.getProperty('/lastSearchTerm')!==t.getProperty('/searchBoxTerm')||t.getProperty('/lastDataSource')!==t.getProperty('/dataSource')||f){t.setProperty('/skip',0);if(t.isAppCategory()){t.setProperty('/top',t.appTopDefault);}else{t.setProperty('/top',t.boTopDefault);}}}if(t.getProperty('/lastSearchTerm')!==t.getProperty('/searchBoxTerm')||f){t.tabStripFormatter.invalidateCount();}if(!d&&t.getProperty('/lastDataSource')!==null&&!t.getProperty('/lastDataSource').equals(t.getProperty('/dataSource'))){t.resetFilterConditions(false);}t.setProperty('/lastSearchTerm',t.getProperty('/searchBoxTerm'));t.setProperty('/lastDataSource',t.getProperty('/dataSource'));t.setProperty('/lastTop',t.getProperty('/top'));t.setProperty('/lastSkip',t.getProperty('/skip'));t.setProperty('/lastFacetVisibility',t.getProperty('/facetVisibility'));t.setProperty('/lastFilterConditions',t.cloneFilterConditions(this.getProperty('/filterConditions')));t.setProperty('/isInvalidated',false);s.ui.getCore().getEventBus().publish("allSearchStarted");t.abortSuggestions();S.abortRequests('search');t.calculateVisibility();t.updateSearchURLSilently();t.analytics.logCustomEvent('FLP: Search','Search',[t.getProperty('/searchBoxTerm'),t.getProperty('/dataSource').key]);var c=t.getDataSource();t.setProperty('/isBusy',true);jQuery.when.apply(null,[t.normalSearch(d),t.appSearch(d)]).done(function(){t.setProperty('/tabStrips',t.tabStripFormatter.format(c,t.perspective,t));t.setProperty('/facets',t.oFacetFormatter.getFacets(c,t.perspective,t));}).always(function(){t.setProperty('/isBusy',false);s.ui.getCore().getEventBus().publish("allSearchFinished");});},autoStartApp:function(){var t=this;if(t.getProperty("/appCount")&&t.getProperty("/appCount")===1&&t.getProperty("/count")&&t.getProperty("/count")===1){var A=t.getProperty("/appResults");if(A&&A.length>0&&A[0]&&A[0].url&&t.getProperty('/searchBoxTerm')&&A[0].tooltip&&t.getProperty('/searchBoxTerm').toLowerCase().trim()===A[0].tooltip.toLowerCase().trim()){if(A[0].url[0]==='#'){window.location.href=A[0].url;}else{window.open(A[0].url,'_blank');}}}},calculateVisibility:function(){var t=this;if(t.isAppCategory()){t.setProperty('/resultsVisibility',false);t.setProperty('/appsVisibility',true);}else{t.setProperty('/resultsVisibility',true);t.setProperty('/appsVisibility',false);}},appSearch:function(d){var t=this;var n=t.getTop();var c=t.getSkip();if(d===true){if(t.getSkip()>0){n=t.getSkip()+t.getTop();c=0;}}if(c===0){t.setProperty("/appResults",[]);t.setProperty("/appCount",0);}if(t.isAllCategory()||t.isAppCategory()){return t.searchApplications(t.getProperty('/searchBoxTerm'),n,c).then(function(r){t.setProperty("/appCount",r.totalResults);if(c>0){var e=t.getProperty("/appResults").slice();e.push.apply(e,r.getElements());t.setProperty("/appResults",e);}else{t.setProperty("/appResults",r.getElements());}s.ui.getCore().getEventBus().publish("appSearchFinished",r);},function(){s.ui.getCore().getEventBus().publish("appSearchFinished");return jQuery.when(true);});}else{t.setProperty("/appResults",[]);t.setProperty("/appCount",0);s.ui.getCore().getEventBus().publish("appSearchFinished");}},normalSearch:function(d){var t=this;if(t.isBusinessObjSearchEnabled()&&!t.isAppCategory()){t.query.setSearchTerms(t.getSearchBoxTerm());t.query.setDataSource(t.getDataSource());var n=t.getTop();var c=t.getSkip();if(d===true){if(t.getSkip()>0){n=t.getSkip()+t.getTop();c=0;}}t.query.setTop(n);t.query.setSkip(c);if(t.query.setExpand){if((t.getFacetVisibility()&&t.isFacetSearchEnabled())||t.getDataSource().getType().value==='Category'){t.query.setExpand(['Grid','Items','ResultsetFacets','TotalCount']);}else{t.query.setExpand(['Grid','Items','TotalCount']);}}return t.query.getResultSet().then(function(p){t.perspective=p;return t._afterSearchPrepareResultList(t.perspective,c>0).then(function(){s.ui.getCore().getEventBus().publish("normalSearchFinished",{append:t.getSkip()>0,resultset:t.perspective});});},function(e){s.ui.getCore().getEventBus().publish("normalSearchFinished",{append:t.getSkip()>0,resultset:null});t.normalSearchErrorHandling(e);t.perspective=null;return jQuery.when(true);});}else{t.setProperty("/boResults",[]);t.setProperty("/boCount",0);s.ui.getCore().getEventBus().publish("normalSearchFinished",{append:t.getSkip()>0,resultset:null});}},normalSearchErrorHandling:function(e){var c=["ESH_FED_MSG016"];if(e){if(e.status===500){jQuery.sap.log.error(e.responseText);jQuery.sap.require("sap.m.MessageBox");s.m.MessageBox.alert(e.responseText,{title:"Search Error: "+e.statusText,icon:s.m.MessageBox.Icon.ERROR});}if(e.responseText){var d=true;var f=jQuery.parseJSON(e.responseText);var h='';var j='';if(f.Error){if(f.Error.Message){h+=''+f.Error.Message;}if(f.Error.Code){h+=' (Code '+f.Error.Code+').';}}if(f.ErrorDetails){j+='';for(var i=0;i<f.ErrorDetails.length;i++){j+=f.ErrorDetails[i].Message+' (Code '+f.ErrorDetails[i].Code+')';if(c.indexOf(f.ErrorDetails[i].Code)!==-1){d=false;}}}jQuery.sap.log.error(h+' Details: '+j);if(d){jQuery.sap.require("sap.m.MessageBox");s.m.MessageBox.alert(j,{title:"Search Error: "+h,icon:s.m.MessageBox.Icon.ERROR});}}else{var m='Search error:'+e.toString();jQuery.sap.log.error(m);jQuery.sap.require("sap.m.MessageBox");s.m.MessageBox.alert(m,{title:'Search Error',icon:s.m.MessageBox.Icon.ERROR});}}},_afterSearchPrepareResultList:function(p,c){var t=this;var o=t.getProperty("/boResults");if(c){o.pop();}else{t.setProperty("/boResults",[]);t.setProperty("/boCount",0);o=t.getProperty("/boResults");}var f=new a();var r=f.format(p.getSearchResultSet(),this.query.filter.searchTerms);var i=new s.ushell.renderers.fiori2.search.SearchIntentsResolver(t);var d=i.resolveIntents(r);d.done(function(e){var n=o.concat(r);if(n.length<p.getSearchResultSet().totalcount){var h={};h.type="footer";n.push(h);}t.setProperty("/boCount",p.getSearchResultSet().totalcount);t.setProperty("/boResults",n);});return d;},createSearchURL:function(){var h="#Action-search";h+="&/searchterm="+encodeURIComponent(this.getProperty('/searchBoxTerm'));h+="&datasource="+encodeURIComponent(JSON.stringify(this.getDataSource().toURL()));h+="&top="+this.getTop();h+="&skip="+this.getSkip();if(this.getProperty("/filterConditions").length>0){h+="&filter="+encodeURIComponent(JSON.stringify(this.getProperty("/filterConditions")));}return h;},updateSearchURLSilently:function(){var h=this.createSearchURL();S.hasher.setHash(h);},deserializeURL:function(){if(!S.hasher.hasChanged()){return;}var u=s.ushell.Container.getService("URLParsing");var c=u.splitHash(window.location.hash).appSpecificRoute;if(!c){return;}var p=u.parseParameters("?"+c.substring(2));var P={};jQuery.each(p,function(i,v){P[i.toLowerCase()]=v[0];});if(!P.searchterm){return;}var d=P.searchterm;this.setSearchBoxTerm(d,false);var e;if(P.datasource){var f=JSON.parse(P.datasource);if(f.name==='Apps'){e=this.appDataSource;}else{e=this.sina.createDataSource(f);}this.setDataSource(e,false);}else{this.resetDataSource(false);}if(P.top){var t=parseInt(P.top,10);this.setTop(t,false);}if(P.skip){var h=parseInt(P.skip,10);this.setSkip(h,false);}this.resetFilterConditions(false);if(P.filter){var j=JSON.parse(P.filter);for(var i=0,l=j.length;i<l;i++){var k=new s.ushell.renderers.fiori2.search.FacetItem(j[i]);this.addFilterCondition(k,false);}}this._searchFireQuery(true);},checkFiltersIdentical:function(f,c){var d=[];for(var i=0;i<f.length;++i){var e=f[i];var m=false;for(var j=0;j<c.length;++j){var h=c[j];if(e.filterCondition.equals(h.filterCondition)){m=true;d[j]=true;break;}}if(!m){return false;}}for(var k=0;k<c.length;++k){if(!d[k]){return false;}}return true;},cloneFilterConditions:function(f){var n=jQuery.extend(true,[],f);return n;}});})(window);};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.SearchShellHelper')){(function(){"use strict";var S=sap.ushell.renderers.fiori2.search.controls.SearchFieldGroup;jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchShellHelper');var m=sap.ushell.renderers.fiori2.search.SearchShellHelper={};var a=sap.ushell.renderers.fiori2.search.SemanticObjectsHandler;jQuery.extend(m,{init:function(i){var t=this;this.oShell=sap.ui.getCore().byId('shell');this.oModel=sap.ushell.renderers.fiori2.search.getModelSingleton();this.oSearchFieldGroup=new S("searchFieldInShell");this.oSearchFieldGroup.setModel(this.oModel);this.oShell.setSearch(this.oSearchFieldGroup);this.oSearchInput=this.oSearchFieldGroup.getAggregation("input");this.oSearchSelect=this.oSearchFieldGroup.getAggregation("select");this.oSearchButton=this.oSearchFieldGroup.getAggregation("button");this.oSearchButton.setType(sap.m.ButtonType.Transparent);var b=1150;if(jQuery(window).width()<=b){this.oSearchSelect.setDisplayMode('icon');}this.oSearchButton.attachPress(function(){t.handleClickSearchButton();});sap.ui.getCore().getEventBus().subscribe("allSearchFinished",this.onAllSearchFinished,this);sap.ui.getCore().byId('navContainer').attachAfterNavigate(this.onAfterNavigate,this);if(i||i===undefined){this.openSearchFieldGroup(false);this.setSearchFieldGroupInCenter();}else{this.closeSearchFieldGroup(false);this.setSearchFieldGroupOnSide();}},onAfterNavigate:function(e){if(e.getParameter('toId')!=='shellPage-Action-search'&&e.getParameter('toId')!=='applicationShellPage-Action-search'){return;}var s=sap.ui.getCore().byId('searchContainerResultsView');if(s&&s.oFocusHandler){s.oFocusHandler.setFocus();}},onAllSearchFinished:function(){this.setSearchFieldGroupInCenter();this.oSearchInput.setValue(this.oModel.getSearchBoxTerm());},setOpenStyle:function(){jQuery('#sf').removeClass("sapUshellSearchFieldElementDisplayInlineBlock");jQuery('#sf').addClass("sapUshellSearchFieldElementDisplayNone");this.oSearchButton.removeStyleClass("sapUshellSearchFieldElementDisplayNone");this.oSearchButton.addStyleClass("sapUshellSearchFieldElementDisplayBlock");this.oSearchFieldGroup.addStyleClass("sapUshellSearchFieldGroupMaximized");this.oSearchFieldGroup.removeStyleClass("sapUshellSearchFieldGroupMinimized");this.oSearchFieldGroup.removeStyleClass("sapUshellSearchFieldGroupNotVisible");},setCloseStyle:function(){this.setSearchFieldGroupOnSide();this.oSearchFieldGroup.removeStyleClass("sapUshellSearchFieldGroupMaximized");this.oSearchFieldGroup.addStyleClass("sapUshellSearchFieldGroupMinimized");this.oSearchFieldGroup.addStyleClass("sapUshellSearchFieldGroupNotVisible");jQuery('#sf').removeClass("sapUshellSearchFieldElementDisplayNone");jQuery('#sf').addClass("sapUshellSearchFieldElementDisplayInlineBlock");this.oSearchButton.removeStyleClass("sapUshellSearchFieldElementDisplayBlock");this.oSearchButton.addStyleClass("sapUshellSearchFieldElementDisplayNone");},setSearchFieldGroupInCenter:function(){this.oSearchFieldGroup.addStyleClass("sapUshellSearchFieldGroupInCenter");this.oSearchFieldGroup.removeStyleClass("sapUshellSearchFieldGroupOnSide");},setSearchFieldGroupOnSide:function(){this.oSearchFieldGroup.removeStyleClass("sapUshellSearchFieldGroupInCenter");this.oSearchFieldGroup.addStyleClass("sapUshellSearchFieldGroupOnSide");},resetModel:function(){this.oSearchInput.setValue('');this.oModel.setSearchBoxTerm('');this.oModel.resetDataSource(false);this.oModel.resetFilterConditions(false);},openSearchFieldGroup:function(h){var t=this;sap.ushell.Container.getService("Search")._getCatalogTiles();a.getSemanticObjectsMetadata();if(h){t.setOpenStyle();if(jQuery('#searchFieldInShell-select').length>0){jQuery('#searchFieldInShell-select').css('max-width','0%').animate({'max-width':'30%'},{duration:200,complete:function(){jQuery(this).css('max-width','');}});}var i=jQuery('.sapUshellSearchFieldGroupSubContainer').width()*0.85-4+"px";jQuery('#searchFieldInShell-input').css('max-width','0%').animate({'max-width':i},{duration:300,complete:function(){t.setOpenStyle();if(!sap.ui.Device.system.phone){t.oSearchInput.focus();}jQuery(this).css('max-width','');}});}else{t.setOpenStyle();if(!sap.ui.Device.system.phone){t.oSearchInput.focus();}}t.isSearchFieldGroupOpen=true;},closeSearchFieldGroup:function(h){var t=this;if(h){t.oSearchFieldGroup.addStyleClass("sapUshellSearchFieldGroupOnSide");t.oSearchFieldGroup.removeStyleClass("sapUshellSearchFieldGroupInCenter");var i=jQuery('#searchFieldInShell-input').width()+"px";jQuery('#searchFieldInShell-input').css('max-width',i).animate({'max-width':'0%'},{duration:400,complete:function(){t.setCloseStyle();}});}else{t.setCloseStyle();}t.isSearchFieldGroupOpen=false;},handleClickSearchButton:function(){if(window.location.hash.substr(1,13)!=="Action-search"){if(this.isSearchFieldGroupOpen){if(this.oSearchInput.getValue()===""){this.closeSearchFieldGroup(true);}}}}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.container.App.controller')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.container.App.controller');
// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
jQuery.sap.require('sap.m.MessageToast');var SearchShellHelper=sap.ushell.renderers.fiori2.search.SearchShellHelper;sap.ui.controller("sap.ushell.renderers.fiori2.search.container.App",{onInit:function(){"use strict";this.oShellNavigation=sap.ushell.Container.getService("ShellNavigation");this.oShellNavigation.hashChanger.attachEvent("hashChanged",this.hashChanged);if(SearchShellHelper.oSearchFieldGroup===undefined){SearchShellHelper.init();}sap.ui.getCore().byId('sf').setVisible(false);SearchShellHelper.openSearchFieldGroup(false);SearchShellHelper.setSearchFieldGroupInCenter();if(sap.ui.Device.system.tablet||sap.ui.Device.system.phone){sap.ushell.services.AppConfiguration.setHeaderHiding(false);}},hashChanged:function(e){"use strict";var m=sap.ushell.renderers.fiori2.search.getModelSingleton();m.deserializeURL();},onExit:function(){"use strict";this.oShellNavigation.hashChanger.detachEvent("hashChanged",this.hashChanged);SearchShellHelper.closeSearchFieldGroup(false);SearchShellHelper.setSearchFieldGroupOnSide();if(sap.ui.Device.system.tablet||sap.ui.Device.system.phone){sap.ushell.services.AppConfiguration.setHeaderHiding(true);}if(this.oView.oPage.oFacetDialog){this.oView.oPage.oFacetDialog.destroy();}}});};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.container.App.view')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.container.App.view');(function(g){"use strict";sap.ui.jsview("sap.ushell.renderers.fiori2.search.container.App",{createContent:function(){var t=this;if(!this.oModel){this.oModel=sap.ushell.renderers.fiori2.search.getModelSingleton();}this.setModel(sap.ushell.resources.i18nModel,"i18n");this.oSearchResults=sap.ui.view({id:"searchContainerResultsView",tooltip:"{i18n>searchResultsView_tooltip}",viewName:"sap.ushell.renderers.fiori2.search.container.Search",type:sap.ui.core.mvc.ViewType.JS});this.oSearchResults.setModel(t.oModel);this.oSearchResults.setAppView(t);this.oModel.deserializeURL();this.oPage=this.pageFactory("searchPage",[this.oSearchResults]);return this.oPage;},beforeExit:function(){},pageFactory:function(i,c,d){var t=this;var s=new sap.ushell.renderers.fiori2.search.controls.SearchBar({oSearchLayout:t.oSearchResults.searchLayout,filterButtonPressed:t.oModel.getProperty('/facetVisibility'),filterButtonVisible:{parts:[{path:'/businessObjSearchEnabled'}],formatter:function(b){return!sap.ui.Device.system.phone&&b;}},contentMiddle:new sap.m.Label({text:{parts:[{path:'/count'}],formatter:function(a){var b=sap.ushell.resources.i18n.getText("searchResults")+' ('+sap.ui.core.format.NumberFormat.getIntegerInstance({style:"short"}).format(a)+')';return b;}}})});s.setModel(t.oModel);var p=new sap.m.Page({id:i,customHeader:s,content:c,enableScrolling:true,showFooter:true});p.setModel(t.oModel);var e=["onAfterHide","onAfterShow","onBeforeFirstShow","onBeforeHide","onBeforeShow"];var D={};t.createFooter(p);jQuery.each(e,function(I,E){D[E]=jQuery.proxy(function(a){jQuery.each(this.getContent(),function(I,c){c._handleEvent(a);});},p);});p.addEventDelegate(D);if(!sap.ui.Device.system.desktop){p._bUseIScroll=true;}if(d){this.disableBouncing(p);}if(!sap.ui.Device.support.touch){var v=sap.ui.getCore().byId("searchContainerApp");v.addStyleClass('sapUiSizeCompact');}return p;},getControllerName:function(){return"sap.ushell.renderers.fiori2.search.container.App";},createFooter:function(p){var t=this;if(jQuery.device.is.phone){return;}var b=new sap.ushell.ui.footerbar.AddBookmarkButton({beforePressHandler:function(){var A={url:document.URL,title:t.getTileTitleProposal(),icon:sap.ui.core.IconPool.getIconURI("search")};b.setAppData(A);}});b.setWidth('auto');var e=new sap.m.Button();e.setIcon("sap-icon://email");e.setText(sap.ushell.resources.i18n.getText("eMailFld"));e.attachPress(function(){sap.m.URLHelper.triggerEmail(null,t.getTileTitleProposal(),document.URL);});e.setWidth('auto');var a=new sap.m.ActionSheet({placement:'Top',buttons:[b,e]});var s=new sap.m.Button({icon:'sap-icon://action',tooltip:sap.ushell.resources.i18n.getText('shareBtn'),press:function(){a.openBy(s);}});var B=new sap.m.Bar({contentRight:[s]});var f=p.getFooter();if(f&&f.destroy){f.destroy();}p.setFooter(B);},getTileTitleProposal:function(){var s=this.oModel.getSearchBoxTerm();var d=this.oModel.getDataSource().label;var t;if(this.oModel.getDataSource().equals(this.oModel.allDataSource)){t=sap.ushell.resources.i18n.getText('searchTileTitleProposalAll',[s]);}else{t=sap.ushell.resources.i18n.getText('searchTileTitleProposal',[s,d]);}return t;}});}(window));};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.container.Search.controller')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.container.Search.controller');(function(){"use strict";sap.ui.controller("sap.ushell.renderers.fiori2.search.container.Search",{onInit:function(){var t=this;sap.ui.getCore().getEventBus().subscribe("appSearchFinished",t.getView().onAppSearchFinished,t.getView());sap.ui.getCore().getEventBus().subscribe("normalSearchFinished",t.getView().onNormalSearchFinished,t.getView());sap.ui.getCore().getEventBus().subscribe("allSearchStarted",t.getView().onAllSearchStarted,t.getView());sap.ui.getCore().getEventBus().subscribe("allSearchFinished",t.getView().onAllSearchFinished,t.getView());},onExit:function(){var t=this;sap.ui.getCore().getEventBus().unsubscribe("appSearchFinished",t.getView().onAppSearchFinished,t.getView());sap.ui.getCore().getEventBus().unsubscribe("normalSearchFinished",t.getView().onNormalSearchFinished,t.getView());sap.ui.getCore().getEventBus().unsubscribe("allSearchStarted",t.getView().onAllSearchStarted,t.getView());sap.ui.getCore().getEventBus().unsubscribe("allSearchFinished",t.getView().onAllSearchFinished,t.getView());}});}());};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.Shell')){
/*!
 * ${copyright}
 */
jQuery.sap.declare('sap.ushell.ui.shell.Shell');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ushell/ui/shell/Shell",['jquery.sap.global','./ShellUtilities','./ShellHeader','./ShellHeadItem','./ShellHeadUserItem','./ShellLayout','./ShellFloatingActions','sap/ushell/library'],function(q,S,a,b,c,d,e,l){"use strict";var f=d.extend("sap.ushell.ui.shell.Shell",{metadata:{properties:{icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},showCurtain:{type:"boolean",group:"Appearance",defaultValue:null,deprecated:true},showCurtainPane:{type:"boolean",group:"Appearance",defaultValue:null,deprecated:true},searchVisible:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{curtainContent:{type:"sap.ui.core.Control",multiple:true,singularName:"curtainContent"},curtainPaneContent:{type:"sap.ui.core.Control",multiple:true,singularName:"curtainPaneContent"},headItems:{type:"sap.ushell.ui.shell.ShellHeadItem",multiple:true,singularName:"headItem"},headEndItems:{type:"sap.ushell.ui.shell.ShellHeadItem",multiple:true,singularName:"headEndItem"},search:{type:"sap.ui.core.Control",multiple:false},user:{type:"sap.ushell.ui.shell.ShellHeadUserItem",multiple:false},floatingActions:{type:"sap.ushell.ui.shell.ShellFloatingAction",multiple:true,singularName:"floatingAction"}}}});f.prototype.init=function(){q.sap.require("sap.ushell.resources");this.resourceBundle=sap.ushell.resources.i18n;d.prototype.init.apply(this,arguments);this._header=new a(this.getId()+"-header");this._floatingActions=new e(this.getId()+"floatingActions");this._floatingActions.setParent(this);this.setHeader(this._header);this._header.setAriaLabel(this.resourceBundle.getText("Shell_Header_AriaLabel"));};f.prototype.exit=function(){d.prototype.exit.apply(this,arguments);if(this._header){this._header.destroy();delete this._header;}if(this._floatingActions){this._floatingActions.destroy();delete this._floatingActions;}};f.prototype._getSearchWidth=function(){if(this._header===this.getHeader()&&this._header.getDomRef()){var s=this._header.$("hdr-center").children();if(s.length){return s.width();}}return-1;};f.prototype.setIcon=function(i){if(this._header){this.setProperty("icon",i,true);this._header.setLogo(i);}else{q.sap.log.warning('Shell setIcon is called but no header exists');}return this;};f.prototype.getIcon=function(){return this._header.getLogo();};f.prototype.setSearchVisible=function(s){this.setProperty("searchVisible",s,true);this._header.setSearchVisible(s);this.toggleStyleClass("sapUshellShellHeadTitleInvisible",s);return this;};f.prototype.getSearchVisible=function(){return this._header.getSearchVisible();};f.prototype.setSearch=function(s){this._header.setSearch(s);return this;};f.prototype.getSearch=function(){return this._header.getSearch();};f.prototype.setUser=function(u){this._header.setUser(u);return this;};f.prototype.getUser=function(){return this._header.getUser();};f.prototype.getHeadItems=function(){return this._header.getHeadItems();};f.prototype.insertHeadItem=function(h,i){this._header.insertHeadItem(h,i);return this;};f.prototype.addHeadItem=function(h){this._header.addHeadItem(h);return this;};f.prototype.removeHeadItem=function(i){return this._header.removeHeadItem(i);};f.prototype.removeAllHeadItems=function(){return this._header.removeAllHeadItems();};f.prototype.destroyHeadItems=function(){this._header.destroyHeadItems();return this;};f.prototype.indexOfHeadItem=function(h){return this._header.indexOfHeadItem(h);};f.prototype.getHeadEndItems=function(){return this._header.getHeadEndItems();};f.prototype.insertHeadEndItem=function(h,i){this._header.insertHeadEndItem(h,i);return this;};f.prototype.addHeadEndItem=function(h){this._header.addHeadEndItem(h);return this;};f.prototype.removeHeadEndItem=function(i){return this._header.removeHeadEndItem(i);};f.prototype.removeAllHeadEndItems=function(){return this._header.removeAllHeadEndItems();};f.prototype.destroyHeadEndItems=function(){this._header.destroyHeadEndItems();return this;};f.prototype.indexOfHeadEndItem=function(h){return this._header.indexOfHeadEndItem(h);};f.prototype.getFloatingActions=function(){return this._floatingActions.getFloatingActions();};f.prototype.insertFloatingAction=function(A,i){this._floatingActions.insertFloatingAction(A,i);return this;};f.prototype.addFloatingAction=function(A){this._floatingActions.addFloatingAction(A);return this;};f.prototype.removeFloatingAction=function(i){this._floatingActions.removeFloatingAction(i);return this;};f.prototype.removeAllFloatingActions=function(){this._floatingActions.removeAllFloatingActions();return this;};f.prototype.destroyFloatingActions=function(){this._floatingActions.destroyFloatingActions();return this;};f.prototype.indexOfFloatingAction=function(A){return this._floatingActions.indexOfFloatingAction(A);};f.prototype.setHeader=function(h){return d.prototype.setHeader.apply(this,[h?h:this._header]);};f.prototype.destroyHeader=function(){if(this.getHeader()===this._header){return this;}return d.prototype.destroyHeader.apply(this,[]);};return f;},true);};if(!jQuery.sap.isDeclared('sap.ushell.ui.shell.ShellOverlay')){jQuery.sap.declare('sap.ushell.ui.shell.ShellOverlay');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.Device');jQuery.sap.require('sap.ui.core.Control');jQuery.sap.require('sap.ui.core.Popup');jQuery.sap.require('jquery.sap.script');sap.ui.define("sap/ushell/ui/shell/ShellOverlay",['jquery.sap.global','sap/ui/Device','sap/ui/core/Control','sap/ui/core/Popup','sap/ushell/library','./Shell','jquery.sap.script'],function(q,D,C,P,l,S){"use strict";var a=C.extend("sap.ushell.ui.shell.ShellOverlay",{metadata:{defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},search:{type:"sap.ui.core.Control",multiple:false}},associations:{shell:{type:"sap.ushell.ui.shell.ShellLayout",multiple:false}},events:{closed:{}}}});a.prototype.open=function(){if(this._getPopup().isOpen()){return;}this._opening=true;this._forceShellHeaderVisible();this._getPopup().setModal(true,P.blStack.length==0&&this._getAnimActive()?"sapUshellShellOvrlyBly sapUshellShellOvrlyBlyTp":"");this._getPopup().open(0,P.Dock.BeginTop,P.Dock.BeginTop,window,"0 0","none");var s=this.getSearch();if(s){s.focus();}this._opening=false;if(this._getAnimActive()){q.sap.delayedCall(50,this,function(){q.sap.byId("sap-ui-blocklayer-popup").toggleClass("sapUshellShellOvrlyBlyTp",false);});}q.sap.delayedCall(this._getAnimDuration(true),this,function(){this.$().toggleClass("sapUshellShellOvrlyOpening",false);});};a.prototype.close=function(){if(!this._getPopup().isOpen()){return;}this.$().toggleClass("sapUshellShellOvrlyCntntHidden",true).toggleClass("sapUshellShellOvrlyClosing",true);this._setSearchWidth();q.sap.delayedCall(Math.max(this._getAnimDuration(false)-this._getBLAnimDuration(),0),this,function(){var b=q.sap.byId("sap-ui-blocklayer-popup");if(P.blStack.length==1&&this._getAnimActive()&&b.hasClass("sapUshellShellOvrlyBly")){b.toggleClass("sapUshellShellOvrlyBlyTp",true);}});q.sap.delayedCall(this._getAnimDuration(false),this,function(){this._getPopup().close(0);this.$().remove();this._forceShellHeaderVisible();this.fireClosed();});};a.prototype.setShell=function(s){return this.setAssociation("shell",s,true);};a.prototype.setSearch=function(s){this.setAggregation("search",s,true);if(!!this.getDomRef()){this._headRenderer.render();}return this;};a.prototype.insertContent=function(c,i){var r=this.insertAggregation("content",c,i,true);if(!!this.getDomRef()){this._contentRenderer.render();}return r;};a.prototype.addContent=function(c){var r=this.addAggregation("content",c,true);if(!!this.getDomRef()){this._contentRenderer.render();}return r;};a.prototype.removeContent=function(i){var r=this.removeAggregation("content",i,true);if(!!this.getDomRef()){this._contentRenderer.render();}return r;};a.prototype.removeAllContent=function(){var r=this.removeAllAggregation("content",true);if(!!this.getDomRef()){this._contentRenderer.render();}return r;};a.prototype.destroyContent=function(){var r=this.destroyAggregation("content",true);if(!!this.getDomRef()){this._contentRenderer.render();}return r;};a.prototype.init=function(){this._animOpenDuration=-1;this._animCloseDuration=-1;this._animBlockLayerDuration=-1;this._animation=sap.ui.getCore().getConfiguration().getAnimation();this._opening=false;var t=this;this._headRenderer=new sap.ushell.ui.shell.shell_ContentRenderer(this,this.getId()+"-hdr-center",function(r){sap.ushell.ui.shell.ShellOverlayRenderer.renderSearch(r,t);});this._contentRenderer=new sap.ushell.ui.shell.shell_ContentRenderer(this,this.getId()+"-cntnt",function(r){sap.ushell.ui.shell.ShellOverlayRenderer.renderContent(r,t);});};a.prototype.exit=function(){if(this._popup){this._popup.close(0);this._popup.destroy();this._popup=null;}this._getPopup=function(){return null;};this._headRenderer.destroy();delete this._headRenderer;this._contentRenderer.destroy();delete this._contentRenderer;};a.prototype.onAfterRendering=function(){if(this._opening){this._setSearchWidth();}q.sap.delayedCall(10,this,function(){this.$().toggleClass("sapUshellShellOvrlyCntntHidden",false);this.$("search").css("width","");});};a.prototype.onclick=function(e){if(q(e.target).attr("id")===this.getId()+"-close"){this.close();}};a.prototype.onThemeChanged=function(){this._animOpenDuration=-1;this._animCloseDuration=-1;this._animBlockLayerDuration=-1;};a.prototype._getAnimDurationThemeParam=function(p,c){var v=parseInt(sap.ui.core.theming.Parameters.get(p),10);if(!this._getAnimActive()&&c){v=0;}return v;};a.prototype._getAnimDuration=function(o){if((o&&this._animOpenDuration==-1)||(!o&&this._animCloseDuration==-1)){var t=o?"Open":"Close";this["_anim"+t+"Duration"]=this._getAnimDurationThemeParam("sapUshellShellOvrly"+t+"AnimOverAll",true);}return o?this._animOpenDuration:this._animCloseDuration;};a.prototype._getBLAnimDuration=function(){if(this._animBlockLayerDuration==-1){this._animBlockLayerDuration=this._getAnimDurationThemeParam("sapUshellShellOvrlyBlockLayerAnimDuration",true);}return this._animBlockLayerDuration;};a.prototype._getAnimActive=function(){if(!this._animation||(D.browser.internet_explorer&&D.browser.version<10)){return false;}return true;};a.prototype._getPopup=function(){if(!this._popup){this._popup=new P(this,true,false,false);this._popup._applyPosition=function(p){this._$().css("left","0").css("top","0");this._oLastPosition=p;this._oLastOfRect=q(window).rect();};this._popup.attachOpened(function(){sap.ushell.ui.shell.shell_iNumberOfOpenedShellOverlays++;});this._popup.attachClosed(function(){sap.ushell.ui.shell.shell_iNumberOfOpenedShellOverlays--;});}return this._popup;};a.prototype._getShell=function(){var i=this.getShell();if(!i){return;}var s=sap.ui.getCore().byId(i);if(!s||!(s instanceof sap.ushell.ui.shell.ShellLayout)){return;}return s;};a.prototype._forceShellHeaderVisible=function(){var s=this._getShell();if(s){s._doShowHeader(true);}};a.prototype._getSearchWidth=function(){var s=this._getShell();return s?s._getSearchWidth():-1;};a.prototype._setSearchWidth=function(){var w=this._getSearchWidth();if(w<=0){return;}var W=w+"px";if(D.browser.safari){var t=this.$("hdr-center").width();if(t>w){W=Math.round((w*100)/t)+"%";}else{W="100%";}}this.$("search").css("width",W);};return a;},true);};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.Renderer')){
// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.renderers.fiori2.Renderer");jQuery.sap.require('sap.ui.core.UIComponent');sap.ui.core.UIComponent.extend("sap.ushell.renderers.fiori2.Renderer",{metadata:{version:"1.32.6",dependencies:{version:"1.32.6",libs:["sap.ui.core","sap.m"],components:[]}}});sap.ushell.renderers.fiori2.Renderer.prototype.createContent=function(){var p=jQuery.sap.getUriParameters().get("appState")||jQuery.sap.getUriParameters().get("sap-ushell-config"),v=this.getComponentData()||{},P,a={applications:{"Shell-home":{}},rootIntent:"Shell-home"};if(p){if(!v.config){v.config={};}v.config.appState=p;}if(v.config){P=["enablePersonalization","enableTagFiltering","enableLockedGroupsCompactLayout","enableCatalogSelection","enableSearchFiltering","enableTilesOpacity","enableDragIndicator","enableActionModeMenuButton","enableActionModeMenuButton","enableActionModeFloatingButton","enableTileActionsIcon","enableHideGroups"];if(v.config.rootIntent===undefined){v.config["migrationConfig"]=true;}v.config=jQuery.extend(a,v.config);if(v.config.applications["Shell-home"]){P.forEach(function(s){var b=v.config[s];if(b!==undefined){v.config.applications["Shell-home"][s]=b;}if(s!=="enablePersonalization"){delete v.config[s];}});}}if(v.config&&v.config.customViews){Object.keys(v.config.customViews).forEach(function(s){var V=v.config.customViews[s];sap.ui.view(s,{type:V.viewType,viewName:V.viewName,viewData:V.componentData});});}var V=sap.ui.view('mainShell',{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.renderers.fiori2.Shell",viewData:v});sap.ushell.renderers.fiori2.utils.init(V.getController());this.shellCtrl=V.oController;return V;};sap.ushell.renderers.fiori2.Renderer.prototype.showLeftPaneContent=function(i,c,s){if(typeof i==="string"){this.shellCtrl.addLeftPaneContent([i],c,s);}else{this.shellCtrl.addLeftPaneContent(i,c,s);}};sap.ushell.renderers.fiori2.Renderer.prototype.showHeaderItem=function(i,c,s){if(typeof i==="string"){this.shellCtrl.addHeaderItem([i],c,s);}else{this.shellCtrl.addHeaderItem(i,c,s);}};sap.ushell.renderers.fiori2.Renderer.prototype.showToolAreaItem=function(i,c,s){this.shellCtrl.addToolAreaItem(i,c,s);};sap.ushell.renderers.fiori2.Renderer.prototype.showActionButton=function(i,c,s,I){if(typeof i==="string"){this.shellCtrl.addActionButton([i],c,s,I);}else{this.shellCtrl.addActionButton(i,c,s,I);}};sap.ushell.renderers.fiori2.Renderer.prototype.showFloatingActionButton=function(i,c,s){if(typeof i==="string"){this.shellCtrl.addFloatingActionButton([i],c,s);}else{this.shellCtrl.addFloatingActionButton(i,c,s);}};sap.ushell.renderers.fiori2.Renderer.prototype.showHeaderEndItem=function(i,c,s){if(typeof i==="string"){this.shellCtrl.addHeaderEndItem([i],c,s);}else{this.shellCtrl.addHeaderEndItem(i,c,s);}};sap.ushell.renderers.fiori2.Renderer.prototype.showSubHeader=function(i,c,s){if(typeof i==="string"){this.shellCtrl.addSubHeader([i],c,s);}else{this.shellCtrl.addSubHeader(i,c,s);}};sap.ushell.renderers.fiori2.Renderer.prototype.setFooter=function(f){this.shellCtrl.setFooter(f);};sap.ushell.renderers.fiori2.Renderer.prototype.hideHeaderItem=function(i,c,s){if(typeof i==="string"){this.shellCtrl.removeHeaderItem([i],c,s);}else{this.shellCtrl.removeHeaderItem(i,c,s);}};sap.ushell.renderers.fiori2.Renderer.prototype.removeToolAreaItem=function(i,c,s){if(typeof i==="string"){this.shellCtrl.removeToolAreaItem([i],c,s);}else{this.shellCtrl.removeToolAreaItem(i,c,s);}};sap.ushell.renderers.fiori2.Renderer.prototype.hideActionButton=function(i,c,s){if(typeof i==="string"){this.shellCtrl.removeActionButton([i],c,s);}else{this.shellCtrl.removeActionButton(i,c,s);}};sap.ushell.renderers.fiori2.Renderer.prototype.hideLeftPaneContent=function(i,c,s){if(typeof i==="string"){this.shellCtrl.removeLeftPaneContent([i],c,s);}else{this.shellCtrl.removeLeftPaneContent(i,c,s);}};sap.ushell.renderers.fiori2.Renderer.prototype.hideFloatingActionButton=function(i,c,s){if(typeof i==="string"){this.shellCtrl.removeFloatingActionButton([i],c,s);}else{this.shellCtrl.removeFloatingActionButton(i,c,s);}};sap.ushell.renderers.fiori2.Renderer.prototype.hideHeaderEndItem=function(i,c,s){if(typeof i==="string"){this.shellCtrl.removeHeaderEndItem([i],c,s);}else{this.shellCtrl.removeHeaderEndItem(i,c,s);}};sap.ushell.renderers.fiori2.Renderer.prototype.hideSubHeader=function(i,c,s){if(typeof i==="string"){this.shellCtrl.removeSubHeader([i],c,s);}else{this.shellCtrl.removeSubHeader(i,c,s);}};sap.ushell.renderers.fiori2.Renderer.prototype.removeFooter=function(){this.shellCtrl.removeFooter();};sap.ushell.renderers.fiori2.Renderer.prototype.addSubHeader=function(c,C,i,b,s){var f=function(C){var V;if(c){jQuery.sap.require(c);V=jQuery.sap.getObject(c);}else{jQuery.sap.log.warning("You must specify control type in order to create it");}return new V(C);};var I=this.createItem(C,b,s,f);if(i){this.showSubHeader(I.getId(),b,s);}return I;};sap.ushell.renderers.fiori2.Renderer.prototype.addActionButton=function(c,C,i,b,s){var f=function(C){var V;if(c){jQuery.sap.require(c);V=jQuery.sap.getObject(c);}else{V=jQuery.sap.getObject(sap.m.Button);}return new V(C);};var I=this.createItem(C,b,s,f);if(i){this.showActionButton(I.getId(),b,s);}return I;};sap.ushell.renderers.fiori2.Renderer.prototype.addFloatingActionButton=function(c,C,i,b,s){var f=function(C){var V;if(c){jQuery.sap.require(c);V=jQuery.sap.getObject(c);}else{V=jQuery.sap.getObject(sap.m.Button);}return new V(C);};var I=this.createItem(C,b,s,f);if(i){this.showFloatingActionButton(I.getId(),b,s);}return I;};sap.ushell.renderers.fiori2.Renderer.prototype.addLeftPaneContent=function(c,C,i,b,s){var f=function(C){var V;if(c){jQuery.sap.require(c);V=jQuery.sap.getObject(c);}else{jQuery.sap.log.warning("You must specify control type in order to create it");}return new V(C);};var I=this.createItem(C,b,s,f);if(i){this.showLeftPaneContent(I.getId(),b,s);}return I;};sap.ushell.renderers.fiori2.Renderer.prototype.addHeaderItem=function(c,C,i,b,s){var f=function(C){return new sap.ushell.ui.shell.ShellHeadItem(C);};var I=this.createItem(C,b,s,f);if(i){this.showHeaderItem(I.getId(),b,s);}return I;};sap.ushell.renderers.fiori2.Renderer.prototype.addToolAreaItem=function(c,i,C,s){var f=function(c){return new sap.ushell.ui.shell.ToolAreaItem(c);};var I=this.createItem(c,C,s,f);if(i){this.showToolAreaItem(I.getId(),C,s);}return I;};sap.ushell.renderers.fiori2.Renderer.prototype.addHeaderEndItem=function(c,C,i,b,s){var f=function(C){return new sap.ushell.ui.shell.ShellHeadItem(C);};var I=this.createItem(C,b,s,f);if(i){this.showHeaderEndItem(I.getId(),b,s);}return I;};sap.ushell.renderers.fiori2.Renderer.prototype.getModelConfiguration=function(){return this.shellCtrl.getModelConfiguration();};sap.ushell.renderers.fiori2.Renderer.prototype.addEndUserFeedbackCustomUI=function(c,s){this.shellCtrl.addEndUserFeedbackCustomUI(c,s);};sap.ushell.renderers.fiori2.Renderer.prototype.addUserPreferencesEntry=function(e){return this.shellCtrl.addUserPreferencesEntry(e);};sap.ushell.renderers.fiori2.Renderer.prototype.setHeaderTitle=function(t,c,C){var i=null;var l=sap.ushell.renderers.fiori2.Renderer.prototype.LaunchpadState;if(c){var f=function(C){var o;jQuery.sap.require(c);o=jQuery.sap.getObject(c);return new o(C);};i=this.createItem(C,false,[l.Home,l.App],f);}this.shellCtrl._setHeaderTitle(t,i);};sap.ushell.renderers.fiori2.Renderer.prototype.setLeftPaneVisibility=function(l,v){this.shellCtrl.showShellItem("/showPane",l,v);};sap.ushell.renderers.fiori2.Renderer.prototype.showToolArea=function(l,v){this.shellCtrl.showShellItem("/toolAreaVisible",l,v);};sap.ushell.renderers.fiori2.Renderer.prototype.setHeaderHiding=function(h){return this.shellCtrl._setHeaderHiding(h);};sap.ushell.renderers.fiori2.Renderer.prototype.LaunchpadState={App:"app",Home:"home"};sap.ushell.renderers.fiori2.Renderer.prototype.createItem=function(c,C,s,f){var i;if(c.id){i=sap.ui.getCore().byId(c.id);}if(!i){i=f(c);if(C){this.shellCtrl.addElementToManagedQueue(i);}}return i;};}());};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.Shell.view')){jQuery.sap.declare('sap.ushell.renderers.fiori2.Shell.view');(function(){"use strict";sap.ui.jsview("sap.ushell.renderers.fiori2.Shell",{createContent:function(c){var t=this;var v=this.getViewData()||{},C=v.config||{},s=(C.appState==="embedded")?true:false,S=(C.appState==="headerless")?true:false,f=function(i,g){return sap.ui.getCore().byId(g.getObject());},l=new sap.ushell.ui.launchpad.LoadingDialog({id:"loadingDialog",title:null,text:"",showCancelButton:false}),o=new sap.ushell.ui.shell.ShellHeadItem({id:"configBtn",tooltip:"{i18n>showGrpsBtn_tooltip}",icon:sap.ui.core.IconPool.getIconURI("menu2"),selected:{path:"/currentState/showPane"},press:[c.togglePane,c]}),h=new sap.ushell.ui.shell.ShellHeadItem({id:"homeBtn",tooltip:"{i18n>homeBtn_tooltip}",icon:sap.ui.core.IconPool.getIconURI("home"),target:C.rootIntent?"#"+C.rootIntent:"#"});h.addEventDelegate({onsapskipback:function(E){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}},onsapskipforward:function(E){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}}});o.addEventDelegate({onsapskipforward:function(E){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}},onfocusin:function(){sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=true;sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusPassedToExternalHandlerFirstTime=true;}});var a;if(s){new sap.ushell.ui.shell.ShellHeadItem({id:"standardActionsBtn",tooltip:"{i18n>headerActionsTooltip}",icon:sap.ui.core.IconPool.getIconURI("account"),press:[c.pressActionBtn,c]});}else if(!S){a=new sap.ushell.ui.shell.ShellHeadUserItem({id:"actionsBtn",username:sap.ushell.Container.getUser().getFullName(),tooltip:"{i18n>headerActionsTooltip}",ariaLabel:sap.ushell.Container.getUser().getFullName(),image:sap.ui.core.IconPool.getIconURI("account"),press:[c.pressActionBtn,c]});a.addEventDelegate({onsaptabnext:function(E){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}},onsapskipforward:function(E){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}}});}var n=this.initNavContainer(c);var u=new sap.ushell.ui.shell.Shell({id:"shell",showPane:{path:"/currentState/showPane"},headItems:{path:"/currentState/headItems",factory:f},headEndItems:{path:"/currentState/headEndItems",factory:f},toolAreaItems:{path:"/currentState/toolAreaItems",factory:f},toolAreaVisible:{path:"/currentState/toolAreaVisible"},floatingActions:{path:"/currentState/floatingActions",factory:f},user:a,paneContent:{path:"/currentState/paneContent",factory:f},headerHiding:{path:"/currentState/headerHiding"},headerVisible:{path:"/currentState/headerVisible"},title:{path:"/title"},content:n,subHeaders:{path:"/currentState/subHeaders",factory:f}});u._setStrongBackground(true);this.setOUnifiedShell(u);var b=u.getHeader();if(b){var d=b.onAfterRendering;b.onAfterRendering=function(){if(d){d.apply(this,arguments);}if(this.getModel().getProperty("/enableHelp")){jQuery('#actionsBtn').addClass('help-id-actionsBtn');jQuery('#configBtn').addClass('help-id-configBtn');jQuery('#homeBtn').addClass('help-id-homeBtn');}};}this.oShellPage=this.pageFactory("shellPage",u,true);if(s){u.setIcon(sap.ui.resource('sap.ui.core','themes/base/img/1x1.gif'));}else{this.initShellBarLogo(u);}this.setDisplayBlock(true);this.aDanglingControls=[sap.ui.getCore().byId('navContainer'),this.oShellPage,h,l,o];u.updateAggregation=this.updateShellAggregation;var e=(C.enableSearch!==false);if(e){t.oShellSearchBtn=new sap.ushell.ui.shell.ShellHeadItem({id:"sf",tooltip:"{i18n>searchbox_tooltip}",icon:sap.ui.core.IconPool.getIconURI("search"),visible:{path:"/searchAvailable"},showSeparator:false,press:function(g){jQuery.sap.require('sap.ushell.renderers.fiori2.search.SearchShellHelper');t.searchShellHelper=sap.ushell.renderers.fiori2.search.SearchShellHelper;if(sap.ui.getCore().byId('searchFieldInShell')===undefined){t.searchShellHelper.init(false);t.searchShellHelper.oSearchButton.addEventDelegate({onAfterRendering:function(E){t.searchShellHelper.openSearchFieldGroup(true);}},t.searchShellHelper.oSearchButton);}else{t.searchShellHelper.resetModel();t.searchShellHelper.openSearchFieldGroup(true);}}});if(C.openSearchAsDefault){jQuery.sap.require('sap.ushell.renderers.fiori2.search.SearchShellHelper');t.searchShellHelper=sap.ushell.renderers.fiori2.search.SearchShellHelper;if(sap.ui.getCore().byId('searchFieldInShell')===undefined){t.searchShellHelper.init(false);t.searchShellHelper.oSearchButton.addEventDelegate({onAfterRendering:function(E){t.searchShellHelper.openSearchFieldGroup(false);}},t.searchShellHelper.oSearchButton);}}t.oShellSearchBtn.addEventDelegate({onsapskipforward:function(E){E.preventDefault();sap.ushell.renderers.lean.AccessKeysHandler.bFocusOnShell=false;}});t.aDanglingControls.push(t.oShellSearchBtn);}this.logonIFrameReference=null;return new sap.m.App({pages:this.oShellPage});},getOUnifiedShell:function(){return this.oUnifiedShell;},setOUnifiedShell:function(u){this.oUnifiedShell=u;},loadUserImage:function(){var i=sap.ushell.Container.getUser().getImage();if(i){jQuery.ajax({url:i,headers:{'Cache-Control':'no-cache, no-store, must-revalidate','Pragma':'no-cache','Expires':'0'},success:function(){var a=sap.ui.getCore().byId('actionsBtn');if(a){a.setImage(i);}},error:function(){jQuery.sap.log.error("Could not load user image from: "+i,"","sap.ushell.renderers.fiori2.Shell.view");}});}},_getIconURI:function(i){var r=null;if(i){var m=/url[\s]*\('?"?([^\'")]*)'?"?\)/.exec(i);if(m){r=m[1];}}return r;},initShellBarLogo:function(u){jQuery.sap.require("sap.ui.core.theming.Parameters");var i=sap.ui.core.theming.Parameters.get("sapUiGlobalLogo");if(i){i=this._getIconURI(i);if(!i){u.setIcon(sap.ui.resource("sap.ui.core","mimes/logo/sap_50x26.png"));}}var t=this;sap.ui.getCore().attachThemeChanged(function(){if(u.bIsDestroyed){return;}var n=sap.ui.core.theming.Parameters.get("sapUiGlobalLogo");if(n){n=t._getIconURI(n);if(n){u.setIcon(n);}else{u.setIcon(sap.ui.resource("sap.ui.core","mimes/logo/sap_50x26.png"));}}else{u.setIcon(sap.ui.resource("sap.ui.core","mimes/logo/sap_50x26.png"));}});},initNavContainer:function(c){var n=new sap.m.NavContainer({id:"navContainer",afterNavigate:jQuery.proxy(c.onAfterNavigate,c)});n.addCustomTransition("slideBack",sap.m.NavContainer.transitions.slide.back,sap.m.NavContainer.transitions.slide.back);return n;},updateShellAggregation:function(n){var b=this.mBindingInfos[n],a=this.getMetadata().getJSONKeys()[n],c;jQuery.each(this[a._sGetter](),jQuery.proxy(function(i,v){this[a._sRemoveMutator](v);},this));jQuery.each(b.binding.getContexts(),jQuery.proxy(function(i,v){c=b.factory(this.getId()+"-"+i,v)?b.factory(this.getId()+"-"+i,v).setBindingContext(v,b.model):"";this[a._sMutator](c);},this));},disableBouncing:function(p){p.onBeforeRendering=function(){sap.m.Page.prototype.onBeforeRendering.apply(p);var s=this._oScroller,o=s.onAfterRendering;s.onAfterRendering=function(){o.apply(s);if(s._scroller){s._scroller.options.bounce=false;}};};return p;},getControllerName:function(){return"sap.ushell.renderers.fiori2.Shell";},pageFactory:function(i,c,d){var p=new sap.m.Page({id:i,showHeader:false,content:c,enableScrolling:!!sap.ui.Device.system.desktop}),e=["onAfterHide","onAfterShow","onBeforeFirstShow","onBeforeHide","onBeforeShow"],D={};jQuery.each(e,function(I,E){D[E]=jQuery.proxy(function(a){jQuery.each(this.getContent(),function(I,c){c._handleEvent(a);});},p);});p.addEventDelegate(D);if(d&&sap.ui.Device.system.desktop){this.disableBouncing(p);}return p;},createIFrameDialog:function(){var d=null,l=this.logonIFrameReference,c;var _=function(){if(l){l.remove();}return jQuery('<iframe id="SAMLDialogFrame" src="" frameborder="0"></iframe>');};var a=function(){d.addStyleClass('sapUshellSamlDialogHidden');jQuery('#sap-ui-blocklayer-popup').addClass('sapUshellSamlDialogHidden');};this.destroyIFrameDialog();var b=new sap.m.Button({text:sap.ushell.resources.i18n.getText("samlCloseBtn"),press:function(){sap.ushell.Container.cancelLogon();}});var h=new sap.ui.core.HTML("SAMLDialogFrame");this.logonIFrameReference=_();h.setContent(this.logonIFrameReference.prop('outerHTML'));d=new sap.m.Dialog({id:"SAMLDialog",title:sap.ushell.resources.i18n.getText("samlDialogTitle"),contentWidth:"50%",contentHeight:"50%",rightButton:b});c=sap.ushell.Container.getService("SupportTicket").isEnabled();if(c){jQuery.sap.require("sap.ushell.ui.footerbar.ContactSupportButton");var C=new sap.ushell.ui.footerbar.ContactSupportButton();C.setWidth('150px');C.setIcon('');d.setLeftButton(C);}d.addContent(h);d.open();a();this.logonIFrameReference=jQuery('#SAMLDialogFrame');return this.logonIFrameReference[0];},destroyIFrameDialog:function(){var d=sap.ui.getCore().byId('SAMLDialog');if(d){d.destroy();}this.logonIFrameReference=null;},showIFrameDialog:function(){var d=sap.ui.getCore().byId('SAMLDialog');if(d){d.removeStyleClass('sapUshellSamlDialogHidden');jQuery('#sap-ui-blocklayer-popup').removeClass('sapUshellSamlDialogHidden');}}});}());};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.SearchFacetDialogModel')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchFacetDialogModel');(function(g){"use strict";sap.ushell.renderers.fiori2.search.SearchModel.extend("sap.ushell.renderers.fiori2.search.SearchFacetDialogModel",{constructor:function(){var t=this;sap.ushell.renderers.fiori2.search.SearchModel.prototype.constructor.apply(t,[]);t.facetQuery=t.sina.createPerspectiveQuery({templateFactsheet:true});t.aFilters=[];t.aAttributsMetaData=[];},facetDialogCall:function(){var t=this;t.facetQuery.setSearchTerms("*");t.facetQuery.setDataSource(t.getDataSource());t.facetQuery.setSkip(0);t.facetQuery.setFacetOptions({});t.resetFacetQueryFilterConditions();t.facetQuery.setExpand(['Grid','Items','ResultsetFacets','TotalCount']);return t.facetQuery.getResultSet().then(function(p){t.aAttributesMetaData=p.searchresultset.elements[0];t.setProperty('/facetDialog',t.oFacetFormatter.getDialogFacets(t.getDataSource(),p,t));},function(e){return jQuery.when(true);});},facetDialogSingleCall:function(p){var t=this;t.facetQuery.setSearchTerms("*");t.facetQuery.setDataSource(t.getDataSource());t.facetQuery.setSkip(0);t.facetQuery.setFacetOptions({"MaxNumberOfReturnValues":1000,"Attributes":[p.sAttribute]});t.facetQuery.setExpand(['Grid','Items','ResultsetFacets','TotalCount']);return t.facetQuery.getResultSet().then(function(a){var f=t.oFacetFormatter.getDialogFacets(t.getDataSource(),a,t);var I=[];jQuery.each(f,function(i,b){if(p.sAttribute===b.dimension){I=b.items;}});t.setProperty(p.sBindingPath+"/items",I);});},resetFacetQueryFilterConditions:function(){var t=this;t.facetQuery.resetFilterConditions();t.facetQuery.addFilterCondition('$$RenderingTemplatePlatform$$','=','html');t.facetQuery.addFilterCondition('$$RenderingTemplateTechnology$$','=','Tempo');t.facetQuery.addFilterCondition('$$RenderingTemplateVariant$$','=','');t.facetQuery.addFilterCondition('$$RenderingTemplateType$$','=','ItemDetails');t.facetQuery.addFilterCondition('$$RenderingTemplateType$$','=','ResultItem');},hasFilter:function(a){var t=this;var f=a.filterCondition;for(var i=0;i<t.aFilters.length;i++){if(t.aFilters[i].filterCondition.equals&&t.aFilters[i].filterCondition.equals(f)){return true;}}return false;},addFilter:function(i){var t=this;var f=i.filterCondition;if(!t.hasFilter(f)){t.aFilters.push(i);}},removeFilter:function(a){var t=this;var f=a.filterCondition;for(var i=0;i<t.aFilters.length;i++){if(t.aFilters[i].filterCondition.equals&&t.aFilters[i].filterCondition.equals(f)){t.aFilters.splice(i,1);return;}}},changeFilterAdvaced:function(a,A){var t=this;var f=a.filterCondition;for(var i=0;i<t.aFilters.length;i++){if(t.aFilters[i].filterCondition.equals&&t.aFilters[i].filterCondition.equals(f)){t.aFilters[i].advanced=A;return;}}}});})(window);};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.controls.SearchFacetFilter')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.controls.SearchFacetFilter');(function(){"use strict";sap.ui.core.Control.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetFilter',{metadata:{properties:{title:"string"},aggregations:{"facets":{type:"sap.ushell.renderers.fiori2.search.controls.SearchFacet",multiple:true}}},constructor:function(o){o=jQuery.extend({},{facets:{path:"/facets",template:new sap.ushell.renderers.fiori2.search.controls.SearchFacet()}},o);sap.ui.core.Control.prototype.constructor.apply(this,[o]);},fireReset:function(){this.getModel().resetFilterConditions(false);this.getModel().setDataSource(this.getModel().allDataSource,true);},renderer:function(r,c){function a(d){return function(e){var F=new sap.ushell.renderers.fiori2.search.SearchFacetDialogModel();F.setData(c.getModel().getData());F.facetDialogCall().done(function(){var D=new sap.ushell.renderers.fiori2.search.controls.SearchFacetDialog({selectedAttribute:d});D.setModel(F);D.setModel(c.getModel(),'searchModel');D.open();var p=c.getParent().getParent().getParent().getParent();p.oFacetDialog=D;});};}r.write("<div");r.writeControlData(c);r.addClass("sapUshellSearchFacetFilter");r.writeClasses();r.write('>');for(var i=0,l=c.getFacets().length;i<l;i++){var f=c.getFacets()[i];if(i===0){f.setEshRole("datasource");}else{f.setEshRole("attribute");if(i===1){f.setHeaderText(sap.ushell.resources.i18n.getText("filterBy"));}}r.renderControl(f);if(f.getEshRole()==="attribute"){var s=new sap.m.Link({text:"{showMore}",press:a(f.getBindingContext().getObject().dimension)});s.setModel(c.getModel("i18n"));s.addStyleClass('sapUshellSearchFacetShowMoreLink');r.renderControl(s);}}if(c.getFacets().length>1){r.write("<div>");var b=new sap.m.Button({text:"{showAllFilters}",press:a()});b.setModel(c.getModel("i18n"));b.addStyleClass("sapUshellSearchFacetFilterShowAllFilterBtn");r.renderControl(b);r.write("</div>");}r.write("</div>");},onAfterRendering:function(){var a=$('.sapUshellSearchFacetFilter .sapUshellSearchFacet').first().find('ul');var b=a.find('li');a.attr('role','tree');b.attr('role','treeitem');}});})();};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.container.Search.view')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.container.Search.view');(function(g){"use strict";jQuery.sap.require('sap.m.BusyDialog');var S=sap.ushell.renderers.fiori2.search.controls.SearchLayout;var a=sap.ushell.renderers.fiori2.search.controls.SearchResultListItem;var b=sap.ushell.renderers.fiori2.search.controls.SearchResultListItemFooter;var c=sap.ushell.renderers.fiori2.search.controls.SearchResultListContainer;var d=sap.ushell.renderers.fiori2.search.controls.SearchResultList;var e=sap.ushell.renderers.fiori2.search.controls.SearchNoResultScreen;var s=sap.ushell.renderers.fiori2.search.SearchHelper;sap.ui.jsview("sap.ushell.renderers.fiori2.search.container.Search",{createContent:function(C){var t=this;var m=t.assembleMainResultList();var f=new sap.ushell.renderers.fiori2.search.controls.SearchFilterBar({visible:{parts:[{path:'/facetVisibility'},{path:'/filterConditions'}],formatter:function(h,i){if(!h&&i.length>0){return true;}else{return false;}}}});t.tabStrips=t.assembleTabStrips();t.appSearchResult=t.assembleAppSearch();var r=new c({topList:t.appSearchResult,bottomList:m,tabStrips:t.tabStrips,filterBar:f,noResultScreen:new e({searchBoxTerm:'{/lastSearchTerm}',visible:{parts:[{path:'/count'},{path:'/isBusy'}],formatter:function(h,i){return h===0&&!i;}}})});t.searchLayout=new S({resultListContainer:r,busyIndicator:new sap.m.BusyDialog(),isBusy:'{/isBusy}',showFacets:'{/facetVisibility}',vertical:false,facets:new sap.ushell.renderers.fiori2.search.controls.SearchFacetFilter()});t.searchContainer=new sap.ushell.renderers.fiori2.search.controls.DivContainer({content:t.searchLayout,cssClass:'sapUshellSearchContainer'});t.oFocusHandler=new s.SearchFocusHandler(t);return t.searchContainer;},assembleTabStrips:function(){var t=this;var f=function(h,j){var k=h.getItems();for(var i=0;i<k.length;++i){var l=k[i];var m=l.getKey()||l.getId();if(m===j){return l.getBindingContext().getObject();}}return null;};var h=new sap.m.IconTabBar({upperCase:true,expandable:false,visible:{parts:[{path:'/facetVisibility'},{path:'/count'}],formatter:function(i,j){return!i&&j>0;}},selectedKey:{path:'/tabStrips/selected/key',mode:sap.ui.model.BindingMode.OneWay},select:function(i){var j;if(i.getParameter){j=i.getParameter('selectedKey');}if(!j){j=h.getSelectedKey();}var k=f(h,j);t.getModel().setDataSource(k);}});h.addStyleClass('searchTabStrips');h.bindAggregation('items','/tabStrips/strips',function(i,C){return new sap.m.IconTabFilter({text:'{label}',key:"{key}",content:null});});return h;},assembleMainResultList:function(){var t=this;t.resultList=new d({mode:sap.m.ListMode.None,growing:true,threshold:2,inset:false,showUnread:true,width:"auto",showNoData:false,visible:'{/resultsVisibility}'});t.resultList.setGrowingThreshold(2000);t.resultList.bindAggregation("items","/results",function(p,D){return t.assembleListItem(D);});return t.resultList;},assembleAppSearch:function(){var t=this;var f=new sap.ushell.renderers.fiori2.search.controls.SearchTilesContainer({maxRows:99999,totalLength:'{/appCount}',visible:'{/appsVisibility}',highlightTerms:'{/lastSearchTerm}',showMore:function(){var m=t.getModel();var n=m.getSkip()+m.getTop();m.setSkip(n,false);var h=10*f.getTilesPerRow();m.setTop(h);}});f.bindAggregation('tiles','/appResults',function(i,C){var h=C.getObject().tile;var v=sap.ushell.Container.getService('LaunchPage').getCatalogTileView(h);if(h.getTitle){v.usageAnalyticsTitle=h.getTitle();}else{v.usageAnalyticsTitle='app';}return v;});f.addStyleClass('sapUshellSearchTileResultList');sap.ui.getCore().getEventBus().subscribe('searchLayoutChanged',function(){f.delayedRerender();},this);return f;},assembleTitleItem:function(D){var i=new sap.m.CustomListItem();var t=new sap.m.Label({text:"{title}"});t.addStyleClass('bucketTitle');i.addStyleClass('bucketTitleContainer');i.addContent(new sap.m.HBox({items:[t]}));return i;},assembleFooterItem:function(D){var t=this;t.footerItem=new b({text:"{i18n>showMore}",showMore:function(){var C=t.getModel();var n=C.getSkip()+10;C.setSkip(n);}});var l=new sap.m.CustomListItem({content:t.footerItem});l.addStyleClass('sapUshellSearchResultListFooter');return l;},assembleAppContainerResultListItem:function(D,p){var t=this;var f=new sap.ushell.renderers.fiori2.search.controls.SearchTilesContainer({maxRows:sap.ui.Device.system.phone?2:1,totalLength:'{/appCount}',highlightTerms:'{/lastSearchTerm}',enableKeyHandler:false,showMore:function(){var m=t.getModel();m.setDataSource(m.appDataSource);}});f.bindAggregation('tiles','tiles',function(i,C){var h=C.getObject().tile;var v=sap.ushell.Container.getService('LaunchPage').getCatalogTileView(h);if(h.getTitle){v.usageAnalyticsTitle=h.getTitle();}else{v.usageAnalyticsTitle='app';}return v;});var l=new sap.m.CustomListItem({content:f});l.addStyleClass('sapUshellSearchResultListItem');l.addStyleClass('sapUshellSearchResultListItemApps');sap.ui.getCore().getEventBus().subscribe('searchLayoutChanged',function(){f.delayedRerender();},this);return l;},assembleResultListItem:function(D,p){var i=new a({title:"{$$Name$$}",titleUrl:"{uri}",type:"{dataSourceName}",imageUrl:"{imageUrl}",data:D});var l=new sap.m.CustomListItem({content:i});l.addStyleClass('sapUshellSearchResultListItem');return l;},assembleListItem:function(D){var t=this;var o=D.getObject();if(o.type==='title'){return t.assembleTitleItem(o);}else if(o.type==='footer'){return t.assembleFooterItem(o);}else if(o.type==='appcontainer'){return t.assembleAppContainerResultListItem(o,D.getPath());}else{return t.assembleResultListItem(o,D.getPath());}},onAllSearchStarted:function(){if(this.oTilesContainer){this.oTilesContainer.resetGrowing();}window.focusTrap=false;},onAllSearchFinished:function(){this.oFocusHandler.setFocus();},onNormalSearchFinished:function(){sap.ui.getCore().getEventBus().publish("closeCurtain");},onAppSearchFinished:function(f,h,r){},setAppView:function(A){var t=this;t.oAppView=A;if(t.oTilesContainer){t.oTilesContainer.setAppView(A);}},getControllerName:function(){return"sap.ushell.renderers.fiori2.search.container.Search";}});}(window));};
