(function(a,u){"use strict";var m={};function b(c,e){var j,k=[];for(var i=0;i<c.length;++i){j=m[c[i]]||g(c[i]);if(!j){throw'module definition dependecy not found: '+c[i];}k.push(j);}e.apply(null,k);}function d(i,c,e){if(typeof i!=='string'){throw'invalid module definition, module id must be defined and be a string';}if(c===u){throw'invalid module definition, dependencies must be specified';}if(e===u){throw'invalid module definition, definition function must be specified';}b(c,function(){m[i]=e.apply(null,arguments);});}function f(i){return!!m[i];}function g(i){var t=a;var c=i.split(/[.\/]/);for(var e=0;e<c.length;++e){if(!t[c[e]]){return;}t=t[c[e]];}return t;}function h(c){var i,t,e,j,p;for(i=0;i<c.length;i++){t=a;e=c[i];j=e.split(/[.\/]/);for(var k=0;k<j.length-1;++k){if(t[j[k]]===u){t[j[k]]={};}t=t[j[k]];}t[j[j.length-1]]=m[e];}if(a.AMDLC_TESTS){p=a.privateModules||{};for(e in m){p[e]=m[e];}for(i=0;i<c.length;i++){delete p[c[i]];}a.privateModules=p;}}d("tinymce/tableplugin/Utils",["tinymce/Env"],function(E){function c(t,n){return parseInt(t.getAttribute(n)||1,10);}function p(e){if(!E.ie||E.ie>10){e.innerHTML='<br data-mce-bogus="1" />';}}return{getSpanVal:c,paddCell:p};});d("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils"],function(T,E,U){var e=T.each,j=U.getSpanVal;return function(k,t){var l,n,s,o,p,q=k.selection,v=q.dom;function w(){var c=0;l=[];n=0;e(['thead','tbody','tfoot'],function(i){var r=v.select('> '+i+' tr',t);e(r,function(Z,y){y+=c;e(v.select('> td, > th',Z),function($,x){var _,y2,b1,c1;if(l[y]){while(l[y][x]){x++;}}b1=j($,'rowspan');c1=j($,'colspan');for(y2=y;y2<y+b1;y2++){if(!l[y2]){l[y2]=[];}for(_=x;_<x+c1;_++){l[y2][_]={part:i,real:y2==y&&_==x,elm:$,rowspan:b1,colspan:c1};}}n=Math.max(n,x+1);});});c+=r.length;});}function z(c,i){c=c.cloneNode(i);c.removeAttribute('id');return c;}function A(x,y){var r;r=l[y];if(r){return r[x];}}function B(c,i,r){if(c){r=parseInt(r,10);if(r===1){c.removeAttribute(i,1);}else{c.setAttribute(i,r,1);}}}function C(c){return c&&(v.hasClass(c.elm,'mce-item-selected')||c==p);}function D(){var r=[];e(t.rows,function(c){e(c.cells,function(i){if(v.hasClass(i,'mce-item-selected')||(p&&i==p.elm)){r.push(c);return false;}});});return r;}function F(){var r=v.createRng();r.setStartAfter(t);r.setEndAfter(t);q.setRng(r);v.remove(t);}function G(c){var i,r={};if(k.settings.table_clone_elements!==false){r=T.makeMap((k.settings.table_clone_elements||'strong em b i span font h1 h2 h3 h4 h5 h6 p div').toUpperCase(),/[ ,]/);}T.walk(c,function(x){var y;if(x.nodeType==3){e(v.getParents(x.parentNode,null,c).reverse(),function(x){if(!r[x.nodeName]){return;}x=z(x,false);if(!i){i=y=x;}else if(y){y.appendChild(x);}y=x;});if(y){y.innerHTML=E.ie?'&nbsp;':'<br data-mce-bogus="1" />';}return false;}},'childNodes');c=z(c,false);B(c,'rowSpan',1);B(c,'colSpan',1);if(i){c.appendChild(i);}else{U.paddCell(c);}return c;}function H(){var r=v.createRng(),c;e(v.select('tr',t),function(i){if(i.cells.length===0){v.remove(i);}});if(v.select('tr',t).length===0){r.setStartBefore(t);r.setEndBefore(t);q.setRng(r);v.remove(t);return;}e(v.select('thead,tbody,tfoot',t),function(i){if(i.rows.length===0){v.remove(i);}});w();if(s){c=l[Math.min(l.length-1,s.y)];if(c){q.select(c[Math.min(c.length-1,s.x)].elm,true);q.collapse(true);}}}function I(x,y,i,Z){var $,_,r,c,a1;$=l[y][x].elm.parentNode;for(r=1;r<=i;r++){$=v.getNext($,'tr');if($){for(_=x;_>=0;_--){a1=l[y+r][_].elm;if(a1.parentNode==$){for(c=1;c<=Z;c++){v.insertAfter(G(a1),a1);}break;}}if(_==-1){for(c=1;c<=Z;c++){$.insertBefore(G($.cells[0]),$.cells[0]);}}}}}function J(){e(l,function(r,y){e(r,function(c,x){var Z,$,i;if(C(c)){c=c.elm;Z=j(c,'colspan');$=j(c,'rowspan');if(Z>1||$>1){B(c,'rowSpan',1);B(c,'colSpan',1);for(i=0;i<Z-1;i++){v.insertAfter(G(c),c);}I(x,y,$-1,Z);}}});});}function K(c,i,r){var Z,$,_,a1,b1,x,y,c1,d1,e1,f1;if(c){Z=S(c);$=Z.x;_=Z.y;a1=$+(i-1);b1=_+(r-1);}else{s=o=null;e(l,function(g1,y){e(g1,function(c,x){if(C(c)){if(!s){s={x:x,y:y};}o={x:x,y:y};}});});if(s){$=s.x;_=s.y;a1=o.x;b1=o.y;}}c1=A($,_);d1=A(a1,b1);if(c1&&d1&&c1.part==d1.part){J();w();c1=A($,_).elm;B(c1,'colSpan',(a1-$)+1);B(c1,'rowSpan',(b1-_)+1);for(y=_;y<=b1;y++){for(x=$;x<=a1;x++){if(!l[y]||!l[y][x]){continue;}c=l[y][x].elm;if(c!=c1){e1=T.grep(c.childNodes);e(e1,function(g1){c1.appendChild(g1);});if(e1.length){e1=T.grep(c1.childNodes);f1=0;e(e1,function(g1){if(g1.nodeName=='BR'&&v.getAttrib(g1,'data-mce-bogus')&&f1++<e1.length-1){c1.removeChild(g1);}});}v.remove(c);}}}H();}}function L(c){var i,r,Z,x,$,_,a1,b1,c1;e(l,function(d1,y){e(d1,function(r){if(C(r)){r=r.elm;$=r.parentNode;_=z($,false);i=y;if(c){return false;}}});if(c){return!i;}});if(i===u){return;}for(x=0;x<l[0].length;x++){if(!l[i][x]){continue;}r=l[i][x].elm;if(r!=Z){if(!c){c1=j(r,'rowspan');if(c1>1){B(r,'rowSpan',c1+1);continue;}}else{if(i>0&&l[i-1][x]){b1=l[i-1][x].elm;c1=j(b1,'rowSpan');if(c1>1){B(b1,'rowSpan',c1+1);continue;}}}a1=G(r);B(a1,'colSpan',r.colSpan);_.appendChild(a1);Z=r;}}if(_.hasChildNodes()){if(!c){v.insertAfter(_,$);}else{$.parentNode.insertBefore(_,$);}}}function M(c){var i,r;e(l,function(y){e(y,function(Z,x){if(C(Z)){i=x;if(c){return false;}}});if(c){return!i;}});e(l,function(x,y){var Z,$,_;if(!x[i]){return;}Z=x[i].elm;if(Z!=r){_=j(Z,'colspan');$=j(Z,'rowspan');if(_==1){if(!c){v.insertAfter(G(Z),Z);I(i,y,$-1,_);}else{Z.parentNode.insertBefore(G(Z),Z);I(i,y,$-1,_);}}else{B(Z,'colSpan',Z.colSpan+1);}r=Z;}});}function N(){var c=[];e(l,function(r){e(r,function(i,x){if(C(i)&&T.inArray(c,x)===-1){e(l,function(r){var i=r[x].elm,y;y=j(i,'colSpan');if(y>1){B(i,'colSpan',y-1);}else{v.remove(i);}});c.push(x);}});});H();}function O(){var r;function c(i){var x,y;e(i.cells,function(Z){var $=j(Z,'rowSpan');if($>1){B(Z,'rowSpan',$-1);x=S(Z);I(x.x,x.y,1,1);}});x=S(i.cells[0]);e(l[x.y],function(Z){var $;Z=Z.elm;if(Z!=y){$=j(Z,'rowSpan');if($<=1){v.remove(Z);}else{B(Z,'rowSpan',$-1);}y=Z;}});}r=D();e(r.reverse(),function(i){c(i);});H();}function P(){var r=D();v.remove(r);H();return r;}function Q(){var r=D();e(r,function(c,i){r[i]=z(c,true);});return r;}function R(r,c){var x=D(),y=x[c?0:x.length-1],Z=y.cells.length;if(!r){return;}e(l,function(i){var $;Z=0;e(i,function(_){if(_.real){Z+=_.colspan;}if(_.elm.parentNode==y){$=1;}});if($){return false;}});if(!c){r.reverse();}e(r,function($){var i,_=$.cells.length,a1;for(i=0;i<_;i++){a1=$.cells[i];B(a1,'colSpan',1);B(a1,'rowSpan',1);}for(i=_;i<Z;i++){$.appendChild(G($.cells[_-1]));}for(i=Z;i<_;i++){v.remove($.cells[i]);}if(c){y.parentNode.insertBefore($,y);}else{v.insertAfter($,y);}});v.removeClass(v.select('td.mce-item-selected,th.mce-item-selected'),'mce-item-selected');}function S(c){var i;e(l,function(r,y){e(r,function(Z,x){if(Z.elm==c){i={x:x,y:y};return false;}});return!i;});return i;}function V(c){s=S(c);}function W(){var c,i;c=i=0;e(l,function(r,y){e(r,function(Z,x){var $,_;if(C(Z)){Z=l[y][x];if(x>c){c=x;}if(y>i){i=y;}if(Z.real){$=Z.colspan-1;_=Z.rowspan-1;if($){if(x+$>c){c=x+$;}}if(_){if(y+_>i){i=y+_;}}}}});});return{x:c,y:i};}function X(c){var i,r,Z,$,_,a1,b1,c1,x,y;o=S(c);if(s&&o){i=Math.min(s.x,o.x);r=Math.min(s.y,o.y);Z=Math.max(s.x,o.x);$=Math.max(s.y,o.y);_=Z;a1=$;for(y=r;y<=a1;y++){c=l[y][i];if(!c.real){if(i-(c.colspan-1)<i){i-=c.colspan-1;}}}for(x=i;x<=_;x++){c=l[r][x];if(!c.real){if(r-(c.rowspan-1)<r){r-=c.rowspan-1;}}}for(y=r;y<=$;y++){for(x=i;x<=Z;x++){c=l[y][x];if(c.real){b1=c.colspan-1;c1=c.rowspan-1;if(b1){if(x+b1>_){_=x+b1;}}if(c1){if(y+c1>a1){a1=y+c1;}}}}}v.removeClass(v.select('td.mce-item-selected,th.mce-item-selected'),'mce-item-selected');for(y=r;y<=a1;y++){for(x=i;x<=_;x++){if(l[y][x]){v.addClass(l[y][x].elm,'mce-item-selected');}}}}}function Y(c,i){var r,x,y;r=S(c);x=r.y*n+r.x;do{x+=i;y=A(x%n,Math.floor(x/n));if(!y){break;}if(y.elm!=c){q.select(y.elm,true);if(v.isEmpty(y.elm)){q.collapse(true);}return true;}}while(y.elm==c);return false;}t=t||v.getParent(q.getStart(true),'table');w();p=v.getParent(q.getStart(true),'th,td');if(p){s=S(p);o=W();p=A(s.x,s.y);}T.extend(this,{deleteTable:F,split:J,merge:K,insertRow:L,insertCol:M,deleteCols:N,deleteRows:O,cutRows:P,copyRows:Q,pasteRows:R,getPos:S,setStartCell:V,setEndCell:X,moveRelIdx:Y,refresh:w});};});d("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(V,E,T,U){var j=T.each,k=U.getSpanVal;return function(l){function p(){function o(e){var w=e.keyCode;function x(c,i){var n=c?'previousSibling':'nextSibling';var r=l.dom.getParent(i,'tr');var N=r[n];if(N){J(l,i,N,c);e.preventDefault();return true;}var O=l.dom.getParent(r,'table');var P=r.parentNode;var Q=P.nodeName.toLowerCase();if(Q==='tbody'||Q===(c?'tfoot':'thead')){var R=y(c,O,P,'tbody');if(R!==null){return A(c,R,i);}}return B(c,r,n,O);}function y(c,i,n,r){var N=l.dom.select('>'+r,i);var O=N.indexOf(n);if(c&&O===0||!c&&O===N.length-1){return z(c,i);}else if(O===-1){var P=n.tagName.toLowerCase()==='thead'?0:N.length-1;return N[P];}return N[O+(c?-1:1)];}function z(c,i){var n=c?'thead':'tfoot';var r=l.dom.select('>'+n,i);return r.length!==0?r[0]:null;}function A(c,i,n){var r=C(i,c);if(r){J(l,n,r,c);}e.preventDefault();return true;}function B(c,i,n,r){var N=r[n];if(N){D(N);return true;}var O=l.dom.getParent(r,'td,th');if(O){return x(c,O,e);}var P=C(i,!c);D(P);e.preventDefault();return false;}function C(c,i){var n=c&&c[i?'lastChild':'firstChild'];return n&&n.nodeName==='BR'?l.dom.getParent(n,'td,th'):n;}function D(n){l.selection.setCursorLocation(n,0);}function F(){return w==V.UP||w==V.DOWN;}function G(l){var n=l.selection.getNode();var c=l.dom.getParent(n,'tr');return c!==null;}function H(i){var n=0;var c=i;while(c.previousSibling){c=c.previousSibling;n=n+k(c,"colspan");}return n;}function I(n,H){var c=0,r=0;j(n.children,function(N,i){c=c+k(N,"colspan");r=i;if(c>H){return false;}});return r;}function J(c,n,r,i){var N=H(l.dom.getParent(n,'td,th'));var O=I(r,N);var P=r.childNodes[O];var Q=C(P,i);D(Q||P);}function K(M){var n=l.selection.getNode();var c=l.dom.getParent(n,'td,th');var i=l.dom.getParent(M,'td,th');return c&&c!==i&&L(c,i);}function L(n,N){return l.dom.getParent(n,'TABLE')===l.dom.getParent(N,'TABLE');}if(F()&&G(l)){var M=l.selection.getNode();setTimeout(function(){if(K(M)){x(!e.shiftKey&&w===V.UP,M,e);}},0);}}l.on('KeyDown',function(e){o(e);});}function q(){function i(r,c){var e=c.ownerDocument,n=e.createRange(),o;n.setStartBefore(c);n.setEnd(r.endContainer,r.endOffset);o=e.createElement('body');o.appendChild(n.cloneContents());return o.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,'-').replace(/<[^>]+>/g,'').length===0;}l.on('KeyDown',function(e){var r,c,n=l.dom;if(e.keyCode==37||e.keyCode==38){r=l.selection.getRng();c=n.getParent(r.startContainer,'table');if(c&&l.getBody().firstChild==c){if(i(r,c)){r=n.createRng();r.setStartBefore(c);r.setEndBefore(c);l.selection.setRng(r);e.preventDefault();}}}});}function s(){l.on('KeyDown SetContent VisualAid',function(){var c;for(c=l.getBody().lastChild;c;c=c.previousSibling){if(c.nodeType==3){if(c.nodeValue.length>0){break;}}else if(c.nodeType==1&&(c.tagName=='BR'||!c.getAttribute('data-mce-bogus'))){break;}}if(c&&c.nodeName=='TABLE'){if(l.settings.forced_root_block){l.dom.add(l.getBody(),l.settings.forced_root_block,l.settings.forced_root_block_attrs,E.ie&&E.ie<11?'&nbsp;':'<br data-mce-bogus="1" />');}else{l.dom.add(l.getBody(),'br',{'data-mce-bogus':'1'});}}});l.on('PreProcess',function(o){var c=o.node.lastChild;if(c&&(c.nodeName=="BR"||(c.childNodes.length==1&&(c.firstChild.nodeName=='BR'||c.firstChild.nodeValue=='\u00a0')))&&c.previousSibling&&c.previousSibling.nodeName=="TABLE"){l.dom.remove(c);}});}function t(){function c(e,r,n,o){var w=3,x=e.dom.getParent(r.startContainer,'TABLE');var y,z,A;if(x){y=x.parentNode;}z=r.startContainer.nodeType==w&&r.startOffset===0&&r.endOffset===0&&o&&(n.nodeName=="TR"||n==y);A=(n.nodeName=="TD"||n.nodeName=="TH")&&!o;return z||A;}function i(){var r=l.selection.getRng();var n=l.selection.getNode();var e=l.dom.getParent(r.startContainer,'TD,TH');if(!c(l,r,n,e)){return;}if(!e){e=n;}var o=e.lastChild;while(o.lastChild){o=o.lastChild;}if(o.nodeType==3){r.setEnd(o,o.data.length);l.selection.setRng(r);}}l.on('KeyDown',function(){i();});l.on('MouseDown',function(e){if(e.button!=2){i();}});}function v(){function c(e){l.selection.select(e,true);l.selection.collapse(true);}function i(e){l.$(e).empty();U.paddCell(e);}l.on('keydown',function(e){if((e.keyCode==V.DELETE||e.keyCode==V.BACKSPACE)&&!e.isDefaultPrevented()){var n,o,r,w;n=l.dom.getParent(l.selection.getStart(),'table');if(n){o=l.dom.select('td,th',n);r=T.grep(o,function(w){return l.dom.hasClass(w,'mce-item-selected');});if(r.length===0){w=l.dom.getParent(l.selection.getStart(),'td,th');if(l.selection.isCollapsed()&&w&&l.dom.isEmpty(w)){e.preventDefault();i(w);c(w);}return;}e.preventDefault();if(o.length==r.length){l.execCommand('mceTableDelete');}else{T.each(r,i);c(r[0]);}}}});}v();if(E.webkit){p();t();}if(E.gecko){q();s();}if(E.ie>10){q();s();}};});d("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(T,c,i){return function(j){var k=j.dom,t,s,l,n=true,r;function o(e){j.getBody().style.webkitUserSelect='';if(e||n){j.dom.removeClass(j.dom.select('td.mce-item-selected,th.mce-item-selected'),'mce-item-selected');n=false;}}function p(e){var q,v,w=e.target;if(r){return;}if(s&&(t||w!=s)&&(w.nodeName=='TD'||w.nodeName=='TH')){v=k.getParent(w,'table');if(v==l){if(!t){t=new T(j,v);t.setStartCell(s);j.getBody().style.webkitUserSelect='none';}t.setEndCell(w);n=true;}q=j.selection.getSel();try{if(q.removeAllRanges){q.removeAllRanges();}else{q.empty();}}catch(x){}e.preventDefault();}}j.on('MouseDown',function(e){if(e.button!=2&&!r){o();s=k.getParent(e.target,'td,th');l=k.getParent(s,'table');}});j.on('mouseover',p);j.on('remove',function(){k.unbind(j.getDoc(),'mouseover',p);});j.on('MouseUp',function(){var e,q=j.selection,v,w,x,y;function z(x,A){var w=new c(x,x);do{if(x.nodeType==3&&i.trim(x.nodeValue).length!==0){if(A){e.setStart(x,0);}else{e.setEnd(x,x.nodeValue.length);}return;}if(x.nodeName=='BR'){if(A){e.setStartBefore(x);}else{e.setEndBefore(x);}return;}}while((x=(A?w.next():w.prev())));}if(s){if(t){j.getBody().style.webkitUserSelect='';}v=k.select('td.mce-item-selected,th.mce-item-selected');if(v.length>0){e=k.createRng();x=v[0];e.setStartBefore(x);e.setEndAfter(x);z(x,1);w=new c(x,k.getParent(v[0],'table'));do{if(x.nodeName=='TD'||x.nodeName=='TH'){if(!k.hasClass(x,'mce-item-selected')){break;}y=x;}}while((x=w.next()));z(y);q.setRng(e);}j.nodeChanged();s=t=l=null;}});j.on('KeyUp Drop SetContent',function(e){o(e.type=='setcontent');s=t=l=null;r=false;});j.on('ObjectResizeStart ObjectResized',function(e){r=e.type!='objectresized';});return{clear:o};};});d("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(T,E){var e=T.each;return function(c){var s=this;function j(){var i=c.settings.color_picker_callback;if(i){return function(){var s=this;i.call(c,function(w){s.value(w).fire('change');},s.value());};}}function k(i){return{title:'Advanced',type:'form',defaults:{onchange:function(){q(i,this.parents().reverse()[0],this.name()=="style");}},items:[{label:'Style',name:'style',type:'textbox'},{type:'form',padding:0,formItemDefaults:{layout:'grid',alignH:['start','right']},defaults:{size:7},items:[{label:'Border color',type:'colorbox',name:'borderColor',onaction:j()},{label:'Background color',type:'colorbox',name:'backgroundColor',onaction:j()}]}]};}function r(i){return i?i.replace(/px$/,''):"";}function l(i){if(/^[0-9]+$/.test(i)){i+="px";}return i;}function n(i){e('left center right'.split(' '),function(w){c.formatter.remove('align'+w,{},i);});}function o(i){e('top middle bottom'.split(' '),function(w){c.formatter.remove('valign'+w,{},i);});}function p(i,w,x){function y(z,A){A=A||[];T.each(z,function(B){var C={text:B.text||B.title};if(B.menu){C.menu=y(B.menu);}else{C.value=B.value;if(w){w(C);}}A.push(C);});return A;}return y(i,x||[]);}function q(i,w,x){var y=w.toJSON();var z=i.parseStyle(y.style);if(x){w.find('#borderColor').value(z["border-color"]||'')[0].fire('change');w.find('#backgroundColor').value(z["background-color"]||'')[0].fire('change');}else{z["border-color"]=y.borderColor;z["background-color"]=y.backgroundColor;}w.find('#style').value(i.serializeStyle(i.parseStyle(i.serializeStyle(z))));}function t(i,w,x){var y=i.parseStyle(i.getAttrib(x,'style'));if(y["border-color"]){w.borderColor=y["border-color"];}if(y["background-color"]){w.backgroundColor=y["background-color"];}w.style=i.serializeStyle(y);}function v(i,w,x){var y=i.parseStyle(i.getAttrib(w,'style'));e(x,function(z){y[z.name]=z.value;});i.setAttrib(w,'style',i.serializeStyle(i.parseStyle(i.serializeStyle(y))));}s.tableProps=function(){s.table(true);};s.table=function(w){var x=c.dom,y,z,A,B,C={},D,F;function G(){function I(K,L,M){if(K.tagName==="TD"||K.tagName==="TH"){x.setStyle(K,L,M);}else{if(K.children){for(var i=0;i<K.children.length;i++){I(K.children[i],L,M);}}}}var J;q(x,this);C=T.extend(C,this.toJSON());if(C["class"]===false){delete C["class"];}c.undoManager.transact(function(){if(!y){y=c.plugins.table.insertTable(C.cols||1,C.rows||1);}c.dom.setAttribs(y,{style:C.style,'class':C['class']});if(c.settings.table_style_by_css){F=[];F.push({name:'border',value:C.border});F.push({name:'border-spacing',value:l(C.cellspacing)});v(x,y,F);x.setAttribs(y,{'data-mce-border-color':C.borderColor,'data-mce-cell-padding':C.cellpadding,'data-mce-border':C.border});if(y.children){for(var i=0;i<y.children.length;i++){I(y.children[i],'border',C.border);I(y.children[i],'padding',l(C.cellpadding));}}}else{c.dom.setAttribs(y,{border:C.border,cellpadding:C.cellpadding,cellspacing:C.cellspacing});}if(x.getAttrib(y,'width')&&!c.settings.table_style_by_css){x.setAttrib(y,'width',r(C.width));}else{x.setStyle(y,'width',l(C.width));}x.setStyle(y,'height',l(C.height));J=x.select('caption',y)[0];if(J&&!C.caption){x.remove(J);}if(!J&&C.caption){J=x.create('caption');J.innerHTML=!E.ie?'<br data-mce-bogus="1"/>':'\u00a0';y.insertBefore(J,y.firstChild);}n(y);if(C.align){c.formatter.apply('align'+C.align,{},y);}c.focus();c.addVisual();});}function H(I,J){var K=c.dom.select("td,th",I),L;function M(L,N){for(var i=0;i<N.length;i++){var O=x.getStyle(N[i],J);if(typeof L==="undefined"){L=O;}if(L!=O){return"";}}return L;}L=M(L,K);return L;}if(w===true){y=x.getParent(c.selection.getStart(),'table');if(y){C={width:r(x.getStyle(y,'width')||x.getAttrib(y,'width')),height:r(x.getStyle(y,'height')||x.getAttrib(y,'height')),cellspacing:r(x.getStyle(y,'border-spacing')||x.getAttrib(y,'cellspacing')),cellpadding:x.getAttrib(y,'data-mce-cell-padding')||x.getAttrib(y,'cellpadding')||H(y,'padding'),border:x.getAttrib(y,'data-mce-border')||x.getAttrib(y,'border')||H(y,'border'),borderColor:x.getAttrib(y,'data-mce-border-color'),caption:!!x.select('caption',y)[0],'class':x.getAttrib(y,'class')};e('left center right'.split(' '),function(i){if(c.formatter.matchNode(y,'align'+i)){C.align=i;}});}}else{z={label:'Cols',name:'cols'};A={label:'Rows',name:'rows'};}if(c.settings.table_class_list){if(C["class"]){C["class"]=C["class"].replace(/\s*mce\-item\-table\s*/g,'');}B={name:'class',type:'listbox',label:'Class',values:p(c.settings.table_class_list,function(i){if(i.value){i.textStyle=function(){return c.formatter.getCssText({block:'table',classes:[i.value]});};}})};}D={type:'form',layout:'flex',direction:'column',labelGapCalc:'children',padding:0,items:[{type:'form',labelGapCalc:false,padding:0,layout:'grid',columns:2,defaults:{type:'textbox',maxWidth:50},items:(c.settings.table_appearance_options!==false)?[z,A,{label:'Width',name:'width'},{label:'Height',name:'height'},{label:'Cell spacing',name:'cellspacing'},{label:'Cell padding',name:'cellpadding'},{label:'Border',name:'border'},{label:'Caption',name:'caption',type:'checkbox'}]:[z,A,{label:'Width',name:'width'},{label:'Height',name:'height'}]},{label:'Alignment',name:'align',type:'listbox',text:'None',values:[{text:'None',value:''},{text:'Left',value:'left'},{text:'Center',value:'center'},{text:'Right',value:'right'}]},B]};if(c.settings.table_advtab!==false){t(x,C,y);c.windowManager.open({title:"Table properties",data:C,bodyType:'tabpanel',body:[{title:'General',type:'form',items:D},k(x)],onsubmit:G});}else{c.windowManager.open({title:"Table properties",data:C,body:D,onsubmit:G});}};s.merge=function(i,w){c.windowManager.open({title:"Merge cells",body:[{label:'Cols',name:'cols',type:'textbox',value:'1',size:10},{label:'Rows',name:'rows',type:'textbox',value:'1',size:10}],onsubmit:function(){var x=this.toJSON();c.undoManager.transact(function(){i.merge(w,x.cols,x.rows);});}});};s.cell=function(){var i=c.dom,w,x,y,z=[];function A(){q(i,this);x=T.extend(x,this.toJSON());c.undoManager.transact(function(){e(z,function(w){c.dom.setAttribs(w,{scope:x.scope,style:x.style,'class':x['class']});c.dom.setStyles(w,{width:l(x.width),height:l(x.height)});if(x.type&&w.nodeName.toLowerCase()!=x.type){w=i.rename(w,x.type);}n(w);if(x.align){c.formatter.apply('align'+x.align,{},w);}o(w);if(x.valign){c.formatter.apply('valign'+x.valign,{},w);}});c.focus();});}z=c.dom.select('td.mce-item-selected,th.mce-item-selected');w=c.dom.getParent(c.selection.getStart(),'td,th');if(!z.length&&w){z.push(w);}w=w||z[0];if(!w){return;}x={width:r(i.getStyle(w,'width')||i.getAttrib(w,'width')),height:r(i.getStyle(w,'height')||i.getAttrib(w,'height')),scope:i.getAttrib(w,'scope'),'class':i.getAttrib(w,'class')};x.type=w.nodeName.toLowerCase();e('left center right'.split(' '),function(C){if(c.formatter.matchNode(w,'align'+C)){x.align=C;}});e('top middle bottom'.split(' '),function(C){if(c.formatter.matchNode(w,'valign'+C)){x.valign=C;}});if(c.settings.table_cell_class_list){y={name:'class',type:'listbox',label:'Class',values:p(c.settings.table_cell_class_list,function(C){if(C.value){C.textStyle=function(){return c.formatter.getCssText({block:'td',classes:[C.value]});};}})};}var B={type:'form',layout:'flex',direction:'column',labelGapCalc:'children',padding:0,items:[{type:'form',layout:'grid',columns:2,labelGapCalc:false,padding:0,defaults:{type:'textbox',maxWidth:50},items:[{label:'Width',name:'width'},{label:'Height',name:'height'},{label:'Cell type',name:'type',type:'listbox',text:'None',minWidth:90,maxWidth:null,values:[{text:'Cell',value:'td'},{text:'Header cell',value:'th'}]},{label:'Scope',name:'scope',type:'listbox',text:'None',minWidth:90,maxWidth:null,values:[{text:'None',value:''},{text:'Row',value:'row'},{text:'Column',value:'col'},{text:'Row group',value:'rowgroup'},{text:'Column group',value:'colgroup'}]},{label:'H Align',name:'align',type:'listbox',text:'None',minWidth:90,maxWidth:null,values:[{text:'None',value:''},{text:'Left',value:'left'},{text:'Center',value:'center'},{text:'Right',value:'right'}]},{label:'V Align',name:'valign',type:'listbox',text:'None',minWidth:90,maxWidth:null,values:[{text:'None',value:''},{text:'Top',value:'top'},{text:'Middle',value:'middle'},{text:'Bottom',value:'bottom'}]}]},y]};if(c.settings.table_cell_advtab!==false){t(i,x,w);c.windowManager.open({title:"Cell properties",bodyType:'tabpanel',data:x,body:[{title:'General',type:'form',items:B},k(i)],onsubmit:A});}else{c.windowManager.open({title:"Cell properties",data:x,body:B,onsubmit:A});}};s.row=function(){var i=c.dom,w,x,y,z,A,B=[],C;function D(){var w,F,G;q(i,this);A=T.extend(A,this.toJSON());c.undoManager.transact(function(){var H=A.type;e(B,function(y){c.dom.setAttribs(y,{scope:A.scope,style:A.style,'class':A['class']});c.dom.setStyles(y,{height:l(A.height)});if(H!=y.parentNode.nodeName.toLowerCase()){w=i.getParent(y,'table');F=y.parentNode;G=i.select(H,w)[0];if(!G){G=i.create(H);if(w.firstChild){w.insertBefore(G,w.firstChild);}else{w.appendChild(G);}}G.appendChild(y);if(!F.hasChildNodes()){i.remove(F);}}n(y);if(A.align){c.formatter.apply('align'+A.align,{},y);}});c.focus();});}w=c.dom.getParent(c.selection.getStart(),'table');x=c.dom.getParent(c.selection.getStart(),'td,th');e(w.rows,function(F){e(F.cells,function(G){if(i.hasClass(G,'mce-item-selected')||G==x){B.push(F);return false;}});});y=B[0];if(!y){return;}A={height:r(i.getStyle(y,'height')||i.getAttrib(y,'height')),scope:i.getAttrib(y,'scope'),'class':i.getAttrib(y,'class')};A.type=y.parentNode.nodeName.toLowerCase();e('left center right'.split(' '),function(F){if(c.formatter.matchNode(y,'align'+F)){A.align=F;}});if(c.settings.table_row_class_list){z={name:'class',type:'listbox',label:'Class',values:p(c.settings.table_row_class_list,function(F){if(F.value){F.textStyle=function(){return c.formatter.getCssText({block:'tr',classes:[F.value]});};}})};}C={type:'form',columns:2,padding:0,defaults:{type:'textbox'},items:[{type:'listbox',name:'type',label:'Row type',text:'None',maxWidth:null,values:[{text:'Header',value:'thead'},{text:'Body',value:'tbody'},{text:'Footer',value:'tfoot'}]},{type:'listbox',name:'align',label:'Alignment',text:'None',maxWidth:null,values:[{text:'None',value:''},{text:'Left',value:'left'},{text:'Center',value:'center'},{text:'Right',value:'right'}]},{label:'Height',name:'height'},z]};if(c.settings.table_row_advtab!==false){t(i,A,y);c.windowManager.open({title:"Row properties",data:A,bodyType:'tabpanel',body:[{title:'General',type:'form',items:C},k(i)],onsubmit:D});}else{c.windowManager.open({title:"Row properties",data:A,body:C,onsubmit:D});}};};});d("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(T,Q,C,D,c,j,E,P){var k=c.each;function l(n){var o,s=this,p=new D(n);function q(e){return function(){n.execCommand(e);};}function r(e,i){var y,x,F,G;F='<table id="__mce"><tbody>';for(y=0;y<i;y++){F+='<tr>';for(x=0;x<e;x++){F+='<td>'+(E.ie?" ":'<br>')+'</td>';}F+='</tr>';}F+='</tbody></table>';n.undoManager.transact(function(){n.insertContent(F);G=n.dom.get('__mce');n.dom.setAttrib(G,'id',null);n.dom.setAttribs(G,n.settings.table_default_attributes||{});n.dom.setStyles(G,n.settings.table_default_styles||{});});return G;}function t(e,i){function x(){e.disabled(!n.dom.getParent(n.selection.getStart(),i));n.selection.selectorChanged(i,function(y){e.disabled(!y);});}if(n.initialized){x();}else{n.on('init',x);}}function v(){t(this,'table');}function w(){t(this,'td,th');}function z(){var e='';e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var y=0;y<10;y++){e+='<tr>';for(var x=0;x<10;x++){e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(y*10+x)+'" href="#" '+'data-mce-x="'+x+'" data-mce-y="'+y+'"></a></td>';}e+='</tr>';}e+='</table>';e+='<div class="mce-text-center" role="presentation">1 x 1</div>';return e;}function A(e,i,F){var G=F.getEl().getElementsByTagName('table')[0];var x,y,H,I,J;var K=F.isRtl()||F.parent().rel=='tl-tr';G.nextSibling.innerHTML=(e+1)+' x '+(i+1);if(K){e=9-e;}for(y=0;y<10;y++){for(x=0;x<10;x++){I=G.rows[y].childNodes[x].firstChild;J=(K?x>=e:x<=e)&&y<=i;n.dom.toggleClass(I,'mce-active',J);if(J){H=I;}}}return H.parentNode;}if(n.settings.table_grid===false){n.addMenuItem('inserttable',{text:'Insert table',icon:'table',context:'table',onclick:p.table});}else{n.addMenuItem('inserttable',{text:'Insert table',icon:'table',context:'table',ariaHideMenu:true,onclick:function(e){if(e.aria){this.parent().hideAll();e.stopImmediatePropagation();p.table();}},onshow:function(){A(0,0,this.menu.items()[0]);},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName('a');n.dom.removeClass(e,'mce-active');n.dom.addClass(e[0],'mce-active');},menu:[{type:'container',html:z(),onPostRender:function(){this.lastX=this.lastY=0;},onmousemove:function(e){var i=e.target,x,y;if(i.tagName.toUpperCase()=='A'){x=parseInt(i.getAttribute('data-mce-x'),10);y=parseInt(i.getAttribute('data-mce-y'),10);if(this.isRtl()||this.parent().rel=='tl-tr'){x=9-x;}if(x!==this.lastX||y!==this.lastY){A(x,y,e.control);this.lastX=x;this.lastY=y;}}},onclick:function(e){var s=this;if(e.target.tagName.toUpperCase()=='A'){e.preventDefault();e.stopPropagation();s.parent().cancel();n.undoManager.transact(function(){r(s.lastX+1,s.lastY+1);});n.addVisual();}}}]});}n.addMenuItem('tableprops',{text:'Table properties',context:'table',onPostRender:v,onclick:p.tableProps});n.addMenuItem('deletetable',{text:'Delete table',context:'table',onPostRender:v,cmd:'mceTableDelete'});n.addMenuItem('cell',{separator:'before',text:'Cell',context:'table',menu:[{text:'Cell properties',onclick:q('mceTableCellProps'),onPostRender:w},{text:'Merge cells',onclick:q('mceTableMergeCells'),onPostRender:w},{text:'Split cell',onclick:q('mceTableSplitCells'),onPostRender:w}]});n.addMenuItem('row',{text:'Row',context:'table',menu:[{text:'Insert row before',onclick:q('mceTableInsertRowBefore'),onPostRender:w},{text:'Insert row after',onclick:q('mceTableInsertRowAfter'),onPostRender:w},{text:'Delete row',onclick:q('mceTableDeleteRow'),onPostRender:w},{text:'Row properties',onclick:q('mceTableRowProps'),onPostRender:w},{text:'-'},{text:'Cut row',onclick:q('mceTableCutRow'),onPostRender:w},{text:'Copy row',onclick:q('mceTableCopyRow'),onPostRender:w},{text:'Paste row before',onclick:q('mceTablePasteRowBefore'),onPostRender:w},{text:'Paste row after',onclick:q('mceTablePasteRowAfter'),onPostRender:w}]});n.addMenuItem('column',{text:'Column',context:'table',menu:[{text:'Insert column before',onclick:q('mceTableInsertColBefore'),onPostRender:w},{text:'Insert column after',onclick:q('mceTableInsertColAfter'),onPostRender:w},{text:'Delete column',onclick:q('mceTableDeleteCol'),onPostRender:w}]});var B=[];k("inserttable tableprops deletetable | cell row column".split(' '),function(e){if(e=='|'){B.push({text:'-'});}else{B.push(n.menuItems[e]);}});n.addButton("table",{type:"menubutton",title:"Table",menu:B});if(!E.isIE){n.on('click',function(e){e=e.target;if(e.nodeName==='TABLE'){n.selection.select(e);n.nodeChanged();}});}s.quirks=new Q(n);n.on('Init',function(){s.cellSelection=new C(n);});n.on('PreInit',function(){n.serializer.addAttributeFilter('data-mce-cell-padding,data-mce-border,data-mce-border-color',function(e,x){var i=e.length;while(i--){e[i].attr(x,null);}});});k({mceTableSplitCells:function(e){e.split();},mceTableMergeCells:function(e){var i;i=n.dom.getParent(n.selection.getStart(),'th,td');if(!n.dom.select('td.mce-item-selected,th.mce-item-selected').length){p.merge(e,i);}else{e.merge();}},mceTableInsertRowBefore:function(e){e.insertRow(true);},mceTableInsertRowAfter:function(e){e.insertRow();},mceTableInsertColBefore:function(e){e.insertCol(true);},mceTableInsertColAfter:function(e){e.insertCol();},mceTableDeleteCol:function(e){e.deleteCols();},mceTableDeleteRow:function(e){e.deleteRows();},mceTableCutRow:function(e){o=e.cutRows();},mceTableCopyRow:function(e){o=e.copyRows();},mceTablePasteRowBefore:function(e){e.pasteRows(o,true);},mceTablePasteRowAfter:function(e){e.pasteRows(o);},mceTableDelete:function(e){e.deleteTable();}},function(e,i){n.addCommand(i,function(){var x=new T(n);if(x){e(x);n.execCommand('mceRepaint');s.cellSelection.clear();}});});k({mceInsertTable:p.table,mceTableProps:function(){p.table(true);},mceTableRowProps:p.row,mceTableCellProps:p.cell},function(e,i){n.addCommand(i,function(x,y){e(y);});});if(n.settings.table_tab_navigation!==false){n.on('keydown',function(e){var i,x,y;if(e.keyCode==9){i=n.dom.getParent(n.selection.getStart(),'th,td');if(i){e.preventDefault();x=new T(n);y=e.shiftKey?-1:1;n.undoManager.transact(function(){if(!x.moveRelIdx(i,y)&&y>0){x.insertRow();x.refresh();x.moveRelIdx(i,y);}});}}});}s.insertTable=r;}P.add('table',l);});})(this);
