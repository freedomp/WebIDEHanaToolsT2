// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.require("sap.ushell.ui.launchpad.GroupListItem");jQuery.sap.require("sap.ui.core.IconPool");sap.ui.jsview("sap.ushell.components.flp.launchpad.group_list.GroupList",{createContent:function(c){this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);this.oModel=this.parentComponent.getModel();var t=this,o=this._getOpenCatalogItem(c),g=this._getGroupListItemTemplate(c);this.bAnimate=sap.ui.Device.system.desktop;this.isTouch=!sap.ui.Device.system.desktop;this.oGroupList=new sap.m.List("groupListItems",{items:{path:"/groups",template:g}}).addStyleClass("sapUshellGroupItemList");jQuery.extend(this.oGroupList,{onsapskipforward:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.goToTileContainer(e);},onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);},onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}});this.oGroupList.onAfterRendering=function(){this.data("sap-ui-fastnavgroup","false",false);jQuery("#groupListFooter").attr("data-sap-ui-fastnavgroup","false");t.oController.handleScroll();};jQuery.sap.require("sap.ushell.override");this.oGroupList.updateItems=sap.ushell.override.updateAggregatesFactory("items");if(this.getViewData().enablePersonalization===undefined||this.getViewData().enablePersonalization!==false){this.oActionList=new sap.m.List({items:[o]});var a=this.oActionList.onAfterRendering;this.oActionList.onAfterRendering=function(e){a.call(this,e);};var b=new sap.m.Bar({id:"groupListFooter",contentMiddle:[this.oActionList]});b.addStyleClass("sapUshellPersonalizationOn");this.groupListPage=new sap.m.Page({id:"groupListPage",showHeader:false,showFooter:true,content:[this.oGroupList],footer:b});this.groupListPage.addStyleClass("sapUshellPersonalizationOn");}else{this.groupListPage=new sap.m.Page({id:"groupListPage",showHeader:false,showFooter:false,content:[this.oGroupList]});}this.addStyleClass("sapUshellGroupList");return[this.groupListPage];},_getOpenCatalogItem:function(){var t=this,o=function(){t.parentComponent.getRouter().navTo('catalog');},O=new sap.m.ActionListItem("openCatalogActionItem",{text:"{i18n>open_catalog}",tooltip:"{i18n>openCatalog_tooltip}",press:o});O.addEventDelegate({onsaptabnext:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.goToTileContainer();},onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var j=jQuery(".sapUshellGroupLI:first:visible");if(!j.length){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}j.focus();}});if(this.oModel.getProperty("/enableHelp")){O.addStyleClass('help-id-openCatalogActionItem');}return O;},_getGroupListItemTemplate:function(c){var o=function(e){var x=this.getModel()&&this.getModel().getProperty('/enableHelp');if(this.getDefaultGroup()){this.addStyleClass("sapUshellDefaultGroupItem");if(x){this.addStyleClass("help-id-homeGroupListItem");}}else{this.addStyleClass("sapUshellGroupListItem");if(x){this.addStyleClass("help-id-groupListItem");}}jQuery(this.getDomRef()).attr("tabindex","0");};return new sap.ushell.ui.launchpad.GroupListItem({index:"{index}",title:"{title}",tooltip:"{title}",defaultGroup:"{isDefaultGroup}",groupId:"{groupId}",numberOfTiles:"{tiles/length}",afterRendering:o,isGroupVisible:"{isGroupVisible}",press:[function(e){this._handleGroupListItemPress(e);},c],visible:{parts:["/tileActionModeActive","isGroupVisible","/personalization","isGroupLocked","tiles/length","isDefaultGroup"],formatter:function(t,i,p,a,n,b){if(!this.groupHasVisibleTiles()&&(!p||(a&&!t)||(b&&!t))){return false;}return i||t;}}});},getControllerName:function(){return"sap.ushell.components.flp.launchpad.group_list.GroupList";}});}());
