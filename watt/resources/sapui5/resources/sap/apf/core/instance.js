/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.apf.core.instance");jQuery.sap.require('sap.apf.utils.utils');jQuery.sap.require("sap.apf.core.utils.uriGenerator");jQuery.sap.require("sap.apf.core.metadata");jQuery.sap.require("sap.apf.core.metadataFacade");jQuery.sap.require("sap.apf.core.metadataProperty");jQuery.sap.require("sap.apf.core.ajax");jQuery.sap.require("sap.apf.core.odataRequest");jQuery.sap.require("sap.apf.core.messageHandler");jQuery.sap.require("sap.apf.core.entityTypeMetadata");jQuery.sap.require("sap.apf.core.metadataFactory");jQuery.sap.require("sap.apf.core.textResourceHandler");jQuery.sap.require("sap.apf.core.configurationFactory");jQuery.sap.require("sap.apf.core.path");jQuery.sap.require("sap.apf.core.sessionHandler");jQuery.sap.require("sap.apf.core.resourcePathHandler");jQuery.sap.require("sap.apf.core.persistence");jQuery.sap.require("sap.apf.core.readRequest");jQuery.sap.require("sap.apf.core.readRequestByRequiredFilter");
sap.apf.core.Instance=function(a){'use strict';var t=this;var m=a.messageHandler;var s=a.startParameter;var r;var I={messageHandler:m,coreApi:t};var R;var M;var T;var c;var p;var S;var P;this.destroy=function(){p.destroy();};this.ajax=function(b){return sap.apf.core.ajax(b);};this.odataRequest=function(b,f,e,B){sap.apf.core.odataRequestWrapper(m,b,f,e,B);};this.getStartParameterFacade=function(){return s;};this.getMessageHandler=function(){return m;};this.putMessage=function(b){return m.putMessage(b);};this.check=function(e,b,C){return m.check(e,b,C);};this.createMessageObject=function(C){return m.createMessageObject(C);};this.activateOnErrorHandling=function(O){m.activateOnErrorHandling(O);};this.setCallbackForMessageHandling=function(C){m.setMessageCallback(C);};this.setApplicationCallbackForMessageHandling=function(C){m.setApplicationMessageCallback(C);};this.getLogMessages=function(){return m.getLogMessages();};this.checkForTimeout=function(b){var d=sap.apf.core.utils.checkForTimeout(b);if(d){m.putMessage(d);}return d;};this.getUriGenerator=function(){return sap.apf.core.utils.uriGenerator;};this.getMetadata=function(A){return M.getMetadata(A);};this.getMetadataFacade=function(){return M.getMetadataFacade();};this.getEntityTypeMetadata=function(A,e){return M.getEntityTypeMetadata(A,e);};this.loadApplicationConfig=function(f){R.loadConfigFromFilePath(f);};this.loadTextElements=function(b){T.loadTextElements(b);};this.getApplicationConfigProperties=function(){return R.getConfigurationProperties();};this.getResourceLocation=function(b){return R.getResourceLocation(b);};this.getPersistenceConfiguration=function(){return R.getPersistenceConfiguration();};this.getApplicationConfigurationURL=function(){return R.getApplicationConfigurationURL();};this.getCategories=function(){return c.getCategories();};this.existsConfiguration=function(i){return c.existsConfiguration(i);};this.getStepTemplates=function(){return c.getStepTemplates();};this.getFacetFilterConfigurations=function(){return c.getFacetFilterConfigurations();};this.getNavigationTargets=function(){return c.getNavigationTargets();};this.createStep=function(b,f,d){var e;m.check(b!==undefined&&typeof b==="string"&&b.length!==0,"sStepID is  unknown or undefined");e=c.createStep(b,d);p.addStep(e,f);return e;};this.getSteps=function(){return p.getSteps();};this.moveStepToPosition=function(b,n,f){p.moveStepToPosition(b,n,f);};this.updatePath=function(f,C){p.update(f,C);};this.removeStep=function(b,f){p.removeStep(b,f);};this.resetPath=function(b){if(b){r=p.serialize();}if(p){p.destroy();}p=new sap.apf.core.Path(I);};this.restoreOriginalPath=function(){if(r){p.destroy();p=new sap.apf.core.Path(I);p.deserialize(r);}};this.stepIsActive=function(b){return p.stepIsActive(b);};this.serializePath=function(){return p.serialize();};this.deserializePath=function(b){p.deserialize(b);};this.getTextNotHtmlEncoded=function(l,b){return T.getTextNotHtmlEncoded(l,b);};this.getTextHtmlEncoded=function(l,b){return T.getTextHtmlEncoded(l,b);};this.isInitialTextKey=function(b){return(b===sap.apf.core.constants.textKeyForInitialText);};this.getMessageText=function(C,b){return T.getMessageText(C,b);};this.getXsrfToken=function(b){return S.getXsrfToken(b);};this.setContext=function(C){S.setContext(C);};this.getContext=function(){return S.getContext();};this.getCumulativeFilter=function(){return a.getCumulativeFilter();};this.getLogicalSystem=function(){return S.getLogicalSystem();};this.createReadRequest=function(b){var d=c.createRequest(b);var e;if(typeof b==='string'){e=c.getConfigurationById(b);}else{e=b;}return new sap.apf.core.ReadRequest(I,d,e.service,e.entityType);};this.createReadRequestByRequiredFilter=function(b){var d=c.createRequest(b);var e;if(typeof b==='string'){e=c.getConfigurationById(b);}else{e=b;}return new sap.apf.core.ReadRequestByRequiredFilter(I,d,e.service,e.entityType);};this.loadMessageConfiguration=function(b,d){m.loadConfig(b,d);};this.loadAnalyticalConfiguration=function(C){c.loadConfig(C);};this.savePath=function(b,d,e,f){var g;var n;var C;var E;if(typeof b==='string'&&typeof d==='string'&&typeof e==='function'){g=b;n=d;C=e;E=f;P.modifyPath(g,n,C,E);}else if(typeof b==='string'&&typeof d==='function'){n=b;C=d;E=e;P.createPath(n,C,E);}else{m.putMessage(sap.apf.core.createMessageObject({code:"5027",aParameters:[b,d,e]}));}};this.readPaths=function(C){P.readPaths(C);};this.openPath=function(b,C,n){function l(d,e,f){if(!f&&r){r=undefined;}C(d,e,f);}return P.openPath(b,l,n);};this.deletePath=function(b,C){P.deletePath(b,C);};this.createFilter=function(b){return new sap.apf.utils.Filter(m,b);};this.getActiveStep=function(){return p.getActiveSteps()[0];};this.getCumulativeFilterUpToActiveStep=function(){return p.getCumulativeFilterUpToActiveStep();};this.setActiveStep=function(b){p.makeStepActive(b);var A=p.getActiveSteps();var i;for(i=0;i<A.length;++i){p.makeStepInactive(A[i]);}return p.makeStepActive(b);};this.createFirstStep=function(b,d,e){var i=false;var f;f=t.getStepTemplates();f.forEach(function(g){i=g.id===b?true:i;});if(!i){m.putMessage(m.createMessageObject({code:'5036',aParameters:[b]}));}else{t.createStep(b,e,d);}};this.getFunctionCreateRequest=function(){return c.createRequest;};T=new sap.apf.core.TextResourceHandler(I);m.setTextResourceHandler(T);if(a.manifests){I.manifests=a.manifests;}c=new sap.apf.core.ConfigurationFactory(I);var o={entityTypeMetadata:sap.apf.core.EntityTypeMetadata,hashtable:sap.apf.utils.Hashtable,metadata:sap.apf.core.Metadata,metadataFacade:sap.apf.core.MetadataFacade,metadataProperty:sap.apf.core.MetadataProperty,messageHandler:I.messageHandler,coreApi:t,datajs:OData,configurationFactory:c};M=new sap.apf.core.MetadataFactory(o);p=new sap.apf.core.Path(I);S=new sap.apf.core.SessionHandler(I);P=new sap.apf.core.Persistence(I);R=new sap.apf.core.ResourcePathHandler(I);};
