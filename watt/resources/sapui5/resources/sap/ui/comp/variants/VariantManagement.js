/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2015 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','sap/ui/Device','sap/ui/model/json/JSONModel','sap/m/SearchField','sap/m/RadioButton','sap/ui/core/TextAlign','sap/m/ScreenSize','sap/m/PopinDisplay','sap/m/Column','sap/m/Text','sap/m/Bar','sap/m/Table','sap/m/Page','sap/m/PlacementType','sap/m/ButtonType','sap/m/Toolbar','sap/m/ToolbarSpacer','sap/m/ActionSheet','sap/m/Button','sap/m/CheckBox','sap/m/Dialog','sap/m/Input','sap/m/Label','sap/m/ResponsivePopover','sap/m/SelectList','sap/ui/comp/library','sap/ui/comp/transport/TransportSelection','./EditableVariantItem','./VariantItem','sap/ui/core/Control','sap/ui/core/Item','sap/ui/core/ValueState','sap/ui/core/VerticalAlign','sap/ui/layout/HorizontalLayout','sap/ui/layout/Grid'],function(q,D,J,S,R,T,a,P,C,b,B,c,d,e,f,g,h,A,j,k,l,I,L,m,n,o,p,E,V,r,s,t,u,H,G){"use strict";var v=r.extend("sap.ui.comp.variants.VariantManagement",{metadata:{library:"sap.ui.comp",properties:{initialSelectionKey:{type:"string",group:"Misc",defaultValue:null},enabled:{type:"boolean",group:"Misc",defaultValue:true},defaultVariantKey:{type:"string",group:"Misc",defaultValue:null},selectionKey:{type:"string",group:"Misc",defaultValue:null},showCreateTile:{type:"boolean",group:"Misc",defaultValue:false},showExecuteOnSelection:{type:"boolean",group:"Misc",defaultValue:false},showShare:{type:"boolean",group:"Misc",defaultValue:false},lifecycleSupport:{type:"boolean",group:"Misc",defaultValue:false},standardItemText:{type:"string",group:"Misc",defaultValue:null},industrySolutionMode:{type:"boolean",group:"Misc",defaultValue:false}},defaultAggregation:"items",aggregations:{items:{type:"sap.ui.core.Item",multiple:true,singularName:"item",deprecated:true},variantItems:{type:"sap.ui.comp.variants.VariantItem",multiple:true,singularName:"variantItem"}},events:{save:{parameters:{name:{type:"string"},overwrite:{type:"boolean"},key:{type:"string"},exe:{type:"boolean"},def:{type:"boolean"},global:{type:"boolean"},lifecyclePackage:{type:"string"},lifecycleTransportId:{type:"string"}}},manage:{parameters:{renamed:{type:"string[]"},deleted:{type:"string[]"},exe:{type:"object[]"},def:{type:"boolean"}}},select:{parameters:{key:{type:"string"}}}}}});v.STANDARD_NAME="STANDARD";v.prototype.init=function(){var i=this;this.STANDARDVARIANTKEY="*standard*";this.setStandardVariantKey(this.STANDARDVARIANTKEY);this.aRemovedVariants=[];this.aRenamedVariants=[];this.aRemovedVariantTransports=[];this.aExeVariants=[];this.oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");this.lastSelectedVariantKey=this._sStandardVariantKey;this.bVariantItemMode=false;this.oSelectedItem=null;this.sNewDefaultKey="";this.bDirty=false;this.bManagementTableInitialized=false;this.sTransport=null;this.sPackage=null;this.aEvents=[];this.bEventRunning=false;this.bPopoverOpen=false;this.oVariantSelectionPage=null;this.oActions=null;this.oActionSheet=null;this.oActionSheetManage=null;this.oActionSheetSave=null;this.oActionSheetSaveAs=null;this.bManualVariantKey=false;this.bFireSelect=false;this.bExecuteOnSelectForStandard=false;this._isVendorLayer=false;this._bAllowDuplicates=true;this.oModel=new J({enabled:false});this.setModel(this.oModel,"save_enablement");this.oVariantManage=new j(this.getId()+"-manage",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_MANAGE"),enabled:false,press:function(){i._openVariantManagementDialog();}});this.oVariantManage.addStyleClass("sapUiHideOnPhone");this.oVariantSave=new j(this.getId()+"-mainsave",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVE"),press:function(){var w=i._createEvent("variantSavePressed",i._variantSavePressed);i._addEvent(w);},enabled:false});this.oVariantSave.setModel(this.oModel);this.oVariantSave.addStyleClass("sapUiHideOnPhone");this.oVariantSaveAs=new j(this.getId()+"-saveas",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVEAS"),press:function(){i._openSaveAsDialog();}});this.oVariantSaveAs.addStyleClass("sapUiHideOnPhone");this.oVariantText=new L(this.getId()+"-text");this._setStandardText();this.oVariantText.addStyleClass("sapUICompVarMngmtText");this.oVariantText.addStyleClass("sapUICompVarMngmtEnabled");this.oVariantText.addStyleClass("sapMH4Style");if(D.system.phone){this.oVariantText.addStyleClass("sapUICompVarMngmtTextMaxWidth");}this.oVariantModifiedText=new L(this.getId()+"-modified",{visible:false});this.oVariantModifiedText.setText("*");this.oVariantModifiedText.addStyleClass("sapUICompVarMngmtText");this.oVariantModifiedText.addStyleClass("sapUICompVarMngmtModified");this.oVariantModifiedText.addStyleClass("sapUICompVarMngmtEnabled");this.oVariantModifiedText.addStyleClass("sapMH4Style");this.oVariantPopoverTrigger=new j(this.getId()+"-trigger",{type:f.Transparent,icon:"sap-icon://arrow-down",press:function(){i._openVariantSelection();}});this.oVariantPopoverTrigger.addStyleClass("sapUICompVarMngmtTriggerBtn");this.oVariantText.setLabelFor(this.oVariantPopoverTrigger);this.oVariantLayout=new H({content:[this.oVariantText,this.oVariantModifiedText,this.oVariantPopoverTrigger]});this.oVariantLayout.addStyleClass("sapUICompVarMngmtLayout");this.addDependent(this.oVariantLayout);this.oVariantList=new n(this.getId()+"-list",{selectionChange:function(w){i.lastSelectedVariantKey=this.getSelectedItem().getKey();i._setSelectionByKey(this.getSelectedItem().getKey());i.oVariantPopOver.close();i.bDirty=false;i.oVariantModifiedText.setVisible(false);i.oModel.setProperty("/enabled",false);i.bFireSelect=true;}});this.oVariantList.setNoDataText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_NODATA"));this.oActionSheetManage=new j({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_MANAGE"),enabled:false,press:function(w){i._openVariantManagementDialog();}});this.oActionSheetSave=new j({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVE"),enabled:false,press:function(w){var x=i._createEvent("variantSavePressed",i._variantSavePressed);i._addEvent(x);}});this.oActionSheetSaveAs=new j({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVEAS"),press:function(w){i._openSaveAsDialog();}});this.oActions=new j(this.getId()+"-actions",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_ACTIONS"),press:function(){i.oActionSheet=i._getActionSheet();i.oActionSheet.openBy(this);}});this.oActions.addStyleClass("sapUiVisibleOnlyOnPhone");this.oSearchField=new S();this.oSearchField.attachLiveChange(function(w){i._triggerSearch(w);});this.oVariantSelectionPage=new d(this.getId()+"selpage",{subHeader:new g({content:[this.oSearchField]}),content:[this.oVariantList],footer:new g({content:[new h(this.getId()+"-spacer"),this.oVariantManage,this.oVariantSave,this.oVariantSaveAs,this.oActions]}),showSubHeader:false,showNavButton:false,showHeader:false});this.oVariantPopOver=new m(this.getId()+"-popover",{title:this.oResourceBundle.getText("VARIANT_MANAGEMENT_VARIANTS"),contentWidth:"400px",placement:e.Bottom,content:[this.oVariantSelectionPage],afterOpen:function(){i.bPopoverOpen=true;},afterClose:function(){i.bPopoverOpen=false;if(i.bFireSelect==true){i.bFireSelect=false;setTimeout(function(){i._fireSelectAsync();},0);}},contentHeight:"300px"});this.oVariantPopOver.addStyleClass("sapUICompVarMngmtPopover");this.oInputName=new I(this.getId()+"-name",{liveChange:function(w){var x=this.getValue();x=x.trim();if(x===""){this.setValueState(t.Error);this.setValueStateText(i.oResourceBundle.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));}else{this.setValueState(t.None);this.setValueStateText(null);if(!i._bAllowDuplicates){i.oSaveSave.setEnabled(!i._isDuplicate(x));}}}});this.oLabelName=new L(this.getId()+"-namelabel",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_NAME"),required:true});this.oLabelName.setLabelFor(this.oInputName);this.oDefault=new k(this.getId()+"-default",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SETASDEFAULT"),enabled:true,visible:true,width:"100%"});this.oExecuteOnSelect=new k(this.getId()+"-execute",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_EXECUTEONSELECT"),enabled:true,visible:false,width:"100%"});this.oCreateTile=new k(this.getId()+"-tile",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_CREATETILE"),enabled:true,visible:false,width:"100%"});this.oShare=new k(this.getId()+"-share",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SHARE"),enabled:true,visible:false,select:function(w){var x=i._createEvent("inputfieldChange",i._handleShareSelected);x.args.push(w);i._addEvent(x);},width:"100%"});this.oInputKey=new I(this.getId()+"-key",{liveChange:function(w){var x=this.getValue();x=x.trim();if(x===""){this.setValueState(t.Error);this.setValueStateText(i.oResourceBundle.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));}else{this.setValueState(t.None);this.setValueStateText(null);}}});this.oLabelKey=new L(this.getId()+"-keylabel",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_KEY"),required:true});this.oLabelKey.setLabelFor(this.oInputKey);this.oSaveSave=new j(this.getId()+"-variantsave",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_OK"),press:function(){var w=i._createEvent("variantSaveAs",i._handleVariantSaveAs);i._addEvent(w);},enabled:true});this.oSaveDialogOptionsGrid=new G({defaultSpan:"L6 M6 S12"});this.oManagementTable=new c(this.getId()+"-managementTable");this.oManagementSave=new j(this.getId()+"-managementsave",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_OK"),enabled:true,press:function(){var w=i._createEvent("managementSave",i._handleManageSavePressed);i._addEvent(w);}});};v.prototype._isDuplicate=function(N){var i=N.trim();var w=this.getStandardItemText().trim();if(w===i){return true;}var x=this._getItems();for(var y=0;y<x.length;y++){w=x[y].getText().trim();if(w===i){return true;}}return false;};v.prototype._getActionSheet=function(){var i=this.oActionSheet;if(!i){i=new A(this.getId()+"-actionsheet",{showCancelButton:true,buttons:[this.oActionSheetManage,this.oActionSheetSave,this.oActionSheetSaveAs],placement:e.Top});this.oActionSheet=i;}return i;};v.prototype._getManagementDialog=function(){var i=this;var w=this.oManagementDialog;if(!w){w=new l(this.getId()+"-managementdialog",{contentWidth:"600px",customHeader:new B(this.getId()+"-managementHeader",{contentMiddle:[new b(this.getId()+"-managementHeaderText",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_MANAGEDIALOG")})]}),beginButton:this.oManagementSave,endButton:new j(this.getId()+"-managementcancel",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_CANCEL"),press:function(){i.aRemovedVariants=[];if(i.oManagementDialog){i.oManagementDialog.close();}}}),content:[this.oManagementTable],stretch:D.system.phone,afterClose:function(){if(i.bFireSelect==true){i.bFireSelect=false;setTimeout(function(){i._fireSelectAsync();},0);}}});w.setParent(this);w.addStyleClass("sapUiPopupWithPadding");this.oManagementDialog=w;}return w;};v.prototype._getSaveDialog=function(){var i=this;var w=this.oSaveDialog;if(!w){if(!this._bAllowDuplicates){this.oSaveSave.setEnabled(false);}w=new l(this.getId()+"-savedialog",{title:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVEDIALOG"),beginButton:this.oSaveSave,endButton:new j(this.getId()+"-variantcancel",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_CANCEL"),press:function(){if(i.oSaveDialog){i.oSaveDialog.close();}}}),content:[this.oLabelName,this.oInputName,this.oLabelKey,this.oInputKey,this.oSaveDialogOptionsGrid],stretch:D.system.phone});w.setParent(this);w.addStyleClass("sapUiPopupWithPadding");w.addStyleClass("sapUiCompVarMngmtSaveDialog");w.setInitialFocus(this.oInputName.getId());this.oSaveDialog=w;}return w;};v.prototype._triggerSearch=function(i){if(!i){return;}var w=i.getParameters();if(!w){return;}this._restoreCompleteList();var x=w.newValue?w.newValue:"";this._triggerSearchByValue(x.toLowerCase());};v.prototype._triggerSearchByValue=function(i){var w,K,x;this.oSelectedVariantItemKey=null;x=this.oVariantList.getItemByKey(this.getStandardVariantKey());if(x&&(x.getText().toLowerCase().indexOf(i)<0)){if(this.getSelectionKey()===K){this.oSelectedVariantItemKey=K;}this.oVariantList.removeItem(x);x.destroy();}var y=this._getItems();for(var z=0;z<y.length;z++){w=y[z].getText();if(w.toLowerCase().indexOf(i)<0){K=y[z].getKey();x=this.oVariantList.getItemByKey(K);if(x){if(this.getSelectionKey()===K){this.oSelectedVariantItemKey=K;}this.oVariantList.removeItem(x);x.destroy();}}}};v.prototype._restoreCompleteList=function(){var i,w,x,y;var z=0;y=this.oVariantList.getItemByKey(this.getStandardVariantKey());if(!y){y=this._createStandardVariantListItem();if(y){this.oVariantList.insertItem(y,0);}}if(y){z=1;if(this.oSelectedVariantItemKey){if(this.oSelectedVariantItemKey===y.getKey()){this.oVariantList.setSelectedItem(y);this.oSelectedVariantItemKey=null;}}else{if(this.getSelectionKey()==y.getKey()||this.getSelectionKey()===null){this.oVariantList.setSelectedItem(y);}}}x=this._getItems();x.sort(this._compareItems);for(i=0;i<x.length;i++){w=x[i];if(w.getKey()===this.getStandardVariantKey()){continue;}y=this.oVariantList.getItemByKey(w.getKey());if(!y){y=this._createVariantListItem(w,i);this.oVariantList.insertItem(y,i+z);}if(this.oSelectedVariantItemKey){if(this.oSelectedVariantItemKey===y.getKey()){this.oVariantList.setSelectedItem(y);this.oSelectedVariantItemKey=null;}}else{if(this.getSelectionKey()==y.getKey()){this.oVariantList.setSelectedItem(y);}}}};v.prototype._determineStandardVariantName=function(){var i=this.oResourceBundle.getText("VARIANT_MANAGEMENT_STANDARD");if(this.bVariantItemMode===false){i=this.oResourceBundle.getText("VARIANT_MANAGEMENT_DEFAULT");}if(this.getStandardVariantKey()===this.STANDARDVARIANTKEY){if(this.getStandardItemText()!==null&&this.getStandardItemText()!=""){i=this.getStandardItemText();}}return i;};v.prototype._createStandardVariantListItem=function(){var i,w=null;var x=this._determineStandardVariantName();if((this.bVariantItemMode===true)||(this.bVariantItemMode===false&&(this.getSelectionKey()===this.getStandardVariantKey()||this.getSelectionKey()===null))){w=new V(this.oVariantPopoverTrigger.getId()+"-item-standard",{key:this.getStandardVariantKey(),text:x,readOnly:true,executeOnSelection:this.bExecuteOnSelectForStandard});if(this._isIndustrySolutionModeAndVendorLayer()&&this.bVariantItemMode){w.setGlobal(true);}if(this.getStandardVariantKey()!==this.STANDARDVARIANTKEY){i=this.getItemByKey(this.getStandardVariantKey());if(i){this._setVariantListItemProperties(i,w);w.setReadOnly(true);}}}return w;};v.prototype._createVariantListItem=function(i,w){var x=new V(this.oVariantPopoverTrigger.getId()+"-item-"+w,{key:i.getKey(),text:i.getText()});this._setVariantListItemProperties(i,x);return x;};v.prototype._setVariantListItemProperties=function(i,w){if(i.getReadOnly){w.setReadOnly(i.getReadOnly());}if(i.getExecuteOnSelection){w.setExecuteOnSelection(i.getExecuteOnSelection());}if(i.getGlobal){w.setGlobal(i.getGlobal());}if(i.getLifecyclePackage){w.setLifecyclePackage(i.getLifecyclePackage());}if(i.getLifecycleTransportId){w.setLifecycleTransportId(i.getLifecycleTransportId());}if(i.getNamespace){w.setNamespace(i.getNamespace());}if(i.getAccessOptions){w.setAccessOptions(i.getAccessOptions());}if(i.getLabelReadOnly){w.setLabelReadOnly(i.getLabelReadOnly());}};v.prototype.exit=function(){if(this.oSearchField){this.oSearchField.destroy();this.oSearchField=undefined;}if(this.oVariantManage){this.oVariantManage.destroy();this.oVariantManage=undefined;}if(this.oVariantSave){this.oVariantSave.destroy();this.oVariantSave=undefined;}if(this.oVariantList){this.oVariantList.destroy();this.oVariantList=undefined;}if(this.oInputName){this.oInputName.destroy();this.oInputName=undefined;}if(this.oLabelName){this.oLabelName.destroy();this.oLabelName=undefined;}if(this.oDefault){this.oDefault.destroy();this.oDefault=undefined;}if(this.oSaveSave){this.oSaveSave.destroy();this.oSaveSave=undefined;}if(this.oSaveDialog){this.oSaveDialog.destroy();this.oSaveDialog=undefined;}if(this.oManagementTable){this.oManagementTable.destroy();this.oManagementTable=undefined;}if(this.oManagementSave){this.oManagementSave.destroy();this.oManagementSave=undefined;}if(this.oManagementDialog){this.oManagementDialog.destroy();this.oManagementDialog=undefined;}if(this.oVariantText){this.oVariantText.destroy();this.oVariantText=undefined;}if(this.oVariantPopoverTrigger){this.oVariantPopoverTrigger.destroy();this.oVariantPopoverTrigger=undefined;}if(this.oVariantLayout){this.oVariantLayout.destroy();this.oVariantLayout=undefined;}if(this.oVariantPopOver){this.oVariantPopOver.destroy();this.oVariantPopOver=undefined;}if(this.oVariantSaveAs){this.oVariantSaveAs.destroy();this.oVariantSaveAs=undefined;}if(this.oShare){this.oShare.destroy();this.oShare=undefined;}if(this.oCreateTile){this.oCreateTile.destroy();this.oCreateTile=undefined;}if(this.oSaveDialogOptionsGrid){this.oSaveDialogOptionsGrid.destroy();this.oSaveDialogOptionsGrid=undefined;}if(this.oVariantSelectionPage){this.oVariantSelectionPage.destroy();this.oVariantSelectionPage=undefined;}if(this.oActions){this.oActions.destroy();this.oActions=undefined;}if(this.oActionSheetManage){this.oActionSheetManage.destroy();this.oActionSheetManage=undefined;}if(this.oActionSheetSave){this.oActionSheetSave.destroy();this.oActionSheetSave=undefined;}if(this.oActionSheetSaveAs){this.oActionSheetSaveAs.destroy();this.oActionSheetSaveAs=undefined;}if(this.oInputKey){this.oInputKey.destroy();this.oInputKey=undefined;}if(this.oLabelKey){this.oLabelKey.destroy();this.oLabelKey=undefined;}};v.prototype.addItem=function(i){i=this.validateAggregation("items",i,true);this.bVariantItemMode=false;this.addAggregation("items",i,false);var _=this.getInitialSelectionKey();this._setSelection(i,_);this._manageButtonState();this._setStandardText();return this;};v.prototype.insertItem=function(i,w){var _=w;i=this.validateAggregation("items",i,true);this.bVariantItemMode=false;this.insertAggregation("items",i,_);var x=this.getInitialSelectionKey();this._setSelection(i,x);this._manageButtonState();this._setStandardText();return this;};v.prototype.removeItem=function(i){this.removeAggregation("items",i);this._manageButtonState();return i;};v.prototype.removeAllItems=function(){var i=this.removeAllAggregation("items");this._manageButtonState();this._setSelectedItem(null);return i;};v.prototype.destroyItems=function(){this.destroyAggregation("items");this._manageButtonState();this._setSelectedItem(null);return this;};v.prototype._getItems=function(){if(this.bVariantItemMode){return this.getVariantItems();}else{return this.getItems();}};v.prototype._removeItem=function(i){if(this.bVariantItemMode){return this.removeVariantItem(i);}else{return this.removeItem(i);}};v.prototype.getItemByKey=function(K){var i=this._getItems();for(var w=0;w<i.length;w++){if(K==i[w].getKey()){return i[w];}}return null;};v.prototype.addVariantItem=function(i){i=this.validateAggregation("variantItems",i,true);this.bVariantItemMode=true;this.addAggregation("variantItems",i,false);var _=this.getInitialSelectionKey();this._setSelection(i,_);this._manageButtonState();this._setStandardText();return this;};v.prototype.insertVariantItem=function(i,w){var _=w;i=this.validateAggregation("variantItems",i,true);this.bVariantItemMode=true;this.insertAggregation("variantItems",i,_);var x=this.getInitialSelectionKey();this._setSelection(i,x);this._manageButtonState();this._setStandardText();return this;};v.prototype._setSelectedItem=function(i){this.oSelectedItem=i;if(i!=null){this.oVariantText.setText(i.getText());}else{this._setStandardText();}};v.prototype._getSelectedItem=function(){return this.oSelectedItem;};v.prototype.setInitialSelectionKey=function(K){this.setProperty("initialSelectionKey",K,true);this._setSelectionByKey(K);};v.prototype.setEnabled=function(i){this.setProperty("enabled",i,false);if(this.oVariantPopoverTrigger){this.oVariantPopoverTrigger.setEnabled(i);}if(!i){this.oVariantText.removeStyleClass("sapUICompVarMngmtEnabled");this.oVariantModifiedText.removeStyleClass("sapUICompVarMngmtEnabled");this.oVariantText.addStyleClass("sapUICompVarMngmtDisabled");this.oVariantModifiedText.addStyleClass("sapUICompVarMngmtDisabled");}else{this.oVariantText.removeStyleClass("sapUICompVarMngmtDisabled");this.oVariantModifiedText.removeStyleClass("sapUICompVarMngmtDisabled");this.oVariantText.addStyleClass("sapUICompVarMngmtEnabled");this.oVariantModifiedText.addStyleClass("sapUICompVarMngmtEnabled");}};v.prototype._setSelection=function(i,K){if(i.getKey()===K){this._setSelectedItem(i);this.fireSelect({key:K});}};v.prototype.addStyleClass=function(i){if(r.prototype.addStyleClass){r.prototype.addStyleClass.apply(this,arguments);}if(this.oVariantPopOver){this.oVariantPopOver.addStyleClass(i);}if(this.oSaveDialog){this.oSaveDialog.addStyleClass(i);}if(this.oManagementDialog){this.oManagementDialog.addStyleClass(i);}};v.prototype.removeStyleClass=function(i){if(r.prototype.addStyleClass){r.prototype.removeStyleClass.apply(this,arguments);}if(this.oVariantPopOver){this.oVariantPopOver.removeStyleClass(i);}if(this.oSaveDialog){this.oSaveDialog.removeStyleClass(i);}if(this.oManagementDialog){this.oManagementDialog.removeStyleClass(i);}};v.prototype.clearVariantSelection=function(){this.setInitialSelectionKey(this.getStandardVariantKey());this._setSelectedItem(null);};v.prototype._setDialogCompactStyle=function(i,w){if(this._checkDialogCompactStyle(i)){w.addStyleClass("sapUiSizeCompact");}else{w.removeStyleClass("sapUiSizeCompact");}};v.prototype._checkDialogCompactStyle=function(i){if(i.$().closest(".sapUiSizeCompact").length>0){return true;}else{return false;}};v.prototype._manageButtonState=function(){if(this._getItems()&&this._getItems().length>0){this.oVariantManage.setEnabled(true);this.oActionSheetManage.setEnabled(true);}else{this.oVariantManage.setEnabled(false);this.oActionSheetManage.setEnabled(false);}};v.prototype.getSelectionKey=function(){var K=null;var i=this._getSelectedItem();if(i!==null){K=i.getKey();}else if(this.bVariantItemMode){K=this.getStandardVariantKey();}else{K=null;}return K;};v.prototype._setSelectionByKey=function(K){var i=this._getItems();var F=false;if(i.length>0){for(var w=0;w<i.length;w++){if(i[w].getKey()===K){this._setSelectedItem(i[w]);F=true;break;}}}if(!F){this._setSelectedItem(null);}};v.prototype.replaceKey=function(O,N){var i=this._getItems();if(i.length>0){for(var w=0;w<i.length;w++){if(i[w].getKey()===O){i[w].setKey(N);if(this.getDefaultVariantKey()==O){this.setDefaultVariantKey(N);}if(this._getSelectedItem()===i[w]){this._setSelectedItem(null);}break;}}}};v.prototype.currentVariantSetModified=function(F){if(F){if(!this.bDirty){this.oVariantModifiedText.setVisible(true);this.bDirty=true;this.oModel.setProperty("/enabled",true);}}else if(this.bDirty){this.oVariantModifiedText.setVisible(false);this.bDirty=false;this.oModel.setProperty("/enabled",false);}};v.prototype.currentVariantGetModified=function(){return this.bDirty;};v.prototype._openVariantSelection=function(){var i=null;if(this.bPopoverOpen==true){return;}this.bPopoverOpen=true;this.oVariantList.destroyItems();this.oVariantSave.setEnabled(false);this.oActionSheetSave.setEnabled(false);if(this.bVariantItemMode===false&&this.getSelectionKey()!==null){this.oVariantSave.setEnabled(true);this.oActionSheetSave.setEnabled(true);}i=this._getItems();if(i.length<9){this.oVariantSelectionPage.setShowSubHeader(false);}else{this.oVariantSelectionPage.setShowSubHeader(true);this.oSearchField.setValue("");}this._restoreCompleteList();if(this.bDirty){var w=this.oVariantList.getItemByKey(this.getSelectionKey());if(w){if(!w.getReadOnly()||(this._isIndustrySolutionModeAndVendorLayer()&&(this.getStandardVariantKey()===w.getKey()))){this.oVariantSave.setEnabled(true);this.oActionSheetSave.setEnabled(true);}}}this.oVariantSaveAs.setEnabled(true);if(this._isIndustrySolutionModeAndVendorLayer()&&(this.getStandardVariantKey()===this.getSelectionKey())&&(this.getStandardVariantKey()===this.STANDARDVARIANTKEY)){this.oVariantSaveAs.setEnabled(false);}this._setDialogCompactStyle(this,this.oVariantPopOver);this._manageButtonState();this.oVariantPopOver.setInitialFocus(this.oVariantList.getSelectedItem().getId());this.oVariantPopOver.openBy(this.oVariantPopoverTrigger.$("img")[0]);};v.prototype.onclick=function(i){if(this.getEnabled()){this._openVariantSelection();}};v.prototype.onkeydown=function(i){if(i.which===q.sap.KeyCodes.F4||i.altKey===true&&i.which===q.sap.KeyCodes.ARROW_UP||i.altKey===true&&i.which===q.sap.KeyCodes.ARROW_DOWN){if(this.getEnabled()){this._openVariantSelection();}}};v.prototype._initalizeManagementTableColumns=function(){if(this.bManagementTableInitialized){return;}this.oManagementTable.addColumn(new C({header:new b({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_NAME")})}));this.oManagementTable.addColumn(new C({header:new b({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_VARIANTTYPE")}),width:"4rem",demandPopin:true,popinDisplay:P.Inline,minScreenWidth:a.Tablet}));this.oManagementTable.addColumn(new C({header:new b({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_DEFAULT")}),width:"4rem",demandPopin:true,popinDisplay:P.Inline,minScreenWidth:a.Tablet}));if(this.getShowExecuteOnSelection()){this.oManagementTable.addColumn(new C({header:new b({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_EXECUTEONSELECT")}),width:"4rem",hAlign:T.Center,demandPopin:true,popinDisplay:P.Inline,minScreenWidth:a.Tablet}));}this.oManagementTable.addColumn(new C({width:"2.5rem",hAlign:T.Center}));this.bManagementTableInitialized=true;};v.prototype._initalizeSaveAsDialog=function(){this.oSaveDialogOptionsGrid.removeAllContent();this.oShare.setVisible(this.getShowShare());this.oExecuteOnSelect.setVisible(this.getShowExecuteOnSelection());this.oCreateTile.setVisible(this.getShowCreateTile());this.oSaveDialogOptionsGrid.addContent(this.oDefault);if(this.getShowShare()){this.oSaveDialogOptionsGrid.addContent(this.oShare);}if(this.getShowExecuteOnSelection()){this.oSaveDialogOptionsGrid.addContent(this.oExecuteOnSelect);}if(this.getShowCreateTile()){this.oSaveDialogOptionsGrid.addContent(this.oCreateTile);}};v.prototype.onBeforeRendering=function(){var w=function(x){var M,N=0;for(var i=0;i<x.length;i++){M=x[i].$().width();if(M>N){N=M;}}return N;};if(this.oSaveDialogOptionsGrid&&this.oSaveDialog&&this.oSaveDialog.getVisible()){var x=this.oSaveDialogOptionsGrid.getContent();if(x&&x.length>0){var y=this.oSaveDialogOptionsGrid.$().width();var z=w(x);var F=32;var K=12;if(!this._checkDialogCompactStyle(this.oSaveDialog)){F=48;K=18;}if((F+z+K)>y/2){this.oSaveDialogOptionsGrid.setDefaultSpan("L12 M12 S12");}}}};v.prototype._variantSavePressed=function(){var i=this._getSelectedItem();if(!i){if(this.getStandardVariantKey()===this.STANDARDVARIANTKEY){i=new V({text:this._determineStandardVariantName(),key:this.STANDARDVARIANTKEY,global:this._isIndustrySolutionModeAndVendorLayer()});}else{i=this.getItemByKey(this.getStandardVariantKey());}}var w=false;if((this.getDefaultVariantKey()===i.getKey())&&(this.getStandardVariantKey()!==this.STANDARDVARIANTKEY)){w=true;}if(i.getLifecyclePackage&&i.getGlobal()==true){var x=this;var O=function(z,F){x.oVariantPopOver.close();x.sPackage=z;x.sTransport=F;x.fireSave({name:i.getText(),overwrite:true,key:i.getKey(),def:w,global:(x._isIndustrySolutionModeAndVendorLayer()&&(x.getStandardVariantKey()===x.getStandardVariantKey())),lifecyclePackage:x.sPackage,lifecycleTransportId:x.sTransport});i.setLifecycleTransportId(x.sTransport);x.bDirty=false;x.oVariantModifiedText.setVisible(false);x.oModel.setProperty("/enabled",false);x._eventDone();};var y=function(z){x.sTransport=null;x.sPackage=null;x._cancelAllEvents();};this._assignTransport(i,O,y,this.oVariantText);}else{this.oVariantPopOver.close();this.fireSave({name:i.getText(),overwrite:true,key:i.getKey(),def:w});this.bDirty=false;this.oVariantModifiedText.setVisible(false);this.oModel.setProperty("/enabled",false);this._eventDone();}};v.prototype._assignTransport=function(i,O,w,x){var y={type:"variant",name:"",namespace:""};y["package"]="";if(i!==null){y["package"]=i.getLifecyclePackage();y["name"]=i.getKey();y["namespace"]=i.getNamespace();}var _=function(M){var N;var F;F=M.getParameters().selectedTransport;N=M.getParameters().selectedPackage;O(N,F);};var z=function(M){w(M);};if(this.getLifecycleSupport()){var F=null;if(i){F=i.getLifecycleTransportId();}if(F!=null&&F.trim().length>0){O(y["package"],F);}else{var K=new p();K.selectTransport(y,_,z,this._checkDialogCompactStyle(x),x);}}else{O(y["package"],"");}};v.prototype.getDefaultVariantKey=function(){var i=this.getProperty("defaultVariantKey");if(i===""){if(this.bVariantItemMode){i=this.getStandardVariantKey();}}return i;};v.prototype._compareItems=function(i,w){var F=i.getText();var x=w.getText();var y=F.toUpperCase();var z=x.toUpperCase();if(y==z){if(F==x){return 0;}if(F<x){return-1;}if(F>x){return 1;}}if(y<z){return-1;}if(y>z){return 1;}};v.prototype._accessOptionsText=function(O){var M=null;switch(O){case"R":M=this.oResourceBundle.getText("VARIANT_MANAGEMENT_WRONG_LAYER");break;case"RD":M=this.oResourceBundle.getText("VARIANT_MANAGEMENT_WRONG_LANGUAGE");break;default:M=null;}return M;};v.prototype._openSaveAsDialog=function(){this._initalizeSaveAsDialog();if(this._getSelectedItem()){this.oInputName.setValue(this._getSelectedItem().getText());}else{this.oInputName.setValue("");}this.oInputName.setEnabled(true);this.oInputName.setValueState(t.None);this.oInputName.setValueStateText(null);this.oDefault.setSelected(false);this.oShare.setSelected(false);this.oCreateTile.setSelected(false);this.oExecuteOnSelect.setSelected(false);this.oSaveDialog=this._getSaveDialog();this._setDialogCompactStyle(this,this.oSaveDialog);this.oVariantPopOver.close();this.sTransport=null;this.sPackage=null;if(this.bManualVariantKey){this.oInputKey.setVisible(true);this.oInputKey.setEnabled(true);this.oInputKey.setValueState(t.None);this.oInputKey.setValueStateText(null);this.oLabelKey.setVisible(true);}else{this.oInputKey.setVisible(false);this.oLabelKey.setVisible(false);}this.oSaveDialog.open();};v.prototype._checkManageItemNameChange=function(M){var i="";var w=null;var x=this;w=M.getCells()[0];i=w.getValue();i=i.trim();var y=M;var K=y.getKey();var z=this.oVariantList.getItemByKey(K);if(i.length===0){w.setValue(z.getText());w.setValueState(t.None);w.setValueStateText(null);}else{if(!this._bAllowDuplicates&&this._isDuplicate(i)&&(this.oVariantList.getItemByKey(K).getText().trim()!==i)){w.setValueState(t.Error);w.setValueStateText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_ERROR_DUPLICATE"));}else{w.setValueState(t.None);w.setValueStateText(null);}}if(w.getValueState()===t.Error){this.oManagementSave.setEnabled(false);this._eventDone();return;}this.oManagementSave.setEnabled(true);if(this.oVariantList.getItemByKey(K).getText().trim()===i){this._eventDone();return;}if(y.getGlobal()){var O=function(N,Q){y.setLifecyclePackage(N);y.setLifecycleTransportId(Q);x._eventDone();};var F=function(N){var z=x.oVariantList.getItemByKey(K);w.setValue(z.getText());x._cancelAllEvents();};this.oManagementDialog=this._getManagementDialog();this._assignTransport(y,O,F,this.oManagementDialog);}else{this._eventDone();}};v.prototype._handleManageSavePressed=function(){var N=this.oManagementTable.getItems();var i;var w=false;var x="";var O=null;var y=0;for(var z=0;z<N.length;z++){i=this.oVariantList.getItemByKey(N[z].getKey());if(N[z].getCells()[0].getValue){x=N[z].getCells()[0].getValue();}if(N[z].getCells()[0].getText){x=N[z].getCells()[0].getText();}x=x.trim();if(i.getText()!==x){this.aRenamedVariants.push({key:i.getKey(),name:x});O=this.getItemByKey(N[z].getKey());O.setText(x);if(O.setLifecyclePackage){O.setLifecyclePackage(N[z].getLifecyclePackage());O.setLifecycleTransportId(N[z].getLifecycleTransportId());}if(this.lastSelectedVariantKey===i.getKey()){this.oVariantText.setText(x);this.bDirty=false;this.oVariantModifiedText.setVisible(false);this.oModel.setProperty("/enabled",false);}}if(this.getShowExecuteOnSelection()&&i.getExecuteOnSelection&&i.getExecuteOnSelection()!=N[z].getCells()[3].getSelected()){var F=N[z].getCells()[3].getSelected();var K=this.getItemByKey(N[z].getKey());if(K&&K.setExecuteOnSelection){K.setExecuteOnSelection(F);this.aExeVariants.push({key:i.getKey(),exe:F});if(K.setLifecyclePackage){K.setLifecyclePackage(N[z].getLifecyclePackage());K.setLifecycleTransportId(N[z].getLifecycleTransportId());}}}}if(this.oManagementDialog){this.oManagementDialog.close();}this._manageButtonState();if(this.bVariantItemMode===false){if(this.getDefaultVariantKey()!=this.sNewDefaultKey){var M=null;if(this.sNewDefaultKey==this.getStandardVariantKey()){M=this.getItemByKey(this.getDefaultVariantKey());this.fireSave({name:M.getText(),overwrite:true,key:M.getKey(),def:false});}else{M=this.getItemByKey(this.sNewDefaultKey);this.fireSave({name:M.getText(),overwrite:true,key:M.getKey(),def:true});}}}this.setDefaultVariantKey(this.sNewDefaultKey);for(y=0;y<this.aRemovedVariants.length;y++){i=this.getItemByKey(this.aRemovedVariants[y]);for(var Q=0;Q<this.aRemovedVariantTransports.length;Q++){if(this.aRemovedVariants[y]===this.aRemovedVariantTransports[Q].key){var U=this.aRemovedVariantTransports[Q];if(i.setLifecyclePackage){i.setLifecycleTransportId(U.transport);}break;}}}this.fireManage({renamed:this.aRenamedVariants,deleted:this.aRemovedVariants,exe:this.aExeVariants,def:this.getDefaultVariantKey()});for(y=0;y<this.aRemovedVariants.length;y++){i=this.getItemByKey(this.aRemovedVariants[y]);if(i){this._removeItem(i);i.destroy();}if(this.lastSelectedVariantKey===this.aRemovedVariants[y]){w=true;this._setSelectedItem(null);this.bDirty=false;this.oVariantModifiedText.setVisible(false);this.oModel.setProperty("/enabled",false);}}if(w){this.bFireSelect=true;}this._eventDone();};v.prototype._createEvent=function(N,i){var w={name:N,fFunc:i,args:[]};return w;};v.prototype._handleNextEvent=function(){if(this.aEvents.length>0){if(!this.bEventRunning){this.bEventRunning=true;var i=this.aEvents.pop();i.fFunc.apply(this,i.args);}}};v.prototype._addEvent=function(i){this.aEvents.push(i);this._handleNextEvent();};v.prototype._cancelAllEvents=function(){this.aEvents=[];this.bEventRunning=false;};v.prototype._eventDone=function(){this.bEventRunning=false;this._handleNextEvent();};v.prototype._handleManageExecuteOnSelectionChanged=function(i){var w=this;var M=i.getParent();if(M.getGlobal()){var O=function(y,z){M.setLifecyclePackage(y);M.setLifecycleTransportId(z);w._eventDone();};var x=function(y){i.setSelected(!i.getSelected());w._cancelAllEvents();};this.oManagementDialog=this._getManagementDialog();this._assignTransport(M,O,x,this.oManagementDialog);}else{this._eventDone();}};v.prototype._handleManageDeletePressed=function(i){var w=i.getParent();if(w.getGlobal()){var x=this;var O=function(z,F){var K=w.getKey();x.aRemovedVariants.push(K);x.oManagementTable.removeItem(w);if(w.getKey()===x.sNewDefaultKey){x.oManagementTable.getItems()[0].getCells()[2].setSelected(true);x.sNewDefaultKey=x.getStandardVariantKey();}w.destroy();var M={key:K,transport:F};x.aRemovedVariantTransports.push(M);x._eventDone();};var y=function(z){x._cancelAllEvents();};this.oManagementDialog=this._getManagementDialog();this._assignTransport(w,O,y,this.oManagementDialog);}else{this.aRemovedVariants.push(w.getKey());this.oManagementTable.removeItem(w);if(w.getKey()===this.sNewDefaultKey){this.oManagementTable.getItems()[0].getCells()[2].setSelected(true);this.sNewDefaultKey=this.getStandardVariantKey();}w.destroy();this._eventDone();}};v.prototype._handleShareSelected=function(i){var w=this;if(i.getParameters().selected){var O=function(y,z){w.sTransport=z;w.sPackage=y;w._eventDone();};var x=function(y){w.oShare.setSelected(false);w.sTransport=null;w.sPackage=null;w._cancelAllEvents();};this.oSaveDialog=this._getSaveDialog();this._assignTransport(null,O,x,this.oSaveDialog);}else{this.sTransport=null;this.sPackage=null;this._eventDone();}};v.prototype._handleVariantSaveAs=function(){var K="SV"+new Date().getTime();var N=this.oInputName.getValue();var M=this.oInputKey.getValue();var i="";var w="";var x=false;var y=false;var z=null;N=N.trim();if(N==""){this.oInputName.setValueState(t.Error);this.oInputName.setValueStateText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));this._cancelAllEvents();return;}M=M.trim();if(this.bManualVariantKey&&M==""){this.oInputKey.setValueState(t.Error);this.oInputKey.setValueStateText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));this._cancelAllEvents();return;}if(this.bManualVariantKey){K=M;}if(this.oSaveDialog){this.oSaveDialog.close();}if(this.oExecuteOnSelect!==null){x=this.oExecuteOnSelect.getSelected();}if(this.oCreateTile!==null){y=this.oCreateTile.getSelected();}if(this.bVariantItemMode){z=new V({key:K,text:N,readOnly:false,executeOnSelection:x,global:this.oShare.getSelected(),lifecycleTransportId:this.sTransport,lifecyclePackage:this.sPackage});this.addVariantItem(z);this._setSelectedItem(z);}else{z=new s({key:K,text:N});this.addItem(z);this._setSelectedItem(z);}if(this.oDefault.getSelected()){this.setDefaultVariantKey(K);}if(this.oShare.getSelected()){w=this.sPackage;i=this.sTransport;}this._manageButtonState();this.fireSave({name:N,overwrite:false,def:this.oDefault.getSelected(),key:K,exe:this.oExecuteOnSelect.getSelected(),tile:y,global:this.oShare.getSelected(),lifecyclePackage:w,lifecycleTransportId:i});this.bDirty=false;this.oVariantModifiedText.setVisible(false);this.oModel.setProperty("/enabled",false);this._eventDone();};v.prototype._setBackwardCompatibility=function(F){if(this.getItems().length===0&&this.getVariantItems().length===0){this.bVariantItemMode=!F;}this._setStandardText();};v.prototype._noDuplicates=function(){this._bAllowDuplicates=false;};v.prototype._setStandardText=function(){var K=this.getSelectionKey();if(K===null||K===this.getStandardVariantKey()){if(this.bVariantItemMode==false){this.oVariantText.setText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_DEFAULT"));}else{this.oVariantText.setText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_STANDARD"));}if(this.getStandardItemText()!==null&&this.getStandardItemText()!=""){this.oVariantText.setText(this.getStandardItemText());}}};v.prototype._openVariantManagementDialog=function(){var i;var w=null;var x=0;var M;var N;var y;var z;var F;var K;var O;var Q;var U;var W;var X;var Y;var Z;var $=this;this.oManagementSave.setEnabled(true);this.oManagementTable.destroyItems();U=function(b1){var c1=this.getValue();c1=c1.trim();if(c1.length===0){this.setValueState(t.Error);this.setValueStateText($.oResourceBundle.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));}};W=function(b1){var c1=$._createEvent("inputfieldChange",$._checkManageItemNameChange);c1.args.push(this.getParent());$._addEvent(c1);};X=function(b1){if(b1.getParameters().selected===true){var i=this.getParent();$.sNewDefaultKey=i.getKey();}};Y=function(b1){var c1=$._createEvent("executeOnSelectionChange",$._handleManageExecuteOnSelectionChanged);c1.args.push(this);$._addEvent(c1);};Z=function(b1){var c1=$._createEvent("manageDeletePressed",$._handleManageDeletePressed);c1.args.push(this);$._addEvent(c1);};this._initalizeManagementTableColumns();this.sNewDefaultKey=this.getDefaultVariantKey();this._restoreCompleteList();if(this.oVariantList.getItems()[0].getKey()!==this.getStandardVariantKey()&&this.bVariantItemMode==false){i=new V(this.oVariantManage.getId()+"-item-standard",{key:this.getStandardVariantKey(),text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_DEFAULT"),readOnly:true,executeOnSelection:false});this.oVariantList.insertItem(i,0);}w=this.oVariantList.getItems();for(var _=0;_<w.length;_++){if(w[_].getReadOnly()||w[_].getLabelReadOnly()){var a1=w[_].getAccessOptions();Q=this._accessOptionsText(a1);}else{Q=null;}if(w[_].getReadOnly()){Q=this.oResourceBundle.getText("VARIANT_MANAGEMENT_WRONG_LAYER");}else if(w[_].getLabelReadOnly()===true){Q=this.oResourceBundle.getText("VARIANT_MANAGEMENT_WRONG_LANGUAGE");}if(w[_].getKey()===this.getStandardVariantKey()){Q=null;}M=new E(this.oVariantManage.getId()+"-edit-"+x,{key:w[_].getKey(),global:w[_].getGlobal(),lifecyclePackage:w[_].getLifecyclePackage(),lifecycleTransportId:w[_].getLifecycleTransportId(),namespace:w[_].getNamespace(),labelReadOnly:w[_].getLabelReadOnly(),vAlign:u.Middle});if(w[_].getKey()===this.getStandardVariantKey()||w[_].getReadOnly()===true||w[_].getLabelReadOnly()===true){N=new b(this.oVariantManage.getId()+"-text-"+x,{text:w[_].getText()});N.addStyleClass("sapUICompVarMngmtLbl");if(Q){N.setTooltip(Q);}}else{N=new I(this.oVariantManage.getId()+"-input-"+x,{value:w[_].getText(),liveChange:U,change:W});}M.addCell(N);if(w[_].getGlobal()){O=this.oResourceBundle.getText("VARIANT_MANAGEMENT_SHARED");}else{O=this.oResourceBundle.getText("VARIANT_MANAGEMENT_PRIVATE");}y=new b(this.oVariantManage.getId()+"-type-"+x,{text:O});y.addStyleClass("sapUICompVarMngmtType");M.addCell(y);z=new R(this.oVariantManage.getId()+"-def-"+x,{groupName:this.oVariantManage.getId(),select:X});if(this.sNewDefaultKey===w[_].getKey()||w[_].getKey()===this.getStandardVariantKey()&&this.sNewDefaultKey===""){z.setSelected(true);}M.addCell(z);if(this.getShowExecuteOnSelection()){F=new k(this.oVariantManage.getId()+"-exe-"+x,{selected:false,enabled:false,select:Y});if(w[_].getExecuteOnSelection){F.setEnabled(!w[_].getReadOnly());F.setSelected(w[_].getExecuteOnSelection());if(Q){F.setTooltip(Q);}}M.addCell(F);}K=new j(this.oVariantManage.getId()+"-del-"+x,{icon:"sap-icon://sys-cancel",enabled:true,type:f.Transparent,press:Z,tooltip:this.oResourceBundle.getText("VARIANT_MANAGEMENT_DELETE")});if(M.getKey()===this.getStandardVariantKey()||(w[_].getReadOnly&&w[_].getReadOnly())){K.setEnabled(false);}K.addStyleClass("sapUiCompVarMngmtDel");M.addCell(K);this.oManagementTable.addItem(M);x++;}this.aRemovedVariants=[];this.aRemovedVariantTransports=[];this.aRenamedVariants=[];this.aExeVariants=[];this.oManagementDialog=this._getManagementDialog();this._setDialogCompactStyle(this,this.oManagementDialog);i=this.oVariantList.getSelectedItem();if(i){this.lastSelectedVariantKey=i.getKey();}this.oVariantPopOver.close();this.oManagementDialog.open();};v.prototype._enableManualVariantKey=function(i){this.bManualVariantKey=i;};v.prototype._fireSelectAsync=function(K){var i;if(K===undefined||K===null){var w=this._getSelectedItem();if(w===null){i=this.getStandardVariantKey();}else{i=w.getKey();}}this.fireSelect({key:i});};v.prototype._executeOnSelectForStandardVariant=function(i){this.bExecuteOnSelectForStandard=i;};v.prototype.getStandardVariantKey=function(){return this._sStandardVariantKey;};v.prototype.setStandardVariantKey=function(i){this._sStandardVariantKey=i;};v.prototype._setVendorLayer=function(i){this._isVendorLayer=i;};v.prototype._isIndustrySolutionModeAndVendorLayer=function(){if(this.getIndustrySolutionMode()&&this._isVendorLayer){return true;}return false;};return v;},true);
