(function(){"use strict";jQuery.sap.require("sap.ushell.renderers.fiori2.search.controls.SearchFacet");jQuery.sap.require("sap.ushell.renderers.fiori2.search.controls.SearchFacetDialog");jQuery.sap.require("sap.ushell.renderers.fiori2.search.SearchFacetDialogModel");sap.ui.core.Control.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetFilter',{metadata:{properties:{title:"string"},aggregations:{"facets":{type:"sap.ushell.renderers.fiori2.search.controls.SearchFacet",multiple:true}}},constructor:function(o){o=jQuery.extend({},{facets:{path:"/facets",template:new sap.ushell.renderers.fiori2.search.controls.SearchFacet()}},o);sap.ui.core.Control.prototype.constructor.apply(this,[o]);},fireReset:function(){this.getModel().resetFilterConditions(false);this.getModel().setDataSource(this.getModel().allDataSource,true);},renderer:function(r,c){function a(d){return function(e){var F=new sap.ushell.renderers.fiori2.search.SearchFacetDialogModel();F.setData(c.getModel().getData());F.facetDialogCall().done(function(){var D=new sap.ushell.renderers.fiori2.search.controls.SearchFacetDialog({selectedAttribute:d});D.setModel(F);D.setModel(c.getModel(),'searchModel');D.open();var p=c.getParent().getParent().getParent().getParent();p.oFacetDialog=D;});};}r.write("<div");r.writeControlData(c);r.addClass("sapUshellSearchFacetFilter");r.writeClasses();r.write('>');for(var i=0,l=c.getFacets().length;i<l;i++){var f=c.getFacets()[i];if(i===0){f.setEshRole("datasource");}else{f.setEshRole("attribute");if(i===1){f.setHeaderText(sap.ushell.resources.i18n.getText("filterBy"));}}r.renderControl(f);if(f.getEshRole()==="attribute"){var s=new sap.m.Link({text:"{showMore}",press:a(f.getBindingContext().getObject().dimension)});s.setModel(c.getModel("i18n"));s.addStyleClass('sapUshellSearchFacetShowMoreLink');r.renderControl(s);}}if(c.getFacets().length>1){r.write("<div>");var b=new sap.m.Button({text:"{showAllFilters}",press:a()});b.setModel(c.getModel("i18n"));b.addStyleClass("sapUshellSearchFacetFilterShowAllFilterBtn");r.renderControl(b);r.write("</div>");}r.write("</div>");},onAfterRendering:function(){var a=$('.sapUshellSearchFacetFilter .sapUshellSearchFacet').first().find('ul');var b=a.find('li');a.attr('role','tree');b.attr('role','treeitem');}});})();
