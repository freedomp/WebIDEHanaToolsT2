jQuery.sap.registerPreloadedModules({"name":"sap/ushell/components/flp/Component-preload","version":"2.0","modules":{"sap/ushell/components/flp/ActionMode.js":function(){
// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.ActionMode");var A=function(){this.oEventBus=sap.ui.getCore().getEventBus();this.oEventBus.subscribe('launchpad','actionModeInactive',this.scrollToViewPoint,this);this.oEventBus.subscribe('launchpad','actionModeActive',this.scrollToViewPoint,this);this.viewPoint=undefined;this.init=function(m){this.oModel=m;var n=sap.ui.getCore().byId('navContainerFlp'),c=n.getCurrentPage().getViewName(),i=c=="sap.ushell.components.flp.launchpad.dashboard.DashboardContent";if(i){b(m);}};},_=function(m){var t=new sap.m.Button("ActionModeBtn",{text:sap.ushell.resources.i18n.getText("activateActionMode"),icon:'sap-icon://edit',tooltip:sap.ushell.resources.i18n.getText("activateActionMode"),press:function(){sap.ushell.components.flp.ActionMode.toggleActionMode(m,"Menu Item");}});sap.ushell.renderers.fiori2.RendererExtensions.addOptionsActionSheetButton(t,"home");if(m.getProperty("/enableHelp")){t.addStyleClass('help-id-ActionModeBtn');}},a=function(m){var f=new sap.ushell.ui.shell.ShellFloatingAction({id:"floatingActionBtn",icon:'sap-icon://edit',press:function(e){sap.ushell.components.flp.ActionMode.toggleActionMode(m,"Floating Button");},tooltip:sap.ushell.resources.i18n.getText("activateActionMode")});f.data("sap-ui-fastnavgroup","true",true);f.addEventDelegate({onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;},onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}});if(m.getProperty("/enableHelp")){f.addStyleClass('help-id-floatingActionBtn');}sap.ushell.renderers.fiori2.RendererExtensions.addFloatingActionButton(f,"home");},b=function(m){if(m.getProperty("/actionModeMenuButtonEnabled")){_(m);}if(m.getProperty("/actionModeFloatingButtonEnabled")){a(m);}},s=function(e){var c=e.target;if(!$(c).hasClass("sapUshellTileActionLayerDiv")){setTimeout($.proxy(sap.ushell.components.flp.ActionMode.deactivate(),sap.ushell.components.flp.ActionMode),0);}};A.prototype.activate=function(){var f,t;this.eventDelegateObj={ontap:s,ontouchstart:s,onmousedown:s};jQuery.sap.require("sap.m.MessageToast");sap.m.MessageToast.show(sap.ushell.resources.i18n.getText("actionModeActivated"),{duration:4000});this.calcViewPosition();this.oModel.setProperty('/tileActionModeActive',true);this.aOrigHiddenGroupsIds=sap.ushell.utils.getCurrentHiddenGroupIds(this.oModel);f=sap.ui.getCore().byId("floatingActionBtn");if(f){f.addStyleClass("sapUshellActive");f.setTooltip(sap.ushell.resources.i18n.getText("deactivateActionMode"));}t=sap.ui.getCore().byId("ActionModeBtn");if(t){t.setTooltip(sap.ushell.resources.i18n.getText("exitPersonalizationMode"));t.setText(sap.ushell.resources.i18n.getText("exitPersonalizationMode"));}this.oEventBus.publish('launchpad','actionModeActive');};A.prototype.calcViewPosition=function(){var j=jQuery('#dashboardGroups').find('.sapUshellTileContainer').not('.sapUshellHidden'),i;if(j){for(i=0;i<j.length;i++){var u=j[i],f=jQuery(u).parent().offset().top;if(f>0){var c=jQuery(u).attr("id"),g=sap.ui.getCore().byId(c),d={group:g,fromTop:f};this.viewPoint=d;return;}}}};A.prototype.scrollToViewPoint=function(){window.setTimeout(jQuery.proxy(this.oEventBus.publish,this.oEventBus,"launchpad","scrollToFirstVisibleGroup",this.viewPoint),0);};A.prototype.deactivate=function(){var t=sap.ui.getCore().byId("TileActions"),T,f;this.calcViewPosition();this.oModel.setProperty('/tileActionModeActive',false);this.oEventBus.publish("launchpad",'actionModeInactive',this.aOrigHiddenGroupsIds);if(t!==undefined){t.destroy();}f=sap.ui.getCore().byId("floatingActionBtn");if(f){f.removeStyleClass("sapUshellActive");f.setTooltip(sap.ushell.resources.i18n.getText("activateActionMode"));}T=sap.ui.getCore().byId("ActionModeBtn");if(T){T.setTooltip(sap.ushell.resources.i18n.getText("activateActionMode"));T.setText(sap.ushell.resources.i18n.getText("activateActionMode"));}};A.prototype.toggleActionMode=function(m,S){var t=m.getProperty('/tileActionModeActive');if(t){this.deactivate();}else{this.activate();sap.ui.getCore().getEventBus().publish("launchpad","enterEditMode",{source:S});}};A.prototype.activateGroupEditMode=function(g){var j=jQuery(g.getDomRef()).find('.sapUshellTileContainerContent');j.addClass("sapUshellTileContainerEditMode");};A.prototype._openActionsMenu=function(e,t){var c=this,T=t||e.getSource(),l=sap.ushell.Container.getService("LaunchPage"),d=[],o=sap.ui.getCore().byId("TileActions"),i,n,B,f,g,h;if(T){g=T.getBindingContext().getObject().object;d=l.getTileActions(g);}c.oTileControl=T;jQuery(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");var j=jQuery(e.getSource().getDomRef()).find(".sapUshellTileActionLayerDiv");j.addClass("sapUshellTileActionLayerDivSelected");if(o===undefined){o=new sap.m.ActionSheet("TileActions",{placement:sap.m.PlacementType.Auto,afterClose:function(){$(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");var E=sap.ui.getCore().getEventBus();E.publish("dashboard","actionSheetClose",c.oTileControl);}});}else{o.destroyButtons();}if(d.length===0||T.oParent.getProperty("isGroupLocked")){n=new sap.m.Button({text:sap.ushell.resources.i18n.getText("tileHasNoActions"),enabled:false});o.addButton(n);}else{for(i=0;i<d.length;i++){f=d[i];h=function(f){return function(){c._handleActionPress(f);};}(f);B=new sap.m.Button({text:f.text,icon:f.icon,press:h});o.addButton(B);}}o.openBy(e.getSource());};A.prototype._handleActionPress=function(o){if(o.press){o.press.call();}else if(o.targetURL){if(o.targetURL.indexOf("#")==0){hasher.setHash(o.targetURL);}else{window.open(o.targetURL,'_blank');}}else{sap.m.MessageToast.show("No Action");}};sap.ushell.components.flp.ActionMode=new A();}());},"sap/ushell/components/flp/Component.js":'// Copyright (c) 2009-2014 SAP SE, All Rights Reserved\njQuery.sap.declare("sap.ushell.components.flp.Component");\nif (!window[\'sap-ui-debug\']) {\n    try {\n        jQuery.sap.require(\'sap.fiori.flp-controls\');\n    } catch (e) {\n        jQuery.sap.log.warning(\'flp-controls failed to load: \' + e.message);\n    }\n}\njQuery.sap.require("sap.ui.core.UIComponent");\njQuery.sap.require("sap.ushell.components.flp.CustomRouter");\n/* global hasher */\njQuery.sap.require("sap.ushell.components.flp.ComponentKeysHandler");\n\nsap.ui.core.UIComponent.extend("sap.ushell.components.flp.Component", {\n\n    metadata: {\n        routing : {\n            config: {\n                viewType: "JS",\n                controlAggregation : "pages",\n                controlId : "navContainerFlp",\n                clearAggregation: false,\n                routerClass : sap.ushell.components.flp.CustomRouter\n            },\n            targets: {\n                catalog: {\n                    viewName : "sap.ushell.components.flp.launchpad.catalog.Catalog"\n                },\n                home: {\n                    viewName : "sap.ushell.components.flp.launchpad.dashboard.DashboardContent"\n                }\n            },\n            routes : [\n                {\n                    name : "home",\n                    target: \'home\',\n                    pattern : "home"\n                }\n            ]\n        },\n\n        version: "1.32.6",\n\n        library: "sap.ushell.components.flp",\n\n        dependencies: {\n            libs: ["sap.m"]\n        },\n        config: {\n            semanticObject: \'Shell\',\n            action: \'home\',\n            title: sap.ushell.resources.i18n.getText("homeBtn_tooltip"),\n            fullWidth: true,\n            hideLightBackground: true,\n            compactContentDensity: true,\n            cozyContentDensity: true\n        }\n    },\n\n    parseOldCatalogParams: function (sUrl) {\n        var mParameters = jQuery.sap.getUriParameters(sUrl).mParams,\n            sValue;\n        for (var sKey in mParameters) {\n            if (mParameters.hasOwnProperty(sKey)) {\n                sValue = mParameters[sKey][0];\n                mParameters[sKey] = sValue.indexOf(\'/\') !== -1 ? encodeURIComponent(sValue) : sValue;\n            }\n        }\n        return mParameters;\n    },\n\n    handleNavigationFilter: function (sNewHash) {\n        "use strict";\n        var oShellHash =  sap.ushell.Container.getService("URLParsing").parseShellHash(sNewHash);\n        if (oShellHash && oShellHash.semanticObject === \'shell\' && oShellHash.action === \'catalog\') {\n            var mParameters = this.parseOldCatalogParams(sNewHash);\n            setTimeout(function () {\n                this.getRouter().navTo(\'catalog\', {filters : JSON.stringify(mParameters)});\n            }.bind(this), 0);\n            return this.oShellNavigation.NavigationFilterStatus.Abandon;\n        }\n        return this.oShellNavigation.NavigationFilterStatus.Continue;\n    },\n\n    createContent: function () {\n        "use strict";\n        this.oRouter = this.getRouter();\n        this.oModel = new sap.ui.model.json.JSONModel({\n            groups : [],\n            animationRendered : false,\n            tagFiltering: true,\n            catalogSelection: true,\n            tileActionModeEnabled: false,\n            tileActionModeActive: false,\n            isInDrag: false,\n            rtl: sap.ui.getCore().getConfiguration().getRTL(),\n            personalization: true,\n            editTitle: false,\n            tagList : [],\n            selectedTags : [],\n            userPreferences : {\n                entries : []\n            }\n        });\n\n        this.oModel.setSizeLimit(10000); // override default of 100 UI elements on list bindings\n        this.setModel(this.oModel);\n        this.oConfig = this.getComponentData().config;\n        //check the personalization flag in the Component configuration and in the Renderer configuration\n        this.oShellConfig = sap.ushell.renderers.fiori2.RendererExtensions.getConfiguration();\n        var bPersonalizationActive = (this.oConfig && (this.oConfig.enablePersonalization || this.oConfig.enablePersonalization === undefined))\n            && (this.oShellConfig && this.oShellConfig.enablePersonalization || this.oShellConfig.enablePersonalization === undefined);\n        //the catalog route should be added only if personalization is active\n        if (bPersonalizationActive) {\n            this.oRouter.addRoute({\n                name : "catalog",\n                target: \'catalog\',\n                pattern : "catalog/:filters:"\n            });\n        }\n        //add the "all" route after the catalog route was added\n        this.oRouter.addRoute({\n            name : "all",\n            target: \'home\',\n            pattern : ":all*:"\n        });\n        this._setConfigurationToModel(this.oConfig);\n        jQuery.sap.require("sap.ushell.components.flp.launchpad.DashboardManager");\n        this.oDashboardManager = new sap.ushell.components.flp.launchpad.DashboardManager("dashboardMgr", {\n            model : this.oModel,\n            config : this.oConfig,\n            router : this.oRouter\n        });\n\n        jQuery.sap.require("sap.ushell.resources");\n        this.setModel(sap.ushell.resources.i18nModel, "i18n");\n\n        var oNavContainer,\n            mediaQ = window.matchMedia("(min-width: 800px)"),\n            handleMedia = function (mq) {\n                this.oModel.setProperty("/isPhoneWidth", !mq.matches);\n            }.bind(this);\n        if (mediaQ.addListener) {// condition check if mediaMatch supported(Not supported on IE9)\n            mediaQ.addListener(handleMedia);\n            handleMedia(mediaQ);\n        }\n\n        sap.ui.getCore().getEventBus().subscribe("showCatalog", this.showCatalog, this);\n        sap.ui.getCore().getEventBus().subscribe("launchpad", "togglePane", this._createAndAddGroupList, this);\n\n        this.bContactSupportEnabled = sap.ushell.Container.getService("SupportTicket").isEnabled();\n        if (this.bContactSupportEnabled) {\n            jQuery.sap.require("sap.ushell.UserActivityLog");\n            sap.ushell.UserActivityLog.activate();\n        }\n        oNavContainer = this.initNavContainer();\n\n        this.setInitialConfiguration();\n\n        this.oShellNavigation = sap.ushell.Container.getService("ShellNavigation");\n        this.oShellNavigation.registerNavigationFilter(jQuery.proxy(this.handleNavigationFilter, this));\n        //handle direct navigation with the old catalog intent format\n        var sHash = hasher.getHash();\n        var oShellHash =  sap.ushell.Container.getService("URLParsing").parseShellHash(sHash);\n        if (oShellHash && oShellHash.semanticObject === \'shell\' && oShellHash.action === \'catalog\') {\n            var mParameters = this.parseOldCatalogParams(sHash);\n            var oComponentConfig = this.getMetadata().getConfig();\n            this.oShellNavigation.toExternal({\n                target: {\n                    semanticObject: oComponentConfig.semanticObject,\n                    action: oComponentConfig.action\n                }\n            });\n            this.getRouter().navTo(\'catalog\', {filters : JSON.stringify(mParameters)});\n        }\n\n\n\n        return oNavContainer;\n    },\n\n    _createAndAddGroupList: function (sChannel, sEventName, oData) {\n        if (oData.currentContent && (oData.currentContent.indexOf(\'groupList\') !== -1 || !oData.currentContent.length)) {\n            var oConfig = this.oConfig,\n                oGroupListData = this.runAsOwner(function () {\n                    return this.oDashboardManager.getGroupListView(oConfig);\n                }.bind(this));\n\n            if (!oGroupListData.alreadyCreated) {\n                oGroupListData.groupList.setModel(this.oModel);\n                oGroupListData.groupList.setModel(sap.ushell.resources.i18nModel, "i18n");\n                sap.ushell.renderers.fiori2.RendererExtensions.setLeftPaneContent(oGroupListData.groupList, "home");\n            }\n        }\n    },\n\n    _setConfigurationToModel : function (oConfig) {\n        var oModel = this.oModel,\n            tileActionModeEnabled;\n        if (oConfig) {\n            if (oConfig.enablePersonalization !== undefined && this.oShellConfig.enablePersonalization !== undefined) {\n                oModel.setProperty("/personalization", oConfig.enablePersonalization && this.oShellConfig.enablePersonalization);\n            } else if (oConfig.enablePersonalization !== undefined) {\n                oModel.setProperty("/personalization", oConfig.enablePersonalization);\n            } else if (this.oShellConfig.enablePersonalization !== undefined) {\n                oModel.setProperty("/personalization", this.oShellConfig.enablePersonalization);\n            }\n            if (oConfig.enableTagFiltering !== undefined) {\n                oModel.setProperty("/tagFiltering", oConfig.enableTagFiltering);\n            }\n            if (oConfig.enableLockedGroupsCompactLayout !== undefined) {\n                oModel.setProperty("/enableLockedGroupsCompactLayout", oConfig.enableLockedGroupsCompactLayout);\n            }\n            if (oConfig.enableCatalogSelection !== undefined) {\n                oModel.setProperty("/catalogSelection", oConfig.enableCatalogSelection);\n            }\n            if (oConfig.enableSearchFiltering !== undefined) {\n                oModel.setProperty("/searchFiltering", oConfig.enableSearchFiltering);\n            }\n            if (oConfig.enableTilesOpacity !== undefined) {\n                oModel.setProperty("/tilesOpacity", oConfig.enableTilesOpacity);\n            }\n            if (oConfig.enableDragIndicator !== undefined) {\n                oModel.setProperty("/enableDragIndicator", oConfig.enableDragIndicator);\n            }\n            tileActionModeEnabled = false;\n            if (oConfig.enableActionModeMenuButton !== undefined) {\n                oModel.setProperty("/actionModeMenuButtonEnabled", oConfig.enableActionModeMenuButton);\n                tileActionModeEnabled = oConfig.enableActionModeMenuButton;\n            }\n            if (oConfig.enableRenameLockedGroup !== undefined) {\n                oModel.setProperty("/enableRenameLockedGroup", oConfig.enableRenameLockedGroup);\n            } else {\n                oModel.setProperty("/enableRenameLockedGroup", false);\n            }\n\n            if (oConfig.enableActionModeFloatingButton !== undefined) {\n                oModel.setProperty("/actionModeFloatingButtonEnabled", oConfig.enableActionModeFloatingButton);\n                tileActionModeEnabled = tileActionModeEnabled || oConfig.enableActionModeFloatingButton;\n            }\n            oModel.setProperty("/tileActionModeEnabled", tileActionModeEnabled);\n            if (oConfig.enableTileActionsIcon !== undefined) {\n                //Available only for desktop\n                oModel.setProperty("/tileActionsIconEnabled", sap.ui.Device.system.desktop ? oConfig.enableTileActionsIcon : false);\n            }\n            if (oConfig.enableHideGroups !== undefined) {\n                oModel.setProperty("/enableHideGroups", oConfig.enableHideGroups);\n            }\n            // check for title\n            if (oConfig.title) {\n                oModel.setProperty("/title", oConfig.title);\n            }\n\n            // xRay enablement configuration\n            oModel.setProperty("/enableHelp", !!this.oShellConfig.enableHelp);\n            oModel.setProperty("/disableSortedLockedGroups", !!oConfig.disableSortedLockedGroups);\n\n        }\n    },\n\n    initNavContainer: function (oController) {\n        var oNavContainer = new sap.m.NavContainer({\n            id: "navContainerFlp"\n        });\n        oNavContainer.addCustomTransition(\n            "slideBack",\n            sap.m.NavContainer.transitions.slide.back,\n            sap.m.NavContainer.transitions.slide.back\n        );\n        return oNavContainer;\n    },\n\n    setInitialConfiguration: function() {\n        this.oRouter.initialize();\n\n        // set keyboard navigation handler\n        sap.ushell.components.flp.ComponentKeysHandler.init(this.oModel, this.oRouter);\n        sap.ushell.renderers.fiori2.AccessKeysHandler.registerAppKeysHandler(sap.ushell.components.flp.ComponentKeysHandler.handleFocusOnMe);\n        var translationBundle = sap.ushell.resources.i18n,\n            aShortcutsDescriptions = [];\n\n        aShortcutsDescriptions.push({text: "Alt+H", description: translationBundle.getText("actionHomePage")});\n\n        if (this.oModel.getProperty("/personalization")) {\n            aShortcutsDescriptions.push({text: "Alt+C", description: translationBundle.getText("actionCatalog")});\n        }\n\n        sap.ushell.renderers.fiori2.AccessKeysHandler.registerAppShortcuts(sap.ushell.components.flp.ComponentKeysHandler.handleShortcuts, aShortcutsDescriptions);\n    },\n\n    exit : function () {\n        this.oDashboardManager.destroy();\n    }\n});\n',"sap/ushell/components/flp/ComponentKeysHandler.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.ComponentKeysHandler");var c=function(){this.aTileWrapperClasses=['.sapUshellTile','.sapUshellLinkTile'];};c.prototype={keyCodes:jQuery.sap.KeyCodes,handleCatalogKey:function(){this.oRouter.navTo("catalog");},handleHomepageKey:function(){this.oRouter.navTo("home");},getNumberOfTileInRow:function(p,i){var j=jQuery(i?".sapUshellLinkTile:first":".sapUshellTile:first");if(!j.length){return false;}var a=sap.ui.getCore();var t=a.byId(j.attr('id'));var f=!i&&(t.getLong()===true)?2:1;var b;if(p==="catalog"){b=jQuery("#catalogTiles .sapUshellTileContainerContent").width();}else{b=jQuery("#dashboardGroups").width();}var d=j.outerWidth(true)/f;var n=Math.floor(b/d);return n;},goToTileContainer:function(k){var i=this.oModel.getProperty('/tileActionModeActive');if(i){sap.ushell.components.flp.ComponentKeysHandler.goToEdgeTileContainer('first');}else{sap.ushell.components.flp.ComponentKeysHandler.goToEdgeTile('first');}return true;},goToEdgeTile:function(s){var t=jQuery(".sapUshellTile:visible:not('.sapUshellPlusTile')")[s]();if(!t.length){return false;}this.setTileFocus(t);return true;},goToEdgeTileContainer:function(s){var j=jQuery('.sapUshellTileContainer:visible')[s]();if(!j.length){return false;}this.setTileContainerSelectiveFocus(j);return true;},goToFirstTileOfSiblingGroup:function(s,e){e.preventDefault();var a=jQuery(":focus").closest(".sapUshellDashboardGroupsContainerItem");if(!a.length){return;}var n=a[s+"All"](".sapUshellDashboardGroupsContainerItem:has(.sapUshellTile:visible):not(.sapUshellCloneArea)");var t='first';if(!n.length){n=a;t=(s==="next")?'last':'first';}else{n=n.first();}var j=n.find(".sapUshellTile:visible:not('.sapUshellPlusTile')")[t]();this.moveScrollDashboard(j);return false;},goToFirstTileOfSiblingGroupInCatalog:function(s,e){e.preventDefault();var j=this.getFocusOnTile(jQuery(":focus"));if(!j){return;}var a;if(s=="next"){var i=j.nextAll("h3").length?false:true;if(!i){a=j.nextAll("h3").first().nextAll().filter(":visible").first();}else{a=j.nextAll(".sapUshellTile").last();}}else{var b=j.prevAll("h3").length===1?true:false;if(!b){a=jQuery(j.prevAll("h3")[1]).next();}else{a=j.prevAll("h3").last().next();}}this.setTileFocus(a);this.moveScrollCatalog(a);return false;},swapTwoTilesInGroup:function(g,f,s){var a=g.getBindingContext().getObject();var b=a.tiles.indexOf(f.getBindingContext().getObject());var d=a.tiles.indexOf(s.getBindingContext().getObject());var e=a.tiles.splice(b,1,null);var h=a.tiles.splice(d,1,e[0]);a.tiles.splice(b,1,h[0]);var i=g.getBindingContext().getPath();g.getModel().setProperty(i,a);},moveTileInGroup:function(g,f,s){if(this.oModel.getProperty("/personalization")){var a=g.getBindingContext().getObject();var b=a.tiles.indexOf(f.getBindingContext().getObject());var d=a.tiles.indexOf(s.getBindingContext().getObject());var e=a.tiles.splice(b,1);a.tiles.splice(d,0,e[0]);var h=g.getBindingContext().getPath();g.getModel().setProperty(h,a);}},moveTileToDifferentGroup:function(s,d,a,b){if(this.oModel.getProperty("/personalization")){if(s.getIsGroupLocked()||d.getIsGroupLocked()){return;}var e=s.getBindingContext().getObject();var f=d.getBindingContext().getObject();var t=e.tiles.indexOf(a.getBindingContext().getObject());if(b==="left"||b==="up"||b==="down"){f.tiles.push(e.tiles[t]);}if(b==="right"){f.tiles.splice(0,0,e.tiles[t]);}e.tiles.splice(t,1);var g=d.getBindingContext().getPath();d.getModel().setProperty(g,f);var h=s.getBindingContext().getPath();s.getModel().setProperty(h,e);var i=d.getTiles();if(b==="left"||b==="up"||b==="down"){return i[i.length-1];}else{return i[0];}}},moveTile:function(d,s){var j=jQuery(".sapUshellDashboardView"),a=sap.ui.getCore().byId(j.attr("id"));a.markDisableGroups();setTimeout(function(){a.unmarkDisableGroups();},300);if(this.oModel.getProperty("/personalization")){if(typeof s==="undefined"){s=false;}var i=this.getGroupAndTilesInfo();if(!i||i.group.getProperty('isGroupLocked')){return;}var m=true,I,n=this.getNextTile(d,i,I,m);if(!n){return;}else{var b=n.getParent();}if(s){this.swapTwoTilesInGroup(i.group,i.curTile,n);}else{if(b===i.group){this.moveTileInGroup(i.group,i.curTile,n);}else{n=this.moveTileToDifferentGroup(i.group,b,i.curTile,d);}}if(sap.ushell.Layout&&sap.ushell.Layout.isInited){sap.ushell.Layout.reRenderGroupLayout(i.group);}setTimeout(function(){if(n){this.setTileFocus(jQuery(n.getDomRef()));}}.bind(this),100);}},getNextUpDownTileInCatalog:function(d,a){var n,b;var o=parseFloat(a.curTile.getDomRef().offsetLeft);if(d=="down"){n=a.tiles.slice(a.curTileIndex+1,a.curTileIndex+(a.sizeOfLine*2));}else{var s=a.curTileIndex-(a.sizeOfLine*2);s=(s>0)?s:0;n=a.tiles.slice(s,a.curTileIndex-1).reverse();}for(var i=0,l=n.length;i<l;i++){var t=n[i].getDomRef();var e=parseFloat(t.offsetLeft);var w=parseFloat(t.offsetWidth);var f=e+w;if(e<=o&&f>=o){b=n[i];break;}}return b;},getNextUpDownTileWithLayout:function(d,i){var n,a;var t=!i.curTile.isLink&&i.curTile.getTall()?2:1;var b=d==="down"?(t):-1;var e=!i.tiles.length&&!i.links.length;var I=i.group.getIsGroupLocked();var f=jQuery(i.curTile.getDomRef()).hasClass('sapUshellPlusTile');var l=i.group.getLinks();var g=sap.ushell.Layout.organizeGroup(i.curTile.isLink?i.links:i.tiles,i.curTile.isLink);var h=sap.ushell.Layout.getTilePositionInMatrix(i.curTile,g);var j=this.isLastLineFull(g);var k=this.oModel.getProperty('/tileActionModeActive');if(!h&&!e&&!f){return;}if(!g[h.row+b]){if(k&&!I&&!f&&j&&d==="down"){return i.group.oPlusTile;}if(!i.curTile.isLink&&l.length&&d==='down'){return l[0];}if(i.curTile.isLink&&i.tiles.length&&d==='up'){return i.tiles[0];}h=e||f?{row:0,col:0}:h;a=this.getNextGroup(d,i);if(!a){return;}e=!a.getTiles().length&&!a.getLinks().length;if(!e){var F=this._getAggregationToFocusInNextGroup(a,d);var N=this._isNextTileLink(F);g=sap.ushell.Layout.organizeGroup(F,N);b=0;h.row=d==="down"?0:g.length-1;}}if(e&&I){return undefined;}if(e){return a.oPlusTile;}if(typeof g[h.row+b][h.col]==="object"&&!e){n=g[h.row+b][h.col];}else{n=this.getNextUpDownTile(g,h.row+b,h.col,d);}return n;},_isNextTileLink:function(t){if(t&&t.length){var j=jQuery(t[0].getDomRef());return j.hasClass("sapUshellLinkTile");}return false;},_getAggregationToFocusInNextGroup:function(n,d){if(d==="down"||d==="right"){if(n.getTiles().length){return n.getShowPlaceholder()?[].concat(n.getTiles(),n.oPlusTile):n.getTiles();}if(n.getLinks().length){return n.getLinks();}}else if(d==="up"||d==="left"){if(n.getLinks().length){return n.getLinks();}if(n.getTiles().length){return n.getShowPlaceholder()?[].concat(n.getTiles(),n.oPlusTile):n.getTiles();}}},isLastLineFull:function(l){var m=this.getNumberOfTileInRow(),a=l[l.length-1].filter(Boolean);return a.length===m;},getNextUpDownTile:function(l,r,a,d){var n=r,b=l.length,e,f=d==="up"?-1:1;while((n>=0&&n<b)&&!e){if(typeof l[n][a]!=="object"){e=l[n][a];}n=n+f;}if(e){return;}n=r;while((typeof l[n][a]!=="object")&&a>=0){a--;}return l[n][a];},getNextTile:function(d,a,I,m){var n,b,e,s,t,l,w,f,o,g=sap.ui.getCore().getConfiguration().getRTL()?-1:1,h=!a.tiles.length,j=d==="right"?1:-1;if(a.pageName==='catalog'){if(d=='right'||d=='left'){n=!h?a.tiles[a.curTileIndex+(g*j)]:undefined;return n;}if(a.curTileIndex==='0'&&d==='up'){return undefined;}b=this.whichTileRow(a.curTileIndex,a);o=parseFloat(a.curTile.getDomRef().offsetLeft);if(d=="down"){e=a.tiles.slice(a.curTileIndex+1,a.curTileIndex+(a.sizeOfLine*2));}else{s=(s>0)?s:0;e=a.tiles.slice(s,a.curTileIndex).reverse();}for(var i=0,k=e.length;i<k;i++){t=e[i].getDomRef();l=parseFloat(t.offsetLeft);w=parseFloat(t.offsetWidth);f=l+w;if(l<=o&&f>=o){n=e[i];return n;}}if(this.nextRowIsShorter(d,b,a)){n=this.getNextTileInShorterRow(d,b,a);return n;}}else{if(d==="left"||d==="right"){var p=a.curTileIndex+(g*j);var F=a.curTile.isLink?a.links:a.tiles;if(F[p]&&!(m&&F[p].getDomRef().className.indexOf("sapUshellPlusTile")>0)){n=F.length?F[p]:undefined;}if(n){return n;}if(d==="right"&&!a.curTile.isLink&&a.links.length){return a.links[0];}if(d==="left"&&a.curTile.isLink&&a.tiles.length){return a.group.getShowPlaceholder()?a.group.oPlusTile:a.tiles[a.tiles.length-1];}var q=this.getNextGroup(d,a);if(!q){return;}else{var r=this._getAggregationToFocusInNextGroup(q,d);if(r&&r.length){var u=r.length-1;if(d==="right"){n=r[g===1?0:u];}else{n=r[g===1?u:0];}}else{n=q.oPlusTile;}}}if(d==="down"||d==="up"){if(a.pageName==="catalog"){n=this.getNextUpDownTileInCatalog(d,a);}else if(sap.ushell.Layout&&sap.ushell.Layout.isInited){n=this.getNextUpDownTileWithLayout(d,a,I);}}}return n;},getNextTileInShorterRow:function(d,a,i){var l=d==='down'?this.getLastTileIdInRow(i,a+1):this.getLastTileIdInRow(i,a-1);return i.tiles[l];},getLastTileIdInRow:function(a,l){var b=0;for(var i=0;i<a.rowsData.length;i++){b+=a.rowsData[i];if(i===l){break;}}return b-1;},nextRowIsShorter:function(d,a,i){if(d==='down'&&a!=i.rowsData.length-1){return i.rowsData[a]>i.rowsData[a+1];}if(d==='up'&&a!=0){return i.rowsData[a]>i.rowsData[a-1];}else{return false;}},getNextGroup:function(d,i){var n,g=i.group.getParent().getGroups(),a=sap.ui.getCore().getConfiguration().getRTL(),b=g.indexOf(i.group);if(d==="right"||d==="left"){if(a){d=(d==="right")?"up":"down";}else{d=(d==="right")?"down":"up";}}if(d==="down"||d==="up"){var e=d==="up"?-1:1;n=g[b+e];if(!n){return;}while(!n.getVisible()&&(b>=0&&b<g.length)){b=b+e;n=g[b];}}if(!n.getVisible()){return;}return n;},getGroupAndTilesInfo:function(j,p){if(!j){j=this.getFocusOnTile(jQuery(":focus"));}if(!j.length){return;}var a=sap.ui.getCore().byId(j.attr('id'));var g=a.getParent();var r;var t;var l;a.isLink=j.hasClass('sapUshellLinkTile');if(p=="catalog"){r=this.getCatalogLayoutData();t=[];var b=jQuery('#catalogTiles').find('.sapUshellTile:visible');for(var i=0;i<b.length;i++){t.push(sap.ui.getCore().byId(b[i].id));}}else{t=g.getTiles();l=g.getLinks();if(g.getShowPlaceholder()&&!a.isLink){t.push(g.oPlusTile);}}var s=this.getNumberOfTileInRow(p,a.isLink);return{pageName:p,curTile:a,curTileIndex:a.isLink?l.indexOf(a):t.indexOf(a),tiles:t,links:l,sizeOfLine:s,group:g,rowsData:r};},getCatalogLayoutData:function(){var j=jQuery('#catalogTiles .sapUshellInner').children(':visible'),m=this.getNumberOfTileInRow('catalog'),r=[],a=0;for(var i=1;i<j.length;i++){if(jQuery(j[i]).hasClass("sapUshellTile")){a++;}if(jQuery(j[i]).hasClass("sapUshellHeaderTile")){r.push(a);a=0;}if(a>=m){r.push(a);a=0;}}if(a>0){r.push(a);}return r;},whichTileRow:function(a,b){var t=0,i;for(i=0;i<b.rowsData.length;i++){t+=b.rowsData[i];if(a<t){return i;}}},goToSiblingElementInTileContainer:function(d,j,p){var a=j.closest('.sapUshellTileContainer'),b,e,f;if(b=this.getFocusTileContainerBeforeContent(j)){if(d==='up'||d==="left"){this._goToNextTileContainer(b,d);}else{f=a.find('.sapUshellTileContainerHeader:first');this.setTabIndexOnTileContainerHeader(f);f.focus();}return;}if(b=this.getFocusTileContainerHeader(j)){if(d==='up'){this.setTabIndexOnTileContainerHeader(f);if(!this._goToTileContainerBeforeContent(a)){this._goToNextTileContainer(b,d);}}else if(d==="down"){e=a.find('.sapUshellTile:first');if(e.length){this.setTileFocus(e);}else{this._goToNextTileContainer(b,d);}}else if(d==="left"){if(j.hasClass("sapUshellTileContainerHeader")){if(!this._goToTileContainerBeforeContent(a)){this._goToNextTileContainer(b,"left");}}else{f=j.closest(".sapUshellTileContainerHeader");f.focus();}}else if(d==="right"){var g=j.hasClass("sapMInputBaseInner");if(!g){e=a.find('.sapUshellTile:first');if(e.length){this.setTileFocus(e);}else{this._goToNextTileContainer(b,"down");}}}return;}if(b=this.getFocusOnTile(j)){this.goFromFocusedTile(d,b,p,true);return;}if(b=this.getFocusOnTileContainerAfterContent(j)){if(d==='up'||d==="left"){this._goToFirstTileInTileContainer(b);}else{this._goToNextTileContainer(b,d);}}},_goToNextTileContainer:function(j,d){var a=j.closest('.sapUshellTileContainer'),A=jQuery('.sapUshellTileContainer:visible'),n=(d==='down')?1:-1,b,e;b=jQuery(A[A.index(a)+n]);if(b){e=b.find('.sapUshellTileContainerHeader');if(d==='down'){if(!this._goToTileContainerBeforeContent(b)){this.setTabIndexOnTileContainerHeader(e);this.setTileContainerSelectiveFocus(b);}}else{if(this._goToTileContainerAfterContent(b)){return;}if(d==='up'){if(!this._goToFirstTileInTileContainer(b)){this.setTabIndexOnTileContainerHeader(e);e.focus();}}else if(d==='left'){if(!this._goToLastTileInTileContainer(b)){this.setTabIndexOnTileContainerHeader(e);e.focus();}}}}},_goToLastTileInTileContainer:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=a.find('.sapUshellTile:last'),d=a.find('.sapUshellLinkTile:last');if(!d.length&&!b.length){return false;}this.setTileFocus(d.length?d:b);return true;},_goToFirstTileInTileContainer:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=jQuery(a.find('.sapUshellTile').get(0));if(b.length){this.setTileFocus(b);return true;}else{return false;}},_goToTileContainerBeforeContent:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=a.find('.sapUshellTileContainerBeforeContent button:visible');if(b.length){b.focus();return true;}else{return false;}},_goToTileContainerAfterContent:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=a.find('.sapUshellTileContainerAfterContent button:visible');if(b.length){b.focus();return true;}else{return false;}},goFromFocusedTile:function(d,j,p,i){var a=this.getGroupAndTilesInfo(j,p),n,b,e,f,g,I;if(!a){return;}n=this.getNextTile(d,a,i);if(i){b=jQuery(j).closest('.sapUshellTileContainer');if(!n){if(d==='down'||d==='right'){g=jQuery(b).find('.sapUshellTileContainerAfterContent button:visible');g.focus();return;}if(d==='up'){this.setTabIndexOnTileContainerHeader(b.find('.sapUshellTileContainerHeader'));this.setTileContainerSelectiveFocus(b);return;}if(d==='left'){f=b.find('.sapUshellTileContainerHeader');f.focus();}}else{e=jQuery(n.getDomRef()).closest('.sapUshellTileContainer');I=b.length&&e.length&&(b.attr('id')===e.attr('id'));if(I){this.setTileFocus(jQuery(n.getDomRef()));}else{if(d==='down'||d==='right'){if(!this._goToTileContainerAfterContent(b)){this.setTabIndexOnTileContainerHeader(e.find('.sapUshellTileContainerHeader'));this.setTileContainerSelectiveFocus(e);}}else if(d==='up'||'left'){f=b.find('.sapUshellTileContainerHeader');this.setTabIndexOnTileContainerHeader(f);f.focus();}}}}else if(n){this.setTileFocus(jQuery(n.getDomRef()));}},deleteTile:function(j){var t=j.attr("id");if(!t){return;}var T=sap.ui.getCore().byId(t);var a=this.getGroupAndTilesInfo(j);var n=this.getNextTile("right",a);if(!n||(n&&n.getParent()!=a.group)){n=this.getNextTile("left",a);}if(!n||(n&&n.getParent()!=a.group)){n=a.group.oPlusTile;}if(n){setTimeout(function(g,b){var d=g.getTiles();if(!d.length){if(a.group.getProperty('defaultGroup')){var f=this.getNextGroup("right",a);n=f.getTiles()[0]||f.oPlusTile;this.setTileFocus(jQuery(n.getDomRef()));}this.setTileFocus(jQuery(g.oPlusTile.getDomRef()));return;}var n;for(var i=0;i<d.length;i++){if(d[i].getProperty('uuid')==b){n=d[i];break;}}if(n){this.setTileFocus(jQuery(n.getDomRef()));}}.bind(this,a.group,n.getProperty('uuid')),100);}var e=sap.ui.getCore().getEventBus();e.publish("launchpad","deleteTile",{tileId:T.getUuid()});},setTabIndexOnTileContainerHeader:function(j){jQuery(".sapUshellTileContainerHeader").attr("tabindex",-1);jQuery(".sapUshellTileContainerHeader .sapUshellContainerTitle").attr("tabindex",-1);jQuery(".sapUshellTileContainerHeader .sapUshellContainerHeaderActions button").attr("tabindex",-1);if(j){var a=j.find('.sapUshellContainerTitle:first'),b=j.find('.sapUshellContainerHeaderActions:first');j.attr('tabindex',0);a.attr('tabindex',0);b.find('button').attr('tabindex',0);}},setTileContainerSelectiveFocus:function(j){var a=j.find('.sapUshellTileContainerBeforeContent button'),b=j.find('.sapUshellTileContainerHeader:first'),B=a.length&&a.is(":visible");if(B){a.focus();}else if(b.length){this.setTabIndexOnTileContainerHeader(b);b.focus();}},setTileFocus:function(j){if(!j.hasClass('sapUshellPlusTile')){var a=this.oModel.getProperty("/currentViewName"),b;b=j.find('[tabindex]');if(a==="catalog"){var h=sap.ushell.components.flp.ComponentKeysHandler;h.setFocusOnCatalogTile(b.eq(0));}if(!b.length){j.attr("tabindex","0");b=j.find('[tabindex], a').andSelf().filter('[tabindex], a');}b.filter('[tabindex!="-1"]');jQuery.each(this.aTileWrapperClasses,function(i,t){var d=b.eq(0).closest(t);j=d.length?d:b.eq(0);return!(d.length);});}j.focus();},setFocusOnCatalogTile:function(j){var p=jQuery(".sapUshellTile[tabindex=0]"),a,v,b;if(p.length){jQuery(".sapUshellTileContainerContent").find('[tabindex*=0]').attr("tabindex",-1);a=p.find('[tabindex], a').andSelf().filter('[tabindex], a');a.attr("tabindex",-1);}if(!j){v=jQuery(".sapUshellTile:visible");if(v.length){b=jQuery(v[0]);j=b.find('[tabindex], a').eq(0);}else{return;}}j.closest(".sapUshellTile").attr("tabindex",0);j.attr("tabindex",0);j.closest(".sapUshellTile").find("button").attr("tabindex",0);},moveScrollDashboard:function(j){var a=j.closest(".sapUshellTileContainer")[0].id,y=-1*(document.getElementById('dashboardGroups').getBoundingClientRect().top)+document.getElementById(a).getBoundingClientRect().top;jQuery('.sapUshellDashboardView').animate({scrollTop:y},200,function(){this.setTileFocus(j);}.bind(this));},moveScrollCatalog:function(j){var a=jQuery("#catalogTilesPage-cont");var t=jQuery('#shell-hdr').height()+jQuery('.sapMPageHeader').height()+(parseInt(jQuery('.sapMPanelHdr').css('margin-top'),10)*2);var y=j.offset().top+a.scrollTop()-t;sap.ui.getCore().byId("catalogTilesPage").scrollTo(y,200);},goToNearbySidePanelGroup:function(d,j){var s=(d=="up")?"prev":"next";var n=j[s]();while(n.css('display')=="none"){n=n[s]();}if(!n){return;}n.focus();},deleteSidePanelGroup:function(j){var a=sap.ui.getCore();var g=a.byId(j.attr('id'));var r=g.getRemovable();var e=a.getEventBus();e.publish("launchpad",r?"deleteGroup":"resetGroup",{groupId:g.getGroupId()});},moveGroupFromDashboard:function(d,j){var a,t=jQuery(".sapUshellDashboardGroupsContainerItem"),i,b;a=j.closest(".sapUshellDashboardGroupsContainerItem");i=t.index(a);b=d=="up"||d=="left"?i-1:i+1;this.moveGroup(i,b);},moveGroup:function(f,t){var g=jQuery(".sapUshellDashboardGroupsContainerItem"),n=jQuery(".sapUshellDisableDragAndDrop").length;if(t<0||t>=g.length||t<n){return;}var a=sap.ui.getCore();var d={fromIndex:f,toIndex:t};var b=a.getEventBus();b.publish("launchpad","moveGroup",d);setTimeout(function(){var e=jQuery(".sapUshellTileContainerHeader")[t];this.setTabIndexOnTileContainerHeader(jQuery(e));jQuery(e).focus();}.bind(this),100);},goToEdgeSidePanelGroup:function(s){var j=jQuery(".sapUshellGroupLI");j[s]().focus();},getFocusGroupFromSidePanel:function(j){var a=j.closest(".sapUshellGroupLI");return a.length?a:false;},getFocusGroupFromDashboard:function(j){var i=j.closest('.sapUshellTileContainerHeader').length&&j[0].tagName==='H2';return i?j:false;},getFocusTileContainerBeforeContent:function(j){var a=j.closest('.sapUshellTileContainerBeforeContent');return a.length?a:false;},getFocusTileContainerHeader:function(j){var a=j.closest('.sapUshellTileContainerHeader');return a.length?a:false;},getFocusOnTileContainerAfterContent:function(j){var a=j.closest('.sapUshellTileContainerAfterContent');return a.length?a:false;},getFocusOnTile:function(j){var a;jQuery.each(this.aTileWrapperClasses,function(i,t){var b=j.closest(t);a=b.length?b:false;return!(a);});return a;},getFocusOnCatalogPopover:function(j){var a=j.closest(".sapMPopover");return a.length?a:false;},addGroup:function(j){var a=sap.ui.getCore();var b=a.byId(j.attr('id'));b.firePress();},renameGroup:function(){var j=jQuery(":focus");var a=this.getFocusGroupFromDashboard(j);if(a){a.click();}},upDownButtonsHandler:function(d,p){var j=jQuery(":focus"),a=this.getFocusGroupFromSidePanel(j);this.goFromFocusedTile(d,a,p);},arrowsButtonsHandler:function(d,p){var j,a=jQuery(":focus"),i=this.oModel.getProperty('/tileActionModeActive');if((j=this.getFocusGroupFromSidePanel(a))&&(d==="up"||d==="down")){this.goToNearbySidePanelGroup(d,j);}else{if(i){if(!a.hasClass('sapMInputBaseInner')){this.goToSiblingElementInTileContainer(d,a,p);}}else{this.goFromFocusedTile(d,j,p);}}},homeEndButtonsHandler:function(s,e){var j=jQuery(":focus"),a=this.getFocusGroupFromSidePanel(j);if(j.closest("#dashboardGroups").length||j.closest("#catalogTiles").length){e.preventDefault();this.goToEdgeTile(s);return;}if(a&&a[0].id==j[0].id){e.preventDefault();this.goToEdgeSidePanelGroup(s);return;}},deleteButtonHandler:function(){if(this.oModel.getProperty("/personalization")&&this.oModel.getProperty("/tileActionModeActive")){var j,a=jQuery(":focus");if(j=this.getFocusOnTile(a)){if(!j.hasClass('sapUshellLockedTile')&&!j.hasClass('sapUshellPlusTile')){this.deleteTile(j);}return;}if(j=this.getFocusGroupFromSidePanel(a)){if(!j.hasClass('sapUshellEditing')&&!j.hasClass("sapUshellDefaultGroupItem")&&!j.hasClass("sapUshellTileContainerLocked")){this.deleteSidePanelGroup(j);return;}}}},ctrlPlusArrowKeyButtonsHandler:function(s){var j,a=jQuery(":focus");if(j=this.getFocusOnTile(a)){this.moveTile(s,false,j);return;}if(j=this.getFocusTileContainerHeader(a)){var b=j.closest('.sapUshellTileContainerContent');if(b.hasClass('sapUshellTileContainerDefault')||b.hasClass('sapUshellTileContainerLocked')){return;}else{this.moveGroupFromDashboard(s,j);}}},spaceButtonHandler:function(e){var j,a=jQuery(":focus");if(j=this.getFocusGroupFromSidePanel(a)){j.click();return false;}},goToFirstCatalogTile:function(){var h=sap.ushell.components.flp.ComponentKeysHandler;var f=jQuery('#catalogTiles .sapUshellTile:visible:first');h.setTileFocus(f);},goToFirstCatalogHeaderItem:function(){var n=jQuery("#catalogTilesPage header button")[0];n.focus();},handleFocusOnMe:function(k,f){var h=sap.ushell.components.flp.ComponentKeysHandler;if(h.oModel.getProperty("/currentViewName")==="home"){if(f){if(k.shiftKey){h.goToTileContainer(k);}else{var j=jQuery(".sapUshellGroupLI:first:visible");if(!j.length){h.goToTileContainer(k);}else{j.focus();}}}else{h.mainKeydownHandler(k);h.dashboardKeydownHandler(k);}}else{if(f){if(k.shiftKey){h.goToFirstCatalogTile();}else{h.goToFirstCatalogHeaderItem();}}else{h.mainKeydownHandler(k);h.catalogKeydownHandler(k);}}},groupHeaderNavigation:function(){var j=jQuery(":focus"),a;if(j.hasClass("sapUshellTileContainerHeader")){a=j.find(".sapUshellContainerTitle");a.focus();}else if(a=j.closest(".sapUshellTileContainerHeader")){a.focus();}},handleShortcuts:function(e){var h=sap.ushell.components.flp.ComponentKeysHandler;if(e.altKey){switch(String.fromCharCode(e.keyCode)){case'C':if(h.oModel.getProperty("/personalization")){h.handleCatalogKey();}break;case'H':h.handleHomepageKey();break;}}},mainKeydownHandler:function(e){e=e||window.event;switch(e.keyCode){case this.keyCodes.SPACE:this.spaceButtonHandler(e);break;case this.keyCodes.HOME:this.homeEndButtonsHandler("first",e);break;case this.keyCodes.END:this.homeEndButtonsHandler("last",e);break;}},catalogKeydownHandler:function(k){var h=sap.ushell.components.flp.ComponentKeysHandler;var p="catalog";switch(k.keyCode){case h.keyCodes.ARROW_UP:h.upDownButtonsHandler("up",p);break;case h.keyCodes.ARROW_DOWN:h.upDownButtonsHandler("down",p);break;case h.keyCodes.ARROW_RIGHT:h.goFromFocusedTile("right","",p);break;case h.keyCodes.ARROW_LEFT:h.goFromFocusedTile("left","",p);break;case h.keyCodes.PAGE_UP:h.goToFirstTileOfSiblingGroupInCatalog('prev',k);break;case h.keyCodes.PAGE_DOWN:h.goToFirstTileOfSiblingGroupInCatalog('next',k);break;}},dashboardKeydownHandler:function(k){var h=sap.ushell.components.flp.ComponentKeysHandler;switch(k.keyCode){case h.keyCodes.F2:h.renameGroup();break;case h.keyCodes.F7:h.groupHeaderNavigation();break;case h.keyCodes.DELETE:h.deleteButtonHandler();break;case h.keyCodes.ARROW_UP:if(k.ctrlKey===true){h.ctrlPlusArrowKeyButtonsHandler("up");}else{h.arrowsButtonsHandler("up");}break;case h.keyCodes.ARROW_DOWN:if(k.ctrlKey===true){h.ctrlPlusArrowKeyButtonsHandler("down");}else{h.arrowsButtonsHandler("down");}break;case h.keyCodes.ARROW_RIGHT:if(k.ctrlKey===true){h.ctrlPlusArrowKeyButtonsHandler("right");}else{h.arrowsButtonsHandler('right');}break;case h.keyCodes.ARROW_LEFT:if(k.ctrlKey===true){h.ctrlPlusArrowKeyButtonsHandler("left");}else{h.arrowsButtonsHandler('left');}break;case h.keyCodes.PAGE_UP:h.goToFirstTileOfSiblingGroup('prev',k);break;case h.keyCodes.PAGE_DOWN:h.goToFirstTileOfSiblingGroup('next',k);break;}return true;},init:function(m,r){this.oModel=m;this.oRouter=r;}};sap.ushell.components.flp.ComponentKeysHandler=new c();}());},"sap/ushell/components/flp/CustomRouter.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.CustomRouter");sap.ui.core.routing.Router.extend("sap.ushell.components.flp.CustomRouter",{constructor:function(){sap.ui.core.routing.Router.apply(this,arguments);this.attachRouteMatched(this._onHandleRouteMatched,this);},navTo:function(){if(!this._bIsInitialized){this.initialize();}sap.ui.core.routing.Router.prototype.navTo.apply(this,arguments);},destroy:function(){sap.ui.core.routing.Router.prototype.destroy.apply(this,arguments);},_onHandleRouteMatched:function(e){var p=e.getParameters(),t=sap.ui.getCore().byId(p.config.controlId);var r=this.getTarget(p.config.target).display();t.to(r.oTargetParent);}});})();},"sap/ushell/components/flp/FLPAnalytics.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.FLPAnalytics");var o=["appOpened","deleteTile","createGroup","enterEditMode","catalogTileClick","dashboardTileClick","dashboardTileLinkClick"],E=sap.ui.getCore().getEventBus(),t=this,l={};function s(c){var m=sap.ushell.services.AppConfiguration.getMetadata();l[c]={};l[c].startTime=new Date();l[c].title=m.title;}function a(c){var d=0;try{d=(new Date()-l[c].startTime)/1000;sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Time in Application (sec)",d,[l[c].title]);}catch(e){jQuery.sap.log.warning("Duration in application "+c+" could not be calculated",null,"sap.ushell.components.flp.FLPAnalytics");}}function h(c,d,D){var A=window.location.hash.substr(1),f;window.swa.custom1={ref:A};switch(d){case'appOpened':s(A);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Opened","First Load",[l[A].title]);E.unsubscribe("launchpad","appOpened",h);break;case'bookmarkTileAdded':f=window.document.title;sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Personalization","Save as Tile",[f,D.group.title,D.group.id,D.tile.title]);break;case'enterEditMode':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Personalization","Enter Action Mode",[D.source]);break;case'catalogTileClick':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Catalog",[]);break;case'dashboardTileClick':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Homepage",[]);break;case'dashboardTileLinkClick':window.swa.custom1={ref:D.targetHash.substr(1)};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Tile Group Link",[]);break;default:break;}}function b(c){var f,T,d;f=c.getParameter("from").getId().replace("application-","").replace("applicationShellPage-","");window.swa.custom1={ref:f};a(f);d=c.getParameter("to");T=d.getId().replace("application-","").replace("applicationShellPage-","");s(T);window.swa.custom1={ref:T};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Opened","Through navContainer",[l[T].title]);}jQuery(window).unload(function(c){var d=window.location.hash.substr(1);a(d);});try{sap.ui.getCore().byId('navContainer').attachAfterNavigate(b,t);}catch(e){jQuery.sap.log.warning("Failure when subscribing to navContainer 'AfterNavigate' event",null,"sap.ushell.components.flp.FLPAnalytics");}E.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",h,t);o.forEach(function(c,i,d){E.subscribe("launchpad",c,h,t);});})();},"sap/ushell/components/flp/launchpad/DashboardManager.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.launchpad.DashboardManager");jQuery.sap.require("sap.ushell.services.Message");var g=function(m,p){return p?sap.ushell.resources.i18n.getText(m,p):sap.ushell.resources.i18n.getText(m);},c=function(C){var a=this.oModel.getProperty('/catalogTiles'),b=a.filter(function(t){return t.catalog===C.title&&t.isTileIntentSupported===true;});return b.length;};sap.ui.base.EventProvider.extend("sap.ushell.components.flp.launchpad.DashboardManager",{metadata:{publicMethods:["getModel","getDashboardView","getGroupListView","isGroupListViewCreated","loadPersonalizedGroups","attachEvent","detachEvent","attachEventOnce","createTile","deleteCatalogTileFromGroup","resetGroupsOnFailure","createGroupAndSaveTile"]},analyticsConstants:{PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"},constructor:function(i,s){if(sap.ushell.components.flp.launchpad.getDashboardManager&&sap.ushell.components.flp.launchpad.getDashboardManager()){return sap.ushell.components.flp.launchpad.getDashboardManager();}sap.ushell.components.flp.launchpad.getDashboardManager=jQuery.sap.getter(this.getInterface());this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");this.oModel=s.model;this.oConfig=s.config;this.oRouter=s.router;this.oSortableDeferred=$.Deferred();this.oSortableDeferred.resolve();this.aRequestQueue=[];this.bRequestRunning=false;this.tagsPool=[];this.registerEvents();this.oTileCatalogToGroupsMap={};this.tileViewUpdateQueue=[];this.tileViewUpdateTimeoutID=0;this.oPopover=null;this.tileUuid=null;this.oGroupNotLockedFilter=new sap.ui.model.Filter("isGroupLocked",sap.ui.model.FilterOperator.EQ,false);if(this.oRouter){var t=this.oRouter.getTarget('home');t.attachDisplay(function(e){this.oDashboardView=e.getParameter('view');}.bind(this));}},createMoveActionDialog:function(){var G=this.oGroupNotLockedFilter;this.moveDialog=new sap.m.SelectDialog("moveDialog",{title:sap.ushell.resources.i18n.getText('moveTileDialog_title'),rememberSelections:false,search:function(e){var v=e.getParameter("value"),f=new sap.ui.model.Filter("title",sap.ui.model.FilterOperator.Contains,v),b=e.getSource().getBinding("items");b.filter([f,G]);},contentWidth:'400px',confirm:function(e){var C=e.getParameter("selectedContexts"),E=sap.ui.getCore().getEventBus();if(C.length){E.publish("launchpad","moveTile",{sTileId:this.tileUuid,toGroupId:C[0].getObject().groupId,toIndex:C[0].getObject().tiles.length,source:this.moveDialog.getId()});E.publish("launchpad","scrollToGroup",{groupId:C[0].getObject().groupId,groupChanged:false,focus:false});}}.bind(this),items:{path:"/groups",filters:[G],template:new sap.m.StandardListItem({title:"{title}"})}});this.moveDialog.setModel(this.oModel);},registerEvents:function(){var e=sap.ui.getCore().getEventBus(),t=this;e.subscribe("launchpad","addBookmarkTile",this._createBookmark,this);e.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",this._addBookmarkToModel,this);e.subscribe("sap.ushell.services.Bookmark","catalogTileAdded",this._refreshGroupInModel,this);e.subscribe("sap.ushell.services.Bookmark","bookmarkTileDeleted",this.loadPersonalizedGroups,this);e.subscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);e.subscribe("launchpad","createGroupAt",this._createGroupAt,this);e.subscribe("launchpad","createGroup",this._createGroup,this);e.subscribe("launchpad","deleteGroup",this._deleteGroup,this);e.subscribe("launchpad","resetGroup",this._resetGroup,this);e.subscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);e.subscribe("launchpad","moveGroup",this._moveGroup,this);e.subscribe("launchpad","deleteTile",this._deleteTile,this);e.subscribe("launchpad","moveTile",this._moveTile,this);e.subscribe("launchpad","sortableStart",this._sortableStart,this);e.subscribe("launchpad","sortableStop",this._sortableStop,this);e.subscribe("showCatalog",this.loadAllCatalogs,this);this.oPageBuilderService.registerTileActionsProvider(function(T){jQuery.sap.require("sap.m.MessageBox");return[{text:sap.ushell.resources.i18n.getText('moveTileDialog_action'),press:function(E){t.tileUuid=t.getModelTileById(t.oPageBuilderService.getTileId(T)).uuid;if(!t.moveDialog){t.createMoveActionDialog();}t.moveDialog.getBinding("items").filter([t.oGroupNotLockedFilter]);t.moveDialog.open();}}];});},destroy:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","addBookmarkTile",this._createBookmark,this);e.unsubscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);e.unsubscribe("launchpad","createGroupAt",this._createGroupAt,this);e.unsubscribe("launchpad","createGroup",this._createGroup,this);e.unsubscribe("launchpad","deleteGroup",this._deleteGroup,this);e.unsubscribe("launchpad","resetGroup",this._resetGroup,this);e.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);e.unsubscribe("launchpad","moveGroup",this._moveGroup,this);e.unsubscribe("launchpad","deleteTile",this._deleteTile,this);e.unsubscribe("launchpad","moveTile",this._moveTile,this);e.unsubscribe("launchpad","sortableStart",this._sortableStart,this);e.unsubscribe("launchpad","sortableStop",this._sortableStop,this);e.unsubscribe("showCatalog",this.loadAllCatalogs,this);sap.ushell.components.flp.launchpad.getDashboardManager=undefined;},_refreshTiles:function(){var t=this,G=this.oModel.getProperty("/groups");jQuery.each(G,function(n,o){jQuery.each(o.tiles,function(n,T){t.oPageBuilderService.refreshTile(T.object);});});},_sortableStart:function(){this.oSortableDeferred=$.Deferred();},_createBookmark:function(C,e,d){var t=d.group?d.group.object:"";delete d.group;this._addRequest($.proxy(function(){var r=sap.ushell.Container.getService("Bookmark").addBookmark(d,t),R=sap.ushell.resources.i18n;r.always($.proxy(this._checkRequestQueue,this));r.done(function(){if(sap.ushell.Container){sap.ushell.Container.getService('Message').info(R.getText('tile_created_msg'));}});r.fail(function(m){jQuery.sap.log.error("Failed to add bookmark",m,"sap.ushell.ui.footerbar.AddBookmarkButton");if(sap.ushell.Container){sap.ushell.Container.getService('Message').error(R.getText('fail_to_add_tile_msg'));}});},this));},_addBookmarkToModel:function(C,e,d){var t=d.tile,G=d.group,i,s,T,n,a,b;if(!d||!t){this.loadPersonalizedGroups();return;}i=G?G.isGroupLocked:false;s=this.oPageBuilderService;T=s.getTileType(t);n=this._getTileModel(t,i,T);a=G?this._getIndexOfGroupByObject(G):0;b=this.oModel.getProperty("/groups/"+a);b.tiles.push(n);this.oModel.setProperty("/groups/"+a,b);},_refreshGroupInModel:function(C,e,G){var l=sap.ushell.Container.getService("LaunchPage"),E='Failed to refresh group with id:'+G+' in the model',t=this;l.getGroups().fail(jQuery.sap.log.error(E,null,"sap.ushell.components.flp.launchpad.DashboardManager")).done(function(a){a.some(function(o){if(l.getGroupId(o)===G){l.getDefaultGroup().done(function(d){var i=G===d.getId()?true:false,b=t._getGroupModel(o,i),f=t._getIndexOfGroupByObject(b.object);t.oModel.setProperty("/groups/"+f,b);});return true;}});});},_sortableStop:function(){this.oSortableDeferred.resolve();},_handleAfterSortable:function(f){return $.proxy(function(){var o=Array.prototype.slice.call(arguments);this.oSortableDeferred.done(function(){f.apply(null,o);});},this);},_addRequest:function(r){this.aRequestQueue.push(r);if(!this.bRequestRunning){this.bRequestRunning=true;this.aRequestQueue.shift()();}},_checkRequestQueue:function(){if(this.aRequestQueue.length===0){this.bRequestRunning=false;}else{this.aRequestQueue.shift()();}},_requestFailed:function(){this.aRequestQueue=[];this.bRequestRunning=false;},_createGroup:function(C,e,d){var G=this._getGroupModel(null),a=this.oModel.getProperty("/groups"),m=this.oModel;m.setProperty("/groupList-skipScrollToGroup",true);window.setTimeout(function(){m.setProperty("/groups/"+a.length,G);},500);window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false);},1000);},_createGroupAt:function(C,e,d){var n=parseInt(d.location,10),G=this.oModel.getProperty("/groups"),o=this._getGroupModel(null,false,n===G.length),m=this.oModel,i;o.index=n;G.splice(n,0,o);for(i=0;i<G.length-1;i++){G[i].isLastGroup=false;}for(i=n+1;i<G.length;i++){G[i].index++;}m.setProperty("/groups",G);},_getIndexOfGroup:function(G){var n=null,a=this.oModel.getProperty("/groups");jQuery.each(a,function(b,o){if(o.groupId===G){n=b;return false;}});return n;},_getIndexOfGroupByObject:function(G){var n=null,a=this.oModel.getProperty("/groups"),s=this.oPageBuilderService.getGroupId(G);a.forEach(function(m,b){var C=this.oPageBuilderService.getGroupId(m.object);if(C===s){n=b;return false;}}.bind(this));return n;},_getPathOfGroup:function(G){return"/groups/"+this._getIndexOfGroup(G);},_getPathOfTile:function(t){var G=this.oModel.getProperty("/groups"),n=null,a=null;jQuery.each(G,function(b,o){jQuery.each(o.tiles,function(d,T){if(T.uuid===t){n=b;a=d;return false;}});if(n!==null){return false;}});return n!==null?"/groups/"+n+"/tiles/"+a:null;},_moveInArray:function(a,n,b){if(b>=a.length){var k=b-a.length;while((k--)+1){a.push(undefined);}}a.splice(b,0,a.splice(n,1)[0]);},_updateGroupIndices:function(a){var k;for(k=0;k<a.length;k++){a[k].index=k;}},_deleteGroup:function(C,e,d){var t=this,G=d.groupId,s,a=this.oModel.getProperty("/groups"),n=this._getIndexOfGroup(G),i=a.length-1===n,o=null,r,m,b,B;b=i?n-1:n;this._destroyGroupModel("/groups/"+n);o=a.splice(n,1)[0].object;if(i){this.oModel.setProperty("/groups/"+b+"/isLastGroup",i);}s=sap.ushell.Container.getService("LaunchPage").getGroupId(o);m=this.oModel;m.setProperty("/groupList-skipScrollToGroup",true);m.setProperty("/groups",a);this._updateGroupIndices(a);if(b>=0){B=sap.ui.getCore().getEventBus();window.setTimeout($.proxy(B.publish,B,"launchpad","scrollToGroup",{groupId:this.oModel.getProperty("/groups")[b].groupId}),200);}window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false);},1000);this._addRequest($.proxy(function(){var f=sap.ushell.Container.getService("LaunchPage").getGroupTitle(o);try{r=this.oPageBuilderService.removeGroup(o);}catch(h){this._resetGroupsOnFailure("fail_to_delete_group_msg");return;}r.done(function(){sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(this.analyticsConstants.PERSONALIZATION,this.analyticsConstants.DELETE_GROUP,[f,s]);this._showLocalizedMessage("group_deleted_msg",[f]);}.bind(this));r.fail(this._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_delete_group_msg")));r.always($.proxy(this._checkRequestQueue,this));},this));},_resetGroup:function(C,e,d){var t=this,G=d.groupId,n=this._getIndexOfGroup(G),o=this.oModel.getProperty("/groups/"+n),s,a,r,b;this.oModel.setProperty("/groups/"+n+"/sortable",false);a=sap.ushell.Container.getService("LaunchPage").getGroupId(o.object);s=sap.ushell.Container.getService("LaunchPage").getGroupTitle(o.object);this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.resetGroup(o.object);}catch(f){this._resetGroupsOnFailure("fail_to_reset_group_msg");return;}r.done(this._handleAfterSortable($.proxy(function(G,o,R){sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(this.analyticsConstants.PERSONALIZATION,this.analyticsConstants.RESET_GROUP,[s,a]);var n=t._getIndexOfGroup(G);this._loadGroup(n,R||o.object);this._showLocalizedMessage("group_reset_msg",[o.title]);this.oModel.setProperty("/groups/"+n+"/sortable",true);b=sap.ui.getCore().byId('dashboardGroups').getGroupControlByGroupId(G);if(b){b.rerender();}},this,G,o)));r.fail(this._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_reset_group_msg")));r.always($.proxy(this._checkRequestQueue,this));},this));},_moveGroup:function(C,e,d){var f=d.fromIndex,t=d.toIndex,G=this.oModel.getProperty("/groups"),m=this.oModel,a=this.oModel.getProperty("/tileActionModeActive"),r,o,s,b=this,i;if(!a){f=this._adjustFromGroupIndex(f,G);}o=G[f];s=o.groupId;if(!a){t=this._adjustToGroupIndex(t,G,s);}this._moveInArray(G,f,t);this._updateGroupIndices(G);m.setProperty("/groupList-skipScrollToGroup",true);for(i=0;i<G.length-1;i++){G[i].isLastGroup=false;}G[G.length-1].isLastGroup=true;m.setProperty("/groups",G);window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false);},1000);this._addRequest($.proxy(function(){var o=this.oModel.getProperty(this._getPathOfGroup(s));try{r=this.oPageBuilderService.moveGroup(o.object,t);}catch(h){this._resetGroupsOnFailure("fail_to_move_group_msg");return;}r.done(function(){sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(b.analyticsConstants.PERSONALIZATION,b.analyticsConstants.MOVE_GROUP,[o.title,f,t,s]);});r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_move_group_msg")));r.always($.proxy(this._checkRequestQueue,this));},this));},_adjustToGroupIndex:function(t,a,b){var v=0,I=false,i=0;for(i=0;i<a.length&&v<t;i++){if(a[i].isGroupVisible){if(a[i].groupId===b){I=true;}else{v++;}}}if(I){return i-1;}return i;},_adjustFromGroupIndex:function(a,b){var v=0,i;for(i=0;i<b.length;i++){if(b[i].isGroupVisible){v++;}if(v===a+1){return i;}}return a;},_changeGroupTitle:function(C,e,d){var n=d.newTitle,G=this.oModel.getProperty("/groups"),s=d.groupId,a=d.groupId,b=this._getIndexOfGroup(s),o=this.oModel.getProperty("/groups/"+b),O=o.title,r,t=this;this.oModel.setProperty("/groups/"+b+"/title",n);if(!o.object){this._addRequest($.proxy(function(){try{if(b===G.length-1){r=this.oPageBuilderService.addGroup(n,b);}else{r=this.oPageBuilderService.addGroupAt(n,b);}}catch(f){this._resetGroupsOnFailure("fail_to_create_group_msg");return;}r.done(this._handleAfterSortable($.proxy(function(s,N){var b=this._getIndexOfGroup(s);this._loadGroup(b,N);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.RENAME_GROUP,[O,n,s]);},this,s)));r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_create_group_msg")));},this));}else{this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.setGroupTitle(o.object,n);}catch(f){this._resetGroupsOnFailure("fail_to_rename_group_msg");return;}r.done(function(){a=sap.ushell.Container.getService("LaunchPage").getGroupId(o.object);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.RENAME_GROUP,[O,n,a]);});r.fail(this._handleAfterSortable($.proxy(function(s,O){var h=this._getPathOfGroup(s);this._showLocalizedError("fail_to__msg");this.oModel.setProperty(h+"/title",O);this._requestFailed();},this,s)));},this));}r.always($.proxy(this._checkRequestQueue,this));},createTile:function(d){var C=d.catalogTileContext,o=d.groupContext,G=this.oModel.getProperty(o.getPath()),s=G.groupId,r,a=jQuery.Deferred(),R={},b;b=sap.ui.getCore().getEventBus();b=sap.ui.getCore().getEventBus();$.proxy(b.publish,b,"launchpad","addTile",{catalogTileContext:C,groupContext:o});if(!C){jQuery.sap.log.warning("DashboardManager: Did not receive catalog tile object. Abort.",this);return;}this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.addTile(C.getProperty("src"),o.getProperty("object"));}catch(e){this._resetGroupsOnFailure("fail_to_add_tile_msg");return;}var t=this;r.done(function(T){var f=t._getPathOfGroup(s),h=sap.ushell.Container.getService("LaunchPage").getTileTitle(T);t._addTileToGroup(f,T);R={group:G,status:1,action:'add'};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.ADD_TILE,[G.title,h]);a.resolve(R);}).fail(function(){R={group:G,status:0,action:'add'};a.resolve(R);}).always(function(){t._checkRequestQueue();});},this));return a.promise();},createGroupAndSaveTile:function(d){var C=d.catalogTileContext,n=d.newGroupName,r,a=jQuery.Deferred(),R={},G,b,s,i;if(sap.ushell.utils.validHash(n)&&C){G=this._getGroupModel(null,false,true);b=this.oModel.getProperty("/groups");s=G.groupId;i=b.length;if(i>0){b[i-1].isLastGroup=false;}G.title=n;G.index=i;G.editMode=false;b.push(G);this.oModel.setProperty("/groups/",b);if(!C){jQuery.sap.log.warning("DashboardManager: Did not receive catalog tile object. Abort.",this);return;}this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.addGroup(n);}catch(e){this._resetGroupsOnFailure("fail_to_create_group_msg");return;}r.done(this._handleAfterSortable($.proxy(function(s,N){var f=this._getIndexOfGroup(s),o,p;this._loadGroup(f,N);o=new sap.ui.model.Context(this.oModel,"/groups/"+f);p=this.createTile({catalogTileContext:C,groupContext:o});p.done(function(h){R={group:h.group,status:1,action:'addTileToNewGroup'};a.resolve(R);}).fail(function(h){R={group:h.group,status:0,action:'addTileToNewGroup'};a.resolve(R);});},this,s)));r.fail(function(f){this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_create_group_msg"));R={group:f.group,status:0,action:'createNewGroup'};a.resolve(R);}.bind(this));r.always($.proxy(this._checkRequestQueue,this));},this));}return a.promise();},_deleteTile:function(C,e,d){var t=this,T=d.tileId||d.originalTileId,G=this.oModel.getProperty("/groups");jQuery.each(G,function(n,o){var f=false;jQuery.each(o.tiles,function(a,b){if(b.uuid===T||b.originalTileId===T){t._destroyTileModel("/groups/"+n+"/tiles/"+a);var h=o.tiles.splice(a,1)[0],r,s=sap.ushell.Container.getService("LaunchPage").getTileTitle(h.object),i=sap.ushell.Container.getService("LaunchPage").getCatalogTileId(h.object),j=sap.ushell.Container.getService("LaunchPage").getCatalogTileTitle(h.object),k=sap.ushell.Container.getService("LaunchPage").getTileId(h.object);t.oModel.setProperty("/groups/"+n+"/tiles",o.tiles);t._addRequest(function(){try{r=t.oPageBuilderService.removeTile(o.object,h.object);}catch(l){this._resetGroupsOnFailure("fail_to_remove_tile_msg");return;}r.done(t._handleAfterSortable(function(){if(s){t._showLocalizedMessage("tile_deleted_msg",[s,o.title]);}else{t._showLocalizedMessage("tile_deleted_msg",[s,o.title]);}sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.DELETE_TILE,[s||k,i,j,o.title]);}));r.fail(t._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_remove_tile_msg")));r.always($.proxy(t._checkRequestQueue,t));});sap.ushell.utils.handleTilesVisibility();f=true;return false;}});if(f){return false;}});},_sendDeleteTileRequest:function(G,t){var r,a=sap.ushell.Container.getService('LaunchPage');try{r=a.removeTile(G,t.object);}catch(e){jQuery.sap.log.error("deleteCatalogTileFromGroup ; removeTile ; Exception occurred: "+e);}return r;},deleteCatalogTileFromGroup:function(d){var t=this,D=decodeURIComponent(d.tileId),G=d.groupIndex,o=this.oModel.getProperty("/groups/"+G),s=sap.ushell.Container.getService("LaunchPage"),a=jQuery.Deferred(),b=[],f,p,e;f=o.tiles.filter(function(T){var h=s.getCatalogTileId(T.object);if(h!==D){return true;}else{p=jQuery.Deferred();e=t._sendDeleteTileRequest(o.object,T);e.done((function(a){return function(){a.resolve({status:true});};})(p));e.fail((function(a){return function(){a.resolve({status:false});};})(p));b.push(p);return false;}});o.tiles=f;jQuery.when.apply(jQuery,b).done(function(r){var S=true,i=0,h=b.length;for(i;i<h;i++){if(!r.status){S=false;break;}}if(S){t.oModel.setProperty("/groups/"+G,o);}a.resolve({group:o,status:S,action:'remove'});});return a.promise();},_moveTile:function(C,e,d){var n=d.toIndex,N=d.toGroupId,t=d.sTileId,s=d.source,T,a,o,b,f,h,i=sap.ushell.Container.getService("LaunchPage"),G=this.oModel.getProperty("/groups"),S,j,r;jQuery.each(G,function(k,l){var F=false;jQuery.each(l.tiles,function(m,p){if(p.uuid===t){T=p;a=m;o=l;b=k;F=true;return false;}});if(F){return false;}});jQuery.each(G,function(k,l){if(l.groupId===N){f=l;h=k;}});if(o.groupId==f.groupId&&(s==="moveDialog"||n===null)){return;}if(n&&n>f.tiles.length){n=f.tiles.length;}if(o.groupId===N){if(n===null||n===undefined){o.tiles.splice(a,1);n=o.tiles.length;o.tiles.push(T);}else{n=this._adjustTileIndex(n,T,o);this._moveInArray(o.tiles,a,n);}this.oModel.setProperty("/groups/"+b+"/tiles",o.tiles);}else{o.tiles.splice(a,1);this.oModel.setProperty("/groups/"+b+"/tiles",o.tiles);if(n===null||n===undefined){n=f.tiles.length;f.tiles.push(T);}else{n=this._adjustTileIndex(n,T,f);f.tiles.splice(n,0,T);}this.oModel.setProperty("/groups/"+h+"/tiles",f.tiles);}this.mapCatalogTilesToGroups();this.updateCatalogTilesToGroupsMap();sap.ushell.utils.handleTilesVisibility();S=this.oModel.getProperty("/groups/"+b).object;j=this.oModel.getProperty("/groups/"+h).object;this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.moveTile(T.object,a,n,S,j);}catch(k){this._resetGroupsOnFailure("fail_to_move_tile_msg");return;}T.tileIsBeingMoved=true;r.done(this._handleAfterSortable($.proxy(function(t,l){var m,u=[i.getTileTitle(T.object),i.getGroupTitle(S),i.getGroupTitle(j),t];sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(this.analyticsConstants.PERSONALIZATION,this.analyticsConstants.MOVE_TILE,u);m=this._getPathOfTile(t);if(m){this.oModel.setProperty(m+"/object",l);this.oModel.setProperty(m+"/originalTileId",this.oPageBuilderService.getTileId(l));this.oPageBuilderService.getTileView(l).done(function(v){var p=this.oModel.getProperty(m+"/content");this.oModel.setProperty(m+"/content",[v]);if(p&&p[0]){p[0].destroy();}this.oModel.setProperty(m+"/tileIsBeingMoved",false);}.bind(this));}},this,t)));r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_move_tile_msg")));r.always($.proxy(this._checkRequestQueue,this));},this));},_adjustTileIndex:function(n,t,a){var v=0,I=false,i=0;for(i=0;i<a.tiles.length&&v<n;i++){if(a.tiles[i].isTileIntentSupported){if(a.tiles[i]===t){I=true;}else{v++;}}}if(I){return i-1;}return i;},getModel:function(){return this.oModel;},getDashboardView:function(){return this.oDashboardView;},getGroupListView:function(a){var A=true;if(!sap.ui.getCore().byId('groupList')){A=false;this.oGroupListView=sap.ui.view("groupList",{viewName:"sap.ushell.components.flp.launchpad.group_list.GroupList",type:'JS',viewData:a||{}});}return{groupList:this.oGroupListView,alreadyCreated:A};},isGroupListViewCreated:function(){return this.oGroupListView!==undefined;},loadAllCatalogs:function(C,e,d){var G=new jQuery.Deferred(),t=this,s;G.resolve();s=function(){G.done(function(){var a=t.getModel().getProperty("/groups");if(a&&a.length!==0){t.mapCatalogTilesToGroups();t.updateCatalogTilesToGroupsMap();}});};if(!this.oModel.getProperty("/catalogs")||!sap.ushell.Container.getService("LaunchPage").isCatalogsValid()){if(!this.oModel.getProperty("/groups")||this.oModel.getProperty("/groups").length===0){G=this.loadPersonalizedGroups();}this._destroyAllGroupModels("/catalogs");this._destroyAllTileModels("/catalogTiles");this.oModel.setProperty("/catalogs",[]);this.oModel.setProperty("/catalogTiles",[]);this.aPromises=[];sap.ushell.Container.getService("LaunchPage").getCatalogs().done(function(a){jQuery.when.apply(jQuery,this.aPromises).then(this.onDoneLoadingCatalogs(a));s();}.bind(this)).fail(t._showLocalizedErrorHelper("fail_to_load_catalog_msg")).progress(this.addCatalogToModel.bind(this));}else{s();}},updateCatalogTilesToGroupsMap:function(){var a=this.getModel().getProperty("/catalogTiles"),t,i,b,d,G,s=sap.ushell.Container.getService("LaunchPage");if(a){for(i=0;i<a.length;i++){t=a[i];b=encodeURIComponent(s.getCatalogTileId(t.src));d=this.getModel().getProperty("/catalogTiles/"+i+"/associatedGroups");G=this.oTileCatalogToGroupsMap[b];d=G?G:[];a[i].associatedGroups=d;}}this.getModel().setProperty("/catalogTiles",a);},addCatalogToModel:function(C){var a=this.oModel.getProperty('/catalogs'),s=sap.ushell.Container.getService("LaunchPage"),b=s.getCatalogId(C),d=false,o,p;a.forEach(function(e){if(e.id===b){d=true;}});if(!d){o={title:s.getCatalogTitle(C),id:s.getCatalogId(C),"static":false,tiles:[],numberOfTiles:0};p=s.getCatalogTiles(C);this.aPromises.push(p);p.done(function(t){if(!t.length){return;}var e={catalog:o.title,id:o.id,index:a.length,numberOfExistingTiles:0};var u=function(){if(!this.oModel.getProperty('/isCatalogInUpdate')){this.oModel.setProperty('/isCatalogInUpdate',true);var E=this.searchModelCatalogByTitle(o.title),f;if(E.result){e.index=E.indexOfPreviousInstanceInModel;e.numberOfExistingTiles=E.numOfTilesInCatalog;this.setCatalogTiles("/catalogTiles",true,e,t);f=this.oModel.getProperty('/catalogs');C=f[E.indexOfPreviousInstanceInModel];C.numIntentSupportedTiles=c.call(this,o);C.numberOfTiles=E.numOfTilesInCatalog+t.length;a[E.indexOfPreviousInstanceInModel]=C;}else{this.setCatalogTiles("/catalogTiles",true,e,t);o.numIntentSupportedTiles=c.call(this,o);o.numberOfTiles=t.length;a.push(o);}this.oModel.setProperty('/catalogs',a);this.oModel.setProperty('/isCatalogInUpdate',false);return;}setTimeout(u,50);}.bind(this);u();}.bind(this)).fail(this._showLocalizedErrorHelper("fail_to_load_catalog_tiles_msg"));}},searchModelCatalogByTitle:function(a){var b=this.oModel.getProperty('/catalogs'),d=false,i,n=0,G=false;$.each(b,function(e,t){if(t.title===sap.ushell.resources.i18n.getText('catalogsLoading')){G=true;}else if(a==t.title){i=e;n=t.numberOfTiles;d=true;return false;}});return{result:d,indexOfPreviousInstanceInModel:i,indexOfPreviousInstanceInPage:G?i-1:i,numOfTilesInCatalog:n};},getTagList:function(m){var i={},d=0,t=[],e,T,s;for(d=0;d<this.tagsPool.length;d++){T=this.tagsPool[d];if(i[T]){i[T]++;}else{i[T]=1;}}for(e in i){t.push({tag:e,occ:i[e]});}s=t.sort(function(a,b){return b.occ-a.occ;});if(s.length===0){this.oModel.setProperty("/tagFiltering",false);}if(m){this.oModel.setProperty("/tagList",s.slice(0,m));}else{this.oModel.setProperty("/tagList",s);}},onDoneLoadingCatalogs:function(C){if(!C.length){this.oModel.setProperty("/catalogsNoDataText",sap.ushell.resources.i18n.getText('noCatalogs'));}var s=sap.ushell.Container.getService("LaunchPage"),l=C.filter(function(o){return!s.getCatalogError(o);}),a;if(l.length!==C.length){this._showLocalizedError("partialCatalogFail");}if(this.oModel.getProperty("/tagFiltering")===true){this.getTagList();}a=this.oModel.getProperty('/catalogs');if(a[0]&&a[0].title===sap.ushell.resources.i18n.getText('catalogsLoading')){a.splice(0,1);}a.splice(0,0,{title:g("catalogSelect_initial_selection"),"static":true,tiles:[],numIntentSupportedTiles:-1});this.oModel.setProperty('/catalogs',a);sap.ushell.utils.handleTilesVisibility();},setCatalogTiles:function(p,a,d,C){var s=sap.ushell.Container.getService("LaunchPage"),u=$.map(C,function(o,t){var b=encodeURIComponent(s.getCatalogTileId(o)),e=this.oTileCatalogToGroupsMap[b]||[],f=s.getCatalogTileTags(o)||[];if(f.length>0){this.tagsPool=this.tagsPool.concat(f);}return{associatedGroups:e,src:o,catalog:d.catalog,catalogIndex:this.calculateCatalogTileIndex(d.index,d.numberOfExistingTiles,t),catalogId:d.id,title:s.getCatalogTileTitle(o),tags:f,keywords:(s.getCatalogTileKeywords(o)||[]).join(','),id:b,size:s.getCatalogTileSize(o),content:[s.getCatalogTileView(o)],isTileIntentSupported:s.isTileIntentSupported(o)};}.bind(this));this.oModel.setProperty(p,$.merge((a&&this.oModel.getProperty(p))||[],u));},calculateCatalogTileIndex:function(a,n,t){var r=parseInt(a*100000,10);r+=(n!==undefined?n:0)+t;return r;},mapCatalogTilesToGroups:function(){this.oTileCatalogToGroupsMap={};var G=this.oModel.getProperty("/groups"),s=sap.ushell.Container.getService("LaunchPage"),i=0,o,t,T,a,b,d;for(i=0;i<G.length;i++){o=G[i];T=o.tiles;if(T){for(t=0;t<T.length;++t){a=encodeURIComponent(s.getCatalogTileId(T[t].object));b=this.oTileCatalogToGroupsMap[a]||[];d=s.getGroupId(o.object);if(b.indexOf(d)===-1&&(typeof(o.isGroupVisible)==='undefined'||o.isGroupVisible)&&!o.isGroupLocked){b.push(d);}this.oTileCatalogToGroupsMap[a]=b;}}}},_showLocalizedMessage:function(m,p,t){sap.ushell.Container.getService("Message").show(t||sap.ushell.services.Message.Type.INFO,g(m,p),p);},_showLocalizedError:function(m,p){this._showLocalizedMessage(m,p,sap.ushell.services.Message.Type.ERROR);},_showLocalizedErrorHelper:function(m,p){var t=this;return function(){t._showLocalizedError(m,p);};},_resetGroupsOnFailureHelper:function(m){var t=this;return function(G){t._showLocalizedError(m);setTimeout(function(){t.loadGroupsFromArray(G);});};},_resetGroupsOnFailure:function(m,p){this._requestFailed();this._showLocalizedError(m,p);this.loadPersonalizedGroups();this.oModel.updateBindings(true);},resetGroupsOnFailure:function(){this._resetGroupsOnFailure.apply(this,arguments);},loadGroupsFromArray:function(G){var t=this;this.oPageBuilderService.getDefaultGroup().done(function(d){if(G.length==0&&d==undefined){return;}var i=0,l=[],b,a=G.indexOf(d),n,N,e=[],o,f,h,m;G.splice(a,1);while(i<G.length){o=G[i];f=t.oPageBuilderService.isGroupLocked(o);if(f){l.push(o);G.splice(i,1);}else{i++;}}n=l.length;if(!t.oModel.getProperty('/disableSortedLockedGroups')){l.sort(function(x,y){var j=t.oPageBuilderService.getGroupTitle(x).toLowerCase(),k=t.oPageBuilderService.getGroupTitle(y).toLowerCase();return j<k?-1:1;});}b=l;b.push(d);b.push.apply(b,G);G=b;h=G.length;m=t.oModel.getProperty("/groups/length");t.oModel.setProperty("/groups/indexOfDefaultGroup",n);for(i=h;i<m;++i){t._destroyGroupModel("/groups/"+i);}for(i=0;i<h;++i){N=t._getGroupModel(G[i],i===n,i===h-1);N.index=i;e.push(N);}t.oModel.setProperty('/groups',e);t.oModel.setProperty("/groups/length",h);if(t.oModel.getProperty('/currentState/stateName')==="catalog"){t.mapCatalogTilesToGroups();t.updateCatalogTilesToGroupsMap();}}).fail(t._resetGroupsOnFailureHelper("fail_to_get_default_group_msg"));},_loadGroup:function(n,G){var t=this,s="/groups/"+n,d=t.oModel.getProperty("/groups/indexOfDefaultGroup"),i=t.oModel.getProperty(s).isLastGroup,o,N;this._destroyGroupModel(s);o=this.oModel.getProperty(s+"/groupId");N=this._getGroupModel(G,n===d,i);if(o){N.groupId=o;}N.index=n;this.oModel.setProperty(s,N);},_getGroupModel:function(G,d,l){var s=this.oPageBuilderService,a=(G&&s.getGroupTiles(G))||[],m=[],M=[],i,b,o=this.getModel();b=o.getProperty("/personalization");var e=G&&s.isGroupLocked(G)?true:false;for(i=0;i<a.length;++i){var t=a[i],T=s.getTileType(t).toLowerCase();if(T==="tile"){m.push(this._getTileModel(a[i],e,T));}else if(T==="link"){M.push(this._getTileModel(a[i],e,T));}else{jQuery.sap.log.error("Unknown tile type: '"+T+"'",undefined,"sap.ushell.components.flp.launchpad.DashboardManager");}}return{title:(d&&g("my_group"))||(G&&s.getGroupTitle(G))||"",object:G,groupId:jQuery.sap.uid(),links:M,tiles:m,isDefaultGroup:d||false,editMode:!G,isGroupLocked:e,removable:!G||s.isGroupRemovable(G),sortable:b,isGroupVisible:!G||s.isGroupVisible(G),isEnabled:!d,isLastGroup:l||false};},_addTileToGroup:function(G,t){var T=G+"/tiles",n=this.oModel.getProperty(T).length,s=this.oPageBuilderService,a=s.getTileType(t);var i=this.oModel.getProperty(G+"/isGroupLocked");this.oModel.setProperty(T+"/"+n,this._getTileModel(t,i,a));},_updateModelWithTileView:function(t,T){var a=this;this.tileViewUpdateQueue.push({uuid:t,view:T});if(this.tileViewUpdateTimeoutID){clearTimeout(this.tileViewUpdateTimeoutID);}this.tileViewUpdateTimeoutID=setTimeout(function(){a.tileViewUpdateTimeoutID=undefined;a.oSortableDeferred.done(function(){a._updateModelWithTilesViews();});},50);},_updateModelWithTilesViews:function(){var G=this.oModel.getProperty("/groups"),t,l,T,u,s,b,L,r={};if(!G){return;}for(var i=0;i<G.length;i=i+1){t=G[i].tiles;l=G[i].links;t=t.concat(l);for(var j=0;j<t.length;j=j+1){T=t[j];for(var q=0;q<this.tileViewUpdateQueue.length;q++){u=this.tileViewUpdateQueue[q];if(T.uuid==u.uuid){if(u.view){T.content[0].destroy();T.content=[u.view];s=this.oPageBuilderService.getTileSize(T.object);L=((s!==null)&&(s==="1x2"||s==="2x2"))||false;b=((s!==null)&&(s==="2x1"||s==="2x2"))||false;if(T['long']!==L||T.tall!==b){T['long']=L;T.tall=b;r[G[i].groupId]=true;}}else{T.content[0].setState("Failed");}break;}}}}this.tileViewUpdateQueue=[];this.oModel.setProperty("/groups",G);var d=this.getDashboardView();if(!jQuery.isEmptyObject(r)&&d){if(d&&d.oDashboardGroupsBox){var a=d.oDashboardGroupsBox.getGroups();for(var e in r){for(var i=0;i<a.length;i++){if(a[i].getGroupId()===e){sap.ushell.Layout.reRenderGroupLayout(a[i]);break;}}}}}},getModelTileById:function(i){var G=this.oModel.getProperty('/groups'),m;G.forEach(function(o){o.tiles.forEach(function(t){if(t.uuid===i||t.originalTileId===i){m=t;return;}});});return m;},_getTileModel:function(t,i,T){var s=this.oPageBuilderService,a=jQuery.sap.uid(),o,u,b=this,d,e;this.sTileType=T;s.setTileVisible(t,false);d=s.getTileView(t);d.done(function(v){o=v;if(u){u.apply(b,[a,o]);}});d.fail(function(){if(u){u.apply(b,[a]);}else{jQuery.sap.require('sap.ushell.ui.launchpad.TileState');if(b.sTileType==="link"){o=new sap.m.Link({text:sap.ushell.resources.i18n.getText('cannotLoadTile')});}else{o=new sap.ushell.ui.launchpad.TileState({state:"Failed"});}}});if(!o){u=this._updateModelWithTileView;jQuery.sap.require('sap.ushell.ui.launchpad.TileState');o=new sap.ushell.ui.launchpad.TileState({state:"Loading"});}if(T==="link"){e={"object":t,"originalTileId":s.getTileId(t),"uuid":a,"tileCatalogId":encodeURIComponent(s.getCatalogTileId(t)),"content":[o],"target":s.getTileTarget(t)||"","debugInfo":s.getTileDebugInfo(t),"isTileIntentSupported":s.isTileIntentSupported(t),"isLocked":i};}else if(T==="tile"){var S=s.getTileSize(t);e={"object":t,"originalTileId":s.getTileId(t),"uuid":a,"tileCatalogId":encodeURIComponent(s.getCatalogTileId(t)),"content":[o],"long":((S!==null)&&(S==="1x2"||S==="2x2"))||false,"tall":((S!==null)&&(S==="2x1"||S==="2x2"))||false,"target":s.getTileTarget(t)||"","debugInfo":s.getTileDebugInfo(t),"isTileIntentSupported":s.isTileIntentSupported(t),"rgba":"","isLocked":i,"showActionsIcon":this.oModel.getProperty("/tileActionsIconEnabled")||false};}return e;},_destroyAllGroupModels:function(t){var G=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(G){for(i=0;i<G.length;i=i+1){this._destroyGroupModel(G[i]);}}},_destroyGroupModel:function(t){var G=(typeof t==="string")?this.oModel.getProperty(t):t;if(G){this._destroyAllTileModels(G.tiles);}},_destroyAllTileModels:function(t){var T=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(T){for(i=0;i<T.length;i=i+1){this._destroyTileModel(T[i]);}}},_destroyTileModel:function(t){var T=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(T&&T.content){for(i=0;i<T.content.length;i=i+1){T.content[i].destroy();}}},loadPersonalizedGroups:function(){var t=this,G=this.oPageBuilderService.getGroups(),d=new jQuery.Deferred();G.done(function(a){t.loadGroupsFromArray(a);d.resolve();});G.fail(function(){t._showLocalizedErrorHelper("fail_to_load_groups_msg");d.reject();});return d;}});}());},"sap/ushell/components/flp/launchpad/PagingManager.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.launchpad.PagingManager");sap.ui.base.EventProvider.extend("sap.ushell.components.flp.launchpad.PagingManager",{metadata:{publicMethods:["setElementClass","setContainerSize","getNumberOfAllocatedElements","moveToNextPage","getTileHeight"]},constructor:function(i,s){sap.ushell.components.flp.launchpad.getPagingManager=jQuery.sap.getter(this.getInterface());this.currentPageIndex=0;this.containerHeight=s.containerHeight||0;this.containerWidth=s.containerWidth||0;this.ElementClass=s.elementClassName||"";this.tileHeight=0;},getTileHeight:function(){return this.tileHeight;},setElementClass:function(c){this.ElementClass=c;},setContainerSize:function(n,a){var t=this.getNumberOfAllocatedElements();this.containerHeight=n;this.containerWidth=a;this._changePageSize(t);},getNumberOfAllocatedElements:function(){return this._calcElementsPerPage()*this.currentPageIndex;},_changePageSize:function(t){this.currentPageIndex=Math.ceil(t/this._calcElementsPerPage());},moveToNextPage:function(){this.currentPageIndex++;},_calcElementsPerPage:function(){var e=jQuery("<div>").addClass(this.ElementClass);jQuery('body').append(e);var a=e.height();var b=e.width();if(a<100||b<100){b=100;a=100;}var c=Math.round(this.containerWidth/b),d=Math.round(this.containerHeight/a);this.tileHeight=a;e.remove();if(!c||!d||d===Infinity||c===Infinity||d===0||c===0){return 10;}return c*d;}});}());},"sap/ushell/components/flp/launchpad/catalog/Catalog.controller.js":function(){(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.catalog.Catalog",{oPopover:null,onInit:function(){sap.ui.getCore().getEventBus().subscribe("showCatalogEvent",this.onShow,this);sap.ui.getCore().byId("catalogSelect").addEventDelegate({onBeforeRendering:this.onBeforeSelectRendering},this);var r=this.getView().parentComponent.getRouter();r.attachRoutePatternMatched(this.onShow.bind(this));},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("showCatalogEvent",this.onShow);},onBeforeRendering:function(){sap.ui.getCore().getEventBus().publish("showCatalog");setTimeout(function(){jQuery('#catalogSelect').focus();},0);},onAfterRendering:function(){var m=this.getView().getModel(),c=m.getProperty('/catalogs'),t=this;if(!c.length){m.setProperty('/catalogs',[{title:sap.ushell.resources.i18n.getText('catalogsLoading'),"static":true,tiles:[],numIntentSupportedTiles:-1}]);m.setProperty('/catalogsNoDataText',sap.ushell.resources.i18n.getText('loadingTiles'));}else if(c[0].title!=sap.ushell.resources.i18n.getText('catalogsLoading')){m.setProperty('/catalogsNoDataText',sap.ushell.resources.i18n.getText('noFilteredItems'));}if(!this.PagingManager){this.lastCatalogId=0;jQuery.sap.require("sap.ushell.components.flp.launchpad.PagingManager");this.PagingManager=new sap.ushell.components.flp.launchpad.PagingManager('catalogPaging',{elementClassName:'sapUshellTile',containerHeight:window.innerHeight,containerWidth:window.innerWidth});}if(this.PagingManager.currentPageIndex===0){t.allocateNextPage();}jQuery("#catalogTilesPage-cont").scroll(function(){var p=sap.ui.getCore().byId('catalogTilesPage'),s=p.getScrollDelegate(),a=s.getScrollTop(),b=s.getMaxScrollTop();if(b-a<=30+t.PagingManager.getTileHeight()){t.allocateNextPage();}});jQuery(window).resize(function(){var w=$(window).width(),a=$(window).height();t.PagingManager.setContainerSize(w,a);t.resetPageFilter();t.applyTileFilters();});},onShow:function(E){var h,m=this.getView().getModel(),c=m.getProperty("/catalogTiles")||[],d=E.getParameter('arguments').filters,D=d?JSON.parse(d):d,p=(D&&decodeURIComponent(D.targetGroup))||"",i;$.extend(this.getView().getViewData(),E);if(this.PagingManager){this.resetPageFilter();}this.categoryFilter=(D&&D.catalogSelector&&D.catalogSelector)||null;this.searchFilter=(D&&D.tileFilter&&D.tileFilter)||null;h=(D&&D.tagFilter&&D.tagFilter)||"";p=p==='undefined'?undefined:p;this._updateModelWithGroupContext(p);if(h){try{this.tagFilter=JSON.parse(h);}catch(e){this.tagFilter=[];}}else{this.tagFilter=[];}if(this.tagFilter){m.setProperty("/selectedTags",this.tagFilter);}m.setProperty("/showCatalogHeaders",true);m.setProperty("/catalogSearchFilter",this.searchFilter);for(i=0;i<c.length;i=i+1){c[i].active=false;}if(this.categoryFilter||this.searchFilter){sap.ui.getCore().byId("catalogSelect").rerender();}else{sap.ui.getCore().byId("catalogSelect").setSelectedItemId("");}this.oRenderingFilter=new sap.ui.model.Filter('','EQ','a');this.oRenderingFilter.fnTest=function(v){if(v.catalogIndex<=this.lastCatalogId){return true;}if(this.allocateTiles>0){this.lastCatalogId=v.catalogIndex;this.allocateTiles--;return true;}return false;}.bind(this);if(this.PagingManager){this.applyTileFilters();}},resetPageFilter:function(){this.lastCatalogId=0;this.allocateTiles=this.PagingManager.getNumberOfAllocatedElements();},allocateNextPage:function(){if(!this.allocateTiles||this.allocateTiles===0){this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.applyTileFilters();}},onBeforeSelectRendering:function(){var s=sap.ui.getCore().byId("catalogSelect"),i=jQuery.grep(s.getItems(),jQuery.proxy(function(I){return I.getBindingContext().getObject().title===this.categoryFilter;},this));if(!i.length){i.push(s.getItemAt(0));}if(i[0]&&s.getSelectedItemId()!==i[0].getId()){window.setTimeout($.proxy(s.setSelectedItem,s,i[0].getId()),500);}},setTagsFilter:function(f){var p={catalogSelector:this.categoryFilter,tileFilter:this.searchFilter,tagFilter:f,targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('catalog',{filters:JSON.stringify(p)},true);},setCategoryFilter:function(f){var p={catalogSelector:f,tileFilter:this.searchFilter,tagFilter:JSON.stringify(this.tagFilter),targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('catalog',{filters:JSON.stringify(p)},true);},setSearchFilter:function(f){var p={catalogSelector:this.categoryFilter,tileFilter:f,tagFilter:JSON.stringify(this.tagFilter),targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('catalog',{'filters':JSON.stringify(p)});},getGroupContext:function(){var m=this.getView().getModel(),g=m.getProperty("/groupContext/path");return g?g:"";},applyTileFilters:function(){var f=[],o,s,c,C;if(this.tagFilter){o=new sap.ui.model.Filter('tags','EQ','v');o.fnTest=function(t){var i,a;if(this.tagFilter.length===0){return true;}for(i=0;i<this.tagFilter.length;i++){a=this.tagFilter[i];if(t.indexOf(a)===-1){return false;}}return true;}.bind(this);f.push(o);}if(this.searchFilter){s=new sap.ui.model.Filter($.map(this.searchFilter.split(/[\s,]+/),function(v){return(v&&new sap.ui.model.Filter("keywords",sap.ui.model.FilterOperator.Contains,v))||(v&&new sap.ui.model.Filter("title",sap.ui.model.FilterOperator.Contains,v))||undefined;}),true);f.push(s);}if(this.categoryFilter){C=this.categoryFilter;c=new sap.ui.model.Filter("catalog",sap.ui.model.FilterOperator.EQ,C);f.push(c);}f.push(new sap.ui.model.Filter("isTileIntentSupported",sap.ui.model.FilterOperator.EQ,true));if(this.oRenderingFilter){f.push(this.oRenderingFilter);}sap.ui.getCore().byId("catalogTiles").getBinding("tiles").filter(f);},onLiveFilter:function(e){var q=e.getParameter("newValue");if(q){this.setSearchFilter(q);}else{this.setSearchFilter();}},onTagsFilter:function(e){var s=e.getParameters("selectedItem").changedItem,a=e.getParameter("selected"),b=[],c=s.getText();if(this.tagFilter){b=this.tagFilter;}if(a){b.push(c);}else{b=b.filter(function(d){return d!==c;});}this.setTagsFilter(b.length>0?JSON.stringify(b):"");},onCategoryFilter:function(e){var s=e.getParameter("selectedItem"),S=s.getBindingContext(),m=S.getModel();if(m.getProperty("static",S)){m.setProperty("/showCatalogHeaders",true);this.setCategoryFilter();this.selectedCategory=undefined;}else{m.setProperty("/showCatalogHeaders",false);this.setCategoryFilter(s.getBindingContext().getObject().title);this.selectedCategory=s.getId();}},onTileAfterRendering:function(e){var f=e.getSource().getFootItems()[0];if(f!==undefined){f.addStyleClass("sapUshellCatalogPlusIcon");}},catalogTilePress:function(c){sap.ui.getCore().getEventBus().publish("launchpad","catalogTileClick");},onTileFooterClick:function(e){var s=e.getSource(),S=s.getBindingContext(),t=this,m=this.getView().getModel(),o,c,p,a=e.oSource,b=a.getDomRef(),P=this.createPopoverData(e),d=new sap.ui.model.json.JSONModel(P.userGroupList),i=192,g=m.getProperty("/groupContext/path"),l,f,n;if(g){this._handleTileFooterClickInGroupContext(S,g);}else{l=this._createPopoverGroupList(P);f=this._setPopoverContainer(i);n=this._createNewGroupUiElements(f,i);f.addContent(n.newGroupItemList);f.addContent(l);if(document.body.clientHeight-b.getBoundingClientRect().bottom>=310){p="Bottom";}else{p="Auto";}this.oPopover=new sap.m.ResponsivePopover({id:"groupsPopover",placement:p,content:[f],enableScrolling:true,title:sap.ushell.resources.i18n.getText("addTileToGroups_popoverTitle"),contentWidth:'20rem',afterClose:function(){n.newGroupItemList.destroy();n.newGroupNameInput.destroy();o.destroy();c.destroy();f.destroy();t.oPopover.destroy();t.oPopover=null;}});if(!sap.ui.Device.system.phone){this.oPopover.setContentHeight(i+"px");}else{this.oPopover.setContentHeight("100%");}o=this._createOkButton(S,d,P,t,t.oPopover,n.newGroupNameInput);c=this._createCancelButton(t.oPopover);this.oPopover.setBeginButton(o);this.oPopover.setEndButton(c);this.oPopover.setInitialFocus('newGroupItem');this.oPopover.openBy(a);}},_getCatalogTileIndexInModel:function(s){var t=s.sPath,a=t.split("/"),b=a[a.length-1];return b;},_handleTileFooterClickInGroupContext:function(s,g){var l=sap.ushell.Container.getService("LaunchPage"),m=this.getView().getModel(),c=this.getCatalogTileDataFromModel(s),a=c.tileData.associatedGroups,G=m.getProperty(g),b=l.getGroupId(G.object),C=$.inArray(b,a),t=this._getCatalogTileIndexInModel(s),o,A,r,T,d,e=this;if(c.isBeingProcessed){return;}m.setProperty('/catalogTiles/'+t+'/isBeingProcessed',true);if(C==-1){o=new sap.ui.model.Context(s.getModel(),g);A=this._addTile(s,o);A.done(function(f){if(f.status==1){e._groupContextOperationSucceeded(s,c,G,true);}else{e._groupContextOperationFailed(c,G,true);}});A.always(function(){m.setProperty('/catalogTiles/'+t+'/isBeingProcessed',false);});}else{T=s.getModel().getProperty(s.getPath()).id;d=g.split('/')[2];r=this._removeTile(T,d);r.done(function(f){if(f.status==1){e._groupContextOperationSucceeded(s,c,G,false);}else{e._groupContextOperationFailed(c,G,false);}});r.always(function(){m.setProperty('/catalogTiles/'+t+'/isBeingProcessed',false);});}},_createPopoverGroupList:function(p){var u=[],P,l=new sap.m.List({mode:sap.m.ListMode.MultiSelect,includeItemInSelection:true}),L=new sap.m.DisplayListItem({label:"{title}",selected:"{selected}",tooltip:"{title}",type:sap.m.ListType.Active}),t=this;l.addEventDelegate({onsapup:function(E){try{E.preventDefault();if(t.getView().getModel().getProperty("/groups/length")){var j,c=jQuery(":focus");if(c.index()==0){j=jQuery("#newGroupItem");j.focus();E._bIsStopHandlers=true;}}}catch(e){}}});l.attachItemPress(function(e){var c=e.getParameter('listItem'),s=e.getParameter('srcControl'),S;if(s.getMetadata().getName()==='sap.m.CheckBox'){S=c.isSelected();s.setSelected(!S);c.setSelected(!S);}});u.push(new sap.ui.model.Filter("isGroupLocked",sap.ui.model.FilterOperator.EQ,false));if(this.getView().getModel().getProperty('/enableHideGroups')){u.push(new sap.ui.model.Filter("isGroupVisible",sap.ui.model.FilterOperator.EQ,true));}l.bindItems("/",L,null,u);P=new sap.ui.model.json.JSONModel(p.userGroupList);l.setModel(P);return l;},_setPopoverContainer:function(p){var a="popoverContainer",b=new sap.m.ScrollContainer({id:a,horizontal:false,vertical:true});if(!sap.ui.Device.system.phone){b.setHeight((p-2)+"px");}else{b.setHeight("100%");}return b;},_createNewGroupUiElements:function(p,P){var m=this.getView().getModel(),n,b,N,h,o,a,t=this;n=new sap.m.Input({id:"newGroupNameInput",type:"Text",placeholder:sap.ushell.resources.i18n.getText("new_group_name")});b=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("nav-back"),press:function(e){t.oPopover.removeAllContent();if(!sap.ui.Device.system.phone){t.oPopover.setContentHeight(P+"px");}else{t.oPopover.setContentHeight("100%");}t.oPopover.setVerticalScrolling(true);t.oPopover.addContent(p);t.oPopover.setTitle(sap.ushell.resources.i18n.getText("addTileToGroups_popoverTitle"));t.oPopover.setCustomHeader();n.enabled=false;n.setValue('');},tooltip:sap.ushell.resources.i18n.getText("newGroupGoBackBtn_tooltip")});b.addStyleClass("sapUshellCatalogNewGroupBackButton");N=new sap.m.Label({text:sap.ushell.resources.i18n.getText("newGroup_popoverTitle")});h=new sap.m.Bar({contentLeft:[b],contentMiddle:[N]});o=new sap.m.StandardListItem({id:"newGroupItem",title:sap.ushell.resources.i18n.getText("newGroup_listItemText"),type:"Navigation",press:function(){t._navigateToCreateNewGroupPanel(t.oPopover,n,h);}});a=new sap.m.List({});if(m.getProperty("/enableHelp")){o.addStyleClass('help-id-newGroupItem');}a.addItem(o);a.addEventDelegate({onsapdown:function(E){try{E.preventDefault();E._bIsStopHandlers=true;if(t.getView().getModel().getProperty("/groups/length")){var j=jQuery("#popoverContainer .sapMListModeMultiSelect li").first();j.focus();}}catch(e){}},onsaptabnext:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#okButton");j.focus();}catch(e){}}});return{newGroupItemList:a,newGroupNameInput:n};},_createOkButton:function(s,p,a,g,P,n,h){var o=new sap.m.Button({id:"okButton",press:function(e){e.preventDefault();e._bIsStopHandlers=true;var u,t=s.getModel().getProperty(s.getPath()).id,G=n.getValue().trim(),b=[],c=this;u=g._handlePopoverGroupsSelection(p,t,s,a,b,g);if(n.enabled){u=g._handleNewGroupCreationPanel(g,s,G,b,u);}jQuery.when.apply(jQuery,b).then(function(){g._handlePopoverGroupsActionPromises(g,c,s,a,u,arguments);});P.close();}.bind(p),text:sap.ushell.resources.i18n.getText("okBtn")});o.addEventDelegate({onsaptabprevious:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#newGroupItem");if(!j.length){j=jQuery("#newGroupNameInput input");}j.focus();}catch(e){}}});return o;},_createCancelButton:function(p){return new sap.m.Button({id:"cancelButton",press:function(e){e.preventDefault();e._bIsStopHandlers=true;p.close();},text:sap.ushell.resources.i18n.getText("cancelBtn")});},_handlePopoverGroupsSelection:function(p,t,s,a,b,g){var l=sap.ushell.Container.getService("LaunchPage"),c={},G,d,r,i,u={selectedGroupsIDsArray:[],numberOfAddedGroups:0,numberOfRemovedGroups:0,firstAddedGroupTitle:"",firstRemovedGroupTitle:""};for(i=0;i<a.userGroupList.length;i=i+1){d=p.oData[i];r=l.getGroupId(d.object);c[r]=d.title;if(d.selected){u.selectedGroupsIDsArray.push(r);G=new sap.ui.model.Context(s.getModel(),"/groups/"+i);if(!p.oData[i].initiallySelected){b.push(g._addTile(s,G));p.oData[i].initiallySelected=true;u.numberOfAddedGroups=u.numberOfAddedGroups+1;if(u.numberOfAddedGroups==1){u.firstAddedGroupTitle=d.title;}}}else if((!d.selected)&&(p.oData[i].initiallySelected)){b.push(g._removeTile(t,i));p.oData[i].initiallySelected=false;u.numberOfRemovedGroups=u.numberOfRemovedGroups+1;if(u.numberOfRemovedGroups==1){u.firstRemovedGroupTitle=d.title;}}}return u;},_handlePopoverGroupsActionPromises:function(g,p,s,a,u,P){if(!(u.numberOfAddedGroups==0&&u.numberOfRemovedGroups==0)){var l=sap.ushell.Container.getService("LaunchPage"),i=false,b=false,e=[],c,d;for(c=0;c<P.length&&(!i||!b);c++){if(P[c].action=="addTileToNewGroup"&&P[c].status==1){var t=p.oData[p.oData.length-1],r=l.getGroupId(t.object);u.selectedGroupsIDsArray.push(r);b=true;}if(!P[c].status){i=true;e.push(P[c]);}}if(i){var E=g.prepareErrorMessage(e,a.tileTitle),f=sap.ushell.components.flp.launchpad.DashboardManager();f.resetGroupsOnFailure(E.messageId,E.parameters);}else{s.getModel().setProperty("/catalogTiles/"+a.tileIndex+"/associatedGroups",u.selectedGroupsIDsArray);d=g.prepareDetailedMessage(a.tileTitle,u.numberOfAddedGroups,u.numberOfRemovedGroups,u.firstAddedGroupTitle,u.firstRemovedGroupTitle);sap.m.MessageToast.show(d,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});}}},_groupContextOperationSucceeded:function(s,c,g,t){var l=sap.ushell.Container.getService("LaunchPage"),G=l.getGroupId(g.object),a=c.tileData.associatedGroups,d,i;if(t){a.push(G);s.getModel().setProperty("/catalogTiles/"+c.tileIndex+"/associatedGroups",a);d=this.prepareDetailedMessage(c.tileData.title,1,0,g.title,"");}else{for(i in a){if(a[i]==G){a.splice(i,1);break;}}s.getModel().setProperty("/catalogTiles/"+c.tileIndex+"/associatedGroups",a);d=this.prepareDetailedMessage(c.tileData.title,0,1,"",g.title);}sap.m.MessageToast.show(d,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_groupContextOperationFailed:function(c,g,t){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),e;if(t){e=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[c.tileData.title,g.title]});}else{e=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[c.tileData.title,g.title]});}d.resetGroupsOnFailure(e.messageId,e.parameters);},_handleNewGroupCreationPanel:function(g,s,G,p,u){var n,e=sap.ushell.resources.i18n.getText("new_group_name");if(G.length>0){n=G;}else{n=e;}p.push(g._createGroupAndSaveTile(s,n));u.numberOfAddedGroups++;u.firstAddedGroupTitle=n;return u;},_navigateToCreateNewGroupPanel:function(p,n,h){p.removeAllContent();p.addContent(n.addStyleClass("sapUshellCatalogNewGroupInput"));p.setCustomHeader(h);p.setContentHeight("");n.setValueState(sap.ui.core.ValueState.None);n.setPlaceholder(sap.ushell.resources.i18n.getText("new_group_name"));n.enabled=true;setTimeout(function(){n.focus();},0);},prepareErrorMessage:function(e,t){var g,a,f,F,n=0,N=0,c=false,m;for(var i in e){g=e[i].group;a=e[i].action;if(a=='add'){n++;if(n==1){f=g.title;}}else if(a=='remove'){N++;if(N==1){F=g.title;}}else if(a=='addTileToNewGroup'){n++;if(n==1){f=g.title;}}else{c=true;}}if(c){if(e.length==1){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_create_new_group"});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}else if(e.length==1){if(n){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[t,f]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[t,F]});}}else{if(N==0){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_several_groups",parameters:[t]});}else if(n==0){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_several_groups",parameters:[t]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}return m;},prepareDetailedMessage:function(t,n,a,f,b){var m;if(n==0){if(a==1){m=sap.ushell.resources.i18n.getText("tileRemovedFromSingleGroup",[t,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileRemovedFromSeveralGroups",[t,a]);}}else if(n==1){if(a==0){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroup",[t,f]);}else if(a==1){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroupAndRemovedFromSingleGroup",[t,f,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroupAndRemovedFromSeveralGroups",[t,f,a]);}}else if(n>1){if(a==0){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroups",[t,n]);}else if(a==1){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSingleGroup",[t,n,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSeveralGroups",[t,n,a]);}}return m;},createPopoverData:function(e){var s=e.getSource(),S=s.getBindingContext(),a=sap.ushell.Container.getService("LaunchPage"),i,m,p,t,r,u=S.getModel().getProperty("/groups"),c=this.getCatalogTileDataFromModel(S),b=c.tileData.associatedGroups,d=c.tileIndex;for(i=0;i<u.length;i=i+1){r=a.getGroupId(u[i].object);u[i].selected=!($.inArray(r,b)==-1);u[i].initiallySelected=u[i].selected;}p=S.getPath(0);m=S.getModel();t=m.getProperty(p).title;return{userGroupList:u,catalogTile:c,tileTitle:t,tileIndex:d};},getCatalogTileDataFromModel:function(s){var t=this._getCatalogTileIndexInModel(s),m=s.getModel(),T=m.getProperty("/catalogTiles/"+t);return{tileData:T,tileIndex:t,isBeingProcessed:T.isBeingProcessed?true:false};},onAddTile:function(e){var s=e.getParameter("control").getBindingContext();if(!s.getProperty("active")){this._addTile(s,e.getSource().getBindingContext());}},onNavButtonPress:function(e){this.getView().parentComponent.getRouter().navTo('home');},_updateModelWithGroupContext:function(p){var l=sap.ushell.Container.getService("LaunchPage"),m=this.getView().getModel(),g,G={path:p,id:"",title:""};if(p&&p!==""){var t=function(){var M=m.getProperty("/groups");if(M.length){g=m.getProperty(p);G.id=l.getGroupId(g.object);G.title=g.title||l.getGroupTitle(g.object);return;}setTimeout(t,100);};t();}m.setProperty("/groupContext",G);},_addTile:function(t,g){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),a=jQuery.Deferred(),p=d.createTile({catalogTileContext:t,groupContext:g});p.done(function(b){a.resolve(b);});return a;},_removeTile:function(t,i){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),a=jQuery.Deferred(),p=d.deleteCatalogTileFromGroup({tileId:t,groupIndex:i});p.done(function(b){a.resolve(b);});return a;},_createGroupAndSaveTile:function(t,n){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),a=jQuery.Deferred(),p=d.createGroupAndSaveTile({catalogTileContext:t,newGroupName:n});p.done(function(b){a.resolve(b);});return a;}});}());},"sap/ushell/components/flp/launchpad/catalog/Catalog.view.js":function(){(function(){"use strict";jQuery.sap.require("sap.ui.core.IconPool");jQuery.sap.require("sap.ushell.ui.launchpad.Tile");jQuery.sap.require("sap.ushell.ui.launchpad.TileContainer");jQuery.sap.require("sap.ushell.ui.launchpad.Panel");sap.ui.jsview("sap.ushell.components.flp.launchpad.catalog.Catalog",{oController:null,createContent:function(c){this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);var m=this.parentComponent.getModel();this.setModel(m);this.oController=c;this.addEventDelegate({onAfterShow:function(){var e=sap.ui.getCore().byId("homeBtn");if(e){sap.ushell.renderers.fiori2.RendererExtensions.addHeaderItem(e,"home");}},onBeforeShow:function(){m.setProperty("/currentViewName","catalog");var i=sap.ui.Device.system.phone;sap.ushell.renderers.fiori2.RendererExtensions.setHeaderHiding(i);sap.ushell.renderers.fiori2.RendererExtensions.setLeftPaneVisibility("home",false);},onAfterHide:function(){var e=sap.ui.getCore().byId("homeBtn");if(e){sap.ushell.renderers.fiori2.RendererExtensions.removeHeaderItem(e,"home");}}});function a(L){return((L!==null)&&(L==="1x2"||L==="2x2"))||false;}function b(s){return((s!==null)&&(s==="2x2"||s==="2x1"))||false;}function t(v){return parseInt(v,10)||0;}function g(G,s,e){var i;if(s){var n=$.inArray(e,G);i=n!==-1?"accept":"add";}else{i=(G&&G.length>0)?"accept":"add";}return sap.ui.core.IconPool.getIconURI(i);}function d(A,s,G,e,i,n){var p;if(e){var r=sap.ushell.resources.i18n,q=$.inArray(i,G);p=r.getText(q!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup",n);}else{p=G&&G.length?s:A;}return p;}var B=new sap.m.Button({icon:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:function(A,e,G,s){return g(A,G,s);}},tooltip:{parts:["i18n>addTileToGroup","i18n>addAssociatedTileToGroup","associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(A,s,G,e,i,n,p){return d(A,s,G,i,n,p);}},press:[c.onTileFooterClick,c]}),T=new sap.ushell.ui.launchpad.Tile({afterRendering:[c.onTileAfterRendering,c],tileViews:{path:"content",factory:function(i,e){return e.getObject();}},footItems:[B],"long":{path:"size",formatter:a},"tall":{path:"size",formatter:b},index:{path:"id",formatter:t},tileCatalogId:"{id}",press:[c.catalogTilePress,c]}),f=new sap.ushell.ui.launchpad.TileContainer("catalogTiles",{showHeader:false,showPlaceholder:false,showGroupHeader:"{/showCatalogHeaders}",noDataText:"{/catalogsNoDataText}",groupHeaderLevel:sap.m.HeaderLevel.H3,showNoData:true,tiles:{path:"/catalogTiles",template:T,sorter:new sap.ui.model.Sorter("catalogIndex",false,function(e){return(e&&e.getProperty("catalog"))||"";})},afterRendering:function(e){var m=this.getModel(),n,i;if(this.getTiles().length||m.getProperty('/catalogTiles/length')){setTimeout(function(){sap.ui.getCore().byId("catalogSearch").setEnabled(true);});m.setProperty("/catalogsNoDataText",sap.ushell.resources.i18n.getText('noFilteredItems'));sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");if(!sap.ui.Device.os.ios){sap.ui.getCore().getEventBus().publish("launchpad","contentRefresh");}}jQuery.sap.byId("catalogTiles").removeAttr("tabindex",0);jQuery.sap.byId("catalogTilesPage-intHeader-BarPH").removeAttr("tabindex",0);n=jQuery(".sapUshellTile button");for(i=0;i<n.length;i++){n[i].setAttribute("tabindex",-1);}}});f.addEventDelegate({onsapskipback:function(E){try{E.preventDefault();var n=jQuery("#catalogSelect");n.focus();}catch(e){}}});B.constructor.prototype.setIcon=function(v){this.setProperty("icon",v,true);if(v&&this._image&&this._image.setSrc){this._image.setSrc(v);}return this;};var F=new sap.ui.model.Filter("numIntentSupportedTiles",sap.ui.model.FilterOperator.NE,0),C=new sap.m.Select("catalogSelect",{visible:"{/catalogSelection}",name:"Browse",tooltip:"{i18n>catalogSelect_tooltip}",width:"17rem",items:{path:"/catalogs",template:new sap.ui.core.ListItem({text:"{title}"}),filters:[F]},change:[c.onCategoryFilter,c]}),o=C.onAfterRendering;C.addEventDelegate({onsapskipforward:function(E){try{E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.setFocusOnCatalogTile();var i=jQuery('#catalogTiles .sapUshellTile:visible:first');i.focus();}catch(e){}},onsaptabprevious:function(E){try{E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var n=jQuery("#catalogTilesPage header button")[0];n.focus();}catch(e){}},onsapskipback:function(E){try{E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var n=jQuery("#catalogTilesPage header button")[0];n.focus();}catch(e){}}});if(m.getProperty("/enableHelp")){C.addStyleClass('help-id-catalogCategorySelect');}C.onAfterRendering=function(){if(o){o.apply(this,arguments);}jQuery.sap.byId("catalogSelect").attr("tabindex",0);};var h=C._onAfterRenderingPopover;C._onAfterRenderingPopover=function(){if(this._oPopover){this._oPopover.setFollowOf(false);}if(h){h.apply(this,arguments);}};var j=new sap.m.SearchField("catalogSearch",{visible:"{/searchFiltering}",tooltip:"{i18n>catalogSearch_tooltip}",width:"17rem",enabled:false,value:{path:"/catalogSearchFilter"},placeholder:"{i18n>search_catalog}",liveChange:[c.onLiveFilter,c]}).addStyleClass("sapUshellCatalogSearch"),k=j.onAfterRendering;if(m.getProperty("/enableHelp")){j.addStyleClass('help-id-catalogSearch');}j.onAfterRendering=function(){k.apply(this,arguments);jQuery.sap.byId("catalogSearch").find("input").attr("tabindex",0);this.data("sap-ui-fastnavgroup","true",true);};j.addEventDelegate({onsapskipback:function(E){try{E.preventDefault();var n=jQuery("#catalogTilesPage header button")[0];n.focus();}catch(e){}},onsapskipforward:function(E){try{E.preventDefault();var i=jQuery('#catalogTiles .sapUshellTile:visible:first');sap.ushell.components.flp.ComponentKeysHandler.setTileFocus(i);}catch(e){}},onsaptabnext:function(E){try{if(!l.getVisible()){E.preventDefault();var v=jQuery(".sapUshellTile:visible"),i=jQuery(v[0]);sap.ushell.components.flp.ComponentKeysHandler.setFocusOnCatalogTile();i.focus();}}catch(e){}}});var l=new sap.m.MultiComboBox("catalogTagFilter",{visible:"{/tagFiltering}",selectedKeys:{path:"/selectedTags",mode:sap.ui.model.BindingMode.TwoWay},tooltip:"{i18n>catalogTilesTagfilter_tooltip}",width:"17rem",placeholder:"{i18n>catalogTilesTagfilter_HintText}",items:{path:"/tagList",sorter:new sap.ui.model.Sorter("tag",false,false),template:new sap.ui.core.ListItem({text:"{tag}",key:"{tag}"})},selectionChange:[c.onTagsFilter,c]});if(m.getProperty("/enableHelp")){l.addStyleClass('help-id-catalogTagFilter');}l.addEventDelegate({onsaptabnext:function(E){try{E.preventDefault();var v=jQuery(".sapUshellTile:visible"),i=jQuery(v[0]);sap.ushell.components.flp.ComponentKeysHandler.setFocusOnCatalogTile();i.focus();}catch(e){}},onsapskipback:function(E){try{E.preventDefault();jQuery("#catalogSelect").focus();}catch(e){}},onsapskipforward:function(E){try{E.preventDefault();var i=jQuery('#catalogTiles .sapUshellTile:visible:first');sap.ushell.components.flp.ComponentKeysHandler.setTileFocus(i);}catch(e){}}});var D=new sap.m.Page("catalogTilesPage",{showHeader:true,showFooter:false,showNavButton:true,title:{parts:["/groupContext/title"],formatter:function(e){var r=sap.ushell.resources.i18n;return!e?r.getText("tile_catalog"):r.getText("catalog_group_context_title",e);}},content:[new sap.ushell.ui.launchpad.Panel({translucent:true,headerText:"",headerLevel:sap.m.HeaderLevel.H2,headerBar:new sap.m.Bar("catalogHeader",{translucent:true,tooltip:"{i18n>tile_catalog_header_tooltip}",contentLeft:[C,j,l]}).addStyleClass("sapUshellCatalogHeaderBar"),content:[f]}).addStyleClass("sapUshellCatalogPage")],navButtonPress:[c.onNavButtonPress,c]});D.addDelegate({onAfterRendering:function(){jQuery("#catalogTilesPage header button").attr("tabindex",-1);}});return D;},getControllerName:function(){return"sap.ushell.components.flp.launchpad.catalog.Catalog";}});}());},"sap/ushell/components/flp/launchpad/dashboard/DashboardContent.controller.js":function(){(function(){"use strict";jQuery.sap.require("sap.ushell.ui.launchpad.TileContainer");sap.ui.controller("sap.ushell.components.flp.launchpad.dashboard.DashboardContent",{onInit:function(){var e=sap.ui.getCore().getEventBus();this.handleDashboardScroll=this._handleDashboardScroll.bind(this);e.subscribe('launchpad','actionModeInactive',this._handleExitActionMode,this);e.subscribe('launchpad','actionModeActive',this._enableGroupsUIActions,this.oView);e.subscribe("launchpad","appClosed",this._resizeHandler,this);e.subscribe("launchpad","appOpened",this._appOpenedHandler,this);this.sViewId="#"+this.oView.getId();if(sap.ui.Device.browser.mobile){e.subscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);}this.isDesktop=(sap.ui.Device.system.desktop&&(navigator.userAgent.toLowerCase().indexOf('tablet')<0));},onExit:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);e.unsubscribe("launchpad","appClosed",this._resizeHandler,this);e.unsubscribe("launchpad","appOpened",this._appOpenedHandler,this);},onAfterRendering:function(){var e=sap.ui.getCore().getEventBus(),v=this.getView(),d=v.getDomRef(),s=d.getElementsByTagName('section'),t;s[0].removeEventListener('scroll',this.handleDashboardScroll);s[0].addEventListener('scroll',this.handleDashboardScroll);e.unsubscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.subscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.unsubscribe("launchpad","scrollToFirstVisibleGroup",this._scrollToFirstVisibleGroup,this);e.subscribe("launchpad","scrollToFirstVisibleGroup",this._scrollToFirstVisibleGroup,this);sap.ui.Device.orientation.attachHandler(function(){var j=jQuery('#dashboardGroups').find('.sapUshellTileContainer:visible');if(j.length){var m=this.getView().getModel(),a=m.getProperty('/topGroupInViewPortIndex'),g,i;if(j.get(a)){g=sap.ui.getCore().byId(j.get(a).id);i=m.getProperty('/editTitle');this._publishAsync("launchpad","scrollToGroup",{group:g,isInEditTitle:i});}}},this);jQuery(window).bind("resize",function(){clearTimeout(t);t=setTimeout(this._resizeHandler.bind(this),300);}.bind(this));if(this.getView().getModel().getProperty("/personalization")&&!sap.ushell.components.flp.ActionMode){jQuery.sap.require("sap.ushell.components.flp.ActionMode");sap.ushell.components.flp.ActionMode.init(this.getView().getModel());}this._updateTopGroupInModel();},dashboardTilePress:function(){sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileClick");},_updateTopGroupInModel:function(){var m=this.getView().getModel(),t=this._getIndexOfTopGroupInViewPort();m.setProperty('/topGroupInViewPortIndex',t);},_getIndexOfTopGroupInViewPort:function(){var v=this.getView(),d=v.getDomRef(),s=d.getElementsByTagName('section'),j=$(s).find('.sapUshellTileContainer'),o=j.not('.sapUshellHidden').first().offset(),f=(o&&o.top)||0,t=[],n=s[0].scrollTop,a,b=0;if(!j||!o){return b;}j.each(function(){if(!jQuery(this).hasClass("sapUshellHidden")){var c=jQuery(this).parent().offset().top;t.push([c,c+jQuery(this).parent().height()+jQuery(this).parent()[0].offsetTop]);}});a=n+f;jQuery.each(t,function(i,c){var e=c[0],g=c[1];if(e<=a&&a<=g){b=i;return;}});return b;},_handleDashboardScroll:function(){this._updateTopGroupInModel();sap.ushell.utils.handleTilesVisibility();sap.ui.getCore().getEventBus().publish("launchpad","dashboardScroll");},_handleClick:function(){if(sap.ui.Device.system.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}},_handleActionModeStartDrag:function(e,u){this.uiActions.disable();var g=jQuery(".sapUshellDashboardGroupsContainerItem-clone"),a=g.find(".sapUshellContainerTitle"),t=a.height(),b=a.width();if(!sap.ui.Device.system.phone){g.find(".sapUshellTileContainerEditMode").offset({top:this.uiEditModeActions.getMove().y-t,left:this.uiEditModeActions.getMove().x-(b/2)});jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerHidden");}else{jQuery(".sapUshellTilesContainer-sortable").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");}jQuery(".sapUshellTileContainerAfterContent").addClass("sapUshellTileContainerHidden");jQuery(u).find(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");this.getModel().setProperty('/isInDrag',true);jQuery(u).attr('startPos',jQuery(u).index());jQuery.sap.log.info('startPos - '+jQuery(u).index());setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},0);var c=jQuery("#dashboardGroups").offset().top,d=jQuery(".sapUshellDashboardGroupsContainerItem-placeholder").offset().top,f=jQuery(".sapUshellDashboardGroupsContainerItem-clone").offset().top,s=d-c-f;jQuery('.sapUshellDashboardView section').animate({scrollTop:s},0);},_handleActionModeUIStart:function(e,u){jQuery(u).find(".sapUshellTileContainerContent").css("outline-color","transparent");jQuery('body').addClass("sapUshellDisableUserSelect");},_handleActionModeDrop:function(e,u){if(sap.ui.Device.system.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}var b=sap.ui.getCore().getEventBus(),q=jQuery(u),f=jQuery(q.children()[0]).attr("id"),g=sap.ui.getCore().byId(f),d=sap.ui.getCore().byId("dashboardGroups"),D={group:g,groupChanged:false,focus:false},n=q.index();q.startPos=window.parseInt(q.attr('startPos'),10);d.removeAggregation('groups',g,true);d.insertAggregation('groups',g,n,true);this.oController._handleActionModeGroupMove(e,{item:q});q.removeAttr('startPos');sap.ui.getCore().getEventBus().publish("launchpad","sortableStop");setTimeout(function(){jQuery(".sapUshellContainerHeaderActions").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerAfterContent").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTilesContainer-sortable").removeClass("sapUshellTileContainerRemoveContent");},0);window.setTimeout(jQuery.proxy(b.publish,b,"launchpad","scrollToGroup",D),1);this.uiActions.enable();},_handleActionModeGroupMove:function(e,u){var f=u.item.startPos,t=u.item.index(),m=this.getView().getModel();if(t!==-1){this._publishAsync("launchpad","moveGroup",{fromIndex:f,toIndex:t});setTimeout(function(){m.setProperty('/isInDrag',false);},100);}},_handleGroupDeletion:function(g){jQuery.sap.require('sap.m.MessageBox');var e=sap.ui.getCore().getEventBus(),G=g.getObject(),i=G.removable,s=G.title,a=G.groupId,r=sap.ushell.resources.i18n,m=sap.ushell.Container.getService("Message"),A=sap.m.MessageBox.Action,c=(i?A.DELETE:r.getText('ResetGroupBtn'));m.confirm(r.getText(i?'delete_group_msg':'reset_group_msg',s),function(o){if(o===c){e.publish("launchpad",i?'deleteGroup':'resetGroup',{groupId:a});}},r.getText(i?'delete_group':'reset_group'),[c,A.CANCEL]);},_enableGroupsUIActions:function(){if(this.uiEditModeActions){this.uiEditModeActions.enable();}},_handleExitActionMode:function(c){this.oView.uiEditModeActions.disable();},_forceBrowserRerenderElement:function(e){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame;if(a){a(function(){var d=e.style.display;e.style.display='none';e.offsetHeight;e.style.display=d;});}else{jQuery.sap.log.info('unsupported browser for animation frame');}},_webkitMobileRenderFix:function(){if(sap.ui.Device.browser.chrome||sap.ui.Device.os.android){this._forceBrowserRerenderElement(document.body);}},_resizeHandler:function(){this._addBottomSpace();sap.ushell.utils.handleTilesVisibility();var n=this.getView().getParent(),c=n&&n.getCurrentPage().getViewName(),i=c==this.getView().getViewName();if(sap.ushell.Layout&&i){sap.ushell.Layout.reRenderGroupsLayout(null,true);}},_appOpenedHandler:function(c,e,d){var p=this.getOwnerComponent(),P=p.getMetadata().getComponentName();if(d.additionalInformation.indexOf(P)===-1){sap.ushell.utils.setTilesNoVisibility();}},_addBottomSpace:function(){sap.ushell.utils.addBottomSpace();},_scrollToFirstVisibleGroup:function(c,e,d){var g,f=0,t=this;if(d.group){g=d.group.getGroupId();}else{g=d.groupId;}if(d.fromTop){f=d.fromTop-50;}jQuery.each(this.oView.oDashboardGroupsBox.getGroups(),function(n,G){if(G.getGroupId()===g){var y;y=-1*(document.getElementById('dashboardGroups').getBoundingClientRect().top)+document.getElementById(G.sId).getBoundingClientRect().top;jQuery('.sapUshellDashboardView section').animate({scrollTop:y-f},0,t.fHandleScrollEnd);if(d.group&&d.focus){jQuery.sap.byId(G.sId).focus();}return false;}});sap.ushell.utils.addBottomSpace();},_scrollToGroup:function(c,e,d){var g,t=this,m=this.getView().getModel();if(d.group){g=d.group.getGroupId();}else{g=d.groupId;}m.setProperty("/scrollingToGroup",true);jQuery.each(this.oView.oDashboardGroupsBox.getGroups(),function(n,G){if(G.getGroupId()===g){var y;setTimeout(function(){y=-1*(document.getElementById('dashboardGroups').getBoundingClientRect().top)+document.getElementById(G.sId).getBoundingClientRect().top;jQuery('.sapUshellDashboardView section').animate({scrollTop:y},500,t.fHandleScrollEnd);if(d.isInEditTitle){G.setEditMode(true);}},300);if(d.group&&d.focus){jQuery.sap.byId(G.sId).focus();}if(d.groupId||d.groupChanged){t._addBottomSpace();}jQuery('#groupList li').removeClass('sapUshellSelected').eq(n).addClass('sapUshellSelected');sap.ushell.utils.handleTilesVisibility();return false;}});},fHandleScrollEnd:function(){var e=sap.ui.getCore().getEventBus();e.publish("grouplist","ScrollAnimationEnd");},_handleDrop:function(e,u){if(sap.ui.Device.system.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}var t=sap.ushell.Layout.getLayoutEngine().layoutEndCallback(),E=sap.ui.getCore().getEventBus(),n,a;if(!t.tileMovedFlag){return;}n=true;a=true;if((t.srcGroup!==t.dstGroup)){n=a=false;}else if(t.tile!==t.dstGroup.getTiles()[t.dstTileIndex]){a=false;}t.srcGroup.removeAggregation('tiles',t.tile,n);t.dstGroup.insertAggregation('tiles',t.tile,t.dstTileIndex,a);E.publish("launchpad","moveTile",{sTileId:t.tile.getUuid(),toGroupId:t.dstGroup.getGroupId(),toIndex:t.dstTileIndex});E.publish("launchpad","sortableStop");},_publishAsync:function(c,e,d){var b=sap.ui.getCore().getEventBus();window.setTimeout(jQuery.proxy(b.publish,b,c,e,d),1);}});}());},"sap/ushell/components/flp/launchpad/dashboard/DashboardContent.view.js":function(){(function(){"use strict";jQuery.sap.require("sap.ushell.ui.launchpad.TileContainer");jQuery.sap.require("sap.ushell.ui.launchpad.Tile");jQuery.sap.require("sap.ushell.override");jQuery.sap.require("sap.ushell.resources");jQuery.sap.require("sap.ushell.Layout");sap.ui.jsview("sap.ushell.components.flp.launchpad.dashboard.DashboardContent",{createContent:function(c){this.bFirstRendering=true;this.bAnimate=false;this.isTouch=!sap.ui.Device.system.desktop;this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);this.addStyleClass("sapUshellDashboardView");this.bTileContainersContentAdded=false;var m=this.parentComponent.getModel(),t=this;this.oModel=m;this.ieHtml5DnD=!!(m.getProperty("/personalization")&&sap.ui.Device.browser.msie&&sap.ui.Device.browser.version>=11&&(sap.ui.Device.system.combi||sap.ui.Device.system.tablet));this.oDashboardGroupsBox=this._getDashboardGroupsBox(c,m);sap.ui.getCore().getEventBus().subscribe("launchpad","enterEditMode",this._addTileContainersContent,this);sap.ui.getCore().byId('navContainerFlp').attachAfterNavigate(this.onAfterNavigate,this);this.addEventDelegate({onAfterShow:function(){var r=sap.ushell.renderers.fiori2.RendererExtensions.getConfiguration().rootIntent,C;if(r==="Shell-home"){C=sap.ui.getCore().byId("configBtn");sap.ushell.renderers.fiori2.RendererExtensions.addHeaderItem(C,"home");}},onBeforeFirstShow:function(){var d=sap.ushell.components.flp.launchpad.getDashboardManager();d.loadPersonalizedGroups();t.onAfterNavigate();},onBeforeShow:function(){},onAfterHide:function(e){var a=sap.ui.getCore().byId("configBtn");if(a){sap.ushell.renderers.fiori2.RendererExtensions.removeHeaderItem(a,"home");}this.oHideGroupsButton=sap.ui.getCore().byId("hideGroupsBtn");if(this.oHideGroupsButton){sap.ushell.Container.getRenderer("fiori2").hideActionButton([this.oHideGroupsButton.getId()],true);sap.ushell.renderers.fiori2.RendererExtensions.removeOptionsActionSheetButton(this.oHideGroupsButton,"home");}this.oActionModeBtn=sap.ui.getCore().byId("ActionModeBtn");if(this.oActionModeBtn){sap.ushell.renderers.fiori2.RendererExtensions.removeOptionsActionSheetButton(this.oActionModeBtn,"home");}var b=sap.ui.getCore().byId("floatingActionBtn");if(b){sap.ushell.renderers.fiori2.RendererExtensions.removeFloatingActionButton(b,"home");b.setVisible(false);}}});var p=new sap.m.Page({showHeader:false,content:[this.oDashboardGroupsBox]});return[p];},onAfterNavigate:function(e){var n=sap.ui.getCore().byId('navContainerFlp'),c=n.getCurrentPage().getViewName(),i=c=="sap.ushell.components.flp.launchpad.dashboard.DashboardContent";if(i){this.oModel.setProperty("/currentViewName","home");sap.ushell.renderers.fiori2.RendererExtensions.setHeaderHiding(false);this.oHideGroupsButton=sap.ui.getCore().byId("hideGroupsBtn");if(!this.oHideGroupsButton){this.oHideGroupsButton=sap.ushell.Container.getRenderer("fiori2").addActionButton("sap.ushell.ui.footerbar.HideGroupsButton",{id:"hideGroupsBtn"},true,true);this.oHideGroupsButton.setModel(this.oModel);if(this.oModel.getProperty("/enableHelp")){this.oHideGroupsButton.addStyleClass('help-id-hideGroupsBtn');}if(!this.oModel.getProperty('/enableHideGroups')){this.oHideGroupsButton.setVisible(false);}}else{sap.ushell.Container.getRenderer("fiori2").showActionButton([this.oHideGroupsButton.getId()],true);}this.oActionModeBtn=sap.ui.getCore().byId("ActionModeBtn");if(this.oActionModeBtn){sap.ushell.renderers.fiori2.RendererExtensions.addOptionsActionSheetButton(this.oActionModeBtn,"home");if(this.oModel.getProperty('/actionModeMenuButtonEnabled')){this.oActionModeBtn.setVisible(true);}}this.oActionModeFloatingBtn=sap.ui.getCore().byId("floatingActionBtn");if(this.oActionModeFloatingBtn){sap.ushell.renderers.fiori2.RendererExtensions.addFloatingActionButton(this.oActionModeFloatingBtn,"home");if(this.oModel.getProperty('/actionModeFloatingButtonEnabled')){this.oActionModeFloatingBtn.setVisible(true);}}}},_addTileContainersContent:function(){if(!this.bTileContainersContentAdded){var g=this.oDashboardGroupsBox.getGroups();g.forEach(function(a,b){this._addTileContainerContent(b);}.bind(this));this.bTileContainersContentAdded=true;}},_addTileContainerContent:function(g){var G=this.oDashboardGroupsBox.getGroups()[g];if(G){var b=G.getBindingContext().getPath()+'/';G.addBeforeContent(this._getBeforeContent(this.oController,b));G.addAfterContent(this._getAfterContent(this.oController,b));G.addHeaderAction(this._getHeaderAction(this.oController,b));}},_getDashboardGroupsBox:function(c,m){var t=this;var T=this._getTileContainerTemplate(c);var E=function(){return m.getProperty('/enableLockedGroupsCompactLayout')&&!m.getProperty('/tileActionModeActive');};var g=function(o){var b;var p;if(o&&(b=o.getDomRef())){p=b.querySelector('.sapUshellPlusTile');if(p){return p;}}return null;};var r=function(l){var p=g(l.currentGroup);var b=g(l.endGroup);var i=(l.tiles[l.tiles.length-2]===l.item)||(l.endGroup.getTiles().length==0);if(i){t._hidePlusTile(b);}else{t._showPlusTile(b);}if(l.currentGroup!=l.endGroup){t._showPlusTile(p);}};var a=function(){sap.ushell.Layout.getLayoutEngine().setExcludedControl(sap.ushell.ui.launchpad.PlusTile);sap.ushell.Layout.getLayoutEngine().setReorderTilesCallback.call(sap.ushell.Layout.layoutEngine,r);};var A=function(){if(!sap.ushell.Layout.isInited){sap.ushell.Layout.init({getGroups:this.getGroups.bind(this),isLockedGroupsCompactLayoutEnabled:E}).done(a);sap.ui.Device.media.attachHandler(function(){if(!this.bIsDestroyed){sap.ushell.Layout.reRenderGroupsLayout(null,true);}},this,sap.ui.Device.media.RANGESETS.SAP_STANDARD);}sap.ushell.Layout.reRenderGroupsLayout(null,true);if(this.getGroups().length){if(this.getModel().getProperty("/personalization")){if(!c.getView().ieHtml5DnD){jQuery.sap.require('sap.ushell.UIActions');t._disableUIActions();t._disableEditModeUIActions();t.uiActions=new sap.ushell.UIActions({containerSelector:'#dashboardGroups',wrapperSelector:"#"+this.getDomRef().parentNode.id,draggableSelector:".sapUshellTile",draggableSelectorExclude:".sapUshellPlusTile",rootSelector:"#shell-container",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",scrollContainerSelector:t.bAnimate?"#cloneArea":undefined,clickCallback:c._handleClick.bind(t),startCallback:t._handleTileUIStart.bind(t),endCallback:t._handleDrop.bind(t),dragCallback:t._handleStartDrag.bind(t),dragAndScrollCallback:t._handleDragMove.bind(t),moveTolerance:t.isTouch?10:3,switchModeDelay:1000,isLayoutEngine:true,isTouch:t.isTouch,debug:false,disabledDraggableSelector:'sapUshellLockedTile',onDragStartUIHandler:t.markDisableGroups.bind(t),onDragEndUIHandler:t.unmarkDisableGroups.bind(t)}).enable();t.uiEditModeActions=new sap.ushell.UIActions({containerSelector:'#dashboardGroups',wrapperSelector:"#"+this.getDomRef().parentNode.id,draggableSelector:".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)",draggableSelectorBlocker:".sapUshellTilesContainer-sortable, .sapUshellTileContainerBeforeContent, .sapUshellTileContainerAfterContent",rootSelector:"#shell-container",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",cloneClass:"sapUshellDashboardGroupsContainerItem-clone",clickCallback:c._handleClick.bind(t),startCallback:c._handleActionModeUIStart.bind(t),endCallback:c._handleActionModeDrop.bind(t),dragCallback:c._handleActionModeStartDrag.bind(t),moveTolerance:t.isTouch?10:0.1,switchModeDelay:1000,isLayoutEngine:false,isTouch:t.isTouch,isVerticalDragOnly:true,debug:false});}else{jQuery.sap.require('sap.ushell.UIActionsWin8');t._disableUIActions();t._disableEditModeUIActions();t.uiActions=sap.ushell.UIActionsWin8.getInstance({containerSelector:'#dashboardGroups',wrapperSelector:"#"+this.getDomRef().parentNode.id,draggableSelector:".sapUshellTile",rootSelector:"#shell-container",placeHolderClass:"sapUshellTile-placeholder",startCallback:t._handleTileUIStart.bind(t),endCallback:t._handleDrop.bind(t),dragCallback:t._handleStartDrag.bind(t),dragAndScrollCallback:t._handleDragMove.bind(t),onDragStartUIHandler:t.markDisableGroups.bind(t),onDragEndUIHandler:t.unmarkDisableGroups.bind(t)}).enable();t.uiEditModeActions=sap.ushell.UIActionsWin8.getInstance({forGroups:true,containerSelector:'#dashboardGroups',wrapperSelector:"#"+this.getDomRef().parentNode.id,draggableSelector:".sapUshellTileContainerHeader",rootSelector:"#shell-container",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",_publishAsync:c._publishAsync}).enable();}}if(this.getModel().getProperty("/tileActionModeActive")){t.uiEditModeActions.enable();}sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");sap.ui.getCore().getEventBus().publish("launchpad","contentRefresh");var l=sap.ui.getCore().byId("loadingDialog");l.closeLoadingScreen();c._addBottomSpace();if(this.getModel().getProperty("/tilesOpacity")){sap.ushell.utils.handleTilesOpacity(this.getModel());}}try{sap.ushell.utils.handleTilesVisibility();}catch(e){}};jQuery.sap.require("sap.ushell.ui.launchpad.DashboardGroupsContainer");var G=new sap.ushell.ui.launchpad.DashboardGroupsContainer("dashboardGroups",{accessibilityLabel:sap.ushell.resources.i18n.getText("DashboardGroups_label"),groups:{path:"/groups",template:T},afterRendering:A});G.addEventDelegate({onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var j=jQuery(".sapUshellGroupLI:first:visible");if(!j.length){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}j.focus();},onsapskipforward:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);},onsaptabnext:function(e){if(!t.getModel().getProperty("/tileActionModeActive")){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}},onsaptabprevious:function(e){sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var j=jQuery(":focus");if(j.hasClass("sapUshellTileContainerHeader")){e.preventDefault();var b=jQuery("#openCatalogActionItem:visible");if(b.length){b.focus();}else{sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}}}});return G;},markDisableGroups:function(){this.getModel().setProperty('/isInDrag',true);},unmarkDisableGroups:function(){if(this.getModel()){this.getModel().setProperty('/isInDrag',false);}},_getBeforeContent:function(c){var a=new sap.m.Button({icon:"sap-icon://add",text:sap.ushell.resources.i18n.getText("add_group_at"),visible:{parts:["/tileActionModeActive"],formatter:function(t){return(!this.getParent().getIsGroupLocked()&&!this.getParent().getDefaultGroup()&&t);}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},type:sap.m.ButtonType.Transparent,press:[function(d){var p=d.getSource().getBindingContext().getPath(),b=p.split("/");var i=window.parseInt(b[b.length-1],10);sap.ui.getCore().getEventBus().publish("launchpad","createGroupAt",{title:sap.ushell.resources.i18n.getText("new_group_name"),location:i});},c]}).addStyleClass("sapUshellAddGroupButton");a.addDelegate({onAfterRendering:function(){jQuery(".sapUshellAddGroupButton").attr("tabindex",-1);}});return a;},_getAfterContent:function(c){var a=new sap.m.Button({icon:"sap-icon://add",text:sap.ushell.resources.i18n.getText("add_group_at"),visible:{parts:["isLastGroup","/tileActionModeActive","/isInDrag"],formatter:function(i,t,b){return(i&&t);}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},type:sap.m.ButtonType.Transparent,press:[function(d){var p=d.getSource().getBindingContext().getPath(),b=p.split("/");var i=window.parseInt(b[b.length-1],10);sap.ui.getCore().getEventBus().publish("launchpad","createGroupAt",{title:sap.ushell.resources.i18n.getText("new_group_name"),location:i+1});},c]}).addStyleClass("sapUshellAddGroupButton");a.addDelegate({onAfterRendering:function(){jQuery(".sapUshellAddGroupButton").attr("tabindex",-1);}});return a;},_getHeaderAction:function(c,b){jQuery.sap.require("sap.ushell.ui.launchpad.GroupHeaderActions");return new sap.ushell.ui.launchpad.GroupHeaderActions({content:this._getHeaderActions(),tileActionModeActive:{parts:['/tileActionModeActive',b+'isDefaultGroup'],formatter:function(i,I){return i&&!I;}},isOverflow:'{/isPhoneWidth}'}).addStyleClass("sapUshellOverlayGroupActionPanel");},_getTileContainerTemplate:function(){var f=new sap.ui.model.Filter("isTileIntentSupported",sap.ui.model.FilterOperator.EQ,true),t=this;var T=new sap.ushell.ui.launchpad.TileContainer({headerText:"{title}",tooltip:"{title}",tileActionModeActive:'{/tileActionModeActive}',ieHtml5DnD:this.ieHtml5DnD,enableHelp:'{/enableHelp}',groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",isGroupLocked:"{isGroupLocked}",showHeader:true,editMode:"{editMode}",titleChange:function(e){sap.ui.getCore().getEventBus().publish("launchpad","changeGroupTitle",{groupId:e.getSource().getGroupId(),newTitle:e.getParameter("newTitle")});},showPlaceholder:{parts:["/tileActionModeActive","tiles/length"],formatter:function(a){return(a||!this.groupHasVisibleTiles())&&!this.getIsGroupLocked();}},visible:{parts:["/tileActionModeActive","isGroupVisible","links/length","tiles/length"],formatter:function(a,i,l){if(!this.groupHasVisibleTiles()&&!l&&(!this.getModel().getProperty("/personalization")||(this.getIsGroupLocked()&&!a)||(this.getDefaultGroup()&&!a))){return false;}return i||a;}},links:{path:"links",templateShareable:true,template:new sap.ushell.ui.launchpad.LinkTileWrapper({uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",target:"{target}",isLocked:"{isLocked}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.ieHtml5DnD,afterRendering:function(e){var c=e.getSource().getBindingContext(),o;if(c){o=c.getObject();sap.ui.getCore().getEventBus().publish("launchpad","tileRendered",{tileId:o.originalTileId,tileDomElementId:e.getSource().getId()});}},tileViews:{path:"content",factory:function(i,c){return c.getObject();}}}),filters:[f]},tiles:{path:"tiles",templateShareable:true,template:new sap.ushell.ui.launchpad.Tile({"long":"{long}","tall":"{tall}",uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",target:"{target}",isLocked:"{isLocked}",tileActionModeActive:"{/tileActionModeActive}",showActionsIcon:"{showActionsIcon}",rgba:"{rgba}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.ieHtml5DnD,afterRendering:function(e){var c=e.getSource().getBindingContext(),o;if(c){o=c.getObject();sap.ui.getCore().getEventBus().publish("launchpad","tileRendered",{tileId:o.originalTileId,tileDomElementId:e.getSource().getId()});}},tileViews:{path:"content",factory:function(i,c){return c.getObject();}},coverDivPress:function(e){if(!e.oSource.getBindingContext().getObject().tileIsBeingMoved){sap.ushell.components.flp.ActionMode._openActionsMenu(e);}},showActions:function(e){sap.ushell.components.flp.ActionMode._openActionsMenu(e);},deletePress:function(e){var o=e.getSource(),a=o.getBindingContext().getObject().object;var d={originalTileId:sap.ushell.Container.getService("LaunchPage").getTileId(a)};sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",d,this);},press:[this.oController.dashboardTilePress,this.oController]}),filters:[f]},add:function(e){t.parentComponent.getRouter().navTo('catalog',{filters:JSON.stringify({targetGroup:encodeURIComponent(e.getSource().getBindingContext().sPath)})});},afterRendering:function(e){if(sap.ushell.Layout.isInited){sap.ushell.Layout.reRenderGroupLayout(e.getSource());}this.bindProperty("showBackground","/tileActionModeActive");this.bindProperty("showDragIndicator",{parts:['/tileActionModeActive','/enableDragIndicator'],formatter:function(I,d){return I&&d&&!this.getIsGroupLocked()&&!this.getDefaultGroup();}});this.bindProperty("showMobileActions",{parts:['/tileActionModeActive'],formatter:function(I){return I&&!this.getDefaultGroup();}});this.bindProperty("showIcon",{parts:['/isInDrag','/tileActionModeActive'],formatter:function(I,b){return(this.getIsGroupLocked()&&(I||b))||(this.getDefaultGroup()&&b);}});this.bindProperty("deluminate",{parts:['/isInDrag'],formatter:function(I){return this.getIsGroupLocked()&&I;}});if(t.bTileContainersContentAdded&&!this.getBeforeContent().length){var g=this.getModel().getProperty("/groups");var i;for(i=0;i<g.length;i++){if(g[i].groupId===this.getGroupId()){break;}}t._addTileContainerContent(i);}if(t.bFirstRendering){t.bFirstRendering=false;if(!t.getModel().getProperty("/tileActionModeActive")){var a=jQuery('.sapUshellDashboardGroupsContainer .sapUshellTile:first');if(a.length){a.focus();}else{jQuery("#ConfigBtn").focus();}}}jQuery(".sapUshellLinksContainer a").attr("tabindex",-1);jQuery(".sapUshellContainerHeaderActions button").attr("tabindex",-1);}});return T;},_getHeaderActions:function(){return new sap.m.Button({text:{path:'removable',formatter:function(i){if(sap.ui.Device.system.phone){if(i){this.setIcon("sap-icon://delete");}else{this.setIcon("sap-icon://refresh");}}return sap.ushell.resources.i18n.getText(i?'DeleteGroupBtn':'ResetGroupBtn');}},type:sap.m.ButtonType.Transparent,visible:{parts:['/tileActionModeActive','isDefaultGroup'],formatter:function(i,I){return i&&!I;}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},press:function(e){var s=e.getSource(),g=s.getBindingContext();this.oController._handleGroupDeletion(g);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton");},_handleTileUIStart:function(e,u){if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))){this.titleElement=u.querySelector("[title]");this.titleElement.setAttribute("data-title",this.titleElement.getAttribute("title"));this.titleElement.removeAttribute("title");}if(sap.ui.Device.system.desktop){jQuery('body').addClass("sapUshellDisableUserSelect");}},_handleStartDrag:function(a,t){if(window.getSelection){var s=window.getSelection();try{s.removeAllRanges();}catch(e){}}sap.ushell.Layout.getLayoutEngine().layoutStartCallback(t);jQuery(t).find("a").removeAttr('href');this.placeHolderElement=jQuery(".sapUshellTile-placeholder");sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");if(this.bAnimate){this._startDragNDropAnimate(a,t);}},_handleDrop:function(e,t){jQuery('#dashboardGroups .sapUshellHidePlusTile').removeClass('sapUshellHidePlusTile');if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}this.oController._handleDrop.call(this.oController,e,t);if(sap.ui.Device.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}},_handleDragMove:function(c){if(!c.isScrolling){sap.ushell.Layout.getLayoutEngine().moveDraggable(c.moveX,c.moveY);}if(!c.isScrolling&&this.bAnimate){this._changeDragNDropAnimate(c.evt,c.clone);}},_hidePlusTile:function(p){if(p){p.className+=" sapUshellHidePlusTile";}},_showPlusTile:function(p){if(p){p.className=p.className.split(' '+'sapUshellHidePlusTile').join('');}},_getTileTopOffset:function(t,a,d){var T=0+d;T+=t.closest(".sapUshellDashboardGroupsContainerItem").position().top;T+=a.top;return T;},_startDragNDropAnimate:function(e,u){this.dragNDropData={};this.dragNDropData.jqCloneArea=jQuery("<div id='cloneArea' class='sapUshellCloneArea sapUshellDashboardGroupsContainerItem'></div>");var j=jQuery.sap.byId(this.oDashboardGroupsBox.getId());var t=j.find('.sapUshellTileContainer:visible:first');this.dragNDropData.jqDashboard=jQuery(".sapUshellDashboardView");var d=this.dragNDropData.jqDashboard.scrollTop();this.dragNDropData.containerLeftMargin=parseInt(t.css("margin-left"),10);var c=parseFloat(jQuery("#dashboardPage-scroll").offset().left);var a=j.offset().left;this.dragNDropData.jqCloneArea.css("left",a-c);this.dragNDropData.jqDraggableElements=jQuery(".sapUshellTile[role='link'],.sapUshellPlusTile",j);this.dragNDropData.jqGroupTitles=jQuery(".sapUshellContainerTitle:visible",j);var b,f,T,C,g,i;for(i=0;i<this.dragNDropData.jqDraggableElements.length;i++){b=this.dragNDropData.jqDraggableElements.eq(i);f=b[0];C=b.clone(true);f.tilePosition=b.position();f.tileOffset=b.offset();C.attr("id",C.attr("id")+'-clone');C.css("font-size",b.css("font-size"));C.addClass("sapUshellClonedTile");b.data("clone",C);T=parseInt(f.tilePosition.left,10)+this.dragNDropData.containerLeftMargin+"px";g=this._getTileTopOffset(b,f.tilePosition,d);C.css("left",T);C.css("top",g+"px");this.dragNDropData.jqCloneArea.append(C);b.css("visibility","hidden");}var h,k,G,o,l;for(i=0;i<this.dragNDropData.jqGroupTitles.length;i++){h=this.dragNDropData.jqGroupTitles.eq(i);k=h[0];o=h.clone(true);k.titlePosition=h.position();k.titleOffset=h.offset();o.attr("id",o.attr("id")+'-clone');o.css("font-size",h.css("font-size"));o.addClass("sapUshellClonedTile");h.data("clone",o);G=parseInt(k.titlePosition.left,10)+this.dragNDropData.containerLeftMargin+"px";l=this._getTileTopOffset(h,k.titlePosition,d);o.css("left",G);o.css("top",l+"px");this.dragNDropData.jqCloneArea.append(o);h.css("visibility","hidden");}this.dragNDropData.jqDashboard.append(this.dragNDropData.jqCloneArea);},_changeDragNDropAnimate:function(e,u){var d=this.dragNDropData.jqDashboard.scrollTop();var j,t,c,a,b,T,i,C;for(i=0;i<this.dragNDropData.jqDraggableElements.length;i++){j=this.dragNDropData.jqDraggableElements.eq(i);t=j[0];c=j.position();a=j.offset();if((a.left===t.tileOffset.left)&&(a.top===t.tileOffset.top)){continue;}t.tilePosition=c;t.tileOffset=a;C=j.data("clone");if(!C){continue;}b=t.tilePosition.left+this.dragNDropData.containerLeftMargin;T=this._getTileTopOffset(j,t.tilePosition,d);C.stop(true,false).animate({left:b,top:T},{duration:250},{easing:"swing"});}},_stopDragNDropAnimation:function(e,u){if(this.bAnimate){this.dragNDropData.jqDraggableElements.removeData("clone");this.dragNDropData.jqDraggableElements.css("visibility","visible");this.dragNDropData.jqGroupTitles.css("visibility","visible");this.dragNDropData.jqCloneArea.empty();this.dragNDropData.jqCloneArea.remove();}},_disableUIActions:function(){if(this.uiActions){this.uiActions.disable();this.uiActions=null;}},_disableEditModeUIActions:function(){if(this.uiEditModeActions){this.uiEditModeActions.disable();this.uiEditModeActions=null;}},getControllerName:function(){return"sap.ushell.components.flp.launchpad.dashboard.DashboardContent";},exit:function(){sap.ui.core.mvc.View.prototype.exit.apply(this,arguments);if(sap.ui.getCore().byId("hideGroupsBtn")){sap.ui.getCore().byId("hideGroupsBtn").destroy();}if(sap.ui.getCore().byId("ActionModeBtn")){sap.ui.getCore().byId("ActionModeBtn").destroy();}if(sap.ui.getCore().byId("floatingActionBtn")){sap.ui.getCore().byId("floatingActionBtn").destroy();}}});}());},"sap/ushell/components/flp/launchpad/group_list/GroupList.controller.js":function(){(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.group_list.GroupList",{onInit:function(){this.sViewId="#"+this.getView().getId();this.sGroupListId="#"+this.getView().oGroupList.getId();this.handleScroll=this._fHandleScroll.bind(this);},onAfterRendering:function(){this.jqView=jQuery(this.sViewId);this.jgGroupList=jQuery(this.sGroupListId);var e=sap.ui.getCore().getEventBus();e.unsubscribe("grouplist","ScrollAnimationEnd",this._handleScrollAnimationEnd,this);e.subscribe("grouplist","ScrollAnimationEnd",this._handleScrollAnimationEnd,this);e.unsubscribe("grouplist","DashboardRerender",this._addScroll,this);e.subscribe("grouplist","DashboardRerender",this._addScroll,this);e.unsubscribe("launchpad","dashboardScroll",this.handleScroll,this);e.subscribe("launchpad","dashboardScroll",this.handleScroll,this);this._addScroll();},_addScroll:function(){var t=this;setTimeout(function(){this.dashboardElement=document.querySelector(".sapUshellDashboardView section");if(this.dashboardElement){this.dashboardElement.removeEventListener('scroll',t.handleScroll);this.dashboardElement.addEventListener('scroll',t.handleScroll);}}.bind(this),0);},_fHandleScroll:function(){var m=this.getView().getModel(),t=m.getProperty("/topGroupInViewPortIndex");if(!m.getProperty("/scrollingToGroup")){if(!m.getProperty("/groupList-skipScrollToGroup")){var g=jQuery('#groupList li.sapUshellGroupLI');var s=g.removeClass('sapUshellSelected').eq(t);s.addClass('sapUshellSelected');var a=document.getElementById('groupListPage-cont');var b=a.scrollTop;var c=b+a.offsetHeight;var d=s[0]?s[0].offsetTop:undefined;if(d<b){jQuery('#groupListPage section').animate({scrollTop:g[t].offsetTop},0);}else if(d+s[0].offsetHeight>c){jQuery('#groupListPage section').animate({scrollTop:b+g[t].offsetHeight},0);}}sap.ushell.utils.handleTilesVisibility();}},_handleGroupListItemPress:function(e){var s=e.getSource(),f;f=e.getParameter("action")==="sapenter";this._handleScrollToGroup(s,false,f);},_handleScrollToGroup:function(g,a,f){if(!g){return;}var t=this;document.querySelector(".sapUshellDashboardView").removeEventListener('scroll',t.handleScroll);this._publishAsync("launchpad","scrollToGroup",{group:g,groupChanged:a,focus:f});},_handleScrollAnimationEnd:function(){var t=this;document.querySelector(".sapUshellDashboardView").addEventListener('scroll',t.handleScroll);this.getView().getModel().setProperty("/scrollingToGroup",false);},_publishAsync:function(c,e,d){var b=sap.ui.getCore().getEventBus();window.setTimeout($.proxy(b.publish,b,c,e,d),1);}});}());},"sap/ushell/components/flp/launchpad/group_list/GroupList.view.js":function(){(function(){"use strict";jQuery.sap.require("sap.ushell.ui.launchpad.GroupListItem");jQuery.sap.require("sap.ui.core.IconPool");sap.ui.jsview("sap.ushell.components.flp.launchpad.group_list.GroupList",{createContent:function(c){this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);this.oModel=this.parentComponent.getModel();var t=this,o=this._getOpenCatalogItem(c),g=this._getGroupListItemTemplate(c);this.bAnimate=sap.ui.Device.system.desktop;this.isTouch=!sap.ui.Device.system.desktop;this.oGroupList=new sap.m.List("groupListItems",{items:{path:"/groups",template:g}}).addStyleClass("sapUshellGroupItemList");jQuery.extend(this.oGroupList,{onsapskipforward:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.goToTileContainer(e);},onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);},onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}});this.oGroupList.onAfterRendering=function(){this.data("sap-ui-fastnavgroup","false",false);jQuery("#groupListFooter").attr("data-sap-ui-fastnavgroup","false");t.oController.handleScroll();};jQuery.sap.require("sap.ushell.override");this.oGroupList.updateItems=sap.ushell.override.updateAggregatesFactory("items");if(this.getViewData().enablePersonalization===undefined||this.getViewData().enablePersonalization!==false){this.oActionList=new sap.m.List({items:[o]});var a=this.oActionList.onAfterRendering;this.oActionList.onAfterRendering=function(e){a.call(this,e);};var b=new sap.m.Bar({id:"groupListFooter",contentMiddle:[this.oActionList]});b.addStyleClass("sapUshellPersonalizationOn");this.groupListPage=new sap.m.Page({id:"groupListPage",showHeader:false,showFooter:true,content:[this.oGroupList],footer:b});this.groupListPage.addStyleClass("sapUshellPersonalizationOn");}else{this.groupListPage=new sap.m.Page({id:"groupListPage",showHeader:false,showFooter:false,content:[this.oGroupList]});}this.addStyleClass("sapUshellGroupList");return[this.groupListPage];},_getOpenCatalogItem:function(){var t=this,o=function(){t.parentComponent.getRouter().navTo('catalog');},O=new sap.m.ActionListItem("openCatalogActionItem",{text:"{i18n>open_catalog}",tooltip:"{i18n>openCatalog_tooltip}",press:o});O.addEventDelegate({onsaptabnext:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.goToTileContainer();},onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var j=jQuery(".sapUshellGroupLI:first:visible");if(!j.length){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}j.focus();}});if(this.oModel.getProperty("/enableHelp")){O.addStyleClass('help-id-openCatalogActionItem');}return O;},_getGroupListItemTemplate:function(c){var o=function(e){var x=this.getModel()&&this.getModel().getProperty('/enableHelp');if(this.getDefaultGroup()){this.addStyleClass("sapUshellDefaultGroupItem");if(x){this.addStyleClass("help-id-homeGroupListItem");}}else{this.addStyleClass("sapUshellGroupListItem");if(x){this.addStyleClass("help-id-groupListItem");}}jQuery(this.getDomRef()).attr("tabindex","0");};return new sap.ushell.ui.launchpad.GroupListItem({index:"{index}",title:"{title}",tooltip:"{title}",defaultGroup:"{isDefaultGroup}",groupId:"{groupId}",numberOfTiles:"{tiles/length}",afterRendering:o,isGroupVisible:"{isGroupVisible}",press:[function(e){this._handleGroupListItemPress(e);},c],visible:{parts:["/tileActionModeActive","isGroupVisible","/personalization","isGroupLocked","tiles/length","isDefaultGroup"],formatter:function(t,i,p,a,n,b){if(!this.groupHasVisibleTiles()&&(!p||(a&&!t)||(b&&!t))){return false;}return i||t;}}});},getControllerName:function(){return"sap.ushell.components.flp.launchpad.group_list.GroupList";}});}());}}});
