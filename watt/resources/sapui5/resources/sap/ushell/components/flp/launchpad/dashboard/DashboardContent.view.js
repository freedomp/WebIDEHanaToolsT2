// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.require("sap.ushell.ui.launchpad.TileContainer");jQuery.sap.require("sap.ushell.ui.launchpad.Tile");jQuery.sap.require("sap.ushell.override");jQuery.sap.require("sap.ushell.resources");jQuery.sap.require("sap.ushell.Layout");sap.ui.jsview("sap.ushell.components.flp.launchpad.dashboard.DashboardContent",{createContent:function(c){this.bFirstRendering=true;this.bAnimate=false;this.isTouch=!sap.ui.Device.system.desktop;this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);this.addStyleClass("sapUshellDashboardView");this.bTileContainersContentAdded=false;var m=this.parentComponent.getModel(),t=this;this.oModel=m;this.ieHtml5DnD=!!(m.getProperty("/personalization")&&sap.ui.Device.browser.msie&&sap.ui.Device.browser.version>=11&&(sap.ui.Device.system.combi||sap.ui.Device.system.tablet));this.oDashboardGroupsBox=this._getDashboardGroupsBox(c,m);sap.ui.getCore().getEventBus().subscribe("launchpad","enterEditMode",this._addTileContainersContent,this);sap.ui.getCore().byId('navContainerFlp').attachAfterNavigate(this.onAfterNavigate,this);this.addEventDelegate({onAfterShow:function(){var r=sap.ushell.renderers.fiori2.RendererExtensions.getConfiguration().rootIntent,C;if(r==="Shell-home"){C=sap.ui.getCore().byId("configBtn");sap.ushell.renderers.fiori2.RendererExtensions.addHeaderItem(C,"home");}},onBeforeFirstShow:function(){var d=sap.ushell.components.flp.launchpad.getDashboardManager();d.loadPersonalizedGroups();t.onAfterNavigate();},onBeforeShow:function(){},onAfterHide:function(e){var a=sap.ui.getCore().byId("configBtn");if(a){sap.ushell.renderers.fiori2.RendererExtensions.removeHeaderItem(a,"home");}this.oHideGroupsButton=sap.ui.getCore().byId("hideGroupsBtn");if(this.oHideGroupsButton){sap.ushell.Container.getRenderer("fiori2").hideActionButton([this.oHideGroupsButton.getId()],true);sap.ushell.renderers.fiori2.RendererExtensions.removeOptionsActionSheetButton(this.oHideGroupsButton,"home");}this.oActionModeBtn=sap.ui.getCore().byId("ActionModeBtn");if(this.oActionModeBtn){sap.ushell.renderers.fiori2.RendererExtensions.removeOptionsActionSheetButton(this.oActionModeBtn,"home");}var b=sap.ui.getCore().byId("floatingActionBtn");if(b){sap.ushell.renderers.fiori2.RendererExtensions.removeFloatingActionButton(b,"home");b.setVisible(false);}}});var p=new sap.m.Page({showHeader:false,content:[this.oDashboardGroupsBox]});return[p];},onAfterNavigate:function(e){var n=sap.ui.getCore().byId('navContainerFlp'),c=n.getCurrentPage().getViewName(),i=c=="sap.ushell.components.flp.launchpad.dashboard.DashboardContent";if(i){this.oModel.setProperty("/currentViewName","home");sap.ushell.renderers.fiori2.RendererExtensions.setHeaderHiding(false);this.oHideGroupsButton=sap.ui.getCore().byId("hideGroupsBtn");if(!this.oHideGroupsButton){this.oHideGroupsButton=sap.ushell.Container.getRenderer("fiori2").addActionButton("sap.ushell.ui.footerbar.HideGroupsButton",{id:"hideGroupsBtn"},true,true);this.oHideGroupsButton.setModel(this.oModel);if(this.oModel.getProperty("/enableHelp")){this.oHideGroupsButton.addStyleClass('help-id-hideGroupsBtn');}if(!this.oModel.getProperty('/enableHideGroups')){this.oHideGroupsButton.setVisible(false);}}else{sap.ushell.Container.getRenderer("fiori2").showActionButton([this.oHideGroupsButton.getId()],true);}this.oActionModeBtn=sap.ui.getCore().byId("ActionModeBtn");if(this.oActionModeBtn){sap.ushell.renderers.fiori2.RendererExtensions.addOptionsActionSheetButton(this.oActionModeBtn,"home");if(this.oModel.getProperty('/actionModeMenuButtonEnabled')){this.oActionModeBtn.setVisible(true);}}this.oActionModeFloatingBtn=sap.ui.getCore().byId("floatingActionBtn");if(this.oActionModeFloatingBtn){sap.ushell.renderers.fiori2.RendererExtensions.addFloatingActionButton(this.oActionModeFloatingBtn,"home");if(this.oModel.getProperty('/actionModeFloatingButtonEnabled')){this.oActionModeFloatingBtn.setVisible(true);}}}},_addTileContainersContent:function(){if(!this.bTileContainersContentAdded){var g=this.oDashboardGroupsBox.getGroups();g.forEach(function(a,b){this._addTileContainerContent(b);}.bind(this));this.bTileContainersContentAdded=true;}},_addTileContainerContent:function(g){var G=this.oDashboardGroupsBox.getGroups()[g];if(G){var b=G.getBindingContext().getPath()+'/';G.addBeforeContent(this._getBeforeContent(this.oController,b));G.addAfterContent(this._getAfterContent(this.oController,b));G.addHeaderAction(this._getHeaderAction(this.oController,b));}},_getDashboardGroupsBox:function(c,m){var t=this;var T=this._getTileContainerTemplate(c);var E=function(){return m.getProperty('/enableLockedGroupsCompactLayout')&&!m.getProperty('/tileActionModeActive');};var g=function(o){var b;var p;if(o&&(b=o.getDomRef())){p=b.querySelector('.sapUshellPlusTile');if(p){return p;}}return null;};var r=function(l){var p=g(l.currentGroup);var b=g(l.endGroup);var i=(l.tiles[l.tiles.length-2]===l.item)||(l.endGroup.getTiles().length==0);if(i){t._hidePlusTile(b);}else{t._showPlusTile(b);}if(l.currentGroup!=l.endGroup){t._showPlusTile(p);}};var a=function(){sap.ushell.Layout.getLayoutEngine().setExcludedControl(sap.ushell.ui.launchpad.PlusTile);sap.ushell.Layout.getLayoutEngine().setReorderTilesCallback.call(sap.ushell.Layout.layoutEngine,r);};var A=function(){if(!sap.ushell.Layout.isInited){sap.ushell.Layout.init({getGroups:this.getGroups.bind(this),isLockedGroupsCompactLayoutEnabled:E}).done(a);sap.ui.Device.media.attachHandler(function(){if(!this.bIsDestroyed){sap.ushell.Layout.reRenderGroupsLayout(null,true);}},this,sap.ui.Device.media.RANGESETS.SAP_STANDARD);}sap.ushell.Layout.reRenderGroupsLayout(null,true);if(this.getGroups().length){if(this.getModel().getProperty("/personalization")){if(!c.getView().ieHtml5DnD){jQuery.sap.require('sap.ushell.UIActions');t._disableUIActions();t._disableEditModeUIActions();t.uiActions=new sap.ushell.UIActions({containerSelector:'#dashboardGroups',wrapperSelector:"#"+this.getDomRef().parentNode.id,draggableSelector:".sapUshellTile",draggableSelectorExclude:".sapUshellPlusTile",rootSelector:"#shell-container",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",scrollContainerSelector:t.bAnimate?"#cloneArea":undefined,clickCallback:c._handleClick.bind(t),startCallback:t._handleTileUIStart.bind(t),endCallback:t._handleDrop.bind(t),dragCallback:t._handleStartDrag.bind(t),dragAndScrollCallback:t._handleDragMove.bind(t),moveTolerance:t.isTouch?10:3,switchModeDelay:1000,isLayoutEngine:true,isTouch:t.isTouch,debug:false,disabledDraggableSelector:'sapUshellLockedTile',onDragStartUIHandler:t.markDisableGroups.bind(t),onDragEndUIHandler:t.unmarkDisableGroups.bind(t)}).enable();t.uiEditModeActions=new sap.ushell.UIActions({containerSelector:'#dashboardGroups',wrapperSelector:"#"+this.getDomRef().parentNode.id,draggableSelector:".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)",draggableSelectorBlocker:".sapUshellTilesContainer-sortable, .sapUshellTileContainerBeforeContent, .sapUshellTileContainerAfterContent",rootSelector:"#shell-container",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",cloneClass:"sapUshellDashboardGroupsContainerItem-clone",clickCallback:c._handleClick.bind(t),startCallback:c._handleActionModeUIStart.bind(t),endCallback:c._handleActionModeDrop.bind(t),dragCallback:c._handleActionModeStartDrag.bind(t),moveTolerance:t.isTouch?10:0.1,switchModeDelay:1000,isLayoutEngine:false,isTouch:t.isTouch,isVerticalDragOnly:true,debug:false});}else{jQuery.sap.require('sap.ushell.UIActionsWin8');t._disableUIActions();t._disableEditModeUIActions();t.uiActions=sap.ushell.UIActionsWin8.getInstance({containerSelector:'#dashboardGroups',wrapperSelector:"#"+this.getDomRef().parentNode.id,draggableSelector:".sapUshellTile",rootSelector:"#shell-container",placeHolderClass:"sapUshellTile-placeholder",startCallback:t._handleTileUIStart.bind(t),endCallback:t._handleDrop.bind(t),dragCallback:t._handleStartDrag.bind(t),dragAndScrollCallback:t._handleDragMove.bind(t),onDragStartUIHandler:t.markDisableGroups.bind(t),onDragEndUIHandler:t.unmarkDisableGroups.bind(t)}).enable();t.uiEditModeActions=sap.ushell.UIActionsWin8.getInstance({forGroups:true,containerSelector:'#dashboardGroups',wrapperSelector:"#"+this.getDomRef().parentNode.id,draggableSelector:".sapUshellTileContainerHeader",rootSelector:"#shell-container",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",_publishAsync:c._publishAsync}).enable();}}if(this.getModel().getProperty("/tileActionModeActive")){t.uiEditModeActions.enable();}sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");sap.ui.getCore().getEventBus().publish("launchpad","contentRefresh");var l=sap.ui.getCore().byId("loadingDialog");l.closeLoadingScreen();c._addBottomSpace();if(this.getModel().getProperty("/tilesOpacity")){sap.ushell.utils.handleTilesOpacity(this.getModel());}}try{sap.ushell.utils.handleTilesVisibility();}catch(e){}};jQuery.sap.require("sap.ushell.ui.launchpad.DashboardGroupsContainer");var G=new sap.ushell.ui.launchpad.DashboardGroupsContainer("dashboardGroups",{accessibilityLabel:sap.ushell.resources.i18n.getText("DashboardGroups_label"),groups:{path:"/groups",template:T},afterRendering:A});G.addEventDelegate({onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var j=jQuery(".sapUshellGroupLI:first:visible");if(!j.length){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}j.focus();},onsapskipforward:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);},onsaptabnext:function(e){if(!t.getModel().getProperty("/tileActionModeActive")){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}},onsaptabprevious:function(e){sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var j=jQuery(":focus");if(j.hasClass("sapUshellTileContainerHeader")){e.preventDefault();var b=jQuery("#openCatalogActionItem:visible");if(b.length){b.focus();}else{sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}}}});return G;},markDisableGroups:function(){this.getModel().setProperty('/isInDrag',true);},unmarkDisableGroups:function(){if(this.getModel()){this.getModel().setProperty('/isInDrag',false);}},_getBeforeContent:function(c){var a=new sap.m.Button({icon:"sap-icon://add",text:sap.ushell.resources.i18n.getText("add_group_at"),visible:{parts:["/tileActionModeActive"],formatter:function(t){return(!this.getParent().getIsGroupLocked()&&!this.getParent().getDefaultGroup()&&t);}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},type:sap.m.ButtonType.Transparent,press:[function(d){var p=d.getSource().getBindingContext().getPath(),b=p.split("/");var i=window.parseInt(b[b.length-1],10);sap.ui.getCore().getEventBus().publish("launchpad","createGroupAt",{title:sap.ushell.resources.i18n.getText("new_group_name"),location:i});},c]}).addStyleClass("sapUshellAddGroupButton");a.addDelegate({onAfterRendering:function(){jQuery(".sapUshellAddGroupButton").attr("tabindex",-1);}});return a;},_getAfterContent:function(c){var a=new sap.m.Button({icon:"sap-icon://add",text:sap.ushell.resources.i18n.getText("add_group_at"),visible:{parts:["isLastGroup","/tileActionModeActive","/isInDrag"],formatter:function(i,t,b){return(i&&t);}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},type:sap.m.ButtonType.Transparent,press:[function(d){var p=d.getSource().getBindingContext().getPath(),b=p.split("/");var i=window.parseInt(b[b.length-1],10);sap.ui.getCore().getEventBus().publish("launchpad","createGroupAt",{title:sap.ushell.resources.i18n.getText("new_group_name"),location:i+1});},c]}).addStyleClass("sapUshellAddGroupButton");a.addDelegate({onAfterRendering:function(){jQuery(".sapUshellAddGroupButton").attr("tabindex",-1);}});return a;},_getHeaderAction:function(c,b){jQuery.sap.require("sap.ushell.ui.launchpad.GroupHeaderActions");return new sap.ushell.ui.launchpad.GroupHeaderActions({content:this._getHeaderActions(),tileActionModeActive:{parts:['/tileActionModeActive',b+'isDefaultGroup'],formatter:function(i,I){return i&&!I;}},isOverflow:'{/isPhoneWidth}'}).addStyleClass("sapUshellOverlayGroupActionPanel");},_getTileContainerTemplate:function(){var f=new sap.ui.model.Filter("isTileIntentSupported",sap.ui.model.FilterOperator.EQ,true),t=this;var T=new sap.ushell.ui.launchpad.TileContainer({headerText:"{title}",tooltip:"{title}",tileActionModeActive:'{/tileActionModeActive}',ieHtml5DnD:this.ieHtml5DnD,enableHelp:'{/enableHelp}',groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",isGroupLocked:"{isGroupLocked}",showHeader:true,editMode:"{editMode}",titleChange:function(e){sap.ui.getCore().getEventBus().publish("launchpad","changeGroupTitle",{groupId:e.getSource().getGroupId(),newTitle:e.getParameter("newTitle")});},showPlaceholder:{parts:["/tileActionModeActive","tiles/length"],formatter:function(a){return(a||!this.groupHasVisibleTiles())&&!this.getIsGroupLocked();}},visible:{parts:["/tileActionModeActive","isGroupVisible","links/length","tiles/length"],formatter:function(a,i,l){if(!this.groupHasVisibleTiles()&&!l&&(!this.getModel().getProperty("/personalization")||(this.getIsGroupLocked()&&!a)||(this.getDefaultGroup()&&!a))){return false;}return i||a;}},links:{path:"links",templateShareable:true,template:new sap.ushell.ui.launchpad.LinkTileWrapper({uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",target:"{target}",isLocked:"{isLocked}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.ieHtml5DnD,afterRendering:function(e){var c=e.getSource().getBindingContext(),o;if(c){o=c.getObject();sap.ui.getCore().getEventBus().publish("launchpad","tileRendered",{tileId:o.originalTileId,tileDomElementId:e.getSource().getId()});}},tileViews:{path:"content",factory:function(i,c){return c.getObject();}}}),filters:[f]},tiles:{path:"tiles",templateShareable:true,template:new sap.ushell.ui.launchpad.Tile({"long":"{long}","tall":"{tall}",uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",target:"{target}",isLocked:"{isLocked}",tileActionModeActive:"{/tileActionModeActive}",showActionsIcon:"{showActionsIcon}",rgba:"{rgba}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.ieHtml5DnD,afterRendering:function(e){var c=e.getSource().getBindingContext(),o;if(c){o=c.getObject();sap.ui.getCore().getEventBus().publish("launchpad","tileRendered",{tileId:o.originalTileId,tileDomElementId:e.getSource().getId()});}},tileViews:{path:"content",factory:function(i,c){return c.getObject();}},coverDivPress:function(e){if(!e.oSource.getBindingContext().getObject().tileIsBeingMoved){sap.ushell.components.flp.ActionMode._openActionsMenu(e);}},showActions:function(e){sap.ushell.components.flp.ActionMode._openActionsMenu(e);},deletePress:function(e){var o=e.getSource(),a=o.getBindingContext().getObject().object;var d={originalTileId:sap.ushell.Container.getService("LaunchPage").getTileId(a)};sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",d,this);},press:[this.oController.dashboardTilePress,this.oController]}),filters:[f]},add:function(e){t.parentComponent.getRouter().navTo('catalog',{filters:JSON.stringify({targetGroup:encodeURIComponent(e.getSource().getBindingContext().sPath)})});},afterRendering:function(e){if(sap.ushell.Layout.isInited){sap.ushell.Layout.reRenderGroupLayout(e.getSource());}this.bindProperty("showBackground","/tileActionModeActive");this.bindProperty("showDragIndicator",{parts:['/tileActionModeActive','/enableDragIndicator'],formatter:function(I,d){return I&&d&&!this.getIsGroupLocked()&&!this.getDefaultGroup();}});this.bindProperty("showMobileActions",{parts:['/tileActionModeActive'],formatter:function(I){return I&&!this.getDefaultGroup();}});this.bindProperty("showIcon",{parts:['/isInDrag','/tileActionModeActive'],formatter:function(I,b){return(this.getIsGroupLocked()&&(I||b))||(this.getDefaultGroup()&&b);}});this.bindProperty("deluminate",{parts:['/isInDrag'],formatter:function(I){return this.getIsGroupLocked()&&I;}});if(t.bTileContainersContentAdded&&!this.getBeforeContent().length){var g=this.getModel().getProperty("/groups");var i;for(i=0;i<g.length;i++){if(g[i].groupId===this.getGroupId()){break;}}t._addTileContainerContent(i);}if(t.bFirstRendering){t.bFirstRendering=false;if(!t.getModel().getProperty("/tileActionModeActive")){var a=jQuery('.sapUshellDashboardGroupsContainer .sapUshellTile:first');if(a.length){a.focus();}else{jQuery("#ConfigBtn").focus();}}}jQuery(".sapUshellLinksContainer a").attr("tabindex",-1);jQuery(".sapUshellContainerHeaderActions button").attr("tabindex",-1);}});return T;},_getHeaderActions:function(){return new sap.m.Button({text:{path:'removable',formatter:function(i){if(sap.ui.Device.system.phone){if(i){this.setIcon("sap-icon://delete");}else{this.setIcon("sap-icon://refresh");}}return sap.ushell.resources.i18n.getText(i?'DeleteGroupBtn':'ResetGroupBtn');}},type:sap.m.ButtonType.Transparent,visible:{parts:['/tileActionModeActive','isDefaultGroup'],formatter:function(i,I){return i&&!I;}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},press:function(e){var s=e.getSource(),g=s.getBindingContext();this.oController._handleGroupDeletion(g);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton");},_handleTileUIStart:function(e,u){if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))){this.titleElement=u.querySelector("[title]");this.titleElement.setAttribute("data-title",this.titleElement.getAttribute("title"));this.titleElement.removeAttribute("title");}if(sap.ui.Device.system.desktop){jQuery('body').addClass("sapUshellDisableUserSelect");}},_handleStartDrag:function(a,t){if(window.getSelection){var s=window.getSelection();try{s.removeAllRanges();}catch(e){}}sap.ushell.Layout.getLayoutEngine().layoutStartCallback(t);jQuery(t).find("a").removeAttr('href');this.placeHolderElement=jQuery(".sapUshellTile-placeholder");sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");if(this.bAnimate){this._startDragNDropAnimate(a,t);}},_handleDrop:function(e,t){jQuery('#dashboardGroups .sapUshellHidePlusTile').removeClass('sapUshellHidePlusTile');if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}this.oController._handleDrop.call(this.oController,e,t);if(sap.ui.Device.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}},_handleDragMove:function(c){if(!c.isScrolling){sap.ushell.Layout.getLayoutEngine().moveDraggable(c.moveX,c.moveY);}if(!c.isScrolling&&this.bAnimate){this._changeDragNDropAnimate(c.evt,c.clone);}},_hidePlusTile:function(p){if(p){p.className+=" sapUshellHidePlusTile";}},_showPlusTile:function(p){if(p){p.className=p.className.split(' '+'sapUshellHidePlusTile').join('');}},_getTileTopOffset:function(t,a,d){var T=0+d;T+=t.closest(".sapUshellDashboardGroupsContainerItem").position().top;T+=a.top;return T;},_startDragNDropAnimate:function(e,u){this.dragNDropData={};this.dragNDropData.jqCloneArea=jQuery("<div id='cloneArea' class='sapUshellCloneArea sapUshellDashboardGroupsContainerItem'></div>");var j=jQuery.sap.byId(this.oDashboardGroupsBox.getId());var t=j.find('.sapUshellTileContainer:visible:first');this.dragNDropData.jqDashboard=jQuery(".sapUshellDashboardView");var d=this.dragNDropData.jqDashboard.scrollTop();this.dragNDropData.containerLeftMargin=parseInt(t.css("margin-left"),10);var c=parseFloat(jQuery("#dashboardPage-scroll").offset().left);var a=j.offset().left;this.dragNDropData.jqCloneArea.css("left",a-c);this.dragNDropData.jqDraggableElements=jQuery(".sapUshellTile[role='link'],.sapUshellPlusTile",j);this.dragNDropData.jqGroupTitles=jQuery(".sapUshellContainerTitle:visible",j);var b,f,T,C,g,i;for(i=0;i<this.dragNDropData.jqDraggableElements.length;i++){b=this.dragNDropData.jqDraggableElements.eq(i);f=b[0];C=b.clone(true);f.tilePosition=b.position();f.tileOffset=b.offset();C.attr("id",C.attr("id")+'-clone');C.css("font-size",b.css("font-size"));C.addClass("sapUshellClonedTile");b.data("clone",C);T=parseInt(f.tilePosition.left,10)+this.dragNDropData.containerLeftMargin+"px";g=this._getTileTopOffset(b,f.tilePosition,d);C.css("left",T);C.css("top",g+"px");this.dragNDropData.jqCloneArea.append(C);b.css("visibility","hidden");}var h,k,G,o,l;for(i=0;i<this.dragNDropData.jqGroupTitles.length;i++){h=this.dragNDropData.jqGroupTitles.eq(i);k=h[0];o=h.clone(true);k.titlePosition=h.position();k.titleOffset=h.offset();o.attr("id",o.attr("id")+'-clone');o.css("font-size",h.css("font-size"));o.addClass("sapUshellClonedTile");h.data("clone",o);G=parseInt(k.titlePosition.left,10)+this.dragNDropData.containerLeftMargin+"px";l=this._getTileTopOffset(h,k.titlePosition,d);o.css("left",G);o.css("top",l+"px");this.dragNDropData.jqCloneArea.append(o);h.css("visibility","hidden");}this.dragNDropData.jqDashboard.append(this.dragNDropData.jqCloneArea);},_changeDragNDropAnimate:function(e,u){var d=this.dragNDropData.jqDashboard.scrollTop();var j,t,c,a,b,T,i,C;for(i=0;i<this.dragNDropData.jqDraggableElements.length;i++){j=this.dragNDropData.jqDraggableElements.eq(i);t=j[0];c=j.position();a=j.offset();if((a.left===t.tileOffset.left)&&(a.top===t.tileOffset.top)){continue;}t.tilePosition=c;t.tileOffset=a;C=j.data("clone");if(!C){continue;}b=t.tilePosition.left+this.dragNDropData.containerLeftMargin;T=this._getTileTopOffset(j,t.tilePosition,d);C.stop(true,false).animate({left:b,top:T},{duration:250},{easing:"swing"});}},_stopDragNDropAnimation:function(e,u){if(this.bAnimate){this.dragNDropData.jqDraggableElements.removeData("clone");this.dragNDropData.jqDraggableElements.css("visibility","visible");this.dragNDropData.jqGroupTitles.css("visibility","visible");this.dragNDropData.jqCloneArea.empty();this.dragNDropData.jqCloneArea.remove();}},_disableUIActions:function(){if(this.uiActions){this.uiActions.disable();this.uiActions=null;}},_disableEditModeUIActions:function(){if(this.uiEditModeActions){this.uiEditModeActions.disable();this.uiEditModeActions=null;}},getControllerName:function(){return"sap.ushell.components.flp.launchpad.dashboard.DashboardContent";},exit:function(){sap.ui.core.mvc.View.prototype.exit.apply(this,arguments);if(sap.ui.getCore().byId("hideGroupsBtn")){sap.ui.getCore().byId("hideGroupsBtn").destroy();}if(sap.ui.getCore().byId("ActionModeBtn")){sap.ui.getCore().byId("ActionModeBtn").destroy();}if(sap.ui.getCore().byId("floatingActionBtn")){sap.ui.getCore().byId("floatingActionBtn").destroy();}}});}());
