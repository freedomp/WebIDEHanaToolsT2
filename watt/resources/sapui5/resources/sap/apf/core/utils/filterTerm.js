/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2015 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.apf.core.utils.filterTerm');jQuery.sap.require('sap.apf.core.constants');jQuery.sap.require('sap.apf.utils.utils');(function(){'use strict';sap.apf.core.utils.FilterTerm=function(m,p,o,v,h){this.type="filterTerm";var P=p;var O=o;var a=v;if(O.length==2){O=O.toUpperCase();}m.check(O!==undefined,"sap.apf.utils.FilterTerm.constructor operator undefined");m.check(jQuery.inArray(O,sap.apf.core.constants.aSelectOpt)>-1,"sap.apf.core.utils.FilterTerm operator "+O+" not supported");m.check(P!==undefined,"sap.apf.utils.core.FilterTerm sProperty undefined");m.check(a!==undefined,"sap.apf.utils.FilterTerm value undefined");var c=function(b,d){var e;var i;if(b!==P){return true;}if(O===sap.apf.core.constants.FilterOperators.EQ){if(v instanceof Date&&d instanceof Date){return(v.valueOf()===d.valueOf());}return(v===d);}else if(O===sap.apf.core.constants.FilterOperators.LT){if(v instanceof Date&&d instanceof Date){return(v.valueOf()>d.valueOf());}return(v>d);}else if(O===sap.apf.core.constants.FilterOperators.LE){if(v instanceof Date&&d instanceof Date){return(v.valueOf()>=d.valueOf());}return(v>=d);}else if(O===sap.apf.core.constants.FilterOperators.GT){if(v instanceof Date&&d instanceof Date){return(v.valueOf()<d.valueOf());}return(v<d);}else if(O===sap.apf.core.constants.FilterOperators.BT){if(v instanceof Date&&d instanceof Date){return(v.valueOf()<=d.valueOf()&&d.valueOf()<=h.valueOf());}return(v<=d&&d<=h);}else if(O===sap.apf.core.constants.FilterOperators.GE){if(v instanceof Date&&d instanceof Date){return(v.valueOf()<=d.valueOf());}return(v<=d);}else if(O===sap.apf.core.constants.FilterOperators.NE){if(v instanceof Date&&d instanceof Date){return!(v.valueOf()===d.valueOf());}return!(v===d);}else if(O===sap.apf.core.constants.FilterOperators.StartsWith){if(v.length>d.length){return false;}e=d.slice(0,v.length);return(e===v);}else if(O===sap.apf.core.constants.FilterOperators.EndsWith){if(v.length>d.length){return false;}e=d.slice(-v.length);return(e===v);}else if(O===sap.apf.core.constants.FilterOperators.Contains){i=d.indexOf(v);return(i>-1);}};this.isConsistentWithFilter=function(b,v){return c(b,v);};this.toUrlParam=function(b){var s="'";var d=" ";var e="";var f=[];var v,g;if(b&&b.formatValue){v=b.formatValue(P,a);if(h){g=b.formatValue(P,h);}}else{if(typeof a==='number'){v=a;}else{v=s+sap.apf.utils.escapeOdata(a)+s;}if(h){if(typeof a==='number'){g=h;}else{g=s+sap.apf.utils.escapeOdata(h)+s;}}}if(O===sap.apf.core.constants.FilterOperators.StartsWith){e='startswith('+sap.apf.utils.escapeOdata(P)+','+v+')';e=jQuery.sap.encodeURL(e);}else if(O===sap.apf.core.constants.FilterOperators.EndsWith){e='endswith('+sap.apf.utils.escapeOdata(P)+','+v+')';e=jQuery.sap.encodeURL(e);}else if(O===sap.apf.core.constants.FilterOperators.Contains){e='substringof('+v+','+sap.apf.utils.escapeOdata(P)+')';e=jQuery.sap.encodeURL(e);}else if(O===sap.apf.core.constants.FilterOperators.BT){e='(('+jQuery.sap.encodeURL(sap.apf.utils.escapeOdata(P)+d+"ge"+d+v)+')'+jQuery.sap.encodeURL(d+'and'+d)+'('+jQuery.sap.encodeURL(sap.apf.utils.escapeOdata(P)+d+"le"+d+g)+'))';}else{e='('+jQuery.sap.encodeURL(sap.apf.utils.escapeOdata(P)+d+O.toLowerCase()+d+v)+')';}if(b&&b.asFilterArray===true){f.push(e);return f;}return e;};this.getProperty=function(){return P;};this.getOp=function(){return O;};this.getValue=function(){return a;};this.getHighValue=function(){return h;};this.getHash=function(){var s=P+O+a;return sap.apf.utils.hashCode(s);};this.copy=function(){return new sap.apf.core.utils.FilterTerm(m,P,O,a,h);};this.removeTermsByProperty=function(b){var i=0;var l=0;if(b instanceof Array){l=b.length;for(i=0;i<l;i++){if(P===b[i]){return undefined;}}return this.copy();}if(P===b){return undefined;}return this.copy();};this.removeTerms=function(b,d,v){var i=0;var l=0;if(b instanceof Array){l=b.length;for(i=0;i<l;i++){if(P===b[i]&&O===d&&a===v){return undefined;}}return this.copy();}if(P===b&&O===d&&a===v){return undefined;}return this.copy();};this.mapToSapUI5FilterExpression=function(){if(O===sap.apf.core.constants.FilterOperators.BT){return{path:P,operator:O,value1:a,value2:h};}return{path:P,operator:O,value1:a};};this.traverse=function(b){return b.processTerm(this);};};}());
