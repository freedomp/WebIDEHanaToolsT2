jQuery.sap.declare('sap.ui.generic.app.library-all');if(!jQuery.sap.isDeclared('sap.ui.generic.app.library')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
jQuery.sap.declare('sap.ui.generic.app.library');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.library');sap.ui.define("sap/ui/generic/app/library",['jquery.sap.global','sap/ui/core/library'],function(q,l){"use strict";sap.ui.getCore().initLibrary({name:"sap.ui.generic.app",version:"1.32.7",dependencies:["sap.ui.core"],types:["sap.ui.generic.app.navigation.service.NavType","sap.ui.generic.app.navigation.service.ParamHandlingMode","sap.ui.generic.app.navigation.service.SuppressionBehavior"],interfaces:[],controls:[],elements:[],noLibraryCSS:true});sap.ui.generic.app.navigation.service.ParamHandlingMode={SelVarWins:"SelVarWins",URLParamWins:"URLParamWins",InsertInSelOpt:"InsertInSelOpt"};sap.ui.generic.app.navigation.service.NavType={initial:"initial",URLParams:"URLParams",xAppState:"xAppState",iAppState:"iAppState",AppCtx:"AppCtx"};sap.ui.generic.app.navigation.service.SuppressionBehavior={standard:0,ignoreEmptyString:1,raiseErrorOnNull:2,raiseErrorOnUndefined:4};sap.ui.lazyRequire("sap.ui.generic.app.AppComponent","new extend getMetadata");return sap.ui.generic.app;},false);};if(!jQuery.sap.isDeclared('sap.ui.generic.app.navigation.NavigationController')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
jQuery.sap.declare('sap.ui.generic.app.navigation.NavigationController');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.Object');jQuery.sap.require('sap.ui.core.ComponentContainer');jQuery.sap.require('sap.ui.core.routing.HashChanger');jQuery.sap.require('sap.ui.core.routing.History');jQuery.sap.require('sap.ui.model.Filter');jQuery.sap.require('sap.ui.model.FilterOperator');jQuery.sap.require('sap.m.MessageBox');jQuery.sap.require('sap.m.MessagePage');jQuery.sap.require('sap.m.Link');sap.ui.define("sap/ui/generic/app/navigation/NavigationController",['jquery.sap.global','sap/ui/base/Object','sap/ui/core/ComponentContainer','sap/ui/core/routing/HashChanger','sap/ui/core/routing/History','sap/ui/model/Filter','sap/ui/model/FilterOperator','sap/m/MessageBox','sap/m/MessagePage','sap/m/Link'],function(q,B,C,H,a,F,b,M,c,L){"use strict";var N=B.extend("sap.ui.generic.app.navigation.NavigationController",{metadata:{library:"sap.ui.generic.app"},constructor:function(o){if(!o||!o.getRouter()){throw"No component with router passed";}B.apply(this,arguments);this.oRouter=o.getRouter();this.oViews={};this.oComponent=o;this._oNavContainer=this.oComponent._oNavContainer;this._sNavigationTargetId=this._oNavContainer.getId();this.oRouter.attachRouteMatched(this._handleRouteMatched,this);this.oRouter.attachBypassed(this._handleBypassed,this);this.oRouter._oViews._getViewWithGlobalId=function(v){if(!this.oViews[v.viewName]){var r=this.oRouter.getRoute(v.viewName);if(r&&r._oConfig){this.oViews[v.viewName]=this._createComponentInstance(r._oConfig);}else{this.oViews[v.viewName]=sap.ui.view({viewName:v.viewName,type:v.type,height:"100%"});}}return this.oViews[v.viewName];}.bind(this);this._oHashChanger=H.getInstance();this._generateRoutingMetadata();this._initialise();}});N._sChanges="Changes";N.prototype._initialise=function(){var d;d=this.oComponent.getComponentData();if(d){this._oStartupParameters=d.startupParameters;}if(this._sEntitySet&&this._oStartupParameters&&!this._oHashChanger.getHash()){this._processStartupParameters();}else{this._initialiseRouting();}};N.prototype._processStartupParameters=function(){var m;m=this.oComponent.getModel();m.getMetaModel().loaded().then(function(){var e,E,f,d,s,h;f=function(k,p){var i,l,S=false,K,g;if(p&&k){l=k.length;for(i=0;i<l;i++){S=true;K=k[i];g=K.name||K.PropertyPath;if(!p[g]||p[g].length>1){S=false;break;}}}return S;};e=m.getMetaModel().getODataEntitySet(this._sEntitySet);if(e){E=m.getMetaModel().getODataEntityType(e.entityType);}if(E){d=f(E.key.propertyRef,this._oStartupParameters);}if(d){h=m.createKey(this._sEntitySet,this._oStartupParameters);if(h){this._oHashChanger.replaceHash(h);}}else{s=E["com.sap.vocabularies.Common.v1.SemanticKey"];d=f(s,this._oStartupParameters);if(d){this._readObject(s,this._oStartupParameters,m);return;}}this._initialiseRouting();}.bind(this));};N.prototype._initialiseRouting=function(){var h;this._oHistory=new a(this._oHashChanger);if(!this._oHashChanger.getHash()){h="";if(this._oStartupParameters&&this._oStartupParameters.route&&this._oStartupParameters.route.length===1){h=this._oStartupParameters.route[0];this._oHashChanger.replaceHash(h);}}this.oRouter.initialize();};N.prototype._generateRoutingMetadata=function(){var o=this.oComponent.getConfig(),t,T;if(!o.pages||!o.pages.length||o.pages.length===0){throw new Error("Route Configuration missing");}else if(o.pages.length>1){throw new Error("Currently only one Top route supported");}else{t=o.pages[0];this._sEntitySet=t.entitySet;T=this._createRoute(t,"root",0);this.oRouter.addRoute(T);this._createQueryRoute(T);this._createChildRoutes(t,0,null);}};N.prototype._createChildRoutes=function(r,l,p){var i,d;if(r.pages){d=r.pages.length;for(i=0;i<d;i++){this._createRoutes(r.pages[i],(l+1),p);}}};N.prototype._createRoutes=function(r,l,p){var n=this._createRoute(r,r.component.list?"aggregation":"detail",l,p);this.oRouter.addRoute(n);this._createQueryRoute(n);this._createChildRoutes(r,l,n);};N.prototype._createQueryRoute=function(r){var Q=q.extend({},r);Q.name=r.name+"query";Q.pattern=r.pattern+"{?query}";this.oRouter.addRoute(Q);};N.prototype._createRoute=function(r,o,l,p){var P,n;P=r.navigationProperty||r.entitySet;n=q.extend({},r);n.path="/"+r.entitySet;n.operation=o;n.viewLevel=l;n.template=r.component?(r.component.name||r.component):r.template;switch(o){case"root":n.name='root';n.pattern='';break;case"aggregation":n.name=P+"~aggregation";n.pattern=P;n.path=p.path||n.path;n.entitySet=p.entitySet||n.entitySet;break;default:n.name=P;n.pattern=P+"({keys"+l+"})";break;}if(p){n.name=p.name+"/"+n.name;n.pattern=p.pattern+"/"+n.pattern;n.parentEntitySet=p.entitySet;}n.view=n.name;n.controlId=this._sNavigationTargetId;n.controlAggregation="pages";return n;};N.prototype._createComponentInstance=function(r){var t,E,o,s;t=r.template;E=r.entitySet;s={appComponent:this.oComponent,isLeaf:!r.pages||!r.pages.length,subPages:r.pages,entitySet:E,navigationProperty:r.navigationProperty,componentData:{preprocessorsData:{}}};if(r.component.settings){q.extend(s,r.component.settings);}try{o=new C({name:t,propagateModel:true,width:'100%',height:'100%',handleValidation:true,settings:s});return o;}catch(e){throw new Error("Component "+t+" could not be loaded");}};N.prototype._handleRouteMatched=function(e){var v,r,k,K,p;v=e.getParameter("view");r=e.getParameter("config");sap.ui.getCore().getMessageManager().removeAllMessages();if(this._oTargetContextPath){p=this._oTargetContextPath;delete this._oTargetContextPath;}else if(r.operation!=="root"){p=this._getContextPath(r);K=e.getParameter("arguments");delete K["?query"];if(K){for(k in K){p=p.replace("{"+k+"}",K[k]);}}}this._activateView(v,p);};N.prototype._activateView=function(v,p,d){var o,O,e,V;if(v){if(v.getComponentInstance){e=v.getComponentInstance();if(!e){V={onBeforeRendering:function(){v.removeEventDelegate(V,this);if(v.getComponentInstance&&v.getComponentInstance()){this._activateView(v,p,true);}}};v.addEventDelegate(V,this);return;}}o=this._oNavContainer.getPreviousPage();if(!d&&(o||v!==this._oNavContainer.getCurrentPage())){o=this._oNavContainer.getCurrentPage();}if(o&&o.getComponentInstance){O=o.getComponentInstance();if(O&&O.onDeactivate){O.onDeactivate();}}if(e){if(e.onActivate){e.onActivate(p);}if(!e.getPreventBinding()){this._bindView(v,p);}}}};N.prototype._bindView=function(v,p){var e;if(v&&p){e=v.getModel().getProperty(p);if(e&&e.__metadata&&e.__metadata.created){v.unbindElement();v.setBindingContext(v.getModel().getContext(p));}else{v.bindElement({path:p,events:{dataReceived:this._handleDataReceived.bind(this)},batchGroupId:N._sChanges,changeSetId:N._sChanges});}}};N.prototype._navigate=function(h,r){if(!h){h="";}if(r){this.oRouter.oHashChanger.replaceHash(h);}else{this.oRouter.oHashChanger.setHash(h);}};N.prototype.navigateToRoot=function(r){this._navigate("",r);};N.prototype.navigateBack=function(r){this._navigate(this._oHistory?this._oHistory.getPreviousHash():"",r);};N.prototype.navigateToContext=function(t,n,r){var h=this.oRouter.oHashChanger.getHash(),p,T;if(t){p=this._getNavigationPath(t,n);if(n){T=function(h,m,d){var i;if(h&&m){if(isNaN(d)){d=0;}i=h.indexOf(m);if(i>-1){h=h.substring(0,i-d);}}return h;};if(n.indexOf("/")<0){n="/"+n;}h=T(h,n);h=T(h,"?");if(h){p=h+"/"+p;}}this._oTargetContextPath=t.getPath();this._navigate(p,r);}};N.prototype._getNavigationPath=function(t,n){var p,P,e;p=t.getPath().substring(1);P=p.split('(');if(P[0]){e=P[0];}if(n){p=p.replace(e,n);if(p.indexOf("/")===0){p=p.substring(1);}}return p;};N.prototype._getContextPath=function(r){var p,P,i;if(r){p=r.pattern;P=r.navigationProperty||r.entitySet;if(p&&P){i=p.indexOf("{?query}");if(i>0){p=p.substring(0,i);}i=-1;P+="({keys";i=p.indexOf(P);if(i>0){p=p.substring(i);}if(r.navigationProperty){p=p.replace(r.navigationProperty,r.entitySet);}p="/"+p;}}return p;};N.prototype.navigateToMessagePage=function(p){var e,t,r,T,E,o,h,i=null,m,R;if(p){e=p.entitySet;t=p.title;T=p.text;i=p.icon;r=p.replaceURL;}if(e){m=this.oComponent.getModel().getMetaModel();if(m){E=m.getODataEntitySet(e);o=m.getODataEntityType(E.entityType);h=o['com.sap.vocabularies.UI.v1.HeaderInfo'];}if(h&&h.TypeImageUrl&&h.TypeImageUrl.String){i=h.TypeImageUrl.String;}}if(this.oMessagePage){this.oMessagePage.destroy();}if(!this._sLinkText){R=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app");this._sLinkText=R.getText("RETURN_TO_MAIN");}this.oMessagePage=new c({title:t,text:T,icon:i,customDescription:new L({text:this._sLinkText,press:this.navigateBack.bind(this,r)})});this._oNavContainer.addPage(this.oMessagePage);this._oNavContainer.to(this.oMessagePage);};N.prototype._handleBypassed=function(e){var r;if(!this._sNavigationTitle){r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app");this._sNavigationTitle=r.getText("UNKNOWN_NAVIGATION_TARGET");}this.navigateToMessagePage({title:this._sNavigationTitle,replaceURL:true});};N.prototype._handleDataReceived=function(e){var d=null,r;if(e){d=e.getParameter("data");if(!d){if(!this._sDataLoadFailedTitle||!this._sDataLoadFailedText){r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app");this._sDataLoadFailedTitle=r.getText("ERROR_LOAD_DATA_TITLE");this._sDataLoadFailedText=r.getText("ERROR_LOAD_DATA_TEXT");}this.navigateToMessagePage({title:this._sDataLoadFailedTitle,text:this._sDataLoadFailedText});}}};N.prototype.getViews=function(){return this.oViews;};N.prototype.getNavContainer=function(){return this._oNavContainer;};N.prototype._readObject=function(k,p,m){var i,l,P,v,f=[];if(k&&p&&m){l=k.length;for(i=0;i<l;i++){P=k[i].PropertyPath;v=p[P][0];f.push(new F(P,b.EQ,v));}m.read('/'+this._sEntitySet,{filters:f,success:function(r){var R,i,d,K;if(r&&r.results){d=r.results.length;for(i=0;i<d;i++){R=r.results[i];if(R&&R.IsActiveEntity){break;}R=null;}if(!R){R=r.results[0];}}if(R){K=m.getKey(R);}if(K){this._oHashChanger.replaceHash(K);}this._initialiseRouting();}.bind(this),error:function(e){this._initialiseRouting();}.bind(this)});}};N.prototype.destroy=function(){B.prototype.destroy.apply(this,arguments);if(this._oHistory&&this._oHistory.destroy){this._oHistory.destroy();}this._oHistory=null;this.oRouter=null;this.oViews=null;this.oComponent=null;this._sLinkText=null;this._sNavigationTitle=null;this._sDataLoadFailedText=null;this._sDataLoadFailedTitle=null;};return N;},true);};if(!jQuery.sap.isDeclared('sap.ui.generic.app.navigation.service.NavError')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
jQuery.sap.declare('sap.ui.generic.app.navigation.service.NavError');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/ui/generic/app/navigation/service/NavError",["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var N=B.extend("sap.ui.generic.app.navigation.service.NavError",{metadata:{publicMethods:["getErrorCode"],properties:[],library:"sap.ui.generic.app"},constructor:function(e){B.apply(this);this._sErrorCode=e;}});N.prototype.getErrorCode=function(){return this._sErrorCode;};return N;});};if(!jQuery.sap.isDeclared('sap.ui.generic.app.navigation.service.SelectionVariant')){
/*!
 * @copyright@
 */
jQuery.sap.declare('sap.ui.generic.app.navigation.service.SelectionVariant');jQuery.sap.require('sap.ui.base.Object');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/generic/app/navigation/service/SelectionVariant",["./NavError","sap/ui/base/Object","jquery.sap.global"],function(E,B,q){"use strict";var S=B.extend("sap.ui.generic.app.navigation.service.SelectionVariant",{_rVALIDATE_SIGN:new RegExp("[E|I]"),_rVALIDATE_OPTION:new RegExp("EQ|NE|LE|GE|LT|GT|BT|CP"),constructor:function(s){this._mParameters={};this._mSelectOptions={};this._sId="";if(s!==undefined){if(typeof s==="string"){this._parseFromString(s);}else if(typeof s==="object"){this._parseFromObject(s);}else{throw new E("SelectionVariant.INVALID_INPUT_TYPE");}}},getID:function(){return this._sId;},setID:function(i){this._sId=i;},setText:function(n){if(typeof n!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}this._sText=n;},getText:function(){return this._sText;},setParameterContextUrl:function(u){if(typeof u!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}this._sParameterCtxUrl=u;},getParameterContextUrl:function(){return this._sParameterCtxUrl;},getFilterContextUrl:function(){return this._sFilterCtxUrl;},setFilterContextUrl:function(u){if(typeof u!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}this._sFilterCtxUrl=u;},addParameter:function(n,v){if(typeof n!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(typeof v!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(n===""){throw new E("SelectionVariant.PARAMETER_WITHOUT_NAME");}if(this._mSelectOptions[n]){throw new E("SelectionVariant.PARAMETER_SELOPT_COLLISION");}this._mParameters[n]=v;return this;},removeParameter:function(n){if(typeof n!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(n===""){throw new E("SelectionVariant.PARAMETER_WITHOUT_NAME");}delete this._mParameters[n];return this;},renameParameter:function(n,N){if(typeof n!=="string"||typeof N!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(n===""||N===""){throw new E("SelectionVariant.PARAMETER_WITHOUT_NAME");}if(this._mParameters[n]!==undefined){if(this._mSelectOptions[N]){throw new E("SelectionVariant.PARAMETER_SELOPT_COLLISION");}if(this._mParameters[N]){throw new E("SelectionVariant.PARAMETER_COLLISION");}this._mParameters[N]=this._mParameters[n];delete this._mParameters[n];}return this;},getParameter:function(n){if(typeof n!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}return this._mParameters[n];},getParameterNames:function(){return Object.keys(this._mParameters);},addSelectOption:function(p,s,o,l,h){if(typeof p!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(p===""){throw new E("SelectionVariant.INVALID_PROPERTY_NAME");}if(typeof s!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(typeof o!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(typeof l!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(o==="BT"&&typeof h!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(!this._rVALIDATE_SIGN.test(s.toUpperCase())){throw new E("SelectionVariant.INVALID_SIGN");}if(!this._rVALIDATE_OPTION.test(o.toUpperCase())){throw new E("SelectionVariant.INVALID_OPTION");}if(this._mParameters[p]){throw new E("SelectionVariant.PARAMETER_SELOPT_COLLISION");}if(o!=="BT"){if((h!==undefined)&&(h!=="")&&(h!==null)){throw new E("SelectionVariant.HIGH_PROVIDED_THOUGH_NOT_ALLOWED");}}if(this._mSelectOptions[p]===undefined){this._mSelectOptions[p]=[];}var e={Sign:s.toUpperCase(),Option:o.toUpperCase(),Low:l};if(o==="BT"){e.High=h;}else{e.High=null;}for(var i=0;i<this._mSelectOptions[p].length;i++){var a=this._mSelectOptions[p][i];if(a.Sign===e.Sign&&a.Option===e.Option&&a.Low===e.Low&&a.High===e.High){return this;}}this._mSelectOptions[p].push(e);return this;},removeSelectOption:function(n){if(typeof n!=="string"){throw new E("SelectionVariant.SELOPT_WRONG_TYPE");}if(n===""){throw new E("SelectionVariant.SELOPT_WITHOUT_NAME");}delete this._mSelectOptions[n];return this;},renameSelectOption:function(n,N){if(typeof n!=="string"||typeof N!=="string"){throw new E("SelectionVariant.SELOPT_WRONG_TYPE");}if(n===""||N===""){throw new E("SelectionVariant.SELOPT_WITHOUT_NAME");}if(this._mSelectOptions[n]!==undefined){if(this._mSelectOptions[N]){throw new E("SelectionVariant.SELOPT_COLLISION");}if(this._mParameters[N]){throw new E("SelectionVariant.PARAMETER_SELOPT_COLLISION");}this._mSelectOptions[N]=this._mSelectOptions[n];delete this._mSelectOptions[n];}return this;},getSelectOption:function(p){if(typeof p!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(p===""){throw new E("SelectionVariant.INVALID_PROPERTY_NAME");}var e=this._mSelectOptions[p];if(!e){return undefined;}return JSON.parse(JSON.stringify(e));},getSelectOptionsPropertyNames:function(){return Object.keys(this._mSelectOptions);},massAddSelectOption:function(p,s){if(!q.isArray(s)){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}for(var i=0;i<s.length;i++){var o=s[i];this.addSelectOption(p,o.Sign,o.Option,o.Low,o.High);}return this;},getValue:function(n){var v=this.getSelectOption(n);if(v!==undefined){return v;}var p=this.getParameter(n);if(p!==undefined){v=[{Sign:"I",Option:"EQ",Low:p,High:null}];return v;}return undefined;},isEmpty:function(){return this.getParameterNames().length===0&&this.getSelectOptionsPropertyNames().length===0;},toJSONObject:function(){var e={Version:{Major:"1",Minor:"0",Patch:"0"},SelectionVariantID:this._sId};if(this._sParameterCtxUrl){e.ParameterContextUrl=this._sParameterCtxUrl;}if(this._sFilterCtxUrl){e.FilterContextUrl=this._sFilterCtxUrl;}if(this._sText){e.Text=this._sText;}else{e.Text="Selection Variant with ID "+this._sId;}this._determineODataFilterExpression(e);this._serializeParameters(e);this._serializeSelectOptions(e);return e;},toJSONString:function(){return JSON.stringify(this.toJSONObject());},_determineODataFilterExpression:function(e){e.ODataFilterExpression="";},_serializeParameters:function(e){if(this._mParameters.length===0){return;}e.Parameters=[];q.each(this._mParameters,function(p,P){var o={PropertyName:p,PropertyValue:P};e.Parameters.push(o);});},_serializeSelectOptions:function(e){if(this._mSelectOptions.length===0){return;}e.SelectOptions=[];q.each(this._mSelectOptions,function(p,a){var s={PropertyName:p,Ranges:a};e.SelectOptions.push(s);});},_parseFromString:function(j){if(j===undefined){throw new E("SelectionVariant.UNABLE_TO_PARSE_INPUT");}if(typeof j!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}var i=JSON.parse(j);this._parseFromObject(i);},_parseFromObject:function(i){if(i.SelectionVariantID===undefined){q.sap.log.warning("SelectionVariantID is not defined");i.SelectionVariantID="";}this.setID(i.SelectionVariantID);if(i.ParameterContextUrl!==undefined&&i.ParameterContextUrl!==""){this.setParameterContextUrl(i.ParameterContextUrl);}if(i.FilterContextUrl!==undefined&&i.FilterContextUrl!==""){this.setFilterContextUrl(i.FilterContextUrl);}if(i.Text!==undefined){this.setText(i.Text);}if(i.Parameters){this._parseFromStringParameters(i.Parameters);}if(i.SelectOptions){this._parseFromStringSelectOptions(i.SelectOptions);}},_parseFromStringParameters:function(p){q.each(p,q.proxy(function(i,e){this.addParameter(e.PropertyName,e.PropertyValue);},this));},_parseFromStringSelectOptions:function(s){q.each(s,q.proxy(function(i,o){if(!o.Ranges){q.sap.log.warning("Select Option object does not contain a Ranges entry; ignoring entry");return true;}if(!q.isArray(o.Ranges)){throw new E("SelectionVariant.SELECT_OPTION_RANGES_NOT_ARRAY");}q.each(o.Ranges,q.proxy(function(I,r){this.addSelectOption(o.PropertyName,r.Sign,r.Option,r.Low,r.High);},this));},this));}});return S;});};if(!jQuery.sap.isDeclared('sap.ui.generic.app.util.DraftUtil')){
/*
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
jQuery.sap.declare('sap.ui.generic.app.util.DraftUtil');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/generic/app/util/DraftUtil",["jquery.sap.global"],function(q){"use strict";var D=function(){};D.prototype.isActiveEntity=function(e){return e.IsActiveEntity;};D.prototype.hasDraftEntity=function(e){return e.HasDraftEntity;};D.prototype.hasActiveEntity=function(e){return e.HasActiveEntity;};D.prototype.destroy=function(){};return D;},true);};if(!jQuery.sap.isDeclared('sap.ui.generic.app.util.ModelUtil')){jQuery.sap.declare('sap.ui.generic.app.util.ModelUtil');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/generic/app/util/ModelUtil",["jquery.sap.global"],function(q){"use strict";var M=function(m){this._oModel=m;};M.prototype.getContextFromResponse=function(r){var p="/"+this._oModel.getKey(r);return this._oModel.getContext(p);};M.getEntitySetFromContext=function(c){var p,e;if(!c){throw new Error("No context");}if(c&&c.getPath){p=c.getPath().split("(")[0];e=p.substring(1);}return e;};M.prototype.hasClientMessages=function(){var m,o,a,b,i=0,l=0;m=sap.ui.getCore().getMessageManager();o=m.getMessageModel();a=o.getData();if(a){l=a.length;}for(i=0;i<l;i++){b=a[i];if(b.processor.getMetadata()._sClassName==="sap.ui.core.message.ControlMessageProcessor"){return true;}}return false;};M.prototype.destroy=function(){this._oModel=null;};return M;},true);};if(!jQuery.sap.isDeclared('sap.ui.generic.app.util.Queue')){jQuery.sap.declare('sap.ui.generic.app.util.Queue');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/generic/app/util/Queue",["jquery.sap.global"],function(q){"use strict";var Q=function(m){this._iMaxLength=m;this._aQueue=[];};Q.prototype._execNext=function(){var n;this._aQueue.shift();n=this._aQueue[0];if(n){this._exec(n);}};Q.prototype._exec=function(i){var t=this,s=function(){t._execNext();};i.jqdeferred.resolve();i.wait.then(function(){i.wait.then(s);},q.proxy(t._cancel,t));};Q.prototype.enqueue=function(f){var i={fn:f};i.jqdeferred=q.Deferred();i.defer=new Promise(function(a,r){i.jqdeferred.then(a,r);});i.wait=i.defer.then(f);if(this._aQueue.length>=this._iMaxLength){i.jqdeferred.reject(new Error("Queue overflow: "+this._aQueue.length));}else{this._aQueue.push(i);if(this._aQueue.length===1){this._exec(i);}}return i.wait.then();};Q.prototype._cancel=function(){var I,i,l=this._aQueue.length;for(i=0;i<l;i++){I=this._aQueue[i];I.jqdeferred.reject(new Error("Queue cancellation"));}this._aQueue=[];};Q.prototype.destroy=function(){this._aQueue=[];};return Q;},true);};if(!jQuery.sap.isDeclared('sap.ui.generic.app.navigation.service.NavigationHandler')){
/*!
 * @copyright@
 */
jQuery.sap.declare('sap.ui.generic.app.navigation.service.NavigationHandler');jQuery.sap.require('sap.ui.base.Object');jQuery.sap.require('sap.ui.model.resource.ResourceModel');jQuery.sap.require('sap.ui.core.UIComponent');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/generic/app/navigation/service/NavigationHandler",["./NavError","./SelectionVariant","sap/ui/base/Object","sap/ui/model/resource/ResourceModel","sap/ui/core/UIComponent","jquery.sap.global"],function(E,S,B,R,U,q){"use strict";var N=B.extend("sap.ui.generic.app.navigation.service.NavigationHandler",{metadata:{publicMethods:["navigate","parseNavigation","storeInnerAppState","openSmartLinkPopover","mixAttributesAndSelectionVariant"]},constructor:function(c,p){if(typeof c==="undefined"||typeof c.getOwnerComponent!=="function"){throw new E("NavigationHandler.INVALID_INPUT");}this.oRouter=this._getRouter(c);this.oComponent=c.getOwnerComponent();if(typeof this.oRouter==="undefined"||typeof this.oComponent==="undefined"||typeof this.oComponent.getComponentData!=="function"){throw new E("NavigationHandler.INVALID_INPUT");}try{this.oCrossAppNavService=sap.ushell.Container.getService("CrossApplicationNavigation");}catch(e){q.sap.log.error("NavigationHandler: UShell service API for CrossApplicationNavigation is not available.");}this.IAPP_STATE="sap-iapp-state";this.sDefaultedParamProp="sap-ushell-defaultedParameterNames";this.sSAPSystemProp="sap-system";this._oLastSavedInnerAppData={sAppStateKey:"",oAppData:{},iCacheHit:0,iCacheMiss:0};this._rIAppStateOld=new RegExp("/"+this.IAPP_STATE+"=([^/?]+)");this._rIAppStateOldAtStart=new RegExp("^"+this.IAPP_STATE+"=([^/?]+)");this._rIAppStateNew=new RegExp("[\?&]"+this.IAPP_STATE+"=([^&]+)");if(p===sap.ui.generic.app.navigation.service.ParamHandlingMode.URLParamWins||p===sap.ui.generic.app.navigation.service.ParamHandlingMode.InsertInSelOpt){this.sParamHandlingMode=p;}else{this.sParamHandlingMode=sap.ui.generic.app.navigation.service.ParamHandlingMode.SelVarWins;}},_getRouter:function(c){return U.getRouterFor(c);},navigate:function(s,a,n,i,o){var b,p;if(typeof n==="string"){b=n;p=this._getURLParametersFromSelectionVariant(b);}else if(typeof n==="object"){p=n;var e=this._splitInboundNavigationParameters(new S(),p,[]).oNavigationSelVar;b=e.toJSONString();}else{throw new E("NavigationHandler.INVALID_INPUT");}var c=this;var d={target:{semanticObject:s,action:a},params:p||{}};var I=c.oCrossAppNavService.hrefForExternal(d,c.oComponent);var f=c.oCrossAppNavService.isIntentSupported([I]);f.done(function(t){if(t[I].supported){var g=c.storeInnerAppState(i);g.done(function(){var O=function(A){d.appStateKey=A;c.oCrossAppNavService.toExternal(d,c.oComponent);};c._saveAppState({selectionVariant:b},O,o);});if(o){g.fail(function(j){o(j);});}}else{if(o){var h="NavigationHandler.isIntentSupported.notSupported";var j=new E(h);o(j);}}});if(o){f.fail(function(){var g=c._createTechnicalError("NavigationHandler.isIntentSupported.failed");o(g);});}},parseNavigation:function(){var a=this.oRouter.oHashChanger.getHash();var I=this._getInnerAppStateKey(a);var c=this.oComponent.getComponentData();if(c===undefined){q.sap.log.warning("The navigation Component's data was not set properly; assuming instead that no parameters are provided.");c={};}var s=c.startupParameters;var d=[];if(s&&s[this.sDefaultedParamProp]&&s[this.sDefaultedParamProp].length>0){d=JSON.parse(s[this.sDefaultedParamProp][0]);}var m=q.Deferred();var n=this;if(I){this._loadAppState(I,m);}else{var b=c["sap-xapp-state"]!==undefined;if(b){var o=this.oCrossAppNavService.getStartupAppState(this.oComponent);o.done(function(f){var A=f.getData();if(A){try{A=JSON.parse(JSON.stringify(A));}catch(x){var g=n._createTechnicalError("NavigationHandler.AppStateData.parseError");m.reject(g,s,sap.ui.generic.app.navigation.service.NavType.xAppState);return m.promise();}}if(!q.isEmptyObject(s)){if(A){var h=new S(A.selectionVariant);var i=d.length;while(i--){if(h.getValue(d[i])){d.splice(i,1);}}var e=n._splitInboundNavigationParameters(h,s,d);A.selectionVariant=e.oNavigationSelVar.toJSONString();A.oSelectionVariant=e.oNavigationSelVar;A.oDefaultedSelectionVariant=e.oDefaultedSelVar;A.bNavSelVarHasDefaultsOnly=e.bNavSelVarHasDefaultsOnly;m.resolve(A,s,sap.ui.generic.app.navigation.service.NavType.xAppState);}else{g=n._createTechnicalError("NavigationHandler.getDataFromAppState.failed");m.reject(g,s,sap.ui.generic.app.navigation.service.NavType.xAppState);}}else{if(A){q.sap.log.warning("Broken Sender navigation via xapp-state detected; sender did not provide legacy URL parameters");A.selectionVariant=n._ensureSelectionVariantFormatString(A.selectionVariant);A.oSelectionVariant=new S(A.selectionVariant);A.oDefaultedSelectionVariant=new S();A.bNavSelVarHasDefaultsOnly=false;m.resolve(A,{},sap.ui.generic.app.navigation.service.NavType.xAppState);}else{q.sap.log.warning("Broken Sender navigation via xapp-state detected; sender did not provide legacy URL parameters");g=n._createTechnicalError("NavigationHandler.getDataFromAppState.failed");m.reject(g,{},sap.ui.generic.app.navigation.service.NavType.xAppState);}}});o.fail(function(){var f=n._createTechnicalError("NavigationHandler.getStartupState.failed");m.reject(f,{},sap.ui.generic.app.navigation.service.NavType.xAppState);});}else{if(s){var e=n._splitInboundNavigationParameters(new S(),s,d);if(e.oNavigationSelVar.isEmpty()&&e.oDefaultedSelVar.isEmpty()){m.resolve({},s,sap.ui.generic.app.navigation.service.NavType.initial);}else{var A={};A.selectionVariant=e.oNavigationSelVar.toJSONString();A.oSelectionVariant=e.oNavigationSelVar;A.oDefaultedSelectionVariant=e.oDefaultedSelVar;A.bNavSelVarHasDefaultsOnly=e.bNavSelVarHasDefaultsOnly;m.resolve(A,s,sap.ui.generic.app.navigation.service.NavType.URLParams);}}else{m.resolve({},{},sap.ui.generic.app.navigation.service.NavType.initial);}}}return m.promise();},_splitInboundNavigationParameters:function(s,o,d){if(!q.isArray(d)){throw new E("NavigationHandler.INVALID_INPUT");}var p;var a={};for(p in o){if(!o.hasOwnProperty(p)){continue;}if(p===this.sSAPSystemProp||p===this.sDefaultedParamProp){continue;}if(typeof o[p]==="string"){a[p]=o[p];}else if(q.type(o[p])==="array"&&o[p].length===1){a[p]=o[p][0];}else{throw new E("NavigationHandler.INVALID_INPUT");}}var D=new S();var n=new S();var b=s.getParameterNames().concat(s.getSelectOptionsPropertyNames());for(var i=0;i<b.length;i++){p=b[i];if(p in a){if(q.inArray(p,d)>-1){n.massAddSelectOption(p,s.getValue(p));D.addSelectOption(p,"I","EQ",a[p]);}else{switch(this.sParamHandlingMode){case sap.ui.generic.app.navigation.service.ParamHandlingMode.SelVarWins:n.massAddSelectOption(p,s.getValue(p));break;case sap.ui.generic.app.navigation.service.ParamHandlingMode.URLParamWins:n.addSelectOption(p,"I","EQ",a[p]);break;case sap.ui.generic.app.navigation.service.ParamHandlingMode.InsertInSelOpt:n.massAddSelectOption(p,s.getValue(p));n.addSelectOption(p,"I","EQ",a[p]);break;default:throw new E("NavigationHandler.INVALID_INPUT");}}}else{if(q.inArray(p,d)>-1){D.massAddSelectOption(p,s.getValue(p));}else{n.massAddSelectOption(p,s.getValue(p));}}}for(p in a){if(q.inArray(p,b)>-1){continue;}if(q.inArray(p,d)>-1){D.addSelectOption(p,"I","EQ",a[p]);}else{n.addSelectOption(p,"I","EQ",a[p]);}}var c=false;if(n.isEmpty()){c=true;var P=D.getSelectOptionsPropertyNames();for(i=0;i<P.length;i++){n.massAddSelectOption(P[i],D.getValue(P[i]));}}return{oNavigationSelVar:n,oDefaultedSelVar:D,bNavSelVarHasDefaultsOnly:c};},storeInnerAppState:function(i,I){if(typeof I!=="boolean"){I=true;}var n=this;var m=q.Deferred();var r=function(A){var s=n.oRouter.oHashChanger.getHash();var c=n._replaceInnerAppStateKey(s,A);n.oRouter.oHashChanger.replaceHash(c);};var a=this._oLastSavedInnerAppData.sAppStateKey;var b=(JSON.stringify(i)===JSON.stringify(this._oLastSavedInnerAppData.oAppData));if(b&&a){this._oLastSavedInnerAppData.iCacheHit++;r(a);m.resolve(a);return m.promise();}this._oLastSavedInnerAppData.iCacheMiss++;var o=function(A){if(!I){r(A);}n._oLastSavedInnerAppData.oAppData=i;n._oLastSavedInnerAppData.sAppStateKey=A;m.resolve(A);};var O=function(e){m.reject(e);};var A=this._saveAppState(i,o,O);if(A!==undefined){if(I){r(A);}}return m.promise();},processBeforeSmartLinkPopoverOpens:function(t,s,i){var m=q.Deferred();var a=t.semanticAttributes;var n=this;var f=function(a,s){s=s||"{}";var b=sap.ui.generic.app.navigation.service.SuppressionBehavior.raiseErrorOnNull|sap.ui.generic.app.navigation.service.SuppressionBehavior.raiseErrorOnUndefined;var M=n.mixAttributesAndSelectionVariant(a,s,b);s=M.toJSONString();a=n._getURLParametersFromSelectionVariant(M);var O=function(A){t.setSemanticAttributes(a);t.setAppStateKey(A);t.open();m.resolve(t);};var c=function(e){m.reject(e);};n._saveAppState({selectionVariant:s},O,c);};if(i){var o=this.storeInnerAppState(i,true);o.done(function(){f(a,s);});o.fail(function(e){m.reject(e);});}else{f(a,s);}return m.promise();},mixAttributesAndSelectionVariant:function(s,a,b){if(b===undefined){b=sap.ui.generic.app.navigation.service.SuppressionBehavior.standard;}var o=new S(a);var n=new S();for(var p in s){if(s.hasOwnProperty(p)){var v=s[p];if(q.type(v)==="array"||q.type(v)==="object"){v=JSON.stringify(v);}else if(q.type(v)==="date"){v=v.toJSON();}else if(q.type(v)==="number"||q.type(v)==="boolean"){v=v.toString();}if(v===""){if(b&sap.ui.generic.app.navigation.service.SuppressionBehavior.ignoreEmptyString){q.sap.log.info("Semantic attribute "+p+" is an empty string and due to the chosen Suppression Behiavour is being ignored.");continue;}}if(v===null){if(b&sap.ui.generic.app.navigation.service.SuppressionBehavior.raiseErrorOnNull){throw new E("NavigationHandler.INVALID_INPUT");}else{q.sap.log.warning("Semantic attribute "+p+" is null and ignored for mix in to selection variant");continue;}}if(v===undefined){if(b&sap.ui.generic.app.navigation.service.SuppressionBehavior.raiseErrorOnUndefined){throw new E("NavigationHandler.INVALID_INPUT");}else{q.sap.log.warning("Semantic attribute "+p+" is undefined and ignored for mix in to selection variant");continue;}}if(q.type(v)==="string"){n.addSelectOption(p,"I","EQ",v);}else{throw new E("NavigationHandler.INVALID_INPUT");}}}var P=o.getParameterNames();for(var i=0;i<P.length;i++){if(!n.getSelectOption(P[i])){n.addSelectOption(P[i],"I","EQ",o.getParameter(P[i]));}}var c=o.getSelectOptionsPropertyNames();for(i=0;i<c.length;i++){if(!n.getSelectOption(c[i])){var d=o.getSelectOption(c[i]);for(var j=0;j<d.length;j++){n.addSelectOption(c[i],d[j].Sign,d[j].Option,d[j].Low,d[j].High);}}}return n;},_ensureSelectionVariantFormatString:function(s){if(s===undefined){return undefined;}var c=s;if(typeof s==="object"){c=JSON.stringify(s);}return c;},_saveAppState:function(a,o,O){var A=this.oCrossAppNavService.createEmptyAppState(this.oComponent);var s=A.getKey();var b={selectionVariant:{},tableVariantId:"",customData:{}};if(a.selectionVariant){if(typeof a.selectionVariant==="string"){try{b.selectionVariant=JSON.parse(a.selectionVariant);}catch(x){var e=this._createTechnicalError("NavigationHandler.AppStateSave.parseError");if(O){O(e);}return undefined;}}else{b.selectionVariant=a.selectionVariant;}}if(a.tableVariantId){b.tableVariantId=a.tableVariantId;}if(a.customData){b.customData=a.customData;}A.setData(b);var c=A.save();if(o){c.done(function(){o(s);});}if(O){var n=this;c.fail(function(){e=n._createTechnicalError("NavigationHandler.AppStateSave.failed");O(e);});}return s;},_loadAppState:function(a,d){var A=this.oCrossAppNavService.getAppState(this.oComponent,a);var n=this;A.done(function(o){var b={selectionVariant:"{}",tableVariantId:"",customData:{}};var c=o.getData();if(typeof c==="undefined"){var e=n._createTechnicalError("NavigationHandler.getDataFromAppState.failed");d.reject(e,{},sap.ui.generic.app.navigation.service.NavType.iAppState);}else{if(c.selectionVariant){b.selectionVariant=n._ensureSelectionVariantFormatString(c.selectionVariant);}if(c.tableVariantId){b.tableVariantId=c.tableVariantId;}if(c.customData){b.customData=c.customData;}}d.resolve(b,{},sap.ui.generic.app.navigation.service.NavType.iAppState);});A.fail(function(){var e=n._createTechnicalError("NavigationHandler.getAppState.failed");d.reject(e,{},sap.ui.generic.app.navigation.service.NavType.iAppState);});},_getInnerAppStateKey:function(a){if(!a){return undefined;}var m=this._rIAppStateNew.exec(a);if(m===null){m=this._rIAppStateOld.exec(a);}if(m===null){m=this._rIAppStateOldAtStart.exec(a);}if(m===null){return undefined;}return m[1];},_replaceInnerAppStateKey:function(a,A){var n=this.IAPP_STATE+"="+A;if(!a){return"?"+n;}var f=function(a){if(a.indexOf("?")!==-1){return a+"&"+n;}return a+"?"+n;};if(!this._getInnerAppStateKey(a)){return f(a);}if(this._rIAppStateNew.test(a)){return a.replace(this._rIAppStateNew,function(s){return s.replace(/\=.*/ig,"="+A);});}var r=function(b,a){a=a.replace(b,"");return f(a);};if(this._rIAppStateOld.test(a)){return r(this._rIAppStateOld,a);}if(this._rIAppStateOldAtStart.test(a)){return r(this._rIAppStateOldAtStart,a);}return undefined;},_getURLParametersFromSelectionVariant:function(s){var u={};var i=0;if(typeof s==="string"){var o=new S(s);}else if(typeof s==="object"){o=s;}else{throw new E("NavigationHandler.INVALID_INPUT");}var a=o.getSelectOptionsPropertyNames();for(i=0;i<a.length;i++){var b=o.getSelectOption(a[i]);if(b.length===1&&b[0].Sign==="I"&&b[0].Option==="EQ"){u[a[i]]=b[0].Low;}}var p=o.getParameterNames();for(i=0;i<p.length;i++){var P=o.getParameter(p[i]);u[p[i]]=P;}return u;},_createTechnicalError:function(e){return new E(e);}});return N;});};if(!jQuery.sap.isDeclared('sap.ui.generic.app.transaction.BaseController')){
/*
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
jQuery.sap.declare('sap.ui.generic.app.transaction.BaseController');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.EventProvider');jQuery.sap.require('sap.m.BusyDialog');sap.ui.define("sap/ui/generic/app/transaction/BaseController",["jquery.sap.global","sap/ui/base/EventProvider","sap/ui/generic/app/util/ModelUtil","sap/ui/generic/app/util/DraftUtil","sap/m/BusyDialog","sap/ui/generic/app/util/Queue"],function(q,E,M,D,B,Q){"use strict";var a=E.extend("sap.ui.generic.app.transaction.BaseController",{metadata:{publicMethods:["hasClientMessages","triggerSubmitChanges","attachFatalError","detachFatalError","destroy"]},constructor:function(m,o){if(!m){throw new Error("No model");}E.apply(this,arguments);this.sName="sap.ui.generic.app.transaction.BaseController";this._oModel=m;this._oMeta=m.getMetaModel();this._oDraftUtil=new D();this._oModelUtil=new M(m);if(o){this._oQueue=o;}else{this._oQueue=new Q(10);this._bOwnsQueue=true;}this._initCounts();}});a.prototype.attachFatalError=function(f,l){this.attachEvent("fatalError",f,l);};a.prototype.detachFatalError=function(f,l){this.detachEvent("fatalError",f,l);};a.prototype._prepareCallAction=function(f,c,p){var e,o,b,s,k;if(!f){throw new Error("Invalid Function Import");}p.urlParameters=p.urlParameters||{};p.functionImport=this._oMeta.getODataFunctionImport(f.split("/")[1]);if(!p.functionImport){throw new Error("Unknown Function Import "+f);}s=M.getEntitySetFromContext(c);e=this._oMeta.getODataEntitySet(s,false);o=this._oMeta.getODataEntityType(e.entityType,false);k=o.key.propertyRef;if(c){b=c.getObject();}if(b){this._getActionParameters(b,p,k);this._getAdditionalActionParameters(b,p,k);}return p;};a.prototype._callAction=function(f,c,p){var t=this;if(!p.urlParameters||!p.functionImport){p=this._prepareCallAction(f,c,p);}return new Promise(function(r,b){var F,C;F="/"+p.functionImport.name;C=t._getRequestCallBacks(r,b);t._oModel.callFunction(F,{method:p.functionImport.httpMethod,urlParameters:p.urlParameters,success:C.success,error:C.error,batchGroupId:p.batchGroupId,changeSetId:p.changeSetId,headers:p.headers});});};a.prototype._getActionRequestHeaders=function(c,e,p){var s;if(!p.headers){p.headers={};}if(!p.headers["If-Match"]&&p.functionImport["sap:action-for"]){s=this._oModel.getETag(null,c,e);if(s){p.headers["If-Match"]=s;}}};a.prototype._getActionParameters=function(e,p,k){var i,b,l=k.length,A={},s;s=p.functionImport["sap:action-for"];b=function(P){if(p.functionImport.parameter){var j,c=p.functionImport.parameter.length;for(j=0;j<c;j++){if(p.functionImport.parameter[j].name===P){return true;}}}return false;};if(!p.functionImport.parameter&&s){q.sap.log.error("Action doesn't have any parameters");throw new Error("Action doesn't have any parameters");}for(i=0;i<l;i++){if(b(k[i].name)){p.urlParameters[k[i].name]=e[k[i].name];}else if(s){q.sap.log.error("Action parameters do not contain key property: "+k[i].name);throw new Error("Action parameters do not contain key property: "+k[i].name);}}return A;};a.prototype._getAdditionalActionParameters=function(e,p,k){var j,l=0,P,b=function(s){var i=0,c=k.length;for(i=0;i<c;i++){if(k[i].name===s){return true;}}return false;};if(p.functionImport.parameter){l=p.functionImport.parameter.length;}if(l>k.length){for(j=0;j<l;j++){P=p.functionImport.parameter[j];if(!b(P.name)){var n=(P.nullable==="true")?true:false;if(!p.urlParameters.hasOwnProperty(P.name)&&!n){q.sap.log.error("Unknown parameter "+P.name);throw new Error("Unknown parameter "+P.name);}}}}};a.prototype._read=function(p,P){var t=this;return new Promise(function(r,b){var c,u;if(P.urlParameters){u=P.urlParameters;}c=t._getRequestCallBacks(r,b);t._oModel.read(p,{success:c.success,error:c.error,batchGroupId:P.batchGroupId,changeSetId:P.changeSetId,urlParameters:u});});};a.prototype._remove=function(p,P){var t=this;return new Promise(function(r,b){var c=t._getRequestCallBacks(r,b);t._oModel.remove(p,{success:c.success,error:c.error,eTag:"*",batchGroupId:P.batchGroupId,changeSetId:P.changeSetId});});};a.prototype._submitChanges=function(p){var t=this,c;if(p&&p.context){c=p.context;}return new Promise(function(r,b){var P=false,C=t._getRequestCallBacks(r,b);P=t._oModel.hasPendingChanges();if(P||p.forceSubmit){p.pendingChanges=P;t._oModel.submitChanges({batchGroupId:p.batchGroupId,success:C.success,error:C.error,eTag:p.eTag});}else{r({context:c});}});};a.prototype.triggerSubmitChanges=function(p){var t=this,b,f;p=p||{};p.successMsg=p.successMsg||"Action succeeded";p.failedMsg=p.failedMsg||"Action failed";if(!p.noBlockUI){b=new B();b.open();}f=function(){return t._submitChanges(p).then(function(r){if(b){b.close();}t._checkImplicitError(r,p);return t._normalizeResponse(r,true);},function(r){var R=t._normalizeError(r);if(b){b.close();}t.fireEvent("fatalError",{response:R});throw R;});};return this._oQueue.enqueue(f);};a.prototype.hasClientMessages=function(){if(this._oModelUtil.hasClientMessages()){return Promise.reject(new Error("Client messages detected"));}return null;};a.prototype._normalizeResponse=function(r,c){if(r&&(r.httpResponse||r.responseData)){return{data:r.responseData,response:r.httpResponse||null,context:c?this._oModelUtil.getContextFromResponse(r.responseData):null};}return r;};a.prototype._normalizeError=function(r){if(r&&r.message){return{response:r};}return r;};a.prototype._returnPromiseAll=function(p){return Promise.all(p).then(function(r){if(r.length){return r[0];}return r;});};a.prototype._checkImplicitError=function(r,p){var P,o,s,c=false;if(this._mCounts.requestSent===1&&this._mCounts.requestCompleted===1){c=true;}this._initCounts();if(p.pendingChanges&&c){if(r&&r.responseData&&r.responseData.__batchResponses&&(r.responseData.__batchResponses.length===1)){P=r.responseData.__batchResponses[0];}if(P&&P.response&&P.response.statusCode){s=parseInt(P.response.statusCode,10);if(s<200||s>299){o=this._parseError(P);throw this._normalizeError(o);}}}};a.prototype._parseError=function(p){var r={};if(p.message){r.message=p.message;}if(p.response){r.statusCode=p.response.statusCode;r.statusText=p.response.statusText;r.headers=p.response.headers;r.responseText=p.response.body;}return r;};a.prototype._initCounts=function(){this._mCounts={requestSent:0,requestCompleted:0};};a.prototype._getRequestCallBacks=function(r,b){var t=this;this._mCounts.requestSent++;return{success:function(d,R){t._mCounts.requestCompleted++;r({responseData:d,httpResponse:R});},error:function(R){t._mCounts.requestCompleted++;b(R);}};};a.prototype.destroy=function(){if(this._oModelUtil){this._oModelUtil.destroy();}if(this._oQueue&&this._bOwnsQueue){this._oQueue.destroy();}this._oModel=null;this._oMeta=null;this._oDraftUtil=null;this._oModelUtil=null;};return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.generic.app.transaction.DraftContext')){jQuery.sap.declare('sap.ui.generic.app.transaction.DraftContext');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/ui/generic/app/transaction/DraftContext",["jquery.sap.global","sap/ui/base/Object","sap/ui/generic/app/util/ModelUtil"],function(q,B,M){"use strict";var D=B.extend("sap.ui.generic.app.transaction.DraftContext",{metadata:{publicMethods:["isDraftEnabled","isDraftRoot","hasDraft","hasDraftRoot","hasDraftValidationFunction","hasDraftPreparationAction","isTechnicalKey","isSemanticKey","getSemanticKey","checkUpdateOnChange","getODataDraftFunctionImportName","hasDraftAdministrativeData","hasSiblingEntity","destroy"]},constructor:function(m){if(!m){throw new Error("No model");}this._oModel=m;this._oMeta=m.getMetaModel();this._oModelUtil=new M(m);return this.getInterface();}});D.prototype.isDraftEnabled=function(e){var d=this._getODataDraftEntitySet(e);return!!(d&&d.isDraft);};D.prototype.isDraftRoot=function(e){var d=this._getODataDraftEntitySet(e);return!!(d&&d.isRoot);};D.prototype.hasDraft=function(c){var e=M.getEntitySetFromContext(c);return this.isDraftEnabled(e);};D.prototype.hasDraftRoot=function(c){var e=M.getEntitySetFromContext(c);return this.isDraftRoot(e);};D.prototype.hasDraftValidationFunction=function(c){return!!this.getODataDraftFunctionImportName(c,"ValidationFunction");};D.prototype.hasDraftPreparationAction=function(c){return!!this.getODataDraftFunctionImportName(c,"PreparationAction");};D.prototype.isTechnicalKey=function(e,k){var E,o,K,i,s;if(!e){throw new Error("No entity set");}E=this._oMeta.getODataEntitySet(e);o=this._oMeta.getODataEntityType(E.entityType);K=o.key.propertyRef.length;if(Object.keys(k).length!==K){return false;}for(i=0;i<K;i++){s=o.key.propertyRef[i].name;if(!k[s]){return false;}}return true;};D.prototype.isSemanticKey=function(e,k){var s,i,l;if(this.isDraftEnabled(e)){s=this.getSemanticKey(e);l=s.length;for(i=0;i<l;i++){if(!k[s[i].name]){return false;}}return true;}return false;};D.prototype.getSemanticKey=function(e){var E,o,s,S=[],i,l;if(!e){throw new Error("No entity set");}E=this._oMeta.getODataEntitySet(e);o=this._oMeta.getODataEntityType(E.entityType);s=o["com.sap.vocabularies.Common.v1.SemanticKey"];if(s){l=s.length;for(i=0;i<l;i++){S.push({name:s[i].PropertyPath});}}return S;};D.prototype.getODataDraftFunctionImportName=function(c,d){var e,o;e=M.getEntitySetFromContext(c);o=this._getODataDraftEntitySet(e);if(o.oDraft[d]&&o.oDraft[d].String){return o.oDraft[d].String;}return null;};D.prototype._getODataDraftEntitySet=function(e){var o={},E;if(!e){throw new Error("No entity set");}E=this._oMeta.getODataEntitySet(e);o.ODataEntitySet=E;if(E["com.sap.vocabularies.Common.v1.DraftRoot"]){o.isDraft=true;o.isRoot=true;o.oDraft=E["com.sap.vocabularies.Common.v1.DraftRoot"];}else if(E["com.sap.vocabularies.Common.v1.DraftNode"]){o.isDraft=true;o.isRoot=false;o.oDraft=E["com.sap.vocabularies.Common.v1.DraftNode"];}return o;};D.prototype.hasDraftAdministrativeData=function(e){return this._hasNavigationProperty(e,"DraftAdministrativeData");};D.prototype.hasSiblingEntity=function(e){return this._hasNavigationProperty(e,"SiblingEntity");};D.prototype._hasNavigationProperty=function(e,n){var E,o,i,l;E=this._oMeta.getODataEntitySet(e);o=this._oMeta.getODataEntityType(E.entityType);if(o.navigationProperty){l=o.navigationProperty.length;for(i=0;i<l;i++){if(o.navigationProperty[i].name===n){return true;}}}return false;};D.prototype.checkUpdateOnChange=function(e,p){var P,E,s;if(!e){throw new Error("No entity set");}E=this._oMeta.getODataEntitySet(e);for(P in E){if(P.indexOf&&P.indexOf("com.sap.vocabularies.Common.v1.SideEffects")===0){s=E[P];if(s.SourceProperties&&s.SourceProperties.length){if(s.SourceProperties.length===1&&s.SourceProperties[0].PropertyPath){if(s.SourceProperties[0].PropertyPath===p){return true;}}}}}return false;};D.prototype.destroy=function(){if(this._oModelUtil){this._oModelUtil.destroy();}this._oModelUtil=null;this._oModel=null;this._oMeta=null;};return D;},true);};if(!jQuery.sap.isDeclared('sap.ui.generic.app.transaction.DraftController')){jQuery.sap.declare('sap.ui.generic.app.transaction.DraftController');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/generic/app/transaction/DraftController",["jquery.sap.global","./BaseController","./DraftContext"],function(q,B,D){"use strict";var a=B.extend("sap.ui.generic.app.transaction.DraftController",{metadata:{publicMethods:["getDraftContext","getDraftForActiveEntity","createNewDraftEntity","createEditDraftEntity","validateDraftEntity","prepareDraft","prepareDraftEntity","saveAndPrepareDraftEntity","activateDraftEntity","isActiveEntity","hasActiveEntity","destroy"]},constructor:function(m,Q){B.apply(this,[m,Q]);this.sName="sap.ui.generic.app.transaction.DraftController";this._oContext=null;}});a.prototype.getDraftContext=function(){if(!this._oContext){this._oContext=new D(this._oModel);}return this._oContext;};a.prototype.createDraft=function(e,p,P){var t=this;if(!e){throw new Error("No entity set");}P=P||{};return new Promise(function(r,b){var s=function(d,R){r({responseData:d,httpResponse:R});};t._oModel.createEntry(p,{success:s,error:b,batchGroupId:P.batchGroupId,changeSetId:P.changeSetId});});};a.prototype.validateDraft=function(c,p){var i=this.getDraftContext().getODataDraftFunctionImportName(c,"ValidationFunction");return this._callAction(i,c,p);};a.prototype.prepareDraft=function(c,p){var i;p=p||{};p.urlParameters=p.urlParameters||{};i=this.getDraftContext().getODataDraftFunctionImportName(c,"PreparationAction");return this._callAction(i,c,p);};a.prototype.activateDraft=function(c,p){var i=this.getDraftContext().getODataDraftFunctionImportName(c,"ActivationAction");return this._callAction(i,c,p);};a.prototype.editDraft=function(c,p){var i=this.getDraftContext().getODataDraftFunctionImportName(c,"EditAction");return this._callAction(i,c,p);};a.prototype.discardDraft=function(c,p){if(!c){throw new Error("No context");}return this._remove(c.getPath(),p);};a.prototype.getDraftForActive=function(c,p){var t=this;if(!c){throw new Error("No context");}p=p||{};p.urlParameters={"$expand":"SiblingEntity"};return this._read(c.getPath(),p).then(function(r){if(r.responseData&&r.responseData.hasOwnProperty("SiblingEntity")){r.context=t._oModel.getContext("/"+t._oModel.getKey(r.responseData.SiblingEntity));return r;}throw new Error("No draft entity could be found");});};a.prototype.getDraftForActiveEntity=function(c){var p,P,t=this,m={batchGroupId:"Changes",changeSetId:"Changes",noShowSuccessToast:true,forceSubmit:true};p=this.getDraftForActive(c,m).then(function(r){return r;},function(r){throw t._normalizeError(r);});P=this.triggerSubmitChanges(m);return this._returnPromiseAll([p,P]);};a.prototype.createNewDraftEntity=function(e,p){var P,o,t=this,m={batchGroupId:"Changes",changeSetId:"Changes",noShowSuccessToast:true,forceSubmit:true,failedMsg:"New draft document could not be created"};P=this.createDraft(e,p,m).then(function(r){return t._normalizeResponse(r,true);},function(r){var R=t._normalizeError(r);throw R;});o=this.triggerSubmitChanges(m).then(function(){return P.then(function(r){var i,h,R,b=t._normalizeResponse(r,true);if(b.context){R=b.context.getObject();}if(!R){q.sap.log.error("Activate function returned no entity");return Promise.reject(new Error("Activate function returned no entity"));}i=t._oDraftUtil.isActiveEntity(R);if(i){q.sap.log.error("New draft entity is not marked as draft - isActiveEntity = "+i);return Promise.reject("New draft entity is not marked as draft - isActiveEntity = "+i);}h=t._oDraftUtil.hasDraftEntity(R);if(h){q.sap.log.error("Wrong value for HasTwin of new draft entity - HasDraftEntity = "+h);return Promise.reject(new Error("Wrong value for HasTwin of new draft entity - HasDraftEntity = "+h));}return b;});});return this._returnPromiseAll([P,o]);};a.prototype.createEditDraftEntity=function(c){var p,P,t=this,m={batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Draft for document was created",failedMsg:"Could not create draft for document",forceSubmit:true,context:c};p=this.editDraft(c,m).then(function(r){var i,R,o;o=t._normalizeResponse(r,true);if(o.context){R=o.context.getObject();}if(!R){q.sap.log.error("Activate function returned no entity");return Promise.reject(new Error("Activate function returned no entity"));}i=t._oDraftUtil.isActiveEntity(R);if(i){q.sap.log.error("Edit function returned an entity which is not a draft instance - IsActiveEntity = "+i);return Promise.reject(new Error("Returned entity ist not a draft instance - IsActiveEntity = "+i));}return o;},function(r){var R=t._normalizeError(r);throw R;});P=this.triggerSubmitChanges(m);return this._returnPromiseAll([p,P]);};a.prototype.validateDraftEntity=function(c){var p,P,t=this,m={batchGroupId:"Changes",changeSetId:"Changes",context:c,forceSubmit:true};p=this.validateDraft(c,m).then(function(r){return t._normalizeResponse(r,true);},function(r){var R=t._normalizeError(r);throw R;});P=this.triggerSubmitChanges(m);return this._returnPromiseAll([p,P]);};a.prototype.saveAndPrepareDraftEntity=function(c,p){var P,o,t=this;p=p||{};p.batchGroupId="Changes";p.changeSetId="Changes";p.successMsg="Saved";p.failedMsg="Save failed";p.context=c;p.forceSubmit=true;P=this.prepareDraft(c,p).then(function(r){var i,R,b;b=t._normalizeResponse(r,true);if(b.context){R=b.context.getObject();}if(!R){q.sap.log.error("Activate function returned no entity");return Promise.reject(new Error("Activate function returned no entity"));}i=t._oDraftUtil.isActiveEntity(R);if(i){q.sap.log.error("Prepare function returned an entity which is not a draft instance - IsActiveEntity = "+i);return Promise.reject(new Error("Returned entity ist not a draft instance - IsActiveEntity = "+i));}return b;},function(r){var R=t._normalizeError(r);throw R;});if(p.binding){p.binding.refresh(true);}o=this.triggerSubmitChanges(p);return this._returnPromiseAll([P,o]);};a.prototype.prepareDraftEntity=function(c){var t=this;return this.prepareDraft(c).then(function(r){var R,o;R=t._normalizeResponse(r,true);o=R.context.getObject();if(t._oDraftUtil.isActiveEntity(o)){q.sap.log.error("Prepare function returned an entity which is not a draft instance - IsActiveEntity = "+true);return Promise.reject(new Error("Returned entity ist not a draft instance - IsActiveEntity = "+true));}return R;},function(r){var R=t._normalizeError(r);throw R;});};a.prototype.activateDraftEntity=function(c){var p,P,t=this,m={batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Document activated",failedMsg:"Activation of document failed",forceSubmit:true,context:c};p=this.activateDraft(c,m).then(function(r){var i,R,o;o=t._normalizeResponse(r,true);if(o.context){R=o.context.getObject();}if(!R){q.sap.log.error("Activate function returned no entity");return Promise.reject(new Error("Activate function returned no entity"));}i=t._oDraftUtil.isActiveEntity(R);if(!i){q.sap.log.error("Activate function returned an entity which is still a draft instance - IsActiveEntity = "+i);return Promise.reject(new Error("Returned entity is still a draft instance - IsActiveEntity = "+i));}return o;},function(r){var R=t._normalizeError(r);throw R;});P=this.triggerSubmitChanges(m);return this._returnPromiseAll([p,P]);};a.prototype.isActiveEntity=function(c){if(this.getDraftContext().hasDraft(c)){return this._oDraftUtil.isActiveEntity(c.getObject());}return true;};a.prototype.hasActiveEntity=function(c){return this._oDraftUtil.hasActiveEntity(c.getObject());};a.prototype.destroy=function(){if(this._oContext){this._oContext.destroy();}this._oContext=null;this._oModel=null;B.prototype.destroy.apply(this,[]);};return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.generic.app.transaction.TransactionController')){jQuery.sap.declare('sap.ui.generic.app.transaction.TransactionController');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/generic/app/transaction/TransactionController",["jquery.sap.global","./BaseController","./DraftController","sap/ui/generic/app/util/ModelUtil"],function(q,B,D,M){"use strict";var T=B.extend("sap.ui.generic.app.transaction.TransactionController",{metadata:{publicMethods:["destroy","setBatchStrategy","getDraftController","invokeAction","editEntity","deleteEntity","propertyChanged","hasClientValidationErrors","resetChanges"]},constructor:function(m,Q,p){B.apply(this,[m,Q]);this.sName="sap.ui.generic.app.transaction.TransactionController";this._oDraft=null;p=p||{};if(!p.noBatchGroups){m.setDeferredBatchGroups(["Changes"]);m.setChangeBatchGroups({"*":{batchGroupId:"Changes",changeSetId:"Changes",single:false}});}return this.getInterface();}});T.prototype.setBatchStrategy=function(s){var n,c=this._oModel.getChangeBatchGroups();for(n in c){c[n].single=s;}this._oModel.setChangeBatchGroups(c);};T.prototype.getDraftController=function(){if(!this._oDraft){this._oDraft=new D(this._oModel,this._oQueue);}return this._oDraft;};T.prototype.editEntity=function(c){var t=this;return new Promise(function(r){var d,e;d=t.getDraftController().getDraftContext();e=M.getEntitySetFromContext(c);if(d.isDraftEnabled(e)&&t._oDraftUtil.isActiveEntity(c.getObject())){return r(t.getDraftController().createEditDraftEntity(c));}return r({context:c});});};T.prototype.deleteEntity=function(c,p){var P,o,t=this;p=p||{};q.extend(p,{batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Changes were discarded",failedMsg:"Discarding of changes failed",forceSubmit:true,context:c});P=this._remove(c.getPath(),p).then(function(r){return t._normalizeResponse(r,true);},function(r){var R=t._normalizeError(r);throw R;});o=this.triggerSubmitChanges(p);return this._returnPromiseAll([P,o]);};T.prototype.invokeAction=function(f,c,p){var t=this,P,o;P=this.hasClientMessages();if(P){return P;}p={batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Call of action succeeded",failedMsg:"Call of action failed",urlParameters:p.urlParameters,forceSubmit:true,context:c};P=this._callAction(f,c,p).then(function(r){return t._normalizeResponse(r,true);},function(r){var O=t._normalizeError(r);throw O;});this._oModel.refresh(true,false,"Changes");o=this.triggerSubmitChanges(p);return this._returnPromiseAll([P,o]);};T.prototype.resetChanges=function(k){this._oModel.resetChanges(k);};T.prototype.propertyChanged=function(e,p,b){var d,c,P={batchGroupId:"Changes",changeSetId:"Changes",binding:b};d=this.getDraftController().getDraftContext();if(d.checkUpdateOnChange(e,p)){c=b.getBoundContext();if(d.hasDraftPreparationAction(c)){return this.getDraftController().saveAndPrepareDraftEntity(c,P);}P.onlyIfPending=true;return this.triggerSubmitChanges(P);}P.onlyIfPending=true;P.noShowResponse=true;P.noBlockUI=true;return this.triggerSubmitChanges(P);};T.prototype.destroy=function(){B.prototype.destroy.apply(this,[]);if(this._oDraft){this._oDraft.destroy();}this._oDraft=null;};return T;},true);};if(!jQuery.sap.isDeclared('sap.ui.generic.app.AppComponent')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
jQuery.sap.declare('sap.ui.generic.app.AppComponent');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.UIComponent');jQuery.sap.require('sap.m.NavContainer');sap.ui.define("sap/ui/generic/app/AppComponent",['jquery.sap.global','sap/ui/core/UIComponent','sap/ui/generic/app/transaction/TransactionController','sap/ui/generic/app/navigation/NavigationController','sap/m/NavContainer'],function(q,U,T,N,a){"use strict";var A=U.extend("sap.ui.generic.app.AppComponent",{metadata:{config:{"title":"SAP UI Application Component",fullWidth:true},routing:{config:{routerClass:"sap.m.routing.Router",viewType:"XML",viewPath:"",clearTarget:false},routes:[]},library:"sap.ui.generic.app"}});A.prototype.init=function(){var m;sap.ui.core.UIComponent.prototype.init.apply(this,arguments);m=this.getModel();if(m){this._oTransactionController=new T(m);this._oNavigationController=new N(this);}};A.prototype.createContent=function(){this.setModel(sap.ui.getCore().getMessageManager().getMessageModel(),"message");this._oNavContainer=new a({id:this.getId()+'-appContent'});if(sap.ui.Device.system.desktop){this._oNavContainer.addStyleClass("sapUiSizeCompact");}return this._oNavContainer;};A.prototype.getConfig=function(){var c,m;if(!this._oConfig){m=this.getMetadata();c=m.getManifestEntry('sap.ui.generic.app');this._oConfig=c;}return this._oConfig;};A.prototype.getTransactionController=function(){return this._oTransactionController;};A.prototype.getNavigationController=function(){return this._oNavigationController;};A.prototype.exit=function(){if(this._oNavContainer){this._oNavContainer.destroy();}this._oNavContainer=null;if(this._oTransactionController){this._oTransactionController.destroy();}this._oTransactionController=null;if(this._oNavigationController){this._oNavigationController.destroy();}this._oNavigationController=null;};return A;},true);};if(!jQuery.sap.isDeclared('sap.ui.generic.app.ApplicationController')){
/*
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
jQuery.sap.declare('sap.ui.generic.app.ApplicationController');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/generic/app/ApplicationController",["jquery.sap.global","./transaction/BaseController","./transaction/TransactionController"],function(q,B,T){"use strict";var A=B.extend("sap.ui.generic.app.ApplicationController",{constructor:function(m,v){var t=this;B.apply(this,[m]);this._oView=v;this._initModel(m);v.attachValidateFieldGroup(function(e){var i,I;if(e.mParameters.fieldGroupIds&&e.mParameters.fieldGroupIds.length){i=e.mParameters.fieldGroupIds[0];I=t._oView.data(i);}if(I){setTimeout(function(){t._onFieldGroupLeft(i,I);});}});}});A.prototype._initModel=function(m){m.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);m.setRefreshAfterChange(false);m.setDeferredBatchGroups(["Changes"]);m.setChangeBatchGroups({"*":{batchGroupId:"Changes",changeSetId:"Changes",single:false}});m.setChangeBatchGroups({"*":{batchGroupId:"Sync",changeSetId:"Sync",single:false}});};A.prototype._onFieldGroupLeft=function(i,I){var c,s,n,C,t=this,p={batchGroupId:"Changes",changeSetId:"Changes",noShowSuccessToast:true,forceSubmit:true,noBlockUI:true,urlParameters:{}};C=this._oView.getControlsByFieldGroupId(i);this._setFieldGroupBusy(C,true);p.urlParameters.SideEffectsQualifier=I.name.replace("com.sap.vocabularies.Common.v1.SideEffects","");if(p.urlParameters.SideEffectsQualifier.indexOf("#")===0){p.urlParameters.SideEffectsQualifier=p.urlParameters.SideEffectsQualifier.replace("#","");}c=this._oModel.getContext(I.context);s=this._getSideEffect(I);n=function(){t._setFieldGroupBusy(C,false);};return this._executeSideEffects(s,c,p).then(n,n);};A.prototype._setFieldGroupBusy=function(c,b){var l,i,C;if(c){l=c.length;}for(i=0;i<l;i++){C=c[i];C.setBusy(b);}};A.prototype._executeSideEffects=function(s,c,p){this.getTransactionController().getDraftController().prepareDraft(c,p);this._setSelect(s,p);this._read(c.getPath(),p);return this.triggerSubmitChanges(p);};A.prototype._setSelect=function(s,p){var i,l=0,t,S="$select=";if(s.TargetProperties){l=s.TargetProperties.length;for(i=0;i<l;i++){if(i>0){S=S+",";}t=s.TargetProperties[i];S=S+t.PropertyPath;}}if(l>0){p.urlParameters=[S];}};A.prototype._getSideEffect=function(i){var m,s;m=this._oModel.getMetaModel();s=m.getODataEntitySet(i.originName);return s[i.name];};A.prototype.getTransactionController=function(){if(!this._oTransaction){this._oTransaction=new T(this._oModel,this._oQueue,{noBatchGroups:true});}return this._oTransaction;};A.prototype.destroy=function(){B.prototype.destroy.apply(this,[]);if(this._oTransaction){this._oTransaction.destroy();}this._oView=null;this._oModel=null;this._oTransaction=null;};return A;},true);};
