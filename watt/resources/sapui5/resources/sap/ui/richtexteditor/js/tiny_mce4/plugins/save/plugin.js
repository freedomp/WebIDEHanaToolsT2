tinymce.PluginManager.add('save',function(e){function s(){var f;f=tinymce.DOM.getParent(e.id,'form');if(e.getParam("save_enablewhendirty",true)&&!e.isDirty()){return;}tinymce.triggerSave();if(e.getParam("save_onsavecallback")){if(e.execCallback('save_onsavecallback',e)){e.startContent=tinymce.trim(e.getContent({format:'raw'}));e.nodeChanged();}return;}if(f){e.isNotDirty=true;if(!f.onsubmit||f.onsubmit()){if(typeof f.submit=="function"){f.submit();}else{e.windowManager.alert("Error: Form submit field collision.");}}e.nodeChanged();}else{e.windowManager.alert("Error: No form element found.");}}function c(){var h=tinymce.trim(e.startContent);if(e.getParam("save_oncancelcallback")){e.execCallback('save_oncancelcallback',e);return;}e.setContent(h);e.undoManager.clear();e.nodeChanged();}function a(){var b=this;e.on('nodeChange',function(){b.disabled(e.getParam("save_enablewhendirty",true)&&!e.isDirty());});}e.addCommand('mceSave',s);e.addCommand('mceCancel',c);e.addButton('save',{icon:'save',text:'Save',cmd:'mceSave',disabled:true,onPostRender:a});e.addButton('cancel',{text:'Cancel',icon:false,cmd:'mceCancel',disabled:true,onPostRender:a});e.addShortcut('Meta+S','','mceSave');});
