/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2014 SAP SE. All rights reserved
 */
jQuery.sap.declare("sap.apf.modeler.core.step");(function(){'use strict';sap.apf.modeler.core.Step=function(s,i,d){var r,a,b,f,c,e,t,n,k,g,l,h,j,m,o,p,q;q=i.instance.messageHandler;if(!d){r=new i.constructor.elementContainer(s+"-Representation",i.constructor.representation,i);a={};b=new i.constructor.elementContainer("SelectProperty",undefined,i);f=new i.constructor.elementContainer("FilterProperty",undefined,i);c={};e=new i.constructor.elementContainer("SelectPropertyForFilterMapping",undefined,i);t=new i.constructor.elementContainer("TargetPropertyForFilterMapping",undefined,i);k=false;n=new i.constructor.elementContainer("NavigationTarget",undefined,i);}else{r=d.representationContainer;a=d.request;b=d.selectProperties;f=d.filterProperties;c=d.requestForFilterMapping;e=d.selectPropertiesForFilterMapping;t=d.targetPropertiesForFilterMapping;k=d.keepSourceForFilterMapping;n=d.navigationTargets;g=d.titleId;l=d.longTitleId;h=d.leftUpperCornerTextKey;j=d.rightUpperCornerTextKey;m=d.leftLowerCornerTextKey;o=d.rightLowerCornerTextKey;p=d.topNSettings;}this.getId=function(){return s;};this.setTopN=function(u,v){this.resetTopN();p={};p.top=u;if(v&&v instanceof Array&&v.length>0){p.orderby=v;}else{q.putMessage(q.createMessageObject({code:11016}));return;}r.getElements().forEach(function(w){w.setTopN(u);p.orderby.forEach(function(v){w.addOrderbySpec(v.property,v.ascending);})});};this.getTopN=function(){if(p&&p.top>0){return jQuery.extend({},true,p);}else{return undefined;}};this.resetTopN=function(){p=undefined;r.getElements().forEach(function(u){u.setTopN(undefined);u.getOrderbySpecifications().forEach(function(v){u.removeOrderbySpec(v.property);})});};this.getService=function(){return a.service;};this.setService=function(u){a.service=u;};this.getEntitySet=function(){return a.entitySet;};this.setEntitySet=function(u){a.entitySet=u;};this.setTitleId=function(u){g=u;};this.getTitleId=function(){return g;};this.setLongTitleId=function(u){l=u;};this.getLongTitleId=function(){return l;};this.getSelectProperties=function(){var u=[];var v=b.getElements();v.forEach(function(w){u.push(w.getId());});return u;};this.addSelectProperty=function(u){b.createElementWithProposedId(undefined,u);};this.removeSelectProperty=function(u){b.removeElement(u);};this.getFilterProperties=function(){var u=[];var v=f.getElements();v.forEach(function(w){u.push(w.getId());});return u;};this.addFilterProperty=function(u){return f.createElementWithProposedId(undefined,u).getId();};this.removeFilterProperty=function(u){f.removeElement(u);};this.setFilterMappingService=function(u){c.service=u;};this.getFilterMappingService=function(){return c.service;};this.setFilterMappingEntitySet=function(u){c.entitySet=u;};this.getFilterMappingEntitySet=function(){return c.entitySet;};this.addFilterMappingTargetProperty=function(u){t.createElementWithProposedId(undefined,u);};this.getFilterMappingTargetProperties=function(){var u=[];var v=t.getElements();v.forEach(function(w){u.push(w.getId());});return u;};this.removeFilterMappingTargetProperty=function(u){t.removeElement(u);};this.addNavigationTarget=function(u){n.createElementWithProposedId(undefined,u);};this.getNavigationTargets=function(){var u=[];var v=n.getElements();v.forEach(function(w){u.push(w.getId());});return u;};this.removeNavigationTarget=function(u){n.removeElement(u);};this.setFilterMappingKeepSource=function(u){k=u;};this.getFilterMappingKeepSource=function(){return k;};this.getRepresentations=r.getElements;this.getRepresentation=r.getElement;this.createRepresentation=function(u){var v=r.createElement(u);if(p&&p.top){v.setTopN(p.top);p.orderby.forEach(function(w){v.addOrderbySpec(w.property,w.ascending);});}return v;};this.removeRepresentation=r.removeElement;this.copyRepresentation=r.copyElement;this.moveRepresentationBefore=function(u,v){return r.moveBefore(u,v);};this.moveRepresentationUpOrDown=function(u,v){return r.moveUpOrDown(u,v);};this.moveRepresentationToEnd=function(u){return r.moveToEnd(u);};this.setLeftUpperCornerTextKey=function(u){h=u;};this.getLeftUpperCornerTextKey=function(){return h;};this.setRightUpperCornerTextKey=function(u){j=u;};this.getRightUpperCornerTextKey=function(){return j;};this.setLeftLowerCornerTextKey=function(u){m=u;};this.getLeftLowerCornerTextKey=function(){return m;};this.setRightLowerCornerTextKey=function(u){o=u;};this.getRightLowerCornerTextKey=function(){return o;};this.copy=function(u){var v={request:a,selectProperties:b,filterProperties:f,requestForFilterMapping:c,selectPropertiesForFilterMapping:e,targetPropertiesForFilterMapping:t,navigationTargets:n,keepSourceForFilterMapping:k,titleId:g,longTitleId:l,leftUpperCornerTextKey:h,rightUpperCornerTextKey:j,leftLowerCornerTextKey:m,rightLowerCornerTextKey:o,topNSettings:p};var d=sap.apf.modeler.core.ConfigurationObjects.deepDataCopy(v);d.representationContainer=r.copy(u+"-Representation");return new sap.apf.modeler.core.Step((u||this.getId()),i,d);};};}());
