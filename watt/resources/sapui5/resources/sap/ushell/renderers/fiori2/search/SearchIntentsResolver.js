(function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchIntentsResolver');var m=sap.ushell.renderers.fiori2.search.SearchIntentsResolver=function(){this.init.apply(this,arguments);};m.prototype={init:function(a){this._oCrossAppNav=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");this._model=a;},resolveIntents:function(r){var t=this;var d=new $.Deferred();t._model.sina.sinaSystem().getServerInfo().then(function(s){var a=false;for(var i=0;i<s.rawServerInfo.Services.length;++i){var b=s.rawServerInfo.Services[i];if(b.Service==='Search'){for(var j=0;j<b.Capabilities.length;++j){var c=b.Capabilities[j];if(c.Capability==='SemanticObjectType'){a=true;break;}}break;}}if(!a){d.resolve();}else{var p=[];for(var k=0;k<r.length;k++){var e=r[k];e.uri="";if(e.semanticObjectType&&e.semanticObjectType.length>0){var f=t._doResolveIntents(e);p.push(f);}}$.when.apply(null,p).always(function(g){d.resolve();});}});return d.promise();},_doResolveIntents:function(r){var t=this;var o=new $.Deferred();var p=t._oCrossAppNav.getSemanticObjectLinks(r.semanticObjectType,r.semanticObjectTypeAttrs);p.done(function(a){var f="-displayFactSheet";var b=false;r.intents=[];for(var i=0;i<a.length;i++){var c=a[i];var e={target:{shellHash:c.intent}};var d=t._oCrossAppNav.hrefForExternal(e);if(!b&&c.intent.substr(c.intent.indexOf("-"),f.length)===f){r.uri=d;b=true;}else{c.target=e.target;c.externalHash=d;r.intents.push(c);}}o.resolve();});p.fail(function(a){o.resolve();});return o;}};})();
