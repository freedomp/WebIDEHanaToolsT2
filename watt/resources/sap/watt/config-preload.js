/**

JSZip - A Javascript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2012 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See LICENSE.markdown.

Usage:
   zip = new JSZip();
   zip.file("hello.txt", "Hello, World!").file("tempfile", "nothing");
   zip.folder("images").file("smile.gif", base64Data, {base64: true});
   zip.file("Xmas.txt", "Ho ho ho !", {date : new Date("December 25, 2007 00:00:01")});
   zip.remove("tempfile");

   base64zip = zip.generate();

**/

/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */

/**

JSZip - A Javascript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2011 David Duponchel <d.duponchel@gmail.com>
Dual licenced under the MIT license or GPLv3. See LICENSE.markdown.

**/

/*

  The MIT License (MIT)

  Copyright (c) 2007-2013 Einar Lielmanis and contributors.

  Permission is hereby granted, free of charge, to any person
  obtaining a copy of this software and associated documentation files
  (the "Software"), to deal in the Software without restriction,
  including without limitation the rights to use, copy, modify, merge,
  publish, distribute, sublicense, and/or sell copies of the Software,
  and to permit persons to whom the Software is furnished to do so,
  subject to the following conditions:

  The above copyright notice and this permission notice shall be
  included in all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS
  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
  SOFTWARE.


 CSS Beautifier
---------------

    Written by Harutyun Amirjanyan, (amirjanyan@gmail.com)

    Based on code initially developed by: Einar Lielmanis, <einar@jsbeautifier.org>
        http://jsbeautifier.org/

    Usage:
        css_beautify(source_text);
        css_beautify(source_text, options);

    The options are (default in brackets):
        indent_size (4)                   — indentation size,
        indent_char (space)               — character to indent with,
        selector_separator_newline (true) - separate selectors with newline or
                                            not (e.g. "a,\nbr" or "a, br")
        end_with_newline (false)          - end with a newline

    e.g

    css_beautify(css_source_text, {
      'indent_size': 1,
      'indent_char': '\t',
      'selector_separator': ' ',
      'end_with_newline': false,
    });
*/

/*******************************************************************************
 * @license
 * Copyright (c) 2010, 2012 IBM Corporation and others.
 * All rights reserved. This program and the accompanying materials are made 
 * available under the terms of the Eclipse Public License v1.0 
 * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution 
 * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). 
 * 
 * Contributors: IBM Corporation - initial API and implementation
 ******************************************************************************/

/*******************************************************************************
 * @license
 * Copyright (c) 2011, 2012 IBM Corporation and others.
 * Copyright (c) 2012 VMware, Inc.
 * All rights reserved. This program and the accompanying materials are made
 * available under the terms of the Eclipse Public License v1.0
 * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution
 * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).
 *
 * Contributors:
 *     IBM Corporation - initial API and implementation
 *     Andrew Eisenberg - rename to jsTemplateContentAssist.js
 *******************************************************************************/

//  copyright notices can be found at "https://github.com/ajaxorg/ace"

/*

 Execute in a NodeJS app:

    npm install prettydiff        (local install)

    var prettydiff = require("prettydiff"),
        args       = {
            source: "asdf",
            diff  : "asdd",
            lang  : "text"
        },
        output     = prettydiff.api(args);

 Execute on command line with NodeJS:

    npm install prettydiff -g     (global install)

    prettydiff source:"c:\mydirectory\myfile.js" readmethod:"file" diff:"c:\myotherfile.js"

 Execute with WSH:
    cscript prettydiff.wsf /source:"myFile.xml" /mode:"beautify"

 Execute from JavaScript:
    var args   = {
            source: "asdf",
            diff  : "asdd",
            lang  : "text"
        },
        output = prettydiff(args);


                *******   license start   *******
 @source: http://prettydiff.com/prettydiff.js
 @documentation - English: http://prettydiff.com/documentation.php

 @licstart  The following is the entire license notice for Pretty Diff.

 This code may not be used or redistributed unless the following
 conditions are met:

 * Prettydiff created by Austin Cheney originally on 3 Mar 2009.
 http://prettydiff.com/

 * The use of diffview.js and prettydiff.js must contain the following
 copyright:
 Copyright (c) 2007, Snowtide Informatics Systems, Inc.
 All rights reserved.
     - Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.
     - Redistributions in binary form must reproduce the above copyright
 notice, this list of conditions and the following disclaimer in the
 documentation and/or other materials provided with the
 distribution.
     - Neither the name of the Snowtide Informatics Systems nor the
 names of its contributors may be used to endorse or promote products
 derived from this software without specific prior written
 permission.
     - used as diffview function
     http://prettydiff.com/lib/diffview.js

 * The code mentioned above has significantly expanded documentation in
 each of the respective function's external JS file as linked from the
 documentation page:
 http://prettydiff.com/documentation.php

 * In addition to the previously stated requirements any use of any
 component, aside from directly using the full files in their entirety,
 must restate the license mentioned at the top of each concerned file.

 If each and all these conditions are met use, extension, alteration,
 and redistribution of Pretty Diff and its required assets is unlimited
 and free without author permission.

 @licend  The above is the entire license notice for Pretty Diff.
                *******   license end   *******


 Join the Pretty Diff mailing list at:
 https://groups.google.com/d/forum/pretty-diff

 Special thanks to:

 * Harry Whitfield for the numerous test cases provided against
 JSPretty.  http://g6auc.me.uk/

 * Andreas Greuel for contributing samples to test diffview.js
 https://plus.google.com/105958105635636993368/posts

 */

/*******************************************************************************
 * @license
 * Copyright (c) 2013 VMware, Inc. All Rights Reserved.
 * THIS FILE IS PROVIDED UNDER THE TERMS OF THE ECLIPSE PUBLIC LICENSE
 * ("AGREEMENT"). ANY USE, REPRODUCTION OR DISTRIBUTION OF THIS FILE
 * CONSTITUTES RECIPIENTS ACCEPTANCE OF THE AGREEMENT.
 * You can obtain a current copy of the Eclipse Public License from
 * http://www.opensource.org/licenses/eclipse-1.0.php
 *
 * Contributors:
 *     Andrew Eisenberg
 *     Brian Cavalier
 ******************************************************************************/

/*

  Original copyright is below.  This is version git tag: 310927be9f.
  Further modifications:
  Author: Andy Clement (VMware) - recovery support


  Original copyright:

  Copyright (C) 2012 Ariya Hidayat <ariya.hidayat@gmail.com>
  Copyright (C) 2012 Mathias Bynens <mathias@qiwi.be>
  Copyright (C) 2012 Joost-Wim Boekesteijn <joost-wim@boekesteijn.nl>
  Copyright (C) 2012 Kris Kowal <kris.kowal@cixar.com>
  Copyright (C) 2012 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2012 Arpad Borsos <arpad.borsos@googlemail.com>
  Copyright (C) 2011 Ariya Hidayat <ariya.hidayat@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*******************************************************************************
 * @license
 * Copyright (c) 2012 VMware, Inc. All Rights Reserved.
 * THIS FILE IS PROVIDED UNDER THE TERMS OF THE ECLIPSE PUBLIC LICENSE
 * ("AGREEMENT"). ANY USE, REPRODUCTION OR DISTRIBUTION OF THIS FILE
 * CONSTITUTES RECIPIENTS ACCEPTANCE OF THE AGREEMENT.
 * You can obtain a current copy of the Eclipse Public License from
 * http://www.opensource.org/licenses/eclipse-1.0.php
 *
 * Contributors:
 *     Andrew Eisenberg (VMware) - initial API and implementation
 ******************************************************************************/

/*******************************************************************************
 * @license
 * Copyright (c) 2012 VMware, Inc. All Rights Reserved.
 * THIS FILE IS PROVIDED UNDER THE TERMS OF THE ECLIPSE PUBLIC LICENSE
 * ("AGREEMENT"). ANY USE, REPRODUCTION OR DISTRIBUTION OF THIS FILE
 * CONSTITUTES RECIPIENTS ACCEPTANCE OF THE AGREEMENT.
 * You can obtain a current copy of the Eclipse Public License from
 * http://www.opensource.org/licenses/eclipse-1.0.php
 *
 * Contributors:
 *     Andy Clement (VMware) - initial API and implementation
 *     Andrew Eisenberg (VMware) - implemented visitor pattern
 ******************************************************************************/

/*
  Copyright (C) 2012-2013 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2013 Andrew Eisenberg <andrew@eisenberg.as>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*******************************************************************************
 * @license
 * Copyright (c) 2012 VMware, Inc. All Rights Reserved.
 * Copyright (c) 2013 IBM Corporation.
 *
 * THIS FILE IS PROVIDED UNDER THE TERMS OF THE ECLIPSE PUBLIC LICENSE
 * ("AGREEMENT"). ANY USE, REPRODUCTION OR DISTRIBUTION OF THIS FILE
 * CONSTITUTES RECIPIENTS ACCEPTANCE OF THE AGREEMENT.
 * You can obtain a current copy of the Eclipse Public License from
 * http://www.opensource.org/licenses/eclipse-1.0.php
 *
 * Contributors:
 *     Andrew Eisenberg (VMware) - initial API and implementation
 *     Manu Sridharan (IBM) - Various improvements
 ******************************************************************************/

/*******************************************************************************
 * @license
 * Copyright (c) 2013 IBM Corporation.
 * All rights reserved. This program and the accompanying materials are made
 * available under the terms of the Eclipse Public License v1.0
 * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution
 * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).
 *
 * Contributors:
 *     Manu Sridharan (IBM) - Initial API and implementation
 ******************************************************************************/

/*******************************************************************************
 * @license
 * Copyright (c) 2013 IBM Corporation.
 * All rights reserved. This program and the accompanying materials are made
 * available under the terms of the Eclipse Public License v1.0
 * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution
 * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).
 *
 * Contributors:
 *     IBM Corporation - Initial API and implementation
 ******************************************************************************/

/*******************************************************************************
 * @license
 * Copyright (c) 2013 IBM Corporation.
 *
 * THIS FILE IS PROVIDED UNDER THE TERMS OF THE ECLIPSE PUBLIC LICENSE
 * ("AGREEMENT"). ANY USE, REPRODUCTION OR DISTRIBUTION OF THIS FILE
 * CONSTITUTES RECIPIENTS ACCEPTANCE OF THE AGREEMENT.
 * You can obtain a current copy of the Eclipse Public License from
 * http://www.opensource.org/licenses/eclipse-1.0.php
 *
 * Contributors:
 *     Manu Sridharan (IBM) - Initial API and implementation
 ******************************************************************************/

/*******************************************************************************
 * @license
 * Copyright (c) 2012 VMware, Inc. All Rights Reserved.
 * Copyright (c) 2013 IBM Corporation.
 *
 * THIS FILE IS PROVIDED UNDER THE TERMS OF THE ECLIPSE PUBLIC LICENSE
 * ("AGREEMENT"). ANY USE, REPRODUCTION OR DISTRIBUTION OF THIS FILE
 * CONSTITUTES RECIPIENTS ACCEPTANCE OF THE AGREEMENT.
 * You can obtain a current copy of the Eclipse Public License from
 * http://www.opensource.org/licenses/eclipse-1.0.php
 *
 * Contributors:
 *	 Andy Clement (VMware) - initial API and implementation
 *	 Andrew Eisenberg (VMware) - implemented visitor pattern
 *       Manu Sridharan (IBM) - Various improvements
 ******************************************************************************/

/*******************************************************************************
 * @license
 * Copyright (c) 2011, 2012 IBM Corporation and others.
 * Copyright (c) 2012 VMware, Inc.
 * All rights reserved. This program and the accompanying materials are made 
 * available under the terms of the Eclipse Public License v1.0 
 * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution 
 * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). 
 *
 * Contributors:
 *     IBM Corporation - initial API and implementation
 *     Andrew Eisenberg - rename to jsTemplateContentAssist.js
 *******************************************************************************/

/**
 * @license
 * lodash 3.8.0 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -o ./lodash.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */

/**
 * @fileoverview A factory for creating AST nodes
 * @author Fred K. Schott
 * @copyright 2014 Fred K. Schott. All rights reserved.
 * @copyright 2011-2013 Ariya Hidayat <ariya.hidayat@gmail.com>
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @fileoverview The AST node types produced by the parser.
 * @author Nicholas C. Zakas
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2011-2013 Ariya Hidayat <ariya.hidayat@gmail.com>
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @fileoverview Attaches comments to the AST.
 * @author Nicholas C. Zakas
 * @copyright 2015 Nicholas C. Zakas. All rights reserved.
 * @copyright 2011-2013 Ariya Hidayat <ariya.hidayat@gmail.com>
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @fileoverview The list of feature flags supported by the parser and their default
 *      settings.
 * @author Nicholas C. Zakas
 * @copyright 2015 Fred K. Schott. All rights reserved.
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @fileoverview Error messages returned by the parser.
 * @author Nicholas C. Zakas
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2011-2013 Ariya Hidayat <ariya.hidayat@gmail.com>
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @fileoverview A simple map that helps avoid collisions on the Object prototype.
 * @author Jamund Ferguson
 * @copyright 2015 Jamund Ferguson. All rights reserved.
 * @copyright 2011-2013 Ariya Hidayat <ariya.hidayat@gmail.com>
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @fileoverview Various syntax/pattern checks for parsing.
 * @author Nicholas C. Zakas
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2011-2013 Ariya Hidayat <ariya.hidayat@gmail.com>
 * @copyright 2012-2013 Mathias Bynens <mathias@qiwi.be>
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @fileoverview Contains token information.
 * @author Nicholas C. Zakas
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2013 Thaddee Tyl <thaddee.tyl@gmail.com>
 * @copyright 2011-2013 Ariya Hidayat <ariya.hidayat@gmail.com>
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @fileoverview The list of XHTML entities that are valid in JSX.
 * @author Nicholas C. Zakas
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/*
Copyright (C) 2015 Fred K. Schott <fkschott@gmail.com>
Copyright (C) 2013 Ariya Hidayat <ariya.hidayat@gmail.com>
Copyright (C) 2013 Thaddee Tyl <thaddee.tyl@gmail.com>
Copyright (C) 2013 Mathias Bynens <mathias@qiwi.be>
Copyright (C) 2012 Ariya Hidayat <ariya.hidayat@gmail.com>
Copyright (C) 2012 Mathias Bynens <mathias@qiwi.be>
Copyright (C) 2012 Joost-Wim Boekesteijn <joost-wim@boekesteijn.nl>
Copyright (C) 2012 Kris Kowal <kris.kowal@cixar.com>
Copyright (C) 2012 Yusuke Suzuki <utatane.tea@gmail.com>
Copyright (C) 2012 Arpad Borsos <arpad.borsos@googlemail.com>
Copyright (C) 2011 Ariya Hidayat <ariya.hidayat@gmail.com>

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright
  notice, this list of conditions and the following disclaimer.
* Redistributions in binary form must reproduce the above copyright
  notice, this list of conditions and the following disclaimer in the
  documentation and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/**
 * @fileoverview Defines environment settings and globals.
 * @author Elan Shanker
 * @copyright 2014 Elan Shanker. All rights reserved.
 */

// Copyright (c) 2009 Thomas Robinson <280north.com>

// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or

// The above copyright notice and this permission notice shall be included in

// Copyright Joyent, Inc. and other Node contributors.

// distribute, sublicense, and/or sell copies of the Software, and to permit

// The above copyright notice and this permission notice shall be included

/*
  Copyright (C) 2012-2014 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2014 Dan Tao <daniel.tao@gmail.com>
  Copyright (C) 2013 Andrew Eisenberg <andrew@eisenberg.as>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
  Copyright (C) 2014 Yusuke Suzuki <utatane.tea@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
  Copyright (C) 2013 Yusuke Suzuki <utatane.tea@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
  Copyright (C) 2013-2014 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2014 Ivan Nikulin <ifaaan@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
  Copyright (C) 2013 Yusuke Suzuki <utatane.tea@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
  Copyright (C) 2015 Yusuke Suzuki <utatane.tea@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
  Copyright (C) 2012-2014 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2013 Alex Seville <hi@alexanderseville.com>
  Copyright (C) 2014 Thiago de Arruda <tpadilha84@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
  Copyright (C) 2012-2013 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2012 Ariya Hidayat <ariya.hidayat@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/**
 * @fileoverview Validates configs.
 * @author Brandon Mills
 * @copyright 2015 Brandon Mills
 */

/**
 * @fileoverview Rule to flag wrapping non-iife in parens
 * @author Gyandeep Singh
 * @copyright 2015 Gyandeep Singh. All rights reserved.
 */

/**
 * @fileoverview Disallows or enforces spaces inside of array brackets.
 * @author Jamund Ferguson
 * @copyright 2015 Jamund Ferguson. All rights reserved.
 * @copyright 2014 Brandyn Bennett. All rights reserved.
 * @copyright 2014 Michael Ficarra. No rights reserved.
 * @copyright 2014 Vignesh Anand. All rights reserved.
 */

/**
 * @fileoverview Rule to flag non-camelcased identifiers
 * @author Nicholas C. Zakas
 * @copyright 2015 Dieter Oberkofler. All rights reserved.
 */

/**
 * @fileoverview Rule to forbid or enforce dangling commas.
 * @author Ian Christian Myers
 * @copyright 2015 Mathias Schreck
 * @copyright 2013 Ian Christian Myers
 */

/**
 * @fileoverview Comma spacing - validates spacing before and after comma
 * @author Vignesh Anand aka vegetableman.
 * @copyright 2014 Vignesh Anand. All rights reserved.
 */

/**
 * @fileoverview Comma style - enforces comma styles of two types: last and first
 * @author Vignesh Anand aka vegetableman
 * @copyright 2014 Vignesh Anand. All rights reserved.
 * @copyright 2015 Evan Simmons. All rights reserved.
 */

/**
 * @fileoverview Disallows or enforces spaces inside computed properties.
 * @author Jamund Ferguson
 * @copyright 2015 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview Rule to enforce consistent naming of "this" context variables
 * @author Raphael Pigulla
 * @copyright 2015 Timothy Jones. All rights reserved.
 * @copyright 2015 David Aurelio. All rights reserved.
 */

/**
 * @fileoverview Validates newlines before and after dots
 * @author Greg Cochard
 * @copyright 2015 Greg Cochard
 */

/**
 * @fileoverview Rule to warn when a function expression does not have a name.
 * @author Kyle T. Nunery
 * @copyright 2015 Brandon Mills. All rights reserved.
 * @copyright 2014 Kyle T. Nunery. All rights reserved.
 */

/**
 * @fileoverview Rule to enforce a particular function style
 * @author Nicholas C. Zakas
 * @copyright 2013 Nicholas C. Zakas. All rights reserved.
 */

/**
 * @fileoverview Rule to check the spacing around the * in generator functions.
 * @author Jamund Ferguson
 * @copyright 2015 Brandon Mills. All rights reserved.
 * @copyright 2014 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview Rule to check for the position of the * in your generator functions
 * @author Jamund Ferguson
 * @copyright 2014 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview Ensure handling of errors when we know they exist.
 * @author Jamund Ferguson
 * @copyright 2014 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview This option sets a specific tab width for your code
 * This rule has been ported and modified from JSCS.
 * @author Dmitriy Shekhovtsov
 * @copyright 2015 Dmitriy Shekhovtsov. All rights reserved.
 * @copyright 2013 Dulin Marat and other contributors.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

/**
 * @fileoverview Rule to specify spacing of object literal keys and values
 * @author Brandon Mills
 * @copyright 2014 Brandon Mills. All rights reserved.
 */

/**
 * @fileoverview Rule to forbid mixing LF and LFCR line breaks.
 * @author Erik Mueller
 * @copyright 2015 Varun Verma. All rights reserverd.
 * @copyright 2015 James Whitney. All rights reserved.
 * @copyright 2015 Erik Mueller. All rights reserved.
 */

/**
 * @fileoverview Enforces empty lines around comments.
 * @author Jamund Ferguson
 * @copyright 2015 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview A rule to set the maximum depth block can be nested in a function.
 * @author Ian Christian Myers
 * @copyright 2013 Ian Christian Myers. All rights reserved.
 */

/**
 * @fileoverview Rule to check for max length on a line.
 * @author Matt DuVall <http://www.mattduvall.com>
 * @copyright 2013 Matt DuVall. All rights reserved.
 */

/**
 * @fileoverview Rule to enforce a maximum number of nested callbacks.
 * @author Ian Christian Myers
 * @copyright 2013 Ian Christian Myers. All rights reserved.
 */

/**
 * @fileoverview Rule to flag when a function has too many parameters
 * @author Ilya Volodin
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2013 Ilya Volodin. All rights reserved.
 */

/**
 * @fileoverview A rule to set the maximum number of statements in a function.
 * @author Ian Christian Myers
 * @copyright 2013 Ian Christian Myers. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of constructors without capital letters
 * @author Nicholas C. Zakas
 * @copyright 2014 Jordan Harband. All rights reserved.
 * @copyright 2013-2014 Nicholas C. Zakas. All rights reserved.
 */

/**
 * @fileoverview Rule to check empty newline after "var" statement
 * @author Gopal Venkatesan
 * @copyright 2015 Gopal Venkatesan. All rights reserved.
 * @copyright 2015 Casey Visco. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of alert, confirm, prompt
 * @author Nicholas C. Zakas
 * @copyright 2015 Mathias Schreck
 * @copyright 2013 Nicholas C. Zakas
 */

/**
 * @fileoverview Rule to flag use constant conditions
 * @author Christian Schulz <http://rndm.de>
 * @copyright 2014 Christian Schulz. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of continue statement
 * @author Borislav Zhivkov
 * @copyright 2015 Borislav Zhivkov. All rights reserved.
 */

/**
 * @fileoverview Rule to flag duplicate arguments
 * @author Jamund Ferguson
 * @copyright 2015 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of duplicate keys in an object.
 * @author Ian Christian Myers
 * @copyright 2013 Ian Christian Myers. All rights reserved.
 * @copyright 2013 Nicholas C. Zakas. All rights reserved.
 */

/**
 * @fileoverview Rule to disallow a duplicate case label.
 * @author Dieter Oberkofler
 * @copyright 2015 Dieter Oberkofler. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of an empty block statement
 * @author Nicholas C. Zakas
 * @copyright Nicholas C. Zakas. All rights reserved.
 * @copyright 2015 Dieter Oberkofler. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of eval() statement
 * @author Nicholas C. Zakas
 * @copyright 2015 Mathias Schreck. All rights reserved.
 * @copyright 2013 Nicholas C. Zakas. All rights reserved.
 */

/**
 * @fileoverview Rule to flag unnecessary bind calls
 * @author Bence Dányi <bence@danyi.me>
 * @copyright 2014 Bence Dányi. All rights reserved.
 */

/**
 * @fileoverview Disallow parenthesising higher precedence subexpressions.
 * @author Michael Ficarra
 * @copyright 2014 Michael Ficarra. All rights reserved.
 */

/**
 * @fileoverview Rule to flag unnecessary strict directives.
 * @author Ian Christian Myers
 * @copyright 2014 Ian Christian Myers. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of function declaration identifiers as variables.
 * @author Ian Christian Myers
 * @copyright 2013 Ian Christian Myers. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of implied eval via setTimeout and setInterval
 * @author James Allardice
 * @copyright 2015 Mathias Schreck. All rights reserved.
 * @copyright 2013 James Allardice. All rights reserved.
 */

/**
 * @fileoverview Enforces or disallows inline comments.
 * @author Greg Cochard
 * @copyright 2014 Greg Cochard. All rights reserved.
 */

/**
 * @fileoverview Rule to enforce declarations in program or function body root.
 * @author Brandon Mills
 * @copyright 2014 Brandon Mills. All rights reserved.
 */

/**
 * @fileoverview Validate strings passed to the RegExp constructor
 * @author Michael Ficarra
 * @copyright 2014 Michael Ficarra. All rights reserved.
 */

/**
 * @fileoverview Rule to disalow whitespace that is not a tab or space, whitespace inside strings and comments are allowed
 * @author Jonathan Kingston
 * @copyright 2014 Jonathan Kingston. All rights reserved.
 */

/**
 * @fileoverview Rule to flag blocks with no reason to exist
 * @author Brandon Mills
 * @copyright 2015 Roberto Vidal. All rights reserved.
 * @copyright 2014 Brandon Mills. All rights reserved.
 */

/**
 * @fileoverview Rule to flag creation of function inside a loop
 * @author Ilya Volodin
 * @copyright 2013 Ilya Volodin. All rights reserved.
 */

/**
 * @fileoverview Disallow mixed spaces and tabs for indentation
 * @author Jary Niebur
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2014 Jary Niebur. All rights reserved.
 */

/**
 * @fileoverview Disallow use of multiple spaces.
 * @author Nicholas C. Zakas
 * @copyright 2015 Brandon Mills. All rights reserved.
 * @copyright 2015 Nicholas C. Zakas. All rights reserved.
 */

/**
 * @fileoverview Rule to flag when using multiline strings
 * @author Ilya Volodin
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2013 Ilya Volodin. All rights reserved.
 */

/**
 * @fileoverview Disallows multiple blank lines.
 * implementation adapted from the no-trailing-spaces rule.
 * @author Greg Cochard
 * @copyright 2014 Greg Cochard. All rights reserved.
 */

/**
 * @fileoverview Disallow reassignment of function parameters.
 * @author Nat Burns
 * @copyright 2014 Nat Burns. All rights reserved.
 */

/**
 * @fileoverview Disallow the use of process.env()
 * @author Vignesh Anand
 * @copyright 2014 Vignesh Anand. All rights reserved.
 */

/**
 * @fileoverview Rule to disallow reserved words being used as keys
 * @author Emil Bay
 * @copyright 2014 Emil Bay. All rights reserved.
 */

/**
 * @fileoverview Disallow shadowing of NaN, undefined, and Infinity (ES5 section 15.1.1)
 * @author Michael Ficarra
 * @copyright 2013 Michael Ficarra. All rights reserved.
 */

/**
 * @fileoverview Rule to flag on declaring variables already declared in the outer scope
 * @author Ilya Volodin
 * @copyright 2013 Ilya Volodin. All rights reserved.
 */

/**
 * @fileoverview Rule to disallow whitespace before the semicolon
 * @author Jonathan Kingston
 * @copyright 2015 Mathias Schreck
 * @copyright 2014 Jonathan Kingston
 */

/**
 * @fileoverview Rule to restrict what can be thrown as an exception.
 * @author Dieter Oberkofler
 * @copyright 2015 Dieter Oberkofler. All rights reserved.
 */

/**
 * @fileoverview Disallow trailing spaces at the end of lines.
 * @author Nodeca Team <https://github.com/nodeca>
 * @copyright 2015 Greg Cochard
 */

/**
 * @fileoverview Rule to flag references to undeclared variables.
 * @author Mark Macdonald
 * @copyright 2015 Nicholas C. Zakas. All rights reserved.
 * @copyright 2013 Mark Macdonald. All rights reserved.
 */

/**
 * @fileoverview Rule to flag no-unneeded-ternary
 * @author Gyandeep Singh
 * @copyright 2015 Gyandeep Singh. All rights reserved.
 * @copyright 2015 Michael Ficarra. All rights reserved.
 */

/**
 * @fileoverview Flag expressions in statement position that do not side effect
 * @author Michael Ficarra
 * @copyright 2013 Michael Ficarra. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of variables before they are defined
 * @author Ilya Volodin
 * @copyright 2013 Ilya Volodin. All rights reserved.
 */

/**
 * @fileoverview Rule to check for the usage of var.
 * @author Jamund Ferguson
 * @copyright 2014 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview Rule to disallow use of void operator.
 * @author Mike Sidorov
 * @copyright 2014 Mike Sidorov. All rights reserved.
 */

/**
 * @fileoverview Rule to flag wrapping non-iife in parens
 * @author Ilya Volodin
 * @copyright 2013 Ilya Volodin. All rights reserved.
 */

/**
 * @fileoverview Disallows or enforces spaces inside of object literals.
 * @author Jamund Ferguson
 * @copyright 2014 Brandyn Bennett. All rights reserved.
 * @copyright 2014 Michael Ficarra. No rights reserved.
 * @copyright 2014 Vignesh Anand. All rights reserved.
 * @copyright 2015 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview Rule to enforce concise object methods and properties.
 * @author Jamund Ferguson
 * @copyright 2015 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview A rule to control the use of single variable declarations.
 * @author Ian Christian Myers
 * @copyright 2015 Ian VanSchooten. All rights reserved.
 * @copyright 2015 Joey Baker. All rights reserved.
 * @copyright 2015 Danny Fritz. All rights reserved.
 * @copyright 2013 Ian Christian Myers. All rights reserved.
 */

/**
 * @fileoverview Rule to replace assignment expressions with operator assignment
 * @author Brandon Mills
 * @copyright 2014 Brandon Mills. All rights reserved.
 */

/**
 * @fileoverview Operator linebreak - enforces operator linebreak style of two types: after and before
 * @author Benoît Zugmeyer
 * @copyright 2015 Benoît Zugmeyer. All rights reserved.
 */

/**
 * @fileoverview A rule to ensure blank lines within blocks.
 * @author Mathias Schreck <https://github.com/lo1tuma>
 * @copyright 2014 Mathias Schreck. All rights reserved.
 */

/**
 * @fileoverview A rule to suggest using of const declaration for variables that are never modified after declared.
 * @author Toru Nagashima
 * @copyright 2015 Toru Nagashima. All rights reserved.
 */

/**
 * @fileoverview Rule to flag non-quoted property names in object literals.
 * @author Mathias Bynens <http://mathiasbynens.be/>
 * @copyright 2014 Brandon Mills. All rights reserved.
 */

/**
 * @fileoverview Validates spacing before and after semicolon
 * @author Mathias Schreck
 * @copyright 2015 Mathias Schreck
 */

/**
 * @fileoverview Rule to enforce consistent spacing after function names
 * @author Roberto Vidal
 * @copyright 2014 Roberto Vidal. All rights reserved.
 */

/**
 * @fileoverview Rule to enforce the number of spaces after certain keywords
 * @author Nick Fisher
 * @copyright 2014 Nick Fisher. All rights reserved.
 */

/**
 * @fileoverview A rule to ensure whitespace before blocks.
 * @author Mathias Schreck <https://github.com/lo1tuma>
 * @copyright 2014 Mathias Schreck. All rights reserved.
 */

/**
 * @fileoverview Rule to validate spacing before function paren.
 * @author Mathias Schreck <https://github.com/lo1tuma>
 * @copyright 2015 Mathias Schreck
 */

/**
 * @fileoverview Rule to validate spacing before function parentheses.
 * @author Mathias Schreck <https://github.com/lo1tuma>
 * @copyright 2015 Mathias Schreck
 */

/**
 * @fileoverview Disallows or enforces spaces inside of brackets.
 * @author Ian Christian Myers
 * @copyright 2014 Brandyn Bennett. All rights reserved.
 * @copyright 2014 Michael Ficarra. No rights reserved.
 * @copyright 2014 Vignesh Anand. All rights reserved.
 */

/**
 * @fileoverview Disallows or enforces spaces inside of parentheses.
 * @author Jonathan Rajavuori
 * @copyright 2014 David Clark. All rights reserved.
 * @copyright 2014 Jonathan Rajavuori. All rights reserved.
 */

/**
 * @fileoverview This rule shoud require or disallow spaces before or after unary operations.
 * @author Marcin Kumorek
 * @copyright 2014 Marcin Kumorek. All rights reserved.
 */

/**
 * @fileoverview Source code for spaced-comments rule
 * @author Gyandeep Singh
 * @copyright 2015 Gyandeep Singh. All rights reserved.
 * @copyright 2014 Greg Cochard. All rights reserved.
 */

/**
 * @fileoverview Enforces or disallows a space beginning a single-line comment.
 * @author Greg Cochard
 * @copyright 2014 Greg Cochard. All rights reserved.
 */

/**
 * @fileoverview Rule to control usage of strict mode directives.
 * @author Brandon Mills
 * @copyright 2015 Brandon Mills. All rights reserved.
 * @copyright 2013-2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2013 Ian Christian Myers. All rights reserved.
 */

/**
 * @fileoverview Rule to flag comparisons to the value NaN
 * @author James Allardice
 * @copyright 2014 Jordan Harband. All rights reserved.
 * @copyright 2013 James Allardice. All rights reserved.
 */

/**
 * @fileoverview Validates JSDoc comments are syntactically correct
 * @author Nicholas C. Zakas
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 */

/**
 * @fileoverview Rule to enforce var declarations are only at the top of a function.
 * @author Danny Fritz
 * @author Gyandeep Singh
 * @copyright 2014 Danny Fritz. All rights reserved.
 * @copyright 2014 Gyandeep Singh. All rights reserved.
 */

/**
 * @fileoverview Rule to flag when IIFE is not wrapped in parens
 * @author Ilya Volodin
 * @copyright 2013 Ilya Volodin. All rights reserved.
 */

/**
 * @fileoverview Rule to require or disallow yoda comparisons
 * @author Nicholas C. Zakas
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2014 Brandon Mills. All rights reserved.
 */

/**
 * @fileoverview Tracks performance of individual rules.
 * @author Brandon Mills
 * @copyright 2014 Brandon Mills. All rights reserved.
 */

/**
 * @fileoverview Object to handle access and retrieval of tokens.
 * @author Brandon Mills
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2014 Brandon Mills. All rights reserved.
 */

/*

  The MIT License (MIT)

  Copyright (c) 2007-2013 Einar Lielmanis and contributors.

  Permission is hereby granted, free of charge, to any person
  obtaining a copy of this software and associated documentation files
  (the "Software"), to deal in the Software without restriction,
  including without limitation the rights to use, copy, modify, merge,
  publish, distribute, sublicense, and/or sell copies of the Software,
  and to permit persons to whom the Software is furnished to do so,
  subject to the following conditions:

  The above copyright notice and this permission notice shall be
  included in all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS
  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
  SOFTWARE.

 JS Beautifier
---------------


  Written by Einar Lielmanis, <einar@jsbeautifier.org>
      http://jsbeautifier.org/

  Originally converted to javascript by Vital, <vital76@gmail.com>
  "End braces on own line" added by Chris J. Shull, <chrisjshull@gmail.com>
  Parsing improvements for brace-less statements by Liam Newman <bitwiseman@gmail.com>


  Usage:
    js_beautify(js_source_text);
    js_beautify(js_source_text, options);

  The options are:
    indent_size (default 4)          - indentation size,
    indent_char (default space)      - character to indent with,
    preserve_newlines (default true) - whether existing line breaks should be preserved,
    max_preserve_newlines (default unlimited) - maximum number of line breaks to be preserved in one chunk,

    jslint_happy (default false) - if true, then jslint-stricter mode is enforced.

            jslint_happy   !jslint_happy
            ---------------------------------
             function ()      function()

    brace_style (default "collapse") - "collapse" | "expand" | "end-expand"
            put braces on the same line as control statements (default), or put braces on own line (Allman / ANSI style), or just put end braces on own line.

    space_before_conditional (default true) - should the space before conditional statement be added, "if(true)" vs "if (true)",

    unescape_strings (default false) - should printable characters in strings encoded in \xNN notation be unescaped, "example" vs "\x65\x78\x61\x6d\x70\x6c\x65"

    wrap_line_length (default unlimited) - lines should wrap at next opportunity after this number of characters.
          NOTE: This is not a hard limit. Lines will continue until a point where a newline would
                be preserved if it were present.

    e.g

    js_beautify(js_source_text, {
      'indent_size': 1,
      'indent_char': '\t'
    });

*/

// license. The Unicode regexps (for identifiers and whitespace) were

// if (a) if (b) if(c) d(); else e(); else f();

// http://wiki.commonjs.org/wiki/Unit_Testing/1.0
//
// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!
//
// Originally from narwhal.js (http://narwhaljs.org)
// Copyright (c) 2009 Thomas Robinson <280north.com>
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the 'Software'), to
// deal in the Software without restriction, including without limitation the
// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
// sell copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2013 SAP SE. All rights reserved
 */

//---------------------------------------------------------------------
// QRCode for JavaScript
//
// Copyright (c) 2009 Kazuhiko Arase
//
// URL: http://www.d-project.com/
//
// Licensed under the MIT license:
//   http://www.opensource.org/licenses/mit-license.php
//
// The word "QR Code" is registered trademark of 
// DENSO WAVE INCORPORATED
//   http://www.denso-wave.com/qrcode/faqpatent-e.html
//
//---------------------------------------------------------------------

/**
 * Copyright 2013 Craig Campbell
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Mousetrap is a simple keyboard shortcut library for Javascript with
 * no external dependencies
 *
 * @version 1.4.6
 * @url craig.is/killing/mice
 */

/**
	 *
	 *  Base64 encode / decode
	 *  http://www.webtoolkit.info/
	 *  This Base64 function is licensed under CC BY 2.0 UK
	 *  http://creativecommons.org/licenses/by/2.0/uk/legalcode
	 *
	 **/

/*!The MIT License (MIT)
 *
 * Copyright (c) 2014 Petka Antonov
 *
 * With parts by 2009-2014 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */

/*
 * jQuery XPath plugin v0.2.5
 * https://github.com/ilinsky/jquery-xpath
 * Copyright 2013, Sergey Ilinsky
 * Dual licensed under the MIT and GPL licenses.
 *
 * Includes xpath.js - XPath 2.0 implementation in JavaScript
 * https://github.com/ilinsky/xpath.js
 * Copyright 2013, Sergey Ilinsky
 * Dual licensed under the MIT and GPL licenses.
 *
 */

/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */

/**
 * @fileoverview A factory for creating AST nodes
 * @author Fred K. Schott
 * @copyright 2014 Fred K. Schott. All rights reserved.
 * @copyright 2011-2013 Ariya Hidayat <ariya.hidayat@gmail.com>
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @fileoverview The AST node types produced by the parser.
 * @author Nicholas C. Zakas
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2011-2013 Ariya Hidayat <ariya.hidayat@gmail.com>
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @fileoverview Attaches comments to the AST.
 * @author Nicholas C. Zakas
 * @copyright 2015 Nicholas C. Zakas. All rights reserved.
 * @copyright 2011-2013 Ariya Hidayat <ariya.hidayat@gmail.com>
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @fileoverview The list of feature flags supported by the parser and their default
 *      settings.
 * @author Nicholas C. Zakas
 * @copyright 2015 Fred K. Schott. All rights reserved.
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @fileoverview Error messages returned by the parser.
 * @author Nicholas C. Zakas
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2011-2013 Ariya Hidayat <ariya.hidayat@gmail.com>
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @fileoverview A simple map that helps avoid collisions on the Object prototype.
 * @author Jamund Ferguson
 * @copyright 2015 Jamund Ferguson. All rights reserved.
 * @copyright 2011-2013 Ariya Hidayat <ariya.hidayat@gmail.com>
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @fileoverview Various syntax/pattern checks for parsing.
 * @author Nicholas C. Zakas
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2011-2013 Ariya Hidayat <ariya.hidayat@gmail.com>
 * @copyright 2012-2013 Mathias Bynens <mathias@qiwi.be>
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @fileoverview Contains token information.
 * @author Nicholas C. Zakas
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2013 Thaddee Tyl <thaddee.tyl@gmail.com>
 * @copyright 2011-2013 Ariya Hidayat <ariya.hidayat@gmail.com>
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @fileoverview The list of XHTML entities that are valid in JSX.
 * @author Nicholas C. Zakas
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/*
Copyright (C) 2015 Fred K. Schott <fkschott@gmail.com>
Copyright (C) 2013 Ariya Hidayat <ariya.hidayat@gmail.com>
Copyright (C) 2013 Thaddee Tyl <thaddee.tyl@gmail.com>
Copyright (C) 2013 Mathias Bynens <mathias@qiwi.be>
Copyright (C) 2012 Ariya Hidayat <ariya.hidayat@gmail.com>
Copyright (C) 2012 Mathias Bynens <mathias@qiwi.be>
Copyright (C) 2012 Joost-Wim Boekesteijn <joost-wim@boekesteijn.nl>
Copyright (C) 2012 Kris Kowal <kris.kowal@cixar.com>
Copyright (C) 2012 Yusuke Suzuki <utatane.tea@gmail.com>
Copyright (C) 2012 Arpad Borsos <arpad.borsos@googlemail.com>
Copyright (C) 2011 Ariya Hidayat <ariya.hidayat@gmail.com>

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright
  notice, this list of conditions and the following disclaimer.
* Redistributions in binary form must reproduce the above copyright
  notice, this list of conditions and the following disclaimer in the
  documentation and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/**
 * @fileoverview Defines environment settings and globals.
 * @author Elan Shanker
 * @copyright 2014 Elan Shanker. All rights reserved.
 */

/*
  Copyright (C) 2012-2014 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2014 Dan Tao <daniel.tao@gmail.com>
  Copyright (C) 2013 Andrew Eisenberg <andrew@eisenberg.as>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
  Copyright (C) 2014 Yusuke Suzuki <utatane.tea@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
  Copyright (C) 2013 Yusuke Suzuki <utatane.tea@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
  Copyright (C) 2013-2014 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2014 Ivan Nikulin <ifaaan@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
  Copyright (C) 2013 Yusuke Suzuki <utatane.tea@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
  Copyright (C) 2015 Yusuke Suzuki <utatane.tea@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
  Copyright (C) 2012-2014 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2013 Alex Seville <hi@alexanderseville.com>
  Copyright (C) 2014 Thiago de Arruda <tpadilha84@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
  Copyright (C) 2012-2013 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2012 Ariya Hidayat <ariya.hidayat@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/**
 * @fileoverview Validates configs.
 * @author Brandon Mills
 * @copyright 2015 Brandon Mills
 */

/**
 * @fileoverview Rule to flag wrapping non-iife in parens
 * @author Gyandeep Singh
 * @copyright 2015 Gyandeep Singh. All rights reserved.
 */

/**
 * @fileoverview Disallows or enforces spaces inside of array brackets.
 * @author Jamund Ferguson
 * @copyright 2015 Jamund Ferguson. All rights reserved.
 * @copyright 2014 Brandyn Bennett. All rights reserved.
 * @copyright 2014 Michael Ficarra. No rights reserved.
 * @copyright 2014 Vignesh Anand. All rights reserved.
 */

/**
 * @fileoverview Rule to flag non-camelcased identifiers
 * @author Nicholas C. Zakas
 * @copyright 2015 Dieter Oberkofler. All rights reserved.
 */

/**
 * @fileoverview Rule to forbid or enforce dangling commas.
 * @author Ian Christian Myers
 * @copyright 2015 Mathias Schreck
 * @copyright 2013 Ian Christian Myers
 */

/**
 * @fileoverview Comma spacing - validates spacing before and after comma
 * @author Vignesh Anand aka vegetableman.
 * @copyright 2014 Vignesh Anand. All rights reserved.
 */

/**
 * @fileoverview Comma style - enforces comma styles of two types: last and first
 * @author Vignesh Anand aka vegetableman
 * @copyright 2014 Vignesh Anand. All rights reserved.
 * @copyright 2015 Evan Simmons. All rights reserved.
 */

/**
 * @fileoverview Disallows or enforces spaces inside computed properties.
 * @author Jamund Ferguson
 * @copyright 2015 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview Rule to enforce consistent naming of "this" context variables
 * @author Raphael Pigulla
 * @copyright 2015 Timothy Jones. All rights reserved.
 * @copyright 2015 David Aurelio. All rights reserved.
 */

/**
 * @fileoverview Validates newlines before and after dots
 * @author Greg Cochard
 * @copyright 2015 Greg Cochard
 */

/**
 * @fileoverview Rule to warn when a function expression does not have a name.
 * @author Kyle T. Nunery
 * @copyright 2015 Brandon Mills. All rights reserved.
 * @copyright 2014 Kyle T. Nunery. All rights reserved.
 */

/**
 * @fileoverview Rule to enforce a particular function style
 * @author Nicholas C. Zakas
 * @copyright 2013 Nicholas C. Zakas. All rights reserved.
 */

/**
 * @fileoverview Rule to check the spacing around the * in generator functions.
 * @author Jamund Ferguson
 * @copyright 2015 Brandon Mills. All rights reserved.
 * @copyright 2014 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview Rule to check for the position of the * in your generator functions
 * @author Jamund Ferguson
 * @copyright 2014 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview Ensure handling of errors when we know they exist.
 * @author Jamund Ferguson
 * @copyright 2014 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview This option sets a specific tab width for your code
 * This rule has been ported and modified from JSCS.
 * @author Dmitriy Shekhovtsov
 * @copyright 2015 Dmitriy Shekhovtsov. All rights reserved.
 * @copyright 2013 Dulin Marat and other contributors.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

/**
 * @fileoverview Rule to specify spacing of object literal keys and values
 * @author Brandon Mills
 * @copyright 2014 Brandon Mills. All rights reserved.
 */

/**
 * @fileoverview Rule to forbid mixing LF and LFCR line breaks.
 * @author Erik Mueller
 * @copyright 2015 Varun Verma. All rights reserverd.
 * @copyright 2015 James Whitney. All rights reserved.
 * @copyright 2015 Erik Mueller. All rights reserved.
 */

/**
 * @fileoverview Enforces empty lines around comments.
 * @author Jamund Ferguson
 * @copyright 2015 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview A rule to set the maximum depth block can be nested in a function.
 * @author Ian Christian Myers
 * @copyright 2013 Ian Christian Myers. All rights reserved.
 */

/**
 * @fileoverview Rule to check for max length on a line.
 * @author Matt DuVall <http://www.mattduvall.com>
 * @copyright 2013 Matt DuVall. All rights reserved.
 */

/**
 * @fileoverview Rule to enforce a maximum number of nested callbacks.
 * @author Ian Christian Myers
 * @copyright 2013 Ian Christian Myers. All rights reserved.
 */

/**
 * @fileoverview Rule to flag when a function has too many parameters
 * @author Ilya Volodin
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2013 Ilya Volodin. All rights reserved.
 */

/**
 * @fileoverview A rule to set the maximum number of statements in a function.
 * @author Ian Christian Myers
 * @copyright 2013 Ian Christian Myers. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of constructors without capital letters
 * @author Nicholas C. Zakas
 * @copyright 2014 Jordan Harband. All rights reserved.
 * @copyright 2013-2014 Nicholas C. Zakas. All rights reserved.
 */

/**
 * @fileoverview Rule to check empty newline after "var" statement
 * @author Gopal Venkatesan
 * @copyright 2015 Gopal Venkatesan. All rights reserved.
 * @copyright 2015 Casey Visco. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of alert, confirm, prompt
 * @author Nicholas C. Zakas
 * @copyright 2015 Mathias Schreck
 * @copyright 2013 Nicholas C. Zakas
 */

/**
 * @fileoverview Rule to flag use constant conditions
 * @author Christian Schulz <http://rndm.de>
 * @copyright 2014 Christian Schulz. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of continue statement
 * @author Borislav Zhivkov
 * @copyright 2015 Borislav Zhivkov. All rights reserved.
 */

/**
 * @fileoverview Rule to flag duplicate arguments
 * @author Jamund Ferguson
 * @copyright 2015 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of duplicate keys in an object.
 * @author Ian Christian Myers
 * @copyright 2013 Ian Christian Myers. All rights reserved.
 * @copyright 2013 Nicholas C. Zakas. All rights reserved.
 */

/**
 * @fileoverview Rule to disallow a duplicate case label.
 * @author Dieter Oberkofler
 * @copyright 2015 Dieter Oberkofler. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of an empty block statement
 * @author Nicholas C. Zakas
 * @copyright Nicholas C. Zakas. All rights reserved.
 * @copyright 2015 Dieter Oberkofler. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of eval() statement
 * @author Nicholas C. Zakas
 * @copyright 2015 Mathias Schreck. All rights reserved.
 * @copyright 2013 Nicholas C. Zakas. All rights reserved.
 */

/**
 * @fileoverview Rule to flag unnecessary bind calls
 * @author Bence Dányi <bence@danyi.me>
 * @copyright 2014 Bence Dányi. All rights reserved.
 */

/**
 * @fileoverview Disallow parenthesising higher precedence subexpressions.
 * @author Michael Ficarra
 * @copyright 2014 Michael Ficarra. All rights reserved.
 */

/**
 * @fileoverview Rule to flag unnecessary strict directives.
 * @author Ian Christian Myers
 * @copyright 2014 Ian Christian Myers. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of function declaration identifiers as variables.
 * @author Ian Christian Myers
 * @copyright 2013 Ian Christian Myers. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of implied eval via setTimeout and setInterval
 * @author James Allardice
 * @copyright 2015 Mathias Schreck. All rights reserved.
 * @copyright 2013 James Allardice. All rights reserved.
 */

/**
 * @fileoverview Enforces or disallows inline comments.
 * @author Greg Cochard
 * @copyright 2014 Greg Cochard. All rights reserved.
 */

/**
 * @fileoverview Rule to enforce declarations in program or function body root.
 * @author Brandon Mills
 * @copyright 2014 Brandon Mills. All rights reserved.
 */

/**
 * @fileoverview Validate strings passed to the RegExp constructor
 * @author Michael Ficarra
 * @copyright 2014 Michael Ficarra. All rights reserved.
 */

/**
 * @fileoverview Rule to disalow whitespace that is not a tab or space, whitespace inside strings and comments are allowed
 * @author Jonathan Kingston
 * @copyright 2014 Jonathan Kingston. All rights reserved.
 */

/**
 * @fileoverview Rule to flag blocks with no reason to exist
 * @author Brandon Mills
 * @copyright 2015 Roberto Vidal. All rights reserved.
 * @copyright 2014 Brandon Mills. All rights reserved.
 */

/**
 * @fileoverview Rule to flag creation of function inside a loop
 * @author Ilya Volodin
 * @copyright 2013 Ilya Volodin. All rights reserved.
 */

/**
 * @fileoverview Disallow mixed spaces and tabs for indentation
 * @author Jary Niebur
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2014 Jary Niebur. All rights reserved.
 */

/**
 * @fileoverview Disallow use of multiple spaces.
 * @author Nicholas C. Zakas
 * @copyright 2015 Brandon Mills. All rights reserved.
 * @copyright 2015 Nicholas C. Zakas. All rights reserved.
 */

/**
 * @fileoverview Rule to flag when using multiline strings
 * @author Ilya Volodin
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2013 Ilya Volodin. All rights reserved.
 */

/**
 * @fileoverview Disallows multiple blank lines.
 * implementation adapted from the no-trailing-spaces rule.
 * @author Greg Cochard
 * @copyright 2014 Greg Cochard. All rights reserved.
 */

/**
 * @fileoverview Disallow reassignment of function parameters.
 * @author Nat Burns
 * @copyright 2014 Nat Burns. All rights reserved.
 */

/**
 * @fileoverview Disallow the use of process.env()
 * @author Vignesh Anand
 * @copyright 2014 Vignesh Anand. All rights reserved.
 */

/**
 * @fileoverview Rule to disallow reserved words being used as keys
 * @author Emil Bay
 * @copyright 2014 Emil Bay. All rights reserved.
 */

/**
 * @fileoverview Disallow shadowing of NaN, undefined, and Infinity (ES5 section 15.1.1)
 * @author Michael Ficarra
 * @copyright 2013 Michael Ficarra. All rights reserved.
 */

/**
 * @fileoverview Rule to flag on declaring variables already declared in the outer scope
 * @author Ilya Volodin
 * @copyright 2013 Ilya Volodin. All rights reserved.
 */

/**
 * @fileoverview Rule to disallow whitespace before the semicolon
 * @author Jonathan Kingston
 * @copyright 2015 Mathias Schreck
 * @copyright 2014 Jonathan Kingston
 */

/**
 * @fileoverview Rule to restrict what can be thrown as an exception.
 * @author Dieter Oberkofler
 * @copyright 2015 Dieter Oberkofler. All rights reserved.
 */

/**
 * @fileoverview Disallow trailing spaces at the end of lines.
 * @author Nodeca Team <https://github.com/nodeca>
 * @copyright 2015 Greg Cochard
 */

/**
 * @fileoverview Rule to flag references to undeclared variables.
 * @author Mark Macdonald
 * @copyright 2015 Nicholas C. Zakas. All rights reserved.
 * @copyright 2013 Mark Macdonald. All rights reserved.
 */

/**
 * @fileoverview Rule to flag no-unneeded-ternary
 * @author Gyandeep Singh
 * @copyright 2015 Gyandeep Singh. All rights reserved.
 * @copyright 2015 Michael Ficarra. All rights reserved.
 */

/**
 * @fileoverview Flag expressions in statement position that do not side effect
 * @author Michael Ficarra
 * @copyright 2013 Michael Ficarra. All rights reserved.
 */

/**
 * @fileoverview Rule to flag use of variables before they are defined
 * @author Ilya Volodin
 * @copyright 2013 Ilya Volodin. All rights reserved.
 */

/**
 * @fileoverview Rule to check for the usage of var.
 * @author Jamund Ferguson
 * @copyright 2014 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview Rule to disallow use of void operator.
 * @author Mike Sidorov
 * @copyright 2014 Mike Sidorov. All rights reserved.
 */

/**
 * @fileoverview Rule to flag wrapping non-iife in parens
 * @author Ilya Volodin
 * @copyright 2013 Ilya Volodin. All rights reserved.
 */

/**
 * @fileoverview Disallows or enforces spaces inside of object literals.
 * @author Jamund Ferguson
 * @copyright 2014 Brandyn Bennett. All rights reserved.
 * @copyright 2014 Michael Ficarra. No rights reserved.
 * @copyright 2014 Vignesh Anand. All rights reserved.
 * @copyright 2015 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview Rule to enforce concise object methods and properties.
 * @author Jamund Ferguson
 * @copyright 2015 Jamund Ferguson. All rights reserved.
 */

/**
 * @fileoverview A rule to control the use of single variable declarations.
 * @author Ian Christian Myers
 * @copyright 2015 Ian VanSchooten. All rights reserved.
 * @copyright 2015 Joey Baker. All rights reserved.
 * @copyright 2015 Danny Fritz. All rights reserved.
 * @copyright 2013 Ian Christian Myers. All rights reserved.
 */

/**
 * @fileoverview Rule to replace assignment expressions with operator assignment
 * @author Brandon Mills
 * @copyright 2014 Brandon Mills. All rights reserved.
 */

/**
 * @fileoverview Operator linebreak - enforces operator linebreak style of two types: after and before
 * @author Benoît Zugmeyer
 * @copyright 2015 Benoît Zugmeyer. All rights reserved.
 */

/**
 * @fileoverview A rule to ensure blank lines within blocks.
 * @author Mathias Schreck <https://github.com/lo1tuma>
 * @copyright 2014 Mathias Schreck. All rights reserved.
 */

/**
 * @fileoverview A rule to suggest using of const declaration for variables that are never modified after declared.
 * @author Toru Nagashima
 * @copyright 2015 Toru Nagashima. All rights reserved.
 */

/**
 * @fileoverview Rule to flag non-quoted property names in object literals.
 * @author Mathias Bynens <http://mathiasbynens.be/>
 * @copyright 2014 Brandon Mills. All rights reserved.
 */

/**
 * @fileoverview Validates spacing before and after semicolon
 * @author Mathias Schreck
 * @copyright 2015 Mathias Schreck
 */

/**
 * @fileoverview Rule to enforce consistent spacing after function names
 * @author Roberto Vidal
 * @copyright 2014 Roberto Vidal. All rights reserved.
 */

/**
 * @fileoverview Rule to enforce the number of spaces after certain keywords
 * @author Nick Fisher
 * @copyright 2014 Nick Fisher. All rights reserved.
 */

/**
 * @fileoverview A rule to ensure whitespace before blocks.
 * @author Mathias Schreck <https://github.com/lo1tuma>
 * @copyright 2014 Mathias Schreck. All rights reserved.
 */

/**
 * @fileoverview Rule to validate spacing before function paren.
 * @author Mathias Schreck <https://github.com/lo1tuma>
 * @copyright 2015 Mathias Schreck
 */

/**
 * @fileoverview Rule to validate spacing before function parentheses.
 * @author Mathias Schreck <https://github.com/lo1tuma>
 * @copyright 2015 Mathias Schreck
 */

/**
 * @fileoverview Disallows or enforces spaces inside of brackets.
 * @author Ian Christian Myers
 * @copyright 2014 Brandyn Bennett. All rights reserved.
 * @copyright 2014 Michael Ficarra. No rights reserved.
 * @copyright 2014 Vignesh Anand. All rights reserved.
 */

/**
 * @fileoverview Disallows or enforces spaces inside of parentheses.
 * @author Jonathan Rajavuori
 * @copyright 2014 David Clark. All rights reserved.
 * @copyright 2014 Jonathan Rajavuori. All rights reserved.
 */

/**
 * @fileoverview This rule shoud require or disallow spaces before or after unary operations.
 * @author Marcin Kumorek
 * @copyright 2014 Marcin Kumorek. All rights reserved.
 */

/**
 * @fileoverview Source code for spaced-comments rule
 * @author Gyandeep Singh
 * @copyright 2015 Gyandeep Singh. All rights reserved.
 * @copyright 2014 Greg Cochard. All rights reserved.
 */

/**
 * @fileoverview Enforces or disallows a space beginning a single-line comment.
 * @author Greg Cochard
 * @copyright 2014 Greg Cochard. All rights reserved.
 */

/**
 * @fileoverview Rule to control usage of strict mode directives.
 * @author Brandon Mills
 * @copyright 2015 Brandon Mills. All rights reserved.
 * @copyright 2013-2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2013 Ian Christian Myers. All rights reserved.
 */

/**
 * @fileoverview Rule to flag comparisons to the value NaN
 * @author James Allardice
 * @copyright 2014 Jordan Harband. All rights reserved.
 * @copyright 2013 James Allardice. All rights reserved.
 */

/**
 * @fileoverview Validates JSDoc comments are syntactically correct
 * @author Nicholas C. Zakas
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 */

/**
 * @fileoverview Rule to enforce var declarations are only at the top of a function.
 * @author Danny Fritz
 * @author Gyandeep Singh
 * @copyright 2014 Danny Fritz. All rights reserved.
 * @copyright 2014 Gyandeep Singh. All rights reserved.
 */

/**
 * @fileoverview Rule to flag when IIFE is not wrapped in parens
 * @author Ilya Volodin
 * @copyright 2013 Ilya Volodin. All rights reserved.
 */

/**
 * @fileoverview Rule to require or disallow yoda comparisons
 * @author Nicholas C. Zakas
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2014 Brandon Mills. All rights reserved.
 */

/**
 * @fileoverview Tracks performance of individual rules.
 * @author Brandon Mills
 * @copyright 2014 Brandon Mills. All rights reserved.
 */

/**
 * @fileoverview Object to handle access and retrieval of tokens.
 * @author Brandon Mills
 * @copyright 2014 Nicholas C. Zakas. All rights reserved.
 * @copyright 2014 Brandon Mills. All rights reserved.
 */

/*!

 handlebars v1.3.0

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/

function QR8bitByte(e){this.mode=QRMode.MODE_8BIT_BYTE,this.data=e}function QRCode(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function QRPolynomial(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var r=0;r<e.length-n;r++)this.num[r]=e[r+n]}function QRRSBlock(e,t){this.totalCount=e,this.dataCount=t}function QRBitBuffer(){this.buffer=[],this.length=0}function Navigation(){this.aTabsHistory=[],this.iLastEditTabIndex=-1,this.iSelectedTabIndex=-1,this.MAX_TABS_LENGTH=50}(function(e){function t(e,n){if({}.hasOwnProperty.call(t.cache,e))return t.cache[e];var r=t.resolve(e);if(!r)throw new Error("Failed to resolve module "+e);var i={id:e,require:t,filename:e,exports:{},loaded:!1,parent:n,children:[]};n&&n.children.push(i);var o=e.slice(0,e.lastIndexOf("/")+1);return t.cache[e]=i.exports,r.call(i.exports,i,i.exports,o,e),i.loaded=!0,t.cache[e]=i.exports}t.modules={},t.cache={},t.resolve=function(e){return{}.hasOwnProperty.call(t.modules,e)?t.modules[e]:void 0},t.define=function(e,n){t.modules[e]=n};var n=function(){var t="/";return{title:"browser",version:"v0.10.26",browser:!0,env:{},argv:[],nextTick:e.setImmediate||function(e){setTimeout(e,0)},cwd:function(){return t},chdir:function(e){t=e}}}();t.define("/tools/entry-point.js",function(n){!function(){"use strict";e.escodegen=t("/escodegen.js",n),escodegen.browser=!0}()}),t.define("/escodegen.js",function(n,r){!function(){"use strict";function i(e){return R.Expression.hasOwnProperty(e.type)}function o(e){return R.Statement.hasOwnProperty(e.type)}function a(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function s(e,t){var n="";for(t|=0;t>0;t>>>=1,e+=e)1&t&&(n+=e);return n}function u(e){return/[\r\n]/g.test(e)}function c(e){var t=e.length;return t&&W.code.isLineTerminator(e.charCodeAt(t-1))}function l(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function p(e,t){function n(e){return"object"==typeof e&&e instanceof Object&&!(e instanceof RegExp)}var r,i;for(r in t)t.hasOwnProperty(r)&&(i=t[r],n(i)?n(e[r])?p(e[r],i):e[r]=p({},i):e[r]=i);return e}function f(e){var t,n,r,i,o;if(e!==e)throw new Error("Numeric literal whose value is NaN");if(0>e||0===e&&0>1/e)throw new Error("Numeric literal whose value is negative");if(e===1/0)return J?"null":K?"1e400":"1e+400";if(t=""+e,!K||t.length<3)return t;for(n=t.indexOf("."),J||48!==t.charCodeAt(0)||1!==n||(n=0,t=t.slice(1)),r=t,t=t.replace("e+","e"),i=0,(o=r.indexOf("e"))>0&&(i=+r.slice(o+1),r=r.slice(0,o)),n>=0&&(i-=r.length-n-1,r=+(r.slice(0,n)+r.slice(n+1))+""),o=0;48===r.charCodeAt(r.length+o-1);)--o;return 0!==o&&(i-=o,r=r.slice(0,o)),0!==i&&(r+="e"+i),(r.length<t.length||Y&&e>1e12&&Math.floor(e)===e&&(r="0x"+e.toString(16)).length<t.length)&&+r===e&&(t=r),t}function d(e,t){return 8232===(-2&e)?(t?"u":"\\u")+(8232===e?"2028":"2029"):10===e||13===e?(t?"":"\\")+(10===e?"n":"r"):String.fromCharCode(e)}function h(e){var t,n,r,i,o,a,s,u;if(n=e.toString(),e.source){if(t=n.match(/\/([^/]*)$/),!t)return n;for(r=t[1],n="",s=!1,u=!1,i=0,o=e.source.length;o>i;++i)a=e.source.charCodeAt(i),u?(n+=d(a,u),u=!1):(s?93===a&&(s=!1):47===a?n+="\\":91===a&&(s=!0),n+=d(a,u),u=92===a);return"/"+n+"/"+r}return n}function m(e,t){var n;return 8===e?"\\b":12===e?"\\f":9===e?"\\t":(n=e.toString(16).toUpperCase(),J||e>255?"\\u"+"0000".slice(n.length)+n:0!==e||W.code.isDecimalDigit(t)?11===e?"\\x0B":"\\x"+"00".slice(n.length)+n:"\\0")}function g(e){if(92===e)return"\\\\";if(10===e)return"\\n";if(13===e)return"\\r";if(8232===e)return"\\u2028";if(8233===e)return"\\u2029";throw new Error("Incorrectly classified character")}function v(e){var t,n,r,i;for(i="double"===Z?'"':"'",t=0,n=e.length;n>t;++t){if(r=e.charCodeAt(t),39===r){i='"';break}if(34===r){i="'";break}92===r&&++t}return i+e+i}function y(e){var t,n,r,i,o,a="",s=0,u=0;for(t=0,n=e.length;n>t;++t){if(r=e.charCodeAt(t),39===r)++s;else if(34===r)++u;else if(47===r&&J)a+="\\";else{if(W.code.isLineTerminator(r)||92===r){a+=g(r);continue}if(J&&32>r||!(J||et||r>=32&&126>=r)){a+=m(r,e.charCodeAt(t+1));continue}}a+=String.fromCharCode(r)}if(i=!("double"===Z||"auto"===Z&&s>u),o=i?"'":'"',!(i?s:u))return o+a+o;for(e=a,a=o,t=0,n=e.length;n>t;++t)r=e.charCodeAt(t),(39===r&&i||34===r&&!i)&&(a+="\\"),a+=String.fromCharCode(r);return a+o}function _(e){var t,n,r,i="";for(t=0,n=e.length;n>t;++t)r=e[t],i+=q(r)?_(r):r;return i}function x(e,t){if(!ct)return q(e)?_(e):e;if(null==t){if(e instanceof H)return e;t={}}return null==t.loc?new H(null,null,ct,e,t.name||null):new H(t.loc.start.line,t.loc.start.column,ct===!0?t.loc.source||null:ct,e,t.name||null)}function b(){return nt?nt:" "}function w(e,t){var n,r,i,o;return n=x(e).toString(),0===n.length?[t]:(r=x(t).toString(),0===r.length?[e]:(i=n.charCodeAt(n.length-1),o=r.charCodeAt(0),(43===i||45===i)&&i===o||W.code.isIdentifierPart(i)&&W.code.isIdentifierPart(o)||47===i&&105===o?[e,b(),t]:W.code.isWhiteSpace(i)||W.code.isLineTerminator(i)||W.code.isWhiteSpace(o)||W.code.isLineTerminator(o)?[e,t]:[e,nt,t]))}function S(e){return[X,e]}function E(e){var t;t=X,X+=$,e(X),X=t}function C(e){var t;for(t=e.length-1;t>=0&&!W.code.isLineTerminator(e.charCodeAt(t));--t);return e.length-1-t}function T(e,t){var n,r,i,o,a,s,u,c;for(n=e.split(/\r\n|[\r\n]/),s=Number.MAX_VALUE,r=1,i=n.length;i>r;++r){for(o=n[r],a=0;a<o.length&&W.code.isWhiteSpace(o.charCodeAt(a));)++a;s>a&&(s=a)}for("undefined"!=typeof t?(u=X,"*"===n[1][s]&&(t+=" "),X=t):(1&s&&--s,u=X),r=1,i=n.length;i>r;++r)c=x(S(n[r].slice(s))),n[r]=ct?c.join(""):c;return X=u,n.join("\n")}function P(e,t){if("Line"===e.type){if(c(e.value))return"//"+e.value;var n="//"+e.value;return pt||(n+="\n"),n}return st.format.indent.adjustMultilineComment&&/[\n\r]/.test(e.value)?T("/*"+e.value+"*/",t):"/*"+e.value+"*/"}function I(e,t){if(e.inlineComments)for(var n=0;n<e.inlineComments.length;n++){var r=e.inlineComments[n];e.type===V.ObjectExpression?q(t)?t.splice(2+n,0,P(r)):(t=[],t.push("{"),t.push("\n"),t.push(P(r)),t.push("}")):e.type===V.BlockStatement&&t.splice(2+n,0,P(r))}return t}function D(e,t){var n,r,i,o,a,u,l,p,f,d,h,m,g,v;if(e.leadingComments&&e.leadingComments.length>0){if(o=t,pt){for(i=e.leadingComments[0],t=[],p=i.extendedRange,f=i.range,h=lt.substring(p[0],f[0]),v=(h.match(/\n/g)||[]).length,v>0?(t.push(s("\n",v)),t.push(S(P(i)))):(t.push(h),t.push(P(i))),d=f,n=1,r=e.leadingComments.length;r>n;n++)i=e.leadingComments[n],f=i.range,m=lt.substring(d[1],f[0]),v=(m.match(/\n/g)||[]).length,t.push(s("\n",v)),t.push(S(P(i))),d=f;g=lt.substring(f[1],p[1]),v=(g.match(/\n/g)||[]).length,t.push(s("\n",v))}else for(i=e.leadingComments[0],t=[],ot&&e.type===V.Program&&0===e.body.length&&t.push("\n"),t.push(P(i)),c(x(t).toString())||t.push("\n"),n=1,r=e.leadingComments.length;r>n;++n)i=e.leadingComments[n],l=[P(i)],c(x(l).toString())||l.push("\n"),t.push(S(l));t.push(I(e,o))}else t=I(e,t);if(e.trailingComments)if(pt)i=e.trailingComments[0],p=i.extendedRange,f=i.range,h=lt.substring(p[0],f[0]),v=(h.match(/\n/g)||[]).length,v>0?(t.push(s("\n",v)),t.push(S(P(i)))):(t.push(h),t.push(P(i)));else for(a=!c(x(t).toString()),u=s(" ",C(x([X,t,$]).toString())),n=0,r=e.trailingComments.length;r>n;++n)i=e.trailingComments[n],a?(t=0===n?[t,$]:[t,u],t.push(P(i,u))):t=[t,S(P(i))],n===r-1||c(x(t).toString())||(t=[t,"\n"]);return t}function A(e,t,n){var r,i=0;for(r=e;t>r;r++)"\n"===lt[r]&&i++;for(r=1;i>r;r++)n.push(tt)}function N(e,t,n){return n>t?["(",e,")"]:e}function k(e){var t,n,r;for(r=e.split(/\r\n|\n/),t=1,n=r.length;n>t;t++)r[t]=tt+X+r[t];return r}function O(e,t){var n,r,i;return n=e[st.verbatim],"string"==typeof n?r=N(k(n),Q.Sequence,t):(r=k(n.content),i=null!=n.precedence?n.precedence:Q.Sequence,r=N(r,i,t)),x(r,e)}function R(){}function j(e){return x(e.name,e)}function F(e,t){return e.async?"async"+(t?b():nt):""}function L(e){var t=e.generator&&!st.moz.starlessGenerator;return t?"*"+nt:""}function M(e){var t=e.value;return t.async?F(t,!e.computed):L(t)?"*":""}function B(e){var t;if(t=new R,o(e))return t.generateStatement(e,Tt);if(i(e))return t.generateExpression(e,Q.Sequence,wt);throw new Error("Unknown node type: "+e.type)}function U(i,o){var u,c,l=a();return null!=o?("string"==typeof o.indent&&(l.format.indent.style=o.indent),"number"==typeof o.base&&(l.format.indent.base=o.base),o=p(l,o),$=o.format.indent.style,X="string"==typeof o.base?o.base:s($,o.format.indent.base)):(o=l,$=o.format.indent.style,X=s($,o.format.indent.base)),J=o.format.json,K=o.format.renumber,Y=J?!1:o.format.hexadecimal,Z=J?"double":o.format.quotes,et=o.format.escapeless,tt=o.format.newline,nt=o.format.space,o.format.compact&&(tt=nt=$=X=""),rt=o.format.parentheses,it=o.format.semicolons,ot=o.format.safeConcatenation,at=o.directive,ut=J?null:o.parse,ct=o.sourceMap,lt=o.sourceCode,pt=o.format.preserveBlankLines&&null!==lt,st=o,ct&&(H=r.browser?e.sourceMap.SourceNode:t("/node_modules/source-map/lib/source-map.js",n).SourceNode),u=B(i),ct?(c=u.toStringWithSourceMap({file:o.file,sourceRoot:o.sourceMapRoot}),o.sourceContent&&c.map.setSourceContent(o.sourceMap,o.sourceContent),o.sourceMapWithCode?c:c.map.toString()):(c={code:u.toString(),map:null},o.sourceMapWithCode?c:c.code)}var V,Q,G,H,z,W,q,X,$,J,K,Y,Z,et,tt,nt,rt,it,ot,at,st,ut,ct,lt,pt,ft,dt;z=t("/node_modules/estraverse/estraverse.js",n),W=t("/node_modules/esutils/lib/utils.js",n),V=z.Syntax,Q={Sequence:0,Yield:1,Await:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,TaggedTemplate:17,Member:18,Primary:19},G={"||":Q.LogicalOR,"&&":Q.LogicalAND,"|":Q.BitwiseOR,"^":Q.BitwiseXOR,"&":Q.BitwiseAND,"==":Q.Equality,"!=":Q.Equality,"===":Q.Equality,"!==":Q.Equality,is:Q.Equality,isnt:Q.Equality,"<":Q.Relational,">":Q.Relational,"<=":Q.Relational,">=":Q.Relational,"in":Q.Relational,"instanceof":Q.Relational,"<<":Q.BitwiseSHIFT,">>":Q.BitwiseSHIFT,">>>":Q.BitwiseSHIFT,"+":Q.Additive,"-":Q.Additive,"*":Q.Multiplicative,"%":Q.Multiplicative,"/":Q.Multiplicative};var ht=1,mt=2,gt=4,vt=8,yt=16,_t=32,xt=mt|gt,bt=ht|mt,wt=ht|mt|gt,St=ht,Et=gt,Ct=ht|gt,Tt=ht,Pt=ht|_t,It=0,Dt=ht|yt,At=ht|vt;q=Array.isArray,q||(q=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),R.prototype.maybeBlock=function(e,t){var n,r,i=this;return r=!st.comment||!e.leadingComments,e.type===V.BlockStatement&&r?[nt,this.generateStatement(e,t)]:e.type===V.EmptyStatement&&r?";":(E(function(){n=[tt,S(i.generateStatement(e,t))]}),n)},R.prototype.maybeBlockSuffix=function(e,t){var n=c(x(t).toString());return e.type!==V.BlockStatement||st.comment&&e.leadingComments||n?n?[t,X]:[t,tt,X]:[t,nt]},R.prototype.generatePattern=function(e,t,n){return e.type===V.Identifier?j(e):this.generateExpression(e,t,n)},R.prototype.generateFunctionParams=function(e){var t,n,r,i;if(i=!1,e.type!==V.ArrowFunctionExpression||e.rest||e.defaults&&0!==e.defaults.length||1!==e.params.length||e.params[0].type!==V.Identifier){for(r=e.type===V.ArrowFunctionExpression?[F(e,!1)]:[],r.push("("),e.defaults&&(i=!0),t=0,n=e.params.length;n>t;++t)i&&e.defaults[t]?r.push(this.generateAssignment(e.params[t],e.defaults[t],"=",Q.Assignment,wt)):r.push(this.generatePattern(e.params[t],Q.Assignment,wt)),n>t+1&&r.push(","+nt);e.rest&&(e.params.length&&r.push(","+nt),r.push("..."),r.push(j(e.rest))),r.push(")")}else r=[F(e,!0),j(e.params[0])];return r},R.prototype.generateFunctionBody=function(e){var t,n;return t=this.generateFunctionParams(e),e.type===V.ArrowFunctionExpression&&(t.push(nt),t.push("=>")),e.expression?(t.push(nt),n=this.generateExpression(e.body,Q.Assignment,wt),"{"===n.toString().charAt(0)&&(n=["(",n,")"]),t.push(n)):t.push(this.maybeBlock(e.body,At)),t},R.prototype.generateIterationForStatement=function(e,t,n){var r=["for"+nt+"("],i=this;return E(function(){t.left.type===V.VariableDeclaration?E(function(){r.push(t.left.kind+b()),r.push(i.generateStatement(t.left.declarations[0],It))}):r.push(i.generateExpression(t.left,Q.Call,wt)),r=w(r,e),r=[w(r,i.generateExpression(t.right,Q.Sequence,wt)),")"]}),r.push(this.maybeBlock(t.body,n)),r},R.prototype.generatePropertyKey=function(e,t){var n=[];return t&&n.push("["),n.push(this.generateExpression(e,Q.Sequence,wt)),t&&n.push("]"),n},R.prototype.generateAssignment=function(e,t,n,r,i){return Q.Assignment<r&&(i|=ht),N([this.generateExpression(e,Q.Call,i),nt+n+nt,this.generateExpression(t,Q.Assignment,i)],Q.Assignment,r)},R.prototype.semicolon=function(e){return!it&&e&_t?"":";"},R.Statement={BlockStatement:function(e,t){var n,r,i=["{",tt],o=this;return E(function(){0===e.body.length&&pt&&(n=e.range,n[1]-n[0]>2&&(r=lt.substring(n[0]+1,n[1]-1),"\n"===r[0]&&(i=["{"]),i.push(r)));var a,s,u,l;for(l=Tt,t&vt&&(l|=yt),a=0,s=e.body.length;s>a;++a)pt&&(0===a&&(e.body[0].leadingComments&&(n=e.body[0].leadingComments[0].extendedRange,r=lt.substring(n[0],n[1]),"\n"===r[0]&&(i=["{"])),e.body[0].leadingComments||A(e.range[0],e.body[0].range[0],i)),a>0&&(e.body[a-1].trailingComments||e.body[a].leadingComments||A(e.body[a-1].range[1],e.body[a].range[0],i))),a===s-1&&(l|=_t),u=e.body[a].leadingComments&&pt?o.generateStatement(e.body[a],l):S(o.generateStatement(e.body[a],l)),i.push(u),c(x(u).toString())||(pt&&s-1>a?e.body[a+1].leadingComments||i.push(tt):i.push(tt)),pt&&a===s-1&&(e.body[a].trailingComments||A(e.body[a].range[1],e.range[1],i))}),i.push(S("}")),i},BreakStatement:function(e,t){return e.label?"break "+e.label.name+this.semicolon(t):"break"+this.semicolon(t)},ContinueStatement:function(e,t){return e.label?"continue "+e.label.name+this.semicolon(t):"continue"+this.semicolon(t)},ClassBody:function(e){var t=["{",tt],n=this;return E(function(r){var i,o;for(i=0,o=e.body.length;o>i;++i)t.push(r),t.push(n.generateExpression(e.body[i],Q.Sequence,wt)),o>i+1&&t.push(tt)}),c(x(t).toString())||t.push(tt),t.push(X),t.push("}"),t},ClassDeclaration:function(e){var t,n;return t=["class "+e.id.name],e.superClass&&(n=w("extends",this.generateExpression(e.superClass,Q.Assignment,wt)),t=w(t,n)),t.push(nt),t.push(this.generateStatement(e.body,Pt)),t},DirectiveStatement:function(e,t){return st.raw&&e.raw?e.raw+this.semicolon(t):v(e.directive)+this.semicolon(t)},DoWhileStatement:function(e,t){var n=w("do",this.maybeBlock(e.body,Tt));return n=this.maybeBlockSuffix(e.body,n),w(n,["while"+nt+"(",this.generateExpression(e.test,Q.Sequence,wt),")"+this.semicolon(t)])},CatchClause:function(e){var t,n=this;return E(function(){var r;t=["catch"+nt+"(",n.generateExpression(e.param,Q.Sequence,wt),")"],e.guard&&(r=n.generateExpression(e.guard,Q.Sequence,wt),t.splice(2,0," if ",r))}),t.push(this.maybeBlock(e.body,Tt)),t},DebuggerStatement:function(e,t){return"debugger"+this.semicolon(t)},EmptyStatement:function(){return";"},ExportDeclaration:function(e,t){var n,r=["export"],i=this;return n=t&_t?Pt:Tt,e["default"]?(r=w(r,"default"),r=o(e.declaration)?w(r,this.generateStatement(e.declaration,n)):w(r,this.generateExpression(e.declaration,Q.Assignment,wt)+this.semicolon(t))):e.declaration?w(r,this.generateStatement(e.declaration,n)):(e.specifiers&&(0===e.specifiers.length?r=w(r,"{"+nt+"}"):e.specifiers[0].type===V.ExportBatchSpecifier?r=w(r,this.generateExpression(e.specifiers[0],Q.Sequence,wt)):(r=w(r,"{"),E(function(t){var n,o;for(r.push(tt),n=0,o=e.specifiers.length;o>n;++n)r.push(t),r.push(i.generateExpression(e.specifiers[n],Q.Sequence,wt)),o>n+1&&r.push(","+tt)}),c(x(r).toString())||r.push(tt),r.push(X+"}")),e.source?r=w(r,["from"+nt,this.generateExpression(e.source,Q.Sequence,wt),this.semicolon(t)]):r.push(this.semicolon(t))),r)},ExpressionStatement:function(e,t){function n(e){var t;return"class"!==e.slice(0,5)?!1:(t=e.charCodeAt(5),123===t||W.code.isWhiteSpace(t)||W.code.isLineTerminator(t))}function r(e){var t;return"function"!==e.slice(0,8)?!1:(t=e.charCodeAt(8),40===t||W.code.isWhiteSpace(t)||42===t||W.code.isLineTerminator(t))}function i(e){var t,n,r;if("async"!==e.slice(0,5))return!1;if(!W.code.isWhiteSpace(e.charCodeAt(5)))return!1;for(n=6,r=e.length;r>n&&W.code.isWhiteSpace(e.charCodeAt(n));++n);return n===r?!1:"function"!==e.slice(n,n+8)?!1:(t=e.charCodeAt(n+8),40===t||W.code.isWhiteSpace(t)||42===t||W.code.isLineTerminator(t))}var o,a;return o=[this.generateExpression(e.expression,Q.Sequence,wt)],a=x(o).toString(),123===a.charCodeAt(0)||n(a)||r(a)||i(a)||at&&t&yt&&e.expression.type===V.Literal&&"string"==typeof e.expression.value?o=["(",o,")"+this.semicolon(t)]:o.push(this.semicolon(t)),o},ImportDeclaration:function(e,t){var n,r,i=this;return 0===e.specifiers.length?["import",nt,this.generateExpression(e.source,Q.Sequence,wt),this.semicolon(t)]:(n=["import"],r=0,e.specifiers[r].type===V.ImportDefaultSpecifier&&(n=w(n,[this.generateExpression(e.specifiers[r],Q.Sequence,wt)]),++r),e.specifiers[r]&&(0!==r&&n.push(","),e.specifiers[r].type===V.ImportNamespaceSpecifier?n=w(n,[nt,this.generateExpression(e.specifiers[r],Q.Sequence,wt)]):(n.push(nt+"{"),1===e.specifiers.length-r?(n.push(nt),n.push(this.generateExpression(e.specifiers[r],Q.Sequence,wt)),n.push(nt+"}"+nt)):(E(function(t){var o,a;for(n.push(tt),o=r,a=e.specifiers.length;a>o;++o)n.push(t),n.push(i.generateExpression(e.specifiers[o],Q.Sequence,wt)),a>o+1&&n.push(","+tt)}),c(x(n).toString())||n.push(tt),n.push(X+"}"+nt)))),n=w(n,["from"+nt,this.generateExpression(e.source,Q.Sequence,wt),this.semicolon(t)]))},VariableDeclarator:function(e,t){var n=t&ht?wt:xt;return e.init?[this.generateExpression(e.id,Q.Assignment,n),nt,"=",nt,this.generateExpression(e.init,Q.Assignment,n)]:this.generatePattern(e.id,Q.Assignment,n)},VariableDeclaration:function(e,t){function n(){for(a=e.declarations[0],st.comment&&a.leadingComments?(r.push("\n"),r.push(S(u.generateStatement(a,s)))):(r.push(b()),r.push(u.generateStatement(a,s))),i=1,o=e.declarations.length;o>i;++i)a=e.declarations[i],st.comment&&a.leadingComments?(r.push(","+tt),r.push(S(u.generateStatement(a,s)))):(r.push(","+nt),r.push(u.generateStatement(a,s)))}var r,i,o,a,s,u=this;return r=[e.kind],s=t&ht?Tt:It,e.declarations.length>1?E(n):n(),r.push(this.semicolon(t)),r},ThrowStatement:function(e,t){return[w("throw",this.generateExpression(e.argument,Q.Sequence,wt)),this.semicolon(t)]},TryStatement:function(e){var t,n,r,i;if(t=["try",this.maybeBlock(e.block,Tt)],t=this.maybeBlockSuffix(e.block,t),e.handlers)for(n=0,r=e.handlers.length;r>n;++n)t=w(t,this.generateStatement(e.handlers[n],Tt)),(e.finalizer||n+1!==r)&&(t=this.maybeBlockSuffix(e.handlers[n].body,t));else{for(i=e.guardedHandlers||[],n=0,r=i.length;r>n;++n)t=w(t,this.generateStatement(i[n],Tt)),(e.finalizer||n+1!==r)&&(t=this.maybeBlockSuffix(i[n].body,t));if(e.handler)if(q(e.handler))for(n=0,r=e.handler.length;r>n;++n)t=w(t,this.generateStatement(e.handler[n],Tt)),(e.finalizer||n+1!==r)&&(t=this.maybeBlockSuffix(e.handler[n].body,t));else t=w(t,this.generateStatement(e.handler,Tt)),e.finalizer&&(t=this.maybeBlockSuffix(e.handler.body,t))}return e.finalizer&&(t=w(t,["finally",this.maybeBlock(e.finalizer,Tt)])),t},SwitchStatement:function(e){var t,n,r,i,o,a=this;if(E(function(){t=["switch"+nt+"(",a.generateExpression(e.discriminant,Q.Sequence,wt),")"+nt+"{"+tt]}),e.cases)for(o=Tt,r=0,i=e.cases.length;i>r;++r)r===i-1&&(o|=_t),n=S(this.generateStatement(e.cases[r],o)),t.push(n),c(x(n).toString())||t.push(tt);return t.push(S("}")),t},SwitchCase:function(e,t){var n,r,i,o,a,s=this;return E(function(){for(n=e.test?[w("case",s.generateExpression(e.test,Q.Sequence,wt)),":"]:["default:"],i=0,o=e.consequent.length,o&&e.consequent[0].type===V.BlockStatement&&(r=s.maybeBlock(e.consequent[0],Tt),n.push(r),i=1),i===o||c(x(n).toString())||n.push(tt),a=Tt;o>i;++i)i===o-1&&t&_t&&(a|=_t),r=S(s.generateStatement(e.consequent[i],a)),n.push(r),i+1===o||c(x(r).toString())||n.push(tt)}),n},IfStatement:function(e,t){var n,r,i,o=this;return E(function(){n=["if"+nt+"(",o.generateExpression(e.test,Q.Sequence,wt),")"]}),i=t&_t,r=Tt,i&&(r|=_t),e.alternate?(n.push(this.maybeBlock(e.consequent,Tt)),n=this.maybeBlockSuffix(e.consequent,n),n=e.alternate.type===V.IfStatement?w(n,["else ",this.generateStatement(e.alternate,r)]):w(n,w("else",this.maybeBlock(e.alternate,r)))):n.push(this.maybeBlock(e.consequent,r)),n},ForStatement:function(e,t){var n,r=this;return E(function(){n=["for"+nt+"("],e.init?e.init.type===V.VariableDeclaration?n.push(r.generateStatement(e.init,It)):(n.push(r.generateExpression(e.init,Q.Sequence,xt)),n.push(";")):n.push(";"),e.test?(n.push(nt),n.push(r.generateExpression(e.test,Q.Sequence,wt)),n.push(";")):n.push(";"),e.update?(n.push(nt),n.push(r.generateExpression(e.update,Q.Sequence,wt)),n.push(")")):n.push(")")}),n.push(this.maybeBlock(e.body,t&_t?Pt:Tt)),n},ForInStatement:function(e,t){return this.generateIterationForStatement("in",e,t&_t?Pt:Tt)},ForOfStatement:function(e,t){return this.generateIterationForStatement("of",e,t&_t?Pt:Tt)},LabeledStatement:function(e,t){return[e.label.name+":",this.maybeBlock(e.body,t&_t?Pt:Tt)]},Program:function(e){var t,n,r,i,o;for(i=e.body.length,t=[ot&&i>0?"\n":""],o=Dt,r=0;i>r;++r)ot||r!==i-1||(o|=_t),pt&&(0===r&&(e.body[0].leadingComments||A(e.range[0],e.body[r].range[0],t)),r>0&&(e.body[r-1].trailingComments||e.body[r].leadingComments||A(e.body[r-1].range[1],e.body[r].range[0],t))),n=S(this.generateStatement(e.body[r],o)),t.push(n),i>r+1&&!c(x(n).toString())&&(pt?e.body[r+1].leadingComments||t.push(tt):t.push(tt)),pt&&r===i-1&&(e.body[r].trailingComments||A(e.body[r].range[1],e.range[1],t));return t},FunctionDeclaration:function(e){return[F(e,!0),"function",L(e)||b(),j(e.id),this.generateFunctionBody(e)]},ReturnStatement:function(e,t){return e.argument?[w("return",this.generateExpression(e.argument,Q.Sequence,wt)),this.semicolon(t)]:["return"+this.semicolon(t)]},WhileStatement:function(e,t){var n,r=this;return E(function(){n=["while"+nt+"(",r.generateExpression(e.test,Q.Sequence,wt),")"]}),n.push(this.maybeBlock(e.body,t&_t?Pt:Tt)),n},WithStatement:function(e,t){var n,r=this;return E(function(){n=["with"+nt+"(",r.generateExpression(e.object,Q.Sequence,wt),")"]}),n.push(this.maybeBlock(e.body,t&_t?Pt:Tt)),n}},l(R.prototype,R.Statement),R.Expression={SequenceExpression:function(e,t,n){var r,i,o;for(Q.Sequence<t&&(n|=ht),r=[],i=0,o=e.expressions.length;o>i;++i)r.push(this.generateExpression(e.expressions[i],Q.Assignment,n)),o>i+1&&r.push(","+nt);return N(r,Q.Sequence,t)},AssignmentExpression:function(e,t,n){return this.generateAssignment(e.left,e.right,e.operator,t,n)},ArrowFunctionExpression:function(e,t){return N(this.generateFunctionBody(e),Q.ArrowFunction,t)},ConditionalExpression:function(e,t,n){return Q.Conditional<t&&(n|=ht),N([this.generateExpression(e.test,Q.LogicalOR,n),nt+"?"+nt,this.generateExpression(e.consequent,Q.Assignment,n),nt+":"+nt,this.generateExpression(e.alternate,Q.Assignment,n)],Q.Conditional,t)},LogicalExpression:function(e,t,n){return this.BinaryExpression(e,t,n)},BinaryExpression:function(e,t,n){var r,i,o,a;return i=G[e.operator],t>i&&(n|=ht),o=this.generateExpression(e.left,i,n),a=o.toString(),r=47===a.charCodeAt(a.length-1)&&W.code.isIdentifierPart(e.operator.charCodeAt(0))?[o,b(),e.operator]:w(o,e.operator),o=this.generateExpression(e.right,i+1,n),"/"===e.operator&&"/"===o.toString().charAt(0)||"<"===e.operator.slice(-1)&&"!--"===o.toString().slice(0,3)?(r.push(b()),r.push(o)):r=w(r,o),"in"!==e.operator||n&ht?N(r,i,t):["(",r,")"]},CallExpression:function(e,t,n){var r,i,o;for(r=[this.generateExpression(e.callee,Q.Call,bt)],r.push("("),i=0,o=e.arguments.length;o>i;++i)r.push(this.generateExpression(e.arguments[i],Q.Assignment,wt)),o>i+1&&r.push(","+nt);return r.push(")"),n&mt?N(r,Q.Call,t):["(",r,")"]},NewExpression:function(e,t,n){var r,i,o,a,s;if(i=e.arguments.length,s=n&gt&&!rt&&0===i?Ct:St,r=w("new",this.generateExpression(e.callee,Q.New,s)),!(n&gt)||rt||i>0){for(r.push("("),o=0,a=i;a>o;++o)r.push(this.generateExpression(e.arguments[o],Q.Assignment,wt)),a>o+1&&r.push(","+nt);r.push(")")}return N(r,Q.New,t)},MemberExpression:function(e,t,n){var r,i;return r=[this.generateExpression(e.object,Q.Call,n&mt?bt:St)],e.computed?(r.push("["),r.push(this.generateExpression(e.property,Q.Sequence,n&mt?wt:Ct)),r.push("]")):(e.object.type===V.Literal&&"number"==typeof e.object.value&&(i=x(r).toString(),i.indexOf(".")<0&&!/[eExX]/.test(i)&&W.code.isDecimalDigit(i.charCodeAt(i.length-1))&&!(i.length>=2&&48===i.charCodeAt(0))&&r.push(".")),r.push("."),r.push(j(e.property))),N(r,Q.Member,t)},UnaryExpression:function(e,t){var n,r,i,o,a;return r=this.generateExpression(e.argument,Q.Unary,wt),""===nt?n=w(e.operator,r):(n=[e.operator],e.operator.length>2?n=w(n,r):(o=x(n).toString(),a=o.charCodeAt(o.length-1),i=r.toString().charCodeAt(0),(43===a||45===a)&&a===i||W.code.isIdentifierPart(a)&&W.code.isIdentifierPart(i)?(n.push(b()),n.push(r)):n.push(r))),N(n,Q.Unary,t)},YieldExpression:function(e,t){var n;return n=e.delegate?"yield*":"yield",e.argument&&(n=w(n,this.generateExpression(e.argument,Q.Yield,wt))),N(n,Q.Yield,t)},AwaitExpression:function(e,t){var n=w(e.delegate?"await*":"await",this.generateExpression(e.argument,Q.Await,wt));return N(n,Q.Await,t)},UpdateExpression:function(e,t){return e.prefix?N([e.operator,this.generateExpression(e.argument,Q.Unary,wt)],Q.Unary,t):N([this.generateExpression(e.argument,Q.Postfix,wt),e.operator],Q.Postfix,t)},FunctionExpression:function(e){var t=[F(e,!0),"function"];return e.id?(t.push(L(e)||b()),t.push(j(e.id))):t.push(L(e)||nt),t.push(this.generateFunctionBody(e)),t},ExportBatchSpecifier:function(){return"*"},ArrayPattern:function(e,t,n){return this.ArrayExpression(e,t,n)},ArrayExpression:function(e){var t,n,r=this;return e.elements.length?(n=e.elements.length>1,t=["[",n?tt:""],E(function(i){var o,a;for(o=0,a=e.elements.length;a>o;++o)e.elements[o]?(t.push(n?i:""),t.push(r.generateExpression(e.elements[o],Q.Assignment,wt))):(n&&t.push(i),o+1===a&&t.push(",")),a>o+1&&t.push(","+(n?tt:nt))}),n&&!c(x(t).toString())&&t.push(tt),t.push(n?X:""),t.push("]"),t):"[]"},ClassExpression:function(e){var t,n;return t=["class"],e.id&&(t=w(t,this.generateExpression(e.id,Q.Sequence,wt))),e.superClass&&(n=w("extends",this.generateExpression(e.superClass,Q.Assignment,wt)),t=w(t,n)),t.push(nt),t.push(this.generateStatement(e.body,Pt)),t},MethodDefinition:function(e){var t,n;return t=e["static"]?["static"+nt]:[],n="get"===e.kind||"set"===e.kind?[w(e.kind,this.generatePropertyKey(e.key,e.computed)),this.generateFunctionBody(e.value)]:[M(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)],w(t,n)},Property:function(e){return"get"===e.kind||"set"===e.kind?[e.kind,b(),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]:e.shorthand?this.generatePropertyKey(e.key,e.computed):e.method?[M(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]:[this.generatePropertyKey(e.key,e.computed),":"+nt,this.generateExpression(e.value,Q.Assignment,wt)]},ObjectExpression:function(e){var t,n,r,i=this;return e.properties.length?(t=e.properties.length>1,E(function(){r=i.generateExpression(e.properties[0],Q.Sequence,wt)}),t||u(x(r).toString())?(E(function(o){var a,s;if(n=["{",tt,o,r],t)for(n.push(","+tt),a=1,s=e.properties.length;s>a;++a)n.push(o),n.push(i.generateExpression(e.properties[a],Q.Sequence,wt)),s>a+1&&n.push(","+tt)}),c(x(n).toString())||n.push(tt),n.push(X),n.push("}"),n):["{",nt,r,nt,"}"]):"{}"},ObjectPattern:function(e){var t,n,r,i,o,a=this;if(!e.properties.length)return"{}";if(i=!1,1===e.properties.length)o=e.properties[0],o.value.type!==V.Identifier&&(i=!0);else for(n=0,r=e.properties.length;r>n;++n)if(o=e.properties[n],!o.shorthand){i=!0;break}return t=["{",i?tt:""],E(function(n){var r,o;for(r=0,o=e.properties.length;o>r;++r)t.push(i?n:""),t.push(a.generateExpression(e.properties[r],Q.Sequence,wt)),o>r+1&&t.push(","+(i?tt:nt))}),i&&!c(x(t).toString())&&t.push(tt),t.push(i?X:""),t.push("}"),t},ThisExpression:function(){return"this"},Identifier:function(e){return j(e)},ImportDefaultSpecifier:function(e){return j(e.id)},ImportNamespaceSpecifier:function(e){var t=["*"];return e.id&&t.push(nt+"as"+b()+j(e.id)),t},ImportSpecifier:function(e,t,n){return this.ExportSpecifier(e,t,n)},ExportSpecifier:function(e){var t=[e.id.name];return e.name&&t.push(b()+"as"+b()+j(e.name)),t},Literal:function(e){var t;if(e.hasOwnProperty("raw")&&ut&&st.raw)try{if(t=ut(e.raw).body[0].expression,t.type===V.Literal&&t.value===e.value)return e.raw}catch(n){}return null===e.value?"null":"string"==typeof e.value?y(e.value):"number"==typeof e.value?f(e.value):"boolean"==typeof e.value?e.value?"true":"false":h(e.value)},GeneratorExpression:function(e,t,n){return this.ComprehensionExpression(e,t,n)},ComprehensionExpression:function(e){var t,n,r,i,o=this;return t=e.type===V.GeneratorExpression?["("]:["["],st.moz.comprehensionExpressionStartsWithAssignment&&(i=this.generateExpression(e.body,Q.Assignment,wt),t.push(i)),e.blocks&&E(function(){for(n=0,r=e.blocks.length;r>n;++n)i=o.generateExpression(e.blocks[n],Q.Sequence,wt),n>0||st.moz.comprehensionExpressionStartsWithAssignment?t=w(t,i):t.push(i)}),e.filter&&(t=w(t,"if"+nt),i=this.generateExpression(e.filter,Q.Sequence,wt),t=w(t,["(",i,")"])),st.moz.comprehensionExpressionStartsWithAssignment||(i=this.generateExpression(e.body,Q.Assignment,wt),t=w(t,i)),t.push(e.type===V.GeneratorExpression?")":"]"),t},ComprehensionBlock:function(e){var t;return t=e.left.type===V.VariableDeclaration?[e.left.kind,b(),this.generateStatement(e.left.declarations[0],It)]:this.generateExpression(e.left,Q.Call,wt),t=w(t,e.of?"of":"in"),t=w(t,this.generateExpression(e.right,Q.Sequence,wt)),["for"+nt+"(",t,")"]},SpreadElement:function(e){return["...",this.generateExpression(e.argument,Q.Assignment,wt)]},TaggedTemplateExpression:function(e,t,n){var r=bt;n&mt||(r=St);var i=[this.generateExpression(e.tag,Q.Call,r),this.generateExpression(e.quasi,Q.Primary,Et)];return N(i,Q.TaggedTemplate,t)},TemplateElement:function(e){return e.value.raw},TemplateLiteral:function(e){var t,n,r;for(t=["`"],n=0,r=e.quasis.length;r>n;++n)t.push(this.generateExpression(e.quasis[n],Q.Primary,wt)),r>n+1&&(t.push("${"+nt),t.push(this.generateExpression(e.expressions[n],Q.Sequence,wt)),t.push(nt+"}"));return t.push("`"),t},ModuleSpecifier:function(e,t,n){return this.Literal(e,t,n)}},l(R.prototype,R.Expression),R.prototype.generateExpression=function(e,t,n){var r,i;return i=e.type||V.Property,st.verbatim&&e.hasOwnProperty(st.verbatim)?O(e,t):(r=this[i](e,t,n),st.comment&&(r=D(e,r)),x(r,e))},R.prototype.generateStatement=function(e,t){var n,r;return n=this[e.type](e,t),st.comment&&(n=D(e,n)),r=x(n).toString(),e.type!==V.Program||ot||""!==tt||"\n"!==r.charAt(r.length-1)||(n=ct?x(n).replaceRight(/\s+$/,""):r.replace(/\s+$/,"")),x(n,e)},ft={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},dt=a().format,r.version=t("/package.json",n).version,r.generate=U,r.attachComments=z.attachComments,r.Precedence=p({},Q),r.browser=!1,r.FORMAT_MINIFY=ft,r.FORMAT_DEFAULTS=dt,r._addInlineComment=I}()}),t.define("/package.json",function(e){e.exports={name:"escodegen",description:"ECMAScript code generator",homepage:"http://github.com/estools/escodegen",main:"escodegen.js",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files:["LICENSE.BSD","LICENSE.source-map","README.md","bin","escodegen.js","package.json"],version:"1.6.1",engines:{node:">=0.10.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/escodegen.git"},dependencies:{estraverse:"^1.9.1",esutils:"^1.1.6",esprima:"^1.2.2",optionator:"^0.5.0"},optionalDependencies:{"source-map":"~0.1.40"},devDependencies:{"acorn-6to5":"^0.11.1-25",bluebird:"^2.3.11","bower-registry-client":"^0.2.1",chai:"^1.10.0","commonjs-everywhere":"^0.9.7","esprima-moz":"*",gulp:"^3.8.10","gulp-eslint":"^0.2.0","gulp-mocha":"^2.0.0",semver:"^4.1.0"},licenses:[{type:"BSD",url:"http://github.com/estools/escodegen/raw/master/LICENSE.BSD"}],scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"}}
}),t.define("/node_modules/source-map/lib/source-map.js",function(e,n){n.SourceMapGenerator=t("/node_modules/source-map/lib/source-map/source-map-generator.js",e).SourceMapGenerator,n.SourceMapConsumer=t("/node_modules/source-map/lib/source-map/source-map-consumer.js",e).SourceMapConsumer,n.SourceNode=t("/node_modules/source-map/lib/source-map/source-node.js",e).SourceNode}),t.define("/node_modules/source-map/lib/source-map/source-node.js",function(){define(function(e,t,n){function r(e,t,n,r,i){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==i?null:i,this[u]=!0,null!=r&&this.add(r)}var i=e("/node_modules/source-map/lib/source-map/source-map-generator.js",n).SourceMapGenerator,o=e("/node_modules/source-map/lib/source-map/util.js",n),a=/(\r?\n)/,s=/\r\n|[\s\S]/g,u="$$$isSourceNode$$$";r.fromStringWithSourceMap=function(e,t,n){function i(e,t){if(null===e||void 0===e.source)s.add(t);else{var i=n?o.join(n,e.source):e.source;s.add(new r(e.originalLine,e.originalColumn,i,t,e.name))}}var s=new r,u=e.split(a),c=function(){var e=u.shift(),t=u.shift()||"";return e+t},l=1,p=0,f=null;return t.eachMapping(function(e){if(null!==f){if(!(l<e.generatedLine)){var t=u[0],n=t.substr(0,e.generatedColumn-p);return u[0]=t.substr(e.generatedColumn-p),p=e.generatedColumn,i(f,n),f=e,void 0}var n="";i(f,c()),l++,p=0}for(;l<e.generatedLine;)s.add(c()),l++;if(p<e.generatedColumn){var t=u[0];s.add(t.substr(0,e.generatedColumn)),u[0]=t.substr(e.generatedColumn),p=e.generatedColumn}f=e},this),u.length>0&&(f&&i(f,c()),s.add(u.join(""))),t.sources.forEach(function(e){var r=t.sourceContentFor(e);null!=r&&(null!=n&&(e=o.join(n,e)),s.setSourceContent(e,r))}),s},r.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[u]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},r.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[u]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},r.prototype.walk=function(e){for(var t,n=0,r=this.children.length;r>n;n++)t=this.children[n],t[u]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},r.prototype.join=function(e){var t,n,r=this.children.length;if(r>0){for(t=[],n=0;r-1>n;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},r.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[u]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},r.prototype.setSourceContent=function(e,t){this.sourceContents[o.toSetString(e)]=t},r.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;n>t;t++)this.children[t][u]&&this.children[t].walkSourceContents(e);for(var r=Object.keys(this.sourceContents),t=0,n=r.length;n>t;t++)e(o.fromSetString(r[t]),this.sourceContents[r[t]])},r.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e},r.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},n=new i(e),r=!1,o=null,u=null,c=null,l=null;return this.walk(function(e,i){t.code+=e,null!==i.source&&null!==i.line&&null!==i.column?((o!==i.source||u!==i.line||c!==i.column||l!==i.name)&&n.addMapping({source:i.source,original:{line:i.line,column:i.column},generated:{line:t.line,column:t.column},name:i.name}),o=i.source,u=i.line,c=i.column,l=i.name,r=!0):r&&(n.addMapping({generated:{line:t.line,column:t.column}}),o=null,r=!1),e.match(s).forEach(function(e,s,u){a.test(e)?(t.line++,t.column=0,s+1===u.length?(o=null,r=!1):r&&n.addMapping({source:i.source,original:{line:i.line,column:i.column},generated:{line:t.line,column:t.column},name:i.name})):t.column+=e.length})}),this.walkSourceContents(function(e,t){n.setSourceContent(e,t)}),{code:t.code,map:n}},t.SourceNode=r})}),t.define("/node_modules/source-map/lib/source-map/util.js",function(){define(function(e,t){function n(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')}function r(e){var t=e.match(d);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function i(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function o(e){var t=e,n=r(e);if(n){if(!n.path)return e;t=n.path}for(var o,a="/"===t.charAt(0),s=t.split(/\/+/),u=0,c=s.length-1;c>=0;c--)o=s[c],"."===o?s.splice(c,1):".."===o?u++:u>0&&(""===o?(s.splice(c+1,u),u=0):(s.splice(c,2),u--));return t=s.join("/"),""===t&&(t=a?"/":"."),n?(n.path=t,i(n)):t}function a(e,t){""===e&&(e="."),""===t&&(t=".");var n=r(t),a=r(e);if(a&&(e=a.path||"/"),n&&!n.scheme)return a&&(n.scheme=a.scheme),i(n);if(n||t.match(h))return t;if(a&&!a.host&&!a.path)return a.host=t,i(a);var s="/"===t.charAt(0)?t:o(e.replace(/\/+$/,"")+"/"+t);return a?(a.path=s,i(a)):s}function s(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");var n=r(e);return"/"==t.charAt(0)&&n&&"/"==n.path?t.slice(1):0===t.indexOf(e+"/")?t.substr(e.length+1):t}function u(e){return"$"+e}function c(e){return e.substr(1)}function l(e,t){var n=e||"",r=t||"";return(n>r)-(r>n)}function p(e,t,n){var r;return(r=l(e.source,t.source))?r:(r=e.originalLine-t.originalLine)?r:(r=e.originalColumn-t.originalColumn,r||n?r:(r=l(e.name,t.name))?r:(r=e.generatedLine-t.generatedLine,r?r:e.generatedColumn-t.generatedColumn))}function f(e,t,n){var r;return(r=e.generatedLine-t.generatedLine)?r:(r=e.generatedColumn-t.generatedColumn,r||n?r:(r=l(e.source,t.source))?r:(r=e.originalLine-t.originalLine)?r:(r=e.originalColumn-t.originalColumn,r?r:l(e.name,t.name)))}t.getArg=n;var d=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,h=/^data:.+\,.+$/;t.urlParse=r,t.urlGenerate=i,t.normalize=o,t.join=a,t.relative=s,t.toSetString=u,t.fromSetString=c,t.compareByOriginalPositions=p,t.compareByGeneratedPositions=f})}),t.define("/node_modules/source-map/node_modules/amdefine/amdefine.js",function(e,r,i,o){"use strict";function a(e,r){function i(e){var t,n;for(t=0;e[t];t+=1)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}function a(e,t){var n;return e&&"."===e.charAt(0)&&t&&(n=t.split("/"),n=n.slice(0,n.length-1),n=n.concat(e.split("/")),i(n),e=n.join("/")),e}function s(e){return function(t){return a(t,e)}}function u(e){function t(t){h[e]=t}return t.fromText=function(){throw new Error("amdefine does not implement load.fromText")},t}function c(t,n,i){var a,s,u,c;if(t)s=h[t]={},u={id:t,uri:o,exports:s},a=p(r,s,u,t);else{if(m)throw new Error("amdefine with no module ID cannot be called more than once per file.");m=!0,s=e.exports,u=e,a=p(r,s,u,e.id)}n&&(n=n.map(function(e){return a(e)})),c="function"==typeof i?i.apply(u.exports,n):i,void 0!==c&&(u.exports=c,t&&(h[t]=u.exports))}function l(e,t,n){Array.isArray(e)?(n=t,t=e,e=void 0):"string"!=typeof e&&(n=e,e=t=void 0),t&&!Array.isArray(t)&&(n=t,t=void 0),t||(t=["require","exports","module"]),e?d[e]=[e,t,n]:c(e,t,n)}var p,f,d={},h={},m=!1,g=t("path",e);return p=function(e,t,r,i){function o(o,a){return"string"==typeof o?f(e,t,r,o,i):(o=o.map(function(n){return f(e,t,r,n,i)}),n.nextTick(function(){a.apply(null,o)}),void 0)}return o.toUrl=function(e){return 0===e.indexOf(".")?a(e,g.dirname(r.filename)):e},o},r=r||function(){return e.require.apply(e,arguments)},f=function(e,t,n,r,i){var o,l,m=r.indexOf("!"),g=r;if(-1===m){if(r=a(r,i),"require"===r)return p(e,t,n,i);if("exports"===r)return t;if("module"===r)return n;if(h.hasOwnProperty(r))return h[r];if(d[r])return c.apply(null,d[r]),h[r];if(e)return e(g);throw new Error("No module with ID: "+r)}return o=r.substring(0,m),r=r.substring(m+1,r.length),l=f(e,t,n,o,i),r=l.normalize?l.normalize(r,s(i)):a(r,i),h[r]?h[r]:(l.load(r,p(e,t,n,i),u(r),{}),h[r])},l.require=function(e){return h[e]?h[e]:d[e]?(c.apply(null,d[e]),h[e]):void 0},l.amd={},l}e.exports=a}),t.define("/node_modules/source-map/lib/source-map/source-map-generator.js",function(){define(function(e,t,n){function r(e){e||(e={}),this._file=o.getArg(e,"file",null),this._sourceRoot=o.getArg(e,"sourceRoot",null),this._sources=new a,this._names=new a,this._mappings=[],this._sourcesContents=null}var i=e("/node_modules/source-map/lib/source-map/base64-vlq.js",n),o=e("/node_modules/source-map/lib/source-map/util.js",n),a=e("/node_modules/source-map/lib/source-map/array-set.js",n).ArraySet;r.prototype._version=3,r.fromSourceMap=function(e){var t=e.sourceRoot,n=new r({file:e.file,sourceRoot:t});return e.eachMapping(function(e){var r={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(r.source=e.source,null!=t&&(r.source=o.relative(t,r.source)),r.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(r.name=e.name)),n.addMapping(r)}),e.sources.forEach(function(t){var r=e.sourceContentFor(t);null!=r&&n.setSourceContent(t,r)}),n},r.prototype.addMapping=function(e){var t=o.getArg(e,"generated"),n=o.getArg(e,"original",null),r=o.getArg(e,"source",null),i=o.getArg(e,"name",null);this._validateMapping(t,n,r,i),null==r||this._sources.has(r)||this._sources.add(r),null==i||this._names.has(i)||this._names.add(i),this._mappings.push({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:r,name:i})},r.prototype.setSourceContent=function(e,t){var n=e;null!=this._sourceRoot&&(n=o.relative(this._sourceRoot,n)),null!=t?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[o.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[o.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},r.prototype.applySourceMap=function(e,t,n){var r=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=e.file}var i=this._sourceRoot;null!=i&&(r=o.relative(i,r));var s=new a,u=new a;this._mappings.forEach(function(t){if(t.source===r&&null!=t.originalLine){var a=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=a.source&&(t.source=a.source,null!=n&&(t.source=o.join(n,t.source)),null!=i&&(t.source=o.relative(i,t.source)),t.originalLine=a.line,t.originalColumn=a.column,null!=a.name&&(t.name=a.name))}var c=t.source;null==c||s.has(c)||s.add(c);var l=t.name;null==l||u.has(l)||u.add(l)},this),this._sources=s,this._names=u,e.sources.forEach(function(t){var r=e.sourceContentFor(t);null!=r&&(null!=n&&(t=o.join(n,t)),null!=i&&(t=o.relative(i,t)),this.setSourceContent(t,r))},this)},r.prototype._validateMapping=function(e,t,n,r){if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!n&&!r||e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:r}))},r.prototype._serializeMappings=function(){var e,t=0,n=1,r=0,a=0,s=0,u=0,c="";this._mappings.sort(o.compareByGeneratedPositions);for(var l=0,p=this._mappings.length;p>l;l++){if(e=this._mappings[l],e.generatedLine!==n)for(t=0;e.generatedLine!==n;)c+=";",n++;else if(l>0){if(!o.compareByGeneratedPositions(e,this._mappings[l-1]))continue;c+=","}c+=i.encode(e.generatedColumn-t),t=e.generatedColumn,null!=e.source&&(c+=i.encode(this._sources.indexOf(e.source)-u),u=this._sources.indexOf(e.source),c+=i.encode(e.originalLine-1-a),a=e.originalLine-1,c+=i.encode(e.originalColumn-r),r=e.originalColumn,null!=e.name&&(c+=i.encode(this._names.indexOf(e.name)-s),s=this._names.indexOf(e.name)))}return c},r.prototype._generateSourcesContent=function(e,t){return e.map(function(e){if(!this._sourcesContents)return null;null!=t&&(e=o.relative(t,e));var n=o.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)},r.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},r.prototype.toString=function(){return JSON.stringify(this)},t.SourceMapGenerator=r})}),t.define("/node_modules/source-map/lib/source-map/array-set.js",function(){define(function(e,t,n){function r(){this._array=[],this._set={}}var i=e("/node_modules/source-map/lib/source-map/util.js",n);r.fromArray=function(e,t){for(var n=new r,i=0,o=e.length;o>i;i++)n.add(e[i],t);return n},r.prototype.add=function(e,t){var n=this.has(e),r=this._array.length;(!n||t)&&this._array.push(e),n||(this._set[i.toSetString(e)]=r)},r.prototype.has=function(e){return Object.prototype.hasOwnProperty.call(this._set,i.toSetString(e))},r.prototype.indexOf=function(e){if(this.has(e))return this._set[i.toSetString(e)];throw new Error('"'+e+'" is not in the set.')},r.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},r.prototype.toArray=function(){return this._array.slice()},t.ArraySet=r})}),t.define("/node_modules/source-map/lib/source-map/base64-vlq.js",function(){define(function(e,t,n){function r(e){return 0>e?(-e<<1)+1:(e<<1)+0}function i(e){var t=1===(1&e),n=e>>1;return t?-n:n}var o=e("/node_modules/source-map/lib/source-map/base64.js",n),a=5,s=1<<a,u=s-1,c=s;t.encode=function(e){var t,n="",i=r(e);do t=i&u,i>>>=a,i>0&&(t|=c),n+=o.encode(t);while(i>0);return n},t.decode=function(e,t){var n,r,s=0,l=e.length,p=0,f=0;do{if(s>=l)throw new Error("Expected more digits in base 64 VLQ value.");r=o.decode(e.charAt(s++)),n=!!(r&c),r&=u,p+=r<<f,f+=a}while(n);t.value=i(p),t.rest=e.slice(s)}})}),t.define("/node_modules/source-map/lib/source-map/base64.js",function(){define(function(e,t){var n={},r={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(e,t){n[e]=t,r[t]=e}),t.encode=function(e){if(e in r)return r[e];throw new TypeError("Must be between 0 and 63: "+e)},t.decode=function(e){if(e in n)return n[e];throw new TypeError("Not a valid base 64 digit: "+e)}})}),t.define("/node_modules/source-map/lib/source-map/source-map-consumer.js",function(){define(function(e,t,n){function r(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=i.getArg(t,"version"),r=i.getArg(t,"sources"),o=i.getArg(t,"names",[]),s=i.getArg(t,"sourceRoot",null),u=i.getArg(t,"sourcesContent",null),c=i.getArg(t,"mappings"),l=i.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);r=r.map(i.normalize),this._names=a.fromArray(o,!0),this._sources=a.fromArray(r,!0),this.sourceRoot=s,this.sourcesContent=u,this._mappings=c,this.file=l}var i=e("/node_modules/source-map/lib/source-map/util.js",n),o=e("/node_modules/source-map/lib/source-map/binary-search.js",n),a=e("/node_modules/source-map/lib/source-map/array-set.js",n).ArraySet,s=e("/node_modules/source-map/lib/source-map/base64-vlq.js",n);r.fromSourceMap=function(e){var t=Object.create(r.prototype);return t._names=a.fromArray(e._names.toArray(),!0),t._sources=a.fromArray(e._sources.toArray(),!0),t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file,t.__generatedMappings=e._mappings.slice().sort(i.compareByGeneratedPositions),t.__originalMappings=e._mappings.slice().sort(i.compareByOriginalPositions),t},r.prototype._version=3,Object.defineProperty(r.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?i.join(this.sourceRoot,e):e},this)}}),r.prototype.__generatedMappings=null,Object.defineProperty(r.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__generatedMappings}}),r.prototype.__originalMappings=null,Object.defineProperty(r.prototype,"_originalMappings",{get:function(){return this.__originalMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__originalMappings}}),r.prototype._nextCharIsMappingSeparator=function(e){var t=e.charAt(0);return";"===t||","===t},r.prototype._parseMappings=function(e){for(var t,n=1,r=0,o=0,a=0,u=0,c=0,l=e,p={};l.length>0;)if(";"===l.charAt(0))n++,l=l.slice(1),r=0;else if(","===l.charAt(0))l=l.slice(1);else{if(t={},t.generatedLine=n,s.decode(l,p),t.generatedColumn=r+p.value,r=t.generatedColumn,l=p.rest,l.length>0&&!this._nextCharIsMappingSeparator(l)){if(s.decode(l,p),t.source=this._sources.at(u+p.value),u+=p.value,l=p.rest,0===l.length||this._nextCharIsMappingSeparator(l))throw new Error("Found a source, but no line and column");if(s.decode(l,p),t.originalLine=o+p.value,o=t.originalLine,t.originalLine+=1,l=p.rest,0===l.length||this._nextCharIsMappingSeparator(l))throw new Error("Found a source and line, but no column");s.decode(l,p),t.originalColumn=a+p.value,a=t.originalColumn,l=p.rest,l.length>0&&!this._nextCharIsMappingSeparator(l)&&(s.decode(l,p),t.name=this._names.at(c+p.value),c+=p.value,l=p.rest)}this.__generatedMappings.push(t),"number"==typeof t.originalLine&&this.__originalMappings.push(t)}this.__generatedMappings.sort(i.compareByGeneratedPositions),this.__originalMappings.sort(i.compareByOriginalPositions)},r.prototype._findMapping=function(e,t,n,r,i){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return o.search(e,t,i)},r.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},r.prototype.originalPositionFor=function(e){var t={generatedLine:i.getArg(e,"line"),generatedColumn:i.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",i.compareByGeneratedPositions);if(n>=0){var r=this._generatedMappings[n];if(r.generatedLine===t.generatedLine){var o=i.getArg(r,"source",null);return null!=o&&null!=this.sourceRoot&&(o=i.join(this.sourceRoot,o)),{source:o,line:i.getArg(r,"originalLine",null),column:i.getArg(r,"originalColumn",null),name:i.getArg(r,"name",null)}}}return{source:null,line:null,column:null,name:null}},r.prototype.sourceContentFor=function(e){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=i.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var t;if(null!=this.sourceRoot&&(t=i.urlParse(this.sourceRoot))){var n=e.replace(/^file:\/\//,"");if("file"==t.scheme&&this._sources.has(n))return this.sourcesContent[this._sources.indexOf(n)];if((!t.path||"/"==t.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}throw new Error('"'+e+'" is not in the SourceMap.')},r.prototype.generatedPositionFor=function(e){var t={source:i.getArg(e,"source"),originalLine:i.getArg(e,"line"),originalColumn:i.getArg(e,"column")};null!=this.sourceRoot&&(t.source=i.relative(this.sourceRoot,t.source));var n=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",i.compareByOriginalPositions);if(n>=0){var r=this._originalMappings[n];return{line:i.getArg(r,"generatedLine",null),column:i.getArg(r,"generatedColumn",null),lastColumn:i.getArg(r,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},r.prototype.allGeneratedPositionsFor=function(e){var t={source:i.getArg(e,"source"),originalLine:i.getArg(e,"line"),originalColumn:1/0};null!=this.sourceRoot&&(t.source=i.relative(this.sourceRoot,t.source));var n=[],r=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",i.compareByOriginalPositions);if(r>=0)for(var o=this._originalMappings[r];o&&o.originalLine===t.originalLine;)n.push({line:i.getArg(o,"generatedLine",null),column:i.getArg(o,"generatedColumn",null),lastColumn:i.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[--r];return n.reverse()},r.GENERATED_ORDER=1,r.ORIGINAL_ORDER=2,r.prototype.eachMapping=function(e,t,n){var o,a=t||null,s=n||r.GENERATED_ORDER;switch(s){case r.GENERATED_ORDER:o=this._generatedMappings;break;case r.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var u=this.sourceRoot;o.map(function(e){var t=e.source;return null!=t&&null!=u&&(t=i.join(u,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}}).forEach(e,a)},t.SourceMapConsumer=r})}),t.define("/node_modules/source-map/lib/source-map/binary-search.js",function(){define(function(e,t){function n(e,t,r,i,o){var a=Math.floor((t-e)/2)+e,s=o(r,i[a],!0);return 0===s?a:s>0?t-a>1?n(a,t,r,i,o):a:a-e>1?n(e,a,r,i,o):0>e?-1:e}t.search=function(e,t,r){return 0===t.length?-1:n(-1,t.length,e,t,r)}})}),t.define("/node_modules/esutils/lib/utils.js",function(e,n){!function(){"use strict";n.ast=t("/node_modules/esutils/lib/ast.js",e),n.code=t("/node_modules/esutils/lib/code.js",e),n.keyword=t("/node_modules/esutils/lib/keyword.js",e)}()}),t.define("/node_modules/esutils/lib/keyword.js",function(e){!function(){"use strict";function n(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function r(e,t){return t||"yield"!==e?i(e,t):!1}function i(e,t){if(t&&n(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function o(e,t){return"null"===e||"true"===e||"false"===e||r(e,t)}function a(e,t){return"null"===e||"true"===e||"false"===e||i(e,t)}function s(e){return"eval"===e||"arguments"===e}function u(e){var t,n,r;if(0===e.length)return!1;if(r=e.charCodeAt(0),!p.isIdentifierStart(r)||92===r)return!1;for(t=1,n=e.length;n>t;++t)if(r=e.charCodeAt(t),!p.isIdentifierPart(r)||92===r)return!1;return!0}function c(e,t){return u(e)&&!o(e,t)}function l(e,t){return u(e)&&!a(e,t)}var p=t("/node_modules/esutils/lib/code.js",e);e.exports={isKeywordES5:r,isKeywordES6:i,isReservedWordES5:o,isReservedWordES6:a,isRestrictedWord:s,isIdentifierName:u,isIdentifierES5:c,isIdentifierES6:l}}()}),t.define("/node_modules/esutils/lib/code.js",function(e){!function(){"use strict";function t(e){return e>=48&&57>=e}function n(e){return t(e)||e>=97&&102>=e||e>=65&&70>=e}function r(e){return e>=48&&55>=e}function i(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&c.indexOf(e)>=0}function o(e){return 10===e||13===e||8232===e||8233===e}function a(e){return e>=97&&122>=e||e>=65&&90>=e||36===e||95===e||92===e||e>=128&&u.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function s(e){return e>=97&&122>=e||e>=65&&90>=e||e>=48&&57>=e||36===e||95===e||92===e||e>=128&&u.NonAsciiIdentifierPart.test(String.fromCharCode(e))}var u,c;u={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},c=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279],e.exports={isDecimalDigit:t,isHexDigit:n,isOctalDigit:r,isWhiteSpace:i,isLineTerminator:o,isIdentifierStart:a,isIdentifierPart:s}}()}),t.define("/node_modules/esutils/lib/ast.js",function(e){!function(){"use strict";function t(e){if(null==e)return!1;switch(e.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function n(e){if(null==e)return!1;switch(e.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function r(e){if(null==e)return!1;switch(e.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function i(e){return r(e)||null!=e&&"FunctionDeclaration"===e.type}function o(e){switch(e.type){case"IfStatement":return null!=e.alternate?e.alternate:e.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return e.body}return null}function a(e){var t;if("IfStatement"!==e.type)return!1;if(null==e.alternate)return!1;t=e.consequent;do{if("IfStatement"===t.type&&null==t.alternate)return!0;t=o(t)}while(t);return!1}e.exports={isExpression:t,isStatement:r,isIterationStatement:n,isSourceElement:i,isProblematicIfStatement:a,trailingStatement:o}}()}),t.define("/node_modules/estraverse/estraverse.js",function(e,t){!function(e,n){"use strict";n(t)}(this,function n(e){"use strict";function t(){}function r(e){var t,n,i={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],i[t]="object"==typeof n&&null!==n?r(n):n);return i}function i(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function o(e,t){var n,r,i,o;for(r=e.length,i=0;r;)n=r>>>1,o=i+n,t(e[o])?r=n:(i=o+1,r-=n+1);return i}function a(e,t){var n,r,i,o;for(r=e.length,i=0;r;)n=r>>>1,o=i+n,t(e[o])?(i=o+1,r-=n+1):r=n;return i}function s(e,t){return w(t).forEach(function(n){e[n]=t[n]}),e}function u(e,t){this.parent=e,this.key=t}function c(e,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function l(){}function p(e){return null==e?!1:"object"==typeof e&&"string"==typeof e.type}function f(e,t){return(e===v.ObjectExpression||e===v.ObjectPattern)&&"properties"===t}function d(e,t){var n=new l;return n.traverse(e,t)}function h(e,t){var n=new l;return n.replace(e,t)}function m(e,t){var n;return n=o(t,function(t){return t.range[0]>e.range[0]}),e.extendedRange=[e.range[0],e.range[1]],n!==t.length&&(e.extendedRange[1]=t[n].range[0]),n-=1,n>=0&&(e.extendedRange[0]=t[n].range[1]),e}function g(e,t,n){var i,o,a,s,u=[];if(!e.range)throw new Error("attachComments needs range information");if(!n.length){if(t.length){for(a=0,o=t.length;o>a;a+=1)i=r(t[a]),i.extendedRange=[0,e.range[0]],u.push(i);e.leadingComments=u}return e}for(a=0,o=t.length;o>a;a+=1)u.push(m(r(t[a]),n));return s=0,d(e,{enter:function(e){for(var t;s<u.length;){if(t=u[s],t.extendedRange[1]>e.range[0]){if(t.extendedRange[0]<e.range[1]&&(e.type===v.ObjectExpression&&0===e.properties.length||e.type===v.BlockStatement&&0===e.body.length)){e.inlineComments||(e.inlineComments=[]),e.inlineComments.push(t),u.splice(s,1);continue}break}t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),u.splice(s,1)):s+=1}return s===u.length?_.Break:u[s].extendedRange[0]>e.range[1]?_.Skip:void 0}}),s=0,d(e,{leave:function(e){for(var t;s<u.length&&(t=u[s],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),u.splice(s,1)):s+=1;return s===u.length?_.Break:u[s].extendedRange[0]>e.range[1]?_.Skip:void 0}}),e}var v,y,_,x,b,w,S,E,C;return y=Array.isArray,y||(y=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),t(i),t(a),b=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),w=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n},v={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportBatchSpecifier:"ExportBatchSpecifier",ExportDeclaration:"ExportDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},x={AssignmentExpression:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","body","superClass"],ClassExpression:["id","body","superClass"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportBatchSpecifier:[],ExportDeclaration:["declaration","specifiers","source"],ExportSpecifier:["id","name"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["id"],ImportNamespaceSpecifier:["id"],ImportSpecifier:["id","name"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},S={},E={},C={},_={Break:S,Skip:E,Remove:C},u.prototype.replace=function(e){this.parent[this.key]=e
},u.prototype.remove=function(){return y(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},l.prototype.path=function(){function e(e,t){if(y(t))for(r=0,i=t.length;i>r;++r)e.push(t[r]);else e.push(t)}var t,n,r,i,o,a;if(!this.__current.path)return null;for(o=[],t=2,n=this.__leavelist.length;n>t;++t)a=this.__leavelist[t],e(o,a.path);return e(o,this.__current.path),o},l.prototype.type=function(){var e=this.current();return e.type||this.__current.wrap},l.prototype.parents=function(){var e,t,n;for(n=[],e=1,t=this.__leavelist.length;t>e;++e)n.push(this.__leavelist[e].node);return n},l.prototype.current=function(){return this.__current.node},l.prototype.__execute=function(e,t){var n,r;return r=void 0,n=this.__current,this.__current=t,this.__state=null,e&&(r=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=n,r},l.prototype.notify=function(e){this.__state=e},l.prototype.skip=function(){this.notify(E)},l.prototype["break"]=function(){this.notify(S)},l.prototype.remove=function(){this.notify(C)},l.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback="iteration"===t.fallback,this.__keys=x,t.keys&&(this.__keys=s(b(this.__keys),t.keys))},l.prototype.traverse=function(e,t){var n,r,i,o,a,s,u,l,d,h,m,g;for(this.__initialize(e,t),g={},n=this.__worklist,r=this.__leavelist,n.push(new c(e,null,null,null)),r.push(new c(null,null,null,null));n.length;)if(i=n.pop(),i!==g){if(i.node){if(s=this.__execute(t.enter,i),this.__state===S||s===S)return;if(n.push(g),r.push(i),this.__state===E||s===E)continue;if(o=i.node,a=i.wrap||o.type,h=this.__keys[a],!h){if(!this.__fallback)throw new Error("Unknown node type "+a+".");h=w(o)}for(l=h.length;(l-=1)>=0;)if(u=h[l],m=o[u])if(y(m)){for(d=m.length;(d-=1)>=0;)if(m[d]){if(f(a,h[l]))i=new c(m[d],[u,d],"Property",null);else{if(!p(m[d]))continue;i=new c(m[d],[u,d],null,null)}n.push(i)}}else p(m)&&n.push(new c(m,u,null,null))}}else if(i=r.pop(),s=this.__execute(t.leave,i),this.__state===S||s===S)return},l.prototype.replace=function(e,t){function n(e){var t,n,i,o;if(e.ref.remove())for(n=e.ref.key,o=e.ref.parent,t=r.length;t--;)if(i=r[t],i.ref&&i.ref.parent===o){if(i.ref.key<n)break;--i.ref.key}}var r,i,o,a,s,l,d,h,m,g,v,_,x;for(this.__initialize(e,t),v={},r=this.__worklist,i=this.__leavelist,_={root:e},l=new c(e,null,null,new u(_,"root")),r.push(l),i.push(l);r.length;)if(l=r.pop(),l!==v){if(s=this.__execute(t.enter,l),void 0!==s&&s!==S&&s!==E&&s!==C&&(l.ref.replace(s),l.node=s),(this.__state===C||s===C)&&(n(l),l.node=null),this.__state===S||s===S)return _.root;if(o=l.node,o&&(r.push(v),i.push(l),this.__state!==E&&s!==E)){if(a=l.wrap||o.type,m=this.__keys[a],!m){if(!this.__fallback)throw new Error("Unknown node type "+a+".");m=w(o)}for(d=m.length;(d-=1)>=0;)if(x=m[d],g=o[x])if(y(g)){for(h=g.length;(h-=1)>=0;)if(g[h]){if(f(a,m[d]))l=new c(g[h],[x,h],"Property",new u(g,h));else{if(!p(g[h]))continue;l=new c(g[h],[x,h],null,new u(g,h))}r.push(l)}}else p(g)&&r.push(new c(g,x,null,new u(o,x)))}}else if(l=i.pop(),s=this.__execute(t.leave,l),void 0!==s&&s!==S&&s!==E&&s!==C&&l.ref.replace(s),(this.__state===C||s===C)&&n(l),this.__state===S||s===S)return _.root;return _.root},e.version="1.8.1-dev",e.Syntax=v,e.traverse=d,e.replace=h,e.attachComments=g,e.VisitorKeys=x,e.VisitorOption=_,e.Controller=l,e.cloneEnvironment=function(){return n({})},e})}),t("/tools/entry-point.js")}).call(this,this),define("sap.watt.saptoolsets.innovation.reportABug/service/ReportABugMenuItem",[],function(){"use strict";return{init:function(){var e=this;this.oButton=new sap.ui.commons.Button("report",{icon:"sap-icon://vehicle-repair",lite:!0,tooltip:"Report a Problem",iconFirst:!1,press:function(){e.context.service.reportABug.report("Report")}}),this.oButton.addStyleClass("reportBtn")},configure:function(e){this._aStyles=e.styles},getContent:function(){var e=this;return this.context.service.reportABug.isSupported().then(function(t){return t?e.context.service.resource.includeStyles(e._aStyles).then(function(){return[e.oButton]}):null})}}}),define("sap.watt.saptoolsets.innovation.reportABug/service/ReportABug",[],function(){"use strict";return{_supported:null,MAX_SAVED_LOG_SIZE:25e4,initPlugin:function(){var e=this;this.isSupported().then(function(t){if(t){var n=console.error;window.myLog="",console.error=function(t){window.myLog.length>e.MAX_SAVED_LOG_SIZE&&(window.myLog=""),window.myLog=window.myLog+"\n"+t,n.apply(console,arguments)},window.sap.watt.reportABug=e;var r=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}};e.initReportView(),window.onerror=function(e,t,n,i,o){if(o||(o=new Error(e?e:"no details available",t?t:"",n?n:void 0)),!window.ui5WattQunit){var a,s=sap.watt.network.getNetworkState();if(s.isNetworkAvailable())if(s.isSessionTimeOutInPreview())a="The preview session timed out.\nPlease restart the preview.",alert(a);else if(s.isResponseOk()){var u=r()();jQuery.sap.require("sap.watt.saptoolsets.innovation.reportABug.utils.SupportMessageBox");var c=sap.watt.saptoolsets.innovation.reportABug.utils.SupportMessageBox;if("SESSION_GONE"===o.message)a="Connection has been broken or session has expired. Copy the content of your unsaved files to an external file and then refresh to reconnect.",c.show(a,"WARNING","Warning",[],null,null,"MSG_UNHANDLEDERROR"+u);else{console.error("Unhandled Error",o),console.error(o.stack),a="Unhandled Error: "+o.message;var l=["Report","Ok"],p=window.sap.watt.reportABug.report,f="Report";"none"===$("#failure").css("display")&&c.show(a,"ERROR","Error",l,p,f,"MSG_UNHANDLEDERROR"+u,o)}}else a="Unexpected server response.\nPlease try again later.",console.error("Unexpected server response: ",s.getLastError()),"none"===$("#failure").css("display")&&alert(a);else a="The host is not reachable.\nPlease check your network connection.",alert(a)}}}})},isSupported:function(){var e=this;return sap.watt.getEnv("internal")?null===this._supported?(window.console.log("check if report A bug mailservice supported"),Q.sap.ajax({type:"GET",url:"/destinations/reportmailservice"}).then(function(t){return t[0]?(e._supported=!0,e._supported):void 0}).fail(function(t){return e._supported=!1,window.console.error("Web IDE mailservice is not supported",t.statusText),e._supported})):Q(this._supported):Q(!1)},initReportView:function(){var e=this;sap.ui.view("reportABugView",{viewName:"sap.watt.saptoolsets.innovation.plugin.reportABug.view.ReportABug",type:sap.ui.core.mvc.ViewType.JS,viewData:{service:e.context.service,context:e.context}})},report:function(e,t){if("Report"===e){var n=sap.ui.getCore().byId("reportABugView");n&&(n.getViewData().context.sysError=t,n.getController().openForm())}}}});var JSZip=function(e,t){this.files={},this.root="",e&&this.load(e,t)};JSZip.signature={LOCAL_FILE_HEADER:"PK",CENTRAL_FILE_HEADER:"PK",CENTRAL_DIRECTORY_END:"PK",ZIP64_CENTRAL_DIRECTORY_LOCATOR:"PK",ZIP64_CENTRAL_DIRECTORY_END:"PK",DATA_DESCRIPTOR:"PK\b"},JSZip.defaults={base64:!1,binary:!1,dir:!1,date:null,compression:null},JSZip.support={arraybuffer:function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array}(),nodebuffer:function(){return"undefined"!=typeof Buffer}(),uint8array:function(){return"undefined"!=typeof Uint8Array}(),blob:function(){if("undefined"==typeof ArrayBuffer)return!1;var e=new ArrayBuffer(0);try{return 0===new Blob([e],{type:"application/zip"}).size}catch(t){}try{var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,r=new n;return r.append(e),0===r.getBlob("application/zip").size}catch(t){}return!1}()},JSZip.prototype=function(){var e,t;JSZip.support.uint8array&&"function"==typeof TextEncoder&&"function"==typeof TextDecoder&&(e=new TextEncoder("utf-8"),t=new TextDecoder("utf-8"));var n=function(e){if(e._data instanceof JSZip.CompressedObject&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===JSZip.utils.getTypeOf(e._data))){var t=e._data;e._data=new Uint8Array(t.length),0!==t.length&&e._data.set(t,0)}return e._data},r=function(t){var r=n(t),i=JSZip.utils.getTypeOf(r);if("string"===i){if(!t.options.binary){if(e)return e.encode(r);if(JSZip.support.nodebuffer)return new Buffer(r,"utf-8")}return t.asBinary()}return r},i=function(e){var t=n(this);return null===t||"undefined"==typeof t?"":(this.options.base64&&(t=JSZip.base64.decode(t)),t=e&&this.options.binary?JSZip.prototype.utf8decode(t):JSZip.utils.transformTo("string",t),e||this.options.binary||(t=JSZip.prototype.utf8encode(t)),t)},o=function(e,t,n){this.name=e,this._data=t,this.options=n};o.prototype={asText:function(){return i.call(this,!0)},asBinary:function(){return i.call(this,!1)},asNodeBuffer:function(){var e=r(this);return JSZip.utils.transformTo("nodebuffer",e)},asUint8Array:function(){var e=r(this);return JSZip.utils.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var a=function(e,t){var n,r="";for(n=0;t>n;n++)r+=String.fromCharCode(255&e),e>>>=8;return r},s=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&"undefined"==typeof n[t]&&(n[t]=arguments[e][t]);return n},u=function(e){return e=e||{},e.base64===!0&&null==e.binary&&(e.binary=!0),e=s(e,JSZip.defaults),e.date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e},c=function(e,t,n){var r=l(e),i=JSZip.utils.getTypeOf(t);if(r&&p.call(this,r),n=u(n),n.dir||null===t||"undefined"==typeof t)n.base64=!1,n.binary=!1,t=null;else if("string"===i)n.binary&&!n.base64&&n.optimizedBinaryString!==!0&&(t=JSZip.utils.string2binary(t));else{if(n.base64=!1,n.binary=!0,!(i||t instanceof JSZip.CompressedObject))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"===i&&(t=JSZip.utils.transformTo("uint8array",t))}var a=new o(e,t,n);return this.files[e]=a,a},l=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},p=function(e){return"/"!=e.slice(-1)&&(e+="/"),this.files[e]||c.call(this,e,null,{dir:!0}),this.files[e]},f=function(e,t){var n,i=new JSZip.CompressedObject;return e._data instanceof JSZip.CompressedObject?(i.uncompressedSize=e._data.uncompressedSize,i.crc32=e._data.crc32,0===i.uncompressedSize||e.options.dir?(t=JSZip.compressions.STORE,i.compressedContent="",i.crc32=0):e._data.compressionMethod===t.magic?i.compressedContent=e._data.getCompressedContent():(n=e._data.getContent(),i.compressedContent=t.compress(JSZip.utils.transformTo(t.compressInputType,n)))):(n=r(e),(!n||0===n.length||e.options.dir)&&(t=JSZip.compressions.STORE,n=""),i.uncompressedSize=n.length,i.crc32=this.crc32(n),i.compressedContent=t.compress(JSZip.utils.transformTo(t.compressInputType,n))),i.compressedSize=i.compressedContent.length,i.compressionMethod=t.magic,i},d=function(e,t,n,r){var i,o,s=(n.compressedContent,this.utf8encode(t.name)),u=s!==t.name,c=t.options;i=c.date.getHours(),i<<=6,i|=c.date.getMinutes(),i<<=5,i|=c.date.getSeconds()/2,o=c.date.getFullYear()-1980,o<<=4,o|=c.date.getMonth()+1,o<<=5,o|=c.date.getDate();var l="";l+="\n\x00",l+=u?"\x00\b":"\x00\x00",l+=n.compressionMethod,l+=a(i,2),l+=a(o,2),l+=a(n.crc32,4),l+=a(n.compressedSize,4),l+=a(n.uncompressedSize,4),l+=a(s.length,2),l+="\x00\x00";var p=JSZip.signature.LOCAL_FILE_HEADER+l+s,f=JSZip.signature.CENTRAL_FILE_HEADER+"\x00"+l+"\x00\x00"+"\x00\x00"+"\x00\x00"+(t.options.dir===!0?"\x00\x00\x00":"\x00\x00\x00\x00")+a(r,4)+s;return{fileRecord:p,dirRecord:f,compressedObject:n}},h=function(){this.data=[]};h.prototype={append:function(e){e=JSZip.utils.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}};var m=function(e){this.data=new Uint8Array(e),this.index=0};return m.prototype={append:function(e){0!==e.length&&(e=JSZip.utils.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},{load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var t,n,r,i,a=[];for(t in this.files)this.files.hasOwnProperty(t)&&(r=this.files[t],i=new o(r.name,r._data,s(r.options)),n=t.slice(this.root.length,t.length),t.slice(0,this.root.length)===this.root&&e(n,i)&&a.push(i));return a},file:function(e,t,n){if(1===arguments.length){if(JSZip.utils.isRegExp(e)){var r=e;return this.filter(function(e,t){return!t.options.dir&&r.test(e)})}return this.filter(function(t,n){return!n.options.dir&&t===e})[0]||null}return e=this.root+e,c.call(this,e,t,n),this},folder:function(e){if(!e)return this;if(JSZip.utils.isRegExp(e))return this.filter(function(t,n){return n.options.dir&&e.test(t)});var t=this.root+e,n=p.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!=e.slice(-1)&&(e+="/"),t=this.files[e]),t)if(t.options.dir)for(var n=this.filter(function(t,n){return n.name.slice(0,e.length)===e}),r=0;r<n.length;r++)delete this.files[n[r].name];else delete this.files[e];return this},generate:function(e){e=s(e||{},{base64:!0,compression:"STORE",type:"base64"}),JSZip.utils.checkSupport(e.type);var t,n,r=[],i=0,o=0;for(var u in this.files)if(this.files.hasOwnProperty(u)){var c=this.files[u],l=c.options.compression||e.compression.toUpperCase(),p=JSZip.compressions[l];if(!p)throw new Error(l+" is not a valid compression method !");var g=f.call(this,c,p),v=d.call(this,u,c,g,i);i+=v.fileRecord.length+g.compressedSize,o+=v.dirRecord.length,r.push(v)}var y="";switch(y=JSZip.signature.CENTRAL_DIRECTORY_END+"\x00\x00"+"\x00\x00"+a(r.length,2)+a(r.length,2)+a(o,4)+a(i,4)+"\x00\x00",e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"blob":case"nodebuffer":t=new m(i+o+y.length);break;default:t=new h(i+o+y.length)}for(n=0;n<r.length;n++)t.append(r[n].fileRecord),t.append(r[n].compressedObject.compressedContent);for(n=0;n<r.length;n++)t.append(r[n].dirRecord);t.append(y);var _=t.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return JSZip.utils.transformTo(e.type.toLowerCase(),_);case"blob":return JSZip.utils.arrayBuffer2Blob(JSZip.utils.transformTo("arraybuffer",_));case"base64":return e.base64?JSZip.base64.encode(_):_;default:return _}},crc32:function(e,t){if("undefined"==typeof e||!e.length)return 0;var n="string"!==JSZip.utils.getTypeOf(e),r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"==typeof t&&(t=0);var i=0,o=0,a=0;t=-1^t;for(var s=0,u=e.length;u>s;s++)a=n?e[s]:e.charCodeAt(s),o=255&(t^a),i=r[o],t=t>>>8^i;return-1^t},clone:function(){var e=new JSZip;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e},utf8encode:function(t){if(e){var n=e.encode(t);return JSZip.utils.transformTo("string",n)}if(JSZip.support.nodebuffer)return JSZip.utils.transformTo("string",new Buffer(t,"utf-8"));for(var r=[],i=0,o=0;o<t.length;o++){var a=t.charCodeAt(o);128>a?r[i++]=String.fromCharCode(a):a>127&&2048>a?(r[i++]=String.fromCharCode(192|a>>6),r[i++]=String.fromCharCode(128|63&a)):(r[i++]=String.fromCharCode(224|a>>12),r[i++]=String.fromCharCode(128|63&a>>6),r[i++]=String.fromCharCode(128|63&a))}return r.join("")},utf8decode:function(e){var n=[],r=0,i=JSZip.utils.getTypeOf(e),o="string"!==i,a=0,s=0,u=0,c=0;if(t)return t.decode(JSZip.utils.transformTo("uint8array",e));if(JSZip.support.nodebuffer)return JSZip.utils.transformTo("nodebuffer",e).toString("utf-8");for(;a<e.length;)s=o?e[a]:e.charCodeAt(a),128>s?(n[r++]=String.fromCharCode(s),a++):s>191&&224>s?(u=o?e[a+1]:e.charCodeAt(a+1),n[r++]=String.fromCharCode((31&s)<<6|63&u),a+=2):(u=o?e[a+1]:e.charCodeAt(a+1),c=o?e[a+2]:e.charCodeAt(a+2),n[r++]=String.fromCharCode((15&s)<<12|(63&u)<<6|63&c),a+=3);return n.join("")}}}(),JSZip.compressions={STORE:{magic:"\x00\x00",compress:function(e){return e},uncompress:function(e){return e},compressInputType:null,uncompressInputType:null}},function(){function e(e){return e}function t(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}function n(e){var t=65536,n=[],r=e.length,i=JSZip.utils.getTypeOf(e),o=0,a=!0;try{switch(i){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,new Buffer(0))}}catch(s){a=!1}if(!a){for(var u="",c=0;c<e.length;c++)u+=String.fromCharCode(e[c]);return u}for(;r>o&&t>1;)try{"array"===i||"nodebuffer"===i?n.push(String.fromCharCode.apply(null,e.slice(o,Math.min(o+t,r)))):n.push(String.fromCharCode.apply(null,e.subarray(o,Math.min(o+t,r)))),o+=t}catch(s){t=Math.floor(t/2)}return n.join("")}function r(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}JSZip.utils={string2binary:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(255&e.charCodeAt(n));return t},string2Uint8Array:function(e){return JSZip.utils.transformTo("uint8array",e)},uint8Array2String:function(e){return JSZip.utils.transformTo("string",e)},arrayBuffer2Blob:function(e){JSZip.utils.checkSupport("blob");try{return new Blob([e],{type:"application/zip"})}catch(t){}try{var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,r=new n;return r.append(e),r.getBlob("application/zip")}catch(t){}throw new Error("Bug : can't construct the Blob.")},string2Blob:function(e){var t=JSZip.utils.transformTo("arraybuffer",e);return JSZip.utils.arrayBuffer2Blob(t)}};var i={};i.string={string:e,array:function(e){return t(e,new Array(e.length))},arraybuffer:function(e){return i.string.uint8array(e).buffer},uint8array:function(e){return t(e,new Uint8Array(e.length))},nodebuffer:function(e){return t(e,new Buffer(e.length))}},i.array={string:n,array:e,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return new Buffer(e)}},i.arraybuffer={string:function(e){return n(new Uint8Array(e))},array:function(e){return r(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:e,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return new Buffer(new Uint8Array(e))}},i.uint8array={string:n,array:function(e){return r(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:e,nodebuffer:function(e){return new Buffer(e)}},i.nodebuffer={string:n,array:function(e){return r(e,new Array(e.length))},arraybuffer:function(e){return i.nodebuffer.uint8array(e).buffer},uint8array:function(e){return r(e,new Uint8Array(e.length))},nodebuffer:e},JSZip.utils.transformTo=function(e,t){if(t||(t=""),!e)return t;JSZip.utils.checkSupport(e);var n=JSZip.utils.getTypeOf(t),r=i[n][e](t);return r},JSZip.utils.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":JSZip.support.nodebuffer&&Buffer.isBuffer(e)?"nodebuffer":JSZip.support.uint8array&&e instanceof Uint8Array?"uint8array":JSZip.support.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},JSZip.utils.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},JSZip.utils.checkSupport=function(e){var t=!0;switch(e.toLowerCase()){case"uint8array":t=JSZip.support.uint8array;break;case"arraybuffer":t=JSZip.support.arraybuffer;break;case"nodebuffer":t=JSZip.support.nodebuffer;break;case"blob":t=JSZip.support.blob}if(!t)throw new Error(e+" is not supported by this browser")}}(),function(){JSZip.CompressedObject=function(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null},JSZip.CompressedObject.prototype={getContent:function(){return null},getCompressedContent:function(){return null}}}(),JSZip.base64=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(t){for(var n,r,i,o,a,s,u,c="",l=0;l<t.length;)n=t.charCodeAt(l++),r=t.charCodeAt(l++),i=t.charCodeAt(l++),o=n>>2,a=(3&n)<<4|r>>4,s=(15&r)<<2|i>>6,u=63&i,isNaN(r)?s=u=64:isNaN(i)&&(u=64),c=c+e.charAt(o)+e.charAt(a)+e.charAt(s)+e.charAt(u);return c},decode:function(t){var n,r,i,o,a,s,u,c="",l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)o=e.indexOf(t.charAt(l++)),a=e.indexOf(t.charAt(l++)),s=e.indexOf(t.charAt(l++)),u=e.indexOf(t.charAt(l++)),n=o<<2|a>>4,r=(15&a)<<4|s>>2,i=(3&s)<<6|u,c+=String.fromCharCode(n),64!=s&&(c+=String.fromCharCode(r)),64!=u&&(c+=String.fromCharCode(i));return c}}}(),define("sap/watt/lib/jszip/jszip",function(e){return function(){var t;return t||e.JSZip}}(this)),function(){"use strict";if(!JSZip)throw"JSZip not defined";var e={};(function(){(function(){function e(e,t){var n=e.split("."),r=d;!(n[0]in r)&&r.execScript&&r.execScript("var "+n[0]);for(var i;n.length&&(i=n.shift());)n.length||t===p?r=r[i]?r[i]:r[i]={}:r[i]=t}function t(e,t){if(this.index="number"==typeof t?t:0,this.d=0,this.buffer=e instanceof(h?Uint8Array:Array)?e:new(h?Uint8Array:Array)(32768),2*this.buffer.length<=this.index)throw Error("invalid index");this.buffer.length<=this.index&&n(this)}function n(e){var t,n=e.buffer,r=n.length,i=new(h?Uint8Array:Array)(r<<1);if(h)i.set(n);else for(t=0;r>t;++t)i[t]=n[t];return e.buffer=i}function r(e){this.buffer=new(h?Uint16Array:Array)(2*e),this.length=0}function i(e,t){this.e=w,this.f=0,this.input=h&&e instanceof Array?new Uint8Array(e):e,this.c=0,t&&(t.lazy&&(this.f=t.lazy),"number"==typeof t.compressionType&&(this.e=t.compressionType),t.outputBuffer&&(this.b=h&&t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.c=t.outputIndex)),this.b||(this.b=new(h?Uint8Array:Array)(32768))}function o(e,t){this.length=e,this.g=t}function a(e,t){function n(e,t){var n,r=e.g,i=[],o=0;n=C[e.length],i[o++]=65535&n,i[o++]=255&n>>16,i[o++]=n>>24;var a;switch(f){case 1===r:a=[0,r-1,0];break;case 2===r:a=[1,r-2,0];break;case 3===r:a=[2,r-3,0];break;case 4===r:a=[3,r-4,0];break;case 6>=r:a=[4,r-5,1];break;case 8>=r:a=[5,r-7,1];break;case 12>=r:a=[6,r-9,2];break;case 16>=r:a=[7,r-13,2];break;case 24>=r:a=[8,r-17,3];break;case 32>=r:a=[9,r-25,3];break;case 48>=r:a=[10,r-33,4];break;case 64>=r:a=[11,r-49,4];break;case 96>=r:a=[12,r-65,5];break;case 128>=r:a=[13,r-97,5];break;case 192>=r:a=[14,r-129,6];break;case 256>=r:a=[15,r-193,6];break;case 384>=r:a=[16,r-257,7];break;case 512>=r:a=[17,r-385,7];break;case 768>=r:a=[18,r-513,8];break;case 1024>=r:a=[19,r-769,8];break;case 1536>=r:a=[20,r-1025,9];break;case 2048>=r:a=[21,r-1537,9];break;case 3072>=r:a=[22,r-2049,10];break;case 4096>=r:a=[23,r-3073,10];break;case 6144>=r:a=[24,r-4097,11];break;case 8192>=r:a=[25,r-6145,11];break;case 12288>=r:a=[26,r-8193,12];break;case 16384>=r:a=[27,r-12289,12];break;case 24576>=r:a=[28,r-16385,13];break;case 32768>=r:a=[29,r-24577,13];break;default:throw"invalid distance"}n=a,i[o++]=n[0],i[o++]=n[1],i[o++]=n[2];var s,u;for(s=0,u=i.length;u>s;++s)v[y++]=i[s];x[i[0]]++,b[i[3]]++,_=e.length+t-1,d=null}var r,i,o,a,u,c,l,d,m,g={},v=h?new Uint16Array(2*t.length):[],y=0,_=0,x=new(h?Uint32Array:Array)(286),b=new(h?Uint32Array:Array)(30),w=e.f;if(!h){for(o=0;285>=o;)x[o++]=0;for(o=0;29>=o;)b[o++]=0}for(x[256]=1,r=0,i=t.length;i>r;++r){for(o=u=0,a=3;a>o&&r+o!==i;++o)u=u<<8|t[r+o];if(g[u]===p&&(g[u]=[]),c=g[u],!(0<_--)){for(;0<c.length&&32768<r-c[0];)c.shift();if(r+3>=i){for(d&&n(d,-1),o=0,a=i-r;a>o;++o)m=t[r+o],v[y++]=m,++x[m];break}0<c.length?(l=s(t,r,c),d?d.length<l.length?(m=t[r-1],v[y++]=m,++x[m],n(l,0)):n(d,-1):l.length<w?d=l:n(l,0)):d?n(d,-1):(m=t[r],v[y++]=m,++x[m])}c.push(r)}return v[y++]=256,x[256]++,e.j=x,e.i=b,h?v.subarray(0,y):v}function s(e,t,n){var r,i,a,s,u,c,l=0,p=e.length;s=0,c=n.length;e:for(;c>s;s++){if(r=n[c-s-1],a=3,l>3){for(u=l;u>3;u--)if(e[r+u-1]!==e[t+u-1])continue e;a=l}for(;258>a&&p>t+a&&e[r+a]===e[t+a];)++a;if(a>l&&(i=r,l=a),258===a)break}return new o(l,t-i)}function u(e,t){var n,i,o,a,s,u=e.length,l=new r(572),p=new(h?Uint8Array:Array)(u);if(!h)for(a=0;u>a;a++)p[a]=0;for(a=0;u>a;++a)0<e[a]&&l.push(a,e[a]);if(n=Array(l.length/2),i=new(h?Uint32Array:Array)(l.length/2),1===n.length)return p[l.pop().index]=1,p;for(a=0,s=l.length/2;s>a;++a)n[a]=l.pop(),i[a]=n[a].value;for(o=c(i,i.length,t),a=0,s=n.length;s>a;++a)p[n[a].index]=o[a];return p}function c(e,t,n){function r(e){var n=d[e][m[e]];n===t?(r(e+1),r(e+1)):--p[n],++m[e]}var i,o,a,s,u,c=new(h?Uint16Array:Array)(n),l=new(h?Uint8Array:Array)(n),p=new(h?Uint8Array:Array)(t),f=Array(n),d=Array(n),m=Array(n),g=(1<<n)-t,v=1<<n-1;for(c[n-1]=t,o=0;n>o;++o)v>g?l[o]=0:(l[o]=1,g-=v),g<<=1,c[n-2-o]=(0|c[n-1-o]/2)+t;for(c[0]=l[0],f[0]=Array(c[0]),d[0]=Array(c[0]),o=1;n>o;++o)c[o]>2*c[o-1]+l[o]&&(c[o]=2*c[o-1]+l[o]),f[o]=Array(c[o]),d[o]=Array(c[o]);for(i=0;t>i;++i)p[i]=n;for(a=0;a<c[n-1];++a)f[n-1][a]=e[a],d[n-1][a]=a;for(i=0;n>i;++i)m[i]=0;for(1===l[n-1]&&(--p[0],++m[n-1]),o=n-2;o>=0;--o){for(s=i=0,u=m[o+1],a=0;a<c[o];a++)s=f[o+1][u]+f[o+1][u+1],s>e[i]?(f[o][a]=s,d[o][a]=t,u+=2):(f[o][a]=e[i],d[o][a]=i,++i);m[o]=0,1===l[o]&&r(o)}return p}function l(e){var t,n,r,i,o=new(h?Uint16Array:Array)(e.length),a=[],s=[],u=0;for(t=0,n=e.length;n>t;t++)a[e[t]]=(0|a[e[t]])+1;for(t=1,n=16;n>=t;t++)s[t]=u,u+=0|a[t],u<<=1;for(t=0,n=e.length;n>t;t++)for(u=s[e[t]],s[e[t]]+=1,r=o[t]=0,i=e[t];i>r;r++)o[t]=o[t]<<1|1&u,u>>>=1;return o}var p=void 0,f=!0,d=this,h="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array;t.prototype.a=function(e,t,r){var i,o=this.buffer,a=this.index,s=this.d,u=o[a];if(r&&t>1&&(e=t>8?(x[255&e]<<24|x[255&e>>>8]<<16|x[255&e>>>16]<<8|x[255&e>>>24])>>32-t:x[e]>>8-t),8>t+s)u=u<<t|e,s+=t;else for(i=0;t>i;++i)u=u<<1|1&e>>t-i-1,8===++s&&(s=0,o[a++]=x[u],u=0,a===o.length&&(o=n(this)));o[a]=u,this.buffer=o,this.d=s,this.index=a},t.prototype.finish=function(){var e,t=this.buffer,n=this.index;return 0<this.d&&(t[n]<<=8-this.d,t[n]=x[t[n]],n++),h?e=t.subarray(0,n):(t.length=n,e=t),e};var m,g=new(h?Uint8Array:Array)(256);for(m=0;256>m;++m){for(var v=m,y=v,_=7,v=v>>>1;v;v>>>=1)y<<=1,y|=1&v,--_;g[m]=(255&y<<_)>>>0}var x=g;r.prototype.getParent=function(e){return 2*(0|(e-2)/4)},r.prototype.push=function(e,t){var n,r,i,o=this.buffer;for(n=this.length,o[this.length++]=t,o[this.length++]=e;n>0&&(r=this.getParent(n),o[n]>o[r]);)i=o[n],o[n]=o[r],o[r]=i,i=o[n+1],o[n+1]=o[r+1],o[r+1]=i,n=r;return this.length},r.prototype.pop=function(){var e,t,n,r,i,o=this.buffer;for(t=o[0],e=o[1],this.length-=2,o[0]=o[this.length],o[1]=o[this.length+1],i=0;(r=2*i+2,!(r>=this.length))&&(r+2<this.length&&o[r+2]>o[r]&&(r+=2),o[r]>o[i]);)n=o[i],o[i]=o[r],o[r]=n,n=o[i+1],o[i+1]=o[r+1],o[r+1]=n,i=r;return{index:e,value:t,length:this.length}};var b,w=2,S=[];for(b=0;288>b;b++)switch(f){case 143>=b:S.push([b+48,8]);break;case 255>=b:S.push([b-144+400,9]);break;case 279>=b:S.push([b-256+0,7]);break;case 287>=b:S.push([b-280+192,8]);break;default:throw"invalid literal: "+b}i.prototype.h=function(){var e,n,r,i,o=this.input;switch(this.e){case 0:for(r=0,i=o.length;i>r;){n=h?o.subarray(r,r+65535):o.slice(r,r+65535),r+=n.length;var s=n,c=r===i,d=p,m=p,g=p,v=p,y=p,_=this.b,x=this.c;if(h){for(_=new Uint8Array(this.b.buffer);_.length<=x+s.length+5;)_=new Uint8Array(_.length<<1);_.set(this.b)}if(d=c?1:0,_[x++]=0|d,m=s.length,g=65535&~m+65536,_[x++]=255&m,_[x++]=255&m>>>8,_[x++]=255&g,_[x++]=255&g>>>8,h)_.set(s,x),x+=s.length,_=_.subarray(0,x);else{for(v=0,y=s.length;y>v;++v)_[x++]=s[v];_.length=x}this.c=x,this.b=_}break;case 1:var b=new t(h?new Uint8Array(this.b.buffer):this.b,this.c);b.a(1,1,f),b.a(1,2,f);var E,C,T,P=a(this,o);for(E=0,C=P.length;C>E;E++)if(T=P[E],t.prototype.a.apply(b,S[T]),T>256)b.a(P[++E],P[++E],f),b.a(P[++E],5),b.a(P[++E],P[++E],f);else if(256===T)break;this.b=b.finish(),this.c=this.b.length;break;case w:var I,D,A,N,k,O,R,j,F,L,M,B,U,V,Q,G=new t(h?new Uint8Array(this.b.buffer):this.b,this.c),H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=Array(19);for(I=w,G.a(1,1,f),G.a(I,2,f),D=a(this,o),O=u(this.j,15),R=l(O),j=u(this.i,7),F=l(j),A=286;A>257&&0===O[A-1];A--);for(N=30;N>1&&0===j[N-1];N--);var W,q,X,$,J,K,Y=A,Z=N,et=new(h?Uint32Array:Array)(Y+Z),tt=new(h?Uint32Array:Array)(316),nt=new(h?Uint8Array:Array)(19);for(W=q=0;Y>W;W++)et[q++]=O[W];for(W=0;Z>W;W++)et[q++]=j[W];if(!h)for(W=0,$=nt.length;$>W;++W)nt[W]=0;for(W=J=0,$=et.length;$>W;W+=q){for(q=1;$>W+q&&et[W+q]===et[W];++q);if(X=q,0===et[W])if(3>X)for(;0<X--;)tt[J++]=0,nt[0]++;else for(;X>0;)K=138>X?X:138,K>X-3&&X>K&&(K=X-3),10>=K?(tt[J++]=17,tt[J++]=K-3,nt[17]++):(tt[J++]=18,tt[J++]=K-11,nt[18]++),X-=K;else if(tt[J++]=et[W],nt[et[W]]++,X--,3>X)for(;0<X--;)tt[J++]=et[W],nt[et[W]]++;else for(;X>0;)K=6>X?X:6,K>X-3&&X>K&&(K=X-3),tt[J++]=16,tt[J++]=K-3,nt[16]++,X-=K}for(e=h?tt.subarray(0,J):tt.slice(0,J),L=u(nt,7),V=0;19>V;V++)z[V]=L[H[V]];for(k=19;k>4&&0===z[k-1];k--);for(M=l(L),G.a(A-257,5,f),G.a(N-1,5,f),G.a(k-4,4,f),V=0;k>V;V++)G.a(z[V],3,f);for(V=0,Q=e.length;Q>V;V++)if(B=e[V],G.a(M[B],L[B],f),B>=16){switch(V++,B){case 16:U=2;break;case 17:U=3;break;case 18:U=7;break;default:throw"invalid code: "+B}G.a(e[V],U,f)}var rt,it,ot,at,st,ut,ct,lt,pt=[R,O],ft=[F,j];for(st=pt[0],ut=pt[1],ct=ft[0],lt=ft[1],rt=0,it=D.length;it>rt;++rt)if(ot=D[rt],G.a(st[ot],ut[ot],f),ot>256)G.a(D[++rt],D[++rt],f),at=D[++rt],G.a(ct[at],lt[at],f),G.a(D[++rt],D[++rt],f);
else if(256===ot)break;this.b=G.finish(),this.c=this.b.length;break;default:throw"invalid compression type"}return this.b};var E=function(){function e(e){switch(f){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case 12>=e:return[265,e-11,1];case 14>=e:return[266,e-13,1];case 16>=e:return[267,e-15,1];case 18>=e:return[268,e-17,1];case 22>=e:return[269,e-19,2];case 26>=e:return[270,e-23,2];case 30>=e:return[271,e-27,2];case 34>=e:return[272,e-31,2];case 42>=e:return[273,e-35,3];case 50>=e:return[274,e-43,3];case 58>=e:return[275,e-51,3];case 66>=e:return[276,e-59,3];case 82>=e:return[277,e-67,4];case 98>=e:return[278,e-83,4];case 114>=e:return[279,e-99,4];case 130>=e:return[280,e-115,4];case 162>=e:return[281,e-131,5];case 194>=e:return[282,e-163,5];case 226>=e:return[283,e-195,5];case 257>=e:return[284,e-227,5];case 258===e:return[285,e-258,0];default:throw"invalid length: "+e}}var t,n,r=[];for(t=3;258>=t;t++)n=e(t),r[t]=n[2]<<24|n[1]<<16|n[0];return r}(),C=h?new Uint32Array(E):E;e("Zlib.RawDeflate",i),e("Zlib.RawDeflate.prototype.compress",i.prototype.h);var T,P,I,D,A={NONE:0,FIXED:1,DYNAMIC:w};if(Object.keys)T=Object.keys(A);else for(P in T=[],I=0,A)T[I++]=P;for(I=0,D=T.length;D>I;++I)P=T[I],e("Zlib.RawDeflate.CompressionType."+P,A[P])}).call(this)}).call(e);var t=function(t){var n=new e.Zlib.RawDeflate(t);return n.compress()},n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array;JSZip.compressions.DEFLATE?(JSZip.compressions.DEFLATE.compress=t,JSZip.compressions.DEFLATE.compressInputType=n?"uint8array":"array"):JSZip.compressions.DEFLATE={magic:"\b\x00",compress:t,compressInputType:n?"uint8array":"array"}}(),define("sap/watt/lib/jszip/jszip-deflate",["sap/watt/lib/jszip/jszip"],function(e){return function(){var t;return t||e.JSZip}}(this)),function(){"use strict";if(!JSZip)throw"JSZip not defined";var e={};(function(){(function(){function e(e,t){var n=e.split("."),r=s;!(n[0]in r)&&r.execScript&&r.execScript("var "+n[0]);for(var i;n.length&&(i=n.shift());)n.length||t===a?r=r[i]?r[i]:r[i]={}:r[i]=t}function t(e){var t,n,r,i,o,a,s,c,l,p=e.length,f=0,d=Number.POSITIVE_INFINITY;for(c=0;p>c;++c)e[c]>f&&(f=e[c]),e[c]<d&&(d=e[c]);for(t=1<<f,n=new(u?Uint32Array:Array)(t),r=1,i=0,o=2;f>=r;){for(c=0;p>c;++c)if(e[c]===r){for(a=0,s=i,l=0;r>l;++l)a=a<<1|1&s,s>>=1;for(l=a;t>l;l+=o)n[l]=r<<16|c;++i}++r,i<<=1,o<<=1}return[n,f,d]}function n(e,t){switch(this.g=[],this.h=32768,this.c=this.f=this.d=this.k=0,this.input=u?new Uint8Array(e):e,this.l=!1,this.i=l,this.p=!1,(t||!(t={}))&&(t.index&&(this.d=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.p=t.resize)),this.i){case c:this.a=32768,this.b=new(u?Uint8Array:Array)(32768+this.h+258);break;case l:this.a=0,this.b=new(u?Uint8Array:Array)(this.h),this.e=this.u,this.m=this.r,this.j=this.s;break;default:throw Error("invalid inflate mode")}}function r(e,t){for(var n,r=e.f,i=e.c,o=e.input,s=e.d;t>i;){if(n=o[s++],n===a)throw Error("input buffer is broken");r|=n<<i,i+=8}return n=r&(1<<t)-1,e.f=r>>>t,e.c=i-t,e.d=s,n}function i(e,t){for(var n,r,i,o=e.f,s=e.c,u=e.input,c=e.d,l=t[0],p=t[1];p>s&&(n=u[c++],n!==a);)o|=n<<s,s+=8;return r=l[o&(1<<p)-1],i=r>>>16,e.f=o>>i,e.c=s-i,e.d=c,65535&r}function o(e){function n(e,t,n){var o,a,s,u;for(u=0;e>u;)switch(o=i(this,t)){case 16:for(s=3+r(this,2);s--;)n[u++]=a;break;case 17:for(s=3+r(this,3);s--;)n[u++]=0;a=0;break;case 18:for(s=11+r(this,7);s--;)n[u++]=0;a=0;break;default:a=n[u++]=o}return n}var o,a,s,c,l=r(e,5)+257,p=r(e,5)+1,f=r(e,4)+4,d=new(u?Uint8Array:Array)(h.length);for(c=0;f>c;++c)d[h[c]]=r(e,3);o=t(d),a=new(u?Uint8Array:Array)(l),s=new(u?Uint8Array:Array)(p),e.j(t(n.call(e,l,o,a)),t(n.call(e,p,o,s)))}var a=void 0,s=this,u="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,c=0,l=1;n.prototype.t=function(){for(;!this.l;){var e=r(this,3);switch(1&e&&(this.l=!0),e>>>=1){case 0:var t=this.input,n=this.d,i=this.b,s=this.a,p=a,f=a,d=a,h=i.length,m=a;if(this.c=this.f=0,p=t[n++],p===a)throw Error("invalid uncompressed block header: LEN (first byte)");if(f=p,p=t[n++],p===a)throw Error("invalid uncompressed block header: LEN (second byte)");if(f|=p<<8,p=t[n++],p===a)throw Error("invalid uncompressed block header: NLEN (first byte)");if(d=p,p=t[n++],p===a)throw Error("invalid uncompressed block header: NLEN (second byte)");if(d|=p<<8,f===~d)throw Error("invalid uncompressed block header: length verify");if(n+f>t.length)throw Error("input buffer is broken");switch(this.i){case c:for(;s+f>i.length;){if(m=h-s,f-=m,u)i.set(t.subarray(n,n+m),s),s+=m,n+=m;else for(;m--;)i[s++]=t[n++];this.a=s,i=this.e(),s=this.a}break;case l:for(;s+f>i.length;)i=this.e({o:2});break;default:throw Error("invalid inflate mode")}if(u)i.set(t.subarray(n,n+f),s),s+=f,n+=f;else for(;f--;)i[s++]=t[n++];this.d=n,this.a=s,this.b=i;break;case 1:this.j(T,I);break;case 2:o(this);break;default:throw Error("unknown BTYPE: "+e)}}return this.m()};var p,f,d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=u?new Uint16Array(d):d,m=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],g=u?new Uint16Array(m):m,v=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],y=u?new Uint8Array(v):v,_=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],x=u?new Uint16Array(_):_,b=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],w=u?new Uint8Array(b):b,S=new(u?Uint8Array:Array)(288);for(p=0,f=S.length;f>p;++p)S[p]=143>=p?8:255>=p?9:279>=p?7:8;var E,C,T=t(S),P=new(u?Uint8Array:Array)(30);for(E=0,C=P.length;C>E;++E)P[E]=5;var I=t(P);n.prototype.j=function(e,t){var n=this.b,o=this.a;this.n=e;for(var a,s,u,c,l=n.length-258;256!==(a=i(this,e));)if(256>a)o>=l&&(this.a=o,n=this.e(),o=this.a),n[o++]=a;else for(s=a-257,c=g[s],0<y[s]&&(c+=r(this,y[s])),a=i(this,t),u=x[a],0<w[a]&&(u+=r(this,w[a])),o>=l&&(this.a=o,n=this.e(),o=this.a);c--;)n[o]=n[o++-u];for(;8<=this.c;)this.c-=8,this.d--;this.a=o},n.prototype.s=function(e,t){var n=this.b,o=this.a;this.n=e;for(var a,s,u,c,l=n.length;256!==(a=i(this,e));)if(256>a)o>=l&&(n=this.e(),l=n.length),n[o++]=a;else for(s=a-257,c=g[s],0<y[s]&&(c+=r(this,y[s])),a=i(this,t),u=x[a],0<w[a]&&(u+=r(this,w[a])),o+c>l&&(n=this.e(),l=n.length);c--;)n[o]=n[o++-u];for(;8<=this.c;)this.c-=8,this.d--;this.a=o},n.prototype.e=function(){var e,t,n=new(u?Uint8Array:Array)(this.a-32768),r=this.a-32768,i=this.b;if(u)n.set(i.subarray(32768,n.length));else for(e=0,t=n.length;t>e;++e)n[e]=i[e+32768];if(this.g.push(n),this.k+=n.length,u)i.set(i.subarray(r,r+32768));else for(e=0;32768>e;++e)i[e]=i[r+e];return this.a=32768,i},n.prototype.u=function(e){var t,n,r,i,o=0|this.input.length/this.d+1,a=this.input,s=this.b;return e&&("number"==typeof e.o&&(o=e.o),"number"==typeof e.q&&(o+=e.q)),2>o?(n=(a.length-this.d)/this.n[2],i=0|258*(n/2),r=i<s.length?s.length+i:s.length<<1):r=s.length*o,u?(t=new Uint8Array(r),t.set(s)):t=s,this.b=t},n.prototype.m=function(){var e,t,n,r,i,o=0,a=this.b,s=this.g,c=new(u?Uint8Array:Array)(this.k+(this.a-32768));if(0===s.length)return u?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);for(t=0,n=s.length;n>t;++t)for(e=s[t],r=0,i=e.length;i>r;++r)c[o++]=e[r];for(t=32768,n=this.a;n>t;++t)c[o++]=a[t];return this.g=[],this.buffer=c},n.prototype.r=function(){var e,t=this.a;return u?this.p?(e=new Uint8Array(t),e.set(this.b.subarray(0,t))):e=this.b.subarray(0,t):(this.b.length>t&&(this.b.length=t),e=this.b),this.buffer=e},e("Zlib.RawInflate",n),e("Zlib.RawInflate.prototype.decompress",n.prototype.t);var D,A,N,k,O={ADAPTIVE:l,BLOCK:c};if(Object.keys)D=Object.keys(O);else for(A in D=[],N=0,O)D[N++]=A;for(N=0,k=D.length;k>N;++N)A=D[N],e("Zlib.RawInflate.BufferType."+A,O[A])}).call(this)}).call(e);var t=function(t){var n=new e.Zlib.RawInflate(t);return n.decompress()},n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array;JSZip.compressions.DEFLATE?(JSZip.compressions.DEFLATE.uncompress=t,JSZip.compressions.DEFLATE.uncompressInputType=n?"uint8array":"array"):JSZip.compressions.DEFLATE={magic:"\b\x00",uncompress:t,uncompressInputType:n?"uint8array":"array"}}(),define("sap/watt/lib/jszip/jszip-inflate",["sap/watt/lib/jszip/jszip-deflate"],function(e){return function(){var t;return t||e.JSZip}}(this)),function(e){"use strict";function t(){this.data=null,this.length=0,this.index=0}function n(e,t){this.data=e,t||(this.data=s.utils.string2binary(this.data)),this.length=this.data.length,this.index=0}function r(e){e&&(this.data=e,this.length=this.data.length,this.index=0)}function i(e){this.data=e,this.length=this.data.length,this.index=0}function o(e,t){this.options=e,this.loadOptions=t}function a(e,t){this.files=[],this.loadOptions=t,e&&this.load(e)}var s=e.JSZip,u=65535,c=-1,l=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)t=e.charCodeAt(n),r+="\\x"+(16>t?"0":"")+t.toString(16).toUpperCase();return r},p=function(e){for(var t in s.compressions)if(s.compressions.hasOwnProperty(t)&&s.compressions[t].magic===e)return s.compressions[t];return null};t.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<e||0>e)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return s.utils.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date((127&e>>25)+1980,(15&e>>21)-1,31&e>>16,31&e>>11,63&e>>5,(31&e)<<1)}},n.prototype=new t,n.prototype.byteAt=function(e){return this.data.charCodeAt(e)},n.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)},n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.index,this.index+e);return this.index+=e,t},r.prototype=new t,r.prototype.byteAt=function(e){return this.data[e]},r.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o;return-1},r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.subarray(this.index,this.index+e);return this.index+=e,t},i.prototype=new r,i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.index,this.index+e);return this.index+=e,t},o.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(e,t,n){return function(){var r=e.index;e.setIndex(t);var i=e.readData(n);return e.setIndex(r),i}},prepareContent:function(e,t,n,r,i){return function(){var e=s.utils.transformTo(r.uncompressInputType,this.getCompressedContent()),t=r.uncompress(e);if(t.length!==i)throw new Error("Bug : uncompressed data size mismatch");return t}},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readString(this.fileNameLength),e.skip(n),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(t=p(this.compressionMethod),null===t)throw new Error("Corrupted zip : compression "+l(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new s.CompressedObject,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(e,e.index,this.compressedSize,t),this.decompressed.getContent=this.prepareContent(e,e.index,this.compressedSize,t,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=s.utils.transformTo("string",this.decompressed.getContent()),s.prototype.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(e){if(this.versionMadeBy=e.readString(2),this.versionNeeded=e.readInt(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4),this.fileNameLength=e.readInt(2),this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=e.readString(this.fileNameLength),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readString(this.fileCommentLength),this.dir=16&this.externalFileAttributes?!0:!1},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=new n(this.extraFields[1].value);this.uncompressedSize===c&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===c&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===c&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===c&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index;for(this.extraFields=this.extraFields||{};e.index<i+this.extraFieldsLength;)t=e.readInt(2),n=e.readInt(2),r=e.readString(n),this.extraFields[t]={id:t,length:n,value:r}},handleUTF8:function(){this.useUTF8()&&(this.fileName=s.prototype.utf8decode(this.fileName),this.fileComment=s.prototype.utf8decode(this.fileComment))}},a.prototype={checkSignature:function(e){var t=this.reader.readString(4);if(t!==e)throw new Error("Corrupted zip or bug : unexpected signature ("+l(t)+", expected "+l(e)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44,i=0;r>i;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readString(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.signature.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===s.signature.CENTRAL_FILE_HEADER;)e=new o({zip64:this.zip64},this.loadOptions),e.readCentralPart(this.reader),this.files.push(e)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.signature.CENTRAL_DIRECTORY_END);if(-1===e)throw new Error("Corrupted zip : can't find end of central directory");if(this.reader.setIndex(e),this.checkSignature(s.signature.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u||this.diskWithCentralDirStart===u||this.centralDirRecordsOnThisDisk===u||this.centralDirRecords===u||this.centralDirSize===c||this.centralDirOffset===c){if(this.zip64=!0,e=this.reader.lastIndexOfSignature(s.signature.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===e)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(e),this.checkSignature(s.signature.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.signature.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(e){var t=s.utils.getTypeOf(e);this.reader="string"!==t||s.support.uint8array?"nodebuffer"===t?new i(e):new r(s.utils.transformTo("uint8array",e)):new n(e,this.loadOptions.optimizedBinaryString)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.prototype.load=function(e,t){var n,r,i,o;for(t=t||{},t.base64&&(e=s.base64.decode(e)),r=new a(e,t),n=r.files,i=0;i<n.length;i++)o=n[i],this.file(o.fileName,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir});return this}}(this),define("sap/watt/lib/jszip/jszip-load",["sap/watt/lib/jszip/jszip-inflate"],function(e){return function(){var t;return t||e.JSZip}}(this)),require.config({shim:{"sap/watt/lib/jszip/jszip":{exports:"JSZip"},"sap/watt/lib/jszip/jszip-deflate":{deps:["sap/watt/lib/jszip/jszip"],exports:"JSZip"},"sap/watt/lib/jszip/jszip-inflate":{deps:["sap/watt/lib/jszip/jszip-deflate"],exports:"JSZip"},"sap/watt/lib/jszip/jszip-load":{deps:["sap/watt/lib/jszip/jszip-inflate"],exports:"JSZip"}}}),define("sap/watt/lib/jszip/jszip-shim",["sap/watt/lib/jszip/jszip-load"],function(e){var t=e.prototype.load;return e.prototype.load=function(){t.apply(this,arguments);for(var e in this.files)this.files[e].options.dir=this.files[e].options.dir||-1!==e.indexOf("/",e.length-1)},e}),define("sap.watt.saptoolsets.common.ui5metadataprovider/service/UI5MetadataProvider",["sap/watt/lib/jszip/jszip-shim"],function(){"use strict";return{_oLibInfo:{},_mMetadataByTypeAndVersion:{},configure:function(e){this._oLibInfo=e.libInfo},getVersions:function(e){return e!==this._oLibInfo.name?[]:this._oLibInfo.versions},getMetadata:function(e,t,n){return e!==this._oLibInfo.name||-1===this._oLibInfo.versions.indexOf(n)?null:this._getMetadata(t,n)},_getMetadata:function(e,t){if(!this._mMetadataByTypeAndVersion[e+":"+t]){var n=require.toUrl(this._oLibInfo.metadataLocation.replace("{type}/{version}",e+"/"+t)),r=require.toUrl(this._oLibInfo.templatesLocation.replace("{type}/{version}",e+"/"+t)),i={responseType:"arraybuffer"},o=this;return Q.spread([Q.sap.ajax(n,i),Q.sap.ajax(r,i)],function(n,r){return o._mMetadataByTypeAndVersion[e+":"+t]={metadata:new JSZip(n[0]),templates:new JSZip(r[0])},o._mMetadataByTypeAndVersion[e+":"+t]},function(){return null})}return this._mMetadataByTypeAndVersion[e+":"+t]}}}),function(){function e(t,n){function r(){return v=t.charAt(++_)}function i(){return t.charAt(_+1)}function o(e){for(var n=_;r();)if("\\"===v)r(),r();else{if(v===e)break;if("\n"===v)break}return t.substring(n,_+1)}function a(){for(var e=_;y.test(i());)_++;return _!==e}function s(){var e=_;do;while(y.test(r()));return _!==e+1}function u(e){var n=_;for(r();r();){if("*"===v&&"/"===i()){_++;break}if(e&&"\n"===v)break}return t.substring(n,_+1)}function c(e){return t.substring(_-e.length,_).toLowerCase()===e}function l(){var e=t.indexOf("\n",_);if(-1===e)return!1;var n=t.substring(_,e);return-1!==n.indexOf("//")}function p(){w++,x+=b}function f(){w--,x=x.slice(0,-d)}n=n||{};var d=n.indent_size||4,h=n.indent_char||" ",m=void 0===n.selector_separator_newline?!0:n.selector_separator_newline,g=void 0===n.end_with_newline?!1:n.end_with_newline;"string"==typeof d&&(d=parseInt(d,10));var v,y=/^\s+$/,_=-1,x=t.match(/^[\r\n]*[\t ]*/)[0],b=new Array(d+1).join(h),w=0,S=0,E={};E["{"]=function(e){E.singleSpace(),C.push(e),E.newLine()},E["}"]=function(e){E.newLine(),C.push(e),E.newLine()},E._lastCharWhitespace=function(){return y.test(C[C.length-1])},E.newLine=function(e){if(!e)for(;E._lastCharWhitespace();)C.pop();C.length&&C.push("\n"),x&&C.push(x)},E.singleSpace=function(){C.length&&!E._lastCharWhitespace()&&C.push(" ")};var C=[];x&&C.push(x);for(var T=!1,P=!1;;){var I=s();if(!v)break;if("/"===v&&"*"===i()){E.newLine(),C.push(u(),"\n",x);var D=c("");D&&E.newLine()}else if("/"===v&&"/"===i())C.push(u(!0),x);else if("@"===v){var A=o(" ").replace(/ $/,"");C.push(A,v),A in e.NESTED_AT_RULE&&(S+=1,A in e.CONDITIONAL_GROUP_RULE&&(P=!0))}else if("{"===v)a(),"}"===i()?(r(),C.push(" {}")):(p(),E["{"](v),P?(P=!1,T=w>S):T=w>=S);else if("}"===v)f(),E["}"](v),T=!1,S&&S--;else if(":"===v)a(),T||P?C.push(v," "):":"===i()?(r(),C.push("::")):C.push(v);else if('"'===v||"'"===v)C.push(o(v));else if(";"===v)if(l()){var N=o("/"),k=u(!0);C.push(N,k.substring(1,k.length-1),"\n",x)}else C.push(v,"\n",x);else"("===v?c("url")?(C.push(v),a(),r()&&(")"!==v&&'"'!==v&&"'"!==v?C.push(o(")")):_--)):(I&&E.singleSpace(),C.push(v),a()):")"===v?C.push(v):","===v?(a(),C.push(v),!T&&m?E.newLine():E.singleSpace()):"]"===v?C.push(v):"["===v||"="===v?(a(),C.push(v)):(I&&E.singleSpace(),C.push(v))}var O=C.join("").replace(/[\n ]+$/,""),R=g,j=/\n$/.test(O);return R&&!j?O+="\n":!R&&j&&(O=O.slice(0,-1)),O}e.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},e.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},"function"==typeof define&&define.amd?define("sap/watt/lib/beautifiers/css/beautify-css",[],function(){return{css_beautify:e}}):"undefined"!=typeof exports?exports.css_beautify=e:"undefined"!=typeof window?window.css_beautify=e:"undefined"!=typeof global&&(global.css_beautify=e)}(),define("sap.watt.toolsets.css/utils/CSSFormatter",["sap/watt/lib/beautifiers/css/beautify-css"],function(e){var t=function(){};return t.prototype.format=function(t,n){return e.css_beautify(t,n)},t}),define("sap.watt.toolsets.css/service/CSSBeautifierImpl",["../utils/CSSFormatter"],function(e){"use strict";var t=function(){this.formatCSS=new e};return t.prototype._oDefaultSettings={indent_size:4,indent_char:" "},t.prototype.beautify=function(e,t){var n=this.getSettings(t),r=this.formatCSS.format(e,n);return r},t.prototype.getSettings=function(e){return e?this._updateSetting(e):this._oDefaultSettings},t.prototype._updateSetting=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&("indent_size"==n?t.indent_size=e[n]:"indent_char"==n?t.indent_char=e[n]:t[n]=e[n]);return t},t._instance=void 0,t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.getInstance()}),define("sap.watt.toolsets.xml/codecompletion/XMLVisitor",[],function(){var e=function(){};e.prototype={nodeTypes:{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9},offsetTypes:{root:"root",text:"text",tag:"tag",closetag:"closetag",attr:"attr",value:"value",entity:"entity",cdata:"cdata",comments:"comments",instruction:"instruction",intag:"intag",error:"error"},createDocNode:function(){return{nodeType:this.nodeTypes.DOCUMENT,nodeName:"#document",nameSpaces:{},childNodes:[],schema:!1,schemaInfo:[]}},createTextNode:function(e){var t=/\s+/g,n=/\&gt;/g,r=/\&lt;/g,i=/\&quot;/g,o=/\&apos;/g,a=/\&amp;/g;return{nodeType:this.nodeTypes.TEXT,nodeName:"#text",isPrecedingOffset:this.isPrecedingOffset,nodeValue:e.replace(t," ").replace(n,">").replace(r,"<").replace(o,"'").replace(i,'"').replace(a,"&")}},preParseCData:function(){},preParseComments:function(e){for(var t,n=/<!--([\u0001-\uFFFF]*?)-->/g,r=[],i=-1,o="",a="",s=0,u=0,c=0;null!=(t=n.exec(e.str));)i=n.lastIndex-t[0].length,c=n.lastIndex,o="",e.offset>i+3&&(e.offset<i+t[0].length-1?(s+=e.offset-i-3,o=t[0].slice(4,e.offset-i+1)):(a="<!--"+u+"-->",s+=t[0].length-a.length)),r.push({str:t[0].slice(4,-3),offset:i,prefix:o}),u++;var l=!1;n=/<!--([\u0001-\uFFFF]*?)/g,n.lastIndex=c,null!=(t=n.exec(e.str))&&(i=t.index,o="",e.offset>i+3&&(a="<!--"+u.toString(),s+=e.str.length-i+1-a.length,o=e.str.slice(i+4,e.offset+1)),r.push({str:e.str.slice(i+4),offset:i,prefix:o}),e.str=e.str.slice(0,r[u].offset)+"<!--"+u.toString(),l=!0);for(var p=l?r.length-2:r.length-1;p>=0;p--)e.str=e.str.slice(0,r[p].offset)+"<!--"+p+"-->"+e.str.slice(r[p].offset+r[p].str.length+7);e.commentList=r,e.offset-=s},preParseString:function(e){for(var t,n=new RegExp("(\"([^\"]*)\")|('([^']*)')","g"),r=[],i=0,o=0,a=0,s=-1,u=/['"]/g,c="",l=-1,p="",f="";null!==(t=n.exec(e.str));){if(u=/['"]/g,c=u.exec(e.str.slice(a)),c&&c[0].charAt(0)!==t[0].charAt(0)){s=a+c.index;break}l=t.index,a=n.lastIndex,p="",f="",e.offset>l&&(e.offset<l+t[0].length-1?(f=o.toString(),i+=e.offset-l-f.length,p=t[0].slice(1,e.offset-l+1)):(f='"'+o+'"',i+=t[0].length-f.length)),r.push({str:t[0].slice(1,-1),offset:l,prefix:p}),o++}var d=!1;-1===s&&(u=/['"]/g,c=u.exec(e.str.slice(a)),c&&(s=a+c.index)),s>-1&&(t=e.str.slice(s),l=s,p="",e.offset>l&&(e.offset<l+t.length?(f=o.toString(),i+=e.offset-l-f.length,p=t.slice(1,e.offset-l+1)):(f='"'+o.toString(),i+=t.length-f.length)),r.push({str:t.slice(1),offset:l,prefix:p}),e.str=e.str.slice(0,r[o].offset)+'"'+o.toString(),d=!0);for(var h=d?r.length-2:r.length-1;h>=0;h--)e.str=e.str.slice(0,r[h].offset)+'"'+h+'"'+e.str.slice(r[h].offset+r[h].str.length+2);e.strList=r,e.offset-=i},preParse:function(e,t){var n={str:"",offset:0};return n.str=e.slice(0),n.offset=t,this.preParseCData(n),this.preParseComments(n),this.preParseString(n),n},parseTag:function(e,t,n,r,i,o,a){var s={offsetType:"",offsetSentence:"",offsetWord:"",offsetPrefix:"",offsetObj:void 0,tag:"",attr:""},u="_defaultns_",c=new RegExp("^\\s+|\\s+$","g"),l=new RegExp("([^=]*)=((\"([^\"]*)\")|('([^']*)'))","g"),p=new RegExp("\\s+","g"),f=new RegExp("\\&gt;","g"),d=new RegExp("\\&lt;","g"),h=new RegExp("\\&quot;","g"),m=new RegExp("\\&apos;","g"),g=new RegExp("\\&amp;","g"),v=null,y=null,_="",x="",b=null;if(o&&o>a+t[1].length+t[2].length+2&&(s.offsetType=this.offsetTypes.text,s.offsetPrefix=e.slice(a+t[1].length+t[2].length+3,o+1),s.offsetObj=r),"/"===t[2].charAt(0)&&t[2].replace(c,"").length>0)o&&(""===s.offsetType?(4===t.length&&o<a+t[1].length+t[2].length+2&&(s.offsetType=this.offsetTypes.closetag,s.offsetObj=r),3===t.length&&o<a+t[0].length+1&&(s.offsetType=this.offsetTypes.closetag,s.offsetObj=r)):r.parentNode&&(s.offsetObj=r.parentNode)),r.parentNode&&(r=r.parentNode);else if(t[1].length>=0)if(0===t[1].length)o&&""===s.offsetType&&(s.offsetType=this.offsetTypes.tag,s.offsetPrefix="",v={nodeType:this.nodeTypes.ELEMENT,nodeName:"",localName:"",namespace:u,attributes:[],parentNode:r,isPrecedingOffset:this.isPrecedingOffset,childNodes:[]},s.offsetObj=v);else if("?"===t[1].charAt(0))o&&""===s.offsetType&&(s.offsetType=this.offsetTypes.instruction,s.offsetObj=r);else if("!"===t[1].charAt(0))0===t[1].indexOf("![CDATA[")?o&&""===s.offsetType&&(s.offsetType=this.offsetTypes.cdata,s.offsetObj=r):0===t[1].indexOf("!--")&&(x=null,x="--"==t[1].slice(-2)?t[1].slice(3,-2):t[1].slice(3),y=null,x.length>0&&(b=i.commentList[parseInt(x,10)],r.childNodes.push({nodeType:this.nodeTypes.COMMENT,nodeName:"#comment",nodeValue:b.str}),y=b.prefix),o&&""==s.offsetType&&o<a+t[1].length+2&&(s.offsetType=this.offsetTypes.comments,s.offsetObj=r,s.prefix=y||""));else{if(o&&o<a+t[1].length+2&&(s.offsetType=this.offsetTypes.tag,s.offsetWord=t[1],s.offsetPrefix=t[1].substring(0,o-a-1)),_=t[1].replace(c,""),v={nodeType:this.nodeTypes.ELEMENT,nodeName:_,localName:_,namespace:u,attributes:[],parentNode:null,isPrecedingOffset:this.isPrecedingOffset,childNodes:[]},_.indexOf(":")>-1){var w=_.split(":");v.namespace=w[0],v.localName=w[1]}var S,E;o&&(E=-1);for(var C=a+t[1].length+2,T=null,P=null,I="",D=null;null!=(S=l.exec(t[2]));){if(y=null,S.length>0)if(_=S[1].replace(c,""),x=S[4]||S[6]||"",x.length>0&&(b=i.strList[parseInt(x,10)],x=b.str,y=b.prefix),x=x.replace(p," ").replace(f,">").replace(d,"<").replace(m,"'").replace(h,'"').replace(g,"&"),0==_.indexOf("xmlns"))"xmlns:xsi"==_&&"http://www.w3.org/2001/XMLSchema-instance"==x?n.schema=!0:_.indexOf(":")>0?(T=_.split(":"),r&&"#document"===r.nodeName&&(n.nameSpaces[T[1]]=x)):r&&"#document"===r.nodeName&&(n.nameSpaces[u]=x);else{var A=_;if(T=u,"xsi:nonamespaceschemalocation"==_.toLowerCase()){P=x.split(" ");for(var N=0;N<P.length;N++)n.schemaInfo.push({ns:"",loc:P[N]})}else if("xsi:schemalocation"==_.toLowerCase()){P=x.split(" ");for(var N=0;N<P.length;N+=2)T=P[N],n.schemaInfo.push({ns:T,loc:P[N+1]})}if(_.indexOf(":")>0){var k=_.split(":");A=k[1],T=k[0]}v.attributes.push({nodeType:this.nodeTypes.ATTRIBUTE,nodeName:_,localName:A,namespace:T,nodeValue:x})}o&&""==s.offsetType&&(o<C+E+S[1].length+1?(s.offsetType=this.offsetTypes.attr,I=e.slice(C+E+1,o+1),D=I.split(/[\n\s]+/),s.offsetPrefix=D[D.length-1]):o<C+l.lastIndex-1?(s.offsetType=this.offsetTypes.value,s.attr=S[1].replace(c,""),I=e.slice(C+E+S[1].length+2,o+1),s.offsetPrefix=y||I.slice(1)):o==C+l.lastIndex-1&&(s.offsetType=this.offsetTypes.intag)),E=l.lastIndex-1}if(o&&""==s.offsetType&&o<a+t[1].length+t[2].length+2){I=e.slice(C+E+1,o+1),D=I.split(/[\n\s]+/);var O=D[D.length-1],R=O.indexOf("=");if(-1==R)s.offsetType=this.offsetTypes.attr,s.offsetPrefix=O;else{s.offsetType=this.offsetTypes.value;var j=O.substring(R+1);j.length>1&&'"'==j.charAt(0)?(b=i.strList[parseInt(j.slice(1),10)],j=b.str):('"'==j[0]||"'"==j[0])&&(j=j.substring(1)),s.offsetPrefix=j,s.attr=O.slice(0,R)}}r&&(r.childNodes.push(v),v.parentNode=r,"/"!=t[2].charAt(t[2].length-1)&&(r=v)),s.offsetType==this.offsetTypes.text?s.offsetObj=r:""!=s.offsetType&&(s.offsetObj=v)}var F=t[3];return null!=t[3]&&(o&&o<a+t[1].length+t[2].length+3&&(this.isPrecedingOffset=!1),r.childNodes.push(this.createTextNode(F)),o&&""==s.offsetType&&(s.offsetType=this.offsetTypes.text,s.offsetPrefix=e.slice(a+t[1].length+t[2].length+3,o+1),s.offsetObj=r)),{curObj:r,offsetStatus:s}},parse:function(e,t){var n={};if(this.isPrecedingOffset=!0,n.root=this.createDocNode(),n.status={origContent:e.slice(0),origOffset:t-1,content:"",offset:t,offsetType:"",offsetSentence:"",offsetWord:"",offsetPrefix:"",offsetObj:null,tag:"",attr:""},null==e||0==e.length)n.status.offsetType=this.offsetTypes.root;else{var r=this.preParse(n.status.origContent,n.status.origOffset);n.status.content=r.str,n.status.offset=r.offset;var i=-1;if(-1==i){var o=n.status.content.indexOf("<");i=o-1;var a=o>-1?n.status.content.substring(0,n.status.content.indexOf("<")):n.status.content;n.root.childNodes.push(this.createTextNode(a)),(-1==o||n.status.offset<o)&&(n.status.offsetType=this.offsetTypes.text,n.status.offsetSentence=a,n.status.offsetPrefix=n.status.content.substring(0,t),n.status.tag="#document",n.status.offsetObj=n.root,this.isPrecedingOffset=!1)}var s,u=n.root,c=new RegExp("<([^>\\/\\s+]*)([^>]*)>([^<]*)","g");new RegExp("^\\s+|\\s+$","g");for(var l;null!=(s=c.exec(n.status.content));)l=null,n.status.offset>i&&n.status.offset<c.lastIndex?(l=this.parseTag(n.status.content,s,n.root,u,r,n.status.offset,i),""!=l.offsetStatus.offsetType&&(n.status.offsetType=l.offsetStatus.offsetType,n.status.offsetSentence=l.offsetStatus.offsetSentence,n.status.offsetWord=l.offsetStatus.offsetWord,n.status.offsetPrefix=l.offsetStatus.offsetPrefix,n.status.offsetObj=l.offsetStatus.offsetObj,n.status.tag=l.offsetStatus.tag,n.status.attr=l.offsetStatus.attr,this.isPrecedingOffset=!1)):l=this.parseTag(n.status.content,s,n.root,u,r),u=l.curObj,i=c.lastIndex-1;var p=new RegExp("<([^>\\/\\s+]*)([^>]*)","g");
p.lastIndex=i+1,null!=(s=p.exec(n.status.content))&&(l=null,n.status.offset>i&&n.status.offset<p.lastIndex?(l=this.parseTag(n.status.content,s,n.root,u,r,n.status.offset,i),n.status.offsetType=l.offsetStatus.offsetType,n.status.offsetSentence=l.offsetStatus.offsetSentence,n.status.offsetWord=l.offsetStatus.offsetWord,n.status.offsetPrefix=l.offsetStatus.offsetPrefix,n.status.offsetObj=l.offsetStatus.offsetObj,n.status.tag=l.offsetStatus.tag,n.status.attr=l.offsetStatus.attr,this.isPrecedingOffset=!1):l=this.parseTag(n.status.content,s,n.root,u,r))}for(var f=0;f<n.root.childNodes.length;f++){var d=n.root.childNodes[f];if(d.nodeType==this.nodeTypes.ELEMENT){n.root.documentElement=d;break}}return n}};var t=function(){this._mParser=new e};return t.prototype={_mParser:null,suggestTypes:{rootsnippet:"rootsnippet",tag:"tag",attr:"attr",value:"value",entity:"entity",cdata:"cdata",comments:"comments",instruction:"instruction",intag:"intag",error:"error"},getParser:function(){return this._mParser},getEnv:function(e,t,n){var r,i,o,a={type:"",xmlnsList:[],currentTag:"",currentTagns:"",currentAttr:"",currentAttrs:[],parentTag:"",gparentTag:"",prefix:"",prefixns:"",lbracket:!1,origText:""},s="_defaultns_";if(this._mParser){var u=null;u=n&&n.bParsingAll?e:e.slice(0,t);var c=this._mParser.parse(u,t);if(r=c.root,i=c.curobj,r){var l=null;for(l in r.nameSpaces)Object.prototype.hasOwnProperty.call(r.nameSpaces,l)&&(l==s?a.xmlnsList.push({name:"xmlns",ns:r.nameSpaces[l]}):a.xmlnsList.push({name:l,ns:r.nameSpaces[l]}));var p="",f=r.documentElement?r.documentElement.nodeName:"",d=f.indexOf(":");d>0&&(p=f.slice(0,d),""==p?p=r.nameSpaces[s]:r.nameSpaces[p]&&(p=r.nameSpaces[p]),f=f.slice(d+1));var h=""!=f;if(n&&n.rootNode&&n.rootNode.length>0){h=!1;for(var m=0;m<n.rootNode.length;m++)if(p==n.rootNode[m].nameSpace&&f==n.rootNode[m].name){h=!0;break}a.isUI5=void 0}else a.isUI5="sap.ui.core"!=p||"View"!=f&&"FragmentDefinition"!=f?"sap.ui.core.mvc"==p&&"View"==f?!0:r.documentElement?!1:void 0:!0;if(!r.documentElement||h){var g=-1;switch(c.status.offsetType){case this._mParser.offsetTypes.root:a.type=this.suggestTypes.rootsnippet,a.prefix=u,a.origText=e.slice(0,t);break;case this._mParser.offsetTypes.text:"#document"==c.status.offsetObj.nodeName||"#document"==c.status.tag?(a.type=this.suggestTypes.rootsnippet,a.prefix=u,a.origText=e.slice(0,t)):(a.type=this.suggestTypes.tag,a.parentTag=c.status.offsetObj.nodeName,o=c.status.offsetObj,a.gparentTag=c.status.offsetObj.parentNode?c.status.offsetObj.parentNode.nodeName:"",a.prefix="",a.lbracket=!1,a.origText=a.prefix);break;case this._mParser.offsetTypes.tag:a.type=this.suggestTypes.tag,a.parentTag=c.status.offsetObj.parentNode.nodeName,o=c.status.offsetObj.parentNode,a.gparentTag=c.status.offsetObj.parentNode.parentNode?c.status.offsetObj.parentNode.parentNode.nodeName:"",a.prefix=c.status.offsetPrefix,g=a.prefix.indexOf(":"),g>-1&&(a.prefixns=a.prefix.slice(0,g),a.prefix=a.prefix.slice(g+1)),a.lbracket=!0,a.origText=a.prefix;break;case this._mParser.offsetTypes.attr:a.type=this.suggestTypes.attr,a.currentTag=c.status.offsetObj.nodeName,a.parentTag=c.status.offsetObj.parentNode?c.status.offsetObj.parentNode.nodeName:"",o=c.status.offsetObj.parentNode;for(var v=c.status.offsetObj.attributes,y=0;y<v.length;y++){var _=v[y];_.nodeName&&a.currentAttrs.push(_.nodeName)}a.prefix=c.status.offsetPrefix,g=a.currentTag.indexOf(":"),g>-1&&(a.currentTagns=a.currentTag.slice(0,g),a.currentTag=a.currentTag.slice(g+1)),a.origText=a.prefix;break;case this._mParser.offsetTypes.value:a.type=this.suggestTypes.value,a.currentTag=c.status.offsetObj.nodeName,a.parentTag=c.status.offsetObj.parentNode?c.status.offsetObj.parentNode.nodeName:"",o=c.status.offsetObj.parentNode,a.currentAttr=c.status.attr,a.prefix=c.status.offsetPrefix,g=a.currentTag.indexOf(":"),g>-1&&(a.currentTagns=a.currentTag.slice(0,g),a.currentTag=a.currentTag.slice(g+1)),a.origText=a.prefix;break;case this._mParser.offsetTypes.intag:a.type=this.suggestTypes.intag,a.currentTag=c.status.offsetObj.nodeName,a.origText="";break;default:a.origText=""}}}}return{currentEnv:a,root:r,curobj:i,parentTagObj:o}}},t}),define("sap.watt.toolsets.xml/service/XMLCodeVisitorImpl",["../codecompletion/XMLVisitor"],function(e){var t=function(){this.xmlVisitor=new e};return t.prototype={getEnv:function(e,t,n){if(e){null==t&&(t=e.length);var r=Q.defer();try{var i=null,o=this.xmlVisitor.getEnv(e,t,n);o&&o.currentEnv&&(i={currentTag:o.currentEnv.currentTag,currentTagns:o.currentEnv.currentTagns,currentAttr:o.currentEnv.currentAttr,currentAttrs:o.currentEnv.currentAttrs,parentTag:o.currentEnv.parentTag,gparentTag:o.currentEnv.gparentTag,lbracket:o.currentEnv.lbracket,origText:o.currentEnv.origText,prefix:o.currentEnv.prefix,prefixns:o.currentEnv.prefixns,type:o.currentEnv.type,xmlnsList:o.currentEnv.xmlnsList,parentTagObj:o.parentTagObj}),r.resolve(i)}catch(a){console.log(a),r.resolve(null)}return r.promise}}},t}),define("sap.watt.toolsets.xml/codecompletion/UI5XmlTypes",[],function(){var e=function(){};return e.prototype={ui5Types:{"sap.m.ButtonType":"enum","sap.ui.core.TextDirection":"enum","sap.ui.core.TextAlign":"enum","sap.m.DialogType":"enum","sap.m.FlexAlignItems":"enum","sap.m.FlexAlignSelf":"enum","sap.m.FlexDirection":"enum","sap.m.FlexJustifyContent":"enum","sap.m.FlexRendertype":"enum","sap.m.InputType":"enum","sap.m.LabelDesign":"enum","sap.m.PageBackgroundDesign":"enum","sap.m.SwitchType":"enum","sap.m.DateTimeInputType":"enum","sap.ui.core.ValueState":"enum","sap.ui.core.Wrapping":"enum","sap.apb.TransitionType":"enum","sap.apb.makit.ChartType":"enum","sap.apb.makit.LegendPosition":"enum","sap.apb.makit.SortOrder":"enum"},candidateElements:function(e){var t=e.prefix,n=e.ns,r=e.parent,i=this.getLibrary(n);if(!i)return[];if(!r||this.IsRootElement(r))return this.getElements(t,n,i.controls,"Control");var o=this.getMetadata(n,r),a=null,s=null,u=null;if(o){var c=this.getAttributes(t,o,"getAllAggregations");s=this.getElements(t,n,i.controls,"Control"),u=this.getElements(t,n,i.elements,"Element"),a=c.concat(s).concat(u)}else s=this.getElements(t,n,i.controls,"Control"),u=this.getElements(t,n,i.elements,"Element"),a=s.concat(u);return a},candidateAttributes:function(e){var t=this.candidateAttributeProperties(e.prefix,e.ns,e.element),n=this.candidateAttributeEvents(e.prefix,e.ns,e.element);return t.concat(n)},candidateProperties:function(e){var t=this.candidateAttributeProperties(e.prefix,e.ns,e.element);return t},candidateEvents:function(e){var t=this.candidateAttributeEvents(e.prefix,e.ns,e.element);return t},candidateAttributeProperties:function(e,t,n){var r=this.getMetadata(t,n);return this.getAttributes(e,r,"getAllProperties")},candidateAttributeEvents:function(e,t,n){var r=this.getMetadata(t,n);return this.getAttributes(e,r,"getAllEvents")},candidateAttributeValues:function(e){var t=e.prefix,n=e.ns,r=e.element,i=e.attr,o=[],a=this.getMetadata(n,r),s=a.getAllProperties()[i],u=t.length;if(s){var c=s.type;if("boolean"==c)u>0?(this.compareStringIgnoreCase("false".substr(0,u),t)&&o.push({name:"false",type:"boolean"}),this.compareStringIgnoreCase("true".substr(0,u),t)&&o.push({name:"true",type:"boolean"})):(o.push({name:"false",type:"boolean"}),o.push({name:"true",type:"boolean"}));else if("enum"==this.ui5Types[c]){var l=this.getObject(n,c);if(l){var p=null;if(u>0)for(p in l)Object.prototype.hasOwnProperty.call(l,p)&&this.compareStringIgnoreCase(p.substr(0,u),t)&&o.push({name:p.toString(),type:"enum"});else for(p in l)Object.prototype.hasOwnProperty.call(l,p)&&o.push({name:p.toString(),type:"enum"})}}}return o},getAttributes:function(e,t,n){var r=[];if(t){var i=e.length,o=t[n](),a=null;if(i>0){for(a in o)if(Object.prototype.hasOwnProperty.call(o,a)){var s=o[a].name;this.compareStringIgnoreCase(s.substr(0,i),e)&&r.push(o[a])}}else for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&r.push(o[a])}return r},getElements:function(e,t,n,r){var i=[],o=t.length+1,a=e.length,s=null,u="";if(a>0)for(var c=0;c<n.length;c++)s=n[c],this.compareStringIgnoreCase(s.substr(0,t.length),t)&&(u=s.substr(o),this.compareStringIgnoreCase(u.substr(0,a),e)&&i.push({name:u,type:r}));else for(var c=0;c<n.length;c++)s=n[c],this.compareStringIgnoreCase(s.substr(0,t.length),t)&&(u=s.substr(o),u.length>0&&i.push({name:u,type:r}));return i},IsRootElement:function(e){if("core:View"==e)return!0;var t=e.indexOf(":");return t>0&&"View"==e.substr(t+1)?!0:!1},getLibrary:function(e){for(var t=null,n=e;n.indexOf(".")>0&&!(t=sap.ui.getCore().getLoadedLibraries()[n]);)n=n.slice(0,n.lastIndexOf("."));if(!t)try{t=sap.ui.getCore().loadLibrary(e),console.log("load library ["+e+"] here...")}catch(r){console.log("load library ["+e+"] error:"+r.message)}return t},getObject:function(e,t){return this.getLibrary(e),t.indexOf(".")<0&&(t=e+"."+t),jQuery.sap.getObject(t)},getMetadata:function(e,t){var n=null,r=this.getObject(e,t);return r?n=r.getMetadata():"sap.ui.core"==e&&"View"==t&&(r=this.getObject(e+".mvc",t),n=r.getMetadata()),n},compareStringIgnoreCase:function(e,t){return e.toLowerCase()===t.toLowerCase()}},e}),define("sap.watt.toolsets.xml/codecompletion/XMLMetadataContentAssist",[],function(){var e=function(e){this.mUI5XMLMetadata=e};return e.prototype={addMetadata:function(e){var t=this;e.enums&&jQuery.each(e.enums,function(e,n){t.mUI5XMLMetadata.enums[e]=n}),e.metadatas&&jQuery.each(e.metadatas,function(e,n){t.mUI5XMLMetadata.metadatas[e]=n})},resetMetadata:function(){this.mUI5XMLMetadata.enums={},this.mUI5XMLMetadata.metadatas={}},candidateElements:function(e){var t=e.prefix,n=e.ns,r=e.parent,i=this.getLibrary(n);if(!i)return[];if(!r)return this.getElements(t,n,i.controls,"Control");var o=this.getMetadata(n,r),a=null,s=null,u=null;if(o){var c=this.getAttributes(t,o,"aggregations");s=this.getElements(t,n,i.controls,"Control"),u=this.getElements(t,n,i.elements,"Element"),a=c.concat(s).concat(u)}else s=this.getElements(t,n,i.controls,"Control"),u=this.getElements(t,n,i.elements,"Element"),a=s.concat(u);return a},candidateAttributes:function(e){var t=this.candidateAttributeProperties(e.prefix,e.ns,e.element),n=this.candidateAttributeEvents(e.prefix,e.ns,e.element);return t.concat(n)},candidateProperties:function(e){var t=this.candidateAttributeProperties(e.prefix,e.ns,e.element);return t},candidateEvents:function(e){var t=this.candidateAttributeEvents(e.prefix,e.ns,e.element);return t},candidateAttributeProperties:function(e,t,n){var r=this.getMetadata(t,n);return this.getAttributes(e,r,"properties")},candidateAttributeEvents:function(e,t,n){var r=this.getMetadata(t,n);return this.getAttributes(e,r,"events")},candidateAttributeValues:function(e){for(var t=e.prefix,n=e.ns,r=e.element,i=e.attr,o=[],a=this.getMetadata(n,r),s=null,u=this.getAttributes(i,a,"properties"),c=0;c<u.length;c++){var l=u[c];if(this.compareStringIgnoreCase(l.name,i)){s=l;break}}var p=t.length;if(s){var f=s.dataType;if("boolean"===f)p>0?(this.compareStringIgnoreCase("false".substr(0,p),t)&&o.push({name:"false",type:"boolean",fullName:s.fullName}),this.compareStringIgnoreCase("true".substr(0,p),t)&&o.push({name:"true",type:"boolean",fullName:s.fullName})):(o.push({name:"false",type:"boolean",fullName:s.fullName}),o.push({name:"true",type:"boolean",fullName:s.fullName}));else if(this.mUI5XMLMetadata.enums[f]){var d=this.mUI5XMLMetadata.enums[f];if(d){var h=null;if(p>0)for(h in d)Object.prototype.hasOwnProperty.call(d,h)&&this.compareStringIgnoreCase(h.substr(0,p),t)&&o.push({name:h.toString(),type:"enum",description:d[h].description,helpDescription:d[h].helpDescription,fullName:f+"#"+h});else for(h in d)Object.prototype.hasOwnProperty.call(d,h)&&o.push({name:h.toString(),type:"enum",description:d[h].description,helpDescription:d[h].helpDescription,fullName:f+"#"+h})}}}return o},getAttributes:function(e,t,n){var r=[];if(t){var i=e.length,o=t[n],a=null;switch(n){case"properties":a="Property";break;case"aggregations":a="Aggregation";break;case"associations":a="Association";break;case"events":a="Event"}var s="",u=null;if(i>0)for(u in o)Object.prototype.hasOwnProperty.call(o,u)&&(s=u,this.compareStringIgnoreCase(s.substr(0,i),e)&&r.push({name:s,type:a,dataType:o[u].type,description:o[u].description,helpDescription:o[u].helpDescription,fullName:o[u].fullName}));else for(u in o)Object.prototype.hasOwnProperty.call(o,u)&&(s=u,r.push({name:s,type:a,dataType:o[u].type,description:o[u].description,helpDescription:o[u].helpDescription,fullName:o[u].fullName}));if(t.extend)for(var c=this.getMetadata("",t.extend),l=this.getAttributes(e,c,n),p=0;p<l.length;p++){for(var f=!1,d=0;d<r.length;d++)if(l[p].name===r[d].name){f=!0;break}f||r.push(l[p])}}return r},getElements:function(e,t,n,r){var i=[],o=t.length+1,a=e.length,s=null,u="",c="",l="";if(a>0&&n)for(var p=0;p<n.length;p++)s=n[p],this.compareStringIgnoreCase(s.substr(0,t.length),t)&&(u=s.substr(o),this.compareStringIgnoreCase(u.substr(0,a),e)&&(c="",l="",this.mUI5XMLMetadata.metadatas[s]&&(c=this.mUI5XMLMetadata.metadatas[s].description,l=this.mUI5XMLMetadata.metadatas[s].helpDescription),i.push({name:u,type:r,description:c,helpDescription:l,fullName:s})));else if(n)for(var p=0;p<n.length;p++)s=n[p],this.compareStringIgnoreCase(s.substr(0,t.length),t)&&"."===s[t.length]&&(u=s.substr(o),u.length>0&&(c="",l="",this.mUI5XMLMetadata.metadatas[s]&&(c=this.mUI5XMLMetadata.metadatas[s].description,l=this.mUI5XMLMetadata.metadatas[s].helpDescription),i.push({name:u,type:r,description:c,helpDescription:l,fullName:s})));return i},IsRootElement:function(e){if("core:View"===e)return!0;var t=e.indexOf(":");return t>0&&"View"===e.substr(t+1)?!0:!1},getLibrary:function(e){for(var t=null,n=e,r=this.mUI5XMLMetadata.metadatas;n.indexOf(".")>0;){if(r[n]&&"library"===r[n].filetype){t=r[n];break}n=n.slice(0,n.lastIndexOf("."))}return t||console.log("fail to get library ["+e+"]"),t},getObject:function(e,t){return t.indexOf(".")<0&&(t=e+"."+t),this.mUI5XMLMetadata.metadatas[t]},getMetadata:function(e,t){var n=null,r=this.getObject(e,t);return r?n=r:"sap.ui.core"===e&&"View"===t&&(r=this.getObject(e+".mvc",t),n=r),n},isEnumType:function(e){var t=!1;return t=this.mUI5XMLMetadata.enums[e]?!0:!1},compareStringIgnoreCase:function(e,t){return e.toLowerCase()===t.toLowerCase()}},e}),define("sap.watt.toolsets.xml/codecompletion/SchemaMetadata",[],function(){var e={},t=function(e,t,n){var r=e.attributes;return r.getNamedItemNS?r.getNamedItemNS(n||null,t):r.getQualifiedItem(t,n)||null},n=function(n,r,i,o,a){var s=null;return n?(e.xmlTraverse(n,a,function(e){if(1===e.nodeType&&r===e.tagName)if(i){var n=t(e,i,"");n&&n.value==o&&(s=e)}else s=e;return{proceed:null===s,downward:!0}}),s):s};return e.getNode=function(e,t,r){var i=null;if(!e)return i;var o=r.split("/");i=e;var a,s;for(a=0,s=o.length;s>a;a++){o[a];var u=n(i,"xs:element","name",r,!0);i=u}return i},e.getChildNodesOfSchemaNode=function(t,n){var r=[];return t?(e.xmlTraverse(t,!1,function(e){return 1===e.nodeType&&e.tagName===n&&r.push(e),{proceed:!0,downward:!0}}),r):r},e.getChildNodesOfSchemaNodeFromAll=function(t,n,r){for(var i=[],o=0;o<t.length;o++)if(n==t[o].ns){var a=e.getSchemaNode(t[o].xmlDoc,n);i=i.concat(e.getChildNodesOfSchemaNode(a,r))}return i},e.getChildNodesFromTypeOrGroup=function(r,i,o){var a=[];if(!o)return a;var s=null;return s=n(o,"xs:all",null,null,!1),s||(s=n(o,"xs:sequence",null,null,!1)),s||(s=n(o,"xs:choice",null,null,!1)),s&&e.xmlTraverse(s,!1,function(n){if(1===n.nodeType)if("xs:element"===n.tagName)a.push(n);else if("xs:group"===n.tagName){var o=t(n,"ref","");if(o){var s=e.xmlFindNodeFromAll(r,i,"xs:group","name",o.value,!0);s&&(a=a.concat(e.getChildNodesFromTypeOrGroup(r,i,s)))}}else"xs:any"===n.tagName&&(a=a.concat(e.getChildNodesOfSchemaNodeFromAll(r,i,"xs:element")));return{proceed:!0,downward:!0}}),a},e.xmlFindNodeFromAll=function(t,r,i,o,a,s){for(var u=null,c=null,l=0;l<t.length;l++)if(r==t[l].ns){var p=e.getSchemaNode(t[l].xmlDoc,r);if(u=n(p,i,o,a,s)){c=t[l].xmlDoc;break}}return u},e.getChildNodes=function(r,i,o){var a=[];if(!i)return a;var s=t(i,"type",""),u=null;u=s?e.xmlFindNodeFromAll(r,o,"xs:complexType","name",s.value,!0):n(i,"xs:complexType",null,null,!1);for(var c=e.getChildNodesFromTypeOrGroup(r,o,u),l=0;l<c.length;l++){var p="",f=t(c[l],"name","");f?p=f.value:(f=t(c[l],"ref",""),f&&(p=f.value)),a.push({name:p})}return a},e.xmlTraverse=function(e,t,n){for(var r=[],i=e.firstChild,o=!0,a=!0;i&&o;){var s=n(i);o=s.proceed,a=s.downward,o&&(t&&i.firstChild&&a&&r.push(i.firstChild),i=i.nextSibling||r.shift())}},e.getAttrNodesFromNodeOrGroup=function(n,r,i){var o=[];return i?(e.xmlTraverse(i,!0,function(i){var a=!0;if(1===i.nodeType)if("xs:element"===i.tagName)a=!1;else if("xs:attribute"===i.tagName)o.push(i);else if("xs:attributeGroup"===i.tagName){var s=t(i,"ref","");if(s){var u=e.xmlFindNodeFromAll(n,r,"xs:attributeGroup","name",s.value,!0);u&&(o=o.concat(e.getAttrNodesFromNodeOrGroup(n,r,u)))}}else"xs:anyAttribute"===i.tagName&&(o=o.concat(e.getChildNodesOfSchemaNodeFromAll(n,r,"xs:attribute")));return{proceed:!0,downward:a}}),o):o},e.getAttrNode=function(t,n,r){var i=e.xmlFindNodeFromAll(t,n,"xs:attribute","name",r,!0);return i},e.getAttrInfo=function(n,r,i){var o={},a=i,s=null,u=t(i,"ref","");if(u){var c=e.xmlFindNodeFromAll(n,r,"xs:attribute","name",u.value,!1);c&&(a=c)}if(u=t(a,"name","")){o.name=u.value;var l=t(a,"type",""),p=a;l&&(s=e.xmlFindNodeFromAll(n,r,"xs:complexType","name",l.value,!0),s?p=s:o.dType=l.value);var f=[];e.xmlTraverse(p,!0,function(e){var n=!0;if(1===e.nodeType)if("xs:element"===e.tagName)n=!1;else if("xs:enumeration"===e.tagName){var r=t(e,"value","");f.push(r.value)}return{proceed:!0,downward:n}}),f.length>0&&(o.enumOptions=f)}return o},e.getAttributes=function(r,i,o){var a=[];if(!i)return a;var s=t(i,"type",""),u=null;u=s?e.xmlFindNodeFromAll(r,o,"xs:complexType","name",s.value,!0):n(i,"xs:complexType",null,null,!1);for(var c=e.getAttrNodesFromNodeOrGroup(r,o,u),l=0;l<c.length;l++){var p=e.getAttrInfo(r,o,c[l]);p&&a.push({name:p.name,dType:p.dType,enumOptions:p.enumOptions})}return a},e.getSchemaNS=function(e){var t=e.attributes;return t.getNamedItem?t.getNamedItem("xmlns"):t.getQualifiedItem("xmlns","")||""},e.getSchemaNode=function(r,i){var o,a=n(r,"xs:schema",null,null,!0),s="",u="",c=t(a,"targetNamespace","");return c&&(s=c.value),c=e.getSchemaNS(a,"xmlns"),c&&(u=c.value),i==s&&i==u&&(o=a),o},{util:e}}),define("sap.watt.toolsets.xml/codecompletion/SchemaMetadataContentAssist",["./SchemaMetadata"],function(e){var t=function(){this.mSchemaMetadata=e,this.schemaList=[]};return t.prototype={init:function(e,t,n,r){var i;if(this.schemaList=[],this.targetFile=n,this.context=r,this._oFileService=this.context.service.filesystem.documentProvider,e)for(i=0;i<e.length;i++)this.schemaList.push({ns:e[i].ns,loc:e[i].loc,xmlContent:e[i].xmlContent});else for(i=0;i<t.length;i++)this.schemaList.push({ns:t[i].ns,loc:t[i].loc});var o=Q.defer();return this.processSchemas(this.schemaList).then(function(e){o.resolve(e)}),o.promise},candidateElements:function(e){for(var t=e.prefix,n=e.ns,r=e.parent,i=[],o=null,a=null,s=r.ns,u=r.name,c=0;c<this.schemaList.length;c++)if(s==this.schemaList[c].ns&&(a=this.getNode(this.schemaList[c].xmlDoc,s,u))){o=this.schemaList[c].xmlDoc;break}if(a)for(var l=this.getChildNodes(this.schemaList,o,a,n),p=0;p<l.length;p++){var f="",d=l[p].name,h="Element";this.compareStringIgnoreCase(d.substr(0,t.length),t)&&i.push({name:d,type:h,description:f,fullName:d})}return i},candidateAttributes:function(e){var t=e.prefix,n=e.ns,r=e.element;e.attrs;for(var i=[],o=null,a=null,s=r.ns,u=r.name,c=0;c<this.schemaList.length;c++)if(s==this.schemaList[c].ns&&(a=this.getNode(this.schemaList[c].xmlDoc,s,u))){o=this.schemaList[c].xmlDoc;break}if(a)for(var l=this.getAttributes(this.schemaList,o,a,n),p=0;p<l.length;p++){var f="",d=l[p].name,h="Property",m=l[p].dType,g=l[p].enumOptions&&l[p].enumOptions.length>0?!0:!1;this.compareStringIgnoreCase(d.substr(0,t.length),t)&&i.push({name:d,type:h,dataType:m,description:f,fullName:d,isEnum:g})}return i},candidateAttributeValues:function(e){var t=e.prefix;e.ns,e.element;var n=e.attr,r=[],i=null,o=n.ns,a=n.name;if(i=this.getAttrNode(this.schemaList,o,a)){var s=this.getAttrInfo(this.schemaList,o,i);if(s){var u=t.length;if("xs:boolean"==s.dType)u>0?(this.compareStringIgnoreCase("false".substr(0,u),t)&&r.push({name:"false",type:"boolean",fullName:s.name}),this.compareStringIgnoreCase("true".substr(0,u),t)&&r.push({name:"true",type:"boolean",fullName:s.name})):(r.push({name:"false",type:"boolean",fullName:s.name}),r.push({name:"true",type:"boolean",fullName:s.name}));else if(s.enumOptions){var c=null;if(u>0)for(var l=0;l<s.enumOptions.length;l++)c=s.enumOptions[l],this.compareStringIgnoreCase(c.substr(0,u),t)&&r.push({name:c.toString(),type:"enum",description:c,fullName:c});else for(var l=0;l<s.enumOptions.length;l++)c=s.enumOptions[l],r.push({name:c.toString(),type:"enum",description:c,fullName:c})}}}return r},getSchemaDom:function(e){try{var t,n=null;window.ActiveXObject?(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,t=n.loadXML(e)):window.DOMParser?(n=new DOMParser,t=n.parseFromString(e,"text/xml")):t=null}catch(r){console.log(r)}return t},getSchemaUrlContent:function(e){var t=this,n=e.loc,r=Q.defer();return $.ajax({url:n,dataType:"text",async:!1,success:function(n){var i=n;e.xmlContent=i,e.xmlDoc=t.getSchemaDom(i),r.resolve(i)},error:function(){r.resolve(null)}}),r.promise},getSchemaFileContent:function(e){var t=this,n=Q.defer(),r=this.targetFile.slice(0,this.targetFile.lastIndexOf("/")+1)+e.loc;return 0==e.loc.indexOf("/")&&(r=e.loc),this._oFileService.getDocument(r).then(function(r){r?r.getContent().then(function(r){var i=r;e.xmlContent=i,e.xmlDoc=t.getSchemaDom(i),n.resolve(i)},function(){n.resolve(null)}):n.resolve(null)},function(){n.resolve(null)}),n.promise},processSchemas:function(e){for(var t=this,n=[],r=0;r<e.length;r++)e[r].xmlDoc||(e[r].xmlContent?e[r].xmlDoc=t.getSchemaDom(e[r].xmlContent):0==e[r].loc.indexOf("http:")||0==e[r].loc.indexOf("https:")?n.push(this.getSchemaUrlContent(e[r])):n.push(this.getSchemaFileContent(e[r])));return Q.all(n).then(function(){return!0})},getNode:function(t,n,r){var i=e.util.getSchemaNode(t,n),o=e.util.getNode(i,n,r);return o},getChildNodes:function(t,n,r,i){var o=[];return o=e.util.getChildNodes(t,r,i)},getAttributes:function(t,n,r,i){var o=[];return o=e.util.getAttributes(t,r,i)},getAttrNode:function(t,n,r){var i=null;return i=e.util.getAttrNode(t,n,r)},getAttrInfo:function(t,n,r){var i=null;return i=e.util.getAttrInfo(t,n,r)},compareStringIgnoreCase:function(e,t){return e.toLowerCase()===t.toLowerCase()}},t}),define("sap.watt.toolsets.xml/codecompletion/templates",[],function(){function e(e,t){return t.substring(e.length)}function t(e,t,n,r,i){this.name=e,this.prefix=t,this.description=n,this.helpDescription=i,this.template=r,this._parse()}function n(e,t){this._keywords=e||[],this._templates=[],this.addTemplates(t||[])}var r="${tab}",i="${delimiter}",o="${cursor}";return t.prototype={getProposal:function(e,t,n){var a,s=t-e.length,u={},c=void 0!==n.delimiter?n.delimiter:"\n";n.indentation&&(c+=n.indentation);for(var l=void 0!==n.tab?n.tab:"	",p=0,f=this.variables,d=this.segments,h=[],m=0;m<d.length;m++){var g=d[m],v=f[g];if(void 0!==v)switch(g){case r:g=l;break;case i:g=c;break;case o:g="",a=p;break;default:var y=u[g];y||(y=u[g]={data:v.data,positions:[]}),g=v.substitution,y.data&&y.data.values&&(g=y.data.values[0]),y.positions.push({offset:s+p,length:g.length})}h.push(g),p+=g.length}var _=[],x=null;for(x in u)u.hasOwnProperty(x)&&_.push(u[x]);return h=h.join(""),void 0===a&&(a=h.length),{name:this.name,proposal:h,description:this.description,helpDescription:this.helpDescription,prefix:this.prefix,groups:_,escapePosition:s+a}},match:function(e,t){var n;return n=""!=e?0===this.name.toLowerCase().indexOf(e.toLowerCase()+"."+t.toLowerCase()):0===this.prefix.toLowerCase().indexOf(t.toLowerCase())},_parse:function(){var e,t=this.template,n=[],o={},a=0;t=t.replace(/\n/g,i),t=t.replace(/\t/g,r);var s=new RegExp("\\$\\{((?:[^\\\\}]+|\\\\.))*\\}","g");t.replace(s,function(r,i,s){var u=r.substring(2,r.length-1),c=r,l=u,p=null,f=l.indexOf(":");-1!==f&&(l=l.substring(0,f),c="${"+l+"}",p=JSON.parse(u.substring(f+1).replace("\\}","}").trim()));var d=o[c];return d||(d=o[c]={}),d.substitution=l,p&&(d.data=p),e=t.substring(a,s),e&&n.push(e),n.push(c),a=s+r.length,l}),e=t.substring(a,t.length),e&&n.push(e),this.segments=n,this.variables=o}},n.prototype={addTemplates:function(e){for(var n=this.getTemplates(),r=0;r<e.length;r++)n.push(new t(e[r].name,e[r].prefix,e[r].description,e[r].template,e[r].helpDescription))},addKeywords:function(e){this._keywords=this._keywords.concat(e)},computeProposals:function(e,t,n){var r=this.getPrefix(e,t,n),i=[];return this.isValid(r,e,t,n)?i=i.concat(this.getTemplateProposals(n.ns,r,t,n)):i},getKeywords:function(){return this._keywords},getKeywordProposals:function(t){var n=[],r=this.getKeywords();if(r)for(var i=0;i<r.length;i++)0===r[i].indexOf(t)&&n.push({proposal:e(t,r[i]),description:r[i]});return n},getPrefix:function(e,t,n){return n.prefix},getTemplates:function(){return this._templates},getTemplateProposals:function(e,t,n,r){for(var i=[],o=this.getTemplates(),a=0;a<o.length;a++){var s=o[a];if(s.match(e,t)){var u=s.getProposal(t,n,r);i.push(u)}}return i},removePrefix:function(t,n){var r=n.overwrite=n.proposal.substring(0,t.length)!==t;r||(n.proposal=e(t,n.proposal))},isValid:function(){return!0}},{Template:t,TemplateContentAssist:n}}),define("sap.watt.toolsets.xml/codecompletion/XMLTemplateContentAssist",["./templates"],function(e){function t(){}var n=[{name:"root",prefix:"root",description:"root",template:'<core:View \n	xmlns:core="sap.ui.core" \n	xmlns="sap.m" \n	xmlns:commons="sap.ui.commons" \n	xmlns:layout="sap.ui.layout" \n	controllerName="" \n	viewName="">\n	\n</core:View>\n'}];return t.prototype=new e.TemplateContentAssist(null,n),t.prototype.resetTemplateAndKeywords=function(){this._templates=[],this._keywords=[],this.addTemplates(n)},t.prototype.isValid=function(){return!0},{XMLTemplateContentAssistProvider:t}}),define("sap.watt.toolsets.xml/codecompletion/XMLContentAssist",["./XMLVisitor","./UI5XmlTypes","./XMLMetadataContentAssist","./SchemaMetadataContentAssist","./XMLTemplateContentAssist"],function(e,t,n,r,i){var o=function(){this.xmlTypes=new t,this.xmlVisitor=new e,this.schemaMetadataAssist=new r,this.category={XML_NAMESPACE:0,XML_ELEMENT:1,XML_PROPERTY:2,XML_EVENT:3,XML_SYNTAX:5,XML_SNIPPET:6,XML_PROPERTY_DEFAULT:11,XML_PROPERTY_BOOL:12,XML_PROPERTY_ENUM:13,XML_PROP_OPTIONS:21},this.categoryDesc={6:"SNIPPET"},this.prefix};return o.prototype={throwError:function(e){var t=new Error(e);throw t},candidateXMLSyntaxs:function(e){var t=[];return("attr"==e.type&&""===e.prefix||"intag"==e.type)&&(t.push({name:">",syntax:">",type:"syntax"}),t.push({name:"/>",syntax:"/>",type:"syntax"})),"attr"!=e.type||"View"!=e.element&&"FragmentDefinition"!=e.element||0!="xmlns".indexOf(e.prefix)||(t.push({name:"xmlns",syntax:"xmlns",type:"syntax"}),t.push({name:"xmlns:",syntax:"xmlns:",type:"syntax"})),t},candidateXMLSyntaxSnippets:function(e){var t=[];if("attr"==e.type&&""===e.prefix||"intag"==e.type){var n=e.element;e.namespace&&e.namespace.length>0&&(n=e.namespace+":"+n),n="></"+n+">",t.push({name:">",proposal:n,type:"syntax"})}return t},candidateNameSpaces:function(e){for(var t=[],n=0;n<e.nslist.length;n++){var r=e.nslist[n].name,i=e.nslist[n].ns;"xmlns"==r||""!=e.prefix&&0!=r.toLowerCase().indexOf(e.prefix.toLowerCase())||t.push({name:r,type:"xmlns",fullName:i})}return t},addTemplates:function(e){this.xmlTemplateAssistant||(this.xmlTemplateAssistant=new i.XMLTemplateContentAssistProvider),this.xmlTemplateAssistant.addTemplates(e.XML_TEMPLATES),this.xmlTemplateAssistant.addKeywords(e.XML_KEYWORDS)},addMetadata:function(e){this.xmlMetadataAssist?this.xmlMetadataAssist.addMetadata(e):this.xmlMetadataAssist=new n(e)},resetTemplatesAndMetadata:function(){this.xmlTemplateAssistant&&this.xmlTemplateAssistant.resetTemplateAndKeywords(),this.xmlMetadataAssist&&this.xmlMetadataAssist.resetMetadata()},candidateSnippet:function(e,t,n){var r=[];return this.xmlTemplateAssistant&&(n.ns&&n.ns.length>0||""===n.ns&&"root"===n.prefix)&&(r=this.xmlTemplateAssistant.computeProposals(e,t,n)),r},getRefNS:function(e,t){var n=t,r=null;if(""==n){for(var i=0;i<e.xmlnsList.length;i++)if(r=e.xmlnsList[i],"xmlns"==r.name){n=r.ns;break}}else for(var i=0;i<e.xmlnsList.length;i++)if(r=e.xmlnsList[i],r.name==n){n=r.ns;break}return n},getNS:function(e){var t=e.prefixns,n=null;if(("attr"==e.type||"value"==e.type)&&(t=e.currentTagns),""==t){for(var r=0;r<e.xmlnsList.length;r++)if(n=e.xmlnsList[r],"xmlns"==n.name){t=n.ns;break}}else for(var r=0;r<e.xmlnsList.length;r++)if(n=e.xmlnsList[r],n.name==t){t=n.ns;break}return t},getAllNS:function(e){var t,n=e.prefixns,r=[],i=null;if(("attr"===e.type||"value"===e.type)&&(n=e.currentTagns),""===n)for(t=0;t<e.xmlnsList.length;t++)i=e.xmlnsList[t],i&&("xmlns"===i.name&&(i.name=""),r.push(i));else for(t=0;t<e.xmlnsList.length;t++)if(i=e.xmlnsList[t],i.name===n){r.push(i);break}return r},filterAndSortProposals:function(e){var t=this.category.XML_SNIPPET,n=this.category.XML_SYNTAX;return e.sort(function(e,r){return void 0==e||void 0==r?0:e.category===t||e.category===n||r.category===t||r.category===n?1:e.description.toLowerCase()===r.description.toLowerCase()?e.category>t?1:-1:e.description.toLowerCase()<r.description.toLowerCase()?-1:1}),e},computeCommonProposals:function(e,t,n,r,i){var o=Q.defer(),a=i.currentEnv,s=[],u=!1;this.getNS(a);var c=0,l=0,p=null,f=null,d=null,h=null;if("rootsnippet"==a.type)h=null;else if("tag"==a.type){var m=a.lbracket?"":"<";if(""==a.prefixns){var g=this.candidateNameSpaces({prefix:void 0!=this.prefix?this.prefix:a.prefix,nslist:a.xmlnsList});for(c=0;c<g.length;c++){var v=g[c];s.push({description:v.name,type:v.type,insertTerm:m+v.name+":",helpDesc:v.helpDescription,helpTarget:v.fullName,category:this.category.XML_NAMESPACE})}}}else if("attr"==a.type){for(p=this.candidateXMLSyntaxs({type:a.type,element:a.currentTag,prefix:void 0!=this.prefix?this.prefix:a.prefix}),c=0;c<p.length;c++)d=p[c],s.push({description:d.name,type:d.type,insertTerm:d.syntax,category:this.category.XML_SYNTAX});for(f=this.candidateXMLSyntaxSnippets({type:a.type,namespace:a.currentTagns,element:a.currentTag,prefix:a.prefix}),l=0;l<f.length;l++)d=f[l],s.push({description:d.name,type:d.type,insertTerm:d.proposal,category:this.category.XML_SNIPPET})}else if("value"==a.type)u=!0;else if("intag"==a.type){for(p=this.candidateXMLSyntaxs({type:a.type,element:a.currentTag,prefix:a.prefix}),c=0;c<p.length;c++)d=p[c],s.push({description:d.name,type:d.type,insertTerm:d.syntax,category:this.category.XML_SYNTAX});for(f=this.candidateXMLSyntaxSnippets({type:a.type,namespace:a.currentTagns,element:a.currentTag,prefix:a.prefix}),l=0;l<f.length;l++)d=f[l],s.push({description:d.name,type:d.type,insertTerm:d.proposal,category:this.category.XML_SNIPPET})}var y=this.filterAndSortProposals(s,void 0!=this.prefix?this.prefix:a.prefix);return o.resolve(y),o.promise},computeXSDProposals:function(e,t,n,r,i){var o=Q.defer(),a=this.schemaMetadataAssist,s=i.currentEnv,u=i.root,c=[],l=!1,p=this.getNS(s),f=this,d=null;return a.init(null,u.schemaInfo,n.targetFile,r).then(function(){var e=-1,t="",r="";if("rootsnippet"==s.type)d=null;else if("tag"==s.type){var i=s.lbracket?"":"<",u="",h=s.parentTag;e=s.parentTag.indexOf(":"),e>0&&(u=s.parentTag.slice(0,e),h=s.parentTag.slice(e+1)),u=f.getRefNS(s,u);for(var m=a.candidateElements({ns:p,prefix:s.prefix,parent:{ns:u,name:h}}),g=0;g<m.length;g++){var v=m[g],y=null;c.push({description:v.name,type:v.type,insertTerm:i+v.name,helpDesc:y,helpTarget:v.fullName,fullName:v.fullName,category:f.category.XML_ELEMENT})}}else if("attr"==s.type){t="",r=s.currentTag,e=s.currentTag.indexOf(":"),e>0&&(t=s.currentTag.slice(0,e),r=s.currentTag.slice(e+1)),t=f.getRefNS(s,t);for(var _=a.candidateAttributes({ns:p,prefix:s.prefix,element:{ns:t,name:r},attrs:s.currentAttrs}),g=0;g<_.length;g++){var x=_[g],b=f.category.XML_PROPERTY_DEFAULT;
b="xs:boolean"==x.dataType?f.category.XML_PROPERTY_BOOL:x.isEnum?f.category.XML_PROPERTY_ENUM:f.category.XML_PROPERTY_DEFAULT;var w=null;c.push({description:x.name,type:x.type,insertTerm:x.name,helpDesc:w,helpTarget:x.fullName.slice(0,x.fullName.indexOf("#")),fullName:x.fullName,category:b})}}else if("value"==s.type){t="",r=s.currentTag,e=s.currentTag.indexOf(":"),e>0&&(t=s.currentTag.slice(0,e),r=s.currentTag.slice(e+1)),t=f.getRefNS(s,t);var S="",E=s.currentAttr;e=s.currentAttr.indexOf(":"),e>0&&(S=s.currentAttr.slice(0,e),E=s.currentAttr.slice(e+1)),S=f.getRefNS(s,S);for(var C=a.candidateAttributeValues({ns:p,prefix:s.prefix,element:{ns:t,name:r},attr:{ns:S,name:E}}),g=0;g<C.length;g++){var T=C[g],P=null,I=f.calculateQuatesEnumarations(T.name,n);c.push({description:T.name,type:T.type,insertTerm:I,helpDesc:P,helpTarget:"",fullName:T.fullName,category:f.category.XML_PROP_OPTIONS})}l=!0}var D=f.filterAndSortProposals(c);o.resolve(D)}),o.promise},computeUI5Proposals:function(e,t,n,r,i){var o,a,s=Q.defer(),u=this.xmlMetadataAssist,c=i.currentEnv,l=[],p=!1,f=null,d=this.getNS(c),h=[],m=null;if("rootsnippet"==c.type)for(h=this.candidateSnippet(e,t,{ns:"",prefix:"root",delimiter:n.delimiter,indentation:n.indentation,tab:n.tab}),o=0;o<h.length;o++)m=h[o],"root"==m.name&&l.push({description:m.description,type:m.type,insertTerm:m.proposal,category:this.category.XML_SNIPPET});else if("tag"===c.type){var g=c.lbracket?"":"<",v="";a=this.prefix&&this.prefix.indexOf(":")>0&&c.lbracket?c.prefix:""===c.prefix&&c.prefix.indexOf(".")<0&&!c.lbracket?this.prefix:c.prefix;var y=this.getAllNS(c,a);for(o=0;o<y.length;o++){h=this.candidateSnippet(e,t,{ns:y[o].ns,prefix:a,delimiter:n.delimiter,indentation:n.indentation,tab:n.tab}),f=y[o];for(var _=0;_<h.length;_++)m=h[_],"root"!==m.name&&(v=this._calculateTerm(m,f,c),l.push({description:v.sDescription,helpDesc:m.helpDescription,type:m.type,insertTerm:v.sTerm,category:this.category.XML_SNIPPET}));if(u)for(var x=u.candidateElements({ns:y[o].ns,prefix:a,parent:c.parentTag}),b=""!==y[o].name?y[o].name+":":"",w=0;w<x.length;w++)m=x[w],l.push({description:m.name+" in "+y[o].ns,type:m.type,insertTerm:g+b+m.name,helpDesc:m.helpDescription,helpTarget:m.fullName,fullName:m.fullName,category:this.category.XML_ELEMENT})}}else if(u&&"attr"==c.type){a=" "===this.prefix?"":c.prefix;var S=u.candidateProperties({ns:d,prefix:a,element:c.currentTag,attrs:c.currentAttrs});for(o=0;o<S.length;o++){var E=S[o],C=this.category.XML_PROPERTY_DEFAULT;C="boolean"==E.dataType?this.category.XML_PROPERTY_BOOL:u.isEnumType(E.dataType)?this.category.XML_PROPERTY_ENUM:this.category.XML_PROPERTY_DEFAULT;var T=E.description||" ";" "===this.prefix,l.push({description:E.name,type:E.type,insertTerm:E.name,helpDesc:T,helpTarget:E.fullName.slice(0,E.fullName.indexOf("#")),fullName:E.fullName,category:C})}var P=u.candidateEvents({ns:d,prefix:c.prefix,element:c.currentTag,attrs:c.currentAttrs});for(o=0;o<P.length;o++){var I=P[o],D=I.description||" ";l.push({description:I.name,type:I.type,insertTerm:I.name,helpDesc:D,helpTarget:I.fullName.slice(0,I.fullName.indexOf("#")),fullName:I.fullName,category:this.category.XML_EVENT})}}else if(u&&"value"==c.type){var A=u.candidateAttributeValues({ns:d,prefix:void 0!=this.prefix?this.prefix:c.prefix,element:c.currentTag,attr:c.currentAttr});for(o=0;o<A.length;o++){var N=A[o],k=N.description||" ",O=this.calculateQuatesEnumarations(N.name,n);l.push({description:N.name,type:N.type,insertTerm:O,helpDesc:k,helpTarget:N.fullName.slice(0,N.fullName.indexOf("#")),fullName:N.fullName,category:this.category.XML_PROP_OPTIONS})}p=!0}var R=this.filterAndSortProposals(l);return s.resolve(R),s.promise},_calculatePrefix:function(e,t){var n=""!==t.prefixns?t.prefixns+":":""===e.name?"":e.name+":";return n},_calculateTerm:function(e,t,n){var r={},i=n.lbracket?"":"<",o=e.proposal.slice(0),a=e.name?e.name.slice(t.ns.length+1):"",s=a.slice(a.lastIndexOf(".")+1),u=""!==n.prefixns?n.prefixns+":":""===t.name?"":t.name+":",c=o.indexOf(a)+a.length;c>0&&(a!==s&&(a=a.replace(".","/"),c=o.indexOf(a)+a.length),o=0===o.slice(c).indexOf("/")?o.slice(c+a.length+1):o.slice(c),o=i+u+a+o,c=o.lastIndexOf("</"),c>0&&(o=o.slice(0,c+2)+u+a+">"));var l=a+" in "+t.ns;return l&&(c=l.indexOf(","),c>0&&(l=l.slice(0,c))),r.sTerm=o,r.sDescription=l,r},calculateQuatesEnumarations:function(e,t){return t.stringValue||""===t.stringValue||'"'===t.buffer[t.offset-1]||t.prefix?e:'"'+e+'"'},computeProposals:function(e,t,n,r){try{var i=this.xmlVisitor.getEnv(e,t),o=i.currentEnv;if(""===o.currentAttr&&"attr"===o.type&&(""===o.origText||""===o.prefix))for(var a=!0,s=o,u=i;a;)t-=1,i=this.xmlVisitor.getEnv(e,t),o=i.currentEnv,""!==o.currentAttr||"attr"!==o.type||""!==o.origText&&""!==o.prefix?"value"===o.type?a=!1:("attr"!==o.type&&(""===o.origText||""===o.prefix)||""!==o.origText||""!==o.prefix)&&(a=!1,o=s,i=u):a=!0;var c=!1,l=this;if("value"==o.type&&(c=!0),this.prefix=void 0!=n.prefix?n.prefix:o.prefix,i.root.documentElement&&""===o.parentTag)return Q({proposalsObj:[],isValue:c,prefix:o.prefix});n.text=o.origText;var p=[];return p.push(this.computeCommonProposals(e,t,n,r,i)),0!=o.isUI5&&p.push(this.computeUI5Proposals(e,t,n,r,i)),i.root.schema&&p.push(this.computeXSDProposals(e,t,n,r,i)),Q.all(p).then(function(e){var t=[],n=0;for(n=0;n<e.length;n++)e[n]&&(t=t.concat(e[n]));return t=l.filterAndSortProposals(t),{proposalsObj:t,isValue:c,prefix:l.prefix||o.prefix}})}catch(f){throw f}}},o}),define("sap.watt.toolsets.xml/service/XMLCodeCompletionImpl",["../codecompletion/XMLContentAssist","sap/watt/lib/jszip/jszip-shim"],function(e){var t,n,r=function(){this.xmlAssist=new e};return r.prototype={_mRegistry:{},_librariesFromXmlCoCo:null,configure:function(e){this._librariesFromXmlCoCo||(this._librariesFromXmlCoCo=e.libraries)},getWordSuggestions:function(e){var n=this;return this._librariesFromXmlCoCo&&this._librariesFromXmlCoCo.length>0?(t=this._librariesFromXmlCoCo,this._getWordSuggestions(e)):this.context.service.intellisence.getCalculatedLibraries().then(function(r){return r&&(t=r),n._getWordSuggestions(e)})},_getWordSuggestions:function(e){var t=this;if(e){var n=[];return this.loadLibrary(e).then(function(){return t.xmlAssist.computeProposals(e.buffer,e.offset,e,t.context,t._libraries).then(function(r){if(1!=e.isAutoHint||""!=r.prefix)for(var i=r.proposalsObj,o=e.ignoreContextProposals||!1,a=e.isAutoHint||e.ignoreSnippetProposals||!1,s=null,u=0;u<i.length;u++)o&&i[u].category!=t.xmlAssist.category.XML_SNIPPET&&i[u].category!=t.xmlAssist.category.XML_SYNTAX?s=i[u]:a&&i[u].category==t.xmlAssist.category.XML_SNIPPET?s=i[u]:n.push({description:i[u].description,overwrite:!0,proposal:i[u].insertTerm,helpDescription:i[u].helpDesc,helpTarget:i[u].helpTarget,category:i[u].category,categoryDesc:t.xmlAssist.categoryDesc[i[u].category.toString()]});return{proposals:n,isValue:r.isValue,prefix:r.prefix}})})}},_isDynamicLibrary:function(e){return e.remPath&&e.remPath.search("/sapui5")>=0},loadLibrary:function(){var e=[];for(var r in t){var i=t[r];n!==i.version&&(this.xmlAssist.resetTemplatesAndMetadata(),e.push(this.initLibrary(i)),n=i.version)}return Q.all(e).then(function(e){console.log("Libs loaded "+e.length)})},initLibrary:function(e){var t=this;return e.name&&e.version?this.initLibraryRes(e).then(function(e){if(e.template)for(var n=0;n<e.template.length;n++)t.loadTemplate(e.template[n]);if(e.meta)for(n=0;n<e.meta.length;n++)t.loadMetadata(e.meta[n])}):Q()},initLibraryRes:function(e){if(this._isDynamicLibrary(e))return this._loadFromHCP(e.name,e.version,e.remPath);var t=[];return t.push(this._loadPackage(e.name,e.version,e.libTemplate,"template")),t.push(this._loadPackage(e.name,e.version,e.libMetadata,"metadata")),Q.all(t).then(function(t){return{libId:e.name+";"+e.version,template:t[0].template,meta:t[1].metadata}})},_loadFromHCP:function(e,t,n){var r,i=this;return this.context.service.progress.startTask("Libraried Loading","Loading metadata is running in the background").then(function(e){return r=e,i.context.service.usernotification.liteInfo(i.context.i18n.getText("xmlcodecompletion_load_lib_start",["user"])).done(),i.context.service.intellisence.libmetadataprovider.getLibraryMetaFromHCP(n,"sapui5","xml")}).then(function(n){try{for(var r=[],i=[],o=0;o<n.length;o++){var a=n[o];for(var s in a.files){var u=a.files[s];u&&u._data&&(u.name.search("meta.json")>=0&&i.push(JSON.parse(u.asText())),u.name.search("templates.json")>=0&&r.push(JSON.parse(u.asText())))}}return{libId:e+";"+t,template:r,meta:i}}catch(c){Q.reject(c)}}).fin(function(){r&&(i.context.service.progress.stopTask(r).done(),i.context.service.usernotification.liteInfo(i.context.i18n.getText("xmlcodecompletion_load_lib_ended",["user"])).done())})},_loadPackage:function(e,t,n,r){var i,o=Q.defer(),a=[],s=require.toUrl(n),u=new XMLHttpRequest;return u.open("GET",s,!0),u.responseType="arraybuffer",u.onload=function(){if(4===this.readyState&&this.status<300)try{var s=new JSZip;s.load(this.response);for(var u in s.files){var c=s.files[u];c&&a.push(JSON.parse(c.asText()))}i={libId:e+";"+t},i[r]=a,o.resolve(i)}catch(l){o.reject(l)}else o.reject(new Error(n))},u.onerror=function(e){o.reject(e)},u.send(null),o.promise},loadFile:function(e,t){var n=Q.defer();return require([t],function(t){try{n.resolve([{name:e,content:t}])}catch(r){n.reject(r)}}),n.promise},loadTemplate:function(e){this.xmlAssist.addTemplates(e)},loadMetadata:function(e){this.xmlAssist.addMetadata(e)},getCalculatedPrefix:function(e){var t="",n="";e.token&&e.token.value&&(n=e.token.value.substr(0,e.cursorPosition.column-e.token.start)),e.aRowTokens&&e.aRowTokens.length>1&&":"===n&&(t=e.aRowTokens[e.aRowTokens.length-2].value,n=t+n);var r=/[^a-z\:\.A-Z_0-9\$\u00A2-\uFFFF]+/;return n.split(r).slice(-1)[0]}},r}),define("sap/watt/lib/XMLDomParser/sax",[],function(){function e(){}function t(e,t,s,p,f){function d(e){if(e>65535){e-=65536;var t=55296+(e>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}function h(e){var t=e.slice(1,-1);return t in s?s[t]:"#"===t.charAt(0)?d(parseInt(t.substr(1).replace("x","0x"))):(f.error("entity not found:"+e),e)}function m(t){var n=e.substring(S,t).replace(/&#?\w+;/g,h);x&&g(S),p.characters(n,0,t-S),S=t}function g(t,n){for(;t>=y&&(n=_.exec(e));)v=n.index,y=v+n[0].length,x.lineNumber++;x.columnNumber=t-v+1}for(var v=0,y=0,_=/.+(?:\r\n?|\n)|.*$/g,x=p.locator,b=[{currentNSMap:t}],w={},S=0;;){var E=e.indexOf("<",S);if(0>E){if(!e.substr(S).match(/^\s*$/)){var C=p.document,T=C.createTextNode(e.substr(S));C.appendChild(T),p.currentElement=T}return}switch(E>S&&m(E),e.charAt(E+1)){case"/":var P,I=e.indexOf(">",E+3),D=e.substring(E+2,I);if(!(b.length>1)){f.fatalError("end tag name not found for: "+D);break}P=b.pop();var A=P.localNSMap;if(P.tagName!=D&&f.fatalError("end tag name: "+D+" does not match the current start tagName: "+P.tagName),p.endElement(P.uri,P.localName,D),A)for(var N in A)p.endPrefixMapping(N);I++;break;case"?":x&&g(E),I=c(e,E,p);break;case"!":x&&g(E),I=u(e,E,p,f);break;default:try{x&&g(E);var k=new l,I=r(e,E,k,h,f),O=k.length;if(O&&x){for(var R=n(x,{}),E=0;O>E;E++){var j=k[E];g(j.offset),j.offset=n(x,{})}n(R,x)}!k.closed&&a(e,I,k.tagName,w)&&(k.closed=!0,s.nbsp||f.error("unclosed xml attribute")),i(k,p,b),"http://www.w3.org/1999/xhtml"!==k.uri||k.closed?I++:I=o(e,I,k.tagName,h,p)}catch(F){f.error("element parse error: "+F),I=-1}}0>I?m(E+1):S=I}}function n(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function r(e,t,n,r,i){for(var o,a,s=++t,u=g;;){var c=e.charAt(s);switch(c){case"=":if(u===v)o=e.slice(t,s),u=_;else{if(u!==y)throw new Error("attribute equal must after attrName");u=_}break;case"'":case'"':if(u===_){if(t=s+1,s=e.indexOf(c,t),!(s>0))throw new Error("attribute value no end '"+c+"' match");a=e.slice(t,s).replace(/&#?\w+;/g,r),n.add(o,a,t-1),u=b}else{if(u!=x)throw new Error('attribute value must after "="');a=e.slice(t,s).replace(/&#?\w+;/g,r),n.add(o,a,t),i.warning('attribute "'+o+'" missed start quot('+c+")!!"),t=s+1,u=b}break;case"/":switch(u){case g:n.setTagName(e.slice(t,s));case b:case w:case S:u=S,n.closed=!0;case x:case v:case y:break;default:throw new Error("attribute invalid close char('/')")}break;case"":i.error("unexpected end of input");case">":switch(u){case g:n.setTagName(e.slice(t,s));case b:case w:case S:break;case x:case v:a=e.slice(t,s),"/"===a.slice(-1)&&(n.closed=!0,a=a.slice(0,-1));case y:u===y&&(a=o),u==x?(i.warning('attribute "'+a+'" missed quot(")!!'),n.add(o,a.replace(/&#?\w+;/g,r),t)):(i.warning('attribute "'+a+'" missed value!! "'+a+'" instead!!'),n.add(a,a,t));break;case _:throw new Error("attribute value missed!!")}return s;case"":c=" ";default:if(" ">=c)switch(u){case g:n.setTagName(e.slice(t,s)),u=w;break;case v:o=e.slice(t,s),u=y;break;case x:var a=e.slice(t,s).replace(/&#?\w+;/g,r);i.warning('attribute "'+a+'" missed quot(")!!'),n.add(o,a,t);case b:u=w}else switch(u){case y:i.warning('attribute "'+o+'" missed value!! "'+o+'" instead!!'),n.add(o,o,t),t=s,u=v;break;case b:i.warning('attribute space is required"'+o+'"!!');case w:u=v,t=s;break;case _:u=x,t=s;break;case S:throw new Error("elements closed character '/' and '>' must be connected to")}}s++}}function i(e,t,n){for(var r=e.tagName,i=null,o=n[n.length-1].currentNSMap,a=e.length;a--;){var u=e[a],c=u.qName,l=u.value,p=c.indexOf(":");if(p>0)var f=u.prefix=c.slice(0,p),d=c.slice(p+1),h="xmlns"===f&&d;else d=c,f=null,h="xmlns"===c&&"";u.localName=d,h!==!1&&(null==i&&(i={},s(o,o={})),o[h]=i[h]=l,u.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(h,l))}for(var a=e.length;a--;){u=e[a];var f=u.prefix;f&&("xml"===f&&(u.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==f&&(u.uri=o[f]))}var p=r.indexOf(":");p>0?(f=e.prefix=r.slice(0,p),d=e.localName=r.slice(p+1)):(f=null,d=e.localName=r);var m=e.uri=o[f||""];if(t.startElement(m,d,r,e),e.closed){if(t.endElement(m,d,r),i)for(f in i)t.endPrefixMapping(f)}else e.currentNSMap=o,e.localNSMap=i,n.push(e)}function o(e,t,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var o=e.indexOf("</"+n+">",t),a=e.substring(t+1,o);if(/[&<]/.test(a))return/^script$/i.test(n)?(i.characters(a,0,a.length),o):(a=a.replace(/&#?\w+;/g,r),i.characters(a,0,a.length),o)}return t+1}function a(e,t,n,r){var i=r[n];return null==i&&(i=r[n]=e.lastIndexOf("</"+n+">")),t>i}function s(e,t){for(var n in e)t[n]=e[n]}function u(e,t,n,r){var i=e.charAt(t+2);switch(i){case"-":if("-"===e.charAt(t+3)){var o=e.indexOf("-->",t+4);return o>t?(n.comment(e,t+4,o-t-4),o+3):(r.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==e.substr(t+3,6)){var o=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,o-t-9),n.endCDATA(),o+3}var a=f(e,t),s=a.length;if(s>1&&/!doctype/i.test(a[0][0])){var u=a[1][0],c=s>3&&/^public$/i.test(a[2][0])&&a[3][0],l=s>4&&a[4][0],p=a[s-1];return n.startDTD(u,c&&c.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),p.index+p[0].length}}return-1}function c(e,t,n){var r=e.indexOf("?>",t);if(r){var i=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,n.processingInstruction(i[1],i[2]),r+2):-1}return-1}function l(){}function p(e,t){return e.__proto__=t,e}function f(e,t){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);n=i.exec(e);)if(r.push(n),n[1])return r}var d=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=new RegExp("[\\-\\.0-9"+d.source.slice(1,-1)+"·̀-ͯ\\ux203F-⁀]"),m=new RegExp("^"+d.source+h.source+"*(?::"+d.source+h.source+"*)?$"),g=0,v=1,y=2,_=3,x=4,b=5,w=6,S=7;return e.prototype={parse:function(e,n,r){var i=this.domBuilder;i.startDocument(),s(n,n={}),t(e,n,r,i,this.errorHandler),i.endDocument()}},l.prototype={setTagName:function(e){if(!m.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!m.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getOffset:function(e){return this[e].offset},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},p({},p.prototype)instanceof p||(p=function(e,t){function n(){}n.prototype=t,n=new n;for(t in e)n[t]=e[t];return n}),e}),define("sap/watt/lib/XMLDomParser/dom",[],function(){function e(e,t){for(var n in e)t[n]=e[n]}function t(t,n){function r(){}var i=t.prototype;if(Object.create){var o=Object.create(n.prototype);i.__proto__=o}i instanceof n||(r.prototype=n.prototype,r=new r,e(i,r),t.prototype=i=r),i.constructor!=t&&("function"!=typeof t&&console.error("unknow Class:"+t),i.constructor=t)}function n(e,t){if(t instanceof Error)var r=t;else r=this,Error.call(this,et[e]),this.message=et[e],Error.captureStackTrace&&Error.captureStackTrace(this,n);return r.code=e,t&&(this.message=this.message+": "+t),r}function r(){}function i(e,t){this._node=e,this._refresh=t,o(this)}function o(t){var n=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=n){var r=t._refresh(t._node);L(t,"length",r.length),e(r,t),t._inc=n}}function a(){}function s(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function u(e,t,n,r){if(r?t[s(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(r&&g(i,e,r),m(i,e,n))}}function c(e,t,r){var i=s(t,r);if(!(i>=0))throw n(tt,new Error);for(var o=t.length-1;o>i;)t[i]=t[++i];if(t.length=o,e){var a=e.ownerDocument;a&&(g(a,e,r),r.ownerElement=null)}}function l(e){if(this._features={},e)for(var t in e)this._features=e[t]}function p(){}function f(e){return"<"==e&&"&lt;"||">"==e&&"&gt;"||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function d(e,t){if(t(e))return!0;if(e=e.firstChild)do if(d(e,t))return!0;while(e=e.nextSibling)}function h(){}function m(e,t,n){e&&e._inc++;var r=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==r&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function g(e,t,n){e&&e._inc++;var r=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==r&&delete t._nsMap[n.prefix?n.localName:""]}function v(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var i=t.firstChild,o=0;i;)r[o++]=i,i=i.nextSibling;r.length=o}}}function y(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,v(e.ownerDocument,e),t}function _(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===K){var i=t.firstChild;if(null==i)return t;var o=t.lastChild}else i=o=t;var a=n?n.previousSibling:e.lastChild;i.previousSibling=a,o.nextSibling=n,a?a.nextSibling=i:e.firstChild=i,null==n?e.lastChild=o:n.previousSibling=o;do i.parentNode=e;while(i!==o&&(i=i.nextSibling));return v(e.ownerDocument||e,e),t.nodeType==K&&(t.firstChild=t.lastChild=null),t}function x(e,t){var n=t.parentNode;if(n){var r=e.lastChild;n.removeChild(t);var r=e.lastChild}var r=e.lastChild;return t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,v(e.ownerDocument,e,t),t}function b(){this._nsMap={}}function w(){}function S(){}function E(){}function C(){}function T(){}function P(){}function I(){}function D(){}function A(){}function N(){}function k(){}function O(){}function R(e,t){switch(e.nodeType){case V:var n=e.attributes,r=n.length,i=e.firstChild,o=e.tagName,a=B===e.namespaceURI;t.push("<",o);for(var s=0;r>s;s++)R(n.item(s),t,a);if(i||a&&!/^(?:meta|link|img|br|hr|input|button)$/i.test(o)){if(t.push(">"),a&&/^script$/i.test(o))i&&t.push(i.data);else for(;i;)R(i,t),i=i.nextSibling;t.push("</",o,">")}else t.push("/>");return;case $:case K:for(var i=e.firstChild;i;)R(i,t),i=i.nextSibling;return;case Q:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,f),'"');case G:return t.push(e.data.replace(/[<&]/g,f));case H:return t.push("<![CDATA[",e.data,"]]>");case X:return t.push("<!--",e.data,"-->");case J:var u=e.publicId,c=e.systemId;if(t.push("<!DOCTYPE ",e.name),u)t.push(' PUBLIC "',u),c&&"."!=c&&t.push('" "',c),t.push('">');else if(c&&"."!=c)t.push(' SYSTEM "',c,'">');else{var l=e.internalSubset;l&&t.push(" [",l,"]"),t.push(">")}return;case q:return t.push("<?",e.target," ",e.data,"?>");case z:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function j(e,t,n){var r;switch(t.nodeType){case V:r=t.cloneNode(!1),r.ownerDocument=e;case K:break;case Q:n=!0}if(r||(r=t.cloneNode(!1)),r.ownerDocument=e,r.parentNode=null,n)for(var i=t.firstChild;i;)r.appendChild(j(e,i,n)),i=i.nextSibling;return r}function F(e,t,n){var i=new t.constructor;for(var o in t){var s=t[o];"object"!=typeof s&&s!=i[o]&&(i[o]=s)}switch(t.childNodes&&(i.childNodes=new r),i.ownerDocument=e,i.nodeType){case V:var u=t.attributes,c=i.attributes=new a,l=u.length;c._ownerElement=i;for(var p=0;l>p;p++)i.setAttributeNode(F(e,u.item(p),!0));break;case Q:n=!0}if(n)for(var f=t.firstChild;f;)i.appendChild(F(e,f,n)),f=f.nextSibling;return i}function L(e,t,n){e[t]=n}function M(e){switch(e.nodeType){case 1:case 11:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(M(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}var B="http://www.w3.org/1999/xhtml",U={},V=U.ELEMENT_NODE=1,Q=U.ATTRIBUTE_NODE=2,G=U.TEXT_NODE=3,H=U.CDATA_SECTION_NODE=4,z=U.ENTITY_REFERENCE_NODE=5,W=U.ENTITY_NODE=6,q=U.PROCESSING_INSTRUCTION_NODE=7,X=U.COMMENT_NODE=8,$=U.DOCUMENT_NODE=9,J=U.DOCUMENT_TYPE_NODE=10,K=U.DOCUMENT_FRAGMENT_NODE=11,Y=U.NOTATION_NODE=12,Z={},et={};Z.INDEX_SIZE_ERR=(et[1]="Index size error",1),Z.DOMSTRING_SIZE_ERR=(et[2]="DOMString size error",2),Z.HIERARCHY_REQUEST_ERR=(et[3]="Hierarchy request error",3),Z.WRONG_DOCUMENT_ERR=(et[4]="Wrong document",4),Z.INVALID_CHARACTER_ERR=(et[5]="Invalid character",5),Z.NO_DATA_ALLOWED_ERR=(et[6]="No data allowed",6),Z.NO_MODIFICATION_ALLOWED_ERR=(et[7]="No modification allowed",7);var tt=Z.NOT_FOUND_ERR=(et[8]="Not found",8);Z.NOT_SUPPORTED_ERR=(et[9]="Not supported",9);var nt=Z.INUSE_ATTRIBUTE_ERR=(et[10]="Attribute in use",10);Z.INVALID_STATE_ERR=(et[11]="Invalid state",11),Z.SYNTAX_ERR=(et[12]="Syntax error",12),Z.INVALID_MODIFICATION_ERR=(et[13]="Invalid modification",13),Z.NAMESPACE_ERR=(et[14]="Invalid namespace",14),Z.INVALID_ACCESS_ERR=(et[15]="Invalid access",15),n.prototype=Error.prototype,e(Z,n),r.prototype={length:0,item:function(e){return this[e]||null}},i.prototype.item=function(e){return o(this),this[e]},t(i,r),a.prototype={length:0,item:r.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new n(nt);var r=this.getNamedItem(e.nodeName);return u(this._ownerElement,this,e,r),r},setNamedItemNS:function(e){var t,r=e.ownerElement;if(r&&r!=this._ownerElement)throw new n(nt);return t=this.getNamedItemNS(e.namespaceURI,e.localName),u(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return c(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return c(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},l.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return n&&(!t||t in n)?!0:!1},createDocument:function(e,t,n){var i=new h;if(i.implementation=this,i.childNodes=new r,i.doctype=n,n&&i.appendChild(n),t){var o=i.createElementNS(e,t);i.appendChild(o)}return i},createDocumentType:function(e,t,n){var r=new P;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},p.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return _(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return y(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return F(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==G&&e.nodeType==G?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return null==t}},e(U,p),e(U,p.prototype),h.prototype={nodeName:"#document",nodeType:$,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==K){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return null==this.documentElement&&1==e.nodeType&&(this.documentElement=e),_(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),y(this,e)},importNode:function(e,t){return j(this,e,t)},getElementById:function(e){var t=null;return d(this.documentElement,function(n){return 1==n.nodeType&&n.getAttribute("id")==e?(t=n,!0):void 0}),t},createElement:function(e){var t=new b;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new r;var n=t.attributes=new a;return n._ownerElement=t,t},createDocumentFragment:function(){var e=new N;return e.ownerDocument=this,e.childNodes=new r,e},createTextNode:function(e){var t=new E;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new C;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new T;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new k;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new w;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new A;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new b,i=t.split(":"),o=n.attributes=new a;return n.childNodes=new r,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,o._ownerElement=n,n},createAttributeNS:function(e,t){var n=new w,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},t(h,p),b.prototype={nodeType:V,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===K?this.insertBefore(e,null):x(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new i(this,function(t){var n=[];return d(t,function(r){r===t||r.nodeType!=V||"*"!==e&&r.tagName!=e||n.push(r)}),n})},getElementsByTagNameNS:function(e,t){return new i(this,function(n){var r=[];return d(n,function(i){i===n||i.nodeType!==V||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||r.push(i)}),r})}},h.prototype.getElementsByTagName=b.prototype.getElementsByTagName,h.prototype.getElementsByTagNameNS=b.prototype.getElementsByTagNameNS,t(b,p),w.prototype.nodeType=Q,t(w,p),S.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(){throw new Error(et[3])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){var r=this.data.substring(0,e),i=this.data.substring(e+t);n=r+n+i,this.nodeValue=this.data=n,this.length=n.length}},t(S,p),E.prototype={nodeName:"#text",nodeType:G,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},t(E,S),C.prototype={nodeName:"#comment",nodeType:X},t(C,S),T.prototype={nodeName:"#cdata-section",nodeType:H},t(T,S),P.prototype.nodeType=J,t(P,p),I.prototype.nodeType=Y,t(I,p),D.prototype.nodeType=W,t(D,p),A.prototype.nodeType=z,t(A,p),N.prototype.nodeName="#document-fragment",N.prototype.nodeType=K,t(N,p),k.prototype.nodeType=q,t(k,p),O.prototype.serializeToString=function(e){var t=[];return R(e,t),t.join("")},p.prototype.toString=function(){return O.prototype.serializeToString(this)};try{Object.defineProperty&&(Object.defineProperty(i.prototype,"length",{get:function(){return o(this),this.$$length}}),Object.defineProperty(p.prototype,"textContent",{get:function(){return M(this)},set:function(e){switch(this.nodeType){case 1:case 11:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=value,this.nodeValue=e}}}),L=function(e,t,n){e["$$"+t]=n})}catch(rt){}return l}),define("sap/watt/lib/XMLDomParser/dom_parser",["./sax","./dom"],function(e,t){"use strict";function n(e){if(e)this.options=e;else{this.options={locator:{},domBuilder:new i,xmlns:{},errors:[]};var t=this.options.errors;this.options.errorHandler={fatalError:function(e,n,r){t.push({row:r.lineNumber,column:r.columnNumber,text:n,type:"error"})},error:function(e,n,r){t.push({row:r.lineNumber,column:r.columnNumber,text:n,type:"error"})},warning:function(e,n,r){t.push({row:r.lineNumber,column:r.columnNumber,text:n,type:"warning"})}}}}function r(e,t,n){function r(t){var r=e[t];if(!r)if(s)r=2==e.length?function(n){e(t,n)}:e;else for(var i=arguments.length;--i&&!(r=e[arguments[i]]););o[t]=r&&function(e){r(e+a(n),e,n)}||function(){}}if(!e){if(t instanceof i)return t;e=t}var o={},s=e instanceof Function;return n=n||{},r("warning","warn"),r("error","warn","warning"),r("fatalError","warn","warning","error"),o}function i(){this.cdata=!1}function o(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){return e?"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]":void 0}function s(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function u(e,t){e.currentElement?e.currentElement.appendChild(t):e.document.appendChild(t)}return n.prototype.parseFromString=function(t,n){var o=this.options,a=new e,s=o.domBuilder||new i,u=o.errorHandler,c=o.locator,l=o.xmlns||{},p={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return c&&s.setDocumentLocator(c),a.errorHandler=r(u,s,c),a.domBuilder=o.domBuilder||s,/\/x?html?$/.test(n)&&(p.nbsp=" ",p.copy="©",l[""]="http://www.w3.org/1999/xhtml"),t?a.parse(t,l,p):a.errorHandler.error("invalid document source"),s.document
},i.prototype={startDocument:function(){this.document=(new t).createDocument(null,null,null),this.locator&&(this.document.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var i=this.document,a=i.createElementNS(e,n||t),s=r.length;u(this,a),this.currentElement=a,this.locator&&o(this.locator,a);for(var c=0;s>c;c++){var e=r.getURI(c),l=r.getValue(c),n=r.getQName(c),p=i.createAttributeNS(e,n);p.getOffset&&o(p.getOffset(1),p),p.value=p.nodeValue=l,a.setAttributeNode(p)}},endElement:function(){var e=this.currentElement;e.tagName,this.currentElement=e.parentNode},startPrefixMapping:function(){},endPrefixMapping:function(){},processingInstruction:function(e,t){var n=this.document.createProcessingInstruction(e,t);this.locator&&o(this.locator,n),u(this,n)},ignorableWhitespace:function(){},characters:function(e){if(e=s.apply(this,arguments),this.currentElement&&e){if(this.cdata){var t=this.document.createCDATASection(e);this.currentElement.appendChild(t)}else{var t=this.document.createTextNode(e);this.currentElement.appendChild(t)}this.locator&&o(this.locator,t)}},skippedEntity:function(){},endDocument:function(){this.document.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e){e=s.apply(this,arguments);var t=this.document.createComment(e);this.locator&&o(this.locator,t),u(this,t)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.document.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(e,t,n);this.locator&&o(this.locator,i),u(this,i)}},warning:function(e){console.warn(e,a(this.locator))},error:function(e){console.error(e,a(this.locator))},fatalError:function(e){throw console.error(e,a(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){i.prototype[e]=function(){return null}}),{DomParser:n}}),define("sap.watt.toolsets.xml/service/XMLValidator",["sap/watt/lib/XMLDomParser/dom_parser"],function(e){"use strict";return{SEVIRITY_WARNING:"warning",SEVIRITY_ERROR:"error",SEVIRITY_FATAL_ERROR:"fatalError",init:function(){},getCustomRulesContent:function(){return{}},getIssues:function(t,n,r){var i=new e.DomParser;return i.parseFromString(t),this._convertParseError(i,r)},getIssuesSynchronously:function(e,t,n){return this.getIssues(e,t,n)},getConfiguration:function(){return{}},getPathToImplementationModule:function(){return"sap/watt/toolsets/plugin/xml/service/XMLValidator"},getDefaultConfiguration:function(){return{}},_convertParseError:function(e,t){var n=this,r=this.SEVIRITY_WARNING,i=this.SEVIRITY_ERROR,o=this.SEVIRITY_FATAL_ERROR,a={root:{},issues:[]};if(e&&e.options&&e.options.errors){var s=e.options.errors;if(s.length){var u={};u[r]=function(e){return(a.root.severity!==i||a.root.severity!==o)&&(a.root.severity=r),e.severity=r,e},u[i]=function(e){return a.root.severity=i,e.severity=i,e},u[o]=function(e){u[i](e)},s.forEach(function(e){var r={category:"Syntax Error",checker:"",helpUrl:"",line:e.row,column:e.column,message:e.text,source:"",path:t};"function"!=typeof u[e.type.toLowerCase()]?(n.context.service.log.error(n.context.service.xmlValidator.getProxyMetadata().getName(),"wrong severity value sent by dom parser: "+e.type,["system"]).done(),a.issues.push(u[SEVIRITY_ERROR](r))):a.issues.push(u[e.type](r))})}}return a}}});var prettydiff=function(e){"use strict";var t=Date.now(),n=!1,r="",i=function(){},o=function(){},a=function(){},s=function(){},u=function(){},c=function(){},l=function(){},p=function(e,t,n){var r=function(e){return"object"!=typeof e||void 0===e.length||e.length<2?!1:!0},i=function(t){var o=[t[0]],a=t,s=function(){var e=0,t=a.length;for(e=0;t>e;e+=1)r(a[e])===!0&&(a[e]=i(a[e]))},u=function(e){var r=0,i=[],c=a.length;for(r=0;c>r;r+=1)a[r]!==e&&i.push(a[r]);a=i,i.length>0?(o.push(i[0]),u(i[0])):(n===!0&&s(),t=a)};u(e[0])},o=function(e){var t=0,i=e,a=e.length,s=function(){var e=0,t=i.length;for(e=0;t>e;e+=1)r(i[e])===!0&&(i[e]=o(i[e]))},u=function(){var r=0,o=0,c=0,l=0,p=[],f=i[t],d="",h=typeof f;for(r=t;a>r;r+=1)d=typeof i[r],i[r]>f||d>h?(f=i[r],p=[r]):i[r]===f&&p.push(r);for(c=p.length,o=c+t,r=t;o>r;r+=1)i[p[l]]=i[r],i[r]=f,l+=1;t+=c,a>t?u():(n===!0&&s(),e=i)};return u(),e},a=function(e){var t=0,i=e,o=e.length,s=function(){var e=0,t=i.length;for(e=0;t>e;e+=1)r(i[e])===!0&&(i[e]=a(i[e]))},u=function(){var r=0,a=0,c=0,l=0,p=[],f=i[t],d="",h=typeof f;for(r=t;o>r;r+=1)d=typeof i[r],i[r]<f||h>d?(f=i[r],p=[r]):i[r]===f&&p.push(r);for(c=p.length,a=c+t,r=t;a>r;r+=1)i[p[l]]=i[r],i[r]=f,l+=1;t+=c,o>t?u():(n===!0&&s(),e=i)};return u(),e};return r(e)===!1?e:("true"===n?n=!0:n!==!0&&(n=!1),"normal"===t?i(e):"descend"===t?o(e):a(e))},f=function(e){var i=/^\s+$/g,p="",f="",d={},h=function(e){return"css"===e||"less"===e||"scss"===e?"css":e.indexOf("html")>-1||"html"===e||"ejs"===e||"html_ruby"===e||"handlebars"===e||"swig"===e||"twig"===e||"php"===e||"dustjs"===e?"html":"markup"===e||"jsp"===e||"xml"===e||"xhtml"===e?"markup":"javascript"===e||"json"===e||"jsx"===e?"javascript":"text"===e?"text":"csv"===e?"csv":"tss"===e||"titanium"===e?"tss":"javascript"},m=function(e){return"javascript"===e?"JavaScript":"text"===e?"Plain Text":"jsx"===e?"React JSX":"scss"===e?"SCSS (Sass)":"ejs"===e?"EJS Template":"handlebars"===e?"Handlebars Template":"html_ruby"===e?"ERB (Ruby) Template":"tss"===e||"titanium"===e?"Titanium Stylesheets":"typescript"===e?"TypeScript (not supported yet)":"twig"===e?"HTML TWIG Template":"jsp"===e?"JSTL (JSP)":"java"===e?"Java (not supported yet)":e.toUpperCase()},g={accessibility:e.accessibility===!0||"true"===e.accessibility,api:void 0===e.api||0===e.api.length?"":e.api,braceline:e.braceline===!0||"true"===e.braceline,bracepadding:e.bracepadding===!0||"true"===e.bracepadding,braces:"allman"===e.braces?"allman":"knr",comments:"noindent"===e.comments?"noindent":"nocomment"===e.comments?"nocomment":"indent",conditional:e.conditional===!0||"true"===e.conditional,content:e.content===!0||"true"===e.content,context:""===e.context||/^(\s+)$/.test(e.context)||isNaN(e.context)?"":Number(e.context),correct:e.correct===!0||"true"===e.correct,cssinsertlines:e.cssinsertlines===!0||"true"===e.cssinsertlines,csvchar:"string"==typeof e.csvchar&&e.csvchar.length>0?e.csvchar:",",diff:"string"==typeof e.diff&&e.diff.length>0&&/^(\s+)$/.test(e.diff)===!1?e.diff:"",diffcli:e.diffcli===!0||"true"===e.diffcli,diffcomments:e.diffcomments===!0||"true"===e.diffcomments,difflabel:"string"==typeof e.difflabel&&e.difflabel.length>0?e.difflabel:"new",diffview:"inline"===e.diffview?"inline":"sidebyside",dustjs:e.dustjs===!0||"true"===e.dustjs,elseline:e.elseline===!0||"true"===e.elseline,force_indent:e.force_indent===!0||"true"===e.force_indent,html:e.html===!0||"true"===e.html||"string"==typeof e.html&&"html-yes"===e.html,inchar:"string"==typeof e.inchar&&e.inchar.length>0?e.inchar:" ",inlevel:isNaN(e.inlevel)||Number(e.inlevel)<1?0:Number(e.inlevel),insize:isNaN(e.insize)?4:Number(e.insize),jsscope:e.jsscope===!0||"true"===e.jsscope?"report":"html"!==e.jsscope&&"report"!==e.jsscope?"none":e.jsscope,lang:"string"==typeof e.lang&&"auto"!==e.lang?h(e.lang.toLowerCase()):"auto",langdefault:"string"==typeof e.langdefault?h(e.langdefault.toLowerCase()):"text",mode:"string"!=typeof e.mode||"minify"!==e.mode&&"beautify"!==e.mode&&"parse"!==e.mode?"diff":e.mode,obfuscate:e.obfuscate===!0||"true"===e.obfuscate,objsort:"all"===e.objsort,preserve:"all"===e.preserve,quote:e.quote===!0||"true"===e.quote,quoteConvert:"single"===e.quoteConvert||"double"===e.quoteConvert?e.quoteConvert:"none",semicolon:e.semicolon===!0||"true"===e.semicolon,source:"string"==typeof e.source&&e.source.length>0&&/^(\s+)$/.test(e.source)===!1?e.source:"",sourcelabel:"string"==typeof e.sourcelabel&&e.sourcelabel.length>0?e.sourcelabel:"base",space:e.space!==!1&&"false"!==e.space,style:"noindent"===e.style?"noindent":"indent",styleguide:"string"==typeof e.styleguide?e.styleguide:"",tagmerge:e.tagmerge===!0||"true"===e.tagmerge,textpreserve:e.textpreserve===!0||"true"===e.textpreserve,titanium:e.titanium===!0||"true"===e.titanium,topcoms:e.topcoms===!0||"true"===e.topcoms,varword:"each"===e.varword||"list"===e.varword?e.varword:"none",vertical:"all"===e.vertical,wrap:isNaN(e.wrap)===!0?80:Number(e.wrap)},v=[],y="",_=function(e){var t=[],n=0,r=0,i="",o=!1,a=!1,s=function(e){return"unknown"===e?[g.langdefault,h(g.langdefault),"unknown"]:"xhtml"===e?["xml","html","XHTML"]:"tss"===e?["tss","tss","Titanium Stylesheets"]:[e,h(e),m(e)]};if(null!==e){if(void 0===e||/^(\s*#(?!(!\/)))/.test(e)===!0||/\n\s*(\.|@)mixin\(?(\s*)/.test(e)===!0)return/\$[a-zA-Z]/.test(e)===!0||/\{\s*(\w|\.|\$|#)+\s*\{/.test(e)===!0?s("scss"):/@[a-zA-Z]/.test(e)===!0||/\{\s*(\w|\.|@|#)+\s*\{/.test(e)===!0?s("less"):s("css");if(t=e.replace(/\[[a-zA-Z][\w\-]*\=("|')?[a-zA-Z][\w\-]*("|')?\]/g,"").split(""),n=t.length,/^([\s\w\-]*<)/.test(e)===!1&&/(>[\s\w\-]*)$/.test(e)===!1){for(r=1;n>r;r+=1)o===!1?"*"===t[r]&&"/"===t[r-1]?(t[r-1]="",o=!0):a===!1&&"f"===t[r]&&n-6>r&&"i"===t[r+1]&&"l"===t[r+2]&&"t"===t[r+3]&&"e"===t[r+4]&&"r"===t[r+5]&&":"===t[r+6]&&(a=!0):o===!0&&"*"===t[r]&&r!==n-1&&"/"===t[r+1]?(o=!1,t[r]="",t[r+1]=""):a===!0&&";"===t[r]&&(a=!1,t[r]=""),(o===!0||a===!0)&&(t[r]="");return i=t.join(""),/^(\s*(\{|\[))/.test(e)===!0&&/((\]|\})\s*)$/.test(e)&&-1!==e.indexOf(",")?s("json"):/((\}?(\(\))?\)*;?\s*)|([a-z0-9]("|')?\)*);?(\s*\})*)$/i.test(e)!==!0||/(var\s+(\w|\$)+[a-zA-Z0-9]*)/.test(e)!==!0&&/((\=|(\$\())\s*function)|(\s*function\s+(\w*\s+)?\()/.test(e)!==!0&&-1!==e.indexOf("{")&&/^(\s*if\s+\()/.test(e)!==!0?-1!==e.indexOf("{")&&/^(\s*[\{\$\.#@a-z0-9])|^(\s*\/(\*|\/))|^(\s*\*\s*\{)/i.test(e)===!0&&/^(\s*if\s*\()/.test(e)===!1&&/\=\s*(\{|\[|\()/.test(i)===!1&&(/(\+|-|\=|\?)\=/.test(i)===!1||/\/\/\s*\=+/.test(i)===!0||/\=+('|")?\)/.test(e)===!0&&/;\s*base64/.test(e)===!0)&&/function(\s+\w+)*\s*\(/.test(i)===!1?/:\s*((number)|(string))/.test(e)===!0&&/((public)|(private))\s+/.test(e)===!0?s("typescript"):/((public)|(private))\s+(((static)?\s+(v|V)oid)|(class)|(final))/.test(e)===!0?s("java"):/<[a-zA-Z]/.test(e)!==!0||/<\/[a-zA-Z]/.test(e)!==!0||/\s?\{%/.test(e)!==!0&&/\{(\{|#)(?!(\{|#|\=))/.test(e)!==!0?/^\s*($|@)/.test(e)!==!1||/:\s*(\{|\(|\[)/.test(e)!==!0&&/^(\s*return;?\s*\{)/.test(e)!==!0||/(\};?\s*)$/.test(e)!==!0?/\{\{#/.test(e)===!0&&/\{\{\//.test(e)===!0&&/<\w/.test(e)===!0?s("handlebars"):/\{\s*(\w|\.|@|#)+\s*\{/.test(e)===!0?s("less"):/\$(\w|-)/.test(e)===!0?s("scss"):/(;|\{|:)\s*@\w/.test(e)===!0?s("less"):s("css"):s("javascript"):s("twig"):/"\s*:\s*\{/.test(e)===!0?s("tss"):s("unknown"):e.indexOf("(")>-1||e.indexOf("=")>-1||e.indexOf(";")>-1&&e.indexOf("{")>-1?/:\s*((number)|(string))/.test(e)===!0&&/((public)|(private))\s+/.test(e)===!0?s("typescript"):s("javascript"):s("unknown")}return(/(>[\w\s:]*)?<(\/|!)?[\w\s:\-\[]+/.test(e)===!0||/^(\s*<\?xml)/.test(e)===!0)&&(/^([\s\w]*<)/.test(e)===!0||/(>[\s\w]*)$/.test(e)===!0)||/^(\s*<s((cript)|(tyle)))/i.test(e)===!0&&/(<\/s((cript)|(tyle))>\s*)$/i.test(e)===!0?/\s*<!doctype\ html>/i.test(e)===!0&&/\s*<html/i.test(e)===!0||/^(\s*<!DOCTYPE\s+((html)|(HTML))\s+PUBLIC\s+)/.test(e)===!0&&/XHTML\s+1\.1/.test(e)===!1&&/XHTML\s+1\.0\s+(S|s)((trict)|(TRICT))/.test(e)===!1?/<%\s*\}/.test(e)===!0?s("ejs"):/<%\s*end/.test(e)===!0?s("html_ruby"):/\{\{(#|\/|\{)/.test(e)===!0?s("handlebars"):/\{\{end\}\}/.test(e)===!0?s("html"):/\s?\{%/.test(e)===!0&&/\{(\{|#)(?!(\{|#|\=))/.test(e)===!0?s("twig"):/<\?/.test(e)===!0?s("php"):/<jsp:include\s/.test(e)===!0||/<c:((set)|(if))\s/.test(e)===!0?s("jsp"):/\{(#|\?|\^|@|<|\+|~)/.test(e)===!0&&/\{\//.test(e)===!0?s("dustjs"):s("html"):/<jsp:include\s/.test(e)===!0||/<c:((set)|(if))\s/.test(e)===!0?s("jsp"):/<%\s*\}/.test(e)===!0?s("ejs"):/<%\s*end/.test(e)===!0?s("html_ruby"):/\{\{(#|\/|\{)/.test(e)===!0?s("handlebars"):/\{\{end\}\}/.test(e)===!0?s("xml"):/\s?\{%/.test(e)===!0&&/\{\{(?!(\{|#|\=))/.test(e)===!0?s("twig"):/<\?(?!(xml))/.test(e)===!0?s("php"):/\{(#|\?|\^|@|<|\+|~)/.test(e)===!0&&/\{\//.test(e)===!0?s("dustjs"):/<jsp:include\s/.test(e)===!0||/<c:((set)|(if))\s/.test(e)===!0?s("jsp"):s("xml"):s("unknown")}},x=function(){var e="",n="",r=0,i=0,o=(Date.now()-t)/1e3,a=o.toFixed(3),s=function(e,t){var n="";return n=1!==e?e+t+"s ":e+t+" "},u=function(){r=parseInt(o/60,10),e=s(r," minute"),r=o-60*r,a=1===r?"1 second":r.toFixed(3)+" seconds"};return o>=60&&3600>o?u():o>=3600?(i=parseInt(o/3600,10),n=i.toString(),o-=3600*i,n=s(i," hour"),u()):a=s(a," second"),"<p><strong>Execution time:</strong> <em>"+n+e+a+"</em></p>"},b=function(){var e="",t=0,n=g.source.length,r=g.source.indexOf("/*prettydiff.com")+16,i=!1,o=[],a=-1,s=0,u=[],c="",l=g.source.indexOf("/*prettydiff.com"),p=g.diff.indexOf("/*prettydiff.com");if(!('"'===g.source.charAt(r-17)&&/var\s+prettydiff\s*\=\s*function/.test(g.source)===!1||0>l&&0>p||l>-1&&/^(\s*\{\s*"token"\s*:\s*\[)/.test(g.source)===!0&&/\],\s*"types"\s*:\s*\[/.test(g.source)===!0||0>l&&p>-1&&/^(\s*\{\s*"token"\s*:\s*\[)/.test(g.diff)===!0&&/\],\s*"types"\s*:\s*\[/.test(g.diff)===!0)){if(15===r&&"string"==typeof g.diff)r=g.diff.indexOf("/*prettydiff.com")+16,i=!0;else if(15===r)return;for(r=r;n>r;r+=1)if(i===!1){if("*"===g.source.charAt(r)&&"/"===g.source.charAt(r+1))break;u.push(g.source.charAt(r))}else{if("*"===g.diff.charAt(r)&&"/"===g.diff.charAt(r+1))break;u.push(g.diff.charAt(r))}for(e=u.join("").toLowerCase(),n=e.length,r=0;n>r;r+=1)"string"==typeof e.charAt(r-1)&&"\\"===e.charAt(r-1)||'"'!==e.charAt(r)&&"'"!==e.charAt(r)||(c=""===c?e.charAt(r):""),""===c&&","===e.charAt(r)&&(s=a+1,a=r,o.push(e.substring(s,a).replace(/^(\s*)/,"").replace(/(\s*)$/,"")));for(s=a+1,a=e.length,o.push(e.substring(s,a).replace(/^(\s*)/,"").replace(/(\s*)$/,"")),c="",n=o.length,u=[],r=0;n>r;r+=1)for(t=o[r].length,s=0;t>s;s+=1){if(-1===o[r].indexOf(":")){o[r]="";break}if(u=[],"string"==typeof o[r].charAt(s-1)&&"\\"===o[r].charAt(s-1)||'"'!==o[r].charAt(s)&&"'"!==o[r].charAt(s)||(c=""===c?o[r].charAt(s):""),""===c&&":"===o[r].charAt(s)){u.push(o[r].substring(0,s).replace(/(\s*)$/,"")),u.push(o[r].substring(s+1).replace(/^(\s*)/,"")),u[1].charAt(0)!==u[1].charAt(u[1].length-1)||"\\"===u[1].charAt(u[1].length-2)||'"'!==u[1].charAt(0)&&"'"!==u[1].charAt(0)||(u[1]=u[1].substring(1,u[1].length-1)),o[r]=u;break}}for(r=0;n>r;r+=1)"string"==typeof o[r][1]&&(o[r][0]=o[r][0].replace("api.",""),"braces"===o[r][0]||"indent"===o[r][0]?"knr"===o[r][1]?g.braces="knr":"allman"===o[r][1]&&(g.braces="allman"):"comments"===o[r][0]?"indent"===o[r][1]?g.comments="indent":"noindent"===o[r][1]&&(g.comments="noindent"):"diffview"===o[r][0]?"sidebyside"===o[r][1]?g.diffview="sidebyside":"inline"===o[r][1]&&(g.diffview="inline"):"lang"===o[r][0]||"langdefault"===o[r][0]?g[o[r][0]]=h(o[r][1]):"mode"===o[r][0]?"beautify"===o[r][1]?g.mode="beautify":"minify"===o[r][1]?g.mode="minify":"diff"===o[r][1]?g.mode="diff":"parse"===o[r][1]&&(g.mode="parse"):"quoteConvert"===o[r][0]?"single"===o[r][1]?g.quoteConvert="single":"double"===o[r][1]?g.quoteConvert="double":"none"===o[r][1]&&(g.quoteConvert="none"):"style"===o[r][0]?"indent"===o[r][1]?g.style="indent":"noindent"===o[r][1]&&(g.style="noindent"):"varword"===o[r][0]?"each"===o[r][1]?g.varword="each":"list"===o[r][1]?g.varword="list":"none"===o[r][1]&&(g.varword="none"):void 0!==g[o[r][0]]&&(g[o[r][0]]="true"===o[r][1]?!0:"false"===o[r][1]?!1:isNaN(o[r][1])===!1?Number(o[r][1]):o[r][1]))}};return b(),(e.preserve===!0||"true"===e.preserve)&&(g.preserve=!0),(e.alphasort===!0||"true"===e.alphasort||e.objsort===!0||"true"===e.objsort)&&(g.objsort=!0),"allman"===e.indent&&(g.braces="allman"),(e.vertical===!0||"true"===e.vertical)&&(g.vertical=!0),""===g.source?["Error: Source sample is missing.",""]:"Diff sample is missing."===g.diff&&"diff"===g.mode?["Error: Diff sample is missing.",""]:("auto"===g.lang?(v=_(g.source),g.lang=v[1],y="unknown"===v[2]?"<p>Code type set to <strong>auto</strong>, but language could not be determined. Language defaulted to <em>"+v[0]+"</em>.</p>":"<p>Code type set to <strong>auto</strong>. Presumed language is <em>"+v[2]+"</em>.</p>"):"dom"===g.api?(v=[g.lang,g.lang,g.lang],y="<p>Code type is set to <strong>"+g.lang+"</strong>.</p>"):(g.lang=h(g.lang),y="<p>Code type is set to <strong>"+g.lang+"</strong>.</p>"),"dustjs"===v[0]&&(g.dustjs=!0),"html"===g.lang?(g.html=!0,g.lang="markup"):("tss"===g.lang||"titanium"===g.lang)&&(g.titanium=!0,g.lang="javscript"),"css"===g.lang&&(("css"===e.objsort||"cssonly"===e.objsort)&&(g.objsort=!0),("css"===e.preserve||"cssonly"===e.preserve)&&(g.preserve=!0),("css"===e.vertical||"cssonly"===e.vertical)&&(g.vertical=!0)),"js"===g.lang&&(("js"===e.objsort||"jsonly"===e.objsort)&&(g.objsort=!0),("js"===e.preserve||"jsonly"===e.preserve)&&(g.preserve=!0),("js"===e.vertical||"jsonly"===e.vertical)&&(g.vertical=!0)),"minify"===g.mode?("css"===g.lang?p=o(g):"csv"===g.lang?p=s(g.source,g.csvchar):"markup"===g.lang?p=l(g):"text"===g.lang?(p=g.source,f=""):(g.wrap=-1,p=c(g)),function(){var e=function(){var e=0,t=0,n=g.source,i=n.length,o=0,a=p.length,s=i-a,u=0,c=100*(s/i),l=c.toFixed(2)+"%",f="",d=[];for(e=0;i>e;e+=1)"\n"===n.charAt(e)&&(t+=1);return o=i+t,u=o-a,c=100*(u/o),f=c.toFixed(2)+"%",0===r.indexOf("<p id='jserror'>")?d.push(r):""!==r&&d.push("<p><strong class='duplicate'>Duplicate id attribute values detected:</strong> "+r+"</p>"),d.push("<div class='doc'><table class='analysis' summary='Minification efficiency report'><caption>Minification efficiency report</caption><thead><tr><th colspan='2'>Output Size</th><th colspan='2'>Number of Lines From Input</th></tr></thead><tbody><tr><td colspan='2'>"),d.push(a),d.push("</td><td colspan='2'>"),d.push(t+1),d.push("</td></tr><tr><th>Operating System</th><th>Input Size</th><th>Size Difference</th><th>Percentage of Decrease</th></tr><tr><th>Unix/Linux</th><td>"),d.push(i),d.push("</td><td>"),d.push(s),d.push("</td><td>"),d.push(l),d.push("</td></tr><tr><th>Windows</th><td>"),d.push(o),d.push("</td><td>"),d.push(u),d.push("</td><td>"),d.push(f),d.push("</td></tr></tbody></table></div>"),d.join("")};return n===!0&&(v=["jsx","javascript","React JSX"],y="<p>Code type set to <strong>auto</strong>. Presumed language is <em>React JSX</em>.</p>"),[p,y+x()+e()]}()):"parse"===g.mode?("css"===g.lang?p=o(g):"csv"===g.lang?(p="CSV not supported in parse mode",f=""):"markup"===g.lang?(p=l(g),y+=r):"text"===g.lang?(p=g.source,f=""):p=c(g),f===!1&&(f=""),n===!0&&(y="<p>Code type is presumed to be <em>React JSX</em>.</p>"),void 0!==p.token&&(y=y+"<p>Total tokens: <strong>"+p.token.length+"</strong></p>"),[p,y+x()]):"beautify"===g.mode?("css"===g.lang?(p=o(g),f=r):"csv"===g.lang?(p=a(g.source,g.csvchar),f=""):"markup"===g.lang?("jsonly"===e.vertical&&(g.vertical="jsonly"),p=l(g),f=r,"	"!==g.inchar&&(p=p.replace(/\n[\t]*\u0020\/>/g,""))):"text"===g.lang?(p=g.source,f=""):("jsonly"===e.vertical&&(g.vertical="jsonly"),p=c(g),f=r),f===!1&&(f=""),n===!0&&(y="<p>Code type is presumed to be <em>React JSX</em>.</p>"),""===g.api&&"none"!==g.jsscope&&"javascript"===g.lang?(d.head="<?xml version='1.0' encoding='UTF-8' ?><!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.1//EN' 'http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd'><html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en'><head><title>Pretty Diff - The difference tool</title><meta name='robots' content='index, follow'/> <meta name='DC.title' content='Pretty Diff - The difference tool'/> <link rel='canonical' href='http://prettydiff.com/' type='application/xhtml+xml'/><meta http-equiv='Content-Type' content='application/xhtml+xml;charset=UTF-8'/><meta http-equiv='Content-Style-Type' content='text/css'/><style type='text/css'>",d.cssCore="body{font-family:'Arial';font-size:10px;overflow-y:scroll;}#samples #dcolorScheme{position:relative;z-index:1000}#apireturn textarea{font-size:1.2em;height:50em;width:100%}button{border-radius:.9em;display:block;font-weight:bold;width:100%}div .button{text-align:center}div button{display:inline-block;font-weight:bold;margin:1em 0;padding:1em 2em}button:hover{cursor:pointer}#introduction{clear:both;margin:0 0 0 5.6em;position:relative;top:-2.75em}#introduction ul{clear:both;height:3em;margin:0 0 0 -5.5em;overflow:hidden;width:100em}#introduction li{clear:none;display:block;float:left;font-size:1.4em;margin:0 4.95em -1em 0}#introduction li li{font-size:1em;margin-left:2em}#introduction .information,#webtool #introduction h2{left:-90em;position:absolute;top:0;width:10em}#introduction h2{float:none}#displayOps{float:right;font-size:1.5em;font-weight:bold;margin-right:1em;width:22.5em}#displayOps.default{position:static}#displayOps.maximized{margin-bottom:-2em;position:relative}#displayOps li{clear:none;display:block;float:left;list-style:none;margin:2em 0 0;text-align:right;width:9em}h1{float:left;font-size:2em;margin:0 .5em .5em 0}#hideOptions{margin-left:5em;padding:0}#title_text{border-style:solid;border-width:.05em;display:block;float:left;font-size:1em;margin-left:.55em;padding:.1em}h1 svg,h1 img{border-style:solid;border-width:.05em;float:left;height:2em;width:2em}h1 span{font-size:.5em}h2,h3{background:#fff;border-style:solid;border-width:.075em;display:inline-block;font-size:1.8em;font-weight:bold;margin:0 .5em .5em 0;padding:0 .2em}#doc h3{margin-top:.5em}h3{font-size:1.6em}h4{font-size:1.4em}fieldset{border-radius:.9em;clear:both;margin:3.5em 0 -2em;padding:0 0 0 1em}legend{border-style:solid;border-width:.1em;font-size:1.2em;font-weight:bold;margin-left:-.25em}.button{margin:1em 0;text-align:center}.button button{display:block;font-size:2em;height:1.5em;margin:0 auto;padding:0;width:50%}#diffreport{right:57.8em}#beaureport{right:38.8em}#minnreport{right:19.8em}#statreport{right:.8em}#statreport .body p,#statreport .body li,#statreport .body h3{font-size:1.2em}#statreport .body h3{margin-top:0}#statreport .body ul{margin-top:1em}#reports{height:4em}#reports h2{display:none}.box{border-style:solid;border-width:0;left:auto;margin:0;padding:0;position:absolute;z-index:10}.box button{border-radius:0;border-style:solid;border-width:.1em;display:block;float:right;font-family:'Lucida Console','Trebuchet MS','Arial';height:1.75em;padding:0;position:absolute;right:0;text-align:center;top:0;width:1.75em;z-index:7}.box button.resize{border-width:.05em;cursor:se-resize;font-size:1.667em;font-weight:normal;height:.8em;line-height:.5em;margin:-.85em 0 0;position:absolute;right:.05em;top:100%;width:.85em}.box button.minimize{margin:.35em 4em 0 0}.box button.maximize{margin:.35em 1.75em 0 0}.box button.save{margin:.35em 6.25em 0 0}.box .buttons{float:right;margin:0}.box h3.heading{cursor:pointer;float:left;font-size:1em;height:3em;margin:0 0 -3.2em;position:relative;width:17em;z-index:6}.box h3.heading span{display:block;font-size:1.8em;padding:.25em 0 0 .5em}.box .body{clear:both;height:20em;margin-top:-.1em;overflow:scroll;padding:4.25em 1em 1em;position:relative;right:0;top:0;width:75em;z-index:5}.options{border-radius:0 0 .9em .9em;clear:both;margin-bottom:1em;padding:1em 1em 3.5em;width:auto}label{display:inline;font-size:1.4em}ol li{font-size:1.4em;list-style-type:decimal}ol li li{font-size:1em}body#doc ol li{font-size:1.1em}ul{margin:-1.4em 0 2em;padding:0}ul li{list-style-type:none}li{clear:both;margin:1em 0 1em 3em}li h4{display:inline;float:left;margin:.4em 0;text-align:left;width:14em}p{clear:both;font-size:1.2em;margin:0 0 1em}#option_comment{height:2.5em;margin-bottom:-1.5em;width:100%}.difflabel{display:block;height:0}#beau-other-span,#diff-other-span{text-indent:-200em;width:0}.options p span{display:block;float:left;font-size:1.2em}#top{min-width:80em}#top em{font-weight:bold}#update{clear:left;float:right;font-weight:bold;padding:.5em;position:absolute;right:1em;top:11em}#announcement{height:2.5em;margin:0 -5em -4.75em;width:27.5em}#textreport{width:100%}#options{float:left;margin:0;width:19em}#options label{width:auto}#options p{clear:both;font-size:1em;margin:0;padding:0}#options p span{clear:both;float:none;height:2em;margin:0 0 0 2em}#csvchar{width:11.8em}#language,#csvchar,#colorScheme{margin:0 0 1em 2em}#codeInput{margin-left:22.5em}#Beautify.wide p,#Beautify.tall p.file,#Minify.wide p,#Minify.tall p.file{clear:none;float:none}#diffops p,#miniops p,#beauops p{clear:both;font-size:1em;padding-top:1em}#options p strong,#diffops p strong,#miniops p strong,#beauops p strong,#options .label,#diffops .label,#miniops .label,#beauops .label{display:block;float:left;font-size:1.2em;font-weight:bold;margin-bottom:1em;width:17.5em}input[type='radio']{margin:0 .25em}input[type='file']{box-shadow:none}select{border-style:inset;border-width:.1em;width:11.85em}.options input,.options label{border-style:none;display:block;float:left}.options span label{margin-left:.4em;white-space:nowrap;width:12em}.options p span label{font-size:1em}#webtool .options input[type=text]{margin-right:1em;width:11.6em}#webtool .options input[type=text],div input,textarea{border-style:inset;border-width:.1em}textarea{display:inline-block;height:10em;margin:0}strong label{font-size:1em;width:inherit}strong.new{background:#ff6;font-style:italic}#miniops span strong,#diffops span strong,#beauops span strong{display:inline;float:none;font-size:1em;width:auto}#Beautify .input label,#Beautify .output label,#Minify .input label,#Minify .output label{display:block;font-size:1.05em;font-weight:bold}#beautyinput,#minifyinput,#baseText,#newText,#beautyoutput,#minifyoutput{font-size:1em}.clear{clear:both;display:block}.wide,.tall,#diffBase,#diffNew{border-radius:0 0 .9em .9em;margin-bottom:1em}#diffBase,#diffNew{padding:1em}#diffBase p,#diffNew p{clear:none;float:none}#diffBase.wide textarea,#diffNew.wide textarea{height:10.1em}.wide,.tall{padding:1em 1.25em 0}#diff .addsource{cursor:pointer;margin-bottom:1em;padding:0}#diff .addsource input{display:block;float:left;margin:.5em .5em -1.5em}#diff .addsource label{cursor:pointer;display:inline-block;font-size:1.2em;padding:.5em .5em .5em 2em}.wide label{float:none;margin-right:0;width:100%}.wide #beautyinput,.wide #minifyinput,.wide #beautyoutput,.wide #minifyoutput{height:14.8em;margin:0;width:99.5%}.tall .input{clear:none;float:left}.tall .output{clear:none;float:right;margin-top:-2.4em}.tall .input,.tall .output{width:49%}.tall .output label{text-align:right}.tall .input textarea{height:31.7em}.tall .output textarea{height:34em}.tall textarea{margin:0 0 -.1em;width:100%}.tall #beautyinput,.tall #minifyinput{float:left}.tall #beautyoutput,.tall #minifyoutput{float:right}.wide{width:auto}#diffBase.difftall,#diffNew.difftall{margin-bottom:1.3em;padding:1em 1% .9em;width:47.5%}#diffBase.difftall{float:left}#diffNew.difftall{float:right}.file input,.labeltext input{display:inline-block;margin:0 .7em 0 0;width:16em}.labeltext,.file{font-size:.9em;font-weight:bold;margin-bottom:1em}.difftall textarea{height:30.6em;margin-bottom:.5em}#diffBase textarea,#diffNew textarea{width:99.5%}.input,.output{margin:0}#diffBase.wide,#diffNew.wide{padding:.8em 1em}#diffBase.wide{margin-bottom:1.2em}#diffoutput{width:100%}#diffoutput p em,#diffoutput li em,.analysis .bad,.analysis .good{font-weight:bold}#diffoutput ul{font-size:1.2em;margin-top:1em}#diffoutput ul li{display:list-item;list-style-type:disc}.analysis th{text-align:left}.analysis td{text-align:right}#doc ul{margin-top:1em}#doc ul li{font-size:1.2em}body#doc ul li{font-size:1.1em}#doc ol li span{display:block;margin-left:2em}.diff,.beautify{border-style:solid;border-width:.2em;display:inline-block;font-family:'Courier New',Courier,'Lucida Console',monospace;margin:0 1em 1em 0;position:relative}.beautify .data em{display:inline-block;font-style:normal;font-weight:bold;padding-top:.5em}.diff .skip{border-style:none none solid;border-width:0 0 .1em}.diff li,.diff p,.diff h3,.beautify li{font-size:1.1em}.diff .diff-left,.diff .diff-right{display:table-cell}.diff .diff-left{border-style:none none none solid;border-width:0 0 0 .1em}.diff .diff-right{border-style:none none none solid;border-width:0 0 0 .1em;margin-left:-.1em;min-width:16.5em;right:0;top:0}.diff-right .data ol{min-width:16.5em}.diff-right .data{border-style:none solid none none;border-width:0 .1em 0 0;width:100%}.diff-right .data li{min-width:16.5em}.diff ol,.beautify ol{display:table-cell;margin:0;padding:0}.diff li,.beautify li{border-style:none none solid;border-width:0 0 .1em;display:block;line-height:1.2;list-style-type:none;margin:0;padding-bottom:0;padding-right:.5em}.diff li{padding-top:.5em}.beautify .count li{padding-top:.5em}@media screen and (-webkit-min-device-pixel-ratio:0) {.beautify .count li{padding-top:.546em}}#doc .beautify .count li.fold{color:#900;cursor:pointer;font-weight:bold;padding-left:.5em}.diff .count,.beautify .count{border-style:solid;border-width:0 .1em 0 0;font-weight:normal;padding:0;text-align:right}.diff .count li,.beautify .count li{padding-left:2em}.diff .data,.beautify .data{text-align:left;white-space:pre}.diff .data li,.beautify .data li{letter-spacing:.1em;padding-left:.5em;white-space:pre}#webtool .diff h3{border-style:none solid solid;border-width:0 .1em .2em;box-shadow:none;display:block;font-family:Verdana;margin:0 0 0 -.1em;padding:.2em 2em;text-align:left}.diff li em{font-style:normal;margin:0 -.09em;padding:.05em 0}.diff p.author{border-style:solid;border-width:.2em .1em .1em;margin:0;overflow:hidden;padding:.4em;text-align:right}#dcolorScheme{float:right;margin:-2em 0 0 0}#dcolorScheme label{display:inline-block;font-size:1em;margin-right:1em}body#doc{font-size:.8em;max-width:80em}#doc th{font-weight:bold}#doc td span{display:block}#doc table,.box .body table{border-collapse:collapse;border-style:solid;border-width:.2em;clear:both}#doc table{font-size:1.2em}body#doc table{font-size:1em}#doc td,#doc th{border-left-style:solid;border-left-width:.1em;border-top-style:solid;border-top-width:.1em;padding:.5em}#doc em,.box .body em{font-style:normal;font-weight:bold}#doc div{margin-bottom:2em}#doc div div{clear:both;margin-bottom:1em}#doc h2{font-size:1.6em;margin:.5em .5em .5em 0}#doc ol{clear:both}#doc_contents li{font-size:1.75em;margin:1em 0 0}#doc_contents ol ol li{font-size:.75em;list-style:lower-alpha;margin:.5em 0 0}#doc_contents ol{padding-bottom:1em}#doc #doc_contents ol ol{background-color:inherit;border-style:none;margin:.25em .3em 0 0;padding-bottom:0}#doc_contents a{text-decoration:none}#diffoutput #thirdparties li{display:inline-block;list-style-type:none}#thirdparties a{border-style:none;display:block;height:4em;text-decoration:none}button,fieldset,.box h3.heading,.box .body,.options,.diff .replace em,.diff .delete em,.diff .insert em,.wide,.tall,#diffBase,#diffNew,#doc div,#doc div div,#doc ol,#option_comment,#update,#thirdparties img,#diffoutput #thirdparties{border-style:solid;border-width:.1em}#apitest p{clear:both;padding-top:.75em}#apitest label,#apitest select,#apitest input,#apitest textarea{float:left}#apitest label{width:20em}#apitest select,#apitest input,#apitest textarea{width:30em}#pdsamples{list-style-position:inside;margin:-12em 0 0 0;padding:0;position:relative;z-index:10}#pdsamples li{border-radius:1em;border-style:solid;border-width:.1em;margin:0 0 3em;padding:1em}#pdsamples li div{border-radius:1em;border-style:solid;border-width:.1em;margin:0;padding:1em}#pdsamples li p{display:inline-block;font-size:1em;margin:0}#pdsamples li p a{display:block;margin:0 0 1em 2em}#pdsamples li ul{margin:0 0 0 2em}#samples #pdsamples li li{background:none transparent;border-style:none;display:list-item;list-style:disc outside;margin:0;padding:.5em}#modalSave span{background:#000;display:block;left:0;opacity:.5;position:absolute;top:0;z-index:9000}#modalSave p{background:#eee;color:#333;font-size:3em;padding:1em;position:absolute;text-align:center;top:10em;width:25em;z-index:9001}#modalSave p em{display:block;font-size:.75em;margin-top:1em}#modalSave p strong{color:#c00;font-weight:bold}@media print{p,.options,#Beautify,#Minify,#diff,ul{display:none}div{width:100%}html td{font-size:.8em;white-space:normal}}",d.cssColor="html .white,body.white{color:#333}body.white button{background:#eee;border-color:#222;box-shadow:0 .1em .2em rgba(64,64,64,0.75);color:#666;text-shadow:.05em .05em .1em #ccc}.white button:hover,.white button:active{background:#999;color:#eee;text-shadow:.1em .1em .1em #333}.white a{color:#009}.white #title_text{border-color:#fff;color:#333}.white #introduction h2{border-color:#999;color:#333}.white h1 svg{background:#eee;border-color:#999;box-shadow:0 .1em .2em rgba(150,150,150,0.5)}.white h2,.white h3{background:#eee;border-color:#eee;box-shadow:none;padding-left:0;text-shadow:none}.white fieldset{background:#ddd;border-color:#999}.white legend{background:#fff;border-color:#999;color:#333;text-shadow:none}.white .box{background:#666;border-color:#999;box-shadow:0 .4em .8em rgba(64,64,64,0.75)}.white .box button{box-shadow:0 .1em .2em rgba(0,0,0,0.75);text-shadow:.1em .1em .1em rgba(0,0,0,.5)}.white .box button.resize{background:#bbf;border-color:#446;color:#446}.white .box button.resize:hover{background:#ddf;border-color:#228;color:#228}.white .box button.save{background:#d99;border-color:#300;color:#300}.white .box button.save:hover{background:#fcc;border-color:#822;color:#822}.white .box button.minimize{background:#bbf;border-color:#006;color:#006}.white .box button.minimize:hover{background:#eef;border-color:#228;color:#228}.white .box button.maximize{background:#9c9;border-color:#030;color:#030}.white .box button.maximize:hover{background:#cfc;border-color:#060;color:#060}.white .box h3.heading{background:#ddd;border-color:#888;box-shadow:.2em .2em .4em #666}.white .box h3.heading:hover{background:#333;color:#eee}.white .box .body{background:#eee;border-color:#888;box-shadow:0 0 .4em rgba(64,64,64,0.75)}.white .options{background:#eee;border-color:#999;box-shadow:0 .2em .4em rgba(64,64,64,0.5);text-shadow:.05em .05em .1em #ccc}.white .options h2,.white #Beautify h2,.white #Minify h2,.white #diffBase h2,.white #diffNew h2{background:#eee;border-color:#eee;box-shadow:none;text-shadow:none}.white #option_comment{background:#ddd;border-color:#999}.white #top em{color:#00f}.white #update{background:#eee;border-color:#999;box-shadow:0 .1em .2em rgba(64,64,64,0.5)}.white .wide,.white .tall,.white #diffBase,.white #diffNew{background:#eee;border-color:#999;box-shadow:0 .2em .4em rgba(64,64,64,0.5)}.white .file input,.white .labeltext input{border-color:#fff}#webtool.white input.unchecked{background:#ccc;color:#666}.white .options input[type=text],.white .options select{border-color:#999}.white #beautyoutput,.white #minifyoutput{background:#ddd}.white #diffoutput p em,.white #diffoutput li em{color:#c00}.white .analysis .bad{background-color:#ebb;color:#400}.white .analysis .good{background-color:#cec;color:#040}.white #doc .analysis thead th,.white #doc .analysis th[colspan]{background:#eef}.white div input{border-color:#999}.white textarea{border-color:#999}.white textarea:hover{background:#eef8ff}.white .diff,.white .beautify,.white .diff ol,.white .beautify ol,.white .diff .diff-left,.white .diff .diff-right,.white h3,.white p.author{border-color:#999}.white .diff .count li,.white .beautify .count li{background:#eed;border-color:#bbc;color:#886}.white .diff h3{background:#ddd;border-bottom-color:#bbc}.white .diff .empty{background-color:#ddd;border-color:#ccc}.white .diff .replace{background-color:#fea;border-color:#dd8}.white .diff .data .replace em{background-color:#ffd;border-color:#963;color:#630}.white .diff .delete{background-color:#fbb;border-color:#eaa}.white .diff .data .delete em{background-color:#fdd;border-color:#700;color:#600}.white .diff .equal,.white .beautify .data li{background-color:#fff;border-color:#eee}.white .beautify .data em.s1{color:#f66}.white .beautify .data em.s2{color:#12f}.white .beautify .data em.s3{color:#090}.white .beautify .data em.s4{color:#d6d}.white .beautify .data em.s5{color:#7cc}.white .beautify .data em.s6{color:#c85}.white .beautify .data em.s7{color:#737}.white .beautify .data em.s8{color:#6d0}.white .beautify .data em.s9{color:#dd0s}.white .beautify .data em.s10{color:#893}.white .beautify .data em.s11{color:#b97}.white .beautify .data em.s12{color:#bbb}.white .beautify .data em.s13{color:#cc3}.white .beautify .data em.s14{color:#333}.white .beautify .data em.s15{color:#9d9}.white .beautify .data em.s16{color:#880}.white .beautify .data .l0{background:#fff}.white .beautify .data .l1{background:#fed}.white .beautify .data .l2{background:#def}.white .beautify .data .l3{background:#efe}.white .beautify .data .l4{background:#fef}.white .beautify .data .l5{background:#eef}.white .beautify .data .l6{background:#fff8cc}.white .beautify .data .l7{background:#ede}.white .beautify .data .l8{background:#efc}.white .beautify .data .l9{background:#ffd}.white .beautify .data .l10{background:#edc}.white .beautify .data .l11{background:#fdb}.white .beautify .data .l12{background:#f8f8f8}.white .beautify .data .l13{background:#ffb}.white .beautify .data .l14{background:#eec}.white .beautify .data .l15{background:#cfc}.white .beautify .data .l16{background:#eea}.white .beautify .data .c0{background:#ddd}.white .beautify .data li{color:#777}.white .diff .skip{background-color:#efefef;border-color:#ddd}.white .diff .insert{background-color:#bfb;border-color:#aea}.white .diff .data .insert em{background-color:#efc;border-color:#070;color:#050}.white .diff p.author{background:#efefef;border-top-color:#bbc}.white #doc table,.white .box .body table{background:#fff;border-color:#999}.white #doc strong,.white .box .body strong{color:#c00}.white .box .body em,.white .box .body #doc em{color:#090}.white #thirdparties img,.white #diffoutput #thirdparties{border-color:#999}.white #thirdparties img{box-shadow:.2em .2em .4em #999}.white #diffoutput #thirdparties{background:#eee}.white #doc div,#doc.white div{background:#ddd;border-color:#999}.white #doc ol,#doc.white ol{background:#eee;border-color:#999}.white #doc div div,#doc.white div div{background:#eee;border-color:#999}.white #doc table,#doc.white table{background:#fff;border-color:#999}.white #doc th,#doc.white th{background:#ddd;border-left-color:#999;border-top-color:#999}.white #doc tr:hover,#doc.white tr:hover{background:#ddd}#doc.white em{color:#060}.white #doc div:hover,#doc.white div:hover{background:#ccc}.white #doc div div:hover,#doc.white div div:hover,#doc.white div ol:hover{background:#fff}.white #pdsamples li{background:#eee;border-color:#999}.white #pdsamples li div{background:#ddd;border-color:#999}.white #pdsamples li div a{color:#47a}.white #pdsamples li p a{color:#009}",d.cssExtra="body{background:#eee}#doc p em{color:#090}",d.body="</style></head><body id='webtool' class='",d.bodyColor="white",d.title="'><h1><a href='http://prettydiff.com/'>Pretty Diff - The difference tool</a></h1><div class='doc'>",d.scriptOpen="<script type='application/javascript'><![CDATA[",d.scriptBody="var pd={};pd.beaufold=function dom__beaufold(){'use strict';var self=this,title=self.getAttribute('title').split('line '),min=Number(title[1].substr(0,title[1].indexOf(' '))),max=Number(title[2]),a=0,b='',list=[self.parentNode.getElementsByTagName('li'),self.parentNode.nextSibling.getElementsByTagName('li')];if(self.innerHTML.charAt(0)==='-'){for(a=min;a<max;a+=1){list[0][a].style.display='none';list[1][a].style.display='none';}self.innerHTML='+'+self.innerHTML.substr(1);}else{for(a=min;a<max;a+=1){list[0][a].style.display='block';list[1][a].style.display='block';if(list[0][a].getAttribute('class')==='fold'&&list[0][a].innerHTML.charAt(0)==='+'){b=list[0][a].getAttribute('title');b=b.substring(b.indexOf('to line ')+1);a=Number(b)-1;}}self.innerHTML='-'+self.innerHTML.substr(1);}};(function(){'use strict';var lists=document.getElementsByTagName('ol'),listslen=lists.length,list=[],listlen=0,a=0,b=0;for(a=0;a<listslen;a+=1){if(lists[a].getAttribute('class')==='count'&&lists[a].parentNode.getAttribute('class')==='beautify'){list=lists[a].getElementsByTagName('li');listlen=list.length;for(b=0;b<listlen;b+=1){if(list[b].getAttribute('class')==='fold'){list[b].onmousedown=pd.beaufold;}}}}}());",d.scriptEnd="]]></script>",[d.head+d.cssCore+d.cssColor+d.cssExtra+d.body+d.bodyColor+d.title+_+x()+"</div>"+f+d.scriptOpen+d.scriptBody+d.scriptEnd+"</body></html>",""]):[p,y+x()+f]):"diff"===g.mode?(r="diff",g.vertical=!1,g.jsscope=!1,g.preserve=!1,g.diffcomments===!1&&(g.comments="nocomment"),""===g.source||""===g.diff?["",""]:("css"===g.lang?(p=o(g),g.source=g.diff,f=o(g)):"csv"===g.lang?(p=a(g.source,g.csvchar),f=a(g.diff,g.csvchar)):"markup"===g.lang?(p=l(g).replace(/\n[\t]*\ \/>/g,""),g.source=g.diff,f=l(g).replace(/\n[\t]*\ \/>/g,"")):"text"===g.lang?(p=g.source,f=g.diff):(p=c(g),g.source=g.diff,f=c(g)),g.quote===!0&&(p=p.replace(/'/g,'"'),f=f.replace(/'/g,'"')),g.semicolon===!0&&(p=p.replace(/;\n/g,"\n"),f=f.replace(/;\n/g,"\n")),(""===g.sourcelabel||i.test(g.sourcelabel))&&(g.sourcelabel="Base Text"),(""===g.difflabel||i.test(g.difflabel))&&(g.difflabel="New Text"),function(){var e=[],t="s",r="s",i="";
return g.diffcli===!0?u({baseTextLines:p,baseTextName:g.sourcelabel,contextSize:g.context,diffcli:g.diffcli,inline:g.diffview,newTextLines:f,newTextName:g.difflabel,tchar:g.inchar,tsize:g.insize}):("Error: This does not appear to be JavaScript."===p||"Error: This does not appear to be JavaScript."===f?e[1]=["<p><strong>Error:</strong> Please try using the option labeled <em>Plain Text (diff only)</em>. <span style='display:block'>The input does not appear to be markup, CSS, or JavaScript.</span></p>",0,0]:("text"!==g.lang&&(i=g.inchar),e[1]=u({baseTextLines:p,baseTextName:g.sourcelabel,contextSize:g.context,inline:g.diffview,newTextLines:f,newTextName:g.difflabel,tchar:i,tsize:g.insize}),1===e[1][2]&&(r="",0===e[1][1]&&(t=""))),e[0]="<p><strong>Number of differences:</strong> <em>"+(e[1][1]+e[1][2])+"</em> difference"+t+" from <em>"+e[1][2]+"</em> line"+r+" of code.</p>",n===!0&&(y="<p>Code type is presumed to be <em>React JSX</em>.</p>"),""===g.api?(d.head="<?xml version='1.0' encoding='UTF-8' ?><!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.1//EN' 'http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd'><html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en'><head><title>Pretty Diff - The difference tool</title><meta name='robots' content='index, follow'/> <meta name='DC.title' content='Pretty Diff - The difference tool'/> <link rel='canonical' href='http://prettydiff.com/' type='application/xhtml+xml'/><meta http-equiv='Content-Type' content='application/xhtml+xml;charset=UTF-8'/><meta http-equiv='Content-Style-Type' content='text/css'/><style type='text/css'>",d.cssCore="body{font-family:'Arial';font-size:10px;overflow-y:scroll;}#samples #dcolorScheme{position:relative;z-index:1000}#apireturn textarea{font-size:1.2em;height:50em;width:100%}button{border-radius:.9em;display:block;font-weight:bold;width:100%}div .button{text-align:center}div button{display:inline-block;font-weight:bold;margin:1em 0;padding:1em 2em}button:hover{cursor:pointer}#introduction{clear:both;margin:0 0 0 5.6em;position:relative;top:-2.75em}#introduction ul{clear:both;height:3em;margin:0 0 0 -5.5em;overflow:hidden;width:100em}#introduction li{clear:none;display:block;float:left;font-size:1.4em;margin:0 4.95em -1em 0}#introduction li li{font-size:1em;margin-left:2em}#introduction .information,#webtool #introduction h2{left:-90em;position:absolute;top:0;width:10em}#introduction h2{float:none}#displayOps{float:right;font-size:1.5em;font-weight:bold;margin-right:1em;width:22.5em}#displayOps.default{position:static}#displayOps.maximized{margin-bottom:-2em;position:relative}#displayOps li{clear:none;display:block;float:left;list-style:none;margin:2em 0 0;text-align:right;width:9em}h1{float:left;font-size:2em;margin:0 .5em .5em 0}#hideOptions{margin-left:5em;padding:0}#title_text{border-style:solid;border-width:.05em;display:block;float:left;font-size:1em;margin-left:.55em;padding:.1em}h1 svg,h1 img{border-style:solid;border-width:.05em;float:left;height:2em;width:2em}h1 span{font-size:.5em}h2,h3{background:#fff;border-style:solid;border-width:.075em;display:inline-block;font-size:1.8em;font-weight:bold;margin:0 .5em .5em 0;padding:0 .2em}#doc h3{margin-top:.5em}h3{font-size:1.6em}h4{font-size:1.4em}fieldset{border-radius:.9em;clear:both;margin:3.5em 0 -2em;padding:0 0 0 1em}legend{border-style:solid;border-width:.1em;font-size:1.2em;font-weight:bold;margin-left:-.25em}.button{margin:1em 0;text-align:center}.button button{display:block;font-size:2em;height:1.5em;margin:0 auto;padding:0;width:50%}#diffreport{right:57.8em}#beaureport{right:38.8em}#minnreport{right:19.8em}#statreport{right:.8em}#statreport .body p,#statreport .body li,#statreport .body h3{font-size:1.2em}#statreport .body h3{margin-top:0}#statreport .body ul{margin-top:1em}#reports{height:4em}#reports h2{display:none}.box{border-style:solid;border-width:0;left:auto;margin:0;padding:0;position:absolute;z-index:10}.box button{border-radius:0;border-style:solid;border-width:.1em;display:block;float:right;font-family:'Lucida Console','Trebuchet MS','Arial';height:1.75em;padding:0;position:absolute;right:0;text-align:center;top:0;width:1.75em;z-index:7}.box button.resize{border-width:.05em;cursor:se-resize;font-size:1.667em;font-weight:normal;height:.8em;line-height:.5em;margin:-.85em 0 0;position:absolute;right:.05em;top:100%;width:.85em}.box button.minimize{margin:.35em 4em 0 0}.box button.maximize{margin:.35em 1.75em 0 0}.box button.save{margin:.35em 6.25em 0 0}.box .buttons{float:right;margin:0}.box h3.heading{cursor:pointer;float:left;font-size:1em;height:3em;margin:0 0 -3.2em;position:relative;width:17em;z-index:6}.box h3.heading span{display:block;font-size:1.8em;padding:.25em 0 0 .5em}.box .body{clear:both;height:20em;margin-top:-.1em;overflow:scroll;padding:4.25em 1em 1em;position:relative;right:0;top:0;width:75em;z-index:5}.options{border-radius:0 0 .9em .9em;clear:both;margin-bottom:1em;padding:1em 1em 3.5em;width:auto}label{display:inline;font-size:1.4em}ol li{font-size:1.4em;list-style-type:decimal}ol li li{font-size:1em}body#doc ol li{font-size:1.1em}ul{margin:-1.4em 0 2em;padding:0}ul li{list-style-type:none}li{clear:both;margin:1em 0 1em 3em}li h4{display:inline;float:left;margin:.4em 0;text-align:left;width:14em}p{clear:both;font-size:1.2em;margin:0 0 1em}#option_comment{height:2.5em;margin-bottom:-1.5em;width:100%}.difflabel{display:block;height:0}#beau-other-span,#diff-other-span{text-indent:-200em;width:0}.options p span{display:block;float:left;font-size:1.2em}#top{min-width:80em}#top em{font-weight:bold}#update{clear:left;float:right;font-weight:bold;padding:.5em;position:absolute;right:1em;top:11em}#announcement{height:2.5em;margin:0 -5em -4.75em;width:27.5em}#textreport{width:100%}#options{float:left;margin:0;width:19em}#options label{width:auto}#options p{clear:both;font-size:1em;margin:0;padding:0}#options p span{clear:both;float:none;height:2em;margin:0 0 0 2em}#csvchar{width:11.8em}#language,#csvchar,#colorScheme{margin:0 0 1em 2em}#codeInput{margin-left:22.5em}#Beautify.wide p,#Beautify.tall p.file,#Minify.wide p,#Minify.tall p.file{clear:none;float:none}#diffops p,#miniops p,#beauops p{clear:both;font-size:1em;padding-top:1em}#options p strong,#diffops p strong,#miniops p strong,#beauops p strong,#options .label,#diffops .label,#miniops .label,#beauops .label{display:block;float:left;font-size:1.2em;font-weight:bold;margin-bottom:1em;width:17.5em}input[type='radio']{margin:0 .25em}input[type='file']{box-shadow:none}select{border-style:inset;border-width:.1em;width:11.85em}.options input,.options label{border-style:none;display:block;float:left}.options span label{margin-left:.4em;white-space:nowrap;width:12em}.options p span label{font-size:1em}#webtool .options input[type=text]{margin-right:1em;width:11.6em}#webtool .options input[type=text],div input,textarea{border-style:inset;border-width:.1em}textarea{display:inline-block;height:10em;margin:0}strong label{font-size:1em;width:inherit}strong.new{background:#ff6;font-style:italic}#miniops span strong,#diffops span strong,#beauops span strong{display:inline;float:none;font-size:1em;width:auto}#Beautify .input label,#Beautify .output label,#Minify .input label,#Minify .output label{display:block;font-size:1.05em;font-weight:bold}#beautyinput,#minifyinput,#baseText,#newText,#beautyoutput,#minifyoutput{font-size:1em}.clear{clear:both;display:block}.wide,.tall,#diffBase,#diffNew{border-radius:0 0 .9em .9em;margin-bottom:1em}#diffBase,#diffNew{padding:1em}#diffBase p,#diffNew p{clear:none;float:none}#diffBase.wide textarea,#diffNew.wide textarea{height:10.1em}.wide,.tall{padding:1em 1.25em 0}#diff .addsource{cursor:pointer;margin-bottom:1em;padding:0}#diff .addsource input{display:block;float:left;margin:.5em .5em -1.5em}#diff .addsource label{cursor:pointer;display:inline-block;font-size:1.2em;padding:.5em .5em .5em 2em}.wide label{float:none;margin-right:0;width:100%}.wide #beautyinput,.wide #minifyinput,.wide #beautyoutput,.wide #minifyoutput{height:14.8em;margin:0;width:99.5%}.tall .input{clear:none;float:left}.tall .output{clear:none;float:right;margin-top:-2.4em}.tall .input,.tall .output{width:49%}.tall .output label{text-align:right}.tall .input textarea{height:31.7em}.tall .output textarea{height:34em}.tall textarea{margin:0 0 -.1em;width:100%}.tall #beautyinput,.tall #minifyinput{float:left}.tall #beautyoutput,.tall #minifyoutput{float:right}.wide{width:auto}#diffBase.difftall,#diffNew.difftall{margin-bottom:1.3em;padding:1em 1% .9em;width:47.5%}#diffBase.difftall{float:left}#diffNew.difftall{float:right}.file input,.labeltext input{display:inline-block;margin:0 .7em 0 0;width:16em}.labeltext,.file{font-size:.9em;font-weight:bold;margin-bottom:1em}.difftall textarea{height:30.6em;margin-bottom:.5em}#diffBase textarea,#diffNew textarea{width:99.5%}.input,.output{margin:0}#diffBase.wide,#diffNew.wide{padding:.8em 1em}#diffBase.wide{margin-bottom:1.2em}#diffoutput{width:100%}#diffoutput p em,#diffoutput li em,.analysis .bad,.analysis .good{font-weight:bold}#diffoutput ul{font-size:1.2em;margin-top:1em}#diffoutput ul li{display:list-item;list-style-type:disc}.analysis th{text-align:left}.analysis td{text-align:right}#doc ul{margin-top:1em}#doc ul li{font-size:1.2em}body#doc ul li{font-size:1.1em}#doc ol li span{display:block;margin-left:2em}.diff,.beautify{border-style:solid;border-width:.2em;display:inline-block;font-family:'Courier New',Courier,'Lucida Console',monospace;margin:0 1em 1em 0;position:relative}.beautify .data em{display:inline-block;font-style:normal;font-weight:bold;padding-top:.5em}.diff .skip{border-style:none none solid;border-width:0 0 .1em}.diff li,.diff p,.diff h3,.beautify li{font-size:1.1em}.diff .diff-left,.diff .diff-right{display:table-cell}.diff .diff-left{border-style:none none none solid;border-width:0 0 0 .1em}.diff .diff-right{border-style:none none none solid;border-width:0 0 0 .1em;margin-left:-.1em;min-width:16.5em;right:0;top:0}.diff-right .data ol{min-width:16.5em}.diff-right .data{border-style:none solid none none;border-width:0 .1em 0 0;width:100%}.diff-right .data li{min-width:16.5em}.diff ol,.beautify ol{display:table-cell;margin:0;padding:0}.diff li,.beautify li{border-style:none none solid;border-width:0 0 .1em;display:block;line-height:1.2;list-style-type:none;margin:0;padding-bottom:0;padding-right:.5em}.diff li{padding-top:.5em}.beautify .count li{padding-top:.5em}@media screen and (-webkit-min-device-pixel-ratio:0) {.beautify .count li{padding-top:.546em}}#doc .beautify .count li.fold{color:#900;cursor:pointer;font-weight:bold;padding-left:.5em}.diff .count,.beautify .count{border-style:solid;border-width:0 .1em 0 0;font-weight:normal;padding:0;text-align:right}.diff .count li,.beautify .count li{padding-left:2em}.diff .data,.beautify .data{text-align:left;white-space:pre}.diff .data li,.beautify .data li{letter-spacing:.1em;padding-left:.5em;white-space:pre}#webtool .diff h3{border-style:none solid solid;border-width:0 .1em .2em;box-shadow:none;display:block;font-family:Verdana;margin:0 0 0 -.1em;padding:.2em 2em;text-align:left}.diff li em{font-style:normal;margin:0 -.09em;padding:.05em 0}.diff p.author{border-style:solid;border-width:.2em .1em .1em;margin:0;overflow:hidden;padding:.4em;text-align:right}#dcolorScheme{float:right;margin:-2em 0 0 0}#dcolorScheme label{display:inline-block;font-size:1em;margin-right:1em}body#doc{font-size:.8em;max-width:80em}#doc th{font-weight:bold}#doc td span{display:block}#doc table,.box .body table{border-collapse:collapse;border-style:solid;border-width:.2em;clear:both}#doc table{font-size:1.2em}body#doc table{font-size:1em}#doc td,#doc th{border-left-style:solid;border-left-width:.1em;border-top-style:solid;border-top-width:.1em;padding:.5em}#doc em,.box .body em{font-style:normal;font-weight:bold}#doc div{margin-bottom:2em}#doc div div{clear:both;margin-bottom:1em}#doc h2{font-size:1.6em;margin:.5em .5em .5em 0}#doc ol{clear:both}#doc_contents li{font-size:1.75em;margin:1em 0 0}#doc_contents ol ol li{font-size:.75em;list-style:lower-alpha;margin:.5em 0 0}#doc_contents ol{padding-bottom:1em}#doc #doc_contents ol ol{background-color:inherit;border-style:none;margin:.25em .3em 0 0;padding-bottom:0}#doc_contents a{text-decoration:none}#diffoutput #thirdparties li{display:inline-block;list-style-type:none}#thirdparties a{border-style:none;display:block;height:4em;text-decoration:none}button,fieldset,.box h3.heading,.box .body,.options,.diff .replace em,.diff .delete em,.diff .insert em,.wide,.tall,#diffBase,#diffNew,#doc div,#doc div div,#doc ol,#option_comment,#update,#thirdparties img,#diffoutput #thirdparties{border-style:solid;border-width:.1em}#apitest p{clear:both;padding-top:.75em}#apitest label,#apitest select,#apitest input,#apitest textarea{float:left}#apitest label{width:20em}#apitest select,#apitest input,#apitest textarea{width:30em}#pdsamples{list-style-position:inside;margin:-12em 0 0 0;padding:0;position:relative;z-index:10}#pdsamples li{border-radius:1em;border-style:solid;border-width:.1em;margin:0 0 3em;padding:1em}#pdsamples li div{border-radius:1em;border-style:solid;border-width:.1em;margin:0;padding:1em}#pdsamples li p{display:inline-block;font-size:1em;margin:0}#pdsamples li p a{display:block;margin:0 0 1em 2em}#pdsamples li ul{margin:0 0 0 2em}#samples #pdsamples li li{background:none transparent;border-style:none;display:list-item;list-style:disc outside;margin:0;padding:.5em}#modalSave span{background:#000;display:block;left:0;opacity:.5;position:absolute;top:0;z-index:9000}#modalSave p{background:#eee;color:#333;font-size:3em;padding:1em;position:absolute;text-align:center;top:10em;width:25em;z-index:9001}#modalSave p em{display:block;font-size:.75em;margin-top:1em}#modalSave p strong{color:#c00;font-weight:bold}@media print{p,.options,#Beautify,#Minify,#diff,ul{display:none}div{width:100%}html td{font-size:.8em;white-space:normal}}",d.cssColor="html .white,body.white{color:#333}body.white button{background:#eee;border-color:#222;box-shadow:0 .1em .2em rgba(64,64,64,0.75);color:#666;text-shadow:.05em .05em .1em #ccc}.white button:hover,.white button:active{background:#999;color:#eee;text-shadow:.1em .1em .1em #333}.white a{color:#009}.white #title_text{border-color:#fff;color:#333}.white #introduction h2{border-color:#999;color:#333}.white h1 svg{background:#eee;border-color:#999;box-shadow:0 .1em .2em rgba(150,150,150,0.5)}.white h2,.white h3{background:#eee;border-color:#eee;box-shadow:none;padding-left:0;text-shadow:none}.white fieldset{background:#ddd;border-color:#999}.white legend{background:#fff;border-color:#999;color:#333;text-shadow:none}.white .box{background:#666;border-color:#999;box-shadow:0 .4em .8em rgba(64,64,64,0.75)}.white .box button{box-shadow:0 .1em .2em rgba(0,0,0,0.75);text-shadow:.1em .1em .1em rgba(0,0,0,.5)}.white .box button.resize{background:#bbf;border-color:#446;color:#446}.white .box button.resize:hover{background:#ddf;border-color:#228;color:#228}.white .box button.save{background:#d99;border-color:#300;color:#300}.white .box button.save:hover{background:#fcc;border-color:#822;color:#822}.white .box button.minimize{background:#bbf;border-color:#006;color:#006}.white .box button.minimize:hover{background:#eef;border-color:#228;color:#228}.white .box button.maximize{background:#9c9;border-color:#030;color:#030}.white .box button.maximize:hover{background:#cfc;border-color:#060;color:#060}.white .box h3.heading{background:#ddd;border-color:#888;box-shadow:.2em .2em .4em #666}.white .box h3.heading:hover{background:#333;color:#eee}.white .box .body{background:#eee;border-color:#888;box-shadow:0 0 .4em rgba(64,64,64,0.75)}.white .options{background:#eee;border-color:#999;box-shadow:0 .2em .4em rgba(64,64,64,0.5);text-shadow:.05em .05em .1em #ccc}.white .options h2,.white #Beautify h2,.white #Minify h2,.white #diffBase h2,.white #diffNew h2{background:#eee;border-color:#eee;box-shadow:none;text-shadow:none}.white #option_comment{background:#ddd;border-color:#999}.white #top em{color:#00f}.white #update{background:#eee;border-color:#999;box-shadow:0 .1em .2em rgba(64,64,64,0.5)}.white .wide,.white .tall,.white #diffBase,.white #diffNew{background:#eee;border-color:#999;box-shadow:0 .2em .4em rgba(64,64,64,0.5)}.white .file input,.white .labeltext input{border-color:#fff}#webtool.white input.unchecked{background:#ccc;color:#666}.white .options input[type=text],.white .options select{border-color:#999}.white #beautyoutput,.white #minifyoutput{background:#ddd}.white #diffoutput p em,.white #diffoutput li em{color:#c00}.white .analysis .bad{background-color:#ebb;color:#400}.white .analysis .good{background-color:#cec;color:#040}.white #doc .analysis thead th,.white #doc .analysis th[colspan]{background:#eef}.white div input{border-color:#999}.white textarea{border-color:#999}.white textarea:hover{background:#eef8ff}.white .diff,.white .beautify,.white .diff ol,.white .beautify ol,.white .diff .diff-left,.white .diff .diff-right,.white h3,.white p.author{border-color:#999}.white .diff .count li,.white .beautify .count li{background:#eed;border-color:#bbc;color:#886}.white .diff h3{background:#ddd;border-bottom-color:#bbc}.white .diff .empty{background-color:#ddd;border-color:#ccc}.white .diff .replace{background-color:#fea;border-color:#dd8}.white .diff .data .replace em{background-color:#ffd;border-color:#963;color:#630}.white .diff .delete{background-color:#fbb;border-color:#eaa}.white .diff .data .delete em{background-color:#fdd;border-color:#700;color:#600}.white .diff .equal,.white .beautify .data li{background-color:#fff;border-color:#eee}.white .beautify .data em.s1{color:#f66}.white .beautify .data em.s2{color:#12f}.white .beautify .data em.s3{color:#090}.white .beautify .data em.s4{color:#d6d}.white .beautify .data em.s5{color:#7cc}.white .beautify .data em.s6{color:#c85}.white .beautify .data em.s7{color:#737}.white .beautify .data em.s8{color:#6d0}.white .beautify .data em.s9{color:#dd0s}.white .beautify .data em.s10{color:#893}.white .beautify .data em.s11{color:#b97}.white .beautify .data em.s12{color:#bbb}.white .beautify .data em.s13{color:#cc3}.white .beautify .data em.s14{color:#333}.white .beautify .data em.s15{color:#9d9}.white .beautify .data em.s16{color:#880}.white .beautify .data .l0{background:#fff}.white .beautify .data .l1{background:#fed}.white .beautify .data .l2{background:#def}.white .beautify .data .l3{background:#efe}.white .beautify .data .l4{background:#fef}.white .beautify .data .l5{background:#eef}.white .beautify .data .l6{background:#fff8cc}.white .beautify .data .l7{background:#ede}.white .beautify .data .l8{background:#efc}.white .beautify .data .l9{background:#ffd}.white .beautify .data .l10{background:#edc}.white .beautify .data .l11{background:#fdb}.white .beautify .data .l12{background:#f8f8f8}.white .beautify .data .l13{background:#ffb}.white .beautify .data .l14{background:#eec}.white .beautify .data .l15{background:#cfc}.white .beautify .data .l16{background:#eea}.white .beautify .data .c0{background:#ddd}.white .beautify .data li{color:#777}.white .diff .skip{background-color:#efefef;border-color:#ddd}.white .diff .insert{background-color:#bfb;border-color:#aea}.white .diff .data .insert em{background-color:#efc;border-color:#070;color:#050}.white .diff p.author{background:#efefef;border-top-color:#bbc}.white #doc table,.white .box .body table{background:#fff;border-color:#999}.white #doc strong,.white .box .body strong{color:#c00}.white .box .body em,.white .box .body #doc em{color:#090}.white #thirdparties img,.white #diffoutput #thirdparties{border-color:#999}.white #thirdparties img{box-shadow:.2em .2em .4em #999}.white #diffoutput #thirdparties{background:#eee}.white #doc div,#doc.white div{background:#ddd;border-color:#999}.white #doc ol,#doc.white ol{background:#eee;border-color:#999}.white #doc div div,#doc.white div div{background:#eee;border-color:#999}.white #doc table,#doc.white table{background:#fff;border-color:#999}.white #doc th,#doc.white th{background:#ddd;border-left-color:#999;border-top-color:#999}.white #doc tr:hover,#doc.white tr:hover{background:#ddd}#doc.white em{color:#060}.white #doc div:hover,#doc.white div:hover{background:#ccc}.white #doc div div:hover,#doc.white div div:hover,#doc.white div ol:hover{background:#fff}.white #pdsamples li{background:#eee;border-color:#999}.white #pdsamples li div{background:#ddd;border-color:#999}.white #pdsamples li div a{color:#47a}.white #pdsamples li p a{color:#009}",d.cssExtra="body{background:#eee}#doc p em{color:#090}",d.body="</style></head><body id='webtool' class='",d.bodyColor="white",d.title="'><h1><a href='http://prettydiff.com/'>Pretty Diff - The difference tool</a></h1><div class='doc'>",d.accessibility="</div><p>Accessibility note. &lt;em&gt; tags in the output represent character differences per lines compared.</p>",d.scriptOpen="<script type='application/javascript'><![CDATA[var pd={},d=document.getElementsByTagName('ol');",d.scriptBody="(function(){var cells=d[0].getElemensByTagName('li'),len=cells.length,a=0;for(a=0;a<len;a+=1){if(cells[a].getAttribute('class')==='fold'){cells[a].onmousedown=pd.difffold;}}if(d.length>3){d[2].onmousedown=pd.colSliderGrab;d[2].ontouchstart=pd.colSliderGrab;}}());pd.difffold=function dom__difffold(){var self=this,title=self.getAttribute('title').split('line '),min=Number(title[1].substr(0,title[1].indexOf(' '))),max=Number(title[2]),a=0,b=0,inner=self.innerHTML,lists=[],parent=self.parentNode.parentNode,listnodes=(parent.getAttribute('class'==='diff'))?parent.getElementsByTagName('ol'):parent.parentNode.getElementsByTagName('ol'),listLen=listnodes.length;for(a=0;a<listLen;a+=1){lists.push(listnodes[a].getElementsByTagName('li'));}if(lists.length>3){for(a=0;a<min;a+=1){if(lists[0][a].getAttribute('class')==='empty'){min+=1;max+=1}}}max=(max>=lists[0].length)?lists[0].length:max;if(inner.charAt(0)===' - '){self.innerHTML='+'+inner.substr(1);for(a=min;a<max;a+=1){for(b=0;b<listLen;b+=1){lists[b][a].style.display='none';}}}else{self.innerHTML=' - '+inner.substr(1);for(a=min;a<max;a+=1){for(b=0;b<listLen;b+=1){lists[b][a].style.display='block';}}}};pd.colSliderProperties=[d[0].clientWidth,d[1].clientWidth,d[2].parentNode.clientWidth,d[2].parentNode.parentNode.clientWidth,d[2].parentNode.offsetLeft-d[2].parentNode.parentNode.offsetLeft,];pd.colSliderGrab=function(){'use strict';var x=this,a=x.parentNode,b=a.parentNode,c=0,counter=pd.colSliderProperties[0],data=pd.colSliderProperties[1],width=pd.colSliderProperties[2],total=pd.colSliderProperties[3],offset=(pd.colSliderProperties[4]),min=0,max=data-1,status='ew',g=min+15,h=max-15,k=false,z=a.previousSibling,drop=function(g){x.style.cursor=status+'-resize';g=null;document.onmousemove=null;document.onmouseup=null;},boxmove=function(f){f=f||window.event;c=offset-f.clientX;if(c>g&&c<h){k=true;}if(k===true&&c>h){a.style.width=((total-counter-2)/10)+'em';status='e';}else if(k===true&&c<g){a.style.width=(width/10)+'em';status='w';}else if(c<max&&c>min){a.style.width=((width+c)/10)+'em';status='ew';}document.onmouseup=drop;};if(typeof pd.o==='object'&&typeof pd.o.re==='object'){offset+=pd.o.re.offsetLeft;offset-=pd.o.rf.scrollLeft;}else{c=(document.body.parentNode.scrollLeft>document.body.scrollLeft)?document.body.parentNode.scrollLeft:document.body.scrollLeft;offset-=c;}offset+=x.clientWidth;x.style.cursor='ew-resize';b.style.width=(total/10)+'em';b.style.display='inline-block';if(z.nodeType!==1){do{z=z.previousSibling;}while(z.nodeType!==1);}z.style.display='block';a.style.width=(a.clientWidth/10)+'em';a.style.position='absolute';document.onmousemove=boxmove;document.onmousedown=null;};",d.scriptEnd="]]></script>",[d.head+d.cssCore+d.cssColor+d.cssExtra+d.body+d.bodyColor+d.title+_+x()+e[0]+d.accessibility+e[1][0]+d.scriptOpen+d.scriptBody+d.scriptEnd+"</body></html>",""]):[e[1][0],y+x()+e[0]+" <p>Accessibility note. &lt;em&gt; tags in the output represent presentation for"+" variable coloring and scope.</p>"])}())):void 0)};return i=function(e){var t=0,n=0,r=0,i=0,o=0,a=[],s=[],u=[],c=/u\+[0-9a-f]{4,5}\+/,l=/u![0-9a-f]{4,5}\+/,p=/&#[0-9]{1,6};/,f=/&![0-9]{1,6};/;if(void 0===pd||null===pd.o.report.beau||void 0===pd.o.report.beau||"string"!=typeof pd.o.report.beau.innerHTML||-1===e.search(l)&&-1===e.search(c)&&-1===e.search(f)&&-1===e.search(p))return e;for(i=e.length,n=0;i>n;n+=1){if(-1===e.search(p)||e.search(c)<e.search(p)&&-1!==e.search(c)){for(r=e.search(c),u.push(r+"|h"),o=e.length,t=r;o>t;t+=1)if("+"===e.charAt(t)&&"u"===e.charAt(t-1)&&(e=e.slice(0,t)+"!"+e.slice(t+1)),"+"===e.charAt(t)&&"u"!==e.charAt(t-1)){t+=1;break}s.push(e.slice(r+2,t-1)),e=e.replace(l,"")}else if(-1===e.search(c)||e.search(p)<e.search(c)&&-1!==e.search(p)){for(r=e.search(p),u.push(r+"|d"),o=e.length,t=r;o>t;t+=1)if("#"===e.charAt(t)&&(e=e.slice(0,t)+"!"+e.slice(t+1)),";"===e.charAt(t)){t+=1;break}s.push(e.slice(r+2,t-1)),e=e.replace(f,"")}if(-1===e.search(c)&&-1===e.search(p))break}for(e=e.replace(/u![0-9a-f]{4,5}\+/g,"").replace(/&![0-9]{1,6};/g,"").split(""),r=s.length,n=0;r>n;n+=1)u[n]=u[n].split("|"),"h"===u[n][1]&&(s[n]=parseInt(s[n],16)),pd.o.report.beau.innerHTML="&#"+parseInt(s[n],10)+";",s[n]=pd.o.report.beau.innerHTML,a.push(s[n]);return a.join("")},o=function(e){var t=e.cssinsertlines===!0||"true"===e.cssinsertlines,n=e.diffcomm===!0||"true"===e.diffcomm,i="string"!=typeof e.inchar||""===e.inchar?" ":e.inchar,o=isNaN(e.inlevel)===!0?0:Number(e.inlevel),a=isNaN(e.insize)===!0?4:Number(e.insize),s="minify"===e.mode||"parse"===e.mode||"diff"===e.mode?e.mode:"beautify",u=e.objsort===!0||"true"===e.objsort,c=e.preserve!==!1&&"false"!==e.preserve,l="string"!=typeof e.source||""===e.source||/^(\s+)$/.test(e.source)===!0?"Error: no source supplied to csspretty.":e.source,p=e.topcoms===!0||"true"===e.topcoms,f=e.vertical===!0||"true"===e.vertical,d=[],h=[],m=[],g=[],v="",y=!1,_={braces:0,colon:0,comments:{chars:0,count:0},properties:{chars:0,count:0},selectors:{chars:0,count:0},semi:0,space:0,values:{chars:0,count:0},variables:{chars:0,count:0}};return"Error: no source supplied to csspretty."===l?l:(function(){var e=0,t=l.split(""),r=l.length,i="",o=0,a="",v=function(n){var r=a.split("\n").length;return r>1&&n===!0&&c===!0?(y=!0,void 0):("comment"!==h[h.length-1]&&"comment-inline"!==h[h.length-1]&&(r>2||r>1&&"//"===t[e]+t[e+1])&&(m[m.length-1]=1),a="",void 0)},x=function(){var e=0,t=0,n=0,r=d.length-1,i=r,o=[],a=0,s=0,u=0,c=function(e,t){var n=e[0],i=t[0];if("comment"===h[n]||"comment-inline"===h[n])do n+=1;while(r>n&&("comment"===h[n]||"comment-inline"===h[n]));if("comment"===h[i]||"comment-inline"===h[i])do i+=1;while(r>i&&("comment"===h[i]||"comment-inline"===h[i]));return d[n].toLowerCase()<d[i].toLowerCase()?-1:1},l=!0,p=[],f=[],g=[];if("comment"===h[i]||"comment-inline"===h[i])do i-=1;while(i>0&&("comment"===h[i]||"comment-inline"===h[i]));for(e=r;e>-1;e-=1)if("end"===h[e]&&(t+=1),"start"===h[e]&&(t-=1),0===t&&((";"===d[e]||"}"===d[e])&&(l=!0,u=e+1,"comment-inline"===h[u]&&(u+=1)),l!==!0||";"!==d[e]&&"}"!==d[e]||!(i>u)||0!==o.length&&u===o[o.length-1][0]||(m[u-1]>0&&("comment"===h[u]||"selector"===h[u])&&(m[u-1]=0,m[u]=1),"comment-inline"===h[i+1]&&(i+=1),o.push([u,i+1,!1]),i=u-1)),0>t&&r>e){if(o.length>0&&o[o.length-1][0]>e+1&&o.push([e+1,o[o.length-1][0]-1,o[o.length-1][2]]),o.length>1&&("selector"===h[e-1]||"="===d[e-1]||":"===d[e-1]||"["===d[e-1]||"{"===d[e-1]||","===d[e-1]||0===e)){for(o.sort(c),a=o.length,l=!1,t=0;a>t;t+=1){for(s=o[t][1],n=o[t][0];s>n;n+=1)p.push(d[n]),f.push(h[n]),("comment"===h[n]||"selector"===h[n])&&m[n]>0?(g[g.length-1]=1,g.push(0)):g.push(m[n]),";"===d[n]||"}"===d[n]?l=!0:";"!==d[n]&&"}"!==d[n]&&"comment"!==h[n]&&"comment-inline"!==h[n]&&(l=!1);if(l===!1){if(n=f.length-1,"comment"===f[n]||"comment-inline"===f[n])do n-=1;while(n>0&&("comment"===f[n]||"comment-inline"===f[n]));n+=1,p.splice(n,0,";"),f.splice(n,0,"semi"),g[n-1]>0?(g[n-1]=0,g.splice(n,0,1)):g.splice(n,0,0)}}if(n=f.length-1,"comment"===f[n]||"comment-inline"===f[n])do n-=1;while(n>0&&("comment"===f[n]||"comment-inline"===f[n]));a=d.length-(e+1),d.splice(e+1,a),h.splice(e+1,a),m.splice(e+1,a),d=d.concat(p),h=h.concat(f),m=m.concat(g)}return}},b=function(e){var t=d.length,r=0,a=[],u=function(e){var t=e.split(""),n=t.length,r=0,i=0,o=[],a="",s=[];for(r=0;n>r;r+=1)o.push(t[r]),""===a?'"'===t[r]?(a='"',i+=1):"'"===t[r]?(a="'",i+=1):"("===t[r]?(a=")",i+=1):"["===t[r]&&(a="]",i+=1):"("===t[r]&&")"===a||"["===t[r]&&"]"===a?i+=1:t[r]===a&&(i-=1,0===i&&(a="")),""===a&&" "===t[r]&&(o.pop(),s.push(o.join("")),o=[]);for(s.push(o.join("")),n=s.length,r=0;n>r;r+=1)/^(\.\d)/.test(s[r])===!0?s[r]="0"+s[r]:/^(0+([a-z]{2,3}|%))$/.test(s[r])===!0?s[r]="0":/^(0+)/.test(s[r])===!0?(s[r]=s[r].replace(/0+/,"0"),/\d/.test(s[r].charAt(1))===!0&&(s[r]=s[r].substr(1))):/^url\((?!\$)/.test(s[r])===!0&&/\+/.test(s[r])===!1&&")"===s[r].charAt(s[r].length-1)?('"'!==s[r].charAt(4)&&("'"===s[r].charAt(4)?s[r]=s[r].replace("url('",'url("'):(s[r]=s[r].replace("url(",'url("'),'url(")'===s[r]&&(s[r]='url("")'))),'"'!==s[r].charAt(s[r].length-2)&&(s[r]="'"===s[r].charAt(s[r].length-2)?s[r].substr(0,s[r].length-2):s[r].substr(0,s[r].length-1),s[r]=s[r]+'")'),g.push(s[r].substring(5,s[r].length-2))):/^(#([0-9a-fA-F]{3}|[0-9a-fA-F]{6}))$/.test(s[r])===!0&&(s[r]=s[r].toLowerCase(),7===s[r].length&&s[r].charAt(1)===s[r].charAt(2)&&s[r].charAt(3)===s[r].charAt(4)&&s[r].charAt(5)===s[r].charAt(6)&&(s[r]="#"+s[r].charAt(1)+s[r].charAt(3)+s[r].charAt(5)));return s.join(" ")};if("comment"===i||"comment-inline"===i){do t-=1,i=h[t],a.push(d[t]);while(t>0&&("comment"===i||"comment-inline"===i))}else t-=1;if("item"===i)if("start"===e)_.selectors.count+=1,_.selectors.chars+=o,"comment"!==h[t-1]&&"comment-inline"!==h[t-1]&&"end"!==h[t-1]&&"start"!==h[t-1]&&"semi"!==h[t-1]&&void 0!==h[t-1]?!function(){var e=[],n=t,r=0;do e.push(d[n]),n-=1;while(n>0&&"comment"!==h[n]&&"comment-inline"!==h[n]&&"end"!==h[n]&&"start"!==h[n]&&"semi"!==h[n]&&void 0!==h[n]);e.reverse(),n+=1,r=t-n,d.splice(n,r),h.splice(n,r),m.splice(n,r),t-=r,d[t]=e.join("").replace(/\s*,(\s*)/g,",")}():d[t]=d[t].replace(/\s*,(\s*)/g,","),h[t]="selector";else if("end"===e){if(h[t]="value","diff"!==s&&(d[t]=u(d[t])),"beautify"===s||"diff"===s&&n===!0)if("{"===d[d.length-2])h[h.length-1]="propvar",_.values.count-=1,_.values.chars-=o,_.variables.count+=1,_.variables.chars+=o;else if(a.length>0&&"semi"!==i&&"end"!==i&&"start"!==i){t=a.length-1;do d.pop(),h.pop(),m.pop(),t-=1;while(t>0);"diff"===s?d.push("x;"):d.push(";"),h.push("semi"),m.push(0),r=a.length-1;do d.push(a[t]),0===a[t].indexOf("//")&&0===m[m.length-1]?h.push("comment-inline"):h.push("comment"),m.push(0),t+=1;while(r>t)}else"diff"===s?d.push("x;"):d.push(";"),h.push("semi"),m.push(0);_.values.count+=1,_.values.chars+=o}else"semi"===e?"colon"===h[t-1]?(_.values.count+=1,_.values.chars+=o,h[t]="value","diff"!==s&&(d[t]=u(d[t]))):(h[t]="propvar",_.variables.count+=1,_.variables.chars+=o):"colon"===e&&(h[t]="property",_.properties.count+=1,_.properties.chars+=o)},w=function(o){var a=0,u=[t[e]],c="",l=[],f=[],g=[];for(v(!1),c=o===!0&&0===m[m.length-1]&&"comment"!==d[d.length-1]&&"comment-inline"!==d[d.length-1]?"comment-inline":"comment",a=e+1;r>a&&(u.push(t[a]),!(o===!1&&"*"===t[a-1]&&"/"===t[a]||o===!0&&"\n"===t[a+1]));a+=1);if(e=a,_.comments.count+=1,_.comments.chars+=u.length,"minify"===s&&u.push("\n"),"beautify"===s||"diff"===s&&n===!0||"minify"===s&&p===!0)if(d.length>0&&","===d[d.length-1].charAt(d[d.length-1].length-1)&&"comment"!==h[h.length-1]&&"comment-inline"!==h[h.length-1])f.push(d[d.length-1]),d.pop(),h.pop(),m.pop(),d.push(u.join("")),h.push(c),m.push(0),d.push(f[0]),h.push("selector"),m.push(0);else if("colon"===i||"property"===i||"value"===i||"propvar"===i){do f.push(d[d.length-1]),l.push(h[h.length-1]),g.push(m[m.length-1]),d.pop(),h.pop(),m.pop();while(h.length>1&&"semi"!==h[h.length-1]&&"start"!==h[h.length-1]);d.push(u.join("")),h.push(c),m.push(0);do d.push(f[f.length-1]),h.push(l[l.length-1]),m.push(g[g.length-1]),f.pop(),l.pop(),g.pop();
while(f.length>0)}else i=c,h.push(c),d.push(u.join("")),m.push(0)},S=function(){var n=0,a=0,s=[],u="",c=d.length>0&&","===d[d.length-1].charAt(d[d.length-1].length-1);for(v(!1),n=e;r>n&&(s.push(t[n]),""===u?'"'===t[n]?(u='"',a+=1):"'"===t[n]?(u="'",a+=1):"("===t[n]?(u=")",a+=1):"["===t[n]?(u="]",a+=1):"#"===t[n]&&"{"===t[n+1]&&(u="}",a+=1):"("===t[n]&&")"===u||"["===t[n]&&"]"===u?a+=1:t[n]===u&&(a-=1,0===a&&(u="")),""!==u||"\\"===t[n]||";"!==t[n+1]&&":"!==t[n+1]&&"}"!==t[n+1]&&"{"!==t[n+1]&&("/"!==t[n+1]||"*"!==t[n+2]&&"/"!==t[n+2]));n+=1);return e=n,o=s.length,c===!0&&"comment"!==h[h.length-1]&&"comment-inline"!==h[h.length-1]?(d[d.length-1]=d[d.length-1]+s.join("").replace(/\s+/g," ").replace(/^\s/,"").replace(/\s$/,""),void 0):(d.push(s.join("").replace(/\s+/g," ").replace(/^\s/,"").replace(/\s$/,"")),m.push(0),0===d[d.length-1].indexOf("extend(")?(i="pseudo",h.push("pseudo")):(i="item",h.push("item")),void 0)},E=function(){var e=0,t=1,n=0,r=0,i=[],o=[[]],a=0,u=[],c=[],l=[];for(e=d.length-1;e>-1;e-=1){if("start"===h[e]&&(t-=1,0===t)){for(a=e,o.pop(),e=o.length-1;e>-1;e-=1)o[e].reverse();break}"end"===h[e]&&(t+=1),1===t&&"property"===h[e]&&"beautify"===s&&i.push(e),o[o.length-1].push(e),1!==t||"comment"!==h[e-1]&&"comment-inline"!==h[e-1]&&"semi"!==h[e-1]&&"end"!==h[e-1]&&"start"!==h[e-1]||"start"===h[e]||"end"===h[e]||o.push([])}if(o.reverse(),t=0,f===!0){for(e=i.length-1;e>-1;e-=1)d[i[e]].length>t&&"filter"!==d[i[e]]&&"progid"!==d[i[e]]&&(t=d[i[e]].length);for(e=i.length-1;e>-1;e-=1)if(n=t-d[i[e]].length,n>0&&"filter"!==d[i[e]]&&"progid"!==d[i[e]])do d[i[e]]=d[i[e]]+" ",n-=1;while(n>0)}for(function(){var t=o.length,n=function(e,n){var r=[!1,!1,!1,!1],a=["0","0","0","0"],u=/^(0+([a-z]+|%))/,c=-1,l=-1,p=0,h=[],m=function(e){l+=1,a[e]=d[o[p][2]],r[e]=!0,0>c&&(c=p)},g=function(){var e=0,t=0,r=0,o=i.length;for(e=0;o>e;e+=1)d[i[e]]=d[i[e]].replace(/(\s+)$/,""),0===d[i[e]].indexOf(n+"-")?(i.splice(e,1),o-=1):d[i[e]].replace().length>t&&(t=d[i[e]].length);for(e=0;o>e;e+=1)if(d[i[e]].length<t){r=t-d[i[e]].length;do d[i[e]]=d[i[e]]+" ",r-=1;while(r>0)}};for(p=e;t>p;p+=1)if(void 0!==d[o[p][2]]&&0===d[o[p][0]].indexOf(n)&&(d[o[p][0]]===n||0===d[o[p][0]].indexOf(n+" ")?(l+=1,h=d[o[p][2]].split(" "),1===h.length?a=[d[o[p][2]],d[o[p][2]],d[o[p][2]],d[o[p][2]]]:2===h.length?a=[h[0],h[1],h[0],h[1]]:3===h.length?a=[h[0],h[1],h[2],h[1]]:4===h.length&&(a=[h[0],h[1],h[2],h[3]]),r=[!0,!0,!0,!0],c=p):0===d[o[p][0]].indexOf(n+"-bottom")?m(2):0===d[o[p][0]].indexOf(n+"-left")?m(3):0===d[o[p][0]].indexOf(n+"-right")?m(1):0===d[o[p][0]].indexOf(n+"-top")&&m(0)),0!==d[o[p][0]].indexOf(n)||p===t-1){if(r[0]===!0&&r[1]===!0&&r[2]===!0&&r[3]===!0&&(o.splice(c+1,l),t-=l,d[o[c][0]]=n,u.test(a[0])===!0&&(a[0]="0"),u.test(a[1])===!0&&(a[1]="0"),u.test(a[2])===!0&&(a[2]="0"),u.test(a[3])===!0&&(a[3]="0"),a[1]===a[3]&&(a.pop(),a[0]===a[2]&&(a.pop(),a[0]===a[1]&&a.pop())),d[o[c][2]]=a.join(" "),"beautify"===s&&f===!0))if(" "===d[o[c][0]].charAt(d[o[c][0]].length-1)){l=d[o[c][0]].length-n.length;do n+=" ",l-=1;while(l>0)}else g();break}};for(t=o.length,e=0;t>e;e+=1)"property"===h[o[e][0]]&&(0===d[o[e][0]].indexOf("margin")&&n(e,"margin"),0===d[o[e][0]].indexOf("padding")&&n(e,"padding"))}(),t=o.length,e=0;t>e;e+=1)for(r=o[e].length,n=0;r>n;n+=1)u.push(d[o[e][n]]),c.push(h[o[e][n]]),l.push(m[o[e][n]]);d.splice(a+1,d.length-a-1),h.splice(a+1,h.length-a-1),m.splice(a+1,m.length-a-1),d=d.concat(u),h=h.concat(c),m=m.concat(l)};for(e=0;r>e;e+=1)"comment"!==i&&"comment-inline"!==i&&""!==i&&p===!0&&(p=!1),/\s/.test(t[e])===!0?(_.space+=1,a+=t[e]):"/"===t[e]&&"*"===t[e+1]?w(!1):"/"===t[e]&&"/"===t[e+1]?w(!0):"{"===t[e]?(":"===d[d.length-2]&&(h[h.length-1]="pseudo"),b("start"),i="start",h.push("start"),d.push("{"),m.push(0),_.braces+=1,a=""):"}"===t[e]?"item"===h[h.length-1]&&"{"===d[d.length-2]&&void 0!==d[d.length-3]&&"@"===d[d.length-3].charAt(d[d.length-3].length-1)?(d[d.length-3]=d[d.length-3]+"{"+d[d.length-1]+"}",d.pop(),d.pop(),h.pop(),h.pop(),m.pop(),m.pop()):(b("end"),"diff"!==s&&E(),i="end",u===!0&&x(),h.push("end"),d.push("}"),m.push(0),_.braces+=1,a=""):";"===t[e]?(b("semi"),"semi"!==h[h.length-1]&&(i="semi",h.push("semi"),d.push(";"),m.push(0)),_.semi+=1,a=""):":"===t[e]?(b("colon"),i="colon",h.push("colon"),d.push(":"),m.push(0),_.colon+=1,a=""):S();v(!0)}(),"parse"===s?{token:d,types:h}:(v="minify"!==s?function(){var e=0,n=d.length,r=[],s=o,u=!1,l=function(){var e=0,t=[];for(e=0;a>e;e+=1)t.push(i);return t.join("")}(),p=function(e){var t=0;for(r.push("\n"),t=0;e>t;t+=1)r.push(l)},f=function(e){var t=0,n=0,i=0,o="",a=[],u=e.length;for(t=0;u>t;t+=1)""===o?'"'===e.charAt(t)?(o='"',n+=1):"'"===e.charAt(t)?(o="'",n+=1):"("===e.charAt(t)?(o=")",n+=1):"["===e.charAt(t)&&(o="]",n+=1):"("===e.charAt(t)&&")"===o||"["===e.charAt(t)&&"]"===o?n+=1:e.charAt(t)===o&&(n-=1,0===n&&(o="")),""===o&&","===e.charAt(t)&&(a.push(e.substring(i,t+1)),i=t+1);for(i>0&&a.push(e.substr(i)),u=a.length,0===u&&a.push(e),r.push(a[0].replace(/,(\s*)/g,", ").replace(/(,\ )$/,",")),t=1;u>t;t+=1)p(s),r.push(a[t].replace(/,(\s*)/g,", ").replace(/(,\ )$/,","));r.push(" ")};if(o>0){e=o;do e-=1,r.push(l);while(e>0)}for(e=0;n>e;e+=1)"start"===h[e]?e>0&&"#"===d[e-1].charAt(d[e-1].length-1)?r.push(d[e]):("colon"===h[e-1]&&r.push(" "),r.push(d[e]),s+=1,p(s)):"end"===h[e]?(u===!0?(u=!1,r.push(d[e]),r.push(" ")):(s-=1,p(s),r.push(d[e]),"end"!==h[e+1]&&"semi"!==h[e+1]&&p(s)),t===!0&&"end"!==h[e+1]&&r.push("\n")):"semi"===h[e]?("x;"!==d[e]&&r.push(d[e]),"comment-inline"===h[e+1]?r.push(" "):"end"!==h[e+1]&&p(s)):"selector"===h[e]?(c===!0&&m[e-1]>0&&p(s),"#"===d[e].charAt(d[e].length-1)?(r.push(d[e]),u=!0):d[e].indexOf(",")>-1?f(d[e]):(":"===d[e].charAt(0)&&"}"===d[e-1]&&" "===r[r.length-1]&&r.pop(),r.push(d[e]),r.push(" "))):"comment"!==h[e]&&"comment-inline"!==h[e]||"colon"===h[e-1]||"property"===h[e-1]?("value"!==h[e]||"semi"===h[e-1]||u!==!1&&":"!==d[e-1]||"filter"===d[e-2]||"progid"===d[e-2]||r.push(" "),r.push(d[e])):(m[e-1]>0&&p(s),r.push(d[e]),"end"!==h[e+1]&&p(s));return c===!0&&(m[m.length-1]>0||y===!0)?r.join("").replace(/(\s+)$/,"\n"):r.join("").replace(/(\s+)$/,"")}():d.join("").replace(/;\}/g,"}"),"beautify"===s&&(r=function(){var e=[],t=l.length,n=v.length,r=g.length,i=0,o=0,a=0;for(e.push("<div class='doc' id='cssreport'><p><strong>Number of HTTP requests:</strong> <em>"),e.push(r),e.push("</em></p><table class='analysis' id='css-parts' summary='Component counts and sizes'><caption>Component counts and sizes</caption><thead><tr><th>Type Name</th><th>Quantity</th><th>Character Size</th></tr></thead><tbody><tr><th>curly braces</th><td>"),e.push(_.braces),e.push("</td><td>"),e.push(_.braces),e.push("</td></tr><tr><th>colon</th><td>"),e.push(_.colon),e.push("</td><td>"),e.push(_.colon),e.push("</td></tr><tr><th>comments</th><td>"),e.push(_.comments.count),e.push("</td><td>"),e.push(_.comments.chars),e.push("</td></tr><tr><th>properties</th><td>"),e.push(_.properties.count),e.push("</td><td>"),e.push(_.properties.chars),e.push("</td></tr><tr><th>selectors</th><td>"),e.push(_.selectors.count),e.push("</td><td>"),e.push(_.selectors.chars),e.push("</td></tr><tr><th>semicolons</th><td>"),e.push(_.semi),e.push("</td><td>"),e.push(_.semi),e.push("</td></tr><tr><th>white space</th><td>"),e.push(_.space),e.push("</td><td>"),e.push(_.space),e.push("</td></tr><tr><th>values</th><td>"),e.push(_.values.count),e.push("</td><td>"),e.push(_.values.chars),e.push("</td></tr><tr><th>variables</th><td>"),e.push(_.variables.count),e.push("</td><td>"),e.push(_.variables.chars),e.push("</td></tr></tbody></table><table class='analysis' id='css-size' summary='CSS character size change'><caption>CSS character size change</caption><tbody><tr><th>Input</th><td>"),e.push(t),e.push("</td></tr><tr><th>Output</th><td>"),e.push(n),e.push("</td></tr><tr><th>"),n>t?(e.push("Increase</th><td>"),e.push(n-t),e.push("</td></tr><tr><th>Percent Change</th><td>"),o=100*((n-t)/n),e.push(o.toFixed(2))):(e.push("Decrease</th><td>"),e.push(t-n),e.push("</td></tr><tr><th>Percent Change</th><td>"),o=100*((t-n)/t),e.push(o.toFixed(2))),e.push("%</td></tr></tbody></table><table class='analysis' id='css-uri' summary='A list of HTTP requests'><caption>A List of HTTP Requests</caption><thead><tr><th>Quantity</th><th>URI</th></tr></thead><tbody>"),o=0;r>o;o+=1){for(i=1,a=o+1;r>a;a+=1)g[o]===g[a]&&(i+=1,g.splice(a,1),r-=1);e.push("<tr><td>"),e.push(i),e.push("</td><td>"),e.push(g[o].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),e.push("</td></tr>")}return e.push("</tbody></table></div>"),e.join("")}()),v))},a=function(e,t){var n="",r=0,o=0,a=[],s="Error: Unterminated string begging at character number ";if(function(){var t=0,i=0,o=[];for(e=e.replace(/\{csv/g,"{prettydiffcsv").replace(/"{2}/g,"{csvquote}"),o=e.split(""),i=o.length,r=0;i>r;r+=1)if('"'===o[r]){for(t=r+1;i>t;t+=1){if('"'===o[t]){a.push(e.slice(r,t+1)),o[r]="{csvstring}",o[t]="",r=t+1;break}o[t]=""}if(t===i)return n=o.join("").slice(r,r+9),e=s,void 0}e=o.join("").replace(/\{csvquote\}/g,'""')}(),t=""===t?",":i(t),t.length>e.length)return e.replace(/\{prettydiffcsv/g,"{csv");if(e===s)return r!==e.length-1?e+r+", '"+n+"'.":e+r+".";e=e.replace(/\n/g,"\n\n{-}\n\n"),e.charAt(e.length-t.length)===t&&(e=e.slice(0,e.length+1-t.length)+"{|}");do e=e.replace(t,"\n");while(-1!==e.indexOf(t));for(o=a.length,r=0;o>r;r+=1)a[r]=a[r].replace(/\n/g,"{ }"),e=e.replace("{csvstring}",a[r]);return e.replace(/\{csvquote\}/g,'"').replace(/\{prettydiffcsv/g,"{csv")},s=function(e,t){t=""===t?",":i(t),function(){var n=function(e){var n=[],r=0,i=e.length-2;if(0===i)return"{ }";for(r=0;i>r;r+=1)n.push(t);return n.join("")+"{ }"},r=0,i=0,o=[],a=0,s=[],u=e.replace(/\n\n\{-\}\n\n/g,"{-}").replace(/\n{2,}/g,n).split("\n"),c=u.length,l="",p="Error: Unterminated String begging at character number ";for(r=0;c>r;r+=1)if(o=[],"string"==typeof u[r]&&-1!==u[r].indexOf('"')){for(s=u[r].split(""),a=s.length,i=0;a>i;i+=1)'"'===s[i]&&o.push(i);if(1===o.length)return u[r]=s.join(""),l=u[r].slice(o[0],o[0]+9),p+(u.join(t).indexOf(u[r])+o[0])+" or value number "+(r+1)+", '"+l+"'.";if(o.length>2)for(a=o.length-1,i=1;a>i;i+=1)s[o[i]]='""';u[r]=s.join("")}"{|}"===u[u.length-1]&&(u[u.length-1]=""),e=u.join(t).replace(/\n/g,t)}();do e=e.replace("{ }","\n");while(-1!==e.indexOf("{ }"));return e=e.replace(/\n{2}/g,"\n"),e.indexOf("{|}")===e.length-3&&(e=e.slice(0,e.length-3)+t),e.replace(/\{-\}/g,"\n")},u=function(e){var t=0,n=0,r="string"==typeof e.baseTextLines?e.baseTextLines.replace(/\u0000|\u0001|\u0002|\u0003|\u0004|\u0005|\u0006|\u0007|\u0008|\u000b|\u000c|\u000e|\u000f|\u0010|\u0011|\u0012|\u0013|\u0014|\u0015|\u0016|\u0017|\u0018|\u0019|\u001a|\u001b|\u001c|\u001d|\u001e|\u001f|\u007f|\u0080|\u0081|\u0082|\u0083|\u0084|\u0085|\u0086|\u0087|\u0088|\u0089|\u008a|\u008b|\u008c|\u008d|\u008e|\u008f|\u0090|\u0091|\u0092|\u0093|\u0094|\u0095|\u0096|\u0097|\u0098|\u0099|\u009a|\u009b|\u009c|\u009d|\u009e|\u009f/g,""):"",i="string"==typeof e.newTextLines?e.newTextLines.replace(/\u0000|\u0001|\u0002|\u0003|\u0004|\u0005|\u0006|\u0007|\u0008|\u000b|\u000c|\u000e|\u000f|\u0010|\u0011|\u0012|\u0013|\u0014|\u0015|\u0016|\u0017|\u0018|\u0019|\u001a|\u001b|\u001c|\u001d|\u001e|\u001f|\u007f|\u0080|\u0081|\u0082|\u0083|\u0084|\u0085|\u0086|\u0087|\u0088|\u0089|\u008a|\u008b|\u008c|\u008d|\u008e|\u008f|\u0090|\u0091|\u0092|\u0093|\u0094|\u0095|\u0096|\u0097|\u0098|\u0099|\u009a|\u009b|\u009c|\u009d|\u009e|\u009f/g,""):"",o="string"==typeof e.baseTextName?e.baseTextName.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"Base Source",a="string"==typeof e.newTextName?e.newTextName.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"New Source",s=e.diffcli===!0||"true"===e.diffcli,u=/^([0-9]+)$/.test(e.contextSize)?Number(e.contextSize):-1,c=/^([0-9]+)$/.test(e.tsize)?Number(e.tsize):4,l="string"==typeof e.tchar?e.tchar:" ",p=e.inline===!0||"true"===e.inline,f=function(){var e=0,t=[];if(""===l)return"";for(e=0;c>e;e+=1)t.push(l);return t.join("")}(),d=function(e){var t=e.indexOf("\n"),n=e.indexOf("\r"),r=t>-1&&n>-1||0>n?"\n":"\r",i="";return e="\n"===r?e.replace(/\r/g,""):e.replace(/\n/g,""),i=s===!0?e:e.replace(/&/g,"&amp;").replace(/&#lt;/g,"$#lt;").replace(/&#gt;/g,"$#gt;").replace(/</g,"$#lt;").replace(/>/g,"$#gt;"),i.split(r)},h=d(r),m=d(i),g=function(){var e={},t=function(t){return e.hasOwnProperty(t)?e[t]:void 0},n=[],o=[],a=[],s=!1,u=[],c=[],l=function(){for(var e=0,r=0,i=0,s=0,c=0,l=0,p=0,f=0,d=0,h=0,m=0,g=0,v=0,y=0,_=0,x=n.length,b=o.length,w=[],S=[],E=[],C=[[0,x,0,b]],T=function(e,t){var n=0,r=Math.max(e.length,t.length);for(n=0;r>n;n+=1){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return e.length===t.length?0:e.length<t.length?-1:1},P=function(e,r,i,s){var u=0,c=0,l=a.length,p=0,f=0,d=[0,0],h=e,m=i,g=0;for(u=e;r>u;u+=1){for(c=0;l>c;c+=1)if(a[c][1]===n[u]&&(n[u]!==o[u]||u===r-1||n[u+1]===o[u+1])){p=a[c][0];break}if(c!==l){if(p>=i){if(p>=s)break;f=d[0]===p-1?d[1]+1:1,f>g&&(h=u-f+1,m=p-f+1,g=f)}d=[p,f]}}for(;h>e&&m>i&&void 0===t(o[m-1])&&n[h-1]===o[m-1];)h-=1,m-=1,g+=1;for(;r>h+g&&s>m+g&&void 0===t(o[m+g])&&n[h+g]===o[m+g];)g+=1;for(;h>e&&m>i&&void 0!==t(o[m-1])&&n[h-1]===o[m-1];)h-=1,m-=1,g+=1;for(;r>h+g&&s>m+g&&void 0!==t(o[m+g])&&n[h+g]===o[m+g];)g+=1;return[h,m,g]};C.length>0;)S=C.pop(),i=S[0],s=S[1],c=S[2],l=S[3],w=P(i,s,c,l),p=w[0],f=w[1],d=w[2],d>0&&(u.push(w),p>i&&f>c&&C.push([i,p,c,f]),s>p+d&&l>f+d&&C.push([p+d,s,f+d,l]));for(u.sort(T),r=u.length,e=0;r>e;e+=1)m=u[e][0],v=u[e][1],_=u[e][2],h+y===m&&g+y===v?y+=_:(y>0&&E.push([h,g,y]),h=m,g=v,y=_);return y>0&&E.push([h,g,y]),E.push([x,b,0]),E};return""===r||""===i?"":(function(){!function(){h.length>m.length?(s=!0,n=m,o=h):(n=h,o=m)}(),function(){var e=0,t=0,n="",r=o.length;for(e=0;r>e;e+=1){for(n=o[e],t=a.length-1;t>-1&&a[t][1]!==n;t-=1);t>-1?r>=200&&100>r&&a.splice(t,1):a.push([e,n])}}(),function(){var e=0,t=0,r=0,i=0,a="",u=0,p=0,f=l(),d=f.length,h=function(e,t,n){var r=function(e,t){var n=0,r=e.replace(/^(\s+)/,"").split(""),i=Math.min(r.length,t.length);for(n=0;i>n;n+=1)if(r[n]!==t[n])return n;return n},i=n.replace(/^(\s+)/,"").split(""),o=r(t,i)-r(e,i);return o>0?!0:!1};for(e=0;d>e;e+=1)t=f[e][0],r=f[e][1],i=f[e][2],a="",t>u&&r>p?u-p!==t-r&&3>p-r&&3>u-t?s===!0&&u-t>p-r?h(o[p],o[p+1],n[u])===!0?(c.push(["delete",p,p+1,u,u]),c.push(["replace",p+1,r,u,t])):c.push(["replace",p,r,u,t]):s===!1&&r-p>t-u?h(o[p],o[p+1],n[u])===!0?(c.push(["insert",u,u,p,p+1]),c.push(["replace",u,t,p+1,r])):c.push(["replace",u,t,p,r]):a="replace":a="replace":t>u?a=s===!0?"insert":"delete":r>p&&(a=s===!0?"delete":"insert"),""!==a&&(s===!0?c.push([a,p,r,u,t]):c.push([a,u,t,p,r])),u=t+i,p=r+i,i>0&&(s===!0?c.push(["equal",r,p,t,u]):c.push(["equal",t,u,r,p]))}()}(),c)}();return function(){var e=0,r=0,i=["<div class='diff'>"],c=s===!0?[[],[],[],[],[],[]]:[[],[],[],[]],l=0,d=0,v=0,y=0,_=0,x=0,b=0,w=0,S=0,E="",C=""===f?"":new RegExp("^(("+f.replace(/\\/g,"\\")+")+)"),T=function(e){var t=0,n=e.length,r=[];for(t=0;n>t;t+=1)r.push(e[t].replace(C,""));return r},P=""===f?[]:T(h),I=""===f?[]:T(m),D=g.length,A="",N=!1,k=!1,O=!1,R=!0,j=[],F=[],L=function(e,n){var r=0,i=[],o=[],a=s===!0?e:e.replace(/&#160;/g," ").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/\$#lt;/g,"<").replace(/\$#gt;/g,">").replace(/&amp;/g,"&"),u=s===!0?n:n.replace(/&#160;/g," ").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/\$#lt;/g,"<").replace(/\$#gt;/g,">").replace(/&amp;/g,"&"),c=0,l=[],p=/_pdiffdiff\u005f/g,f=/_epdiffdiff\u005f/g,d="_pdiffdiff_",h="_epdiffdiff_",m=function(){var e="",t="",n="",r="",i=[],o=a.match(C),s=u.match(C);return null===o||null===s||""===o[0]&&1===o.length||""===s[0]&&1===s.length?["","",a,u]:(e=o[0],t=s[0],n=a.split(e)[1],r=u.split(t)[1],e.length>t.length?(i=e.split(t),e=t+d+i[1]+h,t=t+d+h):(i=t.split(e),t=e+d+i[1]+h,e=e+d+h),[e,t,n,r])}(),g=function(e){var t=0,n=0,r=Math.max(i.length,o.length),a=[],s=function(e,t){return e[1]-e[0]<t[1]-t[0]?1:-1},u=function(e,t){return e[0]+e[1]>t[0]+t[1]?1:-1};for(t=e;c>t;t+=1)for(n=e;r>n;n+=1)if(i[t]===o[n]||o[t]===i[n]){a.push([t,n]);break}return 0===a.length?[c,r,0]:(a.sort(s),5e3>c-e&&a.sort(u),a[0][0]<a[0][1]?(t=a[0][0],n=a[0][1]):(n=a[0][0],t=a[0][1]),i[n]===o[t]?(i[n-1]===o[t-1]&&t!==e&&(t-=1,n-=1),[t,n,0]):i[t]===o[n]?(i[t-1]===o[n-1]&&t!==e&&(t-=1,n-=1),[t,n,1]):void 0)};if(a===u)return[e,n];if(t-=1,""!==C&&a.length!==u.length&&a.replace(C,"")===u.replace(C,""))return t+=1,s===!0?(m[0]=m[0]+m[2],m[0]=m[0].replace(p,"<pd>").replace(f,"</pd>"),m[1]=m[1]+m[3],m[1]=m[1].replace(p,"<pd>").replace(f,"</pd>"),[m[0],m[1]]):(m[0]=m[0]+m[2],m[0]=m[0].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(p,"<em>").replace(f,"</em>"),m[1]=m[1]+m[3],m[1]=m[1].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(p,"<em>").replace(f,"</em>"),[m[0],m[1]]);for(i=a.split(""),o=u.split(""),c=Math.min(i.length,o.length),r=0;c>r&&void 0!==i[r]&&void 0!==o[r];r+=1)if(i[r]!==o[r]){if(t+=1,l=g(r),r>0?(i[r-1]=i[r-1]+d,o[r-1]=o[r-1]+d):(i[r]=d+i[r],o[r]=d+o[r]),1===l[2]?(0===l[0]?i[0]=i[0].replace(p,d+h):l[0]===c?o.length===c?i[i.length-1]=i[i.length-1]+h:i[l[0]-1]=i[l[0]-1]+h:i[l[0]]=i[l[0]].indexOf(d)>-1?i[l[0]]+h:h+i[l[0]],l[1]>o.length-1||l[0]===c?o[o.length-1]=o[o.length-1]+h:o[l[1]]=h+o[l[1]]):(0===l[0]?o[0]=o[0].replace(p,d+h):l[0]===c?i.length===c?o[o.length-1]=o[o.length-1]+h:o[l[0]-1]=o[l[0]-1]+h:o[l[0]]=o[l[0]].indexOf(d)>-1?o[l[0]]+h:h+o[l[0]],l[1]>i.length-1||l[0]===c?i[i.length-1]=i[i.length-1]+h:i[l[1]]=h+i[l[1]]),l[1]>l[0]&&l[1]-l[0]<1e3)if(1===l[2]){do i.unshift(""),l[0]+=1;while(l[1]>l[0])}else do o.unshift(""),l[0]+=1;while(l[1]>l[0]);c=Math.min(i.length,o.length),r=l[1]}return i.length>o.length&&void 0!==o[o.length-1]&&o[o.length-1].indexOf(h)<0&&(o.push(d+h),i[o.length-1]=d+i[o.length-1],i[i.length-1]=i[i.length-1]+h,t+=1),o.length>i.length&&void 0!==i[i.length-1]&&i[i.length-1].indexOf(h)<0&&(i.push(d+h),o[i.length-1]=d+o[i.length-1],o[o.length-1]=o[o.length-1]+h,t+=1),s===!0?[i.join("").replace(p,"<pd>").replace(f,"</pd>"),o.join("").replace(p,"<pd>").replace(f,"</pd>")]:[i.join("").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(p,"<em>").replace(f,"</em>"),o.join("").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(p,"<em>").replace(f,"</em>")]};for(s===!1&&(p===!0?(i.push("<h3 class='texttitle'>"),i.push(o),i.push(" vs. "),i.push(a),i.push("</h3><ol class='count'>")):(c[0].push("<div class='diff-left'><h3 class='texttitle'>"),c[0].push(o),c[0].push("</h3><ol class='count'>"),c[2].push("<div class='diff-right'><h3 class='texttitle'>"),c[2].push(a),c[2].push("</h3><ol class='count' style='cursor:w-resize'>"))),e=0;D>e;e+=1)for(j=g[e],A=j[0],l=j[1],d=j[2],v=j[3],y=j[4],_=Math.max(d-l,y-v),R=!0,r=0;_>r;r+=1){if(u>-1&&g.length>1&&(e>0&&r===u||0===e&&0===r)&&"equal"===A){if(R=!1,S=_-(0===e?1:2)*u,S>1&&(x+=1,l+=S,v+=S,r+=S-1,s===!0?c[5].push([l,v]):(c[0].push("<li>...</li>"),p===!1&&c[1].push("<li class='skip'>&#10;</li>"),c[2].push("<li>...</li>"),c[3].push("<li class='skip'>&#10;</li>")),e+1===g.length))break}else"equal"!==A&&(n+=1);h[l]===m[v]?A="equal":"equal"===A&&(A="replace"),""!==f&&(N!==!1||h[d]===m[y]||"string"!=typeof h[l+1]||"string"!=typeof m[v]||P[l+1]!==I[v]||P[l]===I[v]||"string"==typeof m[v-1]&&P[l]===I[v-1]?k!==!1||h[d]===m[y]||"string"!=typeof m[v+1]||"string"!=typeof h[l]||I[v+1]!==P[l]||I[v]===P[l]||"string"==typeof h[l-1]&&I[v]===P[l-1]||(k=!0):N=!0),s===!0?(k===!0||"insert"===A?(c[0].push(0),c[1].push(""),c[2].push(v+1),c[3].push(m[v]),c[4].push("insert"),t+=1):N===!0||"delete"===A?(c[0].push(l+1),c[1].push(h[l]),c[2].push(0),c[3].push(""),c[4].push("delete"),t+=1):"replace"===A?(h[l]!==m[v]&&(""===h[l]?F=["",m[v]]:""===m[v]?F=[h[l],""]:d>l&&y>v&&(F=L(h[l],m[v]))),d>l&&(c[0].push(l+1),y>v?c[1].push(F[0]):c[1].push(h[l]),c[2].push(0),c[3].push(""),c[4].push("delete")),y>v&&(c[0].push(0),c[1].push(""),c[2].push(v+1),d>l?c[3].push(F[1]):c[3].push(m[v]),c[4].push("insert")),t+=1):(d>l||y>v)&&(c[0].push(l+1),c[1].push(h[l]),c[2].push(v+1),c[3].push(m[v]),c[4].push(A),"equal"!==A&&(t+=1)),N===!0?(l+=1,N=!1):k===!0?(v+=1,k=!1):(l+=1,v+=1)):p===!0?(0>u&&h[l-1]===m[v-1]&&h[l]!==m[v]&&w>0&&(c[0][w]=c[0][w].replace("xxx",x)),k===!0||"insert"===A?(c[0].push("<li class='empty'>&#8203;&#10;</li>"),c[2].push("<li>"),c[2].push(v+1),c[2].push("&#10;</li>"),c[3].push("<li class='insert'>"),c[3].push(m[v]),c[3].push("&#10;</li>"),x+=1,t+=1):N===!0||"delete"===A?(c[0].push("<li>"),c[0].push(l+1),c[0].push("</li>"),c[2].push("<li class='empty'>&#8203;&#10;</li>"),c[3].push("<li class='delete'>"),c[3].push(h[l]),c[3].push("&#10;</li>"),x+=1,t+=1):"replace"===A?(h[l]!==m[v]&&(""===h[l]?(F=["",m[v]],t+=1):""===m[v]?(F=[h[l],""],t+=1):d>l&&y>v&&(F=L(h[l],m[v]))),d>l&&(c[0].push("<li>"),c[0].push(l+1),c[0].push("</li>"),c[2].push("<li class='empty'>&#8203;&#10;</li>"),c[3].push("<li class='delete'>"),y>v?c[3].push(F[0]):c[3].push(h[l]),c[3].push("&#10;</li>"),x+=1),y>v&&(c[0].push("<li class='empty'>&#8203;&#10;</li>"),c[2].push("<li>"),c[2].push(v+1),c[2].push("</li>"),c[3].push("<li class='insert'>"),d>l?c[3].push(F[1]):c[3].push(m[v]),c[3].push("&#10;</li>"),x+=1)):(d>l||y>v)&&(x+=1,0>u&&h[l]===m[v]&&(h[l-1]!==m[v-1]||0===l&&0===v)&&h[l+1]===m[v+1]&&(d-l>1||y-v>1)?(w=c[0].length,e===D-1?d>y?c[0].push("<li class='fold' title='folds from line "+x+" to line "+(d+3)+"'>"):c[0].push("<li class='fold' title='folds from line "+x+" to line "+(y+3)+"'>"):c[0].push("<li class='fold' title='folds from line "+x+" to line xxx'>"),c[0].push("- "+(l+1))):(c[0].push("<li>"),c[0].push(l+1)),c[0].push("</li>"),c[2].push("<li>"),c[2].push(v+1),c[2].push("</li>"),c[3].push("<li class='"),c[3].push(A),c[3].push("'>"),c[3].push(h[l]),c[3].push("&#10;</li>"),"equal"!==A&&(t+=1)),N===!0?(l+=1,N=!1):k===!0?(v+=1,k=!1):(l+=1,v+=1)):(0>u&&h[l]!==m[v]&&(c[0][w]=c[0][w].replace("xxx",x)),N===!1&&k===!1&&"string"==typeof h[l]&&"string"==typeof m[v]?(""===h[l]&&""!==m[v]&&(A="insert"),""===m[v]&&""!==h[l]&&(A="delete"),F="replace"===A&&d>l&&y>v&&h[l]!==m[v]?L(h[l],m[v]):[h[l],m[v]],(l===Number(c[0][c[0].length-1].substring(c[0][c[0].length-1].indexOf(">")+1,c[0][c[0].length-1].lastIndexOf("<")))-1||v===Number(c[2][c[2].length-1].substring(c[2][c[2].length-1].indexOf(">")+1,c[2][c[2].length-1].lastIndexOf("<")))-1)&&(O=!0),O===!1?(x+=1,d>l?(0>u&&h[l]===m[v]&&(h[l-1]!==m[v-1]||e>1&&"equal"!==g[e-1][0]&&l===g[e-1][2]||0===l&&0===v)&&h[l+1]===m[v+1]&&(d-l>1||y-v>1)?e===D-1?d>y?c[0].push("<li class='fold' title='folds from line "+x+" to line "+(d+2)+"'>- "+(l+1)+"</li>"):c[0].push("<li class='fold' title='folds from line "+x+" to line "+(d+1+b)+"'>- "+(l+1)+"</li>"):(w=c[0].length,c[0].push("<li class='fold' title='folds from line "+(l+1)+" to line xxx'>- "+(l+1)+"</li>")):c[0].push("<li>"+(l+1)+"</li>"),c[1].push("<li class='"),v>=y?c[1].push("delete"):""===h[l]&&""!==m[v]?c[1].push("empty"):c[1].push(A),c[1].push("'>"),c[1].push(F[0]),c[1].push("&#10;</li>")):R===!0&&(c[0].push("<li class='empty'>&#8203;&#10;</li>"),c[1].push("<li class='empty'>&#8203;</li>")),y>v?(c[2].push("<li>"+(v+1)+"</li>"),c[3].push("<li class='"),l>=d?(c[3].push("insert"),b+=1,x-=1):""===m[v]&&""!==h[l]?c[3].push("empty"):c[3].push(A),c[3].push("'>"),c[3].push(F[1]),c[3].push("&#10;</li>")):R===!0&&(c[2].push("<li class='empty'>&#8203;&#10;</li>"),c[3].push("<li class='empty'>&#8203;</li>"))):O=!1,d>l&&(l+=1),y>v&&(v+=1)):N===!0||"string"==typeof h[l]&&"string"!=typeof m[v]?(l!==Number(c[0][c[0].length-1].substring(c[0][c[0].length-1].indexOf(">")+1,c[0][c[0].length-1].lastIndexOf("<")))-1&&(x+=1,c[0].push("<li>"+(l+1)+"</li>"),c[1].push("<li class='delete'>"),c[1].push(h[l]),c[1].push("&#10;</li>"),c[2].push("<li class='empty'>&#8203;&#10;</li>"),c[3].push("<li class='empty'>&#8203;</li>")),N=!1,l+=1):(k===!0||"string"!=typeof h[l]&&"string"==typeof m[v])&&(v!==Number(c[2][c[2].length-1].substring(c[2][c[2].length-1].indexOf(">")+1,c[2][c[2].length-1].lastIndexOf("<")))-1&&(x+=1,c[0].push("<li class='empty'>&#8203;&#10;</li>"),c[1].push("<li class='empty'>&#8203;</li>"),c[2].push("<li>"+(v+1)+"</li>"),c[3].push("<li class='insert'>"),c[3].push(m[v]),c[3].push("&#10;</li>")),k=!1,v+=1))}return"string"==typeof c[0][w]&&(c[0][w]=c[0][w].replace("xxx",x)),s===!0?(c.push(t),c):(i.push(c[0].join("")),i.push("</ol><ol class="),p===!0?i.push("'count'>"):(i.push("'data'>"),i.push(c[1].join("")),i.push("</ol></div>")),i.push(c[2].join("")),i.push("</ol><ol class='data'>"),i.push(c[3].join("")),p===!0?i.push("</ol>"):i.push("</ol></div>"),i.push("<p class='author'>Diff view written by <a href='http://prettydiff.com/'>Pretty Diff</a>.</p></div>"),E=i.join(""),[E.replace(/li\ class='equal'><\/li/g,"li class='equal'>&#10;</li").replace(/\$#gt;/g,"&gt;").replace(/\$#lt;/g,"&lt;").replace(/%#lt;/g,"$#lt;").replace(/%#gt;/g,"$#gt;"),t,n])}()},c=function(e){var t=e.braceline===!0||"true"===e.braceline,i=e.bracepadding===!0||"true"===e.bracepadding,o="allman"===e.braces,a="string"==typeof e.inchar&&e.inchar.length>0?e.inchar:" ",s="noindent"===e.comments?"noindent":"nocomment"===e.comments?"nocomment":"indent",u=e.elseline===!0||"true"===e.elseline,c=e.inlevel>-1?e.inlevel:Number(e.inlevel)>-1?Number(e.inlevel):0,p="minify"===e.mode||"parse"===e.mode||"diff"===e.mode?e.mode:"beautify",f=e.obfuscate===!0||"true"===e.obfuscate,d=e.objsort===!0||"true"===e.objsort,h=e.preserve!==!1&&"false"!==e.preserve,m="double"===e.quoteConvert||"single"===e.quoteConvert?e.quoteConvert:"none",g=e.correct===!0||"true"===e.correct,v=isNaN(e.insize)===!1&&Number(e.insize)>=0?Number(e.insize):4,y="string"==typeof e.source&&e.source.length>0?e.source+" ":"Error: no source code supplied to jspretty!",_=e.space!==!1&&"false"!==e.space,x=e.jsscope===!0||"true"===e.jsscope?"report":"html"!==e.jsscope&&"report"!==e.jsscope?"none":e.jsscope,b="string"==typeof e.styleguide?e.styleguide.toLowerCase().replace(/\s/g,""):"",w=e.titanium===!0||"true"===e.titanium,S=e.topcoms===!0||"true"===e.topcoms,E="each"===e.varword||"list"===e.varword?e.varword:"none",C=e.vertical!==!1&&"false"!==e.vertical,T=isNaN(Number(e.wrap))===!0?0:Number(e.wrap),P=[0,""],I=[],D=[],A=[],N=[],k=[],O=[],R=[],j=[],F=[],L=0,M=0,B={comma:0,commentBlock:{chars:0,token:0},commentLine:{chars:0,token:0},container:0,number:{chars:0,token:0},operator:{chars:0,token:0},regex:{chars:0,token:0},semicolon:0,server:{chars:0,token:0},space:{newline:0,other:0,space:0,tab:0},string:{chars:0,quote:0,token:0},word:{chars:0,token:0}},U="";return"Error: no source code supplied to jspretty!"===y?y:("none"!==x&&(T=0),"airbnb"===b?(a=" ",h=!0,m="single",g=!0,v=2,E="each",T=80):"crockford"===b||"jslint"===b?(i=!1,u=!1,a=" ",g=!0,v=4,_=!0,E="list",C=!1):"google"===b?(a=" ",h=!0,m="single",g=!0,v=4,C=!1,T=-1):"grunt"===b?(a=" ",v=2,m="single",E="each"):"jquery"===b?(i=!0,a="	",m="double",g=!0,v=1,E="each",T=80):"mrdoobs"===b?(t=!0,i=!0,a="	",g=!0,v=1,C=!1):"mediawiki"===b?(i=!0,a="	",h=!0,m="single",g=!0,v=1,_=!1,T=80):"meteor"===b?(a=" ",g=!0,v=2,T=80):"yandex"===b&&(i=!1,m="single",g=!0,E="each",C=!1),w===!0&&(g=!1,I.push("x{"),D.push("start"),N.push(0)),function(){var e=0,r=y.length,i=y.split(""),o="",a="",u=0,c=0,l=-1,h=[],v={count:[],index:0,len:-1,state:[]},w={count:[],len:-1,status:[]},S={consec:[],count:[],index:[],len:-1,priorreturn:[],semi:[],word:[]},C={count:[],index:[],len:-1},A=function(){var e=0,t=0,n=0,r=I.length-1,i=r,o=[],a=0,s=0,u=0,c=function(e,t){var n=e[0],i=t[0];if("comment"===D[n]||"comment-inline"===D[n])do n+=1;while(r>n&&("comment"===D[n]||"comment-inline"===D[n]));if("comment"===D[i]||"comment-inline"===D[i])do i+=1;while(r>i&&("comment"===D[i]||"comment-inline"===D[i]));return I[n].toLowerCase()>I[i].toLowerCase()?1:-1},l=!0,p=[],f=[],d=[];if(","===I[i]||"comment"===D[i]||"comment-inline"===D[i])do i-=1;while(i>0&&(","===I[i]||"comment"===D[i]||"comment-inline"===D[i]));for(e=i;e>-1;e-=1)if("end"===D[e]&&(t+=1),("start"===D[e]||"method"===D[e])&&(t-=1),0===t&&(","===I[e]&&(l=!0,u=e+1),l===!0&&","===I[e]&&i>u&&(o.push([u,i+1,!1]),i=u-1)),0>t&&r>e){if(o.length>0&&o[o.length-1][0]>e+1&&o.push([e+1,o[o.length-1][0]-1,o[o.length-1][2]]),o.length>1&&("="===I[e-1]||":"===I[e-1]||"("===I[e-1]||"["===I[e-1]||","===I[e-1]||0===e)){for(o.sort(c),a=o.length,l=!1,t=0;a>t;t+=1){for(s=o[t][1],n=o[t][0];s>n;n+=1)p.push(I[n]),f.push(D[n]),d.push(N[n]),","===I[n]?l=!0:","!==I[n]&&"comment"!==D[n]&&"comment-inline"!==D[n]&&(l=!1);if(d[d.length-1]=a-1>t&&o[t+1][2]===!0?2:0,l===!1){if(n=f.length-1,"comment"===f[n]||"comment-inline"===f[n])do n-=1;while(n>0&&("comment"===f[n]||"comment-inline"===f[n]));n+=1,p.splice(n,0,","),f.splice(n,0,"separator"),2===d[n-1]?(d[n-1]=0,d.splice(n,0,2)):d.splice(n,0,0)}}if(n=f.length-1,"comment"===f[n]||"comment-inline"===f[n])do n-=1;while(n>0&&("comment"===f[n]||"comment-inline"===f[n]));p.splice(n,1),f.splice(n,1),d.splice(n,1),a=I.length-(e+1),I.splice(e+1,a),D.splice(e+1,a),N.splice(e+1,a),I=I.concat(p),D=D.concat(f),N=N.concat(d)}return}},k=function(){w.count.pop(),w.len-=1,w.status.pop(),d===!0&&A()},O=function(){S.consec.pop(),S.count.pop(),S.index.pop(),S.len-=1,S.priorreturn.pop(),S.semi.pop(),S.word.pop()},R=function(){C.count.pop(),C.index.pop(),C.len-=1},j=function(){var e=0,n=!1,r=N.length-1,i=N[r];if(!(S.len<0)){if(e=S.index[S.len],n=S.consec[S.len],"comment"===D[e]||"comment-inline"===D[e]){do e-=1;while(e>0&&("comment"===D[e]||"comment-inline"===D[e]));e+=1}"else"===S.word[S.len]&&I[e]===S.word[S.len]&&(e+=1),S.len>-1&&0===S.count[S.len]&&(I.splice(e,0,"x{"),D.splice(e,0,"start"),t===!0?(N.splice(e,0,2),N[r]=2,N.push(0)):(N[r]=0,N.splice(e,0,0),N.push(i)),I.push("x}"),D.push("end"),S.priorreturn[S.len]===!0&&(I.push("x;"),D.push("separator"),N.push(0)),O(),n===!0&&j())}},L=function(e){var t=e;do t-=1;while("\\"===i[t]&&t>0);return 1===(e-t)%2?!0:!1},M=function(){var e=D.length;do e-=1;while(e>0&&("comment"===D[e-1]||"comment-inline"===D[e-1]));I.splice(e,0,","),D.splice(e,0,"separator")},U=function(){var e=[],t=!0,n="+=",r="",i="",o="";if(u=I.length,r=I[u-1],i=I[u-2],o=I[u-3],!(g!==!0||"++"!==r&&"--"!==r&&"++"!==i&&"--"!==i||"["!==o&&";"!==o&&"x;"!==o&&"}"!==o&&"{"!==o&&"("!==o&&")"!==o&&","!==o&&"return"!==o)){if("++"===r||"--"===r){if("["===o||"("===o||","===o||"return"===o)return;"--"===i&&(n="-="),t=!1}else"--"===i&&(n="-=");t===!0?(e.push(r),e.push(D[u-1]),e.push(N[u-1]),I.pop(),D.pop(),N.pop(),I.pop(),D.pop(),N.pop(),I.push(e[0]),D.push(e[1]),N.push(e[2]),I.push(n),D.push("operator"),I.push("1"),D.push("literal")):(I.pop(),D.pop(),N.pop(),I.push(n),D.push("operator"),N.push(0),I.push("1"),D.push("literal"),N.push(0))}},V=function(){var t=I.length-1,n=t,s=0,u=I[t],c=D[t],l=!1,p=!1,f=!1,d=!1;if("comment"===c||"comment-inline"===c){do t-=1;while(t>0&&("comment"===D[t]||"comment-inline"===D[t]));if(1>t)return;u=I[t],c=D[t]}if(void 0!==u&&"start"!==c&&"separator"!==c&&"operator"!==c&&"x}"!==u&&";"!==u&&"x;"!==u&&"var"!==u&&"else"!==u&&0!==u.indexOf("#!/")&&!(w.len>-1&&w.status[w.len]===!0&&0===w.count[w.len])){if("literal"===c&&"start"!==D[t-1]||"literal"!==c)for(n=n;n>-1;n-=1){if("end"===D[n]?s+=1:("start"===D[n]||"method"===D[n])&&(s-=1),0>s){if("do"===I[n-1]||"word"===c||"literal"===c||d===!0&&l===!1)break;return}if(0===s){if(0===n&&("{"===I[0]&&"}"===u||"["===I[0]&&"]"===u))return;if("("===I[n]&&("function"===I[n-1]||"function"===I[n-2]||")"===u&&I[n-1]===S.word[S.len]))return;if("do"===I[n]||I[n]===S.word[S.len])break;if("}"!==i[e]||"start"!==D[n]&&"method"!==D[n]||(n-=1),"else"===I[n-1]&&n!==t||"else"===I[n]||"try"===I[n]||"finally"===I[n]||l===!0&&","===I[n]||"catch"===I[n-1]){if("return"===I[n])break;return}if(")"===u){if("if"===I[n-1]||"for"===I[n-1]||"with"===I[n-1])return;break}if("if"===I[n-1]||"for"===I[n-1]||"else"===I[n-1]||"with"===I[n-1])break;if(":"===I[n]?l=!0:"operator"===D[n]&&(d=!0),"="===I[n]||"return"===I[n]||","===I[n]||";"===I[n]||"x;"===I[n]||"?"===I[n]&&l===!0)break;if(")"===I[n-1]&&("{"===I[n]||"x}"===I[n])||")"===I[n]&&("{"===I[n+1]||"x{"===I[n+1])){for(s=0,")"===I[n]&&(r+=1),l=!1,n-=1;n>-1;n-=1){if("end"===D[n]?s+=1:("start"===D[n]||"method"===D[n])&&(s-=1),0>s)return;
if(0===s&&"("===I[n]&&(f=!0,"if"===I[n-1]||"for"===I[n-1]||"with"===I[n-1]))return;if(0===s&&f===!0){if(l===!0&&"?"===I[n]){p=!0;break}if(n-=1,"function"===I[n]&&("operator"===D[n-1]&&":"!==I[n-1]||"return"===I[n-1])||"function"===I[n-1]&&("operator"===D[n-2]||"return"===I[n-2])){p=!0;break}if("function"===I[n]&&":"===I[n-1])l=!0;else if(l===!1)return}}if(p===!1)return;break}}}"if"!==I[n]&&"for"!==I[n]&&"else"!==I[n]&&"with"!==I[n]&&(o=";",a="separator",I.splice(t+1,0,"x;"),D.splice(t+1,0,"separator"),N.splice(t+1,0,0),j())}},Q=function(){var e=D.length;do e-=1;while(e>0&&("comment"===D[e]||"comment-inline"===D[e]));"x;"===I[e]&&(I.splice(e,1),D.splice(e,1),N.splice(e,1))},G=function(){var e=I.length;do e-=1;while(e>-1&&"x}"===I[e]);e+=1,I.splice(e,0,o),D.splice(e,0,a)},H=function(e){var t="double"===m,n=t===!0?'"':"'";return e=e.slice(1,e.length-1),e=t===!0?e.replace(/"/g,"'"):e.replace(/'/g,'"'),n+e+n},z=function(e){var t=I[I.length-1],n=T,r=e.indexOf(" ")>0;if(0!==I.length)if(e=e.slice(2),r===!0){if(0===t.indexOf("//")&&t.length<n&&t.indexOf(" ")>0){if(n=n-t.length-1," "!==e.charAt(n))do n-=1;while(n>0&&" "!==e.charAt(n));n>0&&(I[I.length-1]=t+" "+e.slice(0,n),e=e.slice(n+1))}n=T-2;do{if(" "!==e.charAt(n))do n-=1;while(n>0&&" "!==e.charAt(n));I.push("//"+e.slice(0,n)),D.push("comment"),N.push(0),e=e.slice(n+1),n=T-2}while(e.length>n);""!==e&&(I.push("//"+e.slice(0,n)),D.push("comment"),N.push(0))}else{0===t.indexOf("//")&&t.length<n&&-1===t.indexOf(" ")&&-1===e.indexOf(" ")&&(n-=t.length,I[I.length-1]=t+e.slice(0,n),e=e.slice(n),n=T),n-=2;do I.push("//"+e.slice(0,n)),D.push("comment"),N.push(0),e=e.slice(n);while(e.length>n);""!==e&&(I.push("//"+e.slice(0,n)),D.push("comment"),N.push(0))}},W=function(e){var t=0,n=0,r=e.charAt(0);if(e.length>T+2){for(e=e.slice(1,e.length-1),n=parseInt(e.length/T,10)*T,t=0;n>t;t+=T)e.charAt(t+T)===r&&"\\"===e.charAt(t+T-1)?(I.push(r+e.slice(t,t+T+1)+r),t+=1):I.push(r+e.slice(t,t+T)+r),D.push("literal"),N.push(0),I.push("+"),D.push("operator"),N.push(0);t-T!==T?(I.push(r+e.slice(t,t+T)+r),D.push("literal"),N.push(0)):(I.pop(),D.pop(),N.pop())}else I.push(e),D.push("literal"),N.push(0);u=I.length},q=function(e,t){var n=0,r="";e=e.slice(1,e.length-1),I.pop(),D.pop(),N.pop(),n=I.length-1,r=I[n],t===!0?(r=r.slice(0,r.length-1)+e+r.charAt(0),I.pop(),D.pop(),N.pop(),W(r)):I[n]=r.slice(0,r.length-1)+e+r.charAt(0)},X=function(){var e=0,t=0,n=I.length-1;if(","===I[n]||"comment"===D[n]||"comment-inline"===D[n])do n-=1;while(n>0&&(","===I[n]||"comment"===D[n]||"comment-inline"===D[n]));for(e=n;e>-1;e-=1){if("end"===D[e]&&(t+=1),("start"===D[e]||"method"===D[e])&&(t-=1),0===t&&")"===I[e-1]&&"{"===I[e]){for(e-=1;e>-1;e-=1)if("end"===D[e]&&(t+=1),("start"===D[e]||"method"===D[e])&&(t-=1),0===t&&"word"===D[e-1])return"function"===I[e-1]||"function"===I[e-2]?"method":"start";return"start"}if(0>t){if("start"===D[e]&&"start"===D[e+1]&&"function"!==I[e+2]){do e+=1;while(n>e&&"start"===D[e])}else if("{"===I[e]&&")"===I[e-1])for(t=1,e-=2;e>-1&&("end"===D[e]&&(t+=1),("start"===D[e]||"method"===D[e])&&(t-=1),0!==t);e-=1);return"function"!==I[e+1]&&(e-=1,"function"===I[e+1])?"start":("word"===D[e]&&"function"!==I[e]&&(e-=1),"function"===I[e]||"function"===I[e-1]||"function"===I[e+1]?"method":"start")}}return"start"},$=function(){var e=I.length-1,t=0,n=e,r=0;for(e=e;e>-1&&("end"===D[e]&&(t+=1),("start"===D[e]||"method"===D[e])&&(t-=1),-1!==t&&(0!==t||";"!==I[e]));e-=1);if("method"===D[e]&&"Array"===I[e-1]&&"new"===I[e-2]){if(1===n-e&&/^([0-9])$/.test(I[n])===!0){r=I[n]-1,I.pop(),I.pop(),I.pop(),D.pop(),D.pop(),D.pop(),N.pop(),N.pop(),N.pop(),I[I.length-1]="[",D[D.length-1]="start",N[N.length-1]=0;do I.push(","),D.push("separator"),N.push(0),r-=1;while(r>0)}else I[e]="[",D[e]="start",I.splice(e-2,2),D.splice(e-2,2),N.splice(e-2,2);I.push("]")}else I.push(")");D.push("end"),N.push(0)},J=function(t,n){var r=e,o=D.length;if(!(F.length>0)){F.push(t);do r-=1;while("\n"!==i[r]&&"\r"!==i[r]&&r>0);if(F.push(i.slice(r,n).join("")),o>1)do o-=1;while(o>0&&"comment"!==D[o]);F=o>-1&&o<I.length&&0===I[o].indexOf("//")&&0===F[1].replace(/^\s+/,"").indexOf(I[o+1])&&(1===I[o].split('"').length%2||1===I[o].split("'").length%2)?[t,I[o]+F[1]]:[t,F[1]]}},K=function(t,n){var o=0,a=0,s=n.split(""),u=s.length-1,c=r,l=[t],p=e+t.length,f="",d=!1;if("\r"===n&&(s=["\n"]),"\\"===i[e-1]&&L(e-1)===!0&&('"'===i[e]||"'"===i[e])){if(I.pop(),D.pop(),N.pop(),"{"!==I[0])return'"'===i[e]?'\\"':"\\'";'"'===i[e]?(t='"',n='\\"',l=['"']):(t="'",n="\\'",l=["'"]),d=!0}for(o=p;c>o;o+=1){if(l.push(i[o]),!('"'!==t&&"'"!==t||"\\"===i[o-1]||"\n"!==i[o]&&"\r"!==i[o]&&o!==c-1)){J("Unterminated string in JavaScript.",o);break}if(i[o]!==s[a]||"\\"===i[o-1]&&L(o-1)!==!1)i[o+1]!==s[a]&&(a=0);else{if(a===u)break;a+=1}}return d===!0&&(f=l[l.length-1],l.pop(),l.pop(),l.push(f)),e=o,"//"===t&&(B.space.newline+=1,l.pop()),f=l.join(""),"none"!==x&&(f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),f},Y=function(){var t=["=","<",">","+","*","?","|","^",":","&","%","~"],n=0,o=0,a=r,s=[i[e]],u=t.length,c="";if(r-1>e){if("<"!==i[e]&&"<"===i[e+1])return i[e];if("!"===i[e]&&"/"===i[e+1])return"!";if(":"===i[e]&&":"!==i[e+1])return w.len>-1&&0===w.count[w.len]&&(w.status[w.len]=!0),":";if("-"===i[e]&&("-"===i[e+1]?c="--":"="===i[e+1]&&(c="-="),""===c))return"-"}if(""===c){for(n=e+1;a>n;n+=1){for(o=0;u>o;o+=1)if(i[n]===t[o]){s.push(t[o]);break}if(o===u)break}c=s.join("")}return e+=c.length-1,"none"!==x&&(c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),"?"===c&&w.len>-1&&0===w.count[w.len]&&w.status[w.len]===!1&&(w.count[w.len]+=1),c},Z=function(){var t=0,n=r,o=0,a=0,s=["/"],u="",c=!1;for(t=e+1;n>t;t+=1)if(s.push(i[t]),("\\"!==i[t-1]||"\\"===i[t-2])&&("["===i[t]&&(c=!0),"]"===i[t]&&(c=!1)),"/"===i[t]&&c===!1){if("\\"!==i[t-1])break;for(a=0,o=t-1;o>0&&"\\"===i[o];o-=1)a+=1;if(0===a%2)break}return"g"===i[t+1]||"i"===i[t+1]||"m"===i[t+1]||"y"===i[t+1]?(s.push(i[t+1]),i[t+2]===i[t+1]||"g"!==i[t+2]&&"i"!==i[t+2]&&"m"!==i[t+2]&&"y"!==i[t+2]?e=t+1:(s.push(i[t+2]),i[t+3]===i[t+1]||i[t+3]===i[t+2]||"g"!==i[t+3]&&"i"!==i[t+3]&&"m"!==i[t+3]&&"y"!==i[t+3]?e=t+2:(s.push(i[t+3]),i[t+4]===i[t+1]||i[t+4]===i[t+2]||i[t+4]===i[t+3]||"g"!==i[t+4]&&"i"!==i[t+4]&&"m"!==i[t+4]&&"y"!==i[t+4]?e=t+3:(s.push(i[t+4]),e=t+4)))):e=t,u=s.join(""),"none"!==x&&(u=u.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),u},et=function(){var t=[i[e]];for(e+=1;r>e;e+=1){if(t.push(i[e]),"`"===i[e]&&("\\"!==i[e-1]||L(e-1)===!1)){h.pop();break}if("$"===i[e-1]&&"{"===i[e]&&("\\"!==i[e-2]||L(e-2)===!1)){h[h.length-1]=!0;break}}return t.join("")},tt=function(){var t=0,n=r,o=[i[e]],a="."===o[0];if(r-2>e&&"x"===i[e+1]&&/[0-9A-Fa-f]/.test(i[e+2]))for(o.push("x"),t=e+2;n>t&&/[0-9A-Fa-f]/.test(i[t]);t+=1)o.push(i[t]);else for(t=e+1;n>t&&(/[0-9]/.test(i[t])||"."===i[t]&&a===!1);t+=1)o.push(i[t]),"."===i[t]&&(a=!0);if(n-1>t&&("e"===i[t]||"E"===i[t]))for(o.push(i[t]),"-"===i[t+1]&&(o.push("-"),t+=1),a=!1,t+=1;n>t&&(/[0-9]/.test(i[t])||"."===i[t]&&a===!1);t+=1)o.push(i[t]),"."===i[t]&&(a=!0);return e=t-1,o.join("")},nt=function(){var t=[],n=0,a=r,s=1,u="",l=/\s/,p=!1;for(n=e;a>n;n+=1){if("\n"===i[n])B.space.newline+=1,p=!0;else if(" "===i[n])B.space.space+=1;else if("	"===i[n])B.space.tab+=1;else{if(l.test(i[n])!==!0)break;B.space.other+=1,"\r"===i[n]&&(p=!0)}t.push(i[n])}e=n-1,0!==I.length&&(u=t.join(""),u.indexOf("\n")>-1&&0!==I[I.length-1].indexOf("#!/")&&((u.indexOf("\n")!==u.lastIndexOf("\n")||0===I[I.length-1].indexOf("//"))&&(s=2),N[N.length-1]=s),p===!0&&";"!==o&&c<I.length&&(V(),c=I.length))},rt=function(){var t=l,n=1,r=[],s="",c=!1;do r.push(i[t]),"\\"===i[t]&&J("Illegal escape in JavaScript.",e),t+=1;while(e>t);if(s=r.join(""),l=-1,D.length>1&&"function"===s&&"method"===D[D.length-1]&&("{"===I[I.length-2]||"x{"===I[I.length-2])&&(D[D.length-1]="start"),D.length>2&&"function"===s&&"method"===a&&("}"===I[I.length-2]||"x}"===I[I.length-2]))if("}"===I[I.length-2]){for(t=I.length-3;t>-1&&("end"===D[t]?n+=1:("start"===D[t]||"end"===D[t])&&(n-=1),0!==n);t-=1);if("{"===I[t]&&")"===I[t-1]){for(n=1,t-=2;t>-1&&("end"===D[t]?n+=1:("start"===D[t]||"end"===D[t])&&(n-=1),0!==n);t-=1);"function"!==I[t-1]&&"function"!==I[t-2]&&(D[D.length-1]="start")}}else D[D.length-1]="start";if(g!==!0||"Object"!==s&&"Array"!==s||"("!==i[e+1]||")"!==i[e+2]||"="!==I[u-2]||"new"!==I[u-1]){if(n=D.length-1,t=n,"none"!==E&&"var"===s){if("comment"===D[n]||"comment-inline"===D[n])do n-=1;while(n>0&&("comment"===D[n]||"comment-inline"===D[n]));if("list"===E&&C.len>-1&&C.index[C.len]===n)return B.word.token+=1,B.word.chars+=s.length,o=",",a="separator",I[n]=o,D[n]=a,C.count[C.len]=0,C.index[C.len]=n,void 0;C.len+=1,C.count.push(0),C.index.push(n),n=t}else C.len>-1&&"var"!==s&&I.length===C.index[C.len]+1&&";"===I[C.index[C.len]]&&"var"!==o&&"list"===E&&R();if("else"===s&&("comment"===D[n]||"comment-inline"===D[n])){do t-=1;while(t>-1&&("comment"===D[t]||"comment-inline"===D[t]));"x;"!==I[t]||"}"!==I[t-1]&&"x}"!==I[t-1]||(I.splice(t,1),D.splice(t,1),N.splice(t,1),n-=1,t-=1);do r=[I[n],D[n],N[n]],I.pop(),D.pop(),N.pop(),I.splice(n-3,0,r[0]),D.splice(n-3,0,r[1]),N.splice(n-3,0,r[2]),t+=1;while(n>t)}"try"===s&&S.len>-1?S.count[S.len]+=1:"catch"===s&&S.len>-1&&(S.count[S.len]-=1),"do"===s&&(v.count.push(0),v.state.push(s),v.len+=1),"while"===s&&"do"===v.state[v.len]&&0===v.count[v.len]&&("while"===s&&(c=!0),"}"===o&&Q(),v.count.pop(),v.state.pop(),v.len-=1,v.index=I.length-1,j()),"if"===s&&S.len>-1&&"else"===I[S.index[S.len]]&&O(),("if"===s||"for"===s||"with"===s||"while"===s&&c===!1||"else"===s||"do"===s)&&(S.len>-1&&S.index[S.len]===I.length?S.consec.push(!0):S.consec.push(!1),"return"===o?S.priorreturn.push(!0):S.priorreturn.push(!1),S.word.push(s),S.count.push(0),"do"===s?S.index.push(I.length+1):S.index.push(I.length),S.semi.push(!1),S.len+=1),I.push(s),D.push("word"),o=s,a="word",B.word.token+=1,B.word.chars+=s.length,u=I.length}else"Object"===s?(I[u-1]="{",I.push("}")):(I[u-1]="[",I.push("]")),D[u-1]="start",D.push("end"),i[e+1]="",i[e+2]="",B.container+=2,e+=2;N.push(0)},it=function(){var t=[],s=!1,u=!1,c=0,l=0,p=0,f=0,d="=<>+*?|^:&.,;%(){}[]|~";if(d.indexOf(i[e+1])>-1||/\s/.test(i[e+1])===!0||/\d/.test(i[e+1])===!0&&("operator"===a||"literal"===a||"word"===a&&"return"!==o))return a="operator",Y();for(f=I.length-1;f>-1;f-=1){if("return"===I[f]||"operator"===D[f]||"method"===D[f]){a="markup",n=!0;break}if("("!==I[f])return a="operator",Y()}for(e=e;r>e;e+=1)if(t.push(i[e]),"{"===i[e])l+=1,s=!0;else if("}"===i[e])l-=1,0===l&&(s=!1);else if("<"===i[e]&&s===!1)c+=1,"/"===i[e+1]&&(u=!0);else if(">"===i[e]&&s===!1){if(c-=1,u===!0?p-=1:"/"!==i[e-1]&&(p+=1),0===c&&0===l&&1>p)return t.join("");u=!1}return t.join("")};for(e=0;r>e;e+=1){if(u=I.length,/\s/.test(i[e]))l>-1&&rt(),nt();else if("<"===i[e]&&"?"===i[e+1]&&"p"===i[e+2]&&"h"===i[e+3]&&"p"===i[e+4])l>-1&&rt(),o=K("<?php","?>"),a="literal",B.server.token+=1,B.server.chars+=o.length,I.push(o),D.push(a),N.push(0);else if("<"===i[e]&&"%"===i[e+1])l>-1&&rt(),o=K("<%","%>"),a="literal",B.server.token+=1,B.server.chars+=o.length,I.push(o),D.push(a),N.push(0);else if("<"===i[e]&&"!"===i[e+1]&&"-"===i[e+2]&&"-"===i[e+3]&&"#"===i[e+4])l>-1&&rt(),o=K("<!--#","-->"),a="literal",B.server.token+=1,B.server.chars+=o.length,I.push(o),D.push(a),N.push(0);else if("<"===i[e]&&"!"===i[e+1]&&"-"===i[e+2]&&"-"===i[e+3])l>-1&&rt(),o=K("<!--","-->"),a="comment",B.server.token+=1,B.server.chars+=o.length,I.push(o),D.push(a),N.push(0);else if("<"===i[e])l>-1&&rt(),o=it(),B.server.token+=1,B.server.chars+=o.length,I.push(o),D.push(a),N.push(0);else if("/"!==i[e]||e!==r-1&&"*"!==i[e+1])if((0===N.length||N[N.length-1]>0)&&"#"===i[e]&&"!"===i[e+1]&&"/"===i[e+2])o=K("#!/","\r"),o=o.slice(0,o.length-1),a="literal",B.server.token+=1,B.server.chars+=o.length,I.push(o),D.push(a),N.push(2);else if("/"!==i[e]||e!==r-1&&"/"!==i[e+1])if("/"===i[e]&&u>0&&("word"!==D[u-1]||"typeof"===o||"return"===o)&&"literal"!==a&&"end"!==a)l>-1&&rt(),"return"===o||"word"!==a?(o=Z(),a="regex",B.regex.token+=1,B.regex.chars+=o.length):(B.operator.token+=1,B.operator.chars+=1,o="/",a="operator"),I.push(o),D.push(a),N.push(0);else if("`"===i[e]||"}"===i[e]&&h[h.length-1]===!0)l>-1&&rt(),"`"===i[e]?h.push(!1):h[h.length-1]=!1,o=et(),a="literal",B.string.token+=1,"{"===o.charAt(o.length-1)?(B.string.quote+=3,B.string.chars+=o.length-3):(B.string.quote+=2,B.string.chars=o.length-2),I.push(o),D.push(a),N.push(0);else if('"'===i[e]||"'"===i[e])l>-1&&rt(),o=K(i[e],i[e]),a="literal",('"'===o.charAt(0)&&"single"===m||"'"===o.charAt(0)&&"double"===m)&&(o=H(o)),B.string.token+=1,o.length>1&&(B.string.chars+=o.length-2),B.string.quote+=2,"+"===I[u]&&0>T&&('"'===I[u-1].charAt(0)||"'"===I[u-1].charAt(0))?q(o,!1):T>0&&("operator"!==D[u]||"="===I[u]||":"===I[u]||"+"===I[u]&&"literal"===D[u-1])?"literal"===D[u-2]&&"+"===I[u-1]&&('"'===I[u-2].charAt(0)||"'"===I[u-2].charAt(0))&&I[u-2].length<T+2?q(o,!0):W(o):(I.push(o),D.push(a),N.push(0));else if(!("-"===i[e]&&r-1>e&&"="!==i[e+1]&&"-"!==i[e+1])||"literal"!==a&&"word"!==a||"return"===o||")"!==o&&"]"!==o&&"word"!==a&&"literal"!==a)if(-1===l&&(/\d/.test(i[e])||e!==r-2&&"-"===i[e]&&"."===i[e+1]&&/\d/.test(i[e+2])||e!==r-1&&("-"===i[e]||"."===i[e])&&/\d/.test(i[e+1])))l>-1&&rt(),"end"===a&&"-"===i[e]?(o="-",a="operator",B.operator.token+=1,B.operator.chars+=1):(o=tt(),a="literal",B.number.token+=1,B.number.chars+=o.length),I.push(o),D.push(a),N.push(0);else if(","===i[e])l>-1&&rt(),B.comma+=1,"comment"===a||"comment-inline"===a?M():C.len>-1&&0===C.count[C.len]&&"each"===E?(Q(),o="var",a="word",I.push(";"),D.push("separator"),N.push(0),I.push(o),D.push(a),N.push(0),C.index[C.len]=I.length-1):(o=",",a="separator",Q(),I.push(o),D.push(a),N.push(0));else if("."===i[e])l>-1&&rt(),B.operator.token+=1,"."===i[e+1]&&"."===i[e+2]?(o="...",a="operator",B.operator.chars+=3,e+=2):(Q(),o=".",a="separator",B.operator.chars+=1),I.push(o),D.push(a),N.push(0);else if(";"===i[e])l>-1&&rt(),C.len>-1&&0===C.count[C.len]&&("each"===E?R():C.index[C.len]=I.length),B.semicolon+=1,U(),o=";",a="separator",v.index===I.length-1&&Q(),"x}"===I[I.length-1]?G():(I.push(o),D.push(a)),N.push(0),j();else if("("===i[e])l>-1&&rt(),S.len>-1&&(S.count[S.len]+=1),C.len>-1&&(C.count[C.len]+=1),v.len>-1&&(v.count[v.len]+=1),B.container+=1,a=")"===o||"x;"===I[I.length-1]?"method":"comment"===a||"comment-inline"===a||"start"===a?"start":"function"===I[u-1]&&_===!1||"function"===I[I.length-2]?"method":0===u||"return"===o||"function"===o||"for"===o||"if"===o||"with"===o||"while"===o||"switch"===o||"catch"===o||"separator"===a||"operator"===a||e>0&&/\s/.test(i[e-1])===!0?"start":"end"===a?X():"method",Q(),o="(",I.push(o),D.push(a),N.push(0);else if("["===i[e])l>-1&&rt(),S.len>-1&&(S.count[S.len]+=1),C.len>-1&&(C.count[C.len]+=1),v.len>-1&&(v.count[v.len]+=1),B.container+=1,o="[",a="start",I.push(o),D.push(a),N.push(0);else if("{"===i[e])l>-1&&rt(),C.len>-1&&(C.count[C.len]+=1),v.len>-1&&(v.count[v.len]+=1),")"!==o&&"else"!==o&&"do"!==o?(w.count.push(0),w.status.push(!1),w.len+=1):w.len>-1&&(w.count[w.len]+=1),("else"===o||"do"===o||")"===o&&S.len>-1&&0===S.count[S.len]&&"catch"!==I[I.length-4]&&("if"===S.word[S.len]||"for"===S.word[S.len]||"while"===S.word[S.len]||"with"===S.word[S.len]))&&O(),S.len>-1&&(S.count[S.len]+=1),")"===o&&Q(),B.container+=1,"comment"!==a&&"comment-inline"!==a||")"!==I[u-2]?(o="{",a="start"):(o=I[u-1],I[u-1]="{",a=D[u-1],D[u-1]="start"),I.push(o),D.push(a),t===!0?N.push(2):N.push(0);else if(")"===i[e])l>-1&&rt(),S.len>-1&&(S.count[S.len]-=1),C.len>-1&&(C.count[C.len]-=1,C.count[C.len]<0&&R()),Q(),B.container+=1,U(),o=")",a="end",g===!0?$():(I.push(o),D.push(a),N.push(0)),v.len>-1&&(v.count[v.len]-=1,0===v.count[v.len]&&"while"===v.state[v.len]&&(V(),v.count.pop(),v.state.pop(),v.len-=1,v.index=I.length-1));else if("]"===i[e])l>-1&&rt(),S.len>-1&&(S.count[S.len]-=1),C.len>-1&&(C.count[C.len]-=1,C.count[C.len]<0&&R()),v.len>-1&&(v.count[v.len]-=1),Q(),B.container+=1,U(),o="]",a="end",I.push(o),D.push(a),N.push(0);else if("}"===i[e]){if(l>-1&&rt(),","===o&&(I.pop(),D.pop(),N.pop()),v.len>-1&&(v.count[v.len]-=1),V(),C.len>-1&&(("list"===E&&0===C.count[C.len]||"x;"===I[I.length-1]&&"each"===E)&&R(),C.count[C.len]-=1,C.count[C.len]<0&&R()),w.len>-1&&(0===w.count[w.len]?k():w.count[w.len]-=1),"comment"===a||"comment-inline"===a){do u-=1;while(u>0&&("comment"===D[u]||"comment-inline"===a));o=I[u],u=I.length}t===!0&&(N[N.length-1]=2),","===o?(B.container+=1,o="}",a="end",I.push(o),D.push(a),N.push(0)):(";"===o&&"minify"===p&&f===!0&&(I[I.length-1]="x;"),U(),B.container+=1,o="}",a="end",I.push(o),D.push(a),N.push(0)),S.len>-1&&S.count[S.len]>0&&(S.count[S.len]-=1,0===S.count[S.len]&&j())}else"="===i[e]||"&"===i[e]||"<"===i[e]||">"===i[e]||"+"===i[e]||"-"===i[e]||"*"===i[e]||"/"===i[e]||"!"===i[e]||"?"===i[e]||"|"===i[e]||"^"===i[e]||":"===i[e]||"%"===i[e]||"~"===i[e]?(l>-1&&rt(),o=Y(),a="operator",B.operator.token+=1,B.operator.chars+=o.length,"!"!==o&&"++"!==o&&"--"!==o&&Q(),I.push(o),D.push(a),N.push(0)):0>l&&""!==i[e]&&(l=e);else l>-1&&rt(),B.operator.token+=1,B.operator.chars+=1,o="-",a="operator",I.push(o),D.push(a),N.push(0);else l>-1&&rt(),V(),o=K("//","\r"),B.commentLine.token+=1,B.commentLine.chars+=o.length,2===o.indexOf("# sourceMappingURL=")&&(P[0]=I.length,P[1]=o),"nocomment"!==s&&(a=0===N[N.length-1]&&"comment"!==a&&"comment-inline"!==a&&"mrdoobs"!==b?"comment-inline":"comment","comment"===a&&T>0&&o.length>T?z(o):(I.push(o),D.push(a),N.push(0)));else l>-1&&rt(),o=K("/*","*/"),B.commentBlock.token+=1,B.commentBlock.chars+=o.length,2===o.indexOf("# sourceMappingURL=")&&(P[0]=I.length,P[1]=o),"nocomment"!==s&&(a="comment",I.push(o),D.push(a),N.push(0));S.len>-1&&(0!==S.count[S.len]||")"!==I[I.length-1]||I[S.index[S.len]]!==S.word[S.len]||"if"!==S.word[S.len]&&"for"!==S.word[S.len]&&"while"!==S.word[S.len]&&"with"!==S.word[S.len]||(S.index[S.len]=I.length)),C.len>-1&&I.length===C.index[C.len]+2&&";"===I[C.index[C.len]]&&"var"!==o&&"list"===E&&R()}("}"!==I[I.length-1]&&"{"===I[0]||"{"!==I[0])&&("]"!==I[I.length-1]&&"["===I[0]||"["!==I[0])&&V(),S.len>-1&&j(),P[0]===I.length-1&&(I.push("\n"+P[1]),D.push("literal"),N.push(0))}(),g===!0&&!function(){var e=0,t=I.length;for(e=0;t>e;e+=1)"x;"===I[e]&&(I[e]=";",M+=1),"x{"===I[e]&&(I[e]="{"),"x}"===I[e]&&(I[e]="}")}(),"parse"===p?{token:I,types:D}:(n===!0&&"none"!==x&&"{"===I[0]&&(x="none",function(){var e=0,t=I.length;for(e=0;t>e;e+=1)"word"===D[e]&&"."!==I[e-1]&&(I[e]="[pdjsxscope]"+I[e]+"[/pdjsxscope]")}()),("beautify"===p||"diff"===p||"minify"===p&&f===!0)&&!function(){var e=0,t=I.length,n=c,r=[],a=[],s=[],l=!1,f=[],d=[],h=[],m=0,g="",v="",y=D[0],b=I[0],S=-1,E=[],C=[],P=[!1],F=function(){var t=0,r=0;for(t=e-1;t>-1;t-=1){if("end"===D[t])r+=1;else if(("start"===D[t]||"method"===D[t])&&(r-=1,0>r))return;if(0===r&&"?"===I[t]&&(n-=1,f.pop(),0===f.length))return}},B=function(){var t=0,r=1,i="}"===I[e-1];for(t=e-2;t>-1;t-=1){if(i===!0?("}"===I[t]&&(r+=1),"{"===I[t]&&(r-=1)):(")"===I[t]&&(r+=1),"("===I[t]&&(r-=1)),0>r)return A[e-1]=n,!1;if(0===r){if(")"===I[t-1]&&i===!1){for(r=1,t-=2;t>-1;t-=1)if(")"===I[t]&&(r+=1),"("===I[t]&&(r-=1),0===r)return"function"===I[t-1]||"function"===I[t-2]?!0:!1;return!1}return i===!1&&"function"===I[t+1]?!0:!1}}return!1},U=function(){if(f.length>0&&"."!==v&&F(),"comment-inline"===D[e-1]&&e>1)return function(){var n=0,r=t,i=I[e-1];for(A[e-2]="x",A[e-1]="x",n=e;r>n;n+=1)if(I[n-1]=I[n],D[n-1]=D[n],";"===I[n]||"x;"===I[n]||"{"===I[n]||"x{"===I[n]||N[n]>0)return I[n]=i,D[n]="comment-inline",e-=1,void 0;I[n-1]=i,D[n-1]="comment-inline",e-=1}();if("."===v)return A[e-1]="x",A.push("x");if(","===v){if(A[e-1]="x",s[s.length-1]===!1&&(s[s.length-1]=!0,function(){var t=0,n=0,i=!1,o=!1,s=!1;if(C[C.length-1]===!0)return a[a.length-1]=!0,void 0;for(t=e-1;t>-1;t-=1){if("end"===D[t]&&(n+=1),("start"===D[t]||"method"===D[t])&&(n-=1,"["===I[t]&&-1===n&&(r[r.length-1]=!1)),0===n){if(s===!1&&"return"===I[t])return a[a.length-1]=!0,void 0;i!==!1||"="!==I[t]&&";"!==I[t]&&"x;"!==I[t]||(i=!0),o!==!1||"&&"!==I[t]&&"||"!==I[t]||(o=!0),s!==!1||";"!==I[t]&&"x;"!==I[t]||(s=!0)}if(-1===n){if("method"===D[t])a[a.length-1]=!0;else if("{"===I[t]||"x{"===I[t]){if(")"!==I[t-1])r[r.length-1]=!0;else if(o===!1&&s===!1)for(t-=1;t>-1;t-=1)if("end"===D[t]&&(n+=1),("start"===D[t]||"method"===D[t])&&(n-=1),-1===n&&"("===I[t]){if("function"===I[t-1]||"function"===I[t-2]||"if"===I[t-1]||"for"===I[t-1]||"with"===I[t-1])return;break}}else if(o===!1&&s===!1&&("("===I[t]&&"for"===I[t-1]||"["===I[t]))return a[a.length-1]=!0,void 0;return o!==!1||s!==!1||d[d.length-1]!==!1||i!==!1&&"("!==I[t]||(a[a.length-1]=!0),void 0}}}()),(r[r.length-1]===!0||"+"===I[e-2]&&"literal"===y&&A[e-2]>0&&('"'===b.charAt(0)||"'"===b.charAt(0)))&&(A.push(n),r[r.length-1]===!0))return;return a[a.length-1]===!0?function(){var t=0,r=0;for(t=e-1;t>-1;t-=1)if("end"===D[t]&&(r+=1),("start"===D[t]||"method"===D[t])&&(r-=1),-1===r){if("["===I[t]&&"]"!==I[t+1]&&"]"!==I[t+2]&&(A[t]=n,"+"===I[e-2]&&"literal"===y&&A[e-2]>0&&('"'===b.charAt(0)||"'"===b.charAt(0)))){for(r=e-2;r>t;r-=2){if("+"!==I[r])return;'"'!==I[r-1].charAt(0)&&"'"!==I[r-1].charAt(0)&&(A[r]="s")}return}return A.push("s")}return A.push("s")}():d[d.length-1]===!0&&0===m?("]"!==b&&!function(){var t=0,r=!1;for(t=e-1;t>-1;t-=1)if("]"===I[t]&&(r=!0),"method"===D[t]||"start"===D[t])return"["===I[t]&&"]"!==I[t+1]&&r===!1&&(A[t]=n),void 0}(),"literal"!==y||"+"!==I[e-2]||'"'!==b.charAt(0)&&"'"!==b.charAt(0)?A.push(n):(A[e]=n,void 0)):A.push(n)}return";"===v||"x;"===v?("x;"===v&&(M+=1),A[e-1]="x",0===m?(d[d.length-1]===!0&&(d[d.length-1]=!1,(0===C.length||C[C.length-1]===!1)&&E.length>0&&E[E.length-1].length>1&&R.push(E[E.length-1]),E.pop(),function(){var t=0,r=0;for(t=e-1;t>-1;t-=1){if(("start"===D[t]||"method"===D[t])&&(r+=1),"end"===D[t]&&(r-=1),r>0)return;if(0===r){if("var"===I[t]||"let"===I[t]||"const"===I[t])return;if(","===I[t])return n-=1,void 0}}}()),A.push(n)):m>0?(d[d.length-1]===!0&&(d[d.length-1]=!1),A.push("s")):A.push("s")):void 0},V=function(){"*"===b&&"function"===I[e-2]?(A[e-2]="x",A[e-1]="s",A.push("x")):(A[e-1]="x",i===!0?A.push("s"):A.push("x")),a.push(!1),s.push(!1),C.push(!0),r.push(!1),P.push(!1),m>0&&(m+=1)},Q=function(){return a.push(!1),s.push(!1),C.push(!1),P.push(!1),"("!==v&&(n+=1),"for"===b&&(m=1),"{"===v||"x{"===v?(h.push(!1),E.push([]),"{"===v&&d.push(!1),"="===b||";"===b||"x;"===b||","===b||":"===b||"?"===b||"return"===b||"in"===b||"start"===y||"method"===y?r.push(!0):r.push(!1),o===!0&&"operator"!==y&&"return"!==b?A[e-1]=n-1:")"===b?A[e-1]="s":("{"===b||"x{"===b||"["===b||"}"===b||"x}"===b)&&(A[e-1]=n-1),A.push(n)):(r.push(!1),"("===v?("-"===b&&"("===I[e-2]&&(A[e-2]="x"),("function"===b||"switch"===b||"for"===b||"while"===b)&&(C[C.length-1]=!0),("none"!==x||"minify"===p)&&("function"===b||"function"===I[e-2])&&(O[O.length-1]=0),m>0&&"for"!==b&&(m+=1),("}"===b||")"===b)&&(A[e-1]="comment"!==D[e-1]&&"comment-inline"!==D[e-1]&&B()===!0?"x":n),"}"===b||"x}"===b?A.push("x"):(("-"===b&&(2>e||")"!==I[e-2]&&"]"!==I[e-2]&&"word"!==D[e-2]&&"literal"!==D[e-2])||_===!1&&"function"===b)&&(A[e-1]="x"),i===!0?A.push("s"):A.push("x"))):"["===v?("["===b&&(a[a.length-2]=!0),"return"===b?A[e-1]="s":"]"===b||"word"===y||")"===b?A[e-1]="x":("["===b||"{"===b||"x{"===b)&&(A[e-1]=n-1),function(){var r=0;for(r=e+1;t>r;r+=1){if("]"===I[r])return A.push("x");if(","===I[r])return A.push(n)}return A.push("x")}()):A.push("x"))},G=function(){f.length>0&&"?"!==I[e+1]&&":"!==I[e+1]&&F(),1===m&&")"===v&&d[d.length-1]===!0&&(d[d.length-1]=!1),")"!==v&&("markup"!==y||"markup"===y&&"return"!==I[e-2])?n-=1:m>0&&")"===v&&(m-=1),("}"===v||"x}"===v)&&("comment"!==D[e-1]&&"comment-inline"!==D[e-1]&&"{"!==b&&"x{"!==b&&"end"!==y&&"literal"!==y&&"separator"!==y&&"++"!==b&&"--"!==b&&d[d.length-1]===!1&&(2>e||";"!==I[e-2]||"x;"!==I[e-2]||"break"===b||"return"===b)&&!function(){var i=0,o=1,s=!1,u=a.length;for(i=e-1;i>-1;i-=1)if("end"===D[i]&&(o+=1),("start"===D[i]||"method"===D[i])&&(o-=1),1===o){if(("="===I[i]||";"===I[i]||"x;"===I[i])&&(s=!0),i>0&&"return"===I[i]&&(")"===I[i-1]||"{"===I[i-1]||"x{"===I[i-1]||"}"===I[i-1]||"x}"===I[i-1]||";"===I[i-1]||"x;"===I[i-1]))return n-=1,A[e-1]=n,void 0;if(":"===I[i]&&0===f.length||","===I[i]&&s===!1&&d[d.length-1]===!1)return;if(0===i||"{"===I[i-1]||"x{"===I[i-1]||"for"===I[i]||"if"===I[i]||"do"===I[i]||"function"===I[i]||"while"===I[i]||"var"===I[i]||"let"===I[i]||"const"===I[i]||"with"===I[i])return a[u-1]===!1&&u>1&&(e===t-1||")"!==I[e+1])&&r[r.length-1]===!1&&(n-=1),d[d.length-1]===!0&&(n-=1),void 0}}(),("none"!==x||"minify"===p)&&!function(){var t=0,n=1,r=[],i=!1;for(t=e-1;t>-1;t-=1){if("end"===D[t]?n+=1:("start"===D[t]||"method"===D[t])&&(n-=1),0>n)return;if(1===n&&("v"===O[t]&&I[t]!==r[r.length-1]?r.push(I[t]):")"===I[t]?i=!0:i===!0&&"word"===D[t]&&I[t]!==r[r.length-1]&&r.push(I[t]),t===S&&(O[t]=e-1,("let"===I[t]||"const"===I[t])&&(O[O.length-2]=[r,!0]),r=[],S=-1)),t>0&&"function"===I[t-1]&&"word"===D[t]&&I[t]!==r[r.length-1]&&r.push(I[t]),0===n){if("separator"===D[t]||"operator"===D[t]||"literal"===D[t]||"if"===I[t]||"else"===I[t]||"for"===I[t]||"switch"===I[t]||"do"===I[t]||"return"===I[t]||"while"===I[t]||"catch"===I[t]||"try"===I[t]||"with"===I[t])return;if("function"===I[t])return"word"===D[t+1]?O[t+2]=e:O[t+1]=e,O[O.length-1]=[r,!1],void 0}}}(),h.pop()),"comment"===D[e-1]&&"//"===I[e-1].substr(0,2)||"comment-inline"===D[e-1]?("x}"===I[e-2]&&(A[e-3]=n+1),A[e-1]=n,A.push("x")):"{"===b&&"}"===v||"["===b&&"]"===v?(A[e-1]="x","}"===v&&w===!0?A.push(n):A.push("x")):"]"===v?(a[a.length-1]===!0||"]"===b&&A[e-2]===n+1?A[e-1]=n:"s"===A[e-1]&&(A[e-1]="x"),a[a.length-1]===!1&&(("}"===b||"x}"===b)&&(A[e-1]=n),function(){var t=0,r=1;for(t=e-1;t>-1;t-=1){if("]"===I[t]&&(r+=1),"["===I[t]&&(r-=1,0===r)){if(t>0&&("{"===I[t+1]||"x{"===I[t+1]||"["===I[t+1]))return A[t]=n+1,void 0;if("["!==I[t+1]||l===!1)return A[t]="x",void 0;return}1===r&&"+"===I[t]&&A[t]>0&&(A[t]-=1)}}()),A.push("x")):")"===v&&"markup"!==y?(A[e-1]=i===!0&&"end"!==y&&"start"!==y&&"method"!==y?"s":"x",A.push("s")):"}"!==v&&"x}"!==v||r[r.length-1]!==!1||"word"!==y||a[a.length-1]!==!1||h[h.length-1]!==!1?"}"===v||"x}"===v||a[a.length-1]===!0?("}"===v&&"x}"===b&&"else"===I[e+1]?(A[e-2]=n+2,A.push("x")):A.push(n),A[e-1]=n):A.push("x"):(n+=1,A[e-1]=n,A.push(n)),l=a[a.length-1],a.pop(),s.pop(),C.pop(),"}"===v&&((d[d.length-1]===!0||r[r.length-1]===!0&&"{"!==b)&&E.length>0&&P[P.length-1]===!1&&E[E.length-1].length>1&&R.push(E[E.length-1]),E.pop(),d.pop()),P.pop(),r.pop()},H=function(){if("!"===v||"..."===v)return"("===b&&(A[e-1]="x"),("}"===b||"x}"===b)&&(A[e-1]=n),A.push("x");if(";"===b||"x;"===b)return 0===m&&(A[e-1]=n),A.push("x");if("?"===v&&(f.push(e),n+=1,A[e-1]=n),":"===v)return r[r.length-1]===!0?f.length>0?!function(){var t=0,r=0,i=f[f.length-1];for(t=e-1;t>i;t-=1)if("end"===D[t]?r+=1:("start"===D[t]||"method"===D[t])&&(r-=1),0>r)return;0===r&&(A[e-1]=n)}():A[e-1]="x":A[e-1]=f.length>0?n:"s",function(){var t=0,i=0,o=E.length>0?E[E.length-1][E[E.length-1].length-1]+1:0,a=I[o],s=void 0!==a&&a.indexOf("=")<0;if(0!==o){if(r[r.length-1]===!0&&E.length>0&&(void 0===a||s===!0&&"operator"===D[o])){if(t=e-1,"comment"===D[t]||"comment-inline"===D[t])do t-=1;while(t>0&&("comment"===D[t]||"comment-inline"===D[t]));0===f.length&&E[E.length-1].push(t)}for(t=e-1;t>-1&&(("start"===D[t]||"method"===D[t])&&(i+=1),"end"===D[t]&&(i-=1),0!==i||"="!==I[t]);t-=1){if(i>0){1===i&&"{"===I[t]&&0===f.length&&(r[r.length-1]=!0);break}if(0===i){if(0===f.length&&("case"===I[t]||"default"===I[t]))return"case"!==I[e+1]&&(n+=1),A.push(n);if(","===I[t]&&0===f.length){r[r.length-1]=!0;break}}}return A.push("s")}}();if("++"===v||"--"===v)return"literal"===y||"word"===y?(A[e-1]="x",A.push("s")):t-1>e&&("literal"===D[e+1]||"word"===D[e+1])?A.push("x"):A.push("s"),void 0;if("+"===v){if(!(b.length!==T+2&&b.length!==T+3||'"'!==I[e+1].charAt(0)&&"'"!==I[e+1].charAt(0)))return a[a.length-1]===!0||r[r.length-1]===!0||C[C.length-1]===!0||('"'===I[e-1].charAt(0)||"'"===I[e-1].charAt(0))&&("+"===I[e-2]||I[e-2].indexOf("=")>-1||"start"===D[e-2])?A.push(n+2):A.push(n+1);if(('"'===b.charAt(0)||"'"===b.charAt(0))&&void 0!==I[e+1]&&('"'===I[e+1].charAt(0)||"'"===I[e+1].charAt(0))&&("="===I[e-2]||"("===I[e-2]||"+"===I[e-2]&&A[e-2]>0))return b.length+3+I[e+1].length<T?A.push("s"):d[d.length-1]===!0?A.push(n):A.push(n+1),void 0}return("?"!==v||0===f.length)&&(A[e-1]="s"),v.indexOf("=")>-1&&"=="!==v&&"==="!==v&&"!="!==v&&"!=="!==v&&">="!==v&&"<="!==v&&E.length>0&&C[C.length-1]===!1&&r[r.length-1]===!1&&(P[P.length-1]===!0&&!function(){var t=0,n="";for(t=e-1;t>-1;t-=1){if(n=I[t],";"===n||"x;"===n||","===n)return E[E.length-1].push(e-1);if(n.indexOf("=")>-1&&"=="!==n&&"==="!==n&&"!="!==n&&"!=="!==n&&">="!==n&&"<="!==n)return}}(),function(){var n=0,r=0,i=!1,o="";for(n=e+1;t>n;n+=1){if("start"===D[n]||"method"===D[n]){if(i===!0&&"start"===D[n]&&"["!==I[n]){P[P.length-1]===!0&&(P[P.length-1]=!1,E[E.length-1].length>1&&R.push(E[E.length-1]),E.pop());break}r+=1}if("end"===D[n]&&(r-=1),0>r){P[P.length-1]===!0&&(P[P.length-1]=!1,E[E.length-1].length>1&&R.push(E[E.length-1]),E.pop());break}if(0===r){if(o=I[n],i===!0){if("operator"===D[n]||";"===I[n]||"x;"===I[n]||"var"===I[n]||"let"===I[n]||"const"===I[n])return void 0!==o&&o.indexOf("=")>-1&&"=="!==o&&"==="!==o&&"!="!==o&&"!=="!==o&&">="!==o&&"<="!==o&&P[P.length-1]===!1&&(E.push([e-1]),P[P.length-1]=!0),";"!==o&&"x;"!==o&&"var"!==o&&"let"!==o&&"const"!==o||P[P.length-1]!==!0||(P[P.length-1]=!1,E.length>0&&(E[E.length-1].length>1&&R.push(E[E.length-1]),E.pop())),void 0;P[P.length-1]!==!0||"return"!==o&&"break"!==o&&"continue"!==o&&"throw"!==o||(P[P.length-1]=!1,E[E.length-1].length>1&&R.push(E[E.length-1]),E.pop())}(";"===o||"x;"===o||","===o)&&(i=!0)}}}()),"-"===v&&"return"===b||"="===b?A.push("x"):(A.push("s"),void 0)},z=function(){var r=I[e+1],o=void 0!==r&&"=="!==r&&"==="!==r&&"!="!==r&&"!=="!==r&&">="===r&&"<="!==r&&r.indexOf("=")>-1;if(d[d.length-1]!==!0||","!==b&&"var"!==b&&"let"!==b&&"const"!==b?"none"===x&&"minify"!==p||"function"!==b||(O[O.length-1]="v"):(0!==m||C[C.length-1]!==!1&&0!==C.length||"operator"===D[e+1]&&o===!0&&E.length>0&&":"!==I[E[E.length-1][E[E.length-1].length-1]+1]&&E[E.length-1].push(e),("none"!==x||"minify"===p)&&(O[O.length-1]="v")),("}"===b||"x}"===b)&&(A[e-1]=n),"else"===v&&"}"===b&&"x}"===I[e-2]&&(A[e-3]-=1),1===d.length&&d[0]===!0&&("var"===b||"let"===b||"const"===b||","===b||"function"===b&&"method"===D[e+1])&&k.push(v),("let"===v||"const"===v)&&0>S&&(S=e),"new"===v&&!function(){var t=0,n="string"==typeof r?r:"",i=""===n?[]:["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"],o=i.length;for(t=0;o>t;t+=1)if(n===i[t])return;L+=1,"none"!==x&&(I[e]="<strong class='new'>new</strong>")}(),"from"===v&&"}"===b&&(A[e-1]="s"),"this"===v&&"none"!==x&&(I[e]="<strong class='new'>this</strong>"),"function"===v&&_===!1&&t-1>e&&"("===I[e+1])return A.push("x");if("return"===v&&(s[s.length-1]=!1),"literal"===y&&"{"===b.charAt(b.length-1)&&i===!1)A[e-1]="x";else if("-"===b&&e>1)"operator"===D[e-2]||","===I[e-2]?A[e-1]="x":("start"===D[e-2]||"method"===D[e-2])&&(A[e-2]="x",A[e-1]="x");else if("while"!==v||"}"!==b&&"x}"!==b)if("in"===v||("else"===v&&u===!1||"catch"===v)&&("}"===b||"x}"===b))A[e-1]="s";else if("var"===v||"let"===v||"const"===v)(0===C.length||C[C.length-1]===!1)&&E.push([]),"end"===y&&(A[e-1]=n),0===d.length?d.push(!0):d[d.length-1]=!0,0===m&&!function(){var r=0,i=0;
for(r=e+1;t>r&&("end"===D[r]&&(i-=1),("start"===D[r]||"method"===D[r])&&(i+=1),!(0>i||0===i&&(";"===I[r]||","===I[r])));r+=1);","===I[r]&&(n+=1)}();else if("default"!==v&&"case"!==v||"word"===y)if("break"!==v&&"return"!==v||h[h.length-1]!==!0){if("catch"===v||"finally"===v)return A[e-1]="s",A.push("s")}else A[e-1]=n,function(){var r=0;for(r=e+1;t>r;r+=1){if("}"===I[r]||"x}"===I[r])return h[h.length-1]=!1,void 0;if("{"===I[r]||"x{"===I[r]||"["===I[r])return;if("case"===I[r]||"default"===I[r]||"switch"===I[r])return n-=1,h[h.length-1]=!1,void 0}}();else h[h.length-1]===!1?(("{"===b||"x{"===b)&&(n-=1),A[e-1]=n,h[h.length-1]=!0):(":"===b&&("default"===v||"comment-inline"===D[e-1]||"comment"===D[e-1])||":"!==b)&&(n-=1,A[e-1]=n);else!function(){var t=0,r=0;for(t=e-1;t>-1;t-=1)if(("}"===I[t]||"x}"===I[t])&&(r+=1),("{"===I[t]||"x{"===I[t])&&(r-=1),0===r)return"do"===I[t-1]?(A[e-1]="s",void 0):(A[e-1]=n,void 0)}();return i===!1&&t-1>e&&"}"===I[e+1].charAt(0)?A.push("x"):(A.push("s"),void 0)};for(w===!0&&(n-=1),e=0;t>e;e+=1)("none"!==x||"minify"===p)&&O.push(""),g=D[e],v=I[e],"comment"===g?(A[e-1]=0===N[e]?"x":"="===b&&/^(\/\*\*\s*@[a-z_]+\s)/.test(v)===!0?"s":n,A.push(n)):"comment-inline"===g?t-1>e&&("{"===I[e+1]||"x{"===I[e+1])?(I[e]=I[e+1],D[e]="start",I[e+1]=v,D[e+1]=g,e-=1):(A[e-1]="s",A.push(n)):"regex"===g?A.push("x"):"literal"===g?0===v.indexOf("#!/")?A.push(n):A.push("s"):"separator"===g?U():"method"===g?V():"start"===g?Q():"end"===g?G():"operator"===g?H():"word"===g?z():"markup"===g&&("return"===b||"?"===b||":"===b?(A[e-1]="s",A.push("x")):"start"===y||"return"===I[e-2]&&"method"===y?A.push(n):A.push("x"),"("===I[e-1]&&"start"===D[e-1]&&(A[e-1]=n),d[d.length-1]===!0&&j.push(e)),"comment"!==g&&"comment-inline"!==g&&(y=g,b=v)}(),w===!0&&(I[0]="",D[0]="",N[0]=0),"minify"===p?U=function(){var e=0,t=I.length,n=S===!1,i=[],o=[65],a=0,s=[],u=[],c=function(t){var n=O[t],r=O[n],i=s[O[t]],o=0,a=0,u=r.length;if(u>0)for(o=n-1;o>e;o-=1)if("word"===D[o])for(a=0;u>a;a+=1)I[o]===r[a]&&"."!==I[o-1]&&("function"===I[o-1]&&"("===I[o+1]?I[o]=i[a]:("case"===I[o-1]||":"!==I[o+1]||":"===I[o+1]&&"x"!==A[o])&&(I[o]=i[a]))},p=function(e){var t=0,n=e.length,r=[],i=function(){if(o[o.length-1]+=1,91===o[o.length-1]&&(o[o.length-1]=97),123===o[0]){for(a=o.length-1;a>-1;a-=1)o[a]=65;o.push(65)}else if(123===o[o.length-1]){a=o.length-1,o[a]=65;do a-=1,o[a]+=1,91===o[a]&&(o[a]=97),123===o[a]&&(o[a]=65);while(65===o[a]&&a>1)}},u=function(){var e=o.length-1,t=[];for(e=e;e>-1;e-=1)t.push(String.fromCharCode(o[e]));return"a"+t.join("")};for(t=0;n>t;t+=1)r.push(u()),i();s.push(r)},d=function(){var t=0,n=0;for(t=e;t>-1;t-=1)if("end"===D[t]?n+=1:("start"===D[t]||"method"===D[t])&&(n-=1),0>n)return"for"===I[t-1]&&i.push(";"),void 0};if(f===!0){for(e=0;e<I.length;e+=1)"number"==typeof O[e]||"string"==typeof O[e]?s.push(O[e]):p(O[e]);for(e=I.length-1;e>-1;e-=1)"number"==typeof O[e]&&c(e)}for(e=0;t>e;e+=1)"comment"!==D[e]&&(n=!0),"operator"===D[e-1]&&"operator"===D[e]&&i.push(" "),"markup"===D[e]&&"function"==typeof l?i.push(l({jsx:!0,mode:"minify",source:I[e]})):"word"!==D[e]||"word"!==D[e+1]&&"literal"!==D[e+1]&&"x{"!==I[e+1]&&"comment"!==D[e+1]&&"comment-inline"!==D[e+1]?"comment"===D[e]&&n===!1?(i.push(I[e]),i.push("\n")):"x;"===I[e]&&"}"!==I[e+1]?i.push(";"):";"===I[e]&&"}"===I[e+1]?d():"x;"!==I[e]&&"x{"!==I[e]&&"x}"!==I[e]&&"comment"!==D[e]&&"comment-inline"!==D[e]&&i.push(I[e]):(i.push(I[e]),i.push(" "));return F.length>0&&(u.push("<p id='jserror'><strong>Error: "),u.push(F[0].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u0000|\u0001|\u0002|\u0003|\u0004|\u0005|\u0006|\u0007|\u0008|\u000b|\u000c|\u000e|\u000f|\u0010|\u0011|\u0012|\u0013|\u0014|\u0015|\u0016|\u0017|\u0018|\u0019|\u001a|\u001b|\u001c|\u001d|\u001e|\u001f|\u007f|\u0080|\u0081|\u0082|\u0083|\u0084|\u0085|\u0086|\u0087|\u0088|\u0089|\u008a|\u008b|\u008c|\u008d|\u008e|\u008f|\u0090|\u0091|\u0092|\u0093|\u0094|\u0095|\u0096|\u0097|\u0098|\u0099|\u009a|\u009b|\u009c|\u009d|\u009e|\u009f/g,"")),u.push("</strong> <code><span>"),F[1]=F[1].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u0000|\u0001|\u0002|\u0003|\u0004|\u0005|\u0006|\u0007|\u0008|\u000b|\u000c|\u000e|\u000f|\u0010|\u0011|\u0012|\u0013|\u0014|\u0015|\u0016|\u0017|\u0018|\u0019|\u001a|\u001b|\u001c|\u001d|\u001e|\u001f|\u007f|\u0080|\u0081|\u0082|\u0083|\u0084|\u0085|\u0086|\u0087|\u0088|\u0089|\u008a|\u008b|\u008c|\u008d|\u008e|\u008f|\u0090|\u0091|\u0092|\u0093|\u0094|\u0095|\u0096|\u0097|\u0098|\u0099|\u009a|\u009b|\u009c|\u009d|\u009e|\u009f/g,"").replace(/^(\s+)/,""),F.indexOf("\n")>0?u.push(F[1].replace("\n","</span>")):(u.push(F[1]),u.push("</span>")),u.push("</code></p>"),r=u.join("")),i.join("")}():(U="none"!==x?function(){var e=0,t=I.length,n=[],i=2,o="",u=1,p=0,f=function(){var e=1,n=1;if("comment"!==D[0]||0===I[0].indexOf("//")&&N[0]>0||"comment"!==D[1])return 1;do 0===I[e].indexOf("/*")&&(n+=1),e+=1;while("comment"===D[e]&&t>e);return n}(),d=[],m=-1,g=["<div class='beautify' data-prettydiff-ignore='true'><ol class='count'>","<li>",1,"</li>"],y=function(){var t=g.length-3*f>0?g.length-3*f:1,n=e,r=g[t+1]||1,i=!0,o=n;if("comment"===D[e]&&-1===m)m=e;else if("comment"!==D[e]){n=O[e];do o-=1;while("function"!==I[o]&&o>-1);if(o-=1,"("===I[o]&&"start"===D[o])do o-=1;while(o>-1&&"start"===D[o]&&"("===I[o]);("="===I[o]||":"===I[o]||","===I[o]||"("===I[o+1]&&"start"===D[o+1])&&(i=!1)}"comment"===D[e]&&2===N[e]&&(t-=3,r-=1),g[t]="<li class='fold' title='folds from line "+r+" to line xxx'>",g[t+1]="- "+r,d.push([t,n,i])},_=function(){var r=function(){return m>-1||d[d.length-1][2]===!0?i-f-1:i-f}(),o=/(>;<\/em>)$/.test(I[e]),a=0,s=!1;if(o===!0)for(r-=1,a=n.length-1;a>0&&(("let"===n[a]||"const"===n[a])&&(s=!0),!(n[a].indexOf("><li")>0&&(n[a]=n[a].replace(/class\='l\d+'/,"class='l"+(u+1)+"'"),s===!0)));a-=1)n[a].indexOf("<em class='l"+u+"'>"+E)>-1&&(n[a]=n[a].replace("<em class='l"+u+"'>"+E,"<em class='l"+(u+1)+"'>"+E));if(e>1&&I[e].indexOf("}</em>")===I[e].length-6&&I[e-1].indexOf("{</em>")===I[e-1].length-6)for(a=g.length-1;a>0;a-=1)if("string"==typeof g[a]&&"-"===g[a].charAt(0))return g[a-1]="<li>",g[a]=Number(g[a].substr(1)),d.pop(),void 0;d[d.length-1][1]===t-1&&0===I[e].indexOf("<em ")&&(r+=1),g[d[d.length-1][0]]=g[d[d.length-1][0]].replace("xxx",r),d.pop()},b=function(t){var n=t.split("\n"),r=0,o=n.length-1;for(N[e]>0&&(g.push("<li>"),g.push(i),g.push("</li>"),i+=1),r=0;o>r;r+=1)g.push("<li>"),g.push(i),g.push("</li>"),i+=1,n[r]=n[r]+"<em>&#xA;</em></li><li class='c0'>";return n.join("").replace(/\r/g,"")},w=function(t){var n=O[t],r=O[n][0],i=O[n][1],o=0,a=0,s=r.length,c=1,l=!0,p=[],f=0,d=function(){var t=0,n=0;for(t=e;t>-1;t-=1){if("end"===D[t]&&(n-=1),("start"===D[t]||"method"===D[t])&&(n+=1),n>0)return;if(0===n){if("var"===I[t]||";"===I[t]||"x;"===I[t])return;("let"===I[t]||"const"===I[t])&&(I[o]="<em class='s"+u+"'>"+p[0]+"</em>")}}};if("word"===D[e-1]&&"function"!==I[e-1]&&i===!1&&(p=I[e-1].split(" "),I[e-1]="<em class='s"+u+"'>"+p[0]+"</em>",f=p.length,f>1))do I[o]=I[o]+" ",f-=1;while(f>1);if(s>0)for(o=n-1,i===!0&&(o-=1),o=o;o>e;o-=1){if("word"===D[o])for(p=I[o].split(" "),a=0;s>a;a+=1)if(p[0]===r[a]&&"."!==I[o-1]){if("function"===I[o-1]&&"("===I[o+1]){if(I[o]="<em class='s"+(u+1)+"'>"+p[0]+"</em>",f=p.length,f>1)do I[o]=I[o]+" ",f-=1;while(f>1)}else if(("case"===I[o-1]||":"!==I[o+1]||":"===I[o+1]&&"x"!==A[o])&&(i===!0?"let"===I[o-1]||"const"===I[o-1]?I[o]="<em class='s"+u+"'>"+p[0]+"</em>":","===I[o-1]?d():I[o]="<em class='s"+u+"'>"+p[0]+"</em>":I[o]="<em class='s"+u+"'>"+p[0]+"</em>",f=p.length,f>1))do I[o]=I[o]+" ",f-=1;while(f>1);break}l===!0&&("end"===D[o]?c+=1:("start"===D[o]||"method"===D[o])&&(c-=1),0===c&&"{"===I[o]&&(I[o]="<em class='s"+u+"'>{</em>",l=!1))}else for(o=e+1,i===!0&&(o-=1),o=o;n>o;o+=1)if("end"===D[o]?c-=1:("start"===D[o]||"method"===D[o])&&(c+=1),1===c&&"{"===I[o])return I[o]="<em class='s"+u+"'>{</em>",void 0},S=c,E=function(){var e=a,t=v,n=[];for(t=t;t>0;t-=1)n.push(e);return n.join("")}(),P=["<em class='l0'>"+E+"</em>","<em class='l0'>"+E+"</em><em class='l1'>"+E+"</em>","<em class='l0'>"+E+"</em><em class='l1'>"+E+"</em><em class='l2'>"+E+"</em>","<em class='l0'>"+E+"</em><em class='l1'>"+E+"</em><em class='l2'>"+E+"</em><em class='l3'>"+E+"</em>","<em class='l0'>"+E+"</em><em class='l1'>"+E+"</em><em class='l2'>"+E+"</em><em class='l3'>"+E+"</em><em class='l4'>"+E+"</em>","<em class='l0'>"+E+"</em><em class='l1'>"+E+"</em><em class='l2'>"+E+"</em><em class='l3'>"+E+"</em><em class='l4'>"+E+"</em><em class='l5'>"+E+"</em>","<em class='l0'>"+E+"</em><em class='l1'>"+E+"</em><em class='l2'>"+E+"</em><em class='l3'>"+E+"</em><em class='l4'>"+E+"</em><em class='l5'>"+E+"</em><em class='l6'>"+E+"</em>","<em class='l0'>"+E+"</em><em class='l1'>"+E+"</em><em class='l2'>"+E+"</em><em class='l3'>"+E+"</em><em class='l4'>"+E+"</em><em class='l5'>"+E+"</em><em class='l6'>"+E+"</em><em class='l7'>"+E+"</em>","<em class='l0'>"+E+"</em><em class='l1'>"+E+"</em><em class='l2'>"+E+"</em><em class='l3'>"+E+"</em><em class='l4'>"+E+"</em><em class='l5'>"+E+"</em><em class='l6'>"+E+"</em><em class='l7'>"+E+"</em><em class='l8'>"+E+"</em>","<em class='l0'>"+E+"</em><em class='l1'>"+E+"</em><em class='l2'>"+E+"</em><em class='l3'>"+E+"</em><em class='l4'>"+E+"</em><em class='l5'>"+E+"</em><em class='l6'>"+E+"</em><em class='l7'>"+E+"</em><em class='l8'>"+E+"</em><em class='l9'>"+E+"</em>","<em class='l0'>"+E+"</em><em class='l1'>"+E+"</em><em class='l2'>"+E+"</em><em class='l3'>"+E+"</em><em class='l4'>"+E+"</em><em class='l5'>"+E+"</em><em class='l6'>"+E+"</em><em class='l7'>"+E+"</em><em class='l8'>"+E+"</em><em class='l9'>"+E+"</em><em class='l10'>"+E+"</em>","<em class='l0'>"+E+"</em><em class='l1'>"+E+"</em><em class='l2'>"+E+"</em><em class='l3'>"+E+"</em><em class='l4'>"+E+"</em><em class='l5'>"+E+"</em><em class='l6'>"+E+"</em><em class='l7'>"+E+"</em><em class='l8'>"+E+"</em><em class='l9'>"+E+"</em><em class='l10'>"+E+"</em><em class='l11'>"+E+"</em>","<em class='l0'>"+E+"</em><em class='l1'>"+E+"</em><em class='l2'>"+E+"</em><em class='l3'>"+E+"</em><em class='l4'>"+E+"</em><em class='l5'>"+E+"</em><em class='l6'>"+E+"</em><em class='l7'>"+E+"</em><em class='l8'>"+E+"</em><em class='l9'>"+E+"</em><em class='l10'>"+E+"</em><em class='l11'>"+E+"</em><em class='l12'>"+E+"</em>","<em class='l0'>"+E+"</em><em class='l1'>"+E+"</em><em class='l2'>"+E+"</em><em class='l3'>"+E+"</em><em class='l4'>"+E+"</em><em class='l5'>"+E+"</em><em class='l6'>"+E+"</em><em class='l7'>"+E+"</em><em class='l8'>"+E+"</em><em class='l9'>"+E+"</em><em class='l10'>"+E+"</em><em class='l11'>"+E+"</em><em class='l12'>"+E+"</em><em class='l13'>"+E+"</em>","<em class='l0'>"+E+"</em><em class='l1'>"+E+"</em><em class='l2'>"+E+"</em><em class='l3'>"+E+"</em><em class='l4'>"+E+"</em><em class='l5'>"+E+"</em><em class='l6'>"+E+"</em><em class='l7'>"+E+"</em><em class='l8'>"+E+"</em><em class='l9'>"+E+"</em><em class='l10'>"+E+"</em><em class='l11'>"+E+"</em><em class='l12'>"+E+"</em><em class='l13'>"+E+"</em><em class='l14'>"+E+"</em>","<em class='l0'>"+E+"</em><em class='l1'>"+E+"</em><em class='l2'>"+E+"</em><em class='l3'>"+E+"</em><em class='l4'>"+E+"</em><em class='l5'>"+E+"</em><em class='l6'>"+E+"</em><em class='l7'>"+E+"</em><em class='l8'>"+E+"</em><em class='l9'>"+E+"</em><em class='l10'>"+E+"</em><em class='l11'>"+E+"</em><em class='l12'>"+E+"</em><em class='l13'>"+E+"</em><em class='l14'>"+E+"</em><em class='l15'>"+E+"</em>","<em class='l0'>"+E+"</em><em class='l1'>"+E+"</em><em class='l2'>"+E+"</em><em class='l3'>"+E+"</em><em class='l4'>"+E+"</em><em class='l5'>"+E+"</em><em class='l6'>"+E+"</em><em class='l7'>"+E+"</em><em class='l8'>"+E+"</em><em class='l9'>"+E+"</em><em class='l10'>"+E+"</em><em class='l11'>"+E+"</em><em class='l12'>"+E+"</em><em class='l13'>"+E+"</em><em class='l14'>"+E+"</em><em class='l15'>"+E+"</em><em class='l16'>"+E+"</em>"],F=function(r,o){var a=0;for("x}"!==I[e]||"x}"===I[e]&&"}"!==I[e+1]?(g.push("<li>"),g.push(i),g.push("</li>"),i+=1,t-1>e&&0===I[e+1].indexOf("/*")?n.push("<em>&#xA;</em></li><li class='c0'>"):(n.push("<em>&#xA;</em></li><li class='l"+u+"'>"),r>0?(a=u,u>0&&(u===r+1&&r>0&&o!==!0&&(a-=1),n.push(P[a-1]))):o===!0&&n.push(P[0]))):r>0&&(a=u,u>0&&(u===r+1&&r>0&&o!==!0&&(a-=1),n.push(P[a-1]))),a=a;r>a;a+=1)n.push(E)},B=function(t){var n=I.length,r=2,i=0;for(i=e+2;n>i&&"x}"===I[i];i+=1)r+=1;F(t-r),e+=1},U=function(){var t=function(){var t=0;if(e===j[0])return j.splice(0,1),1;if("return"===I[t]||"{"===I[0])return 1;if("x"===A[e]||"s"===A[e])return 0;for(t=e-1;t>-1;t-=1)if("("!==I[t])return"="===I[t]?1:0;return 0}(),r=function(){var n=l({inchar:a,inlevel:t,insize:v,jsscope:!0,jsx:!0,mode:"beautify",source:I[e]}).replace(/return\s+</g,"return <"),r=function(e){return"<em class='s"+e.replace("[pdjsxem","").replace("]","")+"'>"},i="",o="",s=0,u=0,c=O.length,p=0,f=[];if(n.indexOf("[pdjsxscope]")<0)return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").split("\n");do{for(o="",f=[],i=n.substring(n.indexOf("[pdjsxscope]")+12,n.indexOf("[/pdjsxscope]")),s=0;c>s;s+=1)if("number"==typeof O[s]&&e>s&&e<O[s]){for(f.push(O[s]),p=O[O[s]].length,u=0;p>u;u+=1)O[O[s]][u]===i&&(o="[pdjsxem"+(f.length+1)+"]"+i+"[/pdjsxem]");if(p>u)break;f.pop()}if(""===o){for(p=k.length,u=0;p>u;u+=1)i===k[u]&&(o="[pdjsxem0]"+i+"[/pdjsxem]");""===o&&(o=i)}n=n.replace("[pdjsxscope]"+i+"[/pdjsxscope]",o)}while(n.indexOf("[pdjsxscope]")>-1);return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\[pdjsxem\d+\]/g,r).replace(/\[\/pdjsxem\]/g,"</em>").split("\n")}(),i=0,o=0,s=0,u="\\"+E.charAt(0),c={};for(i=E.length,o=1;i>o;o+=1)u=u+"\\"+E.charAt(o);for(c=new RegExp("^("+u+"+)"),t=S+2,("x"===A[e]||"s"===A[e])&&(r[0]=r[0].replace(c,""),t-=1),i=r.length,o=0;i-1>o;o+=1){if(0!==r[o].indexOf(E)&&o>0){s=r[o-1].split(E).length-1;do s-=1,r[o]=E+r[o];while(s>0)}n.push(r[o]),F(t-1)}n.push(r[r.length-1])},V=function(e){var t=e.split("\n"),r=0,i=t.length;for(n.push(t[0]),r=1;i>r;r+=1)F(S),n.push(t[r])};for(C===!0&&!function(){var e=0,t=0,n=0,r=0,i=0,o=0,a=0,s="",u="",c=[],l=function(t){var r=I[t].length,i=!1,o=!1,a=function(){},s=function(){};return a=function(){o=!0,r+=1;do t-=2,r+=I[t].length+1;while(t>1&&"."===I[t-1]);(")"===I[t]||"]"===I[t])&&(t+=1,r-=2,i=!0,s())},s=function(){var e=0;for(t-=1;t>-1;t-=1){if(r+=I[t].length,("start"===D[t]||"method"===D[t])&&(e+=1,1===e)){if(i===!0)return;break}if("end"===D[t]&&(e-=1),("operator"===D[t]||"separator"===D[t])&&("s"===A[t]&&(r+=1),"s"===A[t-1]&&(r+=1)),";"===I[t]||"x;"===I[t]||"}"===I[t]||"x}"===I[t])return}("word"===D[t-1]||"literal"===D[t-1])&&(t-=1,r+=I[t].length),"word"===D[t]&&"."===I[t-1]&&a(),"{"!==I[t]&&(")"===I[t-1]||"]"===I[t-1])&&(r-=1,s())},"word"===D[t]&&"."===I[t-1]?a():")"===I[t]||"]"===I[t]?(s(),o===!1&&(r+=1)):r+=1,","===I[t-1]&&":"!==I[R[e][n]+1]&&"var"!==I[R[e][0]-1]&&"let"!==I[R[e][0]-1]&&"const"!==I[R[e][0]-1]&&(r+=v),r};for(e=R.length-1;e>-1;e-=1)if(void 0!==R[e]){for(t=R[e].length,i=0,c=[],n=0;t>n;n+=1)o=l(R[e][n]),o>i&&(i=o),c.push(o);if(s="",i>v?a=i-v:v>i&&(a=v-i),"var"===I[R[e][0]-1]?a-=v:"="===I[R[e][0]+1]&&(a+=1),i!==v&&a>0)do s+=" ",a-=1;while(a>-1);for(n=0;t>n;n+=1){if(u=I[R[e][n]],c[n]<i)do u+=" ",c[n]+=1;while(c[n]<i);if(I[R[e][n]]=u,void 0!==I[R[e][n]+2]&&I[R[e][n]+2].length===T+2&&"+"===I[R[e][n]+3]&&void 0!==I[R[e][n]+4]&&('"'===I[R[e][n]+4].charAt(0)||"'"===I[R[e][n]+4].charAt(0))){r=R[e][n]+4;do I[r]=s+I[r],r+=2;while("literal"===D[r]&&"separator"!==D[r-1])}}}}(),"comment"===D[e]&&0===I[e].indexOf("/*")?n.push("<ol class='data'><li class='c0'>"):n.push("<ol class='data'><li>"),e=0;S>e;e+=1)n.push(E);for(e=t-1;e>-1;e-=1)"number"==typeof O[e]?(u-=1,w(e)):void 0!==O[e]&&"string"!=typeof O[e]&&"number"!=typeof O[e]&&e>0&&"x;"!==I[e]&&"x}"!==I[e]&&"x{"!==I[e]&&(I[e]="<em class='s"+u+"'>"+I[e]+"</em>",u+=1,u>16&&(u=16));for(function(){var e=0,t=I.length,n=k,r=n.length,i=0,o=[],a=0;for(e=t-1;e>0;e-=1)if("word"===D[e]&&(":"!==I[e+1]||":"===I[e+1]&&"x"===A[e+1])&&I[e].indexOf("<em ")<0)for(o=I[e].split(" "),i=r-1;i>-1;i-=1)if(o[0]===n[i]&&"."!==I[e-1]){if("function"===I[e-1]&&"method"===D[e+1]){if(I[e]="<em class='s1'>"+o[0]+"</em>",a=o.length,a>1)do I[e]=I[e]+" ",a-=1;while(a>1)}else if(I[e]="<em class='s0'>"+o[0]+"</em>",a=o.length,a>1)do I[e]=I[e]+" ",a-=1;while(a>1);break}}(),u=0,e=0;t>e;e+=1){if("number"==typeof O[e]&&y(),-1===m&&"comment"===D[e]&&(0===I[e].indexOf("/*")&&I[e].indexOf("\n")>0||"comment"===D[e+1]||2===N[e])&&(y(),m=e),m>-1&&"comment"!==D[e]&&(_(),m=-1),"comment"===D[e]&&0===I[e].indexOf("/*"))n.push(b(I[e]));else if("x;"!==I[e]&&"x}"!==I[e]&&"x{"!==I[e])if("number"==typeof O[e])u+=1,u>16&&(u=16),n.push(I[e]);else if("string"!=typeof O[e]&&"number"!=typeof O[e]){n.push(I[e]),u-=1,p=n.length-1;do p-=1;while(p>0&&n[p].indexOf("</li><li")<0);n[p]=n[p].replace(/class\='l\d+'/,"class='l"+u+"'")}else if("x;"!==I[e]&&"x{"!==I[e]&&"x}"!==I[e])if("markup"===D[e])"x"!==A[e]&&"s"!==A[e]&&("operator"===D[e-1]?F(S):"return"!==I[e-1]&&F(S+1)),"function"==typeof l?U():n.push(I[e].replace(/\n(\s*)/g," "));else if("comment"===D[e]){if(0===e)n[0]="<ol class='data'><li class='c0'>";else{if(p=n.length-1,n[p].indexOf("<li")<0)do n[p]=n[p].replace(/<em\ class\='[a-z]\d+'>/g,"").replace(/<\/em>/g,""),p-=1,p>0&&void 0===n[p]&&(p-=1);while(p>0&&void 0!==n[p-1]&&n[p].indexOf("<li")<0);/^(<em>&#xA;<\/em><\/li><li\ class='l\d+'>)$/.test(n[p-1])===!0&&(n[p-1]=n[p-1].replace(/class\='l\d+'/,"class='c0'")),n[p]=n[p].replace(/class\='l\d+'/,"class='c0'")}n.push(I[e])}else"literal"===D[e]&&I[e].indexOf("\n")>0?V(I[e]):n.push(I[e]);h===!0&&N[e]>0&&"x"!==A[e]&&"s"!==A[e]&&"+"!==I[e]&&("+"===I[e]||"-"===I[e]||"*"===I[e]||"/"===I[e]?t-1>e&&"comment"!==D[e+1]&&"comment-inline"!==D[e+1]?(F(A[e]),n.push(E),A[e]="x"):(S=A[e],2===N[e]&&n.push("\n"),F(S),n.push(E),n.push(I[e+1]),F(S),n.push(E),A[e+1]="x",e+=1):2===N[e]&&"="!==I[e].charAt(0)&&"!"!==I[e].charAt(0)&&("start"!==D[e]||t-1>e&&"end"!==D[e+1])&&("x}"!==I[e]||isNaN(A[e])===!0)&&t-1>e&&("comment"===D[e+1]||"comment-inline"===D[e+1]||"."!==I[e]&&"separator"!==D[e+1])&&(g.push("<li>"),g.push(i),g.push("</li>"),i+=1,"comment"===D[e]?n.push("<em>&#xA;</em></li><li class='c0'>"):(f+=1,F(A[e],!0)))),";"!==I[e]&&"x;"!==I[e]||"x}"!==I[e+1]||/<em\ class='s\d+'>\}<\/em>/.test(I[e+2])!==!0&&"x}"!==I[e+2]?"x{"===I[e]&&"s"===A[e]&&"s"===A[e-1]?n.push(""):t-1>e&&"comment"===D[e+1]&&"noindent"===s?F(c):"s"===A[e]&&"x}"!==I[e]?n.push(" "):""===I[e]||"x"===A[e]||"x}"===I[e]&&("x}"!==I[e]||"x;"!==I[e-1]&&";"!==I[e-1]||"word"===D[e+1])&&2!==N[e]||(S=A[e],F(S)):B(S),d.length>0&&e===d[d.length-1][1]&&-1===m&&_()}for(e=n.length-1;e>-1&&n[e]===E;e-=1)n.pop();if(o=n[n.length-1],o.indexOf("<li")>0?n[n.length-1]="<em>&#xA;</em></li>":o.indexOf("</li>")<0&&n.push("<em>&#xA;</em></li>"),n.push("</ol></div>"),o=n.join(""),null!==o.match(/<li/g)&&(u=o.match(/<li/g).length,i-1>u)){i-=1;do g.pop(),g.pop(),g.pop(),i-=1;while(i>u)}return g.push("</ol>"),"html"===x?(g.push(o),g.join("")):(n=["<p>Scope analysis does not provide support for undeclared variables.</p>","<p><em>",M,"</em> instances of <strong>missing semicolons</strong> counted.</p>","<p><em>",L,"</em> unnecessary instances of the keyword <strong>new</strong> counted.</p>",g.join(""),o],r=n.join(""),g=[],n=[],"")}().replace(/(\s+)$/,"").replace(/\u0000|\u0001|\u0002|\u0003|\u0004|\u0005|\u0006|\u0007|\u0008|\u000b|\u000c|\u000e|\u000f|\u0010|\u0011|\u0012|\u0013|\u0014|\u0015|\u0016|\u0017|\u0018|\u0019|\u001a|\u001b|\u001c|\u001d|\u001e|\u001f|\u007f|\u0080|\u0081|\u0082|\u0083|\u0084|\u0085|\u0086|\u0087|\u0088|\u0089|\u008a|\u008b|\u008c|\u008d|\u008e|\u008f|\u0090|\u0091|\u0092|\u0093|\u0094|\u0095|\u0096|\u0097|\u0098|\u0099|\u009a|\u009b|\u009c|\u009d|\u009e|\u009f/g,""):function(){var t=0,n=I.length,r=[],i=c,o=function(){var e=a,t=v,n=[];for(t=t;t>0;t-=1)n.push(e);return n.join("")}(),u=function(e){var t=0;for(r.push("\n"),t=0;e>t;t+=1)r.push(o)},p=function(e){var n=I.length,r=2,i=0;for(i=t+2;n>i&&"x}"===I[i];i+=1)r+=1;u(e-r),t+=1};for(C===!0&&!function(){var e=0,t=0,n=0,r=0,i=0,o=0,a=0,s="",u="",c=[],l=function(t){var r=I[t].length,i=!1,o=!1,a=function(){},s=function(){};return a=function(){o=!0,r+=1;do t-=2,r+=I[t].length+1;while(t>1&&"."===I[t-1]);(")"===I[t]||"]"===I[t])&&(t+=1,r-=2,i=!0,s())},s=function(){var e=0;for(t-=1;t>-1;t-=1){if(r+=I[t].length,("start"===D[t]||"method"===D[t])&&(e+=1,1===e)){if(i===!0)return;break}if("end"===D[t]&&(e-=1),("operator"===D[t]||"separator"===D[t])&&("s"===A[t]&&(r+=1),"s"===A[t-1]&&(r+=1)),";"===I[t]||"x;"===I[t]||"}"===I[t]||"x}"===I[t])return}("word"===D[t-1]||"literal"===D[t-1])&&(t-=1,r+=I[t].length),"word"===D[t]&&"."===I[t-1]&&a(),"{"!==I[t]&&(")"===I[t-1]||"]"===I[t-1])&&(r-=1,s())},"word"===D[t]&&"."===I[t-1]?a():")"===I[t]||"]"===I[t]?(s(),o===!1&&(r+=1)):r+=1,","===I[t-1]&&"["!==I[R[e][0]-1]&&":"!==I[R[e][n]+1]&&"var"!==I[R[e][0]-1]&&"let"!==I[R[e][0]-1]&&"const"!==I[R[e][0]-1]&&(r+=v),r};for(e=R.length-1;e>-1;e-=1)if(void 0!==R[e]){for(t=R[e].length,i=0,c=[],n=0;t>n;n+=1)o=l(R[e][n]),o>i&&(i=o),c.push(o);if(s="",i>v?a=i-v:v>i&&(a=v-i),"var"===I[R[e][0]-1]?a-=v:"="===I[R[e][0]+1]&&(a+=1),i!==v&&a>0)do s+=" ",a-=1;while(a>-1);for(n=0;t>n;n+=1){if(u=I[R[e][n]],c[n]<i)do u+=" ",c[n]+=1;while(c[n]<i);if(I[R[e][n]]=u,void 0!==I[R[e][n]+2]&&I[R[e][n]+2].length===T+2&&"+"===I[R[e][n]+3]&&void 0!==I[R[e][n]+4]&&('"'===I[R[e][n]+4].charAt(0)||"'"===I[R[e][n]+4].charAt(0))){r=R[e][n]+4;do I[r]=s+I[r],r+=2;while("literal"===D[r]&&"separator"!==D[r-1])}}}}(),t=0;i>t;t+=1)r.push(o);for(t=0;n>t;t+=1)("comment"===D[t]||"x;"!==I[t]&&"x{"!==I[t]&&"x}"!==I[t])&&("markup"===D[t]?("x"!==A[t-1]&&"s"!==A[t-1]&&"return"!==I[t-1]&&r.push(o),"function"==typeof l?r.push(l({inchar:a,inlevel:i+1,insize:v,jsscope:e.jsscope,jsx:!0,mode:"beautify",source:I[t]})):r.push(I[t].replace(/\n(\s*)/g," "))):r.push(I[t]),0===I[t].indexOf("//")&&"operator"===D[t+1]&&(u(i),r.push(o))),h===!0&&N[t]>0&&"x"!==A[t]&&"s"!==A[t]&&"+"!==I[t]&&("+"===I[t]||"-"===I[t]||"*"===I[t]||"/"===I[t]?n-1>t&&"comment"!==D[t+1]&&"comment-inline"!==D[t+1]?(u(A[t]),r.push(o),A[t]="x"):(i=A[t],2===N[t]&&r.push("\n"),u(i),r.push(o),r.push(I[t+1]),u(i),r.push(o),A[t+1]="x",t+=1):2===N[t]&&"="!==I[t].charAt(0)&&"!"!==I[t].charAt(0)&&("start"!==D[t]||n-1>t&&"end"!==D[t+1])&&n-1>t&&("comment"===D[t+1]||"comment-inline"===D[t+1]||"."!==I[t]&&"separator"!==D[t+1])&&("x}"!==I[t]||isNaN(A[t])===!0||"x"===A[t])&&r.push("\n")),";"!==I[t]&&"x;"!==I[t]||"x}"!==I[t+1]||"}"!==I[t+2]&&"x}"!==I[t+2]?"x{"===I[t]&&"s"===A[t]&&"s"===A[t-1]?r.push(""):n-1>t&&"comment"===D[t+1]&&"noindent"===s?u(c):"s"===A[t]&&"x}"!==I[t]?r.push(" "):""===I[t]||"x"===A[t]||"x}"===I[t]&&("x}"!==I[t]||"x;"!==I[t-1]&&";"!==I[t-1]||"word"===D[t+1])&&2!==N[t]||(i=A[t],u(i)):p(i);for(t=r.length-1;t>-1&&r[t]===o;t-=1)r.pop();return h===!0&&N[N.length-1]>0?r.join("").replace(/(\s+)$/,"\n"):r.join("").replace(/(\s+)$/,"")}(),"diff"!==r&&"report"!==x&&(B.space.space-=1,function(){var e=y.length-1,t=U.split("\n").length,n=B.space.newline,i=0,o={chars:0,comment:{chars:B.commentBlock.chars+B.commentLine.chars,token:B.commentBlock.token+B.commentLine.token},literal:{chars:B.number.chars+B.regex.chars+B.string.chars,token:B.number.token+B.regex.token+B.string.token},space:B.space.newline+B.space.other+B.space.space+B.space.tab,syntax:{chars:0,token:B.string.quote+B.comma+B.semicolon+B.container},token:0},a=[],s=function(e,t){var n=0;return 0===t?"0.00%":(n=100*(e/t),n.toFixed(2)+"%")};o.syntax.chars=o.syntax.token+B.operator.chars,o.syntax.token+=B.operator.token,o.token=B.server.token+B.word.token+o.comment.token+o.literal.token+o.space+o.syntax.token,o.chars=B.server.chars+B.word.chars+o.comment.chars+o.literal.chars+o.space+o.syntax.chars,0===n&&(n=1),a.push("<div class='doc'>"),F.length>0&&(a.push("<p id='jserror'><strong>Error: "),a.push(F[0].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u0000|\u0001|\u0002|\u0003|\u0004|\u0005|\u0006|\u0007|\u0008|\u000b|\u000c|\u000e|\u000f|\u0010|\u0011|\u0012|\u0013|\u0014|\u0015|\u0016|\u0017|\u0018|\u0019|\u001a|\u001b|\u001c|\u001d|\u001e|\u001f|\u007f|\u0080|\u0081|\u0082|\u0083|\u0084|\u0085|\u0086|\u0087|\u0088|\u0089|\u008a|\u008b|\u008c|\u008d|\u008e|\u008f|\u0090|\u0091|\u0092|\u0093|\u0094|\u0095|\u0096|\u0097|\u0098|\u0099|\u009a|\u009b|\u009c|\u009d|\u009e|\u009f/g,"")),a.push("</strong> <code><span>"),F[1]=F[1].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u0000|\u0001|\u0002|\u0003|\u0004|\u0005|\u0006|\u0007|\u0008|\u000b|\u000c|\u000e|\u000f|\u0010|\u0011|\u0012|\u0013|\u0014|\u0015|\u0016|\u0017|\u0018|\u0019|\u001a|\u001b|\u001c|\u001d|\u001e|\u001f|\u007f|\u0080|\u0081|\u0082|\u0083|\u0084|\u0085|\u0086|\u0087|\u0088|\u0089|\u008a|\u008b|\u008c|\u008d|\u008e|\u008f|\u0090|\u0091|\u0092|\u0093|\u0094|\u0095|\u0096|\u0097|\u0098|\u0099|\u009a|\u009b|\u009c|\u009d|\u009e|\u009f/g,"").replace(/^(\s+)/,""),F.indexOf("\n")>0?a.push(F[1].replace("\n","</span>")):(a.push(F[1]),a.push("</span>")),a.push("</code></p>")),a.push("<p><em>"),a.push(M),a.push("</em> instance"),1!==M&&a.push("s"),a.push(" of <strong>missing semicolons</strong> counted.</p>"),a.push("<p><em>"),a.push(L),a.push("</em> unnessary instance"),1!==L&&a.push("s"),a.push(" of the keyword <strong>new</strong> counted.</p>"),a.push("<table class='analysis' summary='JavaScript character size comparison'><caption>JavaScript data report</caption><thead><tr><th>Data Label</th><th>Input</th><th>Output</th><th>Literal Increase</th><th>Percentage Increase</th></tr>"),a.push("</thead><tbody><tr><th>Total Character Size</th><td>"),a.push(e),a.push("</td><td>"),a.push(U.length),a.push("</td><td>"),a.push(U.length-e),a.push("</td><td>"),i=100*((U.length-e)/e),a.push(i.toFixed(2)),a.push("%</td></tr><tr><th>Total Lines of Code</th><td>"),a.push(n),a.push("</td><td>"),a.push(t),a.push("</td><td>"),a.push(t-n),a.push("</td><td>"),i=100*((t-n)/n),a.push(i.toFixed(2)),a.push("%</td></tr></tbody></table>"),a.push("<table class='analysis' summary='JavaScript component analysis'><caption>JavaScript component analysis</caption><thead><tr><th>JavaScript Component</th><th>Component Quantity</th><th>Percentage Quantity from Section</th>"),a.push("<th>Percentage Qauntity from Total</th><th>Character Length</th><th>Percentage Length from Section</th><th>Percentage Length from Total</th></tr></thead><tbody>"),a.push("<tr><th>Total Accounted</th><td>"),a.push(o.token),a.push("</td><td>100.00%</td><td>100.00%</td><td>"),a.push(o.chars),a.push("</td><td>100.00%</td><td>100.00%</td></tr><tr><th colspan='7'>Comments</th></tr><tr><th>Block Comments</th><td>"),a.push(B.commentBlock.token),a.push("</td><td>"),a.push(s(B.commentBlock.token,o.comment.token)),a.push("</td><td>"),a.push(s(B.commentBlock.token,o.token)),a.push("</td><td>"),a.push(B.commentBlock.chars),a.push("</td><td>"),a.push(s(B.commentBlock.chars,o.comment.chars)),a.push("</td><td>"),a.push(s(B.commentBlock.chars,o.chars)),a.push("</td></tr><tr><th>Inline Comments</th><td>"),a.push(B.commentLine.token),a.push("</td><td>"),a.push(s(B.commentLine.token,o.comment.token)),a.push("</td><td>"),a.push(s(B.commentLine.token,o.token)),a.push("</td><td>"),a.push(B.commentLine.chars),a.push("</td><td>"),a.push(s(B.commentLine.chars,o.comment.chars)),a.push("</td><td>"),a.push(s(B.commentLine.chars,o.chars)),a.push("</td></tr><tr><th>Comment Total</th><td>"),a.push(o.comment.token),a.push("</td><td>100.00%</td><td>"),a.push(s(o.comment.token,o.token)),a.push("</td><td>"),a.push(o.comment.chars),a.push("</td><td>100.00%</td><td>"),a.push(s(o.comment.chars,o.chars)),a.push("</td></tr><tr><th colspan='7'>Whitespace Outside of Strings and Comments</th></tr><tr><th>New Lines</th><td>"),a.push(B.space.newline),a.push("</td><td>"),a.push(s(B.space.newline,o.space)),a.push("</td><td>"),a.push(s(B.space.newline,o.token)),a.push("</td><td>"),a.push(B.space.newline),a.push("</td><td>"),a.push(s(B.space.newline,o.space)),a.push("</td><td>"),a.push(s(B.space.newline,o.chars)),a.push("</td></tr><tr><th>Spaces</th><td>"),a.push(B.space.space),a.push("</td><td>"),a.push(s(B.space.space,o.space)),a.push("</td><td>"),a.push(s(B.space.space,o.token)),a.push("</td><td>"),a.push(B.space.space),a.push("</td><td>"),a.push(s(B.space.space,o.space)),a.push("</td><td>"),a.push(s(B.space.space,o.chars)),a.push("</td></tr><tr><th>Tabs</th><td>"),a.push(B.space.tab),a.push("</td><td>"),a.push(s(B.space.tab,o.space)),a.push("</td><td>"),a.push(s(B.space.tab,o.token)),a.push("</td><td>"),a.push(B.space.tab),a.push("</td><td>"),a.push(s(B.space.tab,o.space)),a.push("</td><td>"),a.push(s(B.space.tab,o.chars)),a.push("</td></tr><tr><th>Other Whitespace</th><td>"),a.push(B.space.other),a.push("</td><td>"),a.push(s(B.space.other,o.space)),a.push("</td><td>"),a.push(s(B.space.other,o.token)),a.push("</td><td>"),a.push(B.space.other),a.push("</td><td>"),a.push(s(B.space.other,o.space)),a.push("</td><td>"),a.push(s(B.space.other,o.chars)),a.push("</td></tr><tr><th>Total Whitespace</th><td>"),a.push(o.space),a.push("</td><td>100.00%</td><td>"),a.push(s(o.space,o.token)),a.push("</td><td>"),a.push(o.space),a.push("</td><td>100.00%</td><td>"),a.push(s(o.space,o.chars)),a.push("</td></tr><tr><th colspan='7'>Literals</th></tr><tr><th>Strings</th><td>"),a.push(B.string.token),a.push("</td><td>"),a.push(s(B.string.token,o.literal.token)),a.push("</td><td>"),a.push(s(B.string.token,o.token)),a.push("</td><td>"),a.push(B.string.chars),a.push("</td><td>"),a.push(s(B.string.chars,o.literal.chars)),a.push("</td><td>"),a.push(s(B.string.chars,o.chars)),a.push("</td></tr><tr><th>Numbers</th><td>"),a.push(B.number.token),a.push("</td><td>"),a.push(s(B.number.token,o.literal.token)),a.push("</td><td>"),a.push(s(B.number.token,o.token)),a.push("</td><td>"),a.push(B.number.chars),a.push("</td><td>"),a.push(s(B.number.chars,o.literal.chars)),a.push("</td><td>"),a.push(s(B.number.chars,o.chars)),a.push("</td></tr><tr><th>Regular Expressions</th><td>"),a.push(B.regex.token),a.push("</td><td>"),a.push(s(B.regex.token,o.literal.token)),a.push("</td><td>"),a.push(s(B.regex.token,o.token)),a.push("</td><td>"),a.push(B.regex.chars),a.push("</td><td>"),a.push(s(B.regex.chars,o.literal.chars)),a.push("</td><td>"),a.push(s(B.regex.chars,o.chars)),a.push("</td></tr><tr><th>Total Literals</th><td>"),a.push(o.literal.token),a.push("</td><td>100.00%</td><td>"),a.push(s(o.literal.token,o.token)),a.push("</td><td>"),a.push(o.literal.chars),a.push("</td><td>100.00%</td><td>"),a.push(s(o.literal.chars,o.chars)),a.push("</td></tr><tr><th colspan='7'>Syntax Characters</th></tr><tr><th>Quote Characters</th><td>"),a.push(B.string.quote),a.push("</td><td>"),a.push(s(B.string.quote,o.syntax.token)),a.push("</td><td>"),a.push(s(B.string.quote,o.token)),a.push("</td><td>"),a.push(B.string.quote),a.push("</td><td>"),a.push(s(B.string.quote,o.syntax.chars)),a.push("</td><td>"),a.push(s(B.string.quote,o.chars)),a.push("</td></tr><tr><th>Commas</th><td>"),a.push(B.comma),a.push("</td><td>"),a.push(s(B.comma,o.syntax.token)),a.push("</td><td>"),a.push(s(B.comma,o.token)),a.push("</td><td>"),a.push(B.comma),a.push("</td><td>"),a.push(s(B.comma,o.syntax.chars)),a.push("</td><td>"),a.push(s(B.comma,o.chars)),a.push("</td></tr><tr><th>Containment Characters</th><td>"),a.push(B.container),a.push("</td><td>"),a.push(s(B.container,o.syntax.token)),a.push("</td><td>"),a.push(s(B.container,o.token)),a.push("</td><td>"),a.push(B.container),a.push("</td><td>"),a.push(s(B.container,o.syntax.chars)),a.push("</td><td>"),a.push(s(B.container,o.chars)),a.push("</td></tr><tr><th>Semicolons</th><td>"),a.push(B.semicolon),a.push("</td><td>"),a.push(s(B.semicolon,o.syntax.token)),a.push("</td><td>"),a.push(s(B.semicolon,o.token)),a.push("</td><td>"),a.push(B.semicolon),a.push("</td><td>"),a.push(s(B.semicolon,o.syntax.chars)),a.push("</td><td>"),a.push(s(B.semicolon,o.chars)),a.push("</td></tr><tr><th>Operators</th><td>"),a.push(B.operator.token),a.push("</td><td>"),a.push(s(B.operator.token,o.syntax.token)),a.push("</td><td>"),a.push(s(B.operator.token,o.token)),a.push("</td><td>"),a.push(B.operator.chars),a.push("</td><td>"),a.push(s(B.operator.chars,o.syntax.chars)),a.push("</td><td>"),a.push(s(B.operator.chars,o.chars)),a.push("</td></tr><tr><th>Total Syntax Characters</th><td>"),a.push(o.syntax.token),a.push("</td><td>100.00%</td><td>"),a.push(s(o.syntax.token,o.token)),a.push("</td><td>"),a.push(o.syntax.chars),a.push("</td><td>100.00%</td><td>"),a.push(s(o.syntax.chars,o.chars)),a.push("</td></tr>"),a.push("<tr><th colspan='7'>Keywords and Variables</th></tr><tr><th>Words</th><td>"),a.push(B.word.token),a.push("</td><td>100.00%</td><td>"),a.push(s(B.word.token,o.token)),a.push("</td><td>"),a.push(B.word.chars),a.push("</td><td>100.00%</td><td>"),a.push(s(B.word.chars,o.chars)),a.push("</td></tr>"),a.push("<tr><th colspan='7'>Server-side Tags</th></tr><tr><th>Server Tags</th><td>"),a.push(B.server.token),a.push("</td><td>100.00%</td><td>"),a.push(s(B.server.token,o.token)),a.push("</td><td>"),a.push(B.server.chars),a.push("</td><td>100.00%</td><td>"),a.push(s(B.server.chars,o.chars)),a.push("</td></tr></tbody></table></div>"),r=a.join("")
}())),U))},l=function(e){var t=e.accessibility===!0||"true"===e.accessibility,n=e.braceline===!0||"true"===e.braceline,i=e.bracepadding===!0||"true"===e.bracepadding,a="allman"===e.braces?"allman":"knr",s="string"==typeof e.inchar&&e.inchar.length>0?e.inchar:" ",u="string"==typeof e.comments&&"noindent"===e.comments?"noindent":"nocomment"===e.comments?"nocomment":"indent",l=e.html===!0||e.conditional===!0||"true"===e.conditional,f="true"===e.content||e.content===!0,d=e.correct===!0||"true"===e.correct,h=e.cssinsertlines===!0||"true"===e.cssinsertlines,m=e.dustjs===!0||"true"===e.dustjs,g=e.force_indent===!0||"true"===e.force_indent,v="true"===e.html||e.html===!0,y=isNaN(e.inlevel)===!0?0:Number(e.inlevel),_=e.jsx===!0||"true"===e.jsx,x="parse"===e.mode||"diff"===e.mode||"minify"===e.mode?e.mode:"beautify",b=e.obfuscate===!0||"true"===e.obfuscate,w="true"===e.objsort||e.objsort===!0,S=e.preserve!==!1&&"false"!==e.preserve,E="single"===e.quoteConvert||"double"===e.quoteConvert?e.quoteConvert:"none",C=isNaN(e.insize)===!0?4:Number(e.insize),T="string"==typeof e.source&&e.source.length>0?e.source:"Error: no source code supplied to markuppretty!",P=e.space!==!1&&"false"!==e.space,I="string"==typeof e.style&&"noindent"===e.style?"noindent":"indent",D="string"==typeof e.styleguide?e.styleguide:"none",A=e.tagmerge===!0||"true"===e.tagmerge,N=e.tagsort===!0||"true"===e.tagsort,k=e.textpreserve===!0||"true"===e.textpreserve,O=e.top_comments===!0||"true"===e.top_comments,R=isNaN(e.wrap)===!0||_===!0?0:Number(e.wrap),j="each"===e.varword||"list"===e.varword?e.varword:"none",F="jsonly"===e.vertical?"jsonly":e.vertical===!0||"true"===e.vertical,L={cdata:[0,0],comment:[0,0],conditional:[0,0],content:[0,0],end:[0,0],ignore:[0,0],script:[0,0],sgml:[0,0],singleton:[0,0],space:0,start:[0,0],style:[0,0],template:[0,0],text:[0,0],xml:[0,0]},M=[],B=[],U=[],V=[],Q=[],G=[],H=[],z=[],W=[],q=[],X=1,$=function(e){var t=e.replace(/\s+/," ").indexOf(" "),n=0>t?e.slice(1,e.length-1):e.slice(1,t).toLowerCase();return n},J=function(e){var t=e.indexOf("="),n="",r="";return 0>t?[e,""]:(n=e.slice(0,t),r=e.slice(t+1),('"'===r.charAt(0)&&'"'===r.charAt(r.length-1)||"'"===r.charAt(0)&&"'"===r.charAt(r.length-1))&&(r=r.slice(1,r.length-1)),v===!0?[n.toLowerCase(),r.toLowerCase()]:[n,r])};return"diff"===x?R=0:f=!1,_===!0&&(m=!1),k===!0&&(R=0),function(){var e=0,t=T.split(""),n=t.length,r="",i="",a=0,s=0,d=!1,h=function(){i.length>0?(L.space+=i.length,S===!0&&i.split("\n").length>2?Q.push(2):Q.push(1)):Q.push(0),r=i,i=""},g=function(o){var c=[],f=0,g=0,y=0,b=0,w=0,S="",C="",T="",P="",I="",D=!1,k=!1,O=!1,R=!1,j=!1,F=!1,L=!1,U=!1,K=!1,Y=!1,Z=!1,et=!1,tt=[];if(h(),B.push(!1),M.push([]),V.push(X),d=!1,"<"===t[e])"!"===t[e+1]?"-"===t[e+2]&&"-"===t[e+3]?"#"===t[e+4]?(o="-->",H.push("template")):"["===t[e+4]&&"i"===t[e+5]&&"f"===t[e+6]&&l===!0?(o="-->",H.push("conditional")):(o="-->","minify"===x||"nocomment"===u?R=!0:(F=!0,D=!0,H.push("comment"))):"["===t[e+2]&&"C"===t[e+3]&&"D"===t[e+4]&&"A"===t[e+5]&&"T"===t[e+6]&&"A"===t[e+7]&&"["===t[e+8]?(o="]]>",F=!0,H.push("cdata")):(o=">",H.push("sgml")):"?"===t[e+1]?(o="?>","x"===t[e+2]&&"m"===t[e+3]&&"l"===t[e+4]?H.push("xml"):(F=!0,H.push("template"))):"%"===t[e+1]?(F=!0,"-"===t[e+2]&&"-"===t[e+3]?(o="--%>",D=!0,H.push("comment")):(o="%>",H.push("template"))):void 0===t[e+4]||"p"!==t[e+1].toLowerCase()||"r"!==t[e+2].toLowerCase()||"e"!==t[e+3].toLowerCase()||">"!==t[e+4]&&/\s/.test(t[e+4])!==!0?"<"===t[e+1]?(o="<"===t[e+2]?">>>":">>",H.push("template")):("/"===t[e+1]?H.push("end"):j=!0,o=">"):(o="</pre>",F=!0,H.push("ignore"));else if("{"===t[e])if(F=!0,_===!0)o="}",H.push("script");else if(m===!0){if(":"===t[e+1]&&"e"===t[e+2]&&"l"===t[e+3]&&"s"===t[e+4]&&"e"===t[e+5]&&"}"===t[e+6])return e+=6,G.push("{:else}"),H.push("template_else");"!"===t[e+1]?(o="!}",D=!0,H.push("comment")):"/"===t[e+1]?(o="}",H.push("template_end")):"~"===t[e+1]?(o="}",H.push("singleton")):">"===t[e+1]?(o="/}",H.push("singleton")):"#"===t[e+1]||"?"===t[e+1]||"^"===t[e+1]||"@"===t[e+1]||"<"===t[e+1]||"+"===t[e+1]?(o="}",H.push("template_start")):(o="}",H.push("template"))}else"{"===t[e+1]?"{"===t[e+2]?(o="}}}",H.push("template")):"#"===t[e+2]?(o="}}",H.push("template_start")):"/"===t[e+2]?(o="}}",H.push("template_end")):(o="}}",H.push("template")):(o=t[e+1]+"}",H.push("template"));else"["===t[e]&&"%"===t[e+1]&&(o="%]",H.push("template"));for(T=o.charAt(o.length-1),e=e;n>e;e+=1)if("\n"===t[e]&&(X+=1),c.push(t[e]),D===!0&&(S=""),""===S)if(_===!0&&("{"===t[e]?w+=1:"}"===t[e]&&(w-=1)),"<"===t[e]&&F===!1&&c.length>1&&">>"!==o&&">>>"!==o&&j===!0&&(q.push("Parse error on line "+X+" on element: "),Z=!0),L===!0&&/\s/.test(t[e])===!1&&t[e]!==T)for(L=!1,S=I,c.pop(),e=e;n>e;e+=1)if("\n"===t[e]&&(X+=1),tt.push(t[e]),""===S){if(t[e+1]===T){"/"===tt[tt.length-1]&&(tt.pop(),e-=1),C=tt.join("").replace(/\s+/g," "),P=J(C)[0],"data-prettydiff-ignore"===P?K=!0:"id"===P&&W.push(C.slice(P.length+1,C.length)),""!==C&&" "!==C&&M[M.length-1].push(C),tt=[];break}if(/\s/.test(t[e])===!0){if("="===tt[tt.length-2])for(g=e+1;n>g;g+=1)if(/\s/.test(t[g])===!1){('"'===t[g]||"'"===t[g])&&(e=g-1,Y=!0,tt.pop());break}if(Y!==!0){tt.pop(),C=tt.join("").replace(/\s+/g," "),P=J(C)[0],"data-prettydiff-ignore"===P?K=!0:"id"===P&&W.push(C.slice(P.length+1,C.length)),""!==C&&" "!==C&&M[M.length-1].push(C),L=!0,tt=[];break}Y=!1}'"'===t[e]||"'"===t[e]?S=t[e]:_===!0?"="===t[e-1]&&"{"===t[e]?(S="}",f=1):"/"===t[e]&&("*"===t[e+1]?S="*/":"/"===t[e+1]&&(S="\n")):"{"===c[0]||"{"!==t[e]||m!==!0&&"{"!==t[e+1]&&"%"!==t[e+1]&&"@"!==t[e+1]&&"#"!==t[e+1]||(S="{"===t[e+1]?"{"===t[e+2]?"}}}":"}}":m===!0?"}":t[e+1]+"}")}else if(_===!0&&("}"===S||"\n"===S&&"\n"===t[e]||"*/"===S&&"*"===t[e-1]&&"/"===t[e])){if("}"!==S){S="",I="",B[B.length-1]=!0,C=tt.join(""),"*"===C.charAt(1)&&(C+="\n"),tt=[]," "!==C&&M[M.length-1].push(C);break}if("{"===t[e])f+=1;else if(t[e]===S&&(f-=1,0===f)){S="",C=tt.join("").replace(/\s+/g," "),tt=[]," "!==C&&M[M.length-1].push(C);break}}else{for(y=0,g=S.length-1;g>-1&&t[e-y]===S.charAt(g);g-=1)y+=1;if(0>g&&(S='"'===S&&"single"===E?tt.slice(0,tt.length-1).join("").replace(/'/g,'"').replace(/"/,"'")+"'":"'"===S&&"double"===E?tt.slice(0,tt.length-1).join("").replace(/"/g,"'").replace(/'/,'"')+'"':tt.join(""),P=J(S)[0],"data-prettydiff-ignore"===P?K=!0:"id"===P?W.push(S.slice(P.length+2,S.length-1)):"schemaLocation"===P&&z.push(S.slice(P.length+2,S.length-1)),"="===S.charAt(0)&&M[M.length-1][M[M.length-1].length-1].indexOf("=")<0?M[M.length-1][M[M.length-1].length-1]=M[M.length-1][M[M.length-1].length-1]+S.replace(/\s+/g," "):M[M.length-1].push(S.replace(/\s+/g," ")),S="",tt=[],t[e+1]===T))break}else if('"'===t[e]||"'"===t[e])S=t[e];else if("{"===c[0]||"{"!==t[e]||m!==!0&&"{"!==t[e+1]&&"%"!==t[e+1]&&"@"!==t[e+1]&&"#"!==t[e+1])if(j===!0&&/\s/.test(t[e])===!0&&"<"!==t[e-1])L=!0;else if(j!==!0||_!==!0||"/"!==t[e]||"*"!==t[e+1]&&"/"!==t[e+1]){if(t[e]===T&&(_===!1||0===w)){for(y=c.length,g=o.length-1;g>-1&&(y-=1,c[y]===o.charAt(g));g-=1);if(0>g)break}}else L=!0,c[c.length-1]=" ",tt.push(t[e]),I="*"===t[e+1]?"*/":"\n";else S="{"===t[e+1]?"{"===t[e+2]?"}}}":"}}":m===!0?"}":t[e+1]+"}",S===o&&(S="");else if(t[e]===S.charAt(S.length-1)){for(y=0,g=S.length-1;g>-1&&t[e-y]===S.charAt(g);g-=1)y+=1;0>g&&(S="")}if(R===!0)return M.pop(),B.pop(),V.pop(),Q.pop(),i=r,void 0;if(M[M.length-1].length>0&&(g=M.length-1,"/"===M[g][M[g].length-1]&&(M[M.length-1].pop(),c.splice(c.length-1,0,"/")),B[B.length-1]===!1&&(M[M.length-1]=p(M[M.length-1]))),C=c.join(""),Z===!0)if(0===C.indexOf("<!--<!["))q.pop();else if(q[q.length-1]=q[q.length-1]+C,C.indexOf("</")>0)return G.push(C),H.push("end");if(k=function(){var e=$(C),t=M[M.length-1],n=[],r="",i="",o=0;if(n=G[G.length-1],"end"===H[H.length-1])if("singleton"===H[H.length-2]&&"/"!==n.charAt(n.length-2)&&"/"+$(n)===e)H[H.length-2]="start";else if("start"===H[H.length-2]&&"/span"!==e&&"/div"!==e&&"/script"!==e&&(v===!1||v===!0&&"/li"!==e)&&e==="/"+$(G[G.length-1])&&A===!0)return H.pop(),M.pop(),B.pop(),V.pop(),Q.pop(),H[H.length-1]="singleton",G[G.length-1]=G[G.length-1].replace(/>$/,"/>"),et=!0,void 0;for(o=t.length-1;o>-1;o-=1)n=J(t[o]),"type"===n[0]?(i=n[1],('"'===i.charAt(0)||"'"===i.charAt(0))&&(i=i.slice(1,i.length-1))):"src"!==n[0]||"embed"!==e&&"img"!==e&&"script"!==e&&"iframe"!==e?"link"===e&&"href"===n&&(r=n[1],('"'===r.charAt(0)||"'"===r.charAt(0))&&(r=r.slice(1,r.length-1)),z.push(r)):(r=n[1],('"'===r.charAt(0)||"'"===r.charAt(0))&&(r=r.slice(1,r.length-1)),z.push(r));if(("script"===e||"style"===e)&&("script"!==e||""!==i&&"text/javascript"!==i&&"application/javascript"!==i&&"application/x-javascript"!==i&&"text/ecmascript"!==i&&"application/ecmascript"!==i&&"text/jsx"!==i&&"application/jsx"!==i&&"text/cjs"!==i?"style"!==e||""!==S&&"text/css"!==S||(d=!0):d=!0),v===!0)if("li"===e)s===a?U=!0:s+=1;else if("/li"===e&&s===a)s-=1;else if("ul"===e||"ol"===e)a+=1;else if("/ul"===e||"/ol"===e)s===a&&(U=!0,s-=1),a-=1;else if("area"===e||"base"===e||"basefont"===e||"br"===e||"col"===e||"embed"===e||"eventsource"===e||"frame"===e||"hr"===e||"img"===e||"input"===e||"keygen"===e||"link"===e||"meta"===e||"param"===e||"progress"===e||"source"===e||"wbr"===e)return!0;return m===!0&&"template_start"===H[H.length-1]&&(i=C.charAt(1),r=C.slice(C.length-2),"/}"!==r&&r.charAt(0)!==i||"#"!==i&&"?"!==i&&"^"!==i&&"@"!==i&&"<"!==i&&"+"!==i||(H[H.length-1]="template")),!1}(),et!==!0){if(j===!0&&K===!1&&(k===!0||"/"===c[c.length-2]&&">"===c[c.length-1]?H.push("singleton"):H.push("start")),j===!0&&F===!1&&K===!0&&">"===o&&"/>"!==C.slice(C.length-2))if(k===!0)H.push("singleton");else for(F=!0,H.push("ignore"),e+=1,e=e;n>e;e+=1)if("\n"===t[e]&&(X+=1),c.push(t[e]),""===S)if('"'===t[e])S='"';else if("'"===t[e])S="'";else if("{"===c[0]||"{"!==t[e]||m!==!0&&"{"!==t[e+1]&&"%"!==t[e+1]&&"@"!==t[e+1]&&"#"!==t[e+1]){if("<"===t[e]&&j===!0)O="/"===t[e+1]?!0:!1;else if(t[e]===T&&"/"!==t[e-1]&&"/"!==t[e-1])if(O===!0){if(b-=1,0>b)break}else b+=1}else S="{"===t[e+1]?"{"===t[e+2]?"}}}":"}}":m===!0?"}":t[e+1]+"}";else if(t[e]===S.charAt(S.length-1)){for(y=0,g=S.length-1;g>-1&&t[e-y]===S.charAt(g);g-=1)y+=1;0>g&&(S="")}C=c.join(""),"template"===H[H.length-1]&&(/^(<%\s*\})/.test(C)===!0||/^(\[%\s*\})/.test(C)===!0||/^(\{@\s*\})/.test(C)===!0?H[H.length-1]="template_end":(/(\{\s*%>)$/.test(C)===!0||/(\{\s*%\])$/.test(C)===!0||/(\{\s*@\})$/.test(C)===!0)&&(H[H.length-1]="template_start")),U!==!0||"beautify"!==x&&"diff"!==x||(G.push("</prettydiffli>"),Q.push(Q[Q.length-1]),V.push(X),Q[Q.length-2]=0,M.splice(M.length-1,0,[]),H.splice(H.length-1,0,"end")),F===!0?G.push(C):G.push(C.replace(/\s+/g," ")),N===!0&&"end"===H[H.length-1]&&"start"!==H[H.length-2]&&!function(){var e=[],t=0,n=0,r=0,i=0,o={},a={attrs:[],jscom:[],linen:[],lines:[],token:[],types:[]},s=function(e,t){return G[e[0]]<G[t[0]]?1:-1},u=function(e){a.attrs.push(M[e]),a.jscom.push(B[e]),a.linen.push(V[e]),a.lines.push(Q[e]),a.token.push(G[e]),a.types.push(H[e])};for(t=G.length-2;t>-1;t-=1){if("start"===H[t]){if(n-=1,0>n){i=t+1;break}}else"end"===H[t]&&(n+=1,1===n&&(r=t));0===n&&("start"===H[t]?e.push([t,r]):e.push([t,t]))}if(!(e.length<2)){for(e.sort(s),t=e.length-1;t>-1;t-=1)if(u(e[t][0]),e[t][0]!==e[t][1]){for(n=e[t][0]+1;n<e[t][1];n+=1)u(n);u(e[t][1])}o.attrs=M.pop(),o.jscom=B.pop(),o.linen=V.pop(),o.lines=Q.pop(),o.token=G.pop(),o.types=H.pop(),M=M.slice(0,i).concat(a.attrs),B=B.slice(0,i).concat(a.jscom),V=V.slice(0,i).concat(a.linen),Q=Q.slice(0,i).concat(a.lines),G=G.slice(0,i).concat(a.token),H=H.slice(0,i).concat(a.types),M.push(o.attrs),B.push(o.jscom),V.push(o.linen),Q.push(o.lines),G.push(o.token),H.push(o.types)}}()}},y=function(){var a=[],s="",u=function(e){return i=e,""},l="";for(h(),M.push([]),B.push(!1),V.push(X),d===!0&&(l=$(G[G.length-1])),e=e;n>e;e+=1){if("\n"===t[e]&&(X+=1),d===!0)if(""===s){if('"'===t[e]?s='"':"'"===t[e]?s="'":"/"===t[e]&&("*"===t[e+1]?s="*":"/"===t[e+1]&&(s="/")),"script"===l&&"<"===t[e]&&"/"===t[e+1]&&"s"===t[e+2]&&"c"===t[e+3]&&"r"===t[e+4]&&"i"===t[e+5]&&"p"===t[e+6]&&"t"===t[e+7])return e-=1,d=!1,a.length<2?(M.pop(),B.pop(),V.pop(),Q.pop()):(G.push(a.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"")),"function"==typeof c?H.push(l):H.push("content"));if("style"===l&&"<"===t[e]&&"/"===t[e+1]&&"s"===t[e+2]&&"t"===t[e+3]&&"y"===t[e+4]&&"l"===t[e+5]&&"e"===t[e+6])return e-=1,d=!1,a.length<2?(M.pop(),B.pop(),V.pop(),Q.pop()):(G.push(a.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"")),"function"==typeof o?H.push(l):H.push("content"))}else s===t[e]&&('"'===s||"'"===s||"*"===s&&"/"===t[e+1])?s="":"/"===s&&"\n"===t[e]&&(s="");else if("<"===t[e]||"["===t[e]&&"%"===t[e+1]||"{"===t[e]&&(_===!0||m===!0||"{"===t[e+1]||"%"===t[e+1]||"@"===t[e+1]||"#"===t[e+1]))return m===!0&&"{"===t[e]&&":"===t[e+1]&&"e"===t[e+2]&&"l"===t[e+3]&&"s"===t[e+4]&&"e"===t[e+5]&&"}"===t[e+6]?(e+=6,f===!0?G.push("text"):k===!0?(G.push(r+a.join("")),Q[Q.length-1]=0):G.push(a.join("").replace(/(\s+)$/,u).replace(/\s+/g," ")),H.push("content"),h(),M.push([]),B.push(!1),V.push(X),G.push("{:else}"),H.push("template_else")):(e-=1,f===!0?G.push("text"):k===!0?(G.push(r+a.join("")),Q[Q.length-1]=0):G.push(a.join("").replace(/(\s+)$/,u).replace(/\s+/g," ")),H.push("content"));a.push(t[e])}};for(e=0;n>e;e+=1)d===!0?y():/\s/.test(t[e])===!0?(i+=t[e],"\n"===t[e]&&(X+=1)):"<"===t[e]?g(""):"["===t[e]&&"%"===t[e+1]?g("%]"):"{"!==t[e]||_!==!0&&m!==!0&&"{"!==t[e+1]&&"%"!==t[e+1]&&"@"!==t[e+1]&&"#"!==t[e+1]?y():g("");Q[0]=0}(),"parse"===x?(function(){var e=0,t=G.length,n=function(n){return"content"===H[e]?(G[e]=n+G[e],void 0):"content"===H[e-1]&&"content"!==G[e]?(G[e-1]=G[e-1]+n,void 0):(G.splice(e,0,n),H.splice(e,0,"content"),Q.splice(e,0,1),M.splice(e,0,[]),t+=1,e+=1,void 0)};for(e=0;t>e;e+=1)M[e].length>0&&(G[e]=G[e].replace(" "," "+M[e].join(" ")).replace(/(\ \/>)$/,"/>")),"</prettydiffli>"===G[e]&&(d===!0?G[e]="</li>":(G[e]="",H[e]="")),2===Q[e]?S===!0?n("\n\n"):("singleton"===H[e]||"content"===H[e]||"template"===H[e])&&n(" "):1===Q[e]&&("singleton"===H[e]||"content"===H[e]||"template"===H[e]?n(" "):H[e]===H[e-1]||"singleton"!==H[e-1]&&"content"!==H[e-1]&&"template"!==H[e-1]||n(" "))}(),{token:G,types:H}):("minify"===x&&!function(){var e=0,t=G.length,n=function(){G[e]=c({correct:d,mode:"minify",obfuscate:b,quoteConvert:E,source:G[e],styleguide:D,topcoms:O}),U.push("x")},r=function(){G[e]=o({mode:"minify",objsort:w,source:G[e],topcoms:O}),U.push("x")};for(e=0;t>e;e+=1)"script"===H[e]?n():"style"===H[e]?r():Q[e]>0?"singleton"===H[e]||"content"===H[e]||"template"===H[e]?U.push(0):"singleton"===H[e-1]||"content"===H[e-1]||"template"===H[e]?U.push(0):U.push("x"):U.push("x")}(),("beautify"===x||"diff"===x)&&!function(){var e=0,t=G.length,r="",l=0,p=y,f="",m="",v="",x="",b=/^(\s*(\/)*<!?\[+[A-Z]+\[+)/,T=/((\/)*\]+>\s*)$/,A=/^(\s*<!--)/,N=/((\/\/)?-->\s*)$/,O="",R=function(){var e=C,t=[];for(e=e;e>-1;e-=1)t.push(s);return new RegExp("^("+t.join("")+"+)")}(),M=function(){var t=0;if(p-=1,"start"===r||_===!0&&/^\s+\{/.test(G[e-1])===!0&&0===Q[e])return U.push("x");if(g===!1){if(0===Q[e]&&("singleton"===r||"content"===r||"template"===r))return U.push("x");if("comment"===r)for(t=e-1;t>-1;t-=1)if("comment"!==H[t]){if(0===Q[t+1]&&("singleton"===H[t]||"content"===H[t]||"template"===r)){for(t+=1;e>t;t+=1)U[t]="x";return U.push("x")}return U.push(p)}return U.push(p)}U.push(p)},B=function(){var t=0;if(0===Q[e]&&g===!1){if("comment"===r&&0===l){for(t=e-1;t>-1;t-=1){if("comment"!==H[t-1]&&"comment"===H[t]){if(0===Q[t]){for(t=t;e>t;t+=1)U[t]="x";return U.push("x")}return U.push(p)}if(Q[t]>0)return U.push(p)}return U.push(p)}U.push("x")}else U.push(p)},V=function(){var t=[],r=G[e],o=!1,l=function(e){return e+"{"};L.script[0]+=1,L.script[1]+=G[e].replace(/\s+/g," ").length,b.test(G[e])===!0?(f=b.exec(G[e])[0].replace(/^\s+/,"")+"\n",G[e]=G[e].replace(b,"")):A.test(G[e])===!0&&(v=A.exec(G[e])[0].replace(/^\s+/,"")+"\n",G[e]=G[e].replace(A,"")),T.test(G[e])===!0?(m=T.exec(G[e])[0],G[e]=G[e].replace(T,"")):N.test(G[e])===!0&&(x=N.exec(G[e])[0],G[e]=G[e].replace(N,"")),_===!0&&"{"===r.charAt(0)&&(r=r.slice(1,r.length-1),o=!0),G[e]=c({braceline:n,bracepadding:i,braces:a,comments:u,correct:d,inchar:s,inlevel:"noindent"===I||0===Q[e]?0:p,insize:C,mode:"beautify",objsort:w,preserve:S,quoteConvert:E,source:r,space:P,styleguide:D,varword:j,vertical:"jsonly"===F||F===!0||"true"===F}),o===!0&&(G[e]=0===Q[e]?"{"+G[e]+"}":G[e].replace(/^(\s+)/,l)+"}"),t=R.exec(G[e]),null!==t&&(O=t[0]),""!==f?(G[e]=O+f+G[e],f=""):""!==v&&(G[e]=O+v+G[e],v=""),""!==m?(G[e]=G[e]+O+m,m=""):""!==x&&(G[e]=G[e]+O+x,x=""),o===!0&&0===Q[e]?(U.push("x"),H[e]="singleton"):U.push(0)},z=function(){var t=[];L.style[0]+=1,L.style[1]+=G[e].replace(/\s+/g," ").length,b.test(G[e])===!0?(f=b.exec(G[e])[0].replace(/^\s+/,"")+"\n",G[e]=G[e].replace(b,"")):A.test(G[e])===!0&&(v=A.exec(G[e])[0].replace(/^\s+/,"")+"\n",G[e]=G[e].replace(A,"")),T.test(G[e])===!0?(m=T.exec(G[e])[0],G[e]=G[e].replace(T,"")):N.test(G[e])===!0&&(x=N.exec(G[e])[0],G[e]=G[e].replace(N,"")),G[e]=o({comm:u,cssinsertlines:h,inchar:s,inlevel:"noindent"===I?0:p,insize:C,mode:"beautify",objsort:w,source:G[e],vertical:F===!0||"true"===F}),t=R.exec(G[e]),null!==t&&(O=t[0]),""!==f?(G[e]=O+f+G[e],f=""):""!==v&&(G[e]=O+v+G[e],v=""),""!==m?(G[e]=G[e]+O+m,m=""):""!==x&&(G[e]=G[e]+O+x,x=""),U.push(0)};for(e=0;t>e;e+=1)"start"===H[e]?(U.push(p),p+=1,L.start[0]+=1,L.start[1]+=G[e].length):"template_start"===H[e]?(U.push(p),p+=1,L.template[0]+=1,L.template[1]+=G[e].length):"template_else"===H[e]?(p-=1,U.push(p),p+=1,L.template[0]+=1,L.template[1]+=G[e].length):"end"===H[e]?(M(),L.end[0]+=1,L.end[1]+=G[e].length):"template_end"===H[e]?(M(),L.template[0]+=1,L.template[1]+=G[e].length):0!==Q[e]||"singleton"!==H[e]&&"content"!==H[e]&&"template"!==H[e]?"script"===H[e]?(L.script[0]+=1,L.script[1]+=G[e].length,V()):"style"===H[e]?(L.style[0]+=1,L.style[1]+=1,z()):"comment"===H[e]&&"noindent"===u?(U.push(0),L.comment[0]+=1,L.comment[1]+=G[e].length):(U.push(p),L[H[e]][0]+=1,L[H[e]][1]+=G[e].length):("content"===H[e]&&k===!0?U.push("x"):B(),L[H[e]][0]+=1,L[H[e]][1]+=G[e].length),r=H[e],l=Q[e];U[0]=0}(),function(){var e=0,o=U.length,l=[],f="",h=function(){var e=0,t=[s],n=C-1;for(e=0;n>e;e+=1)t.push(s);return t.join("")}(),m=function(t,n){var r=0,i=["\n"];if("minify"===x)return l.push("\n");for(2===Q[e]&&n===l&&i.push("\n"),r=0;t>r;r+=1)i.push(h);n.push(i.join(""))},g=function(){var t=0,n=0,r=0,i=M[e],o=U[e],a="",s="",u=[],c=0;if("x"===o){t=e;do t-=1,o=U[t],r+=G[t].length;while("x"===o&&t>-1);"x"===o&&(o=1)}if(i.length>0){if(a=i.join(" "),s=$(G[e]),n=s.length+3+a.length,"/"===G[e].charAt(G[e].length-2)&&(n+=1),0===R||R>=n)return G[e]=G[e].replace(" "," "+a).replace(/(\ \/>)$/,"/>"),void 0;for(u.push(G[e].slice(0,G[e].indexOf(" "))),c=u[0].length,n=i.length,t=0;n>t;t+=1)i[t].length+c+1>R?(m(o+1,u),c=0):(u.push(" "),c+=1),u.push(i[t]),c+=i[t].length;u.push(G[e].slice(G[e].indexOf(" ")+1)),G[e]=u.join("").replace(/(\ \/>)$/,"/>")}else{if(i=G[e].split(" "),n=i.length,"x"===U[e]&&"end"===H[e-1]){t=e-1,o=1;do t-=1,"start"===H[t]?o-=1:"end"===H[t]&&(o+=1);while(o>0&&t>0);o=U[t]}for(t=0;n>t;t+=1)s+=i[t],void 0!==i[t+1]&&s.length+i[t+1].length+1>R-r?(u.push(s),r=0,"x"===U[e]&&"end"!==H[e-1]?m(o+1,u):m(o,u),s=""):s+=" ";u.push(s.replace(/\s$/,"")),u.length>0&&"\n"===u[u.length-1].charAt(0)&&u.pop(),G[e]=u.join("").replace(/(\ \/>)$/,"/>")}},v=function(){var t=G[e].split(" "),n=M[e],r=n.length,i=0,o=[t[0]],a=[],s=[],u=0,c=0,p=0,f=0;for(m(U[e],l),c=0;r>c;c+=1){if(u=n[c].indexOf("\n"),u>0&&u!==n[c].length-1&&0===n[c].indexOf("/*")){for(a=n[c].split("\n"),s.push(a[0]),f=a.length,p=0;f>p;p+=1)""===a[p]?a[p]="\n":(m(U[e]+1,s),s.push(a[p].replace(/^(\s+)/,"")));s.push("\n"),n[c]=s.join("")}c>0&&"\n"===n[c-1].charAt(n[c-1].length-1)?(m(U[e]+1,o),i=o.length-1,o[i]=o[i].slice(1)):o.push(" "),o.push(n[c])}"\n"===n[r-1].charAt(n[r-1].length-1)&&(m(U[e],o),i=o.length-1,o[i]=o[i].slice(1)),o.push(t[1]),l.push(o.join(""))},b=function(){var t=M[e],r=0,o=t.length,l=[],p=y+U[e];for("x"===U[e]?p=y:U[e]>0&&(p=U[e]),r=0;o>r;r+=1)l=J(t[r]),"{"===l[1].charAt(0)&&(l[1]=c({braceline:n,bracepadding:i,braces:a,comments:u,correct:d,inchar:s,inlevel:p,insize:C,mode:"beautify",objsort:w,preserve:S,quoteConvert:E,source:l[1].slice(1,l[1].length-1),space:P,styleguide:D,varword:j,vertical:"jsonly"===F||F===!0||"true"===F}),M[e][r]=l[0]+"={"+l[1].replace(/^\s+/,"")+"}")};for(e=0;o>e;e+=1)_===!0&&M[e].length>0&&b(),B[e]===!0?v():("content"===H[e]&&R>0&&G[e].length>R||M[e].length>0)&&"beautify"===x?g():M[e].length>0?G[e]=G[e].replace(" "," "+M[e].join(" ")).replace(/(\ \/>)$/,"/>"):"singleton"===H[e]&&(G[e]=G[e].replace(/(\ \/>)$/,"/>")),"</prettydiffli>"===G[e]&&d===!0&&(G[e]="</li>"),"</prettydiffli>"!==G[e]&&(isNaN(U[e])===!1?"minify"===x?l.push(" "):m(U[e],l):"s"===U[e]&&l.push(" "),l.push(G[e]));return"\n"===l[0]&&(l[0]=""),f=l.join(""),"beautify"===x&&(r=function(){var e=G.length,n=[],r=L.start[0]-L.end[0],i=0,a=/\u0000|\u0001|\u0002|\u0003|\u0004|\u0005|\u0006|\u0007|\u0008|\u000b|\u000c|\u000e|\u000f|\u0010|\u0011|\u0012|\u0013|\u0014|\u0015|\u0016|\u0017|\u0018|\u0019|\u001a|\u001b|\u001c|\u001d|\u001e|\u001f|\u007f|\u0080|\u0081|\u0082|\u0083|\u0084|\u0085|\u0086|\u0087|\u0088|\u0089|\u008a|\u008b|\u008c|\u008d|\u008e|\u008f|\u0090|\u0091|\u0092|\u0093|\u0094|\u0095|\u0096|\u0097|\u0098|\u0099|\u009a|\u009b|\u009c|\u009d|\u009e|\u009f|\ufffd/g,s=function(e){var t=String(e).split(""),n=0,r=t.length,i=0;for(2===r%3?i=2:1===r%3&&(i=1),n=r-1;n>0;n-=1)0===n%3-i&&(t[n]=","+t[n]);return t.join("")},u=function(e){var t=e.length,n=e===W,r=0,o=[],a=[];if(t>0){for(e=p(e),r=0;t>r;r+=1)e[r]===e[r+1]?(n!==!0||0!==o.length&&o[o.length-1][1]===e[r]||o.push([2,e[r]]),o.length>0&&(o[o.length-1][0]+=1)):n===!1&&o.push([1,e[r]]);if(t=o.length,n===!0){if(0===t)return"";a.push("<h4>Duplicate id attribute values</h4>")}else a.push("<h4>HTTP requests:</h4>");for(a.push("<ul>"),r=0;t>r;r+=1)n===!0&&o[r][0]>1&&(i+=o[r][0]-1),a.push("<li>"),a.push(o[r][0]),a.push("x - "),a.push(o[r][1].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),a.push("</li>");return a.push("</ul>"),a.join("")}return""},c=function(){var e=[],n=function(){var e=0,t=0,n=0,r=0,a="",s=!1,u=!1,c=!1,l=[],p=[],f=[],d=[],h=/^(h\d)$/,m=[],g=[],v=[],y=[],_=[],x=[],b=[];for(e=0;o>e;e+=1)if(a=$(G[e]),"start"!==H[e]&&"singleton"!==H[e]||"font"!==a&&"center"!==a&&"basefont"!==a&&"b"!==a&&"i"!==a&&"u"!==a&&"small"!==a&&"big"!==a&&"blink"!==a&&"plaintext"!==a&&"spacer"!==a&&"strike"!==a&&"tt"!==a&&"xmp"!==a){for("start"===H[e]&&h.test(a)===!0&&(r=Number(a.charAt(1)),d.length>0&&r-d[d.length-1][1]>1?(i+=1,d.push([e,r,!0])):d.push([e,r,!1])),n=M[e].length,t=0;n>t;t+=1)l=J(M[e][t]),"alt"===l[0]&&"img"===a&&(s=!0,""===l[1]&&f.push(e)),"label"===a&&"for"===l[0]?(x.push(l[1]),c=!0):("select"===a||"input"===a||"textarea"===a)&&("id"===l[0]||"type"===l[0]&&("hidden"===l[1].toLowerCase()||"submit"===l[1].toLowerCase()))&&(u=!0,"id"===l[0]&&_.push([e,t])),m[m.length-1]!==e&&("alink"===l[0]||"align"===l[0]||"background"===l[0]||"border"===l[0]||"color"===l[0]||"compact"===l[0]||"face"===l[0]||"height"===l[0]||"language"===l[0]||"link"===l[0]||"name"===l[0]&&"meta"!==a&&"iframe"!==a&&"select"!==a&&"input"!==a&&"textarea"!==a||"nowrap"===l[0]||"size"===l[0]||"start"===l[0]||"text"===l[0]||"type"===l[0]&&"script"!==a&&"style"!==a&&"input"!==a||"value"===l[0]&&"input"!==a&&"option"!==a&&"textarea"!==a||"version"===l[0]||"vlink"===l[0]||"width"===l[0])&&g.push([e,t]),"tabindex"===l[0]&&(isNaN(Number(l[1]))===!0||Number(l[1])>0?v.push([e,!0]):v.push([e,!1]));c===!0?c=!1:"label"===a&&b.push(e),u===!0?u=!1:("select"===a||"input"===a||"textarea"===a)&&y.push(e),s===!0?s=!1:"img"===a&&p.push(e)}else m.push(e);if(l=[],e=m.length,i+=e,e>0){for(l.push("<h4><strong>"),l.push(e),l.push("</strong> obsolete HTML tag"),e>1&&l.push("s"),l.push("</h4> <p>Obsolete elements do not appropriately describe content.</p> <ol>"),t=0;e>t;t+=1)l.push("<li><code>"),l.push(G[m[t]].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),l.push("</code> on input line number "),l.push(V[m[t]]),l.push("</li>");l.push("</ol>")}else l.push("<h4><strong>0</strong> obsolete HTML tags</h4>");if(e=g.length,e>0){for(r=0,l.push("<h4><strong>"),n=l.length,l.push("</strong> HTML tag"),e>1&&l.push("s"),l.push(" containing obsolete or inappropriate attributes</h4> <p>Obsolete elements do not appropriately describe content.</p> <ol>"),t=0;e>t;t+=1){if(a=G[g[t][0]].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(M[g[t][0]][g[t][1]],"<strong>"+M[g[t][0]][g[t][1]]+"</strong>"),e-1>t&&g[t][0]===g[t+1][0])do a=a.replace(M[g[t][0]][g[t+1][1]],"<strong>"+M[g[t][0]][g[t+1][1]]+"</strong>"),t+=1;while(e-1>t&&g[t][0]===g[t+1][0]);r+=1,l.push("<li><code>"),l.push(a),l.push("</code> on input line number "),l.push(V[g[t][0]]),l.push("</li>")}l.splice(n,0,r),i+=r,l.push("</ol>")}else l.push("<h4><strong>0</strong> HTML tags containing obsolete or inappropriate attributes</h4>");if(e=y.length,i+=e,e>0){for(l.push("<h4><strong>"),l.push(e),l.push("</strong> form control element"),e>1&&l.push("s"),l.push(" missing a required <em>id</em> attribute</h4> <p>The id attribute is required to bind a point of interaction to an HTML label.</p> <ol>"),t=0;e>t;t+=1)l.push("<li><code>"),l.push(G[y[t]].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),l.push("</code> on input line number "),l.push(V[y[t]]),l.push("</li>");l.push("</ol>")}else l.push("<h4><strong>0</strong> form control elements missing a required <em>id</em> attribute</h4> <p>The id attribute is required to bind a point of interaction to an HTML label.</p>");for(e=_.length,y=[],t=0;e>t;t+=1){for(n=x.length-1;n>-1&&J(M[_[t][0]][_[t][1]])[1]!==x[n];n-=1);0>n&&y.push(_[t])}if(e=y.length,i+=e,e>0){for(l.push("<h4><strong>"),l.push(e),l.push("</strong> form control element"),e>1&&l.push("s"),l.push(" not bound to a label</h4> <p>The <em>id</em> of a form control must match the <em>for</em> of a label.</p><ol>"),t=0;e>t;t+=1)l.push("<li><code>"),l.push(G[y[t][0]].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),l.push("</code> on input line number "),l.push(V[y[t][0]]),l.push("</li>");l.push("</ol>")}else l.push("<h4><strong>0</strong> form control elements not bound to a label</h4> <p>The <em>id</em> of a form control must match the <em>for</em> of a label.</p>");if(e=v.length,i+=e,e>0){for(l.push("<h4><strong>"),l.push(e),l.push("</strong> element"),e>1&&l.push("s"),l.push(" with a <em>tabindex</em> attribute</h4> <p>The tabindex attribute should have a 0 or -1 value and should not be over used.</p> <ol>"),t=0;e>t;t+=1)l.push("<li><code>"),v[t][1]===!0&&l.push("<strong>"),l.push(G[v[t][0]].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),v[t][1]===!0&&l.push("</strong>"),l.push("</code> on input line number "),l.push(V[v[t][0]]),l.push("</li>");l.push("</ol>")}else l.push("<h4><strong>0</strong> elements with a <em>tabindex</em> attribute</h4> <p>The tabindex attribute should have a 0 or -1 value and should not be over used.</p>");if(e=d.length,e>0){for(l.push("<h4><strong>"),l.push(e),l.push("</strong> HTML heading tag"),e>1&&l.push("s"),l.push(" and their order</h4> <p>Poorly ordered tags are described with a <strong>strong</strong> tag (color red).</p> <ol>"),t=0;e>t;t+=1)l.push("<li><code>"),d[t][2]===!0&&l.push("<strong>"),l.push(G[d[t][0]].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),d[t][2]===!0&&l.push("</strong>"),l.push("</code> on input line number "),l.push(V[d[t][0]]),l.push("</li>");l.push("</ol>")}else l.push("<h4><strong>0</strong> HTML heading elements</h4>");if(e=p.length,i+=e,e>0){for(l.push("<h4><strong>"),l.push(e),l.push("</strong> image"),e>1&&l.push("s"),l.push(" missing a required <em>alt</em> attribute</h4> <p>The alt attribute is required even if it contains no value.</p> <ol>"),t=0;e>t;t+=1)l.push("<li><code>"),l.push(G[p[t]].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),l.push("</code> on input line number "),l.push(V[p[t]]),l.push("</li>");l.push("</ol>")}else l.push("<h4><strong>0</strong> images missing a required <em>alt</em> attribute</h4> <p>The alt attribute is required even if it contains no value.</p>");if(e=f.length,i+=e,e>0){for(l.push("<h4><strong>"),l.push(e),l.push("</strong> image"),e>1&&l.push("s"),l.push(" have an empty <em>alt</em> attribute value</h4> <p>Empty alt text is not necessarily a violation, such as the case of tracking pixels. If an image has embedded"),t=0;e>t;t+=1)l.push("<li><code>"),l.push(G[f[t]].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),l.push("</code> on input line number "),l.push(V[f[t]]),l.push("</li>");l.push("</ol>")}else l.push("<h4><strong>0</strong> images have an empty <em>alt</em> attribute value</h4>");return l.join("")};return t===!1?"":(e.push(n()),e.join(""))}(),l=function(){var e=q.length,t=0,n=[];if(i+=e,0===e)return"";for(n.push("<h4><strong>"),n.push(e),n.push("</strong> errors interpreting markup</h4> <ol>"),t=0;e>t;t+=1)n.push("<li>"),n.push(q[t].replace(a,"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace("element: ","element: <code>")),n.push("</code></li>");return n.push("</ol>"),n.join("")}(),d=function(){var e=[],t=T.length,n=f.split("\n").length,r=f.length,i=100*(n/X),o=100*(r/t);return e.push("<h4>Data sizes</h4>"),e.push("<table class='analysis' summary='Data sizes'><caption>This table shows changes in sizes of the data due to beautification.</caption>"),e.push("<thead><tr><th>Data figure</th><th>Input</th><th>Output</th><th>Percent change</th></tr></thead><tbody>"),e.push("<tr><th>Lines of code</th><td>"),e.push(s(X)),e.push("</td><td>"),e.push(s(n)),e.push("</td><td>"),e.push(i.toFixed(2)),e.push("%</td></tr>"),e.push("<tr><th>Character size</th><td>"),e.push(s(t)),e.push("</td><td>"),e.push(s(r)),e.push("</td><td>"),e.push(o.toFixed(2)),e.push("%</td></tr>"),e.push("</tbody></table>"),e.join("")}(),h=function(){var e=[],t=L.cdata[0]+L.comment[0]+L.content[0]+L.end[0]+L.ignore[0]+L.script[0]+L.sgml[0]+L.singleton[0]+L.start[0]+L.style[0]+L.template[0]+L.text[0]+L.xml[0],n=L.cdata[1]+L.comment[1]+L.content[1]+L.end[1]+L.ignore[1]+L.script[1]+L.sgml[1]+L.singleton[1]+L.start[1]+L.style[1]+L.template[1]+L.text[1]+L.xml[1],i=function(i){var o="Total*"===i?t:L[i][0],a="Total*"===i?n:L[i][1],s=0;e.push("<tr><th>"),e.push(i),o>0&&("script"===i||"style"===i)&&e.push("**"),e.push("</th><td"),0===r||"start"!==i&&"end"!==i||e.push(' class="bad"'),e.push(">"),e.push(o),e.push("</td><td>"),s=100*(o/t),e.push(s.toFixed(2)),e.push("%</td><td>"),e.push(a),e.push("</td><td"),o>0&&("script"===i||"style"===i)&&e.push(" class='bad'"),e.push(">"),s=100*(a/n),e.push(s.toFixed(2)),e.push("%</td></tr>")};return e.push("<h4>Statistics and analysis of parsed code</h4>"),e.push("<table class='analysis' summary='Statistics'><caption>This table provides basic statistics about the parsed components of the given code sample after beautification.</caption>"),e.push("<thead><tr><th>Item type</th><th>Number of instances</th><th>Percentage of total items</th><th>Character size</th><th>Percentage of total size</th></tr></thead>"),e.push("<tbody>"),i("Total*"),i("cdata"),i("comment"),i("content"),i("end"),i("ignore"),i("script"),i("sgml"),i("singleton"),i("start"),i("style"),i("template"),i("text"),i("xml"),e.push("<tr><th>space between tags***</th><td colspan='4'>"),e.push(L.space),e.push("</td></tr>"),e.push("</tbody></table> "),e.push("<p>* Totals are accounted for parsed code/content tokens only and not extraneous space for beautification.</p> "),e.push("<p>** Script and Style code is measured with minimal white space.</p>"),e.push("<p>*** This is space that is not associated with text, tags, script, or css.</p> "),e.join("")}(),m=function(){var t=0,n=0,r=0,i=0,o="",s=[],u=[],c=[],l=[],f=!0,d=function(e,t){return t[0]-e[0]};for(t=t;e>t;t+=1)"content"===H[t]&&s.push(G[t]);for(s=p(s.join(" ").replace(a,"").toLowerCase().replace(/&nbsp;/gi," ").replace(/(,|\.|\?|!|:|\(|\)|"|\{|\}|\[|\])/g,"").replace(/\s+/g," ").replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").split(" ")),r=s.length,t=0;r>t;t+=1)o=s[t],o.length>2&&o.length<30&&/&#?\w+;/.test(o)===!1&&"the"!==o&&"and"!==o&&"for"!==o&&"are"!==o&&"this"!==o&&"from"!==o&&"with"!==o&&"that"!==o&&"to"!==o&&(0===c.length||o!==c[c.length-1][1]?c.push([1,o]):c[c.length-1][0]+=1),o!==s[t-1]?u.push([1,o]):u[u.length-1][0]+=1;
for(u=u.sort(d).slice(0,11),c=c.sort(d).slice(0,11),r=c.length>10?11:c.length,t=0;r>t;t+=1)if(u[t][1]!==c[t][1]){f=!1;break}if(r=u.length>10?10:u.length,r>1){for(i=s.length,l.push("<h4>Zipf's Law analysis of content</h4>"),l.push("<table class='analysis' summary='Zipf&#39;s Law'><caption>This table demonstrates <em>Zipf&#39;s Law</em> by listing the 10 most occuring words in the content and the number of times they occurred.</caption>"),l.push("<thead><tr><th>Word Rank</th><th>Most Occurring Word by Rank</th><th>Number of Instances</th><th>Ratio Increased Over Next Most Frequence Occurance</th><th>Percentage from "),l.push(i),l.push(" total words</th></tr></thead><tbody>"),f===!1&&l.push("<tr><th colspan='5'>Unfiltered Word Set</th></tr>"),t=0;r>t;t+=1)n=void 0!==u[t+1]?u[t][0]/u[t+1][0]:1,l.push("<tr><td>"),l.push(t+1),l.push("</td><td>"),l.push(u[t][1]),l.push("</td><td>"),l.push(u[t][0]),l.push("</td><td>"),l.push(n.toFixed(2)),l.push("</td><td>"),n=100*(u[t][0]/i),l.push(n.toFixed(2)),l.push("%</td></tr>");if(r=c.length>10?10:c.length,r>1&&f===!1)for(l.push("<tr><th colspan='5'>Filtered Word Set</th></tr>"),t=0;r>t;t+=1)n=void 0!==c[t+1]?c[t][0]/c[t+1][0]:1,l.push("<tr><td>"),l.push(t+1),l.push("</td><td>"),l.push(c[t][1]),l.push("</td><td>"),l.push(c[t][0]),l.push("</td><td>"),l.push(n.toFixed(2)),l.push("</td><td>"),n=100*(c[t][0]/i),l.push(n.toFixed(2)),l.push("%</td></tr>");l.push("</tbody></table>")}return l.join("")}();return r>0?(n.push("<p><strong>"),n.push(r),n.push(" more start tag"),r>1&&n.push("s"),n.push(" than end tags!</strong></p>")):0>r&&(r=-1*r,n.push("<p><strong>"),n.push(r),n.push(" more end tag"),r>1&&n.push("s"),n.push(" than start tags!</strong></p>")),n.push("<p><strong>Total number of HTTP requests (presuming HTML or XML Schema):</strong> <em>"),n.push(z.length),n.push("</em></p>"),n.push("<div class='doc'>"),n.push(u(W)),n.push(d),n.push(l),n.push(c),n.push(h),n.push(u(z)),n.push(m),n.push("</div>"),t===!0?n.join("").replace("<div class='doc'>","<p><strong>Total potential accessibility violations:</strong> <em>"+i+"</em></p> <div class='doc'>"):n.join("")}()),f}())},f(e)},edition={addon:{ace:150519},api:{dom:150805,nodeLocal:150719,wsh:150713},charDecoder:141025,css:150525,csspretty:150708,csvbeauty:140114,csvmin:131224,diffview:150708,documentation:150713,jspretty:150717,latest:0,markuppretty:150805,prettydiff:150805,version:"1.12.18",webtool:150713};edition.latest=function(){"use strict";return Math.max(edition.charDecoder,edition.css,edition.csspretty,edition.csvbeauty,edition.csvmin,edition.diffview,edition.documentation,edition.jspretty,edition.markuppretty,edition.prettydiff,edition.webtool,edition.api.dom,edition.api.nodeLocal,edition.api.wsh)}(),"object"==typeof exports||"function"==typeof exports?(exports.edition=edition,exports.api=function(e){"use strict";return prettydiff(e)}):("object"==typeof define||"function"==typeof define)&&define("sap/watt/lib/prettydiff/prettydiff",["require","exports","module"],function(e,t){"use strict";return t.edition=edition,t.api=function(e){return prettydiff(e)},"number"==typeof e?e:t.api}),define("sap.watt.toolsets.xml/service/XMLBeautifierImpl",["sap/watt/lib/prettydiff/prettydiff"],function(e){"use strict";var t=function(){};return t.prototype._oDefaultSettings={mode:"beautify",lang:"markup",inchar:"	",insize:1,wrap:140,style:"indent",html:!1,force_indent:!1},t.prototype.beautify=function(t,n){var r=this.getSettings(n);r.source=t;var i=e(r);return Array.isArray(i)?i[0]:(this.context.service.log.error("xmlforamtter-prettydiff","failed to get proper response from beautify utility").done(),t)},t.prototype.getSettings=function(e){return e?this._updateSetting(e):this._oDefaultSettings},t.prototype._updateSetting=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&("insize"==n?t.insize=e[n]:"wrap"==n?t.wrap=e[n]:t[n]=e[n]);return t},new t}),define("sap.watt.toolsets.javascript/util/editorUtil",[],function(){"use strict";var e={markerId:-1,markerRange:null};return{getCurrentEditor:function(e){return e.getOwner().then(function(e){return e&&e.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor")?e:null})},getCurrentUI5Editor:function(e){return this.getCurrentEditor(e).then(function(e){return e?e.getUI5Editor():Q()})},setEditorSelection:function(e,t,n,r){e&&t&&n&&(this.selectionContext={editor:e,start:t,end:n},r?(e.detachEvent("rendered",this.onEditorRendered,this),e.attachEvent("rendered",this.onEditorRendered,this)):this.onEditorRendered())},onEditorRendered:function(){if(this.selectionContext){var e=this,t=this.selectionContext.start,n=this.selectionContext.end;this.selectionContext.editor&&this.selectionContext.editor.getUI5Editor().then(function(r){if(r){var i=e.getPositionFromOffset(r,t),o=e.getPositionFromOffset(r,n);if(i&&o)var a=r.getRange(i.row,i.column,o.row,o.column);var s=r.getSelection();if(s&&a){var u=r.indexToPosition(t).row+1;r.gotoLine(u),s.setSelectionRange(a)}}}).done(),this.selectionContext=null}},getPositionFromOffset:function(e,t){if(e&&t>=0)for(var n=e.getSession().getDocument().getAllLines(),r=0,i=0,o=0;o<n.length;o++)if(o>0&&(r+=n[o-1].length+1,i+=1),i+=n[o].length,i>=t)return{row:o,column:t-r}},attachEditorEvent:function(e,t,n){if(e){var r=e.getContainer();r&&(r.removeEventListener(t,n),r.addEventListener(t,n))}},detachEditorEvent:function(e,t,n){if(e){var r=e.getContainer();r&&r.removeEventListener(t,n)}},addDefinitionMarker:function(t,n){if(t&&n&&2===n.length){var r=this.getPositionFromOffset(t,n[0]),i=this.getPositionFromOffset(t,n[1]),o=t.getRange(r.row,r.column,i.row,i.column);(!e.markerRange||e.markerRange&&o&&0!=e.markerRange.compareRange(o))&&(e.markerId>=0&&t.removeMarker(e.markerId),e.markerId=t.addMarker(o,"jsdefinition","line",!0),e.markerRange=o)}},clearDefinitionMarker:function(t){t&&e.markerId>=0&&(t.removeMarker(e.markerId),e.markerId=-1,e.markerRange=null)},getDocumentPosition:function(e,t,n){if(e){var r=e.oEditor;if(r&&r.renderer)return r.renderer.screenToTextCoordinates(t,n)}return{row:0,column:0}}}}),define("sap.watt.toolsets.javascript/command/GotoDefinition",["./../util/editorUtil"],function(e){"use strict";return{execute:function(){var t=this.context.service;return t.usagemonitoring.startPerf("editor","navigate_definition").done(),e.getCurrentEditor(t.selection).then(function(e){return e?e.getContentStatus(!0).then(function(e){return t.jsdefinition.gotoDefinition(e).then(function(){return t.usagemonitoring.report("editor","navigate_definition")})}):Q()})},_isSupported:function(){var t=this.context.service;return e.getCurrentEditor(t.selection).then(function(e){return e?e.getVisible().then(function(n){return n?e.getSelection().then(function(e){var n=e&&e.document&&e.document.getEntity().getFileExtension();return t.jsdefinition.isFileExtensionSupported(n)}):!1}):!1})},isAvailable:function(){return this._isSupported()},isEnabled:function(){return this._isSupported()}}}),define("sap.watt.toolsets.javascript/command/JSDocCommentGenerator",["./../util/editorUtil"],function(e){"use strict";return{nodeInfo:null,editor:null,contentStatus:null,execute:function(){var e=this.context.service,t=this;return Q.all([this._getCurrentDocumentInContent(),t._setCursorInEditor(t.editor,t.nodeInfo.commentLoc.start.line,t.nodeInfo.commentLoc.start.column)]).spread(function(n){return e.jsdocgen.generateComment(t.nodeInfo,n,t.contentStatus.delimiter).then(function(e){return t.editor.addString(e,null,!0)})})},_getCurrentDocumentInContent:function(){return this.context.service.content.getCurrentDocument()},_setCursorInEditor:function(e,t,n){return e?e.gotoLine(t,n):Q()},_getContentStatus:function(e){return e?e.getContentStatus(!0):void 0},_isSupportedFileType:function(e){return e&&null!==e.match(/\.js$/)},_isSupported:function(){var t=this.context.service,n=this;return e.getCurrentEditor(t.selection).then(function(e){return e?e.getVisible().then(function(r){return r?e.getCurrentFilePath().then(function(r){return n._isSupportedFileType(r)?n._getContentStatus(e).then(function(r){return r?t.jsdocgen.findDefinition(r).then(function(t){return n.nodeInfo=t,n.editor=e,n.contentStatus=r,n.nodeInfo&&!(null==n.nodeInfo.node)}):!1}):!1}):!1}):!1})},isAvailable:function(){return this._isSupported()},isEnabled:function(){return this._isSupported()}}}),define("sap/watt/common/plugin/platform/service/ui/AbstractPart",[],function(){"use strict";var e=sap.ui.base.Object.extend("sap.watt.common.plugin.platform.service.ui.AbstractPart",{_bVisible:null,_aStyles:null,configure:function(e){return this._aStyles=e.styles,Q()},getTitle:function(){return this.getMetadata().getName()},getTooltip:function(){return this.getMetadata().getName()},getFocusElement:function(){return this.getContent()},focus:function(){return this.context.service.focus.setFocus(this.context.self)},getContent:function(){return this._aStyles?this.context.service.resource.includeStyles(this._aStyles).thenResolve(null):Q()},setVisible:function(e){var t=this;return this._bVisible!==e?this.context.event.fireVisibilityChanged({visible:e}).then(function(){t._bVisible=e}).fail(function(e){console.error("AbstractUIPart: could not change visibility",e)}):Q()},isVisible:function(){return!!this._bVisible}});return e}),define("sap.watt.toolsets.javascript/service/JSOutline",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";var t=e.extend("sap.watt.common.plugin.javascript.service.JSOutline",{_oView:null,_oController:null,_oEditor:null,_sEditorTitle:null,_aSupportedFileExtensions:null,init:function(){},configure:function(e){this._aStyles=e.styles,this._aSupportedFileExtensions=e.supportedFileExtensions},_isFileExtensionSupported:function(e){return this._aSupportedFileExtensions.indexOf(e)>-1},getContent:function(){var t=this;return this._oView?this._oView:(this._oView=sap.ui.view({viewName:"sap.watt.toolsets.plugin.javascript.view.JSOutlineTree",type:sap.ui.core.mvc.ViewType.JS}),this._oController=this._oView.getController(),this.context.self.attachEvent("visibilityChanged",this._onVisibilityChanged,this),e.prototype.getContent.apply(this,arguments).then(function(){return t.context.service.selection.attachEvent("changed",t.onSelectionChanged,t),t.context.service.document.attachEvent("saved",t.onDocumentSaved,t),t.context.service.outlinePane.attachEvent("visibilityChanged",t.onPaneVisibilityChange,t),t._oView}))},_updateTree:function(e,t,n){var r=this;r._oController.initOutline(t,n)},_updateOutline:function(e,t){var n=this;if(t){n._oEditor!==t&&(n._oEditor=t,n._detachAll(),n._oEditor.attachEvent("viewHasChanged",this._onEditorChange,this),n._oEditor.attachEvent("closed",this._onEditorClose,this));var r=n.context.service.jsASTManager;n._oEditor.getContentStatus().then(function(i){var o={objHierarchyStack:[],outlineJSON:[],child2ParentMapping:{}};return r.parseAndVisit(i.targetFile,i.buffer,{range:!0,loc:!0,tolerant:!0},o,n.visitor,n.cleanStack).then(function(r){var o=i.targetFile;return t.getUI5Editor().then(function(t){return r.contentOwner===o&&(n._updateTree(e,r.outlineContext.outlineJSON,t),n.context.service.usagemonitoring.report("editor","get_outline_content").done()),Q()})})}).done(),t.getTitle().then(function(e){n._sEditorTitle=e}).done()}},_detachAll:function(){this._oEditor.detachEvent("viewHasChanged",this._onEditorChange,this),this._oEditor.detachEvent("closed",this._onEditorClose,this)},canHandle:function(e){var t=this,n=e.params.owner;if(t.context.self===n)return!1;if(!n.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor"))return!1;var r=e.params.selection;if(r&&r.length>0){var i=r[0].document,o=i&&i.getEntity&&i.getEntity().getFileExtension();return this._isFileExtensionSupported(o)?!0:(t._oController&&(t._oController.cleanOutline(),t._oDocument=null),!1)}},onSelectionChanged:function(e){var t=this,n=e.params.owner,r=this.canHandle(e);if(r){var i=t._getSelectedDocument(e.params.selection);if(!t._oDocument||t._oDocument!==i)return t._oDocument=i,t.context.service.perspective.getAreaForService("outlinePane").then(function(r){return r?t.context.service.perspective.isAreaVisible(r).then(function(r){return r&&t._updateOutline(e,n),Q()}):void 0})}},onDocumentSaved:function(e){var t=this;return t.context.service.selection.getOwner().then(function(n){if(n&&n.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor")){var r=e.params.document;return t.context.service.perspective.getAreaForService("outlinePane").then(function(i){return i?t.context.service.perspective.isAreaVisible(i).then(function(i){return i?(r&&r.getEntity()&&t._isFileExtensionSupported(r.getEntity().getFileExtension())&&t._updateOutline(e,n),Q()):void 0}):void 0})}}).fail(function(){return Q()})},onPaneVisibilityChange:function(e){var t=this;return t.context.service.content.getCurrentEditor().then(function(n){if(n){if("function"==typeof n.getName)return n.getName().then(function(r){if("aceeditor"===r){var i=e.params.visible;if(i)return n.getSelection().then(function(r){var i=r&&r.document&&r.document.getEntity().getFileExtension();return t._isFileExtensionSupported(i)?t._updateOutline(e,n):void 0})}});throw new Error("Not aceeditor")}}).fail(function(){return Q()})},_onEditorChange:function(e){return this._updateOutline(e,e.params.owner)},_getSelectedDocument:function(e){var t=null;return e.map(function(e){e&&e.document&&(t=e.document)}),t},_onVisibilityChanged:function(e){e.params.visible||(this._oDocument=null)},getSelection:function(){return[{document:this._oDocument,control:this._oControl}]},_onEditorClose:function(){this._detachAll(),this._oDocument=null,this._oEditor=null},cleanStack:function(e,t){("FunctionDeclaration"===e.type||"FunctionExpression"===e.type||"ObjectExpression"===e.type)&&t.objHierarchyStack.pop()},visitor:function(e,t){function n(e,t){e.errors&&e.errors.length>0&&(t.errorLine=e.errors[0].lineNumber)}function r(e,t){e.declarations&&e.declarations.forEach(function(e){if(e.init)switch(e.init.type){case"ObjectExpression":var n=c(l.OBJECT,e.id.name,e.loc),r=s(e.init.loc);t.child2ParentMapping[r]={JSONElement:n};break;case"FunctionExpression":var n=c(l.FUNCTION,a(e.init,e.id.name),e.loc),r=s(e.init.loc);t.child2ParentMapping[r]={JSONElement:n};break;default:var n=c(l.OBJECT,e.id.name,e.loc);u(e,t,n)}else{var n=c(l.OBJECT,e.id.name,e.loc);u(e,t,n)}})}function i(e,t){var n,r=s(e.loc),i=t.child2ParentMapping[r];n=i?i.JSONElement:c(l.OBJECT,"object{}",e.loc),u(e,t,n),t.objHierarchyStack.push(n),e.properties&&e.properties.forEach(function(e){if(e.value){var n=e.key.name?e.key.name:e.key.value;switch(e.value.type){case"FunctionExpression":case"ObjectExpression":var r=c("FunctionExpression"===e.value.type?l.FUNCTION:l.OBJECT,"FunctionExpression"===e.value.type?a(e.value,n):n,e.key.loc),i=s(e.value.loc);t.child2ParentMapping[i]={JSONElement:r};break;default:var r=c(l.OBJECT,n,e.key.loc);u(e.value,t,r)}}})}function o(e,t){var n,r=s(e.loc),i=t.child2ParentMapping[r];if(i)n=i.JSONElement;else{var o=a(e);n=c(l.FUNCTION,o,e.loc)}u(e,t,n),t.objHierarchyStack.push(n)}function a(e,t){var n;n=e.id?e.id.name:t?t:"function",n+="(";for(var r=e.params.length,i=0;r>i;i++)n+=e.params[i].name,r-1>i&&(n+=",");return n+=")"}function s(e){return e.start.line+"_"+e.start.column+"_"+e.end.line+"_"+e.end.column}function u(e,t,n){var r,i=s(e.loc),o=t.child2ParentMapping[i];if(r=void 0!==o&&void 0!==o.JSONElement?o.JSONElement:n,t.objHierarchyStack.length<1)r.level=1,t.outlineJSON.push(r);else{var a=t.objHierarchyStack[t.objHierarchyStack.length-1];a.elements||(a.elements=[]),r.level=a.level+1,a.elements.push(r)}}function c(e,t,n){return{type:e,name:t,startRow:n.start.line,startColumn:n.start.column,endRow:n.end.line,endColumn:n.end.column}}if(t.errorLine&&e.loc.start.line>t.errorLine)return!1;var l={VAR:"var",OBJECT:"object",FUNCTION:"function"};switch(e.type){case"Program":return n(e,t),!0;case"VariableDeclaration":return r(e,t),!0;case"FunctionDeclaration":case"FunctionExpression":return o(e,t),!0;case"ObjectExpression":return i(e,t),!0;case"Literal":case"Callee":case"ArrayExpression":case"NewExpression":case"UnaryExpression":case"BinaryExpression":case"UpdateExpression":case"YieldExpression":case"ComprehensionExpression":case"GeneratorExpression":case"GraphExpression":case"GraphIndexExpression":case"AssigmentExpression":case"LetExpression":case"CondinitionalExpression":case"EmptyStatement":return!1;default:return!0}}});return t}),define("sap/watt/lib/orion/javascript/esprima/scriptedLogger",[],function(){var e;if("undefined"==typeof console){var t;t="function"==typeof status?status:"function"==typeof onmessage?onmessage:function(){},e={info:t,debug:t,warn:t,error:t}}else e=console;var n={ALL:!1,OTHER:!0,INDEXER:!1,CONTENT_ASSIST:!0,EXPLORER_TABLE:!0,SETUP:!0,PANE:!0,STORAGE:!0},r={SHOW_CALLER:!1,INFO:!0,DEBUG:!0,WARN:!0,ERROR:!0,info:function(t,n){this.INFO&&this.isEnabled(n)&&(t=this.SHOW_CALLER?t+" --- "+this.info.caller:t,e.info(t))},debug:function(t,n){this.DEBUG&&this.isEnabled(n)&&(t=this.SHOW_CALLER?t+" --- "+this.debug.caller:t,e.debug(t))},warn:function(t,n){this.WARN&&this.isEnabled(n)&&(t=this.SHOW_CALLER?t+" --- "+this.warn.caller:t,e.warn(t))},error:function(t,n){this.ERROR&&this.isEnabled(n)&&(t=this.SHOW_CALLER?t+" --- "+this.error.caller:t,e.error(t))},isEnabled:function(e){return n.ALL?e&&void 0!==n[e]?n[e]:n.OTHER:!1}};return r}),function(e){"use strict";function t(e,t){if(!e)throw new Error("ASSERT: "+t)}function n(e,t){return hn.slice(e,t)}function r(e){return"0123456789".indexOf(e)>=0}function i(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function o(e){return"01234567".indexOf(e)>=0}function a(e){return" "===e||"	"===e||""===e||"\f"===e||" "===e||e.charCodeAt(0)>=5760&&" ᠎             　﻿".indexOf(e)>=0}function s(e){return"\n"===e||"\r"===e||"\u2028"===e||"\u2029"===e}function u(e){return"$"===e||"_"===e||"\\"===e||e>="a"&&"z">=e||e>="A"&&"Z">=e||e.charCodeAt(0)>=128&&dn.NonAsciiIdentifierStart.test(e)}function c(e){return"$"===e||"_"===e||"\\"===e||e>="a"&&"z">=e||e>="A"&&"Z">=e||e>="0"&&"9">=e||e.charCodeAt(0)>=128&&dn.NonAsciiIdentifierPart.test(e)}function l(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0}return!1}function p(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0}return!1}function f(e){return"eval"===e||"arguments"===e}function d(e){var t=!1;switch(e.length){case 2:t="if"===e||"in"===e||"do"===e;break;case 3:t="var"===e||"for"===e||"new"===e||"try"===e;break;case 4:t="this"===e||"else"===e||"case"===e||"void"===e||"with"===e;break;case 5:t="while"===e||"break"===e||"catch"===e||"throw"===e;break;case 6:t="return"===e||"typeof"===e||"delete"===e||"switch"===e;break;case 7:t="default"===e||"finally"===e;break;case 8:t="function"===e||"continue"===e||"debugger"===e;break;case 10:t="instanceof"===e}if(t)return!0;switch(e){case"const":return!0;case"yield":case"let":return!0}return mn&&p(e)?!0:l(e)}function h(){return hn[gn++]}function m(e){return";"===e||"\n"===e}function g(){for(var e=gn;e>0&&!m(hn[e]);)e--;if(!(e<=wn.statementStart)){var t=!1;if(wn.lastRewindLocation)t=!0;else{var n=wn.lastRewindLocation;n!==e&&(t=!0)}t&&(gn=e,xn=null,wn.lastRewindLocation=gn)}}function v(){var e,t,n;for(t=!1,n=!1;_n>gn;)if(e=hn[gn],n)e=h(),s(e)&&(n=!1,"\r"===e&&"\n"===hn[gn]&&++gn,++vn,yn=gn);else if(t)s(e)?("\r"===e&&"\n"===hn[gn+1]&&++gn,++vn,++gn,yn=gn,gn>=_n&&D({},fn.UnexpectedToken,"ILLEGAL")):(e=h(),gn>=_n&&D({},fn.UnexpectedToken,"ILLEGAL"),"*"===e&&(e=hn[gn],"/"===e&&(++gn,t=!1)));else if("/"===e)if(e=hn[gn+1],"/"===e)gn+=2,n=!0;else{if("*"!==e)break;gn+=2,t=!0,gn>=_n&&D({},fn.UnexpectedToken,"ILLEGAL")}else if(a(e))++gn;else{if(!s(e))break;++gn,"\r"===e&&"\n"===hn[gn]&&++gn,++vn,yn=gn}}function y(e){var t,n,r,o=0;for(n="u"===e?4:2,t=0;n>t;++t){if(!(_n>gn&&i(hn[gn])))return"";r=h(),o=16*o+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(o)}function _(){var e,t,n,r;if(e=hn[gn],u(e)){if(t=gn,"\\"===e){if(++gn,"u"!==hn[gn])return;if(++gn,r=gn,e=y("u")){if("\\"===e||!u(e))return;n=e}else gn=r,n="u"}else n=h();for(;_n>gn&&(e=hn[gn],c(e));)if("\\"===e){if(++gn,"u"!==hn[gn])return;if(++gn,r=gn,e=y("u")){if("\\"===e||!c(e))return;n+=e}else gn=r,n+="u"}else n+=h();return 1===n.length?{type:un.Identifier,value:n,lineNumber:vn,lineStart:yn,range:[t,gn]}:d(n)?{type:un.Keyword,value:n,lineNumber:vn,lineStart:yn,range:[t,gn]}:"null"===n?{type:un.NullLiteral,value:n,lineNumber:vn,lineStart:yn,range:[t,gn]}:"true"===n||"false"===n?{type:un.BooleanLiteral,value:n,lineNumber:vn,lineStart:yn,range:[t,gn]}:{type:un.Identifier,value:n,lineNumber:vn,lineStart:yn,range:[t,gn]}}}function x(){var e,t,n,i=gn,o=hn[gn];return";"===o||"{"===o||"}"===o?(++gn,{type:un.Punctuator,value:o,lineNumber:vn,lineStart:yn,range:[i,gn]}):","===o||"("===o||")"===o?(++gn,{type:un.Punctuator,value:o,lineNumber:vn,lineStart:yn,range:[i,gn]}):(e=hn[gn+1],"."!==o||r(e)?(t=hn[gn+2],n=hn[gn+3],">"===o&&">"===e&&">"===t&&"="===n?(gn+=4,{type:un.Punctuator,value:">>>=",lineNumber:vn,lineStart:yn,range:[i,gn]}):"="===o&&"="===e&&"="===t?(gn+=3,{type:un.Punctuator,value:"===",lineNumber:vn,lineStart:yn,range:[i,gn]}):"!"===o&&"="===e&&"="===t?(gn+=3,{type:un.Punctuator,value:"!==",lineNumber:vn,lineStart:yn,range:[i,gn]}):">"===o&&">"===e&&">"===t?(gn+=3,{type:un.Punctuator,value:">>>",lineNumber:vn,lineStart:yn,range:[i,gn]}):"<"===o&&"<"===e&&"="===t?(gn+=3,{type:un.Punctuator,value:"<<=",lineNumber:vn,lineStart:yn,range:[i,gn]}):">"===o&&">"===e&&"="===t?(gn+=3,{type:un.Punctuator,value:">>=",lineNumber:vn,lineStart:yn,range:[i,gn]}):"="===e&&"<>=!+-*%&|^/".indexOf(o)>=0?(gn+=2,{type:un.Punctuator,value:o+e,lineNumber:vn,lineStart:yn,range:[i,gn]}):o===e&&"+-<>&|".indexOf(o)>=0&&"+-<>&|".indexOf(e)>=0?(gn+=2,{type:un.Punctuator,value:o+e,lineNumber:vn,lineStart:yn,range:[i,gn]}):"[]<>+-*%&|^!~?:=/".indexOf(o)>=0?{type:un.Punctuator,value:h(),lineNumber:vn,lineStart:yn,range:[i,gn]}:void 0):{type:un.Punctuator,value:h(),lineNumber:vn,lineStart:yn,range:[i,gn]})}function b(){var e,n,a;if(a=hn[gn],t(r(a)||"."===a,"Numeric literal must start with a decimal digit or a decimal point"),n=gn,e="","."!==a){if(e=h(),a=hn[gn],"0"===e){if("x"===a||"X"===a){for(e+=h();_n>gn&&(a=hn[gn],i(a));)e+=h();return e.length<=2&&D({},fn.UnexpectedToken,"ILLEGAL"),_n>gn&&(a=hn[gn],u(a)&&D({},fn.UnexpectedToken,"ILLEGAL")),{type:un.NumericLiteral,value:parseInt(e,16),lineNumber:vn,lineStart:yn,range:[n,gn]}}if(o(a)){for(e+=h();_n>gn&&(a=hn[gn],o(a));)e+=h();return _n>gn&&(a=hn[gn],(u(a)||r(a))&&D({},fn.UnexpectedToken,"ILLEGAL")),{type:un.NumericLiteral,value:parseInt(e,8),octal:!0,lineNumber:vn,lineStart:yn,range:[n,gn]}}r(a)&&D({},fn.UnexpectedToken,"ILLEGAL")}for(;_n>gn&&(a=hn[gn],r(a));)e+=h()}if("."===a)for(e+=h();_n>gn&&(a=hn[gn],r(a));)e+=h();if("e"===a||"E"===a)if(e+=h(),a=hn[gn],("+"===a||"-"===a)&&(e+=h()),a=hn[gn],r(a))for(e+=h();_n>gn&&(a=hn[gn],r(a));)e+=h();else a="character "+a,gn>=_n&&(a="<end>"),D({},fn.UnexpectedToken,"ILLEGAL");return _n>gn&&(a=hn[gn],u(a)&&D({},fn.UnexpectedToken,"ILLEGAL")),{type:un.NumericLiteral,value:parseFloat(e),lineNumber:vn,lineStart:yn,range:[n,gn]}}function w(){var e,n,r,i,a,u,c="",l=!1;for(e=hn[gn],t("'"===e||'"'===e,"String literal must starts with a quote"),n=gn,++gn;_n>gn;){if(r=h(),r===e){e="";break}if("\\"===r)if(r=h(),s(r))++vn,"\r"===r&&"\n"===hn[gn]&&++gn;else switch(r){case"n":c+="\n";break;case"r":c+="\r";break;case"t":c+="	";break;case"u":case"x":u=gn,a=y(r),a?c+=a:(gn=u,c+=r);break;case"b":c+="\b";break;case"f":c+="\f";break;case"v":c+="";break;default:o(r)?(i="01234567".indexOf(r),0!==i&&(l=!0),_n>gn&&o(hn[gn])&&(l=!0,i=8*i+"01234567".indexOf(h()),"0123".indexOf(r)>=0&&_n>gn&&o(hn[gn])&&(i=8*i+"01234567".indexOf(h()))),c+=String.fromCharCode(i)):c+=r}else{if(s(r))break;c+=r}}return""!==e&&D({},fn.UnexpectedToken,"ILLEGAL"),{type:un.StringLiteral,value:c,octal:l,lineNumber:vn,lineStart:yn,range:[n,gn]}}function S(){var e,n,r,i,o,a,u="",l=!1;for(xn=null,v(),n=gn,e=hn[gn],t("/"===e,"Regular expression literal must start with a slash"),u=h();_n>gn;)if(e=h(),u+=e,l)"]"===e&&(l=!1);else if("\\"===e)e=h(),s(e)&&D({},fn.UnterminatedRegExp),u+=e;else{if("/"===e)break;"["===e?l=!0:s(e)&&D({},fn.UnterminatedRegExp)}for(1===u.length&&D({},fn.UnterminatedRegExp),r=u.substr(1,u.length-2),i="";_n>gn&&(e=hn[gn],c(e));)if(++gn,"\\"===e&&_n>gn)if(e=hn[gn],"u"===e)if(++gn,a=gn,e=y("u"))for(i+=e,u+="\\u";gn>a;++a)u+=hn[a];else gn=a,i+="u",u+="\\u";else u+="\\";else i+=e,u+=e;try{o=new RegExp(r,i)}catch(p){D({},fn.InvalidRegExp)}return{literal:u,value:o,range:[n,gn]}}function E(e){return e.type===un.Identifier||e.type===un.Keyword||e.type===un.BooleanLiteral||e.type===un.NullLiteral}function C(){var e,t;return v(),gn>=_n?{type:un.EOF,lineNumber:vn,lineStart:yn,range:[gn,gn]}:(t=x(),"undefined"!=typeof t?t:(e=hn[gn],"'"===e||'"'===e?w():"."===e||r(e)?b():(t=_(),"undefined"!=typeof t?t:(D({},fn.UnexpectedToken,"ILLEGAL"),void 0))))}function T(){var e;return xn?(gn=xn.range[1],vn=xn.lineNumber,yn=xn.lineStart,e=xn,xn=null,e):(xn=null,C())}function P(){var e,t,n;return null!==xn?xn:(e=gn,t=vn,n=yn,xn=C(),gn=e,vn=t,yn=n,xn)}function I(){var e,t,n,r;return e=gn,t=vn,n=yn,v(),r=vn!==t,gn=e,vn=t,yn=n,r}function D(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){return r[t]||""});throw"number"==typeof e.lineNumber?(n=new Error("Line "+e.lineNumber+": "+i),n.index=e.range[0],n.lineNumber=e.lineNumber,n.column=e.range[0]-yn+1):(n=new Error("Line "+vn+": "+i),n.index=gn,n.lineNumber=vn,n.column=gn-yn+1),n}function A(){try{D.apply(null,arguments)}catch(e){if(!wn.errors)throw e;wn.errors.push(e)}}function N(e){e.type===un.EOF&&D(e,fn.UnexpectedEOS),e.type===un.NumericLiteral&&D(e,fn.UnexpectedNumber),e.type===un.StringLiteral&&D(e,fn.UnexpectedString),e.type===un.Identifier&&D(e,fn.UnexpectedIdentifier),e.type===un.Keyword&&(l(e.value)?D(e,fn.UnexpectedReserved):mn&&p(e.value)&&D(e,fn.StrictReservedWord),D(e,fn.UnexpectedToken,e.value)),D(e,fn.UnexpectedToken,e.value)}function k(e){var t=T();(t.type!==un.Punctuator||t.value!==e)&&N(t)}function O(e){var t=T();(t.type!==un.Keyword||t.value!==e)&&N(t)}function R(e){var t=P();return t.type===un.Punctuator&&t.value===e}function j(e){var t=P();return t.type===un.Keyword&&t.value===e}function F(){var e=P(),t=e.value;return e.type!==un.Punctuator?!1:"="===t||"*="===t||"/="===t||"%="===t||"+="===t||"-="===t||"<<="===t||">>="===t||">>>="===t||"&="===t||"^="===t||"|="===t}function L(){var e,t;if(";"===hn[gn])return T(),void 0;if(t=vn,v(),vn===t){if(R(";"))return T(),void 0;e=P(),e.type===un.EOF||R("}")||(wn.errors&&g(),N(e))}}function M(e){switch(e.type){case"AssignmentExpression":case"BinaryExpression":case"ConditionalExpression":case"LogicalExpression":case"SequenceExpression":case"UnaryExpression":case"UpdateExpression":return!1}return!0}function B(){var e,t=[];for(k("[");!R("]");)R(",")?(T(),t.push(e)):(t.push(mt()),R("]")||k(","));return k("]"),{type:ln.ArrayExpression,elements:t}}function U(e,t){var n,r;return n=mn,r=Ht(),t&&mn&&f(e[0].name)&&D(t,fn.StrictParamName),mn=n,{type:ln.FunctionExpression,id:null,params:e,body:r}}function V(){var e=T();return e.type===un.StringLiteral||e.type===un.NumericLiteral?(mn&&e.octal&&D(e,fn.StrictOctalLiteral),en(e)):{type:ln.Identifier,name:e.value}}function Q(){var e,t,n,r;return e=P(),e.type===un.Identifier?(n=V(),"get"!==e.value||R(":")?"set"!==e.value||R(":")?(k(":"),{type:ln.Property,key:n,value:mt(),kind:"init"}):(t=V(),k("("),e=P(),e.type!==un.Identifier&&N(T()),r=[_t()],k(")"),{type:ln.Property,key:t,value:U(r,e),kind:"set"}):(t=V(),k("("),k(")"),{type:ln.Property,key:t,value:U([]),kind:"get"})):e.type!==un.EOF&&e.type!==un.Punctuator?(t=V(),k(":"),{type:ln.Property,key:t,value:mt(),kind:"init"}):(N(e),void 0)}function G(){var e,t,n,r=[],i={},o=String;for(k("{");!R("}");)e=Q(),t=e.key.type===ln.Identifier?e.key.name:o(e.key.value),n="init"===e.kind?pn.Data:"get"===e.kind?pn.Get:pn.Set,Object.prototype.hasOwnProperty.call(i,t)?(i[t]===pn.Data?mn&&n===pn.Data?A({},fn.StrictDuplicateProperty):n!==pn.Data&&D({},fn.AccessorDataProperty):n===pn.Data?D({},fn.AccessorDataProperty):i[t]&n&&D({},fn.AccessorGetSet),i[t]|=n):i[t]=n,r.push(e),R("}")||k(",");return k("}"),{type:ln.ObjectExpression,properties:r}}function H(){var e,t=P(),n=t.type;if(n===un.Identifier)return{type:ln.Identifier,name:T().value};if(n===un.StringLiteral||n===un.NumericLiteral)return mn&&t.octal&&A(t,fn.StrictOctalLiteral),en(T());if(n===un.Keyword){if(j("this"))return T(),{type:ln.ThisExpression};if(j("function"))return Wt()}return n===un.BooleanLiteral?(T(),t.value="true"===t.value,en(t)):n===un.NullLiteral?(T(),t.value=null,en(t)):R("[")?B():R("{")?G():R("(")?(T(),bn.lastParenthesized=e=gt(),k(")"),e):R("/")||R("/=")?en(S()):N(T())}function z(e){for(var t=wn.errors.length,n=0;t>n;n++){var r=wn.errors[n];if(r.index===e.index&&r.message===e.message)return}wn.errors.push(e)}function W(){var e=[];if(k("("),!R(")"))for(;_n>gn&&(e.push(mt()),!R(")"));)try{k(",")}catch(t){if(wn.errors){z(t);break}throw t}try{k(")")}catch(t){if(!wn.errors)throw t;z(t)}return e}function q(e){for(var t,n=!1,r=!1;!n;){if(t=hn[e],"/"===t)if(e>2&&"*"===hn[e-1]){e-=2;for(var i=!1;!i;)t=hn[e],"*"===t?e>0&&"/"===hn[e-1]&&(i=!0):"\n"===t&&(r=!0),0===e&&(i=!0),e--}else n=!0;else"\n"===t?r=!0:a(t)||(n=!0);n||e--}return{index:e,lineChange:r}}function X(e){if(e.value&&e.type===un.Punctuator){var t=q(gn-e.value.length-1),n=t.index,r=hn[n];"."===r&&t.lineChange&&"("===e.value||"."===r&&(gn=n+1,xn=null)}}function $(){var e=T();return E(e)||(wn.errors&&X(e),N(e)),{type:ln.Identifier,name:e.value}}function J(e){return{type:ln.MemberExpression,computed:!1,object:e,property:$()}}function K(e){var t,n;return k("["),t=gt(),n={type:ln.MemberExpression,computed:!0,object:e,property:t},k("]"),n}function Y(e){return{type:ln.CallExpression,callee:e,arguments:W()}}function Z(){var e;return O("new"),e={type:ln.NewExpression,callee:tt(),arguments:[]},R("(")&&(e.arguments=W()),e}function et(){var e,t;for(e=j("new"),t=e?Z():H();_n>gn;)if(R("."))T(),t=J(t);else if(R("["))t=K(t);else{if(!R("("))break;t=Y(t)}return t}function tt(){var e,t;for(e=j("new"),t=e?Z():H();_n>gn;)if(R("."))T(),t=J(t);else{if(!R("["))break;t=K(t)}return t}function nt(){var e=et();return!R("++")&&!R("--")||I()||(mn&&e.type===ln.Identifier&&f(e.name)&&D({},fn.StrictLHSPostfix),e={type:ln.UpdateExpression,operator:T().value,argument:e,prefix:!1}),e}function rt(){var e,t;return R("++")||R("--")?(e=T(),t=rt(),mn&&t.type===ln.Identifier&&f(t.name)&&D({},fn.StrictLHSPrefix),t={type:ln.UpdateExpression,operator:e.value,argument:t,prefix:!0}):R("+")||R("-")||R("~")||R("!")?t={type:ln.UnaryExpression,operator:T().value,argument:rt()}:j("delete")||j("void")||j("typeof")?(t={type:ln.UnaryExpression,operator:T().value,argument:rt()},mn&&"delete"===t.operator&&t.argument.type===ln.Identifier&&A({},fn.StrictDelete),t):nt()}function it(){for(var e=rt();R("*")||R("/")||R("%");)e={type:ln.BinaryExpression,operator:T().value,left:e,right:rt()};return e}function ot(){for(var e=it();R("+")||R("-");)e={type:ln.BinaryExpression,operator:T().value,left:e,right:it()};return e}function at(){for(var e=ot();R("<<")||R(">>")||R(">>>");)e={type:ln.BinaryExpression,operator:T().value,left:e,right:ot()};return e}function st(){var e,t;return t=bn.allowIn,bn.allowIn=!0,e=at(),bn.allowIn=t,R("<")||R(">")||R("<=")||R(">=")?e={type:ln.BinaryExpression,operator:T().value,left:e,right:st()}:bn.allowIn&&j("in")?(T(),e={type:ln.BinaryExpression,operator:"in",left:e,right:st()}):j("instanceof")&&(T(),e={type:ln.BinaryExpression,operator:"instanceof",left:e,right:st()}),e}function ut(){for(var e=st();R("==")||R("!=")||R("===")||R("!==");)e={type:ln.BinaryExpression,operator:T().value,left:e,right:st()};return e}function ct(){for(var e=ut();R("&");)T(),e={type:ln.BinaryExpression,operator:"&",left:e,right:ut()};return e}function lt(){for(var e=ct();R("|");)T(),e={type:ln.BinaryExpression,operator:"|",left:e,right:ct()};
return e}function pt(){for(var e=lt();R("^");)T(),e={type:ln.BinaryExpression,operator:"^",left:e,right:lt()};return e}function ft(){for(var e=pt();R("&&");)T(),e={type:ln.LogicalExpression,operator:"&&",left:e,right:pt()};return e}function dt(){for(var e=ft();R("||");)T(),e={type:ln.LogicalExpression,operator:"||",left:e,right:ft()};return e}function ht(){var e,t,n;return e=dt(),R("?")&&(T(),t=bn.allowIn,bn.allowIn=!0,n=mt(),bn.allowIn=t,k(":"),e={type:ln.ConditionalExpression,test:e,consequent:n,alternate:mt()}),e}function mt(){var e;return e=ht(),F()&&(bn.lastParenthesized===e||M(e)||D({},fn.InvalidLHSInAssignment),mn&&e.type===ln.Identifier&&f(e.name)&&D({},fn.StrictLHSAssignment),e={type:ln.AssignmentExpression,operator:T().value,left:e,right:mt()}),e}function gt(){var e=mt();if(R(","))for(e={type:ln.SequenceExpression,expressions:[e]};_n>gn&&R(",");)T(),e.expressions.push(mt());return e}function vt(){for(var e,t=[];_n>gn&&!R("}")&&(e=qt(),"undefined"!=typeof e);)t.push(e);return t}function yt(){var e;return k("{"),e=vt(),Gt(),{type:ln.BlockStatement,body:e}}function _t(){var e=T();return e.type!==un.Identifier&&N(e),{type:ln.Identifier,name:e.value}}function xt(e){var t=_t(),n=null;return mn&&f(t.name)&&A({},fn.StrictVarName),"const"===e?(k("="),n=mt()):R("=")&&(T(),n=mt()),{type:ln.VariableDeclarator,id:t,init:n}}function bt(e){for(var t=[];_n>gn&&(t.push(xt(e)),R(","));)T();return t}function wt(){var e;return O("var"),e=bt(),L(),{type:ln.VariableDeclaration,declarations:e,kind:"var"}}function St(e){var t;return O(e),t=bt(e),L(),{type:ln.VariableDeclaration,declarations:t,kind:e}}function Et(){return k(";"),{type:ln.EmptyStatement}}function Ct(){var e=gt();return L(),{type:ln.ExpressionStatement,expression:e}}function Tt(){try{k(")")}catch(e){if(!wn.errors)throw e;z(e),"{"===hn[e.index]&&(gn=e.index,xn=null)}}function Pt(){var e,t,n;return O("if"),k("("),e=gt(),Tt(),t=Qt(),t||(t=null),j("else")?(T(),n=Qt()):n=null,{type:ln.IfStatement,test:e,consequent:t,alternate:n}}function It(){var e,t,n;return O("do"),n=bn.inIteration,bn.inIteration=!0,e=Qt(),bn.inIteration=n,O("while"),k("("),t=gt(),k(")"),R(";")&&T(),{type:ln.DoWhileStatement,body:e,test:t}}function Dt(){var e,t,n;return O("while"),k("("),e=gt(),Tt(),n=bn.inIteration,bn.inIteration=!0,t=Qt(),bn.inIteration=n,{type:ln.WhileStatement,test:e,body:t}}function At(){var e=T();return{type:ln.VariableDeclaration,declarations:bt(),kind:e.value}}function Nt(){var e,t,n,r,i,o,a;return e=t=n=null,O("for"),k("("),R(";")?T():(j("var")||j("let")?(bn.allowIn=!1,e=At(),bn.allowIn=!0,1===e.declarations.length&&j("in")&&(T(),r=e,i=gt(),e=null)):(bn.allowIn=!1,e=gt(),bn.allowIn=!0,j("in")&&(j("in")&&bn.lastParenthesized!==e&&!M(e)&&D({},fn.InvalidLHSInForIn),T(),r=e,i=gt(),e=null)),"undefined"==typeof r&&k(";")),"undefined"==typeof r&&(R(";")||(t=gt()),k(";"),R(")")||(n=gt())),Tt(),a=bn.inIteration,bn.inIteration=!0,o=Qt(),bn.inIteration=a,"undefined"==typeof r?{type:ln.ForStatement,init:e,test:t,update:n,body:o}:{type:ln.ForInStatement,left:r,right:i,body:o,each:!1}}function kt(){var e,t=null;return O("continue"),";"===hn[gn]?(T(),bn.inIteration||D({},fn.IllegalContinue),{type:ln.ContinueStatement,label:null}):I()?(bn.inIteration||D({},fn.IllegalContinue),{type:ln.ContinueStatement,label:null}):(e=P(),e.type===un.Identifier&&(t=_t(),Object.prototype.hasOwnProperty.call(bn.labelSet,t.name)||D({},fn.UnknownLabel,t.name)),L(),null!==t||bn.inIteration||D({},fn.IllegalContinue),{type:ln.ContinueStatement,label:t})}function Ot(){var e,t=null;return O("break"),";"===hn[gn]?(T(),bn.inIteration||bn.inSwitch||D({},fn.IllegalBreak),{type:ln.BreakStatement,label:null}):I()?(bn.inIteration||bn.inSwitch||D({},fn.IllegalBreak),{type:ln.BreakStatement,label:null}):(e=P(),e.type===un.Identifier&&(t=_t(),Object.prototype.hasOwnProperty.call(bn.labelSet,t.name)||D({},fn.UnknownLabel,t.name)),L(),null!==t||bn.inIteration||bn.inSwitch||D({},fn.IllegalBreak),{type:ln.BreakStatement,label:t})}function Rt(){var e,t=null;return O("return"),bn.inFunctionBody||A({},fn.IllegalReturn)," "===hn[gn]&&u(hn[gn+1])?(t=gt(),L(),{type:ln.ReturnStatement,argument:t}):I()?{type:ln.ReturnStatement,argument:null}:(R(";")||(e=P(),R("}")||e.type===un.EOF||(t=gt())),L(),{type:ln.ReturnStatement,argument:t})}function jt(){var e,t;return mn&&A({},fn.StrictModeWith),O("with"),k("("),e=gt(),k(")"),t=Qt(),{type:ln.WithStatement,object:e,body:t}}function Ft(){var e,t,n=[];for(j("default")?(T(),e=null):(O("case"),e=gt()),k(":");_n>gn&&!(R("}")||j("default")||j("case"))&&(t=Qt(),"undefined"!=typeof t);)n.push(t);return{type:ln.SwitchCase,test:e,consequent:n}}function Lt(){var e,t,n;if(O("switch"),k("("),e=gt(),k(")"),k("{"),R("}"))return T(),{type:ln.SwitchStatement,discriminant:e};for(t=[],n=bn.inSwitch,bn.inSwitch=!0;_n>gn&&!R("}");)t.push(Ft());return bn.inSwitch=n,k("}"),{type:ln.SwitchStatement,discriminant:e,cases:t}}function Mt(){var e;return O("throw"),I()&&D({},fn.NewlineAfterThrow),e=gt(),L(),{type:ln.ThrowStatement,argument:e}}function Bt(){var e;return O("catch"),k("("),R(")")||(e=gt(),mn&&e.type===ln.Identifier&&f(e.name)&&A({},fn.StrictCatchVariable)),k(")"),{type:ln.CatchClause,param:e,guard:null,body:yt()}}function Ut(){var e,t=[],n=null;return O("try"),e=yt(),j("catch")&&t.push(Bt()),j("finally")&&(T(),n=yt()),0!==t.length||n||D({},fn.NoCatchOrFinally),{type:ln.TryStatement,block:e,handlers:t,finalizer:n}}function Vt(){return O("debugger"),L(),{type:ln.DebuggerStatement}}function Qt(){var e,t,n=P();if(n.type===un.EOF&&N(n),n.type===un.Punctuator)switch(n.value){case";":return Et();case"{":return yt();case"(":return Ct()}if(n.type===un.Keyword)switch(n.value){case"break":return Ot();case"continue":return kt();case"debugger":return Vt();case"do":return It();case"for":return Nt();case"function":return zt();case"if":return Pt();case"return":return Rt();case"switch":return Lt();case"throw":return Mt();case"try":return Ut();case"var":return wt();case"while":return Dt();case"with":return jt()}return e=gt(),e&&e.type===ln.Identifier&&R(":")?(T(),Object.prototype.hasOwnProperty.call(bn.labelSet,e.name)&&D({},fn.Redeclaration,"Label",e.name),bn.labelSet[e.name]=!0,t=Qt(),delete bn.labelSet[e.name],{type:ln.LabeledStatement,label:e,body:t}):(L(),{type:ln.ExpressionStatement,expression:e})}function Gt(){if(wn.errors)try{k("}")}catch(e){z(e)}else k("}")}function Ht(){var e,t,r,i,o,a,s,u,c=[];for(k("{");_n>gn&&(t=P(),t.type===un.StringLiteral)&&(e=qt(),c.push(e),e.expression.type===ln.Literal);)r=n(t.range[0]+1,t.range[1]-1),"use strict"===r?(mn=!0,i&&D(i,fn.StrictOctalLiteral)):!i&&t.octal&&(i=t);for(o=bn.labelSet,a=bn.inIteration,s=bn.inSwitch,u=bn.inFunctionBody,bn.labelSet={},bn.inIteration=!1,bn.inSwitch=!1,bn.inFunctionBody=!0;_n>gn&&!R("}")&&(e=qt(),"undefined"!=typeof e);)c.push(e);return Gt(),bn.labelSet=o,bn.inIteration=a,bn.inSwitch=s,bn.inFunctionBody=u,{type:ln.BlockStatement,body:c}}function zt(){var e,t,n,r,i,o,a,s,u=[];if(O("function"),r=P(),e=_t(),mn?f(r.value)&&D(r,fn.StrictFunctionName):f(r.value)?(i=r,o=fn.StrictFunctionName):p(r.value)&&(i=r,o=fn.StrictReservedWord),k("("),!R(")"))for(s={};_n>gn&&(r=P(),t=_t(),mn?(f(r.value)&&D(r,fn.StrictParamName),Object.prototype.hasOwnProperty.call(s,r.value)&&D(r,fn.StrictParamDupe)):i||(f(r.value)?(i=r,o=fn.StrictParamName):p(r.value)?(i=r,o=fn.StrictReservedWord):Object.prototype.hasOwnProperty.call(s,r.value)&&(i=r,o=fn.StrictParamDupe)),u.push(t),s[t.name]=!0,!R(")"));)k(",");return k(")"),a=mn,n=Ht(),mn&&i&&D(i,o),mn=a,{type:ln.FunctionDeclaration,id:e,params:u,body:n}}function Wt(){var e,t,n,r,i,o,a,s=null,u=[];if(O("function"),R("(")||(e=P(),s=_t(),mn?f(e.value)&&D(e,fn.StrictFunctionName):f(e.value)?(t=e,n=fn.StrictFunctionName):p(e.value)&&(t=e,n=fn.StrictReservedWord)),k("("),!R(")"))for(a={};_n>gn&&(e=P(),r=_t(),mn?(f(e.value)&&D(e,fn.StrictParamName),Object.prototype.hasOwnProperty.call(a,e.value)&&D(e,fn.StrictParamDupe)):t||(f(e.value)?(t=e,n=fn.StrictParamName):p(e.value)?(t=e,n=fn.StrictReservedWord):Object.prototype.hasOwnProperty.call(a,e.value)&&(t=e,n=fn.StrictParamDupe)),u.push(r),a[r.name]=!0,!R(")"));)k(",");return k(")"),o=mn,i=Ht(),mn&&t&&D(t,n),mn=o,{type:ln.FunctionExpression,id:s,params:u,body:i}}function qt(){var e=P();if(e.type===un.Keyword)switch(e.value){case"const":case"let":return St(e.value);case"function":return zt();default:return Qt()}return e.type!==un.EOF?Qt():void 0}function Xt(){for(var e,t,r,i,o=[];_n>gn&&(t=P(),t.type===un.StringLiteral)&&(e=qt(),o.push(e),e.expression.type===ln.Literal);)r=n(t.range[0]+1,t.range[1]-1),"use strict"===r?(mn=!0,i&&D(i,fn.StrictOctalLiteral)):!i&&t.octal&&(i=t);for(;_n>gn&&(e=qt(),"undefined"!=typeof e);)o.push(e);return o}function $t(){var e;return mn=!1,e={type:ln.Program,body:Xt()}}function Jt(e,n,r,i){t("number"==typeof e,"Comment must have valid position"),wn.comments.length>0&&wn.comments[wn.comments.length-1].range[1]>e||wn.comments.push({range:[e,n],type:r,value:i})}function Kt(){var e,t,n,r,i;for(e="",r=!1,i=!1;_n>gn;)if(t=hn[gn],i)t=h(),gn>=_n?(i=!1,e+=t,Jt(n,gn,"Line",e)):s(t)?(i=!1,Jt(n,gn,"Line",e),"\r"===t&&"\n"===hn[gn]&&++gn,++vn,yn=gn,e=""):e+=t;else if(r)s(t)?("\r"===t&&"\n"===hn[gn+1]?(++gn,e+="\r\n"):e+=t,++vn,++gn,yn=gn,gn>=_n&&D({},fn.UnexpectedToken,"ILLEGAL")):(t=h(),gn>=_n&&D({},fn.UnexpectedToken,"ILLEGAL"),e+=t,"*"===t&&(t=hn[gn],"/"===t&&(e=e.substr(0,e.length-1),r=!1,++gn,Jt(n,gn,"Block",e),e="")));else if("/"===t)if(t=hn[gn+1],"/"===t)n=gn,gn+=2,i=!0;else{if("*"!==t)break;n=gn,gn+=2,r=!0,gn>=_n&&D({},fn.UnexpectedToken,"ILLEGAL")}else if(a(t))++gn;else{if(!s(t))break;++gn,"\r"===t&&"\n"===hn[gn]&&++gn,++vn,yn=gn}}function Yt(){var e,t,r=wn.advance();return r.type!==un.EOF&&(e=[r.range[0],r.range[1]],t=n(r.range[0],r.range[1]),wn.tokens.push({type:cn[r.type],value:t,range:e})),r}function Zt(){var e,t,n;return v(),e=gn,t=wn.scanRegExp(),wn.tokens.length>0&&(n=wn.tokens[wn.tokens.length-1],n.range[0]===e&&"Punctuator"===n.type&&("/"===n.value||"/="===n.value)&&wn.tokens.pop()),wn.tokens.push({type:"RegularExpression",value:t.literal,range:[e,gn]}),t}function en(e){return{type:ln.Literal,value:e.value}}function tn(e){return{type:ln.Literal,value:e.value,raw:n(e.range[0],e.range[1])}}function nn(e,t){return function(n){function r(e){return e.type===ln.LogicalExpression||e.type===ln.BinaryExpression}function i(n){r(n.left)&&i(n.left),r(n.right)&&i(n.right),e&&"undefined"==typeof n.range&&(n.range=[n.left.range[0],n.right.range[1]]),t&&"undefined"==typeof n.loc&&(n.loc={start:n.left.loc.start,end:n.right.loc.end})}return function(){var o,a,s;return v(),a=[gn,0],s={start:{line:vn,column:gn-yn}},o=n.apply(null,arguments),"undefined"!=typeof o?(e&&(a[1]=gn,o.range=a),t&&(s.end={line:vn,column:gn-yn},o.loc=s),r(o)&&i(o),o.type===ln.MemberExpression&&("undefined"!=typeof o.object.range&&(o.range[0]=o.object.range[0]),"undefined"!=typeof o.object.loc&&(o.loc.start=o.object.loc.start)),o):void 0}}}function rn(){function e(e){return function(){try{return e.apply(null,arguments)}catch(t){return z(t),null}}}function t(e){return function(){wn.statementStart=gn;try{return e.apply(null,arguments)}catch(t){z(t)}}}var n;wn.comments&&(wn.skipComment=v,v=Kt),wn.raw&&(wn.createLiteral=en,en=tn),(wn.range||wn.loc||wn.errors)&&(n=nn(wn.range,wn.loc),wn.parseAdditiveExpression=ot,wn.parseAssignmentExpression=mt,wn.parseBitwiseANDExpression=ct,wn.parseBitwiseORExpression=lt,wn.parseBitwiseXORExpression=pt,wn.parseBlock=yt,wn.parseFunctionSourceElements=Ht,wn.parseCallMember=Y,wn.parseCatchClause=Bt,wn.parseComputedMember=K,wn.parseConditionalExpression=ht,wn.parseConstLetDeclaration=St,wn.parseEqualityExpression=ut,wn.parseExpression=gt,wn.parseForVariableDeclaration=At,wn.parseFunctionDeclaration=zt,wn.parseFunctionExpression=Wt,wn.parseLogicalANDExpression=ft,wn.parseLogicalORExpression=dt,wn.parseMultiplicativeExpression=it,wn.parseNewExpression=Z,wn.parseNonComputedMember=J,wn.parseNonComputedProperty=$,wn.parseObjectProperty=Q,wn.parseObjectPropertyKey=V,wn.parsePostfixExpression=nt,wn.parsePrimaryExpression=H,wn.parseProgram=$t,wn.parsePropertyFunction=U,wn.parseRelationalExpression=st,wn.parseStatement=Qt,wn.parseShiftExpression=at,wn.parseSwitchCase=Ft,wn.parseUnaryExpression=rt,wn.parseVariableDeclaration=xt,wn.parseVariableIdentifier=_t,wn.consumeSemicolon=L,ot=n(wn.parseAdditiveExpression),mt=n(wn.parseAssignmentExpression),ct=n(wn.parseBitwiseANDExpression),lt=n(wn.parseBitwiseORExpression),pt=n(wn.parseBitwiseXORExpression),yt=n(wn.parseBlock),Ht=n(wn.parseFunctionSourceElements),Y=n(wn.parseCallMember),Bt=n(wn.parseCatchClause),K=n(wn.parseComputedMember),ht=n(wn.parseConditionalExpression),St=n(wn.parseConstLetDeclaration),ut=n(wn.parseEqualityExpression),gt=n(wn.parseExpression),At=n(wn.parseForVariableDeclaration),zt=n(wn.parseFunctionDeclaration),Wt=n(wn.parseFunctionExpression),ft=n(wn.parseLogicalANDExpression),dt=n(wn.parseLogicalORExpression),it=n(wn.parseMultiplicativeExpression),Z=n(wn.parseNewExpression),J=n(wn.parseNonComputedMember),$=n(wn.parseNonComputedProperty),Q=n(wn.parseObjectProperty),V=n(wn.parseObjectPropertyKey),nt=n(wn.parsePostfixExpression),H=n(wn.parsePrimaryExpression),$t=n(wn.parseProgram),U=n(wn.parsePropertyFunction),st=n(wn.parseRelationalExpression),Qt=n(wn.parseStatement),at=n(wn.parseShiftExpression),Ft=n(wn.parseSwitchCase),rt=n(wn.parseUnaryExpression),xt=n(wn.parseVariableDeclaration),_t=n(wn.parseVariableIdentifier)),wn.errors&&(Qt=t(Qt),gt=e(gt),$=e($),L=e(L)),"undefined"!=typeof wn.tokens&&(wn.advance=C,wn.scanRegExp=S,C=Yt,S=Zt)}function on(){"function"==typeof wn.skipComment&&(v=wn.skipComment),wn.raw&&(en=wn.createLiteral),(wn.range||wn.loc||wn.errors)&&(ot=wn.parseAdditiveExpression,mt=wn.parseAssignmentExpression,ct=wn.parseBitwiseANDExpression,lt=wn.parseBitwiseORExpression,pt=wn.parseBitwiseXORExpression,yt=wn.parseBlock,Ht=wn.parseFunctionSourceElements,Y=wn.parseCallMember,Bt=wn.parseCatchClause,K=wn.parseComputedMember,ht=wn.parseConditionalExpression,St=wn.parseConstLetDeclaration,ut=wn.parseEqualityExpression,gt=wn.parseExpression,At=wn.parseForVariableDeclaration,zt=wn.parseFunctionDeclaration,Wt=wn.parseFunctionExpression,ft=wn.parseLogicalANDExpression,dt=wn.parseLogicalORExpression,it=wn.parseMultiplicativeExpression,Z=wn.parseNewExpression,J=wn.parseNonComputedMember,$=wn.parseNonComputedProperty,Q=wn.parseObjectProperty,V=wn.parseObjectPropertyKey,H=wn.parsePrimaryExpression,nt=wn.parsePostfixExpression,$t=wn.parseProgram,U=wn.parsePropertyFunction,st=wn.parseRelationalExpression,Qt=wn.parseStatement,at=wn.parseShiftExpression,Ft=wn.parseSwitchCase,rt=wn.parseUnaryExpression,xt=wn.parseVariableDeclaration,_t=wn.parseVariableIdentifier,L=wn.consumeSemicolon),"function"==typeof wn.scanRegExp&&(C=wn.advance,S=wn.scanRegExp)}function an(e){var t,n=e.length,r=[];for(t=0;n>t;++t)r[t]=e.charAt(t);return r}function sn(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),hn=e,gn=0,vn=hn.length>0?1:0,yn=0,_n=hn.length,xn=null,bn={allowIn:!0,labelSet:{},lastParenthesized:null,inFunctionBody:!1,inIteration:!1,inSwitch:!1},wn={},"undefined"!=typeof t&&(wn.range="boolean"==typeof t.range&&t.range,wn.loc="boolean"==typeof t.loc&&t.loc,wn.raw="boolean"==typeof t.raw&&t.raw,"boolean"==typeof t.tokens&&t.tokens&&(wn.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(wn.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(wn.errors=[])),_n>0&&"undefined"==typeof hn[0]&&(e instanceof String&&(hn=e.valueOf()),"undefined"==typeof hn[0]&&(hn=an(e))),rn();try{n=$t(),"undefined"!=typeof wn.comments&&(n.comments=wn.comments),"undefined"!=typeof wn.tokens&&(n.tokens=wn.tokens),"undefined"!=typeof wn.errors&&(n.errors=wn.errors)}catch(i){throw i}finally{on(),wn={}}return n}var un,cn,ln,pn,fn,dn,hn,mn,gn,vn,yn,_n,xn,bn,wn;un={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8},cn={},cn[un.BooleanLiteral]="Boolean",cn[un.EOF]="<end>",cn[un.Identifier]="Identifier",cn[un.Keyword]="Keyword",cn[un.NullLiteral]="Null",cn[un.NumericLiteral]="Numeric",cn[un.Punctuator]="Punctuator",cn[un.StringLiteral]="String",ln={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},pn={Data:1,Get:2,Set:4},fn={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},dn={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},"undefined"==typeof"esprima"[0]&&(n=function(e,t){return hn.slice(e,t).join("")}),e.version="1.0.0-dev",e.parse=sn,e.Syntax=function(){var e,t={};"function"==typeof Object.create&&(t=Object.create(null));for(e in ln)ln.hasOwnProperty(e)&&(t[e]=ln[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()}("undefined"==typeof exports?esprima={}:exports),define("sap/watt/lib/orion/ui/esprima/esprima",function(){}),define("sap/watt/lib/orion/javascript/esprima/esprimaVisitor",["./scriptedLogger","sap/watt/lib/orion/ui/esprima/esprima"],function(e){return{parse:function(t,n){n||(n={}),n.range||(n.range=!0),n.tolerant||(n.tolerant=!0),n.comment||(n.comment=!0);try{var r=esprima.parse(t,n);return r}catch(i){"undefined"!=typeof e&&(e.warn("Problem parsing file","CONTENT_ASSIST"),e.warn(i.message,"CONTENT_ASSIST"),e.warn(i.stack,"CONTENT_ASSIST"));var o=null;return n.tolerant&&(o=this.emptyAST(t),o.errors=[i]),o}},visit:function(e,t,n,r){var i,o,a,s;if(n(e,t,!0)){s=[];for(o in e)if("range"!==o&&"errors"!==o&&"target"!==o&&"extras"!==o&&"comments"!==o)if(a=e[o],a instanceof Array)for(i=0;i<a.length;i++)a[i]&&a[i].hasOwnProperty("type")?s.push(a[i]):"properties"===o&&a[i].hasOwnProperty("key")&&a[i].hasOwnProperty("value")&&(s.push(a[i].key),s.push(a[i].value));else a&&a.hasOwnProperty("type")&&s.push(a);if(s.length>0)for(s.sort(function(e,t){return e.range&&t.range?e.range[0]-t.range[0]:e.range?1:t.range?-1:0}),i=0;i<s.length;i++)this.visit(s[i],t,n,r);r&&r(e,t,!1)}},emptyAST:function(e){var t=e&&"number"==typeof e.length?e.length:0;return{type:"Program",body:[],comments:[],tokens:[],range:[0,t]}}}}),define("sap.watt.toolsets.javascript/util/WorkerHelper",[],function(){"use strict";var e,t,n,r=new Q.sap.Queue,i={init:function(i,o,a){var s=this;return r.next(function(){return t?new Q:(e=Q.defer(),t=new Worker(i),n=o,t.onmessage=s._onMessage,t.onerror=a,e.promise)})},_onMessage:function(t){return"ready"!==t.data.action?n(t):(e.resolve(),void 0)},doOperation:function(e,n){if(!t)throw new Error("make sure the worker is not terminated");var r={action:e,context:n},i=JSON.stringify(r,function(e,t){return t instanceof Function||"function"==typeof t?t.toString():t});t.postMessage(i)},terminateWorker:function(){t&&(t.terminate(),t=void 0)}};return function(e,t,n){return this.init(e,t,n).then(function(){return{doOperation:this.doOperation,terminateWorker:this.terminateWorker}}.bind(this))}.bind(i)}),define("sap.watt.toolsets.javascript/service/JSAstManager",["sap/watt/lib/orion/javascript/esprima/esprimaVisitor","../util/WorkerHelper","sap/watt/lib/orion/ui/esprima/esprima"],function(e,t){"use strict";var n;return{parse:function(e,t){t||(t={});var n=null;try{n=esprima.parse(e,t)}catch(r){n=this.emptyAST(e)}return n},visit:function(t,n,r,i){e.visit(t,n,r,i)},_visitContext:function(e,t,n,r,i,o){var a={contentOwner:e,content:t,parseOptions:n,visitorContext:r,visitorOperation:i,visitorPostOperation:o};return a},parseAndVisit:function(e,r,i,o,a,s){if(this.oDefered=Q.defer(),n){var u=this._visitContext(e,r,i,o,a,s);n.doOperation("visit",u)}else{var c=this,l=require.toUrl("sap.watt.toolsets.javascript/util/VisitorWorker.js");t(l,function(e){c.oDefered.resolve({outlineContext:e.data.result,contentOwner:e.data.contentOwner})},function(e){c.context.service.log.error("JSAstManager",e.message,["user"]).done(),c.oDefered.resolve({})}).then(function(t){n=t;var u=c._visitContext(e,r,i,o,a,s);n.doOperation("visit",u)}).done()}return this.oDefered.promise},emptyAST:function(e){var t=e&&"number"==typeof e.length?e.length:0;return{type:"Program",body:[],comments:[],tokens:[],range:[0,t]}}}}),define("sap/watt/lib/orion/javascript/esprima/indexer",[],function(){"use strict";function e(){return this.globalSummaries&&Object.keys(this.globalSummaries).length>0}function t(e,t){this.globalSummaries&&(this.globalSummaries[e]=t)}function n(){return this.globalSummaries}function r(e){var t=e;if("."===e.charAt(0)&&URI){var n=new URI(e);t=n.absoluteTo(this.targetFile).toString()+".js"}else if(this.projectInfo){var r=this.projectInfo.namespace;e.slice(0,r.length)===r&&(t=e.replace(r,this.projectInfo.rootPath)+".js")}return this.globalSummaries?this.globalSummaries[t]:void 0}function i(e,t,n){this.globalSummaries=e,this.targetFile=t,this.projectInfo=n}return i.prototype={hasDependency:e,performIndex:t,retrieveGlobalSummaries:n,retrieveSummary:r},{OrionIndexer:i}}),define("sap/watt/lib/orion/javascript/esprima/proposalUtils",[],function(){function e(e,t,n){return t[0]<=e&&(n?t[1]>=e:t[1]>e)}return{looselyMatches:function(e,t,n){if(null===t||null===e)return!1;if(0===e.length)return!0;if(e.charAt(0).toLowerCase()!==t.charAt(0).toLowerCase())return!1;if(this.startsWith(t,e))return!0;if(n)return!1;var r=t.toLowerCase();if(this.startsWith(r,e.toLowerCase()))return!0;if(e===e.toLowerCase())return!1;var i=this.toCamelCaseParts(e),o=this.toCamelCaseParts(t);if(i.length>o.length)return!1;for(var a=0;a<i.length;++a)if(!this.startsWith(o[a],i[a]))return!1;return!0},toCamelCaseParts:function(e){for(var t=[],n=e.length-1;n>=0;--n)this.isUpperCase(e.charAt(n))&&(t.push(e.substring(n)),e=e.substring(0,n));return 0!==e.length&&t.push(e),t.reverse()},startsWith:function(e,t){return e.substr(0,t.length)===t},isUpperCase:function(e){return e>="A"&&"Z">=e},repeatChar:function(e,t){for(var n="",r=0;t>r;r++)n+=e;return n},inRange:e,isBefore:function(e,t){return t?e<t[0]:!0},afterDot:function(t,n,r){var i;if(i=n.property?n.property.range[0]:n.range[1]+2,!e(t-1,n.range)||e(t-1,n.object.range)||t>i)return!1;for(var o=n.object.range[1];"."!==r.charAt(o)&&i>o;)o++;return"."!==r.charAt(o)?!1:t>o}}}),function(e){"use strict";function t(e,t,n){return e.slice(t,n)}function n(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function r(e){return"\n"===e||"\r"===e||"\u2028"===e||"\u2029"===e}function i(e){return" "===e||"	"===e||""===e||"\f"===e||" "===e||e.charCodeAt(0)>=5760&&" ᠎             　﻿".indexOf(e)>=0}function o(e){return"0123456789".indexOf(e)>=0}function a(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function s(e){return"01234567".indexOf(e)>=0}function u(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||e>="0"&&"9">=e}function c(e){return"$"===e||"_"===e||"\\"===e||e>="a"&&"z">=e||e>="A"&&"Z">=e||e.charCodeAt(0)>=128&&g.NonAsciiIdentifierStart.test(e)}function l(e){return"$"===e||"_"===e||"\\"===e||e>="a"&&"z">=e||e>="A"&&"Z">=e||e>="0"&&"9">=e||e.charCodeAt(0)>=128&&g.NonAsciiIdentifierPart.test(e)}function p(e){return-1==="><(){}[],:*|?!=".indexOf(e)&&!i(e)&&!r(e)}function f(){}function d(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function h(e){var t,n,o,a,s,u=0,c=1,l=2;for(e=e.replace(/^\/\*\*?/,"").replace(/\*\/$/,""),t=0,n=e.length,o=u,a="";n>t;){switch(s=e[t],o){case u:r(s)?a+=s:"*"===s?o=c:i(s)||(a+=s,o=l);break;case c:i(s)||(a+=s),o=r(s)?u:l;break;case l:a+=s,r(s)&&(o=u)}t+=1}return a}var m,g,v,y,_,x;m="0.1.0",g={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},v=void 0!==typeof"doctrine"[0],x=Array.isArray,x||(x=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),v||(t=function(e,t,n){return e.slice(t,n).join("")}),"dev"===m.slice(-3)&&(f=function(e,t){if(!e)throw new Error(t)}),function(e){function t(){var e=V[B];return B+=1,e}function n(e){var n,r,i,o=0;for(r="u"===e?4:2,n=0;r>n;++n){if(!(Q>B&&a(V[B])))return"";i=t(),o=16*o+"0123456789abcdef".indexOf(i.toLowerCase())}return String.fromCharCode(o)}function u(){var e,i,o,a,u,c="",l=!1;for(e=V[B],++B;Q>B;){if(i=t(),i===e){e="";break}if("\\"===i)if(i=t(),r(i))"\r"===i&&"\n"===V[B]&&++B;else switch(i){case"n":c+="\n";break;case"r":c+="\r";break;case"t":c+="	";break;case"u":case"x":u=B,a=n(i),a?c+=a:(B=u,c+=i);break;case"b":c+="\b";break;case"f":c+="\f";break;case"v":c+="";break;default:s(i)?(o="01234567".indexOf(i),0!==o&&(l=!0),Q>B&&s(V[B])&&(l=!0,o=8*o+"01234567".indexOf(t()),"0123".indexOf(i)>=0&&Q>B&&s(V[B])&&(o=8*o+"01234567".indexOf(t()))),c+=String.fromCharCode(o)):c+=i}else{if(r(i))break;c+=i}}if(""!==e)throw"unexpected quote";return H=c,M.STRING}function l(){var e,n;if(e="","."!==n){if(e=t(),n=V[B],"0"===e){if("x"===n||"X"===n){for(e+=t();Q>B&&(n=V[B],a(n));)e+=t();if(e.length<=2)throw"unexpected token";if(Q>B&&(n=V[B],c(n)))throw"unexpected token";return H=parseInt(e,16),M.NUMBER}if(s(n)){for(e+=t();Q>B&&(n=V[B],s(n));)e+=t();
if(Q>B&&(n=V[B],c(n)||o(n)))throw"unexpected token";return H=parseInt(e,8),M.NUMBER}if(o(n))throw"unexpected token"}for(;Q>B&&(n=V[B],o(n));)e+=t()}if("."===n)for(e+=t();Q>B&&(n=V[B],o(n));)e+=t();if("e"===n||"E"===n){if(e+=t(),n=V[B],("+"===n||"-"===n)&&(e+=t()),n=V[B],!o(n))throw"unexpected token";for(e+=t();Q>B&&(n=V[B],o(n));)e+=t()}if(Q>B&&(n=V[B],c(n)))throw"unexpected token";return H=parseFloat(e),M.NUMBER}function d(){var e,n;for(H=t();Q>B&&p(V[B])&&(e=V[B],!("."===e&&Q>B+1&&(n=V[B+1],"<"===n)));)H+=t();return"["==V[B]&&"]"==V[B+1]&&(H+=t(),H+=t()),M.NAME}function h(){var e;for(U=B;Q>B&&i(V[B]);)t();if(B>=Q)return G=M.EOF;switch(e=V[B]){case'"':return G=u();case":":return t(),G=M.COLON;case",":return t(),G=M.COMMA;case"(":return t(),G=M.LPAREN;case")":return t(),G=M.RPAREN;case"[":return t(),G=M.LBRACK;case"]":return t(),G=M.RBRACK;case"{":return t(),G=M.LBRACE;case"}":return t(),G=M.RBRACE;case".":if(t(),Q>B){if(e=V[B],"<"===e)return t(),G=M.DOT_LT;if("."===e&&Q>B+1&&"."===V[B+1])return t(),t(),G=M.REST;if(o(e))return G=l()}return G=M.DOT;case"<":return t(),G=M.LT;case">":return t(),G=M.GT;case"*":return t(),G=M.STAR;case"|":return t(),G=M.PIPE;case"?":return t(),G=M.QUESTION;case"!":return t(),G=M.BANG;case"=":return t(),G=M.EQUAL;default:return G=o(e)?l():p(e)?d():M.ILLEGAL}}function m(e,t){f(G===e,t||"consumed token not matched"),h()}function g(e){if(G!==e)throw"unexpected token";h()}function y(){var e;if(m(M.LPAREN,"UnionType should start with ("),e=[],G!==M.RPAREN)for(;;){if(e.push(A()),G===M.RPAREN)break;g(M.PIPE)}return m(M.RPAREN,"UnionType should end with )"),{type:L.UnionType,elements:e}}function _(){var e;for(m(M.LBRACK,"ArrayType should start with ["),e=[];G!==M.RBRACK;){if(G===M.REST){m(M.REST),e.push({type:L.RestType,expression:A()});break}e.push(A()),G!==M.RBRACK&&g(M.COMMA)}return g(M.RBRACK),{type:L.ArrayType,elements:e}}function x(){var e=H;if(G===M.NAME||G===M.STRING)return h(),e;if(G===M.NUMBER)return m(M.NUMBER),String(e);throw"unexpected token"}function b(){var e;return e=x(),G===M.COLON?(m(M.COLON),{type:L.FieldType,key:e,value:A()}):{type:L.FieldType,key:e,value:null}}function w(){var e;if(m(M.LBRACE,"RecordType should start with {"),e=[],G===M.COMMA)m(M.COMMA);else for(;G!==M.RBRACE;)e.push(b()),G!==M.RBRACE&&g(M.COMMA);return g(M.RBRACE),{type:L.RecordType,fields:e}}function S(){var e=H;return g(M.NAME),{type:L.NameExpression,name:e}}function E(){var e=[];for(e.push(N());G===M.COMMA;)m(M.COMMA),e.push(N());return e}function C(){var e,t;return e=S(),G===M.DOT_LT||G===M.LT?(h(),t=E(),g(M.GT),{type:L.TypeApplication,expression:e,applications:t}):e}function T(){return m(M.COLON,"ResultType should start with :"),G===M.NAME&&"void"===H?(m(M.NAME),{type:L.VoidLiteral}):A()}function P(){for(var e,t=[],n=!0,r=!1;G!==M.RPAREN;){if(G===M.REST&&(m(M.REST),r=!0),e=A(),e.type===L.NameExpression&&G===M.COLON&&(m(M.COLON),e={type:L.ParameterType,name:e.name,expression:A()}),G===M.EQUAL)m(M.EQUAL),e={type:L.OptionalType,expression:e},n=!1;else if(!n)throw"unexpected token";r&&(e={type:L.RestType,expression:e}),t.push(e),G!==M.RPAREN&&g(M.COMMA)}return t}function I(){var e,t,n,r,i;f(G===M.NAME&&"function"===H,"FunctionType should start with 'function'"),m(M.NAME);try{g(M.LPAREN),e=!1,n=[],t=null,G!==M.RPAREN&&(G!==M.NAME||"this"!==H&&"new"!==H?n=P():(e="new"===H,m(M.NAME),g(M.COLON),t=C(),G===M.COMMA&&(m(M.COMMA),n=P()))),g(M.RPAREN)}catch(o){}return r=null,G===M.COLON&&(r=T()),i={type:L.FunctionType,params:n,result:r},t&&(i["this"]=t,e&&(i["new"]=!0)),i}function D(){switch(G){case M.STAR:return m(M.STAR),{type:L.AllLiteral};case M.LPAREN:return y();case M.LBRACK:return _();case M.LBRACE:return w();case M.NAME:return"null"===H?(m(M.NAME),{type:L.NullLiteral}):"undefined"===H?(m(M.NAME),{type:L.UndefinedLiteral}):"function"===H?I():C();default:throw"unexpected token"}}function A(){var e;return G===M.QUESTION?(m(M.QUESTION),G===M.COMMA||G===M.EQUAL||G===M.RBRACE||G===M.RPAREN||G===M.PIPE||G===M.EOF?{type:L.NullableLiteral}:{type:L.NullableType,expression:D(),prefix:!0}):G===M.BANG?(m(M.BANG),{type:L.NonNullableType,expression:D(),prefix:!0}):(e=D(),G===M.BANG?(m(M.BANG),{type:L.NonNullableType,expression:e,prefix:!1}):G===M.QUESTION?(m(M.QUESTION),{type:L.NullableType,expression:e,prefix:!1}):e)}function N(){var e,t;if(e=A(),G!==M.PIPE)return e;for(t=[e],m(M.PIPE);;){if(t.push(A()),G!==M.PIPE)break;m(M.PIPE)}return{type:L.UnionType,elements:t}}function k(){var e;return G===M.REST?(m(M.REST),{type:L.RestType,expression:N()}):(e=N(),G===M.EQUAL?(m(M.EQUAL),{type:L.OptionalType,expression:e}):e)}function O(e,t){var n;if(V=e,Q=V.length,B=0,U=0,v||(V=V.split("")),h(),n=N(),t&&t.midstream)return{expression:n,index:U};if(G!==M.EOF)throw"not reach to EOF";return n}function R(e,t){var n;if(V=e,Q=V.length,B=0,U=0,v||(V=V.split("")),h(),n=k(),t&&t.midstream)return{expression:n,index:U};if(G!==M.EOF)throw"not reach to EOF";return n}function j(e,t,n){var r,i,o;switch(e.type){case L.NullableLiteral:r="?";break;case L.AllLiteral:r="*";break;case L.NullLiteral:r="null";break;case L.UndefinedLiteral:r="undefined";break;case L.VoidLiteral:r="void";break;case L.UnionType:for(r=n?"":"(",i=0,o=e.elements.length;o>i;++i)r+=j(e.elements[i],t),i+1!==o&&(r+="|");n||(r+=")");break;case L.ArrayType:for(r="[",i=0,o=e.elements.length;o>i;++i)r+=j(e.elements[i],t),i+1!==o&&(r+=t?",":", ");r+="]";break;case L.RecordType:for(r="{",i=0,o=e.fields.length;o>i;++i)r+=j(e.fields[i],t),i+1!==o&&(r+=t?",":", ");r+="}";break;case L.FieldType:r=e.value?e.key+(t?":":": ")+j(e.value,t):e.key;break;case L.FunctionType:for(r=t?"function(":"function (",e["this"]&&(r+=e["new"]?t?"new:":"new: ":t?"this:":"this: ",r+=j(e["this"],t),0!==e.params.length&&(r+=t?",":", ")),i=0,o=e.params.length;o>i;++i)r+=j(e.params[i],t),i+1!==o&&(r+=t?",":", ");r+=")",e.result&&(r+=(t?":":": ")+j(e.result,t));break;case L.ParameterType:r=e.name+(t?":":": ")+j(e.expression,t);break;case L.RestType:r="...",e.expression&&(r+=j(e.expression,t));break;case L.NonNullableType:r=e.prefix?"!"+j(e.expression,t):j(e.expression,t)+"!";break;case L.OptionalType:r=j(e.expression,t)+"=";break;case L.NullableType:r=e.prefix?"?"+j(e.expression,t):j(e.expression,t)+"?";break;case L.NameExpression:r=e.name;break;case L.TypeApplication:for(r=j(e.expression,t)+".<",i=0,o=e.applications.length;o>i;++i)r+=j(e.applications[i],t),i+1!==o&&(r+=t?",":", ");r+=">";break;default:throw new Error("Unknown type "+e.type)}return r}function F(e,t){return null==t&&(t={}),j(e,t.compact,t.topLevel)}var L,M,B,U,V,Q,G,H;L={NullableLiteral:"NullableLiteral",AllLiteral:"AllLiteral",NullLiteral:"NullLiteral",UndefinedLiteral:"UndefinedLiteral",VoidLiteral:"VoidLiteral",UnionType:"UnionType",ArrayType:"ArrayType",RecordType:"RecordType",FieldType:"FieldType",FunctionType:"FunctionType",ParameterType:"ParameterType",RestType:"RestType",NonNullableType:"NonNullableType",OptionalType:"OptionalType",NullableType:"NullableType",NameExpression:"NameExpression",TypeApplication:"TypeApplication"},M={ILLEGAL:0,DOT:1,DOT_LT:2,REST:3,LT:4,GT:5,LPAREN:6,RPAREN:7,LBRACE:8,RBRACE:9,LBRACK:10,RBRACK:11,COMMA:12,COLON:13,STAR:14,PIPE:15,QUESTION:16,BANG:17,EQUAL:18,NAME:19,STRING:20,NUMBER:21,EOF:22},e.parseType=O,e.parseParamType=R,e.stringify=F,e.Syntax=L}(y={}),function(e){function n(){var e=E[w];return w+=1,e}function o(){var e="";for(n();S>w&&u(E[w]);)e+=n();return e}function a(){var e,t,n=w;for(t=!1;S>n;){if(e=E[n],r(e))t=!0;else if(t){if("@"===e)break;i(e)||(t=!1)}n+=1}return n}function s(e,o){for(var a,s,u,c,l=!1;o>w;){if(a=E[w],!i(a)){if("{"===a){n();break}l=!0;break}n()}if(l){u=t(E,w,o);try{return c="param"===e?y.parseParamType(u,{midstream:!0}):y.parseType(u,{midstream:!0}),w+=c.index,c.expression}catch(p){return}}else{for(s=0,u="";o>w;){if(a=E[w],r(a))return;if("}"===a){if(0===s){n();break}s-=1}else"{"===a&&(s+=1);u+=n()}try{return"param"===e?y.parseParamType(u):y.parseType(u)}catch(f){return}}}function p(e,t){for(var o,a,s=0,u=!1;e>w&&(i(E[w])||r(E[w]));)n();if(!(w>=e)){if(!c(E[w])){if(!t||"["!==E[w])return;s=1}for(a=n();e>w;){if(o=E[w],i(o)||r(o)){n();break}if(t&&"["===o&&s++,t&&"]"===E[w]){if(1===s){a+=n();break}if(!(s>0))return;s--}if("="===o&&(u=!0),u)n();else if("."!==o){if(!l(o))return a;a+=n()}else a+=n()}for(s&&"]"===E[w]&&(a+=n());a&&"."===a[a.length-1];)a=a.substring(0,a.length-1);return a}}function m(e){return"define"===e||"enum"===e||"extends"===e||"implements"===e||"param"===e||"return"===e||"this"===e||"type"===e||"typedef"===e||"throws"===e||"returns"===e||"property"===e||"augments"===e}function g(){var e,t,o="";for(t=!0;S>w&&(e=E[w],!t||"@"!==e);)r(e)?t=!0:t&&!i(e)&&(t=!1),o+=n();return o}function _(){function e(e){r.errors||(r.errors=[]),r.errors.push(e)}for(var r,i,u,c,l;S>w&&"@"!==E[w];)n();if(!(w>=S)&&(f("@"===E[w]),i=o(),r={title:i,description:null},(i||(e("Missing or invalid title"),C))&&(u=a(i),!m(i)||(r.type=s(i,u),r.type||(e("Missing or invalid tag type"),C))))){if("param"===i||"property"===i)if(r.name=p(u,T&&"param"===i),r.name)"["===r.name.charAt(0)&&"]"===r.name.charAt(r.name.length-1)&&(r.name=r.name.substring(1,r.name.length-1),l={type:"OptionalType",expression:r.type},r.type=l);else if(e("Missing or invalid tag name"),!C)return;return c=d(t(E,w,u)),c&&(r.description=c),w=u,r}}function b(e,t){var n,r,i,o,a,s=[];if(void 0===t&&(t={}),E="boolean"==typeof t.unwrap&&t.unwrap?h(e):e,t.tags){if(!x(t.tags))throw new Error('Invalid "tags" parameter: '+t.tags);for(i={},o=0,a=t.tags.length;a>o;o++){if("string"!=typeof t.tags[o])throw new Error('Invalid "tags" parameter: '+t.tags);i[t.tags[o]]=!0}}for(v||(E=E.split("")),S=E.length,w=0,C=t.recoverable,T=t.sloppy,r=d(g());;){if(n=_(),!n)break;(!i||i.hasOwnProperty(n.title))&&s.push(n)}return{description:r,tags:s}}var w,S,E,C,T;e.parse=b}(_={}),e.version=m,e.parse=_.parse,e.parseType=y.parseType,e.parseParamType=y.parseParamType,e.unwrapComment=h,e.Syntax=n(y.Syntax),e.type={Syntax:e.Syntax,parseType:y.parseType,parseParamType:y.parseParamType,stringify:y.stringify}}("undefined"==typeof exports?doctrine={}:exports),define("sap/watt/lib/doctrine/doctrine",function(){}),define("sap/watt/lib/orion/javascript/esprima/typeUtils",["./proposalUtils","./scriptedLogger","sap/watt/lib/doctrine/doctrine"],function(e,t){function n(e){if(!e)return e;if(e.type)return e;try{return doctrine.parseParamType(e)}catch(t){return{}}}function r(e){if("string"!=typeof e)throw new Error("Expected string, but found: "+JSON.parse(e));return{type:"NameExpression",name:e}}function i(e,t){if("string"!=typeof e)return!1;if("Object"===e||"undefined"===e)return!0;if(e.substring(0,p.length)!==p)return!1;var n=t[e],r=0;for(var o in n)if(n.hasOwnProperty(o)&&(r++,r>1))break;return 1===r?i(n.$$proto.typeObj.name,t):!1}function o(e,t,n){function r(e){return"undefined"===e?0:"Object"===e?1:i(e,n.getAllTypes())?2:3}var o=e.name,a=t.name;if(o||("NullLiteral"===e.type||"UndefinedLiteral"===e.type||"VoidLiteral"===e.type)&&(o="undefined"),!a)return!1;var s=r(o);return 0===s?"undefined"!==a:1===s?"undefined"!==a&&"Object"!==a:2===s?"undefined"!==a&&"Object"!==a&&!i(a,n.getAllTypes()):!1}var a=r("Object"),s="$$__JUST_DOTS__$$",u=/\$\$__JUST_DOTS__\$\$/g,c=/:undefined|:\{\}/g,l=function(e,t,r){this._typeObj=n(e),this.range=t,this.path=r};Object.defineProperty(l.prototype,"typeObj",{set:function(e){var t=e;"string"==typeof t&&(t=n(t)),this._typeObj=t},get:function(){return this._typeObj}}),l.revive=function(e){var t=new l;for(var n in e)e.hasOwnProperty(n)&&("typeSig"===n?t.typeObj=e[n]:t[n]=e[n]);return t};var p="gen~",f="~proto".length;return{Definition:l,GEN_NAME:p,isArrayType:function(e){return"ArrayType"===e.type||"TypeApplication"===e.type},isFunctionOrConstructor:function(e){return"FunctionType"===e.type},isPrototypeName:function(e){return"~proto"===e.substr(-f,f)},parameterizeArray:function(e){return{type:"ArrayType",elements:[e]}},createFunctionType:function(e,t,n){var r={type:"FunctionType",params:e,result:t};return n&&(r.params=r.params||[],r.params.push({type:"ParameterType",name:"new",expression:t})),r},extractArrayParameterType:function(e){var t;if("TypeApplication"===e.type){if("Array"!==e.expression.name)return e.expression;t=e.applications}else{if("ArrayType"!==e.type)return e;t=e.elements}return t.length>0?t[0]:a},extractReturnType:function(e){return e.result||("FunctionType"===e.type?this.UNDEFINED_TYPE:e)},parseJSDocComment:function(e){var n={};if(n.params={},e){var r=e.value;if(!r)return n;try{var i=doctrine.parse("/*"+r+"*/",{unwrap:!0,tags:["param","type","return"]}),o=i.tags;if(o)for(var a=0;a<o.length;a++)switch(o[a].title){case"typedef":case"define":case"type":n.type=o[a].type;break;case"return":n.rturn=o[a].type;break;case"param":var s=o[a].name;"["===s.charAt(0)&&"]"===s.charAt(s.length-1)&&(s=s.substring(1,s.length-1)),n.params[s]=o[a].type}}catch(u){t.error(u.message,"CONTENT_ASSIST"),t.error(u.stack,"CONTENT_ASSIST"),t.error("Error parsing doc comment:\n"+(e&&e.value),"CONTENT_ASSIST")}}return n},convertJsDocType:function(e,t,n,r){if("number"!=typeof r&&(r=0),!e)return a;var i=this,o=e.name,u=t.getAllTypes();switch(e.type){case"NullableLiteral":case"AllLiteral":case"NullLiteral":case"UndefinedLiteral":case"VoidLiteral":return{type:e.type};case"UnionType":return{type:e.type,elements:e.elements&&Array.isArray(e.elements)?e.elements.map(function(e){return i.convertJsDocType(e,t,n,r)}):[]};case"RestType":return{type:e.type,expression:i.convertJsDocType(e.expression,t,n,r)};case"ArrayType":return{type:e.type,elements:e.elements&&Array.isArray(e.elements)?e.elements.map(function(e){return i.convertJsDocType(e,t,n,r)}):[]};case"FunctionType":var c={type:e.type,params:e.params&&Array.isArray(e.params)?e.params.map(function(e){return i.convertJsDocType(e,t,n,r)}):[]};return e.result&&(c.result=r>1&&"FunctionType"===e.result.type?{type:"NameExpression",name:s}:i.convertJsDocType(e.result,t,n,r)),c;case"TypeApplication":var l={type:e.type,expression:i.convertJsDocType(e.expression,t,n,r)};return e.applications&&(l.applications=e.applications.map(function(e){return i.convertJsDocType(e,t,n,r)})),l;case"ParameterType":return{type:e.type,name:o,expression:e.expression?i.convertJsDocType(e.expression,t,n,r):null};case"NonNullableType":case"OptionalType":case"NullableType":return{prefix:!0,type:e.type,expression:i.convertJsDocType(e.expression,t,n,r)};case"NameExpression":if(n&&t.isSyntheticName(o)){var p=u[o];if(p.$$fntype)return i.convertJsDocType(p.$$fntype,t,n,r);var f=[];return Object.keys(p).forEach(function(e){if("$$proto"!==e&&"$$isBuiltin"!==e){var o=p[e],a=r>0&&"NameExpression"===o.typeObj.type&&t.isSyntheticName(o.typeObj.name)&&!u[o.typeObj.name].$$fntype?{type:"NameExpression",name:s}:i.convertJsDocType(o.typeObj,t,n,r+1);f.push({type:"FieldType",key:e,value:a})}}),{type:"RecordType",fields:f}}if(u[o])return{type:"NameExpression",name:o};var d=o[0].toUpperCase()+o.substring(1);return u[d]?{type:"NameExpression",name:d}:a;case"FieldType":return{type:e.type,key:e.key,value:i.convertJsDocType(e.value,t,n,r)};case"RecordType":if(n)return{type:e.type,params:e.fields.map(function(e){return i.convertJsDocType(e,t,n,r+1)})};for(var h={},m=0;m<e.fields.length;m++){var g=e.fields[m],v=i.convertJsDocType(g,t,n,r+1);h[v.key]=v.value}var y=t.newFleetingObject();for(var _ in h)h.hasOwnProperty(_)&&t.addVariable(_,y.name,h[_]);return y}return a},createNameType:r,createParamType:function(e,t){return{type:"ParameterType",name:e,expression:t}},convertToSimpleTypeName:function(e){switch(e.type){case"NullableLiteral":case"AllLiteral":case"NullLiteral":return"Object";case"UndefinedLiteral":case"VoidLiteral":return"undefined";case"NameExpression":return e.name;case"TypeApplication":case"ArrayType":return"Array";case"FunctionType":return"Function";case"UnionType":return e.expressions&&e.expressions.length>0?this.convertToSimpleTypeName(e.expressions[0]):"Object";case"RecordType":return"Object";case"FieldType":return this.convertToSimpleTypeName(e.value);case"NonNullableType":case"OptionalType":case"NullableType":case"ParameterType":return this.convertToSimpleTypeName(e.expression)}},styleAsProperty:function(e,t){return t?'<span style="color: blue;font-weight:bold;">'+e+"</span>":e},styleAsType:function(e,t){return t?'<span style="color: black;">'+e+"</span>":e},styleAsOther:function(e,t){return t?'<span style="font-weight:bold; color:purple;">'+e+"</span>":e},createReadableType:function(e,t,n,r,i){if(n){if(e=this.convertJsDocType(e,t,!0),i)return this.convertToHtml(e,0);var o=doctrine.type.stringify(e,{compact:!0});return o=o.replace(u,"{...}"),o=o.replace(c,""),o=this.limitReadableLength(o,80)}return e=this.extractReturnType(e),this.createReadableType(e,t,!0,r,i)},limitReadableLength:function(e,t){if(e&&e.length>t&&0==e.indexOf("{")&&e.lastIndexOf("}")==e.length-1){for(var n="",r=e.indexOf(",");r>0&&!(n.length+r>t);)n+=e.substring(0,r+1),e=e.substring(r+1),r=e.indexOf(",");return n+="...}"}return e},convertToHtml:function(t,n){var r,i=this,o=[];switch(n=n||0,t.type){case"NullableLiteral":return this.styleAsType("?",!0);case"AllLiteral":return this.styleAsType("*",!0);case"NullLiteral":return this.styleAsType("null",!0);case"UndefinedLiteral":return this.styleAsType("undefined",!0);case"VoidLiteral":return this.styleAsType("void",!0);case"NameExpression":var a=t.name===s?"{...}":t.name;return this.styleAsType(a,!0);case"UnionType":return o=[],t.expressions&&t.expressions.forEach(function(e){o.push(i.convertToHtml(e,n+1))}),"( "+o.join(", ")+" )";case"TypeApplication":t.applications&&t.applications.forEach(function(e){o.push(i.convertToHtml(e,n))});var u="Array"===t.expression.name;return u||(r=this.convertToHtml(t.expression,n)+".<"),r+=o.join(","),r+=u?"[]":">";case"ArrayType":return t.elements&&t.elements.forEach(function(e){o.push(i.convertToHtml(e,n+1))}),o.join(", ")+"[]";case"NonNullableType":return"!"+this.convertToHtml(t.expression,n);case"OptionalType":return this.convertToHtml(t.expression,n)+"=";case"NullableType":return"?"+this.convertToHtml(t.expression,n);case"RestType":return"..."+this.convertToHtml(t.expression,n);case"ParameterType":return this.styleAsProperty(t.name,!0)+(t.expression.name===s?"":":"+this.convertToHtml(t.expression,n));case"FunctionType":var c,l=!1;t.params&&t.params.forEach(function(e){"this"===e.name?(l=!0,c=e.expression):"new"===e.name?(l=!0,c=e.expression):o.push(i.convertToHtml(e,n+1))}),!c&&t.result&&(c=t.result);var p;return p=c&&"UndefinedLiteral"!==c.type&&"undefined"!==c.name?this.convertToHtml(c,n+1):"",r=this.styleAsOther(l?"new ":"function",!0),l&&(r+=p),r+="("+o.join(",")+")",!l&&p&&(r+="&rarr;"+p),r;case"RecordType":return t.fields&&t.fields.length>0?(t.fields.forEach(function(t){o.push(e.repeatChar("&nbsp;&nbsp;",n+1)+i.convertToHtml(t,n+1))}),"{<br/>"+o.join(",<br/>")+"<br/>"+e.repeatChar("&nbsp;&nbsp;",n)+"}"):"{ }";case"FieldType":return this.styleAsProperty(t.key,!0)+":"+this.convertToHtml(t.value,n)}},leftTypeIsMoreGeneral:o,isEmpty:i,ensureTypeObject:n,OBJECT_TYPE:a,UNDEFINED_TYPE:r("undefined"),NUMBER_TYPE:r("Number"),BOOLEAN_TYPE:r("Boolean"),STRING_TYPE:r("String"),ARRAY_TYPE:r("Array"),FUNCTION_TYPE:r("Function")}}),define("sap/watt/lib/orion/javascript/esprima/indexFiles/ecma5Index",[],function(){return{"!name":"ecma5","!define":{Error:{name:{"!type":"String"},message:{"!type":"String"},stack:{"!type":"String"},"!proto":"Object"},Error_obj:{"!type":"fn(err?: Error)",prototype:"Error"},RegExp:{source:{"!type":"String"},global:{"!type":"Boolean"},ignoreCase:{"!type":"Boolean"},multiline:{"!type":"Boolean"},lastIndex:{"!type":"Boolean"},exec:{"!type":"fn(str: String) -> [String]"},test:{"!type":"fn(str: String) -> Boolean"},"!proto":"Object"},RegExp_obj:{"!type":"fn(val?: RegExp)",prototype:"RegExp"},Date:{toDateString:{"!type":"fn() -> String"},toTimeString:{"!type":"fn() -> String"},toUTCString:{"!type":"fn() -> String"},toISOString:{"!type":"fn() -> String"},toJSON:{"!type":"fn(key: String) -> Object"},toLocaleDateString:{"!type":"fn() -> String"},toLocaleTimeString:{"!type":"fn() -> String"},getTime:{"!type":"fn() -> Number"},getTimezoneOffset:{"!type":"fn() -> Number"},getDay:{"!type":"fn() -> Number"},getUTCDay:{"!type":"fn() -> Number"},getFullYear:{"!type":"fn() -> Number"},getUTCFullYear:{"!type":"fn() -> Number"},getHours:{"!type":"fn() -> Number"},getUTCHours:{"!type":"fn() -> Number"},getMinutes:{"!type":"fn() -> Number"},getUTCMinutes:{"!type":"fn() -> Number"},getSeconds:{"!type":"fn() -> Number"},getUTCSeconds:{"!type":"fn() -> Number"},getMilliseconds:{"!type":"fn() -> Number"},getUTCMilliseconds:{"!type":"fn() -> Number"},getMonth:{"!type":"fn() -> Number"},getUTCMonth:{"!type":"fn() -> Number"},getDate:{"!type":"fn() -> Number"},getUTCDate:{"!type":"fn() -> Number"},setTime:{"!type":"fn() -> Number"},setTimezoneOffset:{"!type":"fn() -> Number"},setDay:{"!type":"fn(dayOfWeek: Number) -> Number"},setUTCDay:{"!type":"fn(dayOfWeek: Number) -> Number"},setFullYear:{"!type":"fn(year: Number, month?: Number, date?: Number) -> Number"},setUTCFullYear:{"!type":"fn(year: Number, month?: Number, date?: Number) -> Number"},setHours:{"!type":"fn(hour: Number, min?: Number, sec?: Number, ms?: Number) -> Number"},setUTCHours:{"!type":"fn(hour: Number, min?: Number, sec?: Number, ms?: Number) -> Number"},setMinutes:{"!type":"fn(min: Number, sec?: Number, ms?: Number) -> Number"},setUTCMinutes:{"!type":"fn(min: Number, sec?: Number, ms?: Number) -> Number"},setSeconds:{"!type":"fn(sec: Number, ms?: Number) -> Number"},setUTCSeconds:{"!type":"fn(sec: Number, ms?: Number) -> Number"},setMilliseconds:{"!type":"fn(ms: Number) -> Number"},setUTCMilliseconds:{"!type":"fn(ms: Number) -> Number"},setMonth:{"!type":"fn(month: Number, date?: Number) -> Number"},setUTCMonth:{"!type":"fn(month: Number, date?: Number) -> Number"},setDate:{"!type":"fn(date: Number) -> Number"},setUTCDate:{"!type":"fn(date: Number) -> Number"},"!proto":"Object"},Date_obj:{"!type":"fn(val?: Date)",now:{"!type":"fn() -> Number"},parse:{"!type":"fn(dateString: String) -> Number"},UTC:{"!type":"fn(year: Number, month: Number, date?: Number, hrs?: Number, min?:Number, sec?:Number, ms?:Number) -> Number"},prototype:"Date"},Boolean:{"!proto":"Object"},Boolean_obj:{"!type":"fn(val?: Boolean)",prototype:"Boolean"},Array:{concat:{"!type":"fn(first: Array, rest: Array) -> Array"},join:{"!type":"fn(separator: Object) -> String"},length:{"!type":"Number"},pop:{"!type":"fn() -> Object"},push:{"!type":"fn(vals: Object) -> Object"},reverse:{"!type":"fn() -> Array"},shift:{"!type":"fn() -> Object"},slice:{"!type":"fn(start: Number, deleteCount: Number, items: Object) -> Array"},splice:{"!type":"fn(start: Number, end: Number) -> Array"},sort:{"!type":"fn(sorter?: Object) -> Array"},unshift:{"!type":"fn(items: Object) -> Number"},indexOf:{"!type":"fn(searchElement: Object, fromIndex?: Number) -> Number"},lastIndexOf:{"!type":"fn(searchElement: Object, fromIndex?: Number) -> Number"},every:{"!type":"fn(callbackFn: fn(elt: Object), thisArg?: Object) -> Boolean"},some:{"!type":"fn(callbackFn: fn(elt: Object), thisArg?: Object) -> Boolean"},forEach:{"!type":"fn(callbackFn: fn(elt: Object), thisArg?: Object) -> Object"},map:{"!type":"fn(callbackFn: fn(elt: Object) -> Object, thisArg?: Object) -> Array"},filter:{"!type":"fn(callbackFn: fn(elt: Object) -> Boolean, thisArg?: Object) -> Array"},reduce:{"!type":"fn(callbackFn: fn(elt: Object) -> Object, initialValue?: Object) -> Array"},reduceRight:{"!type":"fn(callbackFn: fn(elt: Object) -> Object, initialValue?: Object) -> Array"},"!proto":"Object"},Array_obj:{"!type":"fn(val?: Array)",isArray:{"!type":"fn(obj: Object) -> Boolean"},prototype:"Array"},Function:{apply:{"!type":"fn(func: fn(), argArray?: Array) -> Object"},arguments:{"!type":"Arguments"},bind:{"!type":"fn(func: fn(), args: Object) -> Object"},call:{"!type":"fn(func: fn(), args: Object) -> Object"},caller:{"!type":"Function"},length:{"!type":"Number"},name:{"!type":"String"},"!proto":"Object"},Function_obj:{"!type":"fn()",prototype:"Function"},Arguments:{callee:{"!type":"Function"},length:{"!type":"Number"},"!proto":"Object"},JSON:{parse:{"!type":"fn(str: String) -> Object"},stringify:{"!type":"fn(json: Object) -> String"},"!proto":"Object"},Math:{E:{"!type":"Number"},LN2:{"!type":"Number"},LN10:{"!type":"Number"},LOG2E:{"!type":"Number"},LOG10E:{"!type":"Number"},PI:{"!type":"Number"},SQRT1_2:{"!type":"Number"},SQRT2:{"!type":"Number"},abs:{"!type":"fn(val: Number) -> Number"},acos:{"!type":"fn(val: Number) -> Number"},asin:{"!type":"fn(val: Number) -> Number"},atan:{"!type":"fn(val: Number) -> Number"},atan2:{"!type":"fn(val1: Number, val2: Number) -> Number"},ceil:{"!type":"fn(val: Number) -> Number"},cos:{"!type":"fn(val: Number) -> Number"},exp:{"!type":"fn(val: Number) -> Number"},floor:{"!type":"fn(val: Number) -> Number"},log:{"!type":"fn(val: Number) -> Number"},max:{"!type":"fn(val1: Number, val2: Number) -> Number"},min:{"!type":"fn(val1: Number, val2: Number) -> Number"},pow:{"!type":"fn(x: Number, y: Number) -> Number"},random:{"!type":"fn() -> Number"},round:{"!type":"fn(val: Number) -> Number"},sin:{"!type":"fn(val: Number) -> Number"},sqrt:{"!type":"fn(val: Number) -> Number"},tan:{"!type":"fn(val: Number) -> Number"},"!proto":"Object"},Number:{toExponential:{"!type":"fn(digits: Number) -> String"},toFixed:{"!type":"fn(digits: Number) -> String"},toPrecision:{"!type":"fn(digits: Number) -> String"},"!proto":"Object"},Number_obj:{"!type":"fn(val?: Number)",MAX_VALUE:"Number",MIN_VALUE:"Number",prototype:"Number"},Object:{toString:{"!type":"fn() -> String"},toLocaleString:{"!type":"fn() -> String"},valueOf:{"!type":"fn() -> Object"},hasOwnProperty:{"!type":"fn(property: String) -> Boolean"},isPrototypeOf:{"!type":"fn(object: Object) -> Boolean"},propertyIsEnumerable:{"!type":"fn(property: String) -> Boolean"},prototype:{"!type":"Object"}},Object_obj:{"!type":"fn(val?: Object)",create:{"!type":"fn(proto: Object, propertiesObject?: Object) -> Object"},defineProperty:{"!type":"fn(obj: Object, prop: String, descriptor: Object) -> Object"},defineProperties:{"!type":"fn(obj: Object, props: Object) -> Object"},getOwnPropertyDescriptor:{"!type":"fn(obj: Object, prop: String) -> Object"},keys:{"!type":"fn(obj: Object) -> Array"},getOwnPropertyNames:{"!type":"fn(obj: Object) -> Array"},getPrototypeOf:{"!type":"fn(obj: Object) -> Object"},prototype:"Object"},String:{charAt:{"!type":"fn(index: Number) -> String"},charCodeAt:{"!type":"fn(index: Number) -> Number"},concat:{"!type":"fn(str: String) -> String"},indexOf:{"!type":"fn(searchString: String, start?: Number) -> Number"},lastIndexOf:{"!type":"fn(searchString: String, start?: Number) -> Number"},length:{"!type":"Number"},localeCompare:{"!type":"fn(str: String) -> Number"},match:{"!type":"fn(regexp: String) -> Boolean"},replace:{"!type":"fn(searchValue: String, replaceValue: String) -> String"},search:{"!type":"fn(regexp: String) -> String"},slice:{"!type":"fn(start: Number, end: Number) -> String"},split:{"!type":"fn(separator: String, limit?: Number) -> [String]"},substring:{"!type":"fn(start: Number, end?: Number) -> String"},toLocaleUpperCase:{"!type":"fn() -> String"},toLowerCase:{"!type":"fn() -> String"},toLocaleLowerCase:{"!type":"fn() -> String"},toUpperCase:{"!type":"fn() -> String"},trim:{"!type":"fn() -> String"},"!proto":"Object"},String_obj:{"!type":"fn(val?: Object)",fromCharCode:{"!type":"fn(num1: Number, rest: Number) -> String"},prototype:"String","!proto":"Object"}},decodeURI:{"!type":"fn(uri: String) -> String"},encodeURI:{"!type":"fn(uri: String) -> String"},eval:{"!type":"fn(toEval: String) -> Object"},parseInt:{"!type":"fn(str: String, radix?: Number) -> Number"},parseFloat:{"!type":"fn(str: String, radix?: Number) -> Number"},Math:{"!type":"Math"},JSON:{"!type":"JSON"},Object:"Object_obj",Function:"Function_obj",Array:"Array_obj",Boolean:"Boolean_obj",Number:"Number_obj",Date:"Date_obj",RegExp:"RegExp_obj",String:"String_obj",Error:"Error_obj",undefined:{"!type":"?"},isNaN:{"!type":"fn(num: Number) -> Boolean"},isFinite:{"!type":"fn(num: Number) -> Boolean"},NaN:{"!type":"number"},Infinity:{"!type":"number"},decodeURIComponent:{"!type":"fn(encodedURIString: String) -> String"},encodeURIComponent:{"!type":"fn(decodedURIString: String) -> String"},"this":{"!type":"<top>"}}}),define("sap/watt/lib/orion/javascript/esprima/indexFiles/browserIndex",[],function(){return{"!name":"browser","!define":{WebSocket:{"!proto":"Object",onreadystatechange:"EventHandler",onopen:"EventHandler",onerror:"EventHandler",onclose:"EventHandler",readyState:"Number",extensions:"String",protocol:"String",close:{"!type":"fn(reason?: Object)"},send:{"!type":"fn(data: String)"}},WebSocket_obj:{"!type":"fn(url: String, protocols: String)",prototype:"WebSocket"},EventHandler:{"!proto":"Object"},XMLHttpRequest:{"!proto":"Object",onreadystatechange:"EventHandler",open:{"!type":"fn(method: String, url: String, async?: Boolean, user?: String, password?: String)"},setRequestHeader:{"!type":"fn(header: String, value: String)"},timeout:"Number",withCredentials:"Boolean",upload:"Object",send:{"!type":"fn(data?: String)"},abort:{"!type":"fn()"},getResponseHeader:{"!type":"fn(header: String) -> String"},getAllResponseHeaders:{"!type":"fn() -> String"},overrideMimeType:"Object",responseType:"Object",readyState:"Number",response:"Object",responseText:"String",responseXML:"Document",status:"Number",statusText:"String"},XHR_obj:{"!type":"fn()",prototype:"XMLHttpRequest"},Worker_proto:{"!proto":"Object",terminate:{"!type":"fn()"},postMessage:{"!type":"fn(message: String, transfer?: Object)"},onmessage:{"!type":"fn()"}},Worker_obj:{"!type":"fn(url: String)",prototype:"Worker_proto"},HTMLOptionElement:{"!proto":"HTMLElement"},HTMLElement:{"!proto":"Element",id:"String",title:"String",lang:"String",dir:"String",className:"String"},HTMLImageElement:{"!proto":"HTMLElement"},Event:{"!proto":"Object",bubbles:"Boolean",cancelable:"Boolean",currentTarget:"Object",defaultPrevented:"Boolean",eventPhase:"Number",explicitOriginalTarget:"Object",originalTarget:"Object",target:"Object",timeStamp:"Number",isTrusted:"Boolean",initEvent:{"!type":"fn(type: String, bubbles: Boolean, cancelable: Boolean)"},preventDefault:{"!type":"fn()"},stopImmediatePropagation:{"!type":"fn()"},stopPropagation:{"!type":"fn()"}},Event_obj:{"!type":"fn(type: String)",prototype:"Event"},MediaQueryList:{"!proto":"Object"},Selection:{"!proto":"Object",anchorNode:"Node",anchorOffset:"Number",focusNode:"Node",focusOffset:"Number",rangeCount:"Number",isCollapsed:"Boolean",collapse:{"!type":"fn(node: Node, offset: Number)"},collapseToStart:{"!type":"fn()"},collapseToEnd:{"!type":"fn()"},extend:{"!type":"fn(node: Node, offset: Number)"},selectAllChildren:{"!type":"fn(node: Node)"},deleteFromDocument:{"!type":"fn()"},getRangeAt:{"!type":"fn(index: Number) -> Range"},addRange:{"!type":"fn(range: Range)"},removeRange:{"!type":"fn(range: Range)"},removeAllRanges:{"!type":"fn()"}},Range:{"!proto":"Object",startContainer:"Node",startOffset:"Number",endContainer:"Node",endOffset:"Number",collapsed:"Boolean",commonAncestorContainer:"Node",setStart:{"!type":"fn(refNode: Node, offset: Number)"},setEnd:{"!type":"fn(refNode: Node, offset: Number)"},setStartBefore:{"!type":"fn(refNode: Node)"},setStartAfter:{"!type":"fn(refNode: Node)"},setEndBefore:{"!type":"fn(refNode: Node)"},setEndAfter:{"!type":"fn(refNode: Node)"},collapse:{"!type":"fn(toStart: Node)"},selectNode:{"!type":"fn(refNode: Node)"},selectNodeContents:{"!type":"fn(refNode: Node)"},compareBoundaryPoints:{"!type":"fn(how: Object, sourceRange: Object) -> Number"},deleteContents:{"!type":"fn()"},extractContents:{"!type":"fn() -> DocumentFragment"},cloneContents:{"!type":"fn() -> DocumentFragment"},insertNode:{"!type":"fn(node: Node)"},surroundContents:{"!type":"fn(nodeParent: Node)"},cloneRange:{"!type":"fn() -> Range"},detach:{"!type":"fn()"},isPointInRange:{"!type":"fn(node: Node, offset: Number) -> Boolean"},comparePoint:{"!type":"fn(node: Node, offset: Number) -> Number"},intersectsNode:{"!type":"fn(node: Node) -> Boolean"}},DocumentFragment:{"!proto":"Node",prepend:{"!type":"fn(nodes: Node)"},append:{"!type":"fn(nodes: Node)"}},CSSStyleDeclaration:{"!proto":"Object"},Node:{"!proto":"Object",nodeType:"Number",nodeName:"String",baseURI:"String",ownerDocument:"Document",parentNode:"Node",parentElement:"Element",childNodes:"NodeList",firstChild:"Node",lastChild:"Node",previousSibling:"Node",nextSibling:"Node",nodeValue:"String",textContent:"String",hasChildNodes:{"!type":"fn() -> Boolean"},compareDocumentPosition:{"!type":"fn(other: Node) -> Number"},contains:{"!type":"fn(other: Node) -> Boolean"},insertBefore:{"!type":"fn(child: Node) -> Node"},appendChild:{"!type":"fn(node: Node) -> Node"},replaceChild:{"!type":"fn(child: Node) -> Node"},removeChild:{"!type":"fn(child: Node) -> Node"},normalize:{"!type":"fn()"},cloneNode:{"!type":"fn(deep?: Boolean) -> Node"},isEqualNode:{"!type":"fn(node: Node) -> Boolean"},lookupPrefix:{"!type":"fn(namespace: String) -> String"},lookupNamespaceURI:{"!type":"fn(prefix: String) -> String"},isDefaultNamespace:{"!type":"fn(namespace: String) -> Boolean"}},Node_obj:{"!type":"fn()",prototype:"Node"},NodeList:{"!proto":"Object",item:"Node",length:"Number"},Screen:{"!proto":"Object",availTop:"Number",availLeft:"Number",availHeight:"Number",availWidth:"Number",colorDepth:"Number",height:"Number",left:"Number",pixelDepth:"Number",top:"Number",width:"Number"},Performance:{"!proto":"Object"},MimeTypeArray:{length:"Number",item:{"!type":"fn(index: Number) -> MimeType"},namedItem:{"!type":"fn(name: String) -> MimeType"}},MimeType:{description:"String",suffixes:"String",type:"String",enabledPlugin:"Plugin"},Plugin:{description:"String",fileName:"String",length:"Number",name:"String",item:{"!type":"fn(index: Number) -> MimeType"},namedItem:{"!type":"fn(name: String) -> MimeType"}},Connection:{bandwidth:"Number",metered:"Boolean",onchange:"Function"},Storage:{"!proto":"Object",length:"Number",key:{"!type":"fn(idx: Number) -> String"},getItem:{"!type":"fn(key: String) -> String"},setItem:{"!type":"fn(key: String, value: String)"},removeItem:{"!type":"fn(key: String)"},clear:{"!type":"fn()"}},BarInfo:{"!proto":"Object",visible:"Boolean"},Location:{"!proto":"Object",assign:{"!type":"fn(url: String)"},replace:{"!type":"fn(url: String)"},reload:{"!type":"fn()"},href:"String",protocol:"String",host:"String",hostname:"String",port:"String",pathname:"String",search:"String",hash:"String"},History:{"!proto":"Object",length:"Number",state:"Object",go:{"!type":"fn(delta: Number)"},back:{"!type":"fn()"},forward:{"!type":"fn()"},pushState:{"!type":"fn(data: Object, title: String, url: String)"},replaceState:{"!type":"fn(data: Object, title: String, url: String)"}},Element:{"!proto":"Node",namespaceURI:"String",prefix:"String",localName:"String",tagName:"String",id:"String",className:"String",classList:"DOMTokenList",attributes:"Array",childElementCount:"Number",children:"HTMLCollection",firstElementChild:"Element",lastElementChild:"Element",previousElementSibling:"Element",nextElementSibling:"Element",getAttribute:{"!type":"fn(name: String) -> String"},getAttributeNS:{"!type":"fn(namespace: String, localname: String) -> String"},setAttribute:{"!type":"fn(name: String, value: Object)"},setAttributeNS:{"!type":"fn(namespace: String, name: String, value: Object)"},removeAttribute:{"!type":"fn(name: String)"},removeAttributeNS:{"!type":"fn(namespace: String, localname: String)"},hasAttribute:{"!type":"fn(name: String) -> Boolean"},hasAttributeNS:{"!type":"fn(namespace: String, localname: String) -> Boolean"},getElementsByTagName:{"!type":"fn(localName: String) -> HTMLCollection"},getElementsByTagNameNS:{"!type":"fn(namespace: String, localName: String) -> HTMLCollection"},getElementsByClassName:{"!type":"fn(classname: String) -> HTMLCollection"},prepend:{"!type":"fn(nodes: Node)"},append:{"!type":"fn(nodes: Node)"},before:{"!type":"fn(nodes: Node)"},after:{"!type":"fn(nodes: Node)"},replace:{"!type":"fn(nodes: Node)"},remove:{"!type":"fn()"}},HTMLCollection:{"!proto":"Object",length:"Number",item:{"!type":"fn(index: Number) -> Element"},namedItem:{"!type":"fn(name: String) -> Element"}},DOMTokenList:{"!proto":"Object",length:"Number",item:{"!type":"fn(index: Number) -> String"},contains:{"!type":"fn(token: String) -> Boolean"},add:{"!type":"fn(token: String)"},remove:{"!type":"fn(token: String)"},toggle:{"!type":"fn(token: String) -> Boolean"}},Document:{"!proto":"Node",implementation:"DOMImplementation",URL:"String",documentURI:"String",compatMode:"String",characterSet:"String",contentType:"String",doctype:"DocumentType",documentElement:"Element",getElementsByTagName:{"!type":"fn(localName: String) -> HTMLCollection"},getElementsByTagNameNS:{"!type":"fn(namespace: String, localName: String) -> HTMLCollection"},getElementsByClassName:{"!type":"fn(classNames: String) -> HTMLCollection"},getElementById:{"!type":"fn(elementId: String) -> Element"},createElement:{"!type":"fn(elementId: String) -> Element"},createElementNS:{"!type":"fn(namespace: String, qualifiedName: String) -> Element"},createDocumentFragment:{"!type":"fn() -> DocumentFragment"},createTextNode:{"!type":"fn(data: String) -> Text"},createComment:{"!type":"fn(data: String) -> Comment"},createProcessingInstruction:{"!type":"fn(target: String, data: String) -> ProcessingInstruction"},importNode:{"!type":"fn(node: Node, deep?: Boolean) -> Node"},adoptNode:{"!type":"fn(node: Node) -> Node"},createEvent:{"!type":"fn(eventInterfaceName: String) -> Event"},createRange:{"!type":"fn() -> Range"},createNodeIterator:{"!type":"fn(root: Node, whatToShow?: Object, filter?: Object) -> NodeIterator"},createTreeWalker:{"!type":"fn(root: Node, whatToShow?: Object, filter?: Object) -> TreeWalker"}},TreeWalker:{"!proto":"Object"},NodeIterator:{"!proto":"Object"},ProcessingInstruction:{"!proto":"Node"},Comment:{"!proto":"Node"},Text:{"!proto":"Node"},DocumentType:{"!proto":"Node",name:"String",publicId:"String",systemId:"String",before:{"!type":"fn(nodeOrString: Node)"},after:{"!type":"fn(nodeOrString: Node)"},replace:{"!type":"fn(nodeOrString: Node)"},remove:{"!type":"fn()"}},DOMImplementation:{"!proto":"Object",createDocumentType:{"!type":"fn(qualifiedName: String, publicId: String, systemId: String) -> DocumentType"},createDocument:{"!type":"fn(namespace: String, qualifiedName: String, doctype: String) -> Document"},createHTMLDocument:{"!type":"fn(title: String) -> Document"},hasFeature:{"!type":"fn(feature: String) -> Boolean"}},Console:{debug:{"!type":"fn(msg: String)"},dir:{"!type":"fn(obj: Object)"},error:{"!type":"fn(msg: String)"},group:{"!type":"fn()"},groupCollapsed:{"!type":"fn()"},groupEnd:{"!type":"fn()"},info:{"!type":"fn(msg: String)"},log:{"!type":"fn(msg: String)"},time:{"!type":"fn(timerName: String)"},timeEnd:{"!type":"fn(timerName: String)"},trace:{"!type":"fn()"},warn:{"!type":"fn(msg: String)"}},DOMApplicationCache:{"!proto":"Object"}},"this":"<top>",applicationCache:"DOMApplicationCache",closed:"Boolean",console:"Console",defaultStatus:"String",document:"Document",frameElement:"Element",frames:"Array",history:"History",innerHeight:"Number",innerWidth:"Number",length:"Number",location:"Location",locationbar:"BarInfo",localStorage:"Storage",menubar:"BarInfo",name:"String",opener:"<top>",outerHeight:"Number",outerWidth:"Number",pageXOffset:"Number",pageYOffset:"Number",parent:"<top>",performance:"Performance",personalbar:"BarInfo",screen:"Screen",screenX:"Number",screenY:"Number",scrollbars:"BarInfo",scrollMaxX:"Number",scrollMaxY:"Number",scrollX:"Number",scrollY:"Number",self:"<top>",sessionStorage:"Storage",sidebar:"BarInfo",status:"String",statusbar:"BarInfo",toolbar:"BarInfo",top:"<top>",window:"<top>",addEventListener:{"!type":"fn()"},alert:{"!type":"fn(msg: String)"},atob:{"!type":"fn(val: Object) -> String"},back:{"!type":"fn()"},blur:{"!type":"fn()"},btoa:{"!type":"fn(val: Object) -> String"},clearInterval:{"!type":"fn(t: Number)"},clearTimeout:{"!type":"fn(t: Number)"},close:{"!type":"fn()"},confirm:{"!type":"fn(msg: String) -> Boolean"},dispatchEvent:{"!type":"fn(domnode: Node)"},dump:{"!type":"fn(msg: String)"},escape:{"!type":"fn(str: String) -> String"},find:{"!type":"fn(str: String) -> Boolean"},focus:{"!type":"fn()"},forward:{"!type":"fn()"},getAttention:{"!type":"fn()"},getComputedStyle:{"!type":"fn(domnode: Node) -> CSSStyleDeclaration"},getSelection:{"!type":"fn() -> Selection"},home:{"!type":"fn()"},matchMedia:{"!type":"fn(query: Object) -> MediaQueryList"},moveBy:{"!type":"fn(deltaX: Number, deltaY: Number)"},moveTo:{"!type":"fn(x: Number, y: Number)"},open:{"!type":"fn(strUrl: String, strWindowName: String, strWindowFeatures?: String) -> <top>"},openDialog:{"!type":"fn(strUrl: String, strWindowName: String, strWindowFeatures: String, args?: String) -> <top>"},postMessage:{"!type":"fn(message: String, targetOrigin: String)"},print:{"!type":"fn()"},prompt:{"!type":"fn(message: String) -> String"},removeEventListener:{"!type":"fn(type: String, listener: Object, useCapture?: Boolean)"},resizeBy:{"!type":"fn(deltaX: Number, deltaY: Number)"},resizeTo:{"!type":"fn(x: Number, y: Number)"},scroll:{"!type":"fn(x: Number, y: Number)"},scrollBy:{"!type":"fn(deltaX: Number, deltaY: Number)"},scrollByLines:{"!type":"fn(lines: Number)"},scrollByPages:{"!type":"fn(pages: Number)"},scrollTo:{"!type":"fn(x: Number, y: Number)"},setCursor:{"!type":"fn(cursor: String)"},setInterval:{"!type":"fn(callback: Function, ms: Number) -> Number"},setTimeout:{"!type":"fn(callback: Function, ms: Number) -> Number"},sizeToContent:{"!type":"fn()"},stop:{"!type":"fn()"},unescape:{"!type":"fn(str: String) -> String"},updateCommands:{"!type":"fn(cmdName: String)"},onabort:{"!type":"fn(event: Event)"},onbeforeunload:{"!type":"fn(event: Event)"},onblur:{"!type":"fn(event: Event)"},onchange:{"!type":"fn(event: Event)"},onclick:{"!type":"fn(event: Event)"},onclose:{"!type":"fn(event: Event)"},oncontextmenu:{"!type":"fn(event: Event)"},ondevicemotion:{"!type":"fn(event: Event)"},ondeviceorientation:{"!type":"fn(event: Event)"},ondragdrop:{"!type":"fn(event: Event)"},onerror:{"!type":"fn(event: Event)"},onfocus:{"!type":"fn(event: Event)"},onhashchange:{"!type":"fn(event: Event)"},onkeydown:{"!type":"fn(event: Event)"},onkeypress:{"!type":"fn(event: Event)"},onkeyup:{"!type":"fn(event: Event)"},onload:{"!type":"fn(event: Event)"},onmousedown:{"!type":"fn(event: Event)"},onmousemove:{"!type":"fn(event: Event)"},onmouseout:{"!type":"fn(event: Event)"},onmouseover:{"!type":"fn(event: Event)"},onmouseup:{"!type":"fn(event: Event)"},onpaint:{"!type":"fn(event: Event)"},onpopstate:{"!type":"fn(event: Event)"},onreset:{"!type":"fn(event: Event)"},onresize:{"!type":"fn(event: Event)"},onscroll:{"!type":"fn(event: Event)"},onselect:{"!type":"fn(event: Event)"},onsubmit:{"!type":"fn(event: Event)"},onunload:{"!type":"fn(event: Event)"},onpageshow:{"!type":"fn(event: Event)"},onpagehide:{"!type":"fn(event: Event)"},Image:{"!type":"fn(width?: Number, height?: Number)"},Option:{"!type":"fn(text?: String, value?: Object, defaultSelected?: Boolean, selected?: Boolean)"},Worker:"Worker_obj",XMLHttpRequest:"XHR_obj",WebSocket:"WebSocket_obj",Event:"Event_obj",Node:"Node_obj"}
}),define("sap/watt/lib/orion/javascript/esprima/typesFromIndexFile",["./typeUtils","./indexFiles/ecma5Index","./indexFiles/browserIndex","sap/watt/lib/doctrine/doctrine"],function(e,t,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function i(e){if(e.length<1)return!1;var t=e.charCodeAt(0);return isNaN(t)?!1:t>=65&&90>=t}function o(){return E+C++}function a(e){return e&&(T.test(e)||"["===e.slice(0,1)||"+"===e.slice(0,1))}function s(e){var t=null;return t="FunctionType"===e.typeObj.type?doctrine.type.stringify(e.typeObj,{compact:!0}):e.typeObj.name}function u(e,t,n){function r(e){e=e.substring(3,e.length);for(var t=e.replace(/\s+/g,""),r="";")"!==t.slice(0,1)&&t.indexOf(")")>=0;){var i=t.indexOf(":"),o=t.slice(0,i),a="?"===o[o.length-1];a&&(o=o.slice(0,o.length-1)),t=t.slice(i+1,t.length);var u=null,c=null;"fn"===t.slice(0,2)?(c=t.indexOf(")"),u=t.indexOf(",",c)):u=t.indexOf(",")<t.indexOf(")")?t.indexOf(","):-1;var p=null;if(-1!==u)p=u;else{var f=null;f=c?t.indexOf("->",t.indexOf(")",c+1)):t.indexOf("->"),p=-1!==f?f-1:t.length-1}var d=t.slice(0,p),h=l(n,d);r+=o+":"+s(h),a&&(r+="="),-1!==u?(r+=",",t=t.slice(p+1,t.length)):t=t.slice(p,t.length)}return{args:r,remaining:t.slice(1,t.length)}}function o(e){return e=e.substring(2,e.length),s(l(n,e))}var a,u=r(e),c=u.remaining;""!==c?a=o(c):t&&(a=t);var p=!c&&a&&i(a),f="function(";return p&&(f+="new:"+a,u.args&&(f+=",")),f+=u.args+"):"+a}function c(e,t){return u(e,t,{})}function l(t,n,i,s){function c(n,i,a){var s,u={};a&&(u.$$library=a);for(var c in n)if(r(n,c))if("!type"===c)s=l(t,n[c],i),e.isFunctionOrConstructor(s.typeObj)&&(u.$$fntype=s.typeObj,s=i?new e.Definition(i):new e.Definition(o()));else if("!proto"===c)u.$$proto=l(t,n[c]);else if("!description"===c)u.$$description=n[c];else if("!category"===c)u.$$category=n[c];else if("!url"===c||"!stdProto"===c||"!effects"===c||"!doc"===c);else{if("!"===c[0])throw"didn't handle special property "+c;"prototype"===c?(u[c]=l(t,n[c]),u.$$prototype=l(t,n[c]),u.$$newtype=u.$$prototype):u[c]=l(t,n[c],void 0,a)}if(u.$$prototype&&u.$$fntype&&"string"==typeof n.prototype){var p=u.$$prototype.typeObj.name,f=u.$$fntype;f.result.name=p}return s||(s=i?new e.Definition(i):new e.Definition(o())),{propInfo:u,def:s}}if("string"==typeof n){if(S[n])return new e.Definition(S[n]);if("?"===n)return"undefined"===i?new e.Definition({name:"undefined",type:"NameExpression"}):i?new e.Definition(i):new e.Definition("Object");if("<top>"===n)return new e.Definition("Global");if("$"===n[0])return new e.Definition(i);if("fn"===n.slice(0,2))return new e.Definition(u(n,i,t));if("["===n[0])return new e.Definition("Array");if("!custom"===n.slice(0,7)||"!this"===n.slice(0,5)||"!0"===n.slice(0,2))return new e.Definition("Object");if("!"===n.slice(0,1))throw"unhandled special case "+n;return"+"===n.slice(0,1)&&(n=n.slice(1,n.length)+"..prototype"),new e.Definition(n)}var p=c(n,i,s),f=p.def.typeObj.name;if(f&&"Global"!==f&&!a(n["!type"]))if("Object"===f){var d={};for(var h in p.propInfo)r(p.propInfo,h)&&(d["$_$"+h]=p.propInfo[h]);d.$$isBuiltin=!0,t[f]=d}else if(t[f]){p.propInfo.$$isBuiltin=!0;for(var m in p.propInfo)t[f][m]||(t[f][m]=p.propInfo[m])}else p.propInfo.$$isBuiltin=!0,t[f]=p.propInfo;return p.def}function p(e,t){var n={},r=l(n,e,t);return{def:r,typeInfo:n}}function f(e,t,n,i){var o;for(o in e)if(r(e,o))if("!name"===o||"!version"===o);else if("!define"===o){var a=e[o];for(var s in a)r(a,s)&&l(n,a[s],s,i)}else if("string"==typeof e[o]){var u=e[o],c={"!type":u};t[o]=l(n,c,o,i)}else{var p=e[o];t[o]=l(n,p,o,i)}}function d(){if(P)return Q();var e=new Q.defer;return f(t,x,w),f(n,x,w),e.resolve(),P=!0,e.promise}function h(e,t){try{f(e,x,w,t)}catch(n){return!1}return!0}function m(e,t){var n={},r=Object.getPrototypeOf(e.Global);return Object.keys(r).forEach(function(e){n[e]=r[e]}),Object.keys(t.globals).forEach(function(e){n[e]=t.globals[e]}),_.prototype=n,e.Global=new _,_.prototype=x,Object.keys(t.types).forEach(function(n){"Global"!==n&&(e[n]=t.types[n])}),e}function g(e,t){var n=new Q.defer,r=I[t];if(!r)throw r={globals:{},types:{}},"unknown library name "+t;n.resolve(r);var i=n.then(function(t){return m(e,t)});return i}function v(e,t){var n={globals:{},types:{}};f(e,n.globals,n.types),m(t,n)}function y(){for(var e in w)delete w[e];C=0,f(t,x,w),f(n,x,w)}var _=function(){},x={};_.prototype=x;var b=function(){this.Global=new _},w={};b.prototype=w;var S={number:"Number",bool:"Boolean",string:"String"},E=e.GEN_NAME+"index~",C=0,T=/^[_$a-zA-Z\xA0-\uFFFF]([_$a-zA-Z0-9\.\xA0-\uFFFF])*$/;x.$$proto=new e.Definition("Object");var P=!1,I={};return{Types:b,addLibrary:g,ternSig2ClosureSig:c,init:d,parseType:p,addIndexData:v,loadIndexInfo:h,addIndexInfo:f,reset:y}}),define("sap/watt/lib/orion/javascript/esprima/typeEnvironment",["./typeUtils","./typesFromIndexFile"],function(e,t){function n(e,t){return t in e?Object.hasOwnProperty(t)?!e.hasOwnProperty(t):Object.prototype.hasOwnProperty(t)?e.hasOwnProperty(t):!0:!1}function r(e,n){var r=t.init(),i=r.then(function(){var r=new t.Types;n&&n.forEach(function(e){t.addIndexData(e,r)});var i=null;return i="Window"===e?t.addLibrary(r,"browser"):"Module"===e?t.addLibrary(r,"node"):Q(r)});return i}function i(t){function i(e,t,n,r){var o=n[t],a=n.$$proto;return o?r||"$$fntype"===t?o:o.typeObj:a?i(e,t,e.lookupQualifiedType(a.typeObj.name),r):null}var o=t.buffer,a=t.uid,s=t.offset,u=t.indexer,c=t.globalObjName,l=t.indexData;s||(s=o.length+1);var p=[];if(t.comments)for(var f=0;f<t.comments.length;f++)p[f]=t.comments[f];var d=function(e){var t,n,r=0;if(0===e.length)return r;for(n=0;n<e.length;n++)t=e.charCodeAt(n),r=(r<<5)-r+t,r&=r;return r},h=function(e){switch(e){case"prototype":return"$$prototype";case"__proto__":return"$$proto";case"toString":case"hasOwnProperty":case"toLocaleString":case"valueOf":case"isProtoTypeOf":case"propertyIsEnumerable":return"$_$"+e;default:return e}},m=e.GEN_NAME+d(a)+"~",g=r(c,l),v=g.then(function(t){return{_scopeStack:["Global"],_allTypes:t,_typeCount:0,_nameStack:[],amdModule:null,commonjsModule:null,nodeJSModule:"Module"===c,indexer:u,offset:s,contents:o,uid:"local"===a?null:a,comments:p,newName:function(){return m+this._typeCount++},isSyntheticName:function(t){return t.substr(0,e.GEN_NAME.length)===e.GEN_NAME},newScope:function(t){var n=this.scope(),r=this.newName();return this._allTypes[r]={$$proto:new e.Definition(n,t,this.uid)},this._scopeStack.push(r),r},newScopeObj:function(t){return e.createNameType(this.newScope(t))},pushScope:function(e){this._scopeStack.push(e)},pushName:function(e){this._nameStack.push(e)},popName:function(){this._nameStack.pop()},getQualifiedName:function(){var e=this._nameStack.join(".");return e.length>0?e+".":e},newObject:function(t,n){this.newScope(),t=t?t:this.newName(),this._allTypes[t]={$$proto:new e.Definition("Object",n,this.uid)};var r=e.createNameType(t);return this.addVariable("this",null,r,n),r},newFleetingObject:function(t,n){var r=t?t:this.newName();return this._allTypes[r]={$$proto:new e.Definition("Object",n,this.uid)},e.createNameType(r)},con:function(t,n){var r=t?t:this.newName();return this._allTypes[r]={$$proto:new e.Definition("Object",n,this.uid)},r},popScope:function(){var e=this._scopeStack.pop();return e},scope:function(e){if("string"==typeof e)return e;if(!e||!e.extras.inferredTypeObj)return this._scopeStack[this._scopeStack.length-1];var t=e.extras.inferredTypeObj;if("NameExpression"===t.type)return t.name;if("FunctionType"===t.type){if(t.params)for(var n=0;n<t.params.length;n++)if(("new"===t.params[n].name||"this"===t.params[n].name)&&t.params[n].expression.name)return t.params[n].expression.name;return"Function"}return"ArrayType"===t.type?"Array":"TypeApplication"===t.type?t.expression.name:"UndefinedLiteral"===t.type?"Object":void 0},globalScope:function(){return this._allTypes[this._scopeStack[0]]},globalTypeName:function(){return this._scopeStack[0]},addVariable:function(t,r,i,o,a){if("prototype"===t)t="$$prototype";else if("__proto__"===t)t="$$proto";else if(this._allTypes.Object["$_$"+t])return;var s=this._allTypes[this.scope(r)];return!s||s.$$isBuiltin||n(s,t)&&e.leftTypeIsMoreGeneral(i,s[t].typeObj,this)?void 0:(s[t]=new e.Definition(i?i:e.OBJECT_TYPE,o,this.uid),s[t].docRange=a,s[t])},addOrSetGlobalVariable:function(e,t,n,r){return this._allTypes.Object["$_$"+e]?void 0:this.addOrSetVariable(e,this.globalTypeName(),t,n,r)},addOrSetVariable:function(t,r,i,o,a){if("prototype"===t)t="$$prototype";else if("__proto__"===t)t="$$proto";else if(this._allTypes.Object["$_$"+t])return;var s=this.scope(r),u=this._allTypes[s],c=!1;i=i?i:this.newFleetingObject();for(var l;u;){if(n(u,t)){if(l=u[t],!u.$$isBuiltin&&u.hasOwnProperty(t)&&!e.leftTypeIsMoreGeneral(i,l.typeObj,this)&&(l.typeObj=i,a&&(l.docRange=a),"$$prototype"===t&&u.$$newtype)){var p=this._allTypes[u.$$newtype.typeObj.name];p.$$proto.typeObj=i}c=!0;break}if(u.$$proto){var f=u.$$proto.typeObj.name;u=this._allTypes[f||"Function"]}else u=null}if(!c){var d=this._allTypes[s];d&&!d.$$isBuiltin&&(l=new e.Definition(i,o,this.uid),l.docRange=a,d[t]=l)}return l},lookupQualifiedType:function(e,t){var n;if(e){var r=e.split("..");n=this._allTypes[r[0]];for(var o=1;o<r.length;o++){var a=i(this,h(r[o]),n,t);n=this._allTypes[a.name]}}return n||(n=this._allTypes.Object),n},lookupTypeObj:function(e,t,n){var r=this.scope(t),o=this.lookupQualifiedType(r,n);if(o){var a=i(this,h(e),o,n);return a}},removeVariable:function(e,t){var n=this._allTypes[this.scope(t)];!n||n.$$isBuiltin||!n[e]||n[e]&&!n.hasOwnProperty(e)||delete n[e]},mergeSummary:function(t,n){for(var r in t.types)if(t.types.hasOwnProperty(r)){var i=this._allTypes[r],o=t.types[r];if(!i||i.$$isBuiltin){i=this._allTypes[r]={};for(var a in o)"$$category"===a?i.$$category=o.$$category:"$$library"===a?i.$$library=o.$$library:i[a]||(i[a]=e.Definition.revive(o[a]))}else if(i&&i.$$isNS&&o.$$isNS)for(var a in o)i[a]||(i[a]=e.Definition.revive(o[a]))}var s=this._allTypes[n];if("string"!=typeof t.provided)for(var u in t.provided)t.provided.hasOwnProperty(u)&&(s[u]=e.Definition.revive(t.provided[u]))},initFunctionType:function(t,n,r,i){var o=r.name,a=this.newFleetingObject(o+"~proto");this._allTypes[o].$$proto=new e.Definition("Function",null,this.uid),this._allTypes[o].$$fntype=t,this._allTypes[o].$$prototype=new e.Definition(a,null,this.uid),i||(i=o+"~new"),this.newObject(i,n.range),this._allTypes[o].$$newtype=new e.Definition(i,null,this.uid),this._allTypes[i].$$proto=new e.Definition(a,null,this.uid)},updateObjLitFunctionType:function(e,t,n){var r=e.extras.inferredTypeObj.name,i=n.extras.inferredTypeObj.name;if(r&&i){var o=this._allTypes[r],a=this._allTypes[this._allTypes[i].$$newtype.typeObj.name];for(var s in o)o.hasOwnProperty(s)&&!a.hasOwnProperty(s)&&s!==t&&0!==s.indexOf("$$")&&(a[s]=o[s]);if(this.ui5CallExpression&&this.ui5CallExpression.callee){var u=this.ui5CallExpression.properties;for(var c in u){var l=u[c];if(l.key&&l.key.name===t&&l.value&&l.value.range&&l.value.range[0]===n.range[0]&&l.value.range[1]===n.range[1]){var p=this._allTypes[this._allTypes[i].$$prototype.typeObj.name];p.$$proto.typeObj.name=this.ui5CallExpression.callee;break}}}}},updateReturnType:function(e,t){if(!e)return t;var n=this._allTypes[e.name].$$fntype;if(n){var r={type:n.type,params:n.params,result:t};return n["this"]&&(r["this"]=n["this"]),n["new"]&&(r["new"]=n["new"]),this._allTypes[e.name].$$fntype=r,r}return t},getNewType:function(e){return this.lookupTypeObj("$$newtype",e)},getFnType:function(e){var t=this.lookupTypeObj("$$fntype",e);return t||(t=e.extras.inferredTypeObj),t},findType:function(t){var n=e.convertToSimpleTypeName(t);return this._allTypes[n]},getAllTypes:function(){return this._allTypes},storeTarget:function(e){this.targetTypeName||(e||(e=this.scope()),this.targetTypeName=e,this.targetFound=!0)}}});return v}return{createEnvironment:i}}),define("sap/watt/lib/orion/javascript/esprima/ui5/ui5runtime",[],function(){function e(e){return e.charAt(0).toUpperCase()+e.slice(1)}function t(e){return e.replace(s,function(e,t){var n=u[t.toLowerCase()];return"string"==typeof n?n:t.slice(0,n)})}function n(t,n){this.aAccessors={},n="object"!=typeof n?{type:n}:n,this.name=t,this.bindable=!!n.bindable;var r=e(t);this._sMutator="set"+r,this.aAccessors._set=this._sMutator,this._sGetter="get"+r,this.aAccessors._get=this._sGetter,this.bindable?(this._sBind="bind"+r,this.aAccessors._bind=this._sBind,this._sUnbind="unbind"+r,this.aAccessors._unbind=this._sUnbind):this._sBind=this._sUnbind=void 0}function r(t){this.aAccessors={},this.name=t;var n=e(t);this._sMutator="attach"+n,this.aAccessors._attach=this._sMutator,this._sDetachMutator="detach"+n,this.aAccessors._detach=this._sDetachMutator,this._sTrigger="fire"+n,this.aAccessors._fire=this._sTrigger}function i(n,r){this.aAccessors={},r="object"!=typeof r?{type:r}:r,this.name=n,this.bindable=!!r.bindable,this.multiple="boolean"==typeof r.multiple?r.multiple:!0,this.singularName=this.multiple?r.singularName||t(n):void 0;var i=e(n);if(this._sGetter="get"+i,this.aAccessors._get=this._sGetter,this.multiple){var o=e(this.singularName);this._sMutator="add"+o,this.aAccessors._add=this._sMutator,this._sInsertMutator="insert"+o,this.aAccessors._insert=this._sInsertMutator,this._sRemoveMutator="remove"+o,this.aAccessors._remove=this._sRemoveMutator,this._sRemoveAllMutator="removeAll"+i,this.aAccessors._removeAll=this._sRemoveAllMutator,this._sIndexGetter="indexOf"+o,this.aAccessors._indexOf=this._sIndexGetter}else this._sMutator="set"+i,this.aAccessors._set=this._sMutator,this._sInsertMutator=this._sRemoveMutator=this._sRemoveAllMutator=this._sIndexGetter=void 0;this._sDestructor="destroy"+i,this.aAccessors.destroy=this._sDestructor,this.bindable?(this._sBind="bind"+i,this.aAccessors.bind=this._sBind,this._sUnbind="unbind"+i,this.aAccessors.unbind=this._sUnbind):this._sBind=this._sUnbind=void 0}function o(n,r){this.aAccessors={},r="object"!=typeof r?{type:r}:r,this.name=n,this.multiple=r.multiple||!1,this.singularName=this.multiple?r.singularName||t(n):void 0;var i=e(n);if(this._sGetter="get"+i,this.aAccessors._get=this._sGetter,this.multiple){var o=e(this.singularName);this._sMutator="add"+o,this.aAccessors._add=this._sMutator,this._sRemoveMutator="remove"+o,this.aAccessors._remove=this._sRemoveMutator,this._sRemoveAllMutator="removeAll"+o,this.aAccessors._removeAll=this._sRemoveAllMutator}else this._sMutator="set"+i,this.aAccessors._set=this._sMutator,this._sRemoveMutator=this._sRemoveAllMutator=void 0}function a(e){return t(e)}var s=/(children|ies|ves|oes|ses|ches|shes|xes|s)$/i,u={children:-3,ies:"y",ves:"f",oes:-2,ses:-2,ches:-2,shes:-2,xes:-2,s:-1};return n.prototype.getAccessors=function(){return Object.keys(this.aAccessors)},n.prototype.getGetterName=function(){return this._sGetter},n.prototype.getSetterName=function(){return this._sMutator},n.prototype.getBindName=function(){return this._sBind},n.prototype.getUnbindName=function(){return this._sUnbind},r.prototype.getAccessors=function(){return Object.keys(this.aAccessors)},r.prototype.getAttachName=function(){return this._sMutator},r.prototype.getDetachName=function(){return this._sDetachMutator},r.prototype.getFireName=function(){return this._sTrigger},i.prototype.getAccessors=function(){return Object.keys(this.aAccessors)},i.prototype.getGetterName=function(){return this._sGetter},i.prototype.getSetterName=function(){return this._sMutator},i.prototype.getAddName=function(){return this._sMutator},i.prototype.getInsertName=function(){return this._sInsertMutator},i.prototype.getRemoveName=function(){return this._sRemoveMutator},i.prototype.getRemoveAllName=function(){return this._sRemoveAllMutator},i.prototype.getDestroyName=function(){return this._sDestructor},i.prototype.getIndexOfName=function(){return this._sIndexGetter},i.prototype.getBindName=function(){return this._sBind},i.prototype.getUnbindName=function(){return this._sUnbind},o.prototype.getAccessors=function(){return Object.keys(this.aAccessors)},o.prototype.getGetterName=function(){return this._sGetter},o.prototype.getSetterName=function(){return this._sMutator},o.prototype.getAddName=function(){return this._sMutator},o.prototype.getRemoveName=function(){return this._sRemoveMutator},o.prototype.getRemoveAllName=function(){return this._sRemoveAllMutator},{Property:n,Event:r,Aggregation:i,Association:o,toSingularParam:a}}),define("sap/watt/lib/orion/javascript/esprima/typeInference",["./esprimaVisitor","./typeUtils","./proposalUtils","./ui5/ui5runtime"],function(e,t,n,r){function i(e){return D[e]===!0}function o(e){if(e.length<1)return!1;var t=e.charCodeAt(0);return isNaN(t)?!1:t>=65&&90>=t}function a(e){return e?"Identifier"===e.type?e:"MemberExpression"===e.type?e.computed?"Literal"===e.property.type&&"string"==typeof e.property.value?e.property:e:a(e.property):"ArrayExpression"===e.type?e:null:null}function s(e){if(e){if("Identifier"===e.type)return e.name;if("MemberExpression"===e.type){var t=s(e.object),n=s(e.property);return t.length>0&&n.length>0?t+"."+n:t+n}return"CallExpression"===e.type?s(e.callee):""}return""}function u(e,t){var n,r;if(t&&A(t.global))for(n=0;n<t.global.length;n++)r=t.global[n],e.lookupTypeObj(r)||e.addOrSetVariable(r);var i=e.comments;if(i)for(n=0;n<i.length;n++){var o=i[n].range;if("Block"===i[n].type&&"global"===i[n].value.substring(0,"global".length)){for(var a=i[n].value,s=a.split(/\s+/),u=1;u<s.length;u++)if(s[u].length>0){var c=s[u].indexOf(":");r=c>=0?s[u].substring(0,c).trim():s[u].trim(),e.lookupTypeObj(r)||e.addOrSetVariable(r,null,null,o)}break}}}function c(e){if(e.indexer){var t=e.indexer.retrieveGlobalSummaries();for(var n in t)t.hasOwnProperty(n)&&e.mergeSummary(t[n],e.globalTypeName())}}function l(e){var t=e.body;return t&&t.length>=1&&t[0]&&"ExpressionStatement"===t[0].type&&t[0].expression&&"CallExpression"===t[0].expression.type&&"define"===t[0].expression.callee.name?(console.log(".........detected as a AMD module"),t[0].expression):null}function p(e){var t=e.body;if(t&&t.length>=1)for(var n=0;n<t.length;n++)if(t[n]&&"ExpressionStatement"===t[n].type&&t[n].expression&&"CallExpression"===t[n].expression.type&&"define"===t[n].expression.callee.name){var r=t[n].expression;if(r.arguments&&1===r.arguments.length&&"FunctionExpression"===r.arguments[0].type&&3===r.arguments[0].params.length){var i=r.arguments[0].params;if("require"===i[0].name&&"exports"===i[1].name&&"module"===i[2].name)return t[n].expression}}return null}function f(e,t){var n=e.body;if(n&&n.length>=1&&n[0]){var r=n[0];if(r&&"ExpressionStatement"===r.type&&r.expression&&"CallExpression"===r.expression.type&&r.expression.callee&&r.expression.callee.property&&"define"===r.expression.callee.property.name){for(var i=r.expression.callee,o="define";i.object;)o=i.object.property?i.object.property.name+"."+o:i.object.name+"."+o,i=i.object;if("sap.ui.define"===o){console.log(t.uid+" is detected as a SAPUI5 asynchronous control/module");var a={};if(r.expression.arguments&&Array.isArray(r.expression.arguments)&&r.expression.arguments.length>1&&r.expression.arguments[1].body&&r.expression.arguments[1].body.body&&Array.isArray(r.expression.arguments[1].body.body)&&r.expression.arguments[1].body.body.length>1&&r.expression.arguments[1].body.body[1].argument&&r.expression.arguments[1].body.body[1].argument.arguments&&Array.isArray(r.expression.arguments[1].body.body[1].argument.arguments)&&r.expression.arguments[1].body.body[1].argument.arguments.length>1&&r.expression.arguments[1].body.body[1].argument.arguments[1].properties){a=r.expression.arguments[1].body.body[1].argument.arguments[1];var s=r.expression.arguments[1].body.body[1].argument.arguments[0].value}return{moduleId:s,expression:r.expression,node:a}}return null}}return null}function d(e){var t,n,r=e.body;if(r&&r.length>=1)for(var i=0;i<r.length;i++){if(r[i]&&"ExpressionStatement"===r[i].type&&r[i].expression&&"CallExpression"===r[i].expression.type){var o=r[i].expression;if(o.callee&&o.arguments){var a=o.callee,s=a.property;if(s&&"Identifier"===s.type&&"declare"===s.name){for(var u=a,c="declare";u.object;)c=u.object.property?u.object.property.name+"."+c:u.object.name+"."+c,u=u.object;if("jQuery.sap.declare"===c&&o.arguments){var l=o.arguments;if(l.length>0){if(l[0].value){t=l[0].value;var p=t.split(".");n=p[p.length-1]}console.log("ModuleId : "+t+" module name "+n)}}}}}if("ExpressionStatement"===r[i].type&&r[i].hasOwnProperty("expression")&&r[i].expression&&"AssignmentExpression"===r[i].expression.type&&r[i].expression.left.object&&"="===r[i].expression.operator&&(o=r[i].expression,o.left.property&&"Identifier"===o.left.property.type&&o.left.property.name===n)){u=o.left,c=n;for(var f=[o.left.property];u.object;)u.object.property?(c=u.object.property.name+"."+c,f.unshift(u.object.property)):(c=u.object.name+"."+c,f.unshift(u.object)),u=u.object;if(t===c&&o.right&&("ObjectExpression"===o.right.type||"FunctionExpression"===o.right.type))return console.log(t+" is detected as a SAPUI5 control/module"),{node:o.right,moduleScope:f,left:o.left,moduleId:t}}if(r[i]&&"ExpressionStatement"===r[i].type&&r[i].expression&&"CallExpression"===r[i].expression.type&&"MemberExpression"===r[i].expression.callee.type&&r[i].expression.callee.property&&"Identifier"===r[i].expression.callee.property.type&&"extend"===r[i].expression.callee.property.name){f=[];var d=r[i].expression;if(d.hasOwnProperty("arguments")&&d.arguments&&2===d.arguments.length&&"ObjectExpression"===d.arguments[1].type){for(var h=d.arguments[0].value.split(".");h.length>0;)1===h.length?f.push({name:h[0],isConstructor:!0}):f.push({name:h[0]}),h.splice(0,1);return console.log(t+" is detected as a SAPUI5 control/module"),{node:d.arguments[1],moduleScope:f,moduleId:t}}}}return null}function h(e,t){for(var n;t.length>0&&t[0].range[0]<e.range[0];)n=t.shift();return n||{value:null}}function m(e,n){var r,i=[],o=e.params;if(o.length>0&&(e.extras||(e.extras={}),n.indexer&&e.extras.amdDefn)){var a=e.extras.amdDefn.arguments;if(a.length>1&&a[a.length-1]===e){var s=null;if(3===a.length&&"Literal"===a[0].type&&"ArrayExpression"===a[1].type?s=a[1].elements:2===a.length&&"ArrayExpression"===a[0].type&&(s=a[0].elements),s)for(r=0;r<o.length;r++)if(r<s.length&&"Literal"===s[r].type){var u=n.indexer.retrieveSummary(s[r].value);if(u){var c,l;"string"==typeof u.provided?l=c=u.provided:(l=c=n.newScope(),n.popScope()),n.mergeSummary(u,l),i.push(c)}else i.push(n.newFleetingObject())}else i.push(t.OBJECT_TYPE)}}if(0===i.length)for(r=0;r<o.length;r++)i.push(n.newFleetingObject());return i}function g(e,r){var i,u,c,g,v,x,b,w,S=e.type;switch(e.extras||(e.extras={}),S){case"Program":r.commonjsModule=p(e),r.commonjsModule||(r.amdModule=l(e),r.amdModule||(r.SapUIAmd=f(e,r),r.SapUIAmd||(r.SapUI5=d(e,r))));break;case"BlockStatement":if(e.extras.inferredTypeObj=r.newScopeObj(),e.extras.stop)return P(e,r),delete e.extras.stop,!1;break;case"Literal":break;case"ArrayExpression":e.extras.inferredTypeObj=t.ARRAY_TYPE;break;case"ObjectExpression":for(e.extras.fname&&r.pushName(e.extras.fname),v=r.newObject(null,e.range),e.extras.inferredTypeObj=v,u=0;u<e.properties.length;u++){c=e.properties[u];var E;if(c.key&&(c.key.name?E=c.key.name:"Literal"===c.key.type&&c.key.value&&(E=c.key.value)),E){w=h(c.key,r.comments),x=t.parseJSDocComment(w),b=x.type&&t.convertJsDocType(x.type,r),c.key.extras||(c.key.extras={});var C;b?c.key.extras.inferredType=c.key.extras.jsdocType=C=b:C=t.OBJECT_TYPE,r.addVariable(E,e,C,c.key.range,w.range),c.key.extras.associatedComment=w,c.key.extras.isLHS=c.key.extras.isDecl=!0,("FunctionExpression"===c.value.type||"ObjectExpression"===c.value.type)&&(c.value.extras||(c.value.extras={}),c.value.extras.fname=E,c.value.extras.cname=r.getQualifiedName()+E,"FunctionExpression"===c.value.type&&(c.value.extras.jsdocResult=x))}}break;case"FunctionDeclaration":case"FunctionExpression":var T;if(e.id?(i=e.id.name,T=e.id.range):e.extras.fname&&(i=r.SapUI5?e.extras.cname:e.extras.fname,T=e.range),g=[],e.params)for(u=0;u<e.params.length;u++)g[u]=e.params[u].name;e.extras.jsdocResult?(x=e.extras.jsdocResult,w={range:null}):(w=e.extras.associatedComment||h(e,r.comments),x=t.parseJSDocComment(w));var I;if(i&&e.body&&(o(i)||r.SapUI5&&r.SapUI5.moduleId===i))e.extras.cname&&(i=e.extras.cname),v=t.createNameType(i),I=!0;else{if(x.rturn){var D=t.convertJsDocType(x.rturn,r);e.extras.jsdocReturn=D,v=D,e.extras.inferredTypeObj=D}else v=t.UNDEFINED_TYPE;I=!1}var A=new Array(g.length);if(e.extras.paramTypeObj&&"FunctionType"===e.extras.paramTypeObj.type){var N=e.extras.paramTypeObj.params,k=Math.min(g.length||0,N.length||0);for(u=0;k>u;u++)A[u]=N[u]}e.body.extras||(e.body.extras={}),e.body.extras.isConstructor=I;var O=[];if(g.length>0){var R=m(e,r);for(u=0;u<g.length;u++){var j=x.params[g[u]],F=null;F=j?t.convertJsDocType(j,r):R[u],A[u]&&t.leftTypeIsMoreGeneral(F,A[u],r)&&(F="ParameterType"===A[u].type?A[u].expression:A[u]),O.push(t.createParamType(g[u],F))}}var L=t.createFunctionType(O,v,I),M=r.newFleetingObject();i&&!n.isBefore(r.offset,e.range)&&r.addVariable(i,e.extras.target,M,T,w.range),r.initFunctionType(L,e,M,I?v.name:void 0),I&&i.indexOf(".")<0&&r.addOrSetGlobalVariable(i,M,T,w.range),e.extras.inferredTypeObj=M,r.addVariable("arguments",e.extras.target,t.createNameType("Arguments"),e.range),r.SapUI5&&e.extras.appliesTo&&i&&0===i.indexOf(r.SapUI5.moduleId+".prototype.")&&(e.extras.appliesTo.$$Module=r.SapUI5.moduleId);var B=e.extras.appliesTo;if(B){var U=B.extras.target;if(U){var V=r.scope(U);t.isPrototypeName(V)&&(V=t.extractReturnType(V)),r.addVariable("this",e.extras.target,t.createNameType(V),T,w.range)}}for(u=0;u<g.length;u++)r.addVariable(g[u],e.extras.target,O[u].expression,e.params[u].range);break;case"VariableDeclarator":e.id.name&&(e.id.extras||(e.id.extras={}),e.id.extras.isLHS=e.id.extras.isDecl=!0,e.init&&!e.init.extras&&(e.init.extras={}),e.init&&"FunctionExpression"===e.init.type?(e.init.extras.fname=e.id.name,e.init.extras.cname=r.getQualifiedName()+e.id.name,e.init.extras.fnameRange=e.id.range):(w=h(e,r.comments),x=t.parseJSDocComment(w),b=x.type&&t.convertJsDocType(x.type,r),e.extras.docRange=w.range,b&&(e.extras.inferredTypeObj=b,e.extras.jsdocType=b,r.addVariable(e.id.name,e.extras.target,b,e.id.range,w.range)))),r.pushName(e.id.name);break;case"AssignmentExpression":var Q=a(e.left),G=r.getQualifiedName()+s(e.left);!Q||"Identifier"!==Q.type&&"Literal"!==Q.type||(Q.extras||(Q.extras={}),"FunctionExpression"===e.right.type&&(e.right.extras||(e.right.extras={}),e.right.extras.appliesTo=Q,e.right.extras.fname=Q.name,e.right.extras.cname=G,e.right.extras.fnameRange=Q.range,e.left.extras||(e.left.extras={})),w=h(e,r.comments),x=t.parseJSDocComment(w),b=x.type&&t.convertJsDocType(x.type,r),e.extras.docRange=w.range,b&&(e.extras.inferredTypeObj=b,e.extras.jsdocType=b,r.addVariable(Q.name,e.extras.target,b,Q.range,w.range))),r.pushName(G);break;case"CatchClause":if(e.extras.inferredTypeObj=r.newScope(),e.param){e.param.extras||(e.param.extras={});var H=t.createNameType("Error");e.param.extras.inferredTypeObj=H,r.addVariable(e.param.name,e.extras.target,H,e.param.range)}break;case"MemberExpression":e.property&&(!e.computed||e.computed&&"Literal"===e.property.type&&"string"==typeof e.property.value)&&(e.property.extras||(e.property.extras={}),e.property.extras.target=e.object);break;case"CallExpression":if("define"===e.callee.name||"require"===e.callee.name){var z=e.arguments;z.length>1&&"FunctionExpression"===z[z.length-1].type&&"ArrayExpression"===z[z.length-2].type&&(z[z.length-1].extras||(z[z.length-1].extras={}),z[z.length-1].extras.amdDefn=e)}else if(e.callee.property&&"define"===e.callee.property.name)z=e.arguments,z.length>1&&"FunctionExpression"===z[z.length-1].type&&"ArrayExpression"===z[z.length-2].type&&(z[z.length-1].extras||(z[z.length-1].extras={}),z[z.length-1].extras.amdDefn=e);else if(r.SapUIAmd&&e.callee.property&&"Identifier"===e.callee.property.type&&"extend"===e.callee.property.name){r.SapUIAmd.moduleId=r.SapUIAmd.moduleId||e.arguments[0].value,console.log("Module Id detected and variable added "+r.SapUIAmd.moduleId);var W=r.newFleetingObject(e.arguments[0].value);r.addVariable(r.SapUIAmd.moduleId,e.extras.target,W);var q=e.arguments[1].properties;for(r.SapUIAmd.node=e.arguments[1],u=0;u<q.length;u++)q[u].hasOwnProperty("key")&&(i=q[u].key.name,i&&"FunctionExpression"===q[u].value.type&&(q[u].value.extras?q[u].value.extras.ownerModule=e.arguments[0].value:q[u].value.extras={ownerModule:e.arguments[0].value},"init"!==i&&"onInit"!==i&&"constructor"!==i||r.uid||(r.SapUIAmd.moduleConstructor=q[u].value.body)))}else{var X=_(e.arguments);if(X){var $=y(e.callee);$&&(r.ui5CallExpression={callee:$,properties:X.properties})}Q=a(e.callee),Q&&"Identifier"===Q.type&&(Q.extras=Q.extras||{},Q.extras.callArgs=e.arguments)}}return e===r.defer&&(e.extras.associatedComment=h(e,r.comments),e.extras.inferredTypeObj=e.extras.inferredTypeObj||t.OBJECT_TYPE,e.extras.scope=r.scope(e.extras.target),e.body.extras.stop=!0),!0}function v(e){var t="";return e&&e.object?e.property&&"Identifier"===e.property.type&&(t=v(e.object)+"."+e.property.name):e&&e.name&&(t=e.name),t}function y(e){var t=v(e);if(t){var n={"sap.ui.controller":"sap.ui.core.mvc.Controller","sap.ui.jsview":"sap.ui.core.mvc.JSView"};for(var r in n){var i=n[r];if(0===t.indexOf(r)||0===t.indexOf(i))return i}if(0===t.indexOf("sap.")){var o=t.lastIndexOf(".extend");return o>0&&(t=t.substring(0,o)),t}}}function _(e){for(var t in e){var n=e[t];if("ObjectExpression"===n.type)return n}}function x(e,n){if(-1!==e.indexOf(".")||-1!==e.indexOf("/"))return null;var r=t.ensureTypeObject(e);return n.findType(r)?r:null}function b(e,n){if((n.indexer||n.nodeJSModule)&&"CallExpression"===e.type&&"Identifier"===e.callee.type&&"require"===e.callee.name&&1===e.arguments.length){var r=e.arguments[0];if("Literal"===r.type&&"string"==typeof r.value){if(n.nodeJSModule)return x(r.value,n);var i=n.indexer.retrieveSummary(r.value);if(i){var o,a;return"string"==typeof i.provided?a=o=i.provided:(a=o=n.newScope(),n.popScope()),n.mergeSummary(i,a),t.ensureTypeObject(o)}}}}function w(e){if(!e)return null;var t,n,r,i=e.type;switch(i){case"BlockStatement":return e.body&&e.body.length>0?(r=e.body[e.body.length-1],"ReturnStatement"===r.type?r:w(r)):null;case"WhileStatement":case"DoWhileStatement":case"ForStatement":case"ForInStatement":case"CatchClause":return w(e.body);case"IfStatement":return t=w(e.alternate),t||(t=w(e.consequent)),t;case"TryStatement":t=w(e.finalizer);var o=e.handlers;if(!t&&o)for(n=o.length-1;n>=0&&!(t=w(o[n]));n--);return t||(t=w(e.block)),t;case"SwitchStatement":var a=e.cases;if(a)for(n=a.length-1;n>=0&&!(t=w(a[n]));n--);return t;case"SwitchCase":return e.consequent&&e.consequent.length>0?(r=e.consequent[e.consequent.length-1],"ReturnStatement"===r.type?r:w(r)):null;case"ReturnStatement":return e;default:return null}}function S(e,n,i){var o="",a=[];if(e){var s=Object.keys(e);if(s&&s.length>0)for(var u=1;u<s.length;u++)for(var c=s[u],l=new this.ui5rt[n](c,i[c].info),p=l.getAccessors(),f=0;f<p.length;f++){var d=p[f].replace(/^_/,""),h=[],m=null,g=e[c]._typeObj;switch(d){case"get":h=[],m=g,o=l.getGetterName();break;case"set":h=[t.createParamType(c,t.OBJECT_TYPE)],m=t.UNDEFINED_TYPE,o=l.getSetterName();break;case"attach":h=[t.createParamType("oData",t.OBJECT_TYPE),t.createParamType("fnFunction",t.FUNCTION_TYPE),t.createParamType("oListener",t.OBJECT_TYPE)],m=t.OBJECT_TYPE,o=l.getAttachName();break;case"detach":h=[t.createParamType("fnFunction",t.FUNCTION_TYPE),t.createParamType("oListener",t.OBJECT_TYPE)],m=t.OBJECT_TYPE,o=l.getDetachName();break;case"fire":h=[t.createParamType("arguments",t.OBJECT_TYPE)],m=t.OBJECT_TYPE,o=l.getFireName();break;case"add":h=[t.createParamType(r.toSingularParam(c),t.OBJECT_TYPE)],m=t.OBJECT_TYPE,o=l.getAddName();break;case"insert":h=[t.createParamType("position",t.NUMBER_TYPE),t.createParamType(r.toSingularParam(c),t.OBJECT_TYPE)],m=g,o=l.getInsertName();break;case"remove":h=[t.createParamType(r.toSingularParam(c),t.OBJECT_TYPE)],m=g,o=l.getRemoveName();
break;case"removeAll":h=[],m=t.ARRAY_TYPE,o=l.getRemoveAllName();break;case"destroy":h=[t.createParamType("bSuppressInvalidate",t.BOOLEAN_TYPE)],m=t.OBJECT_TYPE,o=l.getDestroyName();break;case"indexOf":h=[t.createParamType("oData",t.OBJECT_TYPE)],m=t.NUMBER_TYPE,o=l.getIndexOfName();break;case"bind":h=[t.createParamType("vPath",t.STRING_TYPE),t.createParamType("mParameters",t.OBJECT_TYPE)],m=t.OBJECT_TYPE,o=l.getBindName();break;case"unbind":h=[t.createParamType("sModelName",t.STRING_TYPE)],m=t.OBJECT_TYPE,o=l.getUnbindName()}a.push({name:o,inferedTypeObj:{typeObj:t.createFunctionType(h,m,!1),range:i[c].range,path:i[c].path}})}}return a}function E(e,t,n,r){var i={};return n&&t.getAllTypes().hasOwnProperty(n)?i=t.lookupQualifiedType(n):(i=t.newObject(n,e.range),r._typeObj=i,t.getAllTypes()[n].$$isNS=!0),i}function C(e,i){var o,a={},s=[],u={},c=i.newFleetingObject(),l=i.findType(c);try{var p=i.findType(i.SapUI5.node.extras.inferredTypeObj);if(!p)return{};for(var f in p)if(p.hasOwnProperty(f)&&"metadata"!==f&&"_"!==f.charAt(0)){var d=i.findType(p[f]._typeObj);d&&d.hasOwnProperty("$$fntype")&&(l[f]={_typeObj:d.$$fntype,path:p[f].path,range:p[f].range})}if(p.hasOwnProperty("metadata")&&p.metadata){for(var h=p.metadata.path,m=0;m<i.SapUI5.node.properties.length;m++){var g=i.SapUI5.node.properties[m];if("Identifier"===g.key.type&&"metadata"===g.key.name){var v=g.value;if(v.properties)for(var y=0;y<v.properties.length;y++){var _=v.properties[y],x=_.key.name||_.key.value;u[x]={};for(var b=0;b<_.value.properties.length;b++){var w=_.value.properties[b],E=w.key.name||w.key.value;u[x][E]={range:null,path:h},u[x][E].range=w.range;var C={};if(w.value.properties)for(var T=0;T<w.value.properties.length;T++){var P=w.value.properties[T],I=P.key.name||P.key.value;C[I]=P.value.value}else"Literal"===w.value.type&&(C=w.value.value);u[x][E].info=C}}break}}o=i.findType(p.metadata._typeObj);var D=null;if(!i.uid)for(var A=0;A<i.SapUI5.node.properties.length;A++){var N=i.SapUI5.node.properties[A];if("metadata"!==N.key.name&&N.value&&"FunctionExpression"===N.value.type&&N.value.body&&n.inRange(i.offset,N.value.body.range,!0)&&N.extras.inferredTypeObj){var k=i.findType(N.extras.inferredTypeObj);if(k&&!k.$$isBuiltin&&k.$$newtype){D=i.findType(k.$$newtype._typeObj);break}}}var O={properties:"Property",events:"Event",aggregations:"Aggregation",associations:"Association"};Object.keys(O).forEach(function(e){o.hasOwnProperty(e)&&(s=i.findType(o[e]._typeObj),S.call(this,s,O[e],u[e]).forEach(function(e){l[e.name]={_typeObj:e.inferedTypeObj.typeObj,range:e.inferedTypeObj.range,path:e.inferedTypeObj.path},D&&(D.hasOwnProperty(e.name)?D[e.name].typeObj=e.inferedTypeObj.typeObj:D[e.name]=e.inferedTypeObj)},{env:this.env}))},{env:i,ui5rt:r})}var R=[t.createParamType("sId",t.STRING_TYPE),t.createParamType("mSettings",t.OBJECT_TYPE),t.createParamType("oScope",t.OBJECT_TYPE)],j=t.createFunctionType(R,c,!0);a._typeObj=j,p.$$proto&&(a.path=p.$$proto.path,a.range=p.$$proto.range)}catch(F){console.log("Type inference error in SAPUI5 Control processing.")}return a}function T(e,i,o){var a,s,u=[],c={},l=i.newFleetingObject();try{var p=i.findType(e);if(!i.SapUIAmd.moduleId||!p)return{};var f=i.findType({name:i.SapUIAmd.moduleId,type:"NameExpression"});if(!f)return{};if(p.constructor&&p.constructor._typeObj){var d=i.findType(p.constructor._typeObj);s=d.$$fntype.params}else s=[t.createParamType("sId",t.STRING_TYPE),t.createParamType("mSettings",t.OBJECT_TYPE),t.createParamType("oScope",t.OBJECT_TYPE)];var h=t.createFunctionType(s,f,!0);i.initFunctionType(h,o,l);var m=i.findType(l);m.$$fntype.result=m.$$newtype.typeObj={name:i.SapUIAmd.moduleId,type:"NameExpression"};var g=f;m.$$fntype.params[m.$$fntype.params.length-1].expression=m.$$fntype.result;for(var v in p)if(p.hasOwnProperty(v)&&"metadata"!==v&&"constructor"!==v&&"_"!==v.charAt(0)){var y=i.findType(p[v]._typeObj);y&&y.hasOwnProperty("$$fntype")&&(g[v]={_typeObj:y.$$fntype,path:p[v].path,range:p[v].range})}if(p.constructor&&p.constructor._typeObj){var _=i.findType({type:p.constructor._typeObj.type,name:p.constructor._typeObj.name+"~new"});if(_&&!_.$$isBuiltin)for(var x in _)if(_.hasOwnProperty(x)&&"$$proto"!==x&&"_"!==x.charAt(0)&&!g.hasOwnProperty(x)){y=_[x];var b=i.findType(y.typeObj);b&&b.hasOwnProperty("$$fntype")&&(g[x]={_typeObj:b.$$fntype,path:y.path,range:y.range})}}if(p.hasOwnProperty("metadata")&&p.metadata){for(var w=p.metadata.path,E=0;E<i.SapUIAmd.node.properties.length;E++){var C=i.SapUIAmd.node.properties[E];if("Identifier"===C.key.type&&"metadata"===C.key.name){var T=C.value;if(T.properties)for(var P=0;P<T.properties.length;P++){var I=T.properties[P],D=I.key.name||I.key.value;c[D]={};for(var A=0;A<I.value.properties.length;A++){var N=I.value.properties[A],k=N.key.name||N.key.value;c[D][k]={range:null,path:w},c[D][k].range=N.range;var O={};if(N.value.properties)for(var R=0;R<N.value.properties.length;R++){var j=N.value.properties[R],F=j.key.name||j.key.value;O[F]=j.value.value}else"Literal"===N.value.type&&(O=N.value.value);c[D][k].info=O}}break}}a=i.findType(p.metadata._typeObj);var L=null;if(!i.uid)for(var M=0;M<i.SapUIAmd.node.properties.length;M++){var B=i.SapUIAmd.node.properties[M];if("metadata"!==B.key.name&&B.value&&"FunctionExpression"===B.value.type&&B.value.body&&n.inRange(i.offset,B.value.body.range,!0)&&B.extras.inferredTypeObj){var U=i.findType(B.extras.inferredTypeObj);if(U&&!U.$$isBuiltin&&U.$$newtype){L=i.findType(U.$$newtype._typeObj);break}}}var V={properties:"Property",events:"Event",aggregations:"Aggregation",associations:"Association"};Object.keys(V).forEach(function(e){a.hasOwnProperty(e)&&(u=i.findType(a[e]._typeObj),S.call(this,u,V[e],c[e]).forEach(function(e){g.hasOwnProperty(e.name)?g[e.name]._typeObj=e.inferedTypeObj.typeObj:g[e.name]={_typeObj:e.inferedTypeObj.typeObj,range:e.inferedTypeObj.range,path:e.inferedTypeObj.path},L&&!L.hasOwnProperty(e.name)&&(L[e.name]=e.inferedTypeObj)},{env:this.env}))},{env:i,ui5rt:r})}}catch(Q){console.log("Type inference error in SAPUI5 Control processing.")}return l}function P(r,o){var s,u,c,l,p,f,d=r.type;switch(d){case"Program":if(o.defer){o.comments=o.deferredComments;var h=o.defer;o.defer=null,o.targetTypeName=null,o.pushScope(h.extras.scope),e.visit(h.body,o,g,P),o.popScope()}throw o.storeTarget(),o.targetTypeName;case"BlockStatement":case"CatchClause":n.inRange(o.offset,r.range)&&o.storeTarget(),o.popScope();break;case"MemberExpression":n.afterDot(o.offset,r,o.contents)&&o.storeTarget(o.scope(r.object)),r.extras.inferredTypeObj=t.isArrayType(r.object.extras.inferredTypeObj)&&r.computed?t.extractArrayParameterType(r.object.extras.inferredTypeObj):r.computed&&r.property&&"Literal"!==r.property.type?t.OBJECT_TYPE:r.property?r.property.extras.inferredTypeObj:r.object.extras.inferredTypeObj;break;case"CallExpression":var m=b(r,o);m||(m=t.extractReturnType(o.getFnType(r.callee))),r.extras.inferredTypeObj=m;break;case"NewExpression":var c=o.getNewType(r.callee);if(!c){var m=o.getFnType(r.callee);m&&(c=t.extractReturnType(m))}r.extras.inferredTypeObj=c;break;case"ObjectExpression":for(p=r.properties,f=0;f<p.length;f++)if(p[f].hasOwnProperty("key")&&(p[f].key.name?s=p[f].key.name:"Literal"===p[f].key.type&&p[f].key.value&&(s=p[f].key.value),s)){var v=null;if(s===p[f].value.name){var y=o.lookupTypeObj(p[f].value.name,null,!0);y&&y.range&&t.isFunctionOrConstructor(y.typeObj)&&(v=y.range)}v||(v=p[f].key.range),u=p[f].key.extras.jsdocType||p[f].value.extras.inferredTypeObj;var _=p[f].key.extras.associatedComment;o.addVariable(s,r,u,v,_.range),n.inRange(o.offset-1,p[f].key.range)&&o.storeTarget(o.scope(r))}for(f=0;f<p.length;f++)p[f].hasOwnProperty("key")&&(s=p[f].key.name,s&&"FunctionExpression"===p[f].value.type&&o.updateObjLitFunctionType(r,s,p[f].value));if(o.SapUI5&&r===o.SapUI5.node){if(o.SapUI5.moduleScope){var x={};x=o.newObject(null,r.range);for(var S="",I=x,D={},A=0;A<o.SapUI5.moduleScope.length;A++){var N=o.SapUI5.moduleScope[A],k=o.findType(I);S=0===A?N.name:S+"."+N.name,D={};var O={};if(A<o.SapUI5.moduleScope.length-1)O=E(r,o,S,D);else if(N.isConstructor)D=C(r,o);else{D._typeObj=o.SapUI5.node.extras.inferredTypeObj;var R=o.findType(o.SapUI5.node.extras.inferredTypeObj);R&&R.$$proto&&(D.path=R.$$proto.path,D.range=R.$$proto.range)}k[N.name]=D,I=O}}var j=o.findType(x);o.SapUI5.moduleType=j,o.SapUI5.typeObj=x}if(o.SapUIAmd&&r==o.SapUIAmd.node){var F=T(r.extras.inferredTypeObj,o,r);o.SapUIAmd.result=F}r.extras.fname&&o.popName(),o.popScope();break;case"LogicalExpression":case"BinaryExpression":switch(r.operator){case"+":r.extras.inferredTypeObj="String"===r.left.extras.inferredTypeObj.name||"String"===r.right.extras.inferredTypeObj.name?t.STRING_TYPE:t.NUMBER_TYPE;break;case"-":case"/":case"*":case"%":case"&":case"|":case"^":case"<<":case">>":case">>>":r.extras.inferredTypeObj=t.NUMBER_TYPE;break;case"&&":case"||":r.extras.inferredTypeObj=r.left.extras.inferredTypeObj;break;case"!==":case"!=":case"===":case"==":case"<":case"<=":case">":case">=":r.extras.inferredTypeObj=t.BOOLEAN_TYPE;break;default:r.extras.inferredTypeObj=t.OBJECT_TYPE}break;case"UpdateExpression":case"UnaryExpression":r.extras.inferredTypeObj="!"===r.operator?t.BOOLEAN_TYPE:t.NUMBER_TYPE;break;case"FunctionDeclaration":case"FunctionExpression":if(o.popScope(),r.body){var L;if(r.body.extras.isConstructor)L=r.id?r.id.range:r.extras.fnameRange,o.addOrSetVariable(t.extractReturnType(r.extras.inferredTypeObj),r.extras.target,r.extras.inferredTypeObj,L);else{if(!r.extras.jsdocReturn){var M,B=w(r.body);M=B&&B.extras&&B.extras.inferredTypeObj?B.extras.inferredTypeObj:t.UNDEFINED_TYPE,o.updateReturnType(r.extras.inferredTypeObj,M)}var U;r.id?(U=r.id.name,L=r.id.range):r.extras.appliesTo&&(U=r.extras.fname,L=r.extras.fnameRange),U&&o.addOrSetVariable(U,r.extras.target,r.extras.inferredTypeObj,L)}}if(o.SapUI5&&r===o.SapUI5.node){if(o.SapUI5.moduleScope)for(x={},x=o.newObject(null,r.range),S="",I=x,D={},A=0;A<o.SapUI5.moduleScope.length;A++){if(N=o.SapUI5.moduleScope[A],k=o.findType(I),S=0===A?N.name:S+"."+N.name,D={},O={},A<o.SapUI5.moduleScope.length-1)O=E(r,o,S,D);else{D._typeObj=o.SapUI5.node.extras.inferredTypeObj,R=o.findType(o.SapUI5.node.extras.inferredTypeObj);var V=o.getAllTypes()[S];R&&R.$$proto&&(V.path=D.path=R.$$proto.path,V.range=D.range=o.SapUI5.left.range);for(var Q in V)V.hasOwnProperty(Q)&&"_"===Q.charAt(0)&&delete V[Q]}k[N.name]=D,I=O}j=o.findType(x),o.SapUI5.moduleType=j,o.SapUI5.typeObj=x}else if(o.SapUI5&&o.SapUI5&&r.extras.appliesTo&&r.extras.appliesTo.$$Module===o.SapUI5.moduleId){var G=o.findType(o.SapUI5.node.extras.inferredTypeObj);if(G&&G.$$fntype&&G.$$fntype.result){var H=o.findType(G.$$fntype.result);D={_typeObj:r.extras.inferredTypeObj,path:o.SapUI5.moduleType.$$proto.path,range:r.extras.appliesTo.range},H[U]=D}}break;case"VariableDeclarator":u=r.init?r.init.callee?t.extractReturnType(o.getFnType(r.init.callee)):r.init.extras.inferredTypeObj:o.newFleetingObject(),r.id.extras.inferredTypeObj=u,r.extras.jsdocType||(r.extras.inferredTypeObj=u,o.addVariable(r.id.name,r.extras.target,u,r.id.range,r.extras.docRange)),n.inRange(o.offset-1,r.id.range)&&o.storeTarget(o.scope(r.id.extras.target)),o.popName();break;case"Property":r.extras.inferredTypeObj=r.key.extras.jsdocType?r.key.extras.jsdocType:r.key.extras.inferredTypeObj=r.value.extras.inferredTypeObj;break;case"AssignmentExpression":if(u=r.extras.jsdocType?r.extras.jsdocType:"="===r.operator?r.right.extras.inferredTypeObj:"+="===r.operator&&"String"===r.left.extras.inferredTypeObj.name?t.STRING_TYPE:t.NUMBER_TYPE,r.extras.inferredTypeObj=u,l=a(r.left),!l||"Identifier"!==l.type&&"Literal"!==l.type){if(r.left.computed&&(l=a(r.left.object),l&&("Identifier"!==l.type||"prototype"!==l.name))){var z=t.parameterizeArray(u);r.left.extras.inferredTypeObj=u,r.left.object.extras.inferredTypeObj=z,o.addOrSetVariable(l.name,l.extras.target,z,l.range,r.extras.docRange)}}else s=l.name?l.name:l.value,l.extras.inferredTypeObj=u,o.SapUIAmd&&o.SapUIAmd.node&&o.SapUIAmd.moduleConstructor&&n.inRange(r.range[0],o.SapUIAmd.moduleConstructor.range)?(o.addOrSetVariable(s,o.SapUIAmd.node,u,l.range,r.extras.docRange),n.inRange(o.offset-1,l.range)&&o.storeTarget(o.scope(o.SapUIAmd.node))):(o.addOrSetVariable(s,l.extras.target,u,l.range,r.extras.docRange),n.inRange(o.offset-1,l.range)&&o.storeTarget(o.scope(l.extras.target)));o.popName();break;case"Identifier":if(s=r.name,c=o.lookupTypeObj(s,r.extras.target)||(o.SapUIAmd&&o.SapUIAmd.node&&o.SapUIAmd.node.extras?o.lookupTypeObj(s,o.SapUIAmd.node):void 0),c&&!r.extras.isDecl){if(r.extras.inferredTypeObj=c,n.inRange(o.offset,r.range,!0)&&o.storeTarget(o.scope(r.extras.target)),r.extras.callArgs&&"FunctionType"===c.type){var W=c.params,q=r.extras.callArgs,X=Math.min(q.length||0,W.length||0);for(f=0;X>f;f++)q[f].extras=q[f].extras||{},q[f].extras.paramTypeObj="ParameterType"===W[f].type?W[f].expression:W[f]}r.extras.paramTypeObj&&t.leftTypeIsMoreGeneral(c,r.extras.paramTypeObj,o)&&(r.extras.inferredTypeObj=c=r.extras.paramTypeObj,o.addOrSetVariable(s,r.extras.target,c))}else r.extras.isLHS||(n.inRange(o.offset,r.range,!0)||i(s)?o.storeTarget(o.scope(r.extras.target)):r.extras.target?o.SapUIAmd&&o.SapUIAmd.node&&o.SapUIAmd.moduleConstructor&&n.inRange(r.range[0],o.SapUIAmd.moduleConstructor.range)?o.addVariable(s,o.SapUIAmd.node,o.newFleetingObject(),r.range):o.addVariable(s,r.extras.target,o.newFleetingObject(),r.range):r.extras.inferredTypeObj=o.addOrSetGlobalVariable(s,null,r.range).typeObj);break;case"ThisExpression":r.extras.inferredTypeObj=o.lookupTypeObj("this"),n.inRange(o.offset-1,r.range)&&o.storeTarget(o.scope());break;case"ReturnStatement":if(r.argument)if(o.SapUIAmd&&"CallExpression"===r.argument.type&&r.argument.callee.property&&"extend"===r.argument.callee.property.name){var $=r.argument.callee;$.property&&$.property.extras&&$.property.extras.callArgs&&2===$.property.extras.callArgs.length&&console.log("..... return from AMD Module factory method")}else r.extras.inferredTypeObj=r.argument.extras.inferredTypeObj;break;case"Literal":if(r.extras.target&&"string"==typeof r.value)s=r.value,c=o.lookupTypeObj(s,r.extras.target),r.extras.inferredTypeObj=c;else if(r.extras.target&&"number"==typeof r.value)r.extras.inferredTypeObj=t.NUMBER_TYPE;else{var J=typeof r.value;r.extras.inferredTypeObj=t.createNameType(J[0].toUpperCase()+J.substring(1,J.length))}break;case"ConditionalExpression":var K=r.consequent?r.consequent:r.alternate;K&&(r.extras.inferredTypeObj=K.extras.inferredTypeObj);break;case"ArrayExpression":if(r.elements)for(f=0;f<r.elements.length;f++)r.elements[f]&&(r.extras.inferredTypeObj=t.parameterizeArray(r.elements[f].extras.inferredTypeObj))}r.extras.inferredTypeObj||(r.extras.inferredTypeObj=t.OBJECT_TYPE)}function I(t,n,r){u(n,r),c(n);for(var i=[],o=0;o<n.comments.length;o++)"*"===n.comments[o].value.charAt(0)&&i.push(n.comments[o]);n.comments=i;try{e.visit(t,n,g,P)}catch(a){if("string"!=typeof a)throw a;return a}throw new Error("The visit function should always end with a throwable")}var D={"break":!0,"case":!0,"catch":!0,"continue":!0,"debugger":!0,"default":!0,"delete":!0,"do":!0,"else":!0,"finally":!0,"for":!0,"function":!0,"if":!0,"in":!0,"instanceof":!0,"new":!0,"return":!0,"switch":!0,"this":!0,"throw":!0,"try":!0,"typeof":!0,"var":!0,"void":!0,"while":!0,"with":!0},A=Array.isArray;return A||(A=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),{inferTypes:I}}),define("sap/watt/lib/orion/javascript/esprima/esprimaJsContentAssist",["./esprimaVisitor","./typeEnvironment","./typeInference","./typeUtils","./proposalUtils","./scriptedLogger","sap/watt/lib/doctrine/doctrine"],function(e,t,n,r,i,o){function a(e,t,n){for(var r=t.params||[],i=[],o=e+"(",a=r.length,s=0;a>s;s++)if("new"!==r[s].name&&"this"!==r[s].name){s>0&&(o+=", ");var u,c,l=r[s];"OptionalType"===l.type&&(l=l.expression,u=!0),"RestType"===l.type&&(l=l.expression,c=!0);var p=l.name||"arg"+s;c&&(p="..."+p),u&&(p="["+p+"]"),i.push({offset:n+o.length+1,length:p.length}),o+=p}return o+=")",{completion:o,positions:0===i.length?null:i}}function s(t,n,r,o){var a=function(e,t,r){if(e.extras||(e.extras={}),!r){if("Program"===e.type||"BlockStatement"===e.type&&i.inRange(n,e.range))throw"done";return t.pop(),!1}if(e.range&&i.inRange(n-1,e.range)||"Program"===e.type){if("Identifier"===e.type)throw"done";if(t.push(e),("FunctionDeclaration"===e.type||"FunctionExpression"===e.type)&&e.body&&i.isBefore(n,e.body.range))throw"done";if("MemberExpression"===e.type&&!e.property&&i.afterDot(n,e,o))throw"done";return!0}return!1},s=[];try{e.visit(t,s,a,a)}catch(u){if("done"!==u)throw u}var c;if(s&&s.length){for(var l=s.pop(),p=0;p<s.length;p++)if(!("FunctionDeclaration"!==s[p].type&&"FunctionExpression"!==s[p].type||s[p].id&&i.inRange(n,s[p].id.range,!0))){c=s[p];break}if("MemberExpression"===l.type){if(l.property&&i.inRange(n-1,l.property.range))return{kind:"member",toDefer:c};if(i.inRange(n-1,l.range)&&i.afterDot(n,l,o))return{kind:"member",toDefer:c}}else if("Program"===l.type||"BlockStatement"===l.type);else{if("VariableDeclarator"===l.type&&(!l.init||i.isBefore(n,l.init.range)))return!1;if(("FunctionDeclaration"===l.type||"FunctionExpression"===l.type)&&i.isBefore(n,l.body.range))return!1}}return{kind:"top",toDefer:c}}function u(e,t){var n,r,o,a=0,s=0;for(n=0;n<e.length&&(r=e[n].range[0],o=e[n].range[1],i.isBefore(r,t)&&i.isBefore(o,t));n++);if(n<e.length){for(a=n,n=n;n<e.length&&(r=e[n].range[0],o=e[n].range[1],i.inRange(r,t,!0)&&i.inRange(o,t,!0));n++);s=n}return e.splice(a,s-a)}function c(e,t){return t.substring(e.length)}function l(e,t,n){return e+" : "+r.createReadableType(t,n)}function p(e,t,n,r){var i,o,a,s,u=t[n].typeObj,c=r._allTypes[u.name];if(c){if(c.$$category){s=c.$$library,a=c.$$category;var l=e,p=l.indexOf("_obj");p>0&&(l=l.substring(0,p)),o="Global"!=l?l+"."+n:n,c.$$description&&(i=c.$$description)}else c=r._allTypes[e+"."+n],c||(c=r._allTypes[n]),c&&c.$$category&&(s=c.$$library,a=c.$$category,c.$$description&&(i=c.$$description),o=e+"."+n);if(a&&!i){var f=a.charAt(0).toUpperCase()+a.slice(1);i=f+" "+o}}return{category:a||"object",description:i,target:o,library:s}}function f(e,t,n,o,s,u,c,d){var h,m,g,v,y=t.lookupQualifiedType(e),_=y.$$proto;d||(d=100),_&&f(_.typeObj.name,t,n,o,s,u,c,d-10),c["---dummy"+d]={proposal:"",description:"---------------------------------",relevance:d-1,style:"hr",unselectable:!0};var x=Object.getPrototypeOf(y),b=!Object.getPrototypeOf(x);for(h in y)if(y.hasOwnProperty(h)||!b&&x.hasOwnProperty(h)){if("$"===h.charAt(0)&&"$"===h.charAt(1))continue;if(g=_||0!==h.indexOf("$_$")?h:h.substring(3),"this"===g&&"member"===n)continue;if(!y[h].typeObj)continue;if(i.looselyMatches(s,g,o)){m=y[h].typeObj;var w=p(e,y,h,t);if(t._allTypes[m.name]&&t._allTypes[m.name].$$fntype&&(m=t._allTypes[m.name].$$fntype),"FunctionType"===m.type){v=a(g,m,u-1);var S=v.completion+" : "+r.createReadableType(m,t);c["$"+g]={proposal:v.completion,library:w.library,category:w.category,description:S,helpDescription:w.description,helpTarget:w.target,positions:v.positions,escapePosition:u+v.completion.length,relevance:d+5,style:"emphasis",overwrite:!0}}else c["$"+g]={proposal:g,relevance:d,library:w.library,category:w.category,description:l(g,m,t),helpDescription:w.description,helpTarget:w.target,style:"emphasis",overwrite:!0}}}}function d(e,t,n,r){function i(e,n){return e.hasOwnProperty(n)&&0===n.indexOf(t)&&!r["$"+n]&&"$$proto"!==n&&"$$isBuiltin"!==n&&"$$fntype"!==n&&"$$newtype"!==n&&"$$prototype"!==n}function o(o){for(var u in o)if(i(o,u)){var p=o[u].typeObj;if("FunctionType"===p.type){var f=a(u,p,n-1);r[u]={proposal:c(t,f.completion),description:l(u,p,e),positions:f.positions,escapePosition:n+f.completion.length,relevance:-99,style:"noemphasis"},s=!0}else r[u]={proposal:c(t,u),description:l(u,p,e),relevance:-100,style:"noemphasis"},s=!0}}var s=!1,u=e.getAllTypes();for(var p in u)u[p].$$proto&&o(u[p]);s&&(r["---dummy"]={proposal:"",description:"Non-inferred proposals",relevance:-98,style:"noemphasis",unselectable:!0})}function h(e,t){if("object"==typeof e)switch(e.type){case"NullableLiteral":case"AllLiteral":case"NullLiteral":case"UndefinedLiteral":case"VoidLiteral":return;case"NameExpression":return t(e,t),void 0;case"ArrayType":h(e.expression,t);case"UnionType":return e.elements&&e.elements.forEach(function(e){h(e,t)}),void 0;case"RecordType":return e.fields&&e.fields.forEach(function(e){h(e,t)}),void 0;case"FieldType":return h(e.expression,t),void 0;case"FunctionType":return e.params&&e.params.forEach(function(e){h(e,t)}),e.result&&h(e.result,t),void 0;case"ParameterType":return h(e.expression,t),void 0;case"TypeApplication":e.applications&&e.applications.forEach(function(e){h(e,t)});case"RestType":case"NonNullableType":case"OptionalType":case"NullableType":return h(e.expression,t),void 0}}function m(e,t,n){var r=t[e],i=function(e){n[e.name]||(n[e.name]=!0,m(e.name,t,n))};if(r)for(var o in r)if(r.hasOwnProperty(o)&&"$$isBuiltin"!==o){var a="$$fntype"===o?r[o]:r[o].typeObj;if("$$newtype"===o)continue;h(a,i)}}function g(e,t,n,r){r=r||{};var i=function(e,i){for(;n[e.name];)e.name=t[e.name].$$proto.typeObj.name,e.name||(e.name="Object");if(!r[e.name]){r[e.name]=!0;var o=t[e.name];if(o)for(var a in o)if(o.hasOwnProperty(a)&&"$$isBuiltin"!==a){var s="$$fntype"===a?o[a]:o[a].typeObj;h(s,i)}}};h(e,i)}function v(e,t){return e?"NameExpression"===e.type&&t[e.name]&&t[e.name].$$fntype:void 0}function y(e,t,n){if(e.params)for(var r=0;r<e.params.length;r++){var i=e.params[r];v(i,t)&&(n&&(n[i.name]=!0),y(t[i.name].$$fntype,t,n),e.params[r]=t[i.name].$$fntype)}e.result&&v(e.result,t)&&(n&&(n[e.result.name]=!0),y(t[e.result.name].$$fntype,t,n),e.result=t[e.result.name].$$fntype)}function _(e,t,n,i){var o=doctrine.type.stringify(n,{compact:!0}),a=e.getAllTypes(),s={},u=!0;"NameExpression"!==n.type?h(n,function(e){s[e.name]||(s[e.name]=!0,m(e.name,a,s))}):(m(o,a,s),s[o]||(s[o]=!0,u=!1));for(var c in a)a.hasOwnProperty(c)&&!s[c]&&delete a[c];var l={};Object.keys(a).forEach(function(e){r.isEmpty(e,a)&&(l[e]=!0)}),g(n,a,l),u||delete a[o],Object.keys(l).forEach(function(e){delete a[e]});var p={};if(Object.keys(a).forEach(function(e){var t=a[e];for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if("$$fntype"===n)y(r,a,p);else{if(r.typeObj){var i=r.typeObj;v(i,a)&&(p[i.name]=!0,i=a[i.name].$$fntype)}r.typeSig=doctrine.type.stringify(i,{compact:!0}),delete r._typeObj}}}),"object"==typeof i)for(var f in i)if(i.hasOwnProperty(f)){var d=i[f];if("$$fntype"===f)y(d,a,p);else if("jQuery"===f||"sap"===f)delete i[f];else if(d.typeObj){var _=d.typeObj;v(_,a)&&(p[_.name]=!0,_=a[_.name].$$fntype),d.typeSig=doctrine.type.stringify(_,{compact:!0}),delete d._typeObj}}Object.keys(p).forEach(function(e){delete a[e]})}function x(e,t){for(var n=0;n<e.length;n++){var r=e[n];if("Block"===r.type&&("jslint"===r.value.substring(0,"jslint".length)||"jshint"===r.value.substring(0,"jshint".length)))return r.value.match(S)?"Window":r.value.match(E)?"Module":"Global"}if(t&&t.options){if(t.options.browser===!0)return"Window";if(t.options.node===!0)return"Module"}return"Global"}function b(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){if(e[n]){var r=e[n].proposal;if(r&&0==r.indexOf("$$"))continue}t.push(e[n])}t.sort(function(e,t){if(e.relevance>t.relevance)return-1;if(t.relevance>e.relevance)return 1;var n=e.description.toLowerCase(),r=t.description.toLowerCase();return r>n?-1:n>r?1:0});for(var i=[],o=t.length-1;o>=0&&0===t[o].description.indexOf("---");)i[o]=!0,o--;for(o=0;o<t.length&&0===t[o].description.indexOf("---");)i[o]=!0,o++;for(o+=1;o<t.length;)0===t[o].description.indexOf("---")&&0===t[o-1].description.indexOf("---")&&(i[o]=!0),o++;var a=[];for(o=0;o<t.length;o++)i[o]||a.push(t[o]);return a}function w(e,t){this.indexer=e,this.lintOptions=t}var S=/browser\s*:\s*true/,E=/node\s*:\s*true/;return w.prototype={computeProposals:function(t,n){var r=e.parse(t);return this._computeProposalsFromAST(r,t,n)},computeProplsalsFromAST:function(e,t,n){return this._computeProposalsFromAST(e,t,n)},computeSummaryFromMeta:function(e,t){return this._computeSummaryFromMeta(e,t)},calculateFunctionProposal:a,_computeProposalsFromAST:function(e,r,i){function a(){return Q([])}if(i.selection&&i.selection.start!==i.selection.end)return a();try{var c=e;if(!c)return a();var l=i.offset,p=s(c,l,i.prefix,r);if(p){var h=t.createEnvironment({buffer:r,uid:"local",offset:l,indexer:this.indexer,globalObjName:x(c.comments,this.lintOptions),comments:c.comments}),m=this,g=h.then(function(e){e.defer=p.toDefer,e.defer&&(e.deferredComments=u(e.comments,e.defer.range));try{var t=n.inferTypes(c,e,m.lintOptions),r={};return f(t,e,p.kind,i.caseSensitive,i.prefix,l-i.prefix.length,r),i.inferredOnly||d(e,i.prefix,l-i.prefix.length,r),b(r)}catch(a){throw"undefined"!=typeof o&&(o.error(a.message,"CONTENT_ASSIST"),o.error(a.stack,"CONTENT_ASSIST")),a}});return g}return a()}catch(v){throw"undefined"!=typeof o&&(o.error(v.message,"CONTENT_ASSIST"),o.error(v.stack,"CONTENT_ASSIST")),v}},_computeSummaryFromMeta:function(e,n){var i={},a={},s=t.createEnvironment({buffer:n,uid:"local",offset:0}),u=s.then(function(t){try{var s=t.lookupQualifiedType(e);if(!s||!s.hasOwnProperty(n))return Q({provided:{},types:{}});var u=s[n],c=t.findType(u.typeObj);if(c.$$newtype){var l=t.findType(c.$$newtype.typeObj);a[c.$$newtype.typeObj.name]={},a[c.$$newtype.typeObj.name].$$category=l.$$category,a[c.$$newtype.typeObj.name].$$library=l.$$library;for(var p in l)if(l.hasOwnProperty(p)&&"$"!==p.charAt(0)){var f=l[p],d=c.$$newtype.typeObj.name+"#"+p;a[d]=t.findType(f.typeObj);var h={type:f.typeObj.type,name:d};f=new r.Definition(h,f.range,f.path),a[c.$$newtype.typeObj.name][p]=f}if(c.$$fntype){var m=doctrine.type.stringify(c.$$fntype,{compact:!0});i=m}}else{i=c;for(p in c)if(c.hasOwnProperty(p)&&"$"!==p.charAt(0)){if(h=t.findType(c[p].typeObj),h.$$isBuiltin&&!h.$$library||a.hasOwnProperty(c[p].typeObj.name))continue;a[c[p].typeObj.name]=h}}return{provided:i,types:a}}catch(g){throw"undefined"!=typeof o&&(o.error(g.message,"CONTENT_ASSIST"),o.error(g.stack,"CONTENT_ASSIST")),g}});return u},_internalFindDefinition:function(o,a,c,l){var p;if(!o)return Q();var f=[],d=function(e){if(("Identifier"===e.type||"ThisExpression"===e.type)&&i.inRange(c,e.range,!0))throw p=e,"done";if(e.range[0]>c&&("ExpressionStatement"===e.type||"ReturnStatement"===e.type||"ifStatement"===e.type||"WhileStatement"===e.type||"Program"===e.type))throw"no hover";return("FunctionDeclaration"===e.type||"FunctionExpression"===e.type)&&f.push(e),!0};try{e.visit(o,{},d,function(e){e===f[f.length-1]&&f.pop()})}catch(h){if("no hover"===h)return Q();if("done"!==h)throw h}if(!p)return Q();var m=s(o,c,p.name,a),g=t.createEnvironment({buffer:a,uid:"local",offset:c,indexer:this.indexer,globalObjName:x(o.comments,this.lintOptions),comments:o.comments});return g.then(function(e){e.defer=m.toDefer,e.defer&&(e.deferredComments=u(e.comments,e.defer.range));var t=n.inferTypes(o,e,this.lintOptions),i="Identifier"===p.type?p.name:"this",a=e.lookupTypeObj(i,p.extras.target||t,!0);if(a){var s=e.getAllTypes();v(a.typeObj,s)&&(y(s[a.typeObj.name].$$fntype,s),a.typeObj=s[a.typeObj.name].$$fntype);var c=r.styleAsProperty(i,l)+" : "+r.createReadableType(a.typeObj,e,!0,0,l);return a.hoverText=c,a.hoverName=i,a.hoverRange=p.range,Q(a)}return Q({hoverName:i,hoverRange:p.range})})},_internalFindDefinitionOLD:function(o,a,s,c){var l;if(!o)return Q();var p=[],f=t.createEnvironment({buffer:a,uid:"local",offset:s,indexer:this.indexer,globalObjName:x(o.comments,this.lintOptions),comments:o.comments});return f.then(function(t){var a=function(e){if(("Identifier"===e.type||"ThisExpression"===e.type)&&i.inRange(s,e.range,!0))throw l=e,"done";if(e.range[0]>s&&("ExpressionStatement"===e.type||"ReturnStatement"===e.type||"ifStatement"===e.type||"WhileStatement"===e.type||"Program"===e.type))throw"no hover";return("FunctionDeclaration"===e.type||"FunctionExpression"===e.type)&&p.push(e),!0};try{e.visit(o,{},a,function(e){e===p[p.length-1]&&p.pop()})}catch(f){if("no hover"===f)return Q();if("done"!==f)throw f}if(!l)return Q();t.defer=p.pop(),t.defer&&l===t.defer.id&&delete t.defer,t.defer&&(t.deferredComments=u(t.comments,t.defer.range));var d=n.inferTypes(o,t,this.lintOptions),h="Identifier"===l.type?l.name:"this",m=t.lookupTypeObj(h,l.extras.target||d,!0);if(m){var g=t.getAllTypes();v(m.typeObj,g)&&(y(g[m.typeObj.name].$$fntype,g),m.typeObj=g[m.typeObj.name].$$fntype);var _=r.styleAsProperty(h,c)+" : "+r.createReadableType(m.typeObj,t,!0,0,c);return m.hoverText=_,m.hoverName=h,m.hoverRange=l.range,Q(m)}return Q({hoverName:h,hoverRange:l.range})})},computeHover:function(e,t,n){return this._internalFindDefinition(e,t,n,!0)},findDefinition:function(e,t,n){return this._internalFindDefinition(e,t,n,!1)},computeSummary:function(i,a){var s=e.parse(i);if(!s)return Q();var u=t.createEnvironment({buffer:i,uid:a,globalObjName:x(s.comments,this.lintOptions),comments:s.comments,indexer:this.indexer});return u.then(function(e){try{n.inferTypes(s,e,this.lintOptions)}catch(t){return"undefined"!=typeof o&&(o.error("Problem inferring in: "+a,"CONTENT_ASSIST"),o.error(t.message,"CONTENT_ASSIST"),o.error(t.stack,"CONTENT_ASSIST")),Q.reject(t)}var i,u,c,l;if(e.amdModule){var p=e.amdModule.arguments;c=p&&p.length>0?r.extractReturnType(e.getFnType(p[p.length-1])):r.OBJECT_TYPE,u="AMD"}else if(e.commonjsModule){var f=e.commonjsModule.arguments[0].params[1];c=f.extras.inferredTypeObj,i=e.findType(c)}else if(e.SapUIAmd&&e.SapUIAmd.result)c=e.SapUIAmd.result,i=e.findType(c),u="AMD";else if(e.SapUIAmd){var p=e.SapUIAmd.expression.arguments;c=p&&p.length>0?r.extractReturnType(e.getFnType(p[p.length-1])):r.OBJECT_TYPE,u="AMD"}else if(e.SapUI5)c=e.SapUI5.typeObj,i=e.SapUI5.moduleType,l=e.SapUI5.moduleId;else{i=e.globalScope();var d=i.exports||i.module&&e.getAllTypes()[i.module.typeObj.name]&&e.getAllTypes()[i.module.typeObj.name].exports;d?(u="commonjs",c=d.typeObj):(u="global",c=i["this"].typeObj)}r.isFunctionOrConstructor(c)||e.findType(c).$$isBuiltin||(i=e.findType(c));var h=e.getAllTypes();return e.SapUI5||e.SapUIAmd||_(e,u,c,i),r.isFunctionOrConstructor(c)||e.findType(c)&&e.findType(c).$$isBuiltin?i=doctrine.type.stringify(c,{compact:!0}):i.$$fntype&&(i=doctrine.type.stringify(i.$$fntype,{compact:!0})),Q({module:l,provided:i,types:h,kind:u})})}},{EsprimaJavaScriptContentAssistProvider:w}}),define("sap/watt/lib/orion/editor/templates",[],function(){function e(e,t){return t.substring(e.length)}function t(e,t,n,r){this.prefix=e,this.description=t,this.helpDescription=r,this.template=n,this._parse()}function n(e,t){this._keywords=e||[],this._templates=[];var n=[];t&&(n=n.concat(t)),this.addTemplates(n)}var r="${tab}",i="${delimiter}",o="${cursor}";return t.prototype={getProposal:function(e,t,n){var a,s=t-e.length,u={},c=void 0!==n.delimiter?n.delimiter:"\n";n.indentation&&(c+=n.indentation);for(var l=void 0!==n.tab?n.tab:"	",p=0,f=this.variables,d=this.segments,h=[],m=0;m<d.length;m++){var g=d[m],v=f[g];if(void 0!==v)switch(g){case r:g=l;break;case i:g=c;break;case o:g="",a=p;break;default:var y=u[g];y||(y=u[g]={data:v.data,positions:[]}),g=v.substitution,y.data&&y.data.values&&(g=y.data.values[0]),y.positions.push({offset:s+p,length:g.length})}h.push(g),p+=g.length}var _=[];for(var x in u)u.hasOwnProperty(x)&&_.push(u[x]);return h=h.join(""),void 0===a&&(a=h.length),{proposal:h,category:"template",description:this.description,helpDescription:this.helpDescription,groups:_,escapePosition:s+a}},match:function(e,t){return 0===this.prefix.indexOf(e)?!0:t?!1:e?0===this.prefix.toLowerCase().indexOf(e.toLowerCase()):!1},_parse:function(){var e,t=this.template,n=[],o={},a=0;t=t.replace(/\n/g,i),t=t.replace(/\t/g,r),t.replace(/\$\{((?:[^\\}]+|\\.))*\}/g,function(r,i,s){var u=r.substring(2,r.length-1),c=r,l=u,p=null,f=l.indexOf(":");-1!==f&&(l=l.substring(0,f),c="${"+l+"}",p=JSON.parse(u.substring(f+1).replace("\\}","}").trim()));var d=o[c];return d||(d=o[c]={}),d.substitution=l,p&&(d.data=p),e=t.substring(a,s),e&&n.push(e),n.push(c),a=s+r.length,l
}),e=t.substring(a,t.length),e&&n.push(e),this.segments=n,this.variables=o}},n.prototype={addTemplates:function(e){for(var n=this.getTemplates(),r=0;r<e.length;r++)n.push(new t(e[r].prefix,e[r].description,e[r].template,e[r].helpDescription))},computeProposals:function(e,t,n){var r=this.getPrefix(e,t,n),i=[];return this.isValid(r,e,t,n)?(i=i.concat(this.getTemplateProposals(r,t,n)),i=i.concat(this.getKeywordProposals(r,n))):i},computeTemplateProposals:function(e,t,n){var r=this.getPrefix(e,t,n),i=[];return this.isValid(r,e,t,n)?i.concat(this.getTemplateProposals(r,t,n)):i},computeKeywordProposals:function(e,t,n){var r=this.getPrefix(e,t,n),i=[];return this.isValid(r,e,t,n)?i.concat(this.getKeywordProposals(r,n)):i},getKeywords:function(){return this._keywords},getKeywordProposals:function(t,n){var r=[],i=n.caseSensitive,o=this.getKeywords();if(o)for(var a=0;a<o.length;a++){var s=!1;s=i?0===o[a].indexOf(t):0===o[a].indexOf(t.toLowerCase()),s&&r.push({proposal:e(t,o[a]),category:"keyword",description:o[a]})}return r},getPrefix:function(e,t,n){return n.prefix},getTemplates:function(){return this._templates},getTemplateProposals:function(e,t,n){for(var r=[],i=this.getTemplates(),o=0;o<i.length;o++){var a=i[o];if(a.match(e,n.caseSensitive)){var s=a.getProposal(e,t,n);this.removePrefix(e,s),r.push(s)}}return r},findTemplateFullyQualified:function(){return[]},removePrefix:function(t,n){var r=n.overwrite=n.proposal.substring(0,t.length)!==t;r||(n.proposal=e(t,n.proposal))},isValid:function(){return!0}},{Template:t,TemplateContentAssist:n}}),define("sap/watt/lib/orion/editor/keywords",[],function(){var e=["break","case","class","catch","continue","const","debugger","default","delete","do","else","enum","export","extends","false","finally","for","function","if","implements","import","in","instanceof","interface","let","new","null","package","private","protected","public","return","static","super","switch","this","throw","true","try","typeof","undefined","var","void","while","with","yield"],t=["alignment-adjust","alignment-baseline","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex-align","flex-flow","flex-inline-pack","flex-order","flex-pack","float","float-offset","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","grid-columns","grid-rows","hanging-punctuation","height","hyphenate-after","hyphenate-before","hyphenate-character","hyphenate-lines","hyphenate-resource","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","left","letter-spacing","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","mark","mark-after","mark-before","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","phonemes","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","size","speak","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-emphasis","text-height","text-indent","text-justify","text-outline","text-shadow","text-transform","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-pitch-range","voice-rate","voice-stress","voice-volume","volume","white-space","white-space-collapse","widows","width","word-break","word-spacing","word-wrap","z-index"],n=["abstract","boolean","break","byte","case","catch","char","class","continue","default","do","double","else","extends","false","final","finally","float","for","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while"];return{JSKeywords:e,CSSKeywords:t,JAVAKeywords:n}}),define("sap/watt/lib/orion/editor/jsTemplateContentAssist",["./templates","./keywords"],function(e,t){function n(e,t){for(var n="";t>=0&&(n=e[t],"\n"!==n&&"\r"!==n)&&/\s/.test(n);)t--;return n}function r(e){return JSON.stringify(e).replace("}","\\}")}function i(){}var o={type:"link",values:["undefined","object","boolean","number","string","function","xml"]},a="!@#$^&*.?<>",s=[{prefix:"if",description:"if - if statement",template:"if (${condition}) {\n	${cursor}\n}"},{prefix:"if",description:"if - if else statement",template:"if (${condition}) {\n	${cursor}\n} else {\n	\n}"},{prefix:"for",description:"for - iterate over array",template:"for (var ${i}=0; ${i}<${array}.length; ${i}++) {\n	${cursor}\n}"},{prefix:"for0",description:"for - iterate over array with local var",template:"for (var ${i}=0; ${i}<${array}.length; ${i}++) {\n	var ${value} = ${array}[${i}];\n	${cursor}\n}"},{prefix:"for",description:"for..in - iterate over properties of an object",template:"for (var ${property} in ${object}) {\n	if (${object}.hasOwnProperty(${property})) {\n		${cursor}\n	}\n}"},{prefix:"while",description:"while - while loop with condition",template:"while (${condition}) {\n	${cursor}\n}"},{prefix:"do",description:"do - do while loop with condition",template:"do {\n	${cursor}\n} while (${condition});"},{prefix:"switch",description:"switch - switch case statement",template:"switch (${expression}) {\n	case ${value1}:\n		${cursor}\n		break;\n	default:\n}"},{prefix:"case",description:"case - case statement",template:"case ${value}:\n	${cursor}\n	break;"},{prefix:"try",description:"try - try..catch statement",template:"try {\n	${cursor}\n} catch (${err}) {\n}"},{prefix:"try",description:"try - try..catch statement with finally block",template:"try {\n	${cursor}\n} catch (${err}) {\n} finally {\n}"},{prefix:"var",description:"var - variable declaration",template:"var ${name};"},{prefix:"var",description:"var - variable declaration with value",template:"var ${name} = ${value};"},{prefix:"let",description:"let - local scope variable declaration",template:"let ${name};"},{prefix:"let",description:"let - local scope variable declaration with value",template:"let ${name} = ${value};"},{prefix:"return",description:"return - return result",template:"return ${result};"},{prefix:"typeof",description:"typeof - typeof statement",template:'typeof ${object} === "${type:'+r(o)+'}"'},{prefix:"instanceof",description:"instanceof - instanceof statement",template:"${object} instanceof ${type}"},{prefix:"with",description:"with - with statement",template:"with (${object}) {\n	${cursor}\n}"},{prefix:"function",description:"function - function declaration",template:"function ${name} (${parameter}) {\n	${cursor}\n}"},{prefix:"nls",description:"string - non NLS",template:"${cursor} //$NON-NLS-${0}$"},{prefix:"log",description:"log - console log",template:"console.log(${object});"}];return i.prototype=new e.TemplateContentAssist(t.JSKeywords,s),i.prototype.resetTemplateAndKeywords=function(){this._templates=[];var e=[];s&&(e=e.concat(s)),this.addTemplates(e)},i.prototype.isValid=function(e,t,r){var i=n(t,r-e.length-1);return!i||-1===a.indexOf(i)},{JSTemplateContentAssistProvider:i}}),function(){function e(e,t){if(e!==t){var n=e===e,r=t===t;if(e>t||!n||e===w&&r)return 1;if(t>e||!r||t===w&&n)return-1}return 0}function t(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function n(e,t,n){if(t!==t)return d(e,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function r(e){return"function"==typeof e||!1}function i(e){return"string"==typeof e?e:null==e?"":e+""}function o(e){return e.charCodeAt(0)}function a(e,t){for(var n=-1,r=e.length;++n<r&&t.indexOf(e.charAt(n))>-1;);return n}function s(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function u(t,n){return e(t.criteria,n.criteria)||t.index-n.index}function c(t,n,r){for(var i=-1,o=t.criteria,a=n.criteria,s=o.length,u=r.length;++i<s;){var c=e(o[i],a[i]);if(c)return i>=u?c:c*(r[i]?1:-1)}return t.index-n.index}function l(e){return Qt[e]}function p(e){return Gt[e]}function f(e){return"\\"+Wt[e]}function d(e,t,n){for(var r=e.length,i=t+(n?0:-1);n?i--:++i<r;){var o=e[i];if(o!==o)return i}return-1}function h(e){return!!e&&"object"==typeof e}function m(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function g(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;)e[n]===t&&(e[n]=V,o[++i]=n);return o}function v(e,t){for(var n,r=-1,i=e.length,o=-1,a=[];++r<i;){var s=e[r],u=t?t(s,r,e):s;r&&n===u||(n=u,a[++o]=s)}return a}function y(e){for(var t=-1,n=e.length;++t<n&&m(e.charCodeAt(t)););return t}function _(e){for(var t=e.length;t--&&m(e.charCodeAt(t)););return t}function x(e){return Ht[e]}function b(m){function X(e){if(h(e)&&!Tu(e)&&!(e instanceof Qt)){if(e instanceof et)return e;if(Ga.call(e,"__chain__")&&Ga.call(e,"__wrapped__"))return ai(e)}return new et(e)}function Y(){}function et(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function Qt(e){this.__wrapped__=e,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=ws,this.__views__=null}function Gt(){var e=this.__actions__,t=this.__iteratees__,n=this.__views__,r=new Qt(this.__wrapped__);return r.__actions__=e?nn(e):null,r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=t?nn(t):null,r.__takeCount__=this.__takeCount__,r.__views__=n?nn(n):null,r}function Ht(){if(this.__filtered__){var e=new Qt(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function zt(){var e=this.__wrapped__.value();if(!Tu(e))return tr(e,this.__actions__);var t=this.__dir__,n=0>t,r=Br(0,e.length,this.__views__),i=r.start,o=r.end,a=o-i,s=n?o:i-1,u=gs(a,this.__takeCount__),c=this.__iteratees__,l=c?c.length:0,p=0,f=[];e:for(;a--&&u>p;){s+=t;for(var d=-1,h=e[s];++d<l;){var m=c[d],g=m.iteratee,v=m.type;if(v==L){if(m.done&&(n?s>m.index:s<m.index)&&(m.count=0,m.done=!1),m.index=s,!m.done){var y=m.limit;if(!(m.done=y>-1?m.count++>=y:!g(h)))continue e}}else{var _=g(h);if(v==B)h=_;else if(!_){if(v==M)continue e;break e}}}f[p++]=h}return f}function Wt(){this.__data__={}}function qt(e){return this.has(e)&&delete this.__data__[e]}function Xt(e){return"__proto__"==e?w:this.__data__[e]}function $t(e){return"__proto__"!=e&&Ga.call(this.__data__,e)}function Jt(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function Kt(e){var t=e?e.length:0;for(this.data={hash:fs(null),set:new is};t--;)this.push(e[t])}function Yt(e,t){var n=e.data,r="string"==typeof t||Co(t)?n.set.has(t):n.hash[t];return r?0:-1}function tn(e){var t=this.data;"string"==typeof e||Co(e)?t.set.add(e):t.hash[e]=!0}function nn(e,t){var n=-1,r=e.length;for(t||(t=Ia(r));++n<r;)t[n]=e[n];return t}function rn(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function on(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);return e}function an(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function sn(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[++i]=a)}return o}function un(e,t){for(var n=-1,r=e.length,i=Ia(r);++n<r;)i[n]=t(e[n],n,e);return i}function cn(e){for(var t=-1,n=e.length,r=bs;++t<n;){var i=e[t];i>r&&(r=i)}return r}function ln(e){for(var t=-1,n=e.length,r=ws;++t<n;){var i=e[t];r>i&&(r=i)}return r}function pn(e,t,n,r){var i=-1,o=e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function fn(e,t,n,r){var i=e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function dn(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function hn(e){for(var t=e.length,n=0;t--;)n+=+e[t]||0;return n}function mn(e,t){return e===w?t:e}function gn(e,t,n,r){return e!==w&&Ga.call(r,n)?e:t}function vn(e,t,n){var r=Mu(t);ts.apply(r,Qs(t));for(var i=-1,o=r.length;++i<o;){var a=r[i],s=e[a],u=n(s,t[a],a,e,t);(u===u?u===s:s!==s)&&(s!==w||a in e)||(e[a]=u)}return e}function yn(e,t){for(var n=-1,r=null==e,i=!r&&Hr(e),o=i&&e.length,a=t.length,s=Ia(a);++n<a;){var u=t[n];s[n]=i?zr(u,o)?e[u]:w:r?w:e[u]}return s}function _n(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}function xn(e,t,n){var r=typeof e;return"function"==r?t===w?e:ir(e,t,n):null==e?ma:"object"==r?Mn(e):t===w?ba(e):Bn(e,t)}function bn(e,t,n,r,i,o,a){var s;if(n&&(s=i?n(e,r,i):n(e)),s!==w)return s;if(!Co(e))return e;var u=Tu(e);if(u){if(s=Ur(e),!t)return nn(e,s)}else{var c=za.call(e),l=c==q;if(c!=J&&c!=Q&&(!l||i))return Ut[c]?Qr(e,c,t):i?e:{};if(s=Vr(l?{}:e),!t)return Ns(s,e)}o||(o=[]),a||(a=[]);for(var p=o.length;p--;)if(o[p]==e)return a[p];return o.push(e),a.push(s),(u?rn:An)(e,function(r,i){s[i]=bn(r,t,n,i,e,o,a)}),s}function wn(e,t,n){if("function"!=typeof e)throw new La(U);return os(function(){e.apply(w,n)},t)}function Sn(e,t){var r=e?e.length:0,i=[];if(!r)return i;var o=-1,a=Mr(),s=a==n,u=s&&t.length>=200?Ms(t):null,c=t.length;u&&(a=Yt,s=!1,t=u);e:for(;++o<r;){var l=e[o];if(s&&l===l){for(var p=c;p--;)if(t[p]===l)continue e;i.push(l)}else a(t,l,0)<0&&i.push(l)}return i}function En(e,t){var n=!0;return Os(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Cn(e,t,n,r){var i=e.length;for(n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=r===w||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)e[n++]=t;return e}function Tn(e,t){var n=[];return Os(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Pn(e,t,n,r){var i;return n(e,function(e,n,o){return t(e,n,o)?(i=r?n:e,!1):void 0}),i}function In(e,t,n){for(var r=-1,i=e.length,o=-1,a=[];++r<i;){var s=e[r];if(h(s)&&Hr(s)&&(n||Tu(s)||yo(s))){t&&(s=In(s,t,n));for(var u=-1,c=s.length;++u<c;)a[++o]=s[u]}else n||(a[++o]=s)}return a}function Dn(e,t){return js(e,t,Qo)}function An(e,t){return js(e,t,Mu)}function Nn(e,t){return Fs(e,t,Mu)}function kn(e,t){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];Iu(e[a])&&(o[++i]=a)}return o}function On(e,t,n){if(null!=e){n!==w&&n in ii(e)&&(t=[n]);for(var r=-1,i=t.length;null!=e&&++r<i;)e=e[t[r]];return r&&r==i?e:w}}function Rn(e,t,n,r,i,o){if(e===t)return!0;var a=typeof e,s=typeof t;return"function"!=a&&"object"!=a&&"function"!=s&&"object"!=s||null==e||null==t?e!==e&&t!==t:jn(e,t,Rn,n,r,i,o)}function jn(e,t,n,r,i,o,a){var s=Tu(e),u=Tu(t),c=G,l=G;s||(c=za.call(e),c==Q?c=J:c!=J&&(s=Oo(e))),u||(l=za.call(t),l==Q?l=J:l!=J&&(u=Oo(t)));var p=c==J,f=l==J,d=c==l;if(d&&!s&&!p)return Rr(e,t,c);if(!i){var h=p&&Ga.call(e,"__wrapped__"),m=f&&Ga.call(t,"__wrapped__");if(h||m)return n(h?e.value():e,m?t.value():t,r,i,o,a)}if(!d)return!1;o||(o=[]),a||(a=[]);for(var g=o.length;g--;)if(o[g]==e)return a[g]==t;o.push(e),a.push(t);var v=(s?Or:jr)(e,t,n,r,i,o,a);return o.pop(),a.pop(),v}function Fn(e,t,n,r,i){for(var o=-1,a=t.length,s=!i;++o<a;)if(s&&r[o]?n[o]!==e[t[o]]:!(t[o]in e))return!1;for(o=-1;++o<a;){var u=t[o],c=e[u],l=n[o];if(s&&r[o])var p=c!==w||u in e;else p=i?i(c,l,u):w,p===w&&(p=Rn(l,c,i,!0));if(!p)return!1}return!0}function Ln(e,t){var n=-1,r=Hr(e)?Ia(e.length):[];return Os(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function Mn(e){var t=Mu(e),n=t.length;if(!n)return ha(!0);if(1==n){var r=t[0],i=e[r];if(Jr(i))return function(e){return null==e?!1:e[r]===i&&(i!==w||r in ii(e))}}for(var o=Ia(n),a=Ia(n);n--;)i=e[t[n]],o[n]=i,a[n]=Jr(i);return function(e){return null!=e&&Fn(ii(e),t,o,a)}}function Bn(e,t){var n=Tu(e),r=qr(e)&&Jr(t),i=e+"";return e=oi(e),function(o){if(null==o)return!1;var a=i;if(o=ii(o),!(!n&&r||a in o)){if(o=1==e.length?o:On(o,qn(e,0,-1)),null==o)return!1;a=xi(e),o=ii(o)}return o[a]===t?t!==w||a in o:Rn(t,o[a],null,!0)}}function Un(e,t,n,r,i){if(!Co(e))return e;var o=Hr(t)&&(Tu(t)||Oo(t));if(!o){var a=Mu(t);ts.apply(a,Qs(t))}return rn(a||t,function(s,u){if(a&&(u=s,s=t[u]),h(s))r||(r=[]),i||(i=[]),Vn(e,t,u,Un,n,r,i);else{var c=e[u],l=n?n(c,s,u,e,t):w,p=l===w;p&&(l=s),!o&&l===w||!p&&(l===l?l===c:c!==c)||(e[u]=l)}}),e}function Vn(e,t,n,r,i,o,a){for(var s=o.length,u=t[n];s--;)if(o[s]==u)return e[n]=a[s],void 0;var c=e[n],l=i?i(c,u,n,e,t):w,p=l===w;p&&(l=u,Hr(u)&&(Tu(u)||Oo(u))?l=Tu(c)?c:Hr(c)?nn(c):[]:Du(u)||yo(u)?l=yo(c)?Fo(c):Du(c)?c:{}:p=!1),o.push(u),a.push(l),p?e[n]=r(l,u,i,o,a):(l===l?l!==c:c===c)&&(e[n]=l)}function Qn(e){return function(t){return null==t?w:t[e]}}function Gn(e){var t=e+"";return e=oi(e),function(n){return On(n,e,t)}}function Hn(e,t){for(var n=e?t.length:0;n--;){var r=parseFloat(t[n]);if(r!=i&&zr(r)){var i=r;as.call(e,r,1)}}return e}function zn(e,t){return e+Ya(xs()*(t-e+1))}function Wn(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function qn(e,t,n){var r=-1,i=e.length;t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),n=n===w||n>i?i:+n||0,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Ia(i);++r<i;)o[r]=e[r+t];return o}function Xn(e,t){var n;return Os(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function $n(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Jn(e,t,n){var r=Lr(),i=-1;t=un(t,function(e){return r(e)});var o=Ln(e,function(e){var n=un(t,function(t){return t(e)});return{criteria:n,index:++i,value:e}});return $n(o,function(e,t){return c(e,t,n)})}function Kn(e,t){var n=0;return Os(e,function(e,r,i){n+=+t(e,r,i)||0}),n}function Yn(e,t){var r=-1,i=Mr(),o=e.length,a=i==n,s=a&&o>=200,u=s?Ms():null,c=[];u?(i=Yt,a=!1):(s=!1,u=t?[]:c);e:for(;++r<o;){var l=e[r],p=t?t(l,r,e):l;if(a&&l===l){for(var f=u.length;f--;)if(u[f]===p)continue e;t&&u.push(p),c.push(l)}else i(u,p,0)<0&&((t||s)&&u.push(p),c.push(l))}return c}function Zn(e,t){for(var n=-1,r=t.length,i=Ia(r);++n<r;)i[n]=e[t[n]];return i}function er(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?qn(e,r?0:o,r?o+1:i):qn(e,r?o+1:0,r?i:o)}function tr(e,t){var n=e;n instanceof Qt&&(n=n.value());for(var r=-1,i=t.length;++r<i;){var o=[n],a=t[r];ts.apply(o,a.args),n=a.func.apply(a.thisArg,o)}return n}function nr(e,t,n){var r=0,i=e?e.length:r;if("number"==typeof t&&t===t&&Cs>=i){for(;i>r;){var o=r+i>>>1,a=e[o];(n?t>=a:t>a)?r=o+1:i=o}return i}return rr(e,t,ma,n)}function rr(e,t,n,r){t=n(t);for(var i=0,o=e?e.length:0,a=t!==t,s=t===w;o>i;){var u=Ya((i+o)/2),c=n(e[u]),l=c===c;if(a)var p=l||r;else p=s?l&&(r||c!==w):r?t>=c:t>c;p?i=u+1:o=u}return gs(o,Es)}function ir(e,t,n){if("function"!=typeof e)return ma;if(t===w)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,a){return e.call(t,n,r,i,o,a)}}return function(){return e.apply(t,arguments)}}function or(e){return $a.call(e,0)}function ar(e,t,n){for(var r=n.length,i=-1,o=ms(e.length-r,0),a=-1,s=t.length,u=Ia(o+s);++a<s;)u[a]=t[a];for(;++i<r;)u[n[i]]=e[i];for(;o--;)u[a++]=e[i++];return u}function sr(e,t,n){for(var r=-1,i=n.length,o=-1,a=ms(e.length-i,0),s=-1,u=t.length,c=Ia(a+u);++o<a;)c[o]=e[o];for(var l=o;++s<u;)c[l+s]=t[s];for(;++r<i;)c[l+n[r]]=e[o++];return c}function ur(e,t){return function(n,r,i){var o=t?t():{};if(r=Lr(r,i,3),Tu(n))for(var a=-1,s=n.length;++a<s;){var u=n[a];e(o,u,r(u,a,n),n)}else Os(n,function(t,n,i){e(o,t,r(t,n,i),i)});return o}}function cr(e){return po(function(t,n){var r=-1,i=null==t?0:n.length,o=i>2&&n[i-2],a=i>2&&n[2],s=i>1&&n[i-1];for("function"==typeof o?(o=ir(o,s,5),i-=2):(o="function"==typeof s?s:null,i-=o?1:0),a&&Wr(n[0],n[1],a)&&(o=3>i?null:o,i=1);++r<i;){var u=n[r];u&&e(t,u,o)}return t})}function lr(e,t){return function(n,r){var i=n?Vs(n):0;if(!$r(i))return e(n,r);for(var o=t?i:-1,a=ii(n);(t?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function pr(e){return function(t,n,r){for(var i=ii(t),o=r(t),a=o.length,s=e?a:-1;e?s--:++s<a;){var u=o[s];if(n(i[u],u,i)===!1)break}return t}}function fr(e,t){function n(){var i=this&&this!==Zt&&this instanceof n?r:e;return i.apply(t,arguments)}var r=hr(e);return n}function dr(e){return function(t){for(var n=-1,r=fa(Yo(t)),i=r.length,o="";++n<i;)o=e(o,r[n],n);return o}}function hr(e){return function(){var t=ks(e.prototype),n=e.apply(t,arguments);return Co(n)?n:t}}function mr(e){function t(n,r,i){i&&Wr(n,r,i)&&(r=null);var o=kr(n,e,null,null,null,null,null,r);return o.placeholder=t.placeholder,o}return t}function gr(e,t){return function(n,r,i){i&&Wr(n,r,i)&&(r=null);var a=Lr(),s=null==r;if(a===xn&&s||(s=!1,r=a(r,i,3)),s){var u=Tu(n);if(u||!ko(n))return e(u?n:ri(n));r=o}return Fr(n,r,t)}}function vr(e,n){return function(r,i,o){if(i=Lr(i,o,3),Tu(r)){var a=t(r,i,n);return a>-1?r[a]:w}return Pn(r,i,e)}}function yr(e){return function(n,r,i){return n&&n.length?(r=Lr(r,i,3),t(n,r,e)):-1}}function _r(e){return function(t,n,r){return n=Lr(n,r,3),Pn(t,n,e,!0)}}function xr(e){return function(){var t=arguments.length;if(!t)return function(){return arguments[0]};for(var n,r=e?t:-1,i=0,o=Ia(t);e?r--:++r<t;){var a=o[i++]=arguments[r];if("function"!=typeof a)throw new La(U);var s=n?"":Us(a);n="wrapper"==s?new et([]):n}for(r=n?-1:t;++r<t;){a=o[r],s=Us(a);var u="wrapper"==s?Bs(a):null;n=u&&Xr(u[0])&&u[1]==(N|P|D|k)&&!u[4].length&&1==u[9]?n[Us(u[0])].apply(n,u[3]):1==a.length&&Xr(a)?n[s]():n.thru(a)}return function(){var e=arguments;if(n&&1==e.length&&Tu(e[0]))return n.plant(e[0]).value();for(var r=0,i=o[r].apply(this,e);++r<t;)i=o[r].call(this,i);return i}}}function br(e,t){return function(n,r,i){return"function"==typeof r&&i===w&&Tu(n)?e(n,r):t(n,ir(r,i,3))}}function wr(e){return function(t,n,r){return("function"!=typeof n||r!==w)&&(n=ir(n,r,3)),e(t,n,Qo)}}function Sr(e){return function(t,n,r){return("function"!=typeof n||r!==w)&&(n=ir(n,r,3)),e(t,n)}}function Er(e){return function(t,n,r){var i={};return n=Lr(n,r,3),An(t,function(t,r,o){var a=n(t,r,o);r=e?a:r,t=e?t:a,i[r]=t}),i}}function Cr(e){return function(t,n,r){return t=i(t),(e?t:"")+Dr(t,n,r)+(e?"":t)}}function Tr(e){var t=po(function(n,r){var i=g(r,t.placeholder);return kr(n,e,null,r,i)});return t}function Pr(e,t){return function(n,r,i,o){var a=arguments.length<3;return"function"==typeof r&&o===w&&Tu(n)?e(n,r,i,a):Wn(n,Lr(r,o,4),i,a,t)}}function Ir(e,t,n,r,i,o,a,s,u,c){function l(){for(var x=arguments.length,b=x,S=Ia(x);b--;)S[b]=arguments[b];if(r&&(S=ar(S,r,i)),o&&(S=sr(S,o,a)),h||v){var T=l.placeholder,P=g(S,T);if(x-=P.length,c>x){var I=s?nn(s):null,N=ms(c-x,0),k=h?P:null,O=h?null:P,R=h?S:null,j=h?null:S;t|=h?D:A,t&=~(h?A:D),m||(t&=~(E|C));var F=[e,t,n,R,k,j,O,I,u,N],L=Ir.apply(w,F);return Xr(e)&&Gs(L,F),L.placeholder=T,L}}var M=f?n:this;d&&(e=M[_]),s&&(S=ei(S,s)),p&&u<S.length&&(S.length=u);var B=this&&this!==Zt&&this instanceof l?y||hr(e):e;return B.apply(M,S)}var p=t&N,f=t&E,d=t&C,h=t&P,m=t&T,v=t&I,y=!d&&hr(e),_=e;return l}function Dr(e,t,n){var r=e.length;if(t=+t,r>=t||!ds(t))return"";var i=t-r;return n=null==n?" ":n+"",ia(n,Ja(i/n.length)).slice(0,i)}function Ar(e,t,n,r){function i(){for(var t=-1,s=arguments.length,u=-1,c=r.length,l=Ia(s+c);++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++t];var p=this&&this!==Zt&&this instanceof i?a:e;return p.apply(o?n:this,l)}var o=t&E,a=hr(e);return i}function Nr(e){return function(t,n,r,i){var o=Lr(r);return o===xn&&null==r?nr(t,n,e):rr(t,n,o(r,i,1),e)}}function kr(e,t,n,r,i,o,a,s){var u=t&C;if(!u&&"function"!=typeof e)throw new La(U);var c=r?r.length:0;if(c||(t&=~(D|A),r=i=null),c-=i?i.length:0,t&A){var l=r,p=i;r=i=null}var f=u?null:Bs(e),d=[e,t,n,r,i,l,p,o,a,s];if(f&&(Kr(d,f),t=d[1],s=d[9]),d[9]=null==s?u?0:e.length:ms(s-c,0)||0,t==E)var h=fr(d[0],d[2]);else h=t!=D&&t!=(E|D)||d[4].length?Ir.apply(w,d):Ar.apply(w,d);var m=f?Ls:Gs;return m(h,d)}function Or(e,t,n,r,i,o,a){var s=-1,u=e.length,c=t.length,l=!0;if(u!=c&&!(i&&c>u))return!1;for(;l&&++s<u;){var p=e[s],f=t[s];if(l=w,r&&(l=i?r(f,p,s):r(p,f,s)),l===w)if(i)for(var d=c;d--&&(f=t[d],!(l=p&&p===f||n(p,f,r,i,o,a))););else l=p&&p===f||n(p,f,r,i,o,a)}return!!l}function Rr(e,t,n){switch(n){case H:case z:return+e==+t;case W:return e.name==t.name&&e.message==t.message;case $:return e!=+e?t!=+t:e==+t;case K:case Z:return e==t+""}return!1}function jr(e,t,n,r,i,o,a){var s=Mu(e),u=s.length,c=Mu(t),l=c.length;if(u!=l&&!i)return!1;for(var p=i,f=-1;++f<u;){var d=s[f],h=i?d in t:Ga.call(t,d);if(h){var m=e[d],g=t[d];h=w,r&&(h=i?r(g,m,d):r(m,g,d)),h===w&&(h=m&&m===g||n(m,g,r,i,o,a))}if(!h)return!1;p||(p="constructor"==d)}if(!p){var v=e.constructor,y=t.constructor;if(v!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y))return!1}return!0}function Fr(e,t,n){var r=n?ws:bs,i=r,o=i;return Os(e,function(e,a,s){var u=t(e,a,s);((n?i>u:u>i)||u===r&&u===o)&&(i=u,o=e)}),o}function Lr(e,t,n){var r=X.callback||da;return r=r===da?xn:r,n?r(e,t,n):r}function Mr(e,t,r){var i=X.indexOf||vi;return i=i===vi?n:i,e?i(e,t,r):i}function Br(e,t,n){for(var r=-1,i=n?n.length:0;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=gs(t,e+a);break;case"takeRight":e=ms(e,t-a)}}return{start:e,end:t}}function Ur(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ga.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Vr(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Ra),new t}function Qr(e,t,n){var r=e.constructor;switch(t){case tt:return or(e);case H:case z:return new r(+e);case nt:case rt:case it:case ot:case at:case st:case ut:case ct:case lt:var i=e.buffer;return new r(n?or(i):i,e.byteOffset,e.length);case $:case Z:return new r(e);case K:var o=new r(e.source,Dt.exec(e));o.lastIndex=e.lastIndex}return o}function Gr(e,t,n){null==e||qr(t,e)||(t=oi(t),e=1==t.length?e:On(e,qn(t,0,-1)),t=xi(t));var r=null==e?e:e[t];return null==r?w:r.apply(e,n)}function Hr(e){return null!=e&&$r(Vs(e))}function zr(e,t){return e=+e,t=null==t?Ps:t,e>-1&&0==e%1&&t>e}function Wr(e,t,n){if(!Co(n))return!1;var r=typeof t;if("number"==r?Hr(n)&&zr(t,n.length):"string"==r&&t in n){var i=n[t];return e===e?e===i:i!==i}return!1}function qr(e,t){var n=typeof e;if("string"==n&&wt.test(e)||"number"==n)return!0;if(Tu(e))return!1;var r=!bt.test(e);return r||null!=t&&e in ii(t)}function Xr(e){var t=Us(e);return!!t&&e===X[t]&&t in Qt.prototype}function $r(e){return"number"==typeof e&&e>-1&&0==e%1&&Ps>=e}function Jr(e){return e===e&&!Co(e)}function Kr(e,t){var n=e[1],r=t[1],i=n|r,o=N>i,a=r==N&&n==P||r==N&&n==k&&e[7].length<=t[8]||r==(N|k)&&n==P;if(!o&&!a)return e;r&E&&(e[2]=t[2],i|=n&E?0:T);var s=t[3];if(s){var u=e[3];e[3]=u?ar(u,s,t[4]):nn(s),e[4]=u?g(e[3],V):nn(t[4])}return s=t[5],s&&(u=e[5],e[5]=u?sr(u,s,t[6]):nn(s),e[6]=u?g(e[5],V):nn(t[6])),s=t[7],s&&(e[7]=nn(s)),r&N&&(e[8]=null==e[8]?t[8]:gs(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function Yr(e,t){e=ii(e);for(var n=-1,r=t.length,i={};++n<r;){var o=t[n];o in e&&(i[o]=e[o])}return i}function Zr(e,t){var n={};return Dn(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}function ei(e,t){for(var n=e.length,r=gs(t.length,n),i=nn(e);r--;){var o=t[r];e[r]=zr(o,n)?i[o]:w}return e}function ti(e){var t;if(X.support,!h(e)||za.call(e)!=J||!Ga.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return Dn(e,function(e,t){n=t}),n===w||Ga.call(e,n)}function ni(e){for(var t=Qo(e),n=t.length,r=n&&e.length,i=X.support,o=r&&$r(r)&&(Tu(e)||i.nonEnumArgs&&yo(e)),a=-1,s=[];++a<n;){var u=t[a];(o&&zr(u,r)||Ga.call(e,u))&&s.push(u)}return s}function ri(e){return null==e?[]:Hr(e)?Co(e)?e:Ra(e):qo(e)}function ii(e){return Co(e)?e:Ra(e)}function oi(e){if(Tu(e))return e;var t=[];return i(e).replace(St,function(e,n,r,i){t.push(r?i.replace(Pt,"$1"):n||e)}),t}function ai(e){return e instanceof Qt?e.clone():new et(e.__wrapped__,e.__chain__,nn(e.__actions__))}function si(e,t,n){t=(n?Wr(e,t,n):null==t)?1:ms(+t||1,1);for(var r=0,i=e?e.length:0,o=-1,a=Ia(Ja(i/t));i>r;)a[++o]=qn(e,r,r+=t);return a}function ui(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var o=e[t];o&&(i[++r]=o)}return i}function ci(e,t,n){var r=e?e.length:0;return r?((n?Wr(e,t,n):null==t)&&(t=1),qn(e,0>t?0:t)):[]}function li(e,t,n){var r=e?e.length:0;return r?((n?Wr(e,t,n):null==t)&&(t=1),t=r-(+t||0),qn(e,0,0>t?0:t)):[]}function pi(e,t,n){return e&&e.length?er(e,Lr(t,n,3),!0,!0):[]}function fi(e,t,n){return e&&e.length?er(e,Lr(t,n,3),!0):[]}function di(e,t,n,r){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&Wr(e,t,n)&&(n=0,r=i),Cn(e,t,n,r)):[]}function hi(e){return e?e[0]:w}function mi(e,t,n){var r=e?e.length:0;return n&&Wr(e,t,n)&&(t=!1),r?In(e,t):[]}function gi(e){var t=e?e.length:0;return t?In(e,!0):[]}function vi(e,t,r){var i=e?e.length:0;if(!i)return-1;if("number"==typeof r)r=0>r?ms(i+r,0):r;else if(r){var o=nr(e,t),a=e[o];return(t===t?t===a:a!==a)?o:-1}return n(e,t,r||0)}function yi(e){return li(e,1)}function _i(){for(var e=[],t=-1,r=arguments.length,i=[],o=Mr(),a=o==n,s=[];++t<r;){var u=arguments[t];Hr(u)&&(e.push(u),i.push(a&&u.length>=120?Ms(t&&u):null))}if(r=e.length,2>r)return s;var c=e[0],l=-1,p=c?c.length:0,f=i[0];e:for(;++l<p;)if(u=c[l],(f?Yt(f,u):o(s,u,0))<0){for(t=r;--t;){var d=i[t];if((d?Yt(d,u):o(e[t],u,0))<0)continue e}f&&f.push(u),s.push(u)}return s}function xi(e){var t=e?e.length:0;return t?e[t-1]:w}function bi(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?ms(r+n,0):gs(n||0,r-1))+1;else if(n){i=nr(e,t,!0)-1;var o=e[i];return(t===t?t===o:o!==o)?i:-1
}if(t!==t)return d(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1}function wi(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=Mr(),i=e.length;++n<i;)for(var o=0,a=e[n];(o=r(t,a,o))>-1;)as.call(t,o,1);return t}function Si(e,t,n){var r=[];if(!e||!e.length)return r;var i=-1,o=[],a=e.length;for(t=Lr(t,n,3);++i<a;){var s=e[i];t(s,i,e)&&(r.push(s),o.push(i))}return Hn(e,o),r}function Ei(e){return ci(e,1)}function Ci(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Wr(e,t,n)&&(t=0,n=r),qn(e,t,n)):[]}function Ti(e,t,n){var r=e?e.length:0;return r?((n?Wr(e,t,n):null==t)&&(t=1),qn(e,0,0>t?0:t)):[]}function Pi(e,t,n){var r=e?e.length:0;return r?((n?Wr(e,t,n):null==t)&&(t=1),t=r-(+t||0),qn(e,0>t?0:t)):[]}function Ii(e,t,n){return e&&e.length?er(e,Lr(t,n,3),!1,!0):[]}function Di(e,t,n){return e&&e.length?er(e,Lr(t,n,3)):[]}function Ai(e,t,r,i){var o=e?e.length:0;if(!o)return[];null!=t&&"boolean"!=typeof t&&(i=r,r=Wr(e,t,i)?null:t,t=!1);var a=Lr();return(a!==xn||null!=r)&&(r=a(r,i,3)),t&&Mr()==n?v(e,r):Yn(e,r)}function Ni(e){if(!e||!e.length)return[];var t=-1,n=0;e=sn(e,function(e){return Hr(e)?(n=ms(e.length,n),!0):void 0});for(var r=Ia(n);++t<n;)r[t]=un(e,Qn(t));return r}function ki(e,t,n){var r=e?e.length:0;if(!r)return[];var i=Ni(e);return null==t?i:(t=ir(t,n,4),un(i,function(e){return pn(e,t,w,!0)}))}function Oi(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Hr(n))var r=r?Sn(r,n).concat(Sn(n,r)):n}return r?Yn(r):[]}function Ri(e,t){var n=-1,r=e?e.length:0,i={};for(!r||t||Tu(e[0])||(t=[]);++n<r;){var o=e[n];t?i[o]=t[n]:o&&(i[o[0]]=o[1])}return i}function ji(e){var t=X(e);return t.__chain__=!0,t}function Fi(e,t,n){return t.call(n,e),e}function Li(e,t,n){return t.call(n,e)}function Mi(){return ji(this)}function Bi(){return new et(this.value(),this.__chain__)}function Ui(e){for(var t,n=this;n instanceof Y;){var r=ai(n);t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t}function Vi(){var e=this.__wrapped__;return e instanceof Qt?(this.__actions__.length&&(e=new Qt(this)),new et(e.reverse(),this.__chain__)):this.thru(function(e){return e.reverse()})}function Qi(){return this.value()+""}function Gi(){return tr(this.__wrapped__,this.__actions__)}function Hi(e,t,n){var r=Tu(e)?an:En;return n&&Wr(e,t,n)&&(t=null),("function"!=typeof t||n!==w)&&(t=Lr(t,n,3)),r(e,t)}function zi(e,t,n){var r=Tu(e)?sn:Tn;return t=Lr(t,n,3),r(e,t)}function Wi(e,t){return nu(e,Mn(t))}function qi(e,t,n,r){var i=e?Vs(e):0;return $r(i)||(e=qo(e),i=e.length),i?(n="number"!=typeof n||r&&Wr(t,n,r)?0:0>n?ms(i+n,0):n||0,"string"==typeof e||!Tu(e)&&ko(e)?i>n&&e.indexOf(t,n)>-1:Mr(e,t,n)>-1):!1}function Xi(e,t,n){var r=Tu(e)?un:Ln;return t=Lr(t,n,3),r(e,t)}function $i(e,t){return Xi(e,ba(t))}function Ji(e,t,n){var r=Tu(e)?sn:Tn;return t=Lr(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})}function Ki(e,t,n){if(n?Wr(e,t,n):null==t){e=ri(e);var r=e.length;return r>0?e[zn(0,r-1)]:w}var i=Yi(e);return i.length=gs(0>t?0:+t||0,i.length),i}function Yi(e){e=ri(e);for(var t=-1,n=e.length,r=Ia(n);++t<n;){var i=zn(0,t);t!=i&&(r[t]=r[i]),r[i]=e[t]}return r}function Zi(e){var t=e?Vs(e):0;return $r(t)?t:Mu(e).length}function eo(e,t,n){var r=Tu(e)?dn:Xn;return n&&Wr(e,t,n)&&(t=null),("function"!=typeof t||n!==w)&&(t=Lr(t,n,3)),r(e,t)}function to(e,t,n){if(null==e)return[];n&&Wr(e,t,n)&&(t=null);var r=-1;t=Lr(t,n,3);var i=Ln(e,function(e,n,i){return{criteria:t(e,n,i),index:++r,value:e}});return $n(i,u)}function no(e,t,n,r){return null==e?[]:(r&&Wr(t,n,r)&&(n=null),Tu(t)||(t=null==t?[]:[t]),Tu(n)||(n=null==n?[]:[n]),Jn(e,t,n))}function ro(e,t){return zi(e,Mn(t))}function io(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new La(U);var n=e;e=t,t=n}return e=ds(e=+e)?e:0,function(){return--e<1?t.apply(this,arguments):void 0}}function oo(e,t,n){return n&&Wr(e,t,n)&&(t=null),t=e&&null==t?e.length:ms(+t||0,0),kr(e,N,null,null,null,null,t)}function ao(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new La(U);var r=e;e=t,t=r}return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}}function so(e,t,n){function r(){f&&Ka(f),u&&Ka(u),u=f=d=w}function i(){var n=t-(du()-l);if(0>=n||n>t){u&&Ka(u);var r=d;u=f=d=w,r&&(h=du(),c=e.apply(p,s),f||u||(s=p=null))}else f=os(i,n)}function o(){f&&Ka(f),u=f=d=w,(g||m!==t)&&(h=du(),c=e.apply(p,s),f||u||(s=p=null))}function a(){if(s=arguments,l=du(),p=this,d=g&&(f||!v),m===!1)var n=v&&!f;else{u||v||(h=l);var r=m-(l-h),a=0>=r||r>m;a?(u&&(u=Ka(u)),h=l,c=e.apply(p,s)):u||(u=os(o,r))}return a&&f?f=Ka(f):f||t===m||(f=os(i,t)),n&&(a=!0,c=e.apply(p,s)),!a||f||u||(s=p=null),c}var s,u,c,l,p,f,d,h=0,m=!1,g=!0;if("function"!=typeof e)throw new La(U);if(t=0>t?0:+t||0,n===!0){var v=!0;g=!1}else Co(n)&&(v=n.leading,m="maxWait"in n&&ms(+n.maxWait||0,t),g="trailing"in n?n.trailing:g);return a.cancel=r,a}function uo(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new La(U);var n=function(){var r=arguments,i=n.cache,o=t?t.apply(this,r):r[0];if(i.has(o))return i.get(o);var a=e.apply(this,r);return i.set(o,a),a};return n.cache=new uo.Cache,n}function co(e){if("function"!=typeof e)throw new La(U);return function(){return!e.apply(this,arguments)}}function lo(e){return ao(2,e)}function po(e,t){if("function"!=typeof e)throw new La(U);return t=ms(t===w?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=ms(n.length-t,0),o=Ia(i);++r<i;)o[r]=n[t+r];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}var a=Ia(t+1);for(r=-1;++r<t;)a[r]=n[r];return a[t]=o,e.apply(this,a)}}function fo(e){if("function"!=typeof e)throw new La(U);return function(t){return e.apply(this,t)}}function ho(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new La(U);return n===!1?r=!1:Co(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Vt.leading=r,Vt.maxWait=+t,Vt.trailing=i,so(e,t,Vt)}function mo(e,t){return t=null==t?ma:t,kr(t,D,null,[e],[])}function go(e,t,n,r){return t&&"boolean"!=typeof t&&Wr(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),n="function"==typeof n&&ir(n,r,1),bn(e,t,n)}function vo(e,t,n){return t="function"==typeof t&&ir(t,n,1),bn(e,!0,t)}function yo(e){return h(e)&&Hr(e)&&za.call(e)==Q}function _o(e){return e===!0||e===!1||h(e)&&za.call(e)==H}function xo(e){return h(e)&&za.call(e)==z}function bo(e){return!!e&&1===e.nodeType&&h(e)&&za.call(e).indexOf("Element")>-1}function wo(e){return null==e?!0:Hr(e)&&(Tu(e)||ko(e)||yo(e)||h(e)&&Iu(e.splice))?!e.length:!Mu(e).length}function So(e,t,n,r){if(n="function"==typeof n&&ir(n,r,3),!n&&Jr(e)&&Jr(t))return e===t;var i=n?n(e,t):w;return i===w?Rn(e,t,n):!!i}function Eo(e){return h(e)&&"string"==typeof e.message&&za.call(e)==W}function Co(e){var t=typeof e;return"function"==t||!!e&&"object"==t}function To(e,t,n,r){var i=Mu(t),o=i.length;if(!o)return!0;if(null==e)return!1;if(n="function"==typeof n&&ir(n,r,3),e=ii(e),!n&&1==o){var a=i[0],s=t[a];if(Jr(s))return s===e[a]&&(s!==w||a in e)}for(var u=Ia(o),c=Ia(o);o--;)s=u[o]=t[i[o]],c[o]=Jr(s);return Fn(e,i,u,c,n)}function Po(e){return Ao(e)&&e!=+e}function Io(e){return null==e?!1:za.call(e)==q?qa.test(Qa.call(e)):h(e)&&Nt.test(e)}function Do(e){return null===e}function Ao(e){return"number"==typeof e||h(e)&&za.call(e)==$}function No(e){return h(e)&&za.call(e)==K}function ko(e){return"string"==typeof e||h(e)&&za.call(e)==Z}function Oo(e){return h(e)&&$r(e.length)&&!!Bt[za.call(e)]}function Ro(e){return e===w}function jo(e){var t=e?Vs(e):0;return $r(t)?t?nn(e):[]:qo(e)}function Fo(e){return _n(e,Qo(e))}function Lo(e,t,n){var r=ks(e);return n&&Wr(e,t,n)&&(t=null),t?Ns(r,t):r}function Mo(e){return kn(e,Qo(e))}function Bo(e,t,n){var r=null==e?w:On(e,oi(t),t+"");return r===w?n:r}function Uo(e,t){if(null==e)return!1;var n=Ga.call(e,t);return n||qr(t)||(t=oi(t),e=1==t.length?e:On(e,qn(t,0,-1)),t=xi(t),n=null!=e&&Ga.call(e,t)),n}function Vo(e,t,n){n&&Wr(e,t,n)&&(t=null);for(var r=-1,i=Mu(e),o=i.length,a={};++r<o;){var s=i[r],u=e[s];t?Ga.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a}function Qo(e){if(null==e)return[];Co(e)||(e=Ra(e));var t=e.length;t=t&&$r(t)&&(Tu(e)||As.nonEnumArgs&&yo(e))&&t||0;for(var n=e.constructor,r=-1,i="function"==typeof n&&n.prototype===e,o=Ia(t),a=t>0;++r<t;)o[r]=r+"";for(var s in e)a&&zr(s,t)||"constructor"==s&&(i||!Ga.call(e,s))||o.push(s);return o}function Go(e){for(var t=-1,n=Mu(e),r=n.length,i=Ia(r);++t<r;){var o=n[t];i[t]=[o,e[o]]}return i}function Ho(e,t,n){var r=null==e?w:e[t];return r===w&&(null==e||qr(t,e)||(t=oi(t),e=1==t.length?e:On(e,qn(t,0,-1)),r=null==e?w:e[xi(t)]),r=r===w?n:r),Iu(r)?r.call(e):r}function zo(e,t,n){if(null==e)return e;var r=t+"";t=null!=e[r]||qr(t,e)?[r]:oi(t);for(var i=-1,o=t.length,a=o-1,s=e;null!=s&&++i<o;){var u=t[i];Co(s)&&(i==a?s[u]=n:null==s[u]&&(s[u]=zr(t[i+1])?[]:{})),s=s[u]}return e}function Wo(e,t,n,r){var i=Tu(e)||Oo(e);if(t=Lr(t,r,4),null==n)if(i||Co(e)){var o=e.constructor;n=i?Tu(e)?new o:[]:ks(Iu(o)&&o.prototype)}else n={};return(i?rn:An)(e,function(e,r,i){return t(n,e,r,i)}),n}function qo(e){return Zn(e,Mu(e))}function Xo(e){return Zn(e,Qo(e))}function $o(e,t,n){return t=+t||0,"undefined"==typeof n?(n=t,t=0):n=+n||0,e>=gs(t,n)&&e<ms(t,n)}function Jo(e,t,n){n&&Wr(e,t,n)&&(t=n=null);var r=null==e,i=null==t;if(null==n&&(i&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1){var o=xs();return gs(e+o*(t-e+parseFloat("1e-"+((o+"").length-1))),t)}return zn(e,t)}function Ko(e){return e=i(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function Yo(e){return e=i(e),e&&e.replace(kt,l).replace(Tt,"")}function Zo(e,t,n){e=i(e),t+="";var r=e.length;return n=n===w?r:gs(0>n?0:+n||0,r),n-=t.length,n>=0&&e.indexOf(t,n)==n}function ea(e){return e=i(e),e&&vt.test(e)?e.replace(mt,p):e}function ta(e){return e=i(e),e&&Ct.test(e)?e.replace(Et,"\\$&"):e}function na(e,t,n){e=i(e),t=+t;var r=e.length;if(r>=t||!ds(t))return e;var o=(t-r)/2,a=Ya(o),s=Ja(o);return n=Dr("",s,n),n.slice(0,a)+e+n}function ra(e,t,n){return n&&Wr(e,t,n)&&(t=0),_s(e,t)}function ia(e,t){var n="";if(e=i(e),t=+t,1>t||!e||!ds(t))return n;do t%2&&(n+=e),t=Ya(t/2),e+=e;while(t);return n}function oa(e,t,n){return e=i(e),n=null==n?0:gs(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function aa(e,t,n){var r=X.templateSettings;n&&Wr(e,t,n)&&(t=n=null),e=i(e),t=vn(Ns({},n||t),r,gn);var o,a,s=vn(Ns({},t.imports),r.imports,gn),u=Mu(s),c=Zn(s,u),l=0,p=t.interpolate||Ot,d="__p += '",h=ja((t.escape||Ot).source+"|"+p.source+"|"+(p===xt?It:Ot).source+"|"+(t.evaluate||Ot).source+"|$","g"),m="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Mt+"]")+"\n";e.replace(h,function(t,n,r,i,s,u){return r||(r=i),d+=e.slice(l,u).replace(Rt,f),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t}),d+="';\n";var g=t.variable;g||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(pt,""):d).replace(ft,"$1").replace(dt,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=Ju(function(){return Na(u,m+"return "+d).apply(w,c)});if(v.source=d,Eo(v))throw v;return v}function sa(e,t,n){var r=e;return(e=i(e))?(n?Wr(r,t,n):null==t)?e.slice(y(e),_(e)+1):(t+="",e.slice(a(e,t),s(e,t)+1)):e}function ua(e,t,n){var r=e;return e=i(e),e?(n?Wr(r,t,n):null==t)?e.slice(y(e)):e.slice(a(e,t+"")):e}function ca(e,t,n){var r=e;return e=i(e),e?(n?Wr(r,t,n):null==t)?e.slice(0,_(e)+1):e.slice(0,s(e,t+"")+1):e}function la(e,t,n){n&&Wr(e,t,n)&&(t=null);var r=O,o=R;if(null!=t)if(Co(t)){var a="separator"in t?t.separator:a;r="length"in t?+t.length||0:r,o="omission"in t?i(t.omission):o}else r=+t||0;if(e=i(e),r>=e.length)return e;var s=r-o.length;if(1>s)return o;var u=e.slice(0,s);if(null==a)return u+o;if(No(a)){if(e.slice(s).search(a)){var c,l,p=e.slice(0,s);for(a.global||(a=ja(a.source,(Dt.exec(a)||"")+"g")),a.lastIndex=0;c=a.exec(p);)l=c.index;u=u.slice(0,null==l?s:l)}}else if(e.indexOf(a,s)!=s){var f=u.lastIndexOf(a);f>-1&&(u=u.slice(0,f))}return u+o}function pa(e){return e=i(e),e&&gt.test(e)?e.replace(ht,x):e}function fa(e,t,n){return n&&Wr(e,t,n)&&(t=null),e=i(e),e.match(t||jt)||[]}function da(e,t,n){return n&&Wr(e,t,n)&&(t=null),h(e)?ga(e):xn(e,t)}function ha(e){return function(){return e}}function ma(e){return e}function ga(e){return Mn(bn(e,!0))}function va(e,t){return Bn(e,bn(t,!0))}function ya(e,t,n){if(null==n){var r=Co(t),i=r&&Mu(t),o=i&&i.length&&kn(t,i);(o?o.length:r)||(o=!1,n=t,t=e,e=this)}o||(o=kn(t,Mu(t)));var a=!0,s=-1,u=Iu(e),c=o.length;n===!1?a=!1:Co(n)&&"chain"in n&&(a=n.chain);for(;++s<c;){var l=o[s],p=t[l];e[l]=p,u&&(e.prototype[l]=function(t){return function(){var n=this.__chain__;if(a||n){var r=e(this.__wrapped__),i=r.__actions__=nn(this.__actions__);return i.push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}var o=[this.value()];return ts.apply(o,arguments),t.apply(e,o)}}(p))}return e}function _a(){return m._=Wa,this}function xa(){}function ba(e){return qr(e)?Qn(e):Gn(e)}function wa(e){return function(t){return On(e,oi(t),t+"")}}function Sa(e,t,n){n&&Wr(e,t,n)&&(t=n=null),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var r=-1,i=ms(Ja((t-e)/(n||1)),0),o=Ia(i);++r<i;)o[r]=e,e+=n;return o}function Ea(e,t,n){if(e=Ya(e),1>e||!ds(e))return[];var r=-1,i=Ia(gs(e,Ss));for(t=ir(t,n,1);++r<e;)Ss>r?i[r]=t(r):t(r);return i}function Ca(e){var t=++Ha;return i(e)+t}function Ta(e,t){return(+e||0)+(+t||0)}function Pa(e,t,n){n&&Wr(e,t,n)&&(t=null);var r=Lr(),i=null==t;return r===xn&&i||(i=!1,t=r(t,n,3)),i?hn(Tu(e)?e:ri(e)):Kn(e,t)}m=m?en.defaults(Zt.Object(),m,en.pick(Zt,Lt)):Zt;var Ia=m.Array,Da=m.Date,Aa=m.Error,Na=m.Function,ka=m.Math,Oa=m.Number,Ra=m.Object,ja=m.RegExp,Fa=m.String,La=m.TypeError,Ma=Ia.prototype,Ba=Ra.prototype,Ua=Fa.prototype,Va=(Va=m.window)&&Va.document,Qa=Na.prototype.toString,Ga=Ba.hasOwnProperty,Ha=0,za=Ba.toString,Wa=m._,qa=ja("^"+ta(za).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xa=Io(Xa=m.ArrayBuffer)&&Xa,$a=Io($a=Xa&&new Xa(0).slice)&&$a,Ja=ka.ceil,Ka=m.clearTimeout,Ya=ka.floor,Za=Io(Za=Ra.getOwnPropertySymbols)&&Za,es=Io(es=Ra.getPrototypeOf)&&es,ts=Ma.push,ns=Io(ns=Ra.preventExtensions)&&ns,rs=Ba.propertyIsEnumerable,is=Io(is=m.Set)&&is,os=m.setTimeout,as=Ma.splice,ss=Io(ss=m.Uint8Array)&&ss,us=Io(us=m.WeakMap)&&us,cs=function(){try{var e=Io(e=m.Float64Array)&&e,t=new e(new Xa(10),0,1)&&e}catch(n){}return t}(),ls=function(){var e=ns&&Io(e=Ra.assign)&&e;try{if(e){var t=ns({1:0});t[0]=1}}catch(n){try{e(t,"xo")}catch(n){}return!t[1]&&e}return!1}(),ps=Io(ps=Ia.isArray)&&ps,fs=Io(fs=Ra.create)&&fs,ds=m.isFinite,hs=Io(hs=Ra.keys)&&hs,ms=ka.max,gs=ka.min,vs=Io(vs=Da.now)&&vs,ys=Io(ys=Oa.isFinite)&&ys,_s=m.parseInt,xs=ka.random,bs=Oa.NEGATIVE_INFINITY,ws=Oa.POSITIVE_INFINITY,Ss=ka.pow(2,32)-1,Es=Ss-1,Cs=Ss>>>1,Ts=cs?cs.BYTES_PER_ELEMENT:0,Ps=ka.pow(2,53)-1,Is=us&&new us,Ds={},As=X.support={};!function(e){var t=function(){this.x=e},n=arguments,r=[];t.prototype={valueOf:e,y:e};for(var i in new t)r.push(i);As.funcDecomp=/\bthis\b/.test(function(){return this}),As.funcNames="string"==typeof Na.name;try{As.dom=11===Va.createDocumentFragment().nodeType}catch(o){As.dom=!1}try{As.nonEnumArgs=!rs.call(n,1)}catch(o){As.nonEnumArgs=!0}}(1,0),X.templateSettings={escape:yt,evaluate:_t,interpolate:xt,variable:"",imports:{_:X}};var Ns=ls||function(e,t){return null==t?e:_n(t,Qs(t),_n(t,Mu(t),e))},ks=function(){function e(){}return function(t){if(Co(t)){e.prototype=t;var n=new e;e.prototype=null}return n||m.Object()}}(),Os=lr(An),Rs=lr(Nn,!0),js=pr(),Fs=pr(!0),Ls=Is?function(e,t){return Is.set(e,t),e}:ma;$a||(or=Xa&&ss?function(e){var t=e.byteLength,n=cs?Ya(t/Ts):0,r=n*Ts,i=new Xa(t);if(n){var o=new cs(i,0,n);o.set(new cs(e,0,n))}return t!=r&&(o=new ss(i,r),o.set(new ss(e,r))),i}:ha(null));var Ms=fs&&is?function(e){return new Kt(e)}:ha(null),Bs=Is?function(e){return Is.get(e)}:xa,Us=function(){return As.funcNames?"constant"==ha.name?Qn("name"):function(e){for(var t=e.name,n=Ds[t],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}:ha("")}(),Vs=Qn("length"),Qs=Za?function(e){return Za(ii(e))}:ha([]),Gs=function(){var e=0,t=0;return function(n,r){var i=du(),o=F-(i-t);if(t=i,o>0){if(++e>=j)return n}else e=0;return Ls(n,r)}}(),Hs=po(function(e,t){return Hr(e)?Sn(e,In(t,!1,!0)):[]}),zs=yr(),Ws=yr(!0),qs=po(function(t,n){n=In(n);var r=yn(t,n);return Hn(t,n.sort(e)),r}),Xs=Nr(),$s=Nr(!0),Js=po(function(e){return Yn(In(e,!1,!0))}),Ks=po(function(e,t){return Hr(e)?Sn(e,t):[]}),Ys=po(Ni),Zs=po(function(e){var t=e.length,n=e[t-2],r=e[t-1];return t>2&&"function"==typeof n?t-=2:(n=t>1&&"function"==typeof r?(--t,r):w,r=w),e.length=t,ki(e,n,r)}),eu=po(function(e,t){return yn(e,In(t))}),tu=ur(function(e,t,n){Ga.call(e,n)?++e[n]:e[n]=1}),nu=vr(Os),ru=vr(Rs,!0),iu=br(rn,Os),ou=br(on,Rs),au=ur(function(e,t,n){Ga.call(e,n)?e[n].push(t):e[n]=[t]}),su=ur(function(e,t,n){e[n]=t}),uu=po(function(e,t,n){var r=-1,i="function"==typeof t,o=qr(t),a=Hr(e)?Ia(e.length):[];return Os(e,function(e){var s=i?t:o&&null!=e&&e[t];a[++r]=s?s.apply(e,n):Gr(e,t,n)}),a}),cu=ur(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),lu=Pr(pn,Os),pu=Pr(fn,Rs),fu=po(function(e,t){if(null==e)return[];var n=t[2];return n&&Wr(t[0],t[1],n)&&(t.length=1),Jn(e,In(t),[])}),du=vs||function(){return(new Da).getTime()},hu=po(function(e,t,n){var r=E;if(n.length){var i=g(n,hu.placeholder);r|=D}return kr(e,r,t,n,i)}),mu=po(function(e,t){t=t.length?In(t):Mo(e);for(var n=-1,r=t.length;++n<r;){var i=t[n];e[i]=kr(e[i],E,e)}return e}),gu=po(function(e,t,n){var r=E|C;if(n.length){var i=g(n,gu.placeholder);r|=D}return kr(t,r,e,n,i)}),vu=mr(P),yu=mr(I),_u=po(function(e,t){return wn(e,1,t)}),xu=po(function(e,t,n){return wn(e,t,n)}),bu=xr(),wu=xr(!0),Su=Tr(D),Eu=Tr(A),Cu=po(function(e,t){return kr(e,k,null,null,null,In(t))}),Tu=ps||function(e){return h(e)&&$r(e.length)&&za.call(e)==G};As.dom||(bo=function(e){return!!e&&1===e.nodeType&&h(e)&&!Du(e)});var Pu=ys||function(e){return"number"==typeof e&&ds(e)},Iu=r(/x/)||ss&&!r(ss)?function(e){return za.call(e)==q}:r,Du=es?function(e){if(!e||za.call(e)!=J)return!1;var t=e.valueOf,n=Io(t)&&(n=es(t))&&es(n);return n?e==n||es(e)==n:ti(e)}:ti,Au=cr(function(e,t,n){return n?vn(e,t,n):Ns(e,t)}),Nu=po(function(e){var t=e[0];return null==t?t:(e.push(mn),Au.apply(w,e))}),ku=_r(An),Ou=_r(Nn),Ru=wr(js),ju=wr(Fs),Fu=Sr(An),Lu=Sr(Nn),Mu=hs?function(e){var t=null!=e&&e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Hr(e)?ni(e):Co(e)?hs(e):[]}:ni,Bu=Er(!0),Uu=Er(),Vu=cr(Un),Qu=po(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=un(In(t),Fa);return Yr(e,Sn(Qo(e),t))}var n=ir(t[0],t[1],3);return Zr(e,function(e,t,r){return!n(e,t,r)})}),Gu=po(function(e,t){return null==e?{}:"function"==typeof t[0]?Zr(e,ir(t[0],t[1],3)):Yr(e,In(t))}),Hu=dr(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),zu=dr(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Wu=Cr(),qu=Cr(!0);8!=_s(Ft+"08")&&(ra=function(e,t,n){return(n?Wr(e,t,n):null==t)?t=0:t&&(t=+t),e=sa(e),_s(e,t||(At.test(e)?16:10))});var Xu=dr(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),$u=dr(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Ju=po(function(e,t){try{return e.apply(w,t)}catch(n){return Eo(n)?n:new Aa(n)}}),Ku=po(function(e,t){return function(n){return Gr(n,e,t)}}),Yu=po(function(e,t){return function(n){return Gr(e,n,t)}}),Zu=gr(cn),ec=gr(ln,!0);return X.prototype=Y.prototype,et.prototype=ks(Y.prototype),et.prototype.constructor=et,Qt.prototype=ks(Y.prototype),Qt.prototype.constructor=Qt,Wt.prototype["delete"]=qt,Wt.prototype.get=Xt,Wt.prototype.has=$t,Wt.prototype.set=Jt,Kt.prototype.push=tn,uo.Cache=Wt,X.after=io,X.ary=oo,X.assign=Au,X.at=eu,X.before=ao,X.bind=hu,X.bindAll=mu,X.bindKey=gu,X.callback=da,X.chain=ji,X.chunk=si,X.compact=ui,X.constant=ha,X.countBy=tu,X.create=Lo,X.curry=vu,X.curryRight=yu,X.debounce=so,X.defaults=Nu,X.defer=_u,X.delay=xu,X.difference=Hs,X.drop=ci,X.dropRight=li,X.dropRightWhile=pi,X.dropWhile=fi,X.fill=di,X.filter=zi,X.flatten=mi,X.flattenDeep=gi,X.flow=bu,X.flowRight=wu,X.forEach=iu,X.forEachRight=ou,X.forIn=Ru,X.forInRight=ju,X.forOwn=Fu,X.forOwnRight=Lu,X.functions=Mo,X.groupBy=au,X.indexBy=su,X.initial=yi,X.intersection=_i,X.invert=Vo,X.invoke=uu,X.keys=Mu,X.keysIn=Qo,X.map=Xi,X.mapKeys=Bu,X.mapValues=Uu,X.matches=ga,X.matchesProperty=va,X.memoize=uo,X.merge=Vu,X.method=Ku,X.methodOf=Yu,X.mixin=ya,X.negate=co,X.omit=Qu,X.once=lo,X.pairs=Go,X.partial=Su,X.partialRight=Eu,X.partition=cu,X.pick=Gu,X.pluck=$i,X.property=ba,X.propertyOf=wa,X.pull=wi,X.pullAt=qs,X.range=Sa,X.rearg=Cu,X.reject=Ji,X.remove=Si,X.rest=Ei,X.restParam=po,X.set=zo,X.shuffle=Yi,X.slice=Ci,X.sortBy=to,X.sortByAll=fu,X.sortByOrder=no,X.spread=fo,X.take=Ti,X.takeRight=Pi,X.takeRightWhile=Ii,X.takeWhile=Di,X.tap=Fi,X.throttle=ho,X.thru=Li,X.times=Ea,X.toArray=jo,X.toPlainObject=Fo,X.transform=Wo,X.union=Js,X.uniq=Ai,X.unzip=Ni,X.unzipWith=ki,X.values=qo,X.valuesIn=Xo,X.where=ro,X.without=Ks,X.wrap=mo,X.xor=Oi,X.zip=Ys,X.zipObject=Ri,X.zipWith=Zs,X.backflow=wu,X.collect=Xi,X.compose=wu,X.each=iu,X.eachRight=ou,X.extend=Au,X.iteratee=da,X.methods=Mo,X.object=Ri,X.select=zi,X.tail=Ei,X.unique=Ai,ya(X,X),X.add=Ta,X.attempt=Ju,X.camelCase=Hu,X.capitalize=Ko,X.clone=go,X.cloneDeep=vo,X.deburr=Yo,X.endsWith=Zo,X.escape=ea,X.escapeRegExp=ta,X.every=Hi,X.find=nu,X.findIndex=zs,X.findKey=ku,X.findLast=ru,X.findLastIndex=Ws,X.findLastKey=Ou,X.findWhere=Wi,X.first=hi,X.get=Bo,X.has=Uo,X.identity=ma,X.includes=qi,X.indexOf=vi,X.inRange=$o,X.isArguments=yo,X.isArray=Tu,X.isBoolean=_o,X.isDate=xo,X.isElement=bo,X.isEmpty=wo,X.isEqual=So,X.isError=Eo,X.isFinite=Pu,X.isFunction=Iu,X.isMatch=To,X.isNaN=Po,X.isNative=Io,X.isNull=Do,X.isNumber=Ao,X.isObject=Co,X.isPlainObject=Du,X.isRegExp=No,X.isString=ko,X.isTypedArray=Oo,X.isUndefined=Ro,X.kebabCase=zu,X.last=xi,X.lastIndexOf=bi,X.max=Zu,X.min=ec,X.noConflict=_a,X.noop=xa,X.now=du,X.pad=na,X.padLeft=Wu,X.padRight=qu,X.parseInt=ra,X.random=Jo,X.reduce=lu,X.reduceRight=pu,X.repeat=ia,X.result=Ho,X.runInContext=b,X.size=Zi,X.snakeCase=Xu,X.some=eo,X.sortedIndex=Xs,X.sortedLastIndex=$s,X.startCase=$u,X.startsWith=oa,X.sum=Pa,X.template=aa,X.trim=sa,X.trimLeft=ua,X.trimRight=ca,X.trunc=la,X.unescape=pa,X.uniqueId=Ca,X.words=fa,X.all=Hi,X.any=eo,X.contains=qi,X.detect=nu,X.foldl=lu,X.foldr=pu,X.head=hi,X.include=qi,X.inject=lu,ya(X,function(){var e={};return An(X,function(t,n){X.prototype[n]||(e[n]=t)}),e}(),!1),X.sample=Ki,X.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return Ki(t,e)}):Ki(this.value())},X.VERSION=S,rn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){X[e].placeholder=X}),rn(["dropWhile","filter","map","takeWhile"],function(e,t){var n=t!=B,r=t==L;Qt.prototype[e]=function(e,i){var o=this.__filtered__,a=o&&r?new Qt(this):this.clone(),s=a.__iteratees__||(a.__iteratees__=[]);return s.push({done:!1,count:0,index:0,iteratee:Lr(e,i,1),limit:-1,type:t}),a.__filtered__=o||n,a}}),rn(["drop","take"],function(e,t){var n=e+"While";Qt.prototype[e]=function(n){var r=this.__filtered__,i=r&&!t?this.dropWhile():this.clone();if(n=null==n?1:ms(Ya(n)||0,0),r)t?i.__takeCount__=gs(i.__takeCount__,n):xi(i.__iteratees__).limit=n;else{var o=i.__views__||(i.__views__=[]);o.push({size:n,type:e+(i.__dir__<0?"Right":"")})}return i},Qt.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()},Qt.prototype[e+"RightWhile"]=function(e,t){return this.reverse()[n](e,t).reverse()}}),rn(["first","last"],function(e,t){var n="take"+(t?"Right":"");Qt.prototype[e]=function(){return this[n](1).value()[0]}}),rn(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");Qt.prototype[e]=function(){return this[n](1)}}),rn(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?Mn:ba;Qt.prototype[e]=function(e){return this[n](r(e))}}),Qt.prototype.compact=function(){return this.filter(ma)},Qt.prototype.reject=function(e,t){return e=Lr(e,t,1),this.filter(function(t){return!e(t)})},Qt.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return 0>e?n=this.takeRight(-e):e&&(n=this.drop(e)),t!==w&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n},Qt.prototype.toArray=function(){return this.drop(0)},An(Qt.prototype,function(e,t){var n=X[t];if(n){var r=/^(?:filter|map|reject)|While$/.test(t),i=/^(?:first|last)$/.test(t);X.prototype[t]=function(){var t=arguments,o=this.__chain__,a=this.__wrapped__,s=!!this.__actions__.length,u=a instanceof Qt,c=t[0],l=u||Tu(a);l&&r&&"function"==typeof c&&1!=c.length&&(u=l=!1);var p=u&&!s;if(i&&!o)return p?e.call(a):n.call(X,this.value());var f=function(e){var r=[e];return ts.apply(r,t),n.apply(X,r)};if(l){var d=p?a:new Qt(this),h=e.apply(d,t);if(!i&&(s||h.__actions__)){var m=h.__actions__||(h.__actions__=[]);m.push({func:Li,args:[f],thisArg:X})}return new et(h,o)}return this.thru(f)}}}),rn(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var t=(/^(?:replace|split)$/.test(e)?Ua:Ma)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(e);X.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),An(Qt.prototype,function(e,t){var n=X[t];if(n){var r=n.name,i=Ds[r]||(Ds[r]=[]);i.push({name:t,func:n})}}),Ds[Ir(null,C).name]=[{name:"wrapper",func:null}],Qt.prototype.clone=Gt,Qt.prototype.reverse=Ht,Qt.prototype.value=zt,X.prototype.chain=Mi,X.prototype.commit=Bi,X.prototype.plant=Ui,X.prototype.reverse=Vi,X.prototype.toString=Qi,X.prototype.run=X.prototype.toJSON=X.prototype.valueOf=X.prototype.value=Gi,X.prototype.collect=X.prototype.map,X.prototype.head=X.prototype.first,X.prototype.select=X.prototype.filter,X.prototype.tail=X.prototype.rest,X}var w,S="3.8.0",E=1,C=2,T=4,P=8,I=16,D=32,A=64,N=128,k=256,O=30,R="...",j=150,F=16,L=0,M=1,B=2,U="Expected a function",V="__lodash_placeholder__",Q="[object Arguments]",G="[object Array]",H="[object Boolean]",z="[object Date]",W="[object Error]",q="[object Function]",X="[object Map]",$="[object Number]",J="[object Object]",K="[object RegExp]",Y="[object Set]",Z="[object String]",et="[object WeakMap]",tt="[object ArrayBuffer]",nt="[object Float32Array]",rt="[object Float64Array]",it="[object Int8Array]",ot="[object Int16Array]",at="[object Int32Array]",st="[object Uint8Array]",ut="[object Uint8ClampedArray]",ct="[object Uint16Array]",lt="[object Uint32Array]",pt=/\b__p \+= '';/g,ft=/\b(__p \+=) '' \+/g,dt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ht=/&(?:amp|lt|gt|quot|#39|#96);/g,mt=/[&<>"'`]/g,gt=RegExp(ht.source),vt=RegExp(mt.source),yt=/<%-([\s\S]+?)%>/g,_t=/<%([\s\S]+?)%>/g,xt=/<%=([\s\S]+?)%>/g,bt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,wt=/^\w*$/,St=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Et=/[.*+?^${}()|[\]\/\\]/g,Ct=RegExp(Et.source),Tt=/[\u0300-\u036f\ufe20-\ufe23]/g,Pt=/\\(\\)?/g,It=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dt=/\w*$/,At=/^0[xX]/,Nt=/^\[object .+?Constructor\]$/,kt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ot=/($^)/,Rt=/['\n\r\u2028\u2029\\]/g,jt=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),Ft=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",Lt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"],Mt=-1,Bt={};Bt[nt]=Bt[rt]=Bt[it]=Bt[ot]=Bt[at]=Bt[st]=Bt[ut]=Bt[ct]=Bt[lt]=!0,Bt[Q]=Bt[G]=Bt[tt]=Bt[H]=Bt[z]=Bt[W]=Bt[q]=Bt[X]=Bt[$]=Bt[J]=Bt[K]=Bt[Y]=Bt[Z]=Bt[et]=!1;var Ut={};Ut[Q]=Ut[G]=Ut[tt]=Ut[H]=Ut[z]=Ut[nt]=Ut[rt]=Ut[it]=Ut[ot]=Ut[at]=Ut[$]=Ut[J]=Ut[K]=Ut[Z]=Ut[st]=Ut[ut]=Ut[ct]=Ut[lt]=!0,Ut[W]=Ut[q]=Ut[X]=Ut[Y]=Ut[et]=!1;var Vt={leading:!1,maxWait:0,trailing:!1},Qt={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss"},Gt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ht={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},zt={"function":!0,object:!0},Wt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qt=zt[typeof exports]&&exports&&!exports.nodeType&&exports,Xt=zt[typeof module]&&module&&!module.nodeType&&module,$t=qt&&Xt&&"object"==typeof global&&global&&global.Object&&global,Jt=zt[typeof self]&&self&&self.Object&&self,Kt=zt[typeof window]&&window&&window.Object&&window,Yt=Xt&&Xt.exports===qt&&qt,Zt=$t||Kt!==(this&&this.window)&&Kt||Jt||this,en=b();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Zt._=en,define("sap/watt/lib/lodash/lodash",[],function(){return en})):qt&&Xt?Yt?(Xt.exports=en)._=en:qt._=en:Zt._=en}.call(this),define("sap/watt/core/ConfigPreload",["sap/watt/lib/lodash/lodash"],function(e){"use strict";var t={plugins:{},interfaces:{}},n=new URI(document.location.href),r=new URI(require.toUrl("a")).absoluteTo(new URI(document.location.href)),i={loadPreload:function(n){return sap.watt.getEnv("debugMode")?Q():Q(jQuery.ajax({url:n,dataType:"json"})).then(function(n){e.forEach(t,function(t,r){e.assign(t,n[r])})},function(e){return console.log("Could not load configuration preload from "+n+", Reason: "+e.statusText),null})},loadJSPreload:function(e){if(sap.watt.getEnv("debugMode"))return Q();var t=Q.defer();return require([e],function(){t.resolve()},function(n){console.log("Could not load JS preload for "+e+", Reason: "+n),t.resolve()}),t.promise},getPreload:function(e,n){var r=t&&t[e]&&t[e][n];return r?Q(r):Q.reject(new Error)},toInternalPath:function(e){var t=new URI(e).absoluteTo(n),i=t.relativeTo(r).path();return i=i.replace(/\/$/g,"")},pathToName:function(e){var t=this.toInternalPath(e);return t.replace(/\//g,".")}};return i}),define("sap/watt/core/Interface",["./ConfigPreload","sap/watt/lib/lodash/lodash"],function(e,t){"use strict";function n(e){return!t.isEmpty(e)}var r=function(e){this._vInterfaces=e,this._mInterfaces={},this._mConfigurationProperties={},this._mEvents={},this._mMethods={}};return r.mInterfaces={},r.create=function(e){var t=new r(e);return t.initialize()},r.register=function(e,t){return"string"==typeof t&&(t=require.toUrl(t)),r.mInterfaces[e]?new Error("Interface "+e+" has been provided twice!"):(r.mInterfaces[e]=t,void 0)},r.SUPPORTED_TYPES={string:!0,number:!0,"boolean":!0,object:!0,"[string]":!0,"[number]":!0,"[boolean]":!0,"[object]":!0},r.load=function(n){var i=r.mInterfaces,o=i[n];if(!o){var a=n.replace(/\./g,"/");o=require.toUrl(a)+".json",console.warn("Deprecation Warning: The interface '"+n+"' is not provided. Please provide the interface in a plugin.json file")}return t.isString(o)?e.getPreload("interfaces",n).then(null,function(){return Q(jQuery.ajax({url:o,dataType:"json"}).then(function(e){return e},function(){return new Error("Cannot parse interface '"+n+"' from path '"+o+"'")}))}).then(function(e){return i[n]=e}):Q(o)},r.prototype.initialize=function(){var e=this;return delete this.initialize,this._loadInterfaces(this._vInterfaces).then(function(){return e})},r.prototype.createConfigurationObject=function(){var e=this.getConfigurationProperties(),t={};for(var n in e){var r=e[n],i=void 0;r.multiple&&(i=[]),t[n]=i}return t},r.prototype.isConfigurationPropertyMultiple=function(e){return this.getConfigurationProperties()[e].multiple
},r.prototype.isSimpleType=function(e){return"string"==typeof e&&r.SUPPORTED_TYPES[e]},r.prototype.isComplexType=function(e){return Array.isArray(e)||t.isPlainObject(e)},r.prototype.isProxyType=function(e){return!this.isSimpleType(e)&&!this.isComplexType(e)},r.prototype.hasConfigurationProperties=function(){return n(this.getConfigurationProperties())},r.prototype.getConfigurationProperties=function(){return this._mConfigurationProperties},r.prototype.hasMethods=function(){return n(this.getMethods())},r.prototype.getMethods=function(){return this._mMethods},r.prototype.hasEvents=function(){return n(this.getEvents())},r.prototype.getEvents=function(){return this._mEvents},r.prototype.hasInterfaces=function(){return n(this._mInterfaces)},r.prototype.hasInterface=function(e){return!!this._mInterfaces[e]},r.prototype.getMethodDefaultReturnValue=function(e){return"undefined"==typeof this._mMethods[e].returns?!1:{type:this._mMethods[e].returns.type,"default":this._mMethods[e].returns.default}},r.prototype._loadInterfaces=function(e,n){var i=this;n=n||{};var o=[];"string"==typeof e?o.push(e):Array.isArray(e)&&(o=e);var a=o.map(function(e){if(n[e])return new Error("Interface "+e+" inherits from itself");var o=t.clone(n);o[e]=!0;var a=r.load(e).then(function(e){return e.extends?i._loadInterfaces(e.extends,o).then(function(){return e}):e});return a});return Q.all(a).then(function(e){o.forEach(function(t,n){if(!i._mInterfaces[t]){var r=e[n];i._mInterfaces[t]=r,i._mergeInterface(r)}})})},r.prototype._mergeInterface=function(e){this._mergeInterfaceSection("_mConfigurationProperties","configurationProperties",e),this._mergeInterfaceSection("_mEvents","events",e),this._mergeInterfaceSection("_mMethods","methods",e)},r.prototype._mergeInterfaceSection=function(e,t,n){var r=n[t];if(r)for(var i in r){if(this[e][i])return new Error("Error during merging interface '"+n.name+"': The key '"+i+"' in section '"+t+"' is already defined by another interface");this[e][i]=r[i]}},r}),define("sap/watt/core/DebugHooks",[],function(){function e(e){try{throw e}catch(t){}}function t(e){var t=[];for(var n in e)w.call(e,n)&&t.push(n);return t}function n(){b.monitor&&(E++,this._promiseId=E,S[E]=this)}function r(){b.monitor&&delete S[this._promiseId]}function i(){b.monitor||(b.monitor={},b.on("created",n,!0),b.on("fulfilled",r,!0),b.on("rejected",r,!0),b.on("resolved",r,!0),b.on("cancelled",r,!0),b.monitor.getPendingPromises=function(){for(var e=[],n=t(S),r=0;r<n.length;r++)e.push(S[n[r]]);return e},b.monitor.getLeafPendingPromises=function(){for(var e=b.monitor.getPendingPromises(),t=[],n=0;n<e.length;n++){var r=e[n];"undefined"==typeof r._promise0&&"undefined"==typeof r._receiver0&&t.push(r)}return t})}function o(){b.monitor&&(b.off("created",n),b.off("fulfilled",r),b.off("rejected",r),b.off("resolved",r),b.off("cancelled",r),b.monitor=null,S=null)}function a(e){"undefined"==typeof this._chainLength&&(this._chainLength=0),e._chainLength=this._chainLength+1,e._chainLength>C&&P()}function s(e){C||(C=e,b.on("chained",a,!0),b.onChainLengthLimitExceeded=function(e){P=e})}function u(){C>0&&(b.off("chained",a),P=T,C=null)}function c(){I>0&&(D++,D>I&&N())}function l(){I&&D--}function p(e){I||(I=e,b.on("created",c,!0),b.on("fulfilled",l,!0),b.on("rejected",l,!0),b.on("resolved",l,!0),b.on("cancelled",l,!0),b.onPendingPromisesLimitExceeded=function(e){N=e})}function f(){I&&(I=null,D=0,N=A,b.off("created",c),b.off("fulfilled",l),b.off("rejected",l),b.off("resolved",l),b.off("cancelled",l))}function d(e){this._promiseId||(O++,this._promiseId=O),e._promiseId||(O++,e._promiseId=O),this._tracks||(this._tracks=[]),e._trackedBy||(e._trackedBy=[]),this._tracks.push(e),e._trackedBy.push(this)}function h(e){return e._trackedBy&&0!==e._trackedBy.length?(1!==e._trackedBy.length&&console.warn("Promise "+e._promiseId+" is tracked by more than one promise"),h(e._trackedBy[0])):e}function m(e,t){var n=[];if(t++,t>100)return null;var r=null,i="";if(e._trace){var o=e._trace.stack;i=',tooltip="'+o.replace(/(?:\r\n|\r|\n)/g,"&#13;&#10;")+'"';var a=o.split("\n")[4].trim(),s=/at (.*) \(.*[\\\/](.*:.*:.*)\)/g,u=s.exec(a);r=u&&3===u.length?e._promiseId+": "+u[1]+" at "+u[2]:e._promiseId}else r=e._promiseId;var c="";if(e.isRejected()&&(c=",color=blue"),e.isPending()&&(c=",color=red"),e.isCancelled()&&(c=",color=gray"),n.push(e._promiseId+'[label="'+r+'"'+c+i+"];"),e._tracks)for(var l=0;l<Math.min(e._tracks.length,1e3);l++)n.push(e._promiseId+"->"+e._tracks[l]._promiseId+";"),n=n.concat(m(e._tracks[l],t));return n}function g(){return"digraph promises {"+m(h(this),0).join("\n")+"}"}function v(){if(!this.isPending())throw new Error("This promise is not waiting for any other promise");if(this._tracks&&0!=this._tracks.length){for(var e=[],t=0;t<this._tracks.length;t++)this.isPending()&&(e=e.concat(this._tracks[t].findWaitingFor()));return e}return[this]}function y(){C||(k=!0,b.on("chained",d,!0),b.prototype.findWaitingFor=v,b.prototype.getDOTGraph=g)}function _(){C&&(k=!1,O=0,b.off("chained",d),b.prototype.findWaitingFor=null,b.prototype.getDOTGraph=null)}function x(e,t){b=e,"monitor"in t&&(t.monitor?i():o()),"tracing"in t&&(t.tracing?y():_()),"maxChainLength"in t&&(t.maxChainLength?"number"==typeof t.maxChainLength?s(t.maxChainLength):s(1e5):u()),"maxPendingPromises"in t&&(t.maxPendingPromises?"number"==typeof t.maxPendingPromises?p(t.maxPendingPromises):p(1e5):f())}var b=null,w={}.hasOwnProperty,S={},E=0,C=null,T=function(){throw new Error("Promises chain is too long, it reached limit of "+C+" promises")},P=T,I=null,D=0,A=function(){throw new Error("Too many pending promises, it reached limit of "+I+" promises")},N=A,k=!1,O=0;return{createStack:function(t){t=t||0,t+=2;var n=new Error;n.stack||(e(n),t++);for(var r=n.stack.split("\n"),i=0;t>i;i++)r.shift();return r.join("\n")},hookToBluebird:x}}),define("sap/watt/core/Constants",[],function(){"use strict";var e=function(){return 2},t={WATT_PREFIXED_ARGS_NUM:e};return Object.freeze(t),t}),define("sap/watt/core/RunTimeChecks",["sap/watt/lib/lodash/lodash","./Constants","./DebugHooks"],function(e,t,n){"use strict";function r(t){return e.isString(t)||e.isNumber(t)||e.isBoolean(t)||e.isNull(t)||e.isUndefined(t)?t:e.isArray(t)?"an array":e.isObject(t)?"an object":"unknown"}function i(t,n){return e.isNull(n)||e.isUndefined(n)?!0:e.every(t,function(e){return e(n)})}function o(t){return i([e.isString],t)}function a(t){return i([e.isNumber],t)}function s(t){return i([e.isBoolean],t)}function u(t){return i([e.isArray,x],t)}function c(t){return i([e.isArray,b],t)}function l(t){return i([e.isArray,w],t)}function p(t){return i([e.isArray],t)}function f(e,t,n){return"argument number "+n+", expected: "+e+" but actual: "+typeof t+" with value: "+r(t)}function d(e,t){return"unexpected return type expected: "+e+" but actual: "+typeof t+" with value: "+r(t)}function h(e,t,n,r){switch(e){case"string":return o(t)?S:n(e,t,r);case"number":return a(t)?S:n(e,t,r);case"boolean":return s(t)?S:n(e,t,r);case"[string]":return u(t)?S:n(e,t,r);case"[number]":return c(t)?S:n(e,t,r);case"[boolean]":return l(t)?S:n(e,t,r);case"[object]":return p(t)?S:n(e,t,r);case"object":default:return S}}function m(e,t,n,r,i,o,a){e[n]=!0,t.push({service:r,method:i,stack:a,issues:o})}function g(t,r,i,o,a){var s=o?o:[],u=s.length,c=e.filter(s,function(e){return e.optional===!0}),l=u-c.length,p=e.range(l,u+1),g=function(){function o(t){var n=h(a,t,d);return n&&I.push(n),e.isEmpty(I)||m(C,y,g,i,r,I,c),t}var c=n.createStack(2).split("\n"),g=i+"_^_"+r+"_ ^ _"+e.first(c);if(E[g])return t.apply(this,arguments);var x=Array.prototype.slice.call(arguments,_),b=e.take(x,s.length),w=e.take(s,b.length),S=e.compact(e.map(b,function(e,t){var n=w[t],r=n.type;return h(r,e,f,t)}));if(!e.contains(p,arguments.length-_)){var T="invoked with invalid number of arguments \nexpected: "+l+".."+u+" actual: "+(arguments.length-_);S.push(T)}e.isEmpty(S)||m(E,v,g,i,r,S,c);var P=t.apply(this,arguments),I=[];return a&&!C[g]?Q.isPromise(P)?P.then(o):o(P):P};return g}var v=window.CUSTOM_RUNTIME_CHECKS_CALLER_ISSUES||[],y=window.CUSTOM_RUNTIME_CHECKS_RETURN_TYPE_ISSUES||[],_=t.WATT_PREFIXED_ARGS_NUM(),x=e.partialRight(e.every,e.isString),b=e.partialRight(e.every,e.isNumber),w=e.partialRight(e.every,e.isBoolean),S=!1,E={},C={};return{decorateFnWithTypeChecking:g,getCallerIssues:function(){return v},getReturnTypeIssues:function(){return y},clearIssues:function(){v.length=0,y.length=0},_isStringType:o,_isNumberType:a,_isBooleanType:s,_isStringArrayType:u,_isNumberArrayType:c,_isBooleanArrayType:l,_isObjectArrayType:p}}),define("sap/watt/core/Proxy",["./Interface","./DebugHooks","./RunTimeChecks","sap/watt/lib/lodash/lodash","./Constants"],function(e,t,n,r,i){"use strict";var o=function(){this._mListeners={}};o.prototype._mListeners=null,o.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=[],r=[];if(t.push({}),this.hasListeners(e))for(var i=this._mListeners[e].concat(),o=0;o<i.length;o++){var a=i[o],s=a.listener,u=a.context;if(this._emitPreperation(a,n))try{r.push(Q(s.apply(u,t)))}catch(c){r.push(Q.reject(c))}}if(n.length>0)for(var o=0;o<n.length;o++){var a=n[o];this.off(e,a.listener,a.context)}return Q.allResolved(r)},o.prototype._emitPreperation=function(e,t){var n=!0,r=e.numberOfAllowedEmits;return"undefined"!=typeof r&&(r>0?(e.numberOfAllowedEmits--,0===e.numberOfAllowedEmits&&t.push({listener:e.listener,context:e.context})):n=!1),n},o.prototype.on=function(e,t,n){this._on(e,t,n)},o.prototype.once=function(e,t,n){this._on(e,t,n,1)},o.prototype._on=function(e,t,n,r){if(this.hasListener(e,t,n))throw new Error("Listener for event '"+e+"' is already registered");var i=this._mListeners[e]=this._mListeners[e]||[];i.push({listener:t,context:n,numberOfAllowedEmits:r})},o.prototype.off=function(e,t,n){this._visitListeners(e,function(e,t){return e.splice(t,1),!1},t,n)},o.prototype.hasListeners=function(e){if(!this._mListeners)throw new Error("EventEmitter constructor not called");return this._mListeners[e]&&this._mListeners[e].length>0},o.prototype.hasListener=function(e,t,n){var r=!1;return this._visitListeners(e,function(){return r=!0,!1},t,n),r},o.prototype._visitListeners=function(e,t,n,r){var i=this.hasListeners(e);if(i)for(var o=this._mListeners[e],a=0;a<o.length;a++){var s=o[a],u=s.listener,c=s.context,l=!1;if(n?n===u&&r===c&&(l=t(o,a,u,c)===!1):l=t(o,a,u,c)===!1,l)break}return i};var a=function(e){this._sName=e};a.prototype.getName=function(){return this._sName};var s=function(e,t){return{create:function(n,r){return r=jQuery.extend(r||{},{"implements":e,module:t}),this.context.create(n,r)}}},u=function c(e,t){if(this._sName=e,this._oImpl=null,this._oImplSync=null,this._mConfig={module:null,className:null,"implements":null,lazy:!0},this._oInterface=null,t.isFactory===!0){var n=t.implements,i=t.module;delete t.isFactory,t.implements="Factory",t.module=s(n,i)}"string"==typeof t?this._mConfig.className=t:r.assign(this._mConfig,t),this._oEventEmitter=this._mConfig.eventEmitter||null,this._mConfiguration=this._mConfig.configuration||null,this.context=this._mConfig.context||{},this._oContext=this.context,this._oContext.self=this._mConfig.self||this;var o=this;this._oContext.create=function(e,t){return t.context=o._oContext,t.lazy=t.lazy===!1?!1:!0,c.create(e,t).then(function(e){return e})},!this._mConfig.module&&this._mConfig.className&&(console.warn("Service '"+this._sName+"': Using the property 'className' is deprecated. Please use 'module' instead"),this._mConfig.module=this._mConfig.className.replace(/\./g,"/")),this._oMetadata=new a(this._sName),this.$isLazy()&&(this.$=function(){return this._getImpl({}).then(function(e){return e})})};return u.create=function(e,t){var n=new u(e,t);return n.initialize()},u.LIFECYCLE_METHODS={init:!0,configure:!0},u.LIFECYCLE_METHODS_TIMEOUT=6e4,u.isLifecycleMethod=function(e){return this.LIFECYCLE_METHODS[e]},u.prototype.getProxyMetadata=function(){return this._oMetadata},u.prototype.instanceOf=function(e){return this._oInterface.hasInterface(e)},u.prototype.attachEvent=function(e,t,n){this._getEventEmitter().on(e,t,n)},u.prototype.attachEventOnce=function(e,t,n){this._getEventEmitter().once(e,t,n)},u.prototype.detachEvent=function(e,t,n){this._getEventEmitter().off(e,t,n)},u.prototype.initialize=function(){delete this.initialize;var t=this._mConfig["implements"],n=this,r=[e.create(t)];return this.$isLazy()||r.push(this._getImpl({})),Q.all(r).spread(function(e){return n._oInterface=e,n._decorateProxyWithInterfaceMethods(),n._mConfiguration=n._mConfiguration||e.createConfigurationObject(),n._injectEventsToContext(),n},function(e){n._error("Original error message: "+e.message+"\nError stack: "+e.stack+"\n -----------")})},u.prototype.$isLazy=function(){return this._mConfig.lazy},u.prototype.$getInterface=function(){return this._oInterface},u.prototype.$configure=function(e,t){if(this._oImpl&&this._oImpl.isFulfilled()){if(this.$isLazy())return this._invokeImplMethod("$configure",[e,t],!0,{});var n=this._addToConfig(this._oInterface.createConfigurationObject(),e,t);return this._invokeImplMethod("configure",[n],!1,{})}return this._addToConfig(this._mConfiguration,e,t),Q()},u.prototype._getEventEmitter=function(){return this._oEventEmitter||(this._oEventEmitter=new o),this._oEventEmitter},u.prototype._addToConfig=function(e,t,n){if(this._oInterface.isConfigurationPropertyMultiple(t)){Array.isArray(n)||this._error("Value for multiple configuration property '"+t+"' must be an array");for(var r=0;r<n.length;r++)e[t].push(n[r])}else"undefined"!=typeof this._mConfiguration[t]&&this._error("Non multiple property '"+t+"' is already set and can not be overriden by configuration"),e[t]=n,this._mConfiguration[t]=n;return e},u.prototype._fireEvent=function(e,t){var n=r.assign({params:{}},t,{source:this._oContext.self,name:e});return this._getEventEmitter().emit(e,n)},u.prototype.$invoke=function(e){if(this.$isLazy()){var t=arguments;return this._getImpl({}).then(function(e){return e.$invoke.apply(e,t)})}if(u.isLifecycleMethod(e))return this._error("Method is a lifecycle method. Do not call directly.",e),void 0;var t=Array.prototype.slice.call(arguments,i.WATT_PREFIXED_ARGS_NUM());return this._invokeImplMethod(e,t,!0)},u.prototype._charToUpperCase=function(e){return e&&e.length>1&&e.slice(0,1).toUpperCase()+e.slice(1)},u.prototype._invokeImplMethod=function(e,t,n){var r=this;return this._getImpl({}).then(function(i){return r._invokeMethod(i,e,t,n)})},u.prototype._invokeMethod=function(e,t,n,r){r=r===!1?!1:!0;var i=this,o=null;if(e[t])o=e[t].apply(e,n),Q.isPromise(o)||(o&&o.constructor===Array&&o.length>0&&Q.isPromise(o[0])?(console.error("Warning: unhandeled promisses array"),o=Q.all(o)):o=Q(o));else if(r){var a=this._oInterface.getMethodDefaultReturnValue(t);if(a)o=a.default,"object"===a.type&&(o=jQuery.extend(!0,{},o)),e[t]=function(){return Q(o)};else{if(!sap.watt.getEnv("devMode"))return console.error("Method: "+t+" not implemented"),Q();i._error("Method: "+t+" not implemented")}}return o},u.prototype._callLifeCycleMethod=function(e,t,n){var r=this;return this._fireEvent("$before"+this._charToUpperCase(t)).then(function(){return r._invokeMethod(e,t,n,!1)}).timeout(u.LIFECYCLE_METHODS_TIMEOUT)},u.prototype._getImplSync=function(){return this._oImplSync},u.prototype._getImpl=function(){if(!this._oImpl){var e=this;this._oImpl=this._createImplInstance().then(function(t){return e._oImplSync=t,t})}return this._oImpl},u.prototype._createImplInstance=function(){var e=this;if(this._mConfig.factory)return this._oContext.service[this._mConfig.factory].create(this._sName,{self:this._mConfig.self,eventEmitter:this._getEventEmitter(),configuration:this._mConfiguration});if(this.$isLazy()){var t=r.clone(this._mConfig);return t.lazy=!1,t.context=this._oContext,t.self=this,t.configuration=r.assign(this._mConfiguration,this._mConfig),t.eventEmitter=this._getEventEmitter(),u.create(this._sName,t)}var n=this._mConfig.module,i=function(t){var n=t;return"function"==typeof t?n=new n:(n.__bProxyImplInUse&&e._error("Error loading "+t+": Module instance is already in use. Please define module"+" as a class by returning a function instead of an object"),n.__bProxyImplInUse=!0),n.context=e.context,delete e.context,e._callLifeCycleMethod(n,"init",null).then(function(){return e._callLifeCycleMethod(n,"configure",[e._mConfiguration])}).then(function(){return n})};return"string"==typeof n?Q.sap.require(n).then(i)["catch"](function(t){e._error(t.message+"\nError stack: "+t.stack+"\n -----------")}):i(n)},u.prototype._error=function(e,t){u._error(e,this._sName,t)},u.prototype._decorateProxyWithInterfaceMethods=function(){for(var e=this._oInterface,t=e.getMethods(),n=Object.keys(t),r=n.length,i=0;r>i;i++){var o=n[i];if(this[o]||u.isLifecycleMethod(o))this._error("Interface method is not allowed as it is implemented by the proxy",o);else{var a=t[o],s=a.async===!1?!1:!0,c=this.$isLazy();this[o]=c||s?this._createAsyncProxyMethod(o,a):this._createSyncProxyMethod(o,a)}}},u.prototype._createSyncProxyMethod=function(e,t){var n=this,r=n._getImplSync(),i=this.decorateProxyMethod(r[e],e,t);return function(){return i.apply(n,arguments)}},u.prototype._createAsyncProxyMethod=function(e,t){var n=this,r=this.decorateProxyMethod(n.$invoke,e,t);return function(){var t=[e,{}];return t=t.concat(Array.prototype.slice.call(arguments)),r.apply(n,t)}},u.prototype.decorateProxyMethod=function(e,i,o){var a=e;if(o.deprecated){var s="Service '"+this._sName+"': Method '"+i+"' is deprecated";s+=o.deprecated.since?" since "+o.deprecated.since:"",s+=o.deprecated.until?" until "+o.deprecated.until:"",s+=". "+(o.deprecated.description?"Description: "+o.deprecated.description:""),a=function(){return console.warn(s),console.warn(t.createStack(2)),e.apply(this,arguments)}}if(sap.watt.getEnv("enableRuntimeChecks")){var u=r.isString(this._sName)?this._sName:this._sName.module;a=n.decorateFnWithTypeChecking(e,i,u,o.params,o.returns)}return a},u.prototype._injectEventsToContext=function(){var e=this._oInterface,t={},n=e.getEvents();t.fire=this._createFireEventFunction(n);for(var r=Object.keys(n),i=r.length,o=0;i>o;o++){var a=r[o];t["fire"+this._charToUpperCase(a)]=this._createFireSpecificEventFunction(a)}this._oContext.event=t},u.prototype._createFireEventFunction=function(e){var t=this;return function(n,r){return e[n]||t._error("The event '"+n+"' is not declared in the interface"),t._fireEvent(n,{params:r})}},u.prototype._createFireSpecificEventFunction=function(e){var t=this;return function(n){return t._fireEvent(e,{params:n})}},u._error=function(e,t,n){var r=[];throw t&&r.push("Name: "+t),n&&r.push("Method: "+n),e&&r.push("Message: "+e),new Error("Proxy: "+r.join(" | "))},u}),define("sap/watt/core/Service",["./Proxy"],function(){"use strict";var e={_mRegistry:{},$setServiceRegistry:function(e){this._oServiceRegistry=e},get:function(e){var t;try{throw new Error}catch(n){t=n.stack.split("\n")}var r=t[2]||"caller unkown";return console.error("Deprecated: Service.get() - use context.service instead - Caller: "+r),this._oServiceRegistry.get(e)}};return e}),define("sap/watt/core/ServiceRegistry",["./Proxy","sap/watt/lib/lodash/lodash"],function(e,t){"use strict";var n=function(){this._mRegistry={}};return n.prototype.register=function(t,n){if(this._mRegistry[t])throw new Error("Service "+t+" is already implemented");this._mRegistry[t]="Under construction";var r=this;return e.create(t,n).then(function(e){return r._mRegistry[t]=e,e})},n.prototype.get=function(e){var t=this._mRegistry[e];return t||this._error("Service not registered",e),t},n.prototype.getAllServiceNames=function(){return t.keys(this._mRegistry)},n.prototype._error=function(e,t){var n=[];throw t&&n.push("Service: "+t),e&&n.push("Message: "+e),new Error(n.join(" | "))},n}),define("sap/watt/core/I18nBundle",[],function(){"use strict";var e=RegExp("^{(.+)>(.+)}$"),t=function(e){this._sLocale=window.sap.watt.getLocale(),this._defaultBundleName="i18n";var t={};"string"==typeof e?t[this._defaultBundleName]=e:t=e;for(var n in t){var r,i=t[n].indexOf(".hdbtextbundle");i>0?(r=".hdbtextbundle",t[n]=t[n].substr(0,i)):r=".properties";var o=/([^\/]*)\/(.*)/.exec(t[n]);t[n]=sap.ui.resource(o[1],o[2]+r)}this._mI18nBundles=t,this._aResourceBundles={},this.locale=this._sLocale,this.bundles=t};return t.prototype={},t.prototype.getText=function(t,n,r){if(1===arguments.length){var i=e.exec(arguments[0]);i?(t=i[1],n=i[2]):(n=arguments[0],t=this._defaultBundleName)}else 2===arguments.length&&Array.isArray(arguments[1])&&(r=arguments[1],n=arguments[0],t=this._defaultBundleName);if("string"!=typeof t&&"string"==typeof n&&(!r||Array.isArray(r)))throw new Error("Wrong arguments");if(!this._aResourceBundles[t]){var o=this._mI18nBundles[t];if(!o)throw new Error("Error getting i18n resource bundle '"+t+"'");jQuery.sap.require("jquery.sap.resources"),this._aResourceBundles[t]=jQuery.sap.resources({url:o,locale:this._sLocale})}return this._aResourceBundles[t].getText(n,r)},t.prototype.applyTo=function(e){var t=this._mI18nBundles;jQuery.isArray(e)||(e=[e]);for(var n in t){var r=new sap.ui.model.resource.ResourceModel({bundleUrl:t[n],bundleLocale:this.locale});e.forEach(function(e){e.setModel(r,n)})}},t}),define("sap/watt/core/Validations",["../lib/lodash/lodash"],function(e){"use strict";function t(t){function r(e){return e._getImpl().then(function(e){return e._getImpl()})}var i=e.mapValues(t,function(e){return{expectedInterface:e._oInterface,actualImplPromise:r(e)}}),o=e.map(i,function(e){return e.actualImplPromise});return Q.all(o).then(function(t){var r=0,o=e.mapValues(i,function(e){return{expectedInterface:e.expectedInterface,actualImpl:t[r++]}}),a=e.mapValues(o,function(e){return n(e)}),s=e.omit(a,function(t){return e.isEmpty(t)});return s})}function n(t){var n=t.expectedInterface,i=t.actualImpl,o=r(n),a=e.functions(i),s=e.difference(o,a);return s}function r(t){var n=e.map(t._mInterfaces,function(t){return e.keys(e.omit(t.methods,function(e){return e.returns&&e.returns.hasOwnProperty("default")}))}),r=e.union(e.flatten(n));return r}function i(t,n,r){var i=[];e.isString(e.first(n))?i=n:e.isObject(e.first(n))&&(i=o(n)),r&&(i=e.union(i,r));var a=c(t),s=a?t.requires.services:[];return e.difference(s,i)}function o(t){var n=e.map(t,function(t){var n=u(t);return n?e.keys(t.provides.services):[]});return e.unique(e.flatten(n))}function a(t){if(!s(t))return[];var n=c(t),r=u(t),i=n?t.requires.services:[],o=r?e.keys(t.provides.services):[],a=e.keys(t.configures.services),l=e.map(a,function(e){return e.split(":")[0]}),p=e.reject(l,function(t){return e.contains(i,t)}),f=e.reject(l,function(t){return e.contains(o,t)});return e.intersection(p,f)}function s(t){return e.isObject(t.configures)&&e.isObject(t.configures.services)}function u(t){return e.isObject(t.provides)&&e.isObject(t.provides.services)}function c(t){return e.isObject(t.requires)&&e.isArray(t.requires.services)}return{checkAllMethodsOnInterfaceImplemented_forAll:t,checkAllMethodsOnInterfaceImplemented:n,checkConfiguredServicesWhichAreNotRequiredOrProvided:a,checkMissingRequiredServices:i}}),define("sap/watt/core/ErrorMessages",["../lib/lodash/lodash"],function(e){"use strict";function t(e){var t="Not all required services are provided: \n";return r(e,t,"missing required services --->")}function n(e){var t="Inconsistent Service Definition			- Not all configured services are required or provided: \n";return r(e,t,"services not required or provided --->")}function r(t,n,r){var i=e.reduce(t,function(e,t,n){var i="Plugin: "+n+" "+r+" "+t.join(", ")+"\n";return e+i},n);return i}return{getErrorMessage_configured_but_not_required_or_provided:n,getErrorMessage_missing_required_service:t}}),define("sap/watt/core/PluginRegistry",["./Service","./ServiceRegistry","./Proxy","./Interface","./ConfigPreload","./I18nBundle","./Validations","./ErrorMessages","sap/watt/lib/lodash/lodash"],function(e,t,n,r,i,o,a,s,u){"use strict";function c(e,t){return u.forEach(t,function(t,n){e[n]=e[n]?Array.isArray(t)?jQuery.merge(e[n],t):u.isPlainObject(t)?c(e[n],t):t:t}),e}function l(e,t){var n=!0,r=!0,i=".Plugin";return e.indexOf(".Plugin")===e.length-i.length&&(console.warn("Deprecation Warning: Wrong pattern for plugin 'name' "+e+". Please use a valid namespace, e.g. sap.watt.common.myplugin. "+"To use a Plugin.js please define a 'module', e.g. 'module':'sap.watt.common.myplugin/Plugin.js"),n=!1),t&&0===t.indexOf("./")&&(console.warn("Deprecation Warning: Wrong pattern for plugin 'module' "+e+". To use a Plugin.js please define a 'module', e.g. "+"'module':'sap.watt.common.myplugin/Plugin.js. If no module is needed, delete it."),r=!1),!r&&!n}function p(e){var t=u.mapValues(e,function(e){return a.checkConfiguredServicesWhichAreNotRequiredOrProvided(e)}),n=u.omit(t,function(e){return u.isEmpty(e)});return n}function f(e,t){var n=t.getAllServiceNames(),r=u.mapValues(e,function(e){return a.checkMissingRequiredServices(e,n)}),i=u.omit(r,function(e){return u.isEmpty(e)});return i}function d(e,t){var n={};n[e.getMetadata().name]=e.getMetadata();var r=p(n),i=f(n,t),o=[];if(u.isEmpty(r)||o.push(s.getErrorMessage_configured_but_not_required_or_provided(r)),u.isEmpty(i)||o.push(s.getErrorMessage_missing_required_service(i)),!u.isEmpty(o))throw new Error("Problems detected while checking service definition consistency:\n"+o.join("--------------------\n"))}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("rejected"===r.state){var i=e[n];i.sURI?r.baseURI=i.sURI:(r.name=i.getMetadata().name,r.description=i.getMetadata().description,r.baseURI=i.getMetadata().baseURI)}}}function m(e,t){h(e,t);var n=u.filter(e,function(e,n){return"fulfilled"===t[n].state}),r=u.filter(t,function(e){return"rejected"===e.state});return{successes:n,failures:r}}function g(e){var t=u.reduce(e,function(e,t){return e+"\n"+t.reason.stack},"");return t}var v=new t;e.$setServiceRegistry(v);var y={};y.assertConfiguredServicesAreRequiredOrProvided=p,y.assertAllRequiredAreInRegistry=f,y.assertServicesDefinitionConsistency=d,Object.freeze(y);var _=function(e,t){this._oMetadata=e,this._baseURI=e.baseURI,this._oProxy=t,this._oContext=t?t.context:{},this._registerInterfaces()};_.create=function(e,t){var r=function(e){e.baseURI&&_.registerRequirePath(e.name,e.baseURI);var r=t&&t[e.name],i=[];return(r||[]).forEach(function(e){var t=e.sURI.replace(/\/$/,"");i.push(_.loadMetadata(t,"plugin.ext.json"))}),Q.all(i).then(function(t){t.forEach(function(t){_.registerRequirePath(t.name,t.baseURI),e=_.mergeMetadata(e,t)});var r=Q();return l(e.name,e.module)?r=n.create(e.name,e.name):e.module&&(r=n.create(e.name,{module:e.module})),r.then(function(t){return new _(e,t)})})};if(u.isString(e)){var i=e.replace(/\/$/,"");return _.loadMetadata(i,"plugin.json").then(function(e){return r(e,i)})}return r(_._ensureSections(e))},_._ensureSections=function(e,t){if(!e.name)throw new Error("Failed to load metadata for Plugin "+t+"! Reason: No plugin name given");return jQuery.extend(!0,{baseURI:t,requires:{services:[]},provides:{services:{},interfaces:{}},configures:{services:{}},subscribes:{}},e)},_.registerRequirePath=function(e,t){var n={paths:{}};n.paths[e]=t,require.config(n),jQuery.sap.registerModulePath(e,t)},_.mergeMetadata=function(e,t){return e.requires.services=e.requires.services.concat(t.requires.services),c(e.provides.services,t.provides.services),c(e.configures.services,t.configures.services),c(e.subscribes,t.subscribes),e},_.loadMetadata=function(e,t){var n=e+"/"+t,r=i.toInternalPath(n.replace(t,"."));return i.getPreload("plugins",r).then(null,function(){return Q(jQuery.ajax({url:n,dataType:"json"}).then(null,function(e,t){return new Error("Failed to load metadata for Plugin "+n+"! Reason: "+t+" "+e.statusText)}))}).then(function(t){return _._ensureSections(t,e)})},_.prototype.initServices=function(e){delete this.initServices;var t=[],n=this._getServiceMetadataFor("provides");return u.forEach(n,function(e,n){var r=v.register(n,e);t.push(r)}),e?Q.allSettled(t):Q.all(t)},_.prototype.initialize=function(){var e=this;return Q.fcall(function(){delete e.initialize,e._initI18n(),e._initServiceContexts(),e._initSubscribes(),e._initServiceConfigurations()}).then(null,function(t){throw new Error("Error initializing plugin "+e._oMetadata.name+"\nOriginal error message: "+t.message+"\nError stack: "+t.stack+"\n -----------")})},_.prototype.getMetadata=function(){return this._oMetadata},_.prototype._registerInterfaces=function(){var e=this._getInterfaceMetadata();u.forEach(e,function(e,t){"string"==typeof e&&(e+=".json"),r.register(t,e)})},_.prototype._initServiceContexts=function(){var e=this._getServiceMetadataFor("requires"),t=this._getServiceMetadataFor("provides"),n=this._createServiceObjectForContext(t,e);this._oContext.service=n;var r=this;for(var i in t){var o=v.get(i);o.context.service=n,o.context.i18n=r._oContext.i18n}},_.prototype._initI18n=function(){var e=this.getMetadata().i18n,t=this._createI18nObjectForContext(e);this._oContext.i18n=t},_.prototype._initSubscribes=function(){var e=this,t=this.getMetadata().subscribes;u.forEach(t||{},function(t,n){var r=n.split(":");if(2!==r.length)throw new Error("Event subscribtion needs to be of the following format: <service>:<eventName>, but is '"+n+"'");var i=v.get(r[0]),o=r[1];"string"==typeof t&&(t=[t]),t.forEach(function(t){var n,r,a=t.split(":");if(1===a.length){if(n=a[0],r=e._oProxy,!r)throw new Error("Target service of event subscription is not available. Please define a plugin 'module' in the plugin.json of plugin: "+e.getMetadata().name)}else{var s=a[0];if(n=a[1],r=v.get(s),!e._oMetadata.provides||!e._oMetadata.provides.services||!e._oMetadata.provides.services[s])throw new Error("An event handling service needs to be provided by the plugin that defines the subscription - Plugin: "+e._oMetadata.name+" - Service: "+s)}if(n){var u=function(e,t){return r.$invoke(n,t||{},e)};i.attachEvent(o,u)}})})},_.prototype._initServiceConfigurations=function(){var e=this._getServiceMetadataFor("configures"),t=this;u.forEach(e||{},function(e,n){var r=n.split(":"),i=null;if(2!==r.length)throw new Error("Service Configuration: Syntax error in configuration for service '"+n+"' in Plugin '"+this.getMetadata().name+"'. No configuration property given.'");n=r[0],i=r[1];var o=v.get(n);o.attachEventOnce("$beforeInit",function(){return t._enrichServiceConfigurationValueAndConfigureService(i,e,o)})})},_.prototype._configureAnonymousService=function(e,t){var n=this,r=[];return u.forEach(t||{},function(t,i){r.push(n._enrichServiceConfigurationValueAndConfigureService(i,t,e))}),Q.all(r)},_.prototype._enrichServiceConfigurationValueAndConfigureService=function(e,t,n){return this._enrichServiceConfigurationValue(e,t,n).then(function(t){return n.$configure(e,t)})},_.prototype._enrichServiceConfigurationValue=function(e,t,n){var r=this,i=n.$getInterface(),o=n.getProxyMetadata().getName()||"anonymous";if(!i.hasConfigurationProperties())throw new Error("Service configuration: No configuration defined for '"+o+"'. Please define the configuration in the interface");var a=i.getConfigurationProperties(),s=a[e];if(!s)throw new Error("Service Configuration: Configuration property '"+e+"' not defined in configuration for service '"+o+"' in Plugin '"+this.getMetadata().name+"'.'");var u=s.type,c=[];if(i.isConfigurationPropertyMultiple(e)){if(!Array.isArray(t))throw new Error("Service configuration: Multiple configuration property '"+e+"' of service '"+o+"' needs to be an array");c=t.map(function(e,n){return r._enrichServiceConfigurationValueByType(u,e,i).then(function(e){t[n]=e})})}else c.push(this._enrichServiceConfigurationValueByType(u,t,i).then(function(e){t=e}));return Q.all(c).then(function(){return t})},_.prototype._enrichServiceConfigurationValueByType=function(e,t,n){var r=this,i=[];if(null===t||void 0===t)return Q(t);if(n.isComplexType(e))if(Array.isArray(e)){var o=e[0];i=t.map(function(e,i){return r._enrichServiceConfigurationValueByType(o,e,n).then(function(e){t[i]=e})})}else u.forEach(e,function(e,o){var a=e;
u.isPlainObject(e)&&(a=e.type),i.push(r._enrichServiceConfigurationValueByType(a,t[o],n).then(function(e){t[o]=e}))});else n.isProxyType(e)?i.push(this._getServiceByConfigurationValue(t,e).then(function(e){t=e})):t=this._getTextFromResourceBundle(t);return Q.all(i).then(function(){return t})},_.prototype._getServiceByConfigurationValue=function(e,t){var r=this;if("string"==typeof e&&0===e.indexOf("@")){var i=e.substring(1),o=v.get(i);return o.instanceOf("Factory")&&"Factory"!==t?o.create().then(function(e){return e}):Q(o)}var a,s={};if(u.isString(e)?(s.implements=t,-1!=e.indexOf("/")?s.module=e:s.className=e):(s=e,a=e.configuration,delete s.configuration,s.implements&&""!==s.implements||(s.implements=t)),s.factory){var i=s.factory.substring(1),o=v.get(i);return o.create().then(function(e){return r._configureAnonymousService(e,a).then(function(){return e})})}return n.create(e,s).then(function(e){return r._configureAnonymousService(e,a).then(function(){return e.context.service=r._oContext.service,e.context.i18n=r._oContext.i18n,e})})},_.prototype._createServiceObjectForContext=function(e,t){var n=t.slice(0);for(i in e)n.push(i);for(var r={},i="",o=null,a=0;a<n.length;a++)i=n[a],o=v.get(i),this._setObjectValue(r,i,o);return r},_.prototype._setObjectValue=function(e,t,n){var r=t;if(-1!=r.indexOf(".")){for(var i=r.split("."),o=0;o<i.length-1;o++)e[i[o]]=e[i[o]]||{},e=e[i[o]];r=i[o]}e[r]=n},_.prototype._getServiceMetadataFor=function(e){return this.getMetadata()[e].services},_.prototype._getInterfaceMetadata=function(){return this.getMetadata().provides.interfaces},_.prototype._createI18nObjectForContext=function(e){return e?new o(e):null},_.prototype._getTextFromResourceBundle=function(e){if("string"==typeof e&&e.indexOf(">")>1){var t=e.match(/{(.+)>(.+)}/);if(3===t.length){var n=t[1],r=t[2];e=this._oContext.i18n.getText(n,r)}}return e};var x=function(){this._mRegistry={},this._assertUtils=y};return x.prototype.$getServiceRegistry=function(){return v},x.prototype.register=function(e,t){return this._registerMain(e,t).then(function(e){return e.required.successes})},x.prototype.registerWithFullDetails=function(e,t){return this._registerMain(e,t)},x.prototype._registerMain=function(e,t){var n=u.where(e,{required:!1}),r=u.difference(e,n),i=this;return i._createPlugins(r,t).then(function(e){if(!u.isEmpty(e.failures)){var r=g(e.failures);throw new Error("failure during creation of required plugins ->\n"+r)}return i._createPlugins(n,t).then(function(t){return u.isEmpty(t.failures)||(console.log("failure during creation of required plugins"),console.log(g(t.failures))),i._removeFailedPluginsFromPluginRegistry(t.failures),{required:{successes:e.successes,failures:e.failures},notRequired:{successes:t.successes,failures:t.failures}}})})},x.prototype._removeFailedPluginsFromPluginRegistry=function(e){var t=this;u.forEach(e,function(e){delete t._mRegistry[e.baseURI]})},x.prototype._createPlugins=function(e,t){if(u.isEmpty(e))return Q({successes:[],failures:[]});var n=this;return n._registerPlugins(e,t).then(function(e){return n._initServices(e.successes).then(function(t){return n._verifyPluginsServices(t.successes).then(function(r){return n._initPlugins(r.successes).then(function(n){var i=n.failures.concat(e.failures,t.failures,r.failures);return{successes:n.successes,failures:i}})})})})},x.prototype._registerPlugins=function(e,t){if(u.isEmpty(e))return Q({successes:[],failures:[]});var n=u.map(e,function(e){var n;return n=u.isPlainObject(e)&&e.sURI?e.sURI:e,this._register(n,t)},this);return Q.allSettled(n).then(function(t){h(e,t);var n=u.groupBy(t,function(e){return e.state}),r=n.fulfilled?n.fulfilled:[],i=n.rejected?n.rejected:[],o=u.collect(r,"value");return{successes:o,failures:i}})},x.prototype._verifyPluginsServices=function(e){if(u.isEmpty(e))return Q({successes:[],failures:[]});var t=this,n=u.map(e,function(e){return Q.fcall(function(){d(e,t.$getServiceRegistry())})},this);return Q.allSettled(n).then(function(t){return m(e,t)})},x.prototype._initServices=function(e){if(u.isEmpty(e))return Q({successes:[],failures:[]});var t=u.map(e,function(e){return Q(e).invoke("initServices").then(function(){console.log("READY: "+e.getMetadata().name)})},this);return Q.allSettled(t).then(function(t){return m(e,t)})},x.prototype._initPlugins=function(e){if(u.isEmpty(e))return Q({successes:[],failures:[]});var t=u.map(e,function(e){return e.initialize()});return Q.allSettled(t).then(function(t){return m(e,t)})},x.prototype._register=function(e,t){if(this._mRegistry[e]){var n=Q.defer();return n.reject(new Error("Plugin "+e+" is already registered")),n.promise}var r=this;return console.log("CREATE: "+e),_.create(e,t).then(function(t){return r._mRegistry[e]=t,t})},x.prototype.get=function(e){var t=this._mRegistry[e];return t||jQuery.sap.log.error("Plugin not registered",e),t&&t.getMetadata()},new x}),define("sap.watt.toolsets.javascript/service/watt/pluginProposalUtil",["sap/watt/lib/orion/javascript/esprima/esprimaJsContentAssist","sap/watt/lib/orion/javascript/esprima/esprimaVisitor","sap/watt/core/PluginRegistry","sap/watt/core/Service"],function(e,t,n,r){"use strict";function i(e,t){if(e.range[1]===t.offset)if("ThisExpression"===e.type)t.thisName="this";else{var n=d(e,t);n&&(t.thisName=n)}return!t.thisName}function o(e,t){if(e.range[0]<=t.offset){if("VariableDeclarator"===e.type&&"Identifier"===e.id.type)if(e.init&&"ThisExpression"===e.init.type)t.setVarNames[e.id.name]="this";else{var n=d(e.init,t);n&&(t.setVarNames[e.id.name]=n)}e.range[1]===t.offset&&"Identifier"===e.type&&t.setVarNames[e.name]&&(t.thisName=t.setVarNames[e.name])}return!t.thisName}function a(e,t,n,r,i){var o=[];if("this"==e)s("context",n,i)&&o.push(c("context"));else if("this.context"==e)s("service",n,i)&&o.push(c("service"));else if("this.context.service"==e){var a=p(t);for(var d in a){var h=a[d];s(h,n,i)&&o.push(c(h))}}else{var m="this.context.service.",g=e.indexOf(m);if(0===g){var v=e.substring(g+m.length);if(-1!==p(t).indexOf(v)){var y=f(v);for(var _ in y)s(_,n,i)&&o.push(l(_,y[_],r))}}}return o.length>0&&o.push(u()),o}function s(e,t,n){return n?0==e.indexOf(t):0==e.toLowerCase().indexOf(t.toLowerCase())}function u(){return{proposal:"",description:"---------------------------------",style:"hr",unselectable:!0}}function c(e){return{proposal:e,description:e+" : Object",category:"object",style:"emphasis",overwrite:!0}}function l(t,n,r){var i;n.returns&&(i=n.returns.type?n.returns.type instanceof Array?"Array":n.returns.type instanceof Object?"Object":"undefined":n.returns);var o=new e.EsprimaJavaScriptContentAssistProvider,a=o.calculateFunctionProposal(t,n,r-1);return{proposal:a.completion,description:a.completion+" : "+i,category:"function",positions:a.positions,escapePosition:r+a.completion.length,style:"emphasis",overwrite:!0}}function p(e){return e.requires&&e.requires.services?e.requires.services:[]}function f(e){try{var t=r.get(e);if(t)return t.$getInterface().getMethods()}catch(n){return console.log(n),[]}}function d(e,t){for(var n="";e&&"MemberExpression"===e.type;){if(e.property&&"Identifier"===e.property.type&&(n=n?e.property.name+"."+n:e.property.name+n),"ThisExpression"===e.object.type){n="this."+n;break}if("Identifier"===e.object.type&&t.setVarNames[e.object.name]){n=t.setVarNames[e.object.name]+"."+n;break}e=e.object}return n}var h=["/sap/watt/common/plugin/","/sap/watt/uitools/plugin/"],m={};return{getPluginName:function(e){if(e)for(var t in h){var n=h[t],r=e.indexOf(n);if(r>=0){for(var i=n.split("/",3).join(".")+".",o=e.split("/"),a="",s=0;s<o.length;s++)if("plugin"===o[s]){a=o[s+1];break}a=i+a}}},getPlugin:function(e){var t=e.service.content,n=e.service.filesystem;return t.getCurrentDocument().then(function(e){var t=e.getEntity().getFullPath();return m.hasOwnProperty(t)?m[t]:e.getProject().then(function(e){var r=e.getEntity().getFullPath(),i=r+"/plugin.json";return n.documentProvider.getDocument(i).then(function(e){if(e)return e.getContent().then(function(e){var n={};try{n=JSON.parse(e),m[t]=n}catch(r){console.warn("plugin.json :"+r)}return n});var o=t.search("/plugin/")+8;return o>=0?(o+=t.substring(o).indexOf("/"),i=t.substring(0,o)+"/plugin.json",n.documentProvider.getDocument(i).then(function(e){return e?e.getContent().then(function(e){var n={};try{n=JSON.parse(e),m[t]=n}catch(r){console.warn("plugin.json :"+r)}return n}):(console.warn("plugin.json is missed - not a plugin project"),m[t]=null,Q())})):(console.warn("plugin.json is missed - search in "+t.substring(r.length,t.length)),Q())})}).fail(function(){return m[t]=null,Q()})})},getProposals:function(e,n,r){var s={offset:n.offset-n.prefix.length-1,thisName:"",setVarNames:{}};try{t.visit(e,s,i,o)}catch(u){console.warn(u)}return s.thisName?a(s.thisName,r,n.prefix,n.offset-n.prefix.length,n.caseSensitive):[]},clearCach:function(e){var t=e.params.document.getEntity().getName();if("plugin.json"===t){var n=e.params.document.getEntity().getFullPath();n=n.slice(0,n.search("plugin.json"));for(var r in m)m.hasOwnProperty(r)&&0===r.search(n)&&delete m[r]}else("deleted"===e.name||"tabClosed"===e.name)&&t.indexOf(".")>=0&&"js"===t.split(".")[1]&&delete m[e.params.document.getEntity().getFullPath()];return Q()}}}),define("sap.watt.toolsets.javascript/service/Constants",[],function(){return{workerState:{ready:"ready",error:"error",successComputeProposals:"successComputeProposals",successComputeSummary:"successComputeSummary",libraryAdded:"libraryAdded"},workerAction:{start:"start",computeProposals:"computeProposals",computeHintProposals:"computeHintProposals",addLibrary:"addLibrary",computeSummary:"computeSummary"}}}),define("sap.watt.toolsets.javascript/service/JSCodeCompletionImpl",["sap/watt/lib/orion/javascript/esprima/indexer","sap/watt/lib/orion/javascript/esprima/esprimaJsContentAssist","sap/watt/lib/orion/editor/jsTemplateContentAssist","sap/watt/lib/orion/javascript/esprima/esprimaVisitor","./watt/pluginProposalUtil","./Constants","sap/watt/lib/jszip/jszip-shim"],function(e,t,n,r,i,o){"use strict";function a(e){W||(W=e.libraries)}function s(e){J.aPromise&&J.aPromise.resolve(e)}function u(e){return e&&e.data&&e.data.hasOwnProperty("workerState")&&e.data.workerState?!0:!1}function c(){console.log("...... starting WebWorker"),J=new Worker($),K=Q.defer(),J.addEventListener("message",function(e){return J.semaphore.leave(),u(e)?(e.data.workerState===o.workerState.ready?(J._ready=!0,K.resolve()):e.data.workerState===o.workerState.error?J.aPromise.reject(new Error("Error in hint worker")):e.data.workerState===o.workerState.successComputeProposals?null!==J.oLastWorkerData.contentStatus.prefix?s(e.data.hintProposals,e.data.requestId):J.aPromise.reject(new Error("Error: unknown event!")):e.data.workerState===o.workerState.libraryAdded?(nt[e.data.library.id]={},J.aPromiseLib[e.data.library.id].resolve(),it&&(X.service.progress.stopTask(it).done(),X.service.usernotification.liteInfo(X.i18n.getText("jscodecompletion_load_lib_ended",["user"])).done())):e.data.workerState===o.workerState.successComputeSummary&&J.aPromise.resolve({metaSymbol:e.data.metaSymbol,summary:e.data.summary}),void 0):(J.aPromise.reject(new Error("Error: invalid event format!")),void 0)}),J.semaphore={locked:void 0,take:function(){return this.locked&&this.locked.promise.isPending()?this.locked.promise:(this.locked=Q.defer(),Q())},leave:function(){this.locked&&this.locked.promise.isPending()&&this.locked.resolve()}}}function l(e){var t={contentStatus:e};J.oLastWorkerData=t}function p(e,t,n){var r=J;return d().then(function(){r.aPromiseLib[e]=Q.defer();var i,a={action:o.workerAction.addLibrary,id:e},s=[];for(i=0;i<t.length;i++){var u="template_"+i;a[u]=t[i],s.push(a[u])}for(i=0;i<n.length;i++){var c="index_"+i;a[c]=n[i],s.push(a[c])}return J.semaphore.take().then(function(){try{J.postMessage(a,s)}catch(e){J.postMessage(a)}}).done(),J.aPromiseLib[e].promise})}function f(e){return{selection:e.selection,offset:e.offset,buffer:e.buffer,prefix:e.prefix,caseSensitive:e.caseSensitive,coords:e.coords?{pageX:e.coords.pageX,pageY:e.coords.pageY}:{},inferredOnly:e.inferredOnly,bComment:e.bComment,bSuffix:e.bSuffix,ignoreContextProposals:e.ignoreContextProposals,ignoreSnippetProposals:e.ignoreSnippetProposals,ignoreKeywordProposals:e.ignoreKeywordProposals,indentation:e.indentation,isAutoHint:e.isAutoHint,tab:e.tab,targetFile:e.targetFile}}function d(){return J&&J._ready?Q():K.promise}function h(){var e=[];for(var t in q)e.push({name:q[t].name,version:q[t].version});return e}function m(e,t,n){return J.aPromise=t,d().then(function(){l(n);var t=h();J.semaphore.take().then(function(){J.postMessage({action:e,requestId:J.oLastWorkerData.requestId,contentStatus:J.oLastWorkerData.contentStatus,libraries:t})}).done()}).done(),J.aPromise.promise}function g(e,t){var n=Q.defer(),r=f(t);return m(e,n,r)}function v(e){var t,n;for(n=0;t<rt.length;t++)if(e.name===rt[n].name||e.version===rt[n].version)return!0;return!1}function y(e){return e.remPath&&e.remPath.search("/sapui5")>=0}function _(e,t,n){return X.service.progress.startTask("Libraried Loading","Loading metadata is running in the background").then(function(e){it=e,X.service.usernotification.liteInfo(X.i18n.getText("jscodecompletion_load_lib_start",["user"])).done()}).done(),X.service.intellisence.libmetadataprovider.getLibraryMetaFromHCP(n,"sapui5","js").then(function(n){try{for(var r=[],i=[],o=0;o<n.length;o++){var a=n[o];for(var s in a.files){var u=a.files[s];u&&u._data&&(u.name.search("meta.json")>=0&&i.push(u.asArrayBuffer()),u.name.search("templates.json")>=0&&r.push(u.asArrayBuffer()))}}return{libId:e+";"+t,template:r,index:i}}catch(c){Q.defer().reject(c)}})}function x(e,t,n){var r=new Q.defer,i=require.toUrl(t),o=new XMLHttpRequest;return o.open("GET",i,!0),o.responseType="arraybuffer",o.onload=function(){if(4===this.readyState&&this.status<300)try{var t=new JSZip;t.load(this.response);var o=[],a=[];for(var s in t.files){var u=t.files[s];u&&(n?u.name.search(n)>=0&&a.push(u.asArrayBuffer()):o.push(u.asArrayBuffer()))}r.resolve({libId:e.name+";"+e.version,template:o,index:a})}catch(c){r.reject(c)}else r.reject(new Error(i))},o.onerror=function(e){r.reject(e)},o.send(null),r.promise}function b(e){if(y(e))return _(e.name,e.version,e.remPath);var t=[];return t.push(x(e,e.libTemplate)),t.push(x(e,e.libIndexFile,".json")),Q.all(t).then(function(t){return{libId:e.name+";"+e.version,template:t[0].template.concat(t[1].template),index:t[0].index.concat(t[1].index)}})}function w(e){return v(e)?Q():b(e).then(function(e){return p(e.libId,e.template,e.index)})}function S(e){for(var t in q){var n=q[t];if(n.name===e)return n}}function E(e,t){return t.inferredOnly=!0,g(e,t)}function C(e,t){var n=Q.defer();return m(e,n,t)}function T(e,n){var i=r.parse(e.buffer),o=new t.EsprimaJavaScriptContentAssistProvider(n);return o.computeProplsalsFromAST(i,e.buffer,e).then(function(e){return e||(e=[]),Q(e)})}function P(t,n,r,i){if(i){var o=[i.getDependentIndexes(r.targetFile,n),i.getUI5ProjectInfo(r.targetFile)];return Q.spread(o,function(n,i){if(!n)return Q.reject(new Error("fail to get dependencies for cross file proposals"));var o=new e.OrionIndexer(n,r.targetFile,i),a=[];return a.push(T(r,o)),a.push(E(t,r)),Q.all(a).then(function(e){var t=e[0].concat(e[1]),n=[];return t.forEach(function(e,t,n){if(e.proposal&&e.category)for(var r=0;t>r;r++)if(n[r].proposal&&n[r].category&&n[r].proposal===e.proposal&&n[r].category===e.category)return;this.uniqueProposals.push(n[t])},{uniqueProposals:n}),n})}).fail(function(e){return console.log(e),E(t,r)})}return E(t,r)}function I(e,t){return i.getPlugin(X).then(function(n){return n?Q(i.getProposals(e,t,n)):Q([])})}function D(e,t,n){var i=r.parse(t.buffer),o=[];return o.push(I(i,t)),o.push(P(e,i,t,n)),Q.all(o).then(function(e){var t=[];for(var n in e)t=t.concat(e[n]);return t})}function A(e){return e.prefix||"."===e.buffer[e.offset-1]?D(o.workerAction.computeHintProposals,e):Q([])}function N(e,t){return D(o.workerAction.computeProposals,e,t)}function k(e){return e&&e.service?e.service.indexmanager:void 0}function O(e,t){var n=[];for(var r in t){var i=t[r],o=!1;for(var a in e){var s=e[a];if(s.proposal===i.proposal){o=!0;break}}o||n.push(i)}return n}function R(e){var t,n=[];for(var r in e){var i=e[r],o=S(i.library);t=o&&o.help&&o.helpService?o.helpService.getHelpProposal(i,o.help).then(function(e){return Q(e)}):Q(i),n.push(t)}return Q.all(n)}function j(e){if(!e||void 0!==e.stringValue||e.bComment)return Q({proposals:[]});e.prefix=e.prefix||"";var t=e.prefix,n=e.targetFile,r=[],i=[];J.aPromiseLib={};for(var o in q){var a=q[o];nt[a.name+";"+a.version]||i.push(w(a))}return Q.all(i).then(function(){return e.isAutoHint?r.push(A(e)):r.push(N(e,k(X))),Q.all(r).then(function(r){var i=[],o=null;for(var a in r){var s=O(i,r[a]);i=i.concat(s)}return R(i).then(function(r){if(J&&J.oLastWorkerData&&J.oLastWorkerData.contentStatus&&(t=J.oLastWorkerData.contentStatus.prefix,n=J.oLastWorkerData.contentStatus.targetFile),e.token&&e.aRowTokens){var i=null;if(e.token&&e.token.index-1>=0&&e.token.index-2>=0&&"text"===e.aRowTokens[e.token.index-1].type&&"new"===e.aRowTokens[e.token.index-2].value&&(i=e.aRowTokens[e.token.index-1]),i)for(o=e.prefix,a=0;a<r.length;a++)r[a]&&r[a].proposal.startsWith("new ")&&"template"===r[a].category&&(r[a].proposal=r[a].proposal.substring(4,r[a].proposal.length))}return o||(o=e.prefix),Q({prefix:o,proposals:r,asyncId:t,targetFile:n})})}).fail(function(e){return console.warn(e),Q.reject(e)})})}function F(e){var t=[];J.aPromiseLib={};for(var n in q){var r=q[n];nt[r.name+";"+r.version]||t.push(w(r))}return Q.all(t).then(function(){return C(o.workerAction.computeSummary,e).then(function(e){return Q(e.summary)}).fail(function(e){return console.warn(e),Q.reject(e)})})}function L(e){return q=[],X.service.intellisence.getCalculatedLibraries().then(function(t){return W&&W.length>0&&(q=W),t&&t.length>0&&(q=q.concat(t)),j(e)})}function M(e){return q=[],X.service.intellisence.getCalculatedLibraries().then(function(t){return W&&W.length>0&&(q=W),t&&t.length>0&&(q=q.concat(t)),F(e)})}function B(e){return X=this.context,et.push(e),Y.next(function(){if(1===et.length){var e=et[0];return et.length=0,L(e)}var t=et[1];return et.splice(0,1),Q({proposals:[],asyncId:t.prefix||"",targetFile:t.targetFile})})}function U(e){return X=this.context,tt.push({metaSymbol:e}),Z.next(function(){var e=tt.splice(0,1);return M(e[0])})}function V(e){var t="";e.token&&e.token.value&&(t=e.token.value.substr(0,e.cursorPosition.column-e.token.start));var n=/[^a-zA-Z_0-9\$\u00A2-\uFFFF]+/;return t.split(n).slice(-1)[0]}function G(e){return i.clearCach(e)}function H(e){return i.clearCach(e)}function z(e){return i.clearCach(e)}var W,q,X,$=require.toUrl("sap.watt.toolsets.javascript/service/ComputeEsprimaProposalsWorker.js"),J=null,K=null,Y=new Q.sap.Queue,Z=new Q.sap.Queue;new n.JSTemplateContentAssistProvider;var et=[],tt=[],nt={},rt={},it=null,ot=function(){this.configure=a,this.getWordSuggestions=B,this.getSummaryFromMeta=U,this.onAllPluginsStarted=c,this.onDeleted=G,this.onSaved=H,this.onTabClosed=z,this.getCalculatedPrefix=V};return ot}),define("sap.watt.toolsets.javascript/service/JSApiReferenceImpl",[],function(){"use strict";return{configure:function(){},getHelpProposal:function(e,t){if(!e)return Q();var n=e.category,r=e.helpTarget;if(n&&r&&t){var i;if("sapui5"===e.library&&(0===r.indexOf("sap.")||0===r.indexOf("jQuery.")))if("namespace"==n||"class"==n||"static class"==n)i=t+r+".html";else if("function"==n){var o=r.lastIndexOf(".");if(o>0){var a=r.substring(o+1),s=r.substring(0,o);i=t+s+".html#"+a}}e.helpUrl=i}return Q(e)}}}),function(){var e=function t(n,r,i){function o(s,u){if(!r[s]){if(!n[s]){var c="function"==typeof e&&e;if(!u&&c)return c(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var p=r[s]={exports:{}};n[s][0].call(p.exports,function(e){var t=n[s][1][e];return o(t?t:e)},p,p.exports,t,n,r,i)}return r[s].exports}for(var a="function"==typeof e&&e,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t){"use strict";var n=e("./ast-node-types");t.exports={createArrayExpression:function(e){return{type:n.ArrayExpression,elements:e}},createArrowFunctionExpression:function(e,t,r){return{type:n.ArrowFunctionExpression,id:null,params:e,body:t,generator:!1,expression:r}},createAssignmentExpression:function(e,t,r){return{type:n.AssignmentExpression,operator:e,left:t,right:r}},createAssignmentPattern:function(e,t){return{type:n.AssignmentPattern,left:e,right:t}},createBinaryExpression:function(e,t,r){var i="||"===e||"&&"===e?n.LogicalExpression:n.BinaryExpression;return{type:i,operator:e,left:t,right:r}},createBlockStatement:function(e){return{type:n.BlockStatement,body:e}},createBreakStatement:function(e){return{type:n.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:n.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:n.CatchClause,param:e,body:t}},createClassBody:function(e){return{type:n.ClassBody,body:e}},createClassExpression:function(e,t,r){return{type:n.ClassExpression,id:e,superClass:t,body:r}},createClassDeclaration:function(e,t,r){return{type:n.ClassDeclaration,id:e,superClass:t,body:r}},createMethodDefinition:function(e,t,r,i,o){return{type:n.MethodDefinition,key:r,value:i,kind:t,"static":"static"===e,computed:o}},createConditionalExpression:function(e,t,r){return{type:n.ConditionalExpression,test:e,consequent:t,alternate:r}},createContinueStatement:function(e){return{type:n.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:n.DebuggerStatement}},createEmptyStatement:function(){return{type:n.EmptyStatement}},createExpressionStatement:function(e){return{type:n.ExpressionStatement,expression:e}},createWhileStatement:function(e,t){return{type:n.WhileStatement,test:e,body:t}},createDoWhileStatement:function(e,t){return{type:n.DoWhileStatement,body:t,test:e}},createForStatement:function(e,t,r,i){return{type:n.ForStatement,init:e,test:t,update:r,body:i}},createForInStatement:function(e,t,r){return{type:n.ForInStatement,left:e,right:t,body:r,each:!1}},createForOfStatement:function(e,t,r){return{type:n.ForOfStatement,left:e,right:t,body:r}},createFunctionDeclaration:function(e,t,r,i,o){return{type:n.FunctionDeclaration,id:e,params:t||[],body:r,generator:!!i,expression:!!o}},createFunctionExpression:function(e,t,r,i,o){return{type:n.FunctionExpression,id:e,params:t||[],body:r,generator:!!i,expression:!!o}},createIdentifier:function(e){return{type:n.Identifier,name:e}},createIfStatement:function(e,t,r){return{type:n.IfStatement,test:e,consequent:t,alternate:r}},createLabeledStatement:function(e,t){return{type:n.LabeledStatement,label:e,body:t}},createLiteralFromSource:function(e,t){var r={type:n.Literal,value:e.value,raw:t.slice(e.range[0],e.range[1])};return e.regex&&(r.regex=e.regex),r},createTemplateElement:function(e,t){return{type:n.TemplateElement,value:e,tail:t}},createTemplateLiteral:function(e,t){return{type:n.TemplateLiteral,quasis:e,expressions:t}},createSpreadElement:function(e){return{type:n.SpreadElement,argument:e}},createTaggedTemplateExpression:function(e,t){return{type:n.TaggedTemplateExpression,tag:e,quasi:t}},createMemberExpression:function(e,t,r){return{type:n.MemberExpression,computed:"["===e,object:t,property:r}},createNewExpression:function(e,t){return{type:n.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:n.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:n.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e,t){return{type:n.Program,body:e,sourceType:t}},createProperty:function(e,t,r,i,o,a){return{type:n.Property,key:t,value:r,kind:e,method:i,shorthand:o,computed:a}},createRestElement:function(e){return{type:n.RestElement,argument:e}},createReturnStatement:function(e){return{type:n.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:n.SequenceExpression,expressions:e}},createSuper:function(){return{type:n.Super}},createSwitchCase:function(e,t){return{type:n.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:n.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:n.ThisExpression}},createThrowStatement:function(e){return{type:n.ThrowStatement,argument:e}},createTryStatement:function(e,t,r){return{type:n.TryStatement,block:e,handler:t,finalizer:r}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:n.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:n.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:n.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:n.VariableDeclarator,id:e,init:t}},createWithStatement:function(e,t){return{type:n.WithStatement,object:e,body:t}},createYieldExpression:function(e,t){return{type:n.YieldExpression,argument:e||null,delegate:t}},createJSXAttribute:function(e,t){return{type:n.JSXAttribute,name:e,value:t||null}},createJSXSpreadAttribute:function(e){return{type:n.JSXSpreadAttribute,argument:e}},createJSXIdentifier:function(e){return{type:n.JSXIdentifier,name:e}},createJSXNamespacedName:function(e,t){return{type:n.JSXNamespacedName,namespace:e,name:t}},createJSXMemberExpression:function(e,t){return{type:n.JSXMemberExpression,object:e,property:t}},createJSXElement:function(e,t,r){return{type:n.JSXElement,openingElement:e,closingElement:t,children:r}},createJSXEmptyExpression:function(){return{type:n.JSXEmptyExpression}},createJSXExpressionContainer:function(e){return{type:n.JSXExpressionContainer,expression:e}},createJSXOpeningElement:function(e,t,r){return{type:n.JSXOpeningElement,name:e,selfClosing:r,attributes:t}},createJSXClosingElement:function(e){return{type:n.JSXClosingElement,name:e}},createExportSpecifier:function(e,t){return{type:n.ExportSpecifier,exported:t||e,local:e}},createImportDefaultSpecifier:function(e){return{type:n.ImportDefaultSpecifier,local:e}},createImportNamespaceSpecifier:function(e){return{type:n.ImportNamespaceSpecifier,local:e}},createExportNamedDeclaration:function(e,t,r){return{type:n.ExportNamedDeclaration,declaration:e,specifiers:t,source:r}},createExportDefaultDeclaration:function(e){return{type:n.ExportDefaultDeclaration,declaration:e}},createExportAllDeclaration:function(e){return{type:n.ExportAllDeclaration,source:e}},createImportSpecifier:function(e,t){return{type:n.ImportSpecifier,local:e||t,imported:t}},createImportDeclaration:function(e,t){return{type:n.ImportDeclaration,specifiers:e,source:t}}}},{"./ast-node-types":2}],2:[function(e,t){"use strict";t.exports={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression",JSXIdentifier:"JSXIdentifier",JSXNamespacedName:"JSXNamespacedName",JSXMemberExpression:"JSXMemberExpression",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXElement:"JSXElement",JSXClosingElement:"JSXClosingElement",JSXOpeningElement:"JSXOpeningElement",JSXAttribute:"JSXAttribute",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportAllDeclaration:"ExportAllDeclaration",ExportSpecifier:"ExportSpecifier",ImportDeclaration:"ImportDeclaration",ImportSpecifier:"ImportSpecifier",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier"}},{}],3:[function(e,t){"use strict";var n=e("./ast-node-types"),r={trailingComments:[],leadingComments:[],bottomRightStack:[]};t.exports={reset:function(){r.trailingComments=[],r.leadingComments=[],r.bottomRightStack=[]},addComment:function(e){r.trailingComments.push(e),r.leadingComments.push(e)},processComment:function(e){var t,i,o;if(!(e.type===n.Program&&e.body.length>0)){for(r.trailingComments.length>0?r.trailingComments[0].range[0]>=e.range[1]?(i=r.trailingComments,r.trailingComments=[]):r.trailingComments.length=0:r.bottomRightStack.length>0&&r.bottomRightStack[r.bottomRightStack.length-1].trailingComments&&r.bottomRightStack[r.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(i=r.bottomRightStack[r.bottomRightStack.length-1].trailingComments,delete r.bottomRightStack[r.bottomRightStack.length-1].trailingComments);r.bottomRightStack.length>0&&r.bottomRightStack[r.bottomRightStack.length-1].range[0]>=e.range[0];)t=r.bottomRightStack.pop();if(t)t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments);else if(r.leadingComments.length>0)if(r.leadingComments[r.leadingComments.length-1].range[1]<=e.range[0])e.leadingComments=r.leadingComments,r.leadingComments=[];else{for(o=0;o<r.leadingComments.length&&!(r.leadingComments[o].range[1]>e.range[0]);o++);e.leadingComments=r.leadingComments.slice(0,o),0===e.leadingComments.length&&delete e.leadingComments,i=r.leadingComments.slice(o),0===i.length&&(i=null)}i&&(e.trailingComments=i),r.bottomRightStack.push(e)}}}},{"./ast-node-types":2}],4:[function(e,t){"use strict";t.exports={arrowFunctions:!1,blockBindings:!0,destructuring:!1,regexUFlag:!1,regexYFlag:!1,templateStrings:!1,binaryLiterals:!1,octalLiterals:!1,unicodeCodePointEscapes:!0,defaultParams:!1,restParams:!1,forOf:!1,objectLiteralComputedProperties:!1,objectLiteralShorthandMethods:!1,objectLiteralShorthandProperties:!1,objectLiteralDuplicateProperties:!1,generators:!1,spread:!1,superInFunctions:!1,classes:!1,modules:!1,jsx:!1,globalReturn:!1}},{}],5:[function(e,t){"use strict";t.exports={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",InvalidRegExpFlag:"Invalid regular expression flag",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInFormalsList:"Invalid left-hand side in formals list",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",NoUnintializedConst:"Const must be initialized",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",IllegalYield:"Illegal yield expression",IllegalSpread:"Illegal spread element",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",DefaultRestParameter:"Rest parameter can not have a default value",ElementAfterSpreadElement:"Spread must be the final element of an element list",ObjectPatternAsRestParameter:"Invalid rest parameter",ObjectPatternAsSpread:"Invalid spread argument",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",DuplicatePrototypeProperty:"Duplicate '__proto__' property in object literal are not allowed",ConstructorSpecialMethod:"Class constructor may not be an accessor",DuplicateConstructor:"A class may only have one constructor",StaticPrototype:"Classes may not have static property named prototype",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",InvalidJSXAttributeValue:"JSX value should be either an expression or a quoted JSX text",ExpectedJSXClosingTag:"Expected corresponding JSX closing tag for %0",AdjacentJSXElements:"Adjacent JSX elements must be wrapped in an enclosing tag",MissingFromClause:"Missing from clause",NoAsAfterImportNamespace:"Missing as after import *",InvalidModuleSpecifier:"Invalid module specifier",IllegalImportDeclaration:"Illegal import declaration",IllegalExportDeclaration:"Illegal export declaration"}
},{}],6:[function(e,t){"use strict";function n(){this.$data={}}n.prototype.get=function(e){return e="$"+e,this.$data[e]},n.prototype.set=function(e,t){return e="$"+e,this.$data[e]=t,this},n.prototype.has=function(e){return e="$"+e,Object.prototype.hasOwnProperty.call(this.$data,e)},n.prototype.delete=function(e){return e="$"+e,delete this.$data[e]},t.exports=n},{}],7:[function(e,t){"use strict";var n={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),LeadingZeros:new RegExp("^0+(?!$)")};t.exports={Regex:n,isDecimalDigit:function(e){return e>=48&&57>=e},isHexDigit:function(e){return"0123456789abcdefABCDEF".indexOf(e)>=0},isOctalDigit:function(e){return"01234567".indexOf(e)>=0},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||92===e||e>=128&&n.NonAsciiIdentifierStart.test(String.fromCharCode(e))},isIdentifierPart:function(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e||92===e||e>=128&&n.NonAsciiIdentifierPart.test(String.fromCharCode(e))},isFutureReservedWord:function(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}},isStrictModeReservedWord:function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},isRestrictedWord:function(e){return"eval"===e||"arguments"===e},isKeyword:function(e,t,n){if(t&&this.isStrictModeReservedWord(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||!n.generators&&"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},isJSXIdentifierStart:function(e){return 92!==e&&this.isIdentifierStart(e)},isJSXIdentifierPart:function(e){return 92!==e&&(45===e||this.isIdentifierPart(e))}}},{}],8:[function(e,t){"use strict";var n={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9,Template:10,JSXIdentifier:11,JSXText:12},r={};r[n.BooleanLiteral]="Boolean",r[n.EOF]="<end>",r[n.Identifier]="Identifier",r[n.Keyword]="Keyword",r[n.NullLiteral]="Null",r[n.NumericLiteral]="Numeric",r[n.Punctuator]="Punctuator",r[n.StringLiteral]="String",r[n.RegularExpression]="RegularExpression",r[n.Template]="Template",r[n.JSXIdentifier]="JSXIdentifier",r[n.JSXText]="JSXText";var i=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="];t.exports={Token:n,TokenName:r,FnExprTokens:i}},{}],9:[function(e,t){"use strict";t.exports={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪","int":"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}},{}],10:[function(e,t){t.exports={name:"espree",description:"An actively-maintained fork of Esprima, the ECMAScript parsing infrastructure for multipurpose analysis",author:{name:"Nicholas C. Zakas",email:"nicholas+npm@nczconsulting.com"},homepage:"https://github.com/eslint/espree",main:"espree.js",bin:{esparse:"./bin/esparse.js",esvalidate:"./bin/esvalidate.js"},version:"2.0.3",files:["bin","lib","test/run.js","test/runner.js","test/test.js","test/compat.js","test/reflect.js","espree.js"],engines:{node:">=0.10.0"},repository:{type:"git",url:"git+ssh://git@github.com/eslint/espree.git"},bugs:{url:"http://github.com/eslint/espree.git"},licenses:[{type:"BSD",url:"http://github.com/nzakas/espree/raw/master/LICENSE"}],devDependencies:{browserify:"^7.0.0",chai:"^1.10.0","complexity-report":"~0.6.1",dateformat:"^1.0.11",eslint:"^0.9.2",esprima:"git://github.com/jquery/esprima.git","esprima-fb":"^8001.2001.0-dev-harmony-fb",istanbul:"~0.2.6","json-diff":"~0.3.1",leche:"^1.0.1",mocha:"^2.0.1","npm-license":"^0.2.3",optimist:"~0.6.0",regenerate:"~0.5.4",semver:"^4.1.1",shelljs:"^0.3.0","shelljs-nodecli":"^0.1.1","unicode-6.3.0":"~0.1.0"},keywords:["ast","ecmascript","javascript","parser","syntax"],scripts:{"generate-regex":"node tools/generate-identifier-regex.js",test:"npm run-script lint && node Makefile.js test && node test/run.js",lint:"node Makefile.js lint",patch:"node Makefile.js patch",minor:"node Makefile.js minor",major:"node Makefile.js major",browserify:"node Makefile.js browserify",coverage:"npm run-script analyze-coverage && npm run-script check-coverage","analyze-coverage":"node node_modules/istanbul/lib/cli.js cover test/runner.js","check-coverage":"node node_modules/istanbul/lib/cli.js check-coverage --statement 99 --branch 99 --function 99",complexity:"npm run-script analyze-complexity && npm run-script check-complexity","analyze-complexity":"node tools/list-complexity.js","check-complexity":"node node_modules/complexity-report/src/cli.js --maxcc 14 --silent -l -w espree.js",benchmark:"node test/benchmarks.js","benchmark-quick":"node test/benchmarks.js quick"},dependencies:{},gitHead:"b60b597cfe4834aacd16c90179ce73e22705c132",_id:"espree@2.0.3",_shasum:"1fbdff60a410bd0d416b1ab3d6230d34b7a450e1",_from:"espree@>=2.0.1 <3.0.0",_npmVersion:"1.4.28",_npmUser:{name:"nzakas",email:"nicholas@nczconsulting.com"},maintainers:[{name:"nzakas",email:"nicholas@nczconsulting.com"}],dist:{shasum:"1fbdff60a410bd0d416b1ab3d6230d34b7a450e1",tarball:"http://registry.npmjs.org/espree/-/espree-2.0.3.tgz"},directories:{},_resolved:"https://registry.npmjs.org/espree/-/espree-2.0.3.tgz",readme:"ERROR: No README data found!"}},{}],espree:[function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error("ASSERT: "+t)}function i(e,t,n,i,o){var a;r("number"==typeof n,"Comment must have valid position"),nr.lastCommentStart>=n||(nr.lastCommentStart=n,a={type:e,value:t},rr.range&&(a.range=[n,i]),rr.loc&&(a.loc=o),rr.comments.push(a),rr.attachComment&&fr.addComment(a))}function o(e){var t,n,r,o;for(t=Kn-e,n={start:{line:Yn,column:Kn-Zn-e}};er>Kn;)if(r=$n.charCodeAt(Kn),++Kn,ir.isLineTerminator(r))return rr.comments&&(o=$n.slice(t+e,Kn-1),n.end={line:Yn,column:Kn-Zn-1},i("Line",o,t,Kn-1,n)),13===r&&10===$n.charCodeAt(Kn)&&++Kn,++Yn,Zn=Kn,void 0;rr.comments&&(o=$n.slice(t+e,Kn),n.end={line:Yn,column:Kn-Zn},i("Line",o,t,Kn,n))}function a(){var e,t,n,r;for(rr.comments&&(e=Kn-2,t={start:{line:Yn,column:Kn-Zn-2}});er>Kn;)if(n=$n.charCodeAt(Kn),ir.isLineTerminator(n))13===n&&10===$n.charCodeAt(Kn+1)&&++Kn,++Yn,++Kn,Zn=Kn,Kn>=er&&rt({},cr.UnexpectedToken,"ILLEGAL");else if(42===n){if(47===$n.charCodeAt(Kn+1))return++Kn,++Kn,rr.comments&&(r=$n.slice(e+2,Kn-2),t.end={line:Yn,column:Kn-Zn},i("Block",r,e,Kn,t)),void 0;++Kn}else++Kn;rt({},cr.UnexpectedToken,"ILLEGAL")}function s(){var e,t;for(t=0===Kn;er>Kn;)if(e=$n.charCodeAt(Kn),ir.isWhiteSpace(e))++Kn;else if(ir.isLineTerminator(e))++Kn,13===e&&10===$n.charCodeAt(Kn)&&++Kn,++Yn,Zn=Kn,t=!0;else if(47===e)if(e=$n.charCodeAt(Kn+1),47===e)++Kn,++Kn,o(2),t=!0;else{if(42!==e)break;++Kn,++Kn,a()}else if(t&&45===e){if(45!==$n.charCodeAt(Kn+1)||62!==$n.charCodeAt(Kn+2))break;Kn+=3,o(3)}else{if(60!==e)break;if("!--"!==$n.slice(Kn+1,Kn+4))break;++Kn,++Kn,++Kn,++Kn,o(4)}}function u(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;n>t;++t){if(!(er>Kn&&ir.isHexDigit($n[Kn])))return"";r=$n[Kn++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(i)}function c(){var e,t,n,r;for(e=$n[Kn],t=0,"}"===e&&rt({},cr.UnexpectedToken,"ILLEGAL");er>Kn&&(e=$n[Kn++],ir.isHexDigit(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&rt({},cr.UnexpectedToken,"ILLEGAL"),65535>=t?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(1023&t-65536)+56320,String.fromCharCode(n,r))}function l(){var e,t;for(e=$n.charCodeAt(Kn++),t=String.fromCharCode(e),92===e&&(117!==$n.charCodeAt(Kn)&&rt({},cr.UnexpectedToken,"ILLEGAL"),++Kn,e=u("u"),e&&"\\"!==e&&ir.isIdentifierStart(e.charCodeAt(0))||rt({},cr.UnexpectedToken,"ILLEGAL"),t=e);er>Kn&&(e=$n.charCodeAt(Kn),ir.isIdentifierPart(e));)++Kn,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==$n.charCodeAt(Kn)&&rt({},cr.UnexpectedToken,"ILLEGAL"),++Kn,e=u("u"),e&&"\\"!==e&&ir.isIdentifierPart(e.charCodeAt(0))||rt({},cr.UnexpectedToken,"ILLEGAL"),t+=e);return t}function p(){var e,t;for(e=Kn++;er>Kn;){if(t=$n.charCodeAt(Kn),92===t)return Kn=e,l();if(!ir.isIdentifierPart(t))break;++Kn}return $n.slice(e,Kn)}function f(){var e,t,n;return e=Kn,t=92===$n.charCodeAt(Kn)?l():p(),n=1===t.length?dr.Identifier:ir.isKeyword(t,Jn,rr.ecmaFeatures)?dr.Keyword:"null"===t?dr.NullLiteral:"true"===t||"false"===t?dr.BooleanLiteral:dr.Identifier,{type:n,value:t,lineNumber:Yn,lineStart:Zn,range:[e,Kn]}}function d(){var e,t,n,r,i=Kn,o=$n.charCodeAt(Kn),a=$n[Kn];switch(o){case 40:case 41:case 59:case 44:case 91:case 93:case 58:case 63:case 126:return++Kn,rr.tokenize&&40===o&&(rr.openParenToken=rr.tokens.length),{type:dr.Punctuator,value:String.fromCharCode(o),lineNumber:Yn,lineStart:Zn,range:[i,Kn]};case 123:case 125:return++Kn,rr.tokenize&&123===o&&(rr.openCurlyToken=rr.tokens.length),Kn>nr.curlyLastIndex&&(nr.curlyLastIndex=Kn,123===o?nr.curlyStack.push("{"):nr.curlyStack.pop()),{type:dr.Punctuator,value:String.fromCharCode(o),lineNumber:Yn,lineStart:Zn,range:[i,Kn]};default:if(e=$n.charCodeAt(Kn+1),61===e)switch(o){case 37:case 38:case 42:case 43:case 45:case 47:case 60:case 62:case 94:case 124:return Kn+=2,{type:dr.Punctuator,value:String.fromCharCode(o)+String.fromCharCode(e),lineNumber:Yn,lineStart:Zn,range:[i,Kn]};case 33:case 61:return Kn+=2,61===$n.charCodeAt(Kn)&&++Kn,{type:dr.Punctuator,value:$n.slice(i,Kn),lineNumber:Yn,lineStart:Zn,range:[i,Kn]}}}return t=$n[Kn+1],n=$n[Kn+2],r=$n[Kn+3],">"===a&&">"===t&&">"===n&&"="===r?(Kn+=4,{type:dr.Punctuator,value:">>>=",lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):">"===a&&">"===t&&">"===n?(Kn+=3,{type:dr.Punctuator,value:">>>",lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):"<"===a&&"<"===t&&"="===n?(Kn+=3,{type:dr.Punctuator,value:"<<=",lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):">"===a&&">"===t&&"="===n?(Kn+=3,{type:dr.Punctuator,value:">>=",lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):(rr.ecmaFeatures.spread||rr.ecmaFeatures.restParams||rr.ecmaFeatures.jsx&&nr.inJSXSpreadAttribute)&&"."===a&&"."===t&&"."===n?(Kn+=3,{type:dr.Punctuator,value:"...",lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):a===t&&"+-<>&|".indexOf(a)>=0?(Kn+=2,{type:dr.Punctuator,value:a+t,lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):rr.ecmaFeatures.arrowFunctions&&"="===a&&">"===t?(Kn+=2,{type:dr.Punctuator,value:"=>",lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):"<>=!+-*%&|^/".indexOf(a)>=0?(++Kn,{type:dr.Punctuator,value:a,lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):"."===a?(++Kn,{type:dr.Punctuator,value:a,lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):(rt({},cr.UnexpectedToken,"ILLEGAL"),void 0)}function h(e){for(var t="";er>Kn&&ir.isHexDigit($n[Kn]);)t+=$n[Kn++];return 0===t.length&&rt({},cr.UnexpectedToken,"ILLEGAL"),ir.isIdentifierStart($n.charCodeAt(Kn))&&rt({},cr.UnexpectedToken,"ILLEGAL"),{type:dr.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:Yn,lineStart:Zn,range:[e,Kn]}}function m(e){for(var t,n="";er>Kn&&(t=$n[Kn],"0"===t||"1"===t);)n+=$n[Kn++];return 0===n.length&&rt({},cr.UnexpectedToken,"ILLEGAL"),er>Kn&&(t=$n.charCodeAt(Kn),(ir.isIdentifierStart(t)||ir.isDecimalDigit(t))&&rt({},cr.UnexpectedToken,"ILLEGAL")),{type:dr.NumericLiteral,value:parseInt(n,2),lineNumber:Yn,lineStart:Zn,range:[e,Kn]}}function g(e,t){var n,r;for(ir.isOctalDigit(e)?(r=!0,n="0"+$n[Kn++]):(r=!1,++Kn,n="");er>Kn&&ir.isOctalDigit($n[Kn]);)n+=$n[Kn++];return r||0!==n.length||rt({},cr.UnexpectedToken,"ILLEGAL"),(ir.isIdentifierStart($n.charCodeAt(Kn))||ir.isDecimalDigit($n.charCodeAt(Kn)))&&rt({},cr.UnexpectedToken,"ILLEGAL"),{type:dr.NumericLiteral,value:parseInt(n,8),octal:r,lineNumber:Yn,lineStart:Zn,range:[t,Kn]}}function v(){var e,t,n;if(n=$n[Kn],r(ir.isDecimalDigit(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=Kn,e="","."!==n){if(e=$n[Kn++],n=$n[Kn],"0"===e){if("x"===n||"X"===n)return++Kn,h(t);if(rr.ecmaFeatures.binaryLiterals&&("b"===n||"B"===n))return++Kn,m(t);if(rr.ecmaFeatures.octalLiterals&&("o"===n||"O"===n)||ir.isOctalDigit(n))return g(n,t);n&&ir.isDecimalDigit(n.charCodeAt(0))&&rt({},cr.UnexpectedToken,"ILLEGAL")}for(;ir.isDecimalDigit($n.charCodeAt(Kn));)e+=$n[Kn++];n=$n[Kn]}if("."===n){for(e+=$n[Kn++];ir.isDecimalDigit($n.charCodeAt(Kn));)e+=$n[Kn++];n=$n[Kn]}if("e"===n||"E"===n)if(e+=$n[Kn++],n=$n[Kn],("+"===n||"-"===n)&&(e+=$n[Kn++]),ir.isDecimalDigit($n.charCodeAt(Kn)))for(;ir.isDecimalDigit($n.charCodeAt(Kn));)e+=$n[Kn++];else rt({},cr.UnexpectedToken,"ILLEGAL");return ir.isIdentifierStart($n.charCodeAt(Kn))&&rt({},cr.UnexpectedToken,"ILLEGAL"),{type:dr.NumericLiteral,value:parseFloat(e),lineNumber:Yn,lineStart:Zn,range:[t,Kn]}}function y(e){var t,n,r,i,o=!1;return e||rt({},cr.UnexpectedToken,"ILLEGAL"),ir.isLineTerminator(e.charCodeAt(0))?(++Yn,"\r"===e&&"\n"===$n[Kn]&&++Kn,Zn=Kn,i=""):"u"===e&&"{"===$n[Kn]?rr.ecmaFeatures.unicodeCodePointEscapes?(++Kn,i=c()):rt({},cr.UnexpectedToken,"ILLEGAL"):"u"===e||"x"===e?(r=Kn,n=u(e),n?i=n:(Kn=r,i=e)):"n"===e?i="\n":"r"===e?i="\r":"t"===e?i="	":"b"===e?i="\b":"f"===e?i="\f":"v"===e?i="":ir.isOctalDigit(e)?(t="01234567".indexOf(e),0!==t&&(o=!0),er>Kn&&ir.isOctalDigit($n[Kn])&&(o=!0,t=8*t+"01234567".indexOf($n[Kn++]),"0123".indexOf(e)>=0&&er>Kn&&ir.isOctalDigit($n[Kn])&&(t=8*t+"01234567".indexOf($n[Kn++]))),i=String.fromCharCode(t)):i=e,{ch:i,octal:o}}function _(){var e,t,n="",i=!1,o=Kn,a=Yn,s=Zn,u=$n[Kn];for(r("'"===u||'"'===u,"String literal must starts with a quote"),++Kn;er>Kn&&(e=$n[Kn++],!ir.isLineTerminator(e.charCodeAt(0)));){if(e===u){u="";break}"\\"===e?(e=$n[Kn++],t=y(e),n+=t.ch,i=t.octal||i):n+=e}return""!==u&&rt({},cr.UnexpectedToken,"ILLEGAL"),{type:dr.StringLiteral,value:n,octal:i,startLineNumber:a,startLineStart:s,lineNumber:Yn,lineStart:Zn,range:[o,Kn]}}function x(){var e,t,n="",r=Kn,i=!1,o=!1,a="`"===$n[Kn];for(++Kn;er>Kn;){if(e=$n[Kn++],"`"===e){o=!0,i=!0;break}if("$"===e){if("{"===$n[Kn]){++Kn,i=!0;break}n+=e}else"\\"===e?(e=$n[Kn++],t=y(e),t.octal&&rt({},cr.TemplateOctalLiteral),n+=t.ch):ir.isLineTerminator(e.charCodeAt(0))?(++Yn,"\r"===e&&"\n"===$n[Kn]&&++Kn,Zn=Kn,n+="\n"):n+=e}return i||rt({},cr.UnexpectedToken,"ILLEGAL"),Kn>nr.curlyLastIndex&&(nr.curlyLastIndex=Kn,o||nr.curlyStack.push("template"),a||nr.curlyStack.pop()),{type:dr.Template,value:{cooked:n,raw:$n.slice(r+1,Kn-(o?1:2))},head:a,tail:o,lineNumber:Yn,lineStart:Zn,range:[r,Kn]}}function b(e,t){var n=e,r="gmsi";rr.ecmaFeatures.regexYFlag&&(r+="y"),rr.ecmaFeatures.regexUFlag&&(r+="u"),RegExp("^["+r+"]*$").test(t)||rt({},cr.InvalidRegExpFlag),t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":(rt({},cr.InvalidRegExp),void 0)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{RegExp(n)}catch(i){rt({},cr.InvalidRegExp)}try{return new RegExp(e,t)}catch(o){return null}}function w(){var e,t,n,i,o;for(e=$n[Kn],r("/"===e,"Regular expression literal must start with a slash"),t=$n[Kn++],n=!1,i=!1;er>Kn;)if(e=$n[Kn++],t+=e,"\\"===e)e=$n[Kn++],ir.isLineTerminator(e.charCodeAt(0))&&rt({},cr.UnterminatedRegExp),t+=e;else if(ir.isLineTerminator(e.charCodeAt(0)))rt({},cr.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){i=!0;break}"["===e&&(n=!0)}return i||rt({},cr.UnterminatedRegExp),o=t.substr(1,t.length-2),{value:o,literal:t}}function S(){var e,t,n,r;for(t="",n="";er>Kn&&(e=$n[Kn],ir.isIdentifierPart(e.charCodeAt(0)));)if(++Kn,"\\"===e&&er>Kn)if(e=$n[Kn],"u"===e){if(++Kn,r=Kn,e=u("u"))for(n+=e,t+="\\u";Kn>r;++r)t+=$n[r];else Kn=r,n+="u",t+="\\u";it({},cr.UnexpectedToken,"ILLEGAL")}else t+="\\",it({},cr.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}function E(){var e,t,n,r;return tr=null,s(),e=Kn,t=w(),n=S(),r=b(t.value,n.value),rr.tokenize?{type:dr.RegularExpression,value:r,regex:{pattern:t.value,flags:n.value},lineNumber:Yn,lineStart:Zn,range:[e,Kn]}:{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},range:[e,Kn]}}function C(){var e,t,n,r;return s(),e=Kn,t={start:{line:Yn,column:Kn-Zn}},n=E(),t.end={line:Yn,column:Kn-Zn},rr.tokenize||(rr.tokens.length>0&&(r=rr.tokens[rr.tokens.length-1],r.range[0]===e&&"Punctuator"===r.type&&("/"===r.value||"/="===r.value)&&rr.tokens.pop()),rr.tokens.push({type:"RegularExpression",value:n.literal,regex:n.regex,range:[e,Kn],loc:t})),n}function T(e){return e.type===dr.Identifier||e.type===dr.Keyword||e.type===dr.BooleanLiteral||e.type===dr.NullLiteral}function P(){var e,t;if(e=rr.tokens[rr.tokens.length-1],!e)return C();if("Punctuator"===e.type){if("]"===e.value)return d();if(")"===e.value)return t=rr.tokens[rr.openParenToken-1],!t||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?d():C();if("}"===e.value){if(rr.tokens[rr.openCurlyToken-3]&&"Keyword"===rr.tokens[rr.openCurlyToken-3].type){if(t=rr.tokens[rr.openCurlyToken-4],!t)return d()}else{if(!rr.tokens[rr.openCurlyToken-4]||"Keyword"!==rr.tokens[rr.openCurlyToken-4].type)return d();if(t=rr.tokens[rr.openCurlyToken-5],!t)return C()}return mr.indexOf(t.value)>=0?d():C()}return C()}return"Keyword"===e.type?C():d()}function I(){var e,t=rr.ecmaFeatures.jsx,n=rr.ecmaFeatures.templateStrings;return t&&nr.inJSXChild||s(),Kn>=er?{type:dr.EOF,lineNumber:Yn,lineStart:Zn,range:[Kn,Kn]}:t&&nr.inJSXChild?M():(e=$n.charCodeAt(Kn),40===e||41===e||59===e?d():39===e||34===e?t&&nr.inJSXTag?L():_():t&&nr.inJSXTag&&ir.isJSXIdentifierStart(e)?R():n&&(96===e||125===e&&"template"===nr.curlyStack[nr.curlyStack.length-1])?x():ir.isIdentifierStart(e)?f():46===e?ir.isDecimalDigit($n.charCodeAt(Kn+1))?v():d():ir.isDecimalDigit(e)?v():rr.tokenize&&47===e?P():d())}function D(){var e,t,n,r,i,o=rr.ecmaFeatures.jsx;return o&&nr.inJSXChild||s(),e={start:{line:Yn,column:Kn-Zn}},t=I(),e.end={line:Yn,column:Kn-Zn},t.type!==dr.EOF&&(n=[t.range[0],t.range[1]],r=$n.slice(t.range[0],t.range[1]),i={type:hr[t.type],value:r,range:n,loc:e},t.regex&&(i.regex={pattern:t.regex.pattern,flags:t.regex.flags}),rr.tokens.push(i)),t}function A(){var e;return e=tr,Kn=e.range[1],Yn=e.lineNumber,Zn=e.lineStart,tr="undefined"!=typeof rr.tokens?D():I(),Kn=e.range[1],Yn=e.lineNumber,Zn=e.lineStart,e}function N(){var e,t,n;e=Kn,t=Yn,n=Zn,tr="undefined"!=typeof rr.tokens?D():I(),Kn=e,Yn=t,Zn=n}function k(){var e,t,n,r,i;return e="function"==typeof rr.advance?rr.advance:I,t=Kn,n=Yn,r=Zn,null===tr&&(tr=e()),Kn=tr.range[1],Yn=tr.lineNumber,Zn=tr.lineStart,i=e(),Kn=t,Yn=n,Zn=r,i}function O(e){return e.type===ar.JSXIdentifier?e.name:e.type===ar.JSXNamespacedName?e.namespace.name+":"+e.name.name:e.type===ar.JSXMemberExpression?O(e.object)+"."+O(e.property):(ot(e),void 0)}function R(){var e,t,n="";for(t=Kn;er>Kn&&(e=$n.charCodeAt(Kn),ir.isJSXIdentifierPart(e));)n+=$n[Kn++];return{type:dr.JSXIdentifier,value:n,lineNumber:Yn,lineStart:Zn,range:[t,Kn]}}function j(){var e,t,n="",i=Kn,o=0;for(e=$n[Kn],r("&"===e,"Entity must start with an ampersand"),Kn++;er>Kn&&o++<10&&(e=$n[Kn++],";"!==e);)n+=e;if(";"===e)if("#"===n[0]){if(t="x"===n[1]?+("0"+n.substr(1)):+n.substr(1).replace(gr.LeadingZeros,""),!isNaN(t))return String.fromCharCode(t)}else if(lr[n])return lr[n];return Kn=i+1,"&"}function F(e){var t,n,r="";for(n=Kn;er>Kn&&(t=$n[Kn],-1===e.indexOf(t));)"&"===t?r+=j():(Kn++,"\r"===t&&"\n"===$n[Kn]&&(r+=t,t=$n[Kn],Kn++),ir.isLineTerminator(t.charCodeAt(0))&&(++Yn,Zn=Kn),r+=t);return{type:dr.JSXText,value:r,lineNumber:Yn,lineStart:Zn,range:[n,Kn]}}function L(){var e,t,n;return t=$n[Kn],r('"'===t||"'"===t,"String literal must starts with a quote"),n=Kn,++Kn,e=F([t]),t!==$n[Kn]&&rt({},cr.UnexpectedToken,"ILLEGAL"),++Kn,e.range=[n,Kn],e}function M(){var e=$n.charCodeAt(Kn);return 123!==e&&60!==e?F(["<","{"]):d()}function B(){var e,t=et();return tr.type!==dr.JSXIdentifier&&ot(tr),e=A(),Z(t,sr.createJSXIdentifier(e.value))}function U(){var e,t,n=et();return e=B(),at(":"),t=B(),Z(n,sr.createJSXNamespacedName(e,t))}function V(){for(var e=et(),t=B();ut(".");)A(),t=Z(e,sr.createJSXMemberExpression(t,B()));return t}function Q(){return":"===k().value?U():"."===k().value?V():B()}function G(){return":"===k().value?U():B()}function H(){var e,t;return ut("{")?(e=W(),e.expression.type===ar.JSXEmptyExpression&&rt(e,"JSX attributes must only be assigned a non-empty expression")):ut("<")?e=Y():tr.type===dr.JSXText?(t=et(),e=Z(t,sr.createLiteralFromSource(A(),$n))):rt({},cr.InvalidJSXAttributeValue),e}function z(){for(var e=tt();"}"!==$n.charAt(Kn);)Kn++;return Z(e,sr.createJSXEmptyExpression())}function W(){var e,t,n,r=et();return t=nr.inJSXChild,n=nr.inJSXTag,nr.inJSXChild=!1,nr.inJSXTag=!1,at("{"),e=ut("}")?z():qt(),nr.inJSXChild=t,nr.inJSXTag=n,at("}"),Z(r,sr.createJSXExpressionContainer(e))}function q(){var e,t,n,r=et();return t=nr.inJSXChild,n=nr.inJSXTag,nr.inJSXChild=!1,nr.inJSXTag=!1,nr.inJSXSpreadAttribute=!0,at("{"),at("..."),nr.inJSXSpreadAttribute=!1,e=Wt(),nr.inJSXChild=t,nr.inJSXTag=n,at("}"),Z(r,sr.createJSXSpreadAttribute(e))}function X(){var e,t;return ut("{")?q():(t=et(),e=G(),ut("=")?(A(),Z(t,sr.createJSXAttribute(e,H()))):Z(t,sr.createJSXAttribute(e)))}function $(){var e,t;return ut("{")?e=W():tr.type===dr.JSXText?(t=tt(),e=Z(t,sr.createLiteralFromSource(A(),$n))):e=Y(),e}function J(){var e,t,n,r=et();return t=nr.inJSXChild,n=nr.inJSXTag,nr.inJSXChild=!1,nr.inJSXTag=!0,at("<"),at("/"),e=Q(),nr.inJSXChild=t,nr.inJSXTag=n,at(">"),Z(r,sr.createJSXClosingElement(e))}function K(){var e,t,n,r=[],i=!1,o=et();for(t=nr.inJSXChild,n=nr.inJSXTag,nr.inJSXChild=!1,nr.inJSXTag=!0,at("<"),e=Q();er>Kn&&"/"!==tr.value&&">"!==tr.value;)r.push(X());return nr.inJSXTag=n,"/"===tr.value?(at("/"),nr.inJSXChild=t,at(">"),i=!0):(nr.inJSXChild=!0,at(">")),Z(o,sr.createJSXOpeningElement(e,r,i))}function Y(){var e,t,n,r=null,i=[],o=et();if(t=nr.inJSXChild,n=nr.inJSXTag,e=K(),!e.selfClosing){for(;er>Kn&&(nr.inJSXChild=!1,"<"!==tr.value||"/"!==k().value);)nr.inJSXChild=!0,i.push($());nr.inJSXChild=t,nr.inJSXTag=n,r=J(),O(r.name)!==O(e.name)&&rt({},cr.ExpectedJSXClosingTag,O(e.name))}return!t&&ut("<")&&rt(tr,cr.AdjacentJSXElements),Z(o,sr.createJSXElement(e,r,i))}function Z(e,t){return rr.range&&(t.range=[e.offset,Kn]),rr.loc&&(t.loc={start:{line:e.line,column:e.col},end:{line:Yn,column:Kn-Zn}},rr.source&&(t.loc.source=rr.source)),rr.attachComment&&fr.processComment(t),t}function et(){return rr.loc||rr.range?(s(),{offset:Kn,line:Yn,col:Kn-Zn}):void 0}function tt(){return rr.loc||rr.range?{offset:Kn,line:Yn,col:Kn-Zn}:void 0}function nt(){var e,t,n,r;return e=Kn,t=Yn,n=Zn,s(),r=Yn!==t,Kn=e,Yn=t,Zn=n,r}function rt(e,t){var n,i=Array.prototype.slice.call(arguments,2),o=t.replace(/%(\d)/g,function(e,t){return r(t<i.length,"Message reference must be in range"),i[t]});throw"number"==typeof e.lineNumber?(n=new Error("Line "+e.lineNumber+": "+o),n.index=e.range[0],n.lineNumber=e.lineNumber,n.column=e.range[0]-Zn+1):(n=new Error("Line "+Yn+": "+o),n.index=Kn,n.lineNumber=Yn,n.column=Kn-Zn+1),n.description=o,n}function it(){try{rt.apply(null,arguments)}catch(e){if(!rr.errors)throw e;rr.errors.push(e)}}function ot(e){if(e.type===dr.EOF&&rt(e,cr.UnexpectedEOS),e.type===dr.NumericLiteral&&rt(e,cr.UnexpectedNumber),(e.type===dr.StringLiteral||e.type===dr.JSXText)&&rt(e,cr.UnexpectedString),e.type===dr.Identifier&&rt(e,cr.UnexpectedIdentifier),e.type===dr.Keyword){if(ir.isFutureReservedWord(e.value))rt(e,cr.UnexpectedReserved);else if(Jn&&ir.isStrictModeReservedWord(e.value))return it(e,cr.StrictReservedWord),void 0;rt(e,cr.UnexpectedToken,e.value)}e.type===dr.Template&&rt(e,cr.UnexpectedTemplate,e.value.raw),rt(e,cr.UnexpectedToken,e.value)}function at(e){var t=A();(t.type!==dr.Punctuator||t.value!==e)&&ot(t)}function st(e){var t=A();(t.type!==dr.Keyword||t.value!==e)&&ot(t)}function ut(e){return tr.type===dr.Punctuator&&tr.value===e}function ct(e){return tr.type===dr.Keyword&&tr.value===e}function lt(e){return tr.type===dr.Identifier&&tr.value===e}function pt(){var e;return tr.type!==dr.Punctuator?!1:(e=tr.value,"="===e||"*="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e)}function ft(){var e;return 59===$n.charCodeAt(Kn)||ut(";")?(A(),void 0):(e=Yn,s(),Yn===e&&(tr.type===dr.EOF||ut("}")||ot(tr)),void 0)}function dt(e){return e.type===ar.Identifier||e.type===ar.MemberExpression}function ht(){var e,t=[],n=et();for(at("[");!ut("]");)ut(",")?(A(),t.push(null)):(e=Dt(),t.push(e),ut("]")||at(","));return at("]"),Z(n,sr.createArrayExpression(t))}function mt(e,t){var n,r=Jn,i=nr.yieldAllowed,o=t?t.generator:!1;return nr.yieldAllowed=o,n=bn(),Jn&&e.firstRestricted&&it(e.firstRestricted,cr.StrictParamName),Jn&&e.stricted&&it(e.stricted,e.message),Jn=r,nr.yieldAllowed=i,Z(t.marker,sr.createFunctionExpression(null,e.params,n,o,n.type!==ar.BlockStatement))}function gt(e){var t,n,r=Jn,i=et();return Jn=!0,t=En(),t.stricted&&it(t.stricted,t.message),n=mt(t,{generator:e?e.generator:!1,marker:i}),Jn=r,n}function vt(){var e,t,n=et(),r=A(),i=rr.ecmaFeatures.objectLiteralComputedProperties;switch(r.type){case dr.StringLiteral:case dr.NumericLiteral:return Jn&&r.octal&&it(r,cr.StrictOctalLiteral),Z(n,sr.createLiteralFromSource(r,$n));case dr.Identifier:case dr.BooleanLiteral:case dr.NullLiteral:case dr.Keyword:return Z(n,sr.createIdentifier(r.value));case dr.Punctuator:if((!nr.inObjectLiteral||i)&&"["===r.value)return n=et(),e=Wt(),t=Z(n,e),at("]"),t}ot(r)}function yt(){switch(tr.type){case dr.Identifier:case dr.StringLiteral:case dr.BooleanLiteral:case dr.NullLiteral:case dr.NumericLiteral:case dr.Keyword:return!0;case dr.Punctuator:return"["===tr.value}return!1}function _t(e,t,n,r){var i,o,a;if(e.type===dr.Identifier){if("get"===e.value&&yt())return n=ut("["),t=vt(),a=et(),at("("),at(")"),i=mt({params:[],stricted:null,firstRestricted:null,message:null},{marker:a}),Z(r,sr.createProperty("get",t,i,!1,!1,n));if("set"===e.value&&yt())return n=ut("["),t=vt(),a=et(),at("("),o={params:[],defaultCount:0,stricted:null,firstRestricted:null,paramSet:new pr},ut(")")?it(tr,cr.UnexpectedToken,tr.value):Sn(o),at(")"),i=mt(o,{marker:a}),Z(r,sr.createProperty("set",t,i,!1,!1,n))}return ut("(")?(i=gt(),Z(r,sr.createProperty("init",t,i,!0,!1,n))):null}function xt(e,t){var n=tr.type===dr.Punctuator&&"["===tr.value;return ut("(")||ot(A()),Z(t,sr.createProperty("init",e,gt({generator:!0}),!0,!1,n))}function bt(){var e,t,n,r,i,o,a=rr.ecmaFeatures.objectLiteralComputedProperties,s=rr.ecmaFeatures.objectLiteralShorthandMethods,u=rr.ecmaFeatures.objectLiteralShorthandProperties,c=rr.ecmaFeatures.generators,l=rr.ecmaFeatures.destructuring,p=et();if(e=tr,r="["===e.value&&e.type===dr.Punctuator,e.type===dr.Identifier||a&&r){if(n=vt(),"get"===e.value&&!(ut(":")||ut("(")||ut(",")||ut("}")))return r="["===tr.value,t=vt(),i=et(),at("("),at(")"),Z(p,sr.createProperty("get",t,mt({generator:!1},{marker:i}),!1,!1,r));if("set"===e.value&&!(ut(":")||ut("(")||ut(",")||ut("}")))return r="["===tr.value,t=vt(),i=et(),at("("),o={params:[],defaultCount:0,stricted:null,firstRestricted:null,paramSet:new pr},ut(")")?it(tr,cr.UnexpectedToken,tr.value):Sn(o),at(")"),Z(p,sr.createProperty("set",t,mt(o,{marker:i}),!1,!1,r));
if(ut(":"))return A(),Z(p,sr.createProperty("init",n,Wt(),!1,!1,r));if(s&&ut("("))return Z(p,sr.createProperty("init",n,gt({generator:!1}),!0,!1,r));if(l&&ut("=")){A();var f=Wt(),d=Z(p,sr.createAssignmentExpression("=",n,f));d.type=ar.AssignmentPattern;var h=sr.createProperty("init",n,d,!1,!0,r);return Z(p,h)}return(r||!u&&!l)&&ot(tr),Z(p,sr.createProperty("init",n,n,!1,!0,!1))}return e.type===dr.EOF||e.type===dr.Punctuator?(c&&ut("*")&&s||ot(e),A(),n=vt(),xt(n,p)):(t=vt(),ut(":")?(A(),Z(p,sr.createProperty("init",t,Wt(),!1,!1,!1))):s&&ut("(")?Z(p,sr.createProperty("init",t,gt(),!0,!1,!1)):(ot(A()),void 0))}function wt(e){var t=String;return e.type===ar.Identifier?e.name:t(e.value)}function St(){var e,t,n,r,i,o=et(),a=rr.ecmaFeatures.objectLiteralDuplicateProperties,s=[],u=nr.inObjectLiteral,c=new pr;for(nr.inObjectLiteral=!0,at("{");!ut("}");)e=bt(),e.computed||(t=wt(e.key),n="get"===e.kind?Xn.Get:Xn.Set,r="init"===e.kind?Xn.Data:n,c.has(t)?(i=c.get(t),i===Xn.Data?r===Xn.Data&&"__proto__"===t&&a?it({},cr.DuplicatePrototypeProperty):Jn&&r===Xn.Data&&!a?it({},cr.StrictDuplicateProperty):r!==Xn.Data&&it({},cr.AccessorDataProperty):r===Xn.Data?it({},cr.AccessorDataProperty):i&r&&it({},cr.AccessorGetSet),c.set(t,i|r)):c.set(t,r)),s.push(e),ut("}")||at(",");return at("}"),nr.inObjectLiteral=u,Z(o,sr.createObjectExpression(s))}function Et(e){var t,n;return(tr.type!==dr.Template||e.head&&!tr.head)&&rt({},cr.UnexpectedToken,"ILLEGAL"),t=et(),n=A(),Z(t,sr.createTemplateElement({raw:n.value.raw,cooked:n.value.cooked},n.tail))}function Ct(){var e,t,n,r=et();for(e=Et({head:!0}),t=[e],n=[];!e.tail;)n.push(qt()),e=Et({head:!1}),t.push(e);return Z(r,sr.createTemplateLiteral(t,n))}function Tt(){var e;return at("("),++nr.parenthesisCount,e=qt(),at(")"),e}function Pt(){var e,t,n,r,i=rr.ecmaFeatures.jsx,o=rr.ecmaFeatures.classes,a=o||rr.ecmaFeatures.superInFunctions;if(ut("("))return Tt();if(ut("["))return ht();if(ut("{"))return St();if(i&&ut("<"))return Y();if(e=tr.type,r=et(),e===dr.Identifier)n=sr.createIdentifier(A().value);else if(e===dr.StringLiteral||e===dr.NumericLiteral)Jn&&tr.octal&&it(tr,cr.StrictOctalLiteral),n=sr.createLiteralFromSource(A(),$n);else if(e===dr.Keyword){if(ct("function"))return Tn();if(a&&ct("super")&&nr.inFunctionBody)return r=et(),A(),Z(r,sr.createSuper());if(ct("this"))return r=et(),A(),Z(r,sr.createThisExpression());if(o&&ct("class"))return Un();ot(A())}else if(e===dr.BooleanLiteral)t=A(),t.value="true"===t.value,n=sr.createLiteralFromSource(t,$n);else if(e===dr.NullLiteral)t=A(),t.value=null,n=sr.createLiteralFromSource(t,$n);else if(ut("/")||ut("/="))n="undefined"!=typeof rr.tokens?sr.createLiteralFromSource(C(),$n):sr.createLiteralFromSource(E(),$n),N();else{if(e===dr.Template)return Ct();ot(A())}return Z(r,n)}function It(){var e,t=[];if(at("("),!ut(")"))for(;er>Kn&&(e=Dt(),t.push(e),!ut(")"));)at(",");return at(")"),t}function Dt(){if(ut("...")){var e=et();return A(),Z(e,sr.createSpreadElement(Wt()))}return Wt()}function At(){var e,t=et();return e=A(),T(e)||ot(e),Z(t,sr.createIdentifier(e.value))}function Nt(){return at("."),At()}function kt(){var e;return at("["),e=qt(),at("]"),e}function Ot(){var e,t,n=et();return st("new"),e=jt(),t=ut("(")?It():[],Z(n,sr.createNewExpression(e,t))}function Rt(){var e,t,n=nr.allowIn,r=et();for(nr.allowIn=!0,e=ct("new")?Ot():Pt(),nr.allowIn=n;ut(".")||ut("[")||ut("(")||tr.type===dr.Template&&tr.head;)ut("(")?(t=It(),e=Z(r,sr.createCallExpression(e,t))):e=ut("[")?Z(r,sr.createMemberExpression("[",e,kt())):ut(".")?Z(r,sr.createMemberExpression(".",e,Nt())):Z(r,sr.createTaggedTemplateExpression(e,Ct()));return e}function jt(){var e,t=nr.allowIn,n=et();for(e=ct("new")?Ot():Pt(),nr.allowIn=t;ut(".")||ut("[")||tr.type===dr.Template&&tr.head;)e=ut("[")?Z(n,sr.createMemberExpression("[",e,kt())):ut(".")?Z(n,sr.createMemberExpression(".",e,Nt())):Z(n,sr.createTaggedTemplateExpression(e,Ct()));return e}function Ft(){var e,t,n=et();return e=Rt(),tr.type===dr.Punctuator&&(!ut("++")&&!ut("--")||nt()||(Jn&&e.type===ar.Identifier&&ir.isRestrictedWord(e.name)&&it({},cr.StrictLHSPostfix),dt(e)||it({},cr.InvalidLHSInAssignment),t=A(),e=Z(n,sr.createPostfixExpression(t.value,e)))),e}function Lt(){var e,t,n;return tr.type!==dr.Punctuator&&tr.type!==dr.Keyword?t=Ft():ut("++")||ut("--")?(n=et(),e=A(),t=Lt(),Jn&&t.type===ar.Identifier&&ir.isRestrictedWord(t.name)&&it({},cr.StrictLHSPrefix),dt(t)||it({},cr.InvalidLHSInAssignment),t=sr.createUnaryExpression(e.value,t),t=Z(n,t)):ut("+")||ut("-")||ut("~")||ut("!")?(n=et(),e=A(),t=Lt(),t=sr.createUnaryExpression(e.value,t),t=Z(n,t)):ct("delete")||ct("void")||ct("typeof")?(n=et(),e=A(),t=Lt(),t=sr.createUnaryExpression(e.value,t),t=Z(n,t),Jn&&"delete"===t.operator&&t.argument.type===ar.Identifier&&it({},cr.StrictDelete)):t=Ft(),t}function Mt(e,t){var n=0;if(e.type!==dr.Punctuator&&e.type!==dr.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=t?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function Bt(){var e,t,n,r,i,o,a,s,u,c,l;if(r=nr.allowIn,nr.allowIn=!0,c=et(),s=Lt(),t=tr,n=Mt(t,r),0===n)return s;for(t.prec=n,A(),l=[c,et()],o=Lt(),i=[s,t,o];(n=Mt(tr,r))>0;){for(;i.length>2&&n<=i[i.length-2].prec;)o=i.pop(),a=i.pop().value,s=i.pop(),e=sr.createBinaryExpression(a,s,o),l.pop(),c=l.pop(),Z(c,e),i.push(e),l.push(c);t=A(),t.prec=n,i.push(t),l.push(et()),e=Lt(),i.push(e)}for(nr.allowIn=r,u=i.length-1,e=i[u],l.pop();u>1;)e=sr.createBinaryExpression(i[u-1].value,i[u-2],e),u-=2,c=l.pop(),Z(c,e);return e}function Ut(){var e,t,n,r,i=et();return e=Bt(),ut("?")&&(A(),t=nr.allowIn,nr.allowIn=!0,n=Wt(),nr.allowIn=t,at(":"),r=Wt(),e=sr.createConditionalExpression(e,n,r),Z(i,e)),e}function Vt(){return ut("{")?bn():Wt()}function Qt(e){var t,n,i,o,a,s=rr.ecmaFeatures.restParams;for(o=[],a={paramSet:new pr},t=0,n=e.length;n>t;t+=1)if(i=e[t],i.type===ar.Identifier)o.push(i),wn(a,i,i.name);else if(i.type===ar.ObjectExpression||i.type===ar.ArrayExpression)zt(a,i),o.push(i);else if(i.type===ar.SpreadElement)r(t===n-1,"It is guaranteed that SpreadElement is last element by parseExpression"),i.argument.type!==ar.Identifier&&rt({},cr.UnexpectedToken,"["),s||rt({},cr.UnexpectedToken,"."),zt(a,i.argument),i.type=ar.RestElement,o.push(i);else if(i.type===ar.RestElement)o.push(i),wn(a,i.argument,i.argument.name);else{if(i.type!==ar.AssignmentExpression)return null;i.type=ar.AssignmentPattern,delete i.operator,o.push(i),wn(a,i.left,i.left.name)}return a.message===cr.StrictParamDupe&&rt(Jn?a.stricted:a.firstRestricted,a.message),{params:o,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function Gt(e,t){var n,r;return at("=>"),n=Jn,r=Vt(),Jn&&e.firstRestricted&&rt(e.firstRestricted,e.message),Jn&&e.stricted&&it(e.stricted,e.message),Jn=n,Z(t,sr.createArrowFunctionExpression(e.params,r,r.type!==ar.BlockStatement))}function Ht(e){var t,n,r,i,o=rr.ecmaFeatures.destructuring;if(o||ot(A()),e.type===ar.ObjectExpression)for(e.type=ar.ObjectPattern,t=0,n=e.properties.length;n>t;t+=1)r=e.properties[t],"init"!==r.kind&&it({},cr.InvalidLHSInAssignment),Ht(r.value);else if(e.type===ar.ArrayExpression)for(e.type=ar.ArrayPattern,t=0,n=e.elements.length;n>t;t+=1)i=e.elements[t],i&&Ht(i);else e.type===ar.Identifier?ir.isRestrictedWord(e.name)&&it({},cr.InvalidLHSInAssignment):e.type===ar.SpreadElement?(Ht(e.argument),e.argument.type===ar.ObjectPattern&&it({},cr.ObjectPatternAsSpread)):"AssignmentExpression"===e.type&&"="===e.operator?e.type=ar.AssignmentPattern:e.type!==ar.MemberExpression&&e.type!==ar.CallExpression&&e.type!==ar.NewExpression&&e.type!==ar.AssignmentPattern&&it({},cr.InvalidLHSInAssignment)}function zt(e,t){var n,r,i,o,a=rr.ecmaFeatures.destructuring;if(a||ot(A()),t.type===ar.ObjectExpression)for(t.type=ar.ObjectPattern,n=0,r=t.properties.length;r>n;n+=1)i=t.properties[n],"init"!==i.kind&&it({},cr.InvalidLHSInFormalsList),zt(e,i.value);else if(t.type===ar.ArrayExpression)for(t.type=ar.ArrayPattern,n=0,r=t.elements.length;r>n;n+=1)o=t.elements[n],o&&zt(e,o);else t.type===ar.Identifier?wn(e,t,t.name):t.type===ar.SpreadElement?(t.argument.type!==ar.Identifier&&it({},cr.InvalidLHSInFormalsList),wn(e,t.argument,t.argument.name)):t.type===ar.AssignmentExpression&&"="===t.operator?t.type=ar.AssignmentPattern:t.type!==ar.AssignmentPattern&&rt({},cr.InvalidLHSInFormalsList)}function Wt(){var e,t,n,r,i,o,a=!1,s=nr.parenthesisCount,u=rr.ecmaFeatures.generators;if(u&&(nr.yieldAllowed&&lt("yield")||Jn&&ct("yield")))return Pn();if(o=et(),ut("(")){if(e=k(),")"===e.value&&e.type===dr.Punctuator||"..."===e.value)return i=En(),ut("=>")||ot(A()),Gt(i,o);a=!0}return e=tr,r=t=Ut(),ut("=>")&&(nr.parenthesisCount===s||nr.parenthesisCount===s+1)&&(r.type===ar.Identifier?i=Qt([r]):r.type===ar.AssignmentExpression||r.type===ar.ArrayExpression||r.type===ar.ObjectExpression?(a||ot(A()),i=Qt([r])):r.type===ar.SequenceExpression&&(i=Qt(r.expressions)),i)?Gt(i,o):(pt()&&(Jn&&t.type===ar.Identifier&&ir.isRestrictedWord(t.name)&&it(e,cr.StrictLHSAssignment),!ut("=")||r.type!==ar.ObjectExpression&&r.type!==ar.ArrayExpression?dt(r)||it({},cr.InvalidLHSInAssignment):Ht(r),e=A(),n=Wt(),r=Z(o,sr.createAssignmentExpression(e.value,t,n))),r)}function qt(){var e,t,n=et(),r=Wt(),i=[r];if(ut(",")){for(;er>Kn&&ut(",");)if(A(),r=Dt(),i.push(r),r.type===ar.SpreadElement){t=!0,ut(")")||rt({},cr.ElementAfterSpreadElement);break}e=Z(n,sr.createSequenceExpression(i))}return t&&"=>"!==k().value&&rt({},cr.IllegalSpread),e||r}function Xt(){for(var e,t=[];er>Kn&&!ut("}")&&(e=Qn(),"undefined"!=typeof e);)t.push(e);return t}function $t(){var e,t=et();return at("{"),e=Xt(),at("}"),Z(t,sr.createBlockStatement(e))}function Jt(){var e,t=et();return e=A(),e.type!==dr.Identifier&&(Jn&&e.type===dr.Keyword&&ir.isStrictModeReservedWord(e.value)?it(e,cr.StrictReservedWord):ot(e)),Z(t,sr.createIdentifier(e.value))}function Kt(e){var t,n=et(),r=null;return ut("{")?(t=St(),Ht(t)):ut("[")?(t=ht(),Ht(t)):(t=nr.allowKeyword?At():Jt(),Jn&&ir.isRestrictedWord(t.name)&&it({},cr.StrictVarName)),"const"===e?(ut("=")||rt({},cr.NoUnintializedConst),at("="),r=Wt()):ut("=")&&(A(),r=Wt()),Z(n,sr.createVariableDeclarator(t,r))}function Yt(e){var t=[];do{if(t.push(Kt(e)),!ut(","))break;A()}while(er>Kn);return t}function Zt(){var e;return st("var"),e=Yt(),ft(),sr.createVariableDeclaration(e,"var")}function en(e){var t,n=et();return st(e),t=Yt(e),ft(),Z(n,sr.createVariableDeclaration(t,e))}function tn(){var e,t=et();return A(),ut("{")&&rt(tr,cr.ObjectPatternAsRestParameter),e=Jt(),ut("=")&&rt(tr,cr.DefaultRestParameter),ut(")")||rt(tr,cr.ParameterAfterRestParameter),Z(t,sr.createRestElement(e))}function nn(){return at(";"),sr.createEmptyStatement()}function rn(){var e=qt();return ft(),sr.createExpressionStatement(e)}function on(){var e,t,n;return st("if"),at("("),e=qt(),at(")"),t=xn(),ct("else")?(A(),n=xn()):n=null,sr.createIfStatement(e,t,n)}function an(){var e,t,n;return st("do"),n=nr.inIteration,nr.inIteration=!0,e=xn(),nr.inIteration=n,st("while"),at("("),t=qt(),at(")"),ut(";")&&A(),sr.createDoWhileStatement(t,e)}function sn(){var e,t,n;return st("while"),at("("),e=qt(),at(")"),n=nr.inIteration,nr.inIteration=!0,t=xn(),nr.inIteration=n,sr.createWhileStatement(e,t)}function un(){var e,t,n=et();return e=A(),t=Yt(),Z(n,sr.createVariableDeclaration(t,e.value))}function cn(e){var t,n,r,i,o,a,s,u,c=rr.ecmaFeatures.forOf,l=rr.ecmaFeatures.blockBindings;return t=n=r=null,st("for"),at("("),ut(";")?A():(ct("var")||l&&(ct("let")||ct("const"))?(nr.allowIn=!1,t=un(),nr.allowIn=!0,1===t.declarations.length&&(ct("in")||c&&lt("of"))&&(s=tr,("in"!==s.value&&"var"===t.kind||!t.declarations[0].init)&&(A(),i=t,o=qt(),t=null))):(nr.allowIn=!1,t=qt(),nr.allowIn=!0,c&&lt("of")?(s=A(),i=t,o=qt(),t=null):ct("in")&&(dt(t)||it({},cr.InvalidLHSInForIn),s=A(),i=t,o=qt(),t=null)),"undefined"==typeof i&&at(";")),"undefined"==typeof i&&(ut(";")||(n=qt()),at(";"),ut(")")||(r=qt())),at(")"),u=nr.inIteration,nr.inIteration=!0,void 0!==e&&e.ignoreBody||(a=xn()),nr.inIteration=u,"undefined"==typeof i?sr.createForStatement(t,n,r,a):rr.ecmaFeatures.forOf&&"of"===s.value?sr.createForOfStatement(i,o,a):sr.createForInStatement(i,o,a)}function ln(){var e=null;return st("continue"),59===$n.charCodeAt(Kn)?(A(),nr.inIteration||rt({},cr.IllegalContinue),sr.createContinueStatement(null)):nt()?(nr.inIteration||rt({},cr.IllegalContinue),sr.createContinueStatement(null)):(tr.type===dr.Identifier&&(e=Jt(),nr.labelSet.has(e.name)||rt({},cr.UnknownLabel,e.name)),ft(),null!==e||nr.inIteration||rt({},cr.IllegalContinue),sr.createContinueStatement(e))}function pn(){var e=null;return st("break"),59===$n.charCodeAt(Kn)?(A(),nr.inIteration||nr.inSwitch||rt({},cr.IllegalBreak),sr.createBreakStatement(null)):nt()?(nr.inIteration||nr.inSwitch||rt({},cr.IllegalBreak),sr.createBreakStatement(null)):(tr.type===dr.Identifier&&(e=Jt(),nr.labelSet.has(e.name)||rt({},cr.UnknownLabel,e.name)),ft(),null!==e||nr.inIteration||nr.inSwitch||rt({},cr.IllegalBreak),sr.createBreakStatement(e))}function fn(){var e=null;return st("return"),nr.inFunctionBody||rr.ecmaFeatures.globalReturn||it({},cr.IllegalReturn),32===$n.charCodeAt(Kn)&&ir.isIdentifierStart($n.charCodeAt(Kn+1))?(e=qt(),ft(),sr.createReturnStatement(e)):nt()?sr.createReturnStatement(null):(ut(";")||ut("}")||tr.type===dr.EOF||(e=qt()),ft(),sr.createReturnStatement(e))}function dn(){var e,t;return Jn&&(s(),it({},cr.StrictModeWith)),st("with"),at("("),e=qt(),at(")"),t=xn(),sr.createWithStatement(e,t)}function hn(){var e,t,n=[],r=et();for(ct("default")?(A(),e=null):(st("case"),e=qt()),at(":");er>Kn&&!(ut("}")||ct("default")||ct("case"))&&(t=Qn(),"undefined"!=typeof t);)n.push(t);return Z(r,sr.createSwitchCase(e,n))}function mn(){var e,t,n,r,i;if(st("switch"),at("("),e=qt(),at(")"),at("{"),t=[],ut("}"))return A(),sr.createSwitchStatement(e,t);for(r=nr.inSwitch,nr.inSwitch=!0,i=!1;er>Kn&&!ut("}");)n=hn(),null===n.test&&(i&&rt({},cr.MultipleDefaultsInSwitch),i=!0),t.push(n);return nr.inSwitch=r,at("}"),sr.createSwitchStatement(e,t)}function gn(){var e;return st("throw"),nt()&&rt({},cr.NewlineAfterThrow),e=qt(),ft(),sr.createThrowStatement(e)}function vn(){var e,t,n=et(),r=rr.ecmaFeatures.destructuring,i={paramSet:new pr};return st("catch"),at("("),ut(")")&&ot(tr),ut("[")?(r||ot(tr),e=ht(),zt(i,e)):ut("{")?(r||ot(tr),e=St(),zt(i,e)):e=Jt(),Jn&&e.name&&ir.isRestrictedWord(e.name)&&it({},cr.StrictCatchVariable),at(")"),t=$t(),Z(n,sr.createCatchClause(e,t))}function yn(){var e,t=null,n=null;return st("try"),e=$t(),ct("catch")&&(t=vn()),ct("finally")&&(A(),n=$t()),t||n||rt({},cr.NoCatchOrFinally),sr.createTryStatement(e,t,n)}function _n(){return st("debugger"),ft(),sr.createDebuggerStatement()}function xn(){var e,t,n,r=tr.type;if(r===dr.EOF&&ot(tr),r===dr.Punctuator&&"{"===tr.value)return $t();if(n=et(),r===dr.Punctuator)switch(tr.value){case";":return Z(n,nn());case"{":return $t();case"(":return Z(n,rn())}if(n=et(),r===dr.Keyword)switch(tr.value){case"break":return Z(n,pn());case"continue":return Z(n,ln());case"debugger":return Z(n,_n());case"do":return Z(n,an());case"for":return Z(n,cn());case"function":return Z(n,Cn());case"if":return Z(n,on());case"return":return Z(n,fn());case"switch":return Z(n,mn());case"throw":return Z(n,gn());case"try":return Z(n,yn());case"var":return Z(n,Zt());case"while":return Z(n,sn());case"with":return Z(n,dn())}return n=et(),e=qt(),e.type===ar.Identifier&&ut(":")?(A(),nr.labelSet.has(e.name)&&rt({},cr.Redeclaration,"Label",e.name),nr.labelSet.set(e.name,!0),t=xn(),nr.labelSet.delete(e.name),Z(n,sr.createLabeledStatement(e,t))):(ft(),Z(n,sr.createExpressionStatement(e)))}function bn(){var e,t,n,r,i,o,a,s,u,c=[],l=et();for(at("{");er>Kn&&tr.type===dr.StringLiteral&&(t=tr,e=Qn(),c.push(e),e.expression.type===ar.Literal);)n=$n.slice(t.range[0]+1,t.range[1]-1),"use strict"===n?(Jn=!0,r&&it(r,cr.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(i=nr.labelSet,o=nr.inIteration,a=nr.inSwitch,s=nr.inFunctionBody,u=nr.parenthesizedCount,nr.labelSet=new pr,nr.inIteration=!1,nr.inSwitch=!1,nr.inFunctionBody=!0;er>Kn&&!ut("}")&&(e=Qn(),"undefined"!=typeof e);)c.push(e);return at("}"),nr.labelSet=i,nr.inIteration=o,nr.inSwitch=a,nr.inFunctionBody=s,nr.parenthesizedCount=u,Z(l,sr.createBlockStatement(c))}function wn(e,t,n){Jn?(ir.isRestrictedWord(n)&&(e.stricted=t,e.message=cr.StrictParamName),e.paramSet.has(n)&&(e.stricted=t,e.message=cr.StrictParamDupe)):e.firstRestricted||(ir.isRestrictedWord(n)?(e.firstRestricted=t,e.message=cr.StrictParamName):ir.isStrictModeReservedWord(n)?(e.firstRestricted=t,e.message=cr.StrictReservedWord):e.paramSet.has(n)&&(e.firstRestricted=t,e.message=cr.StrictParamDupe)),e.paramSet.set(n,!0)}function Sn(e){var t,n,r,i=rr.ecmaFeatures.restParams,o=rr.ecmaFeatures.destructuring,a=rr.ecmaFeatures.defaultParams,s=et();return t=tr,"..."===t.value?(i||ot(tr),n=tn(),wn(e,n.argument,n.argument.name),e.params.push(n),!1):(ut("[")?(o||ot(tr),n=ht(),zt(e,n)):ut("{")?(o||ot(tr),n=St(),zt(e,n)):(n=Jt(),wn(e,t,t.value)),ut("=")&&(a||o?(A(),r=Wt(),++e.defaultCount):ot(tr)),r?e.params.push(Z(s,sr.createAssignmentPattern(n,r))):e.params.push(n),!ut(")"))}function En(e){var t;if(t={params:[],defaultCount:0,firstRestricted:e},at("("),!ut(")"))for(t.paramSet=new pr;er>Kn&&Sn(t);)at(",");return at(")"),{params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}}function Cn(e){var t,n,r,i,o,a,s,u,c=null,l=et(),p=rr.ecmaFeatures.generators;return st("function"),u=!1,p&&ut("*")&&(A(),u=!0),e&&ut("(")||(n=tr,c=Jt(),Jn?ir.isRestrictedWord(n.value)&&it(n,cr.StrictFunctionName):ir.isRestrictedWord(n.value)?(i=n,o=cr.StrictFunctionName):ir.isStrictModeReservedWord(n.value)&&(i=n,o=cr.StrictReservedWord)),r=En(i),i=r.firstRestricted,r.message&&(o=r.message),a=Jn,s=nr.yieldAllowed,nr.yieldAllowed=u,t=bn(),Jn&&i&&rt(i,o),Jn&&r.stricted&&it(r.stricted,o),Jn=a,nr.yieldAllowed=s,Z(l,sr.createFunctionDeclaration(c,r.params,t,u,!1))}function Tn(){var e,t,n,r,i,o,a,s,u=null,c=et(),l=rr.ecmaFeatures.generators;return st("function"),s=!1,l&&ut("*")&&(A(),s=!0),ut("(")||(e=tr,u=Jt(),Jn?ir.isRestrictedWord(e.value)&&it(e,cr.StrictFunctionName):ir.isRestrictedWord(e.value)?(t=e,n=cr.StrictFunctionName):ir.isStrictModeReservedWord(e.value)&&(t=e,n=cr.StrictReservedWord)),r=En(t),t=r.firstRestricted,r.message&&(n=r.message),o=Jn,a=nr.yieldAllowed,nr.yieldAllowed=s,i=bn(),Jn&&t&&rt(t,n),Jn&&r.stricted&&it(r.stricted,n),Jn=o,nr.yieldAllowed=a,Z(c,sr.createFunctionExpression(u,r.params,i,s,!1))}function Pn(){var e,t,n,i=et();return e=A(),r("yield"===e.value,"Called parseYieldExpression with non-yield lookahead."),nr.yieldAllowed||it({},cr.IllegalYield),t=!1,ut("*")&&(A(),t=!0),nt()?Z(i,sr.createYieldExpression(null,t)):(ut(";")||ut(")")||ut("}")||tr.type===dr.EOF||(n=Wt()),Z(i,sr.createYieldExpression(n,t)))}function In(){var e,t=et();return tr.type!==dr.StringLiteral&&rt({},cr.InvalidModuleSpecifier),e=sr.createLiteralFromSource(A(),$n),Z(t,e)}function Dn(){var e,t,n=et();return ct("default")?(A(),t=Z(n,sr.createIdentifier("default"))):t=Jt(),lt("as")&&(A(),e=At()),Z(n,sr.createExportSpecifier(t,e))}function An(){var e,t=null,n=null,r=[],i=et();if(st("export"),tr.type===dr.Keyword)switch(tr.value){case"let":case"const":case"var":case"class":case"function":return t=Qn(),Z(i,sr.createExportNamedDeclaration(t,r,null))}if(at("{"),!ut("}"))do e=e||ct("default"),r.push(Dn());while(ut(",")&&A());return at("}"),lt("from")?(A(),n=In(),ft()):e?rt({},tr.value?cr.UnexpectedToken:cr.MissingFromClause,tr.value):ft(),Z(i,sr.createExportNamedDeclaration(t,r,n))}function Nn(){var e,t=null,n=null,r=rr.ecmaFeatures.classes,i=et();if(st("export"),st("default"),ct("function")||ct("class")){if(e=k(),e.type===dr.Identifier)return t=Qn(),Z(i,sr.createExportDefaultDeclaration(t));if("function"===tr.value)return t=Cn(!0),Z(i,sr.createExportDefaultDeclaration(t));if(r&&"class"===tr.value)return t=Vn(!0),Z(i,sr.createExportDefaultDeclaration(t))}return lt("from")&&rt({},cr.UnexpectedToken,tr.value),n=ut("{")?St():ut("[")?ht():Wt(),ft(),Z(i,sr.createExportDefaultDeclaration(n))}function kn(){var e,t=et();return st("export"),at("*"),lt("from")||rt({},tr.value?cr.UnexpectedToken:cr.MissingFromClause,tr.value),A(),e=In(),ft(),Z(t,sr.createExportAllDeclaration(e))}function On(){nr.inFunctionBody&&rt({},cr.IllegalExportDeclaration);var e=k().value;return"default"===e?Nn():"*"===e?kn():An()}function Rn(){var e,t,n=et();return t=At(),lt("as")&&(A(),e=Jt()),Z(n,sr.createImportSpecifier(e,t))}function jn(){var e=[];if(at("{"),!ut("}"))do e.push(Rn());while(ut(",")&&A());return at("}"),e}function Fn(){var e,t=et();return e=At(),Z(t,sr.createImportDefaultSpecifier(e))}function Ln(){var e,t=et();return at("*"),lt("as")||rt({},cr.NoAsAfterImportNamespace),A(),e=At(),Z(t,sr.createImportNamespaceSpecifier(e))}function Mn(){var e,t,n=et();return nr.inFunctionBody&&rt({},cr.IllegalImportDeclaration),st("import"),e=[],tr.type===dr.StringLiteral?(t=In(),ft(),Z(n,sr.createImportDeclaration(e,t))):(!ct("default")&&T(tr)&&(e.push(Fn()),ut(",")&&A()),ut("*")?e.push(Ln()):ut("{")&&(e=e.concat(jn())),lt("from")||rt({},tr.value?cr.UnexpectedToken:cr.MissingFromClause,tr.value),A(),t=In(),ft(),Z(n,sr.createImportDeclaration(e,t)))}function Bn(){var e,t,n,r,i,o,a=!1,s=!1,u=rr.ecmaFeatures.generators,c=[],l={},p=et();for(l.static=new pr,l.prototype=new pr,at("{");!ut("}");)ut(";")?A():(e=tr,t=!1,s=ut("*"),r=ut("["),o=et(),s&&(u||ot(tr),A()),i=vt(),"static"===i.name&&ut("*")&&(u||ot(tr),s=!0,A()),"static"===i.name&&yt()&&(e=tr,t=!0,r=ut("["),i=vt()),n=s?xt(i,o):_t(e,i,r,o,s),n?(n.static=t,"init"===n.kind&&(n.kind="method"),t?n.computed||"prototype"!==(n.key.name||n.key.value.toString())||ot(e,cr.StaticPrototype):n.computed||"constructor"!==(n.key.name||n.key.value&&n.key.value.toString())||(("method"!==n.kind||!n.method||n.value.generator)&&ot(e,cr.ConstructorSpecialMethod),a?ot(e,cr.DuplicateConstructor):a=!0,n.kind="constructor"),n.type=ar.MethodDefinition,delete n.method,delete n.shorthand,c.push(n)):ot(tr));return A(),Z(p,sr.createClassBody(c))}function Un(){var e,t=null,n=null,r=et(),i=Jn;return Jn=!0,st("class"),tr.type===dr.Identifier&&(t=Jt()),ct("extends")&&(A(),n=Rt()),e=Bn(),Jn=i,Z(r,sr.createClassExpression(t,n,e))}function Vn(e){var t,n=null,r=null,i=et(),o=Jn;return Jn=!0,st("class"),e&&tr.type!==dr.Identifier||(n=Jt()),ct("extends")&&(A(),r=Rt()),t=Bn(),Jn=o,Z(i,sr.createClassDeclaration(n,r,t))}function Qn(){var e=rr.ecmaFeatures.classes,t=rr.ecmaFeatures.modules,n=rr.ecmaFeatures.blockBindings;if(tr.type===dr.Keyword)switch(tr.value){case"export":return t||it({},cr.IllegalExportDeclaration),On();case"import":return t||it({},cr.IllegalImportDeclaration),Mn();case"function":return Cn();case"class":if(e)return Vn();break;case"const":case"let":if(n)return en(tr.value);default:return xn()}return tr.type!==dr.EOF?xn():void 0}function Gn(){for(var e,t,n,r,i=[];er>Kn&&(t=tr,t.type===dr.StringLiteral)&&(e=Qn(),i.push(e),e.expression.type===ar.Literal);)n=$n.slice(t.range[0]+1,t.range[1]-1),"use strict"===n?(Jn=!0,r&&it(r,cr.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(;er>Kn&&(e=Qn(),"undefined"!=typeof e);)i.push(e);return i}function Hn(){var e,t,n=!!rr.ecmaFeatures.modules;return s(),N(),t=et(),Jn=n,e=Gn(),Z(t,sr.createProgram(e,n?"module":"script"))}function zn(){var e,t,n,r=[];for(e=0;e<rr.tokens.length;++e)t=rr.tokens[e],n={type:t.type,value:t.value},t.regex&&(n.regex={pattern:t.regex.pattern,flags:t.regex.flags}),rr.range&&(n.range=t.range),rr.loc&&(n.loc=t.loc),r.push(n);rr.tokens=r}function Wn(e,t){var n,r;n=String,"string"==typeof e||e instanceof String||(e=n(e)),$n=e,Kn=0,Yn=$n.length>0?1:0,Zn=0,er=$n.length,tr=null,nr={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1,yieldAllowed:!1,curlyStack:[],curlyLastIndex:0,inJSXSpreadAttribute:!1,inJSXChild:!1,inJSXTag:!1},rr={ecmaFeatures:ur},t=t||{},t.tokens=!0,rr.tokens=[],rr.tokenize=!0,rr.openParenToken=-1,rr.openCurlyToken=-1,rr.range="boolean"==typeof t.range&&t.range,rr.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.comment&&t.comment&&(rr.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(rr.errors=[]),t.ecmaFeatures&&"object"==typeof t.ecmaFeatures&&(rr.ecmaFeatures=t.ecmaFeatures);try{if(N(),tr.type===dr.EOF)return rr.tokens;for(A();tr.type!==dr.EOF;)try{A()}catch(i){if(rr.errors){rr.errors.push(i);break}throw i}zn(),r=rr.tokens,"undefined"!=typeof rr.comments&&(r.comments=rr.comments),"undefined"!=typeof rr.errors&&(r.errors=rr.errors)}catch(o){throw o}finally{rr={}}return r}function qn(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),$n=e,Kn=0,Yn=$n.length>0?1:0,Zn=0,er=$n.length,tr=null,nr={allowIn:!0,labelSet:new pr,parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1,yieldAllowed:!1,curlyStack:[],curlyLastIndex:0,inJSXSpreadAttribute:!1,inJSXChild:!1,inJSXTag:!1},rr={ecmaFeatures:Object.create(ur)},nr.curlyStack=[],"undefined"!=typeof t&&(rr.range="boolean"==typeof t.range&&t.range,rr.loc="boolean"==typeof t.loc&&t.loc,rr.attachComment="boolean"==typeof t.attachComment&&t.attachComment,rr.loc&&null!==t.source&&void 0!==t.source&&(rr.source=r(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(rr.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(rr.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(rr.errors=[]),rr.attachComment&&(rr.range=!0,rr.comments=[],fr.reset()),"module"===t.sourceType&&(rr.ecmaFeatures={arrowFunctions:!0,blockBindings:!0,regexUFlag:!0,regexYFlag:!0,templateStrings:!0,binaryLiterals:!0,octalLiterals:!0,unicodeCodePointEscapes:!0,superInFunctions:!0,defaultParams:!0,restParams:!0,forOf:!0,objectLiteralComputedProperties:!0,objectLiteralShorthandMethods:!0,objectLiteralShorthandProperties:!0,objectLiteralDuplicateProperties:!0,generators:!0,destructuring:!0,classes:!0,modules:!0}),t.ecmaFeatures&&"object"==typeof t.ecmaFeatures&&("module"===t.sourceType?Object.keys(t.ecmaFeatures).forEach(function(e){rr.ecmaFeatures[e]=t.ecmaFeatures[e]}):rr.ecmaFeatures=t.ecmaFeatures));try{n=Hn(),"undefined"!=typeof rr.comments&&(n.comments=rr.comments),"undefined"!=typeof rr.tokens&&(zn(),n.tokens=rr.tokens),"undefined"!=typeof rr.errors&&(n.errors=rr.errors)}catch(i){throw i}finally{rr={}}return n}var Xn,$n,Jn,Kn,Yn,Zn,er,tr,nr,rr,ir=e("./lib/syntax"),or=e("./lib/token-info"),ar=e("./lib/ast-node-types"),sr=e("./lib/ast-node-factory"),ur=e("./lib/features"),cr=e("./lib/messages"),lr=e("./lib/xhtml-entities"),pr=e("./lib/string-map"),fr=e("./lib/comment-attachment"),dr=or.Token,hr=or.TokenName,mr=or.FnExprTokens,gr=ir.Regex;Xn={Data:1,Get:2,Set:4},n.version=e("./package.json").version,n.tokenize=Wn,n.parse=qn,n.Syntax=function(){var e,t={};"function"==typeof Object.create&&(t=Object.create(null));for(e in ar)ar.hasOwnProperty(e)&&(t[e]=ar[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()},{"./lib/ast-node-factory":1,"./lib/ast-node-types":2,"./lib/comment-attachment":3,"./lib/features":4,"./lib/messages":5,"./lib/string-map":6,"./lib/syntax":7,"./lib/token-info":8,"./lib/xhtml-entities":9,"./package.json":10}]},{},[]);!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("sap.watt.toolsets.javascript/lib/eslint/eslint",[],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.eslint=e()}}(function(){return function t(n,r,i){function o(s,u){if(!r[s]){if(!n[s]){var c="function"==typeof e&&e;if(!u&&c)return c(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var p=r[s]={exports:{}};n[s][0].call(p.exports,function(e){var t=n[s][1][e];return o(t?t:e)},p,p.exports,t,n,r,i)}return r[s].exports}for(var a="function"==typeof e&&e,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t){"use strict";var n=e("globals");t.exports={builtin:n.builtin,browser:{globals:n.browser},node:{globals:n.node,ecmaFeatures:{globalReturn:!0},rules:{"no-catch-shadow":0,"no-console":0,"no-mixed-requires":2,"no-new-require":2,"no-path-concat":2,"no-process-exit":2,"global-strict":[0,"always"],"handle-callback-err":[2,"err"]}},worker:{globals:n.worker},amd:{globals:n.amd},mocha:{globals:n.mocha},jasmine:{globals:n.jasmine},phantomjs:{globals:n.phantom},jquery:{globals:n.jquery},prototypejs:{globals:n.prototypejs},shelljs:{globals:n.shelljs},meteor:{globals:n.meteor},mongo:{globals:n.mongo},applescript:{globals:n.applescript},es6:{ecmaFeatures:{arrowFunctions:!0,blockBindings:!0,regexUFlag:!0,regexYFlag:!0,templateStrings:!0,binaryLiterals:!0,octalLiterals:!0,unicodeCodePointEscapes:!0,superInFunctions:!0,defaultParams:!0,restParams:!0,forOf:!0,objectLiteralComputedProperties:!0,objectLiteralShorthandMethods:!0,objectLiteralShorthandProperties:!0,objectLiteralDuplicateProperties:!0,generators:!0,destructuring:!0,classes:!0}}}},{globals:136}],2:[function(e,t){t.exports={ecmaFeatures:{},parser:"espree",env:{browser:!1,node:!1,amd:!1,mocha:!1,jasmine:!1},rules:{"no-alert":2,"no-array-constructor":2,"no-bitwise":0,"no-caller":2,"no-catch-shadow":2,"no-comma-dangle":0,"no-cond-assign":2,"no-console":2,"no-constant-condition":2,"no-continue":0,"no-control-regex":2,"no-debugger":2,"no-delete-var":2,"no-div-regex":0,"no-dupe-keys":2,"no-dupe-args":2,"no-duplicate-case":2,"no-else-return":0,"no-empty":2,"no-empty-class":0,"no-empty-character-class":2,"no-empty-label":2,"no-eq-null":0,"no-eval":2,"no-ex-assign":2,"no-extend-native":2,"no-extra-bind":2,"no-extra-boolean-cast":2,"no-extra-parens":0,"no-extra-semi":2,"no-extra-strict":2,"no-fallthrough":2,"no-floating-decimal":0,"no-func-assign":2,"no-implied-eval":2,"no-inline-comments":0,"no-inner-declarations":[2,"functions"],"no-invalid-regexp":2,"no-irregular-whitespace":2,"no-iterator":2,"no-label-var":2,"no-labels":2,"no-lone-blocks":2,"no-lonely-if":0,"no-loop-func":2,"no-mixed-requires":[0,!1],"no-mixed-spaces-and-tabs":[2,!1],"linebreak-style":[0,"unix"],"no-multi-spaces":2,"no-multi-str":2,"no-multiple-empty-lines":[0,{max:2}],"no-native-reassign":2,"no-negated-in-lhs":2,"no-nested-ternary":0,"no-new":2,"no-new-func":2,"no-new-object":2,"no-new-require":0,"no-new-wrappers":2,"no-obj-calls":2,"no-octal":2,"no-octal-escape":2,"no-param-reassign":0,"no-path-concat":0,"no-plusplus":0,"no-process-env":0,"no-process-exit":2,"no-proto":2,"no-redeclare":2,"no-regex-spaces":2,"no-reserved-keys":0,"no-restricted-modules":0,"no-return-assign":2,"no-script-url":2,"no-self-compare":0,"no-sequences":2,"no-shadow":2,"no-shadow-restricted-names":2,"no-space-before-semi":0,"no-spaced-func":2,"no-sparse-arrays":2,"no-sync":0,"no-ternary":0,"no-trailing-spaces":2,"no-throw-literal":0,"no-undef":2,"no-undef-init":2,"no-undefined":0,"no-underscore-dangle":2,"no-unneeded-ternary":0,"no-unreachable":2,"no-unused-expressions":2,"no-unused-vars":[2,{vars:"all",args:"after-used"}],"no-use-before-define":2,"no-void":0,"no-var":0,"prefer-const":0,"no-warning-comments":[0,{terms:["todo","fixme","xxx"],location:"start"}],"no-with":2,"no-wrap-func":2,"array-bracket-spacing":[0,"never"],"accessor-pairs":0,"block-scoped-var":0,"brace-style":[0,"1tbs"],camelcase:2,"comma-dangle":[2,"never"],"comma-spacing":2,"comma-style":0,complexity:[0,11],"computed-property-spacing":[0,"never"],"consistent-return":2,"consistent-this":[0,"that"],curly:[2,"all"],"default-case":0,"dot-location":0,"dot-notation":[2,{allowKeywords:!0}],"eol-last":2,eqeqeq:2,"func-names":0,"func-style":[0,"declaration"],"generator-star":0,"generator-star-spacing":0,"global-strict":[2,"never"],"guard-for-in":0,"handle-callback-err":0,indent:0,"key-spacing":[2,{beforeColon:!1,afterColon:!0}],"lines-around-comment":0,"max-depth":[0,4],"max-len":[0,80,4],"max-nested-callbacks":[0,2],"max-params":[0,3],"max-statements":[0,10],"new-cap":2,"new-parens":2,"newline-after-var":0,"object-curly-spacing":[0,"never"],"object-shorthand":0,"one-var":0,"operator-assignment":[0,"always"],"operator-linebreak":0,"padded-blocks":0,"quote-props":0,quotes:[2,"double"],radix:0,semi:2,"semi-spacing":[2,{before:!1,after:!0}],"sort-vars":0,"space-after-function-name":[0,"never"],"space-after-keywords":[0,"always"],"space-before-blocks":[0,"always"],"space-before-function-paren":[0,"always"],"space-before-function-parentheses":[0,"always"],"space-in-brackets":[0,"never"],"space-in-parens":[0,"never"],"space-infix-ops":2,"space-return-throw-case":2,"space-unary-ops":[2,{words:!0,nonwords:!1}],"spaced-comment":0,"spaced-line-comment":[0,"always"],strict:2,"use-isnan":2,"valid-jsdoc":0,"valid-typeof":2,"vars-on-top":0,"wrap-iife":0,"wrap-regex":0,yoda:[2,"never"]}}
},{}],3:[function(e,t){function n(e,t){return f.isUndefined(t)?""+t:f.isNumber(t)&&!isFinite(t)?t.toString():f.isFunction(t)||f.isRegExp(t)?t.toString():t}function r(e,t){return f.isString(e)?e.length<t?e:e.slice(0,t):e}function i(e){return r(JSON.stringify(e.actual,n),128)+" "+e.operator+" "+r(JSON.stringify(e.expected,n),128)}function o(e,t,n,r,i){throw new m.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function a(e,t){e||o(e,!0,t,"==",m.ok)}function s(e,t){if(e===t)return!0;if(f.isBuffer(e)&&f.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return f.isDate(e)&&f.isDate(t)?e.getTime()===t.getTime():f.isRegExp(e)&&f.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:f.isObject(e)||f.isObject(t)?c(e,t):e==t}function u(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function c(e,t){if(f.isNullOrUndefined(e)||f.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(f.isPrimitive(e)||f.isPrimitive(t))return e===t;var n=u(e),r=u(t);if(n&&!r||!n&&r)return!1;if(n)return e=d.call(e),t=d.call(t),s(e,t);var i,o,a=g(e),c=g(t);if(a.length!=c.length)return!1;for(a.sort(),c.sort(),o=a.length-1;o>=0;o--)if(a[o]!=c[o])return!1;for(o=a.length-1;o>=0;o--)if(i=a[o],!s(e[i],t[i]))return!1;return!0}function l(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}function p(e,t,n,r){var i;f.isString(n)&&(r=n,n=null);try{t()}catch(a){i=a}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&o(i,n,"Missing expected exception"+r),!e&&l(i,n)&&o(i,n,"Got unwanted exception"+r),e&&i&&n&&!l(i,n)||!e&&i)throw i}var f=e("util/"),d=Array.prototype.slice,h=Object.prototype.hasOwnProperty,m=t.exports=a;m.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=i(this),this.generatedMessage=!0);var t=e.stackStartFunction||o;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,a=t.name,s=r.indexOf("\n"+a);if(s>=0){var u=r.indexOf("\n",s+1);r=r.substring(u+1)}this.stack=r}}},f.inherits(m.AssertionError,Error),m.fail=o,m.ok=a,m.equal=function(e,t,n){e!=t&&o(e,t,n,"==",m.equal)},m.notEqual=function(e,t,n){e==t&&o(e,t,n,"!=",m.notEqual)},m.deepEqual=function(e,t,n){s(e,t)||o(e,t,n,"deepEqual",m.deepEqual)},m.notDeepEqual=function(e,t,n){s(e,t)&&o(e,t,n,"notDeepEqual",m.notDeepEqual)},m.strictEqual=function(e,t,n){e!==t&&o(e,t,n,"===",m.strictEqual)},m.notStrictEqual=function(e,t,n){e===t&&o(e,t,n,"!==",m.notStrictEqual)},m.throws=function(){p.apply(this,[!0].concat(d.call(arguments)))},m.doesNotThrow=function(){p.apply(this,[!1].concat(d.call(arguments)))},m.ifError=function(e){if(e)throw e};var g=Object.keys||function(e){var t=[];for(var n in e)h.call(e,n)&&t.push(n);return t}},{"util/":10}],4:[function(e,t){(function(n){function r(){}function i(){f.log.apply(f,arguments)}function o(){f.log.apply(f,arguments)}function a(){f.warn.apply(f,arguments)}function s(e){v[e]=m()}function u(e){var t=v[e];if(!t)throw new Error("No such label: "+e);var n=m()-t;f.log(e+": "+n+"ms")}function c(){var e=new Error;e.name="Trace",e.message=d.format.apply(null,arguments),f.error(e.stack)}function l(e){f.log(d.inspect(e)+"\n")}function p(e){if(!e){var t=g.call(arguments,1);h.ok(!1,d.format.apply(null,t))}}var f,d=e("util"),h=e("assert"),m=e("date-now"),g=Array.prototype.slice,v={};f="undefined"!=typeof n&&n.console?n.console:"undefined"!=typeof window&&window.console?window.console:{};for(var y=[[r,"log"],[i,"info"],[o,"warn"],[a,"error"],[s,"time"],[u,"timeEnd"],[c,"trace"],[l,"dir"],[p,"assert"]],_=0;_<y.length;_++){var x=y[_],b=x[0],w=x[1];f[w]||(f[w]=b)}t.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{assert:3,"date-now":5,util:10}],5:[function(e,t){function n(){return(new Date).getTime()}t.exports=n},{}],6:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),u=1;i>u;u++)s[u-1]=arguments[u];n.apply(this,s)}else if(o(n)){for(i=arguments.length,s=new Array(i-1),u=1;i>u;u++)s[u-1]=arguments[u];for(c=n.slice(),i=c.length,u=0;i>u;u++)c[u].apply(this,s)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var i;i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-->0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],7:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],8:[function(e,t){function n(){if(!a){a=!0;for(var e,t=o.length;t;){e=o,o=[];for(var n=-1;++n<t;)e[n]();t=o.length}a=!1}}function r(){}var i=t.exports={},o=[],a=!1;i.nextTick=function(e){o.push(e),a||setTimeout(n,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],9:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],10:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(t)?r.showHidden=t:t&&n._extend(r,t),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function a(e){return e}function s(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function u(e,t,r){if(e.customInspect&&t&&T(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return _(i)||(i=u(e,i,r)),i}var o=c(e,t);if(o)return o;var a=Object.keys(t),m=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),C(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(t);if(0===a.length){if(T(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(C(t))return l(t)}var v="",y=!1,x=["{","}"];if(h(t)&&(y=!0,x=["[","]"]),T(t)){var b=t.name?": "+t.name:"";v=" [Function"+b+"]"}if(w(t)&&(v=" "+RegExp.prototype.toString.call(t)),E(t)&&(v=" "+Date.prototype.toUTCString.call(t)),C(t)&&(v=" "+l(t)),0===a.length&&(!y||0==t.length))return x[0]+v+x[1];if(0>r)return w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var S;return S=y?p(e,t,r,m,a):a.map(function(n){return f(e,t,r,m,n,y)}),e.seen.pop(),d(S,v,x)}function c(e,t){if(b(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,i){for(var o=[],a=0,s=t.length;s>a;++a)N(t,String(a))?o.push(f(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(e,t,n,r,i,!0))}),o}function f(e,t,n,r,i,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),N(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=g(n)?u(e,c.value,null):u(e,c.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),b(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function d(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function _(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function b(e){return void 0===e}function w(e){return S(e)&&"[object RegExp]"===I(e)}function S(e){return"object"==typeof e&&null!==e}function E(e){return S(e)&&"[object Date]"===I(e)}function C(e){return S(e)&&("[object Error]"===I(e)||e instanceof Error)}function T(e){return"function"==typeof e}function P(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function I(e){return Object.prototype.toString.call(e)}function D(e){return 10>e?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[D(e.getHours()),D(e.getMinutes()),D(e.getSeconds())].join(":");return[e.getDate(),j[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var k=/%[sdj%]/g;n.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(e).replace(k,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),s=r[n];o>n;s=r[++n])a+=g(s)||!S(s)?" "+s:" "+i(s);return a},n.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(b(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return o};var O,R={};n.debuglog=function(e){if(b(O)&&(O=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!R[e])if(new RegExp("\\b"+e+"\\b","i").test(O)){var r=t.pid;R[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else R[e]=function(){};return R[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=m,n.isNull=g,n.isNullOrUndefined=v,n.isNumber=y,n.isString=_,n.isSymbol=x,n.isUndefined=b,n.isRegExp=w,n.isObject=S,n.isDate=E,n.isError=C,n.isFunction=T,n.isPrimitive=P,n.isBuffer=e("./support/isBuffer");var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",A(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":9,_process:8,inherits:7}],11:[function(e,t,n){!function(){"use strict";function t(e,t,n){return e.slice(t,n)}function r(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function i(e){return e>=97&&122>=e||e>=65&&90>=e||e>=48&&57>=e}function o(e){return"param"===e||"argument"===e||"arg"===e}function a(e){return"property"===e||"prop"===e}function s(e){return o(e)||a(e)||"alias"===e||"this"===e||"mixes"===e||"requires"===e}function u(e){return s(e)||"const"===e||"constant"===e}function c(e){return a(e)||o(e)}function l(e){return o(e)||"define"===e||"enum"===e||"implements"===e||"return"===e||"this"===e||"type"===e||"typedef"===e||"returns"===e||a(e)}function p(e){return l(e)||"throws"===e||"const"===e||"constant"===e||"namespace"===e||"member"===e||"var"===e||"module"===e||"constructor"===e||"class"===e||"extends"===e||"augments"===e||"public"===e||"private"===e||"protected"===e}function f(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function d(e){var t,n,r,i,o,a=0,s=1,u=2;for(e=e.replace(/^\/\*\*?/,"").replace(/\*\/$/,""),t=0,n=e.length,r=a,i="";n>t;){switch(o=e.charCodeAt(t),r){case a:y.code.isLineTerminator(o)?i+=String.fromCharCode(o):42===o?r=s:y.code.isWhiteSpace(o)||(i+=String.fromCharCode(o),r=u);break;case s:y.code.isWhiteSpace(o)||(i+=String.fromCharCode(o)),r=y.code.isLineTerminator(o)?a:u;break;case u:i+=String.fromCharCode(o),y.code.isLineTerminator(o)&&(r=a)}t+=1}return i}var h,m,g,v,y,_;y=e("esutils"),g=e("isarray"),h=e("./typed"),m=e("./utility"),_=function(){var e=Object.prototype.hasOwnProperty;return function(t,n){return e.call(t,n)}}(),function(e){function n(){var e=k.charCodeAt(D);return D+=1,!y.code.isLineTerminator(e)||13===e&&10===k.charCodeAt(D)||(A+=1),String.fromCharCode(e)}function r(){var e="";for(n();N>D&&i(k.charCodeAt(D));)e+=n();return e}function a(){var e,t,n=D;for(t=!1;N>n;){if(e=k.charCodeAt(n),!y.code.isLineTerminator(e)||13===e&&10===k.charCodeAt(n+1)){if(t){if(64===e)break;y.code.isWhiteSpace(e)||(t=!1)}}else A+=1,t=!0;n+=1}return n}function v(e,t){for(var r,i,a,s=!1;t>D;){if(r=k.charCodeAt(D),!y.code.isWhiteSpace(r)){if(123===r){n();break}s=!0;break}n()}if(s)return null;for(i=1,a="";t>D;)if(r=k.charCodeAt(D),y.code.isLineTerminator(r))n();else{if(125===r){if(i-=1,0===i){n();break}}else 123===r&&(i+=1);a+=n()}return 0!==i?m.throwError("Braces are not balanced"):o(e)?h.parseParamType(a):h.parseType(a)}function x(e){var t;if(!y.code.isIdentifierStart(k.charCodeAt(D)))return null;for(t=n();e>D&&y.code.isIdentifierPart(k.charCodeAt(D));)t+=n();return t}function b(e){for(;e>D&&(y.code.isWhiteSpace(k.charCodeAt(D))||y.code.isLineTerminator(k.charCodeAt(D)));)n()}function w(e,t,r){var i,o="";if(b(e),D>=e)return null;if(t&&91===k.charCodeAt(D)&&(i=!0,o=n()),!y.code.isIdentifierStart(k.charCodeAt(D)))return null;if(o+=x(e),r)for(58!==k.charCodeAt(D)||"module"!==o&&"external"!==o&&"event"!==o||(o+=n(),o+=x(e));46===k.charCodeAt(D)||35===k.charCodeAt(D)||126===k.charCodeAt(D);)o+=n(),o+=x(e);if(i){if(61===k.charCodeAt(D))for(o+=n();e>D&&93!==k.charCodeAt(D);)o+=n();if(D>=e||93!==k.charCodeAt(D))return null;o+=n()}return o}function S(){for(;N>D&&64!==k.charCodeAt(D);)n();return D>=N?!1:(m.assert(64===k.charCodeAt(D)),!0)}function E(e,t){this._options=e,this._title=t,this._tag={title:t,description:null},this._options.lineNumbers&&(this._tag.lineNumber=A),this._last=0,this._extra={}}function C(e){var t,n;return S()?(t=r(),n=new E(e,t),n.parse()):null}function T(){var e,t,r="";for(t=!0;N>D&&(e=k.charCodeAt(D),!t||64!==e);)y.code.isLineTerminator(e)?t=!0:t&&!y.code.isWhiteSpace(e)&&(t=!1),r+=n();return f(r)}function P(e,t){var n,r,i,o,a,s=[];if(void 0===t&&(t={}),k="boolean"==typeof t.unwrap&&t.unwrap?d(e):e,t.tags)if(g(t.tags))for(i={},o=0,a=t.tags.length;a>o;o++)"string"==typeof t.tags[o]?i[t.tags[o]]=!0:m.throwError('Invalid "tags" parameter: '+t.tags);else m.throwError('Invalid "tags" parameter: '+t.tags);for(N=k.length,D=0,A=0,O=t.recoverable,R=t.sloppy,j=t.strict,r=T();;){if(n=C(t),!n)break;(!i||i.hasOwnProperty(n.title))&&s.push(n)}return{description:r,tags:s}}var I,D,A,N,k,O,R,j;E.prototype.addError=function(e){var t=Array.prototype.slice.call(arguments,1),n=e.replace(/%(\d)/g,function(e,n){return m.assert(n<t.length,"Message reference must be in range"),t[n]});return this._tag.errors||(this._tag.errors=[]),j&&m.throwError(n),this._tag.errors.push(n),O},E.prototype.parseType=function(){if(l(this._title))try{if(this._tag.type=v(this._title,this._last),!this._tag.type&&!o(this._title)&&!this.addError("Missing or invalid tag type"))return!1}catch(e){if(this._tag.type=null,!this.addError(e.message))return!1}else if(p(this._title))try{this._tag.type=v(this._title,this._last)}catch(t){}return!0},E.prototype._parseNamePath=function(e){var t;return t=w(this._last,R&&o(this._title),!0),t||e||this.addError("Missing or invalid tag name")?(this._tag.name=t,!0):!1},E.prototype.parseNamePath=function(){return this._parseNamePath(!1)},E.prototype.parseNamePathOptional=function(){return this._parseNamePath(!0)},E.prototype.parseName=function(){var e,t;if(u(this._title))if(this._tag.name=w(this._last,R&&o(this._title),c(this._title)),this._tag.name)t=this._tag.name,"["===t.charAt(0)&&"]"===t.charAt(t.length-1)&&(e=t.substring(1,t.length-1).split("="),e[1]&&(this._tag["default"]=e[1]),this._tag.name=e[0],this._tag.type&&"OptionalType"!==this._tag.type.type&&(this._tag.type={type:"OptionalType",expression:this._tag.type}));else{if(!s(this._title))return!0;if(o(this._title)&&this._tag.type&&this._tag.type.name)this._extra.name=this._tag.type,this._tag.name=this._tag.type.name,this._tag.type=null;else if(!this.addError("Missing or invalid tag name"))return!1}return!0},E.prototype.parseDescription=function(){var e=f(t(k,D,this._last));return e&&(/^-\s+/.test(e)&&(e=e.substring(2)),this._tag.description=e),!0},E.prototype.parseKind=function(){var e,n;return n={"class":!0,constant:!0,event:!0,external:!0,file:!0,"function":!0,member:!0,mixin:!0,module:!0,namespace:!0,typedef:!0},e=f(t(k,D,this._last)),this._tag.kind=e,_(n,e)||this.addError("Invalid kind name '%0'",e)?!0:!1},E.prototype.parseAccess=function(){var e;return e=f(t(k,D,this._last)),this._tag.access=e,"private"===e||"protected"===e||"public"===e||this.addError("Invalid access name '%0'",e)?!0:!1},E.prototype.parseVariation=function(){var e,n;return n=f(t(k,D,this._last)),e=parseFloat(n,10),this._tag.variation=e,isNaN(e)&&!this.addError("Invalid variation '%0'",n)?!1:!0},E.prototype.ensureEnd=function(){var e=f(t(k,D,this._last));return e&&!this.addError("Unknown content '%0'",e)?!1:!0},E.prototype.epilogue=function(){var e;return e=this._tag.description,!o(this._title)||this._tag.type||!e||"["!==e.charAt(0)||(this._tag.type=this._extra.name,this._tag.name=void 0,R||this.addError("Missing or invalid tag name"))?!0:!1},I={access:["parseAccess"],alias:["parseNamePath","ensureEnd"],augments:["parseType","parseNamePathOptional","ensureEnd"],constructor:["parseType","parseNamePathOptional","ensureEnd"],"class":["parseType","parseNamePathOptional","ensureEnd"],"extends":["parseType","parseNamePathOptional","ensureEnd"],deprecated:["parseDescription"],global:["ensureEnd"],inner:["ensureEnd"],instance:["ensureEnd"],kind:["parseKind"],mixes:["parseNamePath","ensureEnd"],mixin:["parseNamePathOptional","ensureEnd"],member:["parseType","parseNamePathOptional","ensureEnd"],method:["parseNamePathOptional","ensureEnd"],module:["parseType","parseNamePathOptional","ensureEnd"],func:["parseNamePathOptional","ensureEnd"],"function":["parseNamePathOptional","ensureEnd"],"var":["parseType","parseNamePathOptional","ensureEnd"],name:["parseNamePath","ensureEnd"],namespace:["parseType","parseNamePathOptional","ensureEnd"],"private":["parseType","parseDescription"],"protected":["parseType","parseDescription"],"public":["parseType","parseDescription"],readonly:["ensureEnd"],requires:["parseNamePath","ensureEnd"],since:["parseDescription"],"static":["ensureEnd"],summary:["parseDescription"],"this":["parseNamePath","ensureEnd"],todo:["parseDescription"],variation:["parseVariation"],version:["parseDescription"]},E.prototype.parse=function(){var e,t,n,r;if(!this._title&&!this.addError("Missing or invalid title"))return null;for(this._last=a(this._title),n=_(I,this._title)?I[this._title]:["parseType","parseName","parseDescription","epilogue"],e=0,t=n.length;t>e;++e)if(r=n[e],!this[r]())return null;return D=this._last,this._tag},e.parse=P}(v={}),n.version=m.VERSION,n.parse=v.parse,n.parseType=h.parseType,n.parseParamType=h.parseParamType,n.unwrapComment=d,n.Syntax=r(h.Syntax),n.Error=m.DoctrineError,n.type={Syntax:n.Syntax,parseType:h.parseType,parseParamType:h.parseParamType,stringify:h.stringify}}()},{"./typed":12,"./utility":13,esutils:17,isarray:18}],12:[function(e,t,n){!function(){"use strict";function t(e){return-1==="><(){}[],:*|?!=".indexOf(String.fromCharCode(e))&&!B.code.isWhiteSpace(e)&&!B.code.isLineTerminator(e)}function r(e,t,n,r){this._previous=e,this._index=t,this._token=n,this._value=r}function i(){var e=O.charAt(j);return j+=1,e}function o(e){var t,n,r,o=0;for(n="u"===e?4:2,t=0;n>t;++t){if(!(R>j&&B.code.isHexDigit(O.charCodeAt(j))))return"";r=i(),o=16*o+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(o)}function a(){var e,t,n,r,a,s="";for(e=O.charAt(j),++j;R>j;){if(t=i(),t===e){e="";break}if("\\"===t)if(t=i(),B.code.isLineTerminator(t.charCodeAt(0)))"\r"===t&&10===O.charCodeAt(j)&&++j;else switch(t){case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="	";break;case"u":case"x":a=j,r=o(t),r?s+=r:(j=a,s+=t);break;case"b":s+="\b";break;case"f":s+="\f";break;case"v":s+="";break;default:B.code.isOctalDigit(t.charCodeAt(0))?(n="01234567".indexOf(t),R>j&&B.code.isOctalDigit(O.charCodeAt(j))&&(n=8*n+"01234567".indexOf(i()),"0123".indexOf(t)>=0&&R>j&&B.code.isOctalDigit(O.charCodeAt(j))&&(n=8*n+"01234567".indexOf(i()))),s+=String.fromCharCode(n)):s+=t}else{if(B.code.isLineTerminator(t.charCodeAt(0)))break;s+=t}}return""!==e&&U.throwError("unexpected quote"),M=s,k.STRING}function s(){var e,t;if(e="",t=O.charCodeAt(j),46!==t){if(e=i(),t=O.charCodeAt(j),"0"===e){if(120===t||88===t){for(e+=i();R>j&&(t=O.charCodeAt(j),B.code.isHexDigit(t));)e+=i();return e.length<=2&&U.throwError("unexpected token"),R>j&&(t=O.charCodeAt(j),B.code.isIdentifierStart(t)&&U.throwError("unexpected token")),M=parseInt(e,16),k.NUMBER}if(B.code.isOctalDigit(t)){for(e+=i();R>j&&(t=O.charCodeAt(j),B.code.isOctalDigit(t));)e+=i();return R>j&&(t=O.charCodeAt(j),(B.code.isIdentifierStart(t)||B.code.isDecimalDigit(t))&&U.throwError("unexpected token")),M=parseInt(e,8),k.NUMBER}B.code.isDecimalDigit(t)&&U.throwError("unexpected token")}for(;R>j&&(t=O.charCodeAt(j),B.code.isDecimalDigit(t));)e+=i()}if(46===t)for(e+=i();R>j&&(t=O.charCodeAt(j),B.code.isDecimalDigit(t));)e+=i();if(101===t||69===t)if(e+=i(),t=O.charCodeAt(j),(43===t||45===t)&&(e+=i()),t=O.charCodeAt(j),B.code.isDecimalDigit(t))for(e+=i();R>j&&(t=O.charCodeAt(j),B.code.isDecimalDigit(t));)e+=i();else U.throwError("unexpected token");return R>j&&(t=O.charCodeAt(j),B.code.isIdentifierStart(t)&&U.throwError("unexpected token")),M=parseFloat(e),k.NUMBER}function u(){var e,n;for(M=i();R>j&&t(O.charCodeAt(j));){if(e=O.charCodeAt(j),46===e){if(j+1>=R)return k.ILLEGAL;if(n=O.charCodeAt(j+1),60===n)break}M+=i()}return k.NAME}function c(){var e;for(F=j;R>j&&B.code.isWhiteSpace(O.charCodeAt(j));)i();if(j>=R)return L=k.EOF;switch(e=O.charCodeAt(j)){case 39:case 34:return L=a();case 58:return i(),L=k.COLON;case 44:return i(),L=k.COMMA;case 40:return i(),L=k.LPAREN;case 41:return i(),L=k.RPAREN;case 91:return i(),L=k.LBRACK;case 93:return i(),L=k.RBRACK;case 123:return i(),L=k.LBRACE;case 125:return i(),L=k.RBRACE;case 46:if(R>j+1){if(e=O.charCodeAt(j+1),60===e)return i(),i(),L=k.DOT_LT;if(46===e&&R>j+2&&46===O.charCodeAt(j+2))return i(),i(),i(),L=k.REST;if(B.code.isDecimalDigit(e))return L=s()}return L=k.ILLEGAL;case 60:return i(),L=k.LT;case 62:return i(),L=k.GT;case 42:return i(),L=k.STAR;case 124:return i(),L=k.PIPE;case 63:return i(),L=k.QUESTION;case 33:return i(),L=k.BANG;case 61:return i(),L=k.EQUAL;default:return B.code.isDecimalDigit(e)?L=s():(U.assert(t(e)),L=u())}}function l(e,t){U.assert(L===e,t||"consumed token not matched"),c()}function p(e,t){L!==e&&U.throwError(t||"unexpected token"),c()}function f(){var e;if(l(k.LPAREN,"UnionType should start with ("),e=[],L!==k.RPAREN)for(;;){if(e.push(E()),L===k.RPAREN)break;p(k.PIPE)}return l(k.RPAREN,"UnionType should end with )"),{type:N.UnionType,elements:e}}function d(){var e;for(l(k.LBRACK,"ArrayType should start with ["),e=[];L!==k.RBRACK;){if(L===k.REST){l(k.REST),e.push({type:N.RestType,expression:E()});break}e.push(E()),L!==k.RBRACK&&p(k.COMMA)}return p(k.RBRACK),{type:N.ArrayType,elements:e}}function h(){var e=M;return L===k.NAME||L===k.STRING?(c(),e):L===k.NUMBER?(l(k.NUMBER),String(e)):(U.throwError("unexpected token"),void 0)}function m(){var e;return e=h(),L===k.COLON?(l(k.COLON),{type:N.FieldType,key:e,value:E()}):{type:N.FieldType,key:e,value:null}}function g(){var e;if(l(k.LBRACE,"RecordType should start with {"),e=[],L===k.COMMA)l(k.COMMA);else for(;L!==k.RBRACE;)e.push(m()),L!==k.RBRACE&&p(k.COMMA);return p(k.RBRACE),{type:N.RecordType,fields:e}}function v(){var e=M;return p(k.NAME),L!==k.COLON||"module"!==e&&"external"!==e&&"event"!==e||(l(k.COLON),e+=":"+M,p(k.NAME)),{type:N.NameExpression,name:e}}function y(){var e=[];for(e.push(C());L===k.COMMA;)l(k.COMMA),e.push(C());return e}function _(){var e,t;return e=v(),L===k.DOT_LT||L===k.LT?(c(),t=y(),p(k.GT),{type:N.TypeApplication,expression:e,applications:t}):e}function x(){return l(k.COLON,"ResultType should start with :"),L===k.NAME&&"void"===M?(l(k.NAME),{type:N.VoidLiteral}):E()}function b(){for(var e,t=[],n=!1,r=!1;L!==k.RPAREN;)L===k.REST&&(l(k.REST),r=!0),e=E(),e.type===N.NameExpression&&L===k.COLON&&(l(k.COLON),e={type:N.ParameterType,name:e.name,expression:E()}),L===k.EQUAL?(l(k.EQUAL),e={type:N.OptionalType,expression:e},n=!0):n&&U.throwError("unexpected token"),r&&(e={type:N.RestType,expression:e}),t.push(e),L!==k.RPAREN&&p(k.COMMA);return t}function w(){var e,t,n,r,i;return U.assert(L===k.NAME&&"function"===M,"FunctionType should start with 'function'"),l(k.NAME),p(k.LPAREN),e=!1,n=[],t=null,L!==k.RPAREN&&(L!==k.NAME||"this"!==M&&"new"!==M?n=b():(e="new"===M,l(k.NAME),p(k.COLON),t=_(),L===k.COMMA&&(l(k.COMMA),n=b()))),p(k.RPAREN),r=null,L===k.COLON&&(r=x()),i={type:N.FunctionType,params:n,result:r},t&&(i["this"]=t,e&&(i["new"]=!0)),i}function S(){var e;switch(L){case k.STAR:return l(k.STAR),{type:N.AllLiteral};case k.LPAREN:return f();case k.LBRACK:return d();case k.LBRACE:return g();case k.NAME:if("null"===M)return l(k.NAME),{type:N.NullLiteral};if("undefined"===M)return l(k.NAME),{type:N.UndefinedLiteral};if(e=r.save(),"function"===M)try{return w()}catch(t){e.restore()}return _();default:U.throwError("unexpected token")}}function E(){var e;return L===k.QUESTION?(l(k.QUESTION),L===k.COMMA||L===k.EQUAL||L===k.RBRACE||L===k.RPAREN||L===k.PIPE||L===k.EOF||L===k.RBRACK||L===k.GT?{type:N.NullableLiteral}:{type:N.NullableType,expression:S(),prefix:!0}):L===k.BANG?(l(k.BANG),{type:N.NonNullableType,expression:S(),prefix:!0}):(e=S(),L===k.BANG?(l(k.BANG),{type:N.NonNullableType,expression:e,prefix:!1}):L===k.QUESTION?(l(k.QUESTION),{type:N.NullableType,expression:e,prefix:!1}):L===k.LBRACK?(l(k.LBRACK),p(k.RBRACK,"expected an array-style type declaration ("+M+"[])"),{type:N.TypeApplication,expression:{type:N.NameExpression,name:"Array"},applications:[e]}):e)}function C(){var e,t;if(e=E(),L!==k.PIPE)return e;for(t=[e],l(k.PIPE);;){if(t.push(E()),L!==k.PIPE)break;l(k.PIPE)}return{type:N.UnionType,elements:t}}function T(){var e;return L===k.REST?(l(k.REST),{type:N.RestType,expression:C()}):(e=C(),L===k.EQUAL?(l(k.EQUAL),{type:N.OptionalType,expression:e}):e)}function P(e,t){var n;return O=e,R=O.length,j=0,F=0,c(),n=C(),t&&t.midstream?{expression:n,index:F}:(L!==k.EOF&&U.throwError("not reach to EOF"),n)}function I(e,t){var n;return O=e,R=O.length,j=0,F=0,c(),n=T(),t&&t.midstream?{expression:n,index:F}:(L!==k.EOF&&U.throwError("not reach to EOF"),n)}function D(e,t,n){var r,i,o;switch(e.type){case N.NullableLiteral:r="?";break;case N.AllLiteral:r="*";break;case N.NullLiteral:r="null";break;case N.UndefinedLiteral:r="undefined";break;case N.VoidLiteral:r="void";break;case N.UnionType:for(r=n?"":"(",i=0,o=e.elements.length;o>i;++i)r+=D(e.elements[i],t),i+1!==o&&(r+="|");n||(r+=")");break;case N.ArrayType:for(r="[",i=0,o=e.elements.length;o>i;++i)r+=D(e.elements[i],t),i+1!==o&&(r+=t?",":", ");r+="]";break;case N.RecordType:for(r="{",i=0,o=e.fields.length;o>i;++i)r+=D(e.fields[i],t),i+1!==o&&(r+=t?",":", ");r+="}";break;case N.FieldType:r=e.value?e.key+(t?":":": ")+D(e.value,t):e.key;break;case N.FunctionType:for(r=t?"function(":"function (",e["this"]&&(r+=e["new"]?t?"new:":"new: ":t?"this:":"this: ",r+=D(e["this"],t),0!==e.params.length&&(r+=t?",":", ")),i=0,o=e.params.length;o>i;++i)r+=D(e.params[i],t),i+1!==o&&(r+=t?",":", ");
r+=")",e.result&&(r+=(t?":":": ")+D(e.result,t));break;case N.ParameterType:r=e.name+(t?":":": ")+D(e.expression,t);break;case N.RestType:r="...",e.expression&&(r+=D(e.expression,t));break;case N.NonNullableType:r=e.prefix?"!"+D(e.expression,t):D(e.expression,t)+"!";break;case N.OptionalType:r=D(e.expression,t)+"=";break;case N.NullableType:r=e.prefix?"?"+D(e.expression,t):D(e.expression,t)+"?";break;case N.NameExpression:r=e.name;break;case N.TypeApplication:for(r=D(e.expression,t)+".<",i=0,o=e.applications.length;o>i;++i)r+=D(e.applications[i],t),i+1!==o&&(r+=t?",":", ");r+=">";break;default:U.throwError("Unknown type "+e.type)}return r}function A(e,t){return null==t&&(t={}),D(e,t.compact,t.topLevel)}var N,k,O,R,j,F,L,M,B,U;B=e("esutils"),U=e("./utility"),N={NullableLiteral:"NullableLiteral",AllLiteral:"AllLiteral",NullLiteral:"NullLiteral",UndefinedLiteral:"UndefinedLiteral",VoidLiteral:"VoidLiteral",UnionType:"UnionType",ArrayType:"ArrayType",RecordType:"RecordType",FieldType:"FieldType",FunctionType:"FunctionType",ParameterType:"ParameterType",RestType:"RestType",NonNullableType:"NonNullableType",OptionalType:"OptionalType",NullableType:"NullableType",NameExpression:"NameExpression",TypeApplication:"TypeApplication"},k={ILLEGAL:0,DOT_LT:1,REST:2,LT:3,GT:4,LPAREN:5,RPAREN:6,LBRACE:7,RBRACE:8,LBRACK:9,RBRACK:10,COMMA:11,COLON:12,STAR:13,PIPE:14,QUESTION:15,BANG:16,EQUAL:17,NAME:18,STRING:19,NUMBER:20,EOF:21},r.prototype.restore=function(){F=this._previous,j=this._index,L=this._token,M=this._value},r.save=function(){return new r(F,j,L,M)},n.parseType=P,n.parseParamType=I,n.stringify=A,n.Syntax=N}()},{"./utility":13,esutils:17}],13:[function(e,t,n){!function(){"use strict";function t(e){this.name="DoctrineError",this.message=e}function r(e){throw new t(e)}var i;i=e("../package.json").version,n.VERSION=i,t.prototype=function(){var e=function(){};return e.prototype=Error.prototype,new e}(),t.prototype.constructor=t,n.DoctrineError=t,n.throwError=r,n.assert=e("assert")}()},{"../package.json":19,assert:3}],14:[function(e,t){!function(){"use strict";function e(e){if(null==e)return!1;switch(e.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function n(e){if(null==e)return!1;switch(e.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function r(e){if(null==e)return!1;switch(e.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function i(e){return r(e)||null!=e&&"FunctionDeclaration"===e.type}function o(e){switch(e.type){case"IfStatement":return null!=e.alternate?e.alternate:e.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return e.body}return null}function a(e){var t;if("IfStatement"!==e.type)return!1;if(null==e.alternate)return!1;t=e.consequent;do{if("IfStatement"===t.type&&null==t.alternate)return!0;t=o(t)}while(t);return!1}t.exports={isExpression:e,isStatement:r,isIterationStatement:n,isSourceElement:i,isProblematicIfStatement:a,trailingStatement:o}}()},{}],15:[function(e,t){!function(){"use strict";function e(e){return e>=48&&57>=e}function n(t){return e(t)||t>=97&&102>=t||t>=65&&70>=t}function r(e){return e>=48&&55>=e}function i(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&c.indexOf(e)>=0}function o(e){return 10===e||13===e||8232===e||8233===e}function a(e){return e>=97&&122>=e||e>=65&&90>=e||36===e||95===e||92===e||e>=128&&u.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function s(e){return e>=97&&122>=e||e>=65&&90>=e||e>=48&&57>=e||36===e||95===e||92===e||e>=128&&u.NonAsciiIdentifierPart.test(String.fromCharCode(e))}var u,c;u={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},c=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279],t.exports={isDecimalDigit:e,isHexDigit:n,isOctalDigit:r,isWhiteSpace:i,isLineTerminator:o,isIdentifierStart:a,isIdentifierPart:s}}()},{}],16:[function(e,t){!function(){"use strict";function n(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function r(e,t){return t||"yield"!==e?i(e,t):!1}function i(e,t){if(t&&n(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function o(e,t){return"null"===e||"true"===e||"false"===e||r(e,t)}function a(e,t){return"null"===e||"true"===e||"false"===e||i(e,t)}function s(e){return"eval"===e||"arguments"===e}function u(e){var t,n,r;if(0===e.length)return!1;if(r=e.charCodeAt(0),!p.isIdentifierStart(r)||92===r)return!1;for(t=1,n=e.length;n>t;++t)if(r=e.charCodeAt(t),!p.isIdentifierPart(r)||92===r)return!1;return!0}function c(e,t){return u(e)&&!o(e,t)}function l(e,t){return u(e)&&!a(e,t)}var p=e("./code");t.exports={isKeywordES5:r,isKeywordES6:i,isReservedWordES5:o,isReservedWordES6:a,isRestrictedWord:s,isIdentifierName:u,isIdentifierES5:c,isIdentifierES6:l}}()},{"./code":15}],17:[function(e,t,n){!function(){"use strict";n.ast=e("./ast"),n.code=e("./code"),n.keyword=e("./keyword")}()},{"./ast":14,"./code":15,"./keyword":16}],18:[function(e,t){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],19:[function(e,t){t.exports={name:"doctrine",description:"JSDoc parser",homepage:"http://github.com/Constellation/doctrine.html",main:"lib/doctrine.js",version:"0.6.4",engines:{node:">=0.10.0"},directories:{lib:"./lib"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"}],repository:{type:"git",url:"git+ssh://git@github.com/Constellation/doctrine.git"},devDependencies:{coveralls:"^2.11.2",gulp:"^3.8.10","gulp-bump":"^0.1.13","gulp-eslint":"^0.5.0","gulp-filter":"^2.0.2","gulp-git":"^1.0.0","gulp-istanbul":"^0.6.0","gulp-jshint":"^1.9.0","gulp-mocha":"^2.0.0","gulp-tag-version":"^1.2.1","jshint-stylish":"^1.0.0",should:"^5.0.1"},licenses:[{type:"BSD",url:"http://github.com/Constellation/doctrine/raw/master/LICENSE.BSD"}],scripts:{test:"gulp","unit-test":"gulp test",lint:"gulp lint",coveralls:"cat ./coverage/lcov.info | coveralls && rm -rf ./coverage"},dependencies:{esutils:"^1.1.6",isarray:"0.0.1"},gitHead:"0835299b485ecdfa908d20628d6c8900144590ff",bugs:{url:"https://github.com/Constellation/doctrine/issues"},_id:"doctrine@0.6.4",_shasum:"81428491a942ef18b0492056eda3800eee57d61d",_from:"doctrine@>=0.6.2 <0.7.0",_npmVersion:"1.4.28",_npmUser:{name:"constellation",email:"utatane.tea@gmail.com"},dist:{shasum:"81428491a942ef18b0492056eda3800eee57d61d",tarball:"http://registry.npmjs.org/doctrine/-/doctrine-0.6.4.tgz"},_resolved:"https://registry.npmjs.org/doctrine/-/doctrine-0.6.4.tgz",readme:"ERROR: No README data found!"}},{}],20:[function(e,t){"use strict";var n=/[|\\{}()[\]^$+*?.]/g;t.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(n,"\\$&")}},{}],21:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function l(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:l(i,t,n)}if("value"in r&&r.writable)return r.value;var o=r.get;return void 0===o?void 0:o.call(n)},o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(e("./variable")),u=function p(e,t,n,r,i,o){a(this,p),this.type=e,this.name=t,this.node=n,this.parent=r,this.index=i,this.kind=o};n["default"]=u;var c=function(e){function t(e,n,r,o){a(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,s.Parameter,e,n,null,r,null),this.rest=o}return o(t,e),t}(u);n.ParameterDefinition=c,n.Definition=u},{"./variable":27}],22:[function(e,t,n){"use strict";function r(){return{optimistic:!1,directive:!1,nodejsScope:!1,sourceType:"script",ecmaVersion:5}}function i(e,t){function n(e){return"object"==typeof e&&e instanceof Object&&!(e instanceof RegExp)}var r,o;for(r in t)t.hasOwnProperty(r)&&(o=t[r],n(o)?n(e[r])?i(e[r],o):e[r]=i({},o):e[r]=o);return e}function o(e,t){var n,o,a;return a=i(r(),t),n=new u(a),o=new c(n),o.visit(e),s(null===n.__currentScope,"currentScope should be null."),n}var a=function(e){return e&&e.__esModule?e["default"]:e};n.analyze=o,Object.defineProperty(n,"__esModule",{value:!0});var s=a(e("assert")),u=a(e("./scope-manager")),c=a(e("./referencer")),l=a(e("./reference")),p=a(e("./variable")),f=a(e("./scope")),d=e("../package.json").version;n.version=d,n.Reference=l,n.Variable=p,n.Scope=f,n.ScopeManager=u},{"../package.json":130,"./reference":23,"./referencer":24,"./scope":26,"./scope-manager":25,"./variable":27,assert:3}],23:[function(e,t){"use strict";var n=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=1,o=2,a=i|o,s=function(){function e(t,n,i,o,a,s,u){r(this,e),this.identifier=t,this.from=n,this.tainted=!1,this.resolved=null,this.flag=i,this.isWrite()&&(this.writeExpr=o,this.partial=s,this.init=u),this.__maybeImplicitGlobal=a}return n(e,{isStatic:{value:function(){return!this.tainted&&this.resolved&&this.resolved.scope.isStatic()}},isWrite:{value:function(){return!!(this.flag&e.WRITE)}},isRead:{value:function(){return!!(this.flag&e.READ)}},isReadOnly:{value:function(){return this.flag===e.READ}},isWriteOnly:{value:function(){return this.flag===e.WRITE}},isReadWrite:{value:function(){return this.flag===e.RW}}}),e}();t.exports=s,s.READ=i,s.WRITE=o,s.RW=a},{}],24:[function(e,t){"use strict";function n(e){return e[e.length-1]||null}function r(e,t,n){var r=new y(e,n);r.visit(e),null!=t&&r.rightHandNodes.forEach(t.visit,t)}function i(e){var t=e.type;return t===l.Identifier||t===l.ObjectPattern||t===l.ArrayPattern||t===l.SpreadElement||t===l.RestElement||t===l.AssignmentPattern}var o=function(e){return e&&e.__esModule?e["default"]:e},a=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function b(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:b(i,t,n)}if("value"in r&&r.writable)return r.value;var o=r.get;return void 0===o?void 0:o.call(n)},u=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},c=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},l=e("estraverse").Syntax,p=o(e("esrecurse")),f=o(e("./reference")),d=o(e("./variable")),h=e("./definition"),m=h.ParameterDefinition,g=h.Definition,v=o(e("assert")),y=function(e){function t(e,n){c(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.rootPattern=e,this.callback=n,this.assignments=[],this.rightHandNodes=[],this.restElements=[]}return u(t,e),a(t,{Identifier:{value:function(e){var t=n(this.restElements);this.callback(e,{topLevel:e===this.rootPattern,rest:null!=t&&t.argument===e,assignments:this.assignments})}},ObjectPattern:{value:function(e){var t,n,r;for(t=0,n=e.properties.length;n>t;++t)r=e.properties[t],r.computed&&this.rightHandNodes.push(r.key),this.visit(r.value)}},ArrayPattern:{value:function(e){var t,n,r;for(t=0,n=e.elements.length;n>t;++t)r=e.elements[t],this.visit(r)}},AssignmentPattern:{value:function(e){this.assignments.push(e),this.visit(e.left),this.rightHandNodes.push(e.right),this.assignments.pop()}},RestElement:{value:function(e){this.restElements.push(e),this.visit(e.argument),this.restElements.pop()}},MemberExpression:{value:function(e){e.computed&&this.rightHandNodes.push(e.property),this.rightHandNodes.push(e.object)}},SpreadElement:{value:function(e){this.visit(e.argument)}},ArrayExpression:{value:function(e){e.elements.forEach(this.visit,this)}},ObjectExpression:{value:function(e){var t=this;e.properties.forEach(function(e){e.computed&&t.rightHandNodes.push(e.key),t.visit(e.value)})}},AssignmentExpression:{value:function(e){this.assignments.push(e),this.visit(e.left),this.rightHandNodes.push(e.right),this.assignments.pop()}},CallExpression:{value:function(e){var t=this;e.arguments.forEach(function(e){t.rightHandNodes.push(e)}),this.visit(e.callee)}}}),t}(p.Visitor),_=function(e){function t(e,n){c(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.declaration=e,this.referencer=n}return u(t,e),a(t,{visitImport:{value:function(e,t){var n=this;this.referencer.visitPattern(e,function(e){n.referencer.currentScope().__define(e,new g(d.ImportBinding,e,t,n.declaration,null,null))})}},ImportNamespaceSpecifier:{value:function(e){var t=e.local||e.id;t&&this.visitImport(t,e)}},ImportDefaultSpecifier:{value:function(e){var t=e.local||e.id;this.visitImport(t,e)}},ImportSpecifier:{value:function(e){var t=e.local||e.id;e.name?this.visitImport(e.name,e):this.visitImport(t,e)}}}),t}(p.Visitor),x=function(e){function t(e){c(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.scopeManager=e,this.parent=null,this.isInnerMethodDefinition=!1}return u(t,e),a(t,{currentScope:{value:function(){return this.scopeManager.__currentScope}},close:{value:function(e){for(;this.currentScope()&&e===this.currentScope().block;)this.scopeManager.__currentScope=this.currentScope().__close(this.scopeManager)}},pushInnerMethodDefinition:{value:function(e){var t=this.isInnerMethodDefinition;return this.isInnerMethodDefinition=e,t}},popInnerMethodDefinition:{value:function(e){this.isInnerMethodDefinition=e}},materializeTDZScope:{value:function(e,t){this.scopeManager.__nestTDZScope(e,t),this.visitVariableDeclaration(this.currentScope(),d.TDZ,t.left,0,!0)}},materializeIterationScope:{value:function(e){var t,n=this;this.scopeManager.__nestForScope(e),t=e.left,this.visitVariableDeclaration(this.currentScope(),d.Variable,t,0),this.visitPattern(t.declarations[0].id,function(t){n.currentScope().__referencing(t,f.WRITE,e.right,null,!0,!0)})}},referencingDefaultValue:{value:function(e,t,n,r){var i=this.currentScope();t.forEach(function(t){i.__referencing(e,f.WRITE,t.right,n,e!==t.left,r)})}},visitPattern:{value:function(e,t,n){"function"==typeof t&&(n=t,t={processRightHandNodes:!1}),r(e,t.processRightHandNodes?this:null,n)}},visitFunction:{value:function(e){var t,n,r=this;for(e.type===l.FunctionDeclaration&&this.currentScope().__define(e.id,new g(d.FunctionName,e.id,e,null,null,null)),e.type===l.FunctionExpression&&e.id&&this.scopeManager.__nestFunctionExpressionNameScope(e),this.scopeManager.__nestFunctionScope(e,this.isInnerMethodDefinition),t=0,n=e.params.length;n>t;++t)this.visitPattern(e.params[t],{processRightHandNodes:!0},function(n,i){r.currentScope().__define(n,new m(n,e,t,i.rest)),r.referencingDefaultValue(n,i.assignments,null,!0)});e.rest&&this.visitPattern({type:"RestElement",argument:e.rest},function(t){r.currentScope().__define(t,new m(t,e,e.params.length,!0))}),e.body.type===l.BlockStatement?this.visitChildren(e.body):this.visit(e.body),this.close(e)}},visitClass:{value:function(e){e.type===l.ClassDeclaration&&this.currentScope().__define(e.id,new g(d.ClassName,e.id,e,null,null,null)),this.visit(e.superClass),this.scopeManager.__nestClassScope(e),e.id&&this.currentScope().__define(e.id,new g(d.ClassName,e.id,e)),this.visit(e.body),this.close(e)}},visitProperty:{value:function(e){var t,n;e.computed&&this.visit(e.key),n=e.type===l.MethodDefinition||e.method,n&&(t=this.pushInnerMethodDefinition(!0)),this.visit(e.value),n&&this.popInnerMethodDefinition(t)}},visitForIn:{value:function(e){var t=this;e.left.type===l.VariableDeclaration&&"var"!==e.left.kind?(this.materializeTDZScope(e.right,e),this.visit(e.right),this.close(e.right),this.materializeIterationScope(e),this.visit(e.body),this.close(e)):(e.left.type===l.VariableDeclaration?(this.visit(e.left),this.visitPattern(e.left.declarations[0].id,function(n){t.currentScope().__referencing(n,f.WRITE,e.right,null,!0,!0)})):this.visitPattern(e.left,{processRightHandNodes:!0},function(n,r){var i=null;t.currentScope().isStrict||(i={pattern:n,node:e}),t.referencingDefaultValue(n,r.assignments,i,!1),t.currentScope().__referencing(n,f.WRITE,e.right,i,!0,!1)}),this.visit(e.right),this.visit(e.body))}},visitVariableDeclaration:{value:function(e,t,n,r,i){var o,a,s=this;o=n.declarations[r],a=o.init,this.visitPattern(o.id,{processRightHandNodes:!i},function(u,c){e.__define(u,new g(t,u,o,n,r,n.kind)),i||s.referencingDefaultValue(u,c.assignments,null,!0),a&&s.currentScope().__referencing(u,f.WRITE,a,null,!c.topLevel,!0)})}},AssignmentExpression:{value:function(e){var t=this;i(e.left)?"="===e.operator?this.visitPattern(e.left,{processRightHandNodes:!0},function(n,r){var i=null;t.currentScope().isStrict||(i={pattern:n,node:e}),t.referencingDefaultValue(n,r.assignments,i,!1),t.currentScope().__referencing(n,f.WRITE,e.right,i,!r.topLevel,!1)}):this.currentScope().__referencing(e.left,f.RW,e.right):this.visit(e.left),this.visit(e.right)}},CatchClause:{value:function(e){var t=this;this.scopeManager.__nestCatchScope(e),this.visitPattern(e.param,{processRightHandNodes:!0},function(n,r){t.currentScope().__define(n,new g(d.CatchClause,e.param,e,null,null,null)),t.referencingDefaultValue(n,r.assignments,null,!0)}),this.visit(e.body),this.close(e)}},Program:{value:function(e){this.scopeManager.__nestGlobalScope(e),this.scopeManager.__isNodejsScope()&&(this.currentScope().isStrict=!1,this.scopeManager.__nestFunctionScope(e,!1)),this.scopeManager.__isES6()&&this.scopeManager.isModule()&&this.scopeManager.__nestModuleScope(e),this.visitChildren(e),this.close(e)}},Identifier:{value:function(e){this.currentScope().__referencing(e)}},UpdateExpression:{value:function(e){i(e.argument)?this.currentScope().__referencing(e.argument,f.RW,null):this.visitChildren(e)}},MemberExpression:{value:function(e){this.visit(e.object),e.computed&&this.visit(e.property)}},Property:{value:function(e){this.visitProperty(e)}},MethodDefinition:{value:function(e){this.visitProperty(e)}},BreakStatement:{value:function(){}},ContinueStatement:{value:function(){}},LabeledStatement:{value:function(e){this.visit(e.body)}},ForStatement:{value:function(e){e.init&&e.init.type===l.VariableDeclaration&&"var"!==e.init.kind&&this.scopeManager.__nestForScope(e),this.visitChildren(e),this.close(e)}},ClassExpression:{value:function(e){this.visitClass(e)}},ClassDeclaration:{value:function(e){this.visitClass(e)}},CallExpression:{value:function(e){this.scopeManager.__ignoreEval()||e.callee.type!==l.Identifier||"eval"!==e.callee.name||this.currentScope().variableScope.__detectEval(),this.visitChildren(e)}},BlockStatement:{value:function(e){this.scopeManager.__isES6()&&this.scopeManager.__nestBlockScope(e),this.visitChildren(e),this.close(e)}},ThisExpression:{value:function(){this.currentScope().variableScope.__detectThis()}},WithStatement:{value:function(e){this.visit(e.object),this.scopeManager.__nestWithScope(e),this.visit(e.body),this.close(e)}},VariableDeclaration:{value:function(e){var t,n,r,i;for(t="var"===e.kind?this.currentScope().variableScope:this.currentScope(),n=0,r=e.declarations.length;r>n;++n)i=e.declarations[n],this.visitVariableDeclaration(t,d.Variable,e,n),i.init&&this.visit(i.init)}},SwitchStatement:{value:function(e){var t,n;for(this.visit(e.discriminant),this.scopeManager.__isES6()&&this.scopeManager.__nestSwitchScope(e),t=0,n=e.cases.length;n>t;++t)this.visit(e.cases[t]);this.close(e)}},FunctionDeclaration:{value:function(e){this.visitFunction(e)}},FunctionExpression:{value:function(e){this.visitFunction(e)}},ForOfStatement:{value:function(e){this.visitForIn(e)}},ForInStatement:{value:function(e){this.visitForIn(e)}},ArrowFunctionExpression:{value:function(e){this.visitFunction(e)}},ImportDeclaration:{value:function(e){var t;v(this.scopeManager.__isES6()&&this.scopeManager.isModule(),"ImportDeclaration should appear when the mode is ES6 and in the module context."),t=new _(e,this),t.visit(e)}},visitExportDeclaration:{value:function(e){return e.source?void 0:e.declaration?(this.visit(e.declaration),void 0):(this.visitChildren(e),void 0)}},ExportDeclaration:{value:function(e){this.visitExportDeclaration(e)}},ExportNamedDeclaration:{value:function(e){this.visitExportDeclaration(e)}},ExportSpecifier:{value:function(e){var t=e.id||e.local;this.visit(t)}}}),t}(p.Visitor);t.exports=x},{"./definition":21,"./reference":23,"./variable":27,assert:3,esrecurse:126,estraverse:128}],25:[function(e,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=n(e("es6-weak-map")),a=e("./scope");n(a);var s=n(e("assert")),u=a.GlobalScope,c=a.CatchScope,l=a.WithScope,p=a.ModuleScope,f=a.ClassScope,d=a.SwitchScope,h=a.FunctionScope,m=a.ForScope,g=a.TDZScope,v=a.FunctionExpressionNameScope,y=a.BlockScope,_=function(){function e(t){i(this,e),this.scopes=[],this.globalScope=null,this.__nodeToScope=new o,this.__currentScope=null,this.__options=t}return r(e,{__useDirective:{value:function(){return this.__options.directive}},__isOptimistic:{value:function(){return this.__options.optimistic}},__ignoreEval:{value:function(){return this.__options.ignoreEval}},__isNodejsScope:{value:function(){return this.__options.nodejsScope}},isModule:{value:function(){return"module"===this.__options.sourceType}},__get:{value:function(e){return this.__nodeToScope.get(e)}},acquire:{value:function(e,t){function n(e){return"function"===e.type&&e.functionExpressionScope?!1:"TDZ"===e.type?!1:!0}var r,i,o,a;if(r=this.__get(e),!r||0===r.length)return null;if(1===r.length)return r[0];if(t){for(o=r.length-1;o>=0;--o)if(i=r[o],n(i))return i}else for(o=0,a=r.length;a>o;++o)if(i=r[o],n(i))return i;return null}},acquireAll:{value:function(e){return this.__get(e)}},release:{value:function(e,t){var n,r;return n=this.__get(e),n&&n.length?(r=n[0].upper,r?this.acquire(r.block,t):null):null}},attach:{value:function(){}},detach:{value:function(){}},__nestScope:{value:function(e){return e instanceof u&&(s(null===this.__currentScope),this.globalScope=e),this.__currentScope=e,e}},__nestGlobalScope:{value:function(e){return this.__nestScope(new u(this,e))}},__nestBlockScope:{value:function(e){return this.__nestScope(new y(this,this.__currentScope,e))}},__nestFunctionScope:{value:function(e,t){return this.__nestScope(new h(this,this.__currentScope,e,t))}},__nestForScope:{value:function(e){return this.__nestScope(new m(this,this.__currentScope,e))}},__nestCatchScope:{value:function(e){return this.__nestScope(new c(this,this.__currentScope,e))}},__nestWithScope:{value:function(e){return this.__nestScope(new l(this,this.__currentScope,e))}},__nestClassScope:{value:function(e){return this.__nestScope(new f(this,this.__currentScope,e))}},__nestSwitchScope:{value:function(e){return this.__nestScope(new d(this,this.__currentScope,e))}},__nestModuleScope:{value:function(e){return this.__nestScope(new p(this,this.__currentScope,e))}},__nestTDZScope:{value:function(e){return this.__nestScope(new g(this,this.__currentScope,e))}},__nestFunctionExpressionNameScope:{value:function(e){return this.__nestScope(new v(this,this.__currentScope,e))}},__isES6:{value:function(){return this.__options.ecmaVersion>=6}}}),e}();t.exports=_},{"./scope":26,assert:3,"es6-weak-map":83}],26:[function(e,t,n){"use strict";function r(e,t,n,r){var i,o,a,s,u;if(e.upper&&e.upper.isStrict)return!0;if(t.type===p.ArrowFunctionExpression)return!0;if(n)return!0;if("class"===e.type||"module"===e.type)return!0;if("block"===e.type||"switch"===e.type)return!1;if("function"===e.type)i="Program"===t.type?t:t.body;else{if("global"!==e.type)return!1;i=t}if(r){for(o=0,a=i.body.length;a>o&&(s=i.body[o],"DirectiveStatement"===s.type);++o)if('"use strict"'===s.raw||"'use strict'"===s.raw)return!0}else for(o=0,a=i.body.length;a>o&&(s=i.body[o],s.type===p.ExpressionStatement)&&(u=s.expression,u.type===p.Literal&&"string"==typeof u.value);++o)if(null!=u.raw){if('"use strict"'===u.raw||"'use strict'"===u.raw)return!0}else if("use strict"===u.value)return!0;return!1}function i(e,t){var n;e.scopes.push(t),n=e.__nodeToScope.get(t.block),n?n.push(t):e.__nodeToScope.set(t.block,[t])}function o(e){return e.type===h.ClassName||e.type===h.Variable&&"var"!==e.parent.kind}var a=function(e){return e&&e.__esModule?e["default"]:e},s=function y(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:y(i,t,n)}if("value"in r&&r.writable)return r.value;var o=r.get;return void 0===o?void 0:o.call(n)},u=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},c=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(n,"__esModule",{value:!0});var p=e("estraverse").Syntax,f=a(e("es6-map")),d=a(e("./reference")),h=a(e("./variable")),m=a(e("./definition")),g=a(e("assert")),v=function(){function e(t,n,o,a,s){l(this,e),this.type=n,this.set=new f,this.taints=new f,this.dynamic="global"===this.type||"with"===this.type,this.block=a,this.through=[],this.variables=[],this.references=[],this.variableScope="global"===this.type||"function"===this.type||"module"===this.type?this:o.variableScope,this.functionExpressionScope=!1,this.directCallToEvalScope=!1,this.thisFound=!1,this.__left=[],this.upper=o,this.isStrict=r(this,a,s,t.__useDirective()),this.childScopes=[],this.upper&&this.upper.childScopes.push(this),i(t,this)}return c(e,{__shouldStaticallyClose:{value:function(e){return!this.dynamic||e.__isOptimistic()}},__shouldStaticallyCloseForGlobal:{value:function(e){var t=e.identifier.name;if(!this.set.has(t))return!1;var n=this.set.get(t),r=n.defs;return r.length>0&&r.every(o)}},__staticCloseRef:{value:function(e){this.__resolve(e)||this.__delegateToUpperScope(e)}},__dynamicCloseRef:{value:function(e){var t=this;do t.through.push(e),t=t.upper;while(t)}},__globalCloseRef:{value:function(e){this.__shouldStaticallyCloseForGlobal(e)?this.__staticCloseRef(e):this.__dynamicCloseRef(e)}},__close:{value:function(e){var t;t=this.__shouldStaticallyClose(e)?this.__staticCloseRef:"global"!==this.type?this.__dynamicCloseRef:this.__globalCloseRef;for(var n=0,r=this.__left.length;r>n;++n){var i=this.__left[n];t.call(this,i)}return this.__left=null,this.upper}},__resolve:{value:function(e){var t,n;return n=e.identifier.name,this.set.has(n)?(t=this.set.get(n),t.references.push(e),t.stack=t.stack&&e.from.variableScope===this.variableScope,e.tainted&&(t.tainted=!0,this.taints.set(t.name,!0)),e.resolved=t,!0):!1}},__delegateToUpperScope:{value:function(e){this.upper&&this.upper.__left.push(e),this.through.push(e)}},__defineGeneric:{value:function(e,t,n,r,i){var o;o=t.get(e),o||(o=new h(e,this),t.set(e,o),n.push(o)),i&&o.defs.push(i),r&&o.identifiers.push(r)}},__define:{value:function(e,t){e&&e.type===p.Identifier&&this.__defineGeneric(e.name,this.set,this.variables,e,t)}},__referencing:{value:function(e,t,n,r,i,o){if(e&&e.type===p.Identifier&&"super"!==e.name){var a=new d(e,this,t||d.READ,n,r,!!i,!!o);this.references.push(a),this.__left.push(a)}}},__detectEval:{value:function(){var e;e=this,this.directCallToEvalScope=!0;do e.dynamic=!0,e=e.upper;while(e)}},__detectThis:{value:function(){this.thisFound=!0}},__isClosed:{value:function(){return null===this.__left}},resolve:{value:function(e){var t,n,r;for(g(this.__isClosed(),"Scope should be closed."),g(e.type===p.Identifier,"Target should be identifier."),n=0,r=this.references.length;r>n;++n)if(t=this.references[n],t.identifier===e)return t;return null}},isStatic:{value:function(){return!this.dynamic
}},isArgumentsMaterialized:{value:function(){return!0}},isThisMaterialized:{value:function(){return!0}},isUsedName:{value:function(e){if(this.set.has(e))return!0;for(var t=0,n=this.through.length;n>t;++t)if(this.through[t].identifier.name===e)return!0;return!1}}}),e}();n["default"]=v,n.GlobalScope=function(e){function t(e,n){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"global",null,n,!1),this.implicit={set:new f,variables:[],left:[]}}return u(t,e),c(t,{__close:{value:function(e){for(var n=[],r=0,i=this.__left.length;i>r;++r){var o=this.__left[r];o.__maybeImplicitGlobal&&!this.set.has(o.identifier.name)&&n.push(o.__maybeImplicitGlobal)}for(var r=0,i=n.length;i>r;++r){var a=n[r];this.__defineImplicit(a.pattern,new m(h.ImplicitGlobalVariable,a.pattern,a.node,null,null,null))}return this.implicit.left=this.__left,s(Object.getPrototypeOf(t.prototype),"__close",this).call(this,e)}},__defineImplicit:{value:function(e,t){e&&e.type===p.Identifier&&this.__defineGeneric(e.name,this.implicit.set,this.implicit.variables,e,t)}}}),t}(v),n.ModuleScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"module",n,r,!1)}return u(t,e),t}(v),n.FunctionExpressionNameScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"function-expression-name",n,r,!1),this.__define(r.id,new m(h.FunctionName,r.id,r,null,null,null)),this.functionExpressionScope=!0}return u(t,e),t}(v),n.CatchScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"catch",n,r,!1)}return u(t,e),t}(v),n.WithScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"with",n,r,!1)}return u(t,e),c(t,{__close:{value:function(e){if(this.__shouldStaticallyClose(e))return s(Object.getPrototypeOf(t.prototype),"__close",this).call(this,e);for(var n=0,r=this.__left.length;r>n;++n){var i=this.__left[n];i.tainted=!0,this.__delegateToUpperScope(i)}return this.__left=null,this.upper}}}),t}(v),n.TDZScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"TDZ",n,r,!1)}return u(t,e),t}(v),n.BlockScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"block",n,r,!1)}return u(t,e),t}(v),n.SwitchScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"switch",n,r,!1)}return u(t,e),t}(v),n.FunctionScope=function(e){function t(e,n,r,i){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"function",n,r,i),this.block.type!==p.ArrowFunctionExpression&&this.__defineArguments()}return u(t,e),c(t,{isArgumentsMaterialized:{value:function(){if(this.block.type===p.ArrowFunctionExpression)return!1;if(!this.isStatic())return!0;var e=this.set.get("arguments");return g(e,"Always have arguments variable."),e.tainted||0!==e.references.length}},isThisMaterialized:{value:function(){return this.isStatic()?this.thisFound:!0}},__defineArguments:{value:function(){this.__defineGeneric("arguments",this.set,this.variables,null,null),this.taints.set("arguments",!0)}}}),t}(v),n.ForScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"for",n,r,!1)}return u(t,e),t}(v),n.ClassScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"class",n,r,!1)}return u(t,e),t}(v)},{"./definition":21,"./reference":23,"./variable":27,assert:3,"es6-map":28,estraverse:128}],27:[function(e,t){"use strict";var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function i(e,t){n(this,i),this.name=e,this.identifiers=[],this.references=[],this.defs=[],this.tainted=!1,this.stack=!0,this.scope=t};t.exports=r,r.CatchClause="CatchClause",r.Parameter="Parameter",r.FunctionName="FunctionName",r.ClassName="ClassName",r.Variable="Variable",r.ImportBinding="ImportBinding",r.TDZ="TDZ",r.ImplicitGlobalVariable="ImplicitGlobalVariable"},{}],28:[function(e,t){"use strict";t.exports=e("./is-implemented")()?Map:e("./polyfill")},{"./is-implemented":29,"./polyfill":82}],29:[function(e,t){"use strict";t.exports=function(){var e,t,n;if("function"!=typeof Map)return!1;try{e=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(r){return!1}return 3!==e.size?!1:"function"!=typeof e.clear?!1:"function"!=typeof e.delete?!1:"function"!=typeof e.entries?!1:"function"!=typeof e.forEach?!1:"function"!=typeof e.get?!1:"function"!=typeof e.has?!1:"function"!=typeof e.keys?!1:"function"!=typeof e.set?!1:"function"!=typeof e.values?!1:(t=e.entries(),n=t.next(),n.done!==!1?!1:n.value?"raz"!==n.value[0]?!1:"one"!==n.value[1]?!1:!0:!1)}},{}],30:[function(e,t){"use strict";t.exports=function(){return"undefined"==typeof Map?!1:"[object Map]"===Object.prototype.toString.call(Map.prototype)}()},{}],31:[function(e,t){"use strict";t.exports=e("es5-ext/object/primitive-set")("key","value","key+value")},{"es5-ext/object/primitive-set":56}],32:[function(e,t){"use strict";var n,r=e("es5-ext/object/set-prototype-of"),i=e("d"),o=e("es6-iterator"),a=e("es6-symbol").toStringTag,s=e("./iterator-kinds"),u=Object.defineProperties,c=o.prototype._unBind;n=t.exports=function(e,t){return this instanceof n?(o.call(this,e.__mapKeysData__,e),t&&s[t]||(t="key+value"),u(this,{__kind__:i("",t),__values__:i("w",e.__mapValuesData__)}),void 0):new n(e,t)},r&&r(n,o),n.prototype=Object.create(o.prototype,{constructor:i(n),_resolve:i(function(e){return"value"===this.__kind__?this.__values__[e]:"key"===this.__kind__?this.__list__[e]:[this.__list__[e],this.__values__[e]]}),_unBind:i(function(){this.__values__=null,c.call(this)}),toString:i(function(){return"[object Map Iterator]"})}),Object.defineProperty(n.prototype,a,i("c","Map Iterator"))},{"./iterator-kinds":31,d:34,"es5-ext/object/set-prototype-of":57,"es6-iterator":69,"es6-symbol":78}],33:[function(e,t){"use strict";var n,r=e("es5-ext/object/copy"),i=e("es5-ext/object/map"),o=e("es5-ext/object/valid-callable"),a=e("es5-ext/object/valid-value"),s=Function.prototype.bind,u=Object.defineProperty,c=Object.prototype.hasOwnProperty;n=function(e,t,n){var i,l=a(t)&&o(t.value);return i=r(t),delete i.writable,delete i.value,i.get=function(){return c.call(this,e)?l:(t.value=s.call(l,null==n?this:this[n]),u(this,e,t),this[e])},i},t.exports=function(e){var t=arguments[1];return i(e,function(e,r){return n(r,e,t)})}},{"es5-ext/object/copy":46,"es5-ext/object/map":54,"es5-ext/object/valid-callable":60,"es5-ext/object/valid-value":61}],34:[function(e,t){"use strict";var n,r=e("es5-ext/object/assign"),i=e("es5-ext/object/normalize-options"),o=e("es5-ext/object/is-callable"),a=e("es5-ext/string/#/contains");n=t.exports=function(e,t){var n,o,s,u,c;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],null==e?(n=s=!0,o=!1):(n=a.call(e,"c"),o=a.call(e,"e"),s=a.call(e,"w")),c={value:t,configurable:n,enumerable:o,writable:s},u?r(i(u),c):c},n.gs=function(e,t,n){var s,u,c,l;return"string"!=typeof e?(c=n,n=t,t=e,e=null):c=arguments[3],null==t?t=void 0:o(t)?null==n?n=void 0:o(n)||(c=n,n=void 0):(c=t,t=n=void 0),null==e?(s=!0,u=!1):(s=a.call(e,"c"),u=a.call(e,"e")),l={get:t,set:n,configurable:s,enumerable:u},c?r(i(c),l):l}},{"es5-ext/object/assign":43,"es5-ext/object/is-callable":49,"es5-ext/object/normalize-options":55,"es5-ext/string/#/contains":62}],35:[function(e,t){"use strict";var n=e("../../object/valid-value");t.exports=function(){return n(this).length=0,this}},{"../../object/valid-value":61}],36:[function(e,t){"use strict";var n=e("../../number/to-pos-integer"),r=e("../../object/valid-value"),i=Array.prototype.indexOf,o=Object.prototype.hasOwnProperty,a=Math.abs,s=Math.floor;t.exports=function(e){var t,u,c,l;if(e===e)return i.apply(this,arguments);for(u=n(r(this).length),c=arguments[1],c=isNaN(c)?0:c>=0?s(c):n(this.length)-s(a(c)),t=c;u>t;++t)if(o.call(this,t)&&(l=this[t],l!==l))return t;return-1}},{"../../number/to-pos-integer":41,"../../object/valid-value":61}],37:[function(e,t){"use strict";t.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":38,"./shim":39}],38:[function(e,t){"use strict";t.exports=function(){var e=Math.sign;return"function"!=typeof e?!1:1===e(10)&&-1===e(-20)}},{}],39:[function(e,t){"use strict";t.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},{}],40:[function(e,t){"use strict";var n=e("../math/sign"),r=Math.abs,i=Math.floor;t.exports=function(e){return isNaN(e)?0:(e=Number(e),0!==e&&isFinite(e)?n(e)*i(r(e)):e)}},{"../math/sign":37}],41:[function(e,t){"use strict";var n=e("./to-integer"),r=Math.max;t.exports=function(e){return r(0,n(e))}},{"./to-integer":40}],42:[function(e,t){"use strict";var n=e("./is-callable"),r=e("./valid-callable"),i=e("./valid-value"),o=Function.prototype.call,a=Object.keys,s=Object.prototype.propertyIsEnumerable;t.exports=function(e,t){return function(u,c){var l,p=arguments[2],f=arguments[3];return u=Object(i(u)),r(c),l=a(u),f&&l.sort(n(f)?f.bind(u):void 0),l[e](function(e,n){return s.call(u,e)?o.call(c,p,u[e],e,u,n):t})}}},{"./is-callable":49,"./valid-callable":60,"./valid-value":61}],43:[function(e,t){"use strict";t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":44,"./shim":45}],44:[function(e,t){"use strict";t.exports=function(){var e,t=Object.assign;return"function"!=typeof t?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),"razdwatrzy"===e.foo+e.bar+e.trzy)}},{}],45:[function(e,t){"use strict";var n=e("../keys"),r=e("../valid-value"),i=Math.max;t.exports=function(e,t){var o,a,s,u=i(arguments.length,2);for(e=Object(r(e)),s=function(n){try{e[n]=t[n]}catch(r){o||(o=r)}},a=1;u>a;++a)t=arguments[a],n(t).forEach(s);if(void 0!==o)throw o;return e}},{"../keys":51,"../valid-value":61}],46:[function(e,t){"use strict";var n=e("./assign"),r=e("./valid-value");t.exports=function(e){var t=Object(r(e));return t!==e?t:n({},e)}},{"./assign":43,"./valid-value":61}],47:[function(e,t){"use strict";var n,r=Object.create;e("./set-prototype-of/is-implemented")()||(n=e("./set-prototype-of/shim")),t.exports=function(){var e,t,i;return n?1!==n.level?r:(e={},t={},i={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){return"__proto__"===e?(t[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0},void 0):(t[e]=i,void 0)}),Object.defineProperties(e,t),Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(t,n){return r(null===t?e:t,n)}):r}()},{"./set-prototype-of/is-implemented":58,"./set-prototype-of/shim":59}],48:[function(e,t){"use strict";t.exports=e("./_iterate")("forEach")},{"./_iterate":42}],49:[function(e,t){"use strict";t.exports=function(e){return"function"==typeof e}},{}],50:[function(e,t){"use strict";var n={"function":!0,object:!0};t.exports=function(e){return null!=e&&n[typeof e]||!1}},{}],51:[function(e,t){"use strict";t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":52,"./shim":53}],52:[function(e,t){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],53:[function(e,t){"use strict";var n=Object.keys;t.exports=function(e){return n(null==e?e:Object(e))}},{}],54:[function(e,t){"use strict";var n=e("./valid-callable"),r=e("./for-each"),i=Function.prototype.call;t.exports=function(e,t){var o={},a=arguments[2];return n(t),r(e,function(e,n,r,s){o[n]=i.call(t,a,e,n,r,s)}),o}},{"./for-each":48,"./valid-callable":60}],55:[function(e,t){"use strict";var n=Array.prototype.forEach,r=Object.create,i=function(e,t){var n;for(n in e)t[n]=e[n]};t.exports=function(){var e=r(null);return n.call(arguments,function(t){null!=t&&i(Object(t),e)}),e}},{}],56:[function(e,t){"use strict";var n=Array.prototype.forEach,r=Object.create;t.exports=function(){var e=r(null);return n.call(arguments,function(t){e[t]=!0}),e}},{}],57:[function(e,t){"use strict";t.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":58,"./shim":59}],58:[function(e,t){"use strict";var n=Object.create,r=Object.getPrototypeOf,i={};t.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||n;return"function"!=typeof e?!1:r(e(t(null),i))===i}},{}],59:[function(e,t){"use strict";var n,r=e("../is-object"),i=e("../valid-value"),o=Object.prototype.isPrototypeOf,a=Object.defineProperty,s={configurable:!0,enumerable:!1,writable:!0,value:void 0};n=function(e,t){if(i(e),null===t||r(t))return e;throw new TypeError("Prototype must be null or an object")},t.exports=function(e){var t,r;return e?(2===e.level?e.set?(r=e.set,t=function(e,t){return r.call(n(e,t),t),e}):t=function(e,t){return n(e,t).__proto__=t,e}:t=function i(e,t){var r;return n(e,t),r=o.call(i.nullPolyfill,e),r&&delete i.nullPolyfill.__proto__,null===t&&(t=i.nullPolyfill),e.__proto__=t,r&&a(i.nullPolyfill,"__proto__",s),e},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{e=r.set,e.call(t,n)}catch(i){}if(Object.getPrototypeOf(t)===n)return{set:e,level:2}}return t.__proto__=n,Object.getPrototypeOf(t)===n?{level:2}:(t={},t.__proto__=n,Object.getPrototypeOf(t)===n?{level:1}:!1)}()),e("../create")},{"../create":47,"../is-object":50,"../valid-value":61}],60:[function(e,t){"use strict";t.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},{}],61:[function(e,t){"use strict";t.exports=function(e){if(null==e)throw new TypeError("Cannot use null or undefined");return e}},{}],62:[function(e,t){"use strict";t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":63,"./shim":64}],63:[function(e,t){"use strict";var n="razdwatrzy";t.exports=function(){return"function"!=typeof n.contains?!1:n.contains("dwa")===!0&&n.contains("foo")===!1}},{}],64:[function(e,t){"use strict";var n=String.prototype.indexOf;t.exports=function(e){return n.call(this,e,arguments[1])>-1}},{}],65:[function(e,t){"use strict";var n=Object.prototype.toString,r=n.call("");t.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||n.call(e)===r)||!1}},{}],66:[function(e,t){"use strict";var n,r=e("es5-ext/object/set-prototype-of"),i=e("es5-ext/string/#/contains"),o=e("d"),a=e("./"),s=Object.defineProperty;n=t.exports=function(e,t){return this instanceof n?(a.call(this,e),t=t?i.call(t,"key+value")?"key+value":i.call(t,"key")?"key":"value":"value",s(this,"__kind__",o("",t)),void 0):new n(e,t)},r&&r(n,a),n.prototype=Object.create(a.prototype,{constructor:o(n),_resolve:o(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e}),toString:o(function(){return"[object Array Iterator]"})})},{"./":69,d:34,"es5-ext/object/set-prototype-of":57,"es5-ext/string/#/contains":62}],67:[function(e,t){"use strict";var n=e("es5-ext/object/valid-callable"),r=e("es5-ext/string/is-string"),i=e("./get"),o=Array.isArray,a=Function.prototype.call;t.exports=function(e,t){var s,u,c,l,p,f,d,h,m=arguments[2];if(o(e)?s="array":r(e)?s="string":e=i(e),n(t),c=function(){l=!0},"array"===s)return e.some(function(e){return a.call(t,m,e,c),l?!0:void 0}),void 0;if("string"!==s)for(u=e.next();!u.done;){if(a.call(t,m,u.value,c),l)return;u=e.next()}else for(f=e.length,p=0;f>p&&(d=e[p],f>p+1&&(h=d.charCodeAt(0),h>=55296&&56319>=h&&(d+=e[++p])),a.call(t,m,d,c),!l);++p);}},{"./get":68,"es5-ext/object/valid-callable":60,"es5-ext/string/is-string":65}],68:[function(e,t){"use strict";var n=e("es5-ext/string/is-string"),r=e("./array"),i=e("./string"),o=e("./valid-iterable"),a=e("es6-symbol").iterator;t.exports=function(e){return"function"==typeof o(e)[a]?e[a]():n(e)?new i(e):new r(e)}},{"./array":66,"./string":76,"./valid-iterable":77,"es5-ext/string/is-string":65,"es6-symbol":71}],69:[function(e,t){"use strict";var n,r=e("es5-ext/array/#/clear"),i=e("es5-ext/object/assign"),o=e("es5-ext/object/valid-callable"),a=e("es5-ext/object/valid-value"),s=e("d"),u=e("d/auto-bind"),c=e("es6-symbol"),l=Object.defineProperty,p=Object.defineProperties;t.exports=n=function(e,t){return this instanceof n?(p(this,{__list__:s("w",a(e)),__context__:s("w",t),__nextIndex__:s("w",0)}),t&&(o(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear)),void 0):new n(e,t)},p(n.prototype,i({constructor:s(n),_next:s(function(){var e;if(this.__list__)return this.__redo__&&(e=this.__redo__.shift(),void 0!==e)?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:(this._unBind(),void 0)}),next:s(function(){return this._createResult(this._next())}),_createResult:s(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:s(function(e){return this.__list__[e]}),_unBind:s(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:s(function(){return"[object Iterator]"})},u({_onAdd:s(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return l(this,"__redo__",s("c",[e])),void 0;this.__redo__.forEach(function(t,n){t>=e&&(this.__redo__[n]=++t)},this),this.__redo__.push(e)}}),_onDelete:s(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),-1!==t&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,n){t>e&&(this.__redo__[n]=--t)},this)))}),_onClear:s(function(){this.__redo__&&r.call(this.__redo__),this.__nextIndex__=0})}))),l(n.prototype,c.iterator,s(function(){return this})),l(n.prototype,c.toStringTag,s("","Iterator"))},{d:34,"d/auto-bind":33,"es5-ext/array/#/clear":35,"es5-ext/object/assign":43,"es5-ext/object/valid-callable":60,"es5-ext/object/valid-value":61,"es6-symbol":71}],70:[function(e,t){"use strict";var n=e("es5-ext/string/is-string"),r=e("es6-symbol").iterator,i=Array.isArray;t.exports=function(e){return null==e?!1:i(e)?!0:n(e)?!0:"function"==typeof e[r]}},{"es5-ext/string/is-string":65,"es6-symbol":71}],71:[function(e,t){"use strict";t.exports=e("./is-implemented")()?Symbol:e("./polyfill")},{"./is-implemented":72,"./polyfill":74}],72:[function(e,t){"use strict";t.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(t){return!1}return"symbol"==typeof Symbol.iterator?!0:"object"!=typeof Symbol.isConcatSpreadable?!1:"object"!=typeof Symbol.iterator?!1:"object"!=typeof Symbol.toPrimitive?!1:"object"!=typeof Symbol.toStringTag?!1:"object"!=typeof Symbol.unscopables?!1:!0}},{}],73:[function(e,t){"use strict";t.exports=function(e){return e&&("symbol"==typeof e||"Symbol"===e["@@toStringTag"])||!1}},{}],74:[function(e,t){"use strict";var n,r,i=e("d"),o=e("./validate-symbol"),a=Object.create,s=Object.defineProperties,u=Object.defineProperty,c=Object.prototype,l=a(null),p=function(){var e=a(null);return function(t){for(var n,r=0;e[t+(r||"")];)++r;return t+=r||"",e[t]=!0,n="@@"+t,u(c,n,i.gs(null,function(e){u(this,n,i(e))})),n}}();r=function f(e){if(this instanceof r)throw new TypeError("TypeError: Symbol is not a constructor");return f(e)},t.exports=n=function d(e){var t;if(this instanceof d)throw new TypeError("TypeError: Symbol is not a constructor");return t=a(r.prototype),e=void 0===e?"":String(e),s(t,{__description__:i("",e),__name__:i("",p(e))})},s(n,{"for":i(function(e){return l[e]?l[e]:l[e]=n(String(e))}),keyFor:i(function(e){var t;o(e);for(t in l)if(l[t]===e)return t}),hasInstance:i("",n("hasInstance")),isConcatSpreadable:i("",n("isConcatSpreadable")),iterator:i("",n("iterator")),match:i("",n("match")),replace:i("",n("replace")),search:i("",n("search")),species:i("",n("species")),split:i("",n("split")),toPrimitive:i("",n("toPrimitive")),toStringTag:i("",n("toStringTag")),unscopables:i("",n("unscopables"))}),s(r.prototype,{constructor:i(n),toString:i("",function(){return this.__name__})}),s(n.prototype,{toString:i(function(){return"Symbol ("+o(this).__description__+")"}),valueOf:i(function(){return o(this)})}),u(n.prototype,n.toPrimitive,i("",function(){return o(this)})),u(n.prototype,n.toStringTag,i("c","Symbol")),u(r.prototype,n.toPrimitive,i("c",n.prototype[n.toPrimitive])),u(r.prototype,n.toStringTag,i("c",n.prototype[n.toStringTag]))},{"./validate-symbol":75,d:34}],75:[function(e,t){"use strict";var n=e("./is-symbol");t.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},{"./is-symbol":73}],76:[function(e,t){"use strict";var n,r=e("es5-ext/object/set-prototype-of"),i=e("d"),o=e("./"),a=Object.defineProperty;n=t.exports=function(e){return this instanceof n?(e=String(e),o.call(this,e),a(this,"__length__",i("",e.length)),void 0):new n(e)},r&&r(n,o),n.prototype=Object.create(o.prototype,{constructor:i(n),_next:i(function(){return this.__list__?this.__nextIndex__<this.__length__?this.__nextIndex__++:(this._unBind(),void 0):void 0}),_resolve:i(function(e){var t,n=this.__list__[e];return this.__nextIndex__===this.__length__?n:(t=n.charCodeAt(0),t>=55296&&56319>=t?n+this.__list__[this.__nextIndex__++]:n)}),toString:i(function(){return"[object String Iterator]"})})},{"./":69,d:34,"es5-ext/object/set-prototype-of":57}],77:[function(e,t){"use strict";var n=e("./is-iterable");t.exports=function(e){if(!n(e))throw new TypeError(e+" is not iterable");return e}},{"./is-iterable":70}],78:[function(e,t,n){arguments[4][71][0].apply(n,arguments)},{"./is-implemented":79,"./polyfill":80,dup:71}],79:[function(e,t){"use strict";t.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(t){return!1}return"symbol"==typeof Symbol.iterator?!0:"object"!=typeof Symbol.isConcatSpreadable?!1:"object"!=typeof Symbol.isRegExp?!1:"object"!=typeof Symbol.iterator?!1:"object"!=typeof Symbol.toPrimitive?!1:"object"!=typeof Symbol.toStringTag?!1:"object"!=typeof Symbol.unscopables?!1:!0}},{}],80:[function(e,t){"use strict";var n,r,i=e("d"),o=Object.create,a=Object.defineProperties;n=function(){var e=o(null);return function(t){for(var n=0;e[t+(n||"")];)++n;return t+=n||"",e[t]=!0,"@@"+t}}(),t.exports=r=function(e){var t;if(this instanceof r)throw new TypeError("TypeError: Symbol is not a constructor");return t=o(r.prototype),e=void 0===e?"":String(e),a(t,{__description__:i("",e),__name__:i("",n(e))})},Object.defineProperties(r,{create:i("",r("create")),hasInstance:i("",r("hasInstance")),isConcatSpreadable:i("",r("isConcatSpreadable")),isRegExp:i("",r("isRegExp")),iterator:i("",r("iterator")),toPrimitive:i("",r("toPrimitive")),toStringTag:i("",r("toStringTag")),unscopables:i("",r("unscopables"))}),a(r.prototype,{properToString:i(function(){return"Symbol ("+this.__description__+")"}),toString:i("",function(){return this.__name__})}),Object.defineProperty(r.prototype,r.toPrimitive,i("",function(){throw new TypeError("Conversion of symbol objects is not allowed")})),Object.defineProperty(r.prototype,r.toStringTag,i("c","Symbol"))},{d:34}],81:[function(e,t,n){"use strict";var r,i,o,a,s,u,c,l=e("d"),p=e("es5-ext/object/valid-callable"),f=Function.prototype.apply,d=Function.prototype.call,h=Object.create,m=Object.defineProperty,g=Object.defineProperties,v=Object.prototype.hasOwnProperty,y={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n;return p(t),v.call(this,"__ee__")?n=this.__ee__:(n=y.value=h(null),m(this,"__ee__",y),y.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},i=function(e,t){var n,i;return p(t),i=this,r.call(this,e,n=function(){o.call(i,e,n),f.call(t,this,arguments)}),n.__eeOnceListener__=t,this},o=function(e,t){var n,r,i,o;if(p(t),!v.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if(r=n[e],"object"==typeof r)for(o=0;i=r[o];++o)(i===t||i.__eeOnceListener__===t)&&(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else(r===t||r.__eeOnceListener__===t)&&delete n[e];return this},a=function(e){var t,n,r,i,o;if(v.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),t=1;n>t;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)f.call(r,this,o)}else switch(arguments.length){case 1:d.call(i,this);break;case 2:d.call(i,this,arguments[1]);break;case 3:d.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;n>t;++t)o[t-1]=arguments[t];f.call(i,this,o)}},s={on:r,once:i,off:o,emit:a},u={on:l(r),once:l(i),off:l(o),emit:l(a)},c=g({},u),t.exports=n=function(e){return null==e?h(c):g(Object(e),u)},n.methods=s},{d:34,"es5-ext/object/valid-callable":60}],82:[function(e,t){"use strict";var n,r=e("es5-ext/array/#/clear"),i=e("es5-ext/array/#/e-index-of"),o=e("es5-ext/object/set-prototype-of"),a=e("es5-ext/object/valid-callable"),s=e("es5-ext/object/valid-value"),u=e("d"),c=e("event-emitter"),l=e("es6-symbol"),p=e("es6-iterator/valid-iterable"),f=e("es6-iterator/for-of"),d=e("./lib/iterator"),h=e("./is-native-implemented"),m=Function.prototype.call,g=Object.defineProperties;t.exports=n=function(){var e,t,r=arguments[0];if(!(this instanceof n))return new n(r);if(void 0!==this.__mapKeysData__)throw new TypeError(this+" cannot be reinitialized");null!=r&&p(r),g(this,{__mapKeysData__:u("c",e=[]),__mapValuesData__:u("c",t=[])}),r&&f(r,function(n){var r=s(n)[0];n=n[1],-1===i.call(e,r)&&(e.push(r),t.push(n))},this)},h&&(o&&o(n,Map),n.prototype=Object.create(Map.prototype,{constructor:u(n)})),c(g(n.prototype,{clear:u(function(){this.__mapKeysData__.length&&(r.call(this.__mapKeysData__),r.call(this.__mapValuesData__),this.emit("_clear"))}),"delete":u(function(e){var t=i.call(this.__mapKeysData__,e);return-1===t?!1:(this.__mapKeysData__.splice(t,1),this.__mapValuesData__.splice(t,1),this.emit("_delete",t,e),!0)}),entries:u(function(){return new d(this,"key+value")}),forEach:u(function(e){var t,n,r=arguments[1];for(a(e),t=this.entries(),n=t._next();void 0!==n;)m.call(e,r,this.__mapValuesData__[n],this.__mapKeysData__[n],this),n=t._next()}),get:u(function(e){var t=i.call(this.__mapKeysData__,e);if(-1!==t)return this.__mapValuesData__[t]}),has:u(function(e){return-1!==i.call(this.__mapKeysData__,e)}),keys:u(function(){return new d(this,"key")}),set:u(function(e,t){var n,r=i.call(this.__mapKeysData__,e);return-1===r&&(r=this.__mapKeysData__.push(e)-1,n=!0),this.__mapValuesData__[r]=t,n&&this.emit("_add",r,e),this}),size:u.gs(function(){return this.__mapKeysData__.length}),values:u(function(){return new d(this,"value")}),toString:u(function(){return"[object Map]"})})),Object.defineProperty(n.prototype,l.iterator,u(function(){return this.entries()})),Object.defineProperty(n.prototype,l.toStringTag,u("c","Map"))},{"./is-native-implemented":30,"./lib/iterator":32,d:34,"es5-ext/array/#/clear":35,"es5-ext/array/#/e-index-of":36,"es5-ext/object/set-prototype-of":57,"es5-ext/object/valid-callable":60,"es5-ext/object/valid-value":61,"es6-iterator/for-of":67,"es6-iterator/valid-iterable":77,"es6-symbol":78,"event-emitter":81}],83:[function(e,t){"use strict";t.exports=e("./is-implemented")()?WeakMap:e("./polyfill")},{"./is-implemented":84,"./polyfill":125}],84:[function(e,t){"use strict";t.exports=function(){var e;return"function"!=typeof WeakMap?!1:(e=new WeakMap,"function"!=typeof e.set?!1:e.set({},1)!==e?!1:"function"!=typeof e.clear?!1:"function"!=typeof e.delete?!1:"function"!=typeof e.has?!1:!0)}},{}],85:[function(e,t){"use strict";t.exports=function(){return"undefined"==typeof WeakMap?!1:"[object WeakMap]"===Object.prototype.toString.call(WeakMap.prototype)}()},{}],86:[function(e,t,n){arguments[4][33][0].apply(n,arguments)},{dup:33,"es5-ext/object/copy":93,"es5-ext/object/map":101,"es5-ext/object/valid-callable":106,"es5-ext/object/valid-value":108}],87:[function(e,t,n){arguments[4][34][0].apply(n,arguments)},{dup:34,"es5-ext/object/assign":90,"es5-ext/object/is-callable":96,"es5-ext/object/normalize-options":102,"es5-ext/string/#/contains":109}],88:[function(e,t,n){arguments[4][35][0].apply(n,arguments)},{"../../object/valid-value":108,dup:35}],89:[function(e,t,n){arguments[4][42][0].apply(n,arguments)},{"./is-callable":96,"./valid-callable":106,"./valid-value":108,dup:42}],90:[function(e,t,n){arguments[4][43][0].apply(n,arguments)},{"./is-implemented":91,"./shim":92,dup:43}],91:[function(e,t,n){arguments[4][44][0].apply(n,arguments)},{dup:44}],92:[function(e,t,n){arguments[4][45][0].apply(n,arguments)},{"../keys":98,"../valid-value":108,dup:45}],93:[function(e,t,n){arguments[4][46][0].apply(n,arguments)},{"./assign":90,"./valid-value":108,dup:46}],94:[function(e,t,n){arguments[4][47][0].apply(n,arguments)},{"./set-prototype-of/is-implemented":104,"./set-prototype-of/shim":105,dup:47}],95:[function(e,t,n){arguments[4][48][0].apply(n,arguments)},{"./_iterate":89,dup:48}],96:[function(e,t,n){arguments[4][49][0].apply(n,arguments)},{dup:49}],97:[function(e,t,n){arguments[4][50][0].apply(n,arguments)},{dup:50}],98:[function(e,t,n){arguments[4][51][0].apply(n,arguments)},{"./is-implemented":99,"./shim":100,dup:51}],99:[function(e,t,n){arguments[4][52][0].apply(n,arguments)},{dup:52}],100:[function(e,t,n){arguments[4][53][0].apply(n,arguments)},{dup:53}],101:[function(e,t,n){arguments[4][54][0].apply(n,arguments)},{"./for-each":95,"./valid-callable":106,dup:54}],102:[function(e,t,n){arguments[4][55][0].apply(n,arguments)},{dup:55}],103:[function(e,t,n){arguments[4][57][0].apply(n,arguments)},{"./is-implemented":104,"./shim":105,dup:57}],104:[function(e,t,n){arguments[4][58][0].apply(n,arguments)},{dup:58}],105:[function(e,t,n){arguments[4][59][0].apply(n,arguments)},{"../create":94,"../is-object":97,"../valid-value":108,dup:59}],106:[function(e,t,n){arguments[4][60][0].apply(n,arguments)},{dup:60}],107:[function(e,t){"use strict";var n=e("./is-object");t.exports=function(e){if(!n(e))throw new TypeError(e+" is not an Object");return e}},{"./is-object":97}],108:[function(e,t,n){arguments[4][61][0].apply(n,arguments)},{dup:61}],109:[function(e,t,n){arguments[4][62][0].apply(n,arguments)},{"./is-implemented":110,"./shim":111,dup:62}],110:[function(e,t,n){arguments[4][63][0].apply(n,arguments)},{dup:63}],111:[function(e,t,n){arguments[4][64][0].apply(n,arguments)},{dup:64}],112:[function(e,t,n){arguments[4][65][0].apply(n,arguments)},{dup:65}],113:[function(e,t,n){arguments[4][66][0].apply(n,arguments)},{"./":116,d:87,dup:66,"es5-ext/object/set-prototype-of":103,"es5-ext/string/#/contains":109}],114:[function(e,t,n){arguments[4][67][0].apply(n,arguments)},{"./get":115,dup:67,"es5-ext/object/valid-callable":106,"es5-ext/string/is-string":112}],115:[function(e,t,n){arguments[4][68][0].apply(n,arguments)},{"./array":113,"./string":118,"./valid-iterable":119,dup:68,"es5-ext/string/is-string":112,"es6-symbol":120}],116:[function(e,t,n){arguments[4][69][0].apply(n,arguments)},{d:87,"d/auto-bind":86,dup:69,"es5-ext/array/#/clear":88,"es5-ext/object/assign":90,"es5-ext/object/valid-callable":106,"es5-ext/object/valid-value":108,"es6-symbol":120}],117:[function(e,t,n){arguments[4][70][0].apply(n,arguments)},{dup:70,"es5-ext/string/is-string":112,"es6-symbol":120}],118:[function(e,t,n){arguments[4][76][0].apply(n,arguments)},{"./":116,d:87,dup:76,"es5-ext/object/set-prototype-of":103}],119:[function(e,t,n){arguments[4][77][0].apply(n,arguments)},{"./is-iterable":117,dup:77}],120:[function(e,t,n){arguments[4][71][0].apply(n,arguments)},{"./is-implemented":121,"./polyfill":123,dup:71}],121:[function(e,t,n){arguments[4][72][0].apply(n,arguments)},{dup:72}],122:[function(e,t,n){arguments[4][73][0].apply(n,arguments)},{dup:73}],123:[function(e,t,n){arguments[4][74][0].apply(n,arguments)},{"./validate-symbol":124,d:87,dup:74}],124:[function(e,t,n){arguments[4][75][0].apply(n,arguments)
},{"./is-symbol":122,dup:75}],125:[function(e,t){"use strict";var n,r,i=e("es5-ext/object/set-prototype-of"),o=e("es5-ext/object/valid-object"),a=e("es5-ext/object/valid-value"),s=e("d"),u=e("es6-iterator/get"),c=e("es6-iterator/for-of"),l=e("es6-symbol").toStringTag,p=e("./is-native-implemented"),f=Array.isArray,d=Object.defineProperty,h=Math.random,m=Object.prototype.hasOwnProperty;n=function(){var e=Object.create(null);return function(){var t;do t=h().toString(36).slice(2);while(e[t]);return e[t]=!0,t}}(),t.exports=r=function(){var e=arguments[0];if(!(this instanceof r))return new r(e);if(void 0!==this.__weakMapData__)throw new TypeError(this+" cannot be reinitialized");null!=e&&(f(e)||(e=u(e))),d(this,"__weakMapData__",s("c","$weakMap$"+n())),e&&c(e,function(e){a(e),this.set(e[0],e[1])},this)},p&&(i&&i(r,WeakMap),r.prototype=Object.create(WeakMap.prototype,{constructor:s(r)})),Object.defineProperties(r.prototype,{clear:s(function(){d(this,"__weakMapData__",s("c","$weakMap$"+n()))}),"delete":s(function(e){return m.call(o(e),this.__weakMapData__)?(delete e[this.__weakMapData__],!0):!1}),get:s(function(e){return m.call(o(e),this.__weakMapData__)?e[this.__weakMapData__]:void 0}),has:s(function(e){return m.call(o(e),this.__weakMapData__)}),set:s(function(e,t){return d(o(e),this.__weakMapData__,s("c",t)),this}),toString:s(function(){return"[object WeakMap]"})}),d(r.prototype,l,s("c","WeakMap"))},{"./is-native-implemented":85,d:87,"es5-ext/object/set-prototype-of":103,"es5-ext/object/valid-object":107,"es5-ext/object/valid-value":108,"es6-iterator/for-of":114,"es6-iterator/get":115,"es6-symbol":120}],126:[function(e,t,n){!function(){"use strict";function t(e){return null==e?!1:"object"==typeof e&&"string"==typeof e.type}function r(e,t){return(e===o.Syntax.ObjectExpression||e===o.Syntax.ObjectPattern)&&"properties"===t}function i(e){this.__visitor=e||this}var o,a,s;o=e("estraverse"),a=Array.isArray,a||(a=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),s=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n},i.prototype.visitChildren=function(e){var n,i,a,u,c,l,p;if(null!=e)for(n=e.type||o.Syntax.Property,i=o.VisitorKeys[n],i||(i=s(e)),a=0,u=i.length;u>a;++a)if(p=e[i[a]])if(Array.isArray(p))for(c=0,l=p.length;l>c;++c)p[c]&&(t(p[c])||r(n,i[a]))&&this.visit(p[c]);else t(p)&&this.visit(p)},i.prototype.visit=function(e){var t;if(null!=e)return t=e.type||o.Syntax.Property,this.__visitor[t]?(this.__visitor[t].call(this,e),void 0):(this.visitChildren(e),void 0)},n.version=e("./package.json").version,n.Visitor=i,n.visit=function(e,t){var n=new i(t);n.visit(e)}}()},{"./package.json":127,estraverse:128}],127:[function(e,t){t.exports={name:"esrecurse",description:"ECMAScript scope analyzer",homepage:"http://github.com/estools/esrecurse",main:"esrecurse.js",version:"3.1.1",engines:{node:">=0.10.0"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"},{name:"michaelficarra",email:"npm@michael.ficarra.me"}],repository:{type:"git",url:"git+ssh://git@github.com/estools/esrecurse.git"},dependencies:{estraverse:"~3.1.0"},devDependencies:{chai:"^2.1.1","coffee-script":"^1.9.1",esprima:"^2.1.0",gulp:"~3.8.10","gulp-bump":"^0.2.2","gulp-eslint":"^0.6.0","gulp-filter":"^2.0.2","gulp-git":"^1.1.0","gulp-mocha":"~2.0.0","gulp-tag-version":"^1.2.1",jsdoc:"~3.3.0-alpha10",minimist:"^1.1.0"},licenses:[{type:"BSD",url:"http://github.com/estools/esrecurse/raw/master/LICENSE.BSD"}],scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint"},gitHead:"600a8aac5e7b313875a873134fd110b47a76fc77",bugs:{url:"https://github.com/estools/esrecurse/issues"},_id:"esrecurse@3.1.1",_shasum:"8feb963699d4d1b2d65a576cd4b1296672a0f0e9",_from:"esrecurse@>=3.1.1 <4.0.0",_npmVersion:"2.0.0-alpha-5",_npmUser:{name:"constellation",email:"utatane.tea@gmail.com"},dist:{shasum:"8feb963699d4d1b2d65a576cd4b1296672a0f0e9",tarball:"http://registry.npmjs.org/esrecurse/-/esrecurse-3.1.1.tgz"},directories:{},_resolved:"https://registry.npmjs.org/esrecurse/-/esrecurse-3.1.1.tgz",readme:"ERROR: No README data found!"}},{}],128:[function(e,t,n){!function r(t){"use strict";function n(){}function i(e){var t,n,r={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],r[t]="object"==typeof n&&null!==n?i(n):n);return r}function o(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function a(e,t){var n,r,i,o;for(r=e.length,i=0;r;)n=r>>>1,o=i+n,t(e[o])?r=n:(i=o+1,r-=n+1);return i}function s(e,t){var n,r,i,o;for(r=e.length,i=0;r;)n=r>>>1,o=i+n,t(e[o])?(i=o+1,r-=n+1):r=n;return i}function u(e,t){var n,r,i,o=S(t);for(r=0,i=o.length;i>r;r+=1)n=o[r],e[n]=t[n];return e}function c(e,t){this.parent=e,this.key=t}function l(e,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function p(){}function f(e){return null==e?!1:"object"==typeof e&&"string"==typeof e.type}function d(e,t){return(e===y.ObjectExpression||e===y.ObjectPattern)&&"properties"===t}function h(e,t){var n=new p;return n.traverse(e,t)}function m(e,t){var n=new p;return n.replace(e,t)}function g(e,t){var n;return n=a(t,function(t){return t.range[0]>e.range[0]}),e.extendedRange=[e.range[0],e.range[1]],n!==t.length&&(e.extendedRange[1]=t[n].range[0]),n-=1,n>=0&&(e.extendedRange[0]=t[n].range[1]),e}function v(e,t,n){var r,o,a,s,u=[];if(!e.range)throw new Error("attachComments needs range information");if(!n.length){if(t.length){for(a=0,o=t.length;o>a;a+=1)r=i(t[a]),r.extendedRange=[0,e.range[0]],u.push(r);e.leadingComments=u}return e}for(a=0,o=t.length;o>a;a+=1)u.push(g(i(t[a]),n));return s=0,h(e,{enter:function(e){for(var t;s<u.length&&(t=u[s],!(t.extendedRange[1]>e.range[0]));)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),u.splice(s,1)):s+=1;return s===u.length?x.Break:u[s].extendedRange[0]>e.range[1]?x.Skip:void 0}}),s=0,h(e,{leave:function(e){for(var t;s<u.length&&(t=u[s],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),u.splice(s,1)):s+=1;return s===u.length?x.Break:u[s].extendedRange[0]>e.range[1]?x.Skip:void 0}}),e}var y,_,x,b,w,S,E,C,T;return _=Array.isArray,_||(_=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),n(o),n(s),w=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),S=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n},y={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SuperExpression:"SuperExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},b={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],SuperExpression:["super"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},E={},C={},T={},x={Break:E,Skip:C,Remove:T},c.prototype.replace=function(e){this.parent[this.key]=e},c.prototype.remove=function(){return _(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},p.prototype.path=function(){function e(e,t){if(_(t))for(r=0,i=t.length;i>r;++r)e.push(t[r]);else e.push(t)}var t,n,r,i,o,a;if(!this.__current.path)return null;for(o=[],t=2,n=this.__leavelist.length;n>t;++t)a=this.__leavelist[t],e(o,a.path);return e(o,this.__current.path),o},p.prototype.type=function(){var e=this.current();return e.type||this.__current.wrap},p.prototype.parents=function(){var e,t,n;for(n=[],e=1,t=this.__leavelist.length;t>e;++e)n.push(this.__leavelist[e].node);return n},p.prototype.current=function(){return this.__current.node},p.prototype.__execute=function(e,t){var n,r;return r=void 0,n=this.__current,this.__current=t,this.__state=null,e&&(r=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=n,r},p.prototype.notify=function(e){this.__state=e},p.prototype.skip=function(){this.notify(C)},p.prototype["break"]=function(){this.notify(E)},p.prototype.remove=function(){this.notify(T)},p.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback="iteration"===t.fallback,this.__keys=b,t.keys&&(this.__keys=u(w(this.__keys),t.keys))},p.prototype.traverse=function(e,t){var n,r,i,o,a,s,u,c,p,h,m,g;for(this.__initialize(e,t),g={},n=this.__worklist,r=this.__leavelist,n.push(new l(e,null,null,null)),r.push(new l(null,null,null,null));n.length;)if(i=n.pop(),i!==g){if(i.node){if(s=this.__execute(t.enter,i),this.__state===E||s===E)return;if(n.push(g),r.push(i),this.__state===C||s===C)continue;if(o=i.node,a=i.wrap||o.type,h=this.__keys[a],!h){if(!this.__fallback)throw new Error("Unknown node type "+a+".");h=S(o)}for(c=h.length;(c-=1)>=0;)if(u=h[c],m=o[u])if(_(m)){for(p=m.length;(p-=1)>=0;)if(m[p]){if(d(a,h[c]))i=new l(m[p],[u,p],"Property",null);else{if(!f(m[p]))continue;i=new l(m[p],[u,p],null,null)}n.push(i)}}else f(m)&&n.push(new l(m,u,null,null))}}else if(i=r.pop(),s=this.__execute(t.leave,i),this.__state===E||s===E)return},p.prototype.replace=function(e,t){function n(e){var t,n,i,o;if(e.ref.remove())for(n=e.ref.key,o=e.ref.parent,t=r.length;t--;)if(i=r[t],i.ref&&i.ref.parent===o){if(i.ref.key<n)break;--i.ref.key}}var r,i,o,a,s,u,p,h,m,g,v,y,x;for(this.__initialize(e,t),v={},r=this.__worklist,i=this.__leavelist,y={root:e},u=new l(e,null,null,new c(y,"root")),r.push(u),i.push(u);r.length;)if(u=r.pop(),u!==v){if(s=this.__execute(t.enter,u),void 0!==s&&s!==E&&s!==C&&s!==T&&(u.ref.replace(s),u.node=s),(this.__state===T||s===T)&&(n(u),u.node=null),this.__state===E||s===E)return y.root;if(o=u.node,o&&(r.push(v),i.push(u),this.__state!==C&&s!==C)){if(a=u.wrap||o.type,m=this.__keys[a],!m){if(!this.__fallback)throw new Error("Unknown node type "+a+".");m=S(o)}for(p=m.length;(p-=1)>=0;)if(x=m[p],g=o[x])if(_(g)){for(h=g.length;(h-=1)>=0;)if(g[h]){if(d(a,m[p]))u=new l(g[h],[x,h],"Property",new c(g,h));else{if(!f(g[h]))continue;u=new l(g[h],[x,h],null,new c(g,h))}r.push(u)}}else f(g)&&r.push(new l(g,x,null,new c(o,x)))}}else if(u=i.pop(),s=this.__execute(t.leave,u),void 0!==s&&s!==E&&s!==C&&s!==T&&u.ref.replace(s),(this.__state===T||s===T)&&n(u),this.__state===E||s===E)return y.root;return y.root},t.version=e("./package.json").version,t.Syntax=y,t.traverse=h,t.replace=m,t.attachComments=v,t.VisitorKeys=b,t.VisitorOption=x,t.Controller=p,t.cloneEnvironment=function(){return r({})},t}(n)},{"./package.json":129}],129:[function(e,t){t.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"3.1.0",engines:{node:">=0.10.0"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"},{name:"michaelficarra",email:"npm@michael.ficarra.me"}],repository:{type:"git",url:"git+ssh://git@github.com/estools/estraverse.git"},devDependencies:{chai:"^2.1.1","coffee-script":"^1.8.0",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.2.1",jshint:"^2.5.6",mocha:"^2.1.0"},licenses:[{type:"BSD",url:"http://github.com/estools/estraverse/raw/master/LICENSE.BSD"}],scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers coffee:coffee-script/register"},gitHead:"166ebbe0a8d45ceb2391b6f5ef5d1bab6bfb267a",bugs:{url:"https://github.com/estools/estraverse/issues"},_id:"estraverse@3.1.0",_shasum:"15e28a446b8b82bc700ccc8b96c78af4da0d6cba",_from:"estraverse@>=3.1.0 <4.0.0",_npmVersion:"2.0.0-alpha-5",_npmUser:{name:"constellation",email:"utatane.tea@gmail.com"},dist:{shasum:"15e28a446b8b82bc700ccc8b96c78af4da0d6cba",tarball:"http://registry.npmjs.org/estraverse/-/estraverse-3.1.0.tgz"},directories:{},_resolved:"https://registry.npmjs.org/estraverse/-/estraverse-3.1.0.tgz",readme:"ERROR: No README data found!"}},{}],130:[function(e,t){t.exports={name:"escope",description:"ECMAScript scope analyzer",homepage:"http://github.com/estools/escope",main:"lib/index.js",version:"3.1.0",engines:{node:">=0.4.0"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"},{name:"michaelficarra",email:"npm@michael.ficarra.me"}],repository:{type:"git",url:"git+https://github.com/estools/escope.git"},dependencies:{"es6-map":"^0.1.1","es6-weak-map":"^0.1.2",esrecurse:"^3.1.1",estraverse:"^3.1.0"},devDependencies:{acorn:"^0.12.0",babel:"^4.7.12",browserify:"^9.0.3",chai:"^2.1.1","coffee-script":"^1.9.1",espree:"^2.0.2",esprima:"^2.1.0",gulp:"~3.8.10","gulp-babel":"^4.0.0","gulp-bump":"^0.3.0","gulp-coffee":"^2.2.0","gulp-eslint":"^0.6.0","gulp-espower":"^0.10.0","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-mocha":"~2.0.0","gulp-plumber":"^1.0.0","gulp-sourcemaps":"^1.3.0","gulp-tag-version":"^1.2.1",jsdoc:"=3.3.0-alpha13",lazypipe:"^0.2.2",minimist:"^1.1.0","vinyl-source-stream":"^1.0.0"},license:"BSD-2-Clause",scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",jsdoc:"jsdoc src/*.js README.md"},gitHead:"f237eefd4bfadfcf397e451219c3079e9bc3bb81",bugs:{url:"https://github.com/estools/escope/issues"},_id:"escope@3.1.0",_shasum:"92ca48f6286b380e4388e09188a904b0fa1d9b7e",_from:"escope@>=3.1.0 <4.0.0",_npmVersion:"2.10.1",_nodeVersion:"2.1.0",_npmUser:{name:"constellation",email:"utatane.tea@gmail.com"},dist:{shasum:"92ca48f6286b380e4388e09188a904b0fa1d9b7e",tarball:"http://registry.npmjs.org/escope/-/escope-3.1.0.tgz"},directories:{},_resolved:"https://registry.npmjs.org/escope/-/escope-3.1.0.tgz",readme:"ERROR: No README data found!"}},{}],131:[function(e,t){var n=t.exports=e("estraverse"),r=e("./keys");for(var i in r){n.Syntax[i]=i;var o=r[i];o&&(n.VisitorKeys[i]=o)}},{"./keys":132,estraverse:133}],132:[function(e,t,n){var r={Identifier:[],NamespacedName:["namespace","name"],MemberExpression:["object","property"],EmptyExpression:[],ExpressionContainer:["expression"],Element:["openingElement","closingElement","children"],ClosingElement:["name"],OpeningElement:["name","attributes"],Attribute:["name","value"],Text:null,SpreadAttribute:["argument"]},i={Type:[],AnyTypeAnnotation:[],VoidTypeAnnotation:[],NumberTypeAnnotation:[],StringTypeAnnotation:[],StringLiteralTypeAnnotation:["value","raw"],BooleanTypeAnnotation:[],TypeAnnotation:["typeAnnotation"],NullableTypeAnnotation:["typeAnnotation"],FunctionTypeAnnotation:["params","returnType","rest","typeParameters"],FunctionTypeParam:["name","typeAnnotation","optional"],ObjectTypeAnnotation:["properties"],ObjectTypeProperty:["key","value","optional"],ObjectTypeIndexer:["id","key","value"],ObjectTypeCallProperty:["value"],QualifiedTypeIdentifier:["qualification","id"],GenericTypeAnnotation:["id","typeParameters"],MemberTypeAnnotation:["object","property"],UnionTypeAnnotation:["types"],IntersectionTypeAnnotation:["types"],TypeofTypeAnnotation:["argument"],TypeParameterDeclaration:["params"],TypeParameterInstantiation:["params"],ClassProperty:["key","typeAnnotation"],ClassImplements:[],InterfaceDeclaration:["id","body","extends"],InterfaceExtends:["id"],TypeAlias:["id","typeParameters","right"],TupleTypeAnnotation:["types"],DeclareVariable:["id"],DeclareFunction:["id"],DeclareClass:["id"],DeclareModule:["id","body"]};for(var o in r)n["XJS"+o]=n["JSX"+o]=r[o];for(var o in i)n[o]=i[o]},{}],133:[function(e,t,n){!function r(t){"use strict";function n(){}function i(e){var t,n,r={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],r[t]="object"==typeof n&&null!==n?i(n):n);return r}function o(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function a(e,t){var n,r,i,o;for(r=e.length,i=0;r;)n=r>>>1,o=i+n,t(e[o])?r=n:(i=o+1,r-=n+1);return i}function s(e,t){var n,r,i,o;for(r=e.length,i=0;r;)n=r>>>1,o=i+n,t(e[o])?(i=o+1,r-=n+1):r=n;return i}function u(e,t){var n,r,i,o=S(t);for(r=0,i=o.length;i>r;r+=1)n=o[r],e[n]=t[n];return e}function c(e,t){this.parent=e,this.key=t}function l(e,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function p(){}function f(e){return null==e?!1:"object"==typeof e&&"string"==typeof e.type}function d(e,t){return(e===y.ObjectExpression||e===y.ObjectPattern)&&"properties"===t}function h(e,t){var n=new p;return n.traverse(e,t)}function m(e,t){var n=new p;return n.replace(e,t)}function g(e,t){var n;return n=a(t,function(t){return t.range[0]>e.range[0]}),e.extendedRange=[e.range[0],e.range[1]],n!==t.length&&(e.extendedRange[1]=t[n].range[0]),n-=1,n>=0&&(e.extendedRange[0]=t[n].range[1]),e}function v(e,t,n){var r,o,a,s,u=[];if(!e.range)throw new Error("attachComments needs range information");if(!n.length){if(t.length){for(a=0,o=t.length;o>a;a+=1)r=i(t[a]),r.extendedRange=[0,e.range[0]],u.push(r);e.leadingComments=u}return e}for(a=0,o=t.length;o>a;a+=1)u.push(g(i(t[a]),n));return s=0,h(e,{enter:function(e){for(var t;s<u.length&&(t=u[s],!(t.extendedRange[1]>e.range[0]));)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),u.splice(s,1)):s+=1;return s===u.length?x.Break:u[s].extendedRange[0]>e.range[1]?x.Skip:void 0}}),s=0,h(e,{leave:function(e){for(var t;s<u.length&&(t=u[s],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),u.splice(s,1)):s+=1;return s===u.length?x.Break:u[s].extendedRange[0]>e.range[1]?x.Skip:void 0}}),e}var y,_,x,b,w,S,E,C,T;return _=Array.isArray,_||(_=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),n(o),n(s),w=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),S=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n},y={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},b={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},E={},C={},T={},x={Break:E,Skip:C,Remove:T},c.prototype.replace=function(e){this.parent[this.key]=e},c.prototype.remove=function(){return _(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},p.prototype.path=function(){function e(e,t){if(_(t))for(r=0,i=t.length;i>r;++r)e.push(t[r]);else e.push(t)}var t,n,r,i,o,a;if(!this.__current.path)return null;for(o=[],t=2,n=this.__leavelist.length;n>t;++t)a=this.__leavelist[t],e(o,a.path);return e(o,this.__current.path),o},p.prototype.type=function(){var e=this.current();return e.type||this.__current.wrap},p.prototype.parents=function(){var e,t,n;for(n=[],e=1,t=this.__leavelist.length;t>e;++e)n.push(this.__leavelist[e].node);return n},p.prototype.current=function(){return this.__current.node},p.prototype.__execute=function(e,t){var n,r;return r=void 0,n=this.__current,this.__current=t,this.__state=null,e&&(r=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=n,r},p.prototype.notify=function(e){this.__state=e},p.prototype.skip=function(){this.notify(C)},p.prototype["break"]=function(){this.notify(E)},p.prototype.remove=function(){this.notify(T)},p.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback="iteration"===t.fallback,this.__keys=b,t.keys&&(this.__keys=u(w(this.__keys),t.keys))},p.prototype.traverse=function(e,t){var n,r,i,o,a,s,u,c,p,h,m,g;for(this.__initialize(e,t),g={},n=this.__worklist,r=this.__leavelist,n.push(new l(e,null,null,null)),r.push(new l(null,null,null,null));n.length;)if(i=n.pop(),i!==g){if(i.node){if(s=this.__execute(t.enter,i),this.__state===E||s===E)return;if(n.push(g),r.push(i),this.__state===C||s===C)continue;if(o=i.node,a=i.wrap||o.type,h=this.__keys[a],!h){if(!this.__fallback)throw new Error("Unknown node type "+a+".");h=S(o)}for(c=h.length;(c-=1)>=0;)if(u=h[c],m=o[u])if(_(m)){for(p=m.length;(p-=1)>=0;)if(m[p]){if(d(a,h[c]))i=new l(m[p],[u,p],"Property",null);else{if(!f(m[p]))continue;i=new l(m[p],[u,p],null,null)}n.push(i)}}else f(m)&&n.push(new l(m,u,null,null))}}else if(i=r.pop(),s=this.__execute(t.leave,i),this.__state===E||s===E)return},p.prototype.replace=function(e,t){function n(e){var t,n,i,o;if(e.ref.remove())for(n=e.ref.key,o=e.ref.parent,t=r.length;t--;)if(i=r[t],i.ref&&i.ref.parent===o){if(i.ref.key<n)break;--i.ref.key}}var r,i,o,a,s,u,p,h,m,g,v,y,x;for(this.__initialize(e,t),v={},r=this.__worklist,i=this.__leavelist,y={root:e},u=new l(e,null,null,new c(y,"root")),r.push(u),i.push(u);r.length;)if(u=r.pop(),u!==v){if(s=this.__execute(t.enter,u),void 0!==s&&s!==E&&s!==C&&s!==T&&(u.ref.replace(s),u.node=s),(this.__state===T||s===T)&&(n(u),u.node=null),this.__state===E||s===E)return y.root;if(o=u.node,o&&(r.push(v),i.push(u),this.__state!==C&&s!==C)){if(a=u.wrap||o.type,m=this.__keys[a],!m){if(!this.__fallback)throw new Error("Unknown node type "+a+".");m=S(o)}for(p=m.length;(p-=1)>=0;)if(x=m[p],g=o[x])if(_(g)){for(h=g.length;(h-=1)>=0;)if(g[h]){if(d(a,m[p]))u=new l(g[h],[x,h],"Property",new c(g,h));else{if(!f(g[h]))continue;u=new l(g[h],[x,h],null,new c(g,h))}r.push(u)}}else f(g)&&r.push(new l(g,x,null,new c(o,x)))}}else if(u=i.pop(),s=this.__execute(t.leave,u),void 0!==s&&s!==E&&s!==C&&s!==T&&u.ref.replace(s),(this.__state===T||s===T)&&n(u),this.__state===E||s===E)return y.root;return y.root},t.version=e("./package.json").version,t.Syntax=y,t.traverse=h,t.replace=m,t.attachComments=v,t.VisitorKeys=b,t.VisitorOption=x,t.Controller=p,t.cloneEnvironment=function(){return r({})},t}(n)},{"./package.json":134}],134:[function(e,t){t.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"2.0.0",engines:{node:">=0.10.0"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"}],repository:{type:"git",url:"git+ssh://git@github.com/estools/estraverse.git"},devDependencies:{chai:"^2.1.1","coffee-script":"^1.8.0",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.2.1",jshint:"^2.5.6",mocha:"^2.1.0"},licenses:[{type:"BSD",url:"http://github.com/estools/estraverse/raw/master/LICENSE.BSD"}],scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers coffee:coffee-script/register"},gitHead:"d8bc726f126817cc03c7a4e751528edb19db0ffb",bugs:{url:"https://github.com/estools/estraverse/issues"},_id:"estraverse@2.0.0",_shasum:"5ae46963243600206674ccb24a09e16674fcdca1",_from:"estraverse@>=2.0.0 <3.0.0",_npmVersion:"2.0.0-alpha-5",_npmUser:{name:"constellation",email:"utatane.tea@gmail.com"},dist:{shasum:"5ae46963243600206674ccb24a09e16674fcdca1",tarball:"http://registry.npmjs.org/estraverse/-/estraverse-2.0.0.tgz"},directories:{},_resolved:"https://registry.npmjs.org/estraverse/-/estraverse-2.0.0.tgz",readme:"ERROR: No README data found!"}},{}],135:[function(e,t){t.exports={builtin:{Array:!1,ArrayBuffer:!1,Boolean:!1,constructor:!1,DataView:!1,Date:!1,decodeURI:!1,decodeURIComponent:!1,encodeURI:!1,encodeURIComponent:!1,Error:!1,escape:!1,eval:!1,EvalError:!1,Float32Array:!1,Float64Array:!1,Function:!1,hasOwnProperty:!1,Infinity:!1,Int16Array:!1,Int32Array:!1,Int8Array:!1,isFinite:!1,isNaN:!1,isPrototypeOf:!1,JSON:!1,Map:!1,Math:!1,NaN:!1,Number:!1,Object:!1,parseFloat:!1,parseInt:!1,Promise:!1,propertyIsEnumerable:!1,Proxy:!1,RangeError:!1,ReferenceError:!1,Reflect:!1,RegExp:!1,Set:!1,String:!1,Symbol:!1,SyntaxError:!1,System:!1,toLocaleString:!1,toString:!1,TypeError:!1,Uint16Array:!1,Uint32Array:!1,Uint8Array:!1,Uint8ClampedArray:!1,undefined:!1,unescape:!1,URIError:!1,valueOf:!1,WeakMap:!1,WeakSet:!1},browser:{addEventListener:!1,alert:!1,applicationCache:!1,atob:!1,Audio:!1,AudioProcessingEvent:!1,BeforeUnloadEvent:!1,Blob:!1,blur:!1,btoa:!1,cancelAnimationFrame:!1,CanvasGradient:!1,CanvasPattern:!1,CanvasRenderingContext2D:!1,clearInterval:!1,clearTimeout:!1,close:!1,closed:!1,CloseEvent:!1,Comment:!1,CompositionEvent:!1,confirm:!1,console:!1,crypto:!1,CSS:!1,CustomEvent:!1,Debug:!1,defaultStatus:!1,devicePixelRatio:!1,dispatchEvent:!1,document:!1,Document:!1,DocumentFragment:!1,DOMParser:!1,DragEvent:!1,Element:!1,ElementTimeControl:!1,ErrorEvent:!1,event:!1,Event:!1,EventSource:!1,FileList:!1,FileReader:!1,fetch:!1,find:!1,focus:!1,FocusEvent:!1,FormData:!1,frameElement:!1,frames:!1,GamepadEvent:!1,getComputedStyle:!1,getSelection:!1,HashChangeEvent:!1,Headers:!1,history:!1,HTMLAnchorElement:!1,HTMLBaseElement:!1,HTMLBlockquoteElement:!1,HTMLBodyElement:!1,HTMLBRElement:!1,HTMLButtonElement:!1,HTMLCanvasElement:!1,HTMLDirectoryElement:!1,HTMLDivElement:!1,HTMLDListElement:!1,HTMLElement:!1,HTMLFieldSetElement:!1,HTMLFontElement:!1,HTMLFormElement:!1,HTMLFrameElement:!1,HTMLFrameSetElement:!1,HTMLHeadElement:!1,HTMLHeadingElement:!1,HTMLHRElement:!1,HTMLHtmlElement:!1,HTMLIFrameElement:!1,HTMLImageElement:!1,HTMLInputElement:!1,HTMLIsIndexElement:!1,HTMLLabelElement:!1,HTMLLayerElement:!1,HTMLLegendElement:!1,HTMLLIElement:!1,HTMLLinkElement:!1,HTMLMapElement:!1,HTMLMenuElement:!1,HTMLMetaElement:!1,HTMLModElement:!1,HTMLObjectElement:!1,HTMLOListElement:!1,HTMLOptGroupElement:!1,HTMLOptionElement:!1,HTMLParagraphElement:!1,HTMLParamElement:!1,HTMLPreElement:!1,HTMLQuoteElement:!1,HTMLScriptElement:!1,HTMLSelectElement:!1,HTMLStyleElement:!1,HTMLTableCaptionElement:!1,HTMLTableCellElement:!1,HTMLTableColElement:!1,HTMLTableElement:!1,HTMLTableRowElement:!1,HTMLTableSectionElement:!1,HTMLTextAreaElement:!1,HTMLTitleElement:!1,HTMLUListElement:!1,HTMLVideoElement:!1,IDBCursor:!1,IDBCursorWithValue:!1,IDBDatabase:!1,IDBEnvironment:!1,IDBFactory:!1,IDBIndex:!1,IDBKeyRange:!1,IDBObjectStore:!1,IDBOpenDBRequest:!1,IDBRequest:!1,IDBTransaction:!1,IDBVersionChangeEvent:!1,Image:!1,indexedDB:!1,innerHeight:!1,innerWidth:!1,InputEvent:!1,Intl:!1,KeyboardEvent:!1,length:!1,localStorage:!1,location:!1,matchMedia:!1,MessageChannel:!1,MessageEvent:!1,MessagePort:!1,MouseEvent:!1,moveBy:!1,moveTo:!1,MutationObserver:!1,name:!1,navigator:!1,Node:!1,NodeFilter:!1,NodeList:!1,Notification:!1,OfflineAudioCompletionEvent:!1,onbeforeunload:!0,onblur:!0,onerror:!0,onfocus:!0,onload:!0,onresize:!0,onunload:!0,open:!1,openDatabase:!1,opener:!1,opera:!1,Option:!1,outerHeight:!1,outerWidth:!1,PageTransitionEvent:!1,pageXOffset:!1,pageYOffset:!1,parent:!1,PopStateEvent:!1,postMessage:!1,print:!1,ProgressEvent:!1,prompt:!1,Range:!1,Request:!1,Response:!1,removeEventListener:!1,requestAnimationFrame:!1,resizeBy:!1,resizeTo:!1,screen:!1,screenX:!1,screenY:!1,scroll:!1,scrollbars:!1,scrollBy:!1,scrollTo:!1,scrollX:!1,scrollY:!1,self:!1,sessionStorage:!1,setInterval:!1,setTimeout:!1,SharedWorker:!1,showModalDialog:!1,status:!1,stop:!1,StorageEvent:!1,SVGAElement:!1,SVGAltGlyphDefElement:!1,SVGAltGlyphElement:!1,SVGAltGlyphItemElement:!1,SVGAngle:!1,SVGAnimateColorElement:!1,SVGAnimatedAngle:!1,SVGAnimatedBoolean:!1,SVGAnimatedEnumeration:!1,SVGAnimatedInteger:!1,SVGAnimatedLength:!1,SVGAnimatedLengthList:!1,SVGAnimatedNumber:!1,SVGAnimatedNumberList:!1,SVGAnimatedPathData:!1,SVGAnimatedPoints:!1,SVGAnimatedPreserveAspectRatio:!1,SVGAnimatedRect:!1,SVGAnimatedString:!1,SVGAnimatedTransformList:!1,SVGAnimateElement:!1,SVGAnimateMotionElement:!1,SVGAnimateTransformElement:!1,SVGAnimationElement:!1,SVGCircleElement:!1,SVGClipPathElement:!1,SVGColor:!1,SVGColorProfileElement:!1,SVGColorProfileRule:!1,SVGComponentTransferFunctionElement:!1,SVGCSSRule:!1,SVGCursorElement:!1,SVGDefsElement:!1,SVGDescElement:!1,SVGDocument:!1,SVGElement:!1,SVGElementInstance:!1,SVGElementInstanceList:!1,SVGEllipseElement:!1,SVGEvent:!1,SVGExternalResourcesRequired:!1,SVGFEBlendElement:!1,SVGFEColorMatrixElement:!1,SVGFEComponentTransferElement:!1,SVGFECompositeElement:!1,SVGFEConvolveMatrixElement:!1,SVGFEDiffuseLightingElement:!1,SVGFEDisplacementMapElement:!1,SVGFEDistantLightElement:!1,SVGFEFloodElement:!1,SVGFEFuncAElement:!1,SVGFEFuncBElement:!1,SVGFEFuncGElement:!1,SVGFEFuncRElement:!1,SVGFEGaussianBlurElement:!1,SVGFEImageElement:!1,SVGFEMergeElement:!1,SVGFEMergeNodeElement:!1,SVGFEMorphologyElement:!1,SVGFEOffsetElement:!1,SVGFEPointLightElement:!1,SVGFESpecularLightingElement:!1,SVGFESpotLightElement:!1,SVGFETileElement:!1,SVGFETurbulenceElement:!1,SVGFilterElement:!1,SVGFilterPrimitiveStandardAttributes:!1,SVGFitToViewBox:!1,SVGFontElement:!1,SVGFontFaceElement:!1,SVGFontFaceFormatElement:!1,SVGFontFaceNameElement:!1,SVGFontFaceSrcElement:!1,SVGFontFaceUriElement:!1,SVGForeignObjectElement:!1,SVGGElement:!1,SVGGlyphElement:!1,SVGGlyphRefElement:!1,SVGGradientElement:!1,SVGHKernElement:!1,SVGICCColor:!1,SVGImageElement:!1,SVGLangSpace:!1,SVGLength:!1,SVGLengthList:!1,SVGLinearGradientElement:!1,SVGLineElement:!1,SVGLocatable:!1,SVGMarkerElement:!1,SVGMaskElement:!1,SVGMatrix:!1,SVGMetadataElement:!1,SVGMissingGlyphElement:!1,SVGMPathElement:!1,SVGNumber:!1,SVGNumberList:!1,SVGPaint:!1,SVGPathElement:!1,SVGPathSeg:!1,SVGPathSegArcAbs:!1,SVGPathSegArcRel:!1,SVGPathSegClosePath:!1,SVGPathSegCurvetoCubicAbs:!1,SVGPathSegCurvetoCubicRel:!1,SVGPathSegCurvetoCubicSmoothAbs:!1,SVGPathSegCurvetoCubicSmoothRel:!1,SVGPathSegCurvetoQuadraticAbs:!1,SVGPathSegCurvetoQuadraticRel:!1,SVGPathSegCurvetoQuadraticSmoothAbs:!1,SVGPathSegCurvetoQuadraticSmoothRel:!1,SVGPathSegLinetoAbs:!1,SVGPathSegLinetoHorizontalAbs:!1,SVGPathSegLinetoHorizontalRel:!1,SVGPathSegLinetoRel:!1,SVGPathSegLinetoVerticalAbs:!1,SVGPathSegLinetoVerticalRel:!1,SVGPathSegList:!1,SVGPathSegMovetoAbs:!1,SVGPathSegMovetoRel:!1,SVGPatternElement:!1,SVGPoint:!1,SVGPointList:!1,SVGPolygonElement:!1,SVGPolylineElement:!1,SVGPreserveAspectRatio:!1,SVGRadialGradientElement:!1,SVGRect:!1,SVGRectElement:!1,SVGRenderingIntent:!1,SVGScriptElement:!1,SVGSetElement:!1,SVGStopElement:!1,SVGStringList:!1,SVGStylable:!1,SVGStyleElement:!1,SVGSVGElement:!1,SVGSwitchElement:!1,SVGSymbolElement:!1,SVGTests:!1,SVGTextContentElement:!1,SVGTextElement:!1,SVGTextPathElement:!1,SVGTextPositioningElement:!1,SVGTitleElement:!1,SVGTransform:!1,SVGTransformable:!1,SVGTransformList:!1,SVGTRefElement:!1,SVGTSpanElement:!1,SVGUnitTypes:!1,SVGURIReference:!1,SVGUseElement:!1,SVGViewElement:!1,SVGViewSpec:!1,SVGVKernElement:!1,SVGZoomAndPan:!1,Text:!1,TextDecoder:!1,TextEncoder:!1,TimeEvent:!1,top:!1,TouchEvent:!1,UIEvent:!1,URL:!1,WebGLActiveInfo:!1,WebGLBuffer:!1,WebGLContextEvent:!1,WebGLFramebuffer:!1,WebGLProgram:!1,WebGLRenderbuffer:!1,WebGLRenderingContext:!1,WebGLShader:!1,WebGLShaderPrecisionFormat:!1,WebGLTexture:!1,WebGLUniformLocation:!1,WebSocket:!1,WheelEvent:!1,window:!1,Window:!1,Worker:!1,XDomainRequest:!1,XMLHttpRequest:!1,XMLSerializer:!1,XPathEvaluator:!1,XPathException:!1,XPathExpression:!1,XPathNamespace:!1,XPathNSResolver:!1,XPathResult:!1},worker:{importScripts:!0,postMessage:!0,self:!0},node:{__dirname:!1,__filename:!1,arguments:!1,Buffer:!1,clearImmediate:!1,clearInterval:!1,clearTimeout:!1,console:!1,exports:!0,GLOBAL:!1,global:!1,module:!1,process:!1,require:!1,root:!1,setImmediate:!1,setInterval:!1,setTimeout:!1},amd:{define:!1,require:!1},mocha:{after:!1,afterEach:!1,before:!1,beforeEach:!1,context:!1,describe:!1,it:!1,mocha:!1,setup:!1,specify:!1,suite:!1,suiteSetup:!1,suiteTeardown:!1,teardown:!1,test:!1,xcontext:!1,xdescribe:!1,xit:!1,xspecify:!1},jasmine:{afterAll:!1,afterEach:!1,beforeAll:!1,beforeEach:!1,describe:!1,expect:!1,fail:!1,fdescribe:!1,fit:!1,it:!1,jasmine:!1,pending:!1,runs:!1,spyOn:!1,waits:!1,waitsFor:!1,xdescribe:!1,xit:!1},qunit:{asyncTest:!1,deepEqual:!1,equal:!1,expect:!1,module:!1,notDeepEqual:!1,notEqual:!1,notPropEqual:!1,notStrictEqual:!1,ok:!1,propEqual:!1,QUnit:!1,raises:!1,start:!1,stop:!1,strictEqual:!1,test:!1,"throws":!1},phantomjs:{console:!0,exports:!0,phantom:!0,require:!0,WebPage:!0},couch:{emit:!1,exports:!1,getRow:!1,log:!1,module:!1,provides:!1,require:!1,respond:!1,send:!1,start:!1,sum:!1},rhino:{defineClass:!1,deserialize:!1,gc:!1,help:!1,importClass:!1,importPackage:!1,java:!1,load:!1,loadClass:!1,Packages:!1,print:!1,quit:!1,readFile:!1,readUrl:!1,runCommand:!1,seal:!1,serialize:!1,spawn:!1,sync:!1,toint32:!1,version:!1},wsh:{ActiveXObject:!0,Enumerator:!0,GetObject:!0,ScriptEngine:!0,ScriptEngineBuildVersion:!0,ScriptEngineMajorVersion:!0,ScriptEngineMinorVersion:!0,VBArray:!0,WScript:!0,WSH:!0,XDomainRequest:!0},jquery:{$:!1,jQuery:!1},yui:{Y:!1,YUI:!1,YUI_config:!1},shelljs:{cat:!1,cd:!1,chmod:!1,config:!1,cp:!1,dirs:!1,echo:!1,env:!1,error:!1,exec:!1,exit:!1,find:!1,grep:!1,ls:!1,mkdir:!1,mv:!1,popd:!1,pushd:!1,pwd:!1,rm:!1,sed:!1,target:!1,tempdir:!1,test:!1,which:!1},prototypejs:{$:!1,$$:!1,$A:!1,$break:!1,$continue:!1,$F:!1,$H:!1,$R:!1,$w:!1,Abstract:!1,Ajax:!1,Autocompleter:!1,Builder:!1,Class:!1,Control:!1,Draggable:!1,Draggables:!1,Droppables:!1,Effect:!1,Element:!1,Enumerable:!1,Event:!1,Field:!1,Form:!1,Hash:!1,Insertion:!1,ObjectRange:!1,PeriodicalExecuter:!1,Position:!1,Prototype:!1,Scriptaculous:!1,Selector:!1,Sortable:!1,SortableObserver:!1,Sound:!1,Template:!1,Toggle:!1,Try:!1},meteor:{$:!1,_:!1,Accounts:!1,App:!1,Assets:!1,Blaze:!1,check:!1,Cordova:!1,DDP:!1,DDPServer:!1,Deps:!1,EJSON:!1,Email:!1,HTTP:!1,Log:!1,Match:!1,Meteor:!1,Mongo:!1,MongoInternals:!1,Npm:!1,Package:!1,Plugin:!1,process:!1,Random:!1,ReactiveDict:!1,ReactiveVar:!1,Router:!1,Session:!1,share:!1,Spacebars:!1,Template:!1,Tinytest:!1,Tracker:!1,UI:!1,Utils:!1,WebApp:!1,WebAppInternals:!1},mongo:{_isWindows:!1,_rand:!1,BulkWriteResult:!1,cat:!1,cd:!1,connect:!1,db:!1,getHostName:!1,getMemInfo:!1,hostname:!1,listFiles:!1,load:!1,ls:!1,md5sumFile:!1,mkdir:!1,Mongo:!1,ObjectId:!1,PlanCache:!1,pwd:!1,quit:!1,removeFile:!1,rs:!1,sh:!1,UUID:!1,version:!1,WriteResult:!1},applescript:{$:!1,Application:!1,Automation:!1,console:!1,delay:!1,Library:!1,ObjC:!1,ObjectSpecifier:!1,Path:!1,Progress:!1,Ref:!1}}
},{}],136:[function(e,t){t.exports=e("./globals.json")},{"./globals.json":135}],137:[function(e,t,n){n["date-time"]=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}[tT ]\d{2}:\d{2}:\d{2}(\.\d+)?([zZ]|[+-]\d{2}:\d{2})$/,n.date=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}$/,n.time=/^\d{2}:\d{2}:\d{2}$/,n.email=/^\S+@\S+$/,n["ip-address"]=n.ipv4=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,n.ipv6=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,n.uri=/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,n.color=/(#?([0-9A-Fa-f]{3,6})\b)|(aqua)|(black)|(blue)|(fuchsia)|(gray)|(green)|(lime)|(maroon)|(navy)|(olive)|(orange)|(purple)|(red)|(silver)|(teal)|(white)|(yellow)|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\))/,n.hostname=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]))*$/,n.alpha=/^[a-zA-Z]+$/,n.alphanumeric=/^[a-zA-Z0-9]+$/,n.style=/\s*(.+?):\s*([^;]+);?/g,n.phone=/^\+(?:[0-9] ?){6,14}[0-9]$/,n["utc-millisec"]=/^[0-9]+(\.?[0-9]+)?$/},{}],138:[function(e,t){var n=e("generate-object-property"),r=e("generate-function"),i=e("jsonpointer"),o=e("xtend"),a=e("./formats"),s=function(e,t,n){if(/^https?:\/\//.test(n))return null;var r=function(e){return e&&e.id===n?e:"object"==typeof e&&e?Object.keys(e).reduce(function(t,n){return t||r(e[n])},null):null},o=r(e);if(o)return o;n=n.replace(/^#/,""),n=n.replace(/\/$/,"");try{return i.get(e,decodeURI(n))}catch(a){var s,u=n.indexOf("#");if(0!==u)if(-1===u)s=t[n];else{var c=n.slice(0,u);s=t[c];var l=n.slice(u).replace(/^#/,"");try{return i.get(s,l)}catch(a){}}else s=t[n];return s||null}},u=function(e){e=JSON.stringify(e);for(var t=/\[([^\[\]"]+)\]/;t.test(e);)e=e.replace(t,'."+$1+"');return e},c={};c.any=function(){return"true"},c.null=function(e){return e+" === null"},c.boolean=function(e){return"typeof "+e+' === "boolean"'},c.array=function(e){return"Array.isArray("+e+")"},c.object=function(e){return"typeof "+e+' === "object" && '+e+" && !Array.isArray("+e+")"},c.number=function(e){return"typeof "+e+' === "number"'},c.integer=function(e){return"typeof "+e+' === "number" && (Math.floor('+e+") === "+e+" || "+e+" > 9007199254740992 || "+e+" < -9007199254740992)"},c.string=function(e){return"typeof "+e+' === "string"'};var l=function(e){for(var t=[],n=0;n<e.length;n++)t.push("object"==typeof e[n]?JSON.stringify(e[n]):e[n]);for(var n=1;n<t.length;n++)if(t.indexOf(t[n])!==n)return!1;return!0},p=function(e,t,i,f,d){var h=d?o(a,d.formats):a,m={unique:l,formats:h},g=d?!!d.verbose:!1,v=d&&void 0!==d.greedy?d.greedy:!1,y={},_=function(e){return e+(y[e]=(y[e]||0)+1)},x={},b=function(e){if(x[e])return x[e];var t=_("pattern");return m[t]=new RegExp(e),x[e]=t,t},w=["i","j","k","l","m","n","o","p","q","r","s","t","u","v","x","y","z"],S=function(){var e=w.shift();return w.push(e+e[0]),e},E=function(e,r,o,l){var f=r.properties,y=r.type,x=!1;Array.isArray(r.items)&&(f={},r.items.forEach(function(e,t){f[t]=e}),y="array",x=!0);var w=0,T=function(t,n,r){C("errors++"),o===!0&&(C("if (validate.errors === null) validate.errors = []"),g?C("validate.errors.push({field:%s,message:%s,value:%s})",u(n||e),JSON.stringify(t),r||e):C("validate.errors.push({field:%s,message:%s})",u(n||e),JSON.stringify(t)))};r.required===!0?(w++,C("if (%s === undefined) {",e),T("is required"),C("} else {")):(w++,C("if (%s !== undefined) {",e));var P=[].concat(y).map(function(t){return c[t||"any"](e)}).join(" || ")||"true";if("true"!==P&&(w++,C("if (!(%s)) {",P),T("is the wrong type"),C("} else {")),x)if(r.additionalItems===!1)C("if (%s.length > %d) {",e,r.items.length),T("has additional items"),C("}");else if(r.additionalItems){var I=S();C("for (var %s = %d; %s < %s.length; %s++) {",I,r.items.length,I,e,I),E(e+"["+I+"]",r.additionalItems,o,l),C("}")}if(r.format&&h[r.format]){"string"!==y&&a[r.format]&&C("if (%s) {",c.string(e));var D=_("format");m[D]=h[r.format],"function"==typeof m[D]?C("if (!%s(%s)) {",D,e):C("if (!%s.test(%s)) {",D,e),T("must be "+r.format+" format"),C("}"),"string"!==y&&a[r.format]&&C("}")}if(Array.isArray(r.required)){var A=function(t){var r=n(e,t);C("if (%s === undefined) {",r),T("is required",r),C("missing++"),C("}")};C("if ((%s)) {","object"!==y?c.object(e):"true"),C("var missing = 0"),r.required.map(A),C("}"),v||(C("if (missing === 0) {"),w++)}if(r.uniqueItems&&("array"!==y&&C("if (%s) {",c.array(e)),C("if (!(unique(%s))) {",e),T("must be unique"),C("}"),"array"!==y&&C("}")),r.enum){var N=r.enum.some(function(e){return"object"==typeof e}),k=N?function(t){return"JSON.stringify("+e+")"+" !== JSON.stringify("+JSON.stringify(t)+")"}:function(t){return e+" !== "+JSON.stringify(t)};C("if (%s) {",r.enum.map(k).join(" && ")||"false"),T("must be an enum value"),C("}")}if(r.dependencies&&("object"!==y&&C("if (%s) {",c.object(e)),Object.keys(r.dependencies).forEach(function(t){var i=r.dependencies[t];"string"==typeof i&&(i=[i]);var a=function(t){return n(e,t)+" !== undefined"};Array.isArray(i)&&(C("if (%s !== undefined && !(%s)) {",n(e,t),i.map(a).join(" && ")||"true"),T("dependencies not set"),C("}")),"object"==typeof i&&(C("if (%s !== undefined) {",n(e,t)),E(e,i,o,l),C("}"))}),"object"!==y&&C("}")),r.additionalProperties||r.additionalProperties===!1){"object"!==y&&C("if (%s) {",c.object(e));var I=S(),O=_("keys"),R=function(e){return O+"["+I+"] !== "+JSON.stringify(e)},j=function(e){return"!"+b(e)+".test("+O+"["+I+"])"},F=Object.keys(f||{}).map(R).concat(Object.keys(r.patternProperties||{}).map(j)).join(" && ")||"true";C("var %s = Object.keys(%s)",O,e)("for (var %s = 0; %s < %s.length; %s++) {",I,I,O,I)("if (%s) {",F),r.additionalProperties===!1?(l&&C("delete %s",e+"["+O+"["+I+"]]"),T("has additional properties",null,JSON.stringify(e+".")+" + "+O+"["+I+"]")):E(e+"["+O+"["+I+"]]",r.additionalProperties,o,l),C("}")("}"),"object"!==y&&C("}")}if(r.$ref){var L=s(i,d&&d.schemas||{},r.$ref);if(L){var M=t[r.$ref];M||(t[r.$ref]=function(e){return M(e)},M=p(L,t,i,!1,d));var D=_("ref");m[D]=M,C("if (!(%s(%s))) {",D,e),T("referenced schema does not match"),C("}")}}if(r.not){var B=_("prev");C("var %s = errors",B),E(e,r.not,!1,l),C("if (%s === errors) {",B),T("negative schema matches"),C("} else {")("errors = %s",B)("}")}if(r.items&&!x){"array"!==y&&C("if (%s) {",c.array(e));var I=S();C("for (var %s = 0; %s < %s.length; %s++) {",I,I,e,I),E(e+"["+I+"]",r.items,o,l),C("}"),"array"!==y&&C("}")}if(r.patternProperties){"object"!==y&&C("if (%s) {",c.object(e));var O=_("keys"),I=S();C("var %s = Object.keys(%s)",O,e)("for (var %s = 0; %s < %s.length; %s++) {",I,I,O,I),Object.keys(r.patternProperties).forEach(function(t){var n=b(t);C("if (%s.test(%s)) {",n,O+"["+I+"]"),E(e+"["+O+"["+I+"]]",r.patternProperties[t],o,l),C("}")}),C("}"),"object"!==y&&C("}")}if(r.pattern){var U=b(r.pattern);"string"!==y&&C("if (%s) {",c.string(e)),C("if (!(%s.test(%s))) {",U,e),T("pattern mismatch"),C("}"),"string"!==y&&C("}")}if(r.allOf&&r.allOf.forEach(function(t){E(e,t,o,l)}),r.anyOf&&r.anyOf.length){var B=_("prev");r.anyOf.forEach(function(t,n){0===n?C("var %s = errors",B):C("if (errors !== %s) {",B)("errors = %s",B),E(e,t,!1,!1)}),r.anyOf.forEach(function(e,t){t&&C("}")}),C("if (%s !== errors) {",B),T("no schemas match"),C("}")}if(r.oneOf&&r.oneOf.length){var B=_("prev"),V=_("passes");C("var %s = errors",B)("var %s = 0",V),r.oneOf.forEach(function(t){E(e,t,!1,!1),C("if (%s === errors) {",B)("%s++",V)("} else {")("errors = %s",B)("}")}),C("if (%s !== 1) {",V),T("no (or more than one) schemas match"),C("}")}if(void 0!==r.multipleOf){"number"!==y&&"integer"!==y&&C("if (%s) {",c.number(e));var Q=(0|r.multipleOf)!==r.multipleOf?Math.pow(10,r.multipleOf.toString().split(".").pop().length):1;Q>1?C("if ((%d*%s) % %d) {",Q,e,Q*r.multipleOf):C("if (%s % %d) {",e,r.multipleOf),T("has a remainder"),C("}"),"number"!==y&&"integer"!==y&&C("}")}for(void 0!==r.maxProperties&&("object"!==y&&C("if (%s) {",c.object(e)),C("if (Object.keys(%s).length > %d) {",e,r.maxProperties),T("has more properties than allowed"),C("}"),"object"!==y&&C("}")),void 0!==r.minProperties&&("object"!==y&&C("if (%s) {",c.object(e)),C("if (Object.keys(%s).length < %d) {",e,r.minProperties),T("has less properties than allowed"),C("}"),"object"!==y&&C("}")),void 0!==r.maxItems&&("array"!==y&&C("if (%s) {",c.array(e)),C("if (%s.length > %d) {",e,r.maxItems),T("has more items than allowed"),C("}"),"array"!==y&&C("}")),void 0!==r.minItems&&("array"!==y&&C("if (%s) {",c.array(e)),C("if (%s.length < %d) {",e,r.minItems),T("has less items than allowed"),C("}"),"array"!==y&&C("}")),void 0!==r.maxLength&&("string"!==y&&C("if (%s) {",c.string(e)),C("if (%s.length > %d) {",e,r.maxLength),T("has longer length than allowed"),C("}"),"string"!==y&&C("}")),void 0!==r.minLength&&("string"!==y&&C("if (%s) {",c.string(e)),C("if (%s.length < %d) {",e,r.minLength),T("has less length than allowed"),C("}"),"string"!==y&&C("}")),void 0!==r.minimum&&(C("if (%s %s %d) {",e,r.exclusiveMinimum?"<=":"<",r.minimum),T("is less than minimum"),C("}")),void 0!==r.maximum&&(C("if (%s %s %d) {",e,r.exclusiveMaximum?">=":">",r.maximum),T("is more than maximum"),C("}")),f&&Object.keys(f).forEach(function(t){E(n(e,t),f[t],o,l)});w--;)C("}")},C=r("function validate(data) {")("validate.errors = null")("var errors = 0");return E("data",e,f,d&&d.filter),C("return errors === 0")("}"),C=C.toFunction(m),C.errors=null,C.__defineGetter__("error",function(){return C.errors?C.errors.map(function(e){return e.field+" "+e.message}).join("\n"):""}),C.toJSON=function(){return e},C};t.exports=function(e,t){return"string"==typeof e&&(e=JSON.parse(e)),p(e,{},e,!0,t)},t.exports.filter=function(e,n){var r=t.exports(e,o(n,{filter:!0}));return function(e){return r(e),e}}},{"./formats":137,"generate-function":139,"generate-object-property":140,jsonpointer:142,xtend:143}],139:[function(e,t){var n=e("util"),r=/[\{\[]/,i=/[\}\]]/;t.exports=function(){var e=[],t=0,o=function(n){for(var r="";r.length<2*t;)r+="  ";e.push(r+n)},a=function(e){return e?i.test(e.trim()[0])&&r.test(e[e.length-1])?(t--,o(n.format.apply(n,arguments)),t++,a):r.test(e[e.length-1])?(o(n.format.apply(n,arguments)),t++,a):i.test(e.trim()[0])?(t--,o(n.format.apply(n,arguments)),a):(o(n.format.apply(n,arguments)),a):a};return a.toString=function(){return e.join("\n")},a.toFunction=function(e){var t="return ("+a.toString()+")",n=Object.keys(e||{}).map(function(e){return e}),r=n.map(function(t){return e[t]});return Function.apply(null,n.concat(t)).apply(null,r)},arguments.length&&a.apply(null,arguments),a}},{util:10}],140:[function(e,t){var n=e("is-property"),r=function(e,t){return n(t)?e+"."+t:e+"["+JSON.stringify(t)+"]"};r.valid=n,r.property=function(e){return n(e)?e:JSON.stringify(e)},t.exports=r},{"is-property":141}],141:[function(e,t){"use strict";function n(e){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(e)}t.exports=n},{}],142:[function(e,t,n){e("console");var r=function(e){return e.replace(/~./g,function(e){switch(e){case"~0":return"~";case"~1":return"/"}throw"Invalid tilde escape: "+e})},i=function(e,t,n){var o=r(t.shift());if("undefined"==typeof e[o])throw"Value for pointer '"+t+"' not found.";if(0!==t.length)return i(e[o],t,n);if("undefined"==typeof n)return e[o];var a=e[o];return null===n?delete e[o]:e[o]=n,a},o=function(e,t){if("object"!=typeof e)throw"Invalid input object.";if(""===t)return[];if(!t)throw"Invalid JSON pointer.";t=t.split("/");var n=t.shift();if(""!==n)throw"Invalid JSON pointer.";return t},a=function(e,t){return t=o(e,t),0===t.length?e:i(e,t)},s=function(e,t,n){if(t=o(e,t),0===t.length)throw"Invalid JSON pointer for set.";return i(e,t,n)};n.get=a,n.set=s},{console:4}],143:[function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}t.exports=n},{}],144:[function(e,t){"use strict";function n(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=Object.assign||function(e){for(var t,r,i=n(e),o=1;o<arguments.length;o++){t=arguments[o],r=Object.keys(Object(t));for(var a=0;a<r.length;a++)i[r[a]]=t[r[a]]}return i}},{}],145:[function(e,t){"use strict";function n(e){var t=o.get(e),n=t&&t.schema;return n?Array.isArray(n)?{type:"array",items:[{"enum":[0,1,2]}].concat(n),minItems:1,maxItems:n.length+1}:n:{type:"array",items:[{"enum":[0,1,2]}],minItems:1}}function r(e,t,r){var i,o=s.rules[e];if(o||(o=a(n(e),{verbose:!0}),s.rules[e]=o),"number"==typeof t&&(t=[t]),o(t),o.errors)throw i=[r,":\n",'	Configuration for rule "',e,'" is invalid:\n'],o.errors.forEach(function(e){i.push('	Value "',e.value,'" ',e.message,".\n")}),new Error(i.join(""))}function i(e,t){"object"==typeof e.rules&&Object.keys(e.rules).forEach(function(n){r(n,e.rules[n],t)})}var o=e("./rules"),a=e("is-my-json-valid"),s={rules:Object.create(null)};t.exports={getRuleOptionsSchema:n,validate:i,validateRuleOptions:r}},{"./rules":149,"is-my-json-valid":138}],146:[function(e,t){"use strict";function n(e){var t={};return e=e.replace(/\s*:\s*/g,":"),e=e.replace(/\s*,\s*/g,","),e.split(/\s|,+/).forEach(function(e){if(e){var n,r=e.indexOf(":");-1!==r&&(n=e.substring(r+1,e.length),e=e.substring(0,r)),t[e]="true"===n}}),t}function r(e,t,n){var r={};e=e.replace(/([a-zA-Z0-9\-\/]+):/g,'"$1":').replace(/(\]|[0-9])\s+(?=")/,"$1,");try{r=JSON.parse("{"+e+"}")}catch(i){n.push({fatal:!0,severity:2,message:"Failed to parse JSON from '"+e+"': "+i.message,line:t.start.line,column:t.start.column})}return r}function i(e){var t={};return e=e.replace(/\s*,\s*/g,","),e.split(/,+/).forEach(function(e){e=e.trim(),e&&(t[e]=!0)}),t}function o(e,t){var n=null;return e.variables.some(function(e){return e.name===t?(n=e,!0):!1}),n}function a(e,t,n){var r={},i={},a=h.builtin;m(r,a),Object.keys(n.env).forEach(function(e){if(n.env[e]){var t=h[e]&&h[e].globals;t&&m(r,t)}}),m(r,n.globals),m(i,n.astGlobals),Object.keys(r).forEach(function(e){var n=o(t,e);n||(n=new d.Variable(e,t),n.eslintExplicitGlobal=!1,t.variables.push(n)),n.writeable=r[e]}),Object.keys(i).forEach(function(e){var n=o(t,e);n||(n=new d.Variable(e,t),n.eslintExplicitGlobal=!0,t.variables.push(n)),n.writeable=i[e]})}function s(e,t,n){n.length?n.forEach(function(n){e.push({start:t,end:null,rule:n})}):e.push({start:t,end:null,rule:null})}function u(e,t,n){var r;if(n.length)n.forEach(function(n){for(r=e.length-1;r>=0;r--)if(!e[r].end&&e[r].rule===n){e[r].end=t;break}});else{var i;for(r=e.length-1;r>=0&&(!i||i===e[r].start);r--)e[r].end||(e[r].end=t,i=e[r].start)}}function c(e,t,o,a,c){var l={astGlobals:{},rules:{},env:{}},p={};t.comments.forEach(function(t){var o=t.value.trim(),f=/^(eslint-\w+|eslint-\w+-\w+|eslint|globals?)(\s|$)/.exec(o);if(f)if(o=o.substring(f.index+f[1].length),"Block"===t.type)switch(f[1]){case"globals":case"global":m(l.astGlobals,n(o));break;case"eslint-env":m(l.env,i(o));break;case"eslint-disable":s(a,t.loc.start,Object.keys(i(o)));break;case"eslint-enable":u(a,t.loc.start,Object.keys(i(o)));break;case"eslint":var d=r(o,t.loc,c);Object.keys(d).forEach(function(n){var r=d[n];S.validateRuleOptions(n,r,e+" line "+t.loc.start.line),p[n]=r})}else"eslint-disable-line"===f[1]&&(s(a,{line:t.loc.start.line,column:0},Object.keys(i(o))),u(a,t.loc.end,Object.keys(i(o))))}),Object.keys(l.env).forEach(function(e){h[e]&&v.mergeConfigs(l,h[e])}),m(l.rules,p),v.mergeConfigs(o,l)}function l(e,t,n){for(var r=0,i=e.length;i>r;r++){var o=e[r];if((!o.rule||o.rule===t)&&(n.line>o.start.line||n.line===o.start.line&&n.column>=o.start.column)&&(!o.end||n.line<o.end.line||n.line===o.end.line&&n.column<=o.end.column))return!0}return!1}function p(e){e.globals=e.globals||e.global||{},delete e.global;var t,n={},r={};return"object"==typeof e.rules&&Object.keys(e.rules).forEach(function(t){var r=e.rules[t];if(null===r)throw new Error("Invalid config for rule '"+t+"'.");n[t]=Array.isArray(r)?r.slice():r}),"object"==typeof e.env&&Object.keys(e.env).forEach(function(t){e.env[t]&&h[t].ecmaFeatures&&m(r,h[t].ecmaFeatures)}),t={rules:n,parser:e.parser||"espree",globals:v.mergeConfigs({},e.globals),env:v.mergeConfigs({},e.env||{}),settings:v.mergeConfigs({},e.settings||{}),ecmaFeatures:v.mergeConfigs(r,e.ecmaFeatures||{})},t.ecmaFeatures.modules&&(t.ecmaFeatures.globalReturn=!1),t}var f=e("estraverse-fb"),d=e("escope"),h=e("../conf/environments"),m=e("object-assign"),g=e("./rules"),v=e("./util"),y=e("./rule-context"),_=e("./timing"),x=e("./token-store.js"),b=e("events").EventEmitter,w=e("escape-string-regexp"),S=e("./config-validator");f.Syntax.Super="Super",f.VisitorKeys.Super=[],t.exports=function(){function t(t,n){var r;try{r=e(n.parser)}catch(i){return h.push({fatal:!0,severity:2,message:i.message,line:0,column:0}),null}try{return r.parse(t,{loc:!0,range:!0,raw:!0,tokens:!0,comment:!0,attachComment:!0,ecmaFeatures:n.ecmaFeatures})}catch(i){var o=i.message.replace(/^line \d+:/i,"").trim();return h.push({fatal:!0,severity:2,message:o,line:i.lineNumber,column:i.column}),null}}function n(e,t,n){e.length&&e.forEach(function(e){t.indexOf(e.loc)>=0?t.splice(t.indexOf(e.loc),1):(t.push(e.loc),u.emit(e.type+n,e))})}function r(e){n(e,N,"Comment")}function i(e){n(e,k,"Comment:exit")}function o(e){return"number"==typeof e?e:Array.isArray(e)?e[0]:0}function s(e){return Array.isArray(e)?e.slice(1):[]}var u=Object.create(new b),h=[],m=null,v=[],S=null,E=null,C=null,T=null,P=null,I=null,D=null,A=[],N=[],k=[],O=null;u.setMaxListeners(0),u.reset=function(){this.removeAllListeners(),h=[],O=null,S=null,m=null,v=[],E=null,C=null,T=null,P=null,D=null,A=[],N=[],k=[]},u.verify=function(e,n,l,b){var w,N,k,R;return I=l,b||this.reset(),0===e.trim().length?(m=e,h):(n=p(n||{}),w=t(e.replace(/^#!([^\r\n]+)/,function(e,t){return N=t,"//"+t}),n),w&&(O=w,c(l,w,n,A,h),Object.keys(n.rules).filter(function(e){return o(n.rules[e])>0}).forEach(function(e){var t,r=g.get(e),i=o(n.rules[e]),a=s(n.rules[e]);if(!r)throw new Error("Definition for rule '"+e+"' was not found.");try{t=r(new y(e,u,i,a,n.settings,n.ecmaFeatures)),Object.keys(t).forEach(function(n){u.on(n,_.enabled?_.time(e,t[n]):t[n])})}catch(c){throw c.message="Error while loading rule '"+e+"': "+c.message,c}}),S=n,m=e,D=new f.Controller,k=S.ecmaFeatures,R=k.blockBindings||k.classes||k.modules||k.defaultParams||k.destructuring?6:5,P=d.analyze(w,{ignoreEval:!0,nodejsScope:k.globalReturn,ecmaVersion:R,sourceType:k.modules?"module":"script"}),C=P.scopes,T=[],C.forEach(function(e,t){var n=e.block.range[0];T[n]||(T[n]=t)}),v=m.split(/\r\n|\r|\n|\u2028|\u2029/g),Object.freeze(v),E=x(w.tokens),Object.keys(E).forEach(function(e){u[e]=E[e]}),a(w,C[0],S),N&&w.comments.length&&w.comments[0].value===N&&(w.comments.splice(0,1),w.body.length&&w.body[0].leadingComments&&w.body[0].leadingComments[0].value===N&&w.body[0].leadingComments.splice(0,1)),D.traverse(w,{enter:function(e,t){var n=u.getComments(e);r(n.leading),e.parent=t,u.emit(e.type,e),r(n.trailing)},leave:function(e){var t=u.getComments(e);i(t.trailing),u.emit(e.type+":exit",e),i(t.leading)}})),h.sort(function(e,t){var n=e.line-t.line;return 0===n?e.column-t.column:n}),h)},u.report=function(e,t,n,r,i,o){"string"==typeof r&&(o=i,i=r,r=n.loc.start),Object.keys(o||{}).forEach(function(e){var t=new RegExp(w("{{"+e+"}}"),"g");i=i.replace(t,o[e])}),l(A,e,r)||h.push({ruleId:e,severity:t,message:i,line:r.line,column:r.column,nodeType:n.type,source:v[r.line-1]||""})},u.getSource=function(e,t,n){return e?null!==m?m.slice(Math.max(e.range[0]-(t||0),0),e.range[1]+(n||0)):null:m},u.getSourceLines=function(){return v},u.getAllComments=function(){return O.comments},u.getComments=function(e){var t=e.leadingComments||[],n=e.trailingComments||[];return"Program"===e.type&&0===e.body.length&&(t=e.comments),{leading:t,trailing:n}},u.getJSDocComment=function(e){function t(e){if(e)for(var t=e.length-1;t>=0;t--)if("Block"===e[t].type&&"*"===e[t].value.charAt(0)){if(i-e[t].loc.end.line<=1)return e[t];
break}return null}function n(e){return"ExportDefaultDeclaration"===e.type||"ExportNamedDeclaration"===e.type||"ExportAllDeclaration"===e.type||"ExportSpecifier"===e.type}var r=e.parent,i=e.loc.start.line;switch(e.type){case"FunctionDeclaration":return n(r)?t(r.leadingComments):t(e.leadingComments);case"ArrowFunctionExpression":case"FunctionExpression":if("CallExpression"!==r.type||r.callee!==e){for(;r&&!r.leadingComments&&!/Function/.test(r.type);)r=r.parent;return r&&"FunctionDeclaration"!==r.type?t(r.leadingComments):null}default:return null}},u.getAncestors=function(){return D.parents()},u.getNodeByRangeIndex=function(e){var t=null;return f.traverse(D.root,{enter:function(n){n.range[0]<=e&&e<n.range[1]?t=n:this.skip()},leave:function(e){e===t&&this.break()}}),t},u.getScope=function(){var e=D.parents(),t=C[0];if(e.length){var n=D.current();["FunctionDeclaration","FunctionExpression","ArrowFunctionExpression","SwitchStatement"].indexOf(n.type)>=0&&e.push(n);for(var r=e.length-1;r>=0;--r)if(t=P.acquire(e[r]))return"function-expression-name"===t.type?t.childScopes[0]:t}return C[0]},u.markVariableAsUsed=function(e){var t,n,r,i=this.getScope(),o=S.ecmaFeatures.globalReturn||S.ecmaFeatures.modules;"global"===i.type&&o&&(i=i.childScopes[0]);do for(t=i.variables,n=0,r=t.length;r>n;n++)if(t[n].name===e)return t[n].eslintUsed=!0,!0;while(i=i.upper);return!1},u.getFilename=function(){return"string"==typeof I?I:"<input>"};var R=u.defineRule=function(e,t){g.define(e,t)};return u.defineRules=function(e){Object.getOwnPropertyNames(e).forEach(function(t){R(t,e[t])})},u.defaults=function(){return e("../conf/eslint.json")},u}()},{"../conf/environments":1,"../conf/eslint.json":2,"./config-validator":145,"./rule-context":148,"./rules":149,"./timing":318,"./token-store.js":319,"./util":320,"escape-string-regexp":20,escope:22,"estraverse-fb":131,events:6,"object-assign":144}],147:[function(e,t){t.exports=function(){var t=Object.create(null);return t["accessor-pairs"]=e("./rules/accessor-pairs"),t["array-bracket-spacing"]=e("./rules/array-bracket-spacing"),t["block-scoped-var"]=e("./rules/block-scoped-var"),t["brace-style"]=e("./rules/brace-style"),t.camelcase=e("./rules/camelcase"),t["comma-dangle"]=e("./rules/comma-dangle"),t["comma-spacing"]=e("./rules/comma-spacing"),t["comma-style"]=e("./rules/comma-style"),t.complexity=e("./rules/complexity"),t["computed-property-spacing"]=e("./rules/computed-property-spacing"),t["consistent-return"]=e("./rules/consistent-return"),t["consistent-this"]=e("./rules/consistent-this"),t.curly=e("./rules/curly"),t["default-case"]=e("./rules/default-case"),t["dot-location"]=e("./rules/dot-location"),t["dot-notation"]=e("./rules/dot-notation"),t["eol-last"]=e("./rules/eol-last"),t.eqeqeq=e("./rules/eqeqeq"),t["func-names"]=e("./rules/func-names"),t["func-style"]=e("./rules/func-style"),t["generator-star-spacing"]=e("./rules/generator-star-spacing"),t["generator-star"]=e("./rules/generator-star"),t["global-strict"]=e("./rules/global-strict"),t["guard-for-in"]=e("./rules/guard-for-in"),t["handle-callback-err"]=e("./rules/handle-callback-err"),t.indent=e("./rules/indent"),t["key-spacing"]=e("./rules/key-spacing"),t["linebreak-style"]=e("./rules/linebreak-style"),t["lines-around-comment"]=e("./rules/lines-around-comment"),t["max-depth"]=e("./rules/max-depth"),t["max-len"]=e("./rules/max-len"),t["max-nested-callbacks"]=e("./rules/max-nested-callbacks"),t["max-params"]=e("./rules/max-params"),t["max-statements"]=e("./rules/max-statements"),t["new-cap"]=e("./rules/new-cap"),t["new-parens"]=e("./rules/new-parens"),t["newline-after-var"]=e("./rules/newline-after-var"),t["no-alert"]=e("./rules/no-alert"),t["no-array-constructor"]=e("./rules/no-array-constructor"),t["no-bitwise"]=e("./rules/no-bitwise"),t["no-caller"]=e("./rules/no-caller"),t["no-catch-shadow"]=e("./rules/no-catch-shadow"),t["no-comma-dangle"]=e("./rules/no-comma-dangle"),t["no-cond-assign"]=e("./rules/no-cond-assign"),t["no-console"]=e("./rules/no-console"),t["no-constant-condition"]=e("./rules/no-constant-condition"),t["no-continue"]=e("./rules/no-continue"),t["no-control-regex"]=e("./rules/no-control-regex"),t["no-debugger"]=e("./rules/no-debugger"),t["no-delete-var"]=e("./rules/no-delete-var"),t["no-div-regex"]=e("./rules/no-div-regex"),t["no-dupe-args"]=e("./rules/no-dupe-args"),t["no-dupe-keys"]=e("./rules/no-dupe-keys"),t["no-duplicate-case"]=e("./rules/no-duplicate-case"),t["no-else-return"]=e("./rules/no-else-return"),t["no-empty-character-class"]=e("./rules/no-empty-character-class"),t["no-empty-class"]=e("./rules/no-empty-class"),t["no-empty-label"]=e("./rules/no-empty-label"),t["no-empty"]=e("./rules/no-empty"),t["no-eq-null"]=e("./rules/no-eq-null"),t["no-eval"]=e("./rules/no-eval"),t["no-ex-assign"]=e("./rules/no-ex-assign"),t["no-extend-native"]=e("./rules/no-extend-native"),t["no-extra-bind"]=e("./rules/no-extra-bind"),t["no-extra-boolean-cast"]=e("./rules/no-extra-boolean-cast"),t["no-extra-parens"]=e("./rules/no-extra-parens"),t["no-extra-semi"]=e("./rules/no-extra-semi"),t["no-extra-strict"]=e("./rules/no-extra-strict"),t["no-fallthrough"]=e("./rules/no-fallthrough"),t["no-floating-decimal"]=e("./rules/no-floating-decimal"),t["no-func-assign"]=e("./rules/no-func-assign"),t["no-implied-eval"]=e("./rules/no-implied-eval"),t["no-inline-comments"]=e("./rules/no-inline-comments"),t["no-inner-declarations"]=e("./rules/no-inner-declarations"),t["no-invalid-regexp"]=e("./rules/no-invalid-regexp"),t["no-irregular-whitespace"]=e("./rules/no-irregular-whitespace"),t["no-iterator"]=e("./rules/no-iterator"),t["no-label-var"]=e("./rules/no-label-var"),t["no-labels"]=e("./rules/no-labels"),t["no-lone-blocks"]=e("./rules/no-lone-blocks"),t["no-lonely-if"]=e("./rules/no-lonely-if"),t["no-loop-func"]=e("./rules/no-loop-func"),t["no-mixed-requires"]=e("./rules/no-mixed-requires"),t["no-mixed-spaces-and-tabs"]=e("./rules/no-mixed-spaces-and-tabs"),t["no-multi-spaces"]=e("./rules/no-multi-spaces"),t["no-multi-str"]=e("./rules/no-multi-str"),t["no-multiple-empty-lines"]=e("./rules/no-multiple-empty-lines"),t["no-native-reassign"]=e("./rules/no-native-reassign"),t["no-negated-in-lhs"]=e("./rules/no-negated-in-lhs"),t["no-nested-ternary"]=e("./rules/no-nested-ternary"),t["no-new-func"]=e("./rules/no-new-func"),t["no-new-object"]=e("./rules/no-new-object"),t["no-new-require"]=e("./rules/no-new-require"),t["no-new-wrappers"]=e("./rules/no-new-wrappers"),t["no-new"]=e("./rules/no-new"),t["no-obj-calls"]=e("./rules/no-obj-calls"),t["no-octal-escape"]=e("./rules/no-octal-escape"),t["no-octal"]=e("./rules/no-octal"),t["no-param-reassign"]=e("./rules/no-param-reassign"),t["no-path-concat"]=e("./rules/no-path-concat"),t["no-plusplus"]=e("./rules/no-plusplus"),t["no-process-env"]=e("./rules/no-process-env"),t["no-process-exit"]=e("./rules/no-process-exit"),t["no-proto"]=e("./rules/no-proto"),t["no-redeclare"]=e("./rules/no-redeclare"),t["no-regex-spaces"]=e("./rules/no-regex-spaces"),t["no-reserved-keys"]=e("./rules/no-reserved-keys"),t["no-restricted-modules"]=e("./rules/no-restricted-modules"),t["no-return-assign"]=e("./rules/no-return-assign"),t["no-script-url"]=e("./rules/no-script-url"),t["no-self-compare"]=e("./rules/no-self-compare"),t["no-sequences"]=e("./rules/no-sequences"),t["no-shadow-restricted-names"]=e("./rules/no-shadow-restricted-names"),t["no-shadow"]=e("./rules/no-shadow"),t["no-space-before-semi"]=e("./rules/no-space-before-semi"),t["no-spaced-func"]=e("./rules/no-spaced-func"),t["no-sparse-arrays"]=e("./rules/no-sparse-arrays"),t["no-sync"]=e("./rules/no-sync"),t["no-ternary"]=e("./rules/no-ternary"),t["no-throw-literal"]=e("./rules/no-throw-literal"),t["no-trailing-spaces"]=e("./rules/no-trailing-spaces"),t["no-undef-init"]=e("./rules/no-undef-init"),t["no-undef"]=e("./rules/no-undef"),t["no-undefined"]=e("./rules/no-undefined"),t["no-underscore-dangle"]=e("./rules/no-underscore-dangle"),t["no-unneeded-ternary"]=e("./rules/no-unneeded-ternary"),t["no-unreachable"]=e("./rules/no-unreachable"),t["no-unused-expressions"]=e("./rules/no-unused-expressions"),t["no-unused-vars"]=e("./rules/no-unused-vars"),t["no-use-before-define"]=e("./rules/no-use-before-define"),t["no-var"]=e("./rules/no-var"),t["no-void"]=e("./rules/no-void"),t["no-warning-comments"]=e("./rules/no-warning-comments"),t["no-with"]=e("./rules/no-with"),t["no-wrap-func"]=e("./rules/no-wrap-func"),t["object-curly-spacing"]=e("./rules/object-curly-spacing"),t["object-shorthand"]=e("./rules/object-shorthand"),t["one-var"]=e("./rules/one-var"),t["operator-assignment"]=e("./rules/operator-assignment"),t["operator-linebreak"]=e("./rules/operator-linebreak"),t["padded-blocks"]=e("./rules/padded-blocks"),t["prefer-const"]=e("./rules/prefer-const"),t["quote-props"]=e("./rules/quote-props"),t.quotes=e("./rules/quotes"),t.radix=e("./rules/radix"),t["semi-spacing"]=e("./rules/semi-spacing"),t.semi=e("./rules/semi"),t["sort-vars"]=e("./rules/sort-vars"),t["space-after-function-name"]=e("./rules/space-after-function-name"),t["space-after-keywords"]=e("./rules/space-after-keywords"),t["space-before-blocks"]=e("./rules/space-before-blocks"),t["space-before-function-paren"]=e("./rules/space-before-function-paren"),t["space-before-function-parentheses"]=e("./rules/space-before-function-parentheses"),t["space-in-brackets"]=e("./rules/space-in-brackets"),t["space-in-parens"]=e("./rules/space-in-parens"),t["space-infix-ops"]=e("./rules/space-infix-ops"),t["space-return-throw-case"]=e("./rules/space-return-throw-case"),t["space-unary-ops"]=e("./rules/space-unary-ops"),t["spaced-comment"]=e("./rules/spaced-comment"),t["spaced-line-comment"]=e("./rules/spaced-line-comment"),t.strict=e("./rules/strict"),t["use-isnan"]=e("./rules/use-isnan"),t["valid-jsdoc"]=e("./rules/valid-jsdoc"),t["valid-typeof"]=e("./rules/valid-typeof"),t["vars-on-top"]=e("./rules/vars-on-top"),t["wrap-iife"]=e("./rules/wrap-iife"),t["wrap-regex"]=e("./rules/wrap-regex"),t.yoda=e("./rules/yoda"),t}},{"./rules/accessor-pairs":150,"./rules/array-bracket-spacing":151,"./rules/block-scoped-var":152,"./rules/brace-style":153,"./rules/camelcase":154,"./rules/comma-dangle":155,"./rules/comma-spacing":156,"./rules/comma-style":157,"./rules/complexity":158,"./rules/computed-property-spacing":159,"./rules/consistent-return":160,"./rules/consistent-this":161,"./rules/curly":162,"./rules/default-case":163,"./rules/dot-location":164,"./rules/dot-notation":165,"./rules/eol-last":166,"./rules/eqeqeq":167,"./rules/func-names":168,"./rules/func-style":169,"./rules/generator-star":171,"./rules/generator-star-spacing":170,"./rules/global-strict":172,"./rules/guard-for-in":173,"./rules/handle-callback-err":174,"./rules/indent":175,"./rules/key-spacing":176,"./rules/linebreak-style":177,"./rules/lines-around-comment":178,"./rules/max-depth":179,"./rules/max-len":180,"./rules/max-nested-callbacks":181,"./rules/max-params":182,"./rules/max-statements":183,"./rules/new-cap":184,"./rules/new-parens":185,"./rules/newline-after-var":186,"./rules/no-alert":187,"./rules/no-array-constructor":188,"./rules/no-bitwise":189,"./rules/no-caller":190,"./rules/no-catch-shadow":191,"./rules/no-comma-dangle":192,"./rules/no-cond-assign":193,"./rules/no-console":194,"./rules/no-constant-condition":195,"./rules/no-continue":196,"./rules/no-control-regex":197,"./rules/no-debugger":198,"./rules/no-delete-var":199,"./rules/no-div-regex":200,"./rules/no-dupe-args":201,"./rules/no-dupe-keys":202,"./rules/no-duplicate-case":203,"./rules/no-else-return":204,"./rules/no-empty":208,"./rules/no-empty-character-class":205,"./rules/no-empty-class":206,"./rules/no-empty-label":207,"./rules/no-eq-null":209,"./rules/no-eval":210,"./rules/no-ex-assign":211,"./rules/no-extend-native":212,"./rules/no-extra-bind":213,"./rules/no-extra-boolean-cast":214,"./rules/no-extra-parens":215,"./rules/no-extra-semi":216,"./rules/no-extra-strict":217,"./rules/no-fallthrough":218,"./rules/no-floating-decimal":219,"./rules/no-func-assign":220,"./rules/no-implied-eval":221,"./rules/no-inline-comments":222,"./rules/no-inner-declarations":223,"./rules/no-invalid-regexp":224,"./rules/no-irregular-whitespace":225,"./rules/no-iterator":226,"./rules/no-label-var":227,"./rules/no-labels":228,"./rules/no-lone-blocks":229,"./rules/no-lonely-if":230,"./rules/no-loop-func":231,"./rules/no-mixed-requires":232,"./rules/no-mixed-spaces-and-tabs":233,"./rules/no-multi-spaces":234,"./rules/no-multi-str":235,"./rules/no-multiple-empty-lines":236,"./rules/no-native-reassign":237,"./rules/no-negated-in-lhs":238,"./rules/no-nested-ternary":239,"./rules/no-new":244,"./rules/no-new-func":240,"./rules/no-new-object":241,"./rules/no-new-require":242,"./rules/no-new-wrappers":243,"./rules/no-obj-calls":245,"./rules/no-octal":247,"./rules/no-octal-escape":246,"./rules/no-param-reassign":248,"./rules/no-path-concat":249,"./rules/no-plusplus":250,"./rules/no-process-env":251,"./rules/no-process-exit":252,"./rules/no-proto":253,"./rules/no-redeclare":254,"./rules/no-regex-spaces":255,"./rules/no-reserved-keys":256,"./rules/no-restricted-modules":257,"./rules/no-return-assign":258,"./rules/no-script-url":259,"./rules/no-self-compare":260,"./rules/no-sequences":261,"./rules/no-shadow":263,"./rules/no-shadow-restricted-names":262,"./rules/no-space-before-semi":264,"./rules/no-spaced-func":265,"./rules/no-sparse-arrays":266,"./rules/no-sync":267,"./rules/no-ternary":268,"./rules/no-throw-literal":269,"./rules/no-trailing-spaces":270,"./rules/no-undef":272,"./rules/no-undef-init":271,"./rules/no-undefined":273,"./rules/no-underscore-dangle":274,"./rules/no-unneeded-ternary":275,"./rules/no-unreachable":276,"./rules/no-unused-expressions":277,"./rules/no-unused-vars":278,"./rules/no-use-before-define":279,"./rules/no-var":280,"./rules/no-void":281,"./rules/no-warning-comments":282,"./rules/no-with":283,"./rules/no-wrap-func":284,"./rules/object-curly-spacing":285,"./rules/object-shorthand":286,"./rules/one-var":287,"./rules/operator-assignment":288,"./rules/operator-linebreak":289,"./rules/padded-blocks":290,"./rules/prefer-const":291,"./rules/quote-props":292,"./rules/quotes":293,"./rules/radix":294,"./rules/semi":296,"./rules/semi-spacing":295,"./rules/sort-vars":297,"./rules/space-after-function-name":298,"./rules/space-after-keywords":299,"./rules/space-before-blocks":300,"./rules/space-before-function-paren":301,"./rules/space-before-function-parentheses":302,"./rules/space-in-brackets":303,"./rules/space-in-parens":304,"./rules/space-infix-ops":305,"./rules/space-return-throw-case":306,"./rules/space-unary-ops":307,"./rules/spaced-comment":308,"./rules/spaced-line-comment":309,"./rules/strict":310,"./rules/use-isnan":311,"./rules/valid-jsdoc":312,"./rules/valid-typeof":313,"./rules/vars-on-top":314,"./rules/wrap-iife":315,"./rules/wrap-regex":316,"./rules/yoda":317}],148:[function(e,t){"use strict";function n(e,t,n,i,o,a){Object.defineProperty(this,"id",{value:e}),Object.defineProperty(this,"options",{value:i}),Object.defineProperty(this,"settings",{value:o}),Object.defineProperty(this,"ecmaFeatures",{value:Object.create(a)}),Object.freeze(this.ecmaFeatures),r.forEach(function(e){this[e]=function(){return t[e].apply(t,arguments)}},this),this.report=function(r,i,o,a){t.report(e,n,r,i,o,a)}}var r=["getAllComments","getAncestors","getComments","getFilename","getFirstToken","getFirstTokens","getJSDocComment","getLastToken","getLastTokens","getNodeByRangeIndex","getScope","getSource","getSourceLines","getTokenAfter","getTokenBefore","getTokenByRangeStart","getTokens","getTokensAfter","getTokensBefore","getTokensBetween","markVariableAsUsed","isMarkedAsUsed"];n.prototype={constructor:n},t.exports=n},{}],149:[function(e,t,n){"use strict";function r(e,t){a[e]=t}function i(e){var t=o(e);Object.keys(t).forEach(function(e){r(e,t[e])})}var o=e("./load-rules"),a=Object.create(null);n.define=r,n.load=i,n.import=function(e,t){Object.keys(e).forEach(function(n){var i=t+"/"+n,o=e[n];r(i,o)})},n.get=function(e){return a[e]},n.testClear=function(){a=Object.create(null)},i()},{"./load-rules":147}],150:[function(e,t){"use strict";t.exports=function(e){function t(t){for(var n=!1,o=!1,a=t.properties.length,s=0;a>s;s++){var u="init"===t.properties[s].kind?t.properties[s].key.name:t.properties[s].kind;switch(u){case"set":n=!0;break;case"get":o=!0}if(n&&o)break}i&&n&&!o?e.report(t,"Getter is not present"):r&&o&&!n&&e.report(t,"Setter is not present")}var n=e.options[0]||{},r=n.getWithoutSet===!0,i=n.setWithoutGet!==!1;return{ObjectExpression:function(e){(i||r)&&t(e)}}}},{}],151:[function(e,t){"use strict";t.exports=function(e){function t(t){return null!=e.options[1]?e.options[1][t]===!c:!1}function n(e,t){return e.range[1]<t.range[0]}function r(e,t){return e.loc.start.line===t.loc.start.line}function i(t,n){e.report(t,n.loc.start,"There should be no space after '"+n.value+"'")}function o(t,n){e.report(t,n.loc.start,"There should be no space before '"+n.value+"'")}function a(t,n){e.report(t,n.loc.start,"A space is required after '"+n.value+"'")}function s(t,n){e.report(t,n.loc.start,"A space is required before '"+n.value+"'")}function u(t){if(0!==t.elements.length){var u=e.getFirstToken(t),c=e.getFirstToken(t,1),p=e.getLastToken(t,1),f=e.getLastToken(t),d=l.objectsInArraysException&&"{"===c.value||l.arraysInArraysException&&"["===c.value||l.singleElementException&&1===t.elements.length?!l.spaced:l.spaced,h=l.objectsInArraysException&&"}"===p.value||l.arraysInArraysException&&"]"===p.value||l.singleElementException&&1===t.elements.length?!l.spaced:l.spaced;r(u,c)&&(d&&!n(u,c)&&a(t,u),!d&&n(u,c)&&i(t,u)),r(p,f)&&(h&&!n(p,f)&&s(t,f),!h&&n(p,f)&&o(t,f))}}var c="always"===e.options[0],l={spaced:c,singleElementException:t("singleValue"),objectsInArraysException:t("objectsInArrays"),arraysInArraysException:t("arraysInArrays")};return{ArrayPattern:u,ArrayExpression:u}},t.exports.schema=[{"enum":["always","never"]},{type:"object",properties:{singleValue:{type:"boolean"},objectsInArrays:{type:"boolean"},arraysInArrays:{type:"boolean"}},additionalProperties:!1}]},{}],152:[function(e,t){"use strict";t.exports=function(e){function t(e,t){switch(t.type){case"FunctionDeclaration":case"FunctionExpression":return t.params.indexOf(e)>-1||e===t.id;case"VariableDeclarator":return e===t.id;case"CatchClause":return e===t.param;default:return!1}}function n(e,t){switch(t.type){case"MemberExpression":return e===t.property&&!t.computed;case"Property":return e===t.key;default:return!1}}function r(){h.push([])}function i(){h.pop()}function o(e){[].push.apply(h[h.length-1],e)}function a(e){o([e.local.name]),e.imported&&e.imported.name!==e.local.name&&o([e.imported.name])}function s(e){e.id&&o([e.id.name]),r()}function u(e){r(),o([e.key.name])}function c(e){var t=[];switch(e.type){case"Identifier":t.push(e.name);break;case"ObjectPattern":e.properties.forEach(function(e){t.push(e.key.name),e.value&&t.push(e.value.name)});break;case"ArrayPattern":e.elements.forEach(function(e){e&&t.push(e.name)});break;case"AssignmentPattern":c(e.left);break;case"RestElement":c(e.argument)}o(t)}function l(e){r(),e.params.forEach(function(e){c(e)}),o(e.rest?[e.rest.name]:[]),o(["arguments"])}function p(e){o(e.id?[e.id.name]:[]),l(e)}function f(e){l(e),o(e.id?[e.id.name]:[])}function d(e){e.declarations.forEach(function(e){c(e.id)})}var h=[];return{Program:function(){var t=e.getScope();h=[t.variables.map(function(e){return e.name})],e.ecmaFeatures.globalReturn&&(t=t.childScopes[0],h.push(t.variables.map(function(e){return e.name})))},ImportSpecifier:a,ImportDefaultSpecifier:a,ImportNamespaceSpecifier:a,BlockStatement:function(e){var t=e.body;r(),t.forEach(function(e){"VariableDeclaration"===e.type?d(e):"FunctionDeclaration"===e.type&&o([e.id.name])})},VariableDeclaration:function(e){d(e)},"BlockStatement:exit":i,CatchClause:function(e){r(),o([e.param.name])},"CatchClause:exit":i,FunctionDeclaration:p,"FunctionDeclaration:exit":i,ClassDeclaration:s,"ClassDeclaration:exit":i,ClassExpression:s,"ClassExpression:exit":i,MethodDefinition:u,"MethodDefinition:exit":i,FunctionExpression:f,"FunctionExpression:exit":i,ArrowFunctionExpression:l,"ArrowFunctionExpression:exit":i,ForStatement:function(){r()},"ForStatement:exit":i,ForInStatement:function(){r()},"ForInStatement:exit":i,ForOfStatement:function(){r()},"ForOfStatement:exit":i,Identifier:function(r){var i=e.getAncestors().pop();if(!t(r,i)&&!n(r,i)&&"LabeledStatement"!==i.type){for(var o=0,a=h.length;a>o;o++)if(h[o].indexOf(r.name)>-1)return;e.report(r,'"'+r.name+'" used outside of binding context.')}}}},t.exports.schema=[]},{}],153:[function(e,t){"use strict";t.exports=function(e){function t(e){return e&&"BlockStatement"===e.type}function n(e){return"{"===e.value||"}"===e.value}function r(){var n=arguments;return function(r){[].forEach.call(n,function(n){var i,o,a,s,u=r[n];u=r[n],t(u)&&(i=e.getTokenBefore(u),o=e.getFirstToken(u),a=e.getLastToken(u),s=o.loc.start.line===a.loc.start.line,i.loc.start.line!==o.loc.start.line?e.report(r,l):u.body.length&&c.allowSingleLine?o.loc.start.line!==u.body[0].loc.start.line||s?a.loc.start.line!==u.body[u.body.length-1].loc.start.line||s||e.report(u.body[u.body.length-1],d):e.report(u.body[0],p):u.body.length&&o.loc.start.line===u.body[0].loc.start.line&&e.report(u.body[0],p))})}}function i(i){var o,a=!1,s=!1;r("consequent","alternate")(i),i.alternate&&(a=t(i.alternate),s="IfStatement"===i.alternate.type&&t(i.alternate.consequent),(a||s)&&(o=e.getTokensBefore(i.alternate,2),"1tbs"===u?o[0].loc.start.line!==o[1].loc.start.line&&n(o[0])&&e.report(i.alternate,f):"stroustrup"===u&&o[0].loc.start.line===o[1].loc.start.line&&e.report(i.alternate,h)))}function o(n){var i;r("block","finalizer")(n),t(n.finalizer)&&(i=e.getTokensBefore(n.finalizer,2),"1tbs"===u?i[0].loc.start.line!==i[1].loc.start.line&&e.report(n.finalizer,f):"stroustrup"===u&&i[0].loc.start.line===i[1].loc.start.line&&e.report(n.finalizer,h))}function a(n){var i=e.getTokenBefore(n),o=e.getFirstToken(n);r("body")(n),t(n.body)&&("1tbs"===u?i.loc.start.line!==o.loc.start.line&&e.report(n,f):"stroustrup"===u&&i.loc.start.line===o.loc.start.line&&e.report(n,h))}function s(t){var n;t.cases&&t.cases.length?(n=e.getTokensBefore(t.cases[0],2),n[0].loc.start.line!==n[1].loc.start.line&&e.report(t,l)):(n=e.getLastTokens(t,3),n[0].loc.start.line!==n[1].loc.start.line&&e.report(t,l))}var u=e.options[0]||"1tbs",c=e.options[1]||{},l="Opening curly brace does not appear on the same line as controlling statement.",p="Statement inside of curly braces should be on next line.",f="Closing curly brace does not appear on the same line as the subsequent block.",d="Closing curly brace should be on the same line as opening curly brace or on the line after the previous block.",h="Closing curly brace appears on the same line as the subsequent block.";return{FunctionDeclaration:r("body"),FunctionExpression:r("body"),ArrowFunctionExpression:r("body"),IfStatement:i,TryStatement:o,CatchClause:a,DoWhileStatement:r("body"),WhileStatement:r("body"),WithStatement:r("body"),ForStatement:r("body"),ForInStatement:r("body"),ForOfStatement:r("body"),SwitchStatement:s}},t.exports.schema=[{"enum":["1tbs","stroustrup"]},{type:"object",properties:{allowSingleLine:{type:"boolean"}},additionalProperties:!1}]},{}],154:[function(e,t){"use strict";t.exports=function(e){function t(e){return e.indexOf("_")>-1&&e!==e.toUpperCase()}function n(t){e.report(t,"Identifier '{{name}}' is not in camel case.",{name:t.name})}var r=e.options[0]||{},i=r.properties||"";return"always"!==i&&"never"!==i&&(i="always"),{Identifier:function(e){var r=e.name.replace(/^_+|_+$/g,""),o="MemberExpression"===e.parent.type?e.parent.parent:e.parent;if("MemberExpression"===e.parent.type){if("never"===i)return;"Identifier"===e.parent.object.type&&e.parent.object.name===e.name&&t(r)?n(e):"AssignmentExpression"===o.type&&t(r)&&("MemberExpression"!==o.right.type||"MemberExpression"===o.left.type&&o.left.property.name===e.name)&&n(e)}else if("Property"===e.parent.type){if("never"===i)return;t(r)&&"CallExpression"!==o.type&&n(e)}else t(r)&&"CallExpression"!==o.type&&n(e)}}},t.exports.schema=[{type:"object",properties:{properties:{"enum":["always","never"]}},additionalProperties:!1}]},{}],155:[function(e,t){"use strict";t.exports=function(e){function t(t){var a,s,u,c,l=t.properties||t.elements,p=l.length;p&&(s=l[p-1],s&&(u=e.getLastToken(t,1),c=","===u.value,r&&c?e.report(s,u.loc.start,i):"always-multiline"===n?(a=t.loc.end.line!==u.loc.end.line,c&&!a?e.report(s,u.loc.start,i):!c&&a&&e.report(s,u.loc.end,o)):"always"!==n||c||e.report(s,s.loc.end,o)))}var n=e.options[0],r="always-multiline"!==n&&"always"!==n,i="Unexpected trailing comma.",o="Missing trailing comma.";return{ObjectExpression:t,ArrayExpression:t}},t.exports.schema=[{"enum":["always","always-multiline","never"]}]},{}],156:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return u.reduce(function(n,r){return e.range[1]<=r.range[0]&&r.range[1]<=t.range[0]&&(n=n+r.range[1]-r.range[0]),n},0)}function n(n,r){var i=e.getTokensBetween(n,r).length,o=t(n,r);return n.range[1]+i+o<r.range[0]}function r(e,t){return e.loc.end.line===t.loc.start.line}function i(e){return!!e&&"Punctuator"===e.type&&","===e.value}function o(t,n){e.report(t,c[n]?"A space is required "+n+" ','.":"There should be no space "+n+" ','.")}function a(e,t){e.left&&r(e.left,e.comma)&&c.before!==n(e.left,e.comma)&&o(t,"before"),e.right&&r(e.comma,e.right)&&c.after!==n(e.comma,e.right)&&o(t,"after")}function s(e,t){for(var n;l<t.length;){if(n=t[l],n.range[0]<=e&&e<n.range[1])return!0;if(!(e>n.range[1]))break;l++}return!1}var u,c={before:e.options[0]?!!e.options[0].before:!1,after:e.options[0]?!!e.options[0].after:!0},l=0;return{Program:function(){var t,n,r,o=e.getSource(),c=/,/g;for(u=e.getAllComments();c.test(o);)s(c.lastIndex,u)||(t=e.getTokenByRangeStart(c.lastIndex-1),t&&"JSXText"!==t.type&&(n=e.getTokenBefore(t),r=e.getTokenAfter(t),a({comma:t,left:i(n)?null:n,right:i(r)?null:r},t)))}}},t.exports.schema=[{type:"object",properties:{before:{type:"boolean"},after:{type:"boolean"}},additionalProperties:!1}]},{}],157:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.loc.end.line===t.loc.start.line}function n(e){return!!e&&"Punctuator"===e.type&&","===e.value}function r(n,r,i,a){t(r,i)&&t(n,r)||(t(r,i)||t(n,r)?"first"!==o||t(r,i)?"last"===o&&t(r,i)&&e.report(a,{line:r.loc.end.line,column:r.loc.end.column},"',' should be placed last."):e.report(a,"',' should be placed first."):e.report(a,{line:r.loc.end.line,column:r.loc.start.column},"Bad line breaking before and after ','."))}function i(t,i){var o,a=t[i],s="ArrayExpression"===t.type;if((a.length>1||s)&&(o=e.getFirstToken(t),a.forEach(function(t){var i=t?e.getTokenBefore(t):o,a=t?e.getFirstToken(t):e.getTokenAfter(i),s=t||a;n(i)&&r(o,i,a,s),o=t?e.getLastToken(t):o}),s)){var u=e.getLastToken(t),c=e.getTokenBefore(u);n(c)&&r(e.getTokenBefore(c),c,u,u)}}var o=e.options[0]||"last",a={};2===e.options.length&&e.options[1].hasOwnProperty("exceptions")&&(a=e.options[1].exceptions);var s={};return a.VariableDeclaration||(s.VariableDeclaration=function(e){i(e,"declarations")}),a.ObjectExpression||(s.ObjectExpression=function(e){i(e,"properties")}),a.ArrayExpression||(s.ArrayExpression=function(e){i(e,"elements")}),s},t.exports.schema=[{"enum":["first","last"]},{type:"object",properties:{exceptions:{type:"object",additionalProperties:{type:"boolean"}}},additionalProperties:!1}]},{}],158:[function(e,t){"use strict";t.exports=function(e){function t(){s.push(1)}function n(t){var n=s.pop(),r="anonymous";t.id?r=t.id.name:"MethodDefinition"===t.parent.type&&(r=t.parent.key.name),n>a&&e.report(t,"Function '{{name}}' has a complexity of {{complexity}}.",{name:r,complexity:n})}function r(){s.length&&s[s.length-1]++}function i(e){e.test&&r(e)}function o(e){"||"===e.operator&&r(e)}var a=e.options[0],s=[];return{FunctionDeclaration:t,FunctionExpression:t,ArrowFunctionExpression:t,"FunctionDeclaration:exit":n,"FunctionExpression:exit":n,"ArrowFunctionExpression:exit":n,CatchClause:r,ConditionalExpression:r,LogicalExpression:o,ForStatement:r,ForInStatement:r,ForOfStatement:r,IfStatement:r,SwitchCase:i,WhileStatement:r,DoWhileStatement:r}},t.exports.schema=[{type:"integer"}]},{}],159:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.range[1]<t.range[0]}function n(e,t){return e.loc.start.line===t.loc.start.line}function r(t,n){e.report(t,n.loc.start,"There should be no space after '"+n.value+"'")}function i(t,n){e.report(t,n.loc.start,"There should be no space before '"+n.value+"'")}function o(t,n){e.report(t,n.loc.start,"A space is required after '"+n.value+"'")}function a(t,n){e.report(t,n.loc.start,"A space is required before '"+n.value+"'")}function s(s){return function(c){if(c.computed){var l=c[s],p=e.getTokenBefore(l),f=e.getFirstToken(l),d=e.getLastToken(l),h=e.getTokenAfter(l);n(p,f)&&(u?!t(p,f)&&n(p,f)&&o(c,p):t(p,f)&&r(c,p)),n(d,h)&&(u?!t(d,h)&&n(d,h)&&a(c,h):t(d,h)&&i(c,h))}}}var u="always"===e.options[0];return{Property:s("key"),MemberExpression:s("property")}},t.exports.schema=[{"enum":["always","never"]}]},{}],160:[function(e,t){"use strict";t.exports=function(e){function t(){r.push({})}function n(){r.pop()}var r=[];return{Program:t,FunctionDeclaration:t,FunctionExpression:t,ArrowFunctionExpression:t,"Program:exit":n,"FunctionDeclaration:exit":n,"FunctionExpression:exit":n,"ArrowFunctionExpression:exit":n,ReturnStatement:function(t){var n=r[r.length-1],i="type"in n;i?n.type!==!!t.argument&&e.report(t,"Expected "+(n.type?"a":"no")+" return value."):n.type=!!t.argument}}},t.exports.schema=[]},{}],161:[function(e,t){"use strict";t.exports=function(e){function t(t){e.report(t,"Designated alias '{{alias}}' is not assigned to 'this'.",{alias:i})}function n(n,r,o){var a="ThisExpression"===o.type;r===i?(!a||n.operator&&"="!==n.operator)&&t(n):a&&e.report(n,"Unexpected alias '{{name}}' for 'this'.",{name:r})}function r(){var n=e.getScope();n.variables.some(function(e){var r;return e.name===i?e.defs.some(function(e){return"VariableDeclarator"===e.node.type&&null!==e.node.init})?!0:(r="global"===n.type?n:e,r.references.some(function(e){var t=e.writeExpr;return e.from===n&&t&&"ThisExpression"===t.type&&"="===t.parent.operator?!0:void 0})||e.defs.map(function(e){return e.node}).forEach(t),!0):void 0})}var i=e.options[0];return{"Program:exit":r,"FunctionExpression:exit":r,"FunctionDeclaration:exit":r,VariableDeclarator:function(e){var t=e.id,r="ArrayPattern"===t.type||"ObjectPattern"===t.type;null===e.init||r||n(e,t.name,e.init)},AssignmentExpression:function(e){"Identifier"===e.left.type&&n(e,e.left.name,e.right)}}},t.exports.schema=[{type:"string"}]},{}],162:[function(e,t){"use strict";t.exports=function(e){function t(t){var n=e.getTokenBefore(t),r=e.getLastToken(t);return n.loc.start.line===r.loc.end.line}function n(n,o,a,s){var u="BlockStatement"===o.type;r?u&&1===o.body.length&&e.report(n,"Unnecessary { after '{{name}}'{{suffix}}.",{name:a,suffix:s?" "+s:""}):i?u||t(o)||e.report(n,"Expected { after '{{name}}'{{suffix}}.",{name:a,suffix:s?" "+s:""}):u||e.report(n,"Expected { after '{{name}}'{{suffix}}.",{name:a,suffix:s?" "+s:""})}var r="multi"===e.options[0],i="multi-line"===e.options[0];return{IfStatement:function(e){n(e,e.consequent,"if","condition"),e.alternate&&"IfStatement"!==e.alternate.type&&n(e,e.alternate,"else")},WhileStatement:function(e){n(e,e.body,"while","condition")},DoWhileStatement:function(e){n(e,e.body,"do")},ForStatement:function(e){n(e,e.body,"for","condition")}}},t.exports.schema=[{"enum":["all","multi","multi-line"]}]},{}],163:[function(e,t){"use strict";var n="no default";t.exports=function(e){function t(e){return e[e.length-1]}return{SwitchStatement:function(r){if(r.cases.length){var i=r.cases.some(function(e){return null===e.test});if(!i){var o,a,s=t(r.cases);a=e.getComments(s).trailing,a.length&&(o=t(a)),o&&o.value.trim()===n||e.report(r,"Expected a default case.")}}}}},t.exports.schema=[]
},{}],164:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.loc.end.line===t.loc.start.line}function n(n,r,i){var a=e.getTokenBefore(r);"Punctuator"===a.type&&"."===a.value&&(o?t(n,a)||e.report(i,a.loc.start,"Expected dot to be on same line as object."):t(a,r)||e.report(i,a.loc.start,"Expected dot to be on same line as property."))}function r(e){n(e.object,e.property,e)}var i=e.options[0],o="object"===i||!i;return{MemberExpression:r}}},{}],165:[function(e,t){"use strict";var n=/^[a-zA-Z_$][a-zA-Z0-9_$]*$/,r=["this","function","if","return","var","else","for","new","in","typeof","while","case","break","try","catch","delete","throw","switch","continue","default","instanceof","do","void","finally","with","debugger","implements","interface","package","private","protected","public","static","class","enum","export","extends","import","super","true","false","null","abstract","boolean","byte","char","const","double","final","float","goto","int","long","native","short","synchronized","throws","transient","volatile"];t.exports=function(e){var t,i=e.options[0]||{},o=void 0===i.allowKeywords||!!i.allowKeywords;return i.allowPattern&&(t=new RegExp(i.allowPattern)),{MemberExpression:function(i){i.computed&&"Literal"===i.property.type&&n.test(i.property.value)&&(o||-1===r.indexOf(""+i.property.value))&&(t&&t.test(i.property.value)||e.report(i,"["+JSON.stringify(i.property.value)+"] is better written in dot notation.")),o||i.computed||-1===r.indexOf(""+i.property.name)||e.report(i,"."+i.property.name+" is a syntax error.")}}},t.exports.schema=[{type:"object",properties:{allowKeywords:{type:"boolean"},allowPattern:{type:"string"}},additionalProperties:!1}]},{}],166:[function(e,t){"use strict";t.exports=function(e){return{Program:function(t){var n=e.getSource(),r={column:1};0!==n.length&&"\n"!==n[n.length-1]&&(r.line=n.split(/\n/g).length,e.report(t,r,"Newline required at end of file but not found."))}}},t.exports.schema=[]},{}],167:[function(e,t){"use strict";t.exports=function(e){function t(e){return"UnaryExpression"===e.type&&"typeof"===e.operator}function n(e){return t(e.left)||t(e.right)}function r(e){return"Literal"===e.left.type&&"Literal"===e.right.type&&typeof e.left.value==typeof e.right.value}function i(e){return"Literal"===e.right.type&&null===e.right.value||"Literal"===e.left.type&&null===e.left.value}function o(t){var n=e.getTokenAfter(t.left);return{line:n.loc.start.line,column:n.loc.start.column}}return{BinaryExpression:function(t){("=="===t.operator||"!="===t.operator)&&("smart"===e.options[0]&&(n(t)||r(t))||i(t)||"allow-null"===e.options[0]&&i(t)||e.report(t,o(t),"Expected '{{op}}=' and instead saw '{{op}}'.",{op:t.operator}))}}},t.exports.schema=[{"enum":["smart","allow-null"]}]},{}],168:[function(e,t){"use strict";t.exports=function(e){function t(){var t=e.getAncestors().pop();return"MethodDefinition"===t.type||"Property"===t.type&&(t.method||"get"===t.kind||"set"===t.kind)}return{FunctionExpression:function(n){var r=n.id&&n.id.name;r||t()||e.report(n,"Missing function expression name.")}}},t.exports.schema=[]},{}],169:[function(e,t){"use strict";t.exports=function(e){var t=e.options[0],n="declaration"===t;return{FunctionDeclaration:function(t){n||e.report(t,"Expected a function expression.")},FunctionExpression:function(){var t=e.getAncestors().pop();n&&"VariableDeclarator"===t.type&&e.report(t,"Expected a function declaration.")},ArrowFunctionExpression:function(){var t=e.getAncestors().pop();n&&"VariableDeclarator"===t.type&&e.report(t,"Expected a function declaration.")}}},t.exports.schema=[{"enum":["declaration","expression"]}]},{}],170:[function(e,t){"use strict";t.exports=function(e){function t(t,n,i){!!(i.range[0]-n.range[1])!==r[t]&&e.report("*"===n.value?n:i,"{{type}} space {{side}} *.",{type:r[t]?"Missing":"Unexpected",side:t})}function n(n){var r,i,o;n.generator&&(i=n.parent.method||"MethodDefinition"===n.parent.type?e.getTokenBefore(n,1):e.getFirstToken(n,1),r=e.getTokenBefore(i),("function"===r.value||"static"===r.value)&&t("before",r,i),o=e.getTokenAfter(i),"Identifier"===o.type&&t("after",i,o))}var r={before:{before:!0,after:!1},after:{before:!1,after:!0},both:{before:!0,after:!0},neither:{before:!1,after:!1}}[e.options[0]||"before"];return{FunctionDeclaration:n,FunctionExpression:n}},t.exports.schema=[{"enum":["before","after","both","neither"]}]},{}],171:[function(e,t){"use strict";t.exports=function(e){function t(t){var r;t.generator&&(e.getAncestors().pop().method||(r=e.getFirstToken(t,1),"end"===n&&r.range[1]!==e.getTokenAfter(r).range[0]&&e.report(t,"Expected a space before *."),"start"===n&&r.range[0]!==e.getTokenBefore(r).range[1]&&e.report(t,"Expected no space before *."),"middle"===n&&(r.range[0]<=e.getTokenBefore(r).range[1]||r.range[1]>=e.getTokenAfter(r).range[0])&&e.report(t,"Expected spaces around *.")))}var n=e.options[0]||"end";return{FunctionDeclaration:t,FunctionExpression:t}},t.exports.schema=[{"enum":["start","middle","end"]}]},{}],172:[function(e,t){"use strict";t.exports=function(e){var t=e.options[0];return"always"===t?{Program:function(t){if(t.body.length>0){var n=t.body[0];("ExpressionStatement"!==n.type||"use strict"!==n.expression.value)&&e.report(t,'Use the global form of "use strict".')}}}:{ExpressionStatement:function(t){var n=e.getAncestors().pop();"use strict"===t.expression.value&&"Program"===n.type&&e.report(t,'Use the function form of "use strict".')}}},t.exports.schema=[{"enum":["always","never"]}]},{}],173:[function(e,t){"use strict";t.exports=function(e){return{ForInStatement:function(t){var n="BlockStatement"===t.body.type?t.body.body[0]:t.body;n&&"IfStatement"!==n.type&&e.report(t,"The body of a for-in should be wrapped in an if statement to filter unwanted properties from the prototype.")}}},t.exports.schema=[]},{}],174:[function(e,t){"use strict";t.exports=function(e){function t(e){var t=e[0];return"^"===t}function n(e){if(t(a)){var n=new RegExp(a);return n.test(e)}return e===a}function r(e){u++;var t=e.params&&e.params[0];t&&n(t.name)&&s.push({handled:!1,depth:u,errorVariableName:t.name})}function i(t){var n=s[s.length-1]||{};n.depth===u&&(s.pop(),n.handled||e.report(t,"Expected error to be handled.")),u--}function o(e){if(s.length>0){var t=s[s.length-1]||{},n=e.name===t.errorVariableName,r=["FunctionDeclaration","ArrowFunctionExpression","FunctionExpression","CatchClause"],i=-1===r.indexOf(e.parent.type);n&&i&&(t.handled=!0)}}var a=e.options[0]||"err",s=[],u=0;return{FunctionDeclaration:r,FunctionExpression:r,ArrowFunctionExpression:r,Identifier:o,"FunctionDeclaration:exit":i,"FunctionExpression:exit":i,"ArrowFunctionExpression:exit":i}},t.exports.schema=[{type:"string"}]},{}],175:[function(e,t){"use strict";t.exports=function(e){function t(e){S[e].check=!0}function n(e){t(e.loc.start.line-1)}function r(e,t){S[e.loc.start.line-1].push.push(t)}function i(e,t){S[e.loc.end.line-1].pop.push(t)}function o(e){S[e.loc.start.line-1].pushAltLine.push(e.loc.end.line-1)}function a(e,n){r(e,n),t(e.loc.end.line-1)}function s(e,t){var n=p(t);n?(null===E&&(E=e.loc.start.column===n.loc.start.column?1:0),i(n,E)):i(e,0)}function u(e){d(e).forEach(function(t){(t.loc.start.line!==e.loc.start.line||"Program"===e.type)&&n(t)})}function c(e,t){var r=e[t];r&&"BlockStatement"===r.type&&n(r)}function l(e){return e.loc.start.line!==e.loc.end.line}function p(e){var t;return e.some(function(e){return"BreakStatement"===e.type?(t=e,!0):void 0}),t}function f(e){var t=e.parent;return"IfStatement"===t.type&&t.alternate===e?e:"DoWhileStatement"===t.type?e:-1===T.indexOf(t.type)?e:t}function d(e){var t=P[e.type];return e[t]}function h(e){var t=new RegExp("[^"+y+"]"),n=b[e].search(t);return-1===n&&(n=b[e].length),n}function m(t){S.forEach(function(n,r){var i=h(r),o=g(n,i);n.check&&i!==o&&(e.report(t,{line:r+1,column:o},"Expected indentation of "+o+" characters."),i=o),n.push.length&&v(n,i)})}function g(e,t){var n=_*Math.max.apply(null,e.pop),r=w.length-1,i=w[r];return Array.isArray(i)||(i=[i]),i=i.map(function(t){return e.pop.length&&(t-=n),t}).reduce(function(e,n){return t===n?n:e}),w[r]=i,e.pop.forEach(function(){w.pop()}),i}function v(e,t){var n=Math.max.apply(null,e.push),r=t+_*n;e.pushAltLine.length&&(r=[r],e.pushAltLine.forEach(function(e){r.push(h(e)+_*n)})),e.push.forEach(function(){w.push(r)})}var y=" ",_=4,x={indentSwitchCase:!1},b=null,w=[0],S=null,E=null;if(e.options.length&&("tab"===e.options[0]?(y="	",_=1):"number"==typeof e.options[0]&&(_=e.options[0]),e.options[1])){var C=e.options[1];x.indentSwitchCase=C.indentSwitchCase===!0}var T=["IfStatement","WhileStatement","DoWhileStatement","ForStatement","ForInStatement","ForOfStatement","FunctionDeclaration","FunctionExpression","ArrowExpression","CatchClause","WithStatement"],P={BlockStatement:"body",Program:"body",ObjectExpression:"properties",ArrayExpression:"elements",SwitchStatement:"cases"};return x.indentSwitchCase&&(P.SwitchCase="consequent"),{Program:function(t){b=e.getSourceLines(),S=b.map(function(){return{push:[],pushAltLine:[],pop:[],check:!1}}),l(t)&&u(t)},"Program:exit":function(e){m(e)},BlockStatement:function(e){l(e)&&(u(e),i(e,1),a(f(e),1))},IfStatement:function(e){c(e,"alternate")},TryStatement:function(e){c(e,"handler"),c(e,"finalizer")},SwitchStatement:function(e){if(l(e)){var t=1,n=d(e);n.length&&e.loc.start.column===n[0].loc.start.column&&(t=0),u(e),i(e,t),a(e,t)}},SwitchCase:function(e){if(x.indentSwitchCase&&l(e)){var t=d(e);(1!==t.length||"BlockStatement"!==t[0].type)&&(r(e,1),n(e),u(e),s(e,t))}},FunctionDeclaration:function(e){o(e)},FunctionExpression:function(e){o(e)}}},t.exports.schema=[{oneOf:[{"enum":["tab"]},{type:"integer"}]},{type:"object",properties:{indentSwitchCase:{type:"boolean"}},additionalProperties:!1}]},{}],176:[function(e,t){"use strict";function n(e){return/[\n\r\u2028\u2029]/.test(e)}function r(e){return e[e.length-1]}function i(e,t){var n,i,o=e.loc.start.line,a=t.loc.start.line;if(1>=a-o)return!0;if(n=t.leadingComments,n&&n[0].loc.start.line-o<=1&&a-r(n).loc.end.line<=1){for(i=1;i<n.length;i++)if(n[i].loc.start.line-n[i-1].loc.end.line>1)return!1;return!0}return!1}function o(e){return e.loc.end.line===e.loc.start.line}var a={key:'{{error}} space after {{computed}}key "{{key}}".',value:'{{error}} space before value for {{computed}}key "{{key}}".'};t.exports=function(e){function t(t){var n=t.key;return t.computed?e.getSource().slice(n.range[0],n.range[1]):t.key.name||t.key.value}function s(r,i,o,s){var u=o.length-s,c=r.key,l=e.getTokenAfter(c,1),p="key"===i?c.loc.start:l.loc.start;!u||s&&n(o)||e.report(r[i],p,a[i],{error:u>0?"Extra":"Missing",computed:r.computed?"computed ":"",key:t(r)})}function u(t){var n,r,i=t.key;return t.computed?(n=e.getTokenBefore(i),r=e.getTokenAfter(i),r.range[1]-n.range[0]):"Identifier"===i.type?i.name.length:"Literal"===i.type?i.raw.length:void 0}function c(t){var n=/(\s*):(\s*)/.exec(e.getSource().slice(t.key.range[1],t.value.range[0]));return n?{beforeColon:n[1],afterColon:n[2]}:void 0}function l(e){return 1===e.properties.length?[e.properties]:e.properties.reduce(function(e,t){var n=r(e),o=r(n);return!o||i(o,t)?n.push(t):e.push([t]),e},[[]])}function p(e){var t,n,r,i,o=e.length,a=e.map(u),l=Math.max.apply(null,a);for(l+="colon"===g?v:y,t=0;o>t;t++)n=e[t],r=c(n),r&&(i=a[t],"value"===g?(s(n,"key",r.beforeColon,v),s(n,"value",r.afterColon,l-i)):(s(n,"key",r.beforeColon,l-i),s(n,"value",r.afterColon,y)))}function f(e){l(e).forEach(function(e){p(e)})}function d(e){var t=c(e);t&&(s(e,"key",t.beforeColon,v),s(e,"value",t.afterColon,y))}function h(e){for(var t=e.length,n=0;t>n;n++)d(e[n])}var m=e.options[0]||{},g=m.align,v=+!!m.beforeColon,y=+!(m.afterColon===!1);return g?{ObjectExpression:function(e){o(e)?h(e.properties):f(e)}}:{Property:function(e){d(e)}}},t.exports.schema=[{type:"object",properties:{align:{"enum":["colon","value"]},beforeColon:{type:"boolean"},afterColon:{type:"boolean"}},additionalProperties:!1}]},{}],177:[function(e,t){"use strict";t.exports=function(e){var t="Expected linebreaks to be 'LF' but found 'CRLF'.",n="Expected linebreaks to be 'CRLF' but found 'LF'.";return{Program:function(r){var i=e.options[0]||"unix",o="unix"===i,a=e.getSource().match(/\r\n|\r|\n|\u2028|\u2029/g),s=-1;null!==a&&(s=a.indexOf(o?"\r\n":"\n")),-1!==s&&e.report(r,{line:s+1,column:e.getSourceLines()[s].length},o?t:n)}}},t.exports.schema=[{"enum":["unix","windows"]}]},{}],178:[function(e,t){"use strict";function n(e){var t=e.map(function(e,t){return{code:e.trim(),num:t+1}}).filter(function(e){return!e.code}).map(function(e){return e.num});return t}function r(e){var t=[];return e.forEach(function(e){var n=e.loc.start.line,r=e.loc.end.line;t.push(n,r)}),t}function i(e,t){return t.indexOf(e)>-1}t.exports=function(e){function t(t){var n=e.getSourceLines(),r=n[t.loc.start.line-1],i=n[t.loc.end.line-1],o=r.slice(0,t.loc.start.column).trim(),a=i.slice(t.loc.end.column).trim();return!(!o&&!a)}function o(t){var n,r=e.getAncestors();return r.length&&(n=r.pop()),n&&("BlockStatement"===n.type||"BlockStatement"===n.body.type)&&1===t.loc.start.line-n.loc.start.line}function a(t){var n,r=e.getAncestors();return r.length&&(n=r.pop()),n&&("BlockStatement"===n.type||"BlockStatement"===n.body.type)&&1===n.loc.end.line-t.loc.end.line}function s(s,c){var l=e.getSourceLines(),p=l.length+1,f=e.getAllComments(),d=r(f),h=n(l),m=d.concat(h),g=c.after,v=c.before,y=s.loc.start.line-1,_=s.loc.end.line+1,x=t(s),b=u.allowBlockStart&&o(s),w=u.allowBlockEnd&&a(s);1>y&&(v=!1),_>=p&&(g=!1),x||(b||!v||i(y,m)||e.report(s,"Expected line before comment."),w||!g||i(_,m)||e.report(s,"Expected line after comment."))}var u=e.options[0]||{};return u.beforeLineComment=u.beforeLineComment||!1,u.afterLineComment=u.afterLineComment||!1,u.beforeBlockComment="undefined"!=typeof u.beforeBlockComment?u.beforeBlockComment:!0,u.afterBlockComment=u.afterBlockComment||!1,u.allowBlockStart=u.allowBlockStart||!1,u.allowBlockEnd=u.allowBlockEnd||!1,{LineComment:function(e){(u.beforeLineComment||u.afterLineComment)&&s(e,{after:u.afterLineComment,before:u.beforeLineComment})},BlockComment:function(e){(u.beforeBlockComment||u.afterBlockComment)&&s(e,{after:u.afterBlockComment,before:u.beforeBlockComment})}}},t.exports.schema=[{type:"object",properties:{beforeBlockComment:{type:"boolean"},afterBlockComment:{type:"boolean"},beforeLineComment:{type:"boolean"},afterLineComment:{type:"boolean"},allowBlockStart:{type:"boolean"},allowBlockEnd:{type:"boolean"}},additionalProperties:!1}]},{}],179:[function(e,t){"use strict";t.exports=function(e){function t(){o.push(0)}function n(){o.pop()}function r(t){var n=++o[o.length-1];n>a&&e.report(t,"Blocks are nested too deeply ({{depth}}).",{depth:n})}function i(){o[o.length-1]--}var o=[],a=e.options[0]||4;return{Program:t,FunctionDeclaration:t,FunctionExpression:t,ArrowFunctionExpression:t,IfStatement:function(e){"IfStatement"!==e.parent.type&&r(e)},SwitchStatement:r,TryStatement:r,DoWhileStatement:r,WhileStatement:r,WithStatement:r,ForStatement:r,ForInStatement:r,ForOfStatement:r,"IfStatement:exit":i,"SwitchStatement:exit":i,"TryStatement:exit":i,"DoWhileStatement:exit":i,"WhileStatement:exit":i,"WithStatement:exit":i,"ForStatement:exit":i,"ForInStatement:exit":i,"ForOfStatement:exit":i,"FunctionDeclaration:exit":n,"FunctionExpression:exit":n,"ArrowFunctionExpression:exit":n,"Program:exit":n}},t.exports.schema=[{type:"integer"}]},{}],180:[function(e,t){"use strict";t.exports=function(e){function t(e,t){var n="";for(t|=0;t>0;t>>>=1,e+=e)1&t&&(n+=e);return n}function n(t){var n=e.getSourceLines();n.forEach(function(n,r){n.replace(/\t/g,o).length>i&&e.report(t,{line:r+1,col:1},"Line "+(r+1)+" exceeds the maximum line length of "+i+".")})}var r=e.options[1]||4,i=e.options[0]||80,o=t(" ",r);return{Program:n}},t.exports.schema=[{type:"integer",minimum:0},{type:"integer",minimum:0}]},{}],181:[function(e,t){"use strict";t.exports=function(e){function t(t){var n=t.parent;if("CallExpression"===n.type&&i.push(t),i.length>r){var o={num:i.length,max:r};e.report(t,"Too many nested callbacks ({{num}}). Maximum allowed is {{max}}.",o)}}function n(){i.pop()}var r=e.options[0],i=[];return{ArrowFunctionExpression:t,"ArrowFunctionExpression:exit":n,FunctionExpression:t,"FunctionExpression:exit":n}},t.exports.schema=[{type:"integer"}]},{}],182:[function(e,t){"use strict";t.exports=function(e){function t(t){t.params.length>n&&e.report(t,"This function has too many parameters ({{count}}). Maximum allowed is {{max}}.",{count:t.params.length,max:n})}var n=e.options[0]||3;return{FunctionDeclaration:t,ArrowFunctionExpression:t,FunctionExpression:t}},t.exports.schema=[{type:"integer"}]},{}],183:[function(e,t){"use strict";t.exports=function(e){function t(){i.push(0)}function n(t){var n=i.pop();n>o&&e.report(t,"This function has too many statements ({{count}}). Maximum allowed is {{max}}.",{count:n,max:o})}function r(e){i[i.length-1]+=e.body.length}var i=[],o=e.options[0]||10;return{FunctionDeclaration:t,FunctionExpression:t,ArrowFunctionExpression:t,BlockStatement:r,"FunctionDeclaration:exit":n,"FunctionExpression:exit":n,"ArrowFunctionExpression:exit":n}},t.exports.schema=[{type:"integer"}]},{}],184:[function(e,t){"use strict";function n(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)&&!Array.isArray(e[t]))throw new TypeError(t+", if provided, must be an Array");return e[t]||n}function r(e,t){return e[t]=!0,e}function i(e){var t=n(e,"capIsNewExceptions",o);return t!==o&&(t=t.concat(o)),t.reduce(r,{})}var o=["Array","Boolean","Date","Error","Function","Number","Object","RegExp","String","Symbol"];t.exports=function(e){function t(e){var t,n="";return"MemberExpression"===e.callee.type?(t=e.callee.property,"Literal"===t.type&&"string"==typeof t.value?n=t.value:"Identifier"!==t.type||e.callee.computed||(n=t.name)):n=e.callee.name,n}function o(e){var t=e.charAt(0),n=t.toLowerCase(),r=t.toUpperCase();return n===r?"non-alpha":t===n?"lower":"upper"}function a(e,t,n){return e[n]?!0:"UTC"===n&&"MemberExpression"===t.callee.type?"Identifier"===t.callee.object.type&&"Date"===t.callee.object.name:!1}function s(t,n){var r=t.callee;"MemberExpression"===r.type&&(r=r.property),e.report(t,r.loc.start,n)}var u=e.options[0]||{};u.newIsCap=u.newIsCap!==!1,u.capIsNew=u.capIsNew!==!1;var c=n(u,"newIsCapExceptions",[]).reduce(r,{}),l=i(u),p={};return u.newIsCap&&(p.NewExpression=function(e){var n=t(e);if(n){var r=o(n),i="lower"!==r||a(c,e,n);i||s(e,"A constructor name should not start with a lowercase letter.")}}),u.capIsNew&&(p.CallExpression=function(e){var n=t(e);if(n){var r=o(n),i="upper"!==r||a(l,e,n);i||s(e,"A function with a name starting with an uppercase letter should only be used as a constructor.")}}),p},t.exports.schema=[{type:"object",properties:{newIsCap:{type:"boolean"},capIsNew:{type:"boolean"},newIsCapExceptions:{type:"array",items:{type:"string"}},capIsNewExceptions:{type:"array",items:{type:"string"}}},additionalProperties:!1}]},{}],185:[function(e,t){"use strict";t.exports=function(e){return{NewExpression:function(t){var n=e.getTokens(t),r=n.filter(function(e){return"("===e.value||")"===e.value});r.length<2&&e.report(t,"Missing '()' invoking a constructor")}}},t.exports.schema=[]},{}],186:[function(e,t){"use strict";t.exports=function(e){function t(e){return"var"===e||"let"===e||"const"===e}function n(e){return"ForStatement"===e||"ForInStatement"===e||"ForOfStatement"===e}function r(e){return"ExportNamedDeclaration"===e||"ExportSpecifier"===e||"ExportDefaultDeclaration"===e||"ExportAllDeclaration"===e}function i(i){var c,l,p=e.getLastToken(i),f=e.getTokenAfter(i),d=p.loc.end.line+1;f&&(n(i.parent.type)||r(i.parent.type)||"Keyword"===f.type&&t(f.value)||(c=f.loc.start.line>d,l=u.indexOf(d)>=0,"never"===s&&c&&!l&&e.report(i,a,{identifier:i.name}),"always"!==s||c&&!l||e.report(i,o,{identifier:i.name})))}var o="Expected blank line after variable declarations.",a="Unexpected blank line after variable declarations.",s="never"===e.options[0]?"never":"always",u=e.getAllComments().map(function(e){return e.loc.start.line});return{VariableDeclaration:i}},t.exports.schema=[{"enum":["never","always"]}]},{}],187:[function(e,t){"use strict";function n(e){return/^(alert|confirm|prompt)$/.test(e)}function r(e,t,n){e.report(t,"Unexpected {{name}}.",{name:n})}function i(e){return e.computed?"Literal"===e.property.type?e.property.value:void 0:e.property.name}function o(e,t){var n=e.references.filter(function(e){return e.identifier.range[0]===t.range[0]&&e.identifier.range[1]===t.range[1]});return 1===n.length?n[0]:void 0}function a(e,t){return e.variables.some(function(e){return e.name===t&&e.defs.length>0})}function s(e,t,n){var r=o(e,n),i=n.name;return r&&(r.resolved||a(t,i))?!0:!1}function u(e,t,n){return"global"===e.type&&"ThisExpression"===n.type?!0:"window"===n.name?!s(e,t,n):!1}t.exports=function(e){var t;return{Program:function(){t=e.getScope()},CallExpression:function(o){var a,c=o.callee,l=e.getScope();"Identifier"===c.type?(a=c.name,!s(l,t,c)&&n(c.name)&&r(e,o,a)):"MemberExpression"===c.type&&u(l,t,c.object)&&(a=i(c),n(a)&&r(e,o,a))}}},t.exports.schema=[]},{}],188:[function(e,t){"use strict";t.exports=function(e){function t(t){1!==t.arguments.length&&"Identifier"===t.callee.type&&"Array"===t.callee.name&&e.report(t,"The array literal notation [] is preferrable.")}return{CallExpression:t,NewExpression:t}},t.exports.schema=[]},{}],189:[function(e,t){"use strict";t.exports=function(e){function t(t){e.report(t,"Unexpected use of '{{operator}}'.",{operator:t.operator})}function n(e){return-1!==i.indexOf(e.operator)}function r(e){n(e)&&t(e)}var i=["^","|","&","<<",">>",">>>","^=","|=","&=","<<=",">>=",">>>=","~"];return{AssignmentExpression:r,BinaryExpression:r,UnaryExpression:r}},t.exports.schema=[]},{}],190:[function(e,t){"use strict";t.exports=function(e){return{MemberExpression:function(t){var n=t.object.name,r=t.property.name;"arguments"===n&&!t.computed&&r&&r.match(/^calle[er]$/)&&e.report(t,"Avoid arguments.{{property}}.",{property:r})}}},t.exports.schema=[]},{}],191:[function(e,t){"use strict";t.exports=function(e){function t(e,n){var r=e.variables.some(function(e){return e.name===n});return r?!0:e.upper?t(e.upper,n):!1}return{CatchClause:function(n){var r=e.getScope();t(r,n.param.name)&&e.report(n,"Value of '{{name}}' may be overwritten in IE 8 and earlier.",{name:n.param.name})}}},t.exports.schema=[]},{}],192:[function(e,t){"use strict";t.exports=function(e){function t(t){var n,r,i=t.properties||t.elements,o=i.length;o&&(n=i[o-1],n&&(r=e.getLastToken(t,1),","===r.value&&e.report(n,r.loc.start,"Trailing comma.")))}return{ObjectExpression:t,ArrayExpression:t}},t.exports.schema=[]},{}],193:[function(e,t){"use strict";var n={DoWhileStatement:"a 'do...while' statement",ForStatement:"a 'for' statement",IfStatement:"an 'if' statement",WhileStatement:"a 'while' statement"};t.exports=function(e){function t(e){return e.parent&&e.parent.test&&e===e.parent.test}function r(e){for(var n=e;n=n.parent;)if(t(n))return n.parent;return null}function i(t){var n=e.getTokenBefore(t),r=e.getTokenAfter(t);return"("===n.value&&n.range[1]<=t.range[0]&&")"===r.value&&r.range[0]>=t.range[1]}function o(t){var n=e.getTokenBefore(t,1),r=e.getTokenAfter(t,1);return i(t)&&"("===n.value&&n.range[1]<=t.range[0]&&")"===r.value&&r.range[0]>=t.range[1]}function a(t){t.test&&"AssignmentExpression"===t.test.type&&!o(t.test)&&e.report(t,"Expected a conditional expression and instead saw an assignment.")}function s(t){var i=r(t);i&&e.report(i,"Unexpected assignment within {{type}}.",{type:n[i.type]||i.type})}var u=e.options[0]||"except-parens";return"always"===u?{AssignmentExpression:s}:{DoWhileStatement:a,ForStatement:a,IfStatement:a,WhileStatement:a}},t.exports.schema=[{"enum":["except-parens","always"]}]},{}],194:[function(e,t){"use strict";t.exports=function(e){return{MemberExpression:function(t){"console"===t.object.name&&e.report(t,"Unexpected console statement.")}}},t.exports.schema=[]},{}],195:[function(e,t){"use strict";t.exports=function(e){function t(e){switch(e.type){case"Literal":case"ArrowFunctionExpression":case"FunctionExpression":case"ObjectExpression":case"ArrayExpression":return!0;case"UnaryExpression":return t(e.argument);case"BinaryExpression":case"LogicalExpression":return t(e.left)&&t(e.right);case"AssignmentExpression":return"="===e.operator&&t(e.right);case"SequenceExpression":return t(e.expressions[e.expressions.length-1])}return!1}function n(n){n.test&&t(n.test)&&e.report(n,"Unexpected constant condition.")}return{ConditionalExpression:n,IfStatement:n,WhileStatement:n,DoWhileStatement:n,ForStatement:n}},t.exports.schema=[]},{}],196:[function(e,t){"use strict";t.exports=function(e){return{ContinueStatement:function(t){e.report(t,"Unexpected use of continue statement")}}},t.exports.schema=[]},{}],197:[function(e,t){"use strict";t.exports=function(e){function t(t){if(t.value instanceof RegExp)return t.value;if("string"!=typeof t.value)return null;var n=e.getAncestors().pop();if(("NewExpression"===n.type||"CallExpression"===n.type)&&"Identifier"===n.callee.type&&"RegExp"===n.callee.name)try{return new RegExp(t.value)}catch(r){return null}}return{Literal:function(n){var r,i=t(n);i&&(r=i.toString(),/[\x00-\x1f]/.test(r)&&e.report(n,"Unexpected control character in regular expression."))}}},t.exports.schema=[]},{}],198:[function(e,t){"use strict";t.exports=function(e){return{DebuggerStatement:function(t){e.report(t,"Unexpected 'debugger' statement.")}}},t.exports.schema=[]},{}],199:[function(e,t){"use strict";t.exports=function(e){return{UnaryExpression:function(t){"delete"===t.operator&&"Identifier"===t.argument.type&&e.report(t,"Variables should not be deleted.")}}},t.exports.schema=[]},{}],200:[function(e,t){"use strict";t.exports=function(e){return{Literal:function(t){var n=e.getFirstToken(t);"RegularExpression"===n.type&&"="===n.value[1]&&e.report(t,"A regular expression literal can be confused with '/='.")}}},t.exports.schema=[]},{}],201:[function(e,t){"use strict";t.exports=function(e){function t(t){function n(e){r.hasOwnProperty(e)?i[e]=1:r[e]=1}var r={},i={};t.params.forEach(function(e){switch(e.type){case"Identifier":n(e.name);break;case"ObjectPattern":e.properties.forEach(function(e){n(e.key.name)});break;case"ArrayPattern":e.elements.forEach(function(e){n(e.name)})}}),Object.keys(i).forEach(function(n){e.report(t,"Duplicate param '{{key}}'.",{key:n})})}return{FunctionDeclaration:t,FunctionExpression:t}},t.exports.schema=[]},{}],202:[function(e,t){"use strict";t.exports=function(e){return{ObjectExpression:function(t){var n=Object.create(null);t.properties.forEach(function(r){var i=r.key.name||r.key.value,o=r.kind+"-"+i,a=!r.computed||"Literal"===r.key.type;a&&(n[o]?e.report(t,"Duplicate key '{{key}}'.",{key:i}):n[o]=!0)})}}},t.exports.schema=[]},{}],203:[function(e,t){"use strict";t.exports=function(e){function t(e){return"Literal"===e.type?e.type+typeof e.value+e.value:"Identifier"===e.type?e.type+typeof e.name+e.name:"MemberExpression"===e.type?e.type+t(e.object)+t(e.property):"CallExpression"===e.type?e.type+t(e.callee)+e.arguments.map(t).join(""):"BinaryExpression"===e.type?e.type+t(e.left)+e.operator+t(e.right):"ConditionalExpression"===e.type?e.type+t(e.test)+t(e.consequent)+t(e.alternate):void 0}var n=[];return{SwitchStatement:function(){n.push({})},"SwitchStatement:exit":function(){n.pop()},SwitchCase:function(r){var i,o=n[n.length-1];r.test&&(i=t(r.test),"undefined"!=typeof i&&o.hasOwnProperty(i)?e.report(r,"Duplicate case label."):o[i]=!0)}}},t.exports.schema=[]},{}],204:[function(e,t){"use strict";t.exports=function(e){function t(t){e.report(t,"Unexpected 'else' after 'return'.")}function n(e){return"ReturnStatement"===e.type}function r(e){if("BlockStatement"===e.type){var t=e.body,r=t[t.length-1];return r&&n(r)}return n(e)}function i(e){return e.alternate&&e.consequent&&"IfStatement"!==e.alternate.type}function o(e){return"IfStatement"===e.type&&i(e)&&r(e.alternate)&&r(e.consequent)}function a(e,r){(n(e)||o(e))&&t(r)}return{IfStatement:function(e){if(i(e)){var t=e.consequent,n=e.alternate;if("BlockStatement"===t.type){var r=t.body;r.forEach(function(e){a(e,n)})}else a(t,n)}}}},t.exports.schema=[]},{}],205:[function(e,t){"use strict";var n=/^\/([^\\[]|\\.|\[([^\\\]]|\\.)+\])*\/[gimuy]*$/;t.exports=function(e){return{Literal:function(t){var r=e.getFirstToken(t);"RegularExpression"!==r.type||n.test(r.value)||e.report(t,"Empty class.")}}}},{}],206:[function(e,t){"use strict";var n=/^\/([^\\[]|\\.|\[([^\\\]]|\\.)+\])*\/[gimy]*$/;t.exports=function(e){return{Literal:function(t){var r=e.getFirstToken(t);"RegularExpression"!==r.type||n.test(r.value)||e.report(t,"Empty class.")}}},t.exports.schema=[]},{}],207:[function(e,t){"use strict";t.exports=function(e){return{LabeledStatement:function(t){var n=t.body.type;"ForStatement"!==n&&"WhileStatement"!==n&&"DoWhileStatement"!==n&&"SwitchStatement"!==n&&"ForInStatement"!==n&&"ForOfStatement"!==n&&e.report(t,"Unexpected label {{l}}",{l:t.label.name})}}},t.exports.schema=[]},{}],208:[function(e,t){"use strict";t.exports=function(e){return{BlockStatement:function(t){var n=t.parent,r=n.type;0===t.body.length&&"FunctionDeclaration"!==r&&"FunctionExpression"!==r&&"ArrowFunctionExpression"!==r&&(e.getComments(t).trailing.length>0||e.report(t,"Empty block statement."))},SwitchStatement:function(t){("undefined"==typeof t.cases||0===t.cases.length)&&e.report(t,"Empty switch statement.")}}},t.exports.schema=[]},{}],209:[function(e,t){"use strict";t.exports=function(e){return{BinaryExpression:function(t){var n="=="===t.operator||"!="===t.operator;("Literal"===t.right.type&&"null"===t.right.raw&&n||"Literal"===t.left.type&&"null"===t.left.raw&&n)&&e.report(t,"Use ‘===’ to compare with ‘null’.")}}},t.exports.schema=[]},{}],210:[function(e,t){"use strict";t.exports=function(e){return{CallExpression:function(t){"eval"===t.callee.name&&e.report(t,"eval can be harmful.")}}},t.exports.schema=[]},{}],211:[function(e,t){"use strict";t.exports=function(e){var t=[];return{CatchClause:function(e){t.push(e.param.name)},"CatchClause:exit":function(){t.pop()},AssignmentExpression:function(n){if(t.length>0){var r=t[t.length-1];n.left.name&&n.left.name===r&&e.report(n,"Do not assign to the exception parameter.")}}}},t.exports.schema=[]},{}],212:[function(e,t){"use strict";var n=["Object","Function","Array","String","Boolean","Number","Date","RegExp","Error","EvalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"];t.exports=function(e){var t=e.options[0]||{},r=t.exceptions||[],i=n;return r.length&&(i=n.filter(function(e){return-1===r.indexOf(e)})),{AssignmentExpression:function(t){var n,r=t.left;"MemberExpression"===r.type&&"MemberExpression"===r.object.type&&(n=r.object.computed?"Literal"===r.object.property.type&&"prototype"===r.object.property.value:"prototype"===r.object.property.name,n&&i.forEach(function(n){r.object.object.name===n&&e.report(t,n+" prototype is read only, properties should not be added.")}))},CallExpression:function(t){var n,r,o=t.callee;"MemberExpression"===o.type&&"Object"===o.object.name&&"defineProperty"===o.property.name&&(n=t.arguments[0],r=n.object,r&&"Identifier"===r.type&&i.indexOf(r.name)>-1&&"prototype"===n.property.name&&e.report(t,r.name+" prototype is read only, properties should not be added."))}}},t.exports.schema=[{type:"object",properties:{exceptions:{type:"array",items:{type:"string"},uniqueItems:!0}},additionalProperties:!1}]},{}],213:[function(e,t){"use strict";t.exports=function(e){function t(){return i[i.length-1]}function n(){var e=t();e.depth++}function r(){var e=t();e.depth--}var i=[{depth:-1,found:0}];return{CallExpression:function(e){1===e.arguments.length&&"MemberExpression"===e.callee.type&&"bind"===e.callee.property.name&&/FunctionExpression$/.test(e.callee.object.type)&&i.push({call:e,depth:-1,found:0})},"CallExpression:exit":function(n){var r=t();r.call===n&&0===r.found&&(e.report(n,"The function binding is unnecessary."),i.pop())},ArrowFunctionExpression:n,"ArrowFunctionExpression:exit":r,FunctionExpression:n,"FunctionExpression:exit":r,FunctionDeclaration:n,"FunctionDeclaration:exit":r,ThisExpression:function(){var e=t();
0===e.depth&&e.found++}}},t.exports.schema=[]},{}],214:[function(e,t){"use strict";t.exports=function(e){return{UnaryExpression:function(t){var n=e.getAncestors(),r=n.pop(),i=n.pop();"!"===t.operator&&"UnaryExpression"===r.type&&"!"===r.operator&&("IfStatement"===i.type?e.report(t,"Redundant double negation in an if statement condition."):"DoWhileStatement"===i.type?e.report(t,"Redundant double negation in a do while loop condition."):"WhileStatement"===i.type?e.report(t,"Redundant double negation in a while loop condition."):"ConditionalExpression"===i.type&&r===i.test?e.report(t,"Redundant double negation in a ternary condition."):"ForStatement"===i.type&&r===i.test?e.report(t,"Redundant double negation in a for loop condition."):"UnaryExpression"===i.type&&"!"===i.operator?e.report(t,"Redundant multiple negation."):"CallExpression"===i.type&&"Identifier"===i.callee.type&&"Boolean"===i.callee.name?e.report(t,"Redundant double negation in call to Boolean()."):"NewExpression"===i.type&&"Identifier"===i.callee.type&&"Boolean"===i.callee.name&&e.report(t,"Redundant double negation in Boolean constructor call."))}}},t.exports.schema=[]},{}],215:[function(e,t){"use strict";t.exports=function(e){function t(e){return p||"FunctionExpression"===e.type||"ArrowFunctionExpression"===e.type}function n(t){var n=e.getTokenBefore(t),r=e.getTokenAfter(t);return n&&r&&"("===n.value&&n.range[1]<=t.range[0]&&")"===r.value&&r.range[0]>=t.range[1]}function r(t){var r=e.getTokenBefore(t,1),i=e.getTokenAfter(t,1);return n(t)&&r&&i&&"("===r.value&&r.range[1]<=t.range[0]&&")"===i.value&&i.range[0]>=t.range[1]}function i(e){return t(e)&&n(e)}function o(e){return t(e)&&r(e)}function a(e){switch(e.type){case"SequenceExpression":return 0;case"AssignmentExpression":case"ArrowFunctionExpression":case"YieldExpression":return 1;case"ConditionalExpression":return 3;case"LogicalExpression":switch(e.operator){case"||":return 4;case"&&":return 5}case"BinaryExpression":switch(e.operator){case"|":return 6;case"^":return 7;case"&":return 8;case"==":case"!=":case"===":case"!==":return 9;case"<":case"<=":case">":case">=":case"in":case"instanceof":return 10;case"<<":case">>":case">>>":return 11;case"+":case"-":return 12;case"*":case"/":case"%":return 13}case"UnaryExpression":return 14;case"UpdateExpression":return 15;case"CallExpression":return"FunctionExpression"===e.callee.type?-1:16;case"NewExpression":return 17}return 18}function s(t){var n=e.getTokenBefore(t);e.report(t,n.loc.start,"Gratuitous parentheses around expression.")}function u(e){i(e.argument)&&a(e.argument)>=a(e)&&s(e.argument)}function c(e){i(e.callee)&&a(e.callee)>=a(e)&&("CallExpression"!==e.type||"FunctionExpression"!==e.callee.type||o(e.callee))&&s(e.callee),1===e.arguments.length?o(e.arguments[0])&&a(e.arguments[0])>=a({type:"AssignmentExpression"})&&s(e.arguments[0]):[].forEach.call(e.arguments,function(e){i(e)&&a(e)>=a({type:"AssignmentExpression"})&&s(e)})}function l(e){var t=a(e);i(e.left)&&a(e.left)>=t&&s(e.left),i(e.right)&&a(e.right)>t&&s(e.right)}var p="functions"!==e.options[0];return{ArrayExpression:function(e){[].forEach.call(e.elements,function(e){e&&i(e)&&a(e)>=a({type:"AssignmentExpression"})&&s(e)})},ArrowFunctionExpression:function(e){if("BlockStatement"!==e.body.type){if("ObjectExpression"!==e.body.type&&i(e.body)&&a(e.body)>=a({type:"AssignmentExpression"}))return s(e.body),void 0;if("ObjectExpression"===e.body.type&&o(e.body))return s(e.body),void 0}},AssignmentExpression:function(e){i(e.right)&&a(e.right)>=a(e)&&s(e.right)},BinaryExpression:l,CallExpression:c,ConditionalExpression:function(e){i(e.test)&&a(e.test)>=a({type:"LogicalExpression",operator:"||"})&&s(e.test),i(e.consequent)&&a(e.consequent)>=a({type:"AssignmentExpression"})&&s(e.consequent),i(e.alternate)&&a(e.alternate)>=a({type:"AssignmentExpression"})&&s(e.alternate)},DoWhileStatement:function(e){o(e.test)&&s(e.test)},ExpressionStatement:function(t){var n;i(t.expression)&&"CallExpression"!==t.expression.type&&(n=e.getFirstToken(t.expression),("{"!==n.value||"ObjectExpression"===t.expression.type)&&s(t.expression))},ForInStatement:function(e){i(e.right)&&s(e.right)},ForOfStatement:function(e){i(e.right)&&s(e.right)},ForStatement:function(e){e.init&&i(e.init)&&s(e.init),e.test&&i(e.test)&&s(e.test),e.update&&i(e.update)&&s(e.update)},IfStatement:function(e){o(e.test)&&s(e.test)},LogicalExpression:l,MemberExpression:function(t){i(t.object)&&a(t.object)>=a(t)&&(t.computed||!("Literal"===t.object.type&&"number"==typeof t.object.value&&/^[0-9]+$/.test(e.getFirstToken(t.object).value)||"Literal"===t.object.type&&t.object.regex))&&s(t.object),t.computed&&i(t.property)&&s(t.property)},NewExpression:c,ObjectExpression:function(e){[].forEach.call(e.properties,function(e){var t=e.value;t&&i(t)&&a(t)>=a({type:"AssignmentExpression"})&&s(t)})},ReturnStatement:function(e){!e.argument||!i(e.argument)||"Literal"===e.argument.type&&e.argument.regex||s(e.argument)},SequenceExpression:function(e){[].forEach.call(e.expressions,function(t){i(t)&&a(t)>=a(e)&&s(t)})},SwitchCase:function(e){e.test&&i(e.test)&&s(e.test)},SwitchStatement:function(e){o(e.discriminant)&&s(e.discriminant)},ThrowStatement:function(e){i(e.argument)&&s(e.argument)},UnaryExpression:u,UpdateExpression:u,VariableDeclarator:function(e){e.init&&i(e.init)&&a(e.init)>=a({type:"AssignmentExpression"})&&("Literal"!==e.init.type||!e.init.regex)&&s(e.init)},WhileStatement:function(e){o(e.test)&&s(e.test)},WithStatement:function(e){o(e.object)&&s(e.object)}}},t.exports.schema=[{"enum":["all","functions"]}]},{}],216:[function(e,t){"use strict";t.exports=function(e){return{EmptyStatement:function(t){e.report(t,"Unnecessary semicolon.")}}},t.exports.schema=[]},{}],217:[function(e,t){"use strict";t.exports=function(e){function t(e){var t,n,r,i=[],o=e.body;if(o)for(n=0,r=o.length;r>n&&(t=o[n],"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value);++n)i.push(t.expression);return i}function n(e){return"use strict"===e.value}function r(r){var i,o,a=t(r).filter(n);switch(a.length){case 0:break;case 1:i=e.getScope(),o=i.upper,o&&o.functionExpressionScope&&(o=o.upper),o&&o.isStrict&&e.report(a[0],"Unnecessary 'use strict'.");break;default:e.report(a[1],"Multiple 'use strict' directives.")}}return{Program:r,ArrowFunctionExpression:function(e){r(e.body)},FunctionExpression:function(e){r(e.body)},FunctionDeclaration:function(e){r(e.body)}}},t.exports.schema=[]},{}],218:[function(e,t){"use strict";var n=/falls\sthrough/;t.exports=function(e){var t=[];return{SwitchCase:function(r){var i,o,a,s=r.consequent,u=t[t.length-1];if(1===s.length&&"BlockStatement"===s[0].type&&(s=s[0]),u.lastCaseClosed||(o=e.getComments(u.lastCase).trailing,a=o[o.length-1],a||(o=e.getComments(r).leading,a=o[o.length-1]),a&&n.test(a.value)||e.report(u.lastCase,'Expected a "break" statement before "{{code}}".',{code:r.test?"case":"default"})),u.lastCaseClosed=!1,u.lastCase=r,s.length){for(i=s.length-1;i>=0;i--)if(/(?:Break|Continue|Return|Throw)Statement/.test(s[i].type)){u.lastCaseClosed=!0;break}}else u.lastCaseClosed=!0},SwitchStatement:function(e){t.push({node:e,lastCaseClosed:!0,lastCase:null})},"SwitchStatement:exit":function(){t.pop()}}},t.exports.schema=[]},{}],219:[function(e,t){"use strict";t.exports=function(e){return{Literal:function(t){"number"==typeof t.value&&(0===t.raw.indexOf(".")&&e.report(t,"A leading decimal point can be confused with a dot."),t.raw.indexOf(".")===t.raw.length-1&&e.report(t,"A trailing decimal point can be confused with a dot."))}}},t.exports.schema=[]},{}],220:[function(e,t){"use strict";t.exports=function(e){function t(e,n){var r,i,o,a;for(o=0;o<e.variables.length;o++)for(r=e.variables[o],a=0;a<r.defs.length;a++){if(i=r.defs[a],"FunctionName"===i.type&&i.name.name===n)return!0;if(i.name&&i.name.name===n)return!1}return e.upper?t(e.upper,n):!1}return{AssignmentExpression:function(n){var r=e.getScope(),i=n.left.name;t(r,i)&&e.report(n,"'{{name}}' is a function.",{name:i})}}},t.exports.schema=[]},{}],221:[function(e,t){"use strict";t.exports=function(e){function t(e){var t=e.arguments[0];return t&&"Literal"===t.type&&"string"==typeof t.value}function n(e){var t=e.object,n=e.property,r=i.test(n.name)||i.test(n.value);return"window"===t.name&&r}function r(e){var r="MemberExpression"===e.callee.type,o="Identifier"===e.callee.type,a=o&&i.test(e.callee.name)||r&&n(e.callee);return a&&t(e)}var i=/set(?:Timeout|Interval)/;return{CallExpression:function(t){r(t)&&e.report(t,"Implied eval. Consider passing a function instead of a string.")}}},t.exports.schema=[]},{}],222:[function(e,t){"use strict";t.exports=function(e){function t(t){var n=String(e.getSourceLines()[t.loc.start.line-1]),r=String(e.getSourceLines()[t.loc.end.line-1]),i=n.slice(0,t.loc.start.column).trim(),o=r.slice(t.loc.end.column).trim();(i||o)&&e.report(t,"Unexpected comment inline with code.")}return{LineComment:t,BlockComment:t}},t.exports.schema=[]},{}],223:[function(e,t){"use strict";t.exports=function(e){function t(){for(var t=e.getAncestors(),n=t.pop(),r=1;n&&["Program","FunctionDeclaration","FunctionExpression","ArrowFunctionExpression"].indexOf(n.type)<0;)r+=1,n=t.pop();return{type:n.type,distance:r}}function n(n){var r=t(n),i="Program"===r.type&&1===r.distance||2===r.distance;i||e.report(n,"Move {{type}} declaration to {{body}} root.",{type:"FunctionDeclaration"===n.type?"function":"variable",body:"Program"===r.type?"program":"function body"})}return{FunctionDeclaration:n,VariableDeclaration:function(t){"both"===e.options[0]&&"var"===t.kind&&n(t)}}},t.exports.schema=[{"enum":["functions","both"]}]},{}],224:[function(e,t){"use strict";var n=e("espree");t.exports=function(e){function t(e){return e&&"Literal"===e.type&&"string"==typeof e.value}function r(r){if("Identifier"===r.callee.type&&"RegExp"===r.callee.name&&t(r.arguments[0])){var i=t(r.arguments[1])?r.arguments[1].value:"";try{void new RegExp(r.arguments[0].value)}catch(o){e.report(r,o.message)}if(i)try{n.parse("/./"+i,{ecmaFeatures:e.ecmaFeatures})}catch(a){e.report(r,"Invalid flags supplied to RegExp constructor '"+i+"'")}}}return{CallExpression:r,NewExpression:r}},t.exports.schema=[]},{espree:"espree"}],225:[function(e,t){"use strict";t.exports=function(e){function t(e){var t=e.loc.start,n=e.loc.end;s=s.filter(function(e){var r=e[1];return r.line>=t.line&&r.line<=n.line&&r.column>=t.column&&(r.column<=n.column||r.line<n.line)?!1:!0})}function n(e){"string"==typeof e.value&&(e.raw.match(o)||e.raw.match(a))&&t(e)}function r(t){var n=e.getSourceLines();n.forEach(function(e,n){for(var r,i,a=n+1;null!==(i=o.exec(e));)r={line:a,column:i.index},s.push([t,r,"Irregular whitespace not allowed"])})}function i(t){for(var n,r,i,o=e.getSource(),u=e.getSourceLines(),c=o.match(/\r\n|\r|\n|\u2028|\u2029/g),l=-1;null!==(i=a.exec(o));)n=c.indexOf(i[0],l+1)||0,r={line:n+1,column:u[n].length},s.push([t,r,"Irregular whitespace not allowed"]),l=n}var o=/[\u0085\u00A0\ufeff\f\v\u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u202f\u205f\u3000]+/gm,a=/[\u2028\u2029]/gm,s=[];return{Program:function(e){r(e),i(e)},Identifier:n,Literal:n,"Program:exit":function(){s.forEach(function(t){e.report.apply(this,t)})}}},t.exports.schema=[]},{}],226:[function(e,t){"use strict";t.exports=function(e){return{MemberExpression:function(t){(t.property&&"Identifier"===t.property.type&&"__iterator__"===t.property.name&&!t.computed||"Literal"===t.property.type&&"__iterator__"===t.property.value)&&e.report(t,"Reserved name '__iterator__'.")}}},t.exports.schema=[]},{}],227:[function(e,t){"use strict";t.exports=function(e){function t(e,n){var r=!1;return e.variables.forEach(function(e){e.name===n&&(r=!0)}),e.references.forEach(function(e){e.identifier.name===n&&(r=!0)}),e.upper&&!r?t(e.upper,n):r}return{LabeledStatement:function(n){var r=e.getScope();t(r,n.label.name)&&e.report(n,"Found identifier with same name as label.")}}},t.exports.schema=[]},{}],228:[function(e,t){"use strict";t.exports=function(e){return{LabeledStatement:function(t){e.report(t,"Unexpected labeled statement.")},BreakStatement:function(t){t.label&&e.report(t,"Unexpected label in break statement.")},ContinueStatement:function(t){t.label&&e.report(t,"Unexpected label in continue statement.")}}},t.exports.schema=[]},{}],229:[function(e,t){"use strict";t.exports=function(e){function t(t){var n=e.getAncestors().pop();e.report(t,"Program"===n.type?"Block is redundant.":"Nested block is redundant.")}function n(){var t=e.getAncestors().pop();return"BlockStatement"===t.type||"Program"===t.type}function r(){if(0!==o.length){var t=e.getAncestors().pop();o[o.length-1]===t&&o.pop()}}var i,o=[];return i={BlockStatement:function(e){n(e)&&t(e)}},(e.ecmaFeatures.blockBindings||e.ecmaFeatures.classes)&&(i={BlockStatement:function(e){n(e)&&o.push(e)},"BlockStatement:exit":function(e){o.length>0&&o[o.length-1]===e&&(o.pop(),t(e))}}),e.ecmaFeatures.blockBindings&&(i.VariableDeclaration=function(e){("let"===e.kind||"const"===e.kind)&&r(e)},i.FunctionDeclaration=function(t){e.getScope().isStrict&&r(t)}),e.ecmaFeatures.classes&&(i.ClassDeclaration=r),i},t.exports.schema=[]},{}],230:[function(e,t){"use strict";t.exports=function(e){return{IfStatement:function(t){var n=e.getAncestors(),r=n.pop(),i=n.pop();r&&"BlockStatement"===r.type&&1===r.body.length&&i&&"IfStatement"===i.type&&r===i.alternate&&e.report(t,"Unexpected if as the only statement in an else block.")}}},t.exports.schema=[]},{}],231:[function(e,t){"use strict";t.exports=function(e){function t(t){function n(e,t){switch(e.type){case"ForStatement":return e.init!==r[t+1];case"ForInStatement":case"ForOfStatement":return e.right!==r[t+1];case"WhileStatement":case"DoWhileStatement":return!0;default:return!1}}var r=e.getAncestors();r.some(n)&&e.report(t,"Don't make functions within a loop")}return{ArrowFunctionExpression:t,FunctionExpression:t,FunctionDeclaration:t}},t.exports.schema=[]},{}],232:[function(e,t){"use strict";t.exports=function(e){function t(){return["assert","buffer","child_process","cluster","crypto","dgram","dns","domain","events","fs","http","https","net","os","path","punycode","querystring","readline","repl","smalloc","stream","string_decoder","tls","tty","url","util","v8","vm","zlib"]}function n(e){return e?"CallExpression"===e.type&&"Identifier"===e.callee.type&&"require"===e.callee.name?s:"MemberExpression"===e.type?n(e.object):c:u}function r(e){if("MemberExpression"===e.type)return r(e.object);if(0===e.arguments.length)return d;var t=e.arguments[0];return"Literal"!==t.type||"string"!=typeof t.value?d:-1!==a.indexOf(t.value)?l:/^\.{0,2}\//.test(t.value)?p:f}function i(e){var t={};return e.forEach(function(e){var r=n(e.init);t[r]=!0}),!(!t[s]||!t[u]&&!t[c])}function o(e){var t={};return e.forEach(function(e){n(e.init)===s&&(t[r(e.init)]=!0)}),Object.keys(t).length<=1}var a=t(),s="require",u="uninitialized",c="other",l="core",p="file",f="module",d="computed";return{VariableDeclaration:function(t){var n=!!e.options[0];i(t.declarations)?e.report(t,"Do not mix 'require' and other declarations."):n&&!o(t.declarations)&&e.report(t,"Do not mix core, module, file and computed requires.")}}},t.exports.schema=[{type:"boolean"}]},{}],233:[function(e,t){"use strict";t.exports=function(e){var t;switch(e.options[0]){case!0:case"smart-tabs":t=!0;break;default:t=!1}var n=/^\s*\/\*/,r=/^\s*\*/;return{Program:function(i){var o,a=/^(?=[\t ]*(\t | \t))/,s=e.getSourceLines();t&&(a=/^(?=[\t ]* \t)/),s.forEach(function(t,u){o=a.exec(t),o&&(r.test(t)||n.test(s[u-1])||e.report(i,{line:u+1,column:o.index+1},"Mixed spaces and tabs."))})}}},t.exports.schema=[{"enum":["smart-tabs",!0,!1]}]},{}],234:[function(e,t){"use strict";t.exports=function(e){function t(e,t){for(var n;o<t.length;){if(n=t[o],n.range[0]<=e&&e<n.range[1])return!0;if(!(e>n.range[1]))break;o++}return!1}var n={Property:!0},r=!0,i=e.options[0],o=0;return i&&i.exceptions&&(Object.keys(i.exceptions).forEach(function(e){i.exceptions[e]?n[e]=!0:delete n[e]}),r=Object.keys(n).length>0),{Program:function(){for(var i,o,a=e.getSource(),s=e.getAllComments(),u=/[^\n\r\u2028\u2029 ] {2,}/g;u.test(a);)t(u.lastIndex,s)||(i=e.getTokenByRangeStart(u.lastIndex),i&&(r&&(o=e.getNodeByRangeIndex(u.lastIndex-1)),o&&n[o.type]||e.report(i,i.loc.start,"Multiple spaces found before '{{value}}'.",{value:i.value})))}}},t.exports.schema=[{type:"object",properties:{exceptions:{type:"object",patternProperties:{"^([A-Z][a-z]*)+$":{type:"boolean"}},additionalProperties:!1}},additionalProperties:!1}]},{}],235:[function(e,t){"use strict";t.exports=function(e){function t(e){return 0===e.type.indexOf("JSX")}return{Literal:function(n){var r=/\n/;r.test(n.raw)&&!t(n.parent)&&e.report(n,"Multiline support is limited to browsers supporting ES5 only.")}}},t.exports.schema=[]},{}],236:[function(e,t){"use strict";t.exports=function(e){var t=2,n=[];return e.options.length&&(t=e.options[0].max),{TemplateLiteral:function(e){for(var t=e.loc.start.line,r=e.loc.end.line;r>=t;)n.push(t),t++},"Program:exit":function(r){var i,o,a=e.getSourceLines(),s=-1,u=0,c=a.map(function(e){return e.trim()});for(n.forEach(function(e,t){c[t]=e}),""===c[c.length-1]&&(c=c.slice(0,-1)),i=s,s=c.indexOf("",s+1);-1!==s;)i=s,s=c.indexOf("",s+1),i===s-1?u++:(u>=t&&(o={line:i+1,column:a[i].length},e.report(r,o,"Multiple blank lines not allowed.")),u=0)}}},t.exports.schema=[{type:"object",properties:{max:{type:"integer"}},required:["max"],additionalProperties:!1}]},{}],237:[function(e,t){"use strict";t.exports=function(e){var t=["Array","Boolean","Date","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","Error","eval","EvalError","Function","isFinite","isNaN","JSON","Math","Number","Object","parseInt","parseFloat","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","Map","NaN","Set","WeakMap","Infinity","undefined"],n=e.options[0]||{},r=n.exceptions||[],i=t;return r.length&&(i=t.filter(function(e){return-1===r.indexOf(e)})),{AssignmentExpression:function(t){i.indexOf(t.left.name)>=0&&e.report(t,t.left.name+" is a read-only native object.")},VariableDeclarator:function(t){i.indexOf(t.id.name)>=0&&e.report(t,"Redefinition of '{{nativeObject}}'.",{nativeObject:t.id.name})}}},t.exports.schema=[{type:"object",properties:{exceptions:{type:"array",items:{type:"string"},uniqueItems:!0}},additionalProperties:!1}]},{}],238:[function(e,t){"use strict";t.exports=function(e){return{BinaryExpression:function(t){"in"===t.operator&&"UnaryExpression"===t.left.type&&"!"===t.left.operator&&e.report(t,"The `in` expression's left operand is negated")}}},t.exports.schema=[]},{}],239:[function(e,t){"use strict";t.exports=function(e){return{ConditionalExpression:function(t){("ConditionalExpression"===t.alternate.type||"ConditionalExpression"===t.consequent.type)&&e.report(t,"Do not nest ternary expressions")}}},t.exports.schema=[]},{}],240:[function(e,t){"use strict";t.exports=function(e){return{NewExpression:function(t){"Function"===t.callee.name&&e.report(t,"The Function constructor is eval.")}}},t.exports.schema=[]},{}],241:[function(e,t){"use strict";t.exports=function(e){return{NewExpression:function(t){"Object"===t.callee.name&&e.report(t,"The object literal notation {} is preferrable.")}}},t.exports.schema=[]},{}],242:[function(e,t){"use strict";t.exports=function(e){return{NewExpression:function(t){"Identifier"===t.callee.type&&"require"===t.callee.name&&e.report(t,"Unexpected use of new with require.")}}},t.exports.schema=[]},{}],243:[function(e,t){"use strict";t.exports=function(e){return{NewExpression:function(t){var n=["String","Number","Boolean","Math","JSON"];n.indexOf(t.callee.name)>-1&&e.report(t,"Do not use {{fn}} as a constructor.",{fn:t.callee.name})}}},t.exports.schema=[]},{}],244:[function(e,t){"use strict";t.exports=function(e){return{ExpressionStatement:function(t){"NewExpression"===t.expression.type&&e.report(t,"Do not use 'new' for side effects.")}}},t.exports.schema=[]},{}],245:[function(e,t){"use strict";t.exports=function(e){return{CallExpression:function(t){if("Identifier"===t.callee.type){var n=t.callee.name;("Math"===n||"JSON"===n)&&e.report(t,"'{{name}}' is not a function.",{name:n})}}}},t.exports.schema=[]},{}],246:[function(e,t){"use strict";t.exports=function(e){return{Literal:function(t){if("string"==typeof t.value){var n,r=t.raw.match(/^([^\\]|\\[^0-7])*\\([0-3][0-7]{1,2}|[4-7][0-7]|[0-7])/);r&&(n=r[2],("0"!==r[2]||"undefined"!=typeof r[3])&&e.report(t,"Don't use octal: '\\{{octalDigit}}'. Use '\\u....' instead.",{octalDigit:n}))}}}},t.exports.schema=[]},{}],247:[function(e,t){"use strict";t.exports=function(e){return{Literal:function(t){"number"==typeof t.value&&/^0[0-7]/.test(t.raw)&&e.report(t,"Octal literals should not be used.")}}},t.exports.schema=[]},{}],248:[function(e,t){"use strict";t.exports=function(e){function t(e,n){for(var r=e.variables,i=0;i<r.length;i++)if(r[i].name===n)return r[i];return e.upper?t(e.upper,n):null}function n(e){for(var t=e.defs,n=0;n<t.length;n++)if("Parameter"===t[n].type)return!0;return!1}function r(r,i){var o=t(e.getScope(),i);o&&n(o)&&e.report(r,"Assignment to function parameter '{{name}}'.",{name:i})}return{AssignmentExpression:function(e){r(e,e.left.name)},UpdateExpression:function(e){r(e,e.argument.name)}}},t.exports.schema=[]},{}],249:[function(e,t){"use strict";t.exports=function(e){var t=/^__(?:dir|file)name$/;return{BinaryExpression:function(n){var r=n.left,i=n.right;"+"===n.operator&&("Identifier"===r.type&&t.test(r.name)||"Identifier"===i.type&&t.test(i.name))&&e.report(n,"Use path.join() or path.resolve() instead of + to create paths.")}}},t.exports.schema=[]},{}],250:[function(e,t){"use strict";t.exports=function(e){return{UpdateExpression:function(t){e.report(t,"Unary operator '"+t.operator+"' used.")}}},t.exports.schema=[]},{}],251:[function(e,t){"use strict";t.exports=function(e){return{MemberExpression:function(t){var n=t.object.name,r=t.property.name;"process"===n&&!t.computed&&r&&"env"===r&&e.report(t,"Unexpected use of process.env.")}}},t.exports.schema=[]},{}],252:[function(e,t){"use strict";t.exports=function(e){return{CallExpression:function(t){var n=t.callee;"MemberExpression"===n.type&&"process"===n.object.name&&"exit"===n.property.name&&e.report(t,"Don't use process.exit(); throw an error instead.")}}},t.exports.schema=[]},{}],253:[function(e,t){"use strict";t.exports=function(e){return{MemberExpression:function(t){(t.property&&"Identifier"===t.property.type&&"__proto__"===t.property.name&&!t.computed||"Literal"===t.property.type&&"__proto__"===t.property.value)&&e.report(t,"The '__proto__' property is deprecated.")}}},t.exports.schema=[]},{}],254:[function(e,t){"use strict";t.exports=function(e){function t(t){t.variables.forEach(function(t){if(t.identifiers&&t.identifiers.length>1){t.identifiers.sort(function(e,t){return e.range[1]-t.range[1]});for(var n=1,r=t.identifiers.length;r>n;n++)e.report(t.identifiers[n],"{{a}} is already defined",{a:t.name})}})}function n(n){var r=e.getScope();t(r),"Program"===n.type&&e.ecmaFeatures.globalReturn&&t(r.childScopes[0])}return e.ecmaFeatures.blockBindings?{Program:n,BlockStatement:n,SwitchStatement:n}:{Program:n,FunctionDeclaration:n,FunctionExpression:n,ArrowFunctionExpression:n}},t.exports.schema=[]},{}],255:[function(e,t){"use strict";t.exports=function(e){return{Literal:function(t){var n,r=e.getFirstToken(t),i=r.type,o=r.value,a=/( {2,})+?/;"RegularExpression"===i&&(n=a.exec(o),null!==n&&e.report(t,"Spaces are hard to count. Use {"+n[0].length+"}."))}}},t.exports.schema=[]},{}],256:[function(e,t){"use strict";t.exports=function(e){var t="Reserved word '{{key}}' used as key.",n=["abstract","boolean","break","byte","case","catch","char","class","const","continue","debugger","default","delete","do","double","else","enum","export","extends","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","long","native","new","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","try","typeof","var","void","volatile","while","with"];return{ObjectExpression:function(r){r.properties.forEach(function(i){if("Identifier"===i.key.type){var o=i.key.name;-1!==n.indexOf(""+o)&&e.report(r,t,{key:o})}})}}},t.exports.schema=[]},{}],257:[function(e,t){"use strict";t.exports=function(e){function t(e){return e&&"Literal"===e.type&&"string"==typeof e.value}function n(e){return"Identifier"===e.callee.type&&"require"===e.callee.name}function r(e){var n;if(e.arguments.length&&t(e.arguments[0])){var r=e.arguments[0].value.trim();-1!==i.indexOf(r)&&(n=r)}return n}var i=e.options;return 0===i.length?{}:{CallExpression:function(t){if(n(t)){var i=r(t);i&&e.report(t,"'{{moduleName}}' module is restricted from being used.",{moduleName:i})}}}},t.exports.schema={type:"array",items:[{"enum":[0,1,2]}],additionalItems:{type:"string"},uniqueItems:!0}},{}],258:[function(e,t){"use strict";t.exports=function(e){return{ReturnStatement:function(t){t.argument&&"AssignmentExpression"===t.argument.type&&e.report(t,"Return statement should not contain assignment.")}}},t.exports.schema=[]},{}],259:[function(e,t){"use strict";t.exports=function(e){return{Literal:function(t){var n;t.value&&"string"==typeof t.value&&(n=t.value.toLowerCase(),0===n.indexOf("javascript:")&&e.report(t,"Script URL is a form of eval."))}}},t.exports.schema=[]},{}],260:[function(e,t){"use strict";t.exports=function(e){return{BinaryExpression:function(t){var n=["===","==","!==","!=",">","<",">=","<="];n.indexOf(t.operator)>-1&&("Identifier"===t.left.type&&"Identifier"===t.right.type&&t.left.name===t.right.name||"Literal"===t.left.type&&"Literal"===t.right.type&&t.left.value===t.right.value)&&e.report(t,"Comparing to itself is potentially pointless.")}}},t.exports.schema=[]},{}],261:[function(e,t){"use strict";t.exports=function(e){function t(e){return e.parent&&null!=i[e.parent.type]&&e===e.parent[i[e.parent.type]]}function n(t){var n=e.getTokenBefore(t),r=e.getTokenAfter(t);return n&&r&&"("===n.value&&n.range[1]<=t.range[0]&&")"===r.value&&r.range[0]>=t.range[1]}function r(t){var r=e.getTokenBefore(t,1),i=e.getTokenAfter(t,1);return n(t)&&r&&i&&"("===r.value&&r.range[1]<=t.range[0]&&")"===i.value&&i.range[0]>=t.range[1]}var i={DoWhileStatement:"test",IfStatement:"test",SwitchStatement:"discriminant",WhileStatement:"test",WithStatement:"object"};return{SequenceExpression:function(i){if("ForStatement"!==i.parent.type||i!==i.parent.init&&i!==i.parent.update){if(t(i)){if(r(i))return}else if(n(i))return;e.report(i,"Unexpected use of comma operator.")}}}},t.exports.schema=[]},{}],262:[function(e,t){"use strict";t.exports=function(e){function t(t){n.indexOf(t.name)>-1&&e.report(t,'Shadowing of global property "'+t.name+'".')}var n=["undefined","NaN","Infinity","arguments","eval"];return{VariableDeclarator:function(e){t(e.id)},ArrowFunctionExpression:function(e){e.id&&t(e.id),[].map.call(e.params,t)},FunctionExpression:function(e){e.id&&t(e.id),[].map.call(e.params,t)},FunctionDeclaration:function(e){e.id&&(t(e.id),[].map.call(e.params,t))},CatchClause:function(e){t(e.param)}}},t.exports.schema=[]},{}],263:[function(e,t){"use strict";t.exports=function(e){function t(e){var t=e.scope.block;return"ClassDeclaration"===t.type&&t.id===e.identifiers[0]}function n(e,t){var n=t.scope,r=t.defs[0],i=r&&r.parent&&r.parent.range,o=e.scope,a=e.defs[0],s=a&&a.name.range;return null!=i&&null!=s&&i[0]<s[0]&&s[1]<i[1]&&("FunctionName"===a.type&&"FunctionExpression"===a.node.type||"ClassExpression"===a.node.type)&&n===o.upper}function r(e){var t=e.defs[0];return t&&t.name.range}function i(e,t){var n=t.defs[0],i=r(e),o=r(t);return null!=i&&null!=o&&i[1]<o[0]&&("functions"!==u.hoist||null==n||"FunctionDeclaration"!==n.node.type)}function o(e,r){return r.some(function(r){return r.identifiers.length>0&&e.name===r.name&&!t(r)&&!n(e,r)&&!("all"!==u.hoist&&i(e,r))})}function a(t,n){var r=[];return t.forEach(function(t){t.identifiers.length>0&&o(t,n.variables)?e.report(t.identifiers[0],"{{name}} is already declared in the upper scope.",{name:t.name}):r.push(t)}),r}function s(e){for(var n=e.variables.filter(function(e){return e.identifiers.length>0&&!t(e)}),r=e.upper;r&&n.length;)n=a(n,r),r=r.upper}var u={hoist:e.options[0]&&e.options[0].hoist||"functions"};return{"Program:exit":function(){for(var t,n=e.getScope(),r=n.childScopes.slice();r.length;)t=r.pop(),r.push.apply(r,t.childScopes),s(t)}}},t.exports.schema=[{type:"object",properties:{hoist:{"enum":["all","functions","never"]}}}]},{}],264:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.range[1]<t.range[0]}function n(e,t){return e.loc.end.line===t.loc.start.line}function r(r){var i=e.getTokenBefore(r);return n(i,r)&&t(i,r)}function i(e){return"Punctuator"===e.type&&";"===e.value}function o(t,n){i(t)&&r(t)&&e.report(n,t.loc.start,"Unexpected whitespace before semicolon.")}function a(t){var n=e.getLastToken(t);o(n,t)}return{VariableDeclaration:a,ExpressionStatement:a,BreakStatement:a,ContinueStatement:a,DebuggerStatement:a,ReturnStatement:a,ThrowStatement:a,ForStatement:function(t){t.init&&o(e.getTokenAfter(t.init),t),t.test&&o(e.getTokenAfter(t.test),t)}}},t.exports.schema=[]},{}],265:[function(e,t){"use strict";t.exports=function(e){function t(t){for(var n=e.getLastToken(t.callee),r=e.getTokens(t),i=r.indexOf(n),o=r.length;o>i&&"("!==r[i].value;)++i;i>=o||r[i-1].range[1]!==r[i].range[0]&&e.report(t,"Unexpected space between function name and paren.")}return{CallExpression:t,NewExpression:t}},t.exports.schema=[]},{}],266:[function(e,t){"use strict";t.exports=function(e){return{ArrayExpression:function(t){var n=t.elements.indexOf(null)>-1;n&&e.report(t,"Unexpected comma in middle of array.")}}},t.exports.schema=[]},{}],267:[function(e,t){"use strict";t.exports=function(e){return{MemberExpression:function(t){var n=t.property.name,r=/.*Sync$/;null!==r.exec(n)&&e.report(t,"Unexpected sync method: '"+n+"'.")}}},t.exports.schema=[]},{}],268:[function(e,t){"use strict";t.exports=function(e){return{ConditionalExpression:function(t){e.report(t,"Ternary operator used.")}}},t.exports.schema=[]},{}],269:[function(e,t){"use strict";t.exports=function(e){return{ThrowStatement:function(t){"Literal"===t.argument.type?e.report(t,"Do not throw a literal."):"Identifier"===t.argument.type&&"undefined"===t.argument.name&&e.report(t,"Do not throw undefined.")}}},t.exports.schema=[]},{}],270:[function(e,t){"use strict";t.exports=function(e){var t="[ 	  -​\u2028\u2029　]",n="^"+t+"*$",r=t+"$",i=e.options[0]||{},o=i.skipBlankLines||!1;return{Program:function(t){for(var i,a,s=e.getSource(),u=new RegExp(r),c=new RegExp(n),l=s.split(/\r?\n/),p=0,f=l.length;f>p;p++)if(i=u.exec(l[p])){if(o&&c.test(l[p]))continue;a={line:p+1,column:l[p].length-i[0].length+1},e.report(t,a,"Trailing spaces not allowed.")}}}},t.exports.schema=[{type:"object",properties:{skipBlankLines:{type:"boolean"}},additionalProperties:!1}]},{}],271:[function(e,t){"use strict";t.exports=function(e){return{VariableDeclarator:function(t){var n=t.id.name,r=t.init&&t.init.name;"undefined"===r&&e.report(t,"It's not necessary to initialize '{{name}}' to undefined.",{name:n})}}},t.exports.schema=[]},{}],272:[function(e,t){"use strict";function n(e){return e.defs.every(function(e){return"ImplicitGlobalVariable"===e.type})}function r(e,t){var r=null;return e.variables.some(function(e){return e.name!==t.identifier.name||n(e)&&!{}.hasOwnProperty.call(e,"writeable")?!1:(r=e,!0)}),r}function i(e){var t=e.parent;return"UnaryExpression"===t.type&&"typeof"===t.operator}t.exports=function(e){var t='"{{name}}" is not defined.',n='"{{name}}" is read only.';return{"Program:exit":function(){var o=e.getScope();o.through.forEach(function(a){var s=r(o,a),u=a.identifier.name;i(a.identifier)||(s?a.isWrite()&&s.writeable===!1&&e.report(a.identifier,n,{name:u}):e.report(a.identifier,t,{name:u}))})}}},t.exports.schema=[]},{}],273:[function(e,t){"use strict";
t.exports=function(e){return{Identifier:function(t){if("undefined"===t.name){var n=e.getAncestors().pop();(!n||"MemberExpression"!==n.type||t!==n.property||n.computed)&&e.report(t,"Unexpected use of undefined.")}}}},t.exports.schema=[]},{}],274:[function(e,t){"use strict";t.exports=function(e){function t(e){var t=e.length;return"_"!==e&&("_"===e[0]||"_"===e[t-1])}function n(e){return"__proto__"===e}function r(e){return"_"===e}function i(n){if(n.id){var r=n.id.name;"undefined"!=typeof r&&t(r)&&e.report(n,'Unexpected dangling "_" in "'+r+'".')}}function o(n){var i=n.id.name;"undefined"!=typeof i&&t(i)&&!r(i)&&e.report(n,'Unexpected dangling "_" in "'+i+'".')}function a(r){var i=r.property.name;"undefined"!=typeof i&&t(i)&&!n(i)&&e.report(r,'Unexpected dangling "_" in "'+i+'".')}return{FunctionDeclaration:i,VariableDeclarator:o,MemberExpression:a}},t.exports.schema=[]},{}],275:[function(e,t){"use strict";t.exports=function(e){function t(t,n){e.report(t,n.loc.start,"Unnecessary use of boolean literals in conditional expression")}function n(e){return"Literal"===e.type&&"boolean"==typeof e.value}return{ConditionalExpression:function(e){n(e.alternate)&&n(e.consequent)&&t(e,e.consequent)}}},t.exports.schema=[]},{}],276:[function(e,t){"use strict";function n(e,t,n){var r;switch(n){case"BreakStatement":r="break";break;case"ContinueStatement":r="continue";break;case"ReturnStatement":r="return";break;case"ThrowStatement":r="throw";break;default:return}e.report(t,"Found unexpected statement after a {{type}}.",{type:r})}t.exports=function(e){function t(e){return"FunctionDeclaration"===e.type||"VariableDeclaration"===e.type&&e.declarations.every(function(e){return"VariableDeclarator"===e.type&&null===e.init})}function r(r){var i,o,a,s=e.getAncestors().pop();switch(s.type){case"SwitchCase":i="consequent";break;case"Program":case"BlockStatement":i="body";break;default:return}for(o=s[i].length-1;o>=0;o--){if(a=s[i][o],a===r)return;t(a)||n(e,a,r.type)}}return{ReturnStatement:r,ThrowStatement:r,ContinueStatement:r,BreakStatement:r}},t.exports.schema=[]},{}],277:[function(e,t){"use strict";t.exports=function(e){function t(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value}function n(e,t){for(var n=0,r=t.length;r>n&&e(t[n]);++n);return[].slice.call(t,0,n)}function r(e){return n(t,e.body)}function i(e,t){var n=t[t.length-1],i=t[t.length-2];return("Program"===n.type||"BlockStatement"===n.type&&/Function/.test(i.type))&&r(n).indexOf(e)>=0}return{ExpressionStatement:function(t){var n=t.expression.type,r=e.getAncestors();/^(?:Assignment|Call|New|Update|Yield)Expression$/.test(n)||!("UnaryExpression"!==n||["delete","void"].indexOf(t.expression.operator)<0)||i(t,r)||e.report(t,"Expected an assignment or function call and instead saw an expression.")}}},t.exports.schema=[]},{}],278:[function(e,t){"use strict";t.exports=function(e){function t(e){var t=e.defs[0];if(t){var n=t.node;if("VariableDeclarator"===n.type)n=n.parent;else if("Parameter"===t.type&&"FunctionDeclaration"===n.type)return!1;return 0===n.parent.type.indexOf("Export")}return!1}function n(e){return e.isRead()}function r(e,t){for(var n=e.from;null!=n;){if(t.indexOf(n.block)>=0)return!0;n=n.upper}return!1}function i(e,t){var i=e.defs.filter(function(e){return"FunctionName"===e.type}).map(function(e){return e.node}),o=i.length>0;return t.some(function(e){return n(e)&&!(o&&r(e,i))})}function o(e){var t=Object.create(null);if("all"===u.vars)for(var r=0,i=e.through.length;i>r;++r){var o=e.through[r],a=o.identifier.name;n(o)&&(t[a]||(t[a]=[]),t[a].push(o))}return t}function a(e,n,r){var o,s,c=e.variables,l=e.childScopes;if("TDZ"!==e.type&&("global"!==e.type||"all"===u.vars))for(o=0,s=c.length;s>o;++o){var p=c[o];if(!("class"===e.type&&e.block.id===p.identifiers[0]||e.functionExpressionScope||p.eslintUsed||"function"===e.type&&"arguments"===p.name&&0===p.identifiers.length)){var f=p.defs[0];if(null!=f){var d=f.type;if("CatchClause"===d)continue;if("Parameter"===d&&"Property"===f.node.parent.type&&"set"===f.node.parent.kind)continue;if("none"===u.args&&"Parameter"===d)continue;if("after-used"===u.args&&"Parameter"===d&&f.index<f.node.params.length-1)continue}var h=("global"===e.type?n[p.name]:null)||p.references;i(p,h)||t(p)||r.push(p)}}for(o=0,s=l.length;s>o;++o)a(l[o],n,r);return r}var s="{{name}} is defined but never used",u={vars:"all",args:"after-used"};return e.options[0]&&("string"==typeof e.options[0]?u.vars=e.options[0]:(u.vars=e.options[0].vars||u.vars,u.args=e.options[0].args||u.args)),{"Program:exit":function(t){for(var n=e.getScope(),r=o(n),i=a(n,r,[]),u=0,c=i.length;c>u;++u){var l=i[u];l.eslintExplicitGlobal?e.report(t,s,l):l.defs.length>0&&e.report(l.identifiers[0],s,l)}}}},t.exports.schema=[{oneOf:[{"enum":["all","local"]},{type:"object",properties:{vars:{"enum":["all","local"]},args:{"enum":["all","after-used","none"]}}}]}]},{}],279:[function(e,t){"use strict";var n="nofunc";t.exports=function(e){function t(e,n){for(var r=0,i=n.variables.length;i>r;r++)if(n.variables[r].name===e)return n.variables[r];return n.upper?t(e,n.upper):void 0}function r(r){function i(t,r){(o!==n||"FunctionName"!==r.defs[0].type)&&r.identifiers[0].range[1]>t.identifier.range[1]&&e.report(t.identifier,"{{a}} was used before it was defined",{a:t.identifier.name})}var o=e.options[0];r.references.forEach(function(e){if(e.resolved&&e.resolved.identifiers.length>0)i(e,e.resolved);else{var n=t(e.identifier.name,r);n&&0!==n.identifiers.length&&i(e,n)}})}function i(){var t=e.getScope();r(t)}return{Program:function(){var t=e.getScope();r(t),(e.ecmaFeatures.globalReturn||e.ecmaFeatures.modules)&&r(t.childScopes[0])},FunctionExpression:i,FunctionDeclaration:i,ArrowFunctionExpression:i}},t.exports.schema=[{"enum":["nofunc"]}]},{}],280:[function(e,t){"use strict";t.exports=function(e){return{VariableDeclaration:function(t){"var"===t.kind&&e.report(t,"Unexpected var, use let or const instead.")}}},t.exports.schema=[]},{}],281:[function(e,t){"use strict";t.exports=function(e){return{UnaryExpression:function(t){"void"===t.operator&&e.report(t,"Expected 'undefined' and instead saw 'void'.")}}},t.exports.schema=[]},{}],282:[function(e,t){"use strict";t.exports=function(e){function t(e){var t,n=e.replace(/[-\/\\$\^*+?.()|\[\]{}]/g,"\\$&"),r=/\w$/.test(e)?"\\b":"";return t="start"===s?"^\\s*":/^\w/.test(e)?"\\b":"",new RegExp(t+n+r,"i")}function n(e){var t=[];return i.forEach(function(n,r){n.test(e)&&t.push(a[r])}),t}function r(t){var r=n(t.value);r.forEach(function(n){e.report(t,"Unexpected "+n+" comment.")})}var i,o=e.options[0]||{},a=o.terms||["todo","fixme","xxx"],s=o.location||"start";return i=a.map(t),{BlockComment:r,LineComment:r}},t.exports.schema=[{type:"object",properties:{terms:{type:"array",items:{type:"string"}},location:{"enum":["start","anywhere"]}},additionalProperties:!1}]},{}],283:[function(e,t){"use strict";t.exports=function(e){return{WithStatement:function(t){e.report(t,"Unexpected use of 'with' statement.")}}},t.exports.schema=[]},{}],284:[function(e,t){"use strict";t.exports=function(e){function t(t){var n,r,i;"ArrowFunctionExpression"===t.type&&/(?:Call|New|Logical|Binary|Conditional|Update)Expression/.test(t.parent.type)||("MemberExpression"!==t.parent.type||t.parent.object!==t)&&(i=/CallExpression|NewExpression/.test(t.parent.type),i&&t.parent.callee===t||(n=e.getTokenBefore(t),r=e.getTokenAfter(t),i&&t.parent.callee.range[1]===n.range[0]||"("===n.value&&")"===r.value&&e.report(t,"Wrapping non-IIFE function literals in parens is unnecessary.")))}return{ArrowFunctionExpression:t,FunctionExpression:t}},t.exports.schema=[]},{}],285:[function(e,t){"use strict";t.exports=function(e){function t(t){return null!=e.options[1]?e.options[1][t]===!c:!1}function n(e,t){return e.range[1]<t.range[0]}function r(e,t){return e.loc.start.line===t.loc.start.line}function i(t,n){e.report(t,n.loc.start,"There should be no space after '"+n.value+"'")}function o(t,n){e.report(t,n.loc.start,"There should be no space before '"+n.value+"'")}function a(t,n){e.report(t,n.loc.start,"A space is required after '"+n.value+"'")}function s(t,n){e.report(t,n.loc.start,"A space is required before '"+n.value+"'")}function u(e,t,u,c,p){var f=l.objectsInObjectsException&&"}"===c.value?!l.spaced:l.spaced;r(t,u)&&(l.spaced&&!n(t,u)&&a(e,t),!l.spaced&&n(t,u)&&i(e,t)),r(c,p)&&(f&&!n(c,p)&&s(e,p),!f&&n(c,p)&&o(e,p))}var c="always"===e.options[0],l={spaced:c,objectsInObjectsException:t("objectsInObjects")};return{ObjectPattern:function(t){var n=t.properties[0],r=t.properties[t.properties.length-1],i=e.getTokenBefore(n),o=e.getFirstToken(n),a=e.getLastToken(r),s=e.getTokenAfter(r);","===s.value&&(a=s,s=e.getTokenAfter(s)),u(t,i,o,a,s)},ImportDeclaration:function(t){var n=t.specifiers[0],r=t.specifiers[t.specifiers.length-1];if(n&&r&&"ImportSpecifier"===n.type&&"ImportSpecifier"===r.type){var i=e.getTokenBefore(n),o=e.getFirstToken(n),a=e.getLastToken(r),s=e.getTokenAfter(r);u(t,i,o,a,s)}},ExportNamedDeclaration:function(t){if(t.specifiers.length){var n=t.specifiers[0],r=t.specifiers[t.specifiers.length-1],i=e.getTokenBefore(n),o=e.getFirstToken(n),a=e.getLastToken(r),s=e.getTokenAfter(r);u(t,i,o,a,s)}},ObjectExpression:function(t){if(0!==t.properties.length){var n=e.getFirstToken(t),r=e.getFirstToken(t,1),i=e.getLastToken(t,1),o=e.getLastToken(t);u(t,n,r,i,o)}}}}},{}],286:[function(e,t){"use strict";var n={always:"always",never:"never",methods:"methods",properties:"properties"};t.exports=function(e){var t=e.options[0]||n.always,r=t===n.methods||t===n.always,i=t===n.properties||t===n.always,o=t===n.never;return{Property:function(t){var n,a=t.method||t.shorthand;o&&a&&(n=t.method?"method":"property",e.report(t,"Expected longform "+n+" syntax.")),o||a||"get"!==t.kind&&"set"!==t.kind&&("FunctionExpression"===t.value.type&&null==t.value.id&&r?e.report(t,"Expected method shorthand."):"Identifier"===t.value.type&&t.key.name===t.value.name&&i?e.report(t,"Expected property shorthand."):"Identifier"===t.value.type&&"Literal"===t.key.type&&t.key.value===t.value.name&&i&&e.report(t,"Expected property shorthand."))}}},t.exports.schema=[{"enum":["always","methods","properties","never"]}]},{}],287:[function(e,t){"use strict";t.exports=function(e){function t(){h.push({let:{initialized:!1,uninitialized:!1},"const":{initialized:!1,uninitialized:!1}})}function n(){d.push({initialized:!1,uninitialized:!1}),t()}function r(){h.pop()}function i(){d.pop(),r()}function o(e,t,n){for(var r=0;r<t.length;r++)null===t[r].init?f[e]&&f[e].uninitialized===c&&(n.uninitialized=!0):f[e]&&f[e].initialized===c&&(n.initialized=!0)}function a(e){var t;return"var"===e?t=d[d.length-1]:"let"===e?t=h[h.length-1].let:"const"===e&&(t=h[h.length-1].const),t}function s(e){for(var t={uninitialized:0,initialized:0},n=0;n<e.length;n++)null===e[n].init?t.uninitialized++:t.initialized++;return t}function u(e,t){var n=s(t),r=f[e]||{},i=a(e);return r.uninitialized===c&&r.initialized===c&&(i.uninitialized||i.initialized)?!1:n.uninitialized>0&&r.uninitialized===c&&i.uninitialized?!1:n.initialized>0&&r.initialized===c&&i.initialized?!1:(o(e,t,i),!0)}var c="always",l="never",p=e.options[0],f={};"string"==typeof p?(f.var={uninitialized:p,initialized:p},f.let={uninitialized:p,initialized:p},f.const={uninitialized:p,initialized:p}):"object"==typeof p&&(p.hasOwnProperty("var")&&"string"==typeof p.var&&(f.var={uninitialized:p.var,initialized:p.var}),p.hasOwnProperty("let")&&"string"==typeof p.let&&(f.let={uninitialized:p.let,initialized:p.let}),p.hasOwnProperty("const")&&"string"==typeof p.const&&(f.const={uninitialized:p.const,initialized:p.const}),p.hasOwnProperty("uninitialized")&&(f.var||(f.var={}),f.let||(f.let={}),f.const||(f.const={}),f.var.uninitialized=p.uninitialized,f.let.uninitialized=p.uninitialized,f.const.uninitialized=p.uninitialized),p.hasOwnProperty("initialized")&&(f.var||(f.var={}),f.let||(f.let={}),f.const||(f.const={}),f.var.initialized=p.initialized,f.let.initialized=p.initialized,f.const.initialized=p.initialized));var d=[],h=[];return{Program:n,FunctionDeclaration:n,FunctionExpression:n,ArrowFunctionExpression:n,BlockStatement:t,ForStatement:t,SwitchStatement:t,VariableDeclaration:function(t){var n,r,i,o=t.parent;if(n=t.kind,f[n]&&(r=t.declarations,i=s(r),u(n,r)||(f[n].initialized===c&&f[n].uninitialized===c?e.report(t,"Combine this with the previous '"+n+"' statement."):(f[n].initialized===c&&e.report(t,"Combine this with the previous '"+n+"' statement with initialized variables."),f[n].uninitialized===c&&e.report(t,"Combine this with the previous '"+n+"' statement with uninitialized variables."))),"ForStatement"!==o.type||o.init!==t)){var a=i.uninitialized+i.initialized;a>1&&(f[n].initialized===l&&f[n].uninitialized===l?e.report(t,"Split '"+n+"' declarations into multiple statements."):f[n].initialized===l&&i.initialized>0?e.report(t,"Split initialized '"+n+"' declarations into multiple statements."):f[n].uninitialized===l&&i.uninitialized>0&&e.report(t,"Split uninitialized '"+n+"' declarations into multiple statements."))}},"ForStatement:exit":r,"SwitchStatement:exit":r,"BlockStatement:exit":r,"Program:exit":i,"FunctionDeclaration:exit":i,"FunctionExpression:exit":i,"ArrowFunctionExpression:exit":i}},t.exports.schema=[{oneOf:[{"enum":["always","never"]},{type:"object",properties:{"var":{"enum":["always","never"]},let:{"enum":["always","never"]},"const":{"enum":["always","never"]}},additionalProperties:!1},{type:"object",properties:{initialized:{"enum":["always","never"]},uninitialized:{"enum":["always","never"]}},additionalProperties:!1}]}]},{}],288:[function(e,t){"use strict";function n(e){return["*","&","^","|"].indexOf(e)>=0}function r(e){return["+","-","/","%","<<",">>",">>>"].indexOf(e)>=0}function i(e,t){if(e.type!==t.type)return!1;switch(e.type){case"Identifier":return e.name===t.name;case"Literal":return e.value===t.value;case"MemberExpression":return i(e.object,t.object)&&i(e.property,t.property);default:return!1}}t.exports=function(e){function t(t){var o,a,s;"="===t.operator&&"BinaryExpression"===t.right.type&&(a=t.left,o=t.right,s=o.operator,n(s)?(i(a,o.left)||i(a,o.right))&&e.report(t,"Assignment can be replaced with operator assignment."):r(s)&&i(a,o.left)&&e.report(t,"Assignment can be replaced with operator assignment."))}function o(t){"="!==t.operator&&e.report(t,"Unexpected operator assignment shorthand.")}return{AssignmentExpression:"never"!==e.options[0]?t:o}},t.exports.schema=[{"enum":["always","never"]}]},{}],289:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.loc.end.line===t.loc.start.line}function n(n){for(var i=e.getLastToken(n.left||n.id),o=e.getTokenAfter(i);")"===o.value;)i=o,o=e.getTokenAfter(o);var a=e.getTokenAfter(o),s=o.value;t(i,o)&&t(o,a)||(t(i,o)||t(o,a)?"before"===r&&t(i,o)?e.report(n,{line:o.loc.end.line,column:o.loc.end.column},"'"+s+"' should be placed at the beginning of the line."):"after"===r&&t(o,a)?e.report(n,{line:o.loc.end.line,column:o.loc.end.column},"'"+s+"' should be placed at the end of the line."):"none"===r&&e.report(n,{line:o.loc.end.line,column:o.loc.end.column},"There should be no line break before or after '"+s+"'"):e.report(n,{line:o.loc.end.line,column:o.loc.end.column},"Bad line breaking before and after '"+s+"'."))}var r=e.options[0]||"after";return{BinaryExpression:n,LogicalExpression:n,AssignmentExpression:n,VariableDeclarator:function(e){e.init&&n(e)}}},t.exports.schema=[{"enum":["after","before","none"]}]},{}],290:[function(e,t){"use strict";t.exports=function(e){function t(t){var n=t.loc.start.line,r=t.body[0],i=r.loc.start.line,o=n+2,a=e.getComments(r).leading;return a.length>0&&(i=a[0].loc.start.line),i>=o}function n(t){var n=t.loc.end.line,r=t.body[t.body.length-1],i=e.getLastToken(r).loc.end.line,o=n-2,a=e.getComments(r).trailing;return a.length>0&&(i=a[a.length-1].loc.end.line),o>=i}function r(r){if(r.body.length>0){var s=t(r),u=n(r);i?(s||e.report(r,o),u||e.report(r,r.loc.end,o)):(s&&e.report(r,a),u&&e.report(r,r.loc.end,a))}}var i="never"!==e.options[0],o="Block must be padded by blank lines.",a="Block must not be padded by blank lines.";return{BlockStatement:r}},t.exports.schema=[{"enum":["always","never"]}]},{}],291:[function(e,t){"use strict";t.exports=function(e){function t(e){return e.init===!0}function n(e){return e.isReadOnly()||e.init===!0}function r(r){if("TDZ"!==r.type)for(var i=r.variables,o=0,a=i.length;a>o;++o){var s=i[o],u=s.defs[0],c=u&&u.parent,l=c&&c.parent,p=s.references,f=s.identifiers[0];null!=l&&null!=f&&"VariableDeclaration"===c.type&&"let"===c.kind&&("ForStatement"!==l.type||l.init!==c)&&p.some(t)&&p.every(n)&&e.report(f,"`{{name}}` is never modified, use `const` instead.",{name:f.name})}}var i=Function.apply.bind(Array.prototype.push);return{"Program:exit":function(){for(var t=[e.getScope()];t.length;){var n=t.pop();i(t,n.childScopes),r(n)}}}},t.exports.schema=[]},{}],292:[function(e,t){"use strict";var n=e("espree");t.exports=function(e){function t(t){var r,i=t.key;if("Literal"===i.type&&"string"==typeof i.value){try{r=n.tokenize(i.value)}catch(o){return}1===r.length&&(["Identifier","Null","Boolean"].indexOf(r[0].type)>=0||"Numeric"===r[0].type&&""+ +r[0].value===r[0].value)&&e.report(t,"Unnecessarily quoted property `{{value}}` found.",i)}}function r(t){var n=t.key;t.method||"Literal"===n.type&&"string"==typeof n.value||e.report(t,"Unquoted property `{{key}}` found.",{key:n.name||n.value})}var i=e.options[0];return{Property:"as-needed"===i?t:r}},t.exports.schema=[{"enum":["always","as-needed"]}]},{espree:"espree"}],293:[function(e,t){"use strict";var n={"double":{quote:'"',alternateQuote:"'",description:"doublequote"},single:{quote:"'",alternateQuote:'"',description:"singlequote"},backtick:{quote:"`",alternateQuote:'"',description:"backtick"}},r="avoid-escape";t.exports=function(e){function t(e,t){return e[0]===t&&e[e.length-1]===t}function i(e){return 0===e.type.indexOf("JSX")}return{Literal:function(o){var a,s=o.value,u=o.raw,c=e.options[0],l=n[c||"double"],p=e.options[1]===r;l&&"string"==typeof s&&(a=i(o.parent)||t(u,l.quote),!a&&p&&(a=t(u,l.alternateQuote)&&u.indexOf(l.quote)>=0),a||e.report(o,"Strings must use "+l.description+"."))}}},t.exports.schema=[{"enum":["single","double","backtick"]},{"enum":["avoid-escape"]}]},{}],294:[function(e,t){"use strict";t.exports=function(e){return{CallExpression:function(t){var n;"parseInt"===t.callee.name&&(t.arguments.length<2?e.report(t,"Missing radix parameter."):(n=t.arguments[1],("Literal"===n.type&&"number"!=typeof n.value||"Identifier"===n.type&&"undefined"===n.name)&&e.report(t,"Invalid radix parameter.")))}}},t.exports.schema=[]},{}],295:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.range[1]<t.range[0]}function n(e,t){return e.loc.end.line===t.loc.start.line}function r(r){var i=e.getTokenBefore(r);return i&&n(i,r)&&t(i,r)}function i(r){var i=e.getTokenAfter(r);return i&&n(r,i)&&t(r,i)}function o(t){var r=e.getTokenAfter(t);return!(r&&n(t,r))}function a(e){return"Punctuator"===e.type&&";"===e.value}function s(t,n){var s;a(t)&&(s=t.loc.start,r(t)?l||e.report(n,s,"Unexpected whitespace before semicolon."):l&&e.report(n,s,"Missing whitespace before semicolon."),o(t)||(i(t)?p||e.report(n,s,"Unexpected whitespace after semicolon."):p&&e.report(n,s,"Missing whitespace after semicolon.")))}function u(t){var n=e.getLastToken(t);s(n,t)}var c=e.options[0],l=!1,p=!0;return"object"==typeof c&&(c.hasOwnProperty("before")&&(l=c.before),c.hasOwnProperty("after")&&(p=c.after)),{VariableDeclaration:u,ExpressionStatement:u,BreakStatement:u,ContinueStatement:u,DebuggerStatement:u,ReturnStatement:u,ThrowStatement:u,ForStatement:function(t){t.init&&s(e.getTokenAfter(t.init),t),t.test&&s(e.getTokenAfter(t.test),t)}}},t.exports.schema=[{type:"object",properties:{before:{type:"boolean"},after:{type:"boolean"}},additionalProperties:!1}]},{}],296:[function(e,t){"use strict";t.exports=function(e){function t(t){var n=s?"Missing semicolon.":"Extra semicolon.";e.report(t,e.getLastToken(t).loc.end,n)}function n(e){return"Punctuator"===e.type&&";"===e.value}function r(t){var r,i,o,s,u;return n(t)?(s=e.getTokenAfter(t))?(o=t.loc.end.line,u=s.loc.start.line,i=a.test(s.value),r="}"===s.value||";"===s.value,o!==u&&!i||r):!0:!1}function i(i){var o=e.getLastToken(i);s?n(o)||t(i):r(o)&&t(i)}function o(t){var n=e.getAncestors(),r=n.length-1,o=n[r];"ForStatement"===o.type&&o.init===t||/^For(?:In|Of)Statement/.test(o.type)&&o.left===t||i(t)}var a=/[\[\(\/\+\-]/,s="never"!==e.options[0];return{VariableDeclaration:o,ExpressionStatement:i,ReturnStatement:i,ThrowStatement:i,DebuggerStatement:i,BreakStatement:i,ContinueStatement:i,ImportDeclaration:i,ExportAllDeclaration:i,ExportNamedDeclaration:function(e){e.declaration||i(e)},ExportDefaultDeclaration:function(e){/(?:Class|Function)Declaration/.test(e.declaration.type)||i(e)}}},t.exports.schema=[{"enum":["always","never"]}]},{}],297:[function(e,t){"use strict";t.exports=function(e){var t=e.options[0]||{},n=t.ignoreCase||!1;return{VariableDeclaration:function(t){t.declarations.reduce(function(t,r){var i=t.id.name,o=r.id.name;return n&&(i=i.toLowerCase(),o=o.toLowerCase()),i>o?(e.report(r,"Variables within the same declaration block should be sorted alphabetically"),t):r},t.declarations[0])}}},t.exports.schema=[{type:"object",properties:{ignoreCase:{type:"boolean"}},additionalProperties:!1}]},{}],298:[function(e,t){"use strict";t.exports=function(e){function t(t){var r=e.getFirstTokens(t,3),i=r[1].range[1]<r[2].range[0];i!==n&&e.report(t,'Function name "{{name}}" must {{not}}be followed by whitespace.',{name:t.id.name,not:n?"":"not "})}var n="always"===e.options[0];return{FunctionDeclaration:t,FunctionExpression:function(e){e.id&&t(e)}}},t.exports.schema=[{"enum":["always","never"]}]},{}],299:[function(e,t){"use strict";t.exports=function(e){function t(t,n,i){var o=n.range[1]<i.range[0],a=n.value;o!==r&&e.report(t,'Keyword "{{value}}" must {{not}}be followed by whitespace.',{value:a,not:r?"":"not "})}function n(n){var r=e.getFirstTokens(n,2);t(n,r[0],r[1])}var r="never"!==e.options[0];return{IfStatement:function(r){n(r),r.alternate&&"IfStatement"!==r.alternate.type&&t(r.alternate,e.getTokenBefore(r.alternate),e.getFirstToken(r.alternate))},ForStatement:n,ForOfStatement:n,ForInStatement:n,WhileStatement:n,DoWhileStatement:function(r){n(r);var i=e.getTokensBefore(r.test,2);t(r,i[0],i[1])},SwitchStatement:n,TryStatement:function(r){n(r),r.finalizer&&t(r.finalizer,e.getTokenBefore(r.finalizer),e.getFirstToken(r.finalizer))},CatchStatement:n,WithStatement:n}},t.exports.schema=[{"enum":["always","never"]}]},{}],300:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.range[1]<t.range[0]}function n(e,t){return e.loc.start.line===t.loc.start.line}function r(r){var i,a=e.getTokenBefore(r);a&&n(a,r)&&(i=t(a,r),o?i||e.report(r,"Missing space before opening brace."):i&&e.report(r,"Unexpected space before opening brace."))}function i(t){var n,i,o=t.cases;o.length>0?(n=o[0],i=e.getTokenBefore(n)):i=e.getLastToken(t,1),r(i)}var o="never"!==e.options[0];return{BlockStatement:r,SwitchStatement:i}},t.exports.schema=[{"enum":["always","never"]}]},{}],301:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.range[1]<t.range[0]}function n(t){var n;return t.id?!0:(n=e.getAncestors().pop(),"MethodDefinition"===n.type||"Property"===n.type&&("get"===n.kind||"set"===n.kind||n.method))}function r(r){var i,s,u,c,l=n(r);(!r.generator||l)&&(i=e.getTokens(r),r.generator?r.id?(s=i[2],u=i[3]):(s=e.getTokenBefore(r),u=i[0]):l?r.id?(s=i[1],u=i[2]):(s=e.getTokenBefore(r),u=i[0]):(s=i[0],u=i[1]),c=s.loc.end,t(s,u)?(l&&!a||!l&&!o)&&e.report(r,c,"Unexpected space before function parentheses."):(l&&a||!l&&o)&&e.report(r,c,"Missing space before function parentheses."))}var i=e.options[0],o=!0,a=!0;return"object"==typeof i?(o="never"!==i.anonymous,a="never"!==i.named):"never"===i&&(o=!1,a=!1),{FunctionDeclaration:r,FunctionExpression:r}},t.exports.schema=[{oneOf:[{"enum":["always","never"]},{type:"object",properties:{anonymous:{"enum":["always","never"]},named:{"enum":["always","never"]}},additionalProperties:!1}]}]},{}],302:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.range[1]<t.range[0]}function n(t){var n;return t.id?!0:(n=e.getAncestors().pop(),"MethodDefinition"===n.type||"Property"===n.type&&("get"===n.kind||"set"===n.kind||n.method))}function r(r){var i,s,u,c,l=n(r);(!r.generator||l)&&(i=e.getTokens(r),r.generator?r.id?(s=i[2],u=i[3]):(s=e.getTokenBefore(r),u=i[0]):l?r.id?(s=i[1],u=i[2]):(s=e.getTokenBefore(r),u=i[0]):(s=i[0],u=i[1]),c=s.loc.end,t(s,u)?(l&&!a||!l&&!o)&&e.report(r,c,"Unexpected space before function parentheses."):(l&&a||!l&&o)&&e.report(r,c,"Missing space before function parentheses."))}var i=e.options[0],o=!0,a=!0;return"object"==typeof i?(o="never"!==i.anonymous,a="never"!==i.named):"never"===i&&(o=!1,a=!1),{FunctionDeclaration:r,FunctionExpression:r}},t.exports.schema=[{oneOf:[{"enum":["always","never"]},{type:"object",properties:{anonymous:{"enum":["always","never"]},named:{"enum":["always","never"]}},additionalProperties:!1}]}]},{}],303:[function(e,t){"use strict";t.exports=function(e){function t(t){return null!=e.options[1]?e.options[1][t]===!c:!1}function n(e,t){return e.range[1]<t.range[0]}function r(e,t){return e.loc.start.line===t.loc.start.line}function i(t,n){e.report(t,n.loc.start,"There should be no space after '"+n.value+"'")}function o(t,n){e.report(t,n.loc.start,"There should be no space before '"+n.value+"'")}function a(t,n){e.report(t,n.loc.start,"A space is required after '"+n.value+"'")}function s(t,n){e.report(t,n.loc.start,"A space is required before '"+n.value+"'")}function u(e,t,u,c,p){var f=l.arraysInObjectsException&&"]"===c.value||l.objectsInObjectsException&&"}"===c.value?!l.spaced:l.spaced;r(t,u)&&(l.spaced&&!n(t,u)&&a(e,t),!l.spaced&&n(t,u)&&i(e,t)),r(c,p)&&(f&&!n(c,p)&&s(e,p),!f&&n(c,p)&&o(e,p))}var c="always"===e.options[0],l={spaced:c,singleElementException:t("singleValue"),objectsInArraysException:t("objectsInArrays"),arraysInArraysException:t("arraysInArrays"),arraysInObjectsException:t("arraysInObjects"),objectsInObjectsException:t("objectsInObjects"),propertyNameException:t("propertyName")};return{MemberExpression:function(t){if(t.computed){var u=t.property,c=e.getTokenBefore(u),p=e.getFirstToken(u),f=e.getLastToken(u),d=e.getTokenAfter(u),h=l.propertyNameException?!l.spaced:l.spaced;r(c,p)&&(h?!n(c,p)&&r(c,p)&&a(t,c):n(c,p)&&i(t,c)),r(f,d)&&(h?!n(f,d)&&r(f,d)&&s(t,d):n(f,d)&&o(t,d))}},ArrayExpression:function(t){if(0!==t.elements.length){var u=e.getFirstToken(t),c=e.getFirstToken(t,1),p=e.getLastToken(t,1),f=e.getLastToken(t),d=l.objectsInArraysException&&"{"===c.value||l.arraysInArraysException&&"["===c.value||l.singleElementException&&1===t.elements.length?!l.spaced:l.spaced,h=l.objectsInArraysException&&"}"===p.value||l.arraysInArraysException&&"]"===p.value||l.singleElementException&&1===t.elements.length?!l.spaced:l.spaced;r(u,c)&&(d&&!n(u,c)&&a(t,u),!d&&n(u,c)&&i(t,u)),r(p,f)&&(h&&!n(p,f)&&s(t,f),!h&&n(p,f)&&o(t,f))}},ImportDeclaration:function(t){var n=t.specifiers[0],r=t.specifiers[t.specifiers.length-1];if(n&&r&&"ImportSpecifier"===n.type&&"ImportSpecifier"===r.type){var i=e.getTokenBefore(n),o=e.getFirstToken(n),a=e.getLastToken(r),s=e.getTokenAfter(r);u(t,i,o,a,s)}},ExportNamedDeclaration:function(t){if(t.specifiers.length){var n=t.specifiers[0],r=t.specifiers[t.specifiers.length-1],i=e.getTokenBefore(n),o=e.getFirstToken(n),a=e.getLastToken(r),s=e.getTokenAfter(r);u(t,i,o,a,s)}},ObjectExpression:function(t){if(0!==t.properties.length){var n=e.getFirstToken(t),r=e.getFirstToken(t,1),i=e.getLastToken(t,1),o=e.getLastToken(t);u(t,n,r,i,o)}}}},t.exports.schema=[{"enum":["always","never"]},{type:"object",properties:{singleValue:{type:"boolean"},objectsInArrays:{type:"boolean"},arraysInArrays:{type:"boolean"},arraysInObjects:{type:"boolean"},objectsInObjects:{type:"boolean"},propertyName:{type:"boolean"}},additionalProperties:!1}]},{}],304:[function(e,t){"use strict";t.exports=function(e){function t(e){var t,n,r=[],i=[],o=["\\s"],a=["\\s"];return e.braceException&&(r.push("\\{"),i.push("\\}"),o.push("\\{"),a.push("\\}")),e.bracketException&&(r.push("\\["),i.push("\\]"),o.push("\\["),a.push("\\]")),e.parenException&&(r.push("\\("),i.push("\\)"),o.push("\\("),a.push("\\)")),e.empty&&(r.push("\\)"),i.push("\\("),o.push("\\)"),a.push("\\(")),r.length&&(t="\\(("+r.join("|")+")",i.length&&(t+="|")),i.length&&(t+="("+i.join("|")+")\\)"),n="\\( +[^"+o.join("")+"]",n+="|[^"+a.join("")+"] +\\)",{missingSpace:t||".^",rejectedSpace:n}}function n(e){var t,n,r=["\\s","\\)"],i=["\\s","\\("],o=[],a=[];return e.braceException&&(r.push("\\{"),i.push("\\}"),o.push(" \\{"),a.push("\\} ")),e.bracketException&&(r.push("\\["),i.push("\\]"),o.push(" \\["),a.push("\\] ")),e.parenException&&(r.push("\\("),i.push("\\)"),o.push(" \\("),a.push("\\) ")),e.empty&&(o.push(" \\)"),a.push("\\( ")),t="\\([^"+r.join("")+"]",t+="|[^"+i.join("")+"]\\)",o.length&&(n="\\(("+o.join("|")+")",a.length&&(n+="|")),a.length&&(n+="("+a.join("|")+")\\)"),{missingSpace:t,rejectedSpace:n||".^"}}function r(e){d.push(e.range)}function i(){d.sort(function(e,t){return e[0]-t[0]})}function o(e){var t,n,r;for(t=0,n=d.length;n>t&&(r=d[t],!(e<r[0]));t+=1)if(e<r[1])return!0;return!1}var a,s,u,c="There must be a space inside this paren.",l="There should be no spaces inside this paren.",p=2===e.options.length?e.options[1].exceptions:[],f={};p&&p.length&&(f.braceException=-1!==p.indexOf("{}")||!1,f.bracketException=-1!==p.indexOf("[]")||!1,f.parenException=-1!==p.indexOf("()")||!1,f.empty=-1!==p.indexOf("empty")||!1),u="always"===e.options[0]?n(f):t(f),s=new RegExp(u.missingSpace,"mg"),a=new RegExp(u.rejectedSpace,"mg");var d=[];return{"Program:exit":function(t){function n(n,r){if("("!==d.charAt(n.index)&&(n.index+=1),!o(n.index)){for(;-1!==(u=d.indexOf("\n",h))&&u<n.index;)h=u+1,f+=1;p=n.index-h,e.report(t,{line:f,column:p},r)}}var r,u,p,f=1,d=e.getSource(),h=0;for(i();null!==(r=a.exec(d));)n(r,l);for(;null!==(r=s.exec(d));)n(r,c)},LineComment:r,BlockComment:r,Literal:r}},t.exports.schema=[{"enum":["always","never"]},{type:"object",properties:{exceptions:{type:"array",items:{"enum":["{}","[]","()","empty"]},uniqueItems:!0}},additionalProperties:!1}]},{}],305:[function(e,t){"use strict";t.exports=function(e){function t(t,n){for(var r,i=e.getTokensBetween(t,n,1),o=1,a=i.length-1;a>o;++o)if(r=i[o],"Punctuator"===r.type&&s.indexOf(r.value)>=0&&(i[o-1].range[1]>=r.range[0]||r.range[1]>=i[o+1].range[0]))return r;return null}function n(t,n){e.report(t,n.loc.start,"Infix operators must be spaced.")}function r(r){var i=t(r.left,r.right);i&&(a&&"|0"===e.getSource(r).substr(-2)||n(r,i))}function i(e){var r=t(e.test,e.consequent),i=t(e.consequent,e.alternate);r?n(e,r):i&&n(e,i)}function o(e){var r;e.init&&(r=t(e.id,e.init),r&&n(e,r))}var a=e.options[0]?e.options[0].int32Hint===!0:!1,s=["*","/","%","+","-","<<",">>",">>>","<","<=",">",">=","in","instanceof","==","!=","===","!==","&","^","|","&&","||","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","^=","|=","?",":",","];return{AssignmentExpression:r,BinaryExpression:r,LogicalExpression:r,ConditionalExpression:i,VariableDeclarator:o}},t.exports.schema=[{type:"object",properties:{int32Hint:{type:"boolean"}},additionalProperties:!1}]},{}],306:[function(e,t){"use strict";t.exports=function(e){function t(t){var n=e.getFirstTokens(t,2),r=n[0].value;n[0].range[1]>=n[1].range[0]&&e.report(t,'Keyword "'+r+'" must be followed by whitespace.')}return{ReturnStatement:function(e){e.argument&&t(e)},SwitchCase:function(e){e.test&&t(e)},ThrowStatement:t}},t.exports.schema=[]},{}],307:[function(e,t){"use strict";t.exports=function(e){function t(e){return e&&e.parent&&"UnaryExpression"===e.parent.type&&"!"===e.parent.operator}function n(e){return e.argument&&e.argument.type&&"ObjectExpression"===e.argument.type}function r(t,r,i){o.words&&i.range[0]===r.range[1]&&e.report(t,'Unary word operator "'+r.value+'" must be followed by whitespace.'),!o.words&&n(t)&&i.range[0]>r.range[1]&&e.report(t,'Unexpected space after unary word operator "'+r.value+'".')
}function i(n){var i=e.getFirstTokens(n,2),a=i[0],s=i[1];if(("NewExpression"===n.type||n.prefix)&&"Keyword"===a.type)return r(n,a,s),void 0;if(o.nonwords)if(n.prefix){if(t(n))return void 0;a.range[1]===s.range[0]&&e.report(n,'Unary operator "'+a.value+'" must be followed by whitespace.')}else a.range[1]===s.range[0]&&e.report(n,'Space is required before unary expressions "'+s.value+'".');else n.prefix?s.range[0]>a.range[1]&&e.report(n,'Unexpected space after unary operator "'+a.value+'".'):s.range[0]>a.range[1]&&e.report(n,'Unexpected space before unary operator "'+s.value+'".')}var o=e.options&&Array.isArray(e.options)&&e.options[0]||{words:!0,nonwords:!1};return{UnaryExpression:i,UpdateExpression:i,NewExpression:i}},t.exports.schema=[{type:"object",properties:{words:{type:"boolean"},nonwords:{type:"boolean"}},additionalProperties:!1}]},{}],308:[function(e,t){"use strict";t.exports=function(e){function t(e){return e.replace(/([.*+?${}()|\^\[\]\/\\])/g,"\\$1")}function n(e){return"Block"===e.type&&c.test(e.value)}function r(t){var r="Block"===t.type?"/*":"//";if(a){if(0===t.value.length)return;if(n(t))return;if(h&&u.test(t.value))return;0!==t.value.indexOf(" ")&&0!==t.value.indexOf("	")&&0!==t.value.indexOf("\n")&&(f&&!s.test(t.value)?e.report(t,"Expected exception block, space or tab after "+r+" in comment."):f||e.report(t,"Expected space or tab after "+r+" in comment."))}else if((0===t.value.indexOf(" ")||0===t.value.indexOf("	"))&&e.report(t,"Unexpected space or tab after "+r+" in comment."),h&&u.test(t.value)){var i=t.value.match(u),o=i.length?i[0]:"";e.report(t,"Unexpected space or tab after marker ("+o+") in comment.")}}var i,o,a="never"!==e.options[0],s=new RegExp(" "),u=new RegExp(" "),c=new RegExp("((^(\\*)))[ \\n]"),l=2===e.options.length,p=l?e.options[1]:{},f=l&&p.exceptions&&p.exceptions.length,d=f?p.exceptions:[],h=l&&p.markers&&p.markers.length,m=h?p.markers:[];return f&&(i=d.map(t),s=new RegExp("(^("+i.join(")+$)|(^(")+")+$)")),h&&(o=m.map(t),u=new RegExp("((^("+o.join("))|(^(")+")))[ \\t\\n]")),{LineComment:r,BlockComment:r}},t.exports.schema=[{"enum":["always","never"]},{type:"object",properties:{exceptions:{type:"array",items:{type:"string"}},markers:{type:"array",items:{type:"string"}}},additionalProperties:!1}]},{}],309:[function(e,t){"use strict";t.exports=function(e){var t,n="never"!==e.options[0],r=new RegExp(" "),i=2===e.options.length,o=i?e.options[1].exceptions:[];return o.length&&(t=o.map(function(e){return e.replace(/([.*+?${}()|\^\[\]\/\\])/g,"\\$1")}),r=new RegExp("(^("+t.join(")+$)|(^(")+")+$)")),{LineComment:function(t){if(n){if(0===t.value.length)return;0!==t.value.indexOf(" ")&&0!==t.value.indexOf("	")&&(i&&!r.test(t.value)?e.report(t,"Expected exception block, space or tab after // in comment."):i||e.report(t,"Expected space or tab after // in comment."))}else(0===t.value.indexOf(" ")||0===t.value.indexOf("	"))&&e.report(t,"Unexpected space or tab after // in comment.")}}},t.exports.schema=[{"enum":["always","never"]},{type:"object",properties:{exceptions:{type:"array",items:{type:"string"}}},additionalProperties:!1}]},{}],310:[function(e,t){"use strict";function n(e){var t,n,r=[];for(t=0;t<e.length&&(n=e[t],"ExpressionStatement"===n.type&&"Literal"===n.expression.type&&"use strict"===n.expression.value);t++)r[t]=n;return r}var r={"function":'Use the function form of "use strict".',global:'Use the global form of "use strict".',multiple:'Multiple "use strict" directives.',never:"Strict mode is not permitted.",unnecessary:'Unnecessary "use strict" directive.'};t.exports=function(e){function t(t,n){var r;if(Array.isArray(t))for(r=0;r<t.length;r++)e.report(t[r],n);else e.report(t,n)}function i(e){return e&&"ExpressionStatement"===e.type&&"use strict"===e.expression.value}function o(t){var n=!1,r="Program"===t.type,o=1===f.length,a=f.length?f[f.length-1]:!1;n=l?!0:r?i(t.body[0])||a:t.body.body&&i(t.body.body[0])||a,f.push(n),a||n||!o||e.report(t,'Missing "use strict" statement.')}function a(){f.pop()}function s(e){var i=n(e.body.body),o=0===f.length,a=l||f.length&&f[f.length-1],s=i.length>0||l;s?(a&&i.length&&t(i[0],r.unnecessary),t(i.slice(1),r.multiple)):o&&!l&&t(e,r.function),f.push(a||s)}function u(){f.pop()}var c=e.options[0],l=e.ecmaFeatures.modules,p={},f=[];return p.deprecated={Program:o,FunctionDeclaration:o,FunctionExpression:o,ArrowFunctionExpression:o,"Program:exit":a,"FunctionDeclaration:exit":a,"FunctionExpression:exit":a,"ArrowFunctionExpression:exit":a},p.never={Program:function(e){t(n(e.body),r.never)},FunctionDeclaration:function(e){t(n(e.body.body),r.never)},FunctionExpression:function(e){t(n(e.body.body),r.never)}},p.global={Program:function(e){var i=n(e.body);!l&&e.body.length&&i.length<1?t(e,r.global):l?t(i,r.unnecessary):t(i.slice(1),r.multiple)},FunctionDeclaration:function(e){t(n(e.body.body),r.global)},FunctionExpression:function(e){t(n(e.body.body),r.global)}},p.function={Program:function(e){t(n(e.body),r.function)},FunctionDeclaration:s,FunctionExpression:s,"FunctionDeclaration:exit":u,"FunctionExpression:exit":u},p[c||"deprecated"]},t.exports.schema=[{"enum":["never","global","function"]}]},{}],311:[function(e,t){"use strict";t.exports=function(e){return{BinaryExpression:function(t){!/^(?:[<>]|[!=]=)=?$/.test(t.operator)||"NaN"!==t.left.name&&"NaN"!==t.right.name||e.report(t,"Use the isNaN function to compare with NaN.")}}},t.exports.schema=[]},{}],312:[function(e,t){"use strict";var n=e("doctrine");t.exports=function(e){function t(){l.push({returnPresent:!1})}function r(e){var t=l[l.length-1];t&&null!==e.argument&&(t.returnPresent=!0)}function i(t){var r,i=e.getJSDocComment(t),o=l.pop(),p=!1,f=!1,d=Object.create(null);if(i){try{r=n.parse(i.value,{strict:!0,unwrap:!0,sloppy:!0})}catch(h){return/braces/i.test(h.message)?e.report(i,"JSDoc type missing brace."):e.report(i,"JSDoc syntax error."),void 0}r.tags.forEach(function(t){switch(t.title){case"param":t.type||e.report(i,"Missing JSDoc parameter type for '{{name}}'.",{name:t.name}),!t.description&&u&&e.report(i,"Missing JSDoc parameter description for '{{name}}'.",{name:t.name}),d[t.name]?e.report(i,"Duplicate JSDoc parameter '{{name}}'.",{name:t.name}):-1===t.name.indexOf(".")&&(d[t.name]=1);break;case"return":case"returns":p=!0,s||o.returnPresent||"void"===t.type.name||"undefined"===t.type.name?(t.type||e.report(i,"Missing JSDoc return type."),"void"!==t.type.name&&!t.description&&c&&e.report(i,"Missing JSDoc return description.")):e.report(i,"Unexpected @"+t.title+" tag; function has no return statement.");break;case"constructor":case"class":f=!0}a.hasOwnProperty(t.title)&&e.report(i,"Use @{{name}} instead.",{name:a[t.title]})}),p||f||(s||o.returnPresent)&&e.report(i,"Missing JSDoc @returns for function.");var m=Object.keys(d);t.params.forEach(function(t,n){var r=t.name;"Identifier"===t.type&&(m[n]&&r!==m[n]?e.report(i,"Expected JSDoc for '{{name}}' but found '{{jsdocName}}'.",{name:r,jsdocName:m[n]}):d[r]||e.report(i,"Missing JSDoc for parameter '{{name}}'.",{name:r}))})}}var o=e.options[0]||{},a=o.prefer||{},s=o.requireReturn!==!1,u=o.requireParamDescription!==!1,c=o.requireReturnDescription!==!1,l=[];return{ArrowFunctionExpression:t,FunctionExpression:t,FunctionDeclaration:t,"ArrowFunctionExpression:exit":i,"FunctionExpression:exit":i,"FunctionDeclaration:exit":i,ReturnStatement:r}},t.exports.schema=[{type:"object",properties:{prefer:{type:"object",additionalProperties:{type:"string"}},requireReturn:{type:"boolean"},requireParamDescription:{type:"boolean"},requireReturnDescription:{type:"boolean"}},additionalProperties:!1}]},{doctrine:11}],313:[function(e,t){"use strict";t.exports=function(e){var t=["symbol","undefined","object","boolean","number","string","function"],n=["==","===","!=","!=="];return{UnaryExpression:function(r){var i,o;"typeof"===r.operator&&(i=e.getAncestors().pop(),"BinaryExpression"===i.type&&-1!==n.indexOf(i.operator)&&(o=i.left===r?i.right:i.left,"Literal"===o.type&&-1===t.indexOf(o.value)&&e.report(o,"Invalid typeof comparison value")))}}},t.exports.schema=[]},{}],314:[function(e,t){"use strict";t.exports=function(e){function t(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value}function n(e){return"ImportDeclaration"===e.type||"ImportSpecifier"===e.type||"ImportDefaultSpecifier"===e.type||"ImportNamespaceSpecifier"===e.type}function r(e,r){for(var i=0,o=r.length;o>i&&(t(r[i])||n(r[i]));++i);for(;o>i;++i){if("VariableDeclaration"!==r[i].type)return!1;if(r[i]===e)return!0}}function i(t,n){r(t,n.body)||e.report(t,a)}function o(t,n,i){/Function/.test(i.type)&&"BlockStatement"===n.type&&r(t,n.body)||e.report(t,a)}var a='All "var" declarations must be at the top of the function scope.';return{VariableDeclaration:function(t){var n=e.getAncestors(),r=n.pop(),a=n.pop();"var"===t.kind&&("Program"===r.type?i(t,r):o(t,r,a))}}},t.exports.schema=[]},{}],315:[function(e,t){"use strict";t.exports=function(e){function t(t){var n=e.getTokenBefore(t),r=e.getTokenAfter(t);return n&&"("===n.value&&r&&")"===r.value}var n=e.options[0]||"outside";return{CallExpression:function(r){if("FunctionExpression"===r.callee.type){var i=t(r),o=t(r.callee);i||o?"inside"!==n||o?"outside"!==n||i||e.report(r,"Move the invocation into the parens that contain the function."):e.report(r,"Wrap only the function expression in parens."):e.report(r,"Wrap an immediate function invocation in parentheses.")}}}},t.exports.schema=[{"enum":["outside","inside","any"]}]},{}],316:[function(e,t){"use strict";t.exports=function(e){return{Literal:function(t){var n,r,i,o=e.getFirstToken(t),a=o.type;"RegularExpression"===a&&(n=e.getTokenBefore(t),i=e.getAncestors(),r=i[i.length-1],"MemberExpression"!==r.type||r.object!==t||n&&"("===n.value||e.report(t,"Wrap the regexp literal in parens to disambiguate the slash."))}}},t.exports.schema=[]},{}],317:[function(e,t){"use strict";function n(e){return/^(==|===|!=|!==|<|>|<=|>=)$/.test(e)}function r(e){return/^(==|===)$/.test(e)}function i(e){return["<","<="].indexOf(e)>=0}function o(e){return"UnaryExpression"===e.type&&"-"===e.operator&&e.prefix&&"Literal"===e.argument.type&&"number"==typeof e.argument.value}function a(e){return"Literal"===e.type?e:o(e)?{type:"Literal",value:-e.argument.value,raw:"-"+e.argument.value}:null}function s(e,t){if(e.type!==t.type)return!1;switch(e.type){case"Identifier":return e.name===t.name;case"Literal":return e.value===t.value;case"MemberExpression":return s(e.object,t.object)&&s(e.property,t.property);case"ThisExpression":return!0;default:return!1}}t.exports=function(e){function t(t){function n(){var e,n;return"&&"===t.operator&&(e=a(u.left))&&(n=a(c.right))&&e.value<=n.value&&s(u.right,c.left)}function r(){var e,n;return"||"===t.operator&&(e=a(u.right))&&(n=a(c.left))&&e.value<=n.value&&s(u.left,c.right)}function o(){var n,r;return(n=e.getTokenBefore(t))&&"("===n.value&&(r=e.getTokenAfter(t))&&")"===r.value}var u=t.left,c=t.right;return"LogicalExpression"===t.type&&"BinaryExpression"===u.type&&"BinaryExpression"===c.type&&i(u.operator)&&i(c.operator)&&(n()||r())&&o()}var u="always"===e.options[0],c=e.options[1]&&e.options[1].exceptRange,l=e.options[1]&&e.options[1].onlyEquality;return{BinaryExpression:u?function(i){"Literal"!==i.right.type&&!o(i.right)||!r(i.operator)&&l||!n(i.operator)||c&&t(e.getAncestors().pop())||e.report(i,"Expected literal to be on the left side of "+i.operator+".")}:function(i){"Literal"!==i.left.type&&!o(i.left)||!r(i.operator)&&l||!n(i.operator)||c&&t(e.getAncestors().pop())||e.report(i,"Expected literal to be on the right side of "+i.operator+".")}}},t.exports.schema=[{"enum":["always","never"]},{type:"object",properties:{exceptRange:{type:"boolean"},onlyEquality:{type:"boolean"}},additionalProperties:!1}]},{}],318:[function(e,t){(function(e){"use strict";function n(e,t,n){return e+new Array(t-e.length+1).join(n||" ")}function r(e,t,n){return new Array(t-e.length+1).join(n||" ")+e}function i(e){var t=0,n=Object.keys(e).map(function(n){var r=e[n];return t+=r,[n,r]}).sort(function(e,t){return t[1]-e[1]}).slice(0,10);n.forEach(function(e){e.push((100*e[1]/t).toFixed(1)+"%"),e[1]=e[1].toFixed(3)}),n.unshift(a);var r=[];n.forEach(function(e){var t,n,i=e.length;for(t=0;i>t;t++)n=e[t].length,(!r[t]||n>r[t])&&(r[t]=n)});var i=n.map(function(e){return e.map(function(e,t){return s[t](e,r[t])}).join(" | ")});i.splice(1,0,r.map(function(e,t){return 0!==t&&t!==r.length-1&&e++,s[t](":",e+1,"-")}).join("|")),console.log(i.join("\n"))}var o=!!e.env.TIMING,a=["Rule","Time (ms)","Relative"],s=[n,r,r];t.exports=function(){function t(t,r){return"undefined"==typeof n[t]&&(n[t]=0),function(){var i=e.hrtime();r.apply(null,Array.prototype.slice.call(arguments)),i=e.hrtime(i),n[t]+=1e3*i[0]+i[1]/1e6}}var n=Object.create(null);return o&&e.on("exit",function(){i(n)}),{time:t,enabled:o}}()}).call(this,e("_process"))},{_process:8}],319:[function(e,t){"use strict";t.exports=function(e){function t(t,n){var r,o=[];for(r=Math.max(0,t);n>r&&i>r;r++)o.push(e[r]);return o}function n(e){var t=e.range[1],n=u[t];return"undefined"==typeof n&&(n=s[t]-1),isNaN(n)&&(n=i-1),n}var r,i,o,a={},s=Object.create(null),u=Object.create(null);for(r=0,i=e.length;i>r;r++)o=e[r].range,s[o[0]]=r,u[o[1]]=r;return a.getTokensBefore=function(e,n){var r=s[e.range[0]];return t(r-(n||0),r)},a.getTokenBefore=function(t,n){return e[s[t.range[0]]-(n||0)-1]},a.getTokensAfter=function(e,r){var i=n(e)+1;return t(i,i+(r||0))},a.getTokenAfter=function(t,r){return e[n(t)+(r||0)+1]},a.getTokens=function(e,r,i){return t(s[e.range[0]]-(r||0),n(e)+(i||0)+1)},a.getFirstTokens=function(e,r){var i=s[e.range[0]];return t(i,Math.min(n(e)+1,i+(r||0)))},a.getFirstToken=function(t,n){return e[s[t.range[0]]+(n||0)]},a.getLastTokens=function(e,r){var i=n(e)+1;return t(Math.max(s[e.range[0]],i-(r||0)),i)},a.getLastToken=function(t,r){return e[n(t)-(r||0)]},a.getTokensBetween=function(e,r,i){return i=i||0,t(n(e)+1-i,s[r.range[0]]+i)},a.getTokenByRangeStart=function(t){return e[s[t]]||null},a}},{}],320:[function(e,t,n){"use strict";var r="eslint-plugin-",i=/^@.*\//i;n.mergeConfigs=function o(e,t){return Object.keys(t).forEach(function(n){var r=t[n];return"plugins"===n?(e[n]||(e[n]=[]),r.forEach(function(t){-1===e[n].indexOf(t)&&e[n].push(t)}),void 0):Array.isArray(e[n])&&!Array.isArray(r)&&"number"==typeof r?(e[n][0]=t[n],void 0):(e[n]="object"!=typeof r||Array.isArray(r)||null===r?t[n]:o(e[n]||{},t[n]),void 0)}),e},n.removePluginPrefix=function(e){return 0===e.indexOf(r)?e.substring(r.length):e},n.getNamespace=function(e){return e.match(i)?e.match(i)[0]:""},n.removeNameSpace=function(e){return e.replace(i,"")},n.PLUGIN_NAME_PREFIX=r},{}]},{},[146])(146)})}(),define("sap.watt.toolsets.javascript/lib/eslint/eslint_default_config",{eslintConfig:{env:{browser:!0,node:!0,amd:!0,mocha:!0,jquery:!0},globals:{require:!1,respond:!1,getRow:!1,emit:!1,send:!1,start:!1,sum:!1,log:!1,exports:!1,module:!1,provides:!1,alert:!1,confirm:!1,console:!1,Debug:!1,opera:!1,prompt:!1,_trace:!1,_log:!1,_assert:!1,_measure:!1,_fatal:!1,START:!1,STOP:!1,ERROR:!1,WARNING:!1,INFO:!1,DEBUG:!1,dojo:!1,dijit:!1,dojox:!1,define:!1,$:!1,jQuery:!1,$$:!1,Asset:!1,Browser:!1,Chain:!1,Class:!1,Color:!1,Cookie:!1,Core:!1,Document:!1,DomReady:!1,DOMEvent:!1,DOMReady:!1,Drag:!1,Element:!1,Elements:!1,Event:!1,Events:!1,Fx:!1,Group:!1,Hash:!1,HtmlTable:!1,Iframe:!1,IframeShim:!1,InputValidator:!1,instanceOf:!1,Keyboard:!1,Locale:!1,Mask:!1,MooTools:!1,Native:!1,Options:!1,OverText:!1,Request:!1,Scroller:!1,Slick:!1,Slider:!1,Sortables:!1,Spinner:!1,Swiff:!1,Tips:!1,Type:!1,typeOf:!1,URI:!1,Window:!1,escape:!1,unescape:!1,phantom:!0,WebPage:!0,$A:!1,$F:!1,$H:!1,$R:!1,$break:!1,$continue:!1,$w:!1,Abstract:!1,Ajax:!1,Enumerable:!1,Field:!1,Form:!1,Insertion:!1,ObjectRange:!1,PeriodicalExecuter:!1,Position:!1,Prototype:!1,Selector:!1,Template:!1,Toggle:!1,Try:!1,Autocompleter:!1,Builder:!1,Control:!1,Draggable:!1,Draggables:!1,Droppables:!1,Effect:!1,Sortable:!1,SortableObserver:!1,Sound:!1,Scriptaculous:!1,defineClass:!1,deserialize:!1,gc:!1,help:!1,importClass:!1,importPackage:!1,java:!1,load:!1,loadClass:!1,Packages:!1,print:!1,quit:!1,readFile:!1,readUrl:!1,runCommand:!1,seal:!1,serialize:!1,spawn:!1,sync:!1,toint32:!1,version:!1,target:!1,echo:!1,exit:!1,cd:!1,pwd:!1,ls:!1,find:!1,cp:!1,rm:!1,mv:!1,mkdir:!1,test:!1,cat:!1,sed:!1,grep:!1,which:!1,dirs:!1,pushd:!1,popd:!1,env:!1,exec:!1,chmod:!1,config:!1,error:!1,tempdir:!1,importScripts:!0,postMessage:!0,self:!0,ActiveXObject:!0,Enumerator:!0,GetObject:!0,ScriptEngine:!0,ScriptEngineBuildVersion:!0,ScriptEngineMajorVersion:!0,ScriptEngineMinorVersion:!0,VBArray:!0,WSH:!0,WScript:!0,XDomainRequest:!0,YUI:!1,Y:!1,YUI_config:!1,asyncTest:!1,deepEqual:!1,equal:!1,equals:!1,expect:!1,notDeepEqual:!1,notEqual:!1,notStrictEqual:!1,ok:!1,QUnit:!1,stop:!1,strictEqual:!1,"throws":!1,ctypes:!1,xsruntime:!1,jasmine:!1,describe:!1,it:!1,xdescribe:!1,xit:!1,beforeEach:!1,afterEach:!1,spyOn:!1,waitsFor:!1,runs:!1,Q:!1,d3:!1,sinon:!1,sap:!1},rules:{"block-scoped-var":0,"brace-style":[0,"1tbs"],camelcase:2,complexity:[0,11],"consistent-return":2,"consistent-this":[0,"that"],curly:[2,"all"],"default-case":0,"dot-notation":[2,{allowKeywords:!0}],eqeqeq:2,"func-names":0,"func-style":[0,"declaration"],"guard-for-in":0,"handle-callback-err":0,"max-depth":[0,4],"max-len":[0,80,4],"max-nested-callbacks":[0,2],"max-params":[0,3],"max-statements":[0,10],"new-cap":2,"new-parens":2,"no-alert":2,"no-array-constructor":2,"no-bitwise":0,"no-caller":2,"no-catch-shadow":2,"no-comma-dangle":0,"no-cond-assign":2,"no-console":2,"no-constant-condition":2,"no-control-regex":2,"no-debugger":2,"no-delete-var":2,"no-div-regex":0,"no-dupe-keys":2,"no-else-return":0,"no-empty":2,"no-empty-class":2,"no-empty-label":2,"no-eq-null":0,"no-eval":2,"no-ex-assign":2,"no-extend-native":2,"no-extra-boolean-cast":2,"no-extra-parens":0,"no-extra-semi":2,"no-extra-strict":0,"no-fallthrough":2,"no-floating-decimal":0,"no-func-assign":2,"global-strict":[0,"never"],"no-implied-eval":2,"no-inner-declarations":[2,"functions"],"no-invalid-regexp":2,"no-irregular-whitespace":2,"no-iterator":2,"no-label-var":2,"no-labels":2,"no-lone-blocks":2,"no-lonely-if":0,"no-loop-func":2,"no-mixed-requires":[0,!1],"no-mixed-spaces-and-tabs":[0,!1],"no-multi-str":2,"no-multiple-empty-lines":[0,{max:2}],"no-native-reassign":2,"no-negated-in-lhs":2,"no-nested-ternary":0,"no-new":2,"no-new-func":2,"no-new-object":2,"no-new-require":0,"no-new-wrappers":2,"no-obj-calls":2,"no-octal":2,"no-octal-escape":2,"no-path-concat":0,"no-plusplus":0,"no-process-exit":2,"no-proto":2,"no-redeclare":2,"no-regex-spaces":2,"no-reserved-keys":2,"no-restricted-modules":0,"no-return-assign":2,"no-script-url":2,"no-self-compare":0,"no-sequences":2,"no-shadow":2,"no-shadow-restricted-names":2,"no-spaced-func":2,"no-space-before-semi":0,"no-sparse-arrays":2,"no-sync":0,"no-ternary":0,"no-undef":2,"no-undef-init":2,"no-underscore-dangle":0,"no-unreachable":2,"no-unused-expressions":2,"no-unused-vars":[2,{vars:"all",args:"after-used"}],"no-use-before-define":2,"no-warning-comments":[0,{terms:["todo","fixme","xxx"],location:"start"}],"no-with":2,"no-wrap-func":2,yoda:[2,"never"],"one-var":0,"quote-props":0,quotes:[2,"double"],radix:0,semi:2,"sort-vars":0,"space-after-keywords":[0,"always"],"space-before-blocks":[0,"always"],"space-in-brackets":[0,"never"],"space-infix-ops":0,"space-return-throw-case":2,"space-unary-ops":[2,{words:!0,nonwords:!1}],strict:0,"use-isnan":2,"valid-jsdoc":0,"valid-typeof":2,"wrap-iife":0,"wrap-regex":0,"no-dupe-args":2,"no-duplicate-case":2,"no-extra-bind":2,"no-inline-comments":0,"no-multi-spaces":0,"no-process-env":0,"no-trailing-spaces":0,"no-throw-literal":2,"no-undefined":0,"no-void":2,"no-var":0,"comma-dangle":[2,"never"],"comma-spacing":0,"comma-style":0,"eol-last":0,"generator-star":0,"generator-star-spacing":0,indent:0,"key-spacing":[0,{beforeColon:!1,afterColon:!0}],"operator-assignment":[0,"always"],"padded-blocks":0,"semi-spacing":[0,{before:!1,after:!0}],"space-after-function-name":[0,"never"],"space-before-function-parentheses":[0,"always"],"space-in-parens":[0,"never"],"spaced-line-comment":[0,"always"],"vars-on-top":0,"no-continue":0,"no-empty-character-class":2,"linebreak-style":[0,"unix"],"no-param-reassign":0,"no-unneeded-ternary":0,"prefer-const":0,"array-bracket-spacing":[0,"never"],"accessor-pairs":0,"computed-property-spacing":[0,"never"],"dot-location":0,"lines-around-comment":0,"newline-after-var":0,"object-curly-spacing":[0,"never"],"object-shorthand":0,"operator-linebreak":0,"space-before-function-paren":[0,"always"],"spaced-comment":0}},rulesExt:{"block-scoped-var":{severity:"warning",category:"Best Practice"},"brace-style":{severity:"info",category:"Stylistic Issue"},camelcase:{severity:"info",category:"Stylistic Issue"},complexity:{severity:"warning",category:"Best Practice"},"consistent-return":{severity:"warning",category:"Best Practice"},"consistent-this":{severity:"info",category:"Stylistic Issue"},curly:{severity:"error",category:"Best Practice"},"default-case":{severity:"warning",category:"Best Practice"},"dot-notation":{severity:"warning",category:"Best Practice"},eqeqeq:{severity:"warning",category:"Best Practice"},"func-names":{severity:"info",category:"Stylistic Issue"},"func-style":{severity:"info",category:"Stylistic Issue"},"guard-for-in":{severity:"warning",category:"Best Practice"},"handle-callback-err":{severity:"warning",category:"Node.js"},"max-depth":{severity:"warning",category:"Best Practice"},"max-len":{severity:"warning",category:"Best Practice"},"max-nested-callbacks":{severity:"info",category:"Stylistic Issue"},"max-params":{severity:"warning",category:"Best Practice"},"max-statements":{severity:"warning",category:"Best Practice"},"new-cap":{severity:"info",category:"Stylistic Issue"},"new-parens":{severity:"error",category:"Stylistic Issue"},"no-alert":{severity:"warning",category:"Best Practice"},"no-array-constructor":{severity:"info",category:"Stylistic Issue"},"no-bitwise":{severity:"warning",category:"Best Practice"},"no-caller":{severity:"error",category:"Best Practice"},"no-catch-shadow":{severity:"warning",category:"Variable"},"no-comma-dangle":{severity:"error",category:"Possible Error"},"no-cond-assign":{severity:"warning",category:"Possible Error"},"no-console":{severity:"warning",category:"Possible Error"},"no-constant-condition":{severity:"error",category:"Possible Error"},"no-control-regex":{severity:"warning",category:"Possible Error"},"no-debugger":{severity:"error",category:"Possible Error"},"no-delete-var":{severity:"warning",category:"Variable"},"no-div-regex":{severity:"warning",category:"Best Practice"},"no-dupe-keys":{severity:"error",category:"Possible Error"},"no-else-return":{severity:"warning",category:"Best Practice"},"no-empty":{severity:"error",category:"Best Practice"},"no-empty-class":{severity:"warning",category:"Possible Error"},"no-empty-label":{severity:"warning",category:"Best Practice"},"no-eq-null":{severity:"warning",category:"Best Practice"},"no-eval":{severity:"error",category:"Best Practice"},"no-ex-assign":{severity:"error",category:"Possible Error"},"no-extend-native":{severity:"warning",category:"Best Practice"},"no-extra-boolean-cast":{severity:"error",category:"Possible Error"},"no-extra-parens":{severity:"warning",category:"Best Practice"},"no-extra-semi":{severity:"error",category:"Best Practice"},"no-extra-strict":{severity:"warning",category:"Strict Mode"},"no-fallthrough":{severity:"warning",category:"Best Practice"},"no-floating-decimal":{severity:"warning",category:"Best Practice"},"no-func-assign":{severity:"error",category:"Possible Error"},"global-strict":{severity:"warning",category:"Strict Mode"},"no-implied-eval":{severity:"warning",category:"Best Practice"},"no-inner-declarations":{severity:"error",category:"Possible Error"},"no-invalid-regexp":{severity:"error",category:"Possible Error"},"no-irregular-whitespace":{severity:"error",category:"Possible Error"},"no-iterator":{severity:"warning",category:"Best Practice"},"no-label-var":{severity:"warning",category:"Variable"},"no-labels":{severity:"warning",category:"Best Practice"},"no-lone-blocks":{severity:"warning",category:"Best Practice"},"no-lonely-if":{severity:"warning",category:"Best Practice"},"no-loop-func":{severity:"warning",category:"Best Practice"},"no-mixed-requires":{severity:"warning",category:"Node.js"},"no-mixed-spaces-and-tabs":{severity:"info",category:"Stylistic Issue"},"no-multi-str":{severity:"warning",category:"Best Practice"},"no-multiple-empty-lines":{severity:"info",category:"Stylistic Issue"},"no-native-reassign":{severity:"error",category:"Best Practice"},"no-negated-in-lhs":{severity:"error",category:"Possible Error"},"no-nested-ternary":{severity:"info",category:"Stylistic Issue"},"no-new":{severity:"warning",category:"Best Practice"},"no-new-func":{severity:"error",category:"Best Practice"},"no-new-object":{severity:"info",category:"Stylistic Issue"},"no-new-require":{severity:"warning",category:"Node.js"},"no-new-wrappers":{severity:"warning",category:"Best Practice"},"no-obj-calls":{severity:"error",category:"Possible Error"},"no-octal":{severity:"warning",category:"Best Practice"},"no-octal-escape":{severity:"warning",category:"Best Practice"},"no-path-concat":{severity:"warning",category:"Node.js"},"no-plusplus":{severity:"warning",category:"Best Practice"},"no-process-exit":{severity:"warning",category:"Node.js"},"no-proto":{severity:"warning",category:"Best Practice"},"no-redeclare":{severity:"warning",category:"Best Practice"},"no-regex-spaces":{severity:"warning",category:"Possible Error"},"no-reserved-keys":{severity:"error",category:"Possible Error"},"no-restricted-modules":{severity:"warning",category:"Node.js"},"no-return-assign":{severity:"warning",category:"Best Practice"},"no-script-url":{severity:"warning",category:"Best Practice"},"no-self-compare":{severity:"warning",category:"Best Practice"},"no-sequences":{severity:"warning",category:"Best Practice"},"no-shadow":{severity:"warning",category:"Variable"},"no-shadow-restricted-names":{severity:"warning",category:"Variable"},"no-spaced-func":{severity:"info",category:"Stylistic Issue"},"no-space-before-semi":{severity:"info",category:"Stylistic Issue"},"no-sparse-arrays":{severity:"error",category:"Possible Error"},"no-sync":{severity:"warning",category:"Node.js"},"no-ternary":{severity:"info",category:"Stylistic Issue"},"no-undef":{severity:"error",category:"Variable"},"no-undef-init":{severity:"warning",category:"Variable"},"no-underscore-dangle":{severity:"info",category:"Stylistic Issue"},"no-unreachable":{severity:"error",category:"Possible Error"},"no-unused-expressions":{severity:"warning",category:"Best Practice"},"no-unused-vars":{severity:"warning",category:"Variable"},"no-use-before-define":{severity:"warning",category:"Variable"},"no-warning-comments":{severity:"warning",category:"Best Practice"},"no-with":{severity:"error",category:"Best Practice"},"no-wrap-func":{severity:"info",category:"Stylistic Issue"},yoda:{severity:"warning",category:"Best Practice"},"one-var":{severity:"info",category:"Stylistic Issue"},"quote-props":{severity:"info",category:"Stylistic Issue"},quotes:{severity:"info",category:"Stylistic Issue"},radix:{severity:"warning",category:"Best Practice"},semi:{severity:"error",category:"Possible Error"},"sort-vars":{severity:"info",category:"Stylistic Issue"},"space-after-keywords":{severity:"info",category:"Stylistic Issue"},"space-before-blocks":{severity:"info",category:"Stylistic Issue"},"space-in-brackets":{severity:"info",category:"Stylistic Issue"},"space-infix-ops":{severity:"info",category:"Stylistic Issue"},"space-return-throw-case":{severity:"info",category:"Stylistic Issue"},"space-unary-ops":{severity:"info",category:"Stylistic Issue"},strict:{severity:"warning",category:"Strict Mode"},"use-isnan":{severity:"error",category:"Possible Error"},"valid-jsdoc":{severity:"warning",category:"Possible Error"},"valid-typeof":{severity:"warning",category:"Possible Error"},"wrap-iife":{severity:"warning",category:"Best Practice"},"wrap-regex":{severity:"info",category:"Stylistic Issue"},"no-dupe-args":{severity:"error",category:"Possible Error"},"no-duplicate-case":{severity:"error",category:"Possible Error"},"no-extra-bind":{severity:"warning",category:"Best Practice"},"no-inline-comments":{severity:"info",category:"Stylistic Issue"},"no-multi-spaces":{severity:"info",category:"Stylistic Issue"},"no-process-env":{severity:"warning",category:"Best Practice"},"no-trailing-spaces":{severity:"info",category:"Stylistic Issue"},"no-throw-literal":{severity:"warning",category:"Best Practice"},"no-undefined":{severity:"error",category:"Variable"},"no-void":{severity:"warning",category:"Best Practice"},"no-var":{severity:"warning",category:"ECMAScript 6"},"comma-dangle":{severity:"error",category:"Possible Error"},"comma-spacing":{severity:"info",category:"Stylistic Issue"},"comma-style":{severity:"info",category:"Stylistic Issue"},"eol-last":{severity:"info",category:"Stylistic Issue"},"generator-star":{severity:"info",category:"ECMAScript 6"},"generator-star-spacing":{severity:"info",category:"ECMAScript 6"},indent:{severity:"info",category:"Stylistic Issue"},"key-spacing":{severity:"info",category:"Stylistic Issue"},"operator-assignment":{severity:"info",category:"Stylistic Issue"},"padded-blocks":{severity:"info",category:"Stylistic Issue"},"semi-spacing":{severity:"info",category:"Stylistic Issue"},"space-after-function-name":{severity:"info",category:"Stylistic Issue"},"space-before-function-parentheses":{severity:"info",category:"Stylistic Issue"},"space-in-parens":{severity:"info",category:"Stylistic Issue"},"spaced-line-comment":{severity:"info",category:"Stylistic Issue"},"vars-on-top":{severity:"warning",category:"Best Practice"},"no-continue":{severity:"info",category:"Stylistic Issue"},"no-empty-character-class":{severity:"error",category:"Possible Error"},"linebreak-style":{severity:"info",category:"Stylistic Issue"},"no-param-reassign":{severity:"info",category:"Stylistic Issue"},"no-unneeded-ternary":{severity:"info",category:"Stylistic Issue"},"prefer-const":{severity:"info",category:"Stylistic Issue"},"array-bracket-spacing":{severity:"info",category:"Stylistic Issue"},"accessor-pairs":{severity:"warning",category:"Best Practice"},"computed-property-spacing":{severity:"info",category:"Stylistic Issue"},"dot-location":{severity:"warning",category:"Best Practice"},"lines-around-comment":{severity:"info",category:"Stylistic Issue"},"newline-after-var":{severity:"info",category:"Stylistic Issue"},"object-curly-spacing":{severity:"info",category:"Stylistic Issue"},"object-shorthand":{severity:"warning",category:"Best Practice"},"operator-linebreak":{severity:"info",category:"Stylistic Issue"},"space-before-function-paren":{severity:"info",category:"Stylistic Issue"},"spaced-comment":{severity:"info",category:"Stylistic Issue"}}}),define("sap.watt.toolsets.javascript/util/JSValidatorHelper",["../lib/eslint/eslint","../lib/eslint/eslint_default_config"],function(e,t){"use strict";return{getDefaultConfiguration:function(){return t},getIssues:function(t,n,r,i){var o=[],a=n.eslintConfig||{},s=n.rulesExt;i&&(Object.getOwnPropertyNames(i).forEach(function(e){try{var t=new Function(i[e]);i[e]=t()}catch(n){o.push(e)}}),this._defineCustomRulesToLinter(i));var u=e.verify(t,a,r,!1);e.reset();for(var c={root:{},issues:[]},l=0;l<u.length;l++){var p=u[l];p.fatal&&(p.ruleId="syntax-parse"),p.severity=p.fatal?"error":s[p.ruleId].severity,p.category=p.fatal?"Syntax Error":s[p.ruleId].category,p.helpUrl=p.fatal?"http://www.ecma-international.org/ecma-262/5.1/":s[p.ruleId].helpUrl,void 0===c.root.severity&&p.fatal&&(c.root.severity=p.severity),p.severity=p.severity.toLowerCase(),"error"!==p.severity&&"warning"!==p.severity&&"info"!==p.severity&&(p.severity="warning"),c.issues.push({category:p.category,checker:"ESLint",column:p.column,helpUrl:p.helpUrl,line:p.line,message:p.message,path:r,ruleId:p.ruleId,severity:p.severity,source:p.source})
}return c},_defineCustomRulesToLinter:function(t){e.defineRules(t)}}}),define("sap.watt.toolsets.javascript/service/JSValidator",["../util/JSValidatorHelper","sap/watt/lib/lodash/lodash"],function(e,t){"use strict";return{oCustomRulesPath:{path:null,content:null},init:function(){},validate:function(e,t){var n=this,r=this.context.service.basevalidator;return r.getProjectValidationConfiguration(n.context.self.getProxyMetadata().getName()).then(function(r){var i=r||{},o=i.customRulesPath;return Q.all([n.getDefaultConfiguration(o),n.getCustomRulesContent(o)]).spread(function(r,o){var a=n.getConfiguration(t,r,i.configuration);return n._validateAllDocs(e,a,o)})})},_validateAllDocs:function(e,n,r){var i=this;if(e){var o=i._collectAllDocsValidation(e,n,r);return Q.all(o).then(function(e){var n=[];return t.each(e,function(e){e&&n.push(e)}),n})}},_collectAllDocsValidation:function(e,n,r){var i=this;if(e){var o=[];return t.each(e,function(e){var t=e.getEntity().getType();return"file"!==t?(i.context.service.log.info(i.context.service.self.getProxyMetadata().getName(),"directory is not supported for validation",["user"]).done(),void 0):(o.push(e.getContent().then(function(t){var o=e.getEntity().getFullPath(),a=i.getIssuesSynchronously(t,n,o,r);return{document:e,result:a}})),void 0)}),o}},getDefaultConfiguration:function(e){return this.context.service.jsDisplayValidatorConfiguration.getDefaultConfiguration(e)},getIssuesSynchronously:function(t,n,r,i){return e.getIssues(t,n,r,i)},getPathToImplementationModule:function(){return"sap/watt/toolsets/plugin/javascript/util/JSValidatorHelper"},getConfiguration:function(e,n,r){var i=t.merge(n||{},r||{});return this._getFilteredConfiguration(i,e)},_getFilteredConfiguration:function(e,n){if(!n)return e;var r=e.eslintConfig||{},i=r.rules||{},o=e.rulesExt,a={info:n.indexOf("info")>=0,warning:n.indexOf("warning")>=0,error:n.indexOf("error")>=0};return t.forEach(i,function(e,t){if(i.hasOwnProperty(t)){var n;o[t]?n=o[t].severity:(n="warning",this.context.service.log.info(this.context.service.jsValidator.getProxyMetadata().getName(),"rule "+t+"missing severity information. severity set to warning.",["user"]).done()),a[n]||("number"==typeof e?i[t]=0:Array.isArray(e)&&(e[0]=0))}}),e},getCustomRulesContent:function(e){var t=[],n=[],r=this;return r.oUserDefinedRulesContent={},e?r.oCustomRulesPath.sPath===e?r.oCustomRulesPath.content:r.context.service.filesystem.documentProvider.getDocument(e).then(function(i){return i?i.getCurrentMetadata(!0).then(function(i){return jQuery.each(i,function(e,i){i.folder||-1===i.name.indexOf(".js")||(t.push(i.name.replace(/\.js/,"")),n.push(r.context.service.filesystem.documentProvider.getDocument(i.path).then(function(e){return e.getContent()})))}),Q.all(n).then(function(n){return jQuery.each(n,function(e,n){n=n.replace(/(\s*(module\.exports)\s*=)/,"\n return "),r.oUserDefinedRulesContent[t[e]]=n}),r.oCustomRulesPath.path=e,r.oCustomRulesPath.content=r.oUserDefinedRulesContent,r.oCustomRulesPath.content})}):(r.context.service.log.info(r.context.service.jsValidator.getProxyMetadata().getName()," user defined RulesDirectory: "+e+" ,defined in project settings was not found",["user"]).done(),Q())}):Q()}}}),define("sap.watt.toolsets.javascript/util/rulesSecurity",[],{scan:function(e){var t,n="",r=["eval","ajax","ActiveXObject","XMLHttpRequest","XHR","require","src","alert\\.","alert\\("];for(t=0;t<r.length;t++)n+="\\b"+r[t]+"\\b",t!==r.length-1&&(n+="|");n+="";var i=new RegExp(n,"i"),o=i.test(e);return!o}}),define("sap.watt.toolsets.javascript/service/JSDisplayValidatorConfiguration",["../util/JSValidatorHelper","sap/watt/lib/lodash/lodash","../util/rulesSecurity"],function(e,t,n){"use strict";return{FILE_TYPE:"file",FILE_EXTENTION:"js",CUSTOM_RULES_DEFAULTS:{enabled:0,severity:"warning",category:"Best Practice"},init:function(){var t=e.getDefaultConfiguration().rulesExt;$.each(t,function(e){t[e].helpUrl||(t[e].helpUrl="http://eslint.org/docs/rules/"+e)})},_mergeExists:function(e,n){var r=t.omit(n,function(n,r){return!t.has(e,r)}),i=t.cloneDeep(e);return t.merge(i,r)},convertConfigurationToDisplayFormat:function(e){var t={};if(!e.eslintConfig)return t;var n=e.eslintConfig.rules||{},r=e.rulesExt;$.each(n,function(e,n){var i={};i.ruleId=e,i.severity=r[e].severity,"number"==typeof n?i.enable=0===n?!1:!0:Array.isArray(n)&&(i.enable=0===n[0]?!1:!0,i.additionalProperties=n.slice(1)),i.category=r[e].category,i.helpUrl=r[e].helpUrl,t[e]=i});var i={};return i.rules=t,i.header={},e.eslintConfig.globals&&(i.header.globals=e.eslintConfig.globals),e.eslintConfig.env&&(i.header.env=e.eslintConfig.env),i},_buildConfigurationTemplate:function(e,n,r,i){var o={eslintConfig:{}};return e&&(o.eslintConfig.rules=e),i&&(o.rulesExt=i),n&&(o.eslintConfig.globals=n),r&&(o.eslintConfig.env=r),t.isEmpty(o.eslintConfig)&&!o.rulesExt?void 0:o},convertConfigurationToConcreteFormat:function(e){var t={},n={},r=e||{};$.each(r.rules||{},function(e,r){t[r.ruleId]={},r.additionalProperties?(t[r.ruleId]=[],t[r.ruleId][0]=r.enable===!1?0:2,t[r.ruleId]=t[r.ruleId].concat(r.additionalProperties)):t[r.ruleId]=r.enable===!1?0:2,n[r.ruleId]={},n[r.ruleId].severity=r.severity,n[r.ruleId].category=r.category,n[r.ruleId].helpUrl=r.helpUrl});var i=r.header||{};return this._buildConfigurationTemplate(t,i.globals,i.env,n)},mergeConfigurations:function(e,n){return t.merge(e||{},n||{})},_diffObjects:function(e,n){if(!e&&n)return{};if(!n)return e;var r=t.omit(e,function(e,r){return t.isEqual(n[r],e)});return t.isEmpty(r)?void 0:r},_diffConfigurations:function(e,t){var n=e.eslintConfig||{},r=t.eslintConfig||{},i=this._diffObjects(n.rules,r.rules),o=this._diffObjects(n.env,r.env),a=this._diffObjects(n.globals,r.globals),s=this._diffObjects(e.rulesExt,t.rulesExt);return this._buildConfigurationTemplate(i,a,o,s)},_reduceConfigurations:function(e,n){var r=t.cloneDeep(e||{}),i=r.eslintConfig||{},o=n.eslintConfig||{},a=t.omit(i.rules,function(e,n){return!t.has(o.rules,n)}),s=t.omit(r.rulesExt,function(e,r){return!t.has(n.rulesExt,r)});return this._buildConfigurationTemplate(a,void 0,void 0,s)},getDiffConfigurationToStore:function(e,n,r){var i=this,o=i._reduceConfigurations(n,e),a=i._reduceConfigurations(r,o),s=t.merge(o,a),u=i._diffConfigurations(r,e);return t.merge(u,s)},getDefaultConfiguration:function(n){var r=this;try{var i=t.cloneDeep(e.getDefaultConfiguration());return n?r._setCustomeConfiguration(n).then(function(e){return e?(e=t.cloneDeep(e),r._mergeRules(e,i)):i}):Q(i)}catch(o){return r.context.service.log.error("javascript eslint - failed to get default rules",o.message).done(),{}}},_mergeRules:function(e,n){return e?n?t.merge(e,n):(this.context.service.log.warning("javascript eslint - an element to be merged not supplied: ",JSON.stringify(n)).done(),e):(this.context.service.log.warn("javascript eslint - an element to be merged not supplied: ",JSON.stringify(e)).done(),n)},_setCustomeConfiguration:function(e){var n=[],r=this;return e?this.context.service.filesystem.documentProvider.getDocument(e).then(function(i){return i?i.getCurrentMetadata(!0).then(function(i){return jQuery.each(i,function(i,o){o.folder||(t.endsWith(o.name,r.FILE_EXTENTION)?n.push(r.context.service.filesystem.documentProvider.getDocument(o.path)):r.context.service.log.warn(r.context.service.jsValidator.getProxyMetadata().getName()," user defined RulesDirectory: found files other then "+r.FILE_EXTENTION+" in: "+e,["user"]).done())}),Q.all(n).then(function(e){return e.length>0?r._securityScan(e).then(function(e){return r._createCustomRulesStruct(e)}):null})}):(r.context.service.log.warn(r.context.service.jsValidator.getProxyMetadata().getName()," user defined RulesDirectory "+e+" defined under project settings was not found",["user"]).done(),null)}):Q()},_securityScan:function(e){var r=[],i=[];return t.each(e,function(e){e.getEntity().getFullPath(),i.push(e.getContent().then(function(t){return{content:t,document:e}}))}),Q.all(i).then(function(e){return t.each(e,function(e){var t=e.content,i=e.document;n.scan(t)&&r.push(i.getTitle().replace(/\.js/,""))}),r})},_createCustomRulesStruct:function(e){var t=this;return this.context.service.basevalidator.getRulesConfigurationTemplate().then(function(n){var r=n.eslintConfig.rules,i=n.rulesExt;return jQuery.each(e,function(e,n){"length"!==n&&(r[n]={},r[n]=t.CUSTOM_RULES_DEFAULTS.enabled,i[n]={},i[n].severity=t.CUSTOM_RULES_DEFAULTS.severity,i[n].category=t.CUSTOM_RULES_DEFAULTS.category)}),n})},getUpdatedConfiguration:function(e){var n=this;return e?n.context.service.filesystem.documentProvider.getDocument(e).then(function(r){return r&&r.getType()===n.FILE_TYPE?r.getContent().then(function(r){var i;try{i=JSON.parse(r)}catch(o){return n.context.service.log.error(n.context.service.jsValidator.getProxyMetadata().getName()," validator configuration file: "+e+" has invalid JSON structure.",["user"]).done(),{}}var a={eslintConfig:{env:i.env,globals:i.globals,rules:i.rules},rulesExt:i.additionalRuleMetadata};return t.forEach(a.rulesExt,function(e){switch(e.severity.toLowerCase()[0]){case"e":e.severity="error";break;case"w":e.severity="warning";break;case"i":e.severity="info"}}),a}):(n.context.service.log.error(n.context.service.jsValidator.getProxyMetadata().getName()," validator configuration file: "+e+" ,defined in project settings was not found",["user"]).done(),void 0)}):{}}}}),define("sap.watt.toolsets.javascript/service/JSDefinitionImpl",["./../util/editorUtil","sap/watt/lib/orion/javascript/esprima/esprimaJsContentAssist","sap/watt/lib/orion/javascript/esprima/esprimaVisitor","sap/watt/lib/orion/javascript/esprima/indexer"],function(e,t,n,r){"use strict";function i(e,n,r,i){if(!e||!n||!r)return console.log(i.getText("i18n","message_invalidargument",["JSDefinitionImpl","_findDefinition"])),Q();var o=new t.EsprimaJavaScriptContentAssistProvider(r);return o.findDefinition(e,n.buffer,n.offset)}function o(e,t,n,r,i){if(e&&e.range)return i=i.bind(t),i(e);if(!r){var o;o=e&&e.hoverName?n.getText("i18n","message_nodefinitionfoundfor",[e.hoverName]):n.getText("i18n","message_nodefinitionfound"),t.context.service.log.info(h,o,["user"]).done()}return Q()}function a(t,n,r){return t?n.filesystem.documentProvider.getDocument(t).then(function(i){return i?n.document.open(i).then(function(){return n.repositorybrowser.setSelection(i,!0).then(function(){return e.getCurrentEditor(n.selection)})}):(console.log(r.getText("i18n","message_failtogetdocument",[t])),Q())}):(console.log(r.getText("i18n","message_invalidargument",["JSDefinitionImpl","_activateEditor"])),Q())}function s(t,n,r,i){if(t){if(!n||2!==n.length)return console.log(i.getText("i18n","message_invalidargument",["JSDefinitionImpl","_highlightResult"])),Q();e.setEditorSelection(t,n[0],n[1],r)}return Q()}function u(t,n){return e.getCurrentEditor(t).then(function(e){return e?e.getContentStatusByPosition(n):Q()})}function c(t,n){if(!v&&n.clientX&&n.clientY){v=!0;var r=t.jsdefinition,i=t.selection;e.getCurrentUI5Editor(i).then(function(t){var o=e.getDocumentPosition(t,n.clientX,n.clientY);u(i,o).then(function(n){r.hoverDefinition(n).then(function(n){n&&n.range&&n.hoverRange&&!g?e.addDefinitionMarker(t,n.hoverRange):e.clearDefinitionMarker(t),v=!1}).done()}).done()}).done()}}function l(e){m.clientX=e.clientX,m.clientY=e.clientY,e.ctrlKey&&e.altKey&&c(this.context.service,m)}function p(e){e.ctrlKey&&(y=!0),e.altKey&&(_=!0),x&&y&&_&&(c(this.context.service,m),x=!1)}function f(){y=!1,_=!1,x||(this.cancelHoverStyle(),x=!0)}function d(t){if(t.ctrlKey&&t.altKey&&!g){g=!0;var n=this.context.service.jsdefinition,r=this.context.service.selection;e.getCurrentUI5Editor(r).then(function(i){var o=e.getDocumentPosition(i,t.clientX,t.clientY);u(r,o).then(function(t){e.clearDefinitionMarker(i),n.gotoDefinition(t,!0).then(function(){g=!1}).done()}).done()}).done()}}var h="jsdefinition",m={},g=!1,v=!1,y=!1,_=!1,x=!0,b=null;return{configure:function(e){b=e.supportedFileExtensions},isFileExtensionSupported:function(e){return b.indexOf(e)>-1},gotoDefinition:function(e,t){var a=this.context.i18n,s=this.context;if(!e)return console.log(a.getText("i18n","message_invalidargument",["JSDefinitionImpl","gotoDefinition"])),Q();var u=n.parse(e.buffer),c=this.context.service.indexmanager,l=this.highlightResult,p=this,f=[c.getDependentIndexes(e.targetFile,u),c.getUI5ProjectInfo(e.targetFile)];return Q.spread(f,function(n,c){var f=new r.OrionIndexer(n,e.targetFile,c);return i(u,e,f,a).then(function(e){return s.event.fireNavigationRequested({sTarget:e.path,oCoordinates:e.range}),o(e,p,a,t,l)})}).fail(function(e){return console.warn(e),Q()})},hoverDefinition:function(e){var t=this.context.i18n;if(!e)return console.log(t.getText("i18n","message_invalidargument",["JSDefinitionImpl","hoverDefinition"])),Q();var o=n.parse(e.buffer),a=this.context.service,s=a.indexmanager,u=[s.getDependentIndexes(e.targetFile,o),s.getUI5ProjectInfo(e.targetFile)];return Q.spread(u,function(n,a){var s=new r.OrionIndexer(n,a);return i(o,e,s,t)}).fail(function(e){return console.warn(e),Q()})},highlightResult:function(t){if(!t)return Q();var n=this.context.i18n;if(t.path)return a(t.path,this.context.service).then(function(e){return s(e,t.range,!0,n)});var r=this.context.service.selection;return e.getCurrentEditor(r).then(function(e){return s(e,t.range,!1,n)})},applyHoverStyle:function(t){var n=this.context.service.selection;e.getCurrentUI5Editor(n).then(function(n){e.addDefinitionMarker(n,t)}).done()},cancelHoverStyle:function(){var t=this.context.service.selection;e.getCurrentUI5Editor(t).then(function(t){e.clearDefinitionMarker(t)}).done()},onSelectionChanged:function(t){g=!1,v=!1;var n=t.params.owner;if(n&&n.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor")){var r=n,i=t.params.selection;if(i&&i.length>0){var o=i[0].document;o&&this.isFileExtensionSupported(o.getEntity().getFileExtension())&&(l=l.bind(this),p=p.bind(this),f=f.bind(this),d=d.bind(this),r.getUI5Editor().then(function(t){e.attachEditorEvent(t,"mousemove",l),e.attachEditorEvent(t,"keydown",p),e.attachEditorEvent(t,"keyup",f),e.attachEditorEvent(t,"click",d)}).done())}}}}}),define("sap.watt.toolsets.javascript/service/JSDocGenImpl",[],function(){"use strict";return{configure:function(){},_generateFunctionCommentString:function(e,t){e.commentLoc.start.column;var n="",r=t||"\n",i="/** ";i+=r+n+" * ",i+=this._isConstructorFunction(e.name)?r+n+" * @constructor ":"";for(var o=e.params,a=0;a<o.length;a++)i+=r+n+" * @param "+o[a].name;return e.returns&&e.returns.length>0&&(i+=r+n+" * @returns"),i+=r+n+" */",i+=r+n},_isConstructorFunction:function(e){if(!e)return!1;var t=e.charAt(0);return t.toUpperCase()===t},_getSpaces:function(e){for(var t="",n=0;e-1>n;n++)t+=" ";return t},_insertInString:function(e,t,n){return e.substr(0,t)+n+e.substr(t)},_logWarning:function(e){this.context.service.log.warn(this.context.service.jsdocgen.getProxyMetadata().getName(),e,["user"]).done()},generateComment:function(e,t,n){if(!e||!e.node||!t)return this._logWarning("invalid input"),Q();var r=this._generateFunctionCommentString(e,n);return r},_findVisitor:function(e,t){switch(e.type){case"FunctionDeclaration":return t.nodeInfo.node?!1:(t.offset>e.range[0]&&t.offset<e.body.range[0]&&(t.nodeInfo.node=e,t.nodeInfo.name=e.id.name,t.nodeInfo.params=e.params,t.nodeInfo.commentLoc=e.loc,t.nodeInfo.commentOffset=e.range[0]),!0);case"VariableDeclarator":if(t.node)return!1;var n=e;return n.init&&"FunctionExpression"===n.init.type&&t.offset>n.init.range[0]&&t.offset<n.init.body.range[0]&&(t.nodeInfo.node=n.init,t.nodeInfo.name=n.id.name,t.nodeInfo.params=n.init.params,t.nodeInfo.commentLoc=n.id.loc,t.nodeInfo.commentOffset=n.id.range[0]),!0;case"Property":if(t.node)return!1;var r=e;return r.value&&"FunctionExpression"===r.value.type&&t.offset>r.value.range[0]&&t.offset<r.value.body.range[0]&&(t.nodeInfo.node=r.value,t.nodeInfo.name=r.key.name,t.nodeInfo.params=r.value.params,t.nodeInfo.commentLoc=r.key.loc,t.nodeInfo.commentOffset=r.key.range[0]),!0;case"ReturnStatement":return t.endNode?!1:(t.nodeInfo.node&&t.nodeInfo.returns.push(e),!0);default:return!t.endNode}},_postVisit:function(e,t){switch(e.type){case"FunctionDeclaration":case"FunctionExpression":t.nodeInfo.node===e&&(t.endNode=!0)}},_ParseOptions:{range:!0,loc:!0,tolerant:!1},findDefinition:function(e){if(!e)return this.context.service.log.warn(this.context.service.jsdocgen.getProxyMetadata().getName(),"could not get content from editor",["user"]).done(),Q();var t=this.context.service.jsASTManager,n={offset:e.offset,nodeInfo:{node:null,returns:[]}},r=this;return t.parseAndVisit(e.targetFile,e.buffer,this._ParseOptions,n,this._findVisitor,this._postVisit).then(function(e){return e.outlineContext.nodeInfo}).fail(function(e){r.context.service.log.warn(r.context.service.jsdocgen.getProxyMetadata().getName(),e,["user"]).done()})}}}),function(){function e(e,n){"use strict";var r=new t(e,n);return r.beautify()}function t(e,t){"use strict";function r(e,t){var n=0;e&&(n=e.indentation_level,!c()&&e.line_indent_level>n&&(n=e.line_indent_level));var r={mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,in_html_comment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:X.length,had_comment:!1,ternary_depth:0};return r}function i(){return{text:[]}}function o(e){if(e=void 0===e?!1:e,X.length)for(a(X[X.length-1],e);e&&X.length>1&&0===X[X.length-1].text.length;)X.pop(),a(X[X.length-1],e)}function a(e){for(;e.text.length&&(" "===e.text[e.text.length-1]||e.text[e.text.length-1]===Z||e.text[e.text.length-1]===xt);)e.text.pop()}function s(e){return e.replace(/^\s+|\s+$/g,"")}function u(e){e=e.replace(/\x0d/g,"");for(var t=[],n=e.indexOf("\n");-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function c(){var e=X[X.length-1];return 0===e.text.length}function l(){if(c()){if(1===X.length)return!0;var e=X[X.length-2];return 0===e.text.length}return!1}function p(e){if(e=void 0===e?!1:e,_t.wrap_line_length&&!e){var t=X[X.length-1],n=0;t.text.length>0&&(n=t.text.join("").length+$.length+(dt?1:0),n>=_t.wrap_line_length&&(e=!0))}(_t.preserve_newlines&&pt||e)&&!c()&&(f(!1,!0),b(et.mode)||w(et.mode)||et.mode===yt.Statement||(ft=!0))}function f(e,t){if(ft=!1,dt=!1,!t&&";"!==et.last_text&&","!==et.last_text&&"="!==et.last_text&&"TK_OPERATOR"!==K)for(;et.mode===yt.Statement&&!et.if_block&&!et.do_block;)S();1===X.length&&c()||(e||!c())&&(et.multiline_frame=!0,X.push(i()))}function d(){if(c()){var e=X[X.length-1];if(_t.keep_array_indentation&&b(et.mode)&&pt){e.text.push("");for(var t=0;t<gt.length;t+=1)e.text.push(gt[t])}else xt&&e.text.push(xt),h(et.indentation_level+(ft?1:0))}}function h(e){if(X.length>1){var t=X[X.length-1];et.line_indent_level=e;for(var n=0;e>n;n+=1)t.text.push(Z)}}function m(){var e=X[X.length-1];if(dt&&e.text.length){var t=e.text[e.text.length-1];" "!==t&&t!==Z&&e.text.push(" ")}}function g(e){e=e||$,d(),ft=!1,m(),dt=!1,X[X.length-1].text.push(e)}function v(){et.indentation_level+=1}function y(){et.indentation_level>0&&(!et.parent||et.indentation_level>et.parent.indentation_level)&&(et.indentation_level-=1)}function _(e){if(!e.multiline_frame)for(var t,n=e.start_line_index,r=0;n<X.length;)t=X[n],n++,0!==t.text.length&&(r=xt&&t.text[0]===xt?1:0,t.text[r]===Z&&t.text.splice(r,1))}function x(e){et?(nt.push(et),tt=et):tt=r(null,e),et=r(tt,e)}function b(e){return e===yt.ArrayLiteral}function w(e){return I(e,[yt.Expression,yt.ForInitializer,yt.Conditional])}function S(){nt.length>0&&(tt=et,et=nt.pop(),tt.mode===yt.Statement&&_(tt))}function E(){return et.mode===yt.ObjectLiteral&&":"===et.last_text&&0===et.ternary_depth}function C(){return"TK_RESERVED"===K&&I(et.last_text,["var","let","const"])&&"TK_WORD"===J||"TK_RESERVED"===K&&"do"===et.last_text||"TK_RESERVED"===K&&"return"===et.last_text&&!pt||"TK_RESERVED"===K&&"else"===et.last_text&&("TK_RESERVED"!==J||"if"!==$)||"TK_END_EXPR"===K&&(tt.mode===yt.ForInitializer||tt.mode===yt.Conditional)?(x(yt.Statement),v(),"TK_RESERVED"===K&&I(et.last_text,["var","let","const"])&&"TK_WORD"===J&&(et.declaration_statement=!0),p("TK_RESERVED"===J&&I($,["do","for","if","while"])),ft=!1,!0):!1}function T(e,t){for(var n=0;n<e.length;n++){var r=s(e[n]);if(r.charAt(0)!==t)return!1}return!0}function P(e){return I(e,["case","return","do","if","throw","else"])}function I(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function D(e){for(var t,n=!1,r="",i=0,o="",a=0;n||i<e.length;)if(t=e.charAt(i),i++,n){if(n=!1,"x"===t)o=e.substr(i,2),i+=2;else{if("u"!==t){r+="\\"+t;continue}o=e.substr(i,4),i+=4}if(!o.match(/^[0123456789abcdefABCDEF]+$/))return e;if(a=parseInt(o,16),a>=0&&32>a){r+="x"===t?"\\x"+o:"\\u"+o;continue}if(34===a||39===a||92===a)r+="\\"+String.fromCharCode(a);else{if("x"===t&&a>126&&255>=a)return e;r+=String.fromCharCode(a)}}else"\\"===t?n=!0:r+=t;return r}function A(e){for(var t=at,n=q.charAt(t);I(n,rt)&&n!==e;){if(t++,t>=ht)return!1;n=q.charAt(t)}return n===e}function N(){var e;if(mt=0,at>=ht)return["","TK_EOF"];pt=!1,gt=[];var t=q.charAt(at);for(at+=1;I(t,rt);){if("\n"===t?(mt+=1,gt=[]):mt&&(t===Z?gt.push(Z):"\r"!==t&&gt.push(" ")),at>=ht)return["","TK_EOF"];t=q.charAt(at),at+=1}if(n.isIdentifierChar(q.charCodeAt(at-1))){if(ht>at)for(;n.isIdentifierChar(q.charCodeAt(at))&&(t+=q.charAt(at),at+=1,at!==ht););if(at!==ht&&t.match(/^[0-9]+[Ee]$/)&&("-"===q.charAt(at)||"+"===q.charAt(at))){var r=q.charAt(at);at+=1;var i=N();return t+=r+i[0],[t,"TK_WORD"]}return"TK_DOT"===K||"TK_RESERVED"===K&&I(et.last_text,["set","get"])||!I(t,ut)?[t,"TK_WORD"]:"in"===t?[t,"TK_OPERATOR"]:[t,"TK_RESERVED"]}if("("===t||"["===t)return[t,"TK_START_EXPR"];if(")"===t||"]"===t)return[t,"TK_END_EXPR"];if("{"===t)return[t,"TK_START_BLOCK"];if("}"===t)return[t,"TK_END_BLOCK"];if(";"===t)return[t,"TK_SEMICOLON"];if("/"===t){var o="",a=!0;if("*"===q.charAt(at)){if(at+=1,ht>at)for(;ht>at&&("*"!==q.charAt(at)||!q.charAt(at+1)||"/"!==q.charAt(at+1))&&(t=q.charAt(at),o+=t,("\n"===t||"\r"===t)&&(a=!1),at+=1,!(at>=ht)););return at+=2,a&&0===mt?["/*"+o+"*/","TK_INLINE_COMMENT"]:["/*"+o+"*/","TK_BLOCK_COMMENT"]}if("/"===q.charAt(at)){for(o=t;"\r"!==q.charAt(at)&&"\n"!==q.charAt(at)&&(o+=q.charAt(at),at+=1,!(at>=ht)););return[o,"TK_COMMENT"]}}if("`"===t||"'"===t||'"'===t||("/"===t||_t.e4x&&"<"===t&&q.slice(at-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*\/?\s*>/))&&("TK_RESERVED"===K&&P(et.last_text)||"TK_END_EXPR"===K&&I(tt.mode,[yt.Conditional,yt.ForInitializer])||I(K,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var u=t,c=!1,l=!1;if(e=t,ht>at)if("/"===u){for(var p=!1;c||p||q.charAt(at)!==u;)if(e+=q.charAt(at),c?c=!1:(c="\\"===q.charAt(at),"["===q.charAt(at)?p=!0:"]"===q.charAt(at)&&(p=!1)),at+=1,at>=ht)return[e,"TK_STRING"]}else if(_t.e4x&&"<"===u){var f=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*(\/?)\s*>/g,d=q.slice(at-1),h=f.exec(d);if(h&&0===h.index){for(var m=h[2],g=0;h;){var v=!!h[1],y=h[2],_=!!h[h.length-1]||"![CDATA["===y.slice(0,8);if(y!==m||_||(v?--g:++g),0>=g)break;h=f.exec(d)}var x=h?h.index+h[0].length:d.length;return at+=x-1,[d.slice(0,x),"TK_STRING"]}}else for(;c||q.charAt(at)!==u;)if(e+=q.charAt(at),c?(("x"===q.charAt(at)||"u"===q.charAt(at))&&(l=!0),c=!1):c="\\"===q.charAt(at),at+=1,at>=ht)return[e,"TK_STRING"];if(at+=1,e+=u,l&&_t.unescape_strings&&(e=D(e)),"/"===u)for(;ht>at&&I(q.charAt(at),it);)e+=q.charAt(at),at+=1;return[e,"TK_STRING"]}if("#"===t){if(1===X.length&&0===X[0].text.length&&"!"===q.charAt(at)){for(e=t;ht>at&&"\n"!==t;)t=q.charAt(at),e+=t,at+=1;return[s(e)+"\n","TK_UNKNOWN"]}var b="#";if(ht>at&&I(q.charAt(at),ct)){do t=q.charAt(at),b+=t,at+=1;while(ht>at&&"#"!==t&&"="!==t);return"#"===t||("["===q.charAt(at)&&"]"===q.charAt(at+1)?(b+="[]",at+=2):"{"===q.charAt(at)&&"}"===q.charAt(at+1)&&(b+="{}",at+=2)),[b,"TK_WORD"]}}if("<"===t&&"<!--"===q.substring(at-1,at+3)){for(at+=3,t="<!--";"\n"!==q.charAt(at)&&ht>at;)t+=q.charAt(at),at++;return et.in_html_comment=!0,[t,"TK_COMMENT"]}if("-"===t&&et.in_html_comment&&"-->"===q.substring(at-1,at+2))return et.in_html_comment=!1,at+=2,["-->","TK_COMMENT"];if("."===t)return[t,"TK_DOT"];if(I(t,ot)){for(;ht>at&&I(t+q.charAt(at),ot)&&(t+=q.charAt(at),at+=1,!(at>=ht)););return","===t?[t,"TK_COMMA"]:"="===t?[t,"TK_EQUALS"]:[t,"TK_OPERATOR"]}return[t,"TK_UNKNOWN"]}function k(){C();var e=yt.Expression;if("["===$){if("TK_WORD"===K||")"===et.last_text)return"TK_RESERVED"===K&&I(et.last_text,st)&&(dt=!0),x(e),g(),v(),_t.space_in_paren&&(dt=!0),void 0;e=yt.ArrayLiteral,b(et.mode)&&("["===et.last_text||","===et.last_text&&("]"===Y||"}"===Y))&&(_t.keep_array_indentation||f())}else"TK_RESERVED"===K&&"for"===et.last_text?e=yt.ForInitializer:"TK_RESERVED"===K&&I(et.last_text,["if","while"])&&(e=yt.Conditional);";"===et.last_text||"TK_START_BLOCK"===K?f():"TK_END_EXPR"===K||"TK_START_EXPR"===K||"TK_END_BLOCK"===K||"."===et.last_text?(p(pt),ft=!1):"TK_RESERVED"===K&&"("===$||"TK_WORD"===K||"TK_OPERATOR"===K?"TK_RESERVED"!==K||"function"!==et.last_word&&"typeof"!==et.last_word?"TK_RESERVED"!==K||!I(et.last_text,st)&&"catch"!==et.last_text||_t.space_before_conditional&&(dt=!0):_t.jslint_happy&&(dt=!0):dt=!0,"("===$&&("TK_EQUALS"===K||"TK_OPERATOR"===K)&&(E()||p()),x(e),g(),_t.space_in_paren&&(dt=!0),v()}function O(){for(;et.mode===yt.Statement;)S();et.multiline_frame&&(p("]"===$&&b(et.mode)&&!_t.keep_array_indentation),ft=!1),_t.space_in_paren&&("TK_START_EXPR"!==K||_t.space_in_empty_paren?dt=!0:(o(),dt=!1)),"]"===$&&_t.keep_array_indentation?(g(),S()):(S(),g()),_(tt),et.do_while&&tt.mode===yt.Conditional&&(tt.mode=yt.Expression,et.do_block=!1,et.do_while=!1)}function R(){x(yt.BlockStatement);var e=A("}"),t=e&&"function"===et.last_word&&"TK_END_EXPR"===K;"expand"===_t.brace_style?"TK_OPERATOR"!==K&&(t||"TK_EQUALS"===K||"TK_RESERVED"===K&&P(et.last_text)&&"else"!==et.last_text)?dt=!0:f(!1,!0):"TK_OPERATOR"!==K&&"TK_START_EXPR"!==K?"TK_START_BLOCK"===K?f():dt=!0:b(tt.mode)&&","===et.last_text&&("}"===Y?dt=!0:f()),g(),v()}function j(){for(;et.mode===yt.Statement;)S();var e="TK_START_BLOCK"===K;"expand"===_t.brace_style?e||f():e||(b(et.mode)&&_t.keep_array_indentation?(_t.keep_array_indentation=!1,f(),_t.keep_array_indentation=!0):f()),S(),g()}function F(){if(C()||!pt||w(et.mode)||"TK_OPERATOR"===K&&"--"!==et.last_text&&"++"!==et.last_text||"TK_EQUALS"===K||!_t.preserve_newlines&&"TK_RESERVED"===K&&I(et.last_text,["var","let","const","set","get"])||f(),et.do_block&&!et.do_while){if("TK_RESERVED"===J&&"while"===$)return dt=!0,g(),dt=!0,et.do_while=!0,void 0;f(),et.do_block=!1}if(et.if_block)if(et.else_block||"TK_RESERVED"!==J||"else"!==$){for(;et.mode===yt.Statement;)S();et.if_block=!1,et.else_block=!1}else et.else_block=!0;if("TK_RESERVED"===J&&("case"===$||"default"===$&&et.in_case_statement))return f(),(et.case_body||_t.jslint_happy)&&(y(),et.case_body=!1),g(),et.in_case=!0,et.in_case_statement=!0,void 0;if("TK_RESERVED"===J&&"function"===$&&((I(et.last_text,["}",";"])||c()&&!I(et.last_text,["{",":","=",","]))&&(l()||et.had_comment||(f(),f(!0))),"TK_RESERVED"===K||"TK_WORD"===K?"TK_RESERVED"===K&&I(et.last_text,["get","set","new","return"])?dt=!0:f():"TK_OPERATOR"===K||"="===et.last_text?dt=!0:w(et.mode)||f()),("TK_COMMA"===K||"TK_START_EXPR"===K||"TK_EQUALS"===K||"TK_OPERATOR"===K)&&(E()||p()),"TK_RESERVED"===J&&"function"===$)return g(),et.last_word=$,void 0;if(lt="NONE","TK_END_BLOCK"===K?"TK_RESERVED"===J&&I($,["else","catch","finally"])?"expand"===_t.brace_style||"end-expand"===_t.brace_style?lt="NEWLINE":(lt="SPACE",dt=!0):lt="NEWLINE":"TK_SEMICOLON"===K&&et.mode===yt.BlockStatement?lt="NEWLINE":"TK_SEMICOLON"===K&&w(et.mode)?lt="SPACE":"TK_STRING"===K?lt="NEWLINE":"TK_RESERVED"===K||"TK_WORD"===K?lt="SPACE":"TK_START_BLOCK"===K?lt="NEWLINE":"TK_END_EXPR"===K&&(dt=!0,lt="NEWLINE"),"TK_RESERVED"===J&&I($,st)&&")"!==et.last_text&&(lt="else"===et.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===J&&I($,["else","catch","finally"]))if("TK_END_BLOCK"!==K||"expand"===_t.brace_style||"end-expand"===_t.brace_style)f();else{o(!0);var e=X[X.length-1];"}"!==e.text[e.text.length-1]&&f(),dt=!0}else"NEWLINE"===lt?"TK_RESERVED"===K&&P(et.last_text)?dt=!0:"TK_END_EXPR"!==K?"TK_START_EXPR"===K&&"TK_RESERVED"===J&&I($,["var","let","const"])||":"===et.last_text||("TK_RESERVED"===J&&"if"===$&&"else"===et.last_word&&"{"!==et.last_text?dt=!0:f()):"TK_RESERVED"===J&&I($,st)&&")"!==et.last_text&&f():b(et.mode)&&","===et.last_text&&"}"===Y?f():"SPACE"===lt&&(dt=!0);g(),et.last_word=$,"TK_RESERVED"===J&&"do"===$&&(et.do_block=!0),"TK_RESERVED"===J&&"if"===$&&(et.if_block=!0)}function L(){for(C()&&(dt=!1);et.mode===yt.Statement&&!et.if_block&&!et.do_block;)S();g(),et.mode===yt.ObjectLiteral&&(et.mode=yt.BlockStatement)}function M(){C()?dt=!0:"TK_RESERVED"===K||"TK_WORD"===K?dt=!0:"TK_COMMA"===K||"TK_START_EXPR"===K||"TK_EQUALS"===K||"TK_OPERATOR"===K?E()||p():f(),g()}function B(){et.declaration_statement&&(et.declaration_assignment=!0),dt=!0,g(),dt=!0}function U(){return et.declaration_statement?(w(et.parent.mode)&&(et.declaration_assignment=!1),g(),et.declaration_assignment?(et.declaration_assignment=!1,f(!1,!0)):dt=!0,void 0):("TK_END_BLOCK"===K&&et.mode!==yt.Expression?(g(),et.mode===yt.ObjectLiteral&&"}"===et.last_text?f():dt=!0):et.mode===yt.ObjectLiteral?(g(),f()):(g(),dt=!0),void 0)}function V(){var e=!0,t=!0;return"TK_RESERVED"===K&&P(et.last_text)?(dt=!0,g(),void 0):"*"!==$||"TK_DOT"!==K||Y.match(/^\d+$/)?":"===$&&et.in_case?(et.case_body=!0,v(),g(),f(),et.in_case=!1,void 0):"::"===$?(g(),void 0):(!pt||"--"!==$&&"++"!==$||f(),"TK_OPERATOR"===K&&p(),I($,["--","++","!"])||I($,["-","+"])&&(I(K,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||I(et.last_text,st)||","===et.last_text)?(e=!1,t=!1,";"===et.last_text&&w(et.mode)&&(e=!0),"TK_RESERVED"===K&&(e=!0),et.mode!==yt.BlockStatement&&et.mode!==yt.Statement||"{"!==et.last_text&&";"!==et.last_text||f()):":"===$?0===et.ternary_depth?(et.mode===yt.BlockStatement&&(et.mode=yt.ObjectLiteral),e=!1):et.ternary_depth-=1:"?"===$&&(et.ternary_depth+=1),dt=dt||e,g(),dt=t,void 0):(g(),void 0)}function Q(){var e,t=u($),n=!1;for(f(!1,!0),t.length>1&&T(t.slice(1),"*")&&(n=!0),g(t[0]),e=1;e<t.length;e++)f(!1,!0),n?g(" "+s(t[e])):X[X.length-1].text.push(t[e]);f(!1,!0)}function G(){dt=!0,g(),dt=!0}function H(){pt?f(!1,!0):o(!0),dt=!0,g(),f(!1,!0)}function z(){"TK_RESERVED"===K&&P(et.last_text)?dt=!0:p(")"===et.last_text&&_t.break_chained_methods),g()}function W(){g(),"\n"===$[$.length-1]&&f()}var q,X,$,J,K,Y,Z,et,tt,nt,rt,it,ot,at,st,ut,ct,lt,pt,ft,dt,ht,mt,gt,vt,yt,_t,xt="";for(rt="\n\r	 ".split(""),it="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),ct="0123456789".split(""),ot="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! , : ? ^ ^= |= :: =>",ot+=" <%= <% %> <?= <? ?>",ot=ot.split(" "),st="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function".split(","),ut=st.concat(["do","in","else","get","set","new","catch","finally","typeof"]),yt={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},vt={TK_START_EXPR:k,TK_END_EXPR:O,TK_START_BLOCK:R,TK_END_BLOCK:j,TK_WORD:F,TK_RESERVED:F,TK_SEMICOLON:L,TK_STRING:M,TK_EQUALS:B,TK_OPERATOR:V,TK_COMMA:U,TK_BLOCK_COMMENT:Q,TK_INLINE_COMMENT:G,TK_COMMENT:H,TK_DOT:z,TK_UNKNOWN:W},t=t?t:{},_t={},void 0!==t.space_after_anon_function&&void 0===t.jslint_happy&&(t.jslint_happy=t.space_after_anon_function),void 0!==t.braces_on_own_line&&(_t.brace_style=t.braces_on_own_line?"expand":"collapse"),_t.brace_style=t.brace_style?t.brace_style:_t.brace_style?_t.brace_style:"collapse","expand-strict"===_t.brace_style&&(_t.brace_style="expand"),_t.indent_size=t.indent_size?parseInt(t.indent_size,10):4,_t.indent_char=t.indent_char?t.indent_char:" ",_t.preserve_newlines=void 0===t.preserve_newlines?!0:t.preserve_newlines,_t.break_chained_methods=void 0===t.break_chained_methods?!1:t.break_chained_methods,_t.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),_t.space_in_paren=void 0===t.space_in_paren?!1:t.space_in_paren,_t.space_in_empty_paren=void 0===t.space_in_empty_paren?!1:t.space_in_empty_paren,_t.jslint_happy=void 0===t.jslint_happy?!1:t.jslint_happy,_t.keep_array_indentation=void 0===t.keep_array_indentation?!1:t.keep_array_indentation,_t.space_before_conditional=void 0===t.space_before_conditional?!0:t.space_before_conditional,_t.unescape_strings=void 0===t.unescape_strings?!1:t.unescape_strings,_t.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),_t.e4x=void 0===t.e4x?!1:t.e4x,t.indent_with_tabs&&(_t.indent_char="	",_t.indent_size=1),Z="";_t.indent_size>0;)Z+=_t.indent_char,_t.indent_size-=1;
for(;e&&(" "===e.charAt(0)||"	"===e.charAt(0));)xt+=e.charAt(0),e=e.substring(1);q=e,ht=e.length,K="TK_START_BLOCK",Y="",X=[i()],ft=!1,dt=!1,gt=[],nt=[],x(yt.BlockStatement),at=0,this.beautify=function(){for(var e,t,n,r;;){if(e=N(),$=e[0],J=e[1],"TK_EOF"===J){for(;et.mode===yt.Statement;)S();break}if(n=_t.keep_array_indentation&&b(et.mode),pt=mt>0,n)for(t=0;mt>t;t+=1)f(t>0);else if(_t.max_preserve_newlines&&mt>_t.max_preserve_newlines&&(mt=_t.max_preserve_newlines),_t.preserve_newlines&&mt>1)for(f(),t=1;mt>t;t+=1)f(!0);vt[J](),"TK_INLINE_COMMENT"!==J&&"TK_COMMENT"!==J&&"TK_BLOCK_COMMENT"!==J&&"TK_UNKNOWN"!==J&&(Y=et.last_text,K=J,et.last_text=$),et.had_comment="TK_INLINE_COMMENT"===J||"TK_COMMENT"===J||"TK_BLOCK_COMMENT"===J}r=X[0].text.join("");for(var i=1;i<X.length;i++)r+="\n"+X[i].text.join("");return r=r.replace(/[\r\n ]+$/,"")}}var n={};!function(e){var t="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",n="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",r=new RegExp("["+t+"]"),i=new RegExp("["+t+n+"]");e.isIdentifierStart=function(e){return 65>e?36===e:91>e?!0:97>e?95===e:123>e?!0:e>=170&&r.test(String.fromCharCode(e))},e.isIdentifierChar=function(e){return 48>e?36===e:58>e?!0:65>e?!1:91>e?!0:97>e?95===e:123>e?!0:e>=170&&i.test(String.fromCharCode(e))}}(n),"function"==typeof define&&define.amd?define("sap/watt/lib/beautifiers/js/beautify",[],function(){return{js_beautify:e}}):"undefined"!=typeof exports?exports.js_beautify=e:"undefined"!=typeof window?window.js_beautify=e:"undefined"!=typeof global&&(global.js_beautify=e)}(),define("sap.watt.toolsets.javascript/configurations/beautifyConfig",[],function(){return[{id:"keep_array_indentation",text:"dlg_keep_array_indentation",type:"boolean",value:!1},{id:"break_chained_methods",text:"dlg_break_chained_methods",type:"boolean",value:!1},{id:"space_before_conditional",text:"dlg_space_before_conditional",type:"boolean",value:!0},{id:"unescape_strings",text:"dlg_unescape_strings",type:"boolean",value:!1},{id:"tab_size",type:"array",text:"dlg_tab_size",value:"1",items:[{value:"1",text:"a Tab"},{value:"2",text:"2 Spaces"},{value:"3",text:"3 Spaces"},{value:"4",text:"4 Spaces"},{value:"8",text:"8 Spaces"}]},{id:"max_preserve_newlines",type:"array",text:"dlg_max_preserve_newlines",value:"2",items:[{value:"-1",text:"No New Lines"},{value:"1",text:"1 New Line"},{value:"2",text:"2 New Lines"},{value:"5",text:"5 New Lines"},{value:"10",text:"10 New Lines"},{value:"0",text:"Unlimited New Lines"}]},{id:"wrap_line_length",type:"array",text:"dlg_wrap_line_length",value:"140",items:[{value:"0",text:"Do not wrap lines"},{value:"40",text:"near 40 characters"},{value:"70",text:"near 70 characters"},{value:"80",text:"near 80 characters"},{value:"110",text:"near 110 characters"},{value:"120",text:"near 120 characters"},{value:"140",text:"near 140 characters"}]},{id:"brace_style",type:"array",text:"dlg_brace_style",value:"collapse",items:[{value:"collapse",text:"Braces with control statement"},{value:"expand",text:"Braces on own line"},{value:"end-expand",text:"End braces on own line"}]}]}),define("sap.watt.toolsets.javascript/service/JSBeautifierImpl",["sap/watt/lib/beautifiers/js/beautify","sap.watt.toolsets.javascript/configurations/beautifyConfig"],function(e,t){"use strict";var n=function(){};return n.prototype._oOptions={indent_size:1,indent_char:"	",indent_level:0,indent_with_tabs:!0,preserve_newlines:!0,max_preserve_newlines:2,jslint_happy:!1,brace_style:"collapse",keep_array_indentation:!1,keep_function_indentation:!0,space_before_conditional:!0,break_chained_methods:!1,eval_code:!1,unescape_strings:!1,wrap_line_length:140},n.prototype.configure=function(){this.context.service.resource.includeStyles([{uri:"sap.watt.toolsets.javascript/css/beautifierSettings.css"}]).done(),this._oSettings=t,this._oOriginalSettings=this._cloneSetting(this._oSettings)},n.prototype.beautify=function(t){return this.upacker&&(t=this.unpacker_filter(t)),this.getOptions().then(function(n){var r=e.js_beautify(t,n);return r})},n.prototype.beautifyJS=function(){return this.beautify.apply(this,arguments)},n.prototype.getOptions=function(){var e=this.context.service.setting.project,t=this;return t.hasError=!1,e.get(this.context.service.beautifier).then(function(e){return e?t._updateOptionBySetting(e):t._oOptions}).fail(function(){return t.hasError=!0,t._oOptions})},n.prototype.getSettings=function(){var e=this.context.service.setting.project,t=this;return t.hasError=!1,e.get(this.context.service.beautifier).then(function(e){if(e){for(var n in e)if(e.hasOwnProperty(n))for(var r=0;r<t._oSettings.length;r++)t._oSettings[r].id==n&&(t._oSettings[r].value=e[n]);return t._oSettings}return t._oSettings=t._cloneSetting(t._oOriginalSettings),t._oSettings}).fail(function(){return t.hasError=!0,t._oSettings=t._cloneSetting(t._oOriginalSettings),t._oSettings})},n.prototype.setSettings=function(e){this._oSettings=e;for(var t={},n=0;n<e.length;n++)t[e[n].id]=e[n].value;return this.hasError?void 0:this.context.service.setting.project.set(this.context.service.beautifier,t)},n.prototype._updateOptionBySetting=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&("detect-packers"==n?this.unpacker=1==e[n]?!0:!1:"tab_size"==n?(t.indent_size=e[n],t.indent_char=1==e[n]?"	":" "):"max_preserve_newlines"==n?(t.preserve_newlines="-1"!==e[n],t[n]=parseInt(e[n])):t[n]=e[n]);return t},n.prototype.unpacker_filter=function(e){return e},n.prototype._cloneSetting=function(e){for(var t=[],n=0;n<e.length;n++){var r={};for(var i in e[n])e[n].hasOwnProperty(i)&&(r[i]=e[n][i]);t.push(r)}return t},n._instance=void 0,n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},n.getInstance()}),define("sap/watt/common/plugin/platform/service/ui/AbstractConfig",[],function(){"use strict";var e=sap.ui.base.Object.extend("sap.watt.common.plugin.platform.service.ui.AbstractConfig",{getProjectSettingContent:function(){return Q()},saveProjectSetting:function(){return Q()},getUserPreferenceContent:function(){return Q()},saveUserPreference:function(){return Q()}});return e}),define("sap.watt.toolsets.javascript/service/Config",["sap/watt/common/plugin/platform/service/ui/AbstractConfig"],function(e){"use strict";return e.extend("sap.watt.common.plugin.javascript.service.Config",{_oView:null,_oController:null,_mSettings:null,_oSettings:null,_options:[],getProjectSettingContent:function(){var e=this;return this.context.service.beautifier.getSettings().then(function(t){return e._oSettings=t,e._oView||(e._oView=e._createControl()),e._oView})},saveProjectSetting:function(){if(!this._oView)return Q();for(var e=0;e<this._options.length;e++)"boolean"==this._options[e].type?this._setSettings(this._options[e].id,this._options[e].control.getChecked()):"array"==this._options[e].type&&this._setSettings(this._options[e].id,this._options[e].control.getSelectedKey());return this.context.service.beautifier.setSettings(this._oSettings)},_createControl:function(){var e=this._oSettings,t=new sap.ui.layout.form.Form("F1",{title:new sap.ui.core.Title({text:this.context.i18n.getText("i18n","dlg_beautify_subtitle_1")}),layout:new sap.ui.layout.form.GridLayout("L1")});t.addStyleClass("beautifierSetting_form");for(var n,r,i,o,a=new sap.ui.layout.form.FormContainer("F1C1"),s=new sap.ui.layout.form.FormContainer("F1C2"),u=0,c=0,l=0;l<e.length;l++)if("boolean"==e[l].type)r=new sap.ui.commons.CheckBox({text:this.context.i18n.getText("i18n",e[l].text),checked:e[l].value,layoutData:new sap.ui.layout.form.GridElementData({hCells:"8"})}),this._options.push({id:e[l].id,control:r,type:"boolean"}),0==u%2&&(n=new sap.ui.layout.form.FormElement,a.addFormElement(n)),n.addField(r),u++;else if("array"==e[l].type){i=new sap.ui.commons.Label({text:this.context.i18n.getText("i18n",e[l].text),layoutData:new sap.ui.layout.form.GridElementData({hCells:"2"})}),r=new sap.ui.commons.DropdownBox({layoutData:new sap.ui.layout.form.GridElementData({hCells:"5"})}),this._options.push({id:e[l].id,control:r,type:"array"});for(var p,f=0;f<e[l].items.length;f++){var d=new sap.ui.core.ListItem({text:e[l].items[f].text,key:e[l].items[f].value});r.addItem(d),e[l].items[f].value==e[l].value&&(p=e[l].items[f].text)}r.setValue(p),o=new sap.ui.commons.Label({layoutData:new sap.ui.layout.form.GridElementData({hCells:"1"})}),0==c%2&&(n=new sap.ui.layout.form.FormElement,s.addFormElement(n)),n.addField(i),n.addField(r),n.addField(o),c++}n=new sap.ui.layout.form.FormElement,o=new sap.ui.layout.VerticalLayout({height:"10px",layoutData:new sap.ui.layout.form.GridElementData({hCells:"16"})}),o.addStyleClass("beautifierSetting_middleForm"),n.addField(o),a.addFormElement(n),t.addFormContainer(a),t.addFormContainer(s);var h=this;return t.addEventDelegate({onAfterRendering:function(){h.context.service.beautifier.getSettings().then(function(e){h.oSettings=e,h._restoreSettings()}).done()}}),t},_restoreSettings:function(){for(var e=0;e<this._options.length;e++)"boolean"==this._options[e].type?this._options[e].control.setChecked(this._getSettings(this._options[e].id)):"array"==this._options[e].type&&this._options[e].control.setSelectedKey(this._getSettings(this._options[e].id))},_setSettings:function(e,t){for(var n=0;n<this._oSettings.length;n++)if(this._oSettings[n].id==e)return this._oSettings[n].value=t,void 0},_getSettings:function(e){for(var t=0;t<this._oSettings.length;t++)if(this._oSettings[t].id==e)return this._oSettings[t].value}})}),define("sap/watt/lib/isJsonValid/isMyJsonValid",[],function(){var e=function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t){function n(e,t){return f.isUndefined(t)?""+t:f.isNumber(t)&&!isFinite(t)?t.toString():f.isFunction(t)||f.isRegExp(t)?t.toString():t}function r(e,t){return f.isString(e)?e.length<t?e:e.slice(0,t):e}function i(e){return r(JSON.stringify(e.actual,n),128)+" "+e.operator+" "+r(JSON.stringify(e.expected,n),128)}function o(e,t,n,r,i){throw new m.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function a(e,t){e||o(e,!0,t,"==",m.ok)}function s(e,t){if(e===t)return!0;if(f.isBuffer(e)&&f.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return f.isDate(e)&&f.isDate(t)?e.getTime()===t.getTime():f.isRegExp(e)&&f.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:f.isObject(e)||f.isObject(t)?c(e,t):e==t}function u(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function c(e,t){if(f.isNullOrUndefined(e)||f.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(f.isPrimitive(e)||f.isPrimitive(t))return e===t;var n=u(e),r=u(t);if(n&&!r||!n&&r)return!1;if(n)return e=d.call(e),t=d.call(t),s(e,t);var i,o,a=g(e),c=g(t);if(a.length!=c.length)return!1;for(a.sort(),c.sort(),o=a.length-1;o>=0;o--)if(a[o]!=c[o])return!1;for(o=a.length-1;o>=0;o--)if(i=a[o],!s(e[i],t[i]))return!1;return!0}function l(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}function p(e,t,n,r){var i;f.isString(n)&&(r=n,n=null);try{t()}catch(a){i=a}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&o(i,n,"Missing expected exception"+r),!e&&l(i,n)&&o(i,n,"Got unwanted exception"+r),e&&i&&n&&!l(i,n)||!e&&i)throw i}var f=e("util/"),d=Array.prototype.slice,h=Object.prototype.hasOwnProperty,m=t.exports=a;m.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=i(this),this.generatedMessage=!0);var t=e.stackStartFunction||o;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,a=t.name,s=r.indexOf("\n"+a);if(s>=0){var u=r.indexOf("\n",s+1);r=r.substring(u+1)}this.stack=r}}},f.inherits(m.AssertionError,Error),m.fail=o,m.ok=a,m.equal=function(e,t,n){e!=t&&o(e,t,n,"==",m.equal)},m.notEqual=function(e,t,n){e==t&&o(e,t,n,"!=",m.notEqual)},m.deepEqual=function(e,t,n){s(e,t)||o(e,t,n,"deepEqual",m.deepEqual)},m.notDeepEqual=function(e,t,n){s(e,t)&&o(e,t,n,"notDeepEqual",m.notDeepEqual)},m.strictEqual=function(e,t,n){e!==t&&o(e,t,n,"===",m.strictEqual)},m.notStrictEqual=function(e,t,n){e===t&&o(e,t,n,"!==",m.notStrictEqual)},m.throws=function(){p.apply(this,[!0].concat(d.call(arguments)))},m.doesNotThrow=function(){p.apply(this,[!1].concat(d.call(arguments)))},m.ifError=function(e){if(e)throw e};var g=Object.keys||function(e){var t=[];for(var n in e)h.call(e,n)&&t.push(n);return t}},{"util/":7}],2:[function(e,t){(function(n){function r(){}function i(){f.log.apply(f,arguments)}function o(){f.log.apply(f,arguments)}function a(){f.warn.apply(f,arguments)}function s(e){v[e]=m()}function u(e){var t=v[e];if(!t)throw new Error("No such label: "+e);var n=m()-t;f.log(e+": "+n+"ms")}function c(){var e=new Error;e.name="Trace",e.message=d.format.apply(null,arguments),f.error(e.stack)}function l(e){f.log(d.inspect(e)+"\n")}function p(e){if(!e){var t=g.call(arguments,1);h.ok(!1,d.format.apply(null,t))}}var f,d=e("util"),h=e("assert"),m=e("date-now"),g=Array.prototype.slice,v={};f="undefined"!=typeof n&&n.console?n.console:"undefined"!=typeof window&&window.console?window.console:{};for(var y=[[r,"log"],[i,"info"],[o,"warn"],[a,"error"],[s,"time"],[u,"timeEnd"],[c,"trace"],[l,"dir"],[p,"assert"]],_=0;_<y.length;_++){var x=y[_],b=x[0],w=x[1];f[w]||(f[w]=b)}t.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{assert:1,"date-now":3,util:7}],3:[function(e,t){function n(){return(new Date).getTime()}t.exports=n},{}],4:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],5:[function(e,t){function n(){c=!1,a.length?u=a.concat(u):l=-1,u.length&&r()}function r(){if(!c){var e=setTimeout(n);c=!0;for(var t=u.length;t;){for(a=u,u=[];++l<t;)a[l].run();l=-1,t=u.length}a=null,c=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function o(){}var a,s=t.exports={},u=[],c=!1,l=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new i(e,t)),c||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=o,s.addListener=o,s.once=o,s.off=o,s.removeListener=o,s.removeAllListeners=o,s.emit=o,s.binding=function(){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],6:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],7:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(t)?r.showHidden=t:t&&n._extend(r,t),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function a(e){return e}function s(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function u(e,t,r){if(e.customInspect&&t&&T(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return _(i)||(i=u(e,i,r)),i}var o=c(e,t);if(o)return o;var a=Object.keys(t),m=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),C(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(t);if(0===a.length){if(T(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(C(t))return l(t)}var v="",y=!1,x=["{","}"];if(h(t)&&(y=!0,x=["[","]"]),T(t)){var b=t.name?": "+t.name:"";v=" [Function"+b+"]"}if(w(t)&&(v=" "+RegExp.prototype.toString.call(t)),E(t)&&(v=" "+Date.prototype.toUTCString.call(t)),C(t)&&(v=" "+l(t)),0===a.length&&(!y||0==t.length))return x[0]+v+x[1];if(0>r)return w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var S;return S=y?p(e,t,r,m,a):a.map(function(n){return f(e,t,r,m,n,y)}),e.seen.pop(),d(S,v,x)}function c(e,t){if(b(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,i){for(var o=[],a=0,s=t.length;s>a;++a)N(t,String(a))?o.push(f(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(e,t,n,r,i,!0))}),o}function f(e,t,n,r,i,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),N(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=g(n)?u(e,c.value,null):u(e,c.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),b(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function d(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function _(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function b(e){return void 0===e}function w(e){return S(e)&&"[object RegExp]"===I(e)}function S(e){return"object"==typeof e&&null!==e}function E(e){return S(e)&&"[object Date]"===I(e)}function C(e){return S(e)&&("[object Error]"===I(e)||e instanceof Error)}function T(e){return"function"==typeof e}function P(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function I(e){return Object.prototype.toString.call(e)}function D(e){return 10>e?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[D(e.getHours()),D(e.getMinutes()),D(e.getSeconds())].join(":");return[e.getDate(),j[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var k=/%[sdj%]/g;n.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(e).replace(k,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),s=r[n];o>n;s=r[++n])a+=g(s)||!S(s)?" "+s:" "+i(s);return a},n.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(b(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return o};var O,R={};n.debuglog=function(e){if(b(O)&&(O=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!R[e])if(new RegExp("\\b"+e+"\\b","i").test(O)){var r=t.pid;R[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else R[e]=function(){};return R[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=m,n.isNull=g,n.isNullOrUndefined=v,n.isNumber=y,n.isString=_,n.isSymbol=x,n.isUndefined=b,n.isRegExp=w,n.isObject=S,n.isDate=E,n.isError=C,n.isFunction=T,n.isPrimitive=P,n.isBuffer=e("./support/isBuffer");var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",A(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":6,_process:5,inherits:4}],8:[function(e,t,n){n["date-time"]=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}[tT ]\d{2}:\d{2}:\d{2}(\.\d+)?([zZ]|[+-]\d{2}:\d{2})$/,n.date=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}$/,n.time=/^\d{2}:\d{2}:\d{2}$/,n.email=/^\S+@\S+$/,n["ip-address"]=n.ipv4=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,n.ipv6=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,n.uri=/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,n.color=/(#?([0-9A-Fa-f]{3,6})\b)|(aqua)|(black)|(blue)|(fuchsia)|(gray)|(green)|(lime)|(maroon)|(navy)|(olive)|(orange)|(purple)|(red)|(silver)|(teal)|(white)|(yellow)|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\))/,n.hostname=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]))*$/,n.alpha=/^[a-zA-Z]+$/,n.alphanumeric=/^[a-zA-Z0-9]+$/,n.style=/\s*(.+?):\s*([^;]+);?/g,n.phone=/^\+(?:[0-9] ?){6,14}[0-9]$/,n["utc-millisec"]=/^[0-9]+(\.?[0-9]+)?$/},{}],9:[function(e,t){var n=e("generate-object-property"),r=e("generate-function"),i=e("jsonpointer"),o=e("xtend"),a=e("./formats"),s=function(e,t,n){if(/^https?:\/\//.test(n))return null;var r=function(e){return e&&e.id===n?e:"object"==typeof e&&e?Object.keys(e).reduce(function(t,n){return t||r(e[n])},null):null},o=r(e);if(o)return o;n=n.replace(/^#/,""),n=n.replace(/\/$/,"");try{return i.get(e,decodeURI(n))}catch(a){var s=t[n]||t[n.replace(/^#/,"")];return s||null}},u=function(e){e=JSON.stringify(e);for(var t=/\[([^\[\]"]+)\]/;t.test(e);)e=e.replace(t,'."+$1+"');return e},c={};c.any=function(){return"true"},c.null=function(e){return e+" === null"},c.boolean=function(e){return"typeof "+e+' === "boolean"'},c.array=function(e){return"Array.isArray("+e+")"},c.object=function(e){return"typeof "+e+' === "object" && '+e+" && !Array.isArray("+e+")"},c.number=function(e){return"typeof "+e+' === "number"'},c.integer=function(e){return"typeof "+e+' === "number" && (Math.floor('+e+") === "+e+" || "+e+" > 9007199254740992 || "+e+" < -9007199254740992)"},c.string=function(e){return"typeof "+e+' === "string"'};var l=function(e){for(var t=[],n=0;n<e.length;n++)t.push("object"==typeof e[n]?JSON.stringify(e[n]):e[n]);for(var n=1;n<t.length;n++)if(t.indexOf(t[n])!==n)return!1;return!0},p=function(e,t,i,f,d){var h=d?o(a,d.formats):a,m={unique:l,formats:h},g=d?!!d.verbose:!1,v=d&&void 0!==d.greedy?d.greedy:!1,y={},_=function(e){return e+(y[e]=(y[e]||0)+1)},x={},b=function(e){if(x[e])return x[e];var t=_("pattern");return m[t]=new RegExp(e),x[e]=t,t},w=["i","j","k","l","m","n","o","p","q","r","s","t","u","v","x","y","z"],S=function(){var e=w.shift();return w.push(e+e[0]),e},E=function(e,r,o,l){var f=r.properties,y=r.type,x=!1;Array.isArray(r.items)&&(f={},r.items.forEach(function(e,t){f[t]=e}),y="array",x=!0);var w=0,T=function(t,n,r){C("errors++"),o===!0&&(C("if (validate.errors === null) validate.errors = []"),g?C("validate.errors.push({field:%s,message:%s,value:%s})",u(n||e),JSON.stringify(t),r||e):C("validate.errors.push({field:%s,message:%s})",u(n||e),JSON.stringify(t)))};r.required===!0?(w++,C("if (%s === undefined) {",e),T("is required"),C("} else {")):(w++,C("if (%s !== undefined) {",e));var P=[].concat(y).map(function(t){return c[t||"any"](e)}).join(" || ")||"true";if("true"!==P&&(w++,C("if (!(%s)) {",P),T("is the wrong type"),C("} else {")),x)if(r.additionalItems===!1)C("if (%s.length > %d) {",e,r.items.length),T("has additional items"),C("}");else if(r.additionalItems){var I=S();C("for (var %s = %d; %s < %s.length; %s++) {",I,r.items.length,I,e,I),E(e+"["+I+"]",r.additionalItems,o,l),C("}")}if(r.format&&h[r.format]){"string"!==y&&a[r.format]&&C("if (%s) {",c.string(e));var D=_("format");m[D]=h[r.format],"function"==typeof m[D]?C("if (!%s(%s)) {",D,e):C("if (!%s.test(%s)) {",D,e),T("must be "+r.format+" format"),C("}"),"string"!==y&&a[r.format]&&C("}")}if(Array.isArray(r.required)){var A=function(t){var r=n(e,t);C("if (%s === undefined) {",r),T("is required",r),C("missing++"),C("}")};C("if ((%s)) {","object"!==y?c.object(e):"true"),C("var missing = 0"),r.required.map(A),C("}"),v||(C("if (missing === 0) {"),w++)}if(r.uniqueItems&&("array"!==y&&C("if (%s) {",c.array(e)),C("if (!(unique(%s))) {",e),T("must be unique"),C("}"),"array"!==y&&C("}")),r.enum){var N=r.enum.some(function(e){return"object"==typeof e}),k=N?function(t){return"JSON.stringify("+e+")"+" !== JSON.stringify("+JSON.stringify(t)+")"}:function(t){return e+" !== "+JSON.stringify(t)};C("if (%s) {",r.enum.map(k).join(" && ")||"false"),T("must be an enum value"),C("}")}if(r.dependencies&&("object"!==y&&C("if (%s) {",c.object(e)),Object.keys(r.dependencies).forEach(function(t){var i=r.dependencies[t];"string"==typeof i&&(i=[i]);var a=function(t){return n(e,t)+" !== undefined"};Array.isArray(i)&&(C("if (%s !== undefined && !(%s)) {",n(e,t),i.map(a).join(" && ")||"true"),T("dependencies not set"),C("}")),"object"==typeof i&&(C("if (%s !== undefined) {",n(e,t)),E(e,i,o,l),C("}"))}),"object"!==y&&C("}")),r.additionalProperties||r.additionalProperties===!1){"object"!==y&&C("if (%s) {",c.object(e));var I=S(),O=_("keys"),R=function(e){return O+"["+I+"] !== "+JSON.stringify(e)},j=function(e){return"!"+b(e)+".test("+O+"["+I+"])"},F=Object.keys(f||{}).map(R).concat(Object.keys(r.patternProperties||{}).map(j)).join(" && ")||"true";C("var %s = Object.keys(%s)",O,e)("for (var %s = 0; %s < %s.length; %s++) {",I,I,O,I)("if (%s) {",F),r.additionalProperties===!1?(l&&C("delete %s",e+"["+O+"["+I+"]]"),T("has additional properties",null,JSON.stringify(e+".")+" + "+O+"["+I+"]")):E(e+"["+O+"["+I+"]]",r.additionalProperties,o,l),C("}")("}"),"object"!==y&&C("}")}if(r.$ref){var L=s(i,d&&d.schemas||{},r.$ref);if(L){var M=t[r.$ref];M||(t[r.$ref]=function(e){return M(e)},M=p(L,t,i,!1,d));var D=_("ref");m[D]=M,C("if (!(%s(%s))) {",D,e),T("referenced schema does not match"),C("}")}}if(r.not){var B=_("prev");C("var %s = errors",B),E(e,r.not,!1,l),C("if (%s === errors) {",B),T("negative schema matches"),C("} else {")("errors = %s",B)("}")}if(r.items&&!x){"array"!==y&&C("if (%s) {",c.array(e));var I=S();C("for (var %s = 0; %s < %s.length; %s++) {",I,I,e,I),E(e+"["+I+"]",r.items,o,l),C("}"),"array"!==y&&C("}")}if(r.patternProperties){"object"!==y&&C("if (%s) {",c.object(e));var O=_("keys"),I=S();C("var %s = Object.keys(%s)",O,e)("for (var %s = 0; %s < %s.length; %s++) {",I,I,O,I),Object.keys(r.patternProperties).forEach(function(t){var n=b(t);C("if (%s.test(%s)) {",n,O+"["+I+"]"),E(e+"["+O+"["+I+"]]",r.patternProperties[t],o,l),C("}")}),C("}"),"object"!==y&&C("}")}if(r.pattern){var U=b(r.pattern);"string"!==y&&C("if (%s) {",c.string(e)),C("if (!(%s.test(%s))) {",U,e),T("pattern mismatch"),C("}"),"string"!==y&&C("}")}if(r.allOf&&r.allOf.forEach(function(t){E(e,t,o,l)}),r.anyOf&&r.anyOf.length){var B=_("prev");r.anyOf.forEach(function(t,n){0===n?C("var %s = errors",B):C("if (errors !== %s) {",B)("errors = %s",B),E(e,t,!1,!1)}),r.anyOf.forEach(function(e,t){t&&C("}")}),C("if (%s !== errors) {",B),T("no schemas match"),C("}")}if(r.oneOf&&r.oneOf.length){var B=_("prev"),V=_("passes");C("var %s = errors",B)("var %s = 0",V),r.oneOf.forEach(function(t){E(e,t,!1,!1),C("if (%s === errors) {",B)("%s++",V)("} else {")("errors = %s",B)("}")}),C("if (%s !== 1) {",V),T("no (or more than one) schemas match"),C("}")}if(void 0!==r.multipleOf){"number"!==y&&"integer"!==y&&C("if (%s) {",c.number(e));var Q=(0|r.multipleOf)!==r.multipleOf?Math.pow(10,r.multipleOf.toString().split(".").pop().length):1;Q>1?C("if ((%d*%s) % %d) {",Q,e,Q*r.multipleOf):C("if (%s % %d) {",e,r.multipleOf),T("has a remainder"),C("}"),"number"!==y&&"integer"!==y&&C("}")}for(void 0!==r.maxProperties&&("object"!==y&&C("if (%s) {",c.object(e)),C("if (Object.keys(%s).length > %d) {",e,r.maxProperties),T("has more properties than allowed"),C("}"),"object"!==y&&C("}")),void 0!==r.minProperties&&("object"!==y&&C("if (%s) {",c.object(e)),C("if (Object.keys(%s).length < %d) {",e,r.minProperties),T("has less properties than allowed"),C("}"),"object"!==y&&C("}")),void 0!==r.maxItems&&("array"!==y&&C("if (%s) {",c.array(e)),C("if (%s.length > %d) {",e,r.maxItems),T("has more items than allowed"),C("}"),"array"!==y&&C("}")),void 0!==r.minItems&&("array"!==y&&C("if (%s) {",c.array(e)),C("if (%s.length < %d) {",e,r.minItems),T("has less items than allowed"),C("}"),"array"!==y&&C("}")),void 0!==r.maxLength&&("string"!==y&&C("if (%s) {",c.string(e)),C("if (%s.length > %d) {",e,r.maxLength),T("has longer length than allowed"),C("}"),"string"!==y&&C("}")),void 0!==r.minLength&&("string"!==y&&C("if (%s) {",c.string(e)),C("if (%s.length < %d) {",e,r.minLength),T("has less length than allowed"),C("}"),"string"!==y&&C("}")),void 0!==r.minimum&&(C("if (%s %s %d) {",e,r.exclusiveMinimum?"<=":"<",r.minimum),T("is less than minimum"),C("}")),void 0!==r.maximum&&(C("if (%s %s %d) {",e,r.exclusiveMaximum?">=":">",r.maximum),T("is more than maximum"),C("}")),f&&Object.keys(f).forEach(function(t){E(n(e,t),f[t],o,l)
});w--;)C("}")},C=r("function validate(data) {")("validate.errors = null")("var errors = 0");return E("data",e,f,d&&d.filter),C("return errors === 0")("}"),C=C.toFunction(m),C.errors=null,C.__defineGetter__("error",function(){return C.errors?C.errors.map(function(e){return e.field+" "+e.message}).join("\n"):""}),C.toJSON=function(){return e},C};t.exports=function(e,t){return"string"==typeof e&&(e=JSON.parse(e)),p(e,{},e,!0,t)},t.exports.filter=function(e,n){var r=t.exports(e,o(n,{filter:!0}));return function(e){return r(e),e}}},{"./formats":8,"generate-function":10,"generate-object-property":11,jsonpointer:13,xtend:14}],10:[function(e,t){var n=e("util"),r=/[\{\[]/,i=/[\}\]]/;t.exports=function(){var e=[],t=0,o=function(n){for(var r="";r.length<2*t;)r+="  ";e.push(r+n)},a=function(e){return e?i.test(e.trim()[0])&&r.test(e[e.length-1])?(t--,o(n.format.apply(n,arguments)),t++,a):r.test(e[e.length-1])?(o(n.format.apply(n,arguments)),t++,a):i.test(e.trim()[0])?(t--,o(n.format.apply(n,arguments)),a):(o(n.format.apply(n,arguments)),a):a};return a.toString=function(){return e.join("\n")},a.toFunction=function(e){var t="return ("+a.toString()+")",n=Object.keys(e||{}).map(function(e){return e}),r=n.map(function(t){return e[t]});return Function.apply(null,n.concat(t)).apply(null,r)},arguments.length&&a.apply(null,arguments),a}},{util:7}],11:[function(e,t){var n=e("is-property"),r=function(e,t){return n(t)?e+"."+t:e+"["+JSON.stringify(t)+"]"};r.valid=n,t.exports=r},{"is-property":12}],12:[function(e,t){"use strict";function n(e){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(e)}t.exports=n},{}],13:[function(e,t,n){e("console");var r=function(e){return e.replace(/~./g,function(e){switch(e){case"~0":return"~";case"~1":return"/"}throw"Invalid tilde escape: "+e})},i=function(e,t,n){var o=r(t.shift());if("undefined"==typeof e[o])throw"Value for pointer '"+t+"' not found.";if(0!==t.length)return i(e[o],t,n);if("undefined"==typeof n)return e[o];var a=e[o];return null===n?delete e[o]:e[o]=n,a},o=function(e,t){if("object"!=typeof e)throw"Invalid input object.";if(""===t)return[];if(!t)throw"Invalid JSON pointer.";t=t.split("/");var n=t.shift();if(""!==n)throw"Invalid JSON pointer.";return t},a=function(e,t){return t=o(e,t),0===t.length?e:i(e,t)},s=function(e,t,n){if(t=o(e,t),0===t.length)throw"Invalid JSON pointer for set.";return i(e,t,n)};n.get=a,n.set=s},{console:2}],14:[function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}t.exports=n},{}],15:[function(e){validatorToReturn=e("./")},{"./":9}]},{},[15]);return e(),validatorToReturn}),define("sap.watt.toolsets.json/adopters/isMyJsonValidAdopter",["sap/watt/lib/isJsonValid/isMyJsonValid"],function(e){var t="data[",n="]",r="data.";return{_getSrcText:function(e){var i=e,o=e.indexOf(r);if(0===o)i=i.substr(r.length);else{var a=i.indexOf(t),s=i.indexOf(n);0===a&&-1!==s&&(i=i.substr(t.length),s-=t.length,i=i.substr(0,s)+i.substr(s+n.length))}var u={fullPath:i,lastField:this._getSourceForInlineLinting(i)};return u},_isUnnecessaryMessage:function(e){return"no (or more than one) schemas match"===e},_convertPath:function(e,t,n){for(;!e[t]&&""!==t;){var r=t.lastIndexOf("."),i=t.lastIndexOf("]");if(i>r){var o=t.lastIndexOf("[");t=t.substring(0,o-1)}else t=t.substring(0,r)}return n.fullPath!==t&&(n.fullPath=t,n.lastField=this._getSourceForInlineLinting(t)),n},_convert:function(e,t,n){for(var r,i,o,a={root:{},issues:[]},s=0;s<e.length;s++){var u=e[s],c=this._getSrcText(u.field);if(!this._isUnnecessaryMessage(u.message,c)){var l=c.fullPath+"- "+u.message,p="Schema Error",f=c.fullPath;c=this._convertPath(t,f,c),t[c.fullPath]?(r=t[c.fullPath].line,o=this._getSourceForInlineLinting(c.lastField),i=this._getColumnForIssue(o,t[c.fullPath]),void 0===i&&(i=0)):(r=1,i=0),a.issues.push({category:p,checker:"",helpUrl:"",line:r,column:i,message:l,path:n,severity:"error",source:o,ruleId:""})}}return a},_getColumnForIssue:function(e,t){return-1===e.indexOf('"')?t.column:t.column-1},_getSourceForInlineLinting:function(e){var t,n=e;return _.endsWith(e,'"')?(n=_.trimRight(n,'"'),t=n.lastIndexOf('"'),e.substring(t)):(t=e.lastIndexOf("."),-1!==t?e.substring(t+1):e)},_validateJsonWithSchema:function(t,n){var r=e(n,{greedy:!0,verbose:!0});return r(t),r},getIssues:function(e,t,n,r){var i=this;return t.getSchema(e).then(function(t){var o=i._validateJsonWithSchema(e,t);return i._convert(o.errors||[],n,r)})}}}),define("sap.watt.toolsets.json/utils/json_parse",[],function(){var e,t,n,r,i,o,a={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},s={},u="10fe580b-5954-4839-a884-1a69263e7a5c",c={chars:void 0,size:void 0},l=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);c.chars=t?t[1]:"\n",c.size=c.chars.length},p=function(r){throw{name:"SyntaxError",message:r,at:e,line:t,column:n,text:i}},f=function(o){o&&o!==r&&p("Expected '"+o+"' instead of '"+r+"'"),r=i.charAt(e);var a=i.substring(e),s=a.search(c.chars);return 0===s?(t+=1,n=0,e+=2===c.size?2:1):(n+=1,e+=1),r},d=function(){var e,t="";for("-"===r&&(t="-",f("-"));r>="0"&&"9">=r;)t+=r,f();if("."===r)for(t+=".";f()&&r>="0"&&"9">=r;)t+=r;if("e"===r||"E"===r)for(t+=r,f(),("-"===r||"+"===r)&&(t+=r,f());r>="0"&&"9">=r;)t+=r,f();return e=+t,isNaN(e)?(p("Bad number"),void 0):e},h=function(){var e,t,n,i="";if('"'===r)for(;f();){if('"'===r)return f(),i;if("\\"===r)if(f(),"u"===r){for(n=0,t=0;4>t&&(e=parseInt(f(),16),isFinite(e));t+=1)n=16*n+e;i+=String.fromCharCode(n)}else{if("string"!=typeof a[r])break;i+=a[r]}else i+=r}p("Bad string")},m=function(){for(;r&&" ">=r;)f()},g=function(){switch(r){case"t":return f("t"),f("r"),f("u"),f("e"),!0;case"f":return f("f"),f("a"),f("l"),f("s"),f("e"),!1;case"n":return f("n"),f("u"),f("l"),f("l"),null}p("Unexpected '"+r+"'")},v=function(e,t,n){return{at:e,line:t,column:n}},y=function(e,t){var n=t;return"string"==typeof n&&t.indexOf(".")>-1&&(n='"'+n+'"'),e!==u?e+"."+n:n},_=function(i){var a=[];if("["===r){if(f("["),m(),"]"===r)return f("]"),a;for(;r;){if(a.push(o(y(i,a.length),v(e,t,n))),m(),"]"===r)return f("]"),a;f(","),m()}}p("Bad array")},x=function(i){var a,s={};if("{"===r){if(f("{"),m(),"}"===r)return f("}"),s;for(;r;){var u=v(e,t,n);if(a=h(),m(),f(":"),Object.hasOwnProperty.call(s,a)&&p('Duplicate key "'+a+'"'),s[a]=o(y(i,a),u),m(),"}"===r)return f("}"),s;f(","),m()}}p("Bad object")};return o=function(e,t){switch(e!==u&&(s[e]={at:t.at,line:t.line,column:t.column}),m(),r){case"{":return x(e);case"[":return _(e);case'"':return h();case"-":return d();default:return r>="0"&&"9">=r?d():g()}},function(a,c,f){var d;return i=a,l(i),e=0,t=1,n=0,r=" ",s={},m(),d=o(u,v(e,t,n)),m(),r&&p("Syntax error"),c&&c(a,d,s),"function"==typeof f?function h(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.hasOwnProperty.call(i,n)&&(r=h(i,n),void 0!==r?i[n]=r:delete i[n]);return f.call(e,t,i)}({"":d},""):d}}),define("sap.watt.toolsets.json/service/jsonValidator",["sap/watt/lib/lodash/lodash","sap.watt.toolsets.json/adopters/isMyJsonValidAdopter","sap.watt.toolsets.json/utils/json_parse"],function(e,t,n){"use strict";var r;return{_projectTypesConf:{},configure:function(e){r=e,e.jsonValidatorSchema&&0!==e.jsonValidatorSchema.length&&e.jsonValidatorSchema.forEach(function(e){if(e){if(!e.projectType)return this._writeToLog("project type was not supplied"),void 0;if(!e.fileNames||0===e.fileNames.length)return this._writeToLog("file names were not supplied for "+e.projectType+" project Type"),void 0;if(!e.schema)return this._writeToLog("schema was not supplied for "+e.projectType+" project Type"),void 0;this._projectTypesConf[e.projectType]=this._projectTypesConf[e.projectType]||{};for(var t=0;t<e.fileNames.length;t++)this._projectTypesConf[e.projectType][e.fileNames[t]]=e.schema}},this)},_writeToLog:function(e){this.context.service.log.error(this.context.service.jsonValidator.getProxyMetadata().getName(),e,["user"]).done()},init:function(){},getMetadata:function(){var t={jsonValidatorSchema:[]};return e.forEach(r.jsonValidatorSchema,function(n){var r=e.cloneDeep(n.projectType),i=e.cloneDeep(n.fileNames),o=n.schema;t.jsonValidatorSchema.push({projectType:r,fileNames:i,schema:o._mConfig.module})}),t},getCustomRulesContent:function(){return{}},getIssues:function(){},getIssuesSynchronously:function(e,r,i){var o,a=this,s=function(e,n,r){o=a.context.service.document.getDocumentByPath(i).then(function(e){return e?a._isServiceRequire(e).then(function(e){return e?t.getIssues(n,e,r,i):u}):void 0})},u={root:{},issues:[]};try{return n(e,s),o}catch(c){return u={root:{severity:"error"},issues:[{category:"Syntax Error",checker:"",helpUrl:"",line:c.line,column:c.column,message:c.message,path:i,severity:"error",source:"",ruleId:""}]}}},getConfiguration:function(){return{}},getPathToImplementationModule:function(){return"sap/watt/toolsets/plugin/json/service/jsonValidator"},getDefaultConfiguration:function(){return{}},_isServiceRequire:function(e){var t=this;return t._projectTypesConf==={}||jQuery.isEmptyObject(e)||null===e?null:this.context.service.projectType.getProjectTypes(e).then(function(n){if(n){var r=e.getEntity().getName();return t._findServiceForFileNameInProject(r,n)}})},_findServiceForFileNameInProject:function(e,t){for(var n,r=0;r<t.length;r++)if(n=t[r].id){var i=this._projectTypesConf[n];if(i&&i.hasOwnProperty(e))return this._projectTypesConf[n][e]}return null}}}),define("sap/watt/toolsets/plugin/json/utils/fioriSchemaUtil",[],function(){return{getSubSchemasByVersion:function(e,t,n){this._handleOneOf(e,t),this.handleDefinitionsProperty(e),this._handleAllOf(e),this.handleRefsInProperties(e),this._adjustToEnviornment(e,n)},handleRefsInProperties:function(e){var t=e.definitions,n=this;_.each(e.properties,function(e){_.isObject(e)&&n._replaceRefDefintionWithSchema(e,t)})},_handleOneOf:function(e,t){if(_.isObject(e)&&e.hasOwnProperty("oneOf")){var n=e.oneOf,r=this._getSubSchema(n,t);r&&(delete e.oneOf,_.merge(e,r))}},_handleAllOf:function(e){var t=e.definitions,n=this;_.each(e.properties,function(e){if(_.isObject(e)&&e.hasOwnProperty("allOf")){for(var r=e.allOf,i=0;i<r.length;i++){var o=r[i];n._replaceRefDefintionWithSchema(o,t),_.merge(e,o)}delete e.allOf}})},_getDefintionAttributeName:function(e){var t=e.split("/");return t[t.length-1]},_hasRecursiveRefrences:function(e,t){var n=this,r=!1;return _.each(e,function(e,i){return _.isObject(e)?r=n._hasRecursiveRefrences(e,t):"$ref"===i&&(r=e===t),r?!1:void 0}),r},_replaceRefDefintionWithSchema:function(e,t){var n=this;_.each(e,function(r,i){if(_.isObject(r))n._replaceRefDefintionWithSchema(r,t);else if("$ref"===i){var o=e.$ref,a=n._getDefintionAttributeName(o);if(void 0!==a){var s=t[a];n._hasRecursiveRefrences(s,o)||(_.merge(e,s),delete e.$ref)}}})},handleDefinitionsProperty:function(e){var t=e.definitions,n=this;_.isObject(t)&&_.each(t,function(e){n._replaceRefDefintionWithSchema(e,t)})},_getDefinitionByName:function(e,t){return e[t]},_adjustToEnviornment:function(e,t){if("sap.app"===t&&sap.watt.getEnv("internal")===!0&&e&&e.required){var n=["ach","resources"];_.each(n,function(t){e.required.push(t)})}if("sap.ui.generic.app"===t){var r=5,i=this._getDefinitionByName(e.definitions,"page"),o=e.properties.pages.items;if(i&&o){for(var a=0;r>a;a++)_.merge(o,i),delete o.$ref,o=o.properties.pages.items;delete o.$ref}}},_getEnumVersion:function(e){return e&&e.properties&&void 0!==e.properties._version&&_.isArray(e.properties._version.enum)?e.properties._version.enum[0]:void 0},_getSubSchema:function(e,t){if(1===e.length)return e[0];if(e.length>1){for(var n=this,r=e.length,i=0;r>i;i++){var o=e[i];if(n._getEnumVersion(o)===t)return e[i]}return e[r-1]}}}}),define("sap/watt/toolsets/plugin/json/utils/getSchema",[],function(){return{_getRemoteResource:function(e){return e=require.toUrl(e),Q($.ajax({dataType:"json",url:e}))}}}),define("sap.watt.toolsets.json/fiori/fioriSchemaProvider",["sap/watt/toolsets/plugin/json/utils/fioriSchemaUtil","sap/watt/toolsets/plugin/json/utils/getSchema"],function(e,t){var n=null;return{baseSchemaUrl:"sap.watt.toolsets.json/fiori/schema/",getSchema:function(e){return this.getFlatSchema(e)},_getRootSchema:function(){if(n)return Q(n);var e=this.baseSchemaUrl+"schema.json",r=this;return t._getRemoteResource(e).then(function(e){var t=[];return e=_.cloneDeep(e),r._getRefs(e,t),Q.all(t).then(function(){return n=e,e})})},_getPropertyVersionFromUserInput:function(e,t){return e&&e[t]?e[t]._version:void 0},getFlatSchema:function(t){var n=this;return this._getRootSchema().then(function(r){var i=_.cloneDeep(r),o=i.properties;return _.each(o,function(r,i){var o=n._getPropertyVersionFromUserInput(t,i);e.getSubSchemasByVersion(r,o,i)}),i})},_getRefs:function(e,n){var r=this;_.each(e,function(e,i,o){_.isObject(e)?r._getRefs(e,n):"$ref"===i&&n.push(t._getRemoteResource(r.baseSchemaUrl+e).then($.proxy(function(e,t){delete e.$ref,_.merge(e,t)},this,o)))})}}}),define("sap.watt.toolsets.json/neoApp/neoAppValidator",["sap/watt/toolsets/plugin/json/utils/getSchema"],function(e){var t=null;return{baseSchemaUrl:"sap.watt.toolsets.json/neoApp/schema/",getSchema:function(){if(t)return Q(t);var n=this.baseSchemaUrl+"neoAppSchema.json";return e._getRemoteResource(n).then(function(e){return t=e,e})}}}),define("sap.watt.toolsets.tmplintellisence/service/TmplCodeCompletionImpl",{sProjectName:"projectName",sComponentPath:"componentPath",sConnectionData:"connectionData",sConnectionDataUrl:"connectionData.url",sConnectionDataMDContent:"connectionData.metadataContent",sConnectionDataRuntimeUrl:"connectionData.runtimeUrl",sConnectionDataDest:"connectionData.destination",sConnectionDataDestPath:"connectionData.destination.path",sConnectionDataDestUrl:"connectionData.destination.url",sValue:"value",sDatasource:"datasource",sResources:"resources",sModelJson:"model.json",sHelpUrl:"",sHelpTarget:"sap.ui",init:function(){this._oFileService=this.context.service.filesystem.documentProvider,this._oJSCodeCompletionService=this.context.service.jscodecompletion,this._oXMLCodeCompletionService=this.context.service.xmlcodecompletion,this._oLogger=this.context.service.log;var e=this;this.context.service.help.getHelpUrl().then(function(t){e.sHelpUrl=t}).done()},getWordSuggestions:function(e){if(e){var t=[],n=this;n.oContentStatus=e;var r=n.oContentStatus.buffer,i=n.oContentStatus.offset,o="",a=r.substring(0,i).lastIndexOf("{{");if(-1!==a&&-1===r.substring(a,i).lastIndexOf("\n")&&-1===r.substring(a,i).lastIndexOf(" ")){var s=e.targetFile.substring(0,e.targetFile.lastIndexOf(n.sResources))+n.sModelJson;return void 0!==n.oModelJsonAsHash&&n.sPreviousModelPath===s?(n.sPreviousModelPath=s,n._extractProposalsFromModel(o,r,a,i,t)):(n.sPreviousModelPath=s,n._oFileService.getDocument(s).then(function(e){return null===e?n._handleNoModel(o,r,a,i,t):e.getContent().then(function(e){var s=JSON.parse(e);return n.oModelJsonAsHash=n._convertModelJsonObjectToHash(s),n._extractProposalsFromModel(o,r,a,i,t)})}))}if("js"===n._templateBaseType(n.oContentStatus.targetFile))return n._oJSCodeCompletionService.getWordSuggestions(n.oContentStatus);if("xml"===n._templateBaseType(n.oContentStatus.targetFile))return n._oXMLCodeCompletionService.getWordSuggestions(n.oContentStatus);var u={proposals:t};return u}},getCalculatedPrefix:function(e){var t="";e.token&&e.token.value&&(t=e.token.value.substr(0,e.cursorPosition.column-e.token.start));var n=/[^a-zA-Z_0-9\$\u00A2-\uFFFF]+/;return t.split(n).slice(-1)[0]},_onAfterDocumentChanged:function(e){var t=e.params.document.getEntity()._sParentPath+"/"+e.params.document.getEntity()._sName;this.sPreviousModelPath===t&&(this.sPreviousModelPath="",this.oModelJsonAsHash=void 0)},_handleNoModel:function(e,t,n,r,i){return this._oLogger.error("Template Code Completion","model.json file was not found",["user"]).done(),this.oModelJsonAsHash=void 0,this._extractProposalsFromModel(e,t,n,r,i)},_extractProposalsFromModel:function(e,t,n,r,i){e=t.substring(n+2,r),this._addSuggestionsFromSteps(i,e);for(var o in this.oModelJsonAsHash)if(0===o.indexOf(e)&&(-1!==o.indexOf("parameters.")||0===o.indexOf(this.sDatasource))){var a=o;if(-1!==o.indexOf("parameters")){var s=o.indexOf(".parameters."),u=o.indexOf(".",s+12);a=o.substring(0,u),a+=".value"}var c=this.oModelJsonAsHash[a.substring(0,a.length-6)+".wizard.title"],l=this.oModelJsonAsHash[a.substring(0,a.length-6)+".wizard.tooltip"],p=this.context.i18n.getText("i18n","tmplAutoComplete_model_parameter");void 0!==c&&(p+='The parameter title is "'+c+'".'),void 0!==l&&(p+='The parameter tooltip is "'+l+'".');var f=this._getSingleWordProposal(a,e);this._addSuggestion(i,f,!0,f,p,this.sHelpTarget,"1")}i.sort(function(e,t){var n=e.proposal.toLowerCase(),r=t.proposal.toLowerCase();return r>n?-1:n>r?1:0});var d={proposals:i};return d},_templateBaseType:function(e){var t=e.lastIndexOf("."),n=e.substring(0,t),r=n.substring(n.lastIndexOf(".")+1);return r},_addSuggestionsFromSteps:function(e,t){var n=[];this._addSuggestion(n,this.sComponentPath,!0,this.sComponentPath,this.context.i18n.getText("i18n","tmplAutoComplete_component_path_help_description"),this.sHelpTarget,"1"),this._addSuggestion(n,this.sConnectionData,!0,this.sConnectionData,this.context.i18n.getText("i18n","tmplAutoComplete_connection_data_help_description"),this.sHelpTarget,"1"),this._addSuggestion(n,this.sConnectionDataDest,!0,this.sConnectionDataDest,this.context.i18n.getText("i18n","tmplAutoComplete_connection_data_help_description"),this.sHelpTarget,"1"),this._addSuggestion(n,this.sConnectionDataDestPath,!0,this.sConnectionDataDestPath,this.context.i18n.getText("i18n","tmplAutoComplete_connection_data_help_description"),this.sHelpTarget,"1"),this._addSuggestion(n,this.sConnectionDataDestUrl,!0,this.sConnectionDataDestUrl,this.context.i18n.getText("i18n","tmplAutoComplete_connection_data_help_description"),this.sHelpTarget,"1"),this._addSuggestion(n,this.sConnectionDataMDContent,!0,this.sConnectionDataMDContent,this.context.i18n.getText("i18n","tmplAutoComplete_connection_data_help_description"),this.sHelpTarget,"1"),this._addSuggestion(n,this.sConnectionDataRuntimeUrl,!0,this.sConnectionDataRuntimeUrl,this.context.i18n.getText("i18n","tmplAutoComplete_connection_data_help_description"),this.sHelpTarget,"1"),this._addSuggestion(n,this.sConnectionDataUrl,!0,this.sConnectionDataUrl,this.context.i18n.getText("i18n","tmplAutoComplete_connection_data_help_description"),this.sHelpTarget,"1"),this._addSuggestion(n,this.sProjectName,!0,this.sProjectName,this.context.i18n.getText("i18n","tmplAutoComplete_project_name_help_description"),this.sHelpTarget,"1");for(var r=0;r<n.length;r++){var i=n[r];if(0===i.proposal.indexOf(t)){var o=this._getSingleWordProposal(i.proposal,t);this._addSuggestion(e,o,!0,o,i.helpDescription,i.helpTarget,"1")}}},_getSingleWordProposal:function(e,t){var n=e.substring(t.length),r=e.substring(0,e.length-n.length),i=r.substring(r.lastIndexOf(".")+1),o=n.substring(0,n.indexOf("."));return""===o&&(o=n),i+o},_addSuggestion:function(e,t,n,r,i,o,a){this._checkIfProposalExists(e,t,r)||e.push({description:t,overwrite:n,proposal:r,helpDescription:i,helpTarget:o,helpUrl:this.sHelpUrl,category:a})},_checkIfProposalExists:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r].description===t&&e[r].proposal===n)return!0;return!1},_convertModelJsonObjectToHash:function(e){function t(e,r){if(Object(e)!==e)n[r]=e;else if(Array.isArray(e)){for(var i=0,o=e.length;o>i;i++)t(e[i],r+"["+i+"]");0===o&&(n[r]=[])}else{var a=!0;for(var s in e)a=!1,t(e[s],r?r+"."+s:s);a&&r&&(n[r]={})}}var n={};return t(e,""),n}}),define("sap.watt.toolsets.i18n/codecompletion/I18nTemplateContentAssist",["sap/watt/lib/orion/editor/templates"],function(e){function t(e,t){for(var n="";t>=0&&(n=e[t],"\n"!==n&&"\r"!==n)&&/\s/.test(n);)t--;return n}function n(){}return n.prototype=new e.TemplateContentAssist,n.prototype.isValid=function(e,n,r){var i=t(n,r-e.length-1);return!i||"\n"===i||"\r"===i},{I18nTemplateContentAssistProvider:n}}),define("sap.watt.toolsets.i18n/codecompletion/templates",[],function(){"use strict";return{templates:[{prefix:"breadcrumbstep",description:"Breadcrumb step",template:"#XBCB"},{prefix:"bulletlistitem",description:"Bullet list item text",template:"#XBLI"},{prefix:"button",description:"Button text",template:"#XBUT"},{prefix:"checkbox",description:"Checkbox",template:"#XCKL"},{prefix:"columnheader",description:"Column header",template:"#XCOL"},{prefix:"label",description:"Label",template:"#XFLD"},{prefix:"heading",description:"Heading",template:"#XHED"},{prefix:"hyperlink",description:"Hyperlink text",template:"#XLNK"},{prefix:"logentry",description:"Log entry",template:"#XLOG"},{prefix:"listbox",description:"List box item",template:"#XLST"},{prefix:"menuitem",description:"Menu item",template:"#XMIT"},{prefix:"messagetext",description:"Message text",template:"#XMSG"},{prefix:"radio",description:"Radiobutton",template:"#XRBL"},{prefix:"selectiontext",description:"Selection text",template:"#XSEL"},{prefix:"tab",description:"Tab strip text",template:"#XTBS"},{prefix:"tableTitle",description:"Table Title",template:"#XTIT"},{prefix:"treenode",description:"Tree node text",template:"#XTND"},{prefix:"quickInfo",description:"Quick info text",template:"#XTOL"},{prefix:"generaltext",description:"General text",template:"#XTXT"},{prefix:"messagetextlong",description:"Message text (long)",template:"#YMSG"},{prefix:"generaltextlong",description:"General text long",template:"#YTXT"}]}
}),define("sap.watt.toolsets.i18n/service/I18nCodeCompletion",["../codecompletion/I18nTemplateContentAssist","../codecompletion/templates"],function(e,t){"use strict";return{_oTemplateContentAssistProvider:null,init:function(){this._oTemplateContentAssistProvider=new e.I18nTemplateContentAssistProvider,this._loadTemplates()},getWordSuggestions:function(e){var t=[];if(!e.isAutoHint&&this._isFileNameSupported(e))var t=this._oTemplateContentAssistProvider.computeTemplateProposals(e.buffer,e.offset,e);return{proposals:t}},_isFileNameSupported:function(e){var t=e.targetFile,n=t.substring(t.lastIndexOf("/")+1).toLowerCase();return"i18n.properties"===n||"messagebundle.properties"===n},_loadTemplates:function(){for(var e=this.context.i18n.getText("i18n","i18n_enterComment"),n=this.context.i18n.getText("i18n","i18n_enterKey"),r=this.context.i18n.getText("i18n","i18n_enterValue"),i=": ${"+e+"}\n${"+n+"} = ${"+r+"}\n\n",o=t.templates,a=0;a<o.length;a++)o[a].template+=i;this._oTemplateContentAssistProvider.addTemplates(o)}}}),define("sap.watt.platform.appmetadata/service/appmetadata",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{getNeoMetadata:function(t){return t.getProject().then(function(t){return t.getFolderContent().then(function(t){var n=e.find(t,function(e){return"neo-app.json".toUpperCase()===e.getEntity().getName().toUpperCase()});return n?n.getContent().then(function(e){return JSON.parse(e.replace(/(\r\n|\n|\r)/gm,""))}):null})})}}}),define("sap/watt/common/error/AssertError",[],function(){"use strict";var e=function(e){var t=Error.apply(this,arguments);this.stack=t.stack,this.name="AssertError",this.message=e||""};return e.prototype=new Error,e.prototype.constructor=e,e}),define("sap.watt.platform.clipboard/service/Clipboard",["sap/watt/common/error/AssertError"],function(e){"use strict";return{_oClipboardEntry:{entities:null,source:null},addEntity:function(e,t){if(void 0===e)throw new Error("Error in Clipboard Service usage. Entity may neither be null nor undefined.");this._oClipboardEntry.entities=e,this._oClipboardEntry.source=t||void 0},removeEntity:function(){this._oClipboardEntry={entities:null,source:null}},onDocumentDeleted:function(e){var t=e.params.document.getEntity(),n=this._oClipboardEntry.entities;if(n)for(var r=0;r<n.length;r++)if(n[r].document.getEntity()==t)return this.removeEntity(),void 0},getEntity:function(){return this._oClipboardEntry.entities},getSource:function(){return this._oClipboardEntry.source},getClipboardEntry:function(){return this._oClipboardEntry},assertEntityNotEmpty:function(){if(!this.getEntity())throw new e("Entity is empty");return this.getEntity()},assertSourceNotEmpty:function(){if(!this.getSource())throw new e("Source is empty");return this.getSource()}}}),define("sap.watt.platform.clipboard/service/FileDialog",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{_oCreateFileCommand:null,_oInputFileName:null,_fileOrFolder:null,_aMetadataContent:[],_conflictArray:[],_resolvedArray:[],_oDialog:null,_oDefaultButton:null,_bFolder:!1,getFocusElement:function(){return this._oInputFileName},_createDialog:function(){var e=new sap.ui.commons.layout.VerticalLayout({width:"100%"}),t=this;this._fileOrFolder=new sap.ui.commons.TextView,e.addContent(this._fileOrFolder);var n=new sap.ui.commons.Label;e.addContent(n);var r=new sap.ui.commons.Label;e.addContent(r);var i=new sap.ui.commons.Label;return e.addContent(i),this._oInputFileName=new sap.ui.commons.TextField("FileDialog_InputName",{tooltip:"{i18n>fileDialog_insertName}",liveChange:function(e){t._checkValue(e)}}),e.addContent(this._oInputFileName),this._oDefaultButton=new sap.ui.commons.Button("FileDialog_ActionButton",{text:"{i18n>fileDialog_OK}",style:sap.ui.commons.ButtonStyle.Emph,enabled:!1,press:[this.copyObject,this]}),this._oDialog?this._oDialog.removeAllContent():this._oDialog=new sap.ui.commons.Dialog("FileDialogUI",{initialFocus:this._oInputFileName,buttons:[this._oDefaultButton,new sap.ui.commons.Button({text:"{i18n>fileDialog_cancel}",press:[this.cancel,this]})],title:"{i18n>fileDialog_cancel_naming_conflict}",defaultButton:this._oDefaultButton,resizable:!1,keepInWindow:!0,modal:!0}),this._oDialog.addContent(e),this._oDialog},_checkValue:function(e){var t=e.getParameter("liveValue"),n=""===t||this._alreadyExists(this._bFolder,t.trim())?!1:!0;this._oDefaultButton.setEnabled(n)},_alreadyExists:function(e,t){for(var n=0;n<this._aMetadataContent.length;n++){var r=this._aMetadataContent[n];if(r.folder===e&&r.name===t)return!0}return!1},openCreateUI:function(e,t){return this._oDeferred=Q.defer(),this._aMetadataContent=t,this._conflictArray=e,this._resolvedArray=[],this._oDialog=sap.ui.getCore().byId("FileDialogUI"),void 0===this._oDialog&&(this._oDialog=this._createDialog(),this.context.i18n.applyTo(this._oDialog)),this.changeDialogInfo(e[0]),this._oDialog.open(),this._oDeferred.promise},changeDialogInfo:function(e){this._bFolder=e.doc.getEntity().isFolder(),this._oDefaultButton.setEnabled(!this._alreadyExists(this._bFolder,e.filenameProposal)),this._oInputFileName.setValue(e.filenameProposal);var t=this._resolvedArray.length+this._conflictArray.length,n=this._resolvedArray.length+1,r=this.context.i18n.getText("i18n","fileDialog_already_contains",[e.type,n,t]);this._fileOrFolder.setText(r)},copyObject:function(){var t=this._conflictArray,n=this._oInputFileName.getValue(),r=t[0];r.filenameProposal=n,this._resolvedArray.push(r),this._conflictArray=t=e.rest(t),e.isEmpty(t)?(this._oDeferred.resolve(this._resolvedArray),sap.ui.getCore().byId("FileDialogUI").close()):this.changeDialogInfo(t[0])},cancel:function(){sap.ui.getCore().byId("FileDialogUI").close()}}}),define("sap.watt.platform.clipboard/service/FileDialogRename",[],function(){"use strict";return{_oCreateFileCommand:null,_oInputFileName:null,_aMetadataContent:[],_oDialog:null,_oDefaultButton:null,_bFolder:!1,getFocusElement:function(){return this._oInputFileName},_createDialog:function(){var e=new sap.ui.commons.layout.VerticalLayout({width:"100%"});e.addContent(new sap.ui.commons.TextView({text:"{i18n>fileDialog_name}"}));var t=this;return this._oInputFileName=new sap.ui.commons.TextField("FileDialog_InputNameRename",{tooltip:"{i18n>fileDialog_insertName}",liveChange:function(e){t._checkValue(e)}}),e.addContent(this._oInputFileName),this._oDefaultButton=new sap.ui.commons.Button("FileDialog_ActionButtonRename",{text:"{i18n>fileDialog_copy}",style:sap.ui.commons.ButtonStyle.Emph,enabled:!1,press:[this.copyObject,this]}),this._oDialog?this._oDialog.removeAllContent():this._oDialog=new sap.ui.commons.Dialog("FileDialogUIRename",{initialFocus:this._oInputFileName,buttons:[this._oDefaultButton,new sap.ui.commons.Button({text:"{i18n>fileDialog_cancel}",press:[this.cancel,this]})],defaultButton:this._oDefaultButton,resizable:!1,keepInWindow:!0,modal:!0}),this._oDialog.addContent(e),this._oDialog},_checkValue:function(e){var t=e.getParameter("liveValue"),n=""===t||this._alreadyExists(this._bFolder,t.trim())?!1:!0;this._oDefaultButton.setEnabled(n)},_alreadyExists:function(e,t){for(var n=0;n<this._aMetadataContent.length;n++){var r=this._aMetadataContent[n];if(r.folder===e&&r.name===t)return!0}return!1},openCreateUI:function(e,t,n,r,i){return this._oDeferred=Q.defer(),this._aMetadataContent=i,this._bFolder=e,this._oDialog=sap.ui.getCore().byId("FileDialogUIRename"),void 0===this._oDialog&&(this._oDialog=this._createDialog(),this.context.i18n.applyTo(this._oDialog)),this._oDialog.setTitle(t),this._oDefaultButton.setText(n),this._oDefaultButton.setEnabled(!this._alreadyExists(this._bFolder,r)),this._oInputFileName.setValue(r),this._oDialog.open(),this._oDeferred.promise},copyObject:function(){var e=this._oInputFileName.getValue();this._oDeferred.resolve(e),sap.ui.getCore().byId("FileDialogUIRename").close()},cancel:function(){sap.ui.getCore().byId("FileDialogUIRename").close()}}}),jQuery.sap.declare("sap.watt.platform.plugin.qrcode.lib.QRCode"),jQuery.sap.require("sap.ui.core.Control"),sap.ui.core.Control.extend("sap.watt.platform.plugin.qrcode.lib.QRCode",{metadata:{library:"sap.watt.platform.plugin.qrcode.lib",properties:{value:{type:"string",group:"Misc",defaultValue:""},isUrl:{type:"boolean",group:"Misc",defaultValue:!1}}}}),sap.watt.platform.plugin.qrcode.lib.QRCode.prototype.init=function(){},sap.watt.platform.plugin.qrcode.lib.QRCode.prototype.onAfterRendering=function(){this.$().find("#qr-code").qrcode(this.getValue())},sap.watt.platform.plugin.qrcode.lib.QRCode.prototype.setValue=function(e){var t;this.getIsUrl()?(e=this._fixURIIfRelative(e),t=e.replace(/\/\//g,"/").replace(/:\//g,"://")):t=e,this.setProperty("value",t,!1)},sap.watt.platform.plugin.qrcode.lib.QRCode.prototype.setIsUrl=function(e){this.setProperty("isUrl",e,!1),e&&this.setValue(this.getValue())},sap.watt.platform.plugin.qrcode.lib.QRCode.prototype._fixURIIfRelative=function(e){if(e.match(/^https?:\/\//g))return e;var t;if(e.match(/^\//g))return t=window.location.origin,t+e;var n=window.location.origin,r=window.location.pathname;return r=r.substring(0,r.lastIndexOf("/")),t=n+r,t+"/"+e},define("sap.watt.platform.qrcode/lib/QRCode",function(){}),QR8bitByte.prototype={getLength:function(){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},QRCode.prototype={addData:function(e){var t=new QR8bitByte(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(0>e||this.moduleCount<=e||0>t||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var e=1;for(e=1;40>e;e++){for(var t=QRRSBlock.getRSBlocks(e,this.errorCorrectLevel),n=new QRBitBuffer,r=0,i=0;i<t.length;i++)r+=t[i].dataCount;for(var i=0;i<this.dataList.length;i++){var o=this.dataList[i];n.put(o.mode,4),n.put(o.getLength(),QRUtil.getLengthInBits(o.mode,e)),o.write(n)}if(n.getLengthInBits()<=8*r)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=QRCode.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var n=-1;7>=n;n++)if(!(-1>=e+n||this.moduleCount<=e+n))for(var r=-1;7>=r;r++)-1>=t+r||this.moduleCount<=t+r||(this.modules[e+n][t+r]=n>=0&&6>=n&&(0==r||6==r)||r>=0&&6>=r&&(0==n||6==n)||n>=2&&4>=n&&r>=2&&4>=r?!0:!1)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;8>n;n++){this.makeImpl(!0,n);var r=QRUtil.getLostPoint(this);(0==n||e>r)&&(e=r,t=n)}return t},createMovieClip:function(e,t,n){var r=e.createEmptyMovieClip(t,n),i=1;this.make();for(var o=0;o<this.modules.length;o++)for(var a=o*i,s=0;s<this.modules[o].length;s++){var u=s*i,c=this.modules[o][s];c&&(r.beginFill(0,100),r.moveTo(u,a),r.lineTo(u+i,a),r.lineTo(u+i,a+i),r.lineTo(u,a+i),r.endFill())}return r},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=0==e%2);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=0==t%2)},setupPositionAdjustPattern:function(){for(var e=QRUtil.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var r=e[t],i=e[n];if(null==this.modules[r][i])for(var o=-2;2>=o;o++)for(var a=-2;2>=a;a++)this.modules[r+o][i+a]=-2==o||2==o||-2==a||2==a||0==o&&0==a?!0:!1}},setupTypeNumber:function(e){for(var t=QRUtil.getBCHTypeNumber(this.typeNumber),n=0;18>n;n++){var r=!e&&1==(1&t>>n);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var n=0;18>n;n++){var r=!e&&1==(1&t>>n);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,r=QRUtil.getBCHTypeInfo(n),i=0;15>i;i++){var o=!e&&1==(1&r>>i);6>i?this.modules[i][8]=o:8>i?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o}for(var i=0;15>i;i++){var o=!e&&1==(1&r>>i);8>i?this.modules[8][this.moduleCount-i-1]=o:9>i?this.modules[8][15-i-1+1]=o:this.modules[8][15-i-1]=o}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,r=this.moduleCount-1,i=7,o=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;2>s;s++)if(null==this.modules[r][a-s]){var u=!1;o<e.length&&(u=1==(1&e[o]>>>i));var c=QRUtil.getMask(t,r,a-s);c&&(u=!u),this.modules[r][a-s]=u,i--,-1==i&&(o++,i=7)}if(r+=n,0>r||this.moduleCount<=r){r-=n,n=-n;break}}}},QRCode.PAD0=236,QRCode.PAD1=17,QRCode.createData=function(e,t,n){for(var r=QRRSBlock.getRSBlocks(e,t),i=new QRBitBuffer,o=0;o<n.length;o++){var a=n[o];i.put(a.mode,4),i.put(a.getLength(),QRUtil.getLengthInBits(a.mode,e)),a.write(i)}for(var s=0,o=0;o<r.length;o++)s+=r[o].dataCount;if(i.getLengthInBits()>8*s)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*s+")");for(i.getLengthInBits()+4<=8*s&&i.put(0,4);0!=i.getLengthInBits()%8;)i.putBit(!1);for(;;){if(i.getLengthInBits()>=8*s)break;if(i.put(QRCode.PAD0,8),i.getLengthInBits()>=8*s)break;i.put(QRCode.PAD1,8)}return QRCode.createBytes(i,r)},QRCode.createBytes=function(e,t){for(var n=0,r=0,i=0,o=new Array(t.length),a=new Array(t.length),s=0;s<t.length;s++){var u=t[s].dataCount,c=t[s].totalCount-u;r=Math.max(r,u),i=Math.max(i,c),o[s]=new Array(u);for(var l=0;l<o[s].length;l++)o[s][l]=255&e.buffer[l+n];n+=u;var p=QRUtil.getErrorCorrectPolynomial(c),f=new QRPolynomial(o[s],p.getLength()-1),d=f.mod(p);a[s]=new Array(p.getLength()-1);for(var l=0;l<a[s].length;l++){var h=l+d.getLength()-a[s].length;a[s][l]=h>=0?d.get(h):0}}for(var m=0,l=0;l<t.length;l++)m+=t[l].totalCount;for(var g=new Array(m),v=0,l=0;r>l;l++)for(var s=0;s<t.length;s++)l<o[s].length&&(g[v++]=o[s][l]);for(var l=0;i>l;l++)for(var s=0;s<t.length;s++)l<a[s].length&&(g[v++]=a[s][l]);return g};for(var QRMode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G15)>=0;)t^=QRUtil.G15<<QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G15);return(e<<10|t)^QRUtil.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G18)>=0;)t^=QRUtil.G18<<QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return QRUtil.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case QRMaskPattern.PATTERN000:return 0==(t+n)%2;case QRMaskPattern.PATTERN001:return 0==t%2;case QRMaskPattern.PATTERN010:return 0==n%3;case QRMaskPattern.PATTERN011:return 0==(t+n)%3;case QRMaskPattern.PATTERN100:return 0==(Math.floor(t/2)+Math.floor(n/3))%2;case QRMaskPattern.PATTERN101:return 0==t*n%2+t*n%3;case QRMaskPattern.PATTERN110:return 0==(t*n%2+t*n%3)%2;case QRMaskPattern.PATTERN111:return 0==(t*n%3+(t+n)%2)%2;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new QRPolynomial([1],0),n=0;e>n;n++)t=t.multiply(new QRPolynomial([1,QRMath.gexp(n)],0));return t},getLengthInBits:function(e,t){if(t>=1&&10>t)switch(e){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(27>t)switch(e){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(41>t))throw new Error("type:"+t);switch(e){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,r=0;t>r;r++)for(var i=0;t>i;i++){for(var o=0,a=e.isDark(r,i),s=-1;1>=s;s++)if(!(0>r+s||r+s>=t))for(var u=-1;1>=u;u++)0>i+u||i+u>=t||(0!=s||0!=u)&&a==e.isDark(r+s,i+u)&&o++;o>5&&(n+=3+o-5)}for(var r=0;t-1>r;r++)for(var i=0;t-1>i;i++){var c=0;e.isDark(r,i)&&c++,e.isDark(r+1,i)&&c++,e.isDark(r,i+1)&&c++,e.isDark(r+1,i+1)&&c++,(0==c||4==c)&&(n+=3)}for(var r=0;t>r;r++)for(var i=0;t-6>i;i++)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(var i=0;t>i;i++)for(var r=0;t-6>r;r++)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);for(var l=0,i=0;t>i;i++)for(var r=0;t>r;r++)e.isDark(r,i)&&l++;var p=Math.abs(100*l/t/t-50)/5;return n+=10*p}},QRMath={glog:function(e){if(1>e)throw new Error("glog("+e+")");return QRMath.LOG_TABLE[e]},gexp:function(e){for(;0>e;)e+=255;for(;e>=256;)e-=255;return QRMath.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},i=0;8>i;i++)QRMath.EXP_TABLE[i]=1<<i;for(var i=8;256>i;i++)QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];for(var i=0;255>i;i++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;QRPolynomial.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<e.getLength();r++)t[n+r]^=QRMath.gexp(QRMath.glog(this.get(n))+QRMath.glog(e.get(r)));return new QRPolynomial(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=QRMath.glog(this.get(0))-QRMath.glog(e.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(var r=0;r<e.getLength();r++)n[r]^=QRMath.gexp(QRMath.glog(e.get(r))+t);return new QRPolynomial(n,0).mod(e)}},QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],QRRSBlock.getRSBlocks=function(e,t){var n=QRRSBlock.getRsBlockTable(e,t);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=n.length/3,i=[],o=0;r>o;o++)for(var a=n[3*o+0],s=n[3*o+1],u=n[3*o+2],c=0;a>c;c++)i.push(new QRRSBlock(s,u));return i},QRRSBlock.getRsBlockTable=function(e,t){switch(t){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+3];default:return void 0}},QRBitBuffer.prototype={get:function(e){var t=Math.floor(e/8);return 1==(1&this.buffer[t]>>>7-e%8)},put:function(e,t){for(var n=0;t>n;n++)this.putBit(1==(1&e>>>t-n-1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},define("sap.watt.platform.qrcode/lib/QRUtil",function(){}),function(){jQuery.fn.qrcode=function(e){var t=256,n=256,r=0,i=QRErrorCorrectLevel.H,o="#FFFFFF",a="#000000";return this.each(function(){var s=new QRCode(r,i);s.addData(e),s.make();var u=document.createElement("canvas");if(u){u.width=t,u.height=n;var c=u.getContext("2d");if(c){for(var l=t/s.getModuleCount(),p=n/s.getModuleCount(),f=0;f<s.getModuleCount();f++)for(var d=0;d<s.getModuleCount();d++){c.fillStyle=s.isDark(f,d)?a:o;var h=Math.ceil((d+1)*l)-Math.floor(d*l),m=Math.ceil((f+1)*l)-Math.floor(f*l);c.fillRect(Math.round(d*l),Math.round(f*p),h,m)}jQuery(u).appendTo(this)}}})}}(),define("sap.watt.platform.qrcode/lib/jquery-sap-qrcode",function(){}),define("sap.watt.platform.qrcode/service/QrCodeImpl",["../lib/QRCode","../lib/QRUtil","../lib/jquery-sap-qrcode"],{_fixURIIfRelative:function(e){"use strict";var t=window.location.origin;if(t||(t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),e.match(/^https?:\/\//g))return e;var n;if(e.match(/^\//g))return n=t,n+e;var r=window.location.pathname;return r=r.substring(0,r.lastIndexOf("/")),n=t+r,n+"/"+e},getQrCodeControl:function(e,t){"use strict";var n=new sap.watt.platform.plugin.qrcode.lib.QRCode({value:e,isUrl:t}),r={oControl:n};return r},getQrCode:function(e,t,n){"use strict";if(e){var r=e,i="<div>";if(t){r=this._fixURIIfRelative(e);var o=r,a=/^https?:\/\/localhost/;a.test(o)&&(i+="<div id='localhost-warning' style='color:#d14900; padding: 2px; padding-bottom:18px;'>Warning: the URI's hostname is localhost. It will be unreachable on mobile device</div>")}i+="</div>";var s=$(i),u=$('<div style="display:block; margin:auto; width:256px;" />');if(u.qrcode(r),n){var c=u.find("canvas")[0].toDataURL("image/png"),l=$('<img style="display:block; margin:auto; width:256px;" />');l.attr("src",c),s.append(l)}else s.append(u);var p={oDiv:s};return p}}}),define("sap.watt.platform.repositorybrowser/command/LinkWithEditorOn",[],function(){"use strict";return{execute:function(){var e=this;return this.context.service.repositorybrowser.toggleLinkWithEditor().then(function(){return e.context.service.repositorybrowser.setSelectionToCurrentDocument().then(function(){return e.context.service.command.invalidateAll()})})},isAvailable:function(){return this.context.service.repositorybrowser.getStateLinkWithEditor().then(function(e){return!e})},isEnabled:function(){return!0}}}),define("sap.watt.platform.repositorybrowser/command/LinkWithEditorOff",[],function(){"use strict";return{execute:function(){var e=this;return this.context.service.repositorybrowser.toggleLinkWithEditor().then(function(){return e.context.service.command.invalidateAll()})},isAvailable:function(){return this.context.service.repositorybrowser.getStateLinkWithEditor()},isEnabled:function(){return!0}}}),define("sap.watt.platform.repositorybrowser/command/ShowInRepBrowser",[],function(){"use strict";return{execute:function(){var e=this;return this.context.service.perspective.getAreaForService(e.context.service.content).then(function(t){return e.context.service.perspective.isAreaMaximized(t).then(function(n){return n?e.context.service.perspective.setAreaMaximized(t,!1).then(function(){return e.context.service.repositorybrowser.setSelectionToCurrentDocument()}):e.context.service.repositorybrowser.setSelectionToCurrentDocument()})})},isAvailable:function(){var e=this;return this.context.service.repositorybrowser.getStateLinkWithEditor().then(function(t){return t?!1:e.context.service.content.isClickedTabSelected().then(function(e){return e})})},isEnabled:function(){return!0}}}),define("sap.watt.platform.repositorybrowser/command/Delete",["sap/watt/lib/lodash/lodash"],function(e){"use strict";function t(e){var t=this,n=this.context.i18n.getText("i18n","deleteDoc_deleting"),r=this.context.i18n.getText("i18n","deleteDoc_deleteProgress");return this.context.service.progress.startTask(n,r).then(function(n){return t._removeSelectedFilesUnderSelectedFolders(e,t.context).fin(function(){t.context.service.progress.stopTask(n).done()})})}function n(e,t,r){if(e&&0!==e.length){if(t.folder)return r.service.filesystem.documentProvider.getDocument(t.path).then(function(t){return t.getCurrentMetadata().then(function(t){if(t.length>0){for(var i=[],o=0;o<t.length;o++){var a=t[o];i.push(n(e,a,r))}return Q.spread(i,function(){for(var e=0;e<arguments.length;e++)if(arguments[e])return!0;return!1})}return!1})});for(var i=0;i<e.length;i++){var o=t.path===e[i].getEntity().getFullPath();if(o)return Q(!0)}return Q(!1)}return Q(!1)}function r(t,r,i){var o=e.map(r,function(e){var r={},o=e.document.getEntity();return r.path=o.getFullPath(),r.folder=o.isFolder(),n(t,r,i)});return Q.all(o).then(function(t){return e.any(t,function(e){return e})})}return{execute:function(){var e=this,n=this.context.service.selection,i=this.context.service.content,o=this.context.service.usernotification;return Q.spread([n.assertNotEmpty(),i.getDocuments(!0)],function(n,i){var a;if(1===n.length){var s=n[0].document;a=e.context.i18n.getText("i18n","deleteCommand_delete_confirm",[s.getType(),s.getEntity().getName()])}else a=e.context.i18n.getText("i18n","deleteCommand_delete_all_selected_confirm",n.length);return o.confirm(a).then(function(a){return a.bResult?r(i,n,e.context).then(function(r){if(r){var i=e.context.i18n.getText("i18n","deleteSelectionWithDirtyContent_delete_confirm",[]);return o.confirm(i).then(function(r){return r.bResult?t.call(e,n):void 0})}return t.call(e,n)}):void 0})})},isAvailable:function(){return!0},isEnabled:function(){return this.context.service.repositorybrowserUtils.isRootIncludedInSelection().then(function(e){return!e})},_removeSelectedFilesUnderSelectedFolders:function(t){return this.context.service.repositorybrowserUtils.removeSelectedFilesUnderSelectedFolders(t).then(function(t){return e.map(t,function(e){return e.document.delete()})}).then(function(e){return Q.all(e)})}}}),define("sap.watt.platform.repositorybrowser/command/Refresh",[],function(){"use strict";return{execute:function(){return this.context.service.usagemonitoring.report("repositoryBrowser","commandExecuted",this.context.self._sName).done(),this.context.service.repositorybrowser.getSelection().then(function(e){for(var t=0;t<e.length;t++){var n=e[t].document;n.getEntity().isFile()?n.reload():n.getEntity().isFolder()&&n.refresh()}})},isAvailable:function(){return this.context.service.selection.isOwner(this.context.service.repositorybrowser)},isEnabled:function(){return this.context.service.selection.isOwner(this.context.service.repositorybrowser)}}}),define("sap.watt.platform.repositorybrowser/command/Copy",[],function(){"use strict";return{execute:function(){var e=this.context.service.clipboard,t=this.context.service.selection;jQuery(".sapUiTreeNodeCutted").removeClass("sapUiTreeNodeCutted");var n=this;return t.assertNotEmpty().then(function(t){return e.addEntity(t,n)})},isAvailable:function(){return this.context.service.selection.isOwner(this.context.service.repositorybrowser)},isEnabled:function(){return this.context.service.repositorybrowserUtils.isRootIncludedInSelection().then(function(e){return!e})}}}),define("sap.watt.platform.repositorybrowser/command/CopyFullPath",[],function(){"use strict";return{_oDialog:null,execute:function(){var e=this.context.service.selection,t=this;return this.context.service.usagemonitoring.report("repositoryBrowser","commandExecuted",this.context.self._sName).done(),e.assertNotEmptySingleSelection().then(function(e){var n=e.document;t._copyToClipboard(n.getEntity().getFullPath())})},_copyToClipboard:function(e){var t=this;if(this._oDialog)t._oDialog.removeAllContent();else{t._oDialog=new sap.ui.commons.Dialog,t._oDialog.addButton(new sap.ui.commons.Button({text:"OK",press:function(){t._oDialog.close()}}));var n=this.context.i18n.getText("command_copy_full_path");t._oDialog.setTitle(n)}var r=new sap.ui.commons.TextField({value:e,editable:!1});t._oDialog.addContent(r),t._oDialog.setInitialFocus(r),t._oDialog.open()},isAvailable:function(){return this._isInternal()?this.context.service.selection.isOwner(this.context.service.repositorybrowser):Q(!1)},isEnabled:function(){return this.context.service.repositorybrowserUtils.isSingleSelectionWithNoRootOrLevelOneFolderSelection()},_isInternal:function(){var e=!1;return"local_hcproxy"!==sap.watt.getEnv("server_type")&&sap.watt.getEnv("internal")===!0&&(e=!0),e}}}),define("sap.watt.platform.repositorybrowser/command/Cut",[],function(){"use strict";return{execute:function(){var e=this.context.service.clipboard,t=this.context.service.selection,n=this;return t.assertNotEmpty().then(function(t){return e.addEntity(t,n).then(function(){jQuery(".sapUiTreeNodeCutted").removeClass("sapUiTreeNodeCutted"),jQuery(".sapUiTreeNodeSelected").find(".sapUiTreeNodeContent").addClass("sapUiTreeNodeCutted")})})},isAvailable:function(){return this.context.service.selection.isOwner(this.context.service.repositorybrowser)},isEnabled:function(){return this.context.service.repositorybrowserUtils.isRootOrLevelOneFolderIncludedInSelection().then(function(e){return!e})}}}),define("sap.watt.platform.repositorybrowser/command/Paste",["sap/watt/lib/lodash/lodash"],function(e){"use strict";
function t(e){return this.context.service.usernotification.alert(e.message).done()}function n(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(i.folder===t&&i.name===n)return!0}return!1}return{execute:function(){var r=this.context.i18n.getText("i18n","pasteCommand_copyOf");this._sCut=this.context.i18n.getText("i18n","pasteCommand_cut"),this._sPaste=this.context.i18n.getText("i18n","pasteCommand_paste"),this._sCopy=this.context.i18n.getText("i18n","pasteCommand_copy");var i=this.context.service.clipboard,o=this.context.service.filesystem.documentProvider,a=this.context.service.selection,s=this.context.service.repositorybrowser;this._sTitle=this._sCopy,this._sButtonText=this._sCopy;var u=this;return Q.spread([a.assertNotEmpty(),i.getEntity(),i.getSource()],function(i,a,c){if(1!==i.length){var l=u.context.i18n.getText("i18n","pasteCommand_cannot_paste_multi_Selection");return u.context.service.usernotification.alert(l).done(),Q()}if(e.any(a,function(e){return e instanceof String})){var p=u.context.i18n.getText("i18n","pasteCommand_cannot_paste");return u.context.service.usernotification.alert(p).done(),Q()}var f=i[0].document.getEntity(),d=c&&-1!==c.context.self._sName.indexOf(u._sCut),h="folder"===f.getType()?f.getFullPath():f.getParentPath();return u.context.service.repositorybrowserUtils.removeSelectedFilesUnderSelectedFolders(a).then(function(i){return o.getDocument(h).then(function(o){return o.getCurrentMetadata().then(function(a){function c(n){return e.map(n,function(e){function r(){return d?i.move(o,a):i.copy(o,a)}var i=e.doc,a=e.filenameProposal?e.filenameProposal:i.getEntity().getName();return r().then(function(e){return 1===n.length?s.setSelection(e,!0):void 0}).fail(function(e){return t.call(u,e)})})}function l(e){return Q.all(c(e)).then(function(){return e.length>1?s.setSelection(o,!0,!0):void 0})}var p=[],f=e.map(i,function(e){var t=e.document,i=t.getEntity().getName(),o=n(a,t.getEntity().isFolder(),i.trim());if(o){var s=(null!==t?r:"")+i;o=n(a,t.getEntity().isFolder(),s);for(var c=2,l=s;o;)s=l+c,o=n(a,t.getEntity().isFolder(),s),c++;var f=u.context.i18n.getText("i18n","common_folder");return t.getEntity().isFile()&&(f=u.context.i18n.getText("i18n","common_file")),{doc:t,filenameProposal:s,type:f}}p.push({doc:t})});return f=e.compact(f),e.isEmpty(f)?l(p):u.context.service.clipboard.filedialog.openCreateUI(f,a).then(function(t){var n=e.union(p,t);return l(n)})})})})})},isAvailable:function(){return this.context.service.selection.isOwner(this.context.service.repositorybrowser)},isEnabled:function(){var e=this,t=this.context.service.clipboard;return t.assertEntityNotEmpty().then(function(){return e.context.service.repositorybrowserUtils.isSingleNoRootSelection()})}}}),define("sap.watt.platform.repositorybrowser/command/Rename",[],function(){"use strict";return{execute:function(){var e=this.context.service.filesystem.documentProvider,t=this.context.service.selection,n=this.context.i18n.getText("i18n","renameCommand_rename"),r=this.context.i18n.getText("i18n","renameCommand_warning_msg"),i=this.context.i18n.getText("i18n","common_folder"),o=this.context.i18n.getText("i18n","common_file");this._sTitle=n+" ",this._sOperation=n;var a=this;return t.assertNotEmptySingleSelection().then(function(t){var n=t.document,s=n.getEntity(),u=s.getName(),c=s.getParentPath();if(n.isDirty())return a.context.service.usernotification.alert(u+"' "+r).done(),void 0;a._sTitle+="folder"===s.getType()?i:o;var l;return e.getDocument(c).then(function(e){return l=e,e.getCurrentMetadata()}).then(function(e){return a.context.service.clipboard.filedialog.rename.openCreateUI(s.getType(),a._sTitle,a._sOperation,u,e)}).then(function(e){return n.move(l,e)}).then(function(e){return a.context.service.repositorybrowser.setSelection(e,!0)}).fail(function(e){var t=a.context.i18n.getText("i18n","renameCommand_msg_failure")+" "+e.message;console.error(t),a.context.service.usernotification.alert(t)})})},isAvailable:function(){return this.context.service.selection.isOwner(this.context.service.repositorybrowser)},isEnabled:function(){return this.context.service.repositorybrowserUtils.isSingleSelectionWithNoRootOrLevelOneFolderSelection()}}}),define("sap.watt.platform.repositorybrowser/command/CreateFile",[],function(){"use strict";return{execute:function(){var e=this;return e.context.service.selection.assertNotEmptySingleSelection().then(function(t){return t.document.getCurrentMetadata().then(function(n){return e.context.service.repositorybrowser.createfiledialog.openCreateUI(e,t.document,n).then(function(){return e.context.service.focus.attachEvent("$dialogClosed",e._dialogClosed,e)})})})},isAvailable:function(){return!0},isEnabled:function(){return this.context.service.repositorybrowserUtils.isSingleFolderNotRootSelection()},createFile:function(e,t){var n=this;return t.createFile(e).then(function(e){return Q.all([n.context.service.document.open(e),n.context.service.repositorybrowser.setSelection(e,!0)])})},_dialogClosed:function(){var e=this;return Q.delay(100).then(function(){return e.context.service.focus.setFocus(e.context.service.content).then(function(){return e.context.service.focus.detachEvent("$dialogClosed",e._dialogClosed,e)})})}}}),define("sap.watt.platform.repositorybrowser/command/CreateFolder",[],function(){"use strict";return{execute:function(){var e=this;return this.context.service.selection.assertNotEmptySingleSelection().then(function(t){return t.document.getCurrentMetadata().then(function(n){return e.context.service.repositorybrowser.createfolderdialog.openCreateUI(e,t.document,n)})})},isAvailable:function(){return!0},isEnabled:function(){return"xs2"===sap.watt.getEnv("server_type")?this.context.service.repositorybrowserUtils.isSingleFolderNotRootSelection():this.context.service.repositorybrowserUtils.isSingleFolderSelection()},createFolder:function(e,t){var n=this;return t.createFolder(e).then(function(e){return n.context.service.repositorybrowser.setSelection(e,!0)})}}}),define("sap.watt.platform.repositorybrowser/command/Archive",{execute:function(){var e=this;return this.context.service.selection.assertNotEmpty().then(function(t){var n=t[0].document.getEntity(),r=n.getFullPath(),i=n.getName(),o=e.context.service.log,a=e.context.service.usernotification,s=e.context.i18n;return o.info("Archive",s.getText("i18n","archive_started",[i]),["user"]).done(),e.context.service.archiveFolder.createArchive(r).then(function(t){e.context.service.repositorybrowser.setSelection(t,!1).done(),o.info("Archive",s.getText("i18n","archive_completed_successfully_with_name",[i]),["user"]).done(),a.liteInfo(s.getText("i18n","archive_completed_successfully")).done()}).fail(function(e){var t;t="QuotaExceeded"===e.name?s.getText("i18n","quota_exceeded",[i]):s.getText("i18n","archive_failed",[i]),o.error("Archive",t,["user"]).done(),a.alert(t).done()})})},isAvailable:function(){return!0},isEnabled:function(){return"local_hcproxy"===sap.watt.getEnv("server_type")?!1:this._isValidPluginProject()},_isValidPluginProject:function(){var e=this,t=this.context.service.selection;return t.assertOwner(this.context.service.repositorybrowser).then(function(){return t.assertNotEmpty().then(function(t){var n=t[0].document.getEntity();if(1===t.length&&n.isFolder()&&n.getFullPath()&&n.getParentPath()){var r=n.getFullPath();return e.context.service.filesystem.documentProvider.getDocument(r).then(function(e){return e.getCurrentMetadata().then(function(e){return e.length>0})})}return!1})})}}),define("sap.watt.common.perspective/command/AbstractUIPartToggler",[],function(){"use strict";var e=function(){};return e.prototype=jQuery.extend(e.prototype,{_oUIPart:void 0,_sPerspective:void 0,_sID:void 0,execute:function(){var e=this;return this._oUIPart.isVisible().then(function(t){return e.context.service.perspective.report("UiPartToggleState",e._oUIPart._sName+" "+!t).done(),e._oUIPart.setVisible(!t)})},isAvailable:function(){return!0},isEnabled:function(){var e=this;return this.context.service.perspective.getCurrentPerspective().then(function(t){return t===e._sPerspective})},isActive:function(){var e=this;return Q.spread([this._oUIPart.isVisible(),this.context.service.perspective.getCurrentPerspective()],function(t,n){return Q(t&&n===e._sPerspective)})},_onVisibilityChange:function(){var e=this;this.context.service.command.getCommand(this._sID).then(function(t){return e.context.service.command.context.event.fireInvalidated({commands:[t]})}).done()},configure:function(e){this._oUIPart=e.service,this._sPerspective=e.perspective,this._sID=e.id,this._oUIPart.attachEvent("visibilityChanged",this._onVisibilityChange,this)}}),e}),define("sap.watt.platform.repositorybrowser/service/RepositoryBrowserFactory",{create:function(e,t){return e=e||"repositoryBrowser",t=jQuery.extend(t||{},{"implements":"sap.watt.common.service.ui.Browser",module:"sap.watt.platform.repositorybrowser/service/RepositoryBrowser"}),this.context.create(e,t)}}),function(){"use strict";var e;sap.ui.controller("sap.watt.platform.plugin.repositorybrowser.view.RepositoryBrowser",{_oUI5Tree:void 0,_bContextMenuHandlerBound:void 0,_context:void 0,_selectedDocument:void 0,_oContextMenuGroup:void 0,_oDecoration:null,_documentStackForDecoration:null,_doubleClickEnabled:!1,_bPreferenceStoreEnabled:!1,_aFilters:[],_selectedNodes:void 0,setDecoration:function(e,t){var n=this;return e&&t?e.areDecoratorsAvailable().then(function(t){return t?n._oDecoration=e:Q()}):Q()},onInit:function(){sap.ui.commons.TreeNode.ANIMATION_DURATION=0,this._oUI5Tree=this.byId("repositoryTree"),this._oUI5Tree.attachSelectionChange(null,this.onNodeSelected,this),this._mEditors={}},expandNodes:function(){var e=this;return e._bPreferenceStoreEnabled?e._context.service.repositorybrowserPersistence.getNodes().then(function(t){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i];e.setSelection(o,!0,!0,!0)}}):Q()},restoreSelected:function(){var e=this;return e._bPreferenceStoreEnabled?e._context.service.repositorybrowserPersistence.getStoredSelected().then(function(t){t?e.setSelection(t,!0):e._oRootNode&&e._oRootNode.select()}):Q()},onAfterRendering:function(){var t=this;this._bContextMenuHandlerBound||(this.getView().$().on("contextmenu",function(n){n.preventDefault();for(var r=n.target;r&&!r.attributes.id;)r=r.parentElement;if(r&&r.attributes.id){var i=r.attributes.id.value,o=sap.ui.getCore().byId(i);if(o){var a=e.map(t.getSelection(),function(e){return t._oUI5Tree.getNodeByTag(e.document.getKeyString())});e.contains(a,o)||o.select(),t._context.service.focus.setFocus(t._context.self).then(function(){return t._context.service.contextMenu.open(t._oContextMenuGroup,n.pageX,n.pageY)}).done()}}}),this._bContextMenuHandlerBound=!0)},init:function(t){this._oCustomStyle=null,this._bContextMenuHandlerBound=!1,this._context=t,this._selectedDocument=null,this._oRootNode=null;var n=this;return require(["sap/watt/lib/lodash/lodash"],function(t){e=t}),this._createRootNode(this._oUI5Tree).then(function(e){return n._oRootNode=e,n._oRootNode.oDocument.getFolderContent()}).then(function(e){n._onExpandedContentFetched(e,n._oRootNode)}).thenResolve(n._oRootNode)},setDoubleClickEnabled:function(e){this._doubleClickEnabled=e},enablePreferenceStore:function(e){this._bPreferenceStoreEnabled=e},enableMultipleSelection:function(e){e?this._oUI5Tree.setSelectionMode(sap.ui.commons.TreeSelectionMode.Multi):this._oUI5Tree.setSelectionMode(sap.ui.commons.TreeSelectionMode.Legacy)},setFilters:function(e){this._aFilters=e},getSelection:function(){return this._selectedDocument},setSelection:function(e,t,n,r){var i=this;if("workspace"===e.getEntity().getDAO()){n||r||("file"===e.getEntity().getType()?e.getParent():Q(e)).then(function(e){return i._context.service.repositorybrowserPersistence.add(e)}).done();var o=this._oUI5Tree.getNodeByTag(e.getKeyString());o?(o.getDomRef()||o.rerender(),this._selectAndExpandExistingNode(o,t,n,r)):this._selectAndExpandToBeCreatedNode(e,t,n,r).done()}},setContextMenuGroup:function(e){this._oContextMenuGroup=e},addNodeForDocument:function(e,t){var n=this._oUI5Tree.getNodeByTag(t.getKeyString());if(n)if(n.isLoaded){var r=this._createNodeForDocument(e);if(r){var i=n.getNodes();if(0===i.length)return n.insertNode(r,0),void 0;var o=0;for(o in i){var a=i[o];if(this._nodeComparator(e,a.oDocument)<0)return n.insertNode(r,o),n.rerender(),void 0}n.insertNode(r,o+1),n.rerender()}}else n.setHasExpander(!0)},removeNodeForDocument:function(t){var n=this,r=this._oUI5Tree.getNodeByTag(t.getKeyString());if(r){n._bPreferenceStoreEnabled&&this._context.service.repositorybrowserPersistence.remove(t).done();var i=e.map(n.getSelection(),function(e){return e&&e.document?e.document:void 0});e.contains(i,t)&&this._setSelectedDocument();var o=r.getParent();1==o.getNodes().length?""==o.oDocument.getEntity().getParentPath()?(o.collapse(),r.destroy()):(o.collapse(),r.destroy(),o.setHasExpander(!1),o.rerender()):r.destroy()}},updateNodeForDocument:function(e){var t=this._oUI5Tree.getNodeByTag(e.getKeyString());t&&(console.log("Document: "+e.getKeyString()+" hasChildren: "+e.getDocumentMetadata().hasChildren),e.getDocumentMetadata().hasChildren?t.setHasExpander(!0):t.setHasExpander(!1))},onToggleOpenState:function(e){var t=this;if(!window.event||"message"!=window.event.type){var n=e.getSource();e.getParameters().opened===!0?(this._expandedNodeHandling(n),t._bPreferenceStoreEnabled&&this._context.service.repositorybrowserPersistence.add(n.oDocument).done()):t._bPreferenceStoreEnabled&&this._context.service.repositorybrowserPersistence.remove(n.oDocument).done()}},_filterFolderContentResult:function(e){if(this._aFilters.length>0){for(var t=[],n=0;n<e.length;n++)if("folder"===e[n].getEntity().getType())t.push(e[n]);else{var r=e[n].getEntity().getFileExtension();-1!=this._aFilters.indexOf(r)&&t.push(e[n])}return Q(t)}return Q(e)},_expandedNodeHandling:function(e){if(!e.isLoaded&&!e.expandPromise){var t=this;e.expandPromise=e.oDocument.getFolderContent().then(function(e){return t._filterFolderContentResult(e)}).then(function(n){t._onExpandedContentFetched(n,e),delete e.expandPromise}),e.expandPromise.done()}},onNodeSelected:function(e){if(!window.event||"message"!=window.event.type){for(var t=e.getParameter("nodes"),n=[],r=0;r<t.length;r++)n.push({document:t[r].oDocument});this._setSelectedDocument(n)}},setNodeCustomStyle:function(e){this._oCustomStyle=e;for(var t=this._oUI5Tree.getNodes(),n=0;n<t.length;n++)this._updateNodeStyle(t[n],!0,!0)},removeNodeCustomStyle:function(){for(var e=this._oUI5Tree.getNodes(),t=0;t<e.length;t++)this._updateNodeStyle(e[t],!0,!1);this._oCustomStyle=null},_onExpandedContentFetched:function(e,t){if(!t.bIsDestroyed&&t.getTree()){var n=this;e.sort(this._nodeComparator);for(var r=0;r<e.length;r++){var i=e[r],o=n._createNodeForDocument(i);o&&(t.addNode(o),n.getSelection()&&n.getSelection().document===i&&(o.select(),n._oUI5Tree.setSelectedNode(o)))}t.isLoaded=!0,this._documentStackForDecoration=null}},_setDecoration:function(e,t){var n=this,r=e.oDocument;if(this._documentStackForDecoration)for(var i=0;i<this._documentStackForDecoration.length;i++){var o=this._documentStackForDecoration[i].document;if(o==r){var t=this._documentStackForDecoration[i].event;this._documentStackForDecoration.splice(i,1);break}}var a=[],s=[];return this._oDecoration.decorate(r,t).then(function(t){if(t.length>0){for(var r=0;r<t.length;r++){var i=t[r];i.styleClass&&("string"==typeof i.styleClass?s.push(i.styleClass):i.styleClass.length&&s.push.apply(s,i.styleClass)),i.prefix&&e.setPrefix(i.prefix),i.suffix&&(i.suffix.length?a.push.apply(a,i.suffix):a.push(i.suffix)),(i.decoratorIconBottomLeft||""==i.decoratorIconBottomLeft)&&e.setDecoratorIconBottomLeft(i.decoratorIconBottomLeft),(i.decoratorIconBottomRight||""==i.decoratorIconBottomRight)&&e.setDecoratorIconBottomRight(i.decoratorIconBottomRight),(i.decoratorIconTopLeft||""==i.decoratorIconTopLeft)&&e.setDecoratorIconTopLeft(i.decoratorIconTopLeft),(i.decoratorIconTopRight||""==i.decoratorIconTopRight)&&e.setDecoratorIconTopRight(i.decoratorIconTopRight),(i.decoratorIconStyleClass||""==i.decoratorIconStyleClass)&&e.setDecoratorIconStyleClass(i.decoratorIconStyleClass)}return a.sort(n.sortByPrio),e.setSuffixes(a),e.setStyleClasses(s),e}})},sortByPrio:function(e,t){return e.prio-t.prio},_updateNodeStyle:function(e,t,n){if(!t){var r=e.oDocument,i=this._getCustomStyle(r);i&&(n?e.addStyleClass(i):e.removeStyleClass(i))}for(var o=e.getNodes(),a=0;a<o.length;a++)this._updateNodeStyle(o[a],!1,n)},_selectAndExpandExistingNode:function(e,t,n,r){function i(e){e&&e.getParent&&e.getParent()!==o._oUI5Tree&&i(e.getParent()),e&&e.getExpanded&&!e.getExpanded()&&(e.expand(),o._expandedNodeHandling(e))}var o=this;e&&(t&&i(e.getParent()),r&&i(e),n||this._selectNode(e,t,!1))},_selectAndExpandToBeCreatedNode:function(e,t,n,r){function i(e){return e.getParent().then(function(e){if(null==e)return null;var t=a._oUI5Tree.getNodeByTag(e.getKeyString());return t?t:(s.push(e),i(e))})}function o(r){return r?(r.expand(),a._expandedNodeHandling(r),r.expandPromise?r.expandPromise.then(function(){var r=a._oUI5Tree.getNodeByTag(e.getKeyString());if(r)return n||a._selectNode(r,t,!0),Q();var i=s.pop();if(!i)return Q();var u=a._oUI5Tree.getNodeByTag(i.getKeyString());return u&&u.rerender(),o(u)}):Q()):Q()}var a=this;if(t){var s=[];return i(e).then(function(t){return o(t).then(function(){return r?o(a._oUI5Tree.getNodeByTag(e.getKeyString())):Q()})})}},_selectNode:function(e,t,n){var r=this;if(this._setSelectedDocument([{document:e.oDocument}]),!n)return e.select(),void 0;var i,o=function(){e.select(),r._oUI5Tree.removeEventDelegate(i)};i={onAfterRendering:o},this._oUI5Tree.addEventDelegate(i)},_setSelectedDocument:function(e){var t=this;this._selectedDocument=e?e:null,t._bPreferenceStoreEnabled&&this._context.service.repositorybrowserPersistence.onSelectionChanged(e).done(),this._context.event.fireSelectionChanged().done()},_getCustomStyle:function(e){if(this._oCustomStyle){var t=e.getEntity(),n=t.getParentPath()+"/"+t.getName();if(n in this._oCustomStyle)return this._oCustomStyle[n]}return null},_createNodeForDocument:function(e){var t=e.getEntity();if(!e.getDocumentMetadata().hidden){var n="";n=t.isFolder()?"wattTreeFolder":"wattTreeFile";var r,i=this._getCustomStyle(e),o=e.getKeyString();switch(e.getType()){case"file":r=!1;break;case"folder":r=""===e.getEntity().getParentPath()||e.getDocumentMetadata().hasChildren||!1;break;default:throw new Error("Unexpected Error")}var a=new sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode({tag:o,text:t.getName(),hasExpander:r,expanded:!1}).addStyleClass(n);switch(i&&a.addStyleClass(i),a.isLoaded=!1,a.oDocument=e,a.keyString=e.getKeyString(),t.getType()){case"file":this._doubleClickEnabled&&a.attachDblClick(null,function(e){var t=e.getSource();this._context.service.document.open(t.oDocument).done()},this);break;case"folder":a.attachToggleOpenState(null,this.onToggleOpenState.bind(this))}return this._oDecoration&&this._setDecoration(a).done(),a}},_createRootNode:function(e){var t=this;return this._context.service.filesystem.documentProvider.getRoot().then(function(n){var r=t._context.i18n.getText("i18n","repositoryBrowser_rootNode"),i=n.getKeyString(),o=new sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode({tag:i,text:r,hasExpander:!0,expanded:!0});return o.oDocument=n,o.type="rootRepository",t.getSelection()&&t.getSelection().document==n&&o.select(),e.addNode(o),o})},_nodeComparator:function(e,t){var n=e.getEntity().getName().toLowerCase(),r=t.getEntity().getName().toLowerCase(),i=e.getType(),o=t.getType();return"file"===i&&"folder"===o?1:"folder"===i&&"file"===o?-1:r>n?-1:n>r?1:0},_getImageUrl:function(e){return require.toUrl("sap/watt/uitools/images")+"/"+e},toggleNodeFocus:function(e){var t=e?"removeClass":"addClass",n="sapUiTreeNodeUnfocused";this._selectedNodes&&(this._selectedNodes.removeClass(n),this._selectedNodes=null),this._selectedNodes=this._oUI5Tree.$().find(".sapUiTreeNodeSelected"),this._selectedNodes[t](n)}})}(),define("sap.watt.platform.repositorybrowser/view/RepositoryBrowser.controller",function(){}),function(){"use strict";sap.ui.commons.TreeNode.extend("sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode",{metadata:{events:{dblClick:{}},properties:{tag:{type:"string",group:"Behavior",defaultValue:null}}}}),sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode.prototype.setStyleClasses=function(e){this._aStyleClasses=e,this.invalidate()},sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode.prototype.setDecoratorIconBottomLeft=function(e){this._decoratorIconBottomLeft=e,this.invalidate()},sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode.prototype.setDecoratorIconBottomRight=function(e){this._decoratorIconBottomRight=e,this.invalidate()},sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode.prototype.setDecoratorIconTopLeft=function(e){this._decoratorIconTopLeft=e,this.invalidate()},sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode.prototype.setDecoratorIconTopRight=function(e){this._decoratorIconTopRight=e,this.invalidate()},sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode.prototype.setDecoratorIconStyleClass=function(e){this._decoratorIconStyleClass=e,this.invalidate()},sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode.prototype.setPrefix=function(e){this._oPrefix=e,this.invalidate()},sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode.prototype.setSuffixes=function(e){this._aSuffixes=e,this.invalidate()},sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode.prototype.getTooltip_AsString=function(){return this.getText()},sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode.prototype.addNode=function(e){sap.ui.commons.TreeNode.prototype.addNode.call(this,e);var t=this._getTree();t.onPostAddNode(e)},sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode.prototype.insertNode=function(e,t){sap.ui.commons.TreeNode.prototype.insertNode.call(this,e,t);var n=this._getTree();n.onPostAddNode(e)},sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode.prototype.destroy=function(){var e=this._getTree();e.onPreDestroyNode(this),sap.ui.commons.TreeNode.prototype.destroy.call(this,this)},sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode.prototype.ondblclick=function(){this.fireDblClick()},sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeNode.prototype._getTree=function(){var e=this.getTree();if(!e)throw new Error("The Tree for this node "+oNode.getText()+" not available");return e}}(),define("sap.watt.platform.repositorybrowser/view/BrowserTreeNode",function(){}),function(){"use strict";jQuery.sap.declare("sap.watt.platform.plugin.repositorybrowser.view.BrowserTree"),jQuery.sap.require("sap.ui.commons.TreeNode"),sap.ui.commons.Tree.extend("sap.watt.platform.plugin.repositorybrowser.view.BrowserTree",{metadata:{properties:{keepState:{type:"boolean",group:"Appearance",defaultValue:!0}}}}),function(){sap.watt.platform.plugin.repositorybrowser.view.BrowserTree.prototype.init=function(){sap.ui.commons.Tree.prototype.init&&sap.ui.commons.Tree.prototype.init.call(this),this.expandedNodeMap=null,this.oSelectedNode=null,this.nodeMap={};var e=this;this.addEventDelegate({onBeforeRendering:function(){var t=e.getDomRef();if(t){var n=t.querySelector(".sapUiTreeCont");n&&(e._scrollPos={left:n.scrollLeft,top:n.scrollTop})}}}),this.addEventDelegate({onAfterRendering:function(){var t=e.getDomRef();if(t){var n=t.querySelector(".sapUiTreeCont");n&&e._scrollPos&&(n.scrollLeft=e._scrollPos.left,n.scrollTop=e._scrollPos.top)}}})},sap.watt.platform.plugin.repositorybrowser.view.BrowserTree.prototype.addNode=function(e){sap.ui.commons.TreeNode.prototype.addNode.call(this,e),this.onPostAddNode(e)},sap.watt.platform.plugin.repositorybrowser.view.BrowserTree.prototype.onPostAddNode=function(e){if(this.getKeepState()){if(!e.getTag||!e.getTag())return;this.expandedNodeMap&&this.expandedNodeMap[e.getTag()]&&(e.setExpanded(!0),e.fireToggleOpenState({opened:!0,postAdd:!0}))}this.nodeMap[e.getTag()]=e},sap.watt.platform.plugin.repositorybrowser.view.BrowserTree.prototype.onPreDestroyNode=function(e){delete this.nodeMap[e.getTag()]},sap.watt.platform.plugin.repositorybrowser.view.BrowserTree.prototype.setSelectedNode=function(e){this.oSelectedNode=e},sap.watt.platform.plugin.repositorybrowser.view.BrowserTree.prototype.getSelectedNode=function(){return this.oSelectedNode},sap.watt.platform.plugin.repositorybrowser.view.BrowserTree.prototype.getNodeByTag=function(e){return this.nodeMap[e]},sap.watt.platform.plugin.repositorybrowser.view.BrowserTree.prototype.onAfterRendering=function(){$(".explorer .sapUiTreeIcon").each(function(e,t){t.ondragstart=function(e){e.preventDefault(),e.stopPropagation()}})}}()}(),define("sap.watt.platform.repositorybrowser/view/BrowserTree",function(){}),function(){"use strict";jQuery.sap.declare("sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeRenderer"),sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeRenderer={},sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeRenderer.render=function(e,t){var n=e;sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeRenderer.bFirstNodeRendered=!1,n.write("<div"),n.writeControlData(t),n.addClass("sapUiTree"),""!=t.getHeight()&&"auto"!=t.getHeight()&&n.addClass("sapUiTreeFixedHeight"),t.getShowHeader()||n.addClass("sapUiTreeTransparent"),n.writeClasses(),n.addStyle("width",t.getWidth()||"auto"),n.addStyle("height",t.getHeight()),n.addStyle("min-width",t.getMinWidth()),n.writeStyles(),n.writeAttribute("role","tree"),n.write(">"),t.getShowHeader()&&(n.write('<div id="'+t.getId()+'-Header" class="sapUiTreeHeader"'),n.writeAttribute("role","heading"),n.write(">"),n.write("<div class='sapUiTreeTitle'"),t.getTooltip_AsString()&&n.writeAttributeEscaped("title",t.getTooltip_AsString()),n.write(">"),n.writeEscaped(t.getTitle()),n.write("</div>"),t.getShowHeaderIcons()&&(n.write("<div id='"+t.getId()+"-TBCont' class='sapUiTreeTbCont'"),n.writeAttribute("role","toolbar"),n.write(">"),n.renderControl(t.oCollapseAllButton),n.renderControl(t.oExpandAllButton),n.write("</div>")),n.write("</div>")),n.write('<div id="'+t.getId()+'-TreeCont"'),n.addClass("sapUiTreeCont");var r=t.getShowHorizontalScrollbar();r?n.addClass("sapUiTreeContScroll"):n.addClass("sapUiTreeContNoScroll"),n.writeClasses(),n.write(">"),n.write('<ul class="sapUiTreeList">');for(var i=t.getNodes(),o=0;o<i.length;o++)sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeRenderer.renderNode(n,i[o],1,i.length,o+1);n.write("</ul>"),n.write("</div>"),n.write("</div>")},sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeRenderer.renderNode=function(e,t,n,r,i){var o,a=e;if(a.write("<li"),a.writeElementData(t),a.addClass("sapUiTreeNode"),t._aStyleClasses)for(var s=0;s<t._aStyleClasses.length;s++)a.addClass(t._aStyleClasses[s]);if(t._decoratorIconStyleClass&&a.addClass(t._decoratorIconStyleClass),t.getExpanded()&&(t.getHasExpander()||t.hasChildren())?(a.addClass("sapUiTreeNodeExpanded"),o=!0):t.getExpanded()||!t.getHasExpander()&&!t.hasChildren()||(a.addClass("sapUiTreeNodeCollapsed"),o=!1),t.getSelectable()&&t.getIsSelected()&&(a.addClass("sapUiTreeNodeSelected"),a.writeAttribute("aria-selected","true")),!o&&t.hasSelectedHiddenChild()&&(a.addClass("sapUiTreeNodeSelectedParent"),a.writeAttribute("aria-selected","true")),a.writeClasses(t),a.writeAttribute("role","treeitem"),a.writeAttribute("aria-level",n),a.writeAttribute("aria-setsize",r),a.writeAttribute("aria-posinset",i),o?a.writeAttribute("aria-expanded","true"):t.getHasExpander()&&a.writeAttribute("aria-expanded","false"),a.writeAttributeEscaped("title",t.getTooltip_AsString()),sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeRenderer.bFirstNodeRendered||(a.write("tabindex='0'"),sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeRenderer.bFirstNodeRendered=!0),a.writeAttribute("style","padding-left:"+(n-1)+"em"),a.write(">"),t._decoratorIconBottomLeft&&(a.write("<span"),a.addClass("sapUiTreeNodeDecoratorSpan"),a.writeClasses(),a.write(">"),a.write("<img"),a.addClass("sapUiTreeNodeDecoratorBottomLeftOnly"),a.writeClasses(),a.writeAttributeEscaped("src",t._decoratorIconBottomLeft),a.write(">"),a.write("</span>")),t._decoratorIconBottomRight&&(a.write("<span"),a.addClass("sapUiTreeNodeDecoratorSpan"),a.writeClasses(),a.write(">"),a.write("<img"),a.addClass("sapUiTreeNodeDecoratorBottomRightOnly"),a.writeClasses(),a.writeAttributeEscaped("src",t._decoratorIconBottomRight),a.write(">"),a.write("</span>")),t._decoratorIconTopLeft&&(a.write("<span"),a.addClass("sapUiTreeNodeDecoratorSpan"),a.writeClasses(),a.write(">"),a.write("<img"),a.addClass("sapUiTreeNodeDecoratorTopLeftOnly"),a.writeClasses(),a.writeAttributeEscaped("src",t._decoratorIconTopLeft),a.write(">"),a.write("</span>")),t._decoratorIconTopRight&&(a.write("<span"),a.addClass("sapUiTreeNodeDecoratorSpan"),a.writeClasses(),a.write(">"),a.write("<img"),a.addClass("sapUiTreeNodeDecoratorTopRightOnly"),a.writeClasses(),a.writeAttributeEscaped("src",t._decoratorIconTopRight),a.write(">"),a.write("</span>")),a.write("<span"),a.addClass("sapUiTreeNodeContent"),t.getSelectable()||a.addClass("sapUiTreeNodeNotSelectable"),a.writeClasses(),a.write(">"),t.getIcon()&&a.writeIcon(t.getIcon(),"sapUiTreeIcon"),t._oPrefix&&t._oPrefix.text&&(a.write("<span"),t._oPrefix.styleClass&&(a.addClass(t._oPrefix.styleClass),a.writeClasses()),a.write("> "),a.writeEscaped(t._oPrefix.text),a.write(" </span>")),a.writeEscaped(t.getText()),t._aSuffixes)for(var s=0;s<t._aSuffixes.length;s++){var u=t._aSuffixes[s];a.write("<span"),u.styleClass&&(a.addClass(u.styleClass),a.writeClasses()),a.write("> "),a.writeEscaped(u.text),a.write(" </span>")}if(a.write("</span>"),a.write("</li>"),t.getNodes()){var c=t.getNodes();a.write("<ul"),a.writeAttribute("id",t.getId()+"-children"),a.addClass("sapUiTreeChildrenNodes"),o?a.writeAttribute("style","display: block;"):a.addClass("sapUiTreeHiddenChildrenNodes"),a.writeClasses(),a.write(">"),n++;for(var s=0;s<c.length;s++)sap.watt.platform.plugin.repositorybrowser.view.BrowserTreeRenderer.renderNode(a,c[s],n,c.length,s+1);a.write("</ul>")}}}(),define("sap.watt.platform.repositorybrowser/view/BrowserTreeRenderer",function(){}),define("sap.watt.platform.repositorybrowser/service/RepositoryBrowser",["sap/watt/common/plugin/platform/service/ui/AbstractPart","../view/RepositoryBrowser.controller","../view/BrowserTreeNode","../view/BrowserTree","../view/BrowserTreeRenderer"],function(e){"use strict";var t=e.extend("sap.watt.platform.plugin.repositorybrowser.service.RepositoryBrowser",{_oView:null,_oController:null,_bLinkWithEditor:!1,_bSelectionSuppressed:!1,_lastDoc:null,init:function(){this._oView=sap.ui.view({viewName:"sap.watt.platform.plugin.repositorybrowser.view.RepositoryBrowser",type:sap.ui.core.mvc.ViewType.XML}),this._oController=this._oView.getController()},configure:function(t){var n=this;return e.prototype.configure.apply(this,arguments).then(function(){return n._oController.setDecoration(n.context.service.decoration,t.decorationEnabled).then(function(){return n._oController.init(n.context).then(function(){var e=!!t.doubleClickEnabled;n._oView.getController().setDoubleClickEnabled(e),n._oView.getController().enablePreferenceStore(!!t.preferenceEnabled),n._oView.getController().setFilters(t.filters),n._oView.getController().enableMultipleSelection(t.multipleSelectionEnabled);var r=[];return t.contextMenu&&r.push(n.context.service.commandGroup.getGroup(t.contextMenu).then(function(e){n._oView.getController().setContextMenuGroup(e)})),t.preferenceEnabled&&r.push(n._oView.getController().expandNodes().then(function(){return n._oView.getController().restoreSelected()})),Q.all(r)})})}).then(function(){n.context.service.document.attachEvent("changed",n.onDocumentChanged,n),n.context.service.document.attachEvent("created",n.onDocumentCreated,n)})},restoreInitialLinkedState:function(){var e=this;
this.context.service.repositorybrowserPersistence.getLinked().then(function(t){e._bLinkWithEditor=t}).done()},getContent:function(){var t=this;return e.prototype.getContent.apply(this,arguments).then(function(){return t._oView})},getFocusElement:function(){return this._oView},getSelection:function(){var e=this._oView.getController().getSelection();return e},setNodeCustomStyle:function(e){this._oView.getController().setNodeCustomStyle(e)},removeNodeCustomStyle:function(){this._oView.getController().removeNodeCustomStyle()},setSelection:function(e,t,n){this._oView.getController().setSelection(e,t,void 0,n)},toggleLinkWithEditor:function(){this._bLinkWithEditor=!this._bLinkWithEditor,this._lastDoc=null,this.context.service.repositorybrowserPersistence.onLinkChanged({linked:this._bLinkWithEditor})},getStateLinkWithEditor:function(){return this._bLinkWithEditor},onDocumentChanged:function(e){var t=e.params.changeType,n=e.params.document,r=this._oView.getController();if(n&&r)if("hidden"===t)this._handleHiddenChange(n,r,e);else if("deleted"===t)r.removeNodeForDocument(n);else if("children"===t&&this._oView.oController&&this._oView.oController._oUI5Tree){var i=this._oView.oController._oUI5Tree.getNodeByTag(e.params.document.getKeyString());if(i){var o=e.params.document.getDocumentMetadata(),a=o.hasChildren;void 0===a&&(a=!0),i.setHasExpander(a),i.rerender()}}},_handleHiddenChange:function(e,t,n){var r=e.getDocumentMetadata().hidden;r?t.removeNodeForDocument(e):t.addNodeForDocument(e,n.params.parent)},_sendFocusChangeToViewController:function(e){this._oView.getController().toggleNodeFocus(e)},onFocusChanged:function(){var e=this;this.context.service.focus.getFocus().then(function(t){e._sendFocusChangeToViewController("repositorybrowser"===t._sName)}).done()},onAllPluginsStarted:function(){this.context.service.focus.setFocus(this.context.service.self).done()},onDocumentCreated:function(e){this._oView.getController()&&this._oView.getController().addNodeForDocument(e.params.document,e.params.parent)},setSelectionToCurrentDocument:function(){var e=this;return this.context.service.content.getCurrentDocument().then(function(t){return t?e.setSelection(t,!0):void 0})},onDocumentSelected:function(e){if(this._bLinkWithEditor){var t=this;if(0!=e.params.selection.length){var n=e.params.selection[0].document;if(!n._bExtDoc&&this._lastDoc!=n)return this._lastDoc=n,this.context.service.selection.getOwner().then(function(e){if(e.instanceOf("sap.watt.common.service.editor.Editor")){var r=t.setSelection(n,!0);return t._sendFocusChangeToViewController(!1),r}return e===t.context.service.repositorybrowser?t.context.service.content.showIfOpen(n):void 0})}}},refresh:function(){var e=this;return this.context.service.filesystem.documentProvider.getRoot().then(function(t){return t.refresh().then(function(){return e.context.service.content.refresh()})})},onDecorationsChanged:function(e){var t=e.params.event,n=e.params.documents;if(e.params.updateChildren){var r=this;n.forEach(function(t){r.refreshDecorationsForAllChildren(t,e)})}else this.updateDecoration(n,t)},_updateDecorationInternal:function(e,t){var n=this._oController._oUI5Tree.getNodeByTag(e.getKeyString());return n?this._oController._setDecoration(n,t).then(function(e){return e}):(this._oController._documentStackForDecoration||(this._oController._documentStackForDecoration=[]),this._oController._documentStackForDecoration.push({document:e,event:t}),Q())},updateDecoration:function(e,t){if(e.length){for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(this._updateDecorationInternal(i,t))}Q.all(n).done()}else this._updateDecorationInternal(e,t).done()},refreshDecorationsForAllChildren:function(e,t){e.getFolderContent&&this._refreshDecorationsForAllChildrenInternal(e,t).done()},_refreshDecorationsForAllChildrenInternal:function(e,t){var n=this,r=this._oController._oUI5Tree.getNodeByTag(e.getKeyString());return r?this._oController._setDecoration(r,t).then(function(){return r.isLoaded?e.getFolderContent().then(function(e){if(e.length>0){for(var r=[],i=0;i<e.length;i++){var o=e[i];r.push(n._refreshDecorationsForAllChildrenInternal(o,t))}return Q.all(r)}}):void 0}):void 0},exportSelection:function(e,t){var n=e[0].document;return this.context.service.export.exportDocument(n,t)}});return t}),define("sap.watt.platform.repositorybrowser/service/RepositoryBrowserPersistence",[],function(){"use strict";return{_CHANGED_THRESHOLD_IN_MS:2e3,_VERSION:1,_mNodes:{},_sSelected:"",_sStoredSelected:"",_bLinked:!1,_scheduled:!1,_sNode:"sap.watt.common.repositorybrowser.service.RepositoryBrowserPersistence",configure:function(){return this._load()},_load:function(){var e=this;return this.context.service.preferences.get(this._sNode).then(function(t){if(t&&t.version==e._VERSION){e._mNodes={};var n=[];for(var r in t.nodes)n.push(e.context.service.document.getDocumentByKeyString(t.nodes[r]).then(function(t){t?e._mNodes[t.getEntity().getKeyString()]=t:e._changed()}));return e._sStoredSelected=null,e._sSelected=null,t.selected&&n.push(e.context.service.document.getDocumentByKeyString(t.selected).then(function(t){t?(e._sStoredSelected=t,e._sSelected=t):e._changed()})),e._bLinked=t.linked,Q.all(n).then(function(){return e._sStoredSelected&&!e._sStoredSelected.getEntity().isRoot()?e._sStoredSelected.getParent().then(function(t){t&&(e._mNodes[t.getEntity().getKeyString()]||(e._sStoredSelected=null,e._sSelected=null))}):void 0})}}).fail(function(t){e.context.service.log.error("Workspace Persistence",t.message,["system"]).done()})},add:function(e){e&&"folder"===e.getEntity().getType()&&(this._mNodes[e.getEntity().getKeyString()]||(this._mNodes[e.getEntity().getKeyString()]=e,this._changed()))},getNodes:function(){return this._mNodes},getStoredSelected:function(){return this._sStoredSelected},getSelected:function(){return this._sSelected},getLinked:function(){return this._bLinked},onSelectionChanged:function(e){this._sSelected=e,this._changed()},onLinkChanged:function(e){this._bLinked=e.linked,this._changed()},remove:function(e){delete this._mNodes[e.getEntity().getKeyString()];for(var t in this._mNodes){var n=this._mNodes[t];e.getEntity().contains(n.getEntity())&&delete this._mNodes[t]}this._changed()},_changed:function(){var e=this;this._scheduled||(setTimeout(function(){e._scheduled=!1,e.save()},this._CHANGED_THRESHOLD_IN_MS),this._scheduled=!0)},save:function(){var e={};e.version=this._VERSION,e.nodes=Object.keys(this._mNodes),e.selected=this._sSelected&&1===this._sSelected.length?this._sSelected[0].document.getEntity().getKeyString():null,e.linked=this._bLinked,this.context.service.preferences.set(e,this._sNode).fail(function(e){console.error("repositorybrowser persistence: settings could not be written! "+e)}).done()}}}),define("sap.watt.platform.repositorybrowser/ui/CreateFileDialog",[],function(){"use strict";return{_oCreateFileCommand:null,_aMetadataContent:[],_checkInput:function(e){var t=e.getParameter("liveValue").trim(),n=""!==t&&!this._alreadyExists(t);sap.ui.getCore().byId("CreateFileDialog_CreateButton").setEnabled(n)},_alreadyExists:function(e){for(var t=0;t<this._aMetadataContent.length;t++)if(this._aMetadataContent[t].name===e)return!0;return!1},_createDialog:function(){var e=this,t=new sap.ui.commons.layout.VerticalLayout({width:"100%"});t.addContent(new sap.ui.commons.TextView({text:"{i18n>createFileDialog_filename}"}));var n=new sap.ui.commons.TextField("CreateFileDialog_InputFileName",{placeholder:"{i18n>createFileDialog_filename2}",tooltip:"{i18n>createFileDialog_insertfilename}",liveChange:[e._checkInput,e]});t.addContent(n);var r=new sap.ui.commons.Button({id:"CreateFileDialog_CreateButton",text:"{i18n>button_create}",style:sap.ui.commons.ButtonStyle.Emph,enabled:!1,press:[e.createFile,e]}),i=new sap.ui.commons.Dialog("CreateFileDialogUI",{title:"{i18n>createFileDialog_createfile}",initialFocus:n,buttons:[r,new sap.ui.commons.Button({text:"{i18n>button_cancel}",press:[e.cancel,e]})],defaultButton:r,resizable:!1,keepInWindow:!0,modal:!0});return i.addContent(t),i},openCreateUI:function(e,t,n){this._oDeferred=Q.defer(),this._oCreateFileCommand=e,this._oSelectedDocument=t,this._aMetadataContent=n;var r=sap.ui.getCore().byId("CreateFileDialogUI");return void 0===r&&(r=this._createDialog(),e.context.i18n.applyTo(r)),sap.ui.getCore().byId("CreateFileDialog_InputFileName").setValue(""),sap.ui.getCore().byId("CreateFileDialog_CreateButton").setEnabled(!1),r.open(),this._oDeferred.promise},createFile:function(){var e=sap.ui.getCore().byId("CreateFileDialog_CreateButton");e.setEnabled(!1);var t=sap.ui.getCore().byId("CreateFileDialog_InputFileName").getValue().trim(),n=this._oCreateFileCommand.createFile(t,this._oSelectedDocument),r=this;return n.then(function(){e.setEnabled(!0),sap.ui.getCore().byId("CreateFileDialogUI").close(),r._oDeferred.resolve()}).fail(function(t){e.setEnabled(!0),r.context.service.usernotification.alert(r.context.i18n.getText("i18n","createFileDialog_errormsg")+"\n"+t).done()})},cancel:function(){sap.ui.getCore().byId("CreateFileDialogUI").close()}}}),define("sap.watt.platform.repositorybrowser/ui/CreateFolderDialog",[],function(){"use strict";return{_oCreateFolderCommand:null,_aMetadataContent:[],_checkInput:function(e){var t=e.getParameter("liveValue").trim(),n=""!==t&&!this._alreadyExists(t);sap.ui.getCore().byId("CreateFolderDialog_CreateButton").setEnabled(n)},_alreadyExists:function(e){for(var t=0;t<this._aMetadataContent.length;t++)if(this._aMetadataContent[t].name===e)return!0;return!1},_createDialog:function(){var e=this,t=new sap.ui.commons.layout.VerticalLayout({width:"100%"});t.addContent(new sap.ui.commons.TextView({text:"{i18n>dialog_foldername}"}));var n=new sap.ui.commons.TextField("CreateFolderDialog_InputFolderName",{placeholder:"{i18n>dialog_foldername2}",tooltip:"{i18n>dialog_insertfoldername}",liveChange:[e._checkInput,e]});t.addContent(n);var r=new sap.ui.commons.Button({id:"CreateFolderDialog_CreateButton",text:"{i18n>button_create}",style:sap.ui.commons.ButtonStyle.Emph,enabled:!1,press:[e.createFolder,e]}),i=new sap.ui.commons.Dialog("CreateFolderDialogUI",{title:"{i18n>createFolderDialog_createfolder}",initialFocus:n,buttons:[r,new sap.ui.commons.Button({text:"{i18n>button_cancel}",press:[e.cancel,e]})],defaultButton:r,resizable:!1,keepInWindow:!0,modal:!0});return i.addContent(t),i},openCreateUI:function(e,t,n){this._oCreateFolderCommand=e,this._oSelectedDocument=t,this._aMetadataContent=n;var r=sap.ui.getCore().byId("CreateFolderDialogUI");void 0===r&&(r=this._createDialog(),e.context.i18n.applyTo(r)),sap.ui.getCore().byId("CreateFolderDialog_InputFolderName").setValue(""),sap.ui.getCore().byId("CreateFolderDialog_CreateButton").setEnabled(!1),r.open()},createFolder:function(){var e=sap.ui.getCore().byId("CreateFolderDialog_CreateButton");e.setEnabled(!1);var t=sap.ui.getCore().byId("CreateFolderDialog_InputFolderName").getValue().trim(),n=this._oCreateFolderCommand.createFolder(t,this._oSelectedDocument),r=this;n.then(function(){e.setEnabled(!0),sap.ui.getCore().byId("CreateFolderDialogUI").close()}).fail(function(t){e.setEnabled(!0),r.context.service.usernotification.alert(r.context.i18n.getText("i18n","createFolderDialog_errormsg")+"\n"+t)})},cancel:function(){sap.ui.getCore().byId("CreateFolderDialogUI").close()}}}),define("sap.watt.platform.repositorybrowser/utils/rbUtils",["sap/watt/lib/lodash/lodash"],function(e){"use strict";function t(t){for(var n=[],r=[],i=[],o=t.length,a=0;o>a;a++){var s=t[a].document;n.push(s),s.getEntity().isFolder()&&r.push(s)}for(var u=n.length,c=r.length,l=0;c>l;l++)for(var p=r[l].getEntity().getFullPath(),f=0;u>f;f++){var d=n[f].getEntity().getParentPath();p===d&&i.push(n[f])}var h=e.difference(n,i);return e.map(h,function(e){return{document:e}})}function n(e){return""===e.getParentPath()&&""!==e.getName()}function r(e,t){return this.assertBasicSelection().then(function(r){for(var i={val:!0,selectionLength:r.length},o=0;o<r.length;o++){var a=r[o].document.getEntity();if(e&&a.isRoot())return i;if(t&&n(a))return i}return i.val=!1,i})}function i(){return r.call(this,!0).then(function(e){return e.val})}function o(){return r.call(this,!1,!0).then(function(e){return e.val})}function a(){return r.call(this,!0,!0).then(function(e){return e.val})}function s(){return r.call(this,!0,!0).then(function(e){return!e.val&&1===e.selectionLength})}function u(e){return 1===e.length}function c(e){return"folder"===e.document.getEntity().getType()}function l(){return this.assertBasicSelection().then(function(e){return u(e)&&!e[0].document.getEntity().isRoot()&&c(e[0])})}function p(){return this.assertBasicSelection().then(function(e){return u(e)&&!e[0].document.getEntity().isRoot()&&c(e[0])&&!e[0].document.getEntity().isProject()})}function f(){return this.assertBasicSelection().then(function(e){return u(e)&&c(e[0])})}function d(){return this.assertBasicSelection().then(function(e){return u(e)&&!e[0].document.getEntity().isRoot()})}function h(){return this.assertBasicSelection().then(function(e){return u(e)&&e[0].document.getEntity().isRoot()})}function m(){return this.assertBasicSelection().then(function(e){return u(e)&&!c(e[0])})}function g(){var e=this.context.service.selection;return e.assertOwner(this.context.service.repositorybrowser).then(function(){return e.assertNotEmpty()})}return{isRootIncludedInSelection:i,assertBasicSelection:g,isSingleFolderNotRootSelection:l,isSingleFolderSelection:f,isSingleNoRootSelection:d,isSingleRootSelection:h,isLevelOneIncludedInSelection:o,isRootOrLevelOneFolderIncludedInSelection:a,isSingleSelectionWithNoRootOrLevelOneFolderSelection:s,isSingleFileSelection:m,removeSelectedFilesUnderSelectedFolders:t,isSingleFolderNotRootNotProjectSelection:p}}),define("sap.watt.platform.repositorybrowser/service/ArchiveFolder",{_maxFileSizeInBytesPromise:void 0,configure:function(){this._maxFileSizeInBytesPromise=this.context.service.system.getQuota()},_getMaxFileSizeBytes:function(){return this._maxFileSizeInBytesPromise.then(function(e){return e&&e.defaultMaxEntitySize?e.defaultMaxEntitySize:void 0})},createArchive:function(e){var t=this;return this.context.service.filesystem.documentProvider.getDocument(e).then(function(e){return Q.spread([t._getMaxFileSizeBytes(),e.exportZip(),e.getParent()],function(t,n,r){if(n.size<=t||!t){var i=e.getEntity().getName()+".zip";return r.importFile(n,!1,!0,i).then(function(e){return e})}var o=new Error;throw o.name="QuotaExceeded",o})})}}),define("sap.watt.platform.log/service/Log",[],function(){"use strict";var e=function(){};return e.prototype=jQuery.extend(e.prototype,{_oOrder:{debug:0,info:1,warn:2,error:3},_sLogLevel:"info",_targets:null,_defaultTargets:[],_getTarget:function(e){return this._targets?this._targets[e]:null},_getTargetService:function(e){return this._targets?this._targets[e].service:null},init:function(){},configure:function(e){if(e.targets&&e.targets.length>0){this._targets={};for(var t=0;t<e.targets.length;t++){var n=e.targets[t];this._targets[n.name]=n,this._defaultTargets.push(n.name)}}else this._targets=null,this._sLogLevel=e.logLevel,this._oBuffer=this.LogBuffer(e.bufferSize)},LogBuffer:function(e){return this._circularBuffer(e)},_createLogNode:function(e,t,n){return new function(){this.timestamp=new Date,this.tag=t,this.message=n,this.level=e}},setLogSize:function(e,t){var n=this._getTargetService(e);return n?n.setLogSize(e,t):(this._logSize=t,this._oBuffer=this.LogBuffer(t),void 0)},getLogSize:function(e){var t=this._getTargetService(e);return t?t.getLogSize(e):this._logSize},info:function(e,t,n){return this._addLogNode("info",e,t,n)},warn:function(e,t,n){return this._addLogNode("warn",e,t,n)},error:function(e,t,n){return this._addLogNode("error",e,t,n)},debug:function(e,t,n){return this._addLogNode("debug",e,t,n)},addMessage:function(e,t,n,r){return this._addLogNode(e,t,n,r)},setLevel:function(e,t){var n=this._getTargetService(e);n?n.setLevel("",t):this._sLogLevel=t},getLevel:function(e){var t=this._getTargetService(e);return t?t.getLevel():this._sLogLevel},getLog:function(e){var t=this._getTargetService(e);return t?t.getLog(e):this._oBuffer.getBuffer()},getLastLogMessage:function(e){var t=this._getTargetService(e);return t?t.getLastLogMessage(e):this._oBuffer.read()},_delegate:function(e,t,n,r){var i=this,o=[];return jQuery.each(e,function(e,a){var s=i._targets[a];s&&o.push(s.service.getLevel().then(function(e){return i._oOrder[t]>=i._oOrder[e]?s.service.addMessage(t,n,r).then(function(e){return i.context.event.fireChanged({target:s.name,service:s.service,node:e})}):Q()}))}),Q.all(o)},_addLogNode:function(e,t,n,r){if(this._targets)return r=r?r:this._defaultTargets,this._delegate(r,e,t,n);var i=new this._createLogNode(e,t,n);return this._oBuffer.add(i),Q(i)},_circularBuffer:function(e){var t=[],n=0,r=-1;return{add:function(i){r++,r%=e,r>t.length-1?t.push(i):t[r]=i,r==n&&(n%=e)},read:function(){var r=t[n];return n=(n+1)%e,r},readLatest:function(){return t[r]},isEmpty:function(){return n===r},isFull:function(){return(r+1)%e===n},getBuffer:function(){return t}}}}),e}),function(e,t){function n(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),void 0):(e.attachEvent("on"+t,n),void 0)}function r(e,t,n){return e.removeEventListener?(e.removeEventListener(t,n,!1),void 0):(e.detachEvent("on"+t,n),void 0)}function i(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return C[e.which]?C[e.which]:T[e.which]?T[e.which]:String.fromCharCode(e.which).toLowerCase()}function o(e,t){return e.sort().join(",")===t.sort().join(",")}function a(e){e=e||{};var t,n=!1;for(t in N)e[t]?n=!0:N[t]=0;n||(R=!1)}function s(e,t,n,r,i,a){var s,u,c=[],l=n.type;if(!D[e])return[];for("keyup"==l&&h(e)&&(t=[e]),s=0;s<D[e].length;++s)if(u=D[e][s],(r||!u.seq||N[u.seq]==u.level)&&l==u.action&&("keypress"==l&&!n.metaKey&&!n.ctrlKey||o(t,u.modifiers))){{!r&&u.combo==i,r&&u.seq==r&&u.level==a}c.push(u)}return c}function u(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function c(e){return e.preventDefault?(e.preventDefault(),void 0):(e.returnValue=!1,void 0)}function l(e){return e.stopPropagation?(e.stopPropagation(),void 0):(e.cancelBubble=!0,void 0)}function p(e,t,n,r){F.stopCallback(t,t.target||t.srcElement,n,r)||e(t,n)===!1&&(c(t),l(t))}function f(e,t,n){var r,i=s(e,t,n),o={},u=0,c=!1;for(r=0;r<i.length;++r)i[r].seq&&(u=Math.max(u,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=u)continue;c=!0,o[i[r].seq]=1,p(i[r].callback,n,i[r].combo,i[r].seq)}else c||p(i[r].callback,n,i[r].combo);var l="keypress"==n.type&&O;n.type!=R||h(e)||l||a(o),O=c&&"keydown"==n.type}function d(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=i(e);if(t)return"keyup"==e.type&&k===t?(k=!1,void 0):(F.handleKey(t,u(e),e),void 0)}function h(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function m(){clearTimeout(E),E=setTimeout(a,1e3)}function g(){if(!S){S={};for(var e in C)e>95&&112>e||C.hasOwnProperty(e)&&(S[C[e]]=e)}return S}function v(e,t,n){return n||(n=g()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function y(e,t,n,r){function o(t){return function(){R=t,++N[e],m()}}function s(t){p(n,t,e),"keyup"!==r&&(k=i(t)),setTimeout(a,10)}N[e]=0;for(var u=0;u<t.length;++u){var c=u+1===t.length,l=c?s:o(r||x(t[u+1]).action);b(t[u],l,r,e,u)}}function _(e){return"+"===e?["+"]:e.split("+")}function x(e,t){var n,r,i,o=[];for(n=_(e),i=0;i<n.length;++i)r=n[i],I[r]&&(r=I[r]),t&&"keypress"!=t&&P[r]&&(r=P[r],o.push("shift")),h(r)&&o.push(r);return t=v(r,o,t),{key:r,modifiers:o,action:t}}function b(e,t,n,r,i){A[e+":"+n]=t,e=e.replace(/\s+/g," ");var o,a=e.split(" ");return a.length>1?(y(e,a,t,n),void 0):(o=x(e,n),D[o.key]=D[o.key]||[],s(o.key,o.modifiers,{type:o.action},r,e,i),D[o.key][r?"unshift":"push"]({callback:t,modifiers:o.modifiers,action:o.action,seq:r,level:i,combo:e}),void 0)}function w(e,t,n){for(var r=0;r<e.length;++r)b(e[r],t,n)}for(var S,E,C={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},T={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},P={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},I={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},D={},A={},N={},k=!1,O=!1,R=!1,j=1;20>j;++j)C[111+j]="f"+j;for(j=0;9>=j;++j)C[j+96]=j;n(t,"keypress",d),n(t,"keydown",d),n(t,"keyup",d);var F={version:"1.4.6",registerDocument:function(e){n(e,"keypress",d),n(e,"keydown",d),n(e,"keyup",d)},unregisterDocument:function(e){r(e,"keypress",d),r(e,"keydown",d),r(e,"keyup",d)},bind:function(e,t,n){return e=e instanceof Array?e:[e],w(e,t,n),this},unbind:function(e,t){return F.bind(e,function(){},t)},trigger:function(e,t){return A[e+":"+t]&&A[e+":"+t]({},e),this},reset:function(){return D={},A={},this},stopCallback:function(e,t){return(" "+t.className+" ").indexOf(" mousetrap ")>-1?!1:"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},handleKey:f};e.Mousetrap=F,"function"==typeof define&&define.amd&&define("sap/watt/lib/mousetrap/mousetrap",F)}(window,document),define("sap.watt.platform.command/service/Command",["sap/watt/lib/mousetrap/mousetrap","sap/watt/common/error/AssertError"],function(e,t){"use strict";function n(e){if("string"!=typeof e)throw new Error("Invalid Expression: Parameter for 'env' must be string");return function(){return sap.watt.getEnv(e,!1)}}function r(e){if("array"!==jQuery.type(e))throw new Error("Invalid Expression: Parameter for 'equals' must be array with 2 elements");if(2!==e.length)throw new Error("Invalid Expression: Parameter for 'equals' must be array with 2 elements");return e=e.map(function(e){return s(e)}),function(){return!(e[0]()!==e[1]())}}function i(e){return e=s(e),function(){return!e()}}function o(e){if("array"!==jQuery.type(e))throw new Error("Invalid Expression: Parameter for 'and' must be array");return e=e.map(function(e){return s(e)}),function(){return e.every(function(e){return!!e()})}}function a(e){if("array"!==jQuery.type(e))throw new Error("Invalid Expression: Parameter for 'or' must be array");return e=e.map(function(e){return s(e)}),function(){return e.some(function(e){return!!e()})}}function s(e){if(null!=e){var t=jQuery.type(e);if("object"===t){var n=Object.keys(e);if(1!==n.length)throw new Error("Invalid Expression: Only one entry allowed");var r=n[0],i=e[r];if(x[r])return x[r](i);throw new Error("Invalid Expression: Unknown Type "+r)}if("array"===t)throw new Error("Invalid Expression: Array is not allowed");return function(){return e}}return null}var u=!1,c=require.toUrl("sap.watt.common.platform/ui/LoadingPage.html"),l="mac"===sap.ui.Device.os.name,p="win"===sap.ui.Device.os.name,f={mod:l?"⌘":"Ctrl",ctrl:l?"⌃":"Ctrl",alt:l?"⌥":"Alt",shift:l?"⇧":"Shift",del:l?"⌦":"Delete",left:l?"←":"Left",up:l?"↑":"Up",right:l?"→":"Right",down:l?"↓":"Down",home:l?"↖":"Home",end:l?"↘":"End",pageUp:l?"⇞":"PageUp",pageDown:l?"⇟":"PageDown",backspace:l?"⌫":"Backspace",enter:l?"↩":"Enter"},d=["shift","ctrl","mod","alt"],h=["ctrl","alt","shift","mod"],m=["mod","ctrl","alt","shift"],g=l?h:p?m:d,v=l?"":"+",y=function(t,n,r){if(this._sId=t,this._mConfig=n,this._oEventEmitter=r,this._sIcon=n.icon,this._sIconLabel=n.iconLabel,this._sLabel=n.label,this._oService=n.service,this._sType=n.type,this._mValues={},this._mValues["default"]=n.value,this._mServices=this._oService.context.service,this._bAvailable=s(n.available),this._bEnabled=s(n.enabled),this._sWindowTarget=n.windowTarget,this._sKeyBinding=n.keyBinding,this._registerKeyBinding(n.keyBinding),e.version&&"1.4.6"!==e.version)throw new Error("Version mismatch of mousetrap. SAP needs a patched version of 1.4.6.")};y.prototype.getId=function(){return this._sId},y.prototype.getIcon=function(){return this._sIcon},y.prototype.getKeyBindingAsText=function(){var e=null;if(this._sKeyBinding){var t=this._sKeyBinding.split("+");t.sort(this._keySorter);for(var n=0;n<t.length;n++){var r=f[t[n].toLowerCase()];r||(r=t[n].charAt(0).toUpperCase()+t[n].substring(1,t[n].length)),e=e?e+v+r:r}}return e},y.prototype.getKeyBindingTooltip=function(e){var t=this.getKeyBindingAsText();return t?e+" ("+t+")":e},y.prototype.getIconLabel=function(){return this._sIconLabel},y.prototype.getType=function(){return this._sType},y.prototype.getValue=function(e){return void 0==e&&(e="default"),this._mValues[e]||this._mValues["default"]},y.prototype.getLabel=function(){return this._sLabel},y.prototype.checkValue=function(e){if("boolean"===this.getType()&&"boolean"!=typeof e)throw new t("Just boolean values are allowed in boolean commands")},y.prototype.setValue=function(e,t){this.checkValue(e),void 0==t&&(t="default"),this._mValues[t]&&e!==this._mValues[t]&&this._oEventEmitter.fireInvalidated({commands:[this]}).done(),this._mValues[t]=e},y.prototype.execute=function(e){var t=this;return this._oCommandWindow=this._getCommandWindow(),this._isExecutable().then(function(n){return void 0===e&&(e=t.getValue()),t.setValue(e),n?t._oService.execute(e,t._oCommandWindow,t._mValues).fail(function(e){throw t._closeCommandWindow(),e}):(t._closeCommandWindow(),Q())})},y.prototype._getCommandWindow=function(){if(this._sWindowTarget){var e=window.open(c,this._sWindowTarget);return e.focus(),e}return void 0},y.prototype._closeCommandWindow=function(){this._oCommandWindow&&(this._oCommandWindow.close(),this._oCommandWindow=void 0)},y.prototype._isExecutable=function(){return this.getState().then(function(e){return e.available&&e.enabled})},y.prototype._isAvailable=function(){return null!=this._bAvailable?this._processStateValue("available",this._bAvailable):this._oService.isAvailable(this._mValues).then(null,function(e){if(e instanceof t)return!1;throw e})},y.prototype._isEnabled=function(){return null!=this._bEnabled?this._processStateValue("enabled",this._bEnabled):this._oService.isEnabled(this._mValues).then(null,function(e){if(e instanceof t)return!1;throw e})},y.prototype._processStateValue=function(e,t){return Q(this._processStateValueSync(e,t))},y.prototype._processStateValueSync=function(e,n){if("boolean"==typeof n)return n;if(n=n(),"boolean"==typeof n)return n;throw new t(e+": only accepts boolean value")},y.prototype.getState=function(){var e=this;return this._isAvailable().then(function(t){return t?[t,e._isEnabled()]:[!1,!1]}).spread(function(t,n){return{id:e._sId,enabled:n,available:t}})},y.prototype._registerKeyBinding=function(t){var n=this;t&&require(["sap/watt/lib/mousetrap/mousetrap-global-bind.min"],function(){"mod+s"===t||"mod+o"===t||"mod+f"===t||"mod+shift+a"===t||"mod+shift+s"===t||"mod+shift+m"===t||"mod+h"===t||"ctrl+space"===t||"esc"===t||"mod+shift+r"===t||"mod+shift+v"===t?e.bindGlobal(t,function(){return u?void 0:(n.execute().done(),!1)}):"left"===t||"right"===t||"up"===t||"down"===t||"shift+left"===t||"shift+right"===t||"shift+up"===t||"shift+down"===t?e.bind(t,function(){return u?void 0:(n.execute().done(),!1)}):e.bindGlobal(t,function(e){if(!u){if(n._bAvailable){var t=n._processStateValueSync("available",n._bAvailable);return t&&n.execute(e).done(),!t}n.execute(e).done()}})})},y.prototype._keySorter=function(e,t){var n=g.indexOf(e);0>n&&(n=100);var r=g.indexOf(t);return 0>r&&(r=100),n-r},y.prototype._error=function(e){y._error(this._sId,e)},y._mCommands={},y.register=function(e,t,n){this._mCommands[e]&&this._error(e,"Already registered"),t=jQuery.extend({service:null,keyBinding:null,stateServices:[]},t);var r=this,i=new y(e,t,n);return r._mCommands[e]=i,i},y.get=function(e){var t=this._mCommands[e];return t||this._error(e,"Command not implemented"),t},y.getAll=function(){return this._mCommands},y._error=function(e,t){var n=[];throw e&&n.push("Command: "+e),t&&n.push("Message: "+t),new Error(n.join(" | "))};var _={configure:function(e){var t=this;jQuery.each(e.commands,function(e,n){y.register(n.id,n,t.context.event)})},getCommand:function(e){return y.get(e)},registerDocument:function(t){e.registerDocument(t)},unregisterDocument:function(t){e.unregisterDocument(t)},filter:function(e){var t=[],n=[];return jQuery.each(e,function(e,t){t.getCommand&&t.getCommand()?n.push(t.getCommand().getState()):n.push(Q({enabled:!0,available:!0}))}),Q.all(n).then(function(n){return jQuery.each(e,function(e,r){var i=n[e];r&&i.available&&t.push({enabled:i.enabled,item:r})}),t})},invalidateAll:function(){this.context.event.fireInvalidated({commands:y.getAll()}).done()},onDialogOpened:function(){u=!0},onDialogClosed:function(){u=!1}},x={env:n,equals:r,and:o,or:a,not:i};return _}),define("sap.watt.platform.commandgroup/module/Group",["sap/watt/common/error/AssertError"],function(e){"use strict";var t=function(e,t){return e.getPrio()-t.getPrio()},n=function(e,t){this._sId=e.id,this._oCommand=t,this._aItems=[],this._sLabel=e.label,this._sIcon=e.icon,this._sIconLabel=e.iconLabel,this._oService=e.service};return n.prototype.getId=function(){return this._sId},n.prototype.addItem=function(e){if(this._oService)throw new Error("The items of the group '"+this.getId()+"' are retrieved dynamically. Adding items is not allowed");this._aItems.push(e),this._aItems.sort(t)},n.prototype.getItems=function(){if(this._oService){var t=this.getId();return this._oService.getItems(t).then(null,function(t){if(t instanceof e)return[];throw t})}return Q(this._aItems)},n.prototype.getCommand=function(){return this._oCommand},n.prototype.getIcon=function(){return this._sIcon},n.prototype.getIconLabel=function(){return this._sIconLabel},n.prototype.getLabel=function(){return this._sLabel},n.prototype.getDefaultItem=function(){for(var e=0;e<this._aItems.length;e++){var t=this._aItems[e];if(t.isDefault&&t.isDefault())return t}},n}),define("sap.watt.platform.commandgroup/module/ActionItem",[],function(){"use strict";var e=function(e,t){this._oCommand=t,this._sId=e.id||t.getId(),this._iPrio=e.prio,this._sLabel=e.label||t.getLabel(),this._sIcon=e.icon||t.getIcon(),this._sIconLabel=e.iconLabel||t.getIconLabel(),this._bDefault=e["default"]};return e.prototype.getId=function(){return this._sId},e.prototype.getCommand=function(){return this._oCommand},e.prototype.getIcon=function(){return this._sIcon},e.prototype.getIconLabel=function(){return this._sIconLabel},e.prototype.getPrio=function(){return this._iPrio},e.prototype.getLabel=function(){return this._sLabel},e.prototype.getValue=function(){return this._oCommand.getValue()},e.prototype.setValue=function(e){this._oCommand.setValue(e)},e.prototype.isDefault=function(){return this._bDefault},e}),define("sap.watt.platform.commandgroup/module/MenuItem",[],function(){"use strict";var e=function(e,t){this._sId=e.id||t.getId(),this._iPrio=e.prio,this._sLabel=e.label||t.getLabel(),this._sIcon=e.icon||t.getIcon(),this._sIconLabel=e.iconLabel||t.getIconLabel(),this._oGroup=t,this._sType=e.type};return e.prototype.getId=function(){return this._sId},e.prototype.getGroup=function(){return this._oGroup},e.prototype.getIcon=function(){return this._sIcon},e.prototype.getIconLabel=function(){return this._sIconLabel},e.prototype.getPrio=function(){return this._iPrio},e.prototype.getLabel=function(){return this._sLabel},e.prototype.getType=function(){return this._sType},e}),define("sap.watt.platform.commandgroup/module/InlineItem",[],function(){"use strict";var e=function(e,t){this._sId=e.id||t.getId(),this._iPrio=e.prio,this._sLabel=e.label,this._oGroup=t};return e.prototype.getId=function(){return this._sId},e.prototype.getGroup=function(){return this._oGroup},e.prototype.getPrio=function(){return this._iPrio},e.prototype.getLabel=function(){return this._sLabel},e}),define("sap.watt.platform.commandgroup/service/CommandGroup",["../module/Group","../module/ActionItem","../module/MenuItem","../module/InlineItem"],function(e,t,n,r){"use strict";
var i=function(e){throw new Error("CommandGroup: "+e)};return{_mGroups:{},_sDefaultType:"action",_mTypes:{action:function(e,n){var r=this;return this.context.service.command.getCommand(e.command).then(function(i){r._assertCommand(e.command,i,e)&&n.addItem(new t(e,i))})},menu:function(e,t){var r=this.getGroup(e.group);this._assertGroup(e.group,r,e)&&t.addItem(new n(e,r))},inline:function(e,t){var n=this.getGroup(e.group);this._assertGroup(e.group,n,e)&&t.addItem(new r(e,n))},list:function(e,t){var r=this.getGroup(e.group);this._assertGroup(e.group,r,e)&&t.addItem(new n(e,r))}},_assertCommand:function(e,t,n){return t?!0:(console.warn("The command with ID '"+e+"' does not exist. Group Item: "+JSON.stringify(n)),!1)},_assertGroup:function(e,t,n){return t?!0:(console.warn("The group with ID '"+e+"' does not exist. Group Item: "+JSON.stringify(n)),!1)},configure:function(t){var n=this;jQuery.each(t.groups||[],function(t,r){n._mGroups[r.id]&&i("Group with ID '"+r.id+"' is already defined"),n._mGroups[r.id]=new e(r)});var r=[];return jQuery.each(t.items||[],function(e,t){var o=n.getGroup(t.parent);if(n._assertGroup(t.parent,o,t)){var a=t.type||n._sDefaultType;n._mTypes[a]?r.push(n._mTypes[a].call(n,t,o)):i("Not supported command group type. Supported types are: "+Object.keys(n._mTypes).join(", "))}}),Q.all(r)},getGroup:function(e){return this._mGroups[e]}}}),define("sap.watt.platform.filesearch/service/FileSearchImpl",["sap/watt/common/plugin/platform/service/ui/AbstractPart","sap/watt/lib/lodash/lodash"],function(e,t){"use strict";var n=t,r=e.extend("sap.watt.platform.plugin.filesearch.service.FileSearchImpl",{FILES_PER_LOADING:10,MAX_COLUMNS_FOR_PREVIEW:200,_oCriteria:null,_oView:null,_oController:null,_oFileService:null,_searchResults:[],_numSearchResultsFound:0,configure:function(e){this._aStyles=e.styles},init:function(){this._oFileService=this.context.service.filesystem.documentProvider},getContent:function(){var e=this;return e._oView||(e._oView=sap.ui.view({viewName:"sap.watt.platform.plugin.filesearch.view.FileSearch",type:sap.ui.core.mvc.ViewType.XML,viewData:{context:this.context}}),e._oController=e._oView.getController(),e._oController.setServices(e.context.service)),this._aStyles?this.context.service.resource.includeStyles(this._aStyles).then(function(){return e._oView}):this._oView},getFocusElement:function(){return this._oView?this._oView:this.getContent()},previous:function(){return 0===this._searchResults.length||0===this._oCriteria.nStart?[]:(this._oCriteria.nStart=this._oCriteria.nStart-this.FILES_PER_LOADING,this._returnSearchResults(this._oCriteria.nStart))},search:function(e){var t=Q.defer(),n=this;if(void 0===e&&(e={bContentSearch:this._oCriteria.bContentSearch,nStart:this._oCriteria.nStart+this.FILES_PER_LOADING,sFileType:this._oCriteria.sFileType,sFolderName:this._oCriteria.sFolderName,sSearchTerm:this._oCriteria.sSearchTerm},e.nStart<this._searchResults.length)){this._oCriteria.nStart=this._oCriteria.nStart+this.FILES_PER_LOADING;var r=this._returnSearchResults(this._oCriteria.nStart);return t.resolve(r),t.promise}e.nRows=this.FILES_PER_LOADING;var i=e.sSearchTerm;return e.bContentSearch,!i.length>0?t.reject():n._findFile(e).then(function(r){n._oCriteria=e,0===e.nStart&&(n._searchResults=[]),n._numSearchResultsFound=r.numFound;for(var i=[],o=0;o<r.aFileEntries.length;o++)i.push(n._updateSearchResultsForItem(r.aFileEntries[o],o,e));Q.allSettled(i).then(function(){t.resolve(n._returnSearchResults(e.nStart))})},function(e){console.log("search: "+e.message),sap.ui.commons.MessageBox.alert(e.message,null,e.name)}).done(),t.promise},_showMoreButton:function(e){this._oController&&this._oController.showMoreButton(e)},_updateSearchResultsForItem:function(e,t,n){var r=Q.defer(),i=this,o=e.getEntity().getFullPath(),a={sFullPath:o,sText:i._truncateFilename(o,2),oFileDocument:e,iMathes:-1};return i._searchResults[t+n.nStart]=a,n.bContentSearch?this._buildResultItem(e,n.sSearchTerm).then(function(e){a.items=e,a.iMathes=e.length,r.resolve()}):r.resolve(),r.promise},_returnSearchResults:function(e){for(var t=[],n=this._calcEndIndex(this._numSearchResultsFound,e),r=n-e,i=0;r>i;i++)t[i]=this._searchResults[e+i];var o={aList:t,sSearchTerm:this._oCriteria.sSearchTerm,bContentSearch:this._oCriteria.bContentSearch,numFound:this._numSearchResultsFound,startindex:e+1,endindex:n};return o},_calcEndIndex:function(e,t){return e<t+this.FILES_PER_LOADING?e:t+this.FILES_PER_LOADING},_findFile:function(e){var t=this;return this.context.service.content.isDirty().then(function(n){return n&&sap.ui.commons.MessageBox.alert(t._getText("fileSearch_searchondirty"),void 0,t._getText("fileSearch_search")),t.context.service.progress.startTask(t._getText("fileSearch_search"),t._getText("fileSearch_searching")).then(function(n){return t._oFileService.search(e).fail(function(e){throw console.log(e),new Error(e)}).fin(function(){t.context.service.progress.stopTask(n).done()})})})},_getText:function(e){var t=this.context.i18n;return t.getText("i18n",e)},replace:function(e,t,n){var r=Q.defer(),i=this._oCriteria.sSearchTerm;return e.getContent().then(function(o){var a=null;a=void 0===n?o.split(i).join(t):o.substr(0,n)+t+o.substr(n+i.length),null!==a&&e.setContent(a).then(function(){e.save().then(function(e){r.resolve(e)}).done()}).done()}).done(),r.promise},replaceAll:function(e){var t=this,n=this._oCriteria,r=[];n&&(n.nStart=0,n.nRows=99999,this._findFile(n).then(function(n){for(var i=0;i<n.aFileEntries.length;i++)r.push(t.replace(n.aFileEntries[i],e));var o=r.length+" "+t._getText("fileSearch_replaceAll_result"),a=t._getText("fileSearch_replaceAll"),s=t._getText("fileSearch_replaceprogress"),u=new sap.ui.commons.Dialog({title:a,modal:!0});u.addContent(new sap.ui.commons.TextView({text:s})),u.open(),Q.all(r).then(function(){u.close(),sap.ui.commons.MessageBox.alert(o,function(){t._oController&&t._oController.clearResults()},a)}).done()},function(e){console.log("replaceAll: "+e.message)}).done())},onDocumentSelected:function(e){var t=this,n=e.params.owner;if(n&&n.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor")&&t._oController&&(t._oController._oAceeditorService!=n&&(t._oController._oAceeditorService=n),e.params.selection[0]&&e.params.selection[0].document)){var r=e.params.selection[0].document;t._oController._oDocument!==r&&(t._oController._oDocument=r,n.getUI5Editor().then(function(e){e&&t._oController.highlightTerm(e)}).done())}if(this.isVisible()&&n.instanceOf("sap.watt.common.service.ui.Browser")){var i=e.params.selection[0]?e.params.selection[0].document:void 0;i&&t._oController.setCurrentFolder(i)}},onVisibleChanged:function(e){var t=this.context.service.selection,n=this;e.params.visible&&t.getSelection().then(function(e){if(e.length>0){var t=e[0].document;t&&n._oController&&(n._oController.setCurrentFolder(t),n._oController.clearResults())}}).done()},onSplitterPositionChanged:function(){this.isVisible()&&this._oView&&this._oView.invalidate()},_isDocumentInSearchResults:function(e){return-1!==n.findIndex(this._searchResults[i],function(t){return t.sFullPath===e})},onDocumentChanged:function(e){var t=e.params.document?e.params.document.getEntity().getFullPath():"";if(this.isVisible()&&this._oController&&this._isDocumentInSearchResults(t)){if("content"===e.params.changeType&&!e.params.options.source)return Q();this._oController.clearResults()}return Q()},_buildResultItem:function(e,t){var n=[],r=-1,i=this;return e.exists().then(function(o){return o?e.getContent().then(function(e){if(e&&t){var o=e.toLowerCase(),a=e.split(/\r\n|\r|\n/),s=t.toLowerCase();for(var u in a)for(var c=a[u].toLowerCase().indexOf(s,0);c>=0;){r=o.indexOf(s,r+1);var l={sReplace:i._getText("fileSearch_replace"),sText:a[u],nLine:parseInt(u),iIndex:c,sPreview:"",cols:0,rows:1,nStart:r};i._fillPreviewForSearch(l,a),n.push(l),c=a[u].toLowerCase().indexOf(s,c+1)}return Q(n)}return Q(void 0)}):Q(void 0)}).fail(function(e){return Q(e)})},_fillPreviewForSearch:function(e,t){for(var n=e.nLine-3;n<=e.nLine+3;n++)if(n>=0&&t[n]){var r=t[n].replace(/ {1,}/g," ").replace(/\t/g," ");r.length>e.cols&&(e.cols=r.length>this.MAX_COLUMNS_FOR_PREVIEW?this.MAX_COLUMNS_FOR_PREVIEW:r.length),e.sPreview+=""===e.sPreview?r:"\n"+r,e.rows++}},_truncateFilename:function(e,t){for(var n=e.lastIndexOf("/"),r=0;t>r;r++)n=e.lastIndexOf("/",n-1);return n>0?"..."+e.substr(n):e}});return r}),define("sap.watt.platform.layout/service/Layout",[],function(){"use strict";return{_aItems:[],_iconMap:{expand:"e025",collapse:"e026",createFile:"e003",createFolder:"e005","delete":"e019",redo:"e018",run:"e00f",save:"e021",save_cloud:" e000",undo:"e017",search:"e02f",home:"e02e",development:"e040",git:"e042",git2:"e041",outlinePane:"e030",collaboration:"e031",lookup:"e033",fetch:"e04a",fetch_from_gerrit:"e04d",merge:"e04c",reset:"e015",rebase:"e04b",abort:"e010","continue":"e00d",skip:"e016",arrow_up:"e04e",arrow_down:"e043",user_preference:"e012",welcome:"e02e",arrow_left:"e009",arrow_right:"e00a",arrow_star:"e05c",lucy:"e02d",api_reference:"e033",proj_template:"e028",proj_sample:"e034",proj_extension:"e02a",proj_uifirst:"e02b",git_history:"e808",copy:"e029",help:"e06f",preview:"e072",frame:"e073",error:"e011",general:"E060","fiori-smart":"E06A","fiori-mobile":"E06E","fiori-lib":"E06C","fiori-app":"E06D","web-plugin":"E06B",favorite:"E071",unfavorite:"E070",gotocode:"e040"},_fioriIconMap:{my_shops:"E3A0",approve_purchase_order:"E232",manage_products:"E3A1",manage_purchase_order:"E3A6",manage_tasks:"E202"},_smileIconMap:{very_happy:"E08C",happy:"E08B",natural:"E089",sad:"E087",very_sad:"E086"},LayoutType:{LOAD:0,MAIN:1,FAILURE:2,LOGOUT:3},init:function(){jQuery.sap.require("sap.ui.core.IconPool");for(var e in this._iconMap)sap.ui.core.IconPool.addIcon(e,"watt","SAP-icons-watt",this._iconMap[e],!0);for(var e in this._fioriIconMap)sap.ui.core.IconPool.addIcon(e,"fiori","sap-launch-icons",this._fioriIconMap[e],!0);for(var e in this._smileIconMap)sap.ui.core.IconPool.addIcon(e,"smile","BusinessSuiteInAppSymbols",this._smileIconMap[e],!0);this._oCurrentLayoutType=this.LayoutType.LOAD},configure:function(e){this._aItems=this._aItems.concat(e.items),this._sContentId=e.content,this._sLoadingId=e.loading,this._sFailure=e.failure,this._aStyles=e.styles},show:function(e){return e===this.LayoutType.MAIN?this._handleLoadingAndMainLayout():e===this.LayoutType.FAILURE?this._handleFailureLayout():void 0},_hideCurrentLayout:function(){this._oCurrentLayoutType===this.LayoutType.MAIN?jQuery("#"+this._sContentId).hide():this._oCurrentLayoutType===this.LayoutType.LOAD&&jQuery("#"+this._sLoadingId).hide()},_handleFailureLayout:function(){this._hideCurrentLayout();var e=this;return this._aStyles?this.context.service.resource.includeStyles(this._aStyles).then(function(){var t=e.context.i18n.getText("i18n","failure_txt1"),n=e.context.i18n.getText("i18n","failure_txt2"),r=e.context.i18n.getText("i18n","failure_txt3"),i=require.toUrl("sap/watt/platform/plugin/layout/image/failure.png");jQuery("#"+e._sFailure).html('<div class="img1"><img src='+i+" alt="+t+"</img1>"+"</div>"+'<div class="txt1">'+t+"</div>"+'<div class="txt_container">'+'<div class="txt2">'+n+"</div>"+'<div class="txt3">'+r+"</div>"+"</div>"),jQuery("#"+e._sFailure).show()}):Q()},_handleLoadingAndMainLayout:function(){for(var e=this,t=[],n=Math.round(95/e._aItems.length),r=5,i=function(){r+=n,jQuery("#"+e._sLoadingId+" > progress").attr("value",r).html(r)},o=0;o<this._aItems.length;o++){var a=this._aItems[o].service.getContent();a.then(i).done(),t.push(a)}return Q.spread(t,function(){for(var t=0;t<arguments.length;t++){var n=arguments[t],r=e._aItems[t].placeAt;document.getElementById(r)?n.placeAt(e._aItems[t].placeAt):console.warn("LayoutService: Could not add service content to DOM "+r)}jQuery("#"+e._sLoadingId).hide(),e._oCurrentLayoutType=e.LayoutType.MAIN,jQuery("#"+e._sContentId).show()})},getLayoutTypes:function(){return this.LayoutType}}}),define("sap.watt.platform.logout/service/Logout",[],function(){"use strict";return{_contentService:null,_oUserInfoMenubar:new sap.ui.commons.MenuBar({id:"userInfoMenubar"}),configure:function(e){this._contentService=e.dirtyCheckService},init:function(){var e=this;this._oMenuUser=new sap.ui.commons.MenuItem({id:"userInfoLogout",text:this.context.i18n.getText("i18n","logout_logout")}),this._oUserInfoMenubar.addEventDelegate({onAfterRendering:function(){e._oMenuUser.getDomRef().onclick=function(){e._contentService.isDirty().then(function(t){if(t){var n=e.context.i18n.getText("i18n","logout_unsavedChanges");return e.context.service.usernotification.confirm(n).then(function(t){return t.bResult?e._callLogout():void 0}).done()}return e._callLogout()}).done()}}}),this._oUserInfoMenubar.addItem(this._oMenuUser)},_callLogout:function(){var e=this;return this.context.service.usagemonitoring.report("logout","logout").done(),e.context.service.system.logout().then(function(){return e.context.service.unloadHandler.setEnabled(!1)})},getContent:function(){return[this._oUserInfoMenubar]}}}),define("sap.watt.platform.sidebar/service/Sidebar",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";var t=e.extend("sap.watt.platform.plugin.sidebar.service.Sidebar",{_oMenuService:null,_oCommandGroupService:null,_mLayouts:{},_mButtons:{},_mSelectedButton:{},_mItemToCommandMapping:{},_mCommandToItemMapping:{},init:function(){this._oMenuService=this.context.service.menu,this._oCommandGroupService=this.context.service.commandGroup,this._mLayouts[this.context.self._sName]=new sap.ui.layout.VerticalLayout,this.context.service.perspective.attachEvent("perspectiveChanged",this.onAfterSetSelection,this)},configure:function(e){var t=this;return this._aStyles=e.styles,this._mButtons[this.context.self._sName]=[],this._oCommandGroupService.getGroup(e.group).then(function(e){return e?t.setGroup(e):void 0})},getContent:function(){var e=this;return this._aStyles?this.context.service.resource.includeStyles(this._aStyles).then(function(){return e._mLayouts[e.context.self._sName]}):this._mLayouts[this.context.self._sName]},setGroup:function(e){var t=this;return this._oMenuService.populate(new sap.ui.commons.Menu,e,{bFilter:!0,fnVisitor:function(e,n){"action"==n.type&&t._mLayouts[t.context.self._sName].addContent(t._createButton(n))}}).then(function(){t._filterSidebarItems()})},setSelectedItem:function(){},_createButton:function(e){var t=this._getIconUri(e.icon),n=new sap.ui.commons.Button({id:this._createId(e.id),icon:t,enabled:!1,tooltip:e.command?e.command.getKeyBindingTooltip(e.label):e.label,press:jQuery.proxy(this._createHandler(e.command,e.command.getValue(),this._createId(e.id)),this)});return this._mItemToCommandMapping[n.getId()]=e.command,this._mCommandToItemMapping[e.command.getId()]=n.getId(),t||(n.setText(e.label),n.addStyleClass("watt_sidebar_button")),this._mButtons[this.context.self._sName].push(n),n},_getIconUri:function(e){if(!e)return e;var t;return sap.ui.core.IconPool?(t=sap.ui.core.IconPool.getIconURI(e,"watt"),t||(t=sap.ui.core.IconPool.getIconURI(e),t||(t=require.toUrl(e)))):t=require.toUrl(e),t},_createId:function(e){return this._mLayouts[this.context.self._sName].getId()+"-"+e},_createHandler:function(e){return function(){"boolean"===e.getType()?e.execute(!e.getValue()).done():e.execute(e.getValue()).done()}},_filterSidebarItems:function(){var e=this,t=this._mLayouts[this.context.self._sName].getContent();jQuery.each(t,function(t,n){if(n instanceof sap.ui.commons.Button){var r=e._mItemToCommandMapping[n.getId()];r.getState().then(function(e){return n.setEnabled(e.enabled),Q()}).then(function(){return r._oService.isActive().then(function(t){t?(n.addStyleClass("selected"),e._mSelectedButton[e.context.self._sName]=n):(n.removeStyleClass("selected"),e._mSelectedButton[e.context.self._sName]="")})}).done()}})},refresh:function(){jQuery.each(this._aMenu,function(e,t){t.dirty=!0})},onAfterSetSelection:function(){this._filterSidebarItems()},onInvalidated:function(){this._filterSidebarItems()}});return t}),define("sap.watt.platform.console/command/ClearConsole",[],function(){"use strict";return{execute:function(){return this.context.service.console.clear()},isAvailable:function(){return!0},isEnabled:function(){var e=this.context.service.perspective;return e.getCurrentPerspective().then(function(e){return"development"==e})}}}),function(){"use strict";sap.ui.controller("sap.watt.platform.plugin.console.view.Console",{onInit:function(){}})}(),define("sap.watt.platform.console/view/Console.controller",function(){}),define("sap.watt.platform.console/service/Console",["sap/watt/common/plugin/platform/service/ui/AbstractPart","../view/Console.controller"],function(e){"use strict";var t=e.extend("sap.watt.common.plugin.console.service.Console",{_oView:null,_iMaxLineCount:null,_iActLineCount:0,_sFormat:null,_targets:null,_LINE_BREAK_REGEXP:new RegExp("&#xa;","g"),_oOrder:{debug:0,info:1,warn:2,error:3},configure:function(e){for(var t=0;t<e.targets.length;t++){var n=e.targets[t];this._targets[n]=n}this._iMaxLineCount=e.maxLineCount?e.maxLineCount:200,this._sFormat=e.format?e.format:"$MESSAGE",this._aStyles=e.styles},init:function(){this._targets={},this._oView=sap.ui.view("Console",{viewName:"sap.watt.platform.plugin.console.view.Console",type:sap.ui.core.mvc.ViewType.XML})},getContent:function(){var e=this,t=void 0;return this._aStyles&&(t=this.context.service.resource.includeStyles(this._aStyles).then(function(){return e._oView})),t?t:Q(this._oView)},getFocusElement:function(){return this.getContent()},addMessage:function(e){return this._addMessage(e),Q()},clear:function(){this._iActLineCount=0;var e=this._oView.getContent()[0],t=e.getContent()[0];t.destroy(),e.removeAllContent(),t=new sap.ui.core.HTML({id:"consoleHtml",content:"",preferDOM:!1}),e.addContent(t)},_addMessage:function(e){var t=this._oView.getContent()[0],n=t.getContent()[0];if(n){var r=n.getContent();if(this._iActLineCount>=this._iMaxLineCount){var i=r.indexOf("</div>");i>=0&&(r=r.substr(i+6,r.length)),this._iActLineCount--}var o=this._sFormat;o=o.replace("$TIME",e.timestamp.toLocaleTimeString()),o=o.replace("$TAG",e.tag),o=o.replace("$MESSAGE",e.message),o=jQuery.sap.encodeHTML(o),o=o.replace(this._LINE_BREAK_REGEXP,"<br/>"),r+='<div class="'+e.level+" "+'selectable"'+">"+o+"</div>",this._iActLineCount++,n.destroy(),t.removeAllContent(),n=new sap.ui.core.HTML({id:"consoleHtml",preferDOM:!1}),n.setContent(r),t.addContent(n),this._scrollToBottom()}},_scrollToBottom:function(){setTimeout(function(){var e=$("#Console");e=e?e[0]:null,e&&(e.scrollTop=e.scrollHeight)},100)},onLoggerEvent:function(e){var t=this,n=e.params.target,r=e.params.service,i=void 0;return this._targets[n]&&(i=r.getLastLogMessage(n).then(function(e){t._addMessage(e)})),i?i:Q()}});return t}),jQuery.sap.declare("sap.watt.ideplatform.plugin.template.ui.wizard.ProgressIndicator"),sap.ui.core.Control.extend("sap.watt.ideplatform.plugin.template.ui.wizard.ProgressIndicator",{_bAnimating:!1,_bError:!1,startAnimation:function(){this._bAnimating=!0,$("#"+this.sId+"progressBarInner1").show().addClass("animate"),$("#"+this.sId+"progressBarInner2").show().addClass("animate2")},stopAnimation:function(){this._bAnimating=!1,$("#"+this.sId+"progressBarInner1").hide().removeClass("animate"),$("#"+this.sId+"progressBarInner2").hide().removeClass("animate2")},changeStyleClass:function(){this.addStyleClass("spacer05 errorlineTop"),this.removeStyleClass("spacer05 lineTop")},setErrorStatus:function(e){this._bError=e;var t=document.getElementById(this.getId()+"progressBarInner1");t&&(t.parentElement.className=e?"spacer05 errorlineTop":"spacer05 lineTop")},renderer:function(e,t){t._bError?e.write('<div class="spacer05 errorlineTop">'):e.write('<div class="spacer05 lineTop">'),e.write('<div class="progressBarInner1" id="'+t.sId+'progressBarInner1" style="display: none;">'),e.write("</div>"),e.write('<div class="progressBarInner2" id="'+t.sId+'progressBarInner2" style="display: none;">'),e.write("</div>"),e.write("</div>")},onAfterRendering:function(){this._bAnimating?this.startAnimation():this.stopAnimation()}}),define("sap/watt/ideplatform/plugin/template/ui/wizard/ProgressIndicator",function(){}),define("sap.watt.platform.pluginmanager/service/PluginManagement",["sap/watt/ideplatform/plugin/template/ui/wizard/ProgressIndicator"],function(){return{_aRepositoryList:void 0,_sLocation:void 0,_workspaceLocation:void 0,_oRoot:void 0,_oRepositoryDropdownBox:void 0,_oPluginManagerTable:void 0,_oRemoveAllButton:void 0,_oDetailsTextView:void 0,_oNoteTextView:void 0,_bFoundRegisteredPlugin:void 0,_oProgressIndicator:void 0,_bIsSavedButNotLoaded:void 0,_oContext:void 0,_pluginList:void 0,_checkedComboBoxsCount:void 0,_invalidPlugins:void 0,init:function(){this._bIsSavedButNotLoaded=!1,this._checkedComboBoxsCount=0,this._invalidPlugins=[]},configure:function(e){e.preferenceService&&(this._oPreferencePersistencyService=e.preferenceService.service)},isPluginLoaded:function(e){return e?Q.sap.require("sap/watt/core/PluginRegistry").then(function(t){var n=t._mRegistry;for(var r in n){var i=n[r];if(i.getMetadata().name===e)return!0}return!1}):!1},_createOptionalGrid:function(){sap.watt.includeCSS(require.toUrl("sap.watt.ideplatform.template/css/wizard.css"));var e=new sap.ui.layout.Grid("PluginManagerGrid",{layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})});this._oRepositoryDropdownBox=new sap.ui.commons.DropdownBox({width:"100%",layoutData:new sap.ui.layout.GridData({span:"L8 M6 S7"}),change:[this._onChangeReposirory,this]});var t=new sap.ui.core.ListItem;t.bindProperty("text","repositoryDescription"),this._oRepositoryDropdownBox.bindItems("/repositories",t);var n=new sap.ui.commons.Label({text:"{i18n>pluginManagement_gitRepositoriesLabel}",labelFor:this._oRepositoryDropdownBox,layoutData:new sap.ui.layout.GridData({span:"L2 M3 S5"})}).addStyleClass("repositoryLabel");this._oProgressIndicator=new sap.watt.ideplatform.plugin.template.ui.wizard.ProgressIndicator({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})});var r=new sap.ui.layout.Grid({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),content:[n,this._oRepositoryDropdownBox]}).addStyleClass("repositoryGrid");this._oPluginManagerTable=new sap.ui.table.Table({rowSelectionChange:[this._onRowSelectionchange,this],selectionMode:sap.ui.table.SelectionMode.Single,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}),this._oPluginManagerTable.addDelegate({onAfterRendering:function(e){for(var t=e.srcControl.mAggregations.rows,n=0;n<t.length;n++)if(t[n].getBindingContext()){var r=t[n].getBindingContext().getObject();r.status===!1&&jQuery("#"+t[n].getId()).css({"text-decoration":"line-through",color:"#e22525"})}}}),this._oPluginManagerTable.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{i18n>pluginManagement_enabledColumn}"}),template:new sap.ui.commons.CheckBox({change:[this._onCheckBoxChange,this]}).bindProperty("checked","checked"),sortProperty:"checked",width:"50px",hAlign:"Left"})),this._oPluginManagerTable.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{i18n>pluginManagement_pluginNameColumn}"}),template:new sap.ui.commons.TextView({text:{path:"pluginName",formatter:function(e){return e}},visible:{path:"status",formatter:function(e){return 1==e?(jQuery("#"+this.getParent().getId()).css({"text-decoration":"inherit",color:"#333333"}),!0):(0==e&&jQuery("#"+this.getParent().getId()).css({"text-decoration":"line-through",color:"#e22525"}),!0)}}}),sortProperty:"pluginName",filterProperty:"pluginName",width:"150px"})),this._oPluginManagerTable.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{i18n>pluginManagement_pluginDescriptionColumn}"}),template:(new sap.ui.commons.TextView).bindProperty("text","pluginDescription"),sortProperty:"pluginDescription",filterProperty:"pluginDescription",width:"480px"})),this._oPluginManagerTable.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{i18n>pluginManagement_pluginVersionColumn}"}),template:(new sap.ui.commons.TextView).bindProperty("text","pluginVersion"),sortProperty:"pluginVersion",filterProperty:"pluginVersion",width:"100px"})),this._oPluginManagerTable.setSelectionBehavior(sap.ui.table.SelectionBehavior.RowOnly),this._oDetailsTextView=new sap.ui.commons.TextView({text:"",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}).addStyleClass("detailsView"),this._oRemoveAllButton=new sap.ui.commons.Button("removeBtn",{enabled:!1,text:"{i18n>pluginManagement_removeAllButton}",tooltip:"{i18n>pluginManagement_removeAllButtonToolTip}",press:[this._removeAllPlugins,this],layoutData:new sap.ui.layout.GridData({span:"L2 M2 S4"})}),this._oNoteTextView=new sap.ui.commons.TextView({wrapping:!1,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}).addStyleClass("alignControlToTheLeft noteView"),e.addContent(r),this._emptyGrid=new sap.ui.layout.Grid({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),content:[new sap.ui.commons.TextView({text:"",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}),new sap.ui.commons.TextView({text:"",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}),new sap.ui.commons.TextView({text:"",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}),new sap.ui.commons.TextView({text:"",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}),new sap.ui.commons.TextView({text:"",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})})]});var i=new sap.ui.layout.Grid("MainPluginManagerGrid",{layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),content:[e,this._emptyGrid]});return this.addi18nBundleToGrid(i),i},_removeAllPlugins:function(){var e=this,t={plugins:[]};this.context.service.usernotification.confirm(e.context.i18n.getText("i18n","pluginManagement_removeAllMsg")).then(function(n){return n.bResult?e.context.service.preferences.set(t,"config.json").then(function(){for(var t=e._oRepositoryDropdownBox.getItems(),n=0;n<t.length;n++){var r=t[n].getBindingContext().getObject().plugins;if(r)for(var i=0;i<r.length;i++)r[i].checked=!1}return e._oPluginManagerTable.rerender(),e._updateButtonEnabledStatus("removeBtn",!1),e._checkedComboBoxsCount=0,e._updateRepositoryModel().done()}):void 0})},_onCheckBoxChange:function(e){var t=e.getSource();if(t.getChecked()){this._checkedComboBoxsCount++;var n=t.getBindingContext().getObject(),r=n.pluginName;if(void 0===r)return this.context.service.usernotification.alert(this.context.i18n.getText("i18n","pluginManagement_NotValidPluginMsg")).done(),t.setChecked(!1),this._checkedComboBoxsCount--,void 0;var i=this.context.service.usagemonitoring;i.report("pluginManager","OptionalPluginChecked",r).done();var o=sap.ui.getCore().byId(this._oRepositoryDropdownBox.getSelectedItemId()),a=o.getBindingContext().getObject(),s=a.repositoryUrl+n.pluginPath,u=!1;if(this.aRegisteredPlugins){for(var c=0,l=this.aRegisteredPlugins.plugins.length;l>c;c++){var p=this.aRegisteredPlugins.plugins[c];if(-1!==p.indexOf(s,p.length-s.length)){u=!0;break}}u||this._handleCheckPluginRegistry(r,t)}else this._handleCheckPluginRegistry(r,t)}else this._checkedComboBoxsCount--},_handleCheckPluginRegistry:function(e,t){var n=this;require(["sap/watt/core/PluginRegistry"],function(r){var i=r._mRegistry;for(var o in i){var a=i[o];if(a.getMetadata().name===e){n.context.service.usernotification.alert(n.context.i18n.getText("i18n","pluginManagement_alreadyEnabledMsg")).done(),t.setChecked(!1),n._checkedComboBoxsCount--;break}}})},_onRowSelectionchange:function(e){if(e.getSource().getSelectedIndex()>-1){var t=e.getParameter("rowContext");t&&(t.getObject().status?this._oDetailsTextView.setText(""):this._oDetailsTextView.setText(this.context.i18n.getText("i18n","pluginManagement_PluginNotLoaded",t.getObject().pluginName)))}else this._oDetailsTextView.setText("")},updatePreferences:function(){for(var e=[],t=this.oMainGrid.getModel(),n=this,r=0,i=t.oData.repositories.length;i>r;r++){var o=t.oData.repositories[r];if(o.plugins)for(var a=0,s=o.plugins.length;s>a;a++){var u=o.plugins[a];u.checked&&e.push(o.repositoryUrl+u.pluginPath)}}var c={plugins:e};return n._oPreferencePersistencyService.set(c,"config.json").then(function(){n.context.service.log.info("Plugin Management",n.context.i18n.getText("i18n","pluginManagement_UpdatePlugins"),["user"]).done(),n._bIsSavedButNotLoaded=!0,n._checkedComboBoxsCount>0?n._updateButtonEnabledStatus("removeBtn",!0):n._updateButtonEnabledStatus("removeBtn",!1)})},_onChangeReposirory:function(e){this._oPluginManagerTable.clearSelection(),e.getParameter("isFirstTime")||this._oDetailsTextView.setText("");var t=e.getParameter("selectedItem").getBindingContext().getObject().plugins,n=new sap.ui.model.json.JSONModel;n.setData({plugins:t}),this._oPluginManagerTable.setModel(n),this._oPluginManagerTable.bindRows("/plugins")},_getPluginsByRepository:function(e){var t=this;""===e&&(e=this.oRepositoryModel.getData().modelData[0].sRepositoryUrl);var n="/catalog.json";e&&e.indexOf("plugins/pluginrepository")>-1&&(sap.watt.getEnv("internal")?n="/cataloginternal.json":sap.watt.getEnv("beta_features")&&(n="/catalogbeta.json"));var r=this._serviceCall("get_catalog",e+n,"GET",null);return r.then(function(n){if("string"==typeof n)try{n=JSON.parse(n)}catch(r){return t._handleFailedLoadRepository(r,e)}return n.plugins?t._getPluginsData(n,e):Q([])},function(n){return t._handleFailedLoadRepository(n,e)})},_handleFailedLoadRepository:function(e,t){console.log(e);var n=this.context.i18n.getText("i18n","pluginManagement_FailedLoadRepository",t);this.context.service.log.error("Plugin Management",n,["user"]).done();var r=this._oDetailsTextView.getText();return r&&(n=r+"\n"+n),this._oDetailsTextView.setText(n),Q([])},_serviceCall:function(e,t,n,r){var i=Q.defer();return $.ajax({type:n,url:t,data:JSON.stringify(r),headers:{Accept:"*/*","Content-Type":"application/json"}}).then(function(e){i.resolve(e)}).fail(function(t){console.log("error:"+t.responseText),i.reject({action:e,status:t.status,info:t.responseText})}),i.promise},_isPluginAllreadyRegistered:function(e,t){if(this.aRegisteredPlugins)for(var n=t+e,r=0;r<this.aRegisteredPlugins.plugins.length;r++)if(-1!==this.aRegisteredPlugins.plugins[r].indexOf(n))return this._bFoundRegisteredPlugin=!0,!0;return!1},_getPluginsData:function(e,t){var n=this;return Q.sap.require("sap/watt/core/PluginRegistry").then(function(r){for(var i=r._mRegistry,o={plugins:[],catalogName:e.name},a=e.plugins,s=0;s<a.length;s++){var u=n._isPluginAllreadyRegistered(a[s].path,t),c=!0,l=t+a[s].path;if(u&&!n._bIsSavedButNotLoaded){n._checkedComboBoxsCount++,c=!1;for(var p in i)if(-1!==p.indexOf(l,p.length-l.length)){c=!0;break}c||n._invalidPlugins.push(l)}else n._invalidPlugins.indexOf(l)>-1&&(c=!1);var f={pluginName:a[s].name,pluginDescription:a[s].description,pluginPath:a[s].path,pluginVersion:a[s].version,checked:u,status:c};o.plugins.push(f)}return o})},_updateRepositoryModel:function(){var e=this;return this._oPreferencePersistencyService.get("config.json").then(function(t){return e.aRegisteredPlugins=t,e._createModel().then(function(){return e.updatePreferences()})},function(){return e._createModel()})},_createModel:function(){for(var e=[],t=[],n=0;n<this._aRepositoryList.length;n++){var r=this._aRepositoryList[n].url,i={repositoryName:this._aRepositoryList[n].name,catalogName:"",repositoryDescription:this._aRepositoryList[n].description,repositoryUrl:r,plugins:[]},o=this._getPluginsByRepository(i.repositoryUrl);t.push(o),e.push(i)}var a=this;return Q.all(t).spread(function(){for(var t=0;t<arguments.length;t++)e[t].plugins=arguments[t].plugins,e[t].catalogName=arguments[t].catalogName;var n=new sap.ui.model.json.JSONModel;n.setData({repositories:e}),a.oMainGrid.setModel(n)})},_sortByPluginName:function(e,t){var n=e.Name.toLowerCase(),r=t.Name.toLowerCase();
return r>n?-1:n>r?1:0},_getPluginsForRep:function(e){var t=this;return this.context.service.filesystem.documentProvider.getDocument(e).then(function(n){if(n)return n.getCurrentMetadata(!0).then(function(n){if(n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o.folder||"plugin.json"!==o.name||r.push(t.context.service.filesystem.documentProvider.getDocument(o.path))}return Q.all(r)}throw new Error("The content of the selected repository url - "+e+" has not been retrieved.")});throw new Error("The selected repository url "+e+" wasn't found.")})},_updateButtonEnabledStatus:function(e,t){var n=sap.ui.getCore().byId(e);n.setEnabled(t)},getOptionalPluginsUI:function(){this.oMainGrid=sap.ui.getCore().byId("MainPluginManagerGrid"),void 0===this.oMainGrid&&(this.oMainGrid=this._createOptionalGrid());var e=this;return this._handleDestinations().then(function(){return e.oMainGrid})},_handleDestinations:function(){var e=this,t=this._oRepositoryDropdownBox.getSelectedItemId(),n="";n="local_hcproxy"===sap.watt.getEnv("server_type")?"/webide/plugins/pluginrepository":sap.watt.getEnv("context_root")+"plugins/pluginrepository";var r={name:"SAPPlugins",description:"SAP Plugins",url:n},i=sap.ui.getCore().byId("PluginManagerGrid");return i.addContent(e._oProgressIndicator),e._oProgressIndicator.startAnimation(),this.context.service.destination.getDestinations("plugin_repository").then(function(t){return e._aRepositoryList=[r],t&&t.length>0&&(e._aRepositoryList=e._aRepositoryList.concat(t)),e._aRepositoryList.length>0?(e._bFoundRegisteredPlugin=!1,e.oMainGrid.removeContent(e._emptyGrid),e._oNoteTextView.setText(e.context.i18n.getText("i18n","pluginManagement_noteMsg")),i.addContent(e._oPluginManagerTable),i.addContent(e._oRemoveAllButton),i.addContent(e._oDetailsTextView),i.addContent(e._oNoteTextView),e._updateRepositoryModel().then(function(){e._updateButtonEnabledStatus("removeBtn",e._bFoundRegisteredPlugin);var t=e._oRepositoryDropdownBox.getItems()[0];e._oRepositoryDropdownBox.setSelectedItemId(t.sId),e._oRepositoryDropdownBox.fireEvent("change",{selectedItem:t,isFirstTime:!0})})):(i.removeContent(e._oPluginManagerTable),i.removeContent(e._oDetailsTextView),e.oMainGrid.addContent(e._emptyGrid),e._oRepositoryDropdownBox.destroyItems(),e._oNoteTextView.setText(e.context.i18n.getText("i18n","pluginManagement_NoReposirotiesNote")),i.addContent(e._oNoteTextView),e._updateButtonEnabledStatus("removeBtn",!1),void 0)}).fail(function(t){e.context.service.usernotification.alert(t.message).done()}).fin(function(){if(e._oProgressIndicator.stopAnimation(),t){var n=sap.ui.getCore().byId(t);e._oRepositoryDropdownBox.setSelectedItemId(t),e._oRepositoryDropdownBox.fireChange({selectedItem:n})}})},removePluginsFromUserPreferences:function(e){if(this._oPreferencePersistencyService){var t=this;return this._oPreferencePersistencyService.get("config.json").then(function(n){var r=t._removePluginsFromConfig(e,n);return t._oPreferencePersistencyService.set(r,"config.json")})}},_removePluginsFromConfig:function(e,t){if(e&&e.length>0&&t&&t.plugins){for(var n={plugins:[]},r=0;r<t.plugins.length;r++){for(var i=!1,o=0;o<e.length;o++)if(e[o].indexOf(t.plugins[r])>-1){i=!0;break}i||n.plugins.push(t.plugins[r])}return n}return t},getPluginFile:function(e,t,n){var r=Q.defer(),i=this,o=null,a=e,s=e.indexOf("/");s>-1&&(a=a.substring(0,s));var u=t.substring(t.indexOf("/"));if(o=require.toUrl(a+u),o||r.reject(new Error(i.context.i18n.getText("i18n","pluginManagement_PluginNotFound",[a]))),n){var c=new XMLHttpRequest;c.open("GET",o),c.responseType="blob",c.onload=function(){if(4===this.readyState&&this.status<300)r.resolve(this.response);else{if(404!==this.status)throw new Error(i.context.i18n.getText("i18n","pluginManagement_unexpectedErrorMsg"));r.reject(new Error(i.context.i18n.getText("i18n","pluginManagement_ResourceNotFound",[t,a])))}},c.send()}else i._ajax(o).then(function(e){r.resolve(e)},function(e){if(404!==e.status)throw new Error(i.context.i18n.getText("i18n","pluginManagement_unexpectedErrorMsg"));r.reject(new Error(i.context.i18n.getText("i18n","pluginManagement_ResourceNotFound",[t,a])))});return r.promise},getPluginPath:function(e){return Q.sap.require("sap/watt/core/PluginRegistry").then(function(t){for(var n in t._mRegistry){var r=t._mRegistry[n];if(r.getMetadata().name===e){var i=URI(r.getMetadata().baseURI).path();return i}}})},getPluginFileUrl:function(e,t){var n=Q.defer(),r=this;return require(["sap/watt/core/PluginRegistry"],function(i){var o=null,a=e,s=e.indexOf("/");s>-1&&(a=a.substring(0,s));for(var u in i._mRegistry){var c=i._mRegistry[u];if(c.getMetadata().name===a){o=c.getMetadata().baseURI,o=t?o.substring(0,o.lastIndexOf("/"))+"/"+t:o.substring(0,o.lastIndexOf("/"))+"/";break}}o?n.resolve(o):n.reject(new Error(r.context.i18n.getText("i18n","pluginManagement_PluginNotFound",[a])))}),n.promise},_ajax:function(e){return jQuery.ajax({url:e,dataType:"text"})},addi18nBundleToGrid:function(e){this.context.i18n&&this.context.i18n.applyTo(e)},_createAvailableGrid:function(){var e=this,t=new sap.ui.layout.Grid({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}),n=new sap.ui.commons.SearchField("searchField",{enableListSuggest:!1,enableClear:!0,startSuggestion:0,width:"100%",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),suggest:function(t){e._updateTable(t.getParameter("value"))}}).addStyleClass("searchField"),r=new sap.ui.table.Table("pluginTable",{selectionMode:sap.ui.table.SelectionMode.None,visibleRowCount:20,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}).addStyleClass("pluginTable");r.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{i18n>pluginManagement_pluginNameColumn}"}),template:(new sap.ui.commons.TextView).bindProperty("text","PluginName"),sortProperty:"PluginName",filterProperty:"PluginName",width:"200px"})),r.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{i18n>pluginManagement_pluginLocationColumn}"}),template:(new sap.ui.commons.TextView).bindProperty("text","PluginLocation"),sortProperty:"PluginLocation",filterProperty:"PluginLocation",width:"500px"})),t.addContent(n),t.addContent(r);var i=new sap.ui.layout.Grid("AvailablePluginsGrid",{layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),content:[t]});return this.addi18nBundleToGrid(i),i},_updateTable:function(e){var t=this._filterPluginList(e),n=this._getAvailablePluginsData(t),r=sap.ui.getCore().byId("pluginTable"),i=r.getModel();i.setData({modelData:n}),i.refresh()},_filterPluginList:function(e){var t=[];for(var n in this._pluginList){var r=this._pluginList[n]._oMetadata.name;r.indexOf(e)>-1&&t.push(this._pluginList[n])}return t},_getAvailablePluginsData:function(e){var t=new Array;for(var n in e){var r={PluginName:e[n]._oMetadata.name,PluginLocation:e[n]._oMetadata.baseURI};t.push(r)}return t},_updatePluginsModel:function(e){var t=new sap.ui.model.json.JSONModel,n=this._getAvailablePluginsData(e);t.setData({modelData:n});var r=sap.ui.getCore().byId("pluginTable");r.setModel(t),r.bindRows("/modelData")},getAvailablePluginsUI:function(){var e=this;return Q.sap.require("sap/watt/core/PluginRegistry").then(function(t){var n=e.context.service.usagemonitoring;n.report("pluginManager","AvailablePluginsOpened").done();var r=t._mRegistry;e._pluginList=r,sap.watt.includeCSS(require.toUrl("sap.watt.platform.pluginmanager/css/pluginManager.css"));var i=sap.ui.getCore().byId("AvailablePluginsGrid");return void 0===i&&(i=e._createAvailableGrid()),e._updatePluginsModel(e._pluginList),jQuery("#AvailablePluginsGrid").focusout(function(){jQuery("#searchField-tf-input").focus()}),i})}}}),define("sap.watt.platform.pluginmanager/service/OptionalPlugins",["sap/watt/common/plugin/platform/service/ui/AbstractConfig"],function(e){"use strict";return e.extend("sap.watt.platform.plugin.pluginmanager.service.OptionalPlugins",{getUserPreferenceContent:function(){var e=this;return this._oUI?this._oUI:this.context.service.pluginmanagement.getOptionalPluginsUI().then(function(t){return e._oUI=t,t})},saveUserPreference:function(){return this.context.service.pluginmanagement.updatePreferences()}})}),define("sap.watt.platform.pluginmanager/service/AvailablePlugins",["sap/watt/common/plugin/platform/service/ui/AbstractConfig"],function(e){"use strict";return e.extend("sap.watt.platform.plugin.pluginmanager.service.AvailablePlugins",{getUserPreferenceContent:function(){var e=this;return this._oUI?this._oUI:this.context.service.pluginmanagement.getAvailablePluginsUI().then(function(t){return e._oUI=t,t})}})}),define("sap.watt.platform.pluginmanager/service/DisplayInvalidPlugins",[],function(){"use strict";return{_aPluginToBeRemovedFromUserPrefs:null,onAfterPluginsStarted:function(e){sap.watt.includeCSS(require.toUrl("sap.watt.platform.pluginmanager/css/pluginManager.css"));var t=e.params.params;this._aPluginToBeRemovedFromUserPrefs=[];for(var n=0;n<t.length;n++)t[n].message=t[n].reason.message,this._addPluginToBeRemoved(t[n]);if(t.length>0){var r=sap.ui.getCore().byId("PluginManagerDialog");r||(r=this._createDialog());var i=new sap.ui.model.json.JSONModel;i.setData({plugins:t}),this._oPluginManagerTable.setModel(i),this._oPluginManagerTable.bindRows("/plugins"),r.open()}},_addPluginToBeRemoved:function(e){e.name&&e.message&&(e.message.indexOf("is already implemented")>-1||e.message.indexOf("is already registered")>-1)&&e.baseURI.indexOf("/plugins/pluginrepository")>-1&&this._aPluginToBeRemovedFromUserPrefs.push(e.baseURI)},_createDialog:function(){sap.watt.includeCSS(require.toUrl("sap.watt.ideplatform.template/css/wizard.css"));var e=this;this._oPluginManagerTable=new sap.ui.table.Table({selectionMode:sap.ui.table.SelectionMode.Single,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}),this._oPluginManagerTable.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{i18n>pluginManagement_pluginNameColumn}"}),template:new sap.ui.commons.TextView({text:{path:"name",formatter:function(t){return t?t:e.context.i18n.getText("i18n","pluginManagement_unavailableProperty")}}}),sortProperty:"pluginDescription",filterProperty:"pluginDescription"})),this._oPluginManagerTable.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{i18n>pluginManagement_pluginDescriptionColumn}"}),template:new sap.ui.commons.TextView({text:{path:"description",formatter:function(t){return t?t:e.context.i18n.getText("i18n","pluginManagement_unavailableProperty")}}}),sortProperty:"pluginDescription",filterProperty:"pluginDescription"})),this._oPluginManagerTable.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{i18n>pluginManagement_pluginReasonColumn}"}),template:(new sap.ui.commons.TextView).bindProperty("text","message"),sortProperty:"pluginDescription",filterProperty:"pluginDescription"})),this._oPluginManagerTable.setSelectionBehavior(sap.ui.table.SelectionBehavior.RowOnly);var t=new sap.ui.commons.Button({text:"{i18n>pluginManagement_okButton}",tooltip:"{i18n>pluginManagement_okButton}",press:[this.closeDialog,this],layoutData:new sap.ui.layout.GridData({span:"L2 M3 S8"})}).addStyleClass("buttonWidth"),n=this.context.i18n.getText("i18n","pluginManagement_gotoLabel")+'<embed data-index="0">.',r=new sap.ui.commons.Link({text:this.context.i18n.getText("i18n","pluginManagement_gotoLink"),press:[this.gotoPreference,this],layoutData:new sap.ui.layout.GridData({span:"L2 M3 S8"})}).addStyleClass("linkStyle"),i=new sap.ui.commons.FormattedTextView({htmlText:n,controls:r}).addStyleClass("FTVstyle"),o=new sap.ui.commons.Dialog("PluginManagerDialog",{width:"70%",title:"{i18n>pluginManagement_managePluginTitle}",content:[this._oPluginManagerTable],buttons:[i,t],defaultButton:t,keepInWindow:!0,resizable:!1,modal:!0}).addStyleClass("dialogStyle");return this.addi18nBundleToDialog(o),o},gotoPreference:function(){this.closeDialog(),this.context.service.perspective.renderPerspective("userpreference").done()},addi18nBundleToDialog:function(e){this.context.i18n&&this.context.i18n.applyTo(e)},closeDialog:function(){var e=sap.ui.getCore().byId("PluginManagerDialog");void 0!==e&&(this._aPluginToBeRemovedFromUserPrefs&&this._aPluginToBeRemovedFromUserPrefs.length>0&&this.context.service.pluginmanagement.removePluginsFromUserPreferences(this._aPluginToBeRemovedFromUserPrefs).fail(function(e){console.log(e)}).done(),e.close())}}}),define("sap.watt.platform.feedback/command/Feedback",[],function(){"use strict";return{execute:function(){this.context.service.feedback.getFeedbackUI().then(function(e){e&&e.getController().openForm()}).done()},isAvailable:function(){return!0},isEnabled:function(){return!0}}}),define("sap.watt.platform.feedback/service/FeedbackMenuItem",[],function(){"use strict";return{init:function(){var e=this;this.oButton=new sap.ui.commons.Button({text:e.context.i18n.getText("i18n","feedback_button"),lite:!0,tooltip:"",press:function(){e.context.service.feedback.getFeedbackUI().then(function(e){e&&e.getController().openForm()}).done()}}),this.oButton.addStyleClass("feedbackButton")},configure:function(e){this._aStyles=e.styles},getContent:function(){if(this._isAvailable()){var e=this;return this.context.service.resource.includeStyles(this._aStyles).then(function(){return[e.oButton]})}return null},_isAvailable:function(){return"xs2"!==sap.watt.getEnv("server_type")}}}),define("sap.watt.platform.feedback/service/Feedback",[],function(){"use strict";return{getFeedbackUI:function(){var e=sap.ui.view({viewName:"sap.watt.platform.plugin.feedback.view.FeedbackForm",type:sap.ui.core.mvc.ViewType.JS,viewData:{service:this.context.service,context:this.context}});return e},sendFeedback:function(e,t,n){var r={texts:e,ratings:t,context:n},i=JSON.stringify(r);return Q.sap.ajax(sap.watt.getEnv("context_root")+"feedback",{data:i,type:"POST",contentType:"application/json"}).fail(function(e){throw e})}}}),define("sap.watt.platform.resource/service/Resource",[],function(){"use strict";return{_mIncludedStyles:{},_sDefaultStyleType:"css",_mIncludeStyleType:{css:function(e){var t=Q.defer();return jQuery.sap.includeStyleSheet(e,null,function(){t.resolve()},function(){t.reject(new Error("Could not load the CSS file from "+e))}),t.promise},less:function(){throw new Error("Less support is not yet implemented")}},includeStyles:function(e){var t=this,n=[];return jQuery.each(e,function(e,r){var i=require.toUrl(r.uri);if(!t._mIncludedStyles[i]){t._mIncludedStyles[i]=r;var o=r.type||t._sDefaultStyleType;n.push(t._mIncludeStyleType[o].call(t,i))}}),Q.all(n)}}}),define("sap.watt.platform.resourceindex/command/ResourceList",[],function(){"use strict";return{_RESULTSFOUND:"Results found: ",_oTable:null,_oLabel:null,_oDialog:null,_oOkButton:null,_bArrowUpPressed:!1,_bArrowDownPressed:!1,_iSelectionIndex:0,_oLastOpenedTemplate:null,_oSorter:null,init:function(){var e=this;this._RESULTSFOUND=this.context.i18n.getText("i18n","results_found"),this._oInput=new sap.ui.commons.TextField({liveChange:[e._checkInput,e]}).addStyleClass("resourceListIF"),this._oOkButton=new sap.ui.commons.Button({text:this.context.i18n.getText("i18n","ok"),press:[e._closeDialog,e]}),this._oCancelButton=new sap.ui.commons.Button({text:this.context.i18n.getText("i18n","cancel"),press:[e._cancelDialog,e]}),this._oTable=new sap.ui.table.Table({selectionMode:sap.ui.table.SelectionMode.Single,selectionBehavior:sap.ui.table.SelectionBehavior.Row,selectedIndex:0,columnHeaderVisible:!1,navigationMode:sap.ui.table.NavigationMode.Scrollbar,columns:[{template:(new sap.ui.commons.TextView).bindProperty("text","name"),width:"25%"},{template:(new sap.ui.commons.TextView).bindProperty("text","parentPath"),width:"75%"},{template:(new sap.ui.commons.TextView).bindProperty("text","path"),visible:!1},{template:(new sap.ui.commons.TextView).bindProperty("text","lastOpened"),visible:!1}]}).attachEvent("rowSelectionChange",e._rowSelection,e).attachBrowserEvent("dblclick",function(t){e._cellClick(t)},e),this._oLabel=new sap.ui.commons.Label,this._oLabel.setText(""),this._oDialog=new sap.ui.commons.Dialog("ResourceList",{title:this.context.i18n.getText("i18n","resource_list_title"),buttons:[this._oOkButton,this._oCancelButton],content:[this._oInput,this._oTable,this._oLabel],defaultButton:this._oOkButton,modal:!0,initialFocus:this._oInput}).addStyleClass("resourceListDLG").attachBrowserEvent("keydown",function(e){this._handleKeyboardEvents(e)},this)},_handleKeyboardEvents:function(e){switch(e.keyCode){case 13:-1!==this._oTable.getSelectedIndex()&&this._openDocument();break;case 37:this._bArrowUpPressed=!1,this._bArrowDownPressed=!1;break;case 39:this._bArrowUpPressed=!1,this._bArrowDownPressed=!1;break;case 38:this._bArrowUpPressed=!0,this._bArrowDownPressed=!1;break;case 40:this._bArrowUpPressed=!1,this._bArrowDownPressed=!0}"input"!==e.target.localName&&this._checkInput(e)},_openDocument:function(){var e=this;this._oTable._getRowCount()<=0||this.context.service.filesystem.documentProvider.getDocument(this._getFullName(this._oTable)).then(function(t){return e.context.service.resourceindex.resort(t).then(function(){return e.context.service.document.open(t).then(function(){e.context.service.repositorybrowser.setSelectionToCurrentDocument().done(),e._oDialog.close()})})}).fail(function(t){t&&e.context.service.log.error("Open Resource",t.message,["system"]).done()}).done()},_rowSelection:function(e){this._oTable.isIndexSelected(e.getParameters().rowIndex)&&(this._sFullName=this._getFullName(this._oTable))},_getFullName:function(e){var t=e.getSelectedIndex()-e.getFirstVisibleRow();if(t>-1){var n=e.getRows()[t],r=n.getCells()[0].getText(),i=n.getCells()[1].getText();return i+"/"+r}return this._sFullName},_cellClick:function(){this._sFullName&&this._openDocument()},_checkInput:function(){var e=this._oTable.getSelectedIndex(),t=[],n=this._oInput.getLiveValue();if(n&&n.length>0){var r=new sap.ui.model.Filter("path",sap.ui.model.FilterOperator.Contains,n);t.push(r)}var i=this._oTable.getBinding("rows");i&&i.filter(t,"Application");var o=this._oTable._getRowCount()-1;this._bArrowUpPressed?this._iSelectionIndex=0===e?e:e-1:this._bArrowDownPressed&&(this._iSelectionIndex=e===o?e:e+1),o<=this._iSelectionIndex?this._iSelectionIndex=o:o>0&&-1===this._iSelectionIndex&&(this._iSelectionIndex=0),this._iSelectionIndex>9&&this._oTable.setFirstVisibleRow(this._iSelectionIndex-9),this._oTable.setSelectedIndex(this._iSelectionIndex),this._oLabel.setText(0!==n.length?this._RESULTSFOUND+" "+(o+1):"")},execute:function(){var e=this.context.service;e.usagemonitoring.startPerf("search_resource","open").done();var t=this;t._oTable.setBusy(!0),t._oInput.setValue(""),t._oDialog.open(),e.resourceindex.getMetadata().then(function(n){var r=new sap.ui.model.json.JSONModel;r.setData(n),t._oDialog.setModel(r),t._oTable.bindRows("/filesIndex"),t._iSelectionIndex=n.filesIndex.length>0?0:-1,t._oTable.setSelectedIndex(t._iSelectionIndex),t._oTable.setBusy(!1),t._oLabel.setText(""),e.usagemonitoring.report("search_resource","open","open").done()}).done()},isAvailable:function(){return!0},isEnabled:function(){return this.context.service.perspective.getCurrentPerspective().then(function(e){return"development"===e})},_closeDialog:function(){this._openDocument()},_cancelDialog:function(){this._oDialog.close()}}}),define("sap.watt.platform.resourceindex/service/Index",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{_mFiles:{filesIndex:[]},_bFinished:!1,_oMetadataFilterOptions:{hidden:!1},getMetadata:function(){var e=this;return this._bFinished?this._mFiles:e.context.service.filesystem.documentProvider.getRoot().then(function(t){return e._startIndexing(t).then(function(){return e._bFinished=!0,e._mFiles})})},_startIndexing:function(t){var n=this,r={};return t.getFolderContent().then(function(e){for(var t=[],i=0;i<e.length;i++){var o=e[i];t.push(n._getProjectMetadata(o,r))}return Q.all(t)}).then(function(){n._mFiles.filesIndex=e.values(r)})},_getProjectMetadata:function(e,t){return e.getCurrentMetadata(!0,this._oMetadataFilterOptions).then(function(e){for(var n=0;n<e.length;n++){var r=e[n];r.folder||(t[r.path]=r)}})},resort:function(e){for(var t=e.getEntity().getName(),n=e.getEntity().getParentPath(),r=0;r<this._mFiles.filesIndex.length;r++){var i=this._mFiles.filesIndex[r];if(i.name===t&&i.parentPath===n){var o=this._mFiles.filesIndex[r];o.lastOpened=(new Date).getTime(),this._mFiles.filesIndex.splice(r,1),this._mFiles.filesIndex.splice(0,0,o);break}}},onDocumentDeleted:function(t){for(var n=t.params.document.getEntity(),r=n.getFullPath(),i=r+"/",o={},a=0;a<this._mFiles.filesIndex.length;a++){var s=this._mFiles.filesIndex[a];o[s.path]=s}for(var u=0;u<this._mFiles.filesIndex.length;u++){var c=this._mFiles.filesIndex[u].path;(c===r||0===c.indexOf(i))&&delete o[c]}this._mFiles.filesIndex=e.values(o)},onDocumentCreated:function(e){var t=e.params.document,n=t.getEntity();if(n.isFile())this._mFiles.filesIndex.push({name:n.getName(),parentPath:n.getParentPath(),path:n.getFullPath()});else{var r=this;t.getCurrentMetadata(!0,this._oMetadataFilterOptions).then(function(e){r._mFiles.filesIndex=r._mFiles.filesIndex.concat(e)}).done()}},onHiddenChanged:function(){this._mFiles.filesIndex=[],this._bFinished=!1}}}),define("sap.watt.platform.externalcommand/ui/CommandsConfirmationDialog",["sap/watt/lib/lodash/lodash"],function(e){var t=null,n=function(e){var t=[];return jQuery.each(e,function(e,n){t.push({parameter:e,value:n})}),t},r=function(t,n){return jQuery.each(n,function(n,r){e.isString(r)&&(r=r.trim(),n=n.trim(),r='"'+r+'"',t=t.replace("{"+n+"}",r))}),t=t.split("{").join("<"),t=t.split("}").join(">")},i=function(e,t){var r=new sap.ui.commons.Panel({expandable:!0,collapsed:!0,borderDesign:sap.ui.commons.enums.BorderDesign.None,text:t.i18n.getText("i18n","More_Details"),layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}),i=new sap.ui.table.Table({visibleRowCount:3,selectionMode:sap.ui.table.SelectionMode.None,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),noData:t.i18n.getText("i18n","No_Params")}),o=new sap.ui.commons.Label({text:"Key",design:"Bold"});i.addColumn(new sap.ui.table.Column({label:o,template:(new sap.ui.commons.TextView).bindProperty("text","parameter"),width:"50%"})),i.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"Value",design:"Bold"}),template:(new sap.ui.commons.TextView).bindProperty("text","value"),width:"50%"}));var a=n(e.getParameters()),s=new sap.ui.model.json.JSONModel;return s.setData({modelData:a}),i.setModel(s),i.bindRows("/modelData"),r.addContent(i),r},o=function(e,t){var n=0,o=new sap.ui.layout.Grid({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),vSpacing:0});for(n=0;n<t.length;n++)o.addContent(new sap.ui.commons.TextArea({value:r(t[n]._mConfig.description,t[n].getParameters()),textAlign:"Left",height:"65px",editable:!1,wrapping:sap.ui.core.Wrapping.Soft,layoutData:new sap.ui.layout.GridData({span:"L10 M12 S12",linebreak:!0})}).addStyleClass("TextArea")),o.addContent(i(t[n],e)),o.addContent(new sap.ui.commons.HorizontalDivider({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}).addStyleClass("HorizontalDivider"));return o},a=function(e,n){t=Q.defer(),sap.watt.includeCSS(require.toUrl("sap.watt.platform.externalcommand/ui/css/Dialog.css"));var r=new sap.ui.commons.Dialog({title:n.i18n.getText("i18n","Confirmation_dialog_title"),resizable:!0,width:"50%",modal:!0,keepInWindow:!0}),i=new sap.ui.commons.Label({text:1===e.length?n.i18n.getText("i18n","Single_Heading"):n.i18n.getText("i18n","Multi_Heading"),textAlign:"Left",design:sap.ui.commons.LabelDesign.Bold,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}).addStyleClass("commandHeadingLabel");r.addContent(i);var a=o(n,e),s=new sap.ui.layout.Grid({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),content:[i,a],vSpacing:0});return r.addContent(s),r.addButton(new sap.ui.commons.Button({text:n.i18n.getText("i18n","OK"),press:function(){r.close(),t.resolve({sResult:"YES",bResult:!0})}})),r.addButton(new sap.ui.commons.Button({text:n.i18n.getText("i18n","Cancel"),press:function(){r.close(),t.resolve({sResult:"NO",bResult:!1})}})),r.open(),t.promise};return{open:a}}),define("sap.watt.platform.externalcommand/service/ExternalCommand",["sap/watt/core/Proxy","sap.watt.platform.externalcommand/ui/CommandsConfirmationDialog"],function(e,t){var n=function(e,t,n,r){this._sId=e,this._mConfig=t,this._oContext=n,this._oProxy=r},r={"sap.watt.saptoolsets.fiori.common.fioriexternalcommands/extendproject/ExtendProject":!0,"sap.watt.ideplatform.externalcommands/cloneandopen/CloneAndOpen":!0};n.prototype.execute=function(e){return this._oProxy.execute(e).then(function(e){return Q(e)}).fail(function(e){console.log(e)})},n.prototype.getCommandName=function(){return this._mConfig.id},n.prototype.getDescription=function(){var e=n._mInputParams[this._mConfig.id];return this._mConfig.description+"\n"+i.i18n.getText("i18n","ExternalCommand_Command_parameters")+"\n"+JSON.stringify(e,null,2)+"\n"},n.prototype.getParameters=function(){return n._mInputParams[this._mConfig.id]},n._mExternalCommands={},n._mInputParams=null;var i,o="NO";n.getCommandById=function(e){return this._mExternalCommands[e]},n.register=function(t,r,i){if(!this._mExternalCommands[t]){var o={id:null,parameters:null};"string"==typeof r?o.externalCommand=r:o=jQuery.extend(this._mConfig,r);var a=this;if(o.externalCommand instanceof e){var s=new n(t,o,i,o.externalCommand);return a._mExternalCommands[t]=s,s}throw new Error(i.i18n.getText("i18n","ExternalCommand_instance_of_Proxy"))}i.service.log.error("ExternalCommand",t+" "+i.i18n.getText("i18n","ExternalCommand_already_Registered"),["user"]).done()};var a=function(e,t){if(e<t.length){var r=n._mExternalCommands[t[e]];if(r){console.log(i.i18n.getText("i18n","ExternalCommand_exe",[t[e]])),i.service.log.info(i.i18n.getText("i18n","ExternalCommand_title"),i.i18n.getText("i18n","ExternalCommand_exe",[t[e]]),["user"]).done(),i.service.usernotification.liteInfo(i.i18n.getText("i18n","ExternalCommand_exe",[t[e]])).done();var o=n._mInputParams[t[e]];return r.execute(o).then(function(){return console.log(i.i18n.getText("i18n","ExternalCommand_finish",[t[e]])),i.service.log.info(i.i18n.getText("i18n","ExternalCommand_title"),i.i18n.getText("i18n","ExternalCommand_finish",[t[e]]),["user"]).done(),i.service.usernotification.liteInfo(i.i18n.getText("i18n","ExternalCommand_finish",[t[e]])).done(),a(e+1,t)})}return a(e+1,t)}return n._mInputParams=null,Q()},s=function(){var e=window.location.hash.slice(1);return c(),e},u=function(e){var r=[],a=0;for(a=0;a<e.length;a++)n._mExternalCommands[e[a]]&&r.push(n._mExternalCommands[e[a]]);return 0===r.length?Q({sResult:o,bResult:o}):t.open(r,i).then(function(e){return e})},c=function(){var e=window.location.href,t=window.location.href.indexOf("#");-1!=t&&(e=e.substring(0,t)),history.replaceState("",document.title,e),history.pushState("",document.title,e)},l=function(e){return i.service.perspective.getCurrentPerspective().then(function(t){return"development"===t?a(0,e):i.service.perspective.renderPerspective("development").then(function(){return a(0,e)})})},p=function(e){var t=0;return jQuery.each(e,function(e,i){var o=n._mExternalCommands[i];o&&o._mConfig&&o._mConfig.externalCommand&&r[o._mConfig.externalCommand._sName]===!0&&t++}),t===e.length},f=function(e){if(e){var t=decodeURIComponent(e);try{n._mInputParams=JSON.parse(t)}catch(r){return i.service.log.info(i.i18n.getText("i18n","ExternalCommand_title"),i.i18n.getText("i18n","ExternalCommand_Illegal"),["user"]).done(),console.log(i.i18n.getText("i18n","ExternalCommand_Illegal")+r),void 0}var a=Object.keys(n._mInputParams);p(a)?l(a).done():u(a).then(function(e){return e.sResult===o?Q():l(a)}).done()}};return{onAfterStarted:function(){var e=s();e&&f(e),$(window).on("hashchange",function(){var e=s();e&&f(e)})},configure:function(e){var t=this;i=t.context,jQuery.each(e.externalCommands,function(e,r){n.register(r.id,r,t.context)})},getExternalCommands:function(){return n._mExternalCommands}}}),define("sap.watt.platform.odataprovider/service/ODataProvider",{_getSchemas:function(e){return e&&e.dataServices&&e.dataServices.schema},_getSchema:function(e,t){for(var n,r=this._getSchemas(e)||[],i=0,o=r.length;o>i;i++)if(n=r[i],n.namespace===t)return n},_getEntitySets:function(e){for(var t,n,r=[],i=this._getSchemas(e)||[],o=0,a=i.length;a>o;o++){t=i[o].entityContainer||[];for(var s=0,u=t.length;u>s;s++)n=t[s],n.entitySet&&(r=r.concat(n.entitySet))}return r},_getEntityTypes:function(e,t){for(var n,r=[],i=this._getSchemas(e)||[],o=0,a=i.length;a>o;o++)n=i[o],n.namespace===t&&n.entityType&&(r=r.concat(n.entityType));return r},_extractNamespace:function(e){return e=e||"",e.substring(0,e.lastIndexOf("."))},_getAssociationSet:function(e,t){for(var n,r,i=this._extractNamespace(t),o=this._getSchema(e,i)||{},a=o.entityContainer||[],s=0,u=a.length;u>s;s++){n=a[s].associationSet||[];for(var c=0,l=n.length;l>c;c++)if(r=n[c],r.association===t)return r}},_getAssociation:function(e,t){for(var n,r=this._extractNamespace(t),i=t.split(r+".")[1],o=this._getSchema(e,r)||{},a=o.association||[],s=0,u=a.length;u>s;s++)if(n=o.association[s],n.name===i)return n},getMetadata:function(e,t){var n=Q.defer(),r={};t&&(r["sap-client"]=t);var i=new sap.ui.model.odata.ODataModel(e,!0,null,null,r,!1,!1,!0);return i.attachMetadataLoaded(function(e){n.resolve(e.getSource().getServiceMetadata())}),i.attachMetadataFailed(function(e){e.getParameters()&&e.getParameters().getParameters?n.reject(e.getParameters().getParameters()):n.reject(e.getParameters())}),n.promise},getMetadataFromWorkspace:function(e){var t=this;return this._index||(this._index=0),Q("string"==typeof e?this.context.service.filesystem.documentProvider.getDocument(e):e).then(function(e){return e.getContent().then(function(e){return t.validateMetadata(e)})})},validateMetadata:function(e){jQuery.sap.require("sap.ui.core.util.MockServer");var t=this,n="/SERVICEFROMMETADATA"+this._index++ +"/",r=new sap.ui.core.util.MockServer({rootUri:n,requests:[{method:"GET",path:new RegExp("\\$metadata"),response:function(t){t.respond(200,{"Content-Type":"application/xml;charset=utf-8"},e)}}]});return r.start(),t.getMetadata(n).fin(function(){sap.ui.core.util.MockServer.destroyAll()})},getEntityType:function(e,t){for(var n,r=this._extractNamespace(t.entityType),i=this._getEntityTypes(e,r),o=0,a=i.length;a>o;o++)if(n=i[o],t.entityType===r+"."+n.name)return n},getAddressableEntitySets:function(e){for(var t,n,r,i,o,a=[],s=this._getSchemas(e)||[],u=0,c=s.length;c>u;u++){t=s[u].entityContainer||[];for(var l=0,p=t.length;p>l;l++){n=t[l].entitySet||[];for(var f=0,d=n.length;d>f;f++){r=n[f],a.push(r),i=r.extensions||[];for(var h=0,m=i.length;m>h;h++)o=i[h],"addressable"===o.name&&"false"===o.value&&a.pop()}}}return a},getEntitySets:function(e){return this._getEntitySets(e)},getEntitySet:function(e,t){for(var n,r=this._getEntitySets(e)||[],i=0,o=r.length;o>i;i++)if(n=r[i],n.name===t)return n},getProperties:function(e,t,n){var r,i,o,a,s,u=this.getEntityType(e,t)||{},c=this._extractNamespace(t.entityType),l=jQuery.extend(!0,[],u.property);n=void 0===n?!0:n===!0;for(var p=0;p<l.length;p++)if(r=l[p],-1!==r.type.indexOf(c)){n&&l.splice(p,1),i=this._getSchema(e,c)||{},o=i.complexType||[];for(var f=0,d=o.length;d>f;f++)if(a=o[f],-1!==r.type.toLowerCase().indexOf(a.name.toLowerCase())){if(s=jQuery.extend(!0,[],a.property),n){for(var h=0,m=s.length;m>h;h++)s[h].name=r.name+"/"+s[h].name;l=l.concat(s)}else r.properties=s;break}}return l},getNavigations:function(e,t){for(var n,r,i=[],o=this.getEntityType(e,t)||{},a=o.navigationProperty||[],s=0,u=a.length;u>s;s++)if(n=a[s],r=this._getAssociationSet(e,n.relationship)){var c=r.end[0].entitySet;c!==t.name?i.push({targetEntitySetName:c,name:n.name}):i.push({targetEntitySetName:r.end[1].entitySet,name:n.name})
}return i},getNavigationsForMultiplicity:function(e,t,n){for(var r,i,o,a,s=[],u=this.getEntityType(e,t)||{},c=u.navigationProperty||[],l=0,p=c.length;p>l;l++)i=c[l],o=this._getAssociationSet(e,i.relationship),a=this._getAssociation(e,i.relationship),o&&a&&(r=o.end[0].entitySet!==t.name?o.end[0].entitySet:o.end[1].entitySet,a.end[0].type===t.entityType?a.end[1].multiplicity===n&&s.push({targetEntitySetName:r,name:i.name}):a.end[0].multiplicity===n&&s.push({targetEntitySetName:r,name:i.name}));return s},getEntitySetCount:function(e,t,n){var r=Q.defer(),i={};n&&(i["sap-client"]=n);var o=new sap.ui.model.odata.ODataModel(e,!0,null,null,i,!1,!1,!0);return o.read(t+"/$count",null,null,!0,function(e,t){r.resolve(t.body)},function(e){r.reject(e)}),r.promise}}),define("sap.watt.platform.translation/core/TranslationManager",[],function(){var e=function(){this._translationService=sap.watt.core.Service.get("translation")};return e.prototype={showTerm:function(){jQuery.sap.log.info("showTerm !"),this._translationService.showGetTermsUI(null,"username",!0,!0,!0)},onSelectedTerm:function(){},onSelectedTranslation:function(){}},define("sap/watt/platform/plugin/translation/core/TranslationManagerSingleton",new e),require(["sap/watt/platform/plugin/translation/core/TranslationManagerSingleton"]),e}),define("sap.watt.platform.translation/command/ShowTerm",["../core/TranslationManager"],{execute:function(){jQuery.sap.log.info("showTerm command executed!"),sap.watt.platform.plugin.translation.core.TranslationManagerSingleton.showTerm()}}),define("sap.watt.platform.translation/ui/TermServiceUI",{_service:void 0,_params:void 0,_searchText:void 0,_domain:void 0,_textTypes:[],_terms:[],_intellisenseHTMLElement:void 0,_textBoxElem:void 0,_buttonElem:void 0,_domainsSelectControl:void 0,_textTypesSelectControl:void 0,_texttypelistElement:void 0,_imgElem:void 0,_termlistElement:void 0,_callback:void 0,_doc:$(document)[0],_rowHeight:25,_rows:10,showTermsUI:function(e,t,n,r,i,o,a,s,u,c){this._callback=e,this._terms=[],this.hideTermUI(),this._service=t,this._params={},this._params.oCurrentStatus=c,this._params.oKeyValue=n,this._params.bShowDoamin=r,this._params.sDomain=this._domain=i,this._params.bShowTextType=o,this._params.sTextType=a||this._service.getCurrentTextType(),this._params.bAllowChangeTextType=s;var l=$(document).width();u?this._params.oPlaceAt=u:(this._params.oPlaceAt={},this._params.oPlaceAt.top=250,this._params.oPlaceAt.left=l/2-250),this.initContainer(this._params.oPlaceAt),this.hookUpEvents()},hideTermUI:function(){this._intellisenseHTMLElement&&($(body)[0].removeChild(this._intellisenseHTMLElement),this._intellisenseHTMLElement=void 0)},isVisible:function(){return this._intellisenseHTMLElement?!0:!1},initContainer:function(e){var t=300,n=290,r=$(document).width(),i=$(document).height();if(e.container){var o=jQuery(e.container).offset();r=o.left+e.container.offsetWidth}if(this._intellisenseHTMLElement=this._doc.createElement("div"),this._intellisenseHTMLElement.className="termservice_container",this._intellisenseHTMLElement.style.listStyleType="none",this._intellisenseHTMLElement.style.display="none",this._docWidth=r,e.left){var a=parseInt(e.top)+15,s=parseInt(e.left);s+t>r&&(s=r-t,0>s&&(s=0)),a+n>i&&(a=a-n-20,0>a&&(a=0)),this._intellisenseHTMLElement.style.left=s+"px",this._intellisenseHTMLElement.style.top=a+"px"}var u=this;$(body)[0].appendChild(u._intellisenseHTMLElement),u._intellisenseHTMLElement.style.display="block",this.createControls().then(function(){u._textBoxElem.select(),u._textBoxElem.focus()}).done()},createTextTypeRelatedControls:function(){this._textTypesSelectControl=this._doc.createElement("input"),this._textTypesSelectControl.className="termservice_select_texttype",this._textTypesSelectControl.setAttribute("value","All text types"),this._textTypesSelectControl_value=this._service.context.i18n.getText("i18n","item_texttype_all"),this._textTypesSelectControl.setAttribute("tabIndex",2),this._params.sTextType&&(this._textTypesSelectControl.setAttribute("value",this._params.sTextType),this._textTypesSelectControl_value=this._params.sTextType),this._intellisenseHTMLElement.appendChild(this._textTypesSelectControl),this._imgElem=this._doc.createElement("div"),this._imgElem.className=".sapUiTfComboIcon termservice_img_button",this._intellisenseHTMLElement.appendChild(this._imgElem),this._texttypelistElement=this._doc.createElement("ul"),this._texttypelistElement.className="termservice_texttype_list",this._texttypelistElement.style.visibility="hidden";var e=this._textTypesSelectControl.currentStyle||window.getComputedStyle(this._textTypesSelectControl),t=parseInt(this._intellisenseHTMLElement.style.left)+240;this._texttypelistElement.style.left=t.toString()+"px",this._texttypelistElement.style.maxWidth=this._docWidth-t+"px";var n=parseInt(this._intellisenseHTMLElement.style.top)+parseInt(e.marginTop)+parseInt(e.marginBottom)+parseInt(e.paddingTop)+parseInt(e.paddingBottom)+parseInt(e.height)+parseInt(e.borderTop)+parseInt(e.borderBottom);this._texttypelistElement.style.top=n.toString()+"px",this._intellisenseHTMLElement.appendChild(this._texttypelistElement),this.addTextTypes();var r=this;this._textTypesSelectControl.onkeydown=function(e){9===e.keyCode&&(e.preventDefault(),e.stopPropagation(),r._textBoxElem.select(),r._textBoxElem.focus())},this._textTypesSelectControl.onkeyup=function(e){e.preventDefault(),e.stopPropagation(),13===e.keyCode?void 0!==r._focusedTextType&&r._selectTextType(r._focusedTextType):r._textTypesSelectControl.value!==r._textTypesSelectControl_value&&(r._filterTypeList(r._textTypesSelectControl.value),r._texttypelistElement.style.visibility="visible")},this._textTypesSelectControl.onclick=function(e){e.preventDefault(),e.stopPropagation();try{var t=r._texttypelistElement.style.visibility;"visible"===t?r._texttypelistElement&&(r._texttypelistElement.style.visibility="hidden",r._textTypesSelectControl.className.indexOf("selected")>=0&&(r._textTypesSelectControl.className=r._textTypesSelectControl.className.replace("selected",""))):r._texttypelistElement&&(r._texttypelistElement.style.visibility="visible",r._textTypesSelectControl.className.indexOf("selected")<0&&(r._textTypesSelectControl.className+=" selected"))}catch(e){}},this._texttypelistElement.onclick=function(e){e.preventDefault(),e.stopPropagation();try{var t=e.target.parentNode,n=t.attributes.selected_id,i=n.nodeValue;r._selectTextType(i)}catch(e){}},this._texttypelistElement.onmouseover=function(e){e.preventDefault(),e.stopPropagation();try{var t=e.target.parentNode,n=t.attributes.selected_id,i=n.nodeValue;r.textTypeFocusTo(i)}catch(e){}},this._imgElem.onclick=function(e){e.preventDefault(),e.stopPropagation();try{var t=r._texttypelistElement?r._texttypelistElement.style.visibility:null;"visible"==t?(r._texttypelistElement&&(r._texttypelistElement.style.visibility="hidden"),r._params.bShowTextType&&r._textTypesSelectControl.className.indexOf("selected")>=0&&(r._textTypesSelectControl.className=r._textTypesSelectControl.className.replace("selected",""))):(r._texttypelistElement&&(r._texttypelistElement.style.visibility="visible"),r._params.bShowTextType&&r._textTypesSelectControl.className.indexOf("selected")<0&&(r._textTypesSelectControl.className+=" selected"))}catch(e){}},this._selectTextType=function(e){var t=""===e?this._service.context.i18n.getText("i18n","item_texttype_all"):e;this._textTypesSelectControl.setAttribute("value",t),this._textTypesSelectControl.value=t,this._textTypesSelectControl_value=t,this._params.sTextType=e,this._texttypelistElement&&(this._texttypelistElement.style.visibility="hidden"),this.refresh(),this._textTypesSelectControl.className.indexOf("selected")>=0&&(this._textTypesSelectControl.className=this._textTypesSelectControl.className.replace("selected","")),this._textTypesSelectControl.focus()}},createTermListControl:function(){this._termlistElement=this._doc.createElement("ul"),this._termlistElement.className="termservice_list";var e=this._textBoxElem.currentStyle||window.getComputedStyle(this._textBoxElem);this._termlistElement.style.left=this._intellisenseHTMLElement.style.left;var t=parseInt(this._intellisenseHTMLElement.style.top)+parseInt(e.height)+parseInt(e.marginTop)+parseInt(e.marginBottom);t=t+parseInt(e.paddingTop)+parseInt(e.paddingBottom)+parseInt(e.borderTop)+parseInt(e.borderBottom)+10,this._termlistElement.style.top=t.toString()+"px",this._termlistElement.style.visibility="hidden",this._intellisenseHTMLElement.appendChild(this._termlistElement)},createControls:function(){return this._textBoxElem=this._doc.createElement("input"),this._textBoxElem.className="termservice_textbox",this._textBoxElem.setAttribute("tabIndex",1),this._textBoxElem.setAttribute("value",this._params.oKeyValue.sValue),this._intellisenseHTMLElement.appendChild(this._textBoxElem),this._params.bShowDoamin?(this._domainControl=this._doc.createElement("input"),this._domainControl.className="termservice_select_domain",this._domainControl.setAttribute("disabled",!0),this._domainControl.setAttribute("value",this._params.sDomain),this._intellisenseHTMLElement.appendChild(this._domainControl)):this._domainControl=void 0,this._params.bShowTextType?this.createTextTypeRelatedControls():this._textTypesSelectControl=void 0,this.createTermListControl(),this.getTerms()},getTerms:function(){this._terms=[],this._termlistElement.style.visibility="hidden";var e,t=this;return this._termlistElement.innerHTML="",this._service.getTerms(this._params.oKeyValue.sValue,this._params.sDomain,this._params.sTextType).then(function(n){if(t._searchText=t._params.oKeyValue.sValue,t._terms=n.suggestions,t._termlistElement.style.height=t._terms&&t._terms.length>t._rows?t._rows*t._rowHeight+"px":"auto",t._termlistElement.style.visibility="visible",t._terms){for(e=0;e<t._terms.length;e++){var r=t._doc.createElement("li");r.setAttribute("selected_id",e),termElem=t._doc.createElement("span"),termElem.className="termservice_intellisense_item",termElem.innerHTML=t._terms[e].value,r.appendChild(termElem),t._params.bShowTextType&&(spanElem=t._doc.createElement("span"),spanElem.className="termservice_intellisense_description",spanElem.innerHTML=t._terms[e].texttypeName+" ("+t._terms[e].texttypeId+")",r.appendChild(spanElem)),t._termlistElement.appendChild(r)}if(t.ensureFocus(),0==t._terms.length){var i=t._doc.createElement("span");i.className="termservice_intellisense_noitem",i.innerHTML=t._service.context.i18n.getText("i18n","dlg_noSuggestionMsg"),t._termlistElement.appendChild(i)}}},function(){t._termlistElement.style.visibility="visible"})},addTextTypes:function(){if(this._texttypelistElement&&(this._texttypelistElement.innerHTML=""),this._textTypes.length<1){var e=this;this._service.getTextTypes().then(function(t){e._textTypes=t.texttypes,e._addTextTypesHelper(e._textTypes)}).done()}else this._addTextTypesHelper(this._textTypes)},_addTextTypesHelper:function(e){this._params.bShowTextType&&(this._texttypelistElement.style.height=this._rows*this._rowHeight+"px");var t=this._doc.createElement("li");if(t.setAttribute("selected_id",""),termElem=this._doc.createElement("span"),termElem.className="termservice_texttype_item",termElem.innerHTML=this._service.context.i18n.getText("i18n","item_texttype_all"),t.appendChild(termElem),this._params.bShowTextType&&this._texttypelistElement.appendChild(t),e)for(var n=e.length,r=0;n>r;r++){var t=this._doc.createElement("li");t.setAttribute("selected_id",e[r].id),termElem=this._doc.createElement("span"),termElem.className="termservice_texttype_item",termElem.innerHTML=e[r].name+" ("+e[r].id+")",t.appendChild(termElem),this._texttypelistElement.appendChild(t)}},_adjustPosition:function(){},_timeout:null,_timeout4Translation:null,hookUpEvents:function(){var e=this;this._textBoxElem.onkeyup=function(t){try{switch(t.which){case 13:t.preventDefault(),t.stopPropagation(),e.termSelected();break;case 40:case 38:t.preventDefault(),t.stopPropagation(),e._termlistElement&&e._termlistElement.focus();break;case 27:t.preventDefault(),t.stopPropagation(),e.termCancelled();break;default:var n=$(".termservice_textbox")[0].value;n!=e._params.oKeyValue.sValue&&(e._params.oKeyValue.sValue=n,e._timeout&&clearTimeout(e._timeout),e._timeout=setTimeout(function(){e._termlistElement&&e.refresh()},500))}}catch(t){}},this._textBoxElem.onfocus=function(){this._params&&this._params.bShowTextType&&(e._texttypelistElement.style.visibility="hidden",e._textTypesSelectControl.className.indexOf("selected")>=0&&(e._textTypesSelectControl.className=e._textTypesSelectControl.className.replace("selected","")))},this._filterTypeList=function(t){if(this._texttypelistElement.innerHTML="",t=t.toUpperCase(),this._focusedTextType=void 0,""===t.trim()){var n=e._doc.createElement("li");n.setAttribute("selected_id",""),o=e._doc.createElement("span"),o.className="termservice_texttype_item",o.innerHTML=e._service.context.i18n.getText("i18n","item_texttype_all"),n.appendChild(o),e._texttypelistElement.appendChild(n)}if(e._textTypes){var r=e._textTypes.length;for(i=0;r>i;i++)if(!(""!==t.trim()&&e._textTypes[i].id.indexOf(t)<0)){var n=e._doc.createElement("li");n.setAttribute("selected_id",e._textTypes[i].id),o=e._doc.createElement("span"),o.className="termservice_texttype_item",o.innerHTML=e._textTypes[i].name+" ("+e._textTypes[i].id+")",n.appendChild(o),e._texttypelistElement.appendChild(n)}}if(e._texttypelistElement.childNodes.length>0){var o=e._texttypelistElement.childNodes[0],a=o.attributes.selected_id,t=a.nodeValue;e.textTypeFocusTo(t)}},this._intellisenseHTMLElement.onkeydown=function(t){try{this._params.bShowTextType&&(e._texttypelistElement.style.visibility="hidden",e._textTypesSelectControl.className.indexOf("selected")>=0&&(e._textTypesSelectControl.className=e._textTypesSelectControl.className.replace("selected",""))),13===t.which?(t.preventDefault(),t.stopPropagation(),e.termSelected()):40===t.which?(t.preventDefault(),t.stopPropagation(),e.focusNext()):38===t.which?(t.preventDefault(),t.stopPropagation(),e.focusPrev()):27===t.which&&(t.preventDefault(),t.stopPropagation(),e.termCancelled())}catch(t){}},this._termlistElement.onclick=function(t){t.preventDefault(),t.stopPropagation();try{e._texttypelistElement&&(e._texttypelistElement.style.visibility="hidden");var n=t.target.parentNode,r=n.attributes.selected_id,i=parseInt(r.nodeValue);e.termSelected(i),this._params.bShowTextType&&e._textTypesSelectControl.className.indexOf("selected")>=0&&(e._textTypesSelectControl.className=e._textTypesSelectControl.className.replace("selected",""))}catch(t){}},this._termlistElement.onmouseover=function(t){t.preventDefault(),t.stopPropagation();try{e._texttypelistElement&&(e._texttypelistElement.style.visibility="hidden");var n=t.target.parentNode,r=n.attributes.selected_id,i=parseInt(r.nodeValue);e.focusTo(i),this._params.bShowTextType&&e._textTypesSelectControl.className.indexOf("selected")>=0&&(e._textTypesSelectControl.className=e._textTypesSelectControl.className.replace("selected",""))}catch(t){}}},refresh:function(){this.getTerms()},ensureFocus:function(){$(".termservice_list").scrollTop(0),this.current()||this._termlistElement.firstChild&&(this._termlistElement.firstChild.className="termservice_selected",this.showTranslation4Term(this._termlistElement.firstChild,!0))},current:function(){for(var e=this._termlistElement.childNodes,t=0;t<e.length;t++){var n=e[t];if("termservice_selected"===n.className)return n}return void 0},focusTo:function(e){var t=this._termlistElement.childNodes;if(!(void 0===t||t.length<=0||e>=t.length)){var n=this.current();void 0!==n&&(n.className=" ");var r=t[e];r.className="termservice_selected";var i=-1;if(void 0!==n){var o=n.attributes.selected_id;i=parseInt(o.nodeValue)}i!==e&&this.showTranslation4Term(r)}},focusNext:function(){var e=this._termlistElement.childNodes;if(!(void 0===e||e.length<=0||this._terms.length<=0)){var t=this.current();if(void 0!==t){t.className=" ";var n=t.nextSibling||t.parentNode.firstChild;if(n.className="termservice_selected",n===t.parentNode.firstChild)$(".termservice_list").scrollTop(0);else{var r=$(".termservice_list").scrollTop(),i=[].indexOf.call(n.parentNode.childNodes,n);i*this._rowHeight-r>=this._rows*this._rowHeight&&$(".termservice_list").scrollTop(r+this._rowHeight)}this.showTranslation4Term(n)}else this.focusTo(0)}},focusPrev:function(){var e=this._termlistElement.childNodes;if(!(void 0===e||e.length<=0||this._terms.length<=0)){var t=this.current();if(void 0!=t){t.className=" ";var n=t.previousSibling||t.parentNode.lastChild;if(n.className="termservice_selected",n===t.parentNode.lastChild)t.parentNode.childNodes.length>=this._rows?$(".termservice_list").scrollTop((t.parentNode.childNodes.length-this._rows)*this._rowHeight):$(".termservice_list").scrollTop(0);else{var r=[].indexOf.call(t.parentNode.childNodes,n),i=$(".termservice_list").scrollTop();r*this._rowHeight<i&&$(".termservice_list").scrollTop(i-this._rowHeight)}this.showTranslation4Term(n)}else this.focusTo(0)}},showTranslation4Term:function(e,t){var n=this;this._timeout4Translation&&clearTimeout(this._timeout4Translation),this._timeout4Translation=setTimeout(function(){var r,i,o;if(r=e.attributes.selected_id){i=parseInt(r.nodeValue),o=n._terms[i];var a={};if(a.key="TEST_KEY",a.value=o.value,a.textType=o.texttypeId,o.translations)n.showTranslationValue(o.translations,i,t);else{var s=[];s.push(a),n._service.getTranslations(s).then(function(e){e&&e.length>0&&(o.translations=e[0].translations,n.showTranslationValue(o.translations,i,t))},function(e){alert(e)}).done()}n._timeout4Translation=null}},100)},showTranslationValue:function(e,t,n){e&&e.length>0&&e.sort(function(e,t){return e.language.localeCompare(t.language)}),this._service.context.event.fireTranslated({text:this._searchText,terms:this._terms,index:t,refresh:n}).done()},textTypeFocusTo:function(e){this._focusedTextType=e;var t=this._texttypelistElement.childNodes;if(!(void 0===t||t.length<=0||void 0===e)){for(var n=0;n<t.length;n++){var r=t[n],i=r.attributes.selected_id,o=i.nodeValue;"termservice_texttype_selected"===r.className&&(r.className=" "),o===e&&(r.className="termservice_texttype_selected")}this._textTypesSelectControl.focus()}},termSelected:function(e){var t,n=this;if(void 0===e){var r=this._termlistElement.childNodes;if(void 0===r||r.length<=0){var i=$(".termservice_textbox")[0].value,o={};return o.id=void 0,o.value=i,o.domainId=this._domain,o.texttypeId=this.service.getCurrentTextType(),o.availableLanguages=0,o.translations=null,this.hideTermUI(),this._callback&&this._callback(this._params.oKeyValue,o),void 0}var a=this.current();if(a){var s=[].indexOf.call(r,a);if(t=this._terms[s],t.translations)this.hideTermUI(),this._callback&&this._callback(this._params.oKeyValue,t);else{n.hideTermUI();var u={};u.key="TEST_KEY",u.value=t.value,u.textType=t.texttypeId;var c=[];c.push(u),this._service.getTranslations(c).then(function(e){e&&e.length>0&&(t.translations=e[0].translations,n._callback&&n._callback(n._params.oKeyValue,t))},function(){n._callback&&n._callback(n._params.oKeyValue,t)}).done()}}else i=$(".termservice_textbox")[0].value,o={},o.id=void 0,o.value=i,o.domainId=this._domain,o.texttypeId=this.service.getCurrentTextType(),o.availableLanguages=0,o.translations=null,this.hideTermUI(),this._callback&&this._callback(this._params.oKeyValue,o)}else t=this._terms[e],t.translations?(this.hideTermUI(),this._callback&&this._callback(this._params.oKeyValue,t)):(n.hideTermUI(),u={},u.key="TEST_KEY",u.value=t.value,u.textType=t.texttypeId,c=[],c.push(u),this._service.getTranslations(c).then(function(e){e&&e.length>0&&(t.translations=e[0].translations,n._callback&&n._callback(n._params.oKeyValue,t))},function(){n._callback&&n._callback(n._params.oKeyValue,t)}).done())},termCancelled:function(){this.hideTermUI(),this._callback&&this._callback()},loadCSS:function(e){var t=$("<link rel='stylesheet' type='text/css' href='"+e+"'>");$("head").append(t)}}),define("sap.watt.platform.translation/ui/TranslationServiceUI",{getTranslationLanguageUI:function(e,t){var n,r,i;if("undefined"==typeof this._oTLDialog){r=new sap.ui.model.json.JSONModel,i={filename:e,locale:{id:"en",name:"English"},locales:t,deferred:Q.defer()},r.setData(i),n=new sap.ui.commons.Dialog({title:"Choose Translation Language",showCloseButton:!0,modal:!0}),n.setModel(r),this._oTLDialog=n,this._addCell=function(e,t){var n=new sap.ui.commons.layout.MatrixLayoutCell;n.addContent(t),e.addCell(n)};var o=new sap.ui.commons.layout.MatrixLayout,a=new sap.ui.commons.layout.MatrixLayoutRow,s=new sap.ui.commons.Label({text:"Filename:"});this._addCell(a,s);var u=new sap.ui.commons.TextView({text:"{/filename}"});this._addCell(a,u),o.addRow(a),a=new sap.ui.commons.layout.MatrixLayoutRow,s=new sap.ui.commons.Label({text:"Language:"}),this._addCell(a,s),u=new sap.ui.commons.TextView({text:"{/locale/name}"}),this._addCell(a,u),o.addRow(a),a=new sap.ui.commons.layout.MatrixLayoutRow,s=new sap.ui.commons.Label({text:"Translate to:"}),this._addCell(a,s);var c=new sap.ui.core.ListItem({key:"{id}",text:"{name}"}),l=new sap.ui.model.Sorter("name"),p=new sap.ui.commons.ComboBox({items:{path:"/locales",template:c,sorter:l}});p.attachChange(p,function(e,t){i.targetLocale=t.getSelectedKey();var n=""===i.targetLocale,r=n?sap.ui.core.ValueState.Error:sap.ui.core.ValueState.None;f.setEnabled(!n),t.setValueState(r)}),this._addCell(a,p),o.addRow(a),a=new sap.ui.commons.layout.MatrixLayoutRow,o.addRow(a),n.addContent(o);var f=new sap.ui.commons.Button({text:"Accept"}).attachPress(p,function(e,t){i.targetLocale=t.getSelectedKey(),n.close()}).setEnabled(!1);n.addButton(f),n.addButton(new sap.ui.commons.Button({text:"Cancel"}).attachPress(function(){i.targetLocale="",n.close()})),n.attachClosed(function(){""!==i.targetLocale?i.deferred.resolve(i.targetLocale):i.deferred.reject()},this)}else n=this._oTLDialog,r=n.getModel(),i=r.getData(),i.filename=e,i.targetLocale="",i.deferred=Q.defer(),r.refresh();return n.open(),i.deferred.promise},confirmTranslationUI:function(e,t){var n,r,i,o;return"undefined"==typeof this._oConfirmDialog?(r=new sap.ui.model.json.JSONModel,i={rows:t,locale:e,targets:[],deferred:Q.defer()},r.setData(i),n=new sap.ui.commons.Dialog({title:"Confirm Translation",showCloseButton:!0,modal:!0}),n.setModel(r),n.addStyleClass("wattTranslationConfirm"),this._oConfirmDialog=n,o=sap.ui.xmlfragment("sap.watt.platform.plugin.translation.ui.propertyList",this),o.bindRows("/rows"),n.addContent(o),o.onBeforeRendering=function(){o.selectAll()},n.addButton(new sap.ui.commons.Button({text:"Accept"}).attachPress(function(){i.targets=o.getSelectedIndices(),n.close()},this)),n.addButton(new sap.ui.commons.Button({text:"Cancel"}).attachPress(function(){n.close()})),n.attachClosed(function(){0<i.targets.length?i.deferred.resolve(i.targets):i.deferred.reject()})):(n=this._oConfirmDialog,r=n.getModel(),i=r.getData(),i.rows=t,i.locale=e,i.targets=[],i.deferred=Q.defer(),r.refresh()),n.open(),i.deferred.promise}}),define("sap.watt.platform.translation/service/TranslationImpl",["../ui/TermServiceUI","../ui/TranslationServiceUI","sap/watt/lib/lodash/lodash"],function(e,t,n){return{_sTextType:void 0,_oTermsUI:void 0,_sFilePrefix:void 0,_oSourceLanguage:void 0,_oTargetLanguages:void 0,_sUUID:void 0,_oTranslationUI:void 0,_oi18nEntry:void 0,_oFileService:void 0,ERROR_FOLDER_NOT_EXIST:"The folder {0} doesn't exist",ERROR_FILE_NOT_EXIST:"The file {0} doesn't exist",ERROR_FILE_EXIST:"The file {0} already exists",ERROR_KEY_NOT_EXIST:"The key {0} doesn't exists",ERROR_KEY_EXIST:"The key {0} already exists",init:function(){void 0===this._oFileService&&(this._oFileService=this.context.service.filesystem.documentProvider)},configure:function(e){this._aStyles=e.styles,this._aStyles&&this.context.service.resource.includeStyles(this._aStyles).done()},getDomains:function(){return $.ajax({type:"Get",url:"/translation/api/v1/domains"})},getTextTypes:function(){return $.ajax({type:"Get",url:"/translation/api/v1/texttypes"})},setCurrentDomain:function(e,t){var n="";e&&e.id&&(n=e.id);var r=this.context.service.setting.project,i=this.context.self;return r.get(this.context.service.translation,t).then(function(e){var o={};return e&&(o=e),o.translationDomain=n,(null==o.supportedLanguages||""===o.supportedLanguages)&&(o.supportedLanguages="en,fr,de"),(null==o.defaultLanguage||""===o.defaultLanguage)&&(o.defaultLanguage="en"),(null==o.defaultI18NPropertyFile||""===o.defaultI18NPropertyFile)&&(o.defaultI18NPropertyFile="i18n.properties"),(null==o.resourceModelName||""===o.resourceModelName)&&(o.resourceModelName="i18n"),r.set(i,o,t)})},onAfterGenerate:function(e){("project"===e.params.selectedTemplate.getType()||"Fiori_project"===e.params.selectedTemplate.getType())&&this.setCurrentDomain(e.params.model.domain,e.params.targetDocument).done()},getCurrentTextType:function(){return this._sTextType},setCurrentTextType:function(e){this._sTextType=e&&""!==e?e:""},getTerms:function(e,t,r){var i=this,o=Q.defer();if(void 0===e||null==e||""===e)return setTimeout(function(){o.resolve([])},50),o.promise;var a=r||i.getCurrentTextType();(""===t||"@ALL@"===t)&&(t=void 0),(""===a||"@ALL@"===a)&&(a=void 0);var s=encodeURIComponent(e),u="/translation/api/v1/suggestions?search="+s;return t&&(u=u+"&"+"domain="+t.toUpperCase()),a&&(u=u+"&"+"texttype="+a.toUpperCase()),$.ajax({type:"Get",url:u}).then(function(e){var t=e.suggestions;e.suggestions=n.uniq(t,function(e){return e.value}),o.resolve(e)},function(){o.resolve([])}),o.promise},showGetTermsUI:function(t,n,r,i,o,a,s){var u=this;return this._callback=t,this._getModelKey(n).then(function(t){var c={};return t?(c.sModel=t.sModel,c.sKey=t.sKey,u.getPropertyKey(void 0,c.sModel,c.sKey,s?s.document:null).then(function(t){return t?(c.sValue=t.value,u._oTermsUI=e,u._getProjectInfo().then(function(e){return u._oTermsUI.showTermsUI(function(e,t){u._termSelected(e,t,s?s.document:null)},u,c,r,e.domain,i,u.getCurrentTextType(),o,a,s)})):(this._callback&&this._callback(null).done(),void 0)})):u._getProjectInfo().then(function(t){c.sModel=t.model,c.sKey=null,c.sValue=n,u._oTermsUI=e,u._oTermsUI.showTermsUI(function(e,t){u._termSelected(e,t,s?s.document:null)},u,c,r,t.domain,i,u.getCurrentTextType(),o,a,s)})})},getCurrentDomain:function(){var e=this.context.service.setting.project;return e.get(this.context.service.translation).then(function(e){return e&&e.translationDomain?e.translationDomain:"BC"}).fail(function(){return"BC"})},_getProjectInfo:function(){var e,t=this.context.service.setting.project,n="BC",r="i18n",i=this;return t.get(this.context.service.translation).then(function(t){if(t&&t.translationDomain&&(n=t.translationDomain),t&&t.defaultI18NPropertyFile){var o=t.defaultI18NPropertyFile;e=o.indexOf("."),e>0&&(i._sFilePrefix=o.substring(0,e),r=i._sFilePrefix)}return t&&t.resourceModelName&&(r=t.resourceModelName),{domain:n,model:r}}).fail(function(){return{domain:n,model:r}})},hideTermUI:function(){this._oTermsUI&&this._oTermsUI.hideTermUI()},getLanguages:function(){return $.ajax({type:"Get",url:"/translation/api/v1/languages"})},getSourceLanguage:function(){return this._oSourceLanguage},setSourceLanguage:function(e){this._oSourceLanguage=e&&""!==e?e:void 0},getTargetLanguages:function(){if(this._oTargetLanguages)return this._oTargetLanguages;var e=[],t={};return t.id="en",t.name="English",e.push(t),e},setTargetLanguages:function(e){e?"[object Array]"===Object.prototype.toString.call(e)?this._oTargetLanguages=e:(this._oTargetLanguages=[],this._oTargetLanguages.push(e)):this._oTargetLanguages=void 0},getTranslations:function(e,t,n,r,i){var o,a=Q.defer(),s=n?n:this.getTargetLanguages();if(!e||!s)return a.resolve(null),a.promise;var u,c=r?r:this.getUUID(),l={};if(l.targetLanguages=[],s&&s.length>0)for(u=0;u<s.length;u++)l.targetLanguages.push(s[u].id);l.bundles=[];var p={};for(p.id=c,p.domain=t,p.units=[],u=0;u<e.length;u++){var f=e[u],d={};d.textType=f.textType,d.key=f.key,d.value=f.value,p.units.push(d)}l.bundles.push(p);var h=JSON.stringify(l);return $.ajax({type:"POST",url:"/translation/api/v1/translate",data:h,dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"+("undefined"!=typeof InstallTrigger?"; charset=utf-8":"")}}).done(function(e){try{var t=e.bundles[0].units;a.resolve(t)}catch(n){a.reject(n)}}).fail(function(e,t,n){a.reject(n)}).always(function(){i&&o.isOpen()&&o.close()}),i&&(o=new sap.ui.commons.Dialog({title:this.context.i18n.getText("i18n","dlg_getTranslationMsg"),showCloseButton:!1,modal:!0}),o.addButton(new sap.ui.commons.Button({text:this.context.i18n.getText("i18n","dlg_getTranslationCancel")}).attachPress(function(){o.isCancelled=!0,o.close()})),o.attachClosed(function(){o.isCancelled&&a.reject()}),o.open()),a.promise},getUUID:function(){return this._sUUID&&""!==this._sUUID?this._sUUID:this._generateNewUUID()},setUUID:function(e){this._sUUID=e},isEntityTranslatable:function(e){var t,n,r=!1;return"file"===e.getType()&&(t=e.getName(),n=t.lastIndexOf(".properties"),t=t.substring(0,n),t.length>0&&(n=t.lastIndexOf("_"),r=0>=n||n>0&&n===t.length-1)),this._sFilename=r?t:"",r},_saveProperties:function(e,t,n){var r=this;e.getContent().then(function(i){var o,a,s,u,c=i.indexOf("\r\n")>=0?"\r\n":"\n";if(t){for(o=0,a=t.length;a>o;o++){s=t[o],u=r._findPropKey(i,s.key);var l;u&&-1!==u.iKeyline?(u.oLines[u.iKeyline]=s.key+"="+s.value,u.iCommentline>=0?(l=s.extraInfo?s.extraInfo:"",u.oLines[u.iCommentline]="# "+s.textType+":"+l):u.oLines.splice(u.iKeyline,0,"# "+s.textType+":"+s.extraInfo?s.extraInfo:"")):(l=s.extraInfo?s.extraInfo:"",u.oLines.push(" "),u.oLines.push("# "+s.textType+":"+l),u.oLines.push(s.key+"="+s.value)),i=u.oLines.join(c)}e.setContent(i).done(function(){e.save().then(function(){sap.ui.core.BusyIndicator.hide(),n.resolve(e)},function(e){sap.ui.core.BusyIndicator.hide(),n.reject(e)}),sap.ui.core.BusyIndicator.show()})}else n.reject("aProperties is not defined")},function(e){n.reject(e)}).done()},updatePropertyKeys:function(e,t,n,r){var i=this,o=Q.defer();return r?this._getI18NFolderEntry(r).then(function(r){i._getPropertyFileEntry(r,e,t).then(function(a){a?i._saveProperties(a,n,o):i._createOnePropertyFile(r,e,t).then(function(e){i._saveProperties(e,n,o)},function(e){o.reject(e)})},function(e){o.reject(e)})},function(e){o.reject(e)}):o.reject("oDocument is not defined"),o.promise},updatePropertyKey:function(e,t,n,r){if(n&&"key"in n&&"value"in n&&"textType"in n&&"extraInfo"in n)return this.updatePropertyKeys(e,t,[n],r);var i=new Error("The oProperty that provided is malformed (missing required attributes)");throw i.name="TranslationImplSrvOPropIsMalformed",i},getAllPropertyKeys:function(e,t,n){var r=this,i=Q.defer();return this._getI18NFolderEntry(n).then(function(n){r._getPropertyFileEntry(n,e,t).then(function(e){e?e.getContent().then(function(e){var t=[],n=e.replace(/\r\n/g,"\n"),r=n.split("\n");if(r)for(var o=0;o<r.length;o++){var a=r[o];if(a=a.replace(/^\s+/,""),a&&""!==a&&0===a.search(/\w/)&&a.search(/=/)>0){var s=a.replace(/\s+=/g,"=").replace(/=\s+/g,"=").split("="),u={};u.key=s[0];var c=s[1].split(/\/\//);if(u.value=c[0],o>0){var l=r[o-1];if("#"===l.substring(0,1)){var p=l.split(":");u.textType=p[0].replace(/\W/g,""),p.length>0&&(u.extraInfo=p[1])}}t.push(u)}}i.resolve(t)},function(){i.resolve(null)}):i.resolve(null)},function(){i.resolve(null)})},function(){i.resolve(null)}),i.promise},getPropertyKey:function(e,t,n,r){var i=this,o=Q.defer();return this._getI18NFolderEntry(r).then(function(r){i._getPropertyFileEntry(r,e,t).then(function(e){e?e.getContent().then(function(e){var t=i._findPropKey(e,n);if(t&&-1!==t.iKeyline){var r=null;r={};var a=t.oLines[t.iKeyline];if(a){var s=a.replace(/\s+=/g,"=").replace(/=\s+/g,"=").split("=");if(r.key=s[0],r.value=s[1].split(/\/\//)[0],t.iCommentline>=0){var u=t.oLines[t.iCommentline],c=u.split(":");r.textType=c[0].replace(/\W/g,""),c.length>0&&(r.extraInfo=c[1])}o.resolve(r)}else o.resolve(null)}else o.resolve(null)},function(){o.resolve(null)}):o.resolve(null)
},function(){o.resolve(null)})},function(){o.resolve(null)}),o.promise},deletePropertyKey:function(e,t,n,r){var i=this,o=Q.defer();return this._getI18NFolderEntry(r).then(function(r){i._getPropertyFileEntry(r,e,t).then(function(e){e.getContent().then(function(t){var r=i._findPropKey(t,n);r?(r.oLines.splice(r.iKeyline,1),r.iCommentline>=0&&r.oLines.splice(r.iCommentline,1)):o.reject(i._errorMessage(ERROR_KEY_NOT_EXIST,n));var a="\n";t.indexOf("\r\n")>=0&&(a="\r\n");var s=r.oLines.join(a);e.setContent(s).then(function(){e.save().then(function(){o.resolve(e)},function(){o.resolve(null)})})},function(){o.resolve(null)})},function(){o.resolve(null)})},function(){o.resolve(null)}),o.promise},_errorMessage:function(e,t){return MessageFormat.format(e,t)},_getI18NFolderEntry:function(e){var t=this;return this._getI18nFolderName().then(function(n){return t._getSelectedDocument(e).then(function(e){return e?t._getRootContent(e).then(function(r){var i=t._getFolders(r,"webapp");return i&&i.length>0?t._handleFolderExistence(r,i[0],n,"webapp"):t._handleWebappFolderAbsent(r,e,n)}):void 0})})},_getI18nFolderName:function(){var e=this.context.service.setting.project,t="i18n";return e.get(this.context.service.translation).then(function(e){return e&&e.resourceModelName&&(t=e.resourceModelName),t}).fail(function(){return t})},_getSelectedDocument:function(e){var t=null;if(!e){var n=this.context.service.selection;return n.getSelection().then(function(e){var t=e[0];return t&&t.document?t.document:void 0})}return t=e,Q(t)},_getRootContent:function(e){return this._getRootProject(e).then(function(e){return e.getCurrentMetadata(!0).then(function(e){return e})})},_getFolders:function(e,t){var r=[];return e&&t&&(r=n.filter(e,function(e){return e.name===t&&e.folder})),r},_getRootProject:function(e){var t=this;return e.getEntity().isRoot()?null:e.getParent().then(function(n){return n?n.getEntity().isRoot()?e:t._getRootProject(n):null})},_handleWebappFolderAbsent:function(e,t,n){var r=this._getFolders(e,"src");if(r&&r.length>0)return this._handleFolderExistence(e,r[0],n,"src");var i=this._getFolders(e,n);return i&&i.length>0?this._getI18RootFolder(t,i,n):this._createI18nOnRoot(t,n)},_handleFolderExistence:function(e,t,r){var i=this._getFolders(e,r),o=this;if(i&&i.length>0){var a=t.name,s=n.find(i,function(e){return e.path.indexOf(a)>-1&&e.folder});return s?this.context.service.filesystem.documentProvider.getDocument(s.path).then(function(e){return e}):this.context.service.filesystem.documentProvider.getDocument(t.path).then(function(e){return o._createI18nOnFolder(e,r)})}return this.context.service.filesystem.documentProvider.getDocument(t.path).then(function(e){return o._createI18nOnFolder(e,r)})},_getI18RootFolder:function(e,t,r){var i=this;return this._getRootProject(e).then(function(o){var a=null;return o&&(a=n.find(t,function(e){return e.path===o.getEntity().getFullPath()+"/"+r&&e.folder})),a?i.context.service.filesystem.documentProvider.getDocument(a.path).then(function(e){return e}):i._createI18nOnRoot(e,r)})},_createI18nOnFolder:function(e,t){return e&&t?e.createFolder(t).then(function(e){return e},function(){return null}):null},_createI18nOnRoot:function(e,t){var n=this;return this._getRootProject(e).then(function(e){return n._createI18nOnFolder(e,t)})},_getPropertyFileName:function(e,t){var n=this._sFilePrefix?this._sFilePrefix:e||"i18n";return t&&(n=n+"_"+t),n+=".properties"},_createOnePropertyFile:function(e,t,n){var r=this._getPropertyFileName(n,t);return e.createFile(r)},_getAbsolutePropertyFilePath:function(e,t,n){var r=this._getPropertyFileName(e,t),i=n?n.getEntity().getFullPath()+"/"+r:"";return i},_getPropertyFileEntry:function(e,t,n){var r=this._getAbsolutePropertyFilePath(n,t,e);return this._oFileService.getDocument(r).then(function(e){return e})},_findPropKey:function(e,t){var n,r={};if(r.oLines=[],r.iKeyline=-1,r.iCommentline=-1,!e)return r;var i=e.replace(/\r\n/g,"\n"),o=i.split("\n");if(r.oLines=o,void 0===o||null==o||o.length<=0)return r;for(n=0;n<o.length;n++){var a=o[n],s=a.replace(/[\s=]/g,"=").replace(/=+/g,"=").split("=");if(s[0]===t){if(r.iKeyline=n,n>0){var u=o[n-1].replace(/\s/g,"");"#"===u.substring(0,1)&&(r.iCommentline=n-1)}return r}}return r},_getModelKey:function(e){var t=Q.defer();return setTimeout(function(){if(e&&""!==e){var n=e.replace(/\s/g,""),r=n.substring(0,1),i=n.substring(n.length-1);if("{"===r&&"}"===i){var o=n.substring(1,n.length-1).split(">");if(o&&2===o.length){var a={};a.sModel=o[0],a.sKey=o[1],t.resolve(a)}else t.resolve(null)}else t.resolve(null)}else t.resolve(null)},500),t.promise},_generateNewUUID:function(){return"984084ea-ab4d-48e6-e800-49d3bf1e917b"},_generateNewKey:function(e,t){if(!e)return null;var n=e.replace(/\W/g,"_").replace("./g","_");return n.length>16&&(n=n.substring(0,16)),t&&(n=n+"_"+t),n},_callback:void 0,_termSelected:function(e,t,n){null==e&&null==t&&this._callback&&this._callback().done();var r=this,i={};i.key=e.sKey?e.sKey:this._generateNewKey(t.value,t.id),i.value=t.value,i.textType=t.texttypeId,i.extraInfo=t.id+"("+t.domainName+"("+t.domainId+")"+")",this.updatePropertyKey("",e.sModel,i,n).then(function(){r._callback&&r._callback("{"+e.sModel+">"+i.key+"}")},function(){console.log("The returned text for Code Editor is: "+t.value),r._callback&&r._callback(t.value)}).done()},isShowPopup:function(){return this._oTermsUI&&this._oTermsUI.isVisible()?!0:!1}}}),define("sap.watt.platform.translation/service/TranslationSettings",["sap/watt/common/plugin/platform/service/ui/AbstractConfig"],function(e){"use strict";return e.extend("sap.watt.platform.plugin.translation.service.TranslationSettings",{_oContent:null,_oDomainDropdownBox:null,_oSelelctAllCheckBox:null,_oDropdownDefault:null,_oLenguageTable:null,_oTrData:{},_oDocumentByPath:null,_createEmptyModel:function(){return{translationDomain:"",supportedLanguages:"",defaultLanguage:"",defaultI18NPropertyFile:"",resourceModelName:""}},getProjectSettingContent:function(e,t,n){var r=this,i=this.context.service;return this._getDocumentByPath(n).then(function(e){return r._oDocumentByPath=e,i.setting.project.get(i.translation,e).then(function(e){return r._oTrData.oSettings=e,r._oTrData.oSettings&&0!==r._oTrData.oSettings.length||(r._oTrData.oSettings=r._createEmptyModel()),r._oContent?(r._prepareData(),r._initModel(),r._oContent):r._getData().then(function(e){return e?(r._oTrData.oStaticLanguageList=e.oStaticLanguageList,r._oTrData.oDomainsList=e.oDomainsList,r._oContent=r._createUI(),r._prepareData(),r._initModel(),r._oContent):void 0})}).fail(function(){return r._onErrorDataFetch(),r.context.service.log.error("project settings","Failed to load language settings",["user"]).done(),r._oContent})})},_getDocumentByPath:function(e){return this.context.service.document.getDocumentByPath(e)},_getData:function(){var e=this,t=this.context.service,n={};return this._getLanguages().then(function(r){return n.oStaticLanguageList=r,sap.watt.getEnv("internal")?t.translation.getDomains().then(function(e){return n.oDomainsList=e,n}).fail(function(){return e.context.service.log.error("project settings","Error while fetching data for domains!",["user"]).done(),n.oDomainsList={domains:[]},n}):n}).fail(function(){e.context.service.log.error("project settings","Error while fetching data for languages",["user"]).done()})},_getLanguages:function(){var e=[],t="resources/sap/watt/platform/plugin/translation/languages/languageList.json";return Q.sap.ajax(t).then(function(t){if(t[0]){var n;n="string"==typeof t[0]?JSON.parse(t[0]):t[0];var r=n.languages;for(var i in r)e.push({id:i,name:r[i]})}return{languages:e}})},_initModel:function(){var e=this._oContent.getModel();e.setProperty("/oTrData",this._oTrData)},_prepareData:function(){sap.watt.getEnv("internal")?(this._oTrData.oDomain=this._getDomainObjFromSettings(),this._oTrData.bInternalProject=!0):this._oTrData.bInternalProject=!1,this._oTrData.aLanguageList=this._createLanguageList(),this._setSupportedLanguages(),this._oTrData.oDefault=this._getDefaultObjFromSettings(),this._oTrData.aDefaultList=this._getDefaultListFromSettings(),this._oTrData.sTristateState=this._getTristateInitialState(),this._oTrData.bDefaultEditable=0===this._oTrData.aDefaultList.length?!1:!0},_onErrorDataFetch:function(){this._oContent||(this._oContent=this._createUI()),this._oDomainDropdownBox.setEnabled(!1),this._oDropdownDefault.setEnabled(!1),this._oSelelctAllCheckBox.setEnabled(!1),this._oLenguageTable.setEditable(!1),this._oLenguageTable.setVisibleRowCount(5)},_createLanguageList:function(){var e=this._oTrData.oStaticLanguageList.languages,t=[],n=!1,r=e.map(function(e){return e.id}).indexOf("en_us_sappsd");r>=0&&(n=!0),!n&&sap.watt.getEnv("internal")&&t.push({selected:!1,languageName:"2Q",languageId:"en_us_sappsd"});for(var i=0;i<e.length;i++)t.push({selected:!1,languageName:e[i].name,languageId:e[i].id});return t},_getDomainObjFromSettings:function(){var e=this._oTrData.oSettings.translationDomain,t=this._oTrData.oDomainsList.domains,n=t.map(function(e){return e.id}).indexOf(e);return n>=0?{id:t[n].id,name:t[n].name}:{id:"",name:""}},_getDefaultObjFromSettings:function(){var e=this._oTrData.oSettings.defaultLanguage,t=this._oTrData.oSettings.supportedLanguages;!e&&t&&(e=t.split(",")[0],this._oTrData.oSettings.defaultLanguage=e),this.context.service.setting.project.set(this.context.service.translation,this._oTrData.oSettings,this._oDocumentByPath).done();var n=this._oTrData.aLanguageList,r=n.map(function(e){return e.languageId}).indexOf(e);return r>=0?{id:n[r].languageId,name:n[r].languageName}:{id:"",name:""}},_getDefaultListFromSettings:function(){for(var e=[],t=this._oTrData.aLanguageList,n=0;n<t.length;n++)t[n].selected&&e.push({id:t[n].languageId,name:t[n].languageName});return e},_setSupportedLanguages:function(){var e=this,t=e._oTrData.oSettings.supportedLanguages.split(","),n=e._oTrData.oSettings.defaultLanguage;if(n&&-1===t.indexOf(n)){t.push(n);var r=this._oTrData.oSettings.supportedLanguages?","+n:n;this._oTrData.oSettings.supportedLanguages=this._oTrData.oSettings.supportedLanguages+r,this.context.service.setting.project.set(this.context.service.translation,this._oTrData.oSettings).done()}for(var i=0;i<t.length;i++){var o=t[i],a=e._oTrData.aLanguageList.map(function(e){return e.languageId}).indexOf(o);a>=0&&(e._oTrData.aLanguageList[a].selected=!0)}},_getTristateInitialState:function(){return 0===this._oTrData.aDefaultList.length?"Unchecked":this._oTrData.aDefaultList.length===this._oTrData.aLanguageList.length?"Checked":"Mixed"},saveProjectSetting:function(e,t,n){var r=this._oContent.getModel(),i=r?r.getProperty("/oTrData/oSettings"):null;if(i){var o=r.getProperty("/oTrData/oDomain/id");i.translationDomain=o;for(var a=r.getProperty("/oTrData/aLanguageList"),s="",u=0;u<a.length;u++)a[u].selected&&(s=s+a[u].languageId+",");s=s.substring(0,s.length-1),i.supportedLanguages=s;var c=r.getProperty("/oTrData/oDefault/id");i.defaultLanguage=c;var l=this;return this._getDocumentByPath(n).then(function(e){var t=l.context.service;return t.setting.project.set(t.translation,i,e)})}},_addDomainsToDropdownBox:function(e){var t=new sap.ui.core.ListItem({text:""});if(this._oDomainDropdownBox.addItem(t),e.domains)for(var n=0,r=e.domains.length;r>n;n++){var i=new sap.ui.core.ListItem({text:e.domains[n].name}).data("domain",e.domains[n]);this._oDomainDropdownBox.addItem(i)}},_onDomainSelected:function(e){var t=e.getParameter("selectedItem").data("domain"),n=this._oContent.getModel(),r={};t?(r.id=t.id,r.name=t.name):(r.id="",r.name=""),n.setProperty("/oTrData/oDomain",r)},_onCheckBoxClick:function(){this._registerChildren(this._oSelelctAllCheckBox),this._updateDefaultLanguageList(),this._updateDefaultLanguage(),this._updateDefaultDropBoxState()},_onTristateClick:function(){var e=this._oContent.getModel().getProperty("/oTrData/aLanguageList"),t=0;if("Checked"===this._oSelelctAllCheckBox.getSelectionState())for(t=0;t<e.length;t++)e[t].selected=!0;else for(t=0;t<e.length;t++)e[t].selected=!1;this._oContent.getModel().setProperty("/oTrData/aLanguageList",e),this._updateDefaultLanguageList(),this._updateDefaultLanguage(),this._updateDefaultDropBoxState()},_updateDefaultLanguageList:function(){for(var e=this._oContent.getModel().getProperty("/oTrData/aLanguageList"),t=[],n=0;n<e.length;n++)e[n].selected&&t.push({id:e[n].languageId,name:e[n].languageName});this._oContent.getModel().setProperty("/oTrData/aDefaultList",t)},_updateDefaultLanguage:function(){var e=this._oContent.getModel().getProperty("/oTrData/oDefault/id"),t=this._oContent.getModel().getProperty("/oTrData/aLanguageList"),n=this._oContent.getModel().getProperty("/oTrData/aDefaultList");1===n.length&&this._oContent.getModel().setProperty("/oTrData/oDefault",{id:n[0].id,name:n[0].name});var r=t.map(function(e){return e.languageId}).indexOf(e);r>=0&&!t[r].selected&&(n.length>0?this._oContent.getModel().setProperty("/oTrData/oDefault",{id:n[0].id,name:n[0].name}):this._oContent.getModel().setProperty("/oTrData/oDefault",{id:"",name:""}))},_updateDefaultDropBoxState:function(){var e=this._oContent.getModel().getProperty("/oTrData/aDefaultList");0===e.length?this._oContent.getModel().setProperty("/oTrData/bDefaultEditable",!1):this._oContent.getModel().setProperty("/oTrData/bDefaultEditable",!0)},_registerChildren:function(e){for(var t=this._oContent.getModel().getProperty("/oTrData/aLanguageList"),n=0,r=0;r<t.length;r++)t[r].selected&&n++;0===n?e.toggle("Unchecked"):n===t.length?e.toggle("Checked"):e.toggle("Mixed")},_onDefaultSelected:function(e){var t=e.oSource.getSelectedKey(),n=e.oSource.getValue(),r=this._oContent.getModel(),i={};t?(i.id=t,i.name=n):(i.id="",i.name=""),r.setProperty("/oTrData/oDefault",i)},_createUI:function(){var e=this;this._oDomainDropdownBox=new sap.ui.commons.DropdownBox({width:"100%",accessibleRole:sap.ui.core.AccessibleRole.Combobox,change:[e._onDomainSelected,e],value:"{/oTrData/oDomain/name}",visible:"{/oTrData/bInternalProject}"}),this._oTrData.oDomainsList&&this._addDomainsToDropdownBox(this._oTrData.oDomainsList),this._oLenguageTable=new sap.ui.table.Table({allowColumnReordering:!1,width:"100%",selectionMode:sap.ui.table.SelectionMode.None}),this._oLenguageTable.bindRows("/oTrData/aLanguageList"),this._oSelelctAllCheckBox=new sap.ui.commons.TriStateCheckBox({selectionState:"{/oTrData/sTristateState}"}),this._oSelelctAllCheckBox.attachChange(e._onTristateClick,e),this._oLenguageTable.addColumn(new sap.ui.table.Column({label:this._oSelelctAllCheckBox,sortProperty:"languageName",sorted:!0,template:new sap.ui.commons.CheckBox({change:[this._onCheckBoxClick,this]}).bindProperty("checked","selected"),width:"60px",tooltip:"{i18n>tlt_selectAll}",hAlign:"Center"})),this._oLenguageTable.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{i18n>lbl_availableLanguages}"}),template:(new sap.ui.commons.Label).bindProperty("text","languageName"),width:"300px",sortProperty:"languageName",filterProperty:"languageName"}));var t=new sap.ui.commons.Label({text:"{i18n>lbl_defaultLanguage}"});this._oDropdownDefault=new sap.ui.commons.DropdownBox({value:"{/oTrData/oDefault/name}",editable:"{/oTrData/bDefaultEditable}",change:[this._onDefaultSelected,this],width:"100%"});var n=new sap.ui.core.ListItem;n.bindProperty("text","name"),n.bindProperty("key","id"),this._oDropdownDefault.bindItems("/oTrData/aDefaultList",n);var r=new sap.ui.layout.form.SimpleForm("sf1",{layout:sap.ui.layout.form.SimpleFormLayout.ResponsiveGridLayout,emptySpanL:4,emptySpanM:2,emptySpanS:1,columnsL:1,labelSpanL:2,labelSpanM:3,maxContainerCols:1,content:[new sap.ui.commons.Label,new sap.ui.commons.TextView({text:"",visible:"{/oTrData/bInternalProject}"}),new sap.ui.commons.Label({text:"{i18n>lbl_applicationDomain}"}),this._oDomainDropdownBox,new sap.ui.commons.Label,new sap.ui.commons.TextView({text:""}),new sap.ui.commons.Label({text:"{i18n>lbl_selectLanguages}",tooltip:"{i18n>tlt_selectLanguages}"}),this._oLenguageTable,new sap.ui.commons.Label,new sap.ui.commons.TextView({text:""}),t,this._oDropdownDefault]}),i=new sap.ui.model.json.JSONModel;return r.setModel(i),this.context.i18n.applyTo(r),r}})}),define("sap.watt.platform.content/command/Close",[],function(){"use strict";return{execute:function(){return this.context.service.content.close()},isEnabled:function(){return this.context.service.content.getDocumentCount().then(function(e){return e>0})}}}),define("sap.watt.platform.content/command/CloseAll",[],function(){"use strict";return{execute:function(){return this.context.service.content.closeAll()},isEnabled:function(){return this.context.service.content.getDocumentCount().then(function(e){return e>0})}}}),define("sap.watt.platform.content/command/CloseOthers",[],function(){"use strict";return{execute:function(){return this.context.service.content.closeOthers()},isEnabled:function(){return this.context.service.content.getDocumentCount().then(function(e){return e>1})}}}),define("sap.watt.platform.content/command/Redo",[],function(){"use strict";return{execute:function(){return this.context.service.content.redo()},isAvailable:function(){return!0},isEnabled:function(){var e=this,t=e.context.service.perspective,n=[t.getCurrentPerspective(),t.getServiceAt("center_top")];return Q.all(n).spread(function(t,n){return"development"===t&&n===e.context.service.content?e.context.service.content.hasRedo():Q(!1)})}}}),define("sap.watt.platform.content/command/Undo",[],function(){"use strict";return{execute:function(){return this.context.service.content.undo()},isAvailable:function(){return!0},isEnabled:function(){var e=this,t=e.context.service.perspective,n=[t.getCurrentPerspective(),t.getServiceAt("center_top")];return Q.all(n).spread(function(t,n){return"development"===t&&n===e.context.service.content?e.context.service.content.hasUndo():Q(!1)})}}}),define("sap.watt.platform.content/command/NavigateBack",[],function(){"use strict";return{execute:function(){return this.context.service.content.navigateBack()},isAvailable:function(){return!0},isEnabled:function(){var e=this,t=e.context.service.perspective,n=[t.getCurrentPerspective(),t.getServiceAt("center_top")];return Q.all(n).spread(function(t,n){return"development"===t&&n===e.context.service.content?e.context.service.content.hasNavigateBack():!1})}}}),define("sap.watt.platform.content/command/NavigateForward",[],function(){"use strict";return{execute:function(){return this.context.service.content.navigateForward()},isAvailable:function(){return!0},isEnabled:function(){var e=this,t=e.context.service.perspective,n=[t.getCurrentPerspective(),t.getServiceAt("center_top")];return Q.all(n).spread(function(t,n){return"development"===t&&n===e.context.service.content?e.context.service.content.hasNavigateForward():!1})}}}),define("sap.watt.platform.content/command/NavigateToLastEdit",[],function(){"use strict";return{execute:function(){return this.context.service.content.navigateToLastEdit()},isAvailable:function(){return!0},isEnabled:function(){var e=this,t=e.context.service.perspective,n=[t.getCurrentPerspective(),t.getServiceAt("center_top")];return Q.all(n).spread(function(t,n){return"development"===t&&n===e.context.service.content?e.context.service.content.hasNavigateToLastEdit():!1})}}}),define("sap.watt.platform.content/command/Save",[],function(){"use strict";return{execute:function(){return this.context.service.content.save()},isAvailable:function(){return!0},isEnabled:function(){return this.context.service.selection.assertNotEmpty().then(function(e){return!!e[0].document.isDirty&&e[0].document.isDirty()})}}}),define("sap.watt.platform.content/command/SaveAll",[],function(){"use strict";return{execute:function(){return this.context.service.content.saveAll()},isAvailable:function(){return!0},isEnabled:function(){return this.context.service.content.isDirty()}}}),Navigation.prototype.getSelectedTabIndex=function(){return this.iSelectedTabIndex},Navigation.prototype.getLastEditTabIndex=function(){return this.iLastEditTabIndex},Navigation.prototype.setLastEditTabIndex=function(e){this.iLastEditTabIndex=e},Navigation.prototype.getSelectedTabId=function(){return this.iSelectedTabIndex>-1&&this.iSelectedTabIndex<this.aTabsHistory.length?this.aTabsHistory[this.iSelectedTabIndex]:""},Navigation.prototype.navigateToLastEdit=function(){return this.hasNavigateToLastEdit()?this.iLastEditTabIndex:-1},Navigation.prototype.navigateBack=function(){return this.hasNavigateBack()?(this.iSelectedTabIndex--,this.getSelectedTabIndex()):-1},Navigation.prototype.navigateForward=function(){return this.hasNavigateForward()?(this.iSelectedTabIndex++,this.getSelectedTabIndex()):-1},Navigation.prototype.addTab=function(e){if(e){if(this.hasTabs()&&this.aTabsHistory[this.aTabsHistory.length-1]===e)return;this.aTabsHistory.push(e),this.iSelectedTabIndex=this.aTabsHistory.length-1,this._handleMaxTabsLength()}},Navigation.prototype.removeTabs=function(e,t){if(!this.hasTabs()||!e)return-1;this.getLastEditTabIndex()===t?this.setLastEditTabIndex(-1):this.getLastEditTabIndex()>t&&this.iLastEditTabIndex--;for(var n=[],r=0;r<this.aTabsHistory.length;r++)r===this.iSelectedTabIndex&&(this.iSelectedTabIndex=this.aTabsHistory[r]===e||this.aTabsHistory[r]===n[n.length-1]?n.length-1:n.length),this.aTabsHistory[r]===e||0!==n.length&&n[n.length-1]===this.aTabsHistory[r]||n.push(this.aTabsHistory[r]);return this.aTabsHistory=n,-1===this.iSelectedTabIndex&&this.hasTabs()&&this.navigateForward(),this.iSelectedTabIndex},Navigation.prototype.selectTab=function(e){if(e&&-1!=e){var t=this.aTabsHistory.indexOf(e);if(-1===t)this.addTab(e);else if(t!==this.iSelectedTabIndex){var n=this.iSelectedTabIndex+1,r=this.aTabsHistory.length-this.iSelectedTabIndex;r>0&&this.aTabsHistory.splice(n,r),this.addTab(e)}}},Navigation.prototype.hasNavigateBack=function(){return this.hasTabs()&&this.iSelectedTabIndex>0?!0:!1},Navigation.prototype.hasNavigateToLastEdit=function(e){return this.iLastEditTabIndex>=0&&this.iLastEditTabIndex!=e?!0:!1},Navigation.prototype.hasNavigateForward=function(){return this.hasTabs()&&this.iSelectedTabIndex<this.aTabsHistory.length-1?!0:!1},Navigation.prototype.hasTabs=function(){return this.aTabsHistory.length>0?!0:!1},Navigation.prototype._handleMaxTabsLength=function(){this.aTabsHistory.length>this.MAX_TABS_LENGTH&&this.aTabsHistory.splice(0,1)},define("sap.watt.platform.content/navigation/Navigation",function(){}),function(){"use strict";jQuery.sap.require("sap.watt.platform.plugin.content.navigation.Navigation"),sap.ui.controller("sap.watt.platform.plugin.content.view.Content",{_EDITOR_AREA:".wattEditorArea",_bIsMaximized:!1,_mEditors:null,_oInitialRelocate:void 0,_oContext:null,_oContentServiceImpl:null,_aPromiseCloseQueue:[],_bFirstClosePromise:null,_oCloseTabQueue:new Q.sap.Queue,_oNavigation:new Navigation,onInit:function(){this._mEditors={}},_openTabs:function(e,t){var n=[],r=this;return jQuery.isArray(e)?(jQuery.each(e,function(t){var i=r._oContext.service.document.getDocumentByKeyString(e[t].keystring).then(function(n){return n?r._UpdateDocumentFromLocalStorage(n).then(function(){return r._oContext.service.content.getEditorProvider()}).then(function(r){return r.getSpecificEditor(n,e[t].editor)}).then(function(e){return[n,e]}):Q()}).fail(function(){return r._oContext.service.log.error("Content Persistence","Could not restore tab since editor was not restorable.",["system"]).done(),null});n.push(i)}),Q.all(n).then(function(e){var n=[];return e=e.filter(function(e){return e}),e.forEach(function(e){if(e){var t=e[0],i=e[1];i&&n.push(i.service.isRestorable().then(function(n){return n?r._oContext.service.content.open(t,i.service).thenResolve(e):null}).fail(function(){r._oContext.service.log.error("Content Persistence","Could not restore active tab since editor was not restorable.",["system"]).done()}))}}),0!==n.length?Q.all(n).then(function(e){if(e=e.filter(function(e){return e}),!t||e[e.length-1][0].getKeyString()===t.keystring&&e[e.length-1][1].service._sName===t.editor)return Q();var n;return e.forEach(function(e){e[0].getKeyString()===t.keystring&&e[1].service._sName===t.editor&&(n=e)}),n?r._oContext.self.getFocusElement().then(function(e){return r._oContext.service.focus.setFocus(e).then(function(){return r._oContext.service.content.open(n[0],n[1].service)})}):Q()}).fail(function(e){r._oContext.service.log.error("Content Persistence",e.message,["system"]).done()}):void 0})):Q()},_UpdateDocumentFromLocalStorage:function(e){var t=this;return this._oContext.service.dirtyDocumentsStorage.getContent(e).then(function(n){return n?e.setContent(n,t._oContext.self):void 0})},onAfterRendering:function(){var e=jQuery(this._EDITOR_AREA);this._oInitialRelocate&&(jQuery.each(this._oInitialRelocate,function(t,n){var r=$("#"+n),i=$(e.selector),o=$("#"+i[0].id);r.detach(),r.appendTo(o)}),this.showTab(this.getSelectedIndex())),this._oInitialRelocate=void 0,this.fireEvent("finishedContentRendering")},loadSettings:function(){return this._oContext.service.contentPersistence.load()},setContext:function(e,t){this._oContentServiceImpl=e,this._oContext=t},_getInitialArea:function(){return jQuery("#"+this.createId("wattContentInitialArea"))},_getNavBar:function(){return this.byId("tabStripNavBar")},getSelectedIndex:function(){return this._getNavBar().getSelectedIndex()},getSelectedTab:function(){var e=this._getNavBar().getSelectedItem();return sap.ui.getCore().byId(e)},getAllTabIndexes:function(){return this._getNavBar().getAllTabIndexes()},setTitle:function(e,t,n){this._getNavBar().setTitle(e,t,n)},setDirty:function(e,t){this._getNavBar().setDirtyStateTab(e,t)},setTabIcon:function(e,t){this._getNavBar().setTabIcon(e,t)},createTab:function(e,t){e.editorClass=this._createNewEditorDivWhenNotThere(e);var n=this._getNavBar().createTab(e,!1);return t&&this.showTab(n),n},_createNewEditorDivWhenNotThere:function(e){var t="wattEditor_"+e.editorControl.getId();if(!this._mEditors[t]||0===jQuery("."+t).length){var n=this.createId(t),r=jQuery("<div id='"+n+"container' class='wattEditorContainer "+t+"container'></div>").hide(),i=n+"_header",o=t+"_header",a=this._createHeaderDiv(i,o).hide(),s=jQuery("<div id='"+n+"' class='wattEditor "+t+"'></div>");sap.ui.getCore().getStaticAreaRef().appendChild(r[0]),r.append(a),r.append(s);var u=jQuery(this._EDITOR_AREA);u.append(r).hide().show(),e.editorControl.placeAt(s[0]),this._oInitialRelocate=this._oInitialRelocate||{},this._oInitialRelocate[t]=n+"container",this._mEditors[t]={div:r,header:a,headerId:i,headerClass:o,editorControl:e.editorControl}}return t},_createHeaderDiv:function(e,t){return jQuery("<div id='"+e+"' class='wattEditorHeader "+t+"'></div>")},hasTabs:function(){return this._getNavBar().hasTabs()},showTab:function(e,t){this._getNavBar().selectTab(e,t)},_toggleVisibility:function(e,t){this._toggleInitialArea(t);var n=this._mEditors[e];this._toggleHeader(n,t),this._toggleEditors(n)},_toggleInitialArea:function(e){-1===e?this._getInitialArea().show():this._getInitialArea().hide()},_toggleHeader:function(e,t){if(t>-1){var n=this._oContentServiceImpl._getTab(t),r=n.getDocument(),i=n.getDecorator(),o=this,a=Q.defer();i?i.getHeader(r).then(function(t){if(t){var n=o._createHeaderDiv(e.headerId,e.headerClass);e.header.replaceWith(n),e.header=n,t.placeAt(e.header)}else e.header.hide();a.resolve()}).done():(e.header.hide(),a.resolve()),a.promise.then(function(){o.fireEvent("tabHeaderHandled")}).done()}},_toggleEditors:function(e){this.forEachEditor(function(t){t===e?t.div.show():t.div.hide()})},onTabSelected:function(e){var t=e.getParameter("index"),n=e.getParameter("TabId"),r=e.getParameter("clicked"),i=e.getParameter("editorClass");this._oNavigation.selectTab(n),this._toggleVisibility(i,t),this.fireEvent("contentTabSelected",{index:t,clicked:r})},closeTab:function(e,t){var n=this;return this._oCloseTabQueue.next(function(){var r=n._getNavBar();void 0===e&&(e=r.getSelectedTabId());var i=r.getTabById(e);return void 0!==t&&!t||!i.dirty?r.closeTab(e):n._bFirstClosePromise?(n._aPromiseCloseQueue.push(e),void 0):(n._bFirstClosePromise=!0,n._dataLossDialog(e).then(function(){return n._handleClosePromisesQueue(n._aPromiseCloseQueue[0])},function(){return n._resetPromiseQueue()}))})},_handleClosePromisesQueue:function(e){var t=this;return 0==this._aPromiseCloseQueue.length?this._resetPromiseQueue():this._dataLossDialog(e).then(function(){return t._aPromiseCloseQueue.splice(0,1),t._handleClosePromisesQueue(t._aPromiseCloseQueue[0])},function(){return t._resetPromiseQueue()})},_resetPromiseQueue:function(){return this._bFirstClosePromise=!1,this._aPromiseCloseQueue=[],Q()},closeTabs:function(e,t){this._getNavBar().closeTabs(e,t)},closeOthers:function(e,t){this._getNavBar().closeOthers(e,t)},closeAll:function(e){this._getNavBar().closeAll(e)},getTabIdByIndex:function(e){return this._getNavBar().getTabIdByIndex(e)},onTabClose:function(e){var t=e.getParameter("closedIndex"),n=e.getParameter("closedTabId"),r=this._oNavigation.removeTabs(n,t),i=-1;r>-1&&(i=this._getNavBar().getTabIndexById(this._oNavigation.getSelectedTabId())),this.fireEvent("tabClose",{closedIndex:t,currentIndex:i,closedTabId:n}),this._getNavBar().getSelectedTabId()===n?this._getNavBar().selectTab(i,!0):this._getNavBar().selectTab(i,!1)},onBeforeTabClose:function(e){var t=e.getParameter("closedTabId");return this.closeTab(t)},onTabContextMenu:function(e){this.fireEvent("tabContextMenu",{tab:e.getParameter("tab"),mouseEvent:e.getParameter("mouseEvent"),index:e.getParameter("index"),clickedElement:e.getParameter("clickedElement")})},onTabDoubleClicked:function(e){this.fireEvent("tabSetPerspective",{tab:e.getParameter("tab"),index:e.getParameter("index"),maximized:e.getParameter("maximized")})},_dataLossDialog:function(e){var t=this,n=this._getNavBar(),r=n.getTabIndexById(e),i=this._oContext.i18n.getText("i18n","content_confirmSaveBeforeClose",[this._getNavBar().getTabTitle(r)]);return this._oContext.service.usernotification.confirm(i,!0).then(function(n){if("YES"===n.sResult&&t.fireEvent("tabSaveClose",{closedIndex:r,closedTabId:e}),"NO"===n.sResult)return t._getNavBar().closeTab(e);if("CANCEL"===n.sResult){var i=Q.defer();return i.reject(),i.promise}})},forEachEditor:function(e){for(var t in this._mEditors)e.call(this,this._mEditors[t])},onExit:function(){this.forEachEditor(function(e){e.editorControl&&e.editorControl.destroy()}),this._mEditors=[]},navigateToLastEdit:function(){var e=this._oNavigation.navigateToLastEdit();e>=0&&this.showTab(e,!0)},navigateBack:function(){var e=this._oNavigation.navigateBack();if(e>=0){var t=this._getNavBar().getTabIndexById(this._oNavigation.getSelectedTabId());this.showTab(t,!0)}},navigateForward:function(){var e=this._oNavigation.navigateForward();if(e>=0){var t=this._getNavBar().getTabIndexById(this._oNavigation.getSelectedTabId());this.showTab(t,!0)}},hasNavigateToLastEdit:function(){return this._oNavigation.hasNavigateToLastEdit(this.getSelectedIndex())},hasNavigateBack:function(){return this._oNavigation.hasNavigateBack()},hasNavigateForward:function(){return this._oNavigation.hasNavigateForward()},setLastEditTabIndex:function(){this._oNavigation.setLastEditTabIndex(this.getSelectedIndex())}})}(),define("sap.watt.platform.content/view/Content.controller",function(){}),function(){"use strict";jQuery.sap.declare("sap.watt.platform.plugin.content.control.NavigationBar"),jQuery.sap.require("sap.ui.ux3.NavigationBar"),sap.ui.ux3.NavigationBar.extend("sap.watt.platform.plugin.content.control.NavigationBar",{_iTabID:0,metadata:{publicMethods:["setTitle","createTab","closeTab","setDirtyStateTab","getDirtyStateTab","selectTab","setTabTitle","hasTabs","closeAll","getTabById","getTabTitle","getTabTitleById","getTabIndexById","getSelectedIndex","getSelectedTabId","closeTabs","getAllTabIndexes"],events:{tabClose:{},tabSelect:{},beforeTabClose:{},tabContextMenu:{},tabDoubleClicked:{}}},M_EVENTS:{tabClose:"tabClose",tabSelect:"tabSelect",beforeTabClose:"beforeTabClose",tabContextMenu:"tabContextMenu",tabDoubleClicked:"tabDoubleClicked"},init:function(){this.aTabs=[],this._iTabID=0,sap.ui.ux3.NavigationBar.prototype.init.apply(this,arguments),this.attachBrowserEvent("contextmenu",this.onTabContextMenu,this),this.attachBrowserEvent("dblclick",this.onTabDblClick,this),this.attachEvent("select",this.onTabSelect,this)
},onclick:function(e){this._handleActivation(e),this._handleSelectionStyle(e.target),this._handleClick(e)},_handleClick:function(e){var t=e.target?e.target:e.getParameter("target");if("sapUiTabClose"==t.className||2==e.which&&t.className.indexOf("sapUiUx3NavBarItem")>-1){var n=this._getItemIndex(jQuery(t).parentByAttribute("id")),r=t.parentElement.id;if(this.getDirtyStateTab(n))return this.fireBeforeTabClose({closedIndex:n,closedTabId:r}),void 0;this.closeTab(r)}else"LI"==t.tagName&&this.selectTab(this._getItemIndex(jQuery(t)[0]),!0)},hasTabs:function(){return this.aTabs.length>0},closeTab:function(e){var t=this.getTabIndexById(e);this.aTabs.splice(t,1),this.getItems()[t].destroy(),this.fireTabClose({closedIndex:t,closedTabId:e}),this._oContextTab=null},_invalidateSelectIndexes:function(){this.iSelectedItemIndex=void 0,this.iSelectedItemId=void 0},closeTabs:function(e,t){var n=function(e,t){var n=parseInt(e,10),r=parseInt(t,10);if(isNaN(n)||isNaN(r))throw new Error("number expected");var i=n-r;if(0===i)throw new Error("duplicate index");return i};e.sort(n);for(var r=e.length-1;r>-1;r--){var i=e[r],o=this.aTabs[i];t&&o.dirty?this.fireBeforeTabClose({closedIndex:i,closedTabId:o.sTabId}):this.closeTab(o.sTabId)}},closeAll:function(e){this._oContextTab=null,this.closeTabs(this.getAllTabIndexes(),e)},closeOthers:function(e,t){var n=this._getIndexForNavigationItem(e);if(n>-1){var r=this.getAllTabIndexes(),i=r.indexOf(n.toString());i>-1&&r.splice(i,1),this.closeTabs(r,t)}},selectTab:function(e,t){if(-1===e||!this.hasTabs())return this._invalidateSelectIndexes(),this.fireTabSelect({index:-1,TabId:-1,clicked:t,editorClass:void 0}),void 0;if(e>=0&&e<this.aTabs.length){this.iSelectedItemIndex=e;var n=this.aTabs[e];this.iSelectedItemId=n.sTabId;var r=this.getItems(),i=r[e];this.setSelectedItem(i),this.fireTabSelect({index:this.iSelectedItemIndex,TabId:this.iSelectedItemId,clicked:t,editorClass:n.editorClass})}},_getIndexForNavigationItem:function(e){var t=-1;return this.getItems().forEach(function(n,r){return n==e?(t=r,void 0):void 0}),t},_getItemIndex:function(e){var t;if(e.id&&-1==e.id.search("-close"))t=e.id;else{var n=jQuery(e).parentByAttribute("id");t=n.id}for(var r=0,i=this.getItems();r<i.length;r++)if(t==i[r].getId())return r;return-1},getDirtyStateTab:function(e){return this.aTabs[e].dirty},setDirtyStateTab:function(e,t){var n=this.aTabs[e];n.dirty=t,t?$(this.getItems()[e].getDomRef()).addClass("wattTabDirty"):$(this.getItems()[e].getDomRef()).removeClass("wattTabDirty"),this.setTitle(e,n.title,n.tooltip,!0)},setTabIcon:function(e,t){var n=this.getItems()[e];"error"===t&&n.setIcon("errorTabIcon"),"warning"===t&&n.setIcon("warningTabIcon"),t||n.setIcon("")},setTitle:function(e,t,n,r){var i=this.aTabs[e];if(i){i.title=t;var o=this._getDisplayTitle(t,i.dirty),a=this.getItems()[e];if(a.data("dirtyState",i.dirty),r&&a.getDomRef()){a.setProperty("text",o,!0);var s=a.getDomRef().getElementsByTagName("a")[0];s.textContent?s.textContent=o:s.innerText=o}else a.setText(o);void 0!=n&&(a.setTooltip(n),i.tooltip=n)}},_getDisplayTitle:function(e,t){return-1==e.indexOf("*")&&t&&(e="*"+e),t||(e=e.replace("*","")),e},setSelectedItem:function(e){sap.ui.ux3.NavigationBar.prototype.setSelectedItem.call(this,e),this._handleSelectionStyle(e.getDomRef())},_updateSelection:function(e){this._menuInvalid=!0;var t=$(("a#"+e).replace(/[.]/g,"\\."));t.attr("tabindex","0").attr("aria-checked","true"),t.parent().addClass("sapUiUx3NavBarItemSel"),t.parent().parent().children().each(function(){var t=$(this).children("a");t&&(t=t[0]),t&&t.id!=e&&-1==t.className.indexOf("Dummy")&&(jQuery(t).attr("tabindex","-1"),jQuery(t).parent().removeClass("sapUiUx3NavBarItemSel"),jQuery(t).attr("aria-checked","false"))});var n=t.parent().index();n>0&&n--,this._oItemNavigation.setSelectedIndex(n),this._scrollItemIntoView(t[0])},_showOverflowMenu:function(){var e=this._getOverflowMenu(),t=this.$("ofl").get(0);e.open(!0,t,sap.ui.core.Popup.Dock.EndTop,sap.ui.core.Popup.Dock.RightBottom,t)},_handleSelectionStyle:function(e){if(e&&"LI"==e.tagName){var t=$(("li#"+this._sIdTabSelected).replace("/[.]/g","\\."));t&&$(e)!==t&&t.removeClass("sapUiUx3NavBarItemSel"),$(e).addClass("sapUiUx3NavBarItemSel"),this._sIdTabSelected=$(e).attr("id")}},_getOverflowMenu:function(){var e=this.getAggregation("overflowMenu");if(!e||this._menuInvalid){e?e.destroyAggregation("items",!0):(e=new sap.ui.commons.Menu,e.addStyleClass("sapWattNavigationMenu"));for(var t=this._getCurrentItems(),n=this,r=this.getSelectedItem(),i=0;i<t.length;++i){var o=t[i],a=r==o.getId()?"-selected":"",s=new sap.ui.commons.MenuItem(o.getId()+"-overflowItem"+a,{text:o.getText(),tooltip:o.getTooltip(),visible:o.getVisible(),icon:r==o.getId()?"sap-icon://accept":null,select:function(e){return function(){n._handleActivation({target:{id:e.getId()},preventDefault:function(){}})}}(o)});e.addAggregation("items",s,!0)}this.setAggregation("overflowMenu",e,!0),this._menuInvalid=!1}return e},onAfterRendering:function(){sap.ui.ux3.NavigationBar.prototype.onAfterRendering.call(this);var e=$("#sapUiUx3NavBarOverflowBtn"),t="none"===e.css("display")?!1:!0;(this._newTabCreated||t)&&(this._updateSelection(this.getSelectedItem()),this._newTabCreated=!1)},renderer:function(e,t){if(t.getVisible()){var n=e,r=t.getId();n.addClass("sapUiUx3NavBar"),t.getToplevelVariant()&&n.addClass("sapUiUx3NavBarToplevel"),n.write("<nav"),n.writeControlData(t),n.writeClasses(),n.write(" role='navigation'><ul id='"+r+"-list' role='menubar' class='sapUiUx3NavBarList'>"),t._renderItems(n,t),n.write("</ul>"),n.write("<a id='"+r+"-ofb' tabindex='-1' role='presentation' class='sapUiUx3NavBarBack' >"),n.writeIcon("sap-icon://slim-arrow-left",[],{id:r+"-ofb"}),n.write("</a>"),n.write("<a id='"+r+"-off' tabindex='-1' role='presentation' class='sapUiUx3NavBarForward' >"),n.writeIcon("sap-icon://slim-arrow-right",[],{id:r+"-off"}),n.write("</a>"),n.write("<a id='"+r+"-ofl' tabindex='-1' role='presentation' class='sapUiUx3NavBarOverflowBtn' >"),n.writeIcon("sap-icon://menu2",[],{id:r+"-oflt"}),n.write("</a>"),n.write("</nav>")}},_renderItems:function(e,t){var n=t.getItems(),r=!1;n&&0!=n.length||(n=t.getAssociatedItems(),r=!0);var i=n.length;e.write("<li><a id='"+t.getId()+"-dummyItem' class='sapUiUx3NavBarDummyItem sapUiUx3NavBarItem' >&nbsp;</a></li>");for(var o=t.getSelectedItem(),a=0;i>a;a++){var s=r?sap.ui.getCore().byId(n[a]):n[a];if(s.getVisible()){var u=s.getId(),c=u==o,l=s.getTooltip_AsString();e.write("<li id='"+s.getId()+"' onmousedown='return false'"),e.addClass("webidetabcontextMenu"),c&&e.addClass("sapUiUx3NavBarItemSel"),s.data("dirtyState")&&e.addClass("wattTabDirty"),e.writeClasses();var p=s.getHref()||"javascript:void(0);";e.write(">"),e.write("<button id='"+s.getId()+'-close\'  type="button" tabindex= "-1" class="sapUiTabClose" title="'+"Close"+'"></button>'),e.write("<div class ="+s.getIcon()+"></div>"),e.write("<a "),e.writeElementData(s),e.write("href='"+p+"' aria-setsize='"+i+"' aria-posinset='"+(a+1)+"' role='menuitemradio' class='sapUiUx3NavBarItem'"),c&&e.write(" tabindex='0'"),e.write(" aria-checked='"+(c?"true":"false")+"'"),l&&e.write(" title='"+jQuery.sap.escapeHTML(l)+"'"),e.write(">"),e.write(jQuery.sap.escapeHTML(s.getText())),e.write("</a></li>")}}var f;f=t._bRtl?"right:"+t._iLastArrowPos:"left:"+t._iLastArrowPos,e.write("<span id='"+t.getId()+"-arrow' style='"+f+"px;"),e.write("display:none;"),e.write("' class='sapUiUx3NavBarArrow'></span>")},getSelectedIndex:function(){return this.iSelectedItemIndex},getRightClickedTabIndex:function(){if(this._oContextTab)for(var e=0;e<this.aTabs.length;e++)if(this.aTabs[e].sTabId==this._oContextTab.sId)return e},getSelectedTabId:function(){return this._oContextTab?this._oContextTab.sId:this.iSelectedItemId},getAllTabIndexes:function(){return Object.keys(this.aTabs)},createTab:function(e){void 0==e.dirty&&(e.dirty=!1),this._iNoTabsCreatedSoFar||(this._iNoTabsCreatedSoFar=0);var t=this.aTabs.length;this._isAnyTabSelected()&&(t=this.iSelectedItemIndex+1),this._isAnyTabSelected()&&this.iSelectedItemIndex!=this.getItems().length-1?this.aTabs.splice(this.iSelectedItemIndex+1,0,e):this.aTabs.push(e),sap.ui.ux3.NavigationItem.extend("editorTab",{metadata:{properties:{icon:{type:"string"}}}});var n=new editorTab,r=n.getId();if(e.sTabId=r,n.setKey("item"+(this._iNoTabsCreatedSoFar+1)),n.setText(e.title),n.setTooltip(e.tooltip),n.data("fullQualifiedName",e.fullQualifiedName),this._isAnyTabSelected()&&this.iSelectedItemIndex!=this.getItems().length-1){this.addAggregation("items",n,!0);var i=this.getItems();i.splice(this.iSelectedItemIndex+1,0,n),i.splice(i.length-1,1),this.mAggregations.items=i}else this.addAggregation("items",n,!0);return this.setTitle(t,e.title,e.tooltip),this._newTabCreated=!0,this._iNoTabsCreatedSoFar++,this.invalidate(),t},_isAnyTabSelected:function(){return"number"==typeof this.iSelectedItemIndex&&this.iSelectedItemIndex>=0},getTabTitle:function(e){var t=this.aTabs[e];return t?t.title:void 0},getTabTitleById:function(e){var t=this.getTabById(e);return t?t.title:void 0},getTabById:function(e){for(var t=null,n=0;n<this.aTabs.length;n++)if(t=this.aTabs[n],t.sTabId===e)return t;return null},getTabIndexById:function(e){for(var t=null,n=0;n<this.aTabs.length&&(t=this.aTabs[n],t.sTabId!==e);n++);return n},getTabIdByIndex:function(e){var t=this.aTabs[e];return t?t.sTabId:null},onTabSelect:function(e){var t=e.getParameter("item"),n=this.indexOfItem(t);this.selectTab(n,!0)},onTabContextMenu:function(e){e.preventDefault();for(var t=e.target;t&&!t.attributes.id;)t=t.parentElement;var n=this._getItemIndex(t);if(t&&t.attributes.id&&("LI"===t.nodeName||t.parentElement.classList.contains("webidetabcontextMenu"))){var r=t.attributes.id.value,i=sap.ui.getCore().byId(r);this._oContextTab=i,this.fireTabContextMenu({mouseEvent:e,tab:i,index:n,clickedElement:t})}},onTabDblClick:function(e){for(var t=e.target,n=this._getItemIndex(t);t&&!t.attributes.id;)t=t.parentElement;if(t&&t.attributes.id&&("LI"===t.nodeName||t.parentElement.classList.contains("webidetabcontextMenu"))){var r=sap.ui.getCore().byId(t.attributes.id.value);this.fireTabDoubleClicked({tab:r,index:n,clickedElement:t})}}})}(),define("sap.watt.platform.content/control/NavigationBar",function(){}),define("sap.watt.platform.content/service/Content",["sap/watt/common/plugin/platform/service/ui/AbstractPart","../navigation/Navigation","../view/Content.controller","../control/NavigationBar"],function(e){"use strict";var t=function(e,t,n,r){this._oDocument=e,this._oEditor=t,this._oControl=n,this._oDecorator=r};t.prototype={getDecorator:function(){return this._oDecorator},isOwner:function(e,t){return this.hasDocument(e)&&t===this.getEditor()},hasDocument:function(e,t){return e===this.getDocument()||t&&e.contains(this.getDocument())||e.getKeyString()===this.getDocument().getKeyString()},hasEditor:function(e){return e===this.getEditor()},show:function(e){var t=this,n=this.getDocument();return n?t.getEditor().open(n,null,null,null,e):void 0},getDocument:function(){return this._oDocument},setDocument:function(e){this._oDocument=e},getEditor:function(){return this._oEditor},getControl:function(){return this._oControl},save:function(){var e=this;return this.flush().then(function(){return e.getDocument().save()})},undo:function(){return this.getEditor().undo?this.getEditor().undo():Q(!1)},hasUndo:function(){return this.getEditor().hasUndo?this.getEditor().hasUndo():Q(!1)},redo:function(){return this.getEditor().redo?this.getEditor().redo():Q(!1)},hasRedo:function(){return this.getEditor().hasRedo?this.getEditor().hasRedo():Q(!1)},flush:function(){return this.getEditor().flush()}};var n=e.extend("sap.watt.common.plugin.content.service.ContentRegistry",{_fnConfirmUnsaveChanges:null,constructor:function(){this._oView=null,this._aTabs=null,this._oOpenQueue=new Q.sap.Queue,this._oCloseDefer=null,this._aStyles=null,this._oContextMenuGroup=null,this._oDecorator=null,this._oCurrentDocumentQueue=new Q.sap.Queue,this._autoSaveInterval=null},init:function(){this._aTabs=[],this._oView=sap.ui.view("contentAreaView",{viewName:"sap.watt.platform.plugin.content.view.Content",type:sap.ui.core.mvc.ViewType.XML}),this._oView.getController().setContext(this,this.context),this._getTabController().attachEvent("tabClose",this._onTabClose,this),this._getTabController().attachEvent("tabContextMenu",this._onTabContextMenu,this),this._getTabController().attachEvent("tabSetPerspective",this._onTabSetPerspective,this),this._getTabController().attachEvent("contentTabSelected",this._onTabSelect,this),this._getTabController().attachEvent("finishedContentRendering",this._onFinishedContentRendering,this),this._getTabController().attachEvent("tabSaveClose",this._onTabSaveClose,this),this.context.i18n&&this.context.i18n.applyTo(this._oView);var e=this;history.pushState(null,null,location.href),window.onpopstate=function(){history.go(1)},this._fnConfirmUnsaveChanges=function(){return e.isDirty()?e.context.i18n.getText("i18n","content_unsavedChanges"):void 0},this.context.service&&this.context.service.unloadHandler.addHandler(this._fnConfirmUnsaveChanges).done()},configure:function(t){var n=this;return this._oEditorProvider=t.editorProvider,this._aStyles=t.styles,e.prototype.configure.apply(this,arguments).then(function(){return n._oDecorator=t.decorator,t.contextMenu?n.context.service.commandGroup.getGroup(t.contextMenu).then(function(e){n._oContextMenuGroup=e}):void 0})},getEditorProvider:function(){return this._oEditorProvider},showIfOpen:function(e){var t=this.getDocuments();if(t.indexOf(e)>-1){var n=this._getTabsOfDocument(e),r=n[0];return this._showTabWithoutSelection(r,!0)}},_bRestored:!1,getContent:function(){var t=this;return e.prototype.getContent.apply(this,arguments).then(function(){var e=[];return t._bRestored||(t._bRestored=!0,e.push(t.context.service.contentPersistence.getTabs().then(function(e){return t.context.service.contentPersistence.getActiveTab().then(function(n){return t._oView.getController()._openTabs(e,n)}).then(function(){t.context.service.dirtyDocumentsStorage.clearStorage().done()})}))),t._aStyles&&e.push(t.context.service.resource.includeStyles(t._aStyles).then(function(){return t._oView})),Q.all(e).thenResolve(t._oView)})},getFocusElement:function(){var e=this.getCurrentEditor();return e||(e=this._oView),e},getSelection:function(){var e=this.getCurrentDocument();return e?{document:e}:[]},_getCurrentTab:function(){return this._oCurrentTab},getCurrentEditor:function(){var e=this._getCurrentTab();return e?e.getEditor():null},_isCurrentEditor:function(e){if(!e)return Q(!1);var t=this.getCurrentEditor();return t.instanceOf("sap.watt.common.plugin.multieditor.service.MultiEditor")?t.containsEditor(e):Q(this.getCurrentEditor()._sName===e._sName)},getDocumentCount:function(){return Object.keys(this._getDocumentsMap()).length},_getDocumentsMap:function(){for(var e={},t=0;t<this._aTabs.length;t++){var n=this._getTab(t).getDocument(),r=n.getEntity().getKeyString();void 0===e[r]&&(e[r]=n)}return e},getDocuments:function(e){var t=[],n=e?!!e:!1,r=this._getDocumentsMap();for(var i in r)n?r[i].isDirty()&&t.push(r[i]):t.push(r[i]);return t},getCurrentDocument:function(){var e=this._getCurrentTab();return e?e.getDocument():null},isCurrentDocumentDirty:function(){var e=this.getCurrentDocument();return e?e.isDirty():!1},_isCurrentDocument:function(e){return this.getCurrentDocument()&&(this.getCurrentDocument()===e||this.getCurrentDocument().getKeyString()===e.getKeyString())},hasDocuments:function(){return this.getDocumentCount()>0},open:function(e,t){var n=this;return this._oOpenQueue.next(function(){return n._open(e,t)})},_open:function(e,n){var r=this,i=-1,o=e.getExtInfo();if(o&&o.external||e._bExtDoc)return this._openExt(e,n);var a=r._getTabIndex(e,n);return-1===a?n.getContent().then(function(o){i=r._getTabController().createTab({title:r.context.i18n.getText("i18n","loading"),tooltip:"",fullQualifiedName:e.getEntity().getFullPath(),dirty:e.isDirty(),editorControl:o},!1);var a=new t(e,n,o,r._oDecorator);return r._aTabs.splice(i,0,a),r._storePersistence(e,n,i),r._showTab(i,!0)}):this._getTabController().getSelectedIndex()!==a?this._showTab(a,!0):Q()},_storePersistence:function(e,t,n){var r=this;t.isRestorable().then(function(i){return i?r.context.service.contentPersistence.add({keyString:e.getKeyString(),editor:t._sName},n):void 0}).done()},_openExt:function(e,n){var r=this,i=r._getExtTabIndex(e,n);return-1===i?n.getContent().then(function(i){var o=e.getExtInfo(),a=o&&o.title?o.title:e.getTitle(),s=o&&o.tooltip?o.tooltip:e.getEntity().getFullPath(),u=r._getTabController().createTab({title:a,tooltip:s,fullQualifiedName:e.getEntity().getFullPath(),dirty:e.isDirty(),editorControl:i},!1),c=new t(e,n,i,o.decoratorObj);return r._aTabs.splice(u,0,c),r._showTab(u,!0)}):this._getTabController().getSelectedIndex()!==i?this._showTab(i,!0):void 0},close:function(e,t,n){if(this._oCloseDefer=Q.defer(),e&&t){var r=this._getTabIndex(e,t);if(r>-1){var i=this._getTabController().getTabIdByIndex(r);this._getTabController().closeTab(i,n)}else this._closeDocument(e,!0),this._oCloseDefer.resolve()}else e?(this._closeDocument(e,!0),this._oCloseDefer.resolve()):(this._getTabController().closeTab(),this._oCloseDefer.resolve());return this._oContextTab=null,this._oCloseDefer.promise},_closeDocument:function(e,t,n){var r;r=n&&n.length>0?n:this._getTabsOfDocument(e,!0),this._getTabController().closeTabs(r,t)},closeAll:function(){this._isClosingAllTabs=!0,this._getTabController().closeAll(!0),this._oContextTab=null},closeOthers:function(){var e=this._getTabController();if(e.hasTabs())if(this._oContextTab)e.closeOthers(this._oContextTab,!0);else{var t=e.getSelectedTab();e.closeOthers(t,!0)}this._oContextTab=null},isClickedTabSelected:function(){if(this._oContextTab){var e=this._getTabController(),t=e.getSelectedTab();return t==this._oContextTab}return!1},save:function(){var e=this,t=this._getCurrentTab();return t.save().fail(function(t){return e.context.service.usernotification.alert(t.message)})},saveAll:function(){var e=this,t=[],n=this.getDocuments(!0);return n&&n.length>0?this.context.service.usernotification.liteInfo(e.context.i18n.getText("content_saving"),!1).fin(function(){for(var r=0;r<n.length;r++){var i;i=e.getCurrentDocument()===n[r]?e._flushCurrentEditor().then(n[r].save()):n[r].save(),t.push(i)}return Q.all(t).then(function(){return e.context.service.log.info("Content","All changes have been saved in all open files",["user"]).done(),e.context.service.usernotification.liteInfo(e.context.i18n.getText("content_allChangesSaved"),!0)}).fail(function(t){return e.context.service.usernotification.liteInfo(e.context.i18n.getText("content_saveAllError"),!0).fin(function(){throw t})})}):Q()},undo:function(){var e=this._getCurrentTab();e.undo()},hasUndo:function(){var e=this._getCurrentTab();return e?e.hasUndo():!1},redo:function(){var e=this._getCurrentTab();e.redo()},hasRedo:function(){var e=this._getCurrentTab();return e?e.hasRedo():!1},go:function(){var e=this._getCurrentTab();return e?e.hasRedo():!1},isDirty:function(){for(var e=0;e<this._aTabs.length;e++){var t=this._getTab(e),n=t.getDocument();if(n&&n.isDirty())return!0}return!1},_getTabIndex:function(e,t){for(var n=0;n<this._aTabs.length;n++){var r=this._getTab(n);if(r&&r.isOwner(e,t))return n}return-1},_compareExtDocs:function(e,t){var n=0;return e&&t&&e.getExtInfo()&&t.getExtInfo()&&e.getExtInfo().origin==t.getExtInfo().origin&&e.getExtInfo().index==t.getExtInfo().index&&(n=1),n},_getExtTabIndex:function(e,t){for(var n=0;n<this._aTabs.length;n++){var r=this._getTab(n),i=this._getTab(n).getDocument();if(1===this._compareExtDocs(e,i)&&r&&r.isOwner(i,t))return n}return-1},_getTabController:function(){return this._oView.getController()},_getTab:function(e){return this._aTabs[e]},_getTabById:function(e){for(var t=null,n=0;n<this._aTabs.length;n++)if(t=this._aTabs[n],t.sTabId==e)return t;return null},_tabExists:function(e){return-1!==this._aTabs.indexOf(e)},_removeTab:function(e){var t=this,n=this._getTab(e);this._aTabs.splice(e,1),0==t._aTabs.length&&(t._oCurrentTab=null);var r=n.getDocument();this._getDocumentsMap()[r.getEntity().getKeyString()]||r.isDirty()&&r.revert(this.context.self).done();var i=n.getEditor();return this.context.service.focus.detachFocus(i).then(function(){return i.close(n.getDocument())}).then(function(){return 0==t._aTabs.length?t.context.service.focus.setFocus(t.context.self):void 0}).then(function(){return Q.all([t.context.event.fireSelectionChanged(),t.context.event.fireSelectionProviderChanged({selectionProvider:t.getSelectionProvider()})])})},_onFinishedContentRendering:function(){this.context.event.fireFinishedRendering().done()},_onTabSelect:function(e){var t=this,n=e.getParameter("clicked");if(1==n){var r=e.getParameter("index");r>-1&&this._oOpenQueue.next(function(){if(t._getTab(r)){var e=t._getTab(r),n=e.getEditor()._sName,i=e.getDocument().getKeyString();return t.context.service.contentPersistence.setActiveTab({editor:n,keyString:i}).done(),t._showTab(r).then(function(){return t.context.event.fireTabSelected({indexSelected:r})})}return Q()}).done()}},_onTabContextMenu:function(e){this._oContextTab=e.getParameter("tab"),this.context.event.fireSelectionChanged().done();var t=e.getParameter("mouseEvent");this.context.service.contextMenu.open(this._oContextMenuGroup,t.pageX,t.pageY).done()},_onTabSetPerspective:function(){var e=this;this.context.service.perspective.getAreaForService(this.context.self).then(function(t){return e.context.service.perspective.isAreaMaximized(t).then(function(n){return e.context.service.perspective.setAreaMaximized(t,!n).then(function(){return e.context.event.fireTabDoubleClicked({maximized:!n})})})}).then(function(){return e.context.service.focus.setFocus(e.getCurrentEditor())}).done()},_onTabClose:function(e){var t=this,n=e.getParameter("closedIndex"),r=e.getParameter("currentIndex");e.getParameter("closedTabId");var i=this._getTab(n),o=i.getDocument();if(this.context.service.contentPersistence.remove({keyString:o.getKeyString(),editor:i._oEditor._sName}).done(),-1==r&&this.context.service.perspective.getAreaForService(this.context.self).then(function(e){return t.context.service.perspective.isAreaMaximized(e).then(function(n){return n?t.context.service.perspective.setAreaMaximized(e,!n).then(function(){}):void 0})}).done(),r>-1)var i=this._getTab(r);else-1===r&&this.context.service.contentPersistence.clear().done();this._removeTab(n).then(function(){t._oCloseDefer&&t._oCloseDefer.resolve(),t.context.event.fireTabClosed({indexClosed:n,document:o}).done()}).done()},_onTabSaveClose:function(e){var t=e.getParameter("closedIndex"),n=e.getParameter("closedTabId"),r=this._getTabController(),i=this._getTab(t).getDocument();i.save().then(function(){r.setDirty(t,i.isDirty()),r.closeTab(n)}).done()},_flushCurrentEditor:function(){var e=this._getCurrentTab();return e?e.flush():Q()},_showTabWithoutSelection:function(e,t){var n=this;return this._oOpenQueue.next(function(){var r=n._getTab(e);return r.show(!0).then(function(){return n._oCurrentTab=r,t?n._getTabController().showTab(e):void 0}).fail(function(e){return n._handleTabOpeningError(r,e)})})},_handleTabOpeningError:function(e,t){var n=e.getDocument(),r=e.getEditor(),i=t&&t.message||this.context.i18n.getText("i18n","content_unexpectedEditorError");this.context.service.log.error("Content",i,["user"]).done();var i=this.context.i18n.getText("i18n","content_openFileError",[n.getEntity().getName(),i]),o=this;return this.context.service.usernotification.alert(i).then(function(){return o.close(n,r,!1)})},_showTab:function(e,t){if(this._getTabController().getAllTabIndexes().length<=0)return Q();var n=this._tabExists(this._oCurrentTab)?this._oCurrentTab:{flush:function(){return Q()}},r=this._getTab(e);if(!r)return Q();var i=r.getDocument(),o=this;return n.flush().then(function(){return!t||"ui5wysiwygeditor"!=r.getEditor()._sName&&"compare"!=r.getEditor()._sName||o._getTabController().showTab(e),o.context.event.fireBeforeShow({document:i,editor:r.getEditor()}).done(),r.show()}).then(function(){return o._oCurrentTab=r,sap.ui.getCore().applyChanges(),Q.all([r.getEditor().getTitle(),r.getEditor().getTooltip(),o.context.service.focus.attachFocus(r.getEditor()),o.context.event.fireSelectionProviderChanged({selectionProvider:r.getEditor()})]).spread(function(n,i){o._getTabController().setTitle(e,n,i),!t||"ui5wysiwygeditor"===r.getEditor()._sName&&"compare"===r.getEditor()._sName||o._getTabController().showTab(e)})}).then(function(){o.context.service.command.invalidateAll().done()}).fail(function(e){return o._handleTabOpeningError(r,e)})},refresh:function(e){if(!e||"deleted"!==e.name){var t=this.getDocuments(),n=[];jQuery.each(t,function(e,t){n.push(t.needToReloadCheck())}),Q.all(n).done()}},getSelectionProvider:function(){return this._tabExists(this._oCurrentTab)?this._oCurrentTab.getEditor():null},refreshTab:function(e){return this._showTab(e,!0)},_getTabsOfDocument:function(e,t,n){for(var r=[],i=0;i<this._aTabs.length;i++){var o=this._getTab(i);o&&o.hasDocument(e,t)&&(r.push(i),n&&n.call(this,o,i))}return r},onDocumentChanged:function(e){var t,n,r,i=e.params.document,o=e.params.changeType,a=e.params.options;if("content"===o&&a){var s=a.source;if(s&&s._sName===this.context.self._sName)return;var u=this;this._oOpenQueue.next(function(){return u._isCurrentDocument(i)?u._isCurrentEditor(s).then(function(e){return e?(u._getTabController().setLastEditTabIndex(),Q()):u.getCurrentEditor().open(i,!0)}):Q()}).done()}else if("renamed"===o){var c=e.params.newDocument;if(c.getEntity().getFileExtension()!==i.getEntity().getFileExtension())return this.close(i).done(),void 0;for(t=this._getTabsOfDocument(i),n=0;n<t.length;n++){r=t[n];var l=c.getTitle(),p=c.getEntity().getFullPath();this._getTab(r).setDocument(c),this._getTabController().setTitle(r,l,p),this._getTabController().getSelectedIndex()===r?this._getTab(r).getEditor().close(i).then(function(){this._oOpenQueue.next(function(){return this._getTab(r).getEditor().open(c)})}.bind(this)).done():this._getTab(r).getEditor().close(i).done()}}},onDocumentStateChanged:function(e){for(var t=e.params.document,n=this._getTabsOfDocument(t),r=0;r<n.length;r++){var i=n[r];this._getTabController().setDirty(i,t.isDirty())}n.length>0&&this.context.service.command.invalidateAll().done()},setTabIcon:function(e){for(var t=this.getCurrentDocument(),n=this._getTabsOfDocument(t),r=0;r<n.length;r++){var i=n[r];this._getTabController().setTabIcon(i,e)}},onDocumentDeleted:function(e){var t=e.params.document;this._closeDocument(t,!1)},onEditorUMStateChanged:function(){this.context.service.command.invalidateAll().done()},onRDELoad:function(){var e=this;this.context.service.aceeditor.config.getUserSetting().then(function(t){t.autoSave&&e.startAutoSave()}).done()},stopAutoSave:function(){this._autoSaveInterval&&clearInterval(this._autoSaveInterval)},startAutoSave:function(){var e=this;this._autoSaveInterval=setInterval(function(){e.isDirty()&&e.saveAll().fail(function(t){e.context.service.usernotification.alert(t.message).done(),e.stopAutoSave()}).done()},3e4)},hasNavigateToLastEdit:function(){return this._getTabController().hasNavigateToLastEdit()},hasNavigateBack:function(){return this._getTabController().hasNavigateBack()},hasNavigateForward:function(){return this._getTabController().hasNavigateForward()},navigateToLastEdit:function(){var e=this;return e._getTabController().navigateToLastEdit(),!0},navigateBack:function(){var e=this;return e._getTabController().navigateBack(),!0},navigateForward:function(){return this._getTabController().navigateForward(),!0}});return n}),define("sap.watt.platform.content/service/ContentServicePersistence",["sap/watt/common/error/AssertError"],function(e){"use strict";return{_CHANGED_THRESHOLD_IN_MS:2e3,_VERSION:"1",_aTabs:[],_oActiveTab:null,_scheduled:!1,_sNode:"sap.watt.common.content.service.ContentServicePersistence",configure:function(){return this._load()},_load:function(){var e=this;return this.context.service.preferences.get(this._sNode).then(function(t){t&&t.version==e._VERSION&&($.isArray(t.tabs)?(e._aTabs=t.tabs,e._removeDuplicates(),t.activetab?-1===e._exists(t.activetab.keystring,t.activetab.editor)?(e._oActiveTab=null,e._scheduleSave()):e._oActiveTab=t.activetab:e._oActiveTab=null):e.clear())}).fail(function(t){e.context.service.log.error("Content Persistence",t.message,["system"]).done()})},_removeDuplicates:function(){for(var e=!1,t=0;t<this._aTabs.length;t++)for(var n=t+1;n<this._aTabs.length;n++)this._aTabs[t].keystring===this._aTabs[n].keystring&&this._aTabs[t].editor===this._aTabs[n].editor&&(this._aTabs.splice(n,1),e=!0);e&&this._scheduleSave()},_exists:function(e,t){for(var n=0;n<this._aTabs.length;n++)if(e===this._aTabs[n].keystring&&t===this._aTabs[n].editor)return n;return-1},add:function(t,n){var r=this;if("string"!=typeof t.keyString||"string"!=typeof t.editor)throw new e("Just string values to be added to persistence in content service persistence.");var i={keystring:t.keyString,editor:t.editor};-1===r._exists(t.keyString,t.editor)&&(n&&n<r._aTabs.length?r._aTabs.splice(n,0,i):r._aTabs.push(i),r._scheduleSave())},getTabs:function(){var e=[];return jQuery.isArray(this._aTabs)&&(e=this._aTabs.slice(0)),e},getActiveTab:function(){return this._oActiveTab},setActiveTab:function(e){e&&(this._oActiveTab={editor:e.editor,keystring:e.keyString}),this._scheduleSave()},remove:function(e){var t=this,n=t._exists(e.keyString,e.editor);-1!==n&&this._aTabs.splice(n,1),this._scheduleSave()},clear:function(){this._aTabs=[],this._oActiveTab=null,this._save()},_scheduleSave:function(){var e=this;this._scheduled||(setTimeout(function(){e._scheduled=!1,e._save()},this._CHANGED_THRESHOLD_IN_MS),this._scheduled=!0)},_save:function(){var e={};e.version=this._VERSION,e.tabs=this._aTabs,e.activetab=this._oActiveTab,this.context.service.preferences.set(e,this._sNode).fail(function(e){console.error("content persistence: settings could not be written! "+e)})}}}),define("sap.watt.platform.content/service/DirtyDocumentsStorage",[],function(){"use strict";var e="sap.watt.platform.content/service/dirtyDocumentStorage_",t=function(e){r();for(var t=0;t<e.length;t++)i(e[t])},n=function(e){var t=null,n=a(localStorage.getItem,[e]);return n&&(t=JSON.parse(n),a(localStorage.removeItem,[e])),t},r=function(){if(o())for(var t=0;t<localStorage.length;t++){var n=localStorage.key(t);0===n.indexOf(e)&&a(localStorage.removeItem,[n])}},i=function(t){if(o()){var n=t.getEntity().getFullPath(),r=e+n,i=t.getDocumentMetadata().changedOn;t.getContent().then(function(e){var t={};t.unsavedContent=e,t.changedOn=i;var n=JSON.stringify(t);a(localStorage.setItem,[r,n])}).done()}else console.log("No Web Storage support")},o=function(){return"undefined"!=typeof Storage},a=function(e,t){try{return e.apply(localStorage,t)}catch(n){console.log(n.message)}},s=function(t){if(o()){var r=t.getEntity().getFullPath(),i=e+r,a=n(i);if(a){var s=t.getDocumentMetadata().changedOn;if(s<=a.changedOn)return a.unsavedContent}}else console.log("No Web Storage support");return null};return{save:t,getContent:s,clearStorage:r}}),define("sap.watt.platform.ajaxrequest/service/AjaxRequest",[],function(){"use strict";var e,t=function(){return e=void 0,Q()},n=function(t){var n={type:"GET",contentType:t.headers["Content-Type"],data:null,headers:{"Content-Type":t.headers["Content-Type"],"X-CSRF-Token":"Fetch"}};return Q.sap.ajax(t.url,n).spread(function(n,r){e=r.getResponseHeader("X-CSRF-Token");var i=jQuery.extend(!0,t,{});return i.headers["X-CSRF-Token"]=e,i})},r=function(e,t,n,r){var i=t.responseText;if(void 0===i||""===i)i=t.statusText;else if(0===i.indexOf("<html")){var o=$("<div></div>");o.html(i);var a=$("h1",o);a&&a.length>0&&(i=a[0].innerHTML)}r.reject({action:e,status:t.status,info:i})},i=function(t,i,a,s,u,c,l,p){var f=Q.defer(),d=null;u&&c&&(d="Basic "+o.encode(u+":"+c));var h={Accept:"*/*","Content-Type":"application/json",Authorization:d,"Suppress-Authentication-Popup":!0,"X-CSRF-Token":e?e:"Fetch"};
p&&(h={"Content-Type":"application/json","X-CSRF-Token":e?e:"Fetch"}),l===!0&&(h["X-ResetBackEndSession"]="dummyValue",h["X-CSRF-Token"]="Fetch",e=void 0);var m,g={type:a,url:i,data:JSON.stringify(s),headers:h,cache:!1},v=this;return v.request=g,Q(m=$.ajax(v.request)).then(function(t){console.log("success:"+JSON.stringify(t)),e||(e=m.getResponseHeader("X-CSRF-Token")),f.resolve(t)}).fail(function(e,i){403===e.status&&e.responseText&&e.responseText.indexOf("CSRF")>=0?n(v.request).then(function(e){Q(m=$.ajax(e)).then(function(e){f.resolve(e)}).fail(function(e,n,i){r(t,e,n,i,f)}).done()}):r(t,e,i,f)}).done(),f.promise},o={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,r,i,o,a,s,u="",c=0;for(e=this._utf8_encode(e);c<e.length;)t=e.charCodeAt(c++),n=e.charCodeAt(c++),r=e.charCodeAt(c++),i=t>>2,o=(3&t)<<4|n>>4,a=(15&n)<<2|r>>6,s=63&r,isNaN(n)?a=s=64:isNaN(r)&&(s=64),u=u+this._keyStr.charAt(i)+this._keyStr.charAt(o)+this._keyStr.charAt(a)+this._keyStr.charAt(s);return u},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(192|r>>6),t+=String.fromCharCode(128|63&r)):(t+=String.fromCharCode(224|r>>12),t+=String.fromCharCode(128|63&r>>6),t+=String.fromCharCode(128|63&r))}return t}},a=function(){return e?!0:!1};return{serviceCall:i,resetCsrfToken:t,isCSRFTokenValidForLastService:a}}),define("sap.watt.platform.contextmenu/service/ContextMenu",["sap/watt/common/error/AssertError"],function(){"use strict";var e=function(){};return e.prototype=jQuery.extend(e.prototype,{_oContextMenu:null,_oMenuService:null,init:function(){this._oMenuService=this.context.service.menu,this._oContextMenu=(new sap.ui.commons.Menu).addStyleClass("sapWattContextMenu"),this._oOpenQueue=new Q.sap.Queue},_open:function(e,t){var n=this;if(0==this._oContextMenu.getItems().length)return Q();var r=e,i=t,o=r,a=i,s=$("body").width(),u=$("body").height();n._oContextMenu.getDomRef()||n._oContextMenu.open(!1,void 0,void 0,void 0,void 0,"-2000 -2000","none");var c=n._oContextMenu.$().context.clientWidth,l=n._oContextMenu.$().context.clientHeight;if(0==l)return Q.delay(0).then(function(){return n._open(e,t)});var p=c>s-r?c:0,f=l>u-i?l:0;o=-1*(s/2-r)+c/2+2-p,a=-1*(u/2-i)+l/2+2-f;var d=i-l;return 0>d&&0!=f&&(a-=d),n._oContextMenu.close(),n._oContextMenu.open(!1,void 0,void 0,void 0,void 0,o+" "+a,"flip"),n._oContextMenu.attachBrowserEvent("contextmenu",function(e){e.preventDefault()}),Q()},close:function(){this._oContextMenu.close()},open:function(e,t,n){var r=this;return this._oOpenQueue.next(function(){return r._oMenuService.populate(r._oContextMenu,e).delay(0).then(function(){return r._open(t,n)})})}}),e}),function(){"use strict";sap.ui.controller("sap.watt.platform.plugin.toprightpane.view.TopRightPaneContainer",{onInit:function(){},addItem:function(e,t){t?this.byId("topRightPaneContainerLayout").insertContent(e,t):this.byId("topRightPaneContainerLayout").addContent(e)}})}(),define("sap.watt.platform.toprightpane/view/TopRightPaneContainer.controller",function(){}),define("sap.watt.platform.toprightpane/service/TopRightPane",["sap/watt/common/plugin/platform/service/ui/AbstractPart","../view/TopRightPaneContainer.controller"],function(e){"use strict";var t=e.extend("sap.watt.platform.plugin.toprightpane.service.TopRightPane",{_oView:null,_currentDisplayedService:null,_oCloseBtn:null,configure:function(e){var t=this;e.items.sort(this._sortByPrio);var n=[];jQuery.each(e.items,function(e,t){n.push(t.service.getContent())}),Q.all(n).then(function(e){for(var n=0;n<e.length;n++){var r=e[n];if(null!==r)for(var i=0;i<r.length;i++)t._oView.getController().addItem(r[i],n)}}).done()},init:function(){this._oView=sap.ui.view("toprightpane.Container",{viewName:"sap.watt.platform.plugin.toprightpane.view.TopRightPaneContainer",type:sap.ui.core.mvc.ViewType.XML}).addStyleClass("toprightpane"),this._oView.attachAfterRendering(function(){document.getElementById("toprightpane.Container").removeAttribute("style")})},_sortByPrio:function(e,t){return e.prio-t.prio},getContent:function(){return this._oView}});return t}),define("sap.watt.platform.decoration/service/Decoration",[],function(){"use strict";var e=function(e,t){return e.prio-t.prio};return{_aDecorators:[],init:function(){},configure:function(t){this._aDecorators=this._aDecorators.concat(t.decorators),this._aDecorators.sort(e)},areDecoratorsAvailable:function(){return this._aDecorators.length>0},decorate:function(e,t){var n=[],r=[];return jQuery.each(this._aDecorators,function(n,i){r.push(i.service.decorate(e,t))}),Q.all(r).then(function(e){return jQuery.each(e,function(e,t){t&&n.push(t)}),n})},updateDecorations:function(e,t,n){return e instanceof Array||(e=e?[e]:[]),this.context.event.fireDecorationsChanged({documents:e,updateChildren:t,event:n})}}}),define("sap.watt.platform.help/service/Help",[],function(){"use strict";return{_sUrl:null,init:function(){},configure:function(e){var t=e.url;this._sUrl=t?t.replace("{{help_url}}",sap.watt.getEnv("help_url")):null},getHelpUrl:function(){return this._sUrl}}}),define("sap.watt.platform.filefilter/command/ShowHiddenFiles",[],function(){"use strict";return{execute:function(){var e=this;return this.context.service._filefilter.hide.unhideDocuments().then(function(){return e.context.service.command.invalidateAll()})},isAvailable:function(){var e=this;return this.context.service._filefilter.hide.supportParameterExists().then(function(t){return t?!1:e.context.service._filefilter.hide.getHiddenState().then(function(e){return e})})},isEnabled:function(){return!0}}}),define("sap.watt.platform.filefilter/command/HideFiles",[],function(){"use strict";return{execute:function(){var e=this;return this.context.service._filefilter.hide.hideDocuments().then(function(){return e.context.service.command.invalidateAll()})},isAvailable:function(){var e=this;return this.context.service._filefilter.hide.supportParameterExists().then(function(t){return t?!1:e.context.service._filefilter.hide.getHiddenState().then(function(e){return!e})})},isEnabled:function(){return!0}}}),define("sap.watt.platform.filefilter/service/FileFilter",[],function(){"use strict";return{_mConfig:{},_oReadOnlyRegExp:null,_oIgnoreService:null,_oSourceControlIgnoreRegExp:null,_oProjectTypeService:null,configure:function(e){e&&(this._mConfig=e,e.ignore&&(this._oIgnoreService=e.ignore.service),this._oReadOnlyRegExp=this._createRegularExpression(this._mConfig.alwaysReadOnly),this._oSourceControlIgnoreRegExp=this._createRegularExpression(this._mConfig.sourceControlIgnore),this._oProjectTypeService=e.projectTypeHandler.service)},getProjectTypeService:function(){return this._oProjectTypeService},filterMetadata:function(e,t){var n=[];if(!t)return e;for(var r=0;r<e.length;r++){var i=e[r];n.push(i.path)}var o=t.hidden;return void 0!==o?(o=o===!0,this._filterHidden(e,n,o)):e},_prepareDocument:function(e,t){var n=e.getDocumentMetadata(),r=e.getEntity(),i=r.getFullPath(),o=this._oReadOnlyRegExp&&i&&this._oReadOnlyRegExp.test(i);return o=o===!0,(!t.instanceOf("sap.watt.common.service.remote.FileDAO")||o)&&(n.readOnly||(n.readOnly=!0)),this.context.service._filefilter.hide.isHidden([i]).then(function(t){e.setHidden(t[i])})},_filterHidden:function(e,t,n){var r=[];return this.context.service._filefilter.hide.isHidden(t).then(function(t){for(var i=0;i<e.length;i++){var o=e[i];t[o.path]===n&&r.push(o)}return r})},getHiddenConfiguration:function(){return{alwaysHidden:this._mConfig.alwaysHidden,defaultHidden:this._mConfig.defaultHidden}},getExportConfiguration:function(){return{neverExport:this._mConfig.neverExport,defaultDoNotExport:this._mConfig.defaultDoNotExport}},_createRegularExpression:function(e){for(var t=[],n=0;n<e.length;n++)for(var r=e[n].regExps,i=0;i<r.length;i++){var o=r[i];try{RegExp(o),t.push(o)}catch(a){this.context.service.log.warn("hideManager",a.message,["user"]).done()}}if(t.length>0){var s=t[0];if(t.length>1)for(var u=1;u<t.length;u++)s=s.concat("|"+t[u]);return new RegExp(s)}return null}}}),define("sap.watt.platform.filefilter/service/FileFilterHide",[],function(){"use strict";return{_bHidden:!0,_sUnhideParameter:null,_UNHIDE_ALL:"all",_UNHIDE_DEFAULT:"default",_sNode:"sap.watt.platform.filefilter.FileFilterHide",_oFilters:{"":{alwaysHidden:!1,defaultHidden:!1}},_oProjectTypeToRegExpMap:{},_UNHIDE_PARAM_NAME:"sap-ide-unhide",_oProjectToProjectTypesMap:{},init:function(){var e=jQuery.sap.getUriParameters().get(this._UNHIDE_PARAM_NAME);e&&(e=e.toLowerCase(),(e===this._UNHIDE_ALL||e===this._UNHIDE_DEFAULT)&&(this._sUnhideParameter=e))},configure:function(){var e=this;return this._initRegExp().then(function(){return Q.spread([e.context.service.preferences.get(e._sNode),e._initProjectToProjectTypes()],function(t){return t&&t.hidden===!1?e.unhideDocuments():void 0})})},_setProjectProjectTypes:function(e){var t=this;return this.context.service.filefilter.getProjectTypeService().then(function(n){return n.getProjectTypes(e).then(function(n){t._oProjectToProjectTypesMap[e.getEntity().getFullPath()]=n})})},_initProjectToProjectTypes:function(){var e=this,t=[];return this.context.service.filesystem.documentProvider.getRoot().then(function(n){return n.getFolderContent().then(function(n){for(var r=0;r<n.length;r++){var i=n[r];t.push(e._setProjectProjectTypes(i))}return Q.all(t)})})},_initRegExp:function(){var e=this;return this.context.service.filefilter.getHiddenConfiguration().then(function(t){var n=t.alwaysHidden;e._createProjectTypeToRegExpMap(n,"alwaysHidden");var r=t.defaultHidden;e._createProjectTypeToRegExpMap(r,"defaultHidden")})},_createProjectTypeToRegExpMap:function(e,t){if(e.length>0){for(var n={},r=0;r<e.length;r++)for(var i=e[r],o=i.projectTypes||["other"],a=0;a<o.length;a++)for(var s=o[a],u=i.regExps,c=0;c<u.length;c++){var l=u[c];try{RegExp(l);var p=n[s];p?(p=p.concat("|").concat(l),n[s]=p):n[s]=l}catch(f){this.context.service.log.warn("_filefilter.hide",f.message,["user"]).done()}}for(o=Object.keys(n),a=0;a<o.length;a++)s=o[a],l=n[s],n[s]=new RegExp(l);this._oProjectTypeToRegExpMap[t]=n}},onUpdateProjectTypes:function(e){var t=e.params.projectDocument;this._updateProjectFiltersAndDocuments(t).done()},_isPathHidden:function(e){var t=this._getFilter(e);return t.alwaysHidden?!0:this._sUnhideParameter!==this._UNHIDE_DEFAULT&&this.getHiddenState()?t.defaultHidden:!1},isHidden:function(e){for(var t=this,n={},r=0;r<e.length;r++){var i=e[r];n[i]=!1}if(this._sUnhideParameter===this._UNHIDE_ALL)return n;for(var o=0;o<e.length;o++){var a=e[o];n[a]=t._isPathHidden(a)}return n},_changeDocumentHiddenProperty:function(e,t){var n=e.getEntity().getFullPath(),r=this._getFilter(n);return r&&r.defaultHidden?e.setHidden(t):void 0},_updateFolderDocuments:function(e){var t=this;return this.context.service.document.getContainedDocuments(e).then(function(n){var r=[],i=[];r.push(e.getEntity().getFullPath());for(var o=0;o<n.length;o++){var a=n[o];r.push(a.getEntity().getFullPath())}var s=t.isHidden(r);for(o=0;o<n.length;o++){a=n[o];var u=s[o];i.push(a.setHidden(u))}return Q.all(i)})},_handleDocuments:function(e){var t=this;return this.context.service.document.getDocumentByPath("").then(function(n){return t.context.service.document.getContainedDocuments(n).then(function(n){for(var r=[],i=0;i<n.length;i++){var o=n[i];r.push(t._changeDocumentHiddenProperty(o,e))}return Q.all(r).then(function(){t._bHidden=e})})})},_getProjectPath:function(e){var t=e.indexOf("/",1);return-1===t?e:e.substr(0,t)},_getProjectTypes:function(e){var t=this._getProjectPath(e);return this._oProjectToProjectTypesMap[t]},_addFilter:function(e){var t=this,n={},r=t._oProjectTypeToRegExpMap.alwaysHidden,i=t._oProjectTypeToRegExpMap.defaultHidden,o=r&&r.other?r.other:null,a=i&&i.other?i.other:null;if(n.alwaysHidden=o&&o.test(e),n.defaultHidden=a&&a.test(e),n.alwaysHidden)return this._oFilters[e]=n,n;var s=this._getProjectTypes(e);return n.alwaysHidden=t._calculateHidden(s,r,e),n.alwaysHidden?(t._oFilters[e]=n,n):n.defaultHidden?(t._oFilters[e]=n,n):(n.defaultHidden=t._calculateHidden(s,i,e),t._oFilters[e]=n,n)},_calculateHidden:function(e,t,n){e=e||[];for(var r=0;r<e.length;r++){var i=e[r].id,o=t[i],a=o&&o.test(n);if(a)return!0}return!1},_getFilter:function(e){return this._oFilters[e]?this._oFilters[e]:this._addFilter(e)},_updateProjectFiltersAndDocuments:function(e){var t=this;return this._setProjectProjectTypes(e).then(function(){return t._updateFolderFilters(e).then(function(){return t._updateFolderDocuments(e)})})},addFilters:function(e){var t=this,n=e.params.document,r=n.getEntity();r.isProject()?this._updateProjectFiltersAndDocuments(n).done():r.isFile()?t._updateFileFilter(r):t._updateFolderFilters(n).then(function(){return t._updateFolderDocuments(n)}).done()},_updateFileFilter:function(e){var t=e.getFullPath();return this._addFilter(t)},_updateFolderFilters:function(e){var t=this;return e.getCurrentMetadata?e.getCurrentMetadata(!0).then(function(e){for(var n=0;n<e.length;n++){var r=e[n];t._addFilter(r.path)}}):Q()},_deleteFilter:function(e){delete this._oFilters[e]},deleteFilters:function(e){var t=e.params.document,n=t.getEntity();if(this._deleteFilter(n.getFullPath()),n.isFolder())for(var r=n.getFullPath()+"/",i=Object.keys(this._oFilters),o=0;o<i.length;o++){var a=i[o];0===a.indexOf(r)&&this._deleteFilter(a)}},_saveHidden:function(e){var t={};return t.hidden=e,this.context.service.preferences.set(t,this._sNode)},_executeDocumentsChange:function(e){return Q.all([this.context.service.filefilter.context.event.fireHiddenChanged({hidden:e}),this._handleDocuments(e),this._saveHidden(e)])},hideDocuments:function(){return this._executeDocumentsChange(!0)},unhideDocuments:function(){return this._executeDocumentsChange(!1)},getHiddenState:function(){return this._bHidden},supportParameterExists:function(){return null!==this._sUnhideParameter}}}),define("sap.watt.platform.importExport/command/Import",[],function(){"use strict";return{execute:function(){var e=this;return this._getSelectedDocument().then(function(t){return e.context.service.import.openImportUI(t)})},isAvailable:function(){return!0},isEnabled:function(){return!0},_getSelectedDocument:function(){return this.context.service.repositorybrowser.getSelection().then(function(e){return Array.isArray(e)&&1===e.length?e[0].document:void 0})}}}),define("sap.watt.platform.importExport/command/Export",[],function(){"use strict";return{execute:function(){var e=this.context.service.selection,t=this;return e.assertNotEmpty().then(function(e){return t.context.service.export.exportDocument(e[0].document)})},isAvailable:function(){return!0},isEnabled:function(){return this.context.service.repositorybrowserUtils.isSingleNoRootSelection()}}}),define("sap.watt.platform.importExport/service/Export",[],function(){"use strict";var e={exportDocument:function(e,t){var n=this;return this.context.service.progress.startTask("Export"," Export process").then(function(r){return"folder"===e.getType()?e.exportZip().then(function(r){return t||(t=e.getEntity().getName()+".zip"),n._downLoadBlob(r,e,t)}).fail(function(e){return n.context.service.usernotification.alert(e.message)}).fin(function(){n.context.service.progress.stopTask(r).done()}):"file"===e.getType()?e.createFileBlob().then(function(r){return t||(t=e.getEntity().getName()),n._downLoadBlob(r,e,t)}).fail(function(e){return n.context.service.usernotification.alert(e.message)}).fin(function(){n.context.service.progress.stopTask(r).done()}):void 0})},_downLoadBlob:function(e,t,n){var r=document.createElement("a");if(r.href=(window.URL||window.webkitURL).createObjectURL(e),r.download=n,sap.ui.Device.browser.chrome||sap.ui.Device.browser.firefox)document.body.appendChild(r),r.click(),document.body.removeChild(r);else if(sap.ui.Device.browser.internet_explorer)window.navigator.msSaveOrOpenBlob(e,r.download);else if(sap.ui.Device.browser.safari){var i=r.href,o=new XMLHttpRequest;o.responseType="blob",o.onload=function(){var e=o.response,t=new FileReader;t.onload=function(){var e=t.result;r.href=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)},t.readAsDataURL(e)},o.open("GET",i),o.send()}else window.open(r.href);return Q(n)}};return e}),define("sap.watt.platform.importExport/service/Import",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{_maxFileSizeInBytesPromise:void 0,_oModel:null,_oRepositoryBrowserControl:null,_oFileUploader:null,_oImportDialog:null,_oProjectToRefresh:null,_nQuantityOfCreatedFolders:0,configure:function(e){e&&e.styles&&this.context.service.resource.includeStyles(e.styles).done(),this._maxFileSizeInBytesPromise=this.context.service.system.getQuota()},_getMaxFileSizeBytes:function(){return this._maxFileSizeInBytesPromise.then(function(e){return e&&e.defaultMaxEntitySize?e.defaultMaxEntitySize:void 0})},onDestinationPathLiveChange:function(e){var t=e.mParameters.liveValue.trim();this._oModel.setProperty("/importDestinationPath",t),this._changeOkButtonState(t)},_initFileUploader:function(){var e=this._oImportDialog.getContent()[0];this._oFileUploader=e.getContent()[1];var t=this._oModel.getProperty("/maxFileSize");t>0&&this._oFileUploader.setMaximumFileSize(t),this._oFileUploader.attachFileSizeExceed(this._onFileSizeExceed,this)},_onFileSizeExceed:function(e){this._oFileUploader.clear();var t=this._oModel.getProperty("/maxFileSize");0===t&&(t=this._oFileUploader.getMaximumFileSize());var n=e.mParameters.fileName,r=Math.floor(e.mParameters.fileSize);this._setErrorStyleClassAndTooltip(this._oFileUploader,"file_size_exceed",[t,n,r])},_getImportToTextField:function(){var e=this._oImportDialog.getContent()[0],t=e.getContent()[3];return t},_isDestinationPathValid:function(e){var t=this._getImportToTextField();if("/"===e||""===e)return this._setErrorStyleClassAndTooltip(t,"import_to_empty");if(-1!==e.indexOf("//")||-1!==e.indexOf("\\"))return this._setErrorStyleClassAndTooltip(t,"import_to_invalid");if(e.lastIndexOf("/")===e.length-1)return this._setErrorStyleClassAndTooltip(t,"import_to_invalid");var n=0;0===e.indexOf("/")&&(n=1);for(var r=e.split("/");n<r.length;n++){var i=r[n];if(!this._checkPathPartAllowed(i))return this._setErrorStyleClassAndTooltip(t,"import_to_invalid")}return this._setConfirmedStyleClassAndTooltip(t,t.getValue())},_checkPathPartAllowed:function(e){var t=/^[a-zA-Z0-9\.\-_@]*[a-zA-Z0-9\-_@]+$/,n=t.exec(e);return!!n},onExtractArchiveChange:function(){this._changeOkButtonState()},_isFileValid:function(e){if(!e)return this._setErrorStyleClassAndTooltip(this._oFileUploader,"file_empty_name");var t=this._oModel.getProperty("/extractArchiveChecked");return this._isZipFile(e)&&t||this._checkPathPartAllowed(e.name)?this._setConfirmedStyleClassAndTooltip(this._oFileUploader,this._oFileUploader.oFilePath.getValue()):this._setErrorStyleClassAndTooltip(this._oFileUploader,"file_invalid_name")},_setErrorStyleClassAndTooltip:function(e,t,n){return n=n?n:[],e.setTooltip(this.context.i18n.getText(t,n)),e.removeStyleClass("inputConfirmed"),e.addStyleClass("inputError"),!1},_setConfirmedStyleClassAndTooltip:function(e,t){return e.setTooltip(t),e.removeStyleClass("inputError"),e.addStyleClass("inputConfirmed"),!0},onBrowse:function(t){var n=null,r=null,i=t.oSource.oFileUpload.files;if(0===i.length)this._oModel.setProperty("/fileToImport",null);else if(1===i.length&&(n=i[0],this._oModel.setProperty("/fileToImport",n),this._oModel.setProperty("/extractArchiveVisible",!1),this._isZipFile(n))){this._oModel.setProperty("/extractArchiveVisible",!0);var o=n.name.substring(0,n.name.length-4);r=this._oModel.getProperty("/importDestinationPath"),"/"===r?(r+=o,this._oModel.setProperty("/importDestinationPath",r)):e.endsWith(r.toLowerCase(),"/"+o.toLowerCase())||(r=r+"/"+o,this._oModel.setProperty("/importDestinationPath",r))}this._changeOkButtonState(r,n)},_getRepositoryBrowserControl:function(){if(this._oRepositoryBrowserControl)return Q(this._oRepositoryBrowserControl);var e=this;return this.context.service.repositoryBrowserFactory.create(null,{filters:["......."]}).then(function(t){return t.getContent().then(function(t){return t.setHeight("200px"),t.setWidth("100%"),t.setLayoutData(new sap.ui.layout.GridData({span:"L12 M12 S12"})),t&&t.getContent().length>0&&t.getContent()[0].attachSelect(e.onRepositorySelectFile,e),e._oRepositoryBrowserControl=t,e._oRepositoryBrowserControl})})},onWorkspace:function(e){var t=e.oSource.getText(),n=this.context.i18n.getText("importFileDialog_hideworkspace"),r=this.context.i18n.getText("importFileDialog_showworkspace"),i=this,o=e.oSource.oParent;t===n?(o.removeContent(this._oRepositoryBrowserControl),this._oModel.setProperty("/workspaceButtonText",r)):this._getRepositoryBrowserControl().then(function(e){o.addContent(e),i._oModel.setProperty("/workspaceButtonText",n)}).done()},_changeOkButtonState:function(e,t){e&&""!==e||(e=this._oModel.getProperty("/importDestinationPath")),t||(t=this._oModel.getProperty("/fileToImport"));var n=this._isDestinationPathValid(e,t),r=this._isFileValid(t);n&&r?this._oModel.setProperty("/okEnabled",!0):this._oModel.setProperty("/okEnabled",!1)},onRepositorySelectFile:function(e){var t=this;if(e&&e.getParameter){var n=e.getParameter("node");if(n){var r=n.mProperties.tag;this.context.service.document.getDocumentByKeyString(r).then(function(e){if(e){t._oModel.setProperty("/selectedDocument",e);var n=e.getEntity().getFullPath();""===n&&(n="/"),t._oModel.setProperty("/importDestinationPath",n),t._changeOkButtonState(n)}}).done()}}},_getDestinationFolder:function(){var t=this,n=this._oModel.getProperty("/importDestinationPath");e.startsWith(n,"/")&&(n=n.substr(1)),e.endsWith(n,"/")&&(n=n.substring(0,n.length-1));var r=n.split("/");return this.context.service.filesystem.documentProvider.getRoot().then(function(e){return t._createDestinationFolder(e,0,r)})},_createDestinationFolder:function(e,t,n){var r=this,i=n[t];return this._getFolderByName(e,i).then(function(e){return t<n.length-1?r._createDestinationFolder(e,++t,n):e})},_getFolderByName:function(e,t){var n=this,r=e.getEntity().getFullPath()+"/"+t;return this.context.service.document.getDocumentByPath(r).then(function(r){return r?r:e.createFolder(t).then(function(e){return n._nQuantityOfCreatedFolders++,1===n._nQuantityOfCreatedFolders&&e.getEntity().isProject()&&(n._oProjectToRefresh=e),e})})},onOk:function(){var e=this,t=this._oFileUploader.oFileUpload.files[0];this._oImportDialog.close(),this.context.service.progress.startTask("import","Import started.").then(function(n){return e._showInfoMessage("importSent","import_started"),e._getDestinationFolder().then(function(n){return e._executeImport(n,t).then(function(){return e._nQuantityOfCreatedFolders>1&&e._oProjectToRefresh?e._oProjectToRefresh.refresh().then(function(){e._showInfoMessage("importCompletedSuccessfully","import_finished")}):(e._showInfoMessage("importCompletedSuccessfully","import_finished"),void 0)})}).fin(function(){return e._nQuantityOfCreatedFolders=0,e._oProjectToRefresh=null,e.context.service.progress.stopTask(n)})}).fail(function(t){var n=e.context.i18n.getText("import_failed",[t]);e.context.service.usernotification.alert(n).done(),e.context.service.log.error("import",n,["user"]).done()}).done()},_showInfoMessage:function(e,t){this.context.service.log.info("import",this.context.i18n.getText("i18n",e),["user"]).done(),this.context.service.usernotification.liteInfo(this.context.i18n.getText("i18n",t)).done()},_executeImport:function(e,t){if(this._isZipFile(t)){var n=this._oModel.getProperty("/extractArchiveChecked");return n?this._executeZipFileImport(e,t):this._executeFileImport(e,t,!1)}return this._executeFileImport(e,t,!0)},_executeFileImport:function(e,t,n){var r=this;return n=n===!0,e.objectExists(t.name).then(function(i){if(i){var o=r.context.i18n.getText("import_file_overwrite");return r.context.service.usernotification.confirm(o).then(function(i){return i.bResult?r._importFileAndFireEvent(e,t,n):(r._oImportDialog.open(),void 0)})}return r._importFileAndFireEvent(e,t,n)})},_importFileAndFireEvent:function(e,t,n){return this._fireClose("ExecuteImport"),this._importFile(e,t,n)},_executeZipFileImport:function(e,t){var n=this;return e.getCurrentMetadata().then(function(r){if(0!==r.length){var i=n.context.i18n.getText("import_files_overwrite",[e.getEntity().getName()]);return n.context.service.usernotification.confirm(i).then(function(r){return r.bResult?n._importZipFileAndFireEvent(e,t):(n._oImportDialog.open(),void 0)})}return n._importZipFileAndFireEvent(e,t)})},_importZipFileAndFireEvent:function(e,t){var n=this;return this._fireClose("ExecuteImport"),this._importZipFile(e,t).then(function(){return n.context.service.repositorybrowser.setSelection(e,!0,!0)})},_isZipFile:function(t){if(t){var n=t.name.toLowerCase();return e.endsWith(n,".zip")}return!1},onClose:function(e){var t=e.mParameters.actionName;t&&(this._oImportDialog.fireEvent("service.import.ImportDialog",{actionName:t}),this._oRepositoryBrowserControl=null)},_fireClose:function(e){this._oImportDialog.fireClosed({actionName:e}),this._oImportDialog.isOpen()&&this._oImportDialog.close()},onCancel:function(){this._fireClose("CancelImport")},_importFile:function(e,t,n){var r=this;return e.importFile(t).then(function(e){var t=[];return n===!0&&t.push(r.context.service.document.open(e)),t.push(r.context.service.repositorybrowser.setSelection(e,!0)),t.push(r.context.service.document.notifyExternalChange(e,"import")),Q.all(t)})},_importZipFile:function(e,t){var n=this;return this.context.service.usagemonitoring.startPerf("importExport","importZip").done(),e.importZip(t,!0).then(function(){return n.context.service.document.notifyExternalChange(e,"import").then(function(){n.context.service.usagemonitoring.report("importExport","importZip",t.size).done()})})},_getSelectedFolder:function(e){return e&&e.getEntity().isFile()?e.getParent():Q(e)},_createDataModel:function(e){var t=this,n=new sap.ui.model.json.JSONModel,r={};return r.fileNameToImport="",r.importDestinationPath="",r.fileUploaderTooltip="",r.fileToImport=null,r.extractArchiveVisible=!1,r.extractArchiveChecked=!0,this._getMaxFileSizeBytes().then(function(i){return r.maxFileSize=Math.floor(i/1048576),r.workspaceButtonText=t.context.i18n.getText("importFileDialog_showworkspace"),r.okEnabled=!1,t._getSelectedFolder(e).then(function(e){return e&&(r.selectedDocument=e,r.importDestinationPath=e.getEntity().getFullPath(),""===r.importDestinationPath&&(r.importDestinationPath="/")),n.setData(r),n})})},openImportUI:function(e){var t=this,n=Q.defer();return this._createDataModel(e).then(function(e){var r=sap.ui.xmlfragment("sap.watt.platform.plugin.importExport.fragment.ImportDialog",t);t._oImportDialog=sap.ui.getCore().byId(r.getId()),t.context.i18n.applyTo(t._oImportDialog),t._oImportDialog.attachClosed(t.onClose,t),t._oModel=e,t._oImportDialog.setModel(e),t._oImportDialog.attachEvent("service.import.ImportDialog",function(e){n.resolve(e.mParameters.actionName)}),t._initFileUploader(),t._oImportDialog.open()}).done(),n.promise}}}),define("sap.watt.platform.focus/service/Focus",[],function(){"use strict";return{_currentFocusElement:null,_aFocusElements:[],_detachedService:null,init:function(){this._iTabindex=-1},configure:function(){},setFocus:function(e){var t=this;return this.attachFocus(e).then(function(){return t._fireFocus(e)})},getFocus:function(){return this._currentFocusElement},_isDialog:function(e){var t=this,n=!1;return this._getFocusElement(e).then(function(e){return e&&0!=e.length||(n=!0),t._iterateElements(e,function(e){e&&e.parentElement&&"sap-ui-static"==e.parentElement.getAttribute("id")&&(n=!0)}),n})},_checkIfDialog:function(){},attachFocus:function(e){var t=this;return this._getFocusElement(e).then(function(n){return t._iterateElements(n,function(n){return t._attachFocus(n,e)})})},_attachFocus:function(e,t){var n=this._getElementFocusIndex(e);if(!this._aFocusElements["index"+n]&&e&&t){if(this._iTabindex++,e.setAttribute("tabindex",this._iTabindex),e.setAttribute("focusindex",this._iTabindex),this._aFocusElements["index"+this._iTabindex]=t,e instanceof HTMLIFrameElement){if(!this._isIFrameAccesible(e))return;e=e.contentWindow}return e.addEventListener("focus",jQuery.proxy(this._focusHandler,this),!0)}},_isIFrameAccesible:function(e){try{return e.contentWindow.addEventListener,!0}catch(t){return!1}},detachFocus:function(e){var t=this;return this._detachedService=e,this._isDialog(e).then(function(e){e&&t.context.event.fire$dialogClosed().done()}).done(),this._getFocusElement(e).then(function(n){var r=[];return t._iterateElements(n,function(n){if(n){if(n instanceof HTMLIFrameElement){if(!t._isIFrameAccesible(n))return;n=n.contentWindow}r.push(t._removeFocusElement(e).then(function(){return n.removeEventListener("focus",jQuery.proxy(t._focusHandler,t),!0),t._detachedService=null,Q()}))}}),Q.all(r)})},_focusHandler:function(e){var t="",n=this;if("focus"===e.type){var r=e.currentTarget.frameElement?e.currentTarget.frameElement:e.currentTarget,i=e.target,o=r.getAttribute("focusindex"),a=i.getAttribute?i.getAttribute("focusindex"):-1;t=this._aFocusElements["index"+a]?this._aFocusElements["index"+a]:this._aFocusElements["index"+o]}this._currentFocusElement!==t&&this._detachedService!==t&&(this._currentFocusElement=t,this.context.event.fireChanged().then(function(){return n._isDialog(t)}).then(function(e){return e?n.context.event.fire$dialogOpened():void 0}).done())},_fireFocus:function(e){var t=this;return this._getFocusElement(e).then(function(e){return e?t._iterateElements(e,function(e){return e.focus()}):void 0})},_getElementFocusIndex:function(e){return e?e.getAttribute("focusindex"):void 0},_getFocusElement:function(e){var t=this,n=[];return e?e.instanceOf&&e.instanceOf("sap.watt.common.service.ui.Part")?e.getFocusElement().then(function(e){return t._getFocusElement(e)}):(this._iterateElements(e,function(e){var r=t._checkElement(e);r&&n.push(t._checkElement(e))}),0==n.length?Q(null):Q.all(n)):Q()},_checkElement:function(e){var t;return e.getDomRef?t=e.getDomRef():(e instanceof HTMLElement||e instanceof HTMLIFrameElement)&&(t=e),t&&t.id&&""!==t.id&&(t=document.getElementById(t.id)),t},_removeFocusElement:function(e){var t=this;return this._getFocusElement(e).then(function(e){return t._iterateElements(e,function(e){var n=t._getElementFocusIndex(e);return t._aFocusElements.splice("index"+n,1)})})},_iterateElements:function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else t(e)}}}),define("sap.watt.platform.toolbar/service/Toolbar",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";var t=function(e){throw new Error("Toolbar: "+e)},n=e.extend("sap.watt.platform.plugin.toolbar.service.Toolbar",{_aItems:[],_oCommandService:null,_oCommandGroupService:null,_oMenuService:null,_oToolbar:null,_mItemToCommandMapping:{},_mSplitButtonMapping:{},_mComboBoxGroupMapping:{},init:function(){jQuery.sap.require("sap.ui.core.IconPool"),this._oMenuService=this.context.service.menu,this._oCommandGroupService=this.context.service.commandGroup,this._oCommandService=this.context.service.command,this._oToolbar=new sap.ui.commons.Toolbar},getContent:function(){var e=this;return this.context.service.usernotificationbar.getContent().then(function(t){for(var n=0;n<t.length;n++)e._oToolbar.addRightItem(t[n]);return e._oToolbar})},configure:function(e){var n=this,n=this;return this._oCommandGroupService.getGroup(e.group).then(function(r){return r||t("Configured group '"+e.group+"' is not defined"),n.setGroup(r)})},setGroup:function(e){var t=this;return this._oGroup=e,this._oMenuService.populate(this._oToolbar,e,{bFilter:!1,fnVisitor:function(e,n){if(n.startsSection&&t._oToolbar.addItem(new sap.ui.commons.ToolbarSeparator({design:sap.ui.commons.ToolbarSeparatorDesign.FullHeight})),"action"==n.type)t._oToolbar.addItem(t._createButton(n));else{if("menu"==n.type)return n.defaultAction&&(t._mSplitButtonMapping[t._createId(n.defaultAction.id)]=t._createId(n.id),t._oToolbar.addItem(t._createButton(n.defaultAction))),t._oMenuService.createMenu(n.group).then(function(e){t._oToolbar.addItem(t._createMenuButton(n,e,!!n.defaultAction))
});"list"==n.type&&(t._oToolbar.addItem(t._createListBox(n)),t._mComboBoxGroupMapping[t._createId(n.id)]=n.group)}}}).then(function(){t._filterToolbar()})},_createId:function(e){return this._oToolbar.getId()+"-"+e},_getIconUri:function(e){if(!e)return e;var t=sap.ui.core.IconPool.getIconURI(e,"watt");return t||(t=sap.ui.core.IconPool.getIconURI(e),t||(t=require.toUrl(e))),t},_createButton:function(e){var t=this._getIconUri(e.icon),n=new sap.ui.commons.Button({id:this._createId(e.id),icon:t,enabled:!1,text:e.iconLabel,tooltip:e.command?e.command.getKeyBindingTooltip(e.label):e.label,press:this._createHandler(e.command,e.value)});return this._mItemToCommandMapping[n.getId()]=e.command,e.iconLabel&&n.addStyleClass("watt_toolbar_text"),t||e.iconLabel||n.setText(e.label),n},_createMenuButton:function(e,t,n){var r=this,i=this._getIconUri(e.icon),o=new sap.ui.commons.MenuButton({id:this._createId(e.id),icon:n?null:i,text:n?null:e.iconLabel,tooltip:e.command?e.command.getKeyBindingTooltip(e.label):e.label});return!n&&e.iconLabel&&o.addStyleClass("watt_toolbar_menubutton_text"),n&&(r._attachSplitButtonEvents(o),o.addStyleClass("watt_toolbar_menubutton_split")),i||n||e.iconLabel||o.setText(e.label),o.setMenu(t),o},_attachSplitButtonEvents:function(e){for(var t in this._mSplitButtonMapping)if(e.getId()==this._mSplitButtonMapping[t]){var n=sap.ui.getCore().byId(t);n.addStyleClass("watt_toolbar_splitbutton_master"),n.attachBrowserEvent("mouseover",function(){this.addStyleClass("watt_toolbar_splitbutton"),e.addStyleClass("watt_toolbar_splitbutton")}),n.attachBrowserEvent("mouseout",function(){this.removeStyleClass("watt_toolbar_splitbutton"),e.removeStyleClass("watt_toolbar_splitbutton")})}e.attachBrowserEvent("mouseover",function(){this.addStyleClass("watt_toolbar_splitbutton"),n.addStyleClass("watt_toolbar_splitbutton")}),e.attachBrowserEvent("mouseout",function(){this.removeStyleClass("watt_toolbar_splitbutton"),n.removeStyleClass("watt_toolbar_splitbutton")})},_createListBox:function(e){var t=this,n=new sap.ui.commons.ComboBox({id:this._createId(e.id)});return n.attachChange(t._onDDBoxChange,t),t._populateListBox(n,e.group).done(),n},_populateListBox:function(e,t){return t?t.getItems().then(function(t){for(var n=0;n<t.length;n++){var r=t[n],i=new sap.ui.core.ListItem({text:r.getCommand().getLabel(),key:r.getCommand().getId()});e.addItem(i)}}):void 0},_onDDBoxChange:function(e){var t=e.getParameter("selectedItem");if(t){var n=t.getKey();n&&this._oCommandService.getCommand(n).then(function(e){e.execute()})}},onAfterSetSelection:function(){this._filterToolbar()},_filterToolbar:function(){var e=this,t=this._oToolbar.getItems();jQuery.each(t,function(t,n){if(n instanceof sap.ui.commons.MenuButton){var r=n.getMenu();r.destroyItems()}else if(n instanceof sap.ui.commons.Button){var i=e._mItemToCommandMapping[n.getId()];i.getState().then(function(t){n.setEnabled(t.enabled),n.setVisible(t.available);var r=e._mSplitButtonMapping[n.getId()];if(r){var i=sap.ui.getCore().byId(r);i&&i.setVisible(t.available)}}).done()}if(n instanceof sap.ui.commons.ComboBox){var o=n.getItems();jQuery.each(o,function(t,n){var r=n.getKey();r&&e._oCommandService.getCommand(r).then(function(e){e.getState().then(function(e){n.setEnabled(e.enabled),n.setVisible(e.available)})})})}})},_createHandler:function(e,t){return function(){e.execute(t).done()}}});return n}),define("sap.watt.platform.setting/service/Project",[],function(){"use strict";return sap.ui.base.Object.extend("sap.watt.plarform.setting.service.Project",{_oFile:null,_oSelectedDocument:null,_oDao:null,init:function(){this._oFile=this.context.service.filesystem.documentProvider},configure:function(e){return e&&e.dao&&(this._oDao=e.dao.service),Q()},setProjectSettings:function(e,t,n){return n=n||this._oSelectedDocument,this._oDao.set(e,t,n)},set:function(e,t,n){return this.setProjectSettings(this._getServiceName(e),t,n)},getProjectSettings:function(e,t,n){return n=n===!0,t=t||this._oSelectedDocument,this._oDao.get(e,t,n).fail(function(){return null})},get:function(e,t,n){return this.getProjectSettings(this._getServiceName(e),t,n)},_getServiceName:function(e){return e.getProxyMetadata().getName()},onSelectionChanged:function(e){var t=e.params.selection[0]?e.params.selection[0].document:null;t&&(this._oSelectedDocument=t)}})}),define("sap.watt.platform.setting/service/User",["./Project"],function(e){"use strict";return e.extend("sap.watt.plarform.setting.service.User",{})}),define("sap.watt.platform.menu/service/Menu",["sap.watt.platform.commandgroup/module/Group","sap.watt.platform.commandgroup/module/ActionItem","sap.watt.platform.commandgroup/module/MenuItem","sap.watt.platform.commandgroup/module/InlineItem"],function(e,t,n,r){"use strict";return{_oCommandService:null,_oOpenQueue:null,_bRTL:!1,init:function(){this._oCommandService=this.context.service.command,this._oOpenQueue=new Q.sap.Queue,this._bRTL=sap.ui.getCore().getConfiguration().getRTL()||"rtl"===getComputedStyle(document.getElementsByTagName("html")[0],null).direction},configure:function(){this._bRTL||this.context.service.resource.includeStyles([{uri:"sap.watt.platform.menu/css/Menu.css"}]).done()},createMenu:function(e,t){t=t||"WattMainMenuSub";var n=this,r=new sap.ui.unified.Menu;return r.getPopup().attachEvent("opened",function(){n._oOpenQueue.next(function(){return n._populateIfEmpty(r,e)}).fail(function(e){console.error("Failed to create a menu",e)}).done()}),r.addStyleClass(t),r},_populateIfEmpty:function(e,t){return 0===e.getItems().length?this.populate(e,t):Q()},populate:function(e,t,n){e.destroyItems(),n=n||{};var r=n.bFilter,i=n.sParentId,o=n.fnVisitor,a=this;return this._createMenuStructure(t,r,i).then(function(t){return a._populate(e,t,o)})},_populate:function(e,t,n){var r=this,i=e.getId();n=n||function(t,n){var o=n.command?n.command.getKeyBindingAsText():null,a=o?n.label+" ("+o+")":n.label,s=new sap.ui.unified.MenuItem({id:i+n.id,text:r._bRTL?a:n.label,tooltip:n.command?n.command.getKeyBindingTooltip(n.label):null,enabled:n?n.enabled:!0,startsSection:t>0&&n.startsSection||!1});if(o&&!r._bRTL&&(s.onAfterRendering=function(){s.$("scuttxt").text(o)}),r._createHandler(s,n),e.addItem(s),"menu"===n.type){var u=r.createMenu(n.group);return s.setSubmenu(u),u.attachBrowserEvent("contextmenu",function(e){e.preventDefault()}),n.group.getItems()}};var o=Q();return jQuery.each(t,function(e,t){o=o.then(function(){return n(e,t)})}),o},_createHandler:function(e,t){var n=t.command;n&&("boolean"===n.getType()?e.attachSelect(function(){n.execute(!n.getValue()).done()}):e.attachSelect(function(){n.execute(n.getValue(t.itemId)).done()}))},_createMenuItem:function(e,t){var n=this;return e.getGroup().getItems().then(function(r){var i=null;if(r.length>0){var o=e.getGroup(),a=o.getDefaultItem();i={id:n._createId(t,e),itemId:e.getId(),type:e.getType(),label:e.getLabel(),group:o,prio:e.getPrio(),icon:e.getIcon(),iconLabel:e.getIconLabel(),defaultAction:a?n._createActionItem(a,!0,t):void 0}}return i})},_createInlineItems:function(e,t,n){var r=[];return this._createMenuStructure(e.getGroup(),t,n).then(function(e){return jQuery.each(e,function(e,t){t.startsSection=t.startsSection||0==e,r.push(t)}),r})},_createActionItem:function(e,t,n){var r=e.getCommand();return{id:this._createId(n,e),itemId:e.getId(),type:"action",label:e.getLabel(),enabled:t,command:r,icon:e.getIcon(),iconLabel:e.getIconLabel(),value:e.getValue(),prio:e.getPrio()}},_createMenuStructure:function(e,t,n){if(void 0==e)return Q([]);var r=this;return n=n||e.getId(),t=t===!1?!1:!0,e.getItems().then(function(e){return t?r._oCommandService.filter(e).then(function(e){return r._createMenuStructureForItems(e,!0,n)}):r._createMenuStructureForItems(e,t,n)})},_createMenuStructureForItems:function(e,i,o){var a=this,s=[],u=[];return jQuery.each(e,function(e,u){var c=u;i&&(c=u.item),c instanceof n?s.push(a._createMenuItem(c,o)):c instanceof r?s.push(a._createInlineItems(c,i,o)):c instanceof t&&s.push(a._createActionItem(c,i?u.enabled:!0,o))}),Q.all(s).then(function(e){var t=!1;return jQuery.each(e,function(e,n){if(jQuery.isArray(n)){t=!1;var r=n.length-1;jQuery.each(n,function(e,n){u.push(n),e==r&&(t=!0)})}else n&&(t&&!n.startsSection&&(n.startsSection=!0),u.push(n))}),u})},_createId:function(e,t){return e+"-"+t.getId()}}}),define("sap.watt.platform.menubar/service/MenuBar",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";var t=function(e){throw new Error("MenuBar: "+e)},n=e.extend("sap.watt.platform.plugin.menubar.service.MenuBar",{_oGroup:null,_oMenuService:null,_oCommandGroupService:null,_lastOpenedMenu:null,_oMenuBar:new sap.ui.commons.MenuBar({id:"menubar"}),init:function(){var e=this;this._oMenuService=this.context.service.menu,this._oCommandGroupService=this.context.service.commandGroup,this._oMenuBar.attachBrowserEvent("mouseover",function(t){e._onMenuBarHoverEvent(this,t,!1)}),this._oMenuBar.attachBrowserEvent("mouseout",function(t){e._onMenuBarHoverEvent(this,t,!0)})},configure:function(e){var n=this;return this._oCommandGroupService.getGroup(e.group).then(function(r){return r||t("Configured group '"+e.group+"' is not defined"),n.setGroup(r)})},getContent:function(){return this._oMenuBar},_onMenuBarHoverEvent:function(e,t,n){var r=jQuery(t.target),i=!1,o=!1;if(r.attr("itemidx")||(r=r.parent()),r=r.attr("itemidx")?r:null){for(var a=this._getMenuItem(e,r),s=a.getSubmenu(),u=0;u<e.getItems().length;u++)e.getItems()[u].getSubmenu().isActive()&&(i=!0,e.getItems()[u]==a&&(o=!0));n&&i&&(this._lastOpenedMenu=s,r.addClass("active"));var c=this;if(a&&a.getEnabled()&&i&&o&&s.oPopup.attachEventOnce("closed",function(){p(c._lastOpenedMenu)}),a&&a.getEnabled()&&i&&!o&&s&&!a._bSkipOpen){this._lastOpenedMenu&&(this._lastOpenedMenu.close(),this._lastOpenedMenu.getParent()&&this._lastOpenedMenu.getParent().$()&&this._lastOpenedMenu.getParent().$().removeClass("active"));var l=sap.ui.core.Popup.Dock;s.open(!1,r.get(0),l.BeginTop,l.BeginBottom,r.get(0))}var p=function(e){e.getParent()&&e.getParent().$()&&e.getParent().$().removeClass("active")}}},_getMenuItem:function(e,t){if(t){var n=t.attr("itemidx");if(n){if("ovrflw"==n)return"";var r=parseInt(n,10);return e.getItems()[r]}}},setGroup:function(e){return this._oGroup=e,this._oMenuService.populate(this._oMenuBar,e)},_refresh:function(){var e=this._oMenuBar.getItems();jQuery.each(e,function(e,t){t.getSubmenu().destroyItems()})},onAfterSetSelection:function(){this._refresh()}});return n}),define("sap.watt.platform.progress/service/progress",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";var t=e.extend("sap.watt.platform.plugin.progress.service.Progress",{runningTasks:[],PROGRESS_BAR_ID:"ideProgressBar",init:function(){var e=$("<div/>").addClass("ideProgressBar").attr("id",this.PROGRESS_BAR_ID),t=$("<div/>").addClass("ideProgressBarWrapper").append(e);$("body").append(t)},configure:function(e){return this.context.service.resource.includeStyles(e.styles)},_startAnimation:function(){$("#"+this.PROGRESS_BAR_ID).addClass("animate")},_stopAnimation:function(){$("#"+this.PROGRESS_BAR_ID).removeClass("animate")},startTask:function(){var e=Math.floor(1e5*Math.random()+1);return void 0!==e&&null!==e&&(this.runningTasks.push(e),1===this.runningTasks.length&&this._startAnimation()),e},stopTask:function(e){if(void 0!==e&&null!==e){var t=$.inArray(e,this.runningTasks);-1!==t&&(this.runningTasks.splice(t,1),0===this.runningTasks.length&&this._stopAnimation())}}});return t}),define("sap.watt.platform.progress/service/DialogProgress",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";var t="dialogProgressLoading",n="",r="",i=e.extend("sap.watt.platform.plugin.progress.service.DialogProgress",{configure:function(e){this._aStyles=e.styles},init:function(){r=n=this.context.i18n.getText("wait_message")},show:function(e,t){"boolean"==typeof e&&(t=e,e=null),r=e||n;var i=this;return this.context.service.resource.includeStyles(this._aStyles).then(function(){i._isLoaded()&&(jQuery("body").addClass("screenBlocker"),t||i._getDialog(0).show())})},setProgress:function(e,t){this._isLoaded()&&jQuery("body").hasClass("screenBlocker")&&(t&&(r=t),this._getDialog(e||0))},hide:function(){jQuery("#"+t).remove(),jQuery("body").removeClass("screenBlocker")},_getDialog:function(e){var n=jQuery("#"+t);return n.length||(n=jQuery("<div/>").attr("id",t).addClass("sapUiDlg").appendTo("body"),jQuery("<div/>").appendTo(n),jQuery("<progress/>").attr("max","100").attr("value","0").appendTo(n)),e=e||0,n.find("div").text(r),n.find("progress").attr("value",e).html(e),n},_isLoaded:function(){var e=jQuery("#loading");return 0===e.length||"none"===e.css("display")},_getDialogId:function(){return t}});return i}),define("sap.watt.platform.selection/service/Selection",["sap/watt/common/error/AssertError"],function(e){"use strict";return{_oSelectionProvider:null,init:function(){},configure:function(e){var t=this;this.typedSelections={},e.typedSelections.forEach(function(e){var n,r=function(e){return t.selectionProviderChanged(n,e)},i=function(){return t._specialSelectionChangedHandler(n)};t.typedSelections[e.id]=n={id:e.id,service:e.service,provider:void 0,handler:r,providerHandler:i},e.service.attachEvent("selectionProviderChanged",r,t)}),t.typedSelections[""]=this.focusDef={provider:t.context.service.dummyselectionprovider}},getSelection:function(e){var t=this;return this.getOwner(e).then(function(e){return e?e.getSelection().then(t._fixSelection):Q([])})},_fixSelection:function(e){if(e&&jQuery.isArray(e)){for(var t=0;t<e.length;t++)if(!e[t].document)return[];return e}return e&&e.document?[e]:[]},getOwner:function(e){var t=this;e=e||"";var n=this.typedSelections[e];return void 0===n.provider?n.service.getSelectionProvider().then(function(e){return n.provider=e||t.context.service.dummyselectionprovider,n.provider}):Q(n.provider)},isOwner:function(e,t){return this.getOwner(t).then(function(t){return e===t})},assertOwner:function(t,n){return this.isOwner(t,n).then(function(n){if(!n)throw new e("Service is not selected");return t})},isEmpty:function(e){return this.getSelection(e).then(function(e){return 0==e.length})},assertNotEmpty:function(t){return this.getSelection(t).then(function(t){if(0==t.length)throw new e("Selection is empty");return t})},assertNotEmptySingleSelection:function(t){return this.assertNotEmpty(t).then(function(t){if(1!==t.length)throw new e("Not single selection");return t[0]})},assertEmpty:function(t){return this.getSelection(t).then(function(t){if(t.length>0)throw new e("Selection is not empty");return t})},onFocusChanged:function(){var e=this;return this.context.service.focus.getFocus().then(function(t){return e.focusDef.provider&&e.focusDef.provider.detachEvent&&e.focusDef.provider.detachEvent("selectionChanged",e._selectionChangedHandler,e),t.instanceOf&&t.instanceOf("sap.watt.common.service.selection.Provider")?(t.attachEvent&&t.attachEvent("selectionChanged",e._selectionChangedHandler,e),e.focusDef.provider=t,e._selectionChangedHandler()):(e.focusDef.provider=e.context.service.dummyselectionprovider,e._selectionChangedHandler())})},_selectionChangedHandler:function(){var e=this;return this.getSelection().then(function(t){return e.context.event.fireChanged({selection:t,owner:e.focusDef.provider})})},selectionProviderChanged:function(e,t){var n=this,r=t.params.selectionProvider||n.context.service.dummyselectionprovider;return e.provider!=r?(e.provider&&e.provider.detachEvent("selectionChanged",e.providerHandler,n),e.provider=r,r.attachEvent("selectionChanged",e.providerHandler,n),e.providerHandler()):void 0},_specialSelectionChangedHandler:function(e){var t=this;return this.getSelection(e.id).then(function(n){return t.context.event.fireTypedSelectionChanged({id:e.id,selection:n,owner:e.provider})})}}}),define("sap.watt.platform.selection/service/DummySelectionProvider",["sap/watt/common/error/AssertError"],function(){"use strict";return{getSelection:function(){return Q([])}}}),define("sap.watt.platform.usernotification/service/UserNotification",[],function(){"use strict";return{_messageBox:null,_oOpenQueue:new Q.sap.Queue,_oResult:{sResult:null,bResult:void 0},_oMessageTypes:{error:{type:"error",title:"",id:"MSG_ERROR"},info:{type:"info",title:"",id:"MSG_INFO"},warning:{type:"warning",title:"",id:"MSG_WARNING"},confirm:{type:"info",title:"",id:"MSG_CONFIRM"},confirmYesNo:{type:"info",title:"",id:"MSG_YESNO"},confirmWithCancel:{type:"info",title:"",id:"MSG_YESNOCANCEL"}},init:function(){for(var e in this._oMessageTypes)this._oMessageTypes[e].title=this.context.i18n.getText("i18n","usernotification_"+e+"_title");jQuery.sap.require("sap.ui.commons.MessageBox"),this._messageBox=sap.ui.commons.MessageBox},_processMessage:function(e){return e.replace("/","/").replace("{","{").replace("}","}")},_confirm:function(e,t){var n=Q.defer(),r=this;return"string"==typeof e&&(e=this._processMessage(e)),this.context.service.focus.context.event.fire$dialogOpened(),t?this._messageBox.show(e,this._messageBox.Icon.NONE,this._oMessageTypes.confirmWithCancel.title,[sap.ui.commons.MessageBox.Action.YES,sap.ui.commons.MessageBox.Action.NO,sap.ui.commons.MessageBox.Action.CANCEL],function(e){r.context.service.focus.context.event.fire$dialogClosed(),r._oResult.sResult=e,r._oResult.bResult="YES"===e,n.resolve(r._oResult)},sap.ui.commons.MessageBox.Action.CANCEL,this._oMessageTypes.confirmWithCancel.id):this._messageBox.confirm(e,function(e){r.context.service.focus.context.event.fire$dialogClosed(),r._oResult.sResult=e?"YES":"NO",r._oResult.bResult=e,n.resolve(r._oResult)},this._oMessageTypes.confirm.title,this._oMessageTypes.confirm.id),n.promise},confirm:function(e,t){var n=this;return this._oOpenQueue.next(function(){return n._confirm(e,t)})},_confirmYesNo:function(e,t){var n=Q.defer(),r=this;return"string"==typeof e&&(e=this._processMessage(e)),this.context.service.focus.context.event.fire$dialogOpened(),this._messageBox.show(e,this._messageBox.Icon.NONE,t,[sap.ui.commons.MessageBox.Action.YES,sap.ui.commons.MessageBox.Action.NO],function(e){r.context.service.focus.context.event.fire$dialogClosed(),r._oResult.sResult=e,r._oResult.bResult="YES"===e,n.resolve(r._oResult)},sap.ui.commons.MessageBox.Action.CANCEL,this._oMessageTypes.confirmWithCancel.id),n.promise},confirmYesNo:function(e,t){var n=this;return t=t||this._oMessageTypes.confirmWithCancel.title,this._oOpenQueue.next(function(){return n._confirmYesNo(e,t)})},_okDialog:function(e,t){var n=Q.defer(),r=this;if("string"==typeof e)switch(e=this._processMessage(e),t.type){case"error":console.error(e);break;case"warning":console.warn(e);break;default:console.info(e)}return this.context.service.focus.context.event.fire$dialogOpened(),this._messageBox.show(e.message||e,this._messageBox.Icon.NONE,t.title,[sap.ui.commons.MessageBox.Action.OK],function(e){r.context.service.focus.context.event.fire$dialogClosed(),r._oResult.sResult=e,r._oResult.bResult="OK"===e,n.resolve(r._oResult)},sap.ui.commons.MessageBox.Action.OK,t.id),n.promise},info:function(e){var t=this;return this._oOpenQueue.next(function(){return t._okDialog(e,t._oMessageTypes.info)})},warning:function(e){var t=this;return this._oOpenQueue.next(function(){return t._okDialog(e,t._oMessageTypes.warning)})},alert:function(e){var t=this;return this._oOpenQueue.next(function(){return t._okDialog(e,t._oMessageTypes.error)})},liteInfo:function(e,t){return this.context.service.usernotificationbar.display(e,null,t)},liteInfoWithAction:function(e,t,n,r){return this.context.service.usernotificationbar.display(e,t,n,r)}}}),define("sap.watt.platform.usernotificationbar/service/UserNotificationBar",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";var t=e.extend("sap.watt.platform.plugin.usernotificationbar.service.UserNotificationBar",{_oOpenQueue:new Q.sap.Queue,_aStyles:null,_oNotificationMessageLabel:null,_oNotificationActionButton:null,_fnLastActionOnPress:null,_iLastTimeoutId:null,configure:function(e){this._aStyles=e.styles},init:function(){this._oNotificationMessageLabel=sap.ui.getCore().byId("userNotificationBarMessage"),this._oNotificationMessageLabel&&this._oNotificationMessageLabel.destroy(),this._oNotificationMessageLabel=new sap.ui.commons.Label("userNotificationBarMessage",{visible:!1,width:"100%",wrapping:!1}).addStyleClass("userNotificationBarMessage watt_toolbar_text"),this._oNotificationActionButton=new sap.ui.commons.Button({lite:!0,visible:!1,width:"100%"}).addStyleClass("userNotificationBarActionBtn watt_toolbar_text")},_display:function(e,t,n,r){var i=this;return null!==this._iLastTimeoutId&&clearTimeout(this._iLastTimeoutId),this._oNotificationActionButton.setVisible(!1),this._oNotificationMessageLabel.setVisible(!1),this._oNotificationMessageLabel.setText(e),this._oNotificationMessageLabel.setTooltip(e),this._setStyleClasses(n),t?this.context.service.command.getCommand(t).then(function(e){return i._oNotificationActionButton.setText(e.getLabel()),i._oNotificationActionButton.setTooltip(e.getLabel()),i._fnLastActionOnPress&&i._oNotificationActionButton.detachPress(i._fnLastActionOnPress,i),i._fnLastActionOnPress=function(){e.execute(r).done()},i._oNotificationActionButton.attachPress(i._fnLastActionOnPress,i),i._oNotificationMessageLabel.setVisible(!0),i._oNotificationActionButton.setVisible(!0),i._setAutoDisappearAndDelay(n)}).fail(function(){return i._oNotificationMessageLabel.setVisible(!0),i._setAutoDisappearAndDelay(n)}):(this._oNotificationMessageLabel.setVisible(!0),this._setAutoDisappearAndDelay(n))},_setStyleClasses:function(e){e?(this._oNotificationMessageLabel.removeStyleClass("VAnimationPulseStay"),this._oNotificationActionButton.removeStyleClass("VAnimationPulseStay"),this._oNotificationMessageLabel.addStyleClass("VAnimationPulse"),this._oNotificationActionButton.addStyleClass("VAnimationPulse")):(this._oNotificationMessageLabel.removeStyleClass("VAnimationPulse"),this._oNotificationActionButton.removeStyleClass("VAnimationPulse"),this._oNotificationMessageLabel.addStyleClass("VAnimationPulseStay"),this._oNotificationActionButton.addStyleClass("VAnimationPulseStay"))},_setAutoDisappear:function(e){var t=this,n=6e3;e===!1&&(n=6e4),this._iLastTimeoutId=setTimeout(function(){t._oNotificationMessageLabel.setVisible(!1),t._oNotificationActionButton.setVisible(!1)},n)},_delay:function(){var e=Q.defer();return setTimeout(function(){e.resolve()},1e3),e.promise},_setAutoDisappearAndDelay:function(e){return this._setAutoDisappear(e),this._delay()},display:function(e,t,n,r){var i=this;return this._oOpenQueue.next(function(){return i._display(e,t,n,r)})},getContent:function(){var e=this;return this._aStyles?this.context.service.resource.includeStyles(this._aStyles).then(function(){return[e._oNotificationMessageLabel,e._oNotificationActionButton]}):[e._oNotificationMessageLabel,e._oNotificationActionButton]}});return t}),define("sap.watt.platform.displayinformation/service/Displayinformation",[],function(){"use strict";return{_oTextLabel:null,configure:function(e){this._aStyles=e.styles},init:function(){var e=this;this._oTextLabel=new sap.ui.commons.Label({id:"userInfoText",text:this.context.i18n.getText("i18n","displayinformation_unknownUserHi")}),this._oTextLabel.addStyleClass("rightpaneText"),this.context.service.system.getSystemInfo().then(function(t){var n=t.sFirstName?t.sFirstName:t.sUsername;e._oTextLabel.setText(e.context.i18n.getText("i18n","displayinformation_knownUserHi",[n]))}).done()},getContent:function(){var e=this;return this._aStyles?this.context.service.resource.includeStyles(this._aStyles).then(function(){return[e._oTextLabel]}):[e._oTextLabel]}}}),define("sap.watt.platform.displayinformation/service/Debugindication",[],function(){"use strict";return{_oDebugModeTextLabel:null,configure:function(e){this._aStyles=e.styles},init:function(){this._oDebugModeTextLabel=new sap.ui.commons.Label({id:"debugModeText",text:this.context.i18n.getText("i18n","debug_mode")}),this._oDebugModeTextLabel.addStyleClass("debugModeText")},getContent:function(){var e=this,t=/[&?](sap-ide-dev[&=]|sap-ide-dev)+/i.test(window.location.search);return this._aStyles?this.context.service.resource.includeStyles(this._aStyles).then(function(){return t?[e._oDebugModeTextLabel]:null}):t?[e._oDebugModeTextLabel]:null},onLoadingRDEOnDevMode:function(){var e=/[&?](sap-ide-dev[&=]|sap-ide-dev)+/i.test(window.location.search);e&&(document.title=this.context.i18n.getText("debug_mode_browser_title")+document.title)}}}),define("sap.watt.platform.problems/service/Problems",[],{configure:function(){},init:function(){},setProblems:function(e,t){e&&""!==e?t&&0!==t.length?this.context.event.fireProblemsUpdate({problems:t,domain:e}).done():this._writeToLog("No problems provided for domain: "+e):t&&0!==t.length?this._writeToLog("No problems domain provided for problems: "+t.toString(),"error"):this._writeToLog("No problems domain and no problems provided","error")},clearProblems:function(e,t){e&&""!==e?(t||(t=null),this.context.event.fireProblemsDelete({IDs:t,domain:e}).done()):this._writeToLog("No problems domain provided")},setTitle:function(e){this.context.event.fireTitleUpdate({title:e}).done()},clearTitle:function(){this.context.event.fireTitleDelete({title:null}).done()},_writeToLog:function(e,t){"error"===t?this.context.service.log.error(this.context.service.problems.getProxyMetadata().getName(),e,["system"]).done():"warn"===t?this.context.service.log.warn(this.context.service.problems.getProxyMetadata().getName(),e,["system"]).done():this.context.service.log.error(this.context.service.problems.getProxyMetadata().getName(),e,["system"]).done()}}),define("sap.watt.platform.heliumpreview/service/HeliumPreviewAdapter",[],function(){return{getPreviewUrl:function(e,t,n,r,i){var o,a,s=this._getPreviewRoot(e,n,r,i);if("hcproxy"===sap.watt.getEnv("server_type")||"local_hcproxy"===sap.watt.getEnv("server_type")){var u=this._getHeliumPath(e);return u.lastIndexOf("/")===u.length-1&&(u=u.substring(0,u.length-1)),a=URI(s),a.addSearch("hc_orionpath",u),a.addSearch("sap-ui-xx-componentPreload","off"),this._addParamsWithLocalProjects(e,a,t).thenResolve(a)}return o=e.getEntity().getBackendData().location,o=jQuery.sap.startsWith(o,"/")?o.substr(1):o,a=URI(o).absoluteTo(s),Q(a)},_getPreviewRoot:function(e,t,n,r){var i=e.getEntity().getName(),o=i;if(n&&(o+=n),t&&(o+=t),r){var a=parseInt(9999999*Math.random());o+=a.toString()}var s=this._getHashedString(o,7),u=sap.watt.getEnv("orion_preview");return"local_hcproxy"===sap.watt.getEnv("server_type")&&window&&window.location&&window.location.origin&&(u=window.location.origin+u),u=u.replace("{{uniqueToken}}",s)},_getHashedString:function(e,t){var n=0;if(e.length>0){for(var r=0;r<e.length;r++){var i=e.charCodeAt(r);n=(n<<5)-n+i,n&=n}n=Math.abs(n)}var o=new Array(t+1).join("0"),a=o+n;return a.substr(a.length-t)},_getHeliumPath:function(e){var t=e.getEntity().getBackendData().location;return t=t.indexOf("/s2s/file")>-1?t.replace("/s2s/file",""):t.replace("/file","")},_addParamsWithLocalProjects:function(e,t,n){var r,i=this;return this.context.service.setting.project.getProjectSettings("hcpdeploy",e).then(function(o){return r=o,e.getCurrentMetadata().then(function(o){for(var a,s=0;s<o.length;s++){var u=o[s];"neo-app.json"===u.name&&(a=u)}return a?i.context.service.filesystem.documentProvider.getDocument(a.path).then(function(o){return o.getContent().then(function(o){var a,s=JSON.parse(o),u=[],c=i._getNeoAppApplicationRoutes(s);if(c.length>0&&n&&n.bPreferWorkspace)return i._getApplicationMapping().then(function(e){return jQuery.each(c,function(n,r){var o=r.target.name,s=r.target.account?"-"+r.target.account:"";u.push(i._getWorkspaceAppRootInWorkspace(o,e).then(function(e){e&&(a=i._getHeliumPath(e.document),i.context.service.usagemonitoring.report("heliumpreview","found_in_workspace","found_in_workspace").done(),e.entryPath&&""!==e.entryPath&&(a+=e.entryPath),t.addSearch("hc_wsmapping."+o+s,a))}))}),Q.all(u).then(function(){return t.toString()})});var l=i._getProjectForwardingToItSelf(s,r);l&&(a=i._getHeliumPath(e),r.entryPath&&""!==r.entryPath&&(a+=r.entryPath),t.addSearch("hc_wsmapping."+l,a))}).fail(function(){})}):void 0})})},_getNeoAppApplicationRoutes:function(e){var t=[];return e.routes&&jQuery.each(e.routes,function(e,n){n.target&&n.target.type&&"application"===n.target.type&&t.push(n)}),t},_getProjectForwardingToItSelf:function(e,t){if(e.routes)for(var n=0;n<e.routes.length;n++){var r=e.routes[n].target.name;if(t.name===r)return r}return null},_getWorkspaceAppRootInWorkspace:function(e,t){return Q(t[e])},_getApplicationMapping:function(){var e=this,t={};return this.context.service.filesystem.documentProvider.getRoot().then(function(e){return e.getCurrentMetadata()}).then(function(n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o.folder&&r.push(e._getHCPDeployDetails(o))}return Q.all(r).then(function(e){return e.forEach(function(e){e&&(t[e.name]={document:e.document,entryPath:e.entryPath,account:e.account})}),t})})},_getHCPDeployDetails:function(e){var t=this;return this.context.service.filesystem.documentProvider.getDocument(e.path).then(function(e){return t.context.service.setting.project.getProjectSettings("hcpdeploy",e).then(function(t){var n={};return t&&t.name?n={name:t.name,document:e,entryPath:t.entryPath,account:t.account}:null})})}}}),define("sap.watt.platform.pseudotranslation/command/PseudoTranslationCommand",{execute:function(){var e=this,t=this.context.service.selection;return t.getOwner().then(function(n){return n.instanceOf("sap.watt.common.service.ui.Browser")?t.assertNotEmpty().then(function(t){return e.context.service.pseudotranslation.generatePseudoPropertiesProject(t[0].document)}):void 0}).fail(function(t){t&&t.message&&e.context.service.usernotification.alert(t.message).done()}).done()},isAvailable:function(){if("local_hcproxy"!==sap.watt.getEnv("server_type")&&sap.watt.getEnv("internal")===!0){var e=this,t=this.context.service.selection;return t.getOwner().then(function(n){return n.instanceOf("sap.watt.common.service.ui.Browser")?t.assertNotEmpty().then(function(t){var n=t[0].document;return n&&n.getEntity&&n.getEntity().getType&&"folder"===n.getEntity().getType()&&!n.getEntity().isRoot()?e.context.service.pseudotranslation.is2QEnabled(n).then(function(e){return e}):!1}):!1})}return!1},isEnabled:function(){return!0}}),define("sap.watt.platform.pseudotranslation/service/PseudoTranslation",{_iStartCriteria:0,_iRowsCriteria:100,is2QEnabled:function(e){if(!e||!e.getEntity||e.getEntity().isRoot())return!1;var t=this,n=this.context.service.setting.project;return n.get(t.context.service.translation,e).then(function(e){return e&&e.supportedLanguages?-1!==e.supportedLanguages.toLowerCase().indexOf("sappsd"):!1}).fail(function(e){e&&e.message&&t.context.service.usernotification.alert(e.message).done()})},onSave:function(e){if(e&&e.params&&e.params.document){var t=e.params.document;if(!t.getEntity)return;if(this._isDeveloperProperties(t)){var n=this;this.is2QEnabled(t).then(function(e){e&&n.generatePseudoProperties(t).then(function(){n.context.service.log.info("pseudo-translation","Translation test file has been generated successfully.",["system"]).then(function(){n.context.service.usernotification.liteInfo(n.context.i18n.getText("i18n","pseudo_files_generated_msg"))})})}).done()}}},generatePseudoProperties:function(e){if(!e||!e.getContent)return!1;var t=this;return e.getContent().then(function(n){var r=t._getPseudoContent(n),i=e.getTitle().replace(".properties","_en_US_sappsd.properties");return e.getParent().then(function(e){return e.touch(i).then(function(e){return e.setContent(r).then(function(){return e.save()})})})}).fail(function(e){e&&e.message?(t.context.service.usernotification.alert(e.message).done(),t.context.service.log.error("pseudo-translation",e.message,["system","user"]).done()):t.context.service.log.error("pseudo-translation","Some error occured while generating translation test file.",["system","user"]).done()
})},generatePseudoPropertiesProject:function(e){var t=this;if(t.context.service.log.info("pseudo-translation","Starting generate translation test files...",["system"]).done(),e&&e.getEntity&&"folder"===e.getEntity().getType()){var n=t.context.service.filesystem.documentProvider,r={bContentSearch:!1,nStart:t._iStartCriteria,nRows:t._iRowsCriteria,sFolderName:e.getEntity().getFullPath()+"/",sFileType:"*.properties",sSearchTerm:"*"},i=t;n.search(r).then(function(e){if(!e.aFileEntries.length)return i.context.service.log.info("pseudo-translation","No developer properties have been found.",["system"]).done(),void 0;for(var n=[],r=0;r<e.aFileEntries.length;r++){var o=e.aFileEntries[r];i._isDeveloperProperties(o)&&n.push(i.generatePseudoProperties(o))}n.length>0&&Q.all(n).then(function(){i.context.service.usernotification.liteInfo(t.context.i18n.getText("i18n","pseudo_files_generated_msg")).done(),i.context.service.log.info("pseudo-translation","Translation test files have been generated successfully.",["system"]).done()})}).done()}},_isDeveloperProperties:function(e){var t=e.getEntity().getName();return-1!==t.indexOf(".properties")&&-1===t.indexOf("_")},_translateTo2Q:function(e){e=this._addDots(e);for(var t="[[[",n=0;n<e.length;n++){var r=e.charAt(n);t+=this._generateCharacter(r)}return t+="]]]"},_addDots:function(e){var t=this._getDotsLength(e.length);return t>0&&(e+=Array(t+1).join("∙")),e},_getDotsLength:function(e){return 4>=e?10-(e+6):10>=e?20-(e+6):15>=e?25-(e+6):20>=e?30-(e+6):80>=e?Math.round(.5*e-6):Math.round(.3*e-6)},_getPseudoContent:function(e){for(var t="",n="",r="",i=!1,o="",a="",s=0;s<e.length;s++)n=e[s],"\n"===n||"\r\n"===n||"\r"===n?o&&"#"!==o.charAt(0)&&"!"!==o.charAt(0)?"\\"===r?i?a+=n:o+=n:(t+=a?o+this._translateTo2Q(a)+n:o+n,o=a="",i=!1):(t+=o+a+n,o=a="",i=!1):"="!==n||i||"\\"===r?i?a||" "!==n?a+=n:o+=n:o+=n:(o+=n,i=!0),r=n;return o&&(t+=o,a&&(t+=this._translateTo2Q(a))),t},_generateCharacter:function(e){var t=this._mConvertMappingChar[e];return t?t:e},_mConvertMappingChar:{A:"\\u01000",B:"\\u0181",C:"\\u0108",D:"\\u010E",E:"\\u0114",F:"\\u0191",G:"\\u0122",H:"\\u0124",I:"\\u012C",J:"\\u0134",K:"\\u0136",L:"\\u013B",M:"\\u039C",N:"\\u0143",O:"\\u014E",P:"\\u01A4",Q:"\\u01EC",R:"\\u0158",S:"\\u015C",T:"\\u0162",U:"\\u016E",V:"\\u01B2",W:"\\u0174",X:"\\u03A7",Y:"\\u0176",Z:"\\u017B",a:"\\u0105",b:"\\u0183",c:"\\u010B",d:"\\u018C",e:"\\u0113",f:"\\u0192",g:"\\u011F",h:"\\u0125",i:"\\u012F",j:"\\u0135",k:"\\u0137",l:"\\u013A",m:"\\u0271",n:"\\u014B",o:"\\u014F",p:"\\u03C1",q:"\\u01A3",r:"\\u0157",s:"\\u015F",t:"\\u0163",u:"\\u0171",v:"\\u028B",w:"\\u0175",x:"\\u03C7",y:"\\u0177",z:"\\u017E","∙":"\\u2219"}}),define("sap.watt.platform.librarymetadata/service/LibraryMetadata",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{_mProviders:{},configure:function(e){var t=this;e.providers.forEach(function(e){e.libraries.forEach(function(n){t._mProviders[n]||(t._mProviders[n]=[]),t._mProviders[n].push({service:e.service,isSnapshotSupported:e.isSnapshotSupported})})})},getVersions:function(e){if(!this._mProviders[e])return[];var t=[];return this._mProviders[e].forEach(function(n){t.push(n.service.getVersions(e))}),Q.all(t).then(function(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t})},getLatestVersion:function(e){return this.getVersions(e).then(function(e){for(var t=e[0],n=1;n<e.length;n++)1===this._versionCompare(e[n],t)&&(t=e[n]);return t}.bind(this))},getMetadata:function(e,t,n){return this._mProviders[e]?n?this._getMetadata(e,t,n):this.getLatestVersion(e).then(function(n){return this._getMetadata(e,t,n)}.bind(this)):null},hasVersion:function(e,t){return this.getVersions(e).then(function(e){return e.indexOf(t)>-1})},_getMetadata:function(e,t,n){return this._findProvider(e,t,n).then(function(r){return r?r.service.getMetadata(e,t,n).then(function(r){return r.library=e,r.version=n,r.type=t,r}).fail(function(){return null}):null})},_versionCompare:function(e,t){for(var n,r,i=e||"",o=t||"",a=i.split("."),s=o.split("."),u=Math.min(a.length,s.length),c=0;u>c;c++)if(n=parseInt(a[c],10),r=parseInt(s[c],10),n!==r)return n>r?1:r>n?-1:0/0;return a.length===s.length?0:a.length<s.length?-1:1},_findProvider:function(t,n,r){for(var i=[],o=this._mProviders[t],a=0;a<o.length;a++){var s=o[a];if("snapshot"!==r)i.push(this._providerHasVersion(s,t,r));else if(s.isSnapshotSupported)return Q(s)}return Q.all(i).then(function(t){return o=e.compact(t),o.length?o[0]:Q()})},_providerHasVersion:function(e,t,n){return e.service.getVersions(t).then(function(t){return t.indexOf(n)>-1?e:void 0})}}}),define("sap.watt.platform.usagemonitoring/service/UsageMonitoring",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{_oService:null,_aComponents:[],_aEventTypes:[],_mPerfMeasures:{},configure:function(t){t.service&&(this._oService=t.service);for(var n=t.reportParams,r=0;r<n.length;r++){var i=n[r].components,o=n[r].eventTypes;if(i)for(var a=0;a<i.length;a++)this._aComponents.push(i[a]);if(o)for(var s=0;s<o.length;s++)this._aEventTypes.push(o[s])}this._aComponents=e.uniq(this._aComponents),this._aEventTypes=e.uniq(this._aEventTypes)},onAllPluginsStarted:function(){var t=this;return this.context.service.preferences.get("UsageAnalytics").then(function(n){if(!n||n.allowTracking!==!1){var r=e.findIndex(t._aComponents,function(e){return"WARP_TEST"===e});if(t._oService&&-1===r){var i={};return Q.spread(t._getPromisses(),function(e,n){return i.isSAPUser=/(@sap.com)$/.test(e.sEMail),i.IDE_version=n.version.replace("SNAPSHOT",n.timestamp),t._oService.setCustomProperties(i)})}}})},startPerf:function(e,t){var n=this;return this.context.service.preferences.get("UsageAnalytics").then(function(r){r&&r.allowTracking===!1||e&&t&&(n._mPerfMeasures[n._getPerfMeasuresKey(e,t)]=Date.now())})},report:function(t,n,r){var i=this;return this.context.service.preferences.get("UsageAnalytics").then(function(o){if((!o||o.allowTracking!==!1)&&i._oService){var a=null,s=i._getPerfMeasuresKey(t,n),u=i._mPerfMeasures[s];if(u){var c=Date.now();a=c-u,delete i._mPerfMeasures[s]}var l=i.context.service.log,p=e.findIndex(i._aEventTypes,function(e){return e===n}),f="GENERIC";if(-1===p){n=n?f+"_"+n:f;var d="The reported Event Type: "+n+" should be configured in the reporter's plugin Plugin.json. sEventType is set to "+n;console.error(d),l.error("UsageMonitoring",d).done()}if(n.length>25){n=n.substr(0,25);var h="Event Type "+n+" is too long. Only 25 chars allowed.";l.error("UsageMonitoring",h).done(),console.error(h)}var m=e.findIndex(i._aComponents,function(e){return e===t});if(-1===m){t=t?f+"_"+t:f;var g="The reported Event Component: "+t+" should be configured in the reporter's plugin Plugin.json. sEventComponent is set to "+t;console.error(g),l.error("UsageMonitoring",g).done()}return i._oService.report(t,n,r,a)}})},_getPerfMeasuresKey:function(e,t){return e+"~"+t},_getPromisses:function(){var e=[];e.push(this.context.service.system.getSystemInfo());var t=jQuery.sap.getModulePath("sap.watt.uitools.version",".json");return e.push(Q(jQuery.ajax({url:t,dataType:"json"}))),e}}}),define("sap.watt.platform.warpmonitoring/service/WarpMonitoring",[],function(){"use strict";return{configure:function(e){e&&e.configParams&&(window.swa={baseUrl:e.configParams.baseUrl,clicksEnabled:e.configParams.clicksEnabled})},report:function(e,t,n,r){return t="ide_"+t,window.swa.custom1={ref:e},window.swa.custom2={ref:r?"USAGE_PERF":"USAGE"},window.swa.custom8={ref:r?r:null},this._trackCustomEvent(t,n)},_trackCustomEvent:function(e,t){if(window.swa.trackCustomEvent&&window.swa.plugin)return window.swa.trackCustomEvent(e,t);var n=setInterval(function(){return window.swa.trackCustomEvent&&window.swa.plugin?(clearInterval(n),window.swa.trackCustomEvent(e,t)):void 0},1e4)},isFioriCloudEdition:!1,setCustomProperties:function(e){function t(){return r._getLandscape(window.document.URL)}function n(){return r._getPerfTime()}window.swa.custom3={ref:e.isSAPUser?"SAP":"NONE_SAP"},window.swa.custom6={ref:e.IDE_version};var r=this;return window.swa.custom7={ref:t},window["sap-ide-perf"]&&(window.swa.custom8={ref:n}),this._isFioriCloudEdition().then(function(e){r.isFioriCloudEdition=e}).then(function(){r._initWarp()})},_getPerfTime:function(){return Date.now()-window["sap-ide-perf"]},_getLandscape:function(e){return e.indexOf("us1.hana.ondemand.com")>-1?"FACTORY_US1":e.indexOf("us2.hana.ondemand.com")>-1?"FACTORY_US2":e.indexOf("ap1.hana.ondemand.com")>-1?"FACTORY_AUS":e.indexOf("hana.ondemand.com")>-1?"FACTORY_GERMANY":e.indexOf("hanatrial.ondemand.com")>-1?"TRIAL":e.indexOf("dispatcher.neo.ondemand.com")>-1?"PROD":e.indexOf("staging.hanavlab.ondemand.com")>-1?"STAGING":e.indexOf("jpaas.sapbydesign.com")>-1?"DEV":"UKNOWN"},_isFioriCloudEdition:function(){var e="sap.watt.common.Monitoring",t=this,n="FioriCloudEditionUser";return this.context.service.preferences.get(e).then(function(r){return r&&void 0!==r[n]?r[n]:t.context.service.ajaxrequest.serviceCall("usage_fce_check","/sap/flp/fiorilaunchpad/fiori/v1/feature_toggle/v1","GET").then(function(){return r={},r[n]=!0,t.context.service.preferences.set(r,e).then(function(){return!0})}).fail(function(){return r={},r[n]=!1,t.context.service.preferences.set(r,e).then(function(){return!1})})})},_getPubtoken:function(){if("local_hcproxy"===sap.watt.getEnv("server_type"))return"c8521440-ef31-ae42-a3d2-899d47faa04a";var e=window.document.URL;if(e.indexOf("staging.hanavlab.ondemand.com")>-1)return"b56e758d-4c70-5c48-95b3-7e1f57000584";var t=sap.watt.getEnv("usage_analytics");if("trial"===t&&e.indexOf("hanatrial.ondemand.com")>-1)return"4d4c4389-5436-2a46-b0b6-52f55466cc91";if("factory"===t&&e.indexOf(".hana.ondemand.com")>-1)return this.isFioriCloudEdition?"7ca7cffd-c500-bd40-a748-b964812ca4ef":"9cd40036-9be2-a644-a76b-4b955748f028";switch(t){case"dev":return"264752cb-c7f0-d545-87f0-1481e3418df2";case"fiori":return"22a14762-30cd-0044-a322-ee69b5026bdf";case"prod":return"851bd492-e2db-5c4f-9916-9a2bbc6cefdf";case"selenium":return"a4f97033-2a5b-cf45-8558-8af24bcc31fc";default:return"7a7ab2fe-3cf9-4eab-892a-9dc80cad0ca5"}},_initWarp:function(){window.swa.pubToken=this._getPubtoken(),window.swa.optOutCookieTimeout=63113852,window.swa.visitorCookieTimeout=63113852;var e=document,t=e.createElement("script"),n=e.getElementsByTagName("script")[0];t.type="text/javascript",t.defer=!0,t.async=!0,t.src=window.swa.baseUrl+"js/privacy.js",n.parentNode.insertBefore(t,n)}}}),define("sap.watt.platform.tipsandtricks/command/OpenTipsAndTricks",{execute:function(){return this.context.service.tipsandtricks.openTipsAndTricksDialog()},isAvailable:function(){return this.context.service.tipsandtricks.getValidConfiguredTipsArray().then(function(e){return e&&e.length>=1})},isEnabled:function(){return!0}}),define("sap.watt.platform.tipsandtricks/datastructures/CyclicDoublyLinkedList",[],function(){var e=function(e){void 0===e&&(e=[]),this._currentNode=null,this._firstNode=null,this._lastNode=null;for(var t=0;t<e.length;t++)this.add(e[t])};return e.prototype.next=function(){if(!this._currentNode)throw new Error("Cannot change the current item of an empty list to point to the next item");return this._currentNode=this._currentNode.next,this._currentNode},e.prototype.previous=function(){if(!this._currentNode)throw new Error("Cannot change the current item of an empty list to point to the previous item");return this._currentNode=this._currentNode.previous,this._currentNode},e.prototype.add=function(e){return this._firstNode?(this._lastNode.next={data:e,next:this._firstNode,previous:this._lastNode},this._lastNode=this._lastNode.next,this._firstNode.previous=this._lastNode,void 0):(this._firstNode={data:e,next:null,previous:null},this._firstNode.next=this._firstNode,this._firstNode.previous=this._firstNode,this._lastNode=this._firstNode,this._currentNode=this._firstNode,void 0)},e.prototype.getCurrent=function(){return this._currentNode},e}),define("sap.watt.platform.tipsandtricks/service/TipsAndTricksManager",["sap/watt/lib/lodash/lodash","../datastructures/CyclicDoublyLinkedList"],function(e,t){function n(){p=this,sap.watt.includeCSS(require.toUrl("sap.watt.platform.tipsandtricks/css/TipsAndTricksDialogStyles.css"))}function r(){return this.context.service.preferences.get(h).then(function(e){return e&&e.showonstartup===!1?!1:!0})}function i(e){return p.context.service.preferences.set({showonstartup:e},h).fail(function(e){console.error("Couldn't set user preferences",[e])})}function o(){var e=this;return d.length<1?null:Q.all([e.context.service.tipsandtricks.getShowOnStartup(),f.getCurrent().data.service.getView()]).spread(function(t,n){var r=new sap.ui.commons.Dialog({title:e.context.i18n.getText("i18n","tips_and_tricks_dialog_title"),resizable:!1,width:"808px",modal:!0}).addStyleClass("tipsAndTricksDialog");return r.insertButton(new sap.ui.commons.Button({text:e.context.i18n.getText("i18n","dialog_close_button"),press:function(){r.close()}}),0),r.insertButton(new sap.ui.commons.Button({text:e.context.i18n.getText("i18n","dialog_next_button"),press:function(){f.next().data.service.getView().then(function(e){a(r,e)}).done()}}),0),r.insertButton(new sap.ui.commons.Button({text:e.context.i18n.getText("i18n","dialog_previous_button"),press:function(){f.previous().data.service.getView().then(function(e){a(r,e)}).done()}}),0),r.insertButton(new sap.ui.commons.CheckBox({text:e.context.i18n.getText("i18n","tips_and_tricks_dialog_checkbox"),checked:!t,change:function(e){var t=e.getParameter("checked");i(!t).done()}}).addStyleClass("tipsAndTricksDialogCheckBox")),r.addContent(n),r.open(),r})}function a(e,t){e.removeAllContent(),e.addContent(t)}function s(t){function n(e){return e.id}var r=e.uniq(t,n);if(r.length!==t.length){var i=e.groupBy(t,n),o=e.filter(i,function(e){return e.length>1});e.forEach(o,function(e){console.error("Tip ID: "+e[0].id+" exists "+e.length+" times and that's not cool! Only one of them will appear in the dialog.")})}var a=e.map(r,function(e){return void 0!==e.available?Q():e.service.isAvailable().then(function(t){e.available=t})});return Q.all(a).then(function(){var t=e.filter(r,function(e){return e.available});return t})}function u(n){return s(n.tips).then(function(n){d=n,f=new t(e.shuffle(n))})}function c(){return f}function l(){return d}var p,f=null,d=null,h="sap.watt.platform.tipsandtricks.service.tipsandtricks";return{init:n,openTipsAndTricksDialog:o,configure:u,getValidConfiguredTipsArray:l,getShowOnStartup:r,_getConfigsList:c,_changeDialogContentTo:a,_filterInvalidTips:s}}),define("sap.watt.platform.tipsandtricks/uicontrols/ShortcutLabel",[],function(){jQuery.sap.require("sap.ui.commons.Label");var e=sap.ui.commons.Label.extend("sap.watt.platform.plugin.tipsandtricks.ui.controls.ShortcutLabel",{renderer:function(e,t){e.addStyle("color","#346187"),e.addStyle("font-size","12px"),e.addStyle("font-family","Segoe UI"),e.addStyle("border-color","#4d4d4d !important"),e.addStyle("background-color","white"),e.addStyle("border-bottom","1px double"),e.addStyle("border-bottom-width","4px"),e.addStyle("border-top","1px solid"),e.addStyle("border-right","1px solid"),e.addStyle("border-left","1px solid"),sap.ui.commons.LabelRenderer.render(e,t),e.writeStyles()}});return e}),define("sap.watt.platform.tipsandtricks/service/TipsAndTricksViewsFactory",["sap/watt/lib/lodash/lodash","../uicontrols/ShortcutLabel"],function(e,t){function n(){s=this}function r(e){var t=e.getKeyBindingAsText(),n=t.indexOf("+")>=0?t.split("+"):t.split("");return n}function i(n){var i=[];return e.forEach(n,function(e){for(var n=r(e),o=[],a=0,s=0;a<2*n.length-1;++a)0===a%2?(o.push(new t({text:n[s]})),s++):o.push(new sap.ui.commons.Label({text:"+"}));var u=new sap.ui.layout.HorizontalLayout({content:o}).addStyleClass("tipsAndTricksViewShortcutsHorizontalLayout");i.push(u)}),new sap.ui.layout.VerticalLayout({content:i}).addStyleClass("tipsAndTricksViewShortcutsVerticalLayout")}function o(t,n,r,o,a){var u=e.map(o,function(e){return s.context.service.command.getCommand(e)});return Q.all(u).then(function(e){return sap.ui.jsview(t,{createContent:function(){var t=new sap.ui.commons.Image({src:require.toUrl(n)}).addStyleClass("tipsAndTricksViewImage"),o=new sap.ui.commons.Label({text:r}).addStyleClass("tipsAndTricksViewTipTitle"),s=new sap.ui.commons.TextView({text:a}).addStyleClass("tipsAndTricksViewTipText"),u=i(e),c=new sap.ui.layout.VerticalLayout({content:[o,u,s]}).addStyleClass("tipsAndTricksViewVerticalLayout"),l=new sap.ui.layout.HorizontalLayout({content:[t,c]}).addStyleClass("tipsAndTricksViewHorizontalLayout");return l}}),sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:t})})}function a(e,t,n,r){return sap.ui.jsview(e,{createContent:function(){var e=new sap.ui.commons.Image({src:require.toUrl(t)}).addStyleClass("tipsAndTricksViewImage"),i=new sap.ui.commons.Label({text:n}).addStyleClass("tipsAndTricksViewTipTitle"),o=new sap.ui.commons.TextView({text:r}).addStyleClass("tipsAndTricksViewTipText"),a=new sap.ui.layout.VerticalLayout({content:[i,o]}).addStyleClass("tipsAndTricksViewVerticalLayout"),s=new sap.ui.layout.HorizontalLayout({content:[e,a]}).addStyleClass("tipsAndTricksViewHorizontalLayout");return s}}),sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:e})}var s;return{init:n,buildShortcutView:o,buildSimpleTipView:a,_getCommandKeyBindingAsArray:r,_buildShortcutsLayout:i}}),define("sap.watt.common.builder/command/Builder",[],function(){"use strict";return{execute:function(){var e=this;return this.context.service.selection.assertNotEmpty().then(function(t){return e.context.service.console.setVisible(!0).then(function(){return e.context.service.builder.build(t[0].document)})})},isAvailable:function(){var e=this;return sap.watt.getEnv("internal")?this.context.service.selection.assertNotEmpty().then(function(t){return e.context.service.builder.isBuildSupported(t[0].document)}):!1},isEnabled:function(){var e=this;return sap.watt.getEnv("internal")?this.context.service.selection.assertNotEmpty().then(function(t){return e.context.service.builder.isBuildRequired(t[0].document)}):!1}}}),define("sap.watt.common.builder/command/BuildConfiguration",[],function(){"use strict";return{execute:function(){var e=this;return this.context.service.selection.assertNotEmpty().then(function(t){return e.context.service.projectsetting.setVisible(!0,t[0].document,"buildConfigurationsInProjectSettings")})},isAvailable:function(){var e=this;return sap.watt.getEnv("internal")?this.context.service.selection.assertNotEmpty().then(function(t){return e.context.service.builder.isBuildConfigurationSupported(t[0].document)}):!1},isEnabled:function(){var e=this;return sap.watt.getEnv("internal")?this.context.service.selection.assertNotEmpty().then(function(t){return e.context.service.builder.isBuildConfigurationSupported(t[0].document)}):!1}}}),define("sap.watt.common.builder/service/BuildDecorator",{decorate:function(e){var t=this;return e.getProject().then(function(n){var r=n.getEntity().getFullPath();return t.context.service.builder.isBuildSupported(n).then(function(i){return i?t.context.service.builder.getTargetFolder(n).then(function(t){if(t){var n=t.getEntity().getFullPath(),i=e.getEntity().getFullPath(),o=e.getEntity().getName();if(n===r&&"Component-preload.js"===o||n===r&&"resources.json"===o||i.indexOf(n)>-1&&n!==r)return{styleClass:["sapUiTreeNodeGeneratedNode"]}}}):void 0})})},init:function(){}}),define("sap.watt.common.builder/service/buildImpl",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{build:function(e){var t=this,n=this.context.i18n,r=e.getEntity().getFullPath(),i=!1;return t.context.service.progress.startTask().then(function(o){return t._printToConsoleLog("info",n.getText("i18n","builder_buildStarted",r)),t.context.service.usernotification.liteInfo(n.getText("i18n","builder_buildStarted",r)).done(),t._getBuildConfiguration(e).then(function(o){return o.buildService.build(e).then(function(){return o.buildService.setLastBuildDateTime(e).then(function(){t.context.service.usagemonitoring.report("builder","build",o.projectTypeId).done(),t.context.service.usernotification.liteInfo(n.getText("i18n","builder_BuildCompletedSuccessfully",r)).done()})}).fail(function(e){e.action="hcp_build",i=!0,t._printToConsoleLog("error",e.message);var o=n.getText("i18n","builder_buildCompletedWithErrors",r)+" "+e.message,a=n.getText("i18n","builder_buildFailed");sap.ui.commons.MessageBox.alert(o,null,a)})}).fin(function(){var e=i?"error":"info",a=i?"builder_buildCompletedWithErrors":"builder_BuildCompletedSuccessfully";return t._printToConsoleLog(e,n.getText("i18n",a,r)),t.context.service.progress.stopTask(o).done()})})},isBuildSupported:function(e){return e.isProject()?this._getBuildConfiguration(e).then(function(e){return e?!0:!1}):!1},isBuildConfigurationSupported:function(e){return e.isProject()?this._getBuildConfiguration(e).then(function(e){return e&&e.buildConfigurationService?!0:!1}):!1},isBuildRequired:function(e){return this._getBuildConfiguration(e).then(function(t){return t?t.buildService.isBuildRequired(e):!1})},getTargetFolder:function(e){var t=this;return this._getBuildConfiguration(e).then(function(n){if(n)return n.buildService.getTargetFolder(e);var r=e.getEntity().getName();throw new Error(t.context.i18n.getText("i18n","builder_notBuildable",r))})},getTargetFolderByProjectSettings:function(e){var t=this;return t._mConfig.projectTypes[0].buildService.getTargetFolderByProjectSettings(e)},getBuildConfigurationTitle:function(e){var t=this;return this._getBuildConfiguration(e).then(function(n){if(n)return n.buildConfigurationService.getTitle(e);var r=e.getEntity().getName();throw new Error(t.context.i18n.getText("i18n","builder_notBuildable",r))})},getBuildConfigurationUI:function(e){var t=this;return this._getBuildConfiguration(e).then(function(n){if(n)return n.buildConfigurationService.getUI(e);var r=e.getEntity().getName();throw new Error(t.context.i18n.getText("i18n","builder_notBuildable",r))})},configure:function(e){this._mConfig=e,this._aStyles=e.styles,this._aStyles&&this.context.service.resource.includeStyles(this._aStyles).done()},onDocumentChanged:function(e){var t=this;e.params.document.getProject().then(function(n){return t._getBuildConfiguration(n).then(function(t){return t?t.buildService.setIsBuildRequired(e,n):void 0})}).done()},_getBuildConfiguration:function(t){var n=this;return this.context.service.projectType.getProjectTypes(t).then(function(t){var r;return e.forEach(t,function(t){var i=e.findWhere(n._mConfig.projectTypes,{projectTypeId:t.id});r=i?i:r}),r})},_printToConsoleLog:function(e,t){"error"===e?this.context.service.log.error("Builder",t,["user"]).done():"info"===e&&this.context.service.log.info("Builder",t,["user"]).done()}}}),define("sap.watt.common.perspective/command/ResetToDefault",[],function(){"use strict";return{execute:function(){this.context.service.perspective.resetToDefault().done()},isAvailable:function(){return!0},isEnabled:function(){return!0}}}),define("sap.watt.common.perspective/command/MaximizeActiveView",[],function(){"use strict";return{execute:function(){this.context.service.perspective.setAreaMaximized("center_top",!0).done()},isAvailable:function(){return this.context.service.perspective.isAreaMaximized("center_top").then(function(e){return!e})}}}),define("sap.watt.common.perspective/command/ResetActiveView",[],function(){"use strict";return{execute:function(){this.context.service.perspective.setAreaMaximized("center_top",!1).done()},isAvailable:function(){return this.context.service.perspective.isAreaMaximized("center_top")}}}),function(){"use strict";jQuery.sap.declare("sap.watt.common.plugin.perspective.control.Shell"),sap.ui.core.Control.extend("sap.watt.common.plugin.perspective.control.Shell",{metadata:{aggregations:{content:{type:"sap.ui.core.Control"}}},renderer:function(e,t){e.write("<div"),e.writeControlData(t),e.write(">"),e.write("<div"),e.addClass("perspectiveContent"),e.writeClasses(),e.write(">");for(var n=t.getContent(),r=0;r<n.length;r++)e.renderControl(n[r]);e.write("</div>"),e.write("</div>")}})}(),define("sap.watt.common.perspective/control/Shell",function(){}),define("sap.watt.common.perspective/service/Perspective",["sap/watt/common/plugin/platform/service/ui/AbstractPart","sap/watt/lib/lodash/lodash","../control/Shell"],function(e,t){"use strict";var n=e.extend("sap.watt.common.plugin.perspective.service.Perspective",{_SETTINGS_VERSION:1,_shell:void 0,_mAreaById:{},_mAreaByIdByPerspective:{},_mDefaultViewsByPerspectivesId:{},_mPerspectivesId:{},_activePerspective:void 0,_bEmitSplitterEvents:!1,_oPreferenceModel:void 0,_mPreparedPerspectives:{},_mContentById:{},_bIsMaximizedActionDone:!1,_aSplitters:[],_mServicesByName:{},_perspectiveLoadError:!1,_oRendererQueue:new Q.sap.Queue,init:function(){var e=this;this._setSplitterEventsEnabled(!1),sap.ui.commons.Splitter.extend("sap.watt.common.plugin.perspective.Splitter",{renderer:"sap.ui.commons.SplitterRenderer"}),sap.watt.common.plugin.perspective.Splitter.prototype.resizeSplitterElements=function(){var t,n,r,i,o,a,s,u=this;sap.ui.getCore().getConfiguration().getRTL();var c=function(){return u.customWattData?"hidden"===u.customWattData.secondPane:!1};if(this.spOrientation===sap.ui.commons.Orientation.Vertical?(r=jQuery(this.splitterDIV).width(),s=this.sBarPosition>=100&&c()?0:this.sbSize,t=100*s/r,t=t>1?1:t,this.sBarPosition>100||this.sBarPosition+t>100?(this.sBarPosition=100-t,o=0):o=100-t-this.sBarPosition,jQuery(this.firstPane).css("width",this.sBarPosition+"%"),jQuery(this.splitterBar).css("width",s+"px"),jQuery(this.secondPane).css("width",o+"%")):(i=jQuery(this.splitterDIV).height(),s=this.sBarPosition>=100&&c()?0:this.sbSize,n=100*s/i,n=n>1?1:n,this.sBarPosition>100||this.sBarPosition+n>100?(this.sBarPosition=100-n,a=0):a=100-n-this.sBarPosition,jQuery(this.firstPane).css("height",this.sBarPosition+"%"),jQuery(this.splitterBar).css("height",s+"px"),jQuery(this.secondPane).css("height",a+"%")),this.setProperty("splitterPosition",this.sBarPosition+"%",!0),0===jQuery(this.splitterDIV).height()&&(jQuery(this.splitterDIV).css("height","100%"),jQuery(this.splitterBar).css("height","100%")),e._isSplitterEventsEnabled()){var l=e._getSplitterPositions();l.beforeMaximized=e._beforeMaximized,e._oPreferenceModel.storeSession(e._getCurrentPerspective(),l).done(),e.context.event.fireSplitterPositionChanged().done()}}},configure:function(e){var t=this;this._defaultPerspective=e.defaultPerspective,this._aStyles=e.styles,jQuery.each(e.perspectives,function(e,n){t._mPerspectivesId[n.id]=n}),jQuery.each(e.views,function(e,n){t._mServicesByName[n.id]=n,n.service.attachEvent("visibilityChanged",t._onVisibilityChange,t)}),jQuery.each(e.areas,function(e,n){var r=n.id,i=n.perspective;t._mDefaultViewsByPerspectivesId[i]=t._mDefaultViewsByPerspectivesId[i]||{},t._mDefaultViewsByPerspectivesId[i][r]=n,t._mAreaById[r]={},t._mAreaByIdByPerspective[i]=t._mAreaByIdByPerspective[i]||{},t._mAreaByIdByPerspective[i][r]={};var o=n.view;if(o){if(n.visible=n.visible&&"false"===n.visible?!1:!0,!t._mServicesByName[o])throw new Error("Perspective: configuration error. View with id "+n.view+" not found");t._mAreaById[r].service=o,t._mAreaByIdByPerspective[i][r].service=o}else n.visible=!1}),jQuery.each(this._mDefaultViewsByPerspectivesId,function(e){if(!t._mPerspectivesId[e])throw new Error('Perspective: Contribution to undefined perspective named "'+e+'"')}),e.preferenceService=e.preferenceService||{},e.preferenceService.service=this.context.service.preferences,e.preferenceService.node=e.preferenceService.node||"sap.watt.common.service.ui.Perspective",this._oPreferenceModel=new r(e.preferenceService,this._SETTINGS_VERSION)},isPerspectiveRegistered:function(e){return this._mPerspectivesId[e]?!0:!1},getContent:function(){var e=this;if(this._aStyles)var t=this.context.service.resource.includeStyles(this._aStyles).then(function(){return e.renderPerspective(e._getCurrentPerspective())});else var t=this.renderPerspective(this._getCurrentPerspective());return t.then(function(){return e._shell})},report:function(e,t){this.context.service.usagemonitoring.report("Perspective",e,t).done()},resetToDefault:function(e){var t=this;e=e||this._getCurrentPerspective(),this._perspectiveLoadError=!1;var n=[];return t._oPreferenceModel.setNetEnabled(!1),this._mAreaByIdByPerspective[e]&&jQuery.each(this._mAreaByIdByPerspective[e],function(e,r){var i=r.service,o=t._nameToService(i);if(o||(i=t._mAreaById[e].service,o=o=t._nameToService(i)),o){var a=r.initialSplitterPosition?"hidden"!==r.initialSplitterPosition:!1;n.push(o.setVisible(a))}}),Q.all(n).then(function(){return t._initSplitterPositions(t._getCurrentPerspective(),null).then(function(){e?t._oPreferenceModel.storeSession(e,{}):t._oPreferenceModel.removeSession()})}).then(function(){t._oPreferenceModel.setNetEnabled(!0)})},getCurrentPerspective:function(){return this._getCurrentPerspective()},_nameToService:function(e){return e?this._mServicesByName[e]?this._mServicesByName[e].service:void 0:void 0},_resetCurrentPerspective:function(){return this._activePerspective=this._defaultPerspective},_getCurrentPerspective:function(){return this._activePerspective||this._defaultPerspective},_getPerspective:function(e){var t=this;if(e=e||this._defaultPerspective,this._mPreparedPerspectives[e])return Q(this._mPreparedPerspectives[e]);var n,r,i=this._mDefaultViewsByPerspectivesId[e],o={},a=[],s=[];return a.push(e),i&&jQuery.each(i,function(e,n){if(s.push(e),n.view&&n.visible){var r=t._mServicesByName[n.view].service.getContent().fail(function(e){return t._perspectiveLoadError=!0,console.error("Perspective: cannot aquire content from ui part '"+n.view+"'",e),new sap.ui.core.HTML({content:"<div>Unavailable service: <strong>'"+n.view+"'</div>",sanitizeContent:!0})});a.push(r)}else a.push(null)}),Q.spread(a,function(){var e=arguments[0],a=1;for(var u in i)t._mContentById[u]=arguments[a++];jQuery.each(s,function(e,t){var a=i[t],s=a.position.split(":");n=o,r=s.length;for(var u=0;r>u;u++){var c=s[u].split("/"),l=c[0],p=c.length>1?c[1]:void 0;n[l]=n[l]||{content:{}},p&&(n[l].size=p),u===r-1?(n[l].content.cssclass=a.cssclass,n[l].content.id=a.id,n[l].content.visible=a.visible):n=n[l].content}}),o=t._createBiPartition(o);var c=t._splitterCreate(o,t._mContentById);return t._mPreparedPerspectives[e]=c,c})},_renderAt:function(e,t){var n=this,r=n._mServicesByName[t],i=this._getAreaById(e),o=this._mDefaultViewsByPerspectivesId[this._getCurrentPerspective()],a=o?o[e]:void 0;return a?r.service.getContent().then(function(a){if(!a)throw new Error("Service '"+t+"' delivered no content");a.__bAfterRenderingFocusAttached||(a.__bAfterRenderingFocusAttached=!0,a.addEventDelegate({onAfterRendering:function(){n.context.service.focus.attachFocus(r.service).done()}}));var s=r?r.cssclass:void 0;return s=s?s:o[e].cssclass,s&&a.addStyleClass(s),a.addStyleClass("sapWattSplitterPane"),n._addSplitterContent(i.splitter,i.component,a),n._mContentById[e]=a,n._mAreaById[e].service=t,!0}).then(function(){var t=n._oPreferenceModel.getLastKnown(n._getCurrentPerspective()),r=t?t[e]:void 0;return n._setVisible(e,!0,r).then(function(){return!0})}).fail(function(e){n._perspectiveLoadError=!0;var r=new sap.ui.core.HTML({content:"<div>Unavailable service: <strong>'"+t+"'</div>",sanitizeContent:!0});return n._addSplitterContent(i.splitter,i.component,r),console.error("Perspective: cannot aquire content from ui part '"+t+"'",e),!0}):Q(!1)},_handleViewProblem:function(e,t){var n=this;return e.context.service.usernotification.alert(t).then(function(){return n._perspectiveLoadError=!1,e._resetCurrentPerspective(),e.resetToDefault()})},placeServiceAt:function(e,t){var n=this;return this._placeServiceAt(e,t).then(function(e){return n._activePerspective?n.context.event.firePerspectiveChanged({from:n._activePerspective,to:n._activePerspective}).then(function(){return e}):e})},_placeServiceAt:function(e,t){var n=this._checkServiceName(t);if(!n)return Q();var r=null,i=this._nameToService(n);if(i){var o=this._getAreaById(e);
if(!this._mContentById[e])return this._renderAt(e,n);if(o.service!==t){var a=this._getAreaForService(n);if(a){var s=this._mAreaById[a];this._removeSplitterContent(s.splitter,s.component),this._mAreaById[a].service=null}return this._removeSplitterContent(o.splitter,o.component),this._renderAt(e,n)}}return r?r:new Q(!0)},getServiceAt:function(e){var t=this._getServiceAt(e),n=t?this._mServicesByName[t]:void 0;return n?n.service:void 0},getViewIdAt:function(e){var t=this._getServiceAt(e);return t?t:void 0},_getAreaById:function(e){var t=this._mAreaById[e];if(!t)throw new Error("Illegal argument: viewId '"+e+"' is not defined");return t},_getServiceAt:function(e){var t=this._getAreaById(e);return t&&t.service?t.service:void 0},getAreaForService:function(e){var t=this._checkServiceName(e);return t?this._getAreaForService(t):(console.warn('Perpsective.getAreaForService(): view "'+e+'" is not configured.'),null)},_checkServiceName:function(e){var t=void 0;return"string"==typeof e?t=e:e&&e.instanceOf&&(t=e.getProxyMetadata().getName(),t=this._mServicesByName[t]?t:void 0),t},setAreaMaximized:function(e,t){return this._setAreaMaximized(e,t)},isAreaMaximized:function(e){return this._isAreaMaximized(e)},setAreaVisible:function(e,t){var n=this,r=void 0;if(t){var i=n._oPreferenceModel.getLastKnown(n._getCurrentPerspective());r=i?i[e]:void 0}return this._setVisible(e,t,r).then(function(e){var t=n._getSplitterPositions();t.beforeMaximized=n._beforeMaximized;var e=n._oPreferenceModel.storeSession(n._getCurrentPerspective(),t);return n._activePerspective&&(e=e.then(function(){return n.context.event.firePerspectiveChanged({from:n._activePerspective,to:n._activePerspective})})),e})},isAreaVisible:function(e){return this._isAreaVisible(e)},_isAreaVisible:function(e){var t=this._getAreaById(e),n=t?t.splitter:void 0,r=t?1===t.component:!0,i=n&&r?n.customWattData.firstPane:n.customWattData.secondPane;return!i},_isAreaMaximized:function(e){var t=!0,n=this._oPreferenceModel._mUserPreferencesAsJson[this._getCurrentPerspective()];return n&&n.content?(jQuery.each(n.content,function(n){return e!==n?(t=!1,!1):void 0}),t):!1},_setAreaMaximized:function(e,n){var r=this,i=r._mContentById[e],o=i?i.getDomRef():null;if(o){if(n){var a=t.cloneDeep(r._getSplitterPositions());r._beforeMaximized=a;var s=this._oPreferenceModel._mUserPreferencesAsJson[r._getCurrentPerspective()];if(s){var u=[];return jQuery.each(s.content,function(t,n){var i=r._mServicesByName[n];e!==t&&u.push(i.service.setVisible(!1))}),Q.all(u).then(function(){r._oPreferenceModel.setNetEnabled(!0),r._bIsMaximizedActionDone=!0})}return r.resetToDefault(r._activePerspective)}return r._bIsMaximizedActionDone?r._oPreferenceModel.beginSession(r._getCurrentPerspective()).then(function(e){if(e&&e.beforeMaximized){var n=[];return jQuery.each(e.beforeMaximized.content,function(e,t){var i=r._mServicesByName[t];i&&n.push(i.service.setVisible(!0))}),t.forEach(e.beforeMaximized,function(t,i){if("content"!==i&&r._alwaysOpenAsDefaultAfterNormailze(i)===!0){var o=r._mAreaById[i];if(o){var a=o.service,s=r._mServicesByName[a];n.push(s.service.setVisible(!0));var u=o.initialSplitterPosition;e.beforeMaximized[i]=u}}}),Q.all(n).then(function(){return r._initSplitterPositions(r._activePerspective,e.beforeMaximized)}).then(function(){r._bIsMaximizedActionDone=!1})}return r.resetToDefault(r._activePerspective)}):r.resetToDefault(r._activePerspective)}},_initSplitterPositions:function(e,t,n){this._setSplitterEventsEnabled(!1);for(var r=this,i=this._getAllSplitters(),o=[],a=0;a<i.length;a++)o.push(this._initializeSplitter(i[a],t,n).done());return Q.spread(o,function(){r._setSplitterEventsEnabled(!0)}).then(function(){return r.context.event.fireSplitterPositionChanged()})},_isPartOfAreaRestorable:function(e){var t=this._mAreaById[e].service;if(t){var n=this._mServicesByName[t],r=n?n.restore:void 0;return void 0===r?!0:"true"===r}return!1},_alwaysOpenAsDefaultAfterNormailze:function(e){var t=this._mAreaById[e].service;if(t){var n=this._mServicesByName[t],r=n?n.alwaysOpenAsDefaultAfterNormalized:void 0;return void 0===r?!1:"true"===r}return!1},_initializeSplitter:function(e,t,n){var r=this,i=e.customWattData.firstPaneId,o=e.customWattData.secondPaneId,a=t&&i?t[i]:void 0,s=t&&o?t[o]:void 0;i&&n&&!this._isPartOfAreaRestorable(i)&&(a="hidden",s=s?"100%":void 0),o&&n&&!this._isPartOfAreaRestorable(o)&&(s="hidden",a=a?"100%":void 0);var u=void 0,c=Q();if(a)c=this._setVisible(e.customWattData.firstPaneId,void 0,a);else if(u=void 0,u=this._mAreaById[e.customWattData.firstPaneId]){var l=u.initialSplitterPosition,p=l&&"hidden"!==l,f=r._mServicesByName[u.service];c=f.service.setVisible(p).then(function(){return r._setVisible(e.customWattData.firstPaneId,void 0,u.initialSplitterPosition)})}return c.then(function(){return s?r._setVisible(e.customWattData.secondPaneId,void 0,s):(u=void 0,u=r._mAreaById[e.customWattData.secondPaneId],u?r._setVisible(e.customWattData.secondPaneId,void 0,a?a:u.initialSplitterPosition):Q())})},_setSplitterEventsEnabled:function(e){this._bEmitSplitterEvents=e},_isSplitterEventsEnabled:function(){return this._bEmitSplitterEvents},renderPerspective:function(e){var t=this;return this._oRendererQueue.next(function(){return t._renderPerspective(e)})},_renderPerspective:function(e){var t=this,n=void 0,r=this._activePerspective;this._mContentById={},this._activePerspective=e,this._activePerspective!=r&&(n=this._getPerspective(this._activePerspective).then(function(n){return t._shell?(t._shell.removeAllContent(),t._shell.addContent(n),t._setSplitterEventsEnabled(!1),sap.ui.getCore().applyChanges(),t._setSplitterEventsEnabled(!0)):t._shell=new sap.watt.common.plugin.perspective.control.Shell({id:"mainShell",content:n}),t._oPreferenceModel.beginSession(e).then(function(e){if(e){var n=[];return jQuery.each(e.content,function(e,r){var i=t._mServicesByName[r];i&&"false"!==i.restore&&n.push(i.service.setVisible(!0))}),Q.all(n).then(function(){return t._initSplitterPositions(t._activePerspective,e,!0)}).then(function(){t._oPreferenceModel.setNetEnabled(!0)})}return t.resetToDefault(t._activePerspective)})}).fail(function(){return t.resetToDefault(t._activePerspective)})),n=n?n:Q();var i=void 0,o=t._mDefaultViewsByPerspectivesId[t._activePerspective];for(var a in o){var s=o[a];if(s.visible){i=s.view;break}}var u=i?t._mServicesByName[i]:void 0;return u&&u.service&&(n=n.then(function(){return t.context.service.focus.setFocus(u.service)})),n.then(function(){return t._perspectiveLoadError?t._handleViewProblem(t,t.context.i18n.getText("i18n","perspective_message_load_issue")):Q()}).then(function(){return t.context.event.firePerspectiveChanged({from:r,to:t._activePerspective})})},_measurePartition:function(e){for(var t=Object.keys(e),n=0,r=0,i=0;i<t.length;i++){var o=e[t[i]];o.size?n+=parseInt(o.size,10):r++}return r=0===r?1:r,100>n?(100-n)/r:0},_createBiPartition:function(e){for(var t,n,r,i,o,a=Object.keys(e),s=a.length,u=0,c=this._measurePartition(e),l=0;s>l;l++){t=t||e[a[l]],t.content&&t.content.id||(t.content=this._createBiPartition(t.content));var p=t.size?parseInt(t.size,10):c;if(i=100-u,o=i>0?100*p/i:100,u+=p,l>0&&s>2&&s-1>l){a[l].match(/[a-zA-Z]/)?(n="A",r="B"):(n="1",r="2");var f=jQuery.extend(!0,{},t);t.size=void 0,t.content={},t.content[n]=f,t.content[n].size=o+"%";var d=jQuery.extend(!0,{},e[a[l+1]]);t.content[r]=d,l===s-2&&(t.content[r].size=void 0),delete e[a[l+1]],t=d}else t=null}return e},_getNewSplitter:function(){var e=new sap.watt.common.plugin.perspective.Splitter({showScrollBars:!1,width:"100%",height:"100%",splitterPosition:"100%"});return this._aSplitters.push(e),e},_getAllSplitters:function(){return this._aSplitters},_splitterCreate:function(e,t){function n(e,t,n,i,o,a,s){o.customWattData=o.customWattData||{},u._addAreaReference(a,o,i,t.size),r(o,e,i,n);var c=s?u._getActSize(o,s,i,t.size):"hidden";o.customWattData.initialHidden||(s||(o.customWattData.initialHidden=!0),o instanceof sap.ui.commons.Splitter&&(u._mAreaById[a].initialSplitterPosition=c,"hidden"!==c&&o.setSplitterPosition(c))),1===i?(o.customWattData.firstPaneId=a,o.customWattData.firstPane=c):(o.customWattData.secondPaneId=a,o.customWattData.secondPane=c),e&&e.addEventDelegate({onAfterRendering:function(){var e=u._mAreaById[a].service,t=u._nameToService(e);t&&u.context.service.focus.attachFocus(t).done()}})}function r(e,t,n,r){t=t||new sap.ui.core.HTML({content:"<div></div>",sanitizeContent:!0}),r&&t.addStyleClass(r),e instanceof sap.ui.commons.Splitter?1===n?e.addFirstPaneContent(t):e.addSecondPaneContent(t):e.addContent(t)}var i,o,a,s;Object.keys(e).length>1?s=this._getNewSplitter():(sap.ui.core.Control.extend("Box",{metadata:{aggregations:{content:{type:"sap.ui.core.Control",multiple:!0,singularName:"content"}}},renderer:function(e,t){e.write("<div style='width:100%;height:100%;'"),e.writeControlData(t),e.write(">");for(var n=t.getContent(),r=0;r<n.length;r++)e.renderControl(n[r]);e.write("</div>")}}),s=new Box);var u=this,c=0,l=null;for(var p in e)if(c++,i=i||(p.match(/[a-zA-Z]/)?sap.ui.commons.Orientation.Horizontal:sap.ui.commons.Orientation.Vertical),s instanceof sap.ui.commons.Splitter&&s.setSplitterOrientation(i),o=e[p].content,l=this._getDefinedSize(e,p),o.id){var f=t[o.id];n(f,l,o.cssclass,c,s,o.id,o.visible)}else a=this._splitterCreate(o,t),r(s,a,c,l.size,o.cssclass,o.id);return s._perspectiveName=u._activePerspective,s.getPerspectiveName=function(){return u._perspectiveName},s},_addAreaReference:function(e,t,n,r){this._mAreaById[e]||(this._mAreaById[e]={}),this._mAreaById[e].splitter=t,this._mAreaById[e].component=n,this._mAreaById[e].size=r},_getDefinedSize:function(e,t){var n={size:"50%",defined:!0},r=Object.keys(e);if(2===r.length){e[r[0]].size?n.size=e[r[0]].size:e[r[1]].size&&(n.size=100-parseInt(e[r[1]].size,10)+"%");var i=e[t];n.defined=i.size?!0:!1}return n},_removeSplitterContent:function(e,t){1===t?e.removeAllFirstPaneContent():e.removeAllSecondPaneContent()},_addSplitterContent:function(e,t,n){1===t?e.addFirstPaneContent(n):e.addSecondPaneContent(n)},_getAreaForService:function(e){for(var t in this._mAreaById)if(this._mAreaById.hasOwnProperty(t)&&this._mAreaById[t].service==e)return t;return null},_getSplitterPositions:function(){for(var e={content:{}},t=this._getAllSplitters(),n=0;n<t.length;n++){var r=t[n];if(r._perspectiveName===this._activePerspective){var i=r.customWattData?r.customWattData.firstPaneId:void 0,o=r.customWattData?r.customWattData.secondPaneId:void 0;if(i)if("hidden"===r.customWattData.firstPane)e[i]="hidden";else{e[i]=r.getSplitterPosition();var a=this._getServiceAt(i);if(a){var s=this._mServicesByName[a];s&&"false"!==s.settings&&(e.content[i]=a)}}if(o)if("hidden"===r.customWattData.secondPane)e[o]="hidden";else{e[o]=r.getSplitterPosition();var a=this._getServiceAt(o);if(a){var s=this._mServicesByName[a];s&&"false"!==s.settings&&(e.content[o]=a)}}i&&o&&("hidden"===e[i]?delete e[o]:"hidden"===e[o]?delete e[i]:delete e[o])}}return e},_setVisible:function(e,t,n){var r=this,i=this._getAreaById(e),o=t||n&&"hidden"!==n,a=i.splitter,s=1===i.component,u=n?n:r._getActSize(a,o,i.component,i.size);return o?this._mContentById[e]?(a.setSplitterPosition(u),a.setSplitterBarVisible(!0),s?delete a.customWattData.firstPane:delete a.customWattData.secondPane,Q()):this.placeServiceAt(e,i.service).then(function(){s?delete a.customWattData.firstPane:delete a.customWattData.secondPane,a.setSplitterPosition(u),a.setSplitterBarVisible(!0)}):(a.setSplitterBarVisible(!1),s?(a.customWattData.firstPane="hidden",a.setSplitterPosition("0%"),jQuery(a.secondPane).css("width","100%")):(a.customWattData.secondPane="hidden",a.setSplitterPosition("100%")),Q())},_getActSize:function(e,t,n,r){var i=e.customWattData;return 1===n?i&&"hidden"===i.secondPane?"100%":t?r:"0%":i&&"hidden"===i.firstPane?"100%":t?r:"100%"},_isFirstPane:function(e,t){return e.getFirstPaneContent()[0]===t?!0:e.getSecondPaneContent()[0]===t?!1:void 0},_onVisibilityChange:function(e){var t=this,n=e.source.getProxyMetadata().getName(),r=this._getAreaForService(n),i=void 0;if(r)i=this.setAreaVisible(r,e.params.visible);else if(e.params.visible){var o=this._mServicesByName[n];if(o){var a=this._getServiceAt(o.area);a=a&&a!=n?this._mServicesByName[a]:void 0,i=a?a.service.isVisible().then(function(r){return r?(t._oPreferenceModel.setNetEnabled(!1),a.service.setVisible(!1).then(function(){return t.placeServiceAt(o.area,n).then(function(){return t._oPreferenceModel.setNetEnabled(!0),t.setAreaVisible(o.area,e.params.visible)})})):t.placeServiceAt(o.area,n).then(function(){return t.setAreaVisible(o.area,e.params.visible)})}):t.placeServiceAt(o.area,n).then(function(){return t.setAreaVisible(o.area,e.params.visible)})}}return i?i:Q()}}),r=function(e,t){var n={_mUserPreferencesAsJson:{},_bEnabled:!1,beginSession:function(e){return that._mUserPreferencesAsJson[e]={},Q()},storeSession:function(e,t){return this._mUserPreferencesAsJson[e+"_lastKnown"]=this._extractLastKnown(this._mUserPreferencesAsJson[e],t),this._mUserPreferencesAsJson[e]=t,Q()},removeSession:function(){return Q()},getLastKnown:function(e){return this._mUserPreferencesAsJson[e+"_lastKnown"]},_extractLastKnown:function(e,t){var n=e||{},r=t||{},i={};return jQuery.each(r,function(e,t){if("content"===e)return!0;if("hidden"!=t)i[e]=t;else{var r=n[e];"hidden"===t&&"hidden"!=r&&(i[e]=r)}}),i},setNetEnabled:function(e){this._bEnabled=e},getNetEnabled:function(){return this._bEnabled}},r=jQuery.extend({},n,{_fPersistenceSrv:void 0,_sPersistenceNode:void 0,_mUserPreferencesAsJson:{},_formatVersion:void 0,beginSession:function(e){var t=this;return this._fPersistenceSrv.get(this._sPersistenceNode).then(function(n){return n&&n.version===t._formatVersion&&(t._mUserPreferencesAsJson[e]=n[e]),t._mUserPreferencesAsJson[e]}).fail(function(){return t._mUserPreferencesAsJson[e]={},null})},storeSession:function(e,t){var n=Q();return this.getNetEnabled()&&(this._mUserPreferencesAsJson.version=this._formatVersion,this._mUserPreferencesAsJson[e+"_lastKnown"]=this._extractLastKnown(this._mUserPreferencesAsJson[e],t),this._mUserPreferencesAsJson[e]=t,n=this._fPersistenceSrv.set(this._mUserPreferencesAsJson,this._sPersistenceNode).fail(function(e){console.error("perspective: user settings could not be written! "+e)})),n},removeSession:function(){return this._mUserPreferencesAsJson={},this._fPersistenceSrv.remove(this._sPersistenceNode).fail(function(e){console.error("perspective: user settings could not be removed! "+e)})}});return e&&e.service?(r._fPersistenceSrv=e.service,r._sPersistenceNode=e.node,r._formatVersion=t,r):n};return n}),define("sap.watt.common.document/Document",[],function(){"use strict";var e=sap.ui.base.Object.extend("sap.watt.common.plugin.document.Document",{constructor:function(e,t,n,r){this._oOwner=e,this._oDAO=t,this._mEntity=n,this._mMetadata={},this._oEventEmitter=r,this._mState={bDirty:!1,bNew:!n,sETag:null},this._dirtyContent=null,this._bExtDoc=!1,this._mExtInfo=null,this._savedContent=null,this._oSaveQueue=new Q.sap.Queue,this._oLoadedPromise=Q(),this._oHiddenPromise=Q()}});return e.prototype=jQuery.extend(e.prototype,{getKeyString:function(){return this._mEntity.getKeyString(this._mEntity)},getEntity:function(){return this._mEntity},contains:function(e,t){return t=t===!0,this.getEntity().contains(e.getEntity(),t)},isTypeOf:function(e){return e===this.getType()},isReadOnly:function(){return this.getExtInfo()&&this.getExtInfo().readOnly===!0?!0:!!this._mMetadata.readOnly},getType:function(){return this._mEntity.getType()},getDocumentMetadata:function(){return this._mMetadata},setDocumentMetadata:function(e){this._mMetadata=e},getETag:function(e){var t=this;return e?this._oDAO.readFileMetadata(this).then(function(e){return e?t._setState({sETag:e.sETag}).then(function(){return t._mState.sETag}):null}):this._mState.sETag},isDirty:function(){return this._mState.bDirty===!0},isNew:function(){return this._mState.bNew===!0},getContent:function(){var e=this;return this._ensureLoaded().then(function(t){return null===e._dirtyContent?t:e._dirtyContent})},invalidate:function(){this._savedContent=null},revert:function(e){return this.setContent(this._savedContent,e)},setContent:function(e,t){var n=this;return this._ensureLoaded().then(function(r){var i,o=n._mState.bDirty;if(r===e)n._dirtyContent=null,i=!1;else{if(n._dirtyContent===e)return;n._dirtyContent=e,i=!0}return n._setState({bDirty:i}).then(function(){return o!==i||r!==e?n._oEventEmitter.fireChanged({document:n,changeType:"content",options:{source:t}}):void 0})})},setHidden:function(e,t){var n=this;return this._oHiddenPromise.then(function(){e=e===!0;var r=n._mMetadata.hidden===!0;return e===r?Q():(n._mMetadata.hidden=e,n.getParent().then(function(e){return n._oEventEmitter.fireChanged({document:n,changeType:"hidden",parent:e,options:{source:t}})}))}),this._oHiddenPromise},getExtInfo:function(){return this._mExtInfo},setExtInfo:function(e){this._mExtInfo=e},_hasStateChanged:function(e){for(var t in e)if(this._mState[t]!==e[t])return!0;return!1},_setState:function(e){return this._hasStateChanged(e)?(jQuery.extend(this._mState,e),this._oEventEmitter.fireStateChanged({document:this})):Q()},save:function(e){if(e=e!==!1,!this.isDirty())return Q();var t=this;return this._oSaveQueue.next(function(){return t._oDAO.save(t).then(function(n){return t._savedContent=t._dirtyContent,t._dirtyContent=null,t._setState({bDirty:!1,bNew:!1,sETag:n}).then(function(){return e?t._oEventEmitter.fireSaved({document:t}):void 0}).thenResolve(n)})})},reload:function(e){var t=this;return this.invalidate(),this._dirtyContent=null,this._ensureLoaded().then(function(){return t._oEventEmitter.fireChanged({document:t,changeType:"content",options:{source:e}})})},"delete":function(){throw new Error("Delete not supported for documents of type "+this.getType())},getTitle:function(){return this._mEntity.getTitle()},needToReloadCheck:function(){var e=this;return Q.all([this.getETag(),this.getETag(!0),this.isDirty()]).spread(function(t,n,r){return null===n?!1:t!==n?r?e._oOwner.context.service.document.context.service.usernotification.confirm(e._oOwner.context.service.document.context.i18n.getText("i18n","document_reloadQuestion",[e.getEntity().getFullPath()])).then(function(t){return t.bResult?e.reload().then(function(){return Q(!0)}):e._setState({sETag:n}).then(function(){return Q()})}):e.reload().then(function(){return Q(!0)}):Q()}).fail(function(t){return e.exists().then(function(e){if(e)throw t;return Q()})})},_ensureLoaded:function(){var e=this;return this._oLoadedPromise=this._oLoadedPromise.then(function(){return null===e._savedContent?e._oDAO.load(e).then(function(t){return e._savedContent=t.mContent,e._setState({bDirty:!1,sETag:t.sETag}).then(function(){return e._oEventEmitter.fireLoaded({document:e}).thenResolve(t.mContent)})}):e._savedContent}),this._oLoadedPromise},_notifyAboutNewDocument:function(e,t){return Q.all([this._oEventEmitter.fireCreated({document:t,parent:e}),this._oEventEmitter.fireChanged({document:e,changeType:"children"})])},_notifyAboutDeletion:function(e,t){return Q.all([this._oEventEmitter.fireDeleted({document:t,parent:e}),this._oEventEmitter.fireChanged({document:t,changeType:"deleted"})])},_notifyAboutMove:function(e){return this._oEventEmitter.fireChanged({document:this,newDocument:e,changeType:"renamed"})}}),e}),define("sap.watt.common.filesystem/document/AbstractFileSystemDocument",["sap.watt.common.document/Document"],function(e){"use strict";var t=e.extend("sap.watt.common.plugin.filesystem.document.AbstractFileSystemDocument");return t.prototype=jQuery.extend(t.prototype,{getParent:function(){return this._oOwner.getDocument(this.getEntity().getParentPath(),this.getEntity().getDAO())},exists:function(){var e=this;return this.getParent().then(function(t){return t?t.objectExists(e.getTitle()):!1})},copy:function(e,t,n){var r=this;return this._oDAO.getDocument(e.getEntity().getFullPath()+"/"+t).then(function(i){return r._oDAO.copyObject(r,e,t,n).then(function(t){return i?i.refresh().then(function(){return i}):e._newDocumentHandler(t).then(function(){return t.refresh().then(function(){return t})})})})},move:function(e,t){var n=this;return this._oDAO.moveObject(this,e,t).then(function(t){return n._notifyAboutMove(t).then(function(){return n.getParent().then(function(r){return r._deleteDocumentHandler(n).then(function(){return e._newDocumentHandler(t).then(function(){return n.getEntity().isProject()?e.getProject(!0).then(function(e){return e.refresh().then(function(){return t})}):t.refresh().then(function(){return t})})})})})})},isProject:function(){return this.getEntity().isProject()},getProject:function(e){return e=e===!0,this.getEntity().isRoot()?Q(this):this.getEntity().isProject()?e&&this.getEntity().isProject()&&""!==this.getEntity().getParentPath()?this.getParent().then(function(t){return t.getProject(e)}):Q(this):this.getParent().then(function(t){return t?t.getProject(e):null})},getVersions:function(e){var t=e?this._oOwner._oDAO[e]:this._oDAO;return e=e||this.getEntity().getDAO(),t.getVersions(this,e)},getVersion:function(e,t){var n=t?this._oOwner._oDAO[t]:this._oDAO;return t=t||this.getEntity().getDAO(),n.getVersion(this,e,t)},_moveInternally:function(e,t,n){return this._oDAO._moveInternally(e,t,n).then(function(e){return e})}}),t}),define("sap.watt.common.filesystem/document/FolderDocument",["./AbstractFileSystemDocument","sap/watt/lib/lodash/lodash"],function(e,t){"use strict";var n=e.extend("sap.watt.common.plugin.filesystem.document.FolderDocument");return n.prototype=jQuery.extend(n.prototype,{_oRefreshPromise:Q(),createProject:function(e){var t=this;return this._oDAO.createProject(this,e).then(function(e){return Q.spread([t._newDocumentHandler(e),e.getProject(!0)],function(t,n){return n.refresh().then(function(){return e})})})},convertToProject:function(e){if(this.getEntity().isRoot())throw new Error("Root cannot be converted to a project");if(this.getEntity().isProject())throw new Error("The folder is already a project");return this._oDAO.convertToProject(this,e).then(function(e){return e.getProject(!0).then(function(t){return t.refresh().then(function(){return e})})})},createFile:function(e){var t=this;return this._oDAO.createFile(this,e).then(function(e){return t._newDocumentHandler(e)})},_newDocumentHandler:function(e){var t=this;return this._notifyAboutNewDocument(this,e).then(function(){return t._updateMetaData().then(function(){return e})})},createFolder:function(e){var t=this;return this._oDAO.createFolder(this,e).then(function(e){return t._newDocumentHandler(e)})},touch:function(e){var t=this;return this.getChild(e).then(function(n){return n?n:t.createFile(e)})},_deleteDocumentHandler:function(e){var t=this;return this._notifyAboutDeletion(this,e).then(function(){return t._updateMetaData()})},"delete":function(){var e=this;return this._oDAO.deleteFolder(this).then(function(){return e.getParent().then(function(t){return t._deleteDocumentHandler(e)})})},_notifyAndUpdate:function(e,t,n){var r=this._getChange(t,n);return e._notifyChange(r).then(function(){return e._updateMetaData()})},exportZip:function(){var e=this;return Q.spread([this._oDAO.exportZip(this),Q.sap.require("sap/watt/lib/jszip/jszip-shim")],function(t){return e._oOwner.context.event.fireBeforeExportZip({zip:t,fullPath:e.getEntity().getFullPath()},e).then(function(){return t.generate({type:"blob"})})})},getCurrentMetadata:function(e,t){if(e=e===!0,this.getEntity().isRoot()&&e)throw new Error("getCurrentMetadata is not supported for root folder and recursive mode");return this._oDAO.getCurrentMetadata(this,e,!1,t).then(function(e){return e||[]})},getFolderContent:function(){return this._oDAO.getFolderContent(this,!1)},getChild:function(e){var t=this.getEntity().getFullPath()+"/"+e;return this._oDAO.getDocument(t)},_rootRefresh:function(){var e=this;return this.getFolderContent().then(function(t){return e._oDAO.getFolderContent(e,!0).then(function(n){var r=$(n).not(t).get(),i=$(t).not(n).get();return e._notifyAndUpdate(e,r,i).then(function(){for(var e=[],t=0;t<r.length;t++){var n=r[t];e.push(n.refresh())}return Q.all(e)})})})},refresh:function(){var e=this;return this._oRefreshPromise=this._oRefreshPromise.then(function(){return e.getEntity().isRoot()?e._rootRefresh():e._refresh()}),this._oRefreshPromise},_refresh:function(){var e=this;return Q.spread([this._oOwner.context.service.document.getContainedDocuments(this),this.getCurrentMetadata(!0)],function(t,n){return e._oDAO.getCurrentMetadata(e,!0,!0).then(function(r){var i=e._metadataDifference(n,r),o=e._getDeletedDocuments(t,i),a=$(t).not(o).get();return Q.all([e._notifyDeletedDocuments(i,o,t),e._notifyAddedDocuments(n,r,t),e._refreshExistingFileDocuments(a)])})})},_refreshExistingFileDocuments:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r.getEntity().isFile()&&r._savedContent&&!r.isDirty()&&t.push(r.refresh())}return Q.all(t)},_notifyAddedDocuments:function(e,t,n){for(var r=this,i=this._metadataDifference(t,e),o=[],a=0;a<i.length;a++){var s=i[a],u=r._getDocumentParent(s.parentPath,n);this._notifyAddedDocument(s,u,o)}return Q.all(o)},_notifyAddedDocument:function(e,t,n){t&&n.push(this._oDAO.getDocument(e.path).then(function(e){return t._newDocumentHandler(e)}))},_getDeletedDocuments:function(e,n){for(var r={},i=0;i<e.length;i++){var o=e[i];r[o.getEntity().getFullPath()]=o}for(var a=0;a<n.length;a++){var s=n[a];delete r[s.path]}var u=$(e).not(t.values(r)).get();return u},_getDocumentParent:function(e,t){var n={};n[this.getEntity().getFullPath()]=this;for(var r=0;r<t.length;r++){var i=t[r];n[i.getEntity().getFullPath()]=i}var o=n[e];return o},_notifyDeletedDocuments:function(e,t,n){for(var r=[],i=0;i<t.length;i++){var o=t[i],a=this._getDocumentParent(o.getEntity().getParentPath(),n);this._notifyDeletedDocument(o,a,r)}return Q.all(r)},_notifyDeletedDocument:function(e,t,n){t?n.push(t._deleteDocumentHandler(e)):n.push(e.getParent().then(function(t){return t?t._deleteDocumentHandler(e):void 0}))},_metadataDifference:function(e,n){for(var r={},i=0;i<e.length;i++){var o=e[i];r[o.path]=o}for(var a=0;a<n.length;a++){var s=n[a];delete r[s.path]}return t.values(r)},importFile:function(e,t,n,r){var i=this;return this.getCurrentMetadata().then(function(o){return i._oDAO.importFile(i,e,t,n,r).then(function(t){for(var n=r||e.name,a=0;a<o.length;a++)if(o[a].name===n)return t.refresh().then(function(){return t});return i._newDocumentHandler(t)})})},importZip:function(e,t){var n=this;return this._oDAO.importZip(this,e,t).then(function(){return n.refresh()})},objectExists:function(e){return this._oDAO.objectExists(this,e)},_getChange:function(e,t){return{aNewContent:e instanceof Array?e:e?[e]:[],aDeletedContent:t instanceof Array?t:t?[t]:[]}},_notifyChange:function(e){for(var t=new Q.sap.Queue,n=0;n<e.aNewContent.length;n++)this._notifyNew(t,e.aNewContent[n]);for(var r=0;r<e.aDeletedContent.length;r++)this._notifyDeleted(t,e.aDeletedContent[r]);return t._oPromise},_notifyNew:function(e,t){var n=this;e.next(function(){return n._notifyAboutNewDocument(n,t)})},_notifyDeleted:function(e,t){var n=this;e.next(function(){return n._notifyAboutDeletion(n,t)})},_updateMetaData:function(){var e=this;return this.getFolderContent().then(function(t){var n=e.getDocumentMetadata(),r=t&&t.length>0;return n.hasChildren!==r?(n.hasChildren=r,e.setDocumentMetadata(n),e._oEventEmitter.fireChanged({document:e,changeType:"children"}).then(function(){return t})):t})}}),n}),define("sap.watt.common.filesystem/document/ProjectDocument",["./FolderDocument","sap/watt/lib/lodash/lodash"],function(e,t){"use strict";var n=e.extend("sap.watt.common.plugin.filesystem.document.ProjectDocument",{constructor:function(){e.apply(this,arguments)}});return n.prototype=jQuery.extend(n.prototype,{oAccessPromise:Q(),"delete":function(){var t=this;return this.getProject(!0).then(function(n){return e.prototype["delete"].apply(t,arguments).then(function(e){return n.getEntity().getFullPath()===t.getEntity().getFullPath()?e:n.getEntity().getFullPath()===t.getEntity().getFullPath()?e:n.refresh().then(function(){return e})})})},getProjectMetadata:function(){return t.cloneDeep(this._oProjectMetadata)},updateProject:function(e){return this._oDAO.updateProject(this,e)}}),n}),define("sap.watt.common.filesystem/document/FileDocument",["./AbstractFileSystemDocument"],function(e){"use strict";var t=e.extend("sap.watt.common.plugin.filesystem.document.FileDocument");return t.prototype=jQuery.extend(t.prototype,{refresh:function(){return this.reload(this)},"delete":function(){var e=this;return Q.spread([this._oDAO.deleteFile(this),this.getParent(),e._setState({bExists:!1})],function(t,n){return n._deleteDocumentHandler(e)})},readFileMetadata:function(){var e=this.getETag(!1);return null!==e&&void 0!==e?e:this.getETag(!0)},isBinary:function(){switch(this.getEntity().getFileExtension().toLowerCase()){case"jpg":case"jpeg":case"gif":case"ico":case"png":case"ttf":case"zip":case"jar":case"war":case"bmp":case"tif":case"tiff":case"mtar":return Q(!0);default:return Q(!1)}},createFileBlob:function(){return this.getContent().then(function(e){var t;return"string"==typeof e?t=new Blob([e],{type:"application/text; charset=UTF-8"}):e.type&&!sap.ui.Device.browser.safari?t=new Blob([e],{type:e.type}):e.type&&sap.ui.Device.browser.safari&&(t=new Blob([e],{type:"application/binary"})),t})}}),t}),define("sap.watt.common.filesystem/document/FileFolderEntity",[],function(){"use strict";var e=function(e,t,n,r,i){if(!n&&null!==t){var o=t.lastIndexOf("/");n=t.substr(0,o),t=t.substr(o+1)}if("object"===jQuery.type(n)){var a=n;n=a.getEntity().getFullPath()}this._sType=e,this._sName=t,this._sParentPath=n,this._sVersionId=i,this._sDAO=r||"workspace"};return e.prototype={isProject:function(){return this.isRoot()?!1:this.isFolder()&&(""===this.getParentPath()||this._bProject===!0)},isFolder:function(){return"folder"===this.getType()},isFile:function(){return"file"===this.getType()},getType:function(){return this._sType},contains:function(e,t){if(t=t===!0,!e.isFile()&&!e.isFolder())return!1;if(this.isFile())return!1;var n=this.getFullPath()+"/",r=e.getFullPath();return""===r?!1:0===r.indexOf(n)&&t===!1?!0:t===!0&&-1===r.replace(n,"").indexOf("/")?!0:!1},getName:function(){return this._sName},setName:function(e){this._sName=e},getParentPath:function(){return this._sParentPath},getVersionId:function(){return this._sVersionId},getDAO:function(){return this._sDAO},isRoot:function(){return""===this._sParentPath&&""===this._sName},getFullPath:function(){if(this.isRoot())return"";var e=this._sParentPath?this._sParentPath+"/"+this._sName:"/"+this._sName;return e},getProjectRelativePath:function(){var e=URI(this.getFullPath());return e.segment(0,"").toString()},getFileExtension:function(){var e="",t=this._sName.lastIndexOf(".");return t>=0&&(e=this._sName.substr(t+1)),e},setBackendData:function(e){this._mBackenData=e},getBackendData:function(){return this._mBackenData},getKeyString:function(){var e=this.getVersionId();return this.getType()+":"+this.getFullPath()+":"+this._sDAO+(e?":"+e:"")},getTitle:function(){return this.getName()}},e.fromKeyString=function(t){var n=t.split(":");return new e(n[0],n[1],null,n[2]||"workspace",n[3])},e}),define("sap.watt.common.filesystem/service/FilesystemDocumentProvider",["../document/ProjectDocument","../document/FolderDocument","../document/FileDocument","../document/FileFolderEntity"],function(e,t,n,r){"use strict";return{_oDAO:null,_workspaceRoot:null,_oFileFilterHandlerService:null,configure:function(e){var t=this;this._oDAO={},e.dao.forEach(function(e){t._oDAO[e.id]=e.service,e.service.attachEvent("externalChanged",t._onExternalChanged,t)}),e.fileFilterHandler&&(this._oFileFilterHandlerService=e.fileFilterHandler.service)},_onExternalChanged:function(e){var t;return t=e.params.oDocument?e.params.oDocument.refresh():this.getRoot().then(function(e){return e.refresh()}),Q.all([this.context.service.document.notifyExternalChange(e.params.oDocument),t])},createDocumentInternally:function(r,i){var o,a=this._oDAO[r.getDAO()];
switch(r.getType()){case"file":o=new n(this,a,r,i);break;case"folder":o=r.isProject()?new e(this,a,r,i):new t(this,a,r,i);break;default:throw new Error("Not supported entity type "+r.getType())}return this._oFileFilterHandlerService&&this._oFileFilterHandlerService._prepareDocument(o,a).done(),o},createExtDocumentInternally:function(e,t){var i=e.type,o=e.name,a=e.path,s=e.content,u=new r(i,o,a),c=new n(this,null,u,t);return c._savedContent=s,c},_workspaceRoots:{},getRoot:function(e){var t=this,n="workspace";return e=e||n,this._workspaceRoots[e]?Q(this._workspaceRoots[e]):e===n?this.getDocument("").then(function(n){return t._workspaceRoots[e]=n,n}):this._oDAO[e].getRoot(e).then(function(n){return t._workspaceRoots[e]=n,n})},getDocumentByKeyString:function(e){var t=r.fromKeyString(e),n=t.getFullPath(),i=t.getDAO(),o=t.getVersionId();return this.getDocument(n,i,o).then(function(e){return e&&e.getType()===t.getType()?e:null})},getDocument:function(e,t,n){t=t||"workspace",n=n||"";var i=this,o=i.context.service.document;return Q.spread([o.getDocument(new r("file",e,void 0,t,n),!0),o.getDocument(new r("folder",e,void 0,t,n),!0)],function(r,o){return r||o||i._oDAO&&i._oDAO[t]&&i._oDAO[t].getDocument(e,t,n)})},search:function(e,t){return t=t||"workspace",this._oDAO[t].search(e,t)},_getParentDocument:function(e,t){return e&&e.getEntity().isFolder()?Q(e):this.getRoot(t)},createProject:function(e,t,n){return n=n||"workspace",this._getParentDocument(t,n).then(function(t){return t.createProject(e)})}}}),define("sap.watt.common.filesystem/service/FilesystemJsonProvider",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{_getFileContent:function(e){if(e)return e.getContent().then(function(e){try{var t=JSON.parse(e);return t}catch(n){var r=new Error(n);throw r.name="ParseError",r}});var t=new Error("File does not exist");throw t.name="FileDoesNotExist",t},_isContentLengthValid:function(e){var t=e.length;return t&&t>5e6?!1:!0},_setFileContent:function(e,t){if(!e){var n=new Error("File does not exist");throw n.name="FileDoesNotExist",n}if(!this._isContentLengthValid(t)){var r=new RangeError("Invalid content length");throw r}try{var i=JSON.stringify(t,null,"	");return e.setContent(i).then(function(){return e.save().then(function(){return!0})})}catch(o){var n=new Error(o);throw n.name="JsonError",n}},_getFileDocument:function(t,n,r){var i=this;return this.context.service.filesystem.documentProvider.getDocument(t).then(function(t){return t&&t.getEntity().isFolder()?t.getCurrentMetadata(r).then(function(t){var r=e.find(t,function(e){return e.name===n});return r?i.context.service.filesystem.documentProvider.getDocument(r.path):void 0}):t})},readJson:function(e,t,n){var r=this;return this._getFileDocument(e,t,n).then(function(e){return r._getFileContent(e)})},findAndWriteJson:function(e,t,n,r){var i=this;return this._getFileDocument(t,n,r).then(function(t){return i._setFileContent(t,e)})},writeJson:function(e,t){var n=this;if(t){var r=t.lastIndexOf("/"),i=t.substring(0,r);return this.context.service.filesystem.documentProvider.getDocument(i).then(function(i){if(i){var o=t.substring(r+1,t.length);return i.touch(o).then(function(t){return n._setFileContent(t,e)})}})}},writeJsonByDocument:function(e,t){return this._setFileContent(e,t)},getJSONContent:function(e){return e?e.getContent().then(function(t){var n=function(){return e.setContent("{\n\n}").then(function(){return e.save().then(function(){return{}})})};return""===t?n():JSON.parse(t)}):Q({})}}}),define("sap.watt.common.document/service/Document",[],function(){"use strict";return{_mDocumentProvider:{},_mDocuments:{},configure:function(e){var t=this;jQuery.each(e.providers,function(e,n){t._mDocumentProvider[n.type]=n})},getDocument:function(e,t){var n=e.getKeyString(),r=this._mDocuments[n];if(r)return r.then(function(t){var n=t.getEntity().getBackendData();return n=jQuery.extend({},n,e.getBackendData()),t.getEntity().setBackendData(n),t});if(t)return null;var i=this,o=this.getDocumentProvider(e.getType()),a=o.createDocumentInternally(e,this.context.event);return i._mDocuments[n]=a,a},getContainedDocuments:function(e,t){t=t===!0;for(var n=[],r=[],i=e.getEntity(),o=i.getFullPath()+"/",a=i.getDAO(),s=Object.keys(this._mDocuments),u=0;u<s.length;u++){var c=s[u],l=this._mDocuments[c];l&&this._getContainedDocument(o,n,l,r,t,a)}return Q.all(n).then(function(){return r})},_getContainedDocument:function(e,t,n,r,i,o){t.push(n.then(function(t){var n=t.getEntity(),a=n.getFullPath(),s=n.getDAO();s===o&&0===a.indexOf(e)&&(i?-1===a.replace(e).indexOf("/")&&r.push(t):r.push(t))}))},onChanged:function(){},onDeleted:function(e){var t=e.params.document,n=t.getEntity(),r=n.getFullPath()+"/",i=n.getDAO(),o=n.getKeyString();delete this._mDocuments[o];for(var a=[this.context.service.contentManager.deleteContentData(t)],s=Object.keys(this._mDocuments),u=0;u<s.length;u++){var c=s[u],l=this._mDocuments[c];this._deleteDocumentPromise(r,a,l,c,i)}return Q.all(a)},_deleteDocumentPromise:function(e,t,n,r,i){var o=this;t.push(n.then(function(t){var n=t.getEntity(),a=n.getFullPath(),s=n.getDAO();return s===i&&0===a.indexOf(e)?(delete o._mDocuments[r],o.context.service.contentManager.deleteContentData(t)):void 0}))},createNew:function(){throw new Error("Not implemented")},getDocumentProvider:function(e){if(!this._mDocumentProvider[e])throw new Error("Missing Type adapter for "+e);return this._mDocumentProvider[e].documentProvider},open:function(e){return this.context.event.fireRequestOpen({document:e})},getDocumentByKeyString:function(e,t){t=t===!0;var n=this._mDocuments[e];if(n)return n;if(t)return null;var r=e.split(":")[0],i=this.getDocumentProvider(r);return i.getDocumentByKeyString(e)},getDocumentByPath:function(e){var t=this.getDocumentProvider("file");return t.getDocument(e)},getExtDocument:function(e){var t=this.getDocumentProvider("file");return t.createExtDocumentInternally(e,this.context.event).then(function(e){return e._bExtDoc=!0,e})},notifyExternalChange:function(e,t){var n={document:e};return t&&(n.operation=t),this.context.event.fireExternalChanged(n)}}}),define("sap.watt.common.document/service/ContentManager",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{_oContentDataMap:{},_nMaxAllowedSizeOfCachedContent:209715200,_nMaxAllowedSizeOfCachedFileContent:1048576,_nCacheSizeToRemoveOnCacheLimitExceed:20,_oSpecialFilesContent:{},_nTotalCachedContentSize:0,configure:function(e){if(e){if(this._nMaxAllowedSizeOfCachedContent=e.maxAllowedSizeOfCachedContent||this._nMaxAllowedSizeOfCachedContent,this._nMaxAllowedSizeOfCachedFileContent=e.maxAllowedSizeOfCachedFileContent||this._nMaxAllowedSizeOfCachedFileContent,this._nCacheSizeToRemoveOnCacheLimitExceed=e.cleanOnTotalCacheExceededLimit||this._nCacheSizeToRemoveOnCacheLimitExceed,e.aFilesToBeRemovedFirst)for(var t=e.aFilesToBeRemovedFirst,n=0;n<t.length;n++){var r=t[n];this._oSpecialFilesContent[r]=!1}if(e.aFilesContentAlwaysInCache)for(var i=e.aFilesContentAlwaysInCache,o=0;o<i.length;o++){var a=i[o];this._oSpecialFilesContent[a]=!0}}},deleteContentData:function(e){var t=e.getEntity();t.isFile()&&this._removeContentData(t.getKeyString())},_removeContentData:function(e){var t=this._oContentDataMap[e];t&&(this._nTotalCachedContentSize=this._nTotalCachedContentSize-t.length,delete this._oContentDataMap[e])},_updateTotalContentSize:function(e){if(this._handleContentData(e),this._nTotalCachedContentSize>this._nMaxAllowedSizeOfCachedContent){var t=this.context.i18n.getText("i18n","contentManager_total_cached_size_exceeded",[this._nTotalCachedContentSize,this._nMaxAllowedSizeOfCachedContent]);return this.context.service.usagemonitoring.report("contentManager","total_cache_limit",this._nTotalCachedContentSize).done(),this.context.service.log.warn("contentManager",t,["user"]).done(),this._handleTotalCacheLimitExceeded()}return Q()},_removeFilesFromCacheThatShouldBeRemovedFirst:function(){for(var t=[],n=e.values(this._oContentDataMap),r=0;r<n.length;r++){var i=n[r];if(i.bRetainInCache===!1){var o=i.key;this._removeContentData(o),t.push(this.context.service.document.getDocumentByKeyString(o))}}return this._invalidateFilesContent(t)},_invalidateFilesContent:function(e){return Q.all(e).then(function(e){for(var t=0;t<e.length;t++)e[t].invalidate()})},_handleTotalCacheLimitExceeded:function(){var t=this,n=this._nMaxAllowedSizeOfCachedContent*(100-this._nCacheSizeToRemoveOnCacheLimitExceed)/100;return this._removeFilesFromCacheThatShouldBeRemovedFirst().then(function(){if(t._nTotalCachedContentSize<=n)return Q();for(var r=[],i=e.sortBy(e.values(t._oContentDataMap),function(e){return e.timestamp}),o=0;t._nTotalCachedContentSize>n;){var a=i[o];t._nTotalCachedContentSize=t._nTotalCachedContentSize-a.length;var s=a.key;r.push(t.context.service.document.getDocumentByKeyString(s)),t._oSpecialFilesContent[a.name]!==!0&&i.shift(),delete t._oContentDataMap[s],o++}return t._invalidateFilesContent(r)})},_handleContentData:function(e){var t=e.key;this._removeContentData(t),this._oContentDataMap[t]=e,e.bRetainInCache=this._oSpecialFilesContent[e.name],this._nTotalCachedContentSize=this._nTotalCachedContentSize+e.length},onContentChanged:function(e){var t=e.params.document,n=t.getEntity();if(n.isFile()&&t._savedContent&&!t.isDirty()){var r=this._getDocumentContentLength(t),i=n.getKeyString(),o=n.getName(),a=r>this._nMaxAllowedSizeOfCachedFileContent;a?this._invalidateFile(i,r,t):this._updateTotalContentSize({key:i,length:r,timestamp:Date.now(),name:o}).done()}},_invalidateFile:function(e,t,n){if(t>this._nMaxAllowedSizeOfCachedFileContent){var r=this.context.i18n.getText("i18n","contentManager_file_content_size_exceeded",[e,t,this._nMaxAllowedSizeOfCachedFileContent]);this.context.service.log.warn("contentManager",r,["user"]).done(),this.context.service.usagemonitoring.report("contentManager","file_cache_limit",t).done()}this._removeContentData(e),n.invalidate()},_getDocumentContentLength:function(e){var t=e.getDocumentMetadata().length;return t?t:e._savedContent?e._savedContent.length:0}}}),define("sap.watt.common.platform/service/keepalive/KeepAlive",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{_bIsAlive:!0,_activityWasDetected:!1,_pingCounter:0,_pingSessionTimeout:void 0,_actions:["keydown","mousemove","mousedown"],configure:function(e){e.disabled||(this._contentService=e.dirtyCheckService,this._ddsService=e.dirtyDocumentsStorageService,this._iTimeoutInMinutes=e.timeoutInMinutes,this._maxPingQuantity=e.maxPingQuantity,this._pingSession(1),this._manageEvents(),this.context.service.usernotification.liteInfo(this.context.i18n.getText("i18n","keepAlive_empty"),!0).done())},_manageEvents:function(){if(this.isAlive()){var t=this;e.forEach(this._actions,function(e){$(window).on(e,function(){t._onUserActivity()})})}},_onUserActivity:function(){if(this._activityWasDetected===!1&&(this._activityWasDetected=!0,this._pingCounter===this._maxPingQuantity&&this.isAlive())){var e=this;this.callKeepAlive().then(function(){e.isAlive()&&e._startPingCycle()}).done()}},_startPingCycle:function(){this._activityWasDetected=!1,this._stop(this._pingSessionTimeout),this._pingSession(1)},_pingSession:function(e){var t=this;this._pingCounter=e;var n=1e3*(60*this._iTimeoutInMinutes-30);e===this._maxPingQuantity&&(n=1e3*(60*this._iTimeoutInMinutes+60)),this._pingSessionTimeout=window.setTimeout(function(){t.callKeepAlive().then(function(){if(t.isAlive()){if(e<t._maxPingQuantity&&t._activityWasDetected===!0)return t._startPingCycle(),void 0;e<t._maxPingQuantity?t._pingSession(++e):t._askUserForRestart()}}).done()},n)},callKeepAlive:function(){var e=this;return this.context.service.system.isAlive().then(function(){return e.context.service.log.debug("IDE",e.context.i18n.getText("i18n","keepAlive_stillAlive"),["user"]).then(function(){return!0})},function(){e._askUserForRestart()})},_stop:function(e){e&&(window.clearTimeout(e),e=void 0)},_askUserForRestart:function(){var e=this;this._bIsAlive=!1,this._stop(this._pingSessionTimeout),this._contentService.getDocuments(!0).then(function(t){var n="keepAlive_restartQuestion";return t.length>0&&(n="keepAlive_restartQuestionDirty"),e.context.service.usernotification.info(e.context.i18n.getText("i18n",n)).then(function(){return e.context.service.unloadHandler.setEnabled(!1).then(function(){return t.length>0?e._ddsService.save(t).then(function(){return window.location.reload(),!0}):(window.location.reload(),!0)})})}).done()},isAlive:function(){return this._bIsAlive}}}),define("sap.watt.common.platform/service/unloadhandler/UnloadHandler",[],function(){"use strict";return{_bEnabled:!0,_handler:[],init:function(){jQuery.browser.mozilla?window.addEventListener("beforeunload",jQuery.proxy(this._onUnload,this)):jQuery(window).bind("beforeunload",jQuery.proxy(this._onUnload,this))},addHandler:function(e){this._handler.push(e)},removeHandler:function(e){var t=this._handler.indexOf(e);t>-1&&this._handler.splice(t,1)},setEnabled:function(e){this._bEnabled=e},_onUnload:function(e){if(this._bEnabled){var t=void 0;if(jQuery.each(this._handler,function(e,n){return t=n.apply(null),t?!1:void 0}),t){if(!jQuery.browser.mozilla)return t;e.returnValue=t}}}}}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("sap/watt/lib/q/q",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Q=e()}}(function(){var e,t,n;return function r(e,t,n){function i(a,s){if(!t[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=t[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return i(n?n:t)},l,l.exports,r,e,t,n)}return t[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t){function n(e){return f.resolve(e)}function r(){!P&&"undefined"!=typeof window&&window.console&&console.warn("[bluebird-Q] Unhandled rejection reasons (should be empty):",C),P=!0}function i(){for(var e=0;e<C.length;e++){var t=C[e];console.warn("Unhandled rejection reason:",t)}}function o(){C.length=0,T.length=0,P=!1,I||(I=!0,"undefined"!=typeof process&&process.on&&process.on("exit",i))}function a(e,t){I&&(T.push(e),t&&"undefined"!=typeof t.stack?C.push(t.stack):C.push("(no stack) "+t),r())}function s(e){if(I){var t=T.indexOf(e);-1!==t&&(T.splice(t,1),C.splice(t,1))}}function u(){}function c(e,t,r){t=t===h?this:t;var i=n.defer();r.push(i.makeNodeResolver());try{e.apply(t,r)}catch(o){i.reject(o)}return i.promise}function l(e,t){return function(){return e.apply(t,arguments)}}function p(e){return e.isFulfilled()?{state:"fulfilled",value:e.value()}:e.isRejected()?{state:"rejected",reason:e.reason()}:{state:"pending"}}var f=e("bluebird/js/release/promise")(),d=e("bluebird/js/release/schedule"),h={},m={},g={thenReturn:"thenResolve",thenThrow:"thenReject",caught:"fail",lastly:"fin",call:"send mcall invoke".split(" ")},v={reject:"reject rejected".split(" "),resolve:"resolve resolved fulfill fulfilled".split(" "),is:"isPromise",race:"race",async:"coroutine",spawn:"spawn",delay:"delay",timeout:m,join:m,spread:m,tap:m,thenReject:m,thenResolve:m,isPending:m,isFulfilled:m,isRejected:m,get:m,set:m,del:m,"delete":m,"try":m,keys:m,allResolved:m,allSettled:m,fail:m,"catch":m,fin:m,"finally":m,done:m,timeout:m,nodeify:m,nfapply:m,nfcall:m,nfbind:m,npost:m,nsend:m,ninvoke:m,nbind:m,nmcall:m,fapply:m,fcall:m,fbind:m,denodeify:m,nmapply:m,mapply:m,post:m,send:m,mcall:m,invoke:m};n.all=f.all,n.Promise=function(e){var t=n.defer();try{e(t.resolve,t.reject,t.notify)}catch(r){t.reject(r)}return t.promise},n.promise=n.Promise,n.isPromiseAlike=function(e){return e instanceof f?!0:f.resolve(e).isPending()};var y=f.map,_=f.resolve;n.promised=function(e){return function(){var t=[].slice.call(arguments);return t.unshift(this),y(t,_).then(function(t){return e.apply(t.shift(),t)})}},n.when=function(e,t,r,i){return n(e).then(t,r,i)},n.nearer=function(e){if(e instanceof f){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e},n.passByCopy=function(e){return e},n.defer=function(){var e={},t=new f(function(t,n){e.resolve=e.fulfill=t,e.reject=n});return e.promise=t,e.notify=l(t._progress,t),e.makeNodeResolver=function(){return function(t,n){return t?e.reject(t):arguments.length>2?e.resolve([].slice.call(arguments,1)):e.resolve(n)}},e},n.deferred=n.pending=n.defer,n.getBluebirdPromise=function(){return f};var x=f.settle,y=f.map;f.prototype.valueOf=f.prototype.value,f.prototype.allSettled=function(){return y(x(this),p)},f.prototype.allResolved=function(){return y(x(this),function(e){return e.isFulfilled()?n(e.value()):e.isRejected()?n.reject(e.reason()):void 0})},f.prototype.join=function(e){return n([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},f.prototype.fbind=function(){var e=[].slice.call(arguments),t=this;return function(){e=e.concat([].slice.call(arguments));var n=this;return t.then(function(t){return t.apply(n,e)})}},f.prototype.fapply=function(e){return this.then(function(t){return t.apply(void 0,e)})},f.prototype["try"]=f.prototype.fcall=function(){return this.fapply.call(this,[].slice.call(arguments))},f.prototype.nfapply=function(e){return this.then(function(t){return c(t,void 0,e)})},f.prototype.nfcall=function(){return this.nfapply.call(this,[].slice.call(arguments))},f.prototype.nfbind=f.prototype.denodeify=function(){var e=this,t=[].slice.call(arguments);return function(){var n=this;return t=t.concat([].slice.call(arguments)),e.then(function(e){return c(e,n,t)})}},f.prototype.nbind=function(e){var t=this,n=[].slice.call(arguments,1);return function(){return n=n.concat([].slice.call(arguments)),t.then(function(t){return c(t,e,n)})}},f.prototype.npost=f.prototype.nmapply=function(e,t){return this.then(function(n){return c(n[e],n,t)})},f.prototype.ninvoke=f.prototype.nsend=f.prototype.nmcall=function(e){var t=[].slice.call(arguments,1);return this.then(function(n){return c(n[e],n,t)})},f.prototype.mapply=f.prototype.post=function(e,t){return e?(t.unshift(e),this.invoke.apply(this,t)):this.fapply(t)};var b=f.prototype.nodeify;f.prototype.nodeify=function(e){return"function"==typeof e?(b.call(this,e),void 0):this},f.prototype.inspect=function(){return this.isPending()?{state:"pending"}:this.isFulfilled()?{state:"fulfilled",value:this.value()}:{state:"rejected",reason:this.reason()}},f.prototype.passByCopy=function(){return this},f.prototype.set=function(e,t){return this.then(function(n){n[e]=t})},f.prototype["delete"]=f.prototype.del=function(e){return this.then(function(t){delete t[e]})},f.prototype.keys=function(){return this.then(function(e){return Object.keys(e)})},f.prototype.race=function(){return this.then(n.race)};var w=f.prototype.caught,S=f.prototype.timeout;f.prototype.timeout=function(e,t){var n=S.apply(this,arguments);return w.call(n,f.TimeoutError,function(e){if(e.code="ETIMEDOUT",t instanceof Error)throw t;throw e})},f.prototype.done=function(e,t,r){var i=function(e){var t=n.onerror,r=function(){if(o._attachExtraTrace(e),!t)throw e;t(e)},i=d(r);d.isStatic===!0&&"function"==typeof i&&i()},o=e||t||r?this.then(e,t,r):this;"object"==typeof process&&process&&process.domain&&(i=process.domain.bind(i)),o.then(void 0,i)};var E=d;Object.defineProperty(n,"nextTick",{get:function(){return d},set:function(e){"function"==typeof e?(d=e,f.setScheduler(e)):(d=E,f.setScheduler(E))}}),Object.defineProperty(n,"longStackSupport",{set:function(e){e&&f.longStackTraces()},get:function(){return f.haveLongStackTraces()}});var C=[],T=[],P=!1,I=!0;n.resetUnhandledRejections=o,n.getUnhandledReasons=function(){return C.slice()},n.stopUnhandledRejectionTracking=function(){o(),"undefined"!=typeof process&&process.on&&process.removeListener("exit",i),I=!1},o(),f.onPossiblyUnhandledRejection(function(e,t){a(t,e)}),f.onUnhandledRejectionHandled(s),Object.keys(g).forEach(function(e){var t=g[e];Array.isArray(t)||(t=[t]),t.forEach(function(t){f.prototype[t]=f.prototype[e]})}),Object.keys(v).forEach(function(e){var t=v[e];if(t===m){if("function"!=typeof f.prototype[e])throw new Error("unimplemented Promise.prototype."+e);n[e]=function(t){var r=n(t);return r[e].apply(r,[].slice.call(arguments,1))}}else Array.isArray(t)||(t=[t]),t.forEach(function(t){n[t]=f[e]})}),"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(n.longStackSupport=!0),u.prototype=n,u.prototype=f.prototype,t.exports=n},{"bluebird/js/release/promise":17,"bluebird/js/release/schedule":20}],2:[function(e,t){"use strict";function n(){this._isTickUsed=!1,this._lateQueue=new c(16),this._normalQueue=new c(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=u}function r(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function i(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function o(e){this._normalQueue._pushOne(e),this._queueTick()}var a;try{throw new Error}catch(s){a=s}var u=e("./schedule"),c=e("./queue"),l=e("./util");n.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},n.prototype.disableTrampolineIfNecessary=function(){l.hasDevTools&&(this._trampolineEnabled=!1)},n.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},n.prototype.fatalError=function(e,t){t?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)),process.exit(2)):this.throwLater(e)},n.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},l.hasDevTools?(n.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?r.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},n.prototype.invoke=function(e,t,n){this._trampolineEnabled?i.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},n.prototype.settlePromises=function(e){this._trampolineEnabled?o.call(this,e):this._schedule(function(){e._settlePromises()})}):(n.prototype.invokeLater=r,n.prototype.invoke=i,n.prototype.settlePromises=o),n.prototype.invokeFirst=function(e,t,n){this._normalQueue.unshift(e,t,n),this._queueTick()},n.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),r=e.shift();t.call(n,r)}else t._settlePromises()}},n.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},n.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},n.prototype._reset=function(){this._isTickUsed=!1},t.exports=n,t.exports.firstLineError=a},{"./queue":19,"./schedule":20,"./util":25}],3:[function(e,t){"use strict";t.exports=function(e,t,n,r){var i=!1,o=function(e,t){this._reject(t)},a=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},s=function(e,t){0===(50397184&this._bitField)&&this._resolveCallback(t.target)},u=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var c=n(o),l=new e(t);l._propagateFrom(this,1);var p=this._target();if(l._setBoundTo(c),c instanceof e){var f={promiseRejectionQueued:!1,promise:l,target:p,bindingPromise:c};p._then(t,a,void 0,l,f),c._then(s,u,void 0,l,f),l._setOnCancel(c)}else l._resolveCallback(p);return l},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t){"use strict";var n=Object.create;if(n){var r=n(null),i=n(null);r[" size"]=i[" size"]=0}t.exports=function(t){function n(e,n){var r;if(null!=e&&(r=e[n]),"function"!=typeof r){var i="Object "+l.classString(e)+" has no method '"+l.toString(n)+"'";throw new t.TypeError(i)}return r}function o(e){var t=this.pop(),r=n(e,t);return r.apply(e,this)}function a(e){return e[this]}function s(e){var t=+this;return 0>t&&(t=Math.max(0,t+e.length)),e[t]}var u,c,l=e("./util"),p=l.canEvaluate,f=l.isIdentifier,d=function(e){return new Function("ensureMethod","                                    \n        return function(obj) {                                               \n            'use strict'                                                     \n            var len = this.length;                                           \n            ensureMethod(obj, 'methodName');                                 \n            switch(len) {                                                    \n                case 1: return obj.methodName(this[0]);                      \n                case 2: return obj.methodName(this[0], this[1]);             \n                case 3: return obj.methodName(this[0], this[1], this[2]);    \n                case 0: return obj.methodName();                             \n                default:                                                     \n                    return obj.methodName.apply(obj, this);                  \n            }                                                                \n        };                                                                   \n        ".replace(/methodName/g,e))(n)},h=function(e){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",e))},m=function(e,t,n){var r=n[e];if("function"!=typeof r){if(!f(e))return null;if(r=t(e),n[e]=r,n[" size"]++,n[" size"]>512){for(var i=Object.keys(n),o=0;256>o;++o)delete n[i[o]];n[" size"]=i.length-256}}return r};u=function(e){return m(e,d,r)},c=function(e){return m(e,h,i)},t.prototype.call=function(e){for(var t=arguments.length,n=new Array(t-1),r=1;t>r;++r)n[r-1]=arguments[r];if(p){var i=u(e);if(null!==i)return this._then(i,void 0,void 0,n,void 0)}return n.push(e),this._then(o,void 0,void 0,n,void 0)},t.prototype.get=function(e){var t,n="number"==typeof e;if(n)t=s;else if(p){var r=c(e);t=null!==r?r:a}else t=a;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":25}],5:[function(e,t){"use strict";t.exports=function(t,n,r,i){var o=e("./util"),a=o.tryCatch,s=o.errorObj,u=t._async;t.prototype["break"]=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e.isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n.isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this.isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=a(e).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this.isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":25}],6:[function(e,t){"use strict";t.exports=function(t){function n(e,n,s){return function(u){var c=s._boundValue();e:for(var l=0;l<e.length;++l){var p=e[l];if(p===Error||null!=p&&p.prototype instanceof Error){if(u instanceof p)return o(n).call(c,u)}else if("function"==typeof p){var f=o(p).call(c,u);if(f===a)return f;if(f)return o(n).call(c,u)}else if(r.isObject(u)){for(var d=i(p),h=0;h<d.length;++h){var m=d[h];if(p[m]!=u[m])continue e}return o(n).call(c,u)}}return t}}var r=e("./util"),i=e("./es5").keys,o=r.tryCatch,a=r.errorObj;return n}},{"./es5":11,"./util":25}],7:[function(e,t){"use strict";t.exports=function(t){function n(){this._trace=new n.CapturedTrace(i())}function r(){return a?new n:void 0}function i(){var e=s.length-1;return e>=0?s[e]:void 0}var o=e("./util"),a=!1,s=[];return o.hookTo(t.prototype,"_hook_created",null),o.hookTo(t.prototype,"_hook_fulfilled",null),o.hookTo(t.prototype,"_hook_rejected",null),o.hookTo(t.prototype,"_hook_resolved",null),o.hookTo(t.prototype,"_hook_cancelled",null),o.hookTo(t.prototype,"_hook_chained",null),o.hookTo(t.prototype,"_pushContext",null),t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},n.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,s.push(this._trace))},n.prototype._popContext=function(){if(void 0!==this._trace){var e=s.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},n.CapturedTrace=null,n.create=r,n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var e=t.prototype._popContext,r=t._peekContext,s=t.prototype._peekContext,u=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)};n.deactivateLongStackTraces=function(){o.unhookFrom(t.prototype,"_pushContext",n.prototype._pushContext),o.unhookFrom(t.prototype,"_hook_created",u),t.prototype._popContext=e,t._peekContext=r,t.prototype._peekContext=s,a=!1},a=!0,o.hookTo(t.prototype,"_pushContext",n.prototype._pushContext),o.hookTo(t.prototype,"_hook_created",u),t.prototype._popContext=n.prototype._popContext,t._peekContext=t.prototype._peekContext=i},n}},{"./util":25}],8:[function(e,t){"use strict";t.exports=function(t,n){function r(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+F.toString(e));r._attachCancellationCallback(e)})}catch(i){return i}}function i(e){if(!this.isCancellable())return this;var t=this._onCancel();void 0!==t?F.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function o(){return this._onCancelField}function a(e){this._onCancelField=e}function s(){this._cancellationParent=void 0,this._onCancelField=void 0}function u(e,t){if(0!==(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function c(e,t){0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function l(){var e=this._boundTo;return void 0!==e&&e instanceof t?e.isFulfilled()?e.value():void 0:e}function p(){this._trace=new D(this._peekContext())}function f(e,t){if(L(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=b(e);F.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),F.notEnumerableProp(e,"__stackCleaned__",!0)
}}}function d(e,t,n,r,i){if(void 0===e&&null!==t&&z){if(void 0!==i&&i._returnedNonUndefined())return;n&&(n+=" ");var o="a promise was created in a "+n+"handler but was not returned from it";r._warn(o,!0,t)}}function h(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),m(n)}function m(e,n,r){if(nt.warnings){var i,o=new j(e);if(n)r._attachExtraTrace(o);else if(nt.longStackTraces&&(i=t._peekContext()))i.attachExtraTrace(o);else{var a=b(o);o.stack=a.message+"\n"+a.stack.join("\n")}w(o,"",!0)}}function g(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}function v(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function y(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(var s=a;s>=0;--s){var u=r[s];if(t[i]!==u)break;t.pop(),i--}t=r}}function _(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||B.test(r),o=i&&K(r);i&&!o&&(V&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function x(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||B.test(r))break}return n>0&&(t=t.slice(n)),t}function b(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?x(e):["    (No stack trace)"],{message:n,stack:_(t)}}function w(e,t,n){if("undefined"!=typeof console){var r;if(F.isObject(e)){var i=e.stack;r=t+U(i,e)}else r=t+String(e);"function"==typeof k?k(r,n):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r)}}function S(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(o){R.throwLater(o)}var a=!1;try{a=tt(e,n,r)}catch(o){a=!0,R.throwLater(o)}var s=!1;if(Z)try{s=Z(e.toLowerCase(),{reason:n,promise:r})}catch(o){s=!0,R.throwLater(o)}a||i||s||"unhandledRejection"!==e||w(n,"Unhandled rejection ")}function E(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():F.toString(e);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(t))try{var r=JSON.stringify(e);t=r}catch(i){}0===t.length&&(t="(empty array)")}return"(<"+C(t)+">, no stack trace)"}function C(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function T(){return"function"==typeof et}function P(e){var t=e.match(Y);return t?{fileName:t[1],line:parseInt(t[2],10)}:void 0}function I(e,t){if(T()){for(var n,r,i=e.stack.split("\n"),o=t.stack.split("\n"),a=-1,s=-1,u=0;u<i.length;++u){var c=P(i[u]);if(c){n=c.fileName,a=c.line;break}}for(var u=0;u<o.length;++u){var c=P(o[u]);if(c){r=c.fileName,s=c.line;break}}0>a||0>s||!n||!r||n!==r||a>=s||(K=function(e){if(M.test(e))return!0;var t=P(e);return t&&t.fileName===n&&a<=t.line&&t.line<=s?!0:!1})}}function D(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);et(this,D),t>32&&this.uncycle()}var A,N,k,O=t._getDomain,R=t._async,j=e("./errors").Warning,F=e("./util"),L=F.canAttachTrace,M=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,B=null,U=null,V=!1,Q=!(0==F.env("BLUEBIRD_DEBUG")||!F.env("BLUEBIRD_DEBUG")&&"development"!==F.env("NODE_ENV")),G=!(0==F.env("BLUEBIRD_WARNINGS")||!Q&&!F.env("BLUEBIRD_WARNINGS")),H=!(0==F.env("BLUEBIRD_LONG_STACK_TRACES")||!Q&&!F.env("BLUEBIRD_LONG_STACK_TRACES")),z=0!=F.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(G||!!F.env("BLUEBIRD_W_FORGOTTEN_RETURN"));t.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=524288|-1048577&e._bitField},t.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),R.invokeLater(this._notifyUnhandledRejection,this,void 0))},t.prototype._notifyUnhandledRejectionIsHandled=function(){S("rejectionHandled",A,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},t.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),S("unhandledRejection",N,e,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},t.prototype._warn=function(e,t,n){return m(e,t,n||this)},t.onPossiblyUnhandledRejection=function(e){var t=O();N="function"==typeof e?null===t?e:t.bind(e):void 0},t.onUnhandledRejectionHandled=function(e){var t=O();A="function"==typeof e?null===t?e:t.bind(e):void 0};var W=function(){};t.longStackTraces=function(){if(R.haveItemsQueued()&&!nt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!nt.longStackTraces&&T()){var e=t.prototype._captureStackTrace,r=t.prototype._attachExtraTrace;nt.longStackTraces=!0,W=function(){if(R.haveItemsQueued()&&!nt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");t.prototype._captureStackTrace=e,t.prototype._attachExtraTrace=r,n.deactivateLongStackTraces(),R.enableTrampoline(),nt.longStackTraces=!1},t.prototype._captureStackTrace=p,t.prototype._attachExtraTrace=f,n.activateLongStackTraces(),R.disableTrampolineIfNecessary()}},t.hasLongStackTraces=function(){return nt.longStackTraces&&T()};var q=["created","chained","fulfilled","rejected","resolved","cancelled"];if(t.on=function(e,n,r){if(q.indexOf(e)<0)throw new Error("You can only subscribe to these events:"+q);var i=null;r?i=n:(i=function(t){n({guid:this._promiseId?this._promiseId:null,childGuid:t&&t._promiseId?t._promiseId:null,eventName:e,detail:this.isRejected()?this.reason:this.isFulfilled()?this.value:null,timeStamp:Date.now(),stack:this._trace?this._trace:null})},n._eventHandler=i),F.hookTo(t.prototype,"_hook_"+e,i)},t.off=function(e,n){if(q.indexOf(e)<0)throw new Error("You can only subscribe to these events:"+q);F.unhookFrom(t.prototype,"_hook_"+e,n._eventHandler?n._eventHandler:n)},"undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var X=window.__PROMISE_INSTRUMENTATION__;for(var $ in X)X.hasOwnProperty($)&&t.on($,X[$])}t.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?t.longStackTraces():!e.longStackTraces&&t.hasLongStackTraces()&&W()),"warnings"in e){var n=e.warnings;nt.warnings=!!n,z=nt.warnings,F.isObject(n)&&"wForgottenReturn"in n&&(z=!!n.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!nt.cancellation){if(R.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");t.prototype._clearCancellationData=s,t.prototype._propagateFrom=u,t.prototype._onCancel=o,t.prototype._setOnCancel=a,t.prototype._attachCancellationCallback=i,t.prototype._execute=r,J=u,nt.cancellation=!0}},t.prototype._execute=function(e,t,n){try{e(t,n)}catch(r){return r}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(){},t.prototype._attachCancellationCallback=function(){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(){};var J=c,K=function(){return!1},Y=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;F.inherits(D,Error),n.CapturedTrace=D,D.prototype.uncycle=function(){var e=this._length;if(!(2>e)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;e=this._length=r;for(var r=e-1;r>=0;--r){var o=t[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;e>r;++r){var a=t[r].stack,s=n[a];if(void 0!==s&&s!==r){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var u=r>0?t[r-1]:this;e-1>s?(u._parent=t[s+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var c=u._length+1,l=r-2;l>=0;--l)t[l]._length=c,c++;return}}}},D.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=b(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(_(i.stack.split("\n"))),i=i._parent;y(r),v(r),F.notEnumerableProp(e,"stack",g(n,r)),F.notEnumerableProp(e,"__stackCleaned__",!0)}};var Z,et=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():E(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,B=e,U=t;var n=Error.captureStackTrace;return K=function(e){return M.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return B=/@/,U=t,V=!0,function(e){e.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(U=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?E(t):t.toString()},null):(B=e,U=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}([]),tt=function(){if(F.isNode)return function(e,t,n){return"rejectionHandled"===e?process.emit(e,n):process.emit(e,t,n)};var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null;if(!e)return function(){return!1};try{var t=document.createEvent("CustomEvent");t.initCustomEvent("testingtheevent",!1,!0,{}),e.dispatchEvent(t),Z=function(t,n){var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,!1,!0,n),!e.dispatchEvent(r)}}catch(n){}var r={};return r.unhandledRejection="onunhandledRejection".toLowerCase(),r.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,n,i){var o=r[t],a=e[o];return a?("rejectionHandled"===t?a.call(e,i):a.call(e,n,i),!0):!1}}();"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(k=function(e){console.warn(e)},F.isNode&&process.stderr.isTTY?k=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:F.isNode||"string"!=typeof(new Error).stack||(k=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var nt={warnings:G,longStackTraces:!1,cancellation:!1};return H&&t.longStackTraces(),{longStackTraces:function(){return nt.longStackTraces},warnings:function(){return nt.warnings},cancellation:function(){return nt.cancellation},propagateFromFunction:function(){return J},boundValueFunction:function(){return l},checkForgottenReturns:d,setBounds:I,warn:m,deprecated:h,CapturedTrace:D}}},{"./errors":10,"./util":25}],9:[function(e,t){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype["return"]=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype["throw"]=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],r=function(){throw t};return this.caught(e,r)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];r instanceof e&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],10:[function(e,t){"use strict";function n(e,t){function n(r){return this instanceof n?(l(this,"message","string"==typeof r?r:t),l(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this),void 0):new n(r)}return c(n,Error),n}function r(e){return this instanceof r?(l(this,"name","OperationalError"),l(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(l(this,"message",e.message),l(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),void 0):new r(e)}var i,o,a=e("./es5"),s=a.freeze,u=e("./util"),c=u.inherits,l=u.notEnumerableProp,p=n("Warning","warning"),f=n("CancellationError","cancellation error"),d=n("TimeoutError","timeout error"),h=n("AggregateError","aggregate error");try{i=TypeError,o=RangeError}catch(m){i=n("TypeError","type error"),o=n("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<g.length;++v)"function"==typeof Array.prototype[g[v]]&&(h.prototype[g[v]]=Array.prototype[g[v]]);a.defineProperty(h.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),h.prototype.isOperational=!0;var y=0;h.prototype.toString=function(){var e=Array(4*y+1).join(" "),t="\n"+e+"AggregateError of:"+"\n";y++,e=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];r=i.join("\n"),t+=r+"\n"}return y--,t},c(r,Error);var _=Error.__BluebirdErrorTypes__;_||(_=s({CancellationError:f,TimeoutError:d,OperationalError:r,RejectionError:r,AggregateError:h}),l(Error,"__BluebirdErrorTypes__",_)),t.exports={Error:Error,TypeError:i,RangeError:o,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:p}},{"./es5":11,"./util":25}],11:[function(e,t){var n=function(){"use strict";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var r={}.hasOwnProperty,i={}.toString,o={}.constructor.prototype,a=function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(n);return t},s=function(e,t){return{value:e[t]}},u=function(e,t,n){return e[t]=n.value,e},c=function(e){return e},l=function(e){try{return Object(e).constructor.prototype}catch(t){return o}},p=function(e){try{return"[object Array]"===i.call(e)}catch(t){return!1}};t.exports={isArray:p,keys:a,names:a,defineProperty:u,getDescriptor:s,freeze:c,getPrototypeOf:l,isES5:n,propertyIsWritable:function(){return!0}}}},{}],12:[function(e,t){"use strict";t.exports=function(t,n){function r(e){this.finallyHandler=e}function i(e,t){return null!=e.cancelPromise?(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0):!1}function o(){return s.call(this,this.promise._target()._settledValue())}function a(e){return i(this,e)?void 0:(l.e=e,l)}function s(e){var s=this.promise,u=this.handler;if(!this.called){this.called=!0;var p=0===this.type?u.call(s._boundValue()):u.call(s._boundValue(),e);if(void 0!==p){s._setReturnedNonUndefined();var f=n(p,s);if(f instanceof t){if(null!=this.cancelPromise){if(f.isCancelled()){var d=new c("late cancellation observer");return s._attachExtraTrace(d),l.e=d,l}f.isPending()&&f._attachCancellationCallback(new r(this))}return f._then(o,a,void 0,this,void 0)}}}return s.isRejected()?(i(this),l.e=e,l):(i(this),e)}var u=e("./util"),c=t.CancellationError,l=u.errorObj;return r.prototype._resultCancelled=function(){i(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,{promise:this,handler:e,called:!1,cancelPromise:null,type:t},void 0)},t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThrough(e,0,s,s)},t.prototype.tap=function(e){return this._passThrough(e,1,s)},s}},{"./util":25}],13:[function(e,t){"use strict";t.exports=function(t,n,r,i){var o,a=e("./util"),s=a.canEvaluate,u=a.tryCatch,c=a.errorObj;if(s){for(var l=function(e){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,e))},p=function(e){return new Function("promise","holder","                           \n            'use strict';                                                    \n            holder.pIndex = promise;                                         \n            ".replace(/Index/g,e))},f=function(e){for(var n=new Array(e),r=0;r<n.length;++r)n[r]="this.p"+(r+1);var i=n.join(" = ")+" = null;",o="var promise;\n"+n.map(function(e){return"                                                         \n                promise = "+e+";                                      \n                if (promise instanceof Promise) {                            \n                    promise.cancel();                                        \n                }                                                            \n            "}).join("\n"),a=n.join(", "),s="Holder$"+e,l="return function(tryCatch, errorObj, Promise) {           \n            'use strict';                                                    \n            function [TheName](fn) {                                         \n                [TheProperties]                                              \n                this.fn = fn;                                                \n                this.now = 0;                                                \n            }                                                                \n            [TheName].prototype.checkFulfillment = function(promise) {       \n                var now = ++this.now;                                        \n                if (now === [TheTotal]) {                                    \n                    promise._pushContext();                                  \n                    var callback = this.fn;                                  \n                    var ret = tryCatch(callback)([ThePassedArguments]);      \n                    promise._popContext();                                   \n                    if (ret === errorObj) {                                  \n                        promise._rejectCallback(ret.e, false);               \n                    } else {                                                 \n                        promise._resolveCallback(ret);                       \n                    }                                                        \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype._resultCancelled = function() {              \n                [CancellationCode]                                           \n            };                                                               \n                                                                             \n            return [TheName];                                                \n        }(tryCatch, errorObj, Promise);                                      \n        ";return l=l.replace(/\[TheName\]/g,s).replace(/\[TheTotal\]/g,e).replace(/\[ThePassedArguments\]/g,a).replace(/\[TheProperties\]/g,i).replace(/\[CancellationCode\]/g,o),new Function("tryCatch","errorObj","Promise",l)(u,c,t)},d=[],h=[],m=[],g=0;8>g;++g)d.push(f(g+1)),h.push(l(g+1)),m.push(p(g+1));o=function(e){this._reject(e)}}t.join=function(){var e,a=arguments.length-1;if(a>0&&"function"==typeof arguments[a]&&(e=arguments[a],8>=a&&s)){var u=new t(i);u._captureStackTrace();for(var c=d[a-1],l=new c(e),p=h,f=0;a>f;++f){var g=r(arguments[f],u);if(g instanceof t){g=g._target();var v=g._bitField;0===(50397184&v)?(g._then(p[f],o,void 0,u,l),m[f](g,l)):0!==(33554432&v)?p[f].call(u,g._value(),l):0!==(16777216&v)?u._reject(g._reason()):u._cancel()}else p[f].call(u,g,l)}return u._isFateSealed()||(u._setAsyncGuaranteed(),u._setOnCancel(l)),u}for(var y=arguments.length,_=new Array(y),x=0;y>x;++x)_[x]=arguments[x];e&&_.pop();var u=new n(_).promise();return void 0!==e?u.spread(e):u}}},{"./util":25}],14:[function(e,t){"use strict";t.exports=function(t,n,r,i,o,a){function s(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var i=c();this._callback=null===i?t:i.bind(t),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:d,this._init$(void 0,-2)}function u(e,t,n,i){if("function"!=typeof t)return r("expecting a function but got "+l.classString(t));var o="object"==typeof n&&null!==n?n.concurrency:0;return o="number"==typeof o&&isFinite(o)&&o>=1?o:0,new s(e,t,o,i).promise()}var c=t._getDomain,l=e("./util"),p=l.tryCatch,f=l.errorObj,d=[];l.inherits(s,n),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(e,n){var r=this._values,o=this.length(),s=this._preservedValues,u=this._limit;if(0>n){if(n=-1*n-1,r[n]=e,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=e,this._queue.push(n),!1;null!==s&&(s[n]=e);var c=this._promise,l=this._callback,d=c._boundValue();c._pushContext();var h=p(l).call(d,e,n,o),m=c._popContext();if(a.checkForgottenReturns(h,m,null!==s?"Promise.filter":"Promise.map",c),h===f)return this._reject(h.e),!0;var g=i(h,this._promise);if(g instanceof t){g=g._target();var v=g._bitField;if(0===(50397184&v))return u>=1&&this._inFlight++,r[n]=g,g._proxy(this,-1*(n+1)),!1;if(0===(33554432&v))return 0!==(16777216&v)?(this._reject(g._reason()),!0):(this._cancel(),!0);h=g._value()}r[n]=h}var y=++this._totalResolved;return y>=o?(null!==s?this._filter(r,s):this._resolve(r),!0):!1},s.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;n>o;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return u(this,e,t,null)},t.map=function(e,t,n,r){return u(e,t,n,r)}}},{"./util":25}],15:[function(e,t){"use strict";t.exports=function(t,n,r,i,o){var a=e("./util"),s=a.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+a.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var i=s(e).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t["try"]=function(e){if("function"!=typeof e)return i("expecting a function but got "+a.classString(e));var r=new t(n);r._captureStackTrace(),r._pushContext();var u;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];u=a.isArray(c)?s(e).apply(l,c):s(e).call(l,c)}else u=s(e)();var p=r._popContext();return o.checkForgottenReturns(u,p,"Promise.try",r),r._resolveFromSyncValue(u),r},t.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":25}],16:[function(e,t){"use strict";function n(e){return e instanceof Error&&c.getPrototypeOf(e)===Error.prototype}function r(e){var t;if(n(e)){t=new u(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var r=c.keys(e),i=0;i<r.length;++i){var a=r[i];l.test(a)||(t[a]=e[a])}return t}return o.markAsOriginatingFromRejection(e),e}function i(e,t){return function(n,i){if(null!==e){if(n){var o=r(a(n));e._attachExtraTrace(o),e._reject(o)}else if(t){for(var s=arguments.length,u=new Array(s-1),c=1;s>c;++c)u[c-1]=arguments[c];e._fulfill(u)}else e._fulfill(i);e=null}}}var o=e("./util"),a=o.maybeWrapAsError,s=e("./errors"),u=s.OperationalError,c=e("./es5"),l=/^(?:name|message|stack|cause)$/;t.exports=i},{"./errors":10,"./es5":11,"./util":25}],17:[function(e,t){"use strict";t.exports=function(){function t(){}function n(e,t){if("function"!=typeof t)throw new v("expecting a function but got "+f.classString(t));if(e.constructor!==r)throw new v("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function r(e){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,e!==_&&(n(this,e),this._resolveFromExecutor(e)),this._hook_created()}function i(e){this.promise._resolveCallback(e)}function o(e){this.promise._rejectCallback(e,!1)}function a(e){var t=new r(_);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var s,u=function(){return new v("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},c=function(){return new r.PromiseInspection(this._target())},l=function(e){return r.reject(new v(e))},p={},f=e("./util");s=f.isNode?function(){var e=process.domain;return void 0===e&&(e=null),e}:function(){return null},f.notEnumerableProp(r,"_getDomain",s);var d=e("./es5"),h=e("./async"),m=new h;d.defineProperty(r,"_async",{value:m});var g=e("./errors"),v=r.TypeError=g.TypeError;r.RangeError=g.RangeError;var y=r.CancellationError=g.CancellationError;r.TimeoutError=g.TimeoutError,r.OperationalError=g.OperationalError,r.RejectionError=g.OperationalError,r.AggregateError=g.AggregateError;var _=function(){},x={},b={},w=e("./thenables")(r,_),S=e("./promise_array")(r,_,w,l,t),E=e("./context")(r);E.create;var C=e("./debuggability")(r,E);C.CapturedTrace;var T=e("./finally")(r,w),P=e("./catch_filter")(b),I=e("./nodeback"),D=f.errorObj,A=f.tryCatch;return r.prototype.toString=function(){return"[object Promise]"},r.prototype.caught=r.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),i=0;for(n=0;t-1>n;++n){var o=arguments[n];if(!f.isObject(o))return l("expecting an object but got "+f.classString(o));r[i++]=o}return r.length=i,e=arguments[n],this.then(void 0,P(r,e,this))}return this.then(void 0,e)},r.prototype.reflect=function(){return this._then(c,c,void 0,this,void 0)},r.prototype.then=function(e,t){if(C.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+f.classString(e);arguments.length>1&&(n+=", "+f.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},r.prototype.done=function(e,t){var n=this._then(e,t,void 0,void 0,void 0);n._setIsFinal()},r.prototype.spread=function(e){return"function"!=typeof e?l("expecting a function but got "+f.classString(e)):this.all()._then(e,void 0,void 0,x,void 0)},r.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},r.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new S(this).promise()},r.prototype.error=function(e){return this.caught(f.originatesFromRejection,e)},r.is=function(e){return e instanceof r},r.fromNode=r.fromCallback=function(e){var t=new r(_),n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,i=A(e)(I(t,n));return i===D&&t._rejectCallback(i.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},r.all=function(e){return new S(e).promise()},r.cast=function(e){var t=w(e);return t instanceof r||(t=new r(_),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},r.resolve=r.fulfilled=r.cast,r.reject=r.rejected=function(e){var t=new r(_);return t._captureStackTrace(),t._rejectCallback(e,!0),t},r.setScheduler=function(e){if("function"!=typeof e)throw new v("expecting a function but got "+f.classString(e));var t=m._schedule;return m._schedule=e,t},r.prototype._then=function(e,t,n,i,o){var a=void 0!==o,u=a?o:new r(_),c=this._target(),l=c._bitField;a||(u._propagateFrom(this,3),u._captureStackTrace(),void 0===i&&0!==(2097152&this._bitField)&&(i=0!==(50397184&l)?this._boundValue():c===this?void 0:this._boundTo),this._hook_chained(u));var p=s();if(0!==(50397184&l)){var f,d,h=c._settlePromiseCtx;0!==(33554432&l)?(d=c._rejectionHandler0,f=e):0!==(16777216&l)?(d=c._fulfillmentHandler0,f=t,c._unsetRejectionIsUnhandled()):(h=c._settlePromiseLateCancellationObserver,d=new y("late cancellation observer"),c._attachExtraTrace(d),f=t),m.invoke(h,c,{handler:null===p?f:"function"==typeof f&&p.bind(f),promise:u,receiver:i,value:d})}else c._addCallbacks(e,t,u,i,p);return u},r.prototype._length=function(){return 65535&this._bitField},r.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},r.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},r.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},r.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._hook_fulfilled()},r.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._hook_rejected()},r.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._hook_resolved()},r.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},r.prototype._isFinal=function(){return(4194304&this._bitField)>0},r.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},r.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._hook_cancelled()},r.prototype._setAsyncGuaranteed=function(){this._bitField=134217728|this._bitField},r.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];return t===p?void 0:void 0===t&&this._isBound()?this._boundValue():t},r.prototype._promiseAt=function(e){return this[4*e-4+2]},r.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},r.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},r.prototype._boundValue=function(){},r.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=p),this._addCallbacks(t,n,r,i,null)},r.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=p),this._addCallbacks(n,r,i,o,null)},r.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:i.bind(e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:i.bind(t));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof e&&(this[a+0]=null===i?e:i.bind(e)),"function"==typeof t&&(this[a+1]=null===i?t:i.bind(t))}return this._setLength(o+1),o},r.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},r.prototype._resolveCallback=function(e,t){if(0===(117506048&this._bitField)){if(e===this)return this._rejectCallback(u(),!1);var n=w(e,this);if(!(n instanceof r))return this._fulfill(e);t&&this._propagateFrom(n,2);var i=n._target(),o=i._bitField;if(0===(50397184&o)){var a=this._length();a>0&&i._migrateCallback0(this);for(var s=1;a>s;++s)i._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(i)
}else if(0!==(33554432&o))this._fulfill(i._value());else if(0!==(16777216&o))this._reject(i._reason());else{var c=new y("late cancellation observer");i._attachExtraTrace(c),this._reject(c)}}},r.prototype._rejectCallback=function(e,t,n){var r=f.ensureErrorObject(e),i=r===e;if(!i&&!n&&C.warnings()){var o="a promise was rejected with a non-error: "+f.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,t?i:!1),this._reject(e)},r.prototype._resolveFromExecutor=function(e){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)},r.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;t===x?n&&"number"==typeof n.length?o=A(e).apply(this._boundValue(),n):(o=D,o.e=new v("cannot .spread() a non-array: "+f.classString(n))):o=A(e).call(t,n);var a=r._popContext();if(i=r._bitField,0===(65536&i))if(o===b)r._reject(n);else if(o===D||o===r){var s=o===r?u():o.e;r._rejectCallback(s,!1)}else C.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)}},r.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},r.prototype._followee=function(){return this._rejectionHandler0},r.prototype._setFollowee=function(e){this._rejectionHandler0=e},r.prototype._settlePromise=function(e,n,i,o){var a=e instanceof r,s=this._bitField,u=0!==(134217728&s);0!==(65536&s)?(a&&e._invokeInternalOnCancel(),n===T?(i.cancelPromise=e,A(n).call(i,o)===D&&e._reject(D.e)):n===c?e._fulfill(c.call(i)):i instanceof t?i._promiseCancelled(e):a||e instanceof S?e._cancel():i.cancel()):"function"==typeof n?a?(u&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(n,i,o,e)):n.call(i,o,e):i instanceof t?i._isResolved()||(0!==(33554432&s)?i._promiseFulfilled(o,e):i._promiseRejected(o,e)):a&&(u&&e._setAsyncGuaranteed(),0!==(33554432&s)?e._fulfill(o):e._reject(o))},r.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,i=e.receiver,o=e.value;"function"==typeof t?n instanceof r?this._settlePromiseFromHandler(t,i,o,n):t.call(i,o,n):n instanceof r&&n._reject(o)},r.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},r.prototype._settlePromise0=function(e,t){var n=this._promise0,r=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,e,r,t)},r.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},r.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=u();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!==(134217728&t)?this._settlePromises():m.settlePromises(this))}},r.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16))return this._setRejected(),this._fulfillmentHandler0=e,this._isFinal()?m.fatalError(e,f.isNode):((65535&t)>0?0!==(134217728&t)?this._settlePromises():m.settlePromises(this):this._ensurePossibleRejectionHandled(),void 0)},r.prototype._fulfillPromises=function(e,t){for(var n=1;e>n;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},r.prototype._rejectPromises=function(e,t){for(var n=1;e>n;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},r.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!==(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},r.prototype._settledValue=function(){var e=this._bitField;return 0!==(33554432&e)?this._rejectionHandler0:0!==(16777216&e)?this._fulfillmentHandler0:void 0},r.defer=r.pending=function(){C.deprecated("Promise.defer","new Promise");var e=new r(_);return{promise:e,resolve:i,reject:o}},f.notEnumerableProp(r,"_makeSelfResolutionError",u),e("./method")(r,_,w,l,C),e("./bind")(r,_,w,C),e("./cancel")(r,S,l,C),e("./direct_resolve")(r),e("./synchronous_inspection")(r),e("./join")(r,S,w,_,C),r.Promise=r,e("./call_get.js")(r),e("./map.js")(r,S,l,w,_,C),e("./settle.js")(r,S,C),e("./timers.js")(r,_),f.toFastProperties(r),f.toFastProperties(r.prototype),a({a:1}),a({b:2}),a({c:3}),a(1),a(function(){}),a(void 0),a(!1),a(new r(_)),C.setBounds(h.firstLineError,f.lastLineError),r}},{"./async":2,"./bind":3,"./call_get.js":4,"./cancel":5,"./catch_filter":6,"./context":7,"./debuggability":8,"./direct_resolve":9,"./errors":10,"./es5":11,"./finally":12,"./join":13,"./map.js":14,"./method":15,"./nodeback":16,"./promise_array":18,"./settle.js":21,"./synchronous_inspection":22,"./thenables":23,"./timers.js":24,"./util":25}],18:[function(e,t){"use strict";t.exports=function(t,n,r,i,o){function a(e){switch(e){case-2:return[];case-3:return{}}}function s(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var u=e("./util");return u.isArray,u.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function c(e,n){var o=r(this._values,this._promise);if(o instanceof t){o=o._target();var s=o._bitField;if(this._values=o,0===(50397184&s))return this._promise._setAsyncGuaranteed(),o._then(c,this._reject,void 0,this,n);if(0===(33554432&s))return 0!==(16777216&s)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=u.asArray(o),null===o){var l=i("expecting an array or an iterable object but got "+u.classString(o)).reason();return this._promise._rejectCallback(l,!1),void 0}return 0===o.length?(-5===n?this._resolveEmptyArray():this._resolve(a(n)),void 0):(this._iterate(o),void 0)},s.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;n>s;++s){var u=r(e[s],i);u instanceof t?(this._promise._hook_chained(u),u=u._target(),a=u._bitField):a=null,o?null!==a&&u.suppressUnhandledRejections():null!==a?0===(50397184&a)?(u._proxy(this,s),this._values[s]=u):o=0!==(33554432&a)?this._promiseFulfilled(u._value(),s):0!==(16777216&a)?this._promiseRejected(u._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(u,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},s.prototype._cancel=function(){!this._isResolved()&&this._promise.isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},s.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(e){return e},s}},{"./util":25}],19:[function(e,t){"use strict";function n(e,t,n,r,i){for(var o=0;i>o;++o)n[o+r]=e[o+t],e[o+t]=void 0}function r(e){this._capacity=e,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(e){return this._capacity<e},r.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e,this._length=t+1},r.prototype._unshiftOne=function(e){var t=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&t-1^t)-t;this[r]=e,this._front=r,this._length=this.length()+1},r.prototype.unshift=function(e,t,n){this._unshiftOne(n),this._unshiftOne(t),this._unshiftOne(e)},r.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),this._pushOne(n),void 0;var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var r=this._front,i=this._length,o=r+i&t-1;n(this,0,this,t,o)},t.exports=r},{}],20:[function(e,t){"use strict";var n,r=e("./util"),i=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};if(r.isNode&&"undefined"==typeof MutationObserver){var o=global.setImmediate,a=process.nextTick;n=r.isRecentNode?function(e){o.call(global,e)}:function(e){a.call(process,e)}}else n="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:i:function(){var e=document.createElement("div"),t={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){e.classList.toggle("foo"),n=!1});i.observe(r,t);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(e,t),o()}}();t.exports=n},{"./util":25}],21:[function(e,t){"use strict";t.exports=function(t,n,r){function i(e){this.constructor$(e)}var o=t.PromiseInspection,a=e("./util");a.inherits(i,n),i.prototype._promiseResolved=function(e,t){this._values[e]=t;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},i.prototype._promiseFulfilled=function(e,t){var n=new o;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},i.prototype._promiseRejected=function(e,t){var n=new o;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new i(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":25}],22:[function(e,t){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};t.prototype.isCancelled=e.prototype._isCancelled=function(){return 65536===(65536&this._bitField)},e.prototype.isCancelled=function(){return this._target()._isCancelled()},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],23:[function(e,t){"use strict";t.exports=function(t,n){function r(e,r){if(l(e)){if(e instanceof t)return e;var i=o(e);if(i===c){r&&r._pushContext();var u=t.reject(i.e);return r&&r._popContext(),u}if("function"==typeof i){if(a(e)){var u=new t(n);return e._then(u._fulfill,u._reject,void 0,u,null),u}return s(e,i,r)}}return e}function i(e){return e.then}function o(e){try{return i(e)}catch(t){return c.e=t,c}}function a(e){return p.call(e,"_promise0")}function s(e,r,i){function o(e){s&&(s._resolveCallback(e),s=null)}function a(e){s&&(s._rejectCallback(e,p,!0),s=null)}var s=new t(n),l=s;i&&i._pushContext(),s._captureStackTrace(),i&&i._popContext();var p=!0,f=u.tryCatch(r).call(e,o,a);return p=!1,s&&f===c&&(s._rejectCallback(f.e,!0,!0),s=null),l}var u=e("./util"),c=u.errorObj,l=u.isObject,p={}.hasOwnProperty;return r}},{"./util":25}],24:[function(e,t){"use strict";t.exports=function(t,n){function r(e){var t=this;return t instanceof Number&&(t=+t),clearTimeout(t),e}function i(e){var t=this;throw t instanceof Number&&(t=+t),clearTimeout(t),e}var o=e("./util"),a=t.TimeoutError,s=function(e,t,n){if(e.isPending()){var r;r="string"!=typeof t?t instanceof Error?t:new a("operation timed out"):new a(t),o.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),n.cancel()}},u=function(e){return c(+this).thenReturn(e)},c=t.delay=function(e,r){var i;return void 0!==r?i=t.resolve(r)._then(u,null,null,e,void 0):(i=new t(n),setTimeout(function(){i._fulfill()},+e)),i._setAsyncGuaranteed(),i};t.prototype.delay=function(e){return c(e,this)},t.prototype.timeout=function(e,t){e=+e;var n=this.then(),o=n.then(),a=setTimeout(function(){s(o,t,n)},e);return o._then(r,i,void 0,a,void 0)}}},{"./util":25}],25:[function(e,t,n){"use strict";function r(){try{var e=D;return D=null,e.apply(this,arguments)}catch(t){return I.e=t,I}}function i(e){return D=e,r}function o(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function a(e){return"function"==typeof e||"object"==typeof e&&null!==e}function s(e){return o(e)?new Error(g(e)):e}function u(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=e[n];return i[n]=t,i}function c(e,t,n){if(!T.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function l(e,t,n){if(o(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return T.defineProperty(e,t,r),e}function p(e){throw e}function f(e){try{if("function"==typeof e){var t=T.names(e.prototype),n=T.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=k.test(e+"")&&T.names(e).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function d(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e}function h(e){return O.test(e)}function m(e,t,n){for(var r=new Array(e),i=0;e>i;++i)r[i]=t+i+n;return r}function g(e){try{return e+""}catch(t){return"[no string representation]"}}function v(e){try{l(e,"isOperational",!0)}catch(t){}}function y(e){return null==e?!1:e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0}function _(e){return e instanceof Error&&T.propertyIsWritable(e,"stack")}function x(e){return{}.toString.call(e)}function b(e,t,n){for(var r=T.names(e),i=0;i<r.length;++i){var o=r[i];if(n(o))try{T.defineProperty(t,o,T.getDescriptor(e,o))}catch(a){}}}function w(e,t,n,r){var i=e[t];if("function"==typeof i&&"function"==typeof n){if(!i.extensions)throw new Error("Trying to extend overridden method, please use util.js:hookTo() to extend it");if(i.extensions.indexOf(n)>=0)throw new Error("Trying to register same extension method twice");if(r)for(var o=0;o<i.extensions.length;o++)i.extensions[o].constructor.name===n.constructor.name&&i.extensions.splice(o,1);i.extensions.push(n),e[t]=E(i.extensions)}else{if("undefined"!=typeof i)throw new Error("Trying to wrap "+typeof i+", expecting a function or undefined");e[t]="function"==typeof n?E([n]):E([])}}function S(e,t,n){if(!e[t].extensions)throw new Error("Trying to unhook from method, that was not extended");var r=e[t].extensions.indexOf(n);if(0>r)throw new Error("Trying to unhook extension function "+n+" that was not hooked to current prototype, extensions that were"+" hooked are: "+e[t].extensions);e[t].extensions.splice(r,1),e[t]=E(e[t].extensions)}function E(e){var t=null;if(0===e.length)t=function(){};else if(1===e.length){var n=e[0];t=function(){n.apply(this,arguments)}}else{t=e[0];for(var r=1;r<e.length;r++){var i=t;t=function(){var t=i,n=e[r];return function(){t.apply(this,arguments),n.apply(this,arguments)}}()}}return t.extensions=e,t}function C(e,t){return L?process.env[e]:t}var T=e("./es5"),P="undefined"==typeof navigator,I={e:{}},D,A=function(e,t){function n(){this.constructor=e,this.constructor$=t;for(var n in t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var r={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},N=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(T.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],i=Object.create(null);null!=e&&!t(e);){var o;try{o=n(e)}catch(a){return r}for(var s=0;s<o.length;++s){var u=o[s];if(!i[u]){i[u]=!0;var c=Object.getOwnPropertyDescriptor(e,u);null!=c&&null==c.get&&null==c.set&&r.push(u)}}e=T.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<e.length;++a)if(r.call(e[a],o))continue e;i.push(o)}return i}}(),k=/this\s*\.\s*\S+\s*=/,O=/^[a-z$_][a-z$_0-9]*$/i,R=function(){return"stack"in new Error?function(e){return _(e)?e:new Error(g(e))}:function(e){if(_(e))return e;try{throw new Error(g(e))}catch(t){return t}}}(),j=function(e){return T.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var F="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};j=function(e){return T.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?F(e):null}}var L="undefined"!=typeof process&&"[object process]"===x(process).toLowerCase(),M={isClass:f,isIdentifier:h,inheritedDataKeys:N,getDataPropertyOrDefault:c,thrower:p,isArray:T.isArray,asArray:j,notEnumerableProp:l,isPrimitive:o,isObject:a,canEvaluate:P,errorObj:I,tryCatch:i,inherits:A,withAppended:u,maybeWrapAsError:s,toFastProperties:d,filledRange:m,toString:g,canAttachTrace:_,ensureErrorObject:R,originatesFromRejection:y,markAsOriginatingFromRejection:v,classString:x,copyDescriptors:b,hookTo:w,unhookFrom:S,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:L,env:C};M.isRecentNode=M.isNode&&function(){var e=process.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),M.isNode&&M.toFastProperties(process);try{throw new Error}catch(B){M.lastLineError=B}t.exports=M},{"./es5":11}]},{},[1])(1)}),define("sap/watt/core/q",["sap/watt/lib/q/q","./DebugHooks"],function(e,t){"use strict";function n(e,t){for(var n=0;n<e.length;n++){var r=e[n];if("function"!=typeof t[r])throw new Error("Trying to disable non-existent functionality");t[r]=function(){throw new Error("The method "+r+" of "+t.constructor.name+" was disabled by Web IDE core team. If you have some use case that needs this method please inform us.")}}}if(e.sap)throw new Error("Q.sap namespace is already defined");if(e.sap={},e.sap.getURLParameter=function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"="+"([^&;]+?)(&|#|;|$)").exec(location.search)||[null,""])[1].replace(/\+/g,"%20"))||null},"function"!=typeof e.getBluebirdPromise)throw new Error("bluebird-q adapter is missing in lib/q.js");var r=e.getBluebirdPromise();n(["bind","break","call","cancel","catchReturn","catchThrow","error"],r.prototype),n(["deferred","fulfilled","pending"],e);var i=!!e.sap.getURLParameter("sap-ide-debug-async")||!!e.sap.getURLParameter("debugAsync");return i&&(e.getBluebirdPromise().config({warnings:!1,longStackTraces:i}),t.hookToBluebird(r,{maxChainLength:i?1e3:!1,maxPendingPromises:i?1e4:!1,tracing:i,monitor:i})),e.sap.Queue=function(){this._oPromise=e()},e.sap.Queue.prototype.next=function(e){return this._oPromise=this._oPromise.then(e,e),this._oPromise},e.sap.ajax=function(t,n){if(n&&(n.data&&(n.data instanceof Blob||n.data instanceof ArrayBuffer)||n.responseType&&"text"!==n.responseType&&"json"!==n.responseType)){var r;r=window.sinon&&window.sinon.xhr&&window.sinon.xhr.workingXHR?new window.sinon.xhr.workingXHR:new XMLHttpRequest;var i=(n&&n.stype||"GET").toUpperCase();r.open(i,t,!0);var o=n.headers||{};n.data instanceof Blob&&n.data.type&&(o["Content-Type"]=oData.type);for(var a in o)r.setRequestHeader(a,o[a]);n.responseType&&(r.responseType=n.responseType);var s=e.defer();return r.onreadystatechange=function(){4===this.readyState&&(this.status<300&&this.status>=200?s.resolve([this.response,r,r.statusText]):s.reject(this.response))},r.send(n.data),s.promise}var u=jQuery.ajax(t,n),c=e.defer();return u.then(function(e,t){delete u.then,c.resolve([e,u,t])},function(e,n,r){var i=u.responseJSON&&u.responseJSON.Message?"\n\nMessage: "+u.responseJSON.Message:"",o=new Error("Request failed: "+u.statusText+" URI: "+t+i);o.status=u.status,o.statusText=u.statusText,o.responseText=u.responseText,o.responseJSON=u.responseJSON,o.textStatus=n,o.errorThrown=r,c.reject(o)}),c.promise},e.sap.require=function(t,n){var r=e.defer();return require([t],function(e){e||n?r.resolve(e):r.reject(new Error(t+" could not be loaded. The file exists,"+" but is either defining a module with a different name or not defining anything. Please remove the module name or add the missing define."))},function(e){r.reject(new Error("Error loading module from path '"+t+"'"+"\nOriginal error message: "+e.message+"\nError stack: "+e.stack+"\n -----------"))}),r.promise},e.sap.ui=e.sap.ui||{},e.sap.ui.define=function(t){var n=e.defer();return sap.ui.define([t],function(e){e?n.resolve(e):n.reject(new Error(t+" could not be loaded. The file exists,"+" but is either defining a module with a different name or not defining anything. Please remove the module name or add the missing define."))},!1),n.promise},e}),define("sap.watt.common.platform/service/remote/Preferences",["sap/watt/core/q"],function(e){"use strict";function t(){var t,n=e.sap.getURLParameter("settings");switch(n){case"false":t="ignore";break;case"true":t=!0;break;case"delete":t="delete";break;case"ignore":t="ignore";break;default:t=!0}return t}var n=function(e){this._oDao=e};n.prototype.set=function(){return!0},n.prototype.get=function(e){return this._oDao&&this._oDao.remove(e),null},n.prototype.remove=function(){return!0};var r=function(){n.call(this,arguments)};r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.prototype.get=function(){return null};var i={_oDao:void 0,_oConfiguredDao:void 0,configure:function(e){e&&e.dao&&(this._oConfiguredDao=e.dao);var i=t();switch(i){case"delete":this._oDao=new n(this._oConfiguredDao);break;case"ignore":this._oDao=new r(this._oConfiguredDao);break;default:this._oDao=this._oConfiguredDao||new n(this._oConfiguredDao)}},set:function(e,t){return this._oDao.set(e,t)},get:function(e){return this._oDao.get(e)},remove:function(e){return this._oDao.remove(e)}};return i}),define("sap.watt.platform.hcp.destination/service/Destination",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{_mDestinations:[],_DESTINATIONS_PATH:sap.watt.getEnv("context_root")+"destinations",_API_PATH:sap.watt.getEnv("context_root")+"api",_API_LIST_DESTINATIONS:"/listDestinations",_mUsages:{},configure:function(e){var t=this;t._mConfig=e,jQuery.each(e.usages,function(e,n){t._mUsages.hasOwnProperty(n.name)&&t.context.service.log.error("destination",t.context.i18n.getText("i18n","destination_errorDuplicateUsage",n.name),["system"]).done(),t._mUsages[n.name]=n.path})},loadDestinations:function(){var e=this,t=this._API_PATH+this._API_LIST_DESTINATIONS,n=jQuery.ajax(t);return Q(n).then(function(){if(n.responseText){var t=JSON.parse(n.responseText);for(var r in t)try{(t[r].RDEUsage||t[r].RDEEnabled||t[r].RDESystem)&&e.context.service.log.warn("destination",e.context.i18n.getText("i18n","destination_deprecatedPropertyName",t[r].Name),["system"]).done();var i=t[r].WebIDEUsage?t[r].WebIDEUsage:t[r].RDEUsage,o=t[r].WebIDEAdditionalData?t[r].WebIDEAdditionalData.split(","):[],a=i.split(","),s="";t[r].hasOwnProperty("sap-client")&&(s=t[r]["sap-client"]);for(var u in a){var i=a[u].trim(),c=e._calculateProxyUrlPrefix(t[r]);e._addDestination({name:t[r].Name,description:t[r].Description&&t[r].Description.length>0?t[r].Description:t[r].Name,proxyUrlPrefix:c,path:e._calculatePath(t[r],i),url:e._calculateUrl(t[r],i,c),wattUsage:i,systemId:t[r].WebIDESystem?t[r].WebIDESystem:t[r].RDESystem,entryPath:e._calculateEntryPath(t[r],i),sapClient:s,additionalData:o})}}catch(l){e.context.service.log.warn("destination",e.context.i18n.getText("i18n","destination_validDestination",t[r].Name),["system"]).done()}}},function(){e.context.service.log.error("destination",e.context.i18n.getText("i18n","destination_errorFetchDestinationList"),["system"]).done()})},getDestinations:function(t,n,r){var i=[];for(var o in this._mDestinations)(t&&this._mDestinations[o].wattUsage==t||!t)&&i.push(this._mDestinations[o]);return n&&(r||(r="name"),i=e.sortBy(i,r)),i},getDestination:function(e){var t=[];for(var n in this._mDestinations)e&&this._mDestinations[n].name==e&&t.push(this._mDestinations[n]);return t},_addDestination:function(e){var t=this;e&&e.name&&e.wattUsage&&e.url&&(!e.wattUsage||void 0!==this._mUsages[e.wattUsage])?this._mDestinations.name!=e.name||this._mDestinations.name==e.name&&this._mDestinations.wattUsage!=e.wattUsage?this._mDestinations.push(e):t.context.service.log.error("destination",t.context.i18n.getText("i18n","destination_destinationExists",e.name,e.wattUsage),["system"]).done():t.context.service.log.warn("destination",t.context.i18n.getText("i18n","destination_validDestination",e.name),["system"]).done()},_calculateProxyUrlPrefix:function(e){return this._DESTINATIONS_PATH+"/"+e.Name},_calculateUrl:function(e,t,n){return e.Path&&e.Path.length>1?n:n+this._mUsages[t]},_calculatePath:function(e,t){return e.Path&&e.Path.length>1?e.Path:this._mUsages[t]},_calculateEntryPath:function(e,t){return e.Path&&e.Path.length>1?void 0:this._mUsages[t]}}}),define("sap.watt.platform.hcp.hcplibrarymetadataprovider/service/HcpLibraryMetadataProvider",["sap/watt/lib/lodash/lodash","sap/watt/lib/jszip/jszip-shim"],function(e){"use strict";return{_mLibraries:{},configure:function(e){var t=sap.watt.getEnv("internal");e.libraries.forEach(function(e){this._mLibraries[e.name]={},t?(this._mLibraries[e.name].pathPrefix=e.internalPathPrefix,this._mLibraries[e.name].snapshotPathPrefix=e.snapshotPathPrefix):this._mLibraries[e.name].pathPrefix=e.nonInternalPathPrefix,this._mLibraries[e.name].versionsFileName=e.versionsFileName,this._mLibraries[e.name].minVersion=e.minVersion,this._mLibraries[e.name].packages=e.packages}.bind(this))},getVersions:function(t){var n=this._mLibraries[t];if(!n)return[];var r=n.pathPrefix+"/"+n.versionsFileName,i=this;return this._getDataFromHCP(r,"json").then(function(t){if(!t)return[];var r=e.remove(t.routes,function(e){return"/"!==e.path}),o=e.pluck(r,"target.version");return e.filter(o,function(e){return i._versionCompare(e,n.minVersion)>-1})}).fail(function(){return[]})},getMetadata:function(t,n,r){var i=this._mLibraries[t];if(!i)return null;var o;if("snapshot"===r){if(!i.snapshotPathPrefix)return null;o=i.snapshotPathPrefix}else o=i.pathPrefix+"/"+r;var a={},s=[];return i.packages.forEach(function(e){var t=o+"/test-resources/"+e.replace(/\./g,"/")+"/"+"designtime/codeassistance/",r=t+"Library."+n+"meta.json",i=t+"Library."+n+"templates.json",u=[];u.push(this._getDataFromHCP(r,"text")),u.push(this._getDataFromHCP(i,"text"));var c=Q.spread(u,function(t,n){t&&(a.metadata||(a.metadata=new JSZip),a.metadata.file(e+".json",t)),n&&(a.templates||(a.templates=new JSZip),a.templates.file(e+".json",n))});s.push(c)}.bind(this)),Q.allSettled(s).then(function(){return e.isEmpty(a)?null:a}).fail(function(){return null})},_getDataFromHCP:function(e,t){return window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),this._getResponseFromHCP(window.location.origin+e,t).fail(function(){console.log("Missed "+window.location.origin+e)})},_getResponseFromHCP:function(e,t){var n=Q.defer(),r=new XMLHttpRequest;return r.open("GET",e),r.setRequestHeader("Accept","*/*"),r.responseType=t,r.onload=function(e){4===this.readyState&&this.status<300?n.resolve(this.response):n.reject(e)},r.send(),n.promise},_versionCompare:function(e,t){for(var n,r,i=e||"",o=t||"",a=i.split("."),s=o.split("."),u=Math.min(a.length,s.length),c=0;u>c;c++)if(n=parseInt(a[c],10),r=parseInt(s[c],10),n!==r)return n>r?1:r>n?-1:0/0;return a.length===s.length?0:a.length<s.length?-1:1}}}),define("sap.watt.platform.hcp.logserver/service/LogServer",["sap/watt/lib/lodash/lodash"],function(e){"use strict";var t={_aBuffer:[],_oLogQueue:Q(),_currentBufferSize:0,configure:function(e){var t=this;return this._intervalInMilliSeconds=e.intervalInMilliSeconds||3e4,this._bufferOptimalLimit=e.bufferOptimalLimit||5e4,this._bufferMaxLimit=e.bufferMaxLimit||10485760,t.context.service.destination.getDestination("logger").then(function(e){0===e.length?t.onLoggerEvent=function(){}:(t._savingLogInterval(),t._savingLogWhenWindowClose())})},_savingLogWhenWindowClose:function(){var e=this;this.context.service&&this.context.service.unloadHandler.addHandler(function(){e._aBuffer.length>0&&e._saveLog().done()}).done()},_savingLogInterval:function(){var e=this,t=this._intervalInMilliSeconds;this._saveLogInterval=window.setInterval(function(){return e._aBuffer.length>0?e._saveAndClear():void 0},t)},_saveAndClear:function(){var e=this;return e._oLogQueue=e._oLogQueue.then(function(){return e._saveLog().then(function(){e._aBuffer=[],e._currentBufferSize=0})}),e._oLogQueue},_addToBuffer:function(e){var t=this;return t._oLogQueue=t._oLogQueue.then(function(){t._aBuffer.push(e);var n=t._calculateNodeSize(e);t._currentBufferSize+=n}),t._oLogQueue},_overrideOldestMassgeInBuffer:function(e){var t=this;return t._oLogQueue=t._oLogQueue.then(function(){var n=t._aBuffer.splice(0,1,e),r=t._calculateNodeSize(e),i=t._calculateNodeSize(n[0]);t._currentBufferSize+=r-i}),t._oLogQueue},_calculateNodeSize:function(t){var n=0;return e.forIn(t,function(t){e.isString(t)?t&&t.length&&(n+=t.length):t&&t.toString().length&&(n+=t.toString().length)}),n},_isBufferInOptimalRange:function(){return this._currentBufferSize<=this._bufferOptimalLimit},_isBufferInMaxRange:function(){return this._currentBufferSize<=this._bufferMaxLimit},_saveLog:function(){var e=this;if(0===e._aBuffer.length)return Q();var t=e._aBuffer,n=e._getBrowserType(),r={method:"POST",processData:!1,data:JSON.stringify({messages:t,data:n})};return Q.sap.ajax("/logger",r).fail(function(e){console.error("logserver - problem with saving log data in server. Error: "+e.message)})},_getBrowserType:function(){return sap.ui.Device.browser.chrome?"CHROME":sap.ui.Device.browser.firefox?"FIREFOX":sap.ui.Device.browser.internet_explorer?"INTERNET_EXPLORER":sap.ui.Device.browser.safari?"SAFARI":void 0
},_validationAndSaving:function(e){var t=this,n=t._isBufferInOptimalRange();return n&&"error"!==e.level?Q():t._saveAndClear()},onLoggerEvent:function(e){var t=this,n=e.params.node;return n?t._isBufferInMaxRange()?t._addToBuffer(n).then(function(){return t._validationAndSaving(n)}):(t.context.service.usagemonitoring.report("logserver","bufferMaxLimitExceed",t._bufferMaxLimit).done(),t._overrideOldestMassgeInBuffer(n).then(function(){return t._validationAndSaving(n)})):void 0}};return t}),define("sap.watt.ideplatform.projectsetting/command/Show",{_firstTime:!0,execute:function(){var e=this;return this.context.service.selection.getSelection().then(function(t){var n=t[0];return n&&n.document&&!n.document.getEntity().isRoot()?e.context.service.projectsetting.setVisible(!0,n.document):!1})},isAvailable:function(){return!0},isEnabled:function(){var e=this.context.service.perspective,t=this;return e.getCurrentPerspective().then(function(e){return"development"==e&&t.context.service.selection.getSelection().then(function(e){var t=e[0];return 1===e.length&&t&&t.document&&!t.document.getEntity().isRoot()?!0:!1})})}}),define("sap.watt.ideplatform.projectsetting/service/ProjectSetting",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";return e.extend("sap.watt.common.plugin.projectsetting.service.ProjectSetting",{_oPanel:null,_oPluginList:null,_oSettingBorderLayout:null,_oTitleLabel:null,_oDescriptionLabel:null,_oTitleDivider:null,_cancelButton:null,_saveButton:null,_oCurrentPlugin:null,_oCurrentPluginButton:null,_mPluginsId:[],_pluginButtons:[],_oCurrentProject:null,_inShowSetting:!1,_generation:null,setVisible:function(e,t,n){if(!t&&e!==!1)return Q();if(this.sPluginIdToOpen=e&&n?n:null,this._oPanel&&this.sPluginIdToOpen){var r=this;return this._openSpecificPlugin().then(function(){return r._updateVisibleState(e,t,n)})}return this._updateVisibleState(e,t,n)},_updateVisibleState:function(t,n){if(t){var r=arguments;if(n&&!n.getEntity().isRoot()){var i=this;return n.getProject().then(function(t){return i._oCurrentProject&&i._oCurrentProject!==t?i._cleanUI():i._oCurrentPlugin&&!i.sPluginIdToOpen&&(i.sPluginIdToOpen=i._oCurrentPlugin.id),i._oCurrentProject=t,i.context.service.projectType.getProjectTypes(t).then(function(t){return i._oCurrentProject._aProjectTypes=t,e.prototype.setVisible.apply(i,r)})})}throw new Error("ProjectSettings: cannot open editor without defined project")}return e.prototype.setVisible.apply(this,arguments)},_createErrorUI:function(){var e=new sap.ui.commons.layout.BorderLayout({width:"100%",height:"100%",busyIndicatorDelay:0}).addStyleClass("projectsettingPanel");return e},_createUI:function(){var e=this;this._oPanel=(new sap.ui.commons.Splitter).addStyleClass("projectsettingPanel"),this._oPanel.setSplitterOrientation(sap.ui.commons.Orientation.vertical),this._oPanel.setSplitterPosition("15%"),this._oPanel.setMinSizeFirstPane("15%"),this._oPanel.setMinSizeSecondPane("60%"),this._oPanel.setWidth("100%"),this._oPanel.setHeight("100%"),this._oPluginList=new sap.ui.layout.VerticalLayout({width:"100%"}).addStyleClass("pluginList"),this._oPanel.addFirstPaneContent(this._oPluginList),this._oSettingBorderLayout=new sap.ui.commons.layout.BorderLayout({width:"100%",height:"100%",busyIndicatorDelay:0}).addStyleClass("settingBorderLayout"),this._oPanel.addSecondPaneContent(this._oSettingBorderLayout);var t=new sap.ui.layout.VerticalLayout({width:"100%",layoutData:new sap.ui.layout.form.GridElementData({hCells:"16"})});this._oTitleLabel=(new sap.ui.commons.Label).addStyleClass("titleLabel"),t.addContent(this._oTitleLabel),this._oDescriptionLabel=(new sap.ui.commons.Label).addStyleClass("descriptionLabel"),t.addContent(this._oDescriptionLabel),this._oTitleDivider=new sap.ui.commons.HorizontalDivider({visible:!1}).addStyleClass("titlePanelDivider"),t.addContent(this._oTitleDivider),this._oSettingBorderLayout.createArea(sap.ui.commons.layout.BorderLayoutAreaTypes.top,t),this._oSettingBorderLayout.setAreaData(sap.ui.commons.layout.BorderLayoutAreaTypes.top,{size:"120px",visible:!0});var n=new sap.ui.layout.VerticalLayout({width:"100%",layoutData:new sap.ui.layout.form.GridElementData({hCells:"16"})}),r=new sap.ui.layout.HorizontalLayout({allowWrapping:!0,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}).addStyleClass("buttonPanel");return this._saveButton=new sap.ui.commons.Button({text:this.context.i18n.getText("i18n","button_save"),tooltip:this.context.i18n.getText("i18n","button_save"),visible:!1,press:function(){e._saveSetting()}}),r.addContent(this._saveButton),this._cancelButton=new sap.ui.commons.Button({text:this.context.i18n.getText("i18n","button_cancel"),tooltip:this.context.i18n.getText("i18n","button_cancel"),press:function(){e._cancelSetting()}}),r.addContent(this._cancelButton),n.addContent(r),this._oSettingBorderLayout.createArea(sap.ui.commons.layout.BorderLayoutAreaTypes.bottom,n),this._oSettingBorderLayout.setAreaData(sap.ui.commons.layout.BorderLayoutAreaTypes.bottom,{size:"54px",contentAlign:"left",visible:!0}),this._oPanel},_sortByName:function(e,t){var n=!0,r=e.group;r&&null!==r||(r=e.name,n=!1);var i=!0,o=t.group;return o&&null!==o||(o=t.name,i=!1),r&&o?o>r?-1:r>o?1:n&&i?e.name<t.name?-1:e.name>t.name?1:0:0:0},_findExistingGroup:function(e,t){if(e)for(var n=0;n<e.length;n++)if(t===e[n].groupName)return e[n].object;return void 0},_removeOldPlugin:function(e){return e=e||this._oCurrentPluginButton,e?(e.removeStyleClass("selectedPluginButton"),this.context.service.focus.detachFocus(this._oCurrentPlugin.service)):Q()},_pressPluginButton:function(e,t,n){var r=this;return r._removeOldPlugin(n).then(function(){return r._oCurrentPluginButton=t,t.addStyleClass("selectedPluginButton"),r.context.service.focus.attachFocus(e.service).then(function(){return r._showSetting(e)})})},_createList:function(){this._pluginButtons=[],this._oPluginList.removeAllContent(),this._mPluginsId.sort(this._sortByName);var e=[],t=this;jQuery.each(this._mPluginsId,function(n,r){var i=new sap.ui.commons.Button({width:"100%",text:r.name,press:function(){t._pressPluginButton(r,i).done()}}).addStyleClass("pluginButton");if(t._isDisplayProjectSettingsUIComponent(r)===!0)if(t._pluginButtons.push({plugin:r,button:i}),r.group&&"null"!==r.group){i.addStyleClass("indentPluginButton");var o=t._findExistingGroup(e,r.group);if(o)o.oSection1.addContent(i);else{o=new sap.ui.commons.Accordion({width:"100%"});var a=new sap.ui.commons.AccordionSection({title:r.group,collapsed:!0});o.addSection(a),o.oSection1=a,t._oPluginList.addContent(o),o.oSection1.addContent(i),e.push({groupName:r.group,object:o})}}else t._oPluginList.addContent(i),e.push({groupName:r.group,object:i})})},_showSetting:function(e){if(this._inShowSetting)return Q();this._inShowSetting=!0,this._oTitleLabel.setText(e.title),this._oDescriptionLabel.setText(e.description),this._oTitleDivider.setVisible(!0),this._saveButton.setVisible(!0),this._oSettingBorderLayout.setBusy(!0),this._oSettingBorderLayout.removeAllContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center),this._oCurrentPlugin=e;var t=this._oCurrentProject.getEntity().getFullPath(),n=this;return n.context.service.usagemonitoring.report("projectSettings","selectSetting",[e.id,e.name]).done(),e.service.getProjectSettingContent(e.id,e.group,t).then(function(t){return n._oSettingBorderLayout.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,t),n._oSettingBorderLayout.setBusy(!1),n.context.service.focus.attachFocus(e.service).then(function(){return n._inShowSetting=!1,Q()})})},_cleanUI:function(){this._oPluginList&&this._oPluginList.removeAllContent(),this._oSettingBorderLayout&&this._oSettingBorderLayout.removeAllContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center),this._pluginButtons=[],this._oPanel=null,this.sPluginIdToOpen=null},_cancelSetting:function(){this.context.service.content.setVisible(!0).done()},_saveSetting:function(){if(this._oCurrentPlugin){var e=this,t=this._oCurrentProject.getEntity().getFullPath();this._oCurrentPlugin.service.saveProjectSetting(this._oCurrentPlugin.id,this._oCurrentPlugin.group,t).then(function(){e.context.service.usernotification.liteInfo(e.context.i18n.getText("i18n","msg_saved")).done()}).fail(function(t){void 0!==t&&e.context.service.usernotification.alert(t).done()}).done()}},_openSpecificPlugin:function(){for(var e=0;e<this._pluginButtons.length;e++){var t=this._pluginButtons[e];if(t.plugin.id===this.sPluginIdToOpen)break}var n=t.plugin,r=t.button;return this._pressPluginButton(n,r,null)},getContent:function(){var t=this;return e.prototype.getContent.apply(this,arguments).then(function(){return null===t._oPanel&&t._createUI(),Q()}).then(function(){return t._initPlugins()}).then(function(e){return t.sPluginIdToOpen?t._openSpecificPlugin():t._oCurrentPlugin?t._pressPluginButton(t._oCurrentPlugin,t._oCurrentPluginButton,e):(t._oTitleLabel.setText(""),t._oDescriptionLabel.setText(""),t._oTitleDivider.setVisible(!1),t._saveButton.setVisible(!1),t._oSettingBorderLayout.removeAllContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center),e?t._removeOldPlugin():Q())}).then(function(){return Q(t._oPanel)}).fail(function(e){return t.context.service.usernotification.alert(t.context.i18n.getText("i18n","load_error_message",e.message)).then(function(){t._cancelSetting()}).done(),Q(t._createErrorUI())})},getFocusElement:function(){return null==this._oPanel?this.getContent():Q(this._oPanel)},getSelection:function(){return{document:this._oCurrentProject}},configure:function(t){var n=this;e.prototype.configure.apply(this,arguments).then(function(){return n._generation=t.generation,jQuery.each(t.plugins,function(e,t){n._mPluginsId.push(t);var r=t.service;r._hasProjectSettingChangedEvent||(r._hasProjectSettingChangedEvent=!0,r.attachEvent("projectSettingChangedEvent",n.onProjectSettingChanged,n))}),n.context.event.firePluginsLoaded()}).done()},onDocumentSelected:function(e){if(this._oCurrentProject&&this.isVisible()&&e.params.owner.instanceOf("sap.watt.common.service.ui.Browser")){var t=this,n=e.params.selection&&e.params.selection[0]&&e.params.selection[0].document;n?n.getEntity().isRoot()?t._cancelSetting():n.getProject().then(function(e){t._oCurrentProject!==e&&(t._cleanUI(),t._cancelSetting())}).done():t._cancelSetting()}},_initPlugins:function(){if(!this._oCurrentProject)return Q();this._createList();var e=this,t=null;if(e._oCurrentPlugin)for(var n=0;n<e._pluginButtons.length;n++){var r=e._pluginButtons[n];if(r.plugin===e._oCurrentPlugin){t=r.button,e.sPluginIdToOpen=r.plugin.id;break}}if(!t&&e._oCurrentPlugin||!e._oCurrentPlugin){var i=!1;for(n=0;n<e._pluginButtons.length;n++)if(r=e._pluginButtons[n],r.button.getVisible()){e._oCurrentPlugin=r.plugin,e._oCurrentPluginButton=r.button,i=!0;break}i||(e._oCurrentPlugin=null,e._oCurrentPluginButton=null)}return Q(t)},onDocumentDeleted:function(e){if(this._oCurrentProject){var t=e.params.document;t&&t.isProject()&&this._cancelSetting()}},getPlugins:function(){return this._mPluginsId},onProjectSettingChanged:function(){},_isDisplayProjectSettingsUIComponent:function(e){var t=this;if(this._isIncludeProjectSettingsUIComponentInAllProjectsTypes(e))return!0;if(t._oCurrentProject&&t._oCurrentProject._aProjectTypes)for(var n=0;n<t._oCurrentProject._aProjectTypes.length;n++){var r=t._oCurrentProject._aProjectTypes[n];if(t._isProjectSettingsUIComponentConfiguredProjectType(e,r.id))return!0}return!1},_isProjectSettingsUIComponentConfiguredProjectType:function(e,t){return e&&e.projectTypes&&e.projectTypes.indexOf(t)>=0?!0:!1},_isIncludeProjectSettingsUIComponentInAllProjectsTypes:function(e){if(e){if(void 0===e.projectTypes)return!0;if(e.projectTypes.indexOf("*")>=0)return!0}return!1},onProjectTypeConfigSaved:function(){var e=this;return this._oCurrentProject?this._updateVisibleState(!0,this._oCurrentProject).then(function(){e._createList()}):void 0}})}),define("sap.watt.common.perspective/command/PerspectiveSwitcher",[],function(){"use strict";var e=function(){};return e.prototype=jQuery.extend(e.prototype,{_sPerspective:void 0,_sID:void 0,execute:function(){return this.context.service.perspective.renderPerspective(this._sPerspective)},isAvailable:function(){return!0},isEnabled:function(){var e=this;return this.context.service.perspective.getCurrentPerspective().then(function(t){return t!=e._sPerspective})},isActive:function(){var e=this;return this.context.service.perspective.getCurrentPerspective().then(function(t){return t==e._sPerspective})},configure:function(e){this._sPerspective=e.perspective,this._sID=e.id}}),e}),define("sap.watt.ideplatform.userpreference/service/UserPreference",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";var t=e.extend("sap.watt.ideplatform.plugin.userpreference.service.UserPreference",{_oView:null,_aPlugins:null,_oCurrentPlugin:null,_oCurrentPluginButton:null,_firstPlugin:null,_firstPluginButton:null,configure:function(e){var t=this;this._aStyles=e.styles,this._aPlugins=e.plugins,jQuery.each(this._aPlugins,function(e,n){var r=n.service;r._hasuserPreferenceChangedEvent||(r._hasuserPreferenceChangedEvent=!0,r.attachEvent("userPreferenceChanged",t.onUserPreferenceChanged,t))})},getPlugins:function(){return this._aPlugins},_sortByName:function(e,t){var n=!0,r=e.group;r&&"null"!=r||(r=e.name,n=!1);var i=!0,o=t.group;return o&&"null"!=o||(o=t.name,i=!1),r&&o?o>r?-1:r>o?1:n&&i?e.name<t.name?-1:e.name>t.name?1:0:0:0},_findExistingGroup:function(e,t){if(e)for(var n=0;n<e.length;n++)if(t==e[n].groupName)return e[n].object;return void 0},_getPluginByID:function(e){if(this._aPlugins&&e)for(var t=0;t<this._aPlugins.length;t++){var n=this._aPlugins[t];if(n.id==e)return n}return void 0},_pressPluginButton:function(e,t){return this._oCurrentPluginButton&&this._oCurrentPluginButton==t?Q():(this._oCurrentPluginButton&&this._oCurrentPluginButton.removeStyleClass("selectedPluginButton"),this._oCurrentPlugin=e,this._oCurrentPluginButton=t,t.addStyleClass("selectedPluginButton"),this.context.event.fireUserPreferenceSelectChanged({plugin:e}))},_createUI:function(){var e=this,t=[];e._oView=new sap.ui.commons.layout.BorderLayout({width:"100%",height:"100%",busyIndicatorDelay:0}).addStyleClass("userPrefPanel");var n=new sap.ui.layout.VerticalLayout({width:"100%"}).addStyleClass("pluginList");if(e._oView.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,n),e._aPlugins&&(e._aPlugins.sort(e._sortByName),jQuery.each(e._aPlugins,function(n,r){var i=new sap.ui.commons.Button({id:r.id,width:"100%",text:r.name,visible:!0,icon:void 0,press:function(){e._pressPluginButton(r,i).done()}}).addStyleClass("pluginButton");if(e._firstPlugin||(e._firstPlugin=r,e._firstPluginButton=i),r.group&&"null"!=r.group){i.addStyleClass("indentPluginButton");var o=e._findExistingGroup(t,r.group);if(o)o.oSection1.addContent(i);else{o=new sap.ui.commons.Accordion({width:"100%"});var a=new sap.ui.commons.AccordionSection({title:r.group,collapsed:!0});o.addSection(a),o.oSection1=a,o.oSection1.addContent(i),t.push({groupName:r.group,object:o})}}else t.push({groupName:r.group,object:i})})),t&&t.length>0)for(var r=0;r<t.length;r++)n.addContent(t[r].object)},getContent:function(){var t=this;return e.prototype.getContent.apply(this,arguments).then(function(){return!t._oView&&(t._createUI(),t._firstPlugin)?t._pressPluginButton(t._firstPlugin,t._firstPluginButton).then(function(){return Q(t._oView)}):Q(t._oView)})},onApplyPressed:function(){if(this._oCurrentPlugin){var e=this;this._oCurrentPlugin.service.saveUserPreference(this._oCurrentPlugin.id,this._oCurrentPlugin.group).then(function(){e.context.service.usernotification.liteInfo(e.context.i18n.getText("i18n","msg_saved")).done()}).fail(function(t){void 0!==t&&e.context.service.usernotification.alert(t).done()}).done()}},onCancelPressed:function(){},onUserPreferenceChanged:function(e){this.context.event.fireUserPreferenceSettingChanged({service:e.params.service})}});return t}),define("sap.watt.ideplatform.userpreference/service/UserPreferencePlugins",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";var t=e.extend("sap.watt.ideplatform.plugin.userpreference.service.UserPreferencePlugins",{_oView:null,_oTitle:null,_oDesc:null,_oTopDivider:null,_oApplyButton:null,_activePlugin:null,init:function(){var e=this;e._createContainerUI()},configure:function(){},_createContainerUI:function(){if(this._oView)return this._oView;var e=this,t=new sap.ui.commons.layout.BorderLayout({width:"100%",height:"100%"}).addStyleClass("userPrefPluginBorderLayout"),n=new sap.ui.commons.layout.VerticalLayout({id:"vLayout1",width:"100%",enabled:!0,visible:!0}).addStyleClass("userPrefPluginTopArea");e._oTitle=new sap.ui.commons.Label({text:e._getText("userpreference"),width:"100%",visible:!1}).addStyleClass("userPrefPluginTitle"),n.addContent(e._oTitle),this._oDesc=new sap.ui.commons.Label({text:"",width:"100%",visible:!1}).addStyleClass("userPrefPluginDesc"),n.addContent(this._oDesc),e._oTopDivider=new sap.ui.commons.HorizontalDivider({width:"100%",visible:!1}).addStyleClass("userPrefPluginDevider"),n.addContent(e._oTopDivider),t.createArea(sap.ui.commons.layout.BorderLayoutAreaTypes.top,n),t.setAreaData(sap.ui.commons.layout.BorderLayoutAreaTypes.top,{size:"120px",contentAlign:"center",visible:!0});var r=new sap.ui.layout.HorizontalLayout({allowWrapping:!0,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}).addStyleClass("buttonPanel");e._oApplyButton=new sap.ui.commons.Button({id:"applyButton",text:e._getText("button_apply"),tooltip:e._getText("button_apply_tooltip"),visible:!1,icon:void 0,press:function(){var t=e._activePlugin?e._activePlugin.id:void 0;e.context.event.fireUserPreferencePluginApplied({id:t}).done()}}).addStyleClass("userPrefPluginApplyButton"),r.addContent(e._oApplyButton),t.createArea(sap.ui.commons.layout.BorderLayoutAreaTypes.bottom,r),t.setAreaData(sap.ui.commons.layout.BorderLayoutAreaTypes.bottom,{size:"54px",contentAlign:"left",visible:!0}),e._oView=t},_showPreference:function(){var e=this;if(e._activePlugin&&(e._activePlugin.title?e._oTitle.setText(e._activePlugin.title):e._oTitle.setText(""),e._activePlugin.description?e._oDesc.setText(e._activePlugin.description):e._oDesc.setText(""),e._oView.setBusy(!0),e._oView.removeAllContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center),e._activePlugin.service)){var t=e._activePlugin.group;t&&"null"==t&&(t=null),e._activePlugin.service.getUserPreferenceContent(e._activePlugin.id,t).then(function(t){e._oView.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,t),e._oView.setBusy(!1)}).done(),e.context.service.usagemonitoring.report("userPreference","selectPreference",[e._activePlugin.id,e._activePlugin.title]).done()}},_getText:function(e){var t=this.context.i18n;return t.getText("i18n",e)},getContent:function(){var t=this;return e.prototype.getContent.apply(this,arguments).then(function(){return t._oView})},onPerspectiveChange:function(e){var t=this;"userpreference"!==e.params.from&&"userpreference"===e.params.to&&t._showPreference()},onSelectionChanged:function(e){var t=this;t._oTitle.setVisible(!0),t._oDesc.setVisible(!0),t._oTopDivider.setVisible(!0),t._oApplyButton.setVisible(!0),t._activePlugin=e.params.plugin,t._showPreference()},onSettingChanged:function(){this._oApplyButton.setEnabled(!0)}});return t}),define("sap.watt.ideplatform.welcomescreen/service/WelcomeScreenManager",["sap/watt/core/Proxy"],function(e){"use strict";var t=function(e,t,n,r){this._sId=e,this._mConfig=t,this._oContext=n,this._oProxy=r};t.prototype.getContainer=function(){return this._oProxy.getContainer()},t.prototype.getSection=function(){return this._mConfig.section},t.prototype.getPriority=function(){return this._mConfig.priority};var n={};return n._mContainers={},n.register=function(n,r,i){if(!this._mContainers[n]){var o={id:null,container:null,priority:null,section:null};"string"==typeof r?o.container=r:o=jQuery.extend(this._mConfig,r);var a=this;if(o.container instanceof e){var s=new t(n,o,i,o.container);return a._mContainers[n]=s,s}throw new Error(i.i18n.getText("i18n","WelcomeScreen_instance_of_Proxy"))}i.service.log.error("WelcomeScreen",n+" Container already registered",["user"]).done()},{configure:function(e){var t=this;jQuery.each(e.containers,function(e,r){n.register(r.id,r,t.context)})},getWelcomeContainers:function(){return n._mContainers}}}),define("sap.watt.ideplatform.welcomescreen/ui/view/WelcomeContent.controller",[],function(){"use strict";sap.ui.core.mvc.Controller.extend("sap.watt.ideplatform.plugin.welcomescreen.ui.view.WelcomeContent",{_oContext:null,onInit:function(){this._oContext=this.getView().getViewData().context;var e=this.byId("welcomeMainGrid");e.setLayoutData(new sap.ui.layout.GridData({span:"L12 M12 S12"})),this.oMainSection=this.oView.byId("welcomeMainSection"),this.oMainSection.setLayoutData(new sap.ui.layout.GridData({span:"L7 M7 S7"})),this.oSubSection=this.oView.byId("welcomeSubSection"),this.oSubSection.setLayoutData(new sap.ui.layout.GridData({span:"L5 M5 S5"}))}})}),define("sap.watt.ideplatform.welcomescreen/service/WelcomeScreen",["sap/watt/common/plugin/platform/service/ui/AbstractPart","../ui/view/WelcomeContent.controller"],function(e){"use strict";var t=e.extend("sap.watt.ideplatform.plugin.welcomescreen.service.WelcomeScreen",{oView:null,_perspectiveService:null,_oSettings:{},init:function(){this._perspectiveService=this.context.service.perspective,this._oSettings={},this.oView=sap.ui.view("welcomeView",{viewName:"sap.watt.ideplatform.plugin.welcomescreen.ui.view.WelcomeContent",type:sap.ui.core.mvc.ViewType.XML,controller:sap.ui.controller("sap.watt.ideplatform.plugin.welcomescreen.ui.view.WelcomeContent"),viewData:{context:this.context}}),this.oSections={},this.oSectionsPromises={}},configure:function(){},getSelection:function(){return null},getSelectionProvider:function(){return Q(this.oView)},getFocusElement:function(){return Q(this.oView)},getContent:function(){return Q(this.oView)},getBasicContainer:function(e){return new sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeContainer(e)},_compareMajorMinorVersions:function(e,t){var n=e.split("."),r=t.split("."),i=n[0]+"."+n[1],o=r[0]+"."+r[1];return i!==o},onAllPluginsStarted:function(){var e=this;this.context.service.WelcomeScreenManager.getWelcomeContainers().then(function(t){jQuery.each(t,function(t,n){var r=n.getSection();e.oView.byId(r)&&(e.oSections[r]||(e.oSections[r]=[]),e.oSections[r].push(n))}),jQuery.each(e.oSections,function(t,n){n.sort(e._compareContainers);var r=n[0].getSection();e.oSectionsPromises[r]||(e.oSectionsPromises[r]=[]),jQuery.each(n,function(t,n){e.oSectionsPromises[r].push(n.getContainer())}),Q.all(e.oSectionsPromises[r]).spread(function(){var t=e.oView.byId(r);t&&jQuery.each(arguments,function(e,n){t.addContent(n)})}).done()})}).then(function(){return e._perspectiveService.isPerspectiveRegistered("welcome").then(function(t){return t?e.context.service.WelcomeScreenPersistency.getPerspectiveSettings().then(function(t){return e._oSettings=t,e.context.service.Version.getLastSeenVersion().then(function(t){return e.lastVersion=t,e.context.service.Version.getCurrentVersion().then(function(t){return e._oSettings&&e._oSettings.bIsOpen!==!0&&void 0!==e.lastVersion&&e.lastVersion===t?e.context.event.fireWelcomePerspectiveNotVisibleOnStartup():(e._oSettings||(e._oSettings={}),e._oSettings.bIsOpen=!0,e._oSettings.bIsVersionUpdate=!e.lastVersion||e._compareMajorMinorVersions(e.lastVersion,t),e._oSettings.oVersionUpdate={from:e.lastVersion?e.lastVersion:"",to:t},e.lastVersion&&e.lastVersion===t||e.context.service.Version.setLastSeenVersion(t).done(),e.context.service.WelcomeScreenPersistency.setPerspectiveSettings(e._oSettings).done(),e._perspectiveService.renderPerspective("welcome"))})})}):void 0})}).done()},onPerspectiveChange:function(e){this._oSettings||(this._oSettings={}),"welcome"!==e.params.from&&"welcome"===e.params.to&&(this._oSettings.bIsOpen=!0,this.context.service.WelcomeScreenPersistency.setPerspectiveSettings(this._oSettings).done()),"welcome"===e.params.from&&"welcome"!==e.params.to&&(this._oSettings.bIsOpen=!1,this.context.service.WelcomeScreenPersistency.setPerspectiveSettings(this._oSettings).done())},onAfterGeneration:function(){var e=this;return this._perspectiveService.getCurrentPerspective().then(function(t){return"welcome"===t?e._perspectiveService.renderPerspective("development"):void 0})},_compareContainers:function(e,t){return e.getPriority()-t.getPriority()}});return t}),define("sap.watt.ideplatform.welcomescreen/service/WelcomeScreenPersistency",[],function(){"use strict";var e="sap.watt.common.service.ui.WelcomeScreen",t=function(){if(window.location.host.indexOf("webidetesting")<0){var t=this;return this.context.service.preferences.get(e).then(function(e){return e&&void 0!==e[window.location.host]?e[window.location.host]:void 0}).fail(function(e){return console.error(t.context.i18n.getText("i18n","WelcomeScreen_versionReadFailed",[e])),void 0})}return Q({bIsOnline:!1})},n=function(t){if(window.location.host.indexOf("webidetesting")<0){var n=this,r=null;return this.context.service.preferences.get(e).fail(function(e){console.error(n.context.i18n.getText("i18n","WelcomeScreen_persistenceReadFailed",[e]))}).then(function(i){return r=i,r||(r={}),r[window.location.host]||(r[window.location.host]={}),r[window.location.host]=t,n.context.service.preferences.remove(e)}).then(function(){return n.context.service.preferences.set(r,e)}).fail(function(e){console.error(n.context.i18n.getText("i18n","WelcomeScreen_persistenceSaveFailed",[e]))})}};return{getPerspectiveSettings:t,setPerspectiveSettings:n}}),define("sap.watt.ideplatform.welcomescreen/service/Version",[],function(){"use strict";var e="sap.watt.common.plugin.welcomescreen.service.Version",t="v_",n=function(){var e=jQuery.sap.getModulePath("sap.watt.uitools.version",".json"),t=this;return jQuery.ajax({url:e,dataType:"json"}).then(function(e){var t="";if(e&&e.version){t=e.version.replace("-SNAPSHOT","");for(var n=t.split(".");n.length>2;)n.pop();t=n.join(".")}return t}).fail(function(e){return console.error(t.context.i18n.getText("i18n","WelcomeScreen_versionSaveFailed",[e])),void 0})},r=function(){if(window.location.host.indexOf("webidetesting")<0){var r=this;return this.context.service.preferences.get(e).then(function(e){if(e&&void 0!==e[window.location.host]){var n=e[window.location.host].toString();return n.replace(t,"")}return void 0}).fail(function(e){return console.error(r.context.i18n.getText("i18n","WelcomeScreen_versionReadFailed",[e])),void 0})}return n()},i=function(n){if(window.location.host.indexOf("webidetesting")<0){var r=this;return this.context.service.preferences.get(e).then(function(i){return i||(i={}),i[window.location.host]=t+n,r.context.service.preferences.remove(e).then(function(){return r.context.service.preferences.set(i,e).fail(function(e){console.error(r.context.i18n.getText("i18n","WelcomeScreen_versionSaveFailed",[e]))})}).fail(function(e){console.error(r.context.i18n.getText("i18n","WelcomeScreen_versionSaveFailed",[e]))})}).fail(function(e){console.error(r.context.i18n.getText("i18n","WelcomeScreen_versionReadFailed",[e]))})}return Q()},o=function(e,t){var n=/[^\.\d]+/;if(n.test(e)||n.test(t))throw Error("Illegal version detected!");for(var r=e.split("."),i=t.split("."),o=r.length<i.length?r.length:i.length,a=0;o>a;a++){var s=parseInt(r[a]),u=parseInt(i[a]);if(s>u)return 1;if(u>s)return-1}return r.length===i.length?0:r.length-i.length};return{getCurrentVersion:n,getLastSeenVersion:r,setLastSeenVersion:i,compareVersions:o}}),define("sap.watt.ideplatform.commonrunners/service/RunConfigUiHandler",{_oRunConfigurationUiFragment:null,_sRunnerId:null,_oConfigurationUiElements:null,_projctRunnableFiles:null,_oDocument:null,getContent:function(e,t,n){var r=this;require(["sap/watt/lib/lodash/lodash"],function(e){_=e});var i=e.sRunnerId;return this._projctRunnableFiles=t,this._oDocument=n,r._oRunConfigurationUiFragment&&r._sRunConfigurationId===i||(r._sRunnerId=i,r._oConfigurationUiElements=e,r._oRunConfigurationUiFragment=sap.ui.jsfragment("sap.watt.ideplatform.plugin.commonrunners.view.RunConfigUi",r)),r.context.i18n.applyTo(r._oRunConfigurationUiFragment),r.context.service.baseerrorhandler.subscribe(r._oRunConfigurationUiFragment).then(function(){return r._oRunConfigurationUiFragment})},updateCB:function(e,t,n,r){var i=e.getSource().getModel();i.setProperty(t,n?r[0]:r[1])},configure:function(e){e.styles&&this.context.service.resource.includeStyles(e.styles).done()},setOption:function(e,t){var n=["withoutWorkspace","withWorkspace"],r=e.getSource(),i=r.getModel();i.setProperty("/workspace",n[t])},checkFileVisible:function(e){var t=!1;return void 0!==e&&null!==e&&(jQuery.sap.endsWith(e,"Component.js")||new RegExp(".*fiorisandboxconfig.*[.]json","i").test(e))&&(t=!0),t},createNewParameterLine:function(){var e=this.getModel(),t=e.getProperty("/urlParameters");t.push({paramName:"",paramValue:"",paramActive:!1}),e.setProperty("/urlParameters",t)},deleteParameterLine:function(){var e=this,t=e.getBindingContext().sPath,n=t.split("/"),r=n[n.length-1],i=e.getBindingContext().getModel(),o=i.getProperty("/urlParameters");o.splice(r,1),i.setProperty("/urlParameters",o)},getSuggestItemes:function(){return this._projctRunnableFiles},getFocusElement:function(){},getTitle:function(){},getTooltip:function(){},setVisible:function(){},isVisible:function(){},onAfterRBGRendering:function(e){var t=e.srcControl,n=t.getModel(),r=n.getProperty("/isDefaultVersion");0===r?t.setSelectedIndex(0):t.setSelectedIndex(1)},validatePathInput:function(e){var t=this;switch(t._sRunnerId){case"chewebapprunner":return t.context.service.baseinputvalidatorutil.validatePath(e,t._oDocument,[{isRegex:!1,rule:".html"}]);case"sap.xs.nodejs.project.nodejsRunnerApplication":case"sap.xs.nodejs.project.nodejsTestRunner":return t.context.service.baseinputvalidatorutil.validatePath(e,t._oDocument,[{isRegex:!1,rule:".js"},{isRegex:!1,rule:".xsjs"}]);default:return Q({isValid:!0})}},validateParameterNameInput:function(e){return this.context.service.baseinputvalidatorutil.validateUrlParameter(e)},onPathFieldChange:function(e){var t=this;t._validatePathFieldChange(e).then(function(e){return t.context.service.baseerrorhandler.update(e)}).done()},onAfterPathFieldRendering:function(e){var t=this;t._validateAfterPathFieldRendering(e).then(function(e){return t.context.service.baseerrorhandler.update(e)}).done()},onAfterParamNameRendering:function(e){var t=this;t._validateAfterParamNameRendering(e).then(function(e){return t.context.service.baseerrorhandler.update(e)}).done()},onParamNameChange:function(e){var t=this;t._validateParamNameChange(e).then(function(e){return t.context.service.baseerrorhandler.update(e)}).done()},onCheckBoxChange:function(e){var t=this;t._validateCheckBoxChange(e).then(function(e){return t.context.service.baseerrorhandler.update(e)}).done()},onResourceMappingChange:function(e){var t=this,n=e.getSource(),r=n.getChecked();t.setOption(e,r===!1?0:1)},_createControlData:function(e,t,n,r,i){var o={oControl:e,sControlId:t,isControlValid:n,sInvalidMessage:r,sValidMessage:i};return o},_validateAfterParamNameRendering:function(e){var t=this,n=e.srcControl,r=n.getParent().getContent()[0].getChecked(),i=n.getValue();return r?t.validateParameterNameInput(i).then(function(e){return t._createControlData(n,n.getParent().getId(),e.isValid,e.message,i)}):Q(t._createControlData(n,n.getParent().getId(),!0,"",i))},_validateParamNameChange:function(e){var t=this,n=e.getSource(),r=n.getParent().getContent(),i=r[0],o=i.getChecked(),a=n.getValue();return t.validateParameterNameInput(a).then(function(e){return n.setValue(a),o===!1&&i.setChecked(!0),t._createControlData(n,n.getParent().getId(),e.isValid,e.message,a)})},_validateCheckBoxChange:function(e){var t=this,n=e.getSource(),r=n.getParent().getContent(),i=r[1],o=n.getChecked(),a=i.getValue();
return o?t.validateParameterNameInput(a).then(function(e){return n.setChecked(!0),t._createControlData(i,i.getParent().getId(),e.isValid,e.message,a)}):(n.setChecked(!1),Q(t._createControlData(i,n.getParent().getId(),!0,"",a)))},_validateAfterPathFieldRendering:function(e){var t=this,n=e.srcControl,r=n.getModel(),i=r.getData(),o=i.filePath;return t.validatePathInput(o).then(function(e){return t._createControlData(n,n.getId(),e.isValid,e.message,o)})},_validatePathFieldChange:function(e){var t=this,n="",r=e.getSource(),i=e.getParameter("selectedItem");return n=null!=i?i.getKey():r.getValue(),t.validatePathInput(n).then(function(e){var i=r.getModel(),o=i.getData();return o.filePath=n,r.setValue(n),i.setData(o),t._createControlData(r,r.getId(),e.isValid,e.message,n)})}}),define("sap.watt.ideplatform.run/util/DocumentWindowsUtil",[],function(){var e={},t=require.toUrl("sap.watt.common.platform/ui/LoadingPage.html"),n=function(e){return e&&"string"==typeof e?!0:!1},r=function(){var t=Object.keys(e);t.forEach(function(t){e[t].closed&&delete e[t]})},i=function(t){return r(),n(t)?e[t]:void 0},o=function(t,i){if(r(),n(t)&&n(i)){var o=e[t];o&&(o.name=i,e[i]=o,delete e[t])}},a=function(t){if(n(t)){var r=e[t];r&&!r.closed&&(r.close(),r=null),delete e[t]}},s=function(){r();var n="tmpWin_"+Math.floor(1e7*Math.random()+1);return e[n]=window.open(t,n),n};return{openWindow:s,getWindow:i,closeWindow:a,renameWindow:o}}),define("sap.watt.ideplatform.commonrunners/service/RunConfigChooseFilePopupHandler",["sap.watt.ideplatform.run/util/DocumentWindowsUtil"],function(e){"use strict";var t={_oChooseFilePopupFragment:null,_oFilesTable:null,_sSelectedFilePath:null,_oDeferred:void 0,_sWindowId:null,getContent:function(t,n){e.closeWindow(n),this._sWindowId=n,this._oDeferred=Q.defer(),this._oChooseFilePopupFragment||(this._oChooseFilePopupFragment=sap.ui.jsfragment("sap.watt.ideplatform.plugin.commonrunners.view.RunConfigChooseFilePopup",this)),this.context.i18n.applyTo(this._oChooseFilePopupFragment);var r=this._oChooseFilePopupFragment.getContent(),i=r[0].getContent();this._oFilesTable=i[0];var o=new sap.ui.model.json.JSONModel;return o.setData({aFileList:t}),this._oFilesTable.setModel(o),this._oFilesTable.bindRows("/aFileList"),this._oChooseFilePopupFragment.open(),this._oDeferred.promise},getResult:function(){return this._sSelectedFilePath},cancel:function(){this._oChooseFilePopupFragment.close(),this._oDeferred.resolve(!1)},ok:function(){var t=e.openWindow();e.renameWindow(t,this._sWindowId);var n=this._oFilesTable.getSelectedIndex(),r=this._oFilesTable.getModel().getProperty("/aFileList");this._sSelectedFilePath=r[n].fullPath,this._oChooseFilePopupFragment.close(),this._oDeferred.resolve(!0)},rowSelection:function(){var e=this._oFilesTable.getSelectedIndex();if(e>=0){var t=this._oFilesTable.getModel().getProperty("/aFileList");this._sSelectedFilePath=t[e].fullPath}},enableOK:function(){this._oFilesTable.getSelectedIndex()>=0?this._oChooseFilePopupFragment.getButtons()[0].setEnabled(!0):this._oChooseFilePopupFragment.getButtons()[0].setEnabled(!1)},cellClick:function(){if(this._sSelectedFilePath){var t=e.openWindow();e.renameWindow(t,this._sWindowId),this._oChooseFilePopupFragment.close(),t=e.openWindow(),e.renameWindow(t,this._sWindowId),this._oDeferred.resolve(!0)}},getFocusElement:function(){},getTitle:function(){},getTooltip:function(){},setVisible:function(){},isVisible:function(){}};return t}),define("sap.watt.ideplatform.commonrunners/service/FileSearchUtil",{getRunnableFiles:function(e,t){var n=this;return e.getProject().then(function(e){if(null!==e){var r=e.getEntity();return r.isRoot()?null:e.getCurrentMetadata(!0).then(function(e){var r=[],i=n._getValidationFunc(t);return n._searchRunnableFiles(e,r,i),r})}return null})},_getValidationFunc:function(e){var t=this;e||(e={include:[],exclude:[]});var n=e.include,r=e.exclude;return t._createValidationFunc(n,r)},_createValidationFunc:function(e,t){var n=function(n){try{for(var r=!1,i=!0,o=0;o<e.length;o++)if(e[o]=e[o].trim(),e[o]){var a=new RegExp(e[o],"i").test(n);if(a===!0){r=!0;break}}for(var o=0;o<t.length;o++)if(t[o]=t[o].trim(),t[o]){var a=!new RegExp(t[o],"i").test(n);if(a===!1){i=!1;break}}return r&&i}catch(s){return!1}};return n},_searchRunnableFiles:function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(!i.folder){var o=i.name,a=i.path;n(a)&&t.push({name:o,fullPath:a})}}}}),define("sap/watt/saptoolsets/fiori/run/plugin/commonrunners/util/configEnum",[],function(){var e={withMock:0,withoutMock:1},t={withPreview:0,withoutPreview:1};return{dataStates:e,displayStates:t}}),define("sap.watt.ideplatform.commonrunners/service/RunnerRunUtil",["sap/watt/saptoolsets/fiori/run/plugin/commonrunners/util/configEnum"],function(e){"use strict";var t={configure:function(){this.context.service.preview.showPreview().fail(function(){}).done()},readConfigurationFile:function(t){var n=!1;t.dataMode===e.dataStates.withMock&&(n=!0);var r=!0;t.previewMode===e.displayStates.withPreview&&(r=!1);var i=!1;"withWorkspace"===t.workspace&&(i=!0);var o={bPreferWorkspace:i},a=t.filePath,s=t.urlParameters,u=t.hashParameter,c=t.ui5ActiveVersion,l=t.ui5VerSource,p=t.appsVersion,f={oAppsVersion:p,oUrlParameters:s,oHashParameter:u,oAppForwarding:o,bIsMock:n,sUi5Version:c,sUi5VerSource:l},d={bNoFrame:r,sFilePath:a,oRunConfiguration:f};return d},onRunError:function(e,t){e&&e.close(),this.context.service.usernotification.alert(t).done()},runHtmlFile:function(e,t,n){return this.context.service.preview.showPreview(t,e,n.bNoFrame,null,n.oRunConfiguration)}};return t}),define("sap.watt.ideplatform.commonrunners/service/InputValidatorUtil",{validatePath:function(e,t,n){var r=this,i={isValid:!0,message:""};return!e||/^\s*$/.test(e)?(i.isValid=!1,i.message=r.context.i18n.getText("msg_file_path_empty"),Q(i)):(i.isValid=!0,i.isValid?t.getProject().then(function(t){return r.context.service.filesystem.documentProvider.getDocument(e).then(function(o){var a=t.getEntity().getName(),s=e.split("/"),u=s.filter(function(e){return e===a});return o?u.length>0?r._checkPathWithRegexRule(n,e):(i.isValid=!1,i.message=r.context.i18n.getText("msg_file_path_doc"),i):0===u.length?(e="/"+a+e,r.context.service.filesystem.documentProvider.getDocument(e).then(function(t){return t?r._checkPathWithRegexRule(n,e):(i.isValid=!1,i.message=r.context.i18n.getText("msg_file_path_not_exist"),i)})):(i.isValid=!1,i.message=r.context.i18n.getText("msg_file_path_not_exist"),i)}).fail(function(){return i.isValid=!1,i.message=r.context.i18n.getText("msg_file_path_not_exist"),i})}):Q(i))},validateUrlParameter:function(e){var t={isValid:!0,message:""};return!e||/^\s*$/.test(e)?(t.isValid=!1,t.message=this.context.i18n.getText("msg_appl_param_empty"),t):(t.isValid=!0,t)},isConfigurationValid:function(e,t,n){return e&&e.filePath?this.validatePath(e.filePath,t,n).then(function(t){if(t.isValid){var n=!0;if(e.urlParameters)for(var r=0;r<e.urlParameters.length;r++){var i=e.urlParameters[r];if(/^\s*$/.test(i.paramName)&&!/^\s*$/.test(i.paramValue)&&i.paramActive){n=!1;break}}return n}return!1}):!1},_checkPathWithRegexRule:function(e,t){for(var n=this,r={isValid:!0,message:""},i=0;i<e.length;i++){var o=e[i];if(o.isRegex){if(new RegExp(o.rule,"i").test(t)){r.isValid=!0;break}r.isValid=!1,r.message=n.context.i18n.getText("msg_file_path_type")}else{if(jQuery.sap.endsWith(t,o.rule)){r.isValid=!0;break}r.isValid=!1,r.message=n.context.i18n.getText("msg_file_path_type")}}return r}}),define("sap.watt.ideplatform.commonrunners/service/RunConfigErrorHandler",{_aErrorFields:null,_oRunConfigurationUiFragment:null,subscribe:function(e){this._oRunConfigurationUiFragment=e,this._aErrorFields=[]},update:function(e){this._updateStack(e.sControlId,e.isControlValid),e.isControlValid?this._switchToValidUi(e.oControl,e.sValidMessage):this._switchToInvalidUi(e.oControl,e.sInvalidMessage),this._fireEvent()},_switchToInvalidUi:function(e,t){e.hasStyleClass("inputError")||(e.removeStyleClass("inputConfirmed"),e.addStyleClass("inputError"),this._addRichToolTip(e,t))},_switchToValidUi:function(e,t){e.hasStyleClass("inputError")&&(e.removeStyleClass("inputError"),e.addStyleClass("inputConfirmed"),setTimeout(function(){e.removeStyleClass("inputConfirmed")},3e3),e.setTooltip(t))},_fireEvent:function(){this._oRunConfigurationUiFragment.fireEvent("ConfigurationValidationEvent",{isValid:0===this._aErrorFields.length})},_updateStack:function(e,t){var n=this._hasError(e);n&&t&&this._removeError(e),n||t||this._aErrorFields.push(e)},_removeError:function(e){this._aErrorFields=jQuery.grep(this._aErrorFields,function(t){return""+t!=""+e})},_hasError:function(e){for(var t=0;t<this._aErrorFields.length;t++)if(this._aErrorFields[t]===e)return!0;return!1},_addRichToolTip:function(e,t){var n=new sap.ui.commons.RichTooltip({text:t,myPosition:"begin bottom",atPosition:"begin top",title:"{i18n>lbl_error}"}).addStyleClass("runConfigRtt");e.setTooltip(n)}}),define("sap.watt.ideplatform.template/service/Template",["sap/watt/core/Proxy","sap/watt/lib/lodash/lodash"],function(e,t){var n=function(e,t,n,r){this._sId=e,this._mConfig=t,this._oContext=n,this._oProxy=r,this._mResources={}};n.prototype.onAfterGenerate=function(e,t){return this._oProxy.onAfterGenerate(e,t).then(function(n){return void 0===n?[e,t]:[n[0],n[1]]})},n.prototype.onBeforeTemplateGenerate=function(e,t){return this._oProxy.onBeforeTemplateGenerate(e,t).then(function(n){return void 0===n?[e,t]:[n[0],n[1]]})},n.prototype.configWizardSteps=function(){var e=this.getWizardSteps();if(void 0!==e&&e.length>0){for(var t=this,r=n._getTemplateContext(this),i=[],o=0;o<e.length;o++){var a=e[o];if(r.service[a].instanceOf("sap.watt.common.service.ui.WizardFinishStep")&&o<e.length-1)return Q.reject(new Error("Wizard finish step must be configured only as a last step"));i.push(r.service[a].getContent())}return Q.all(i).then(function(e){return t._oProxy.configWizardSteps.apply(t,e).then(function(){return e})})}return Q()},n.prototype.onBeforeTemplateCustomizationLoaded=function(e,t){return this._oProxy.onBeforeTemplateCustomizationLoaded(e,t).then(function(n){return n?n:[e,t]})},n.prototype.getWizardStepService=function(e){var t=this.getWizardSteps(),r=n._getTemplateContext(this),i=t[e];return r.service[i]},n.prototype.validateOnSelection=function(e){return this._oProxy.validateOnSelection(e).then(function(e){return void 0===e?!0:e})},n.prototype.customValidation=function(e){return this._oProxy.customValidation(e).then(function(e){return void 0===e?!0:e})},n.prototype.getI18nResources=function(){if(Object.keys(this._mResources).length>0)return this._mResources;var e=n._getTemplateContext(this);if(e&&e.i18n){var t=e.i18n.bundles;for(var r in t){var i=new sap.ui.model.resource.ResourceModel({bundleUrl:t[r],bundleLocale:e.i18n.locale});this._mResources[r]=i}}return this._mResources},n.prototype.getType=function(){return this._mConfig.templateType},n.prototype.getSupportedProjectTypes=function(){return this._mConfig.supportedProjectTypes},n.prototype.getTargetProjectTypes=function(){return this._mConfig.targetProjectTypes},n.prototype.getWizardSteps=function(){return this._mConfig.wizardSteps},n.prototype.getIcon=function(){return this._mConfig.icon},n.prototype.getName=function(){return this._mConfig.name},n.prototype.getRequiresNeoApp=function(){return this._mConfig.requiresNeoApp},n.prototype.getInternalOnly=function(){return this._mConfig.internalOnly},n.prototype.getEnabled=function(){return this._mConfig.enabledLocal},n.prototype.getDescription=function(){return this._mConfig.description},n.prototype.getPath=function(){return this._mConfig.path},n.prototype.getFileName=function(){return this._mConfig.fileName},n.prototype.getModelFileName=function(){return this._mConfig.modelFileName},n.prototype.getModelRoot=function(){return this._mConfig.modelRoot},n.prototype.getAdditionalData=function(){return this._mConfig.additionalData},n.prototype.getVersion=function(){return this._mConfig.version},n.prototype.getVersionLabel=function(){return this._mConfig.versionLabel},n.prototype.getPreviewImage=function(){return this._mConfig.previewImage},n.prototype.getTemplateCustomizationImage=function(){return this._mConfig.templateCustomizationImage},n.prototype.getTemplateClass=function(){return this._mConfig.template},n.prototype.getRequiredTemplates=function(){return this._mConfig.requiredTemplates},n.prototype.getRequiredModules=function(){return this._mConfig.requiredModules},n.prototype.getRequiredModulePaths=function(){return this._mConfig.requiredModulePaths},n.prototype.getId=function(){return this._mConfig.id},n.prototype.getMetadataPath=function(){return this._mConfig.metadataPath},n.prototype.isCoreTemplate=function(){return this._mConfig.coreTemplate},n.prototype.getOrderPriority=function(){return this._mConfig.orderPriority&&this._mConfig.orderPriority<0&&(this._mConfig.orderPriority=0),this._mConfig.coreTemplate?this._mConfig.orderPriority:this._mConfig.orderPriority?this._mConfig.orderPriority+1e3:this._mConfig.orderPriority},n.prototype.getBeautifyFilesFlag=function(){return this._mConfig.beautifyFiles},n.prototype._error=function(e){n._error(this._sId,e)};var r=function(e,t){this._sId=e,this._mConfig=t};r.prototype.getId=function(){return this._mConfig.id},r.prototype.getName=function(){return this._mConfig.name},r.prototype.getDescription=function(){return this._mConfig.description},r.prototype._error=function(e){r._error(this._sId,e)},n._mTemplates={},n._mTemplatesByCategory={},n._getTemplateContext=function(e){var t=e._oProxy.context,n=e._oProxy._oImpl;return void 0===t&&null!==n&&void 0!==n&&(t=n.context),t},n.register=function(r,i,o){var a={template:null,id:null,description:null,path:null,fileName:null,previewImage:null,templateCustomizationImage:null,requiredTemplates:null,modelFileName:null,modelRoot:null,icon:null,category:null,templateType:null,supportedProjectTypes:null,name:null,requiresNeoApp:!1,internalOnly:!1,version:null,versionLabel:null,wizardSteps:null,orderPriority:null,requiredModules:null,requiredModulePaths:null,coreTemplate:!1,beautifyFiles:!0};if("string"==typeof i?a.template=i:a=jQuery.extend(this._mConfig,i),a.name||(a.name=r),a.description||(a.description=""),a.templateType||(a.templateType="project"),a.version||(a.version="0.0.0"),a.versionLabel||(a.versionLabel=""),!t.isArray(a.category)){var s=[],u="general";a.category&&(u=a.category),s.push(u),a.category=s}if(void 0===a.requiresNeoApp&&(a.requiresNeoApp=!1),void 0===a.internalOnly&&(a.internalOnly=!1),void 0===a.beautifyFiles&&(a.beautifyFiles=!0),!(a.template instanceof e))throw new Error("Template needs to be instance of Proxy");this._isVersionValid(a.version)||o.service.log.error("Template",r+" has a wrong version "+a.version+", template id should be with a semantic versioning (MAJOR.MINOR.PATCH)",["user"]).done();var c=new n(r,a,o,a.template),l=!sap.watt.getEnv("internal")&&c.getInternalOnly();return l||"local_hcproxy"===sap.watt.getEnv("server_type")&&c.getEnabled()===!1?void 0:(this._addTemplateToModel(r,c),c)},n.onBeforeTemplateGenerate=function(e){return this._getTemplate(e).onBeforeTemplateGenerate()},n.onAfterGenerate=function(e){return this._getTemplate(e).onAfterGenerate()},n._isVersionValid=function(e){if(e){var t=/^(\d+\.)+(\d+\.)+(\d+)$/;return t.test(e)?!0:!1}return!1},n._addTemplateToModel=function(e,t){this._mTemplates[e]||(this._mTemplates[e]=[]);var n=this._mTemplates[e],r=this._getTemplatePosByVersion(n,t.getVersion());r>-1&&n.splice(r,1),n.push(t),n.sort(this._sortVersions)},n._sortVersions=function(e,t){var r=n._isVersionValid(e.getVersion()),i=n._isVersionValid(t.getVersion());return!r&&i?1:!i&&r||!i&&!r?-1:e.getVersion()<t.getVersion()?1:e.getVersion()>t.getVersion()?-1:0},n._isTemplateIdExistsInCategory=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n].getId()===t.getId())return!0;return!1},n._populateAllRequiredTemplatesRecursive=function(e,t){if(-1===jQuery.inArray(e,t)&&(t.push(e),e._mConfig.requiredTemplates))for(var r=0;r<e._mConfig.requiredTemplates.length;r++){var i=n._getTemplate(e._mConfig.requiredTemplates[r]);this._populateAllRequiredTemplatesRecursive(i,t)}},n._getTemplateVersions=function(e){return this._mTemplates[e]},n._getTemplate=function(e,t){var r,i=this._mTemplates[e];if(i){if(r=i[0],t){var o=n._getTemplatePosByVersion(i,t);o>-1&&(r=i[o])}}else this._error(e,"Template not implemented");return r},n._getTemplatePosByVersion=function(e,t){for(var n=0;n<e.length;n++)if(t===e[n].getVersion())return n;return-1},n._error=function(e,t){var n=[];throw e&&n.push("Template: "+e),t&&n.push("Message: "+t),new Error(n.join(" | "))};var i="Favorite";return r._mCategories={},r.register=function(e,t,n){if(r._mCategories[e])n.service.log.error("Template",e+" Category already registered",["user"]).done();else{var i="general",o=n.i18n.getText("i18n","category_generalName"),a=n.i18n.getText("i18n","category_generalDescription");r._createCategory(i,o,a),i="Common",o=n.i18n.getText("i18n","category_commonName"),a=n.i18n.getText("i18n","category_commonDescription"),r._createCategory(i,o,a),i="Favorite",o=n.i18n.getText("i18n","category_favoritesName"),a=n.i18n.getText("i18n","category_favoritesDescription"),r._createCategory(i,o,a);var s={id:null,name:null,description:null};s=jQuery.extend(this._mConfig,t),s.id||(s.id=e),s.name||(s.name=""),s.description||(s.description="");var u=new r(e,s);r._mCategories[e]=u}},r._createCategory=function(e,t,n){if(!r._mCategories[e]){var i={id:e,name:t,description:n},o=new r(i.id,i);r._mCategories[i.id]=o}},r._getGeneralCategoryIndex=function(e){for(var t=-1,n=0,r=e.length;r>n;n++)if("general"===e[n].category.getId()){t=n;break}return t},r._getCategory=function(e){var t=r._mCategories[e];return t||this._error(e,"Category not implemented"),t},r._error=function(e,t){var n=[];throw e&&n.push("Category: "+e),t&&n.push("Message: "+t),new Error(n.join(" | "))},{configure:function(e){var t=this;jQuery.each(e.categories,function(e,n){r.register(n.id,n,t.context)}),jQuery.each(e.templates,function(e,r){n.register(r.id,r,t.context)})},_getTemplatesByCategory:function(e){var t={};for(var r in n._mTemplatesByCategory){for(var i=[],o=0,a=n._mTemplatesByCategory[r].length;a>o;o++){var s=n._mTemplatesByCategory[r][o];(void 0===e||s.getType()===e)&&i.push(s)}i.length>0&&(t[r]=i)}return t},_createTemplatesByCategoryModel:function(){if(jQuery.isEmptyObject(n._mTemplatesByCategory))for(var e in n._mTemplates)for(var t=n._mTemplates[e][0],r=t._mConfig.category,i=0;i<r.length;i++){var o=r[i];n._mTemplatesByCategory[o]||(n._mTemplatesByCategory[o]=[]);var a=n._mTemplatesByCategory[o];n._isTemplateIdExistsInCategory(a,t)||a.push(t)}},_getFavoriteTemplatesByType:function(e){var t=[],r="sap.watt.ideplatform.generationwizard.favoritesTemplates."+e;return this.context.service.preferences.get(r).then(function(e){if(e&&e.templates&&e.templates.length>0)for(var r=0;r<e.templates.length;r++){var o=n._mTemplates[e.templates[r]];if(o&&o.length>0){var a=o[0];t.push(a);var s=a._mConfig.category.indexOf(i);-1===s&&a._mConfig.category.push(i)}}return t})},getTemplatesPerCategories:function(e,t){var n=this,o=new Array,a=new Array;this._createTemplatesByCategoryModel(),void 0===t&&(t=!0);var s=n._getTemplatesByCategory(e);for(var u in s){var c=r._mCategories[u];if(void 0===c){var l=r._getGeneralCategoryIndex(o);if(-1===l)c=r._mCategories.general,a=s[u],o.push({category:c,templates:a});else{a=s[u];for(var p=0,f=a.length;f>p;p++)o[l].templates.push(a[p])}}else{a=s[u];for(var d=[],h=0,m=a.length;m>h;h++)d.push(a[h]);d.length>0&&o.push({category:c,templates:d})}}return t?this._getFavoriteTemplatesByType(e).then(function(e){var t=n.getCategoryById(i);return o.push({category:t,templates:e}),o},function(){return n.context.service.log.error("Template","Failed to get favorite templates from user preferences",["user"]).done(),o}):o},getTemplates:function(e){var t,r,i={};if(e)for(r in n._mTemplates)n._mTemplates.hasOwnProperty(r)&&(t=n._mTemplates[r][0],t.getType()===e&&(i[r]=t));else for(r in n._mTemplates)t=n._mTemplates[r][0],i[r]=t;return i},getAllRequiredTemplates:function(e){var t=[];return n._populateAllRequiredTemplatesRecursive(e,t),t},getTemplate:function(e,t){return n._getTemplate(e,t)},getTemplateVersions:function(e){return n._getTemplateVersions(e)},getCategories:function(){return this.getTemplatesPerCategories().then(function(e){var t=[];if(e)for(var n=0,i=e.length;i>n;n++){var o=e[n];o.templates.length>0&&t.push(r._mCategories[o.category._sId])}return t})},getRegisteredCategories:function(){return r._mCategories},getCategoryById:function(e){return r._getCategory(e)}}}),define("sap.watt.ideplatform.template/service/Generation",["sap/watt/lib/jszip/jszip-shim","sap/watt/lib/lodash/lodash"],function(e,t){"use strict";return{_binaryFilesExtensions:[".jpeg",".jpg",".gif",".bmp",".png"],_oTemplateService:null,_oFileService:null,_oDocumentService:null,_aBeautifiedExtentions:null,init:function(){this._oFileService=this.context.service.filesystem.documentProvider,this._oDocumentService=this.context.service.document,this._oTemplateService=this.context.service.template,this._oMockFileLoader=this.context.service.mockFileLoader,this._oModelHelper=this.context.service.modelHelper,this._oProjectTypeService=this.context.service.projectType,jQuery.sap.require("sap.ui.thirdparty.handlebars"),this._populateBeautifiedExtentions().done()},generateProject:function(e,t,n,r,i){if(!e)throw new TypeError(this.context.i18n.getText("i18n","Generation_generationInvalidPathError"));if(!t)throw new TypeError(this.context.i18n.getText("i18n","Generation_generationNoTemplateSelectedError"));var o;o=t.getTargetProjectTypes(),o||(o=t.getSupportedProjectTypes());var a=o&&o.length>0?o[0]:void 0,s=o&&o.length>1?o.slice(1):[],u=e.split("/"),c=u[u.length-1],l={};l.name=c,l.type=a,l.additionalTypes=s,l.attributes={},l.generatorDescription={options:this._getProjectOptionsFromModel(n,t.getModelRoot())};var p=this;return i?this._createProject(i,l,e,t,n,r):("/"!==e[0]&&(e="/"+e),this._oFileService.getDocument(e).then(function(i){return i?p._addProjectTypes(i,o).then(function(){try{return p.generate(e,t,n,!0,i).then(function(){return i})}catch(r){throw p._deleteGeneratedContentInAlreadyExistingfolder(i),r}}):p._oFileService.getRoot().then(function(i){return p._createProject(i,l,e,t,n,r)})},function(){return p._oFileService.getRoot().then(function(i){return p._createProject(i,l,e,t,n,r)})}))},_deleteGeneratedContentInAlreadyExistingfolder:function(e){var t=[".project.json","README.md","sap-ui-cachebuster-info.json",".git",".gitignore"];e.getFolderContent().then(function(e){if(e)for(var n=0;n<e.length;n++)-1===t.indexOf(e[n].getTitle())&&e[n].delete().done()}).done()},_addProjectTypes:function(e,t){return t?this._oProjectTypeService.addProjectTypes(e,t):Q()},_createProject:function(e,t,n,r,i,o){var a=this;return e.createProject(t).then(function(e){if(!e)throw new Error(a.context.i18n.getText("i18n","Generation_createFolderFailedError"));try{return a.generate(n,r,i,o,e).then(function(){return e})}catch(t){throw e.delete().done(),t}})},_getProjectOptionsFromModel:function(e,t){var n={};if(e&&t){var r=e[t];if(r){var i=r.parameters;for(var o in i)i.hasOwnProperty(o)&&i[o].hasOwnProperty("value")&&(n[o]=i[o].value)}}return n},generate:function(t,n,r,i,o){var a=this;if(!t)throw new TypeError(this.context.i18n.getText("i18n","Generation_generationInvalidPathError"));if(!n)throw new TypeError(this.context.i18n.getText("i18n","Generation_generationNoTemplateSelectedError"));a._registerHandlebarsHelperMethods();var s=new e;return this._oTemplateService.getAllRequiredTemplates(n).then(function(e){for(var u=[],c=0;c<e.length;c++){var l=e[c];if(l.getFileName()){var p=l.getPath()+"/"+l.getFileName();u.push(a._getZipBlobFromPlugin(l._oProxy._sName,p))}}return Q.all(u).spread(function(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];e.push(a._generateSingleZip(i,n,r))}return Q.all(e).spread(function(){for(var e=0;e<arguments.length;e++){var t=arguments[e].generate();s.load(t,{base64:!0})}var n=[];return n.push(a._generateXMLTemplateViews(s,r)),Q.all(n).fin(function(){a._oMockFileLoader.stopMock().done()})})}).then(function(){return n.getFileName()||(s=null),n.onAfterGenerate(s,r).spread(function(e,r){return e?a._beautifyZipFiles(e,n.getBeautifyFilesFlag()).then(function(e){return a._updateWorkspace(e,t,i,n,o).then(function(){return a.context.service.repositorybrowser.setSelection(o,!0).done(),a._fireGenerated(r,t,n,o)})}):a._addTemplateInfoToSettings(n,o).then(function(){return a._addProjectTypeToSettings(n,o).then(function(){return a.context.service.repositorybrowser.setSelection(o,!0).done(),a._fireGenerated(r,t,n,o)})})})})})},_fireGenerated:function(e,t,n,r){var i={};jQuery.extend(!0,i,e);var o=this;return this.context.event.fireGenerated({path:t,selectedTemplate:n,model:i,targetDocument:r}).fail(function(e){o.context.service.log.error("Generation",e.message,["user"]).done(),console.error(e)})},_beautifyZipFiles:function(e,n){if(!n)return Q(e);var r=e.files,i=[],o=[];for(var a in r)if(r.hasOwnProperty(a)){var s=null;if(!this._isDir(r[a])){s=a.split("/")[a.split("/").length-1];var u=this._getFileExtension(s),c=this;t.includes(this._aBeautifiedExtentions,u)&&(i.push(a),o.push(c.context.service.beautifierProcessor.beautify(r[a].asText(),u,null)))}}return Q.all(o).then(function(t){for(var n=t.length,r=0;n>r;r++){var o=i[r],a=t[r];e.file(o,a)}return e})},_updateWorkspace:function(e,t,n,r,i){var o=e.generate(),a=this._convertB64ToBinary(o,"application/zip"),s=this;return this._oFileService.getDocument(t).then(function(e){return e?e.importZip(a,n).then(function(){return s._addTemplateInfoToSettings(r,i).then(function(){return s._addProjectTypeToSettings(r,i)})}):void 0})},_generateSingleZip:function(t,n,r){var i=this,o=Q.defer();if(t){var a=new FileReader;a.onload=function(t){var a=new e(t.target.result);n.onBeforeTemplateGenerate(a,r).spread(function(e,t){t.selectedTemplate&&(i._registerModulePath(t),i._requiredModules(t)),i._generateZipWithModel(i,e,o,t)}).fail(function(e){o.reject(e)})},a.readAsArrayBuffer(t)}else o.reject();return o.promise},_registerModulePath:function(e){var t=e.selectedTemplate.getRequiredModulePaths();if(t)for(var n=new sap.ui.model.json.JSONModel(e),r=0;r<t.length;r++){var i=t[r].moduleName,o=t[r].path;jQuery.sap.registerModulePath(this._replaceWithValueFromModel(i,n),this._replaceWithValueFromModel(o,n))}},_replaceWithValueFromModel:function(e,t){var n=e.indexOf("{"),r=e.indexOf("}");if(-1!==n&&r>n){var i=e.substring(n+1,r),o="/"+i.replace(/\./g,"/"),a=t.getProperty(o);return e.replace("{"+i+"}",a)}return e},_requiredModules:function(e){var t=e.selectedTemplate.getRequiredModules();if(t)for(var n=0;n<t.length;n++)jQuery.sap.require(t[n])},_generateZipWithModel:function(t,n,r,i){var o=new e,a=".tmpl";for(var s in n.files){var u=n.files[s].name;if(-1!==u.indexOf("/",u.length-1))o.folder(u);else if(-1===u.indexOf(a,u.length-a.length))if(t._isBinary(u)){var c=btoa(n.files[s].asBinary());o.file(u,c,{base64:!0})}else o.file(u,n.files[s].asText());else{var l=u.split(a)[0],p=Handlebars.compile(n.files[s].asText()),f=p(i);o.file(l,f)}}r.resolve(o)},_preProcessFiles:function(e,t,n){var r=jQuery.sap.parseXML(t.asText()),i={caller:"Generation Service",sync:!0};sap.ui.core.util.XMLPreprocessor.process(r.documentElement,i,n);var o=jQuery.sap.serializeXML(r);e.file(t.name,o)},_generateXMLTemplateViews:function(e,t){var n=this,r=[];if(t.smartTemplates){jQuery.sap.require("sap.ui.model.odata.AnnotationHelper"),jQuery.sap.require("sap.ui.core.util.XMLPreprocessor");var i={},o={};if(!t.smartTemplates[0].componentName)return this._oMockFileLoader.mockXMLFromZipFile(e).then(function(){for(var a=0;a<t.smartTemplates.length;a++){var s=t.smartTemplates[a];if(s.preprocess){var u=s.viewPath;s.bindings&&u?r.push(n._createPreprocessorsDataForView(t,s,i,o)):n.context.service.log.error("Wrong definition for smartTemplates found in model")}}return Q.all(r).then(function(){if(!jQuery.isEmptyObject(i)||!jQuery.isEmptyObject(o)){0===u.indexOf("/")&&(u=u.substring(1,u.length));var t=e.files[u];if(t){var r={bindingContexts:i,models:o};n._preProcessFiles(e,t,r)}}})});if(t.settingsModel)for(var a=e.file(/xml$/g),s=0;s<a.length;s++)n._preProcessFiles(e,a[s],t.settingsModel)}},_createPreprocessorsDataForView:function(e,t,n,r){for(var i=e.metaModel,o=[],a=[],s=this,u=0;u<t.bindings.length;u++){var c=t.bindings[u];if(c.name)if(c.metadataElementForBindingContext&&i)o.push(this._oModelHelper.getBindingContext(c.metadataElementForBindingContext,i)),a.push(c);else{var l=c.bindingContext;this._createObjectsForSettingsModel(l,c,n,r,i)}else this.context.service.log.error("Wrong definition of biniding name")}return Q.all(o).then(function(e){for(var t=0;t<e.length;t++)s._createObjectsForSettingsModel(e[t],a[t],n,r,i)})},_createObjectsForSettingsModel:function(e,t,n,r,i){if(e)if(t.dataSourceModel){var o=new sap.ui.model.json.JSONModel;o.setData(t.dataSourceModel.toJSONRec()),n[t.name]=o.createBindingContext(e),r[t.name]=o}else if(i){var a=i.createBindingContext(e);n[t.name]=a,r[t.name]=i}else this.context.service.log.error("no definition of dataSourceModel or failed to load metaModel");else this.context.service.log.error("no definition of 'bindingContext' or 'metadataElementForBindingContext' found in model")},_registerHandlebarsHelperMethods:function(){Handlebars.registerHelper("addCurlyBrackets",function(e){return"{"+e.fn(this)+"}"})},_isBinary:function(e){var t=!1;return this._binaryFilesExtensions.forEach(function(n){-1!=e.toLowerCase().indexOf(n)&&(t=!0)}),t},_convertB64ToBinary:function(e,t,n){function r(e){return e.charCodeAt(0)}t=t||"",n=n||1024;for(var i=atob(e),o=[],a=0;a<i.length;a+=n){var s=i.slice(a,a+n),u=Array.prototype.map.call(s,r),c=new Uint8Array(u);o.push(c)}var l=new Blob(o,{type:t});return l},_addTemplateInfoToSettings:function(e,n){var r=this.context.service.setting.project,i=this.context.self;return r.get(this.context.service.generation,n).then(function(o){var a=new Array;o&&("[object Array]"===Object.prototype.toString.call(o)?a=o:a.push(o));var s=t.find(o,function(t){return t.templateId===e.getId()});s||(s={},a.push(s));var u=new Date;return s.templateId=e.getId(),s.templateVersion=e.getVersion(),s.dateTimeStamp=u.toUTCString(),r.set(i,a,n)})},_addProjectTypeToSettings:function(){return Q()},_getZipBlobFromPlugin:function(e,t){var n=this,r=null,i=e,o=e.indexOf("/");o>-1&&(i=i.substring(0,o));var a=t.substring(t.indexOf("/"));if(r=require.toUrl(i+a),!r)throw new Error(n.context.i18n.getText("i18n","pluginManagement_PluginNotFound",[i]));return Q.sap.ajax(r,{responseType:"blob"}).then(function(e){return e&&e.length>0?e[0]:void 0}).fail(function(){throw new Error(n.context.i18n.getText("i18n","pluginManagement_ResourceNotFound",[t,i]))})},_isDir:function(e){var n=t.endsWith(e.name,"/");return e.options.dir||n?!0:!1},_getFileExtension:function(e){var t="",n=e.lastIndexOf(".");return n>0&&(t=e.substr(n+1)),t.toLowerCase()},_populateBeautifiedExtentions:function(){var e=this;return this.context.service.beautifierProcessor.getBeautifiedExtentions().then(function(t){e._aBeautifiedExtentions=t})}}}),define("sap.watt.ideplatform.template/service/MockFileLoader",{init:function(){jQuery.sap.require("sap.ui.core.util.MockServer")},mockFromZipFile:function(e,t){this._createMockServer(e,null,t)},mockXMLFromZipFile:function(e){this._createMockServer(".+\\.xml$",null,e)},mockFile:function(e,t){var n=new RegExp(sap.ui.core.util.MockServer.prototype._escapeStringForRegExp(e));this._createMockServer(n,t)},_createMockServer:function(e,t,n){var r=this;this._oMockServer=new sap.ui.core.util.MockServer({requests:[{method:"GET",path:new RegExp(e),response:function(e){n&&(t=r._getXMLContentFromZipFile(e,n)),e.respond(200,{"Content-Type":"application/xml;charset=utf-8"},t)}}]}),this._oMockServer.start()},_getXMLContentFromZipFile:function(e,t){var n=e.url.search("/~.+~/"),r=e.url.indexOf("/",n+1),i=e.url.substring(r+1);
try{return t.file(i).asText()}catch(o){return null}},stopMock:function(){this._oMockServer&&(this._oMockServer.stop(),this._oMockServer.destroy()),sap.ui.core.util.MockServer.destroyAll()}}),define("sap.watt.ideplatform.template/service/ModelHelper",[],function(){return{getBindingContext:function(e,t){return"string"==typeof e?this._getBindingContextForEntityType(e,t):e.multiplicity?this._getBindingContextForNavigation(e.parent().entityType,e.name,t):e.parent().elements?this._getBindingContextForProperty(e.parent().entityType,e.name,t):e.parent().entities?this._getBindingContextForEntitySet(e.name,t):void 0},_getBindingContextForEntityType:function(e,t){for(var n=t.getObject("/dataServices/schema"),r=0;r<n.length;r++)for(var i=n[r].namespace+".",o="/dataServices/schema/"+r+"/entityType",a=t.getObject(o),s=0;s<a.length;s++)if(a[s].name===e||i+a[s].name===e)return o+"/"+s},_getBindingContextForEntitySet:function(e,t){for(var n=t.getObject("/dataServices/schema"),r=0;r<n.length;r++)for(var i="/dataServices/schema/"+r+"/entityContainer",o=t.getObject(i),a=0;a<o.length;a++)for(var s="/dataServices/schema/"+r+"/entityContainer/"+a+"/entitySet",u=t.getObject(s),c=0;c<u.length;c++)if(u[c].name===e)return s+"/"+c},_getBindingContextForProperty:function(e,t,n){var r=this._getBindingContextForEntityType(e,n);if(r)for(var i=r+"/property",o=n.getObject(i),a=0;a<o.length;a++)if(o[a].name===t)return i+"/"+a},_getBindingContextForNavigation:function(e,t,n){var r=this._getBindingContextForEntityType(e,n);if(r)for(var i=r+"/navigationProperty",o=n.getObject(i),a=0;a<o.length;a++)if(o[a].name===t)return i+"/"+a}}}),define("sap.watt.ideplatform.template/service/Neoapp",["sap/watt/lib/lodash/lodash"],function(e){return{NEO_APP_FILE_NAME:"neo-app.json",_oFile:null,_oNeoappDocument:null,_mSettings:null,_createFilePromise:Q(),_saveContentPromise:Q(),init:function(){this._oFile=this.context.service.filesystem.documentProvider},getAppllications:function(t){var n=this,r=[];return n._getProject(t).then(function(t){return n._oFile.getDocument(n._getPath(t,"neo-app.json")).then(function(t){return n._getNeoappContent(t).then(function(t){var n=t.routes;for(var i in n)if(void 0!==n[i].target&&n[i].path.match("/resources")&&"application"===n[i].target.type){var o={name:n[i].target.name};void 0!==n[i].target.version&&(o.version=n[i].target.version),r.push(o)}return e.uniq(r,"name")})})})},addDestination:function(e,t,n,r,i){var o=this;return this.getNeoappDocumentAndContent(r).spread(function(r,a){var s={path:e,target:t,description:n};return i?o._addOrOverrideDestination(a,s):a.routes.push(s),o._saveContentPromise=o._saveContentPromise.then(function(){return o._saveSettings(r,a)}),o._saveContentPromise})},_addCacheControl:function(e,t,n,r,i){var o=this,a=t.cacheControl,s={directive:n,maxAge:r};return i&&(s.path=i),a||(a=[]),a.push(s),t.cacheControl=a,o._saveSettings(e,t)},addCacheControls:function(e,t,n){var r=this;return e?this.getNeoappDocumentAndContent(t).spread(function(t,i){return n||!i.cacheControl?n===!0?(i.cacheControl=e,r._saveSettings(t,i)):r._addCacheControls(e,t,i).then(function(){return r._saveSettings(t,i)}):void 0}):void 0},addDestinations:function(e,t){var n=this;return this.getNeoappDocumentAndContent(t).spread(function(t,r){return n._addDestinations(e,r),n._saveContentPromise=n._saveContentPromise.then(function(){return n._saveSettings(t,r)}),n._saveContentPromise})},_addHeaderWhiteList:function(e,t){if(e&&e.length>0){t.headerWhiteList=[];for(var n=0;n<e.length;n++)t.headerWhiteList.push(e[n])}},addNeoapp:function(e,t){var n=this;return this.getNeoappDocumentAndContent(t).spread(function(t,r){return n._addDestinations(e.destinations,r),n._addHeaderWhiteList(e.headerWhiteList,r),e.welcomeFile&&r&&(r.welcomeFile=e.welcomeFile),e.sendWelcomeFileRedirect&&r&&(r.sendWelcomeFileRedirect=e.sendWelcomeFileRedirect),e.authenticationMethod&&(r.authenticationMethod=e.authenticationMethod),n._saveContentPromise=n._saveContentPromise.then(function(){return n._saveSettings(t,r)}),n._saveContentPromise})},_addDestinations:function(e,t){var n=!1,r=!1;if(e)for(var i=0;i<e.length;i++){var o=e[i].path;"/resources"===o?n=!0:"/test-resources"===o&&(r=!0),this._addOrOverrideDestination(t,e[i])}n||this._isPathExist(t,"/resources")||t.routes.push(this._getResourceMapping()),r||this._isPathExist(t,"/test-resources")||t.routes.push(this._getTestResourceMapping())},_addCacheControls:function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(this._addCacheControl(t,n,e[i].directive,e[i].maxAge,e[i].path));return Q.allSettled(r)},_writeNeoappContent:function(){var e=this;return this._getNeoappDocument().then(function(t){return e._saveSettings(t,e._mSettings)})},_getResourceMapping:function(){return sap.watt.getEnv("ui5dist")?{path:"/resources",target:{type:"destination",name:"ui5dist"},description:"SAPUI5 Resources"}:{path:"/resources",target:{type:"service",name:"sapui5",entryPath:"/resources"},description:"SAPUI5 Resources"}},_getTestResourceMapping:function(){return sap.watt.getEnv("ui5dist")?{path:"/test-resources",target:{type:"destination",name:"ui5dist-test-resources"},description:"SAPUI5 Test Resources"}:{path:"/test-resources",target:{type:"service",name:"sapui5",entryPath:"/test-resources"},description:"SAPUI5 Test Resources"}},_getNeoappContent:function(e){return e.getContent().then(function(e){if(""===e)return{welcomeFile:"index.html",routes:[]};var t=JSON.parse(e);return t.routes||(t.routes=[]),t})},_isProject:function(e){return""===e.getEntity().getParentPath()},_getPath:function(e,t){return e.getEntity().getFullPath()+"/"+t},_getParent:function(e){return this._oFile.getDocument(e.getEntity().getParentPath()).then(function(e){return e})},_getProject:function(e){var t=this;return this._isProject(e)?Q(e):t._getParent(e).then(function(e){return t._getProject(e)})},getDestinations:function(e){var t=this;return this._getNeoappDocument(e).then(function(e){return[e,t._getNeoappContent(e)]})},getNeoappDocumentAndContent:function(e){var t=this;return this._getNeoappDocument(e).then(function(e){return[e,t._getNeoappContent(e)]})},_getNeoappDocument:function(e){var t=this;if(!e)throw new Error(this.context.i18n.getText("i18n","Neoapp_neoappGenerationFailedError"));return this._getProject(e).then(function(e){return t._findDocumentOrCreate(e,t.NEO_APP_FILE_NAME).then(function(e){return e})})},_findDocumentOrCreate:function(e,t){var n=this;return this._createFilePromise=this._createFilePromise.then(function(){return e.objectExists(t).then(function(r){return r?n._oFile.getDocument(n._getPath(e,t)):e.createFile(t)})}),this._createFilePromise},_saveSettings:function(e,t){return e.setContent(JSON.stringify(t,void 0,2)).then(function(){return e.save()})},onAfterGeneration:function(e){e.params.selectedTemplate.getRequiresNeoApp()&&(e.params.model.neoapp?this.addNeoapp(e.params.model.neoapp,e.params.targetDocument).done():this.addDestinations(e.params.model.destinations,e.params.targetDocument).done())},_isPathExist:function(e,t){if(e)for(var n=e.routes,r=0;r<n.length;r++)if(n[r].path===t)return!0;return!1},_addOrOverrideDestination:function(e,t){if(e){for(var n=e.routes,r=0;r<n.length;r++)if(n[r].path===t.path)return n[r]=t,void 0;n.push(t)}}}}),define("sap.watt.ideplatform.template/service/Wizard",{configure:function(e){return e.styles?this.context.service.resource.includeStyles(e.styles):void 0},createWizard:function(e,t,n,r,i,o,a,s){jQuery.sap.require("sap.watt.ideplatform.plugin.template.ui.wizard.WizardControl");var u,c,l=null;i&&("string"==typeof i||i instanceof String?u=i:(u=i.summaryText,c=i.finishStepContent)),u||(u="");var p={context:this.context,title:t,summary:u,description:n,steps:r,openButtonVisible:!1,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})};l=e?new sap.watt.ideplatform.plugin.template.ui.wizard.WizardControl(e,p):new sap.watt.ideplatform.plugin.template.ui.wizard.WizardControl(p),l.addStyleClass("wizardBody"),c&&l.setFinishStepContent(c),l.setFinishHandler(o),a&&l.setAfterCloseHandler(a),s&&l.setExitMessage(s);var f=new sap.ui.model.json.JSONModel;return f.setData({}),l.setModel(f),l},createWizardStep:function(e,t,n){e.setLayoutData(new sap.ui.layout.GridData({span:"L12 M12 S12"})),jQuery.sap.require("sap.watt.ideplatform.plugin.template.ui.wizard.WizardStep");var r=new sap.watt.ideplatform.plugin.template.ui.wizard.WizardStep({title:t,description:n,stepContent:e,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})});return r},getWizardStep:function(e,t,n){return this.createWizardStep(e,t,n)}}),define("sap.watt.ideplatform.basevalidator/util/WorkerHelper",[],function(){"use strict";var e,t,n,r,i,o=[],a=[],s=!1,u=new Q.sap.Queue,c={init:function(i,o,a){var s=this;return u.next(function(){return t?new Q:(e=Q.defer(),t=new Worker(i),n=o,r=a,t.onmessage=s._onMessage,t.onerror=s._onError,e.promise)})},_onMessage:function(r){if("ready"===r.data.action)e.resolve();else{if(!t)throw new Error("make sure the worker is not terminated");s=c.callPostMessage(),n(r)}},_onError:function(e){if(!t)throw new Error("make sure the worker is not terminated");s=c.callPostMessage();var n=JSON.parse(i)||{};e.data=n.context||{},e.data.validatedContent=n.context.oDocContent||{},r(e)},doOperation:function(e,n){if(!t)throw new Error("make sure the worker is not terminated");var r={action:e,context:n},i=JSON.stringify(r,function(e,t){return t instanceof Function||"function"==typeof t?t.toString():t});a[n.docFullPath]||o.push(n.docFullPath),a[n.docFullPath]=i,s||(s=!0,c.callPostMessage())},callPostMessage:function(){var e=o.shift(),n=a[e];return n&&(i=n,t.postMessage(n),delete a[e]),o.length>0},terminateWorker:function(){t&&(t.terminate(),t=void 0)}};return function(e,t,n,r){return this.init(t,n,r).then(function(){return{doOperation:this.doOperation,terminateWorker:this.terminateWorker}}.bind(this))}.bind(c)}),define("sap.watt.ideplatform.basevalidator/util/RulesManager",["sap/watt/lib/lodash/lodash"],function(e){var t="Invalid initialization of RulesManager",n=function(n,i,o){var a,s,u,c,l,p,f,d="linter",h=null,m=function(t,n){var r=n.validators,i=e.find(r,function(e){return e.validatorID===t});return i||(i={validatorID:t},r.push(i)),i},g=function(t){var n=e.cloneDeep(t||{},!0);return n.validators=n.validators||[],n.services=n.services||{},n},v=function(){return Q.all([r._getProjectService(n),n.service.document.getDocumentByPath(o)]).spread(function(e,t){return e.getProjectSettings(d,t)}).fail(function(){n.service.log.warn(n.service.basevalidator.getProxyMetadata().getName(),"could not find project settings",["user"]).done()})},y=function(){return Q.all([v(),n.service.document.getDocumentByPath(o),r._getProjectService(n)]).spread(function(e,t,r){return r.get(n.service.basevalidator,t).then(function(t){var n=g(t),r=e&&e.ESLintNewApproach;return"jsValidator"===h&&r&&i.getUpdatedConfiguration?i.getUpdatedConfiguration(e.ESLintCustomBaseFile,e.ESLintRulesDirectory).then(function(t){var r=!1;for(validator in n.validators)if("jsValidator"===validator.validatorID){r=!0,validator.configuration=t,validator.customRulesPath=e.ESLintRulesDirectory;break}return r||n.validators.push({validatorID:h,configuration:t,customRulesPath:e.ESLintRulesDirectory}),n}):n})})},_=function(e){var t={};return e&&(t=m(h,e)),t};this._getDefaultConfiguration=function(e){return i.getRTDefaultConfiguration(e)},this._getAndCacheRTDefaultConfiguration=function(t){return t?c===t&&u?Q(e.cloneDeep(u)):this._getDefaultConfiguration(t).then(function(n){return c=t,u=n||{},e.cloneDeep(u)}):s?Q(e.cloneDeep(s)):this._getDefaultConfiguration().then(function(t){return s=t||{},e.cloneDeep(s)})},this._getDTDefaultConfiguration=function(e){return i.getDefaultConfiguration(e)},this._getAndCacheDTDefaultConfiguration=function(t){return t?f===t&&p?Q(e.cloneDeep(p)):this._getDTDefaultConfiguration(t).then(function(n){return f=t,p=n||{},e.cloneDeep(p)}):l?Q(e.cloneDeep(l)):this._getDTDefaultConfiguration().then(function(t){return l=t||{},e.cloneDeep(l)})},this._init=function(){return i&&n&&o?i.getCurentValidatorServiceIdentifier().then(function(e){return e?(h=e,Q.all([y()]).spread(function(e){a=_(e)})):Q.reject(new Error(t))}):Q.reject(new Error(t))},this.getRulesForAnnotations=function(e){return this._getAndCacheRTDefaultConfiguration(a.customRulesPath).then(function(t){return i.getConfiguration(e,t,a.configuration)})},this.getCustomRulesPath=function(){return Q(a.customRulesPath)},this._reduceCustomRules=function(t,n){return e.omit(t,function(t,r){return!e.has(n,r)})},this.getUpdatedRules=function(e,t){var n=this;return this._getAndCacheDTDefaultConfiguration().then(function(r){return i.convertConfigurationToDisplayFormat(r).then(function(r){var o=r||{},a=n._reduceCustomRules(t,o.rules);return Q.all([n._getAndCacheDTDefaultConfiguration(e),i.convertConfigurationToConcreteFormat({rules:a})]).spread(function(e,t){return i.mergeConfigurations(e,t).then(function(e){return i.convertConfigurationToDisplayFormat(e).then(function(e){return e.rules})})})})})},this.getValidatorConfigurationForDisplay=function(t){var n=e.cloneDeep(a),r=t?void 0:n.customRulesPath;return this._getAndCacheDTDefaultConfiguration(r).then(function(e){return Q(!t&&n.configuration?i.mergeConfigurations(e,n.configuration):e).then(function(e){return Q.all([y(),i.convertConfigurationToDisplayFormat(e)]).spread(function(e,t){return{configuration:t||{},customRulesPath:r,services:e.services||{}}})})})},this._getValidatorConfigurationToSave=function(t,n){return i.hasDTService()?Q.all([i.convertConfigurationToConcreteFormat(t.configuration),this._getAndCacheDTDefaultConfiguration(t.customRulesPath)]).spread(function(e,t){return i.getDiffConfigurationToStore(t,n.configuration||{},e).then(function(e){return e})}):Q(e.cloneDeep(n.configuration))},this.saveValidatorConfiguration=function(t){var i=this;return y().then(function(o){var s=m(h,o);return i._getValidatorConfigurationToSave(t,s).then(function(i){return s.configuration=i,s.customRulesPath=t.customRulesPath,a=s,o.services=e.merge(e.cloneDeep(o.services),t.services),r._getProjectService(n).set(n.service.basevalidator,o).then(function(){return o})})})}},r=function(){};return r._rulesManagerCache={},r._oServiceQueue=new Q.sap.Queue,r.get=function(e,n,i){return r._oServiceQueue.next(function(){return n&&e?Q.all([n.getCurentValidatorServiceIdentifier()]).spread(function(o){return o&&i?r._rulesManagerCache[o]&&r._rulesManagerCache[o][i]?r._rulesManagerCache[o][i]:r._createInstance(e,n,i).then(function(e){return r._rulesManagerCache[o]=r._rulesManagerCache[o]||{},r._rulesManagerCache[o][i]=e,e}):Q.reject(new Error(t))}):Q.reject(new Error(t))})},r._createInstance=function(e,t,r){var i=new n(e,t,r);return i._init().then(function(){return i})},r._getProjectService=function(e){return e.service.setting.project},r}),define("sap.watt.ideplatform.basevalidator/util/AnnotationsHelper",[],function(){var e={_enableInlineLinting:!0,SORT_CRITERIA:{error:1,warning:2,info:3},setInlineLinting:function(e){this._enableInlineLinting=e},updateAnnotations:function(e,t,n,r){var i=this;if(!(r&&r.editor&&r.document&&n))return Q();if(n.issues&&n.root){var o;n.root.severity||(o=""),"error"===n.root.severity&&(o="error"),"warning"===n.root.severity&&(o="warning"),e.setTabIcon(o,r.document).done()}return this.isValidationForContent(e,r.document,t).then(function(e){return e?r.editor.clearAnnotations().then(function(){if(n.issues){var e=i._createAnnotations(n.issues);return r.editor.setAnnotations(e,i._enableInlineLinting)}}):void 0})},isValidationForContent:function(e,t,n){return e.getCurrentDocument().then(function(e){return t===e?e.getContent().then(function(e){return e===n}):!1})},_createAnnotations:function(e){var t,n,r,i=[],o=e.length;for(e=this._sortIssues(e),t=0;o>t;t++){n=e[t];var a=n.checker||"",s=void 0!==n.ruleId?"("+n.ruleId+") ":"",u=a+s+": "+n.message;r={row:n.line-1,column:n.column-1,text:n.severity+": "+n.category+": "+u,ruleId:n.ruleId,type:n.severity,help:n.helpUrl,source:n.source,checker:n.checker,category:n.category,path:n.path},i.push(r)}return i},_sortIssues:function(e){var t=this;try{e=e.sort(function(e,n){var r=t.SORT_CRITERIA[e.severity],i=t.SORT_CRITERIA[n.severity];return i>r?-1:r>i?1:0})}catch(n){throw new Error("can not sort the annotations: "+n.message)}return e}};return e}),define("sap.watt.ideplatform.basevalidator/util/DelayedValidation",[],function(){var e=300,t=function(e){this.oContext=e,this._validationCycleTimeoutKeys={}};return t.prototype.runDelayedValidation=function(t,n,r,i,o){var a=this,s=window.setTimeout($.proxy(function(e){i.call(o,t,e,r).done(),a._setValidationCycleTimeout(e,null)},a,n),e);this._setValidationCycleTimeout(n,s)},t.prototype._setValidationCycleTimeout=function(e,t){var n=e.getEntity().getFullPath();this._validationCycleTimeoutKeys[n]=t},t.prototype.clearValidationCycleTimeout=function(e){var t=e.getEntity().getFullPath(),n=this._validationCycleTimeoutKeys[t];window.clearTimeout(n),this._setValidationCycleTimeout(e,null)},t}),define("sap.watt.ideplatform.basevalidator/service/BaseValidator",["../util/WorkerHelper","../util/RulesManager","../util/AnnotationsHelper","sap/watt/lib/lodash/lodash","../util/DelayedValidation"],function(t,n,r,i,o){"use strict";var a,s={},u=r,c="sap.watt.common.plugin.aceeditor.service.Editor",l="worker",p="sync",f=null;return{_sServices:"services",init:function(){f=new o(this.context)},configure:function(e){function t(e,t){if(void 0===!t.service&&(""===t.fileExtension||void 0===t.fileExtension))return null;var n={hasDTService:function(){return void 0!==t.displayConfigurationService},getDefaultConfiguration:function(e){return t.displayConfigurationService?t.displayConfigurationService.getDefaultConfiguration(e):Q()},convertConfigurationToDisplayFormat:function(e){return t.displayConfigurationService?t.displayConfigurationService.convertConfigurationToDisplayFormat(e):Q()},convertConfigurationToConcreteFormat:function(e){return t.displayConfigurationService?t.displayConfigurationService.convertConfigurationToConcreteFormat(e):Q()},mergeConfigurations:function(e,n){return t.displayConfigurationService?t.displayConfigurationService.mergeConfigurations(e,n):Q()},getDiffConfigurationToStore:function(e,n,r){return t.displayConfigurationService?t.displayConfigurationService.getDiffConfigurationToStore(e,n,r):Q()},getCurentValidatorServiceIdentifier:function(){return t.service?Q(t.service._sName):Q()},getConfiguration:function(e,n,r){return t.service?t.service.getConfiguration(e,n,r):Q()},postValidate:function(e){return t.service?t.service.postValidate(e):Q()},getRTDefaultConfiguration:function(e){return t.service?t.service.getDefaultConfiguration(e):Q()},getUpdatedConfiguration:function(e,n){return t.displayConfigurationService?t.displayConfigurationService.getUpdatedConfiguration(e,n):Q()}};return n}if(e.maxLineLength&&(this._maxLineLength=e.maxLineLength),e.validator)for(var n=0;n<e.validator.length;n++){var r,i={displayName:e.validator[n].validatorName,syncExec:e.validator[n].syncExec,service:e.validator[n].service,displayConfigurationService:e.validator[n].displayConfigurationService,serviceID:e.validator[n].service._sName},o=t(this.context,i);i.serviceProxy=o;for(var a=0;a<e.validator[n].fileExtension.length;a++)r=s[e.validator[n].fileExtension[a]],r||(r=[],s[e.validator[n].fileExtension[a]]=r),r.push(i)}},_getValidatorServiceById:function(e){if(!e)return Q.reject(new Error("validator service undefined"));for(var t in s)if(s.hasOwnProperty(t))for(var n=0;n<s[t].length;n++)if(s[t][n].serviceID===e)return s[t][n];return this._getEmptyValidator()},_getEmptyValidator:function(){return{service:void 0,displayConfigurationService:void 0,fileExtension:"",projectDocument:void 0,syncExec:!1}},validate:function(e){var t=this;return this._sortDocumentsByValidator(e).then(function(e){i.forEach(e,function(e,n){var r=t._getValidatorServiceById(n);r&&r.validate(e).then(function(e){if(e&&e.length){var n=[];i.forEach(e,function(e){var r=t._getFullPath(e.document),i={document:r,result:e.result};n.push(i)}),t._fireIssuesOnSingleFileUpdate(n)}}).done()})})},_sortDocumentsByValidator:function(e){var t={};return this._handleArrayOfDocumentsToValidation(t,e).then(function(){return t})},_handleArrayOfDocumentsToValidation:function(e,t){var n=[],r=this;return i.each(t,function(t){n.push(r._handleMultipleValidation(e,t))}),Q.all(n)},_handleMultipleValidation:function(e,t){var n=t.getEntity().getType(),r=this;return"file"===n?this._handleSingleFileValidation(e,t):t.getFolderContent().then(function(t){return r._handleArrayOfDocumentsToValidation(e,t)})},_handleSingleFileValidation:function(e,t){var n=t.getEntity().getFileExtension();return this._getValidatorServiceForExtension(n,t).then(function(n){if(n){var r=n.serviceID,i=e[r];i||(e[r]=[]),e[r].push(t)}})},_getDefaultValidator:function(e){var t=this._getAllValidators(e);return i.isArray(t)&&t.length>0?t[0]:void 0},_getAllValidators:function(e){var t=this._getLangConfiguredServices(),n=e.getEntity().getFileExtension();return t[n]},_getCurrentProjectValidatorSetting:function(e){return this.context.service.setting.project.get(this.context.self,e)},getProjectValidationConfiguration:function(e){return this.context.service.setting.project.get(this.context.self).then(function(t){if(t)for(var n=0;n<t.length;n++)if(t[n].validatorID===e)return t[n];return{}})},getValidatorsList:function(e,t){return this._getCurrentProjectValidatorSetting(t).then(function(t){var n={};t&&t.services&&(n=t.services);var r=n[e],i=[];if(e&&s[e])for(var o=s[e],a=0;a<o.length;a++){var u=o[a],c=u.serviceID,l={displayName:u.displayName,serviceID:c};c===r?i.unshift(l):"fioriJsValidator"===l.serviceID||"fioriXmlAnalysis"===l.serviceID?sap.watt.getEnv("internal")&&i.push(l):i.push(l)}return i})},getRulesConfigurationTemplate:function(){return{eslintConfig:{rules:{}},rulesExt:{}}},getCurrentValidatorServiceProxyById:function(e){var t=this;if(!e)return null;var n=t._getValidatorServiceById(e);if(!n||!n.service||!n.serviceProxy)return null;var r=n.serviceProxy;return r},getCurrentValidatorServiceProxyByExtension:function(e,t){var n=this;return n._getValidatorServiceForExtension(e,t).then(function(e){return e&&e.service&&e.serviceProxy?e.serviceProxy:null})},_validateContext:function(e,t,n,r,i,o){var a={serviceId:e,docFullPath:t,oDocContent:n,mergedProjectConfiguration:r,currentServicePath:i,oCustomRules:o};return a},_getValidatorServiceForDocument:function(e){var t=this,n=e.getEntity().getFileExtension();return t._getValidatorServiceForExtension(n,e)},_getValidatorServiceForExtension:function(e,t){var n=this,r=s[e];return r?n._getCurrentProjectValidatorSetting(t).then(function(t){if(!(t&&t[n._sServices]&&t[n._sServices][e]))return n._getValidatorServiceById(r[0].serviceID);for(var i=0;i<r.length;i++)if(r[i].serviceID===t[n._sServices][e])return n._getValidatorServiceById(r[i].serviceID)},function(){return n._getValidatorServiceById(r[0].serviceID)}):Q()},onSelectionChanged:function(e){var t=this,n=t._getSelectedDocument(e.params.selection);if(!n)return Q();var r=n.getEntity().getType();if("file"===r){var i=e.params.owner;return i.instanceOf(c)?(t._EditorInstance=i,Q.all([this._getCurrentLintingSettings(),t._getValidatorServiceForDocument(n)]).spread(function(e,r){return t._validateAFile(r,n,e)})):Q()}},_validateAFile:function(e,t,r){var i=this;return e&&e.service&&e.serviceProxy?i._getProject(t).then(function(o){if(!o)return Q();var a=i._getFullPath(o),s=e.serviceProxy;return n.get(i.context,s,a).then(function(n){return n.getRulesForAnnotations(r.filterLevel.value).then(function(r){return i._validate(e,n,t,r)}).fail(function(e){return i.context.service.log.warn("Code Chek failed for file "+i._getFullPath(t),e.message,["user"]).done(),Q()})})}):Q()},onDocumentSaved:function(e){var t=this,n=e.params.document;return Q.all([this._getCurrentLintingSettings(),t._getValidatorServiceForDocument(n)]).spread(function(r,i){return r&&"onSave"===r.trigger&&e&&e.params&&e.params.document?t._documentHandler(i,n,r):void 0})},_getValidationMode:function(e,t){var n=e.getEntity().getFileExtension().toLowerCase();return"js"===n||t&&t.syncExec===!1?l:p},onDocumentChanged:function(e){var t=this,n=e.params.document;return n&&"content"===e.params.changeType?t._getCurrentDocumentInContent().then(function(e){return n===e?Q.spread([t._getCurrentLintingSettings(),t._getValidatorServiceForDocument(n)],function(n,r){r&&"onChange"===n.trigger&&(t._getValidationMode(e,r)===p?(f.clearValidationCycleTimeout(e),f.runDelayedValidation(r,e,n,t._documentHandler,t)):t._documentHandler(r,e,n).done())}):void 0}):void 0},validatorConfigurationsChangeHandler:function(e){var t=this;return t.context.service.document.getDocumentByPath(e).then(function(e){return Q.all([t._getCurrentLintingSettings(),t._getValidatorServiceForDocument(e)]).spread(function(n,r){return t._documentHandler(r,e,n)})})},getIssuesWrappedForProblems:function(e,t){var n=[];return t?n.push({document:t,result:e}):i.forEach(e,function(e,t){t&&e.issues&&n.push({document:t,result:e})}),n},getProjectsValidatorsConfiguration:function(){var e=[],t=this;for(var n in s)s.hasOwnProperty(n)&&e.push(n);return e.length?this.context.service.filesystem.documentProvider.getRoot().then(function(n){return n.getFolderContent().then(function(n){var r=[];return t._buildPromisesArrForProjectValidatorsStruct(n,e,r).then(function(){return Q.all(r).then(function(n){var r={};return t._getProjectsInfo(e).then(function(e){var t={};return i.forEach(n,function(e){r[e.projectPath]=r[e.projectPath]||{},r[e.projectPath][e.fileExtention]=r[e.projectPath][e.fileExtention]||[],r[e.projectPath][e.fileExtention].push(e)}),t=i.merge(e,r)})})})})}):void 0},_getProjectsInfo:function(e){var t=this,n={};return this.context.service.filesystem.documentProvider.getRoot().then(function(r){return r.getFolderContent().then(function(r){return r?t._getProjectsSection(r).then(function(o){return t._getValidatorsSection(r,e).then(function(e){var t="/.";return n[t]=i.merge(o,e),n})}):void 0})})},_getProjectsSection:function(e){var t=this,n={projects:{}},r=[];return i.forEach(e,function(e){r.push(t._getProjectTypes(e))}),Q.all(r).then(function(e){return i.forEach(e,function(e){i.mapKeys(e,function(e,t){n.projects[t]=e})}),n})},_getProjectTypes:function(e){var t=this,n={},r="projectTypes";return t.context.service.projectType.getProjectTypes(e).then(function(t){var o=e.getEntity().getName();return n[o]={},n[o][r]=[],i.forEach(t,function(e){n[o][r].push(e.id)}),n})},_getValidatorsSection:function(e,t){var n=this,r={validators:{}},o=[];return i.forEach(e,function(e){for(var r=0;r<t.length;r++)o.push(n._getValidatorServiceForExtension(t[r],e))}),Q.all(o).then(function(e){var t=[];return i.forEach(e,function(e){t.push(n._getValidatorServiceInfo(e.service))}),Q.all(t).then(function(e){return i.forEach(e,function(e){if(!i.isEmpty(e[1])){var t=e[0],n=e[1];r.validators[t]={metadata:n}}}),r})})},_getValidatorServiceInfo:function(e){var t=e._sName;return e.instanceOf("sap.watt.common.service.editor.PortableValidator")?e.getMetadata().then(function(e){return[t,e]}):Q({})},_buildPromisesArrForProjectValidatorsStruct:function(e,t,r){var o=this;return o._getCurrentLintingSettings().then(function(a){i.forEach(e,function(e){for(var i=e.getEntity().getFullPath(),s=0;s<t.length;s++)r.push(o._getValidatorServiceForExtension(t[s],e).then($.proxy(function(e,t,r){var i={validator:r,projectPath:t,fileExtention:e};return n.get(o.context,i.validator.serviceProxy,i.projectPath).then($.proxy(function(e,t){return t.getCustomRulesPath().then(function(n){return t.getRulesForAnnotations(a.filterLevel.value).then(function(t){return{projectPath:e.projectPath,fileExtention:e.fileExtention,validator:e.validator.serviceID,validatorConfiguration:t,customRulesPath:n}})})},o,i))},this,t[s],i)))})})},_getCurrentLintingSettings:function(){return this.context.service.validatorusersettings.getCurrentLintingSettings()},_getCurrentDocumentInContent:function(){return this.context.service.content.getCurrentDocument()},_documentHandler:function(e,t,r){var i=this;return e&&e.service&&e.serviceProxy?i._getProject(t).then(function(o){if(!o)return Q();var a=i._getFullPath(o);return i.context.service.selection.getOwner().then(function(o){if(o&&o.instanceOf(c)){var s=e.serviceProxy;return i._EditorInstance=o,n.get(i.context,s,a).then(function(n){return n.getRulesForAnnotations(r.filterLevel.value).then(function(r){return t&&t.getEntity()?i._validate(e,n,t,r):void 0}).fail(function(e){return i.context.service.log.warn("Code Chek failed for file "+i._getFullPath(t),e.message,["user"]).done(),Q()})})}})}):Q()},_getSelectedDocument:function(e){var t=null;return e&&0!==e.length?(e.map(function(e){e&&e.document&&(t=e.document)}),t):t},_getProject:function(e){return e?e.getProject():void 0},_fireIssuesOnSingleFileUpdate:function(e){var t=i.cloneDeep(e);this.context.event.fireIssuesOnSingleFileUpdate({validationsResults:t}).done()},_validate:function(e,t,n,r){if(!e||!e.service||!e.serviceProxy)return Q();var i=this;return n.getContent().then(function(o){var a=n.getEntity().getFileExtension();return i._skipValidation(o,a).then(function(a){return a?void 0:t.getCustomRulesPath().then(function(t){i._customRulesPath=t;var a=i._getFullPath(n);return i._getValidationMode(n,e)===p?e.service.getCustomRulesContent(i._customRulesPath).then(function(t){return e.service.getIssuesSynchronously(o,r,a,t).then(function(e){var t=i.getIssuesWrappedForProblems(e,a);return i._fireIssuesOnSingleFileUpdate(t),i._doUpdateAnnotations(o,e,{document:n,editor:i._EditorInstance})})}):i._createWorker(e,n,o,r,i._customRulesPath)})})})},_skipValidation:function(e,t){var n=this;if(n._maxLineLength&&"js"===t||"json"===t){var r=e.split("\n");if(r&&r.length>0){var o=i.findIndex(r,function(e){return e.length>n._maxLineLength});return Q(-1!==o)}}return Q(!1)},_doUpdateAnnotations:function(t,n,r){var i=this;return u.updateAnnotations(i.context.service.content,t,n,r).fail(function(){i.context.service.log.warn("failed to clear or set annoatations",e.message,["user"]).done()})},_getFullPath:function(e){var t=null;return void 0!==e&&e&&(t=e.getEntity().getFullPath()),t},_getDeltaConfiguration:function(){return{}},_createWorker:function(e,n,r,i,o){var s=this,u=null,c=o,l=this._getFullPath(n);return e.serviceProxy.getCurentValidatorServiceIdentifier().then(function(n){if(a)return Q.all([e.service.getPathToImplementationModule(),e.service.getCustomRulesContent(c)]).spread(function(e,t){u=s._validateContext(n,l,r,i,e,t),a.doOperation("validate",u)});var o=require.toUrl("sap.watt.ideplatform.basevalidator/util/ValidationWorker.js");return t(s.context,o,function(e){var t=s.getIssuesWrappedForProblems(e.data.result,e.data.docFullPath);return s._fireIssuesOnSingleFileUpdate(t),s._geEditorContentByDocPath(e.data.docFullPath,"aceeditor").then(function(t){var n=s._getValidatorServiceById(e.data.serviceId),r=n.serviceProxy;return r.postValidate(e.data.result).then(function(n){return n&&"true"===n.isDefault?s._doUpdateAnnotations(e.data.validatedContent,e.data.result,t):s._doUpdateAnnotations(e.data.validatedContent,n,t)})}).done()},function(e){return s.context.service.log.warn("Code Chek failed for file "+e.data.docFullPath,e.message,["user"]).done(),s._geEditorContentByDocPath(e.data.docFullPath,"aceeditor").then(function(t){return s._doUpdateAnnotations(e.data.validatedContent,e.data.result||{},t)}).done()}).then(function(t){return a=t,Q.all([e.service.getPathToImplementationModule(),e.service.getCustomRulesContent(c)]).spread(function(e,t){u=s._validateContext(n,l,r,i,e,t),a.doOperation("validate",u)})})})},_geEditorContentByDocPath:function(e){var t=this;return t.context.service.document.getDocumentByPath(e).then(function(e){return e?{document:e,editor:t._EditorInstance}:Q()})},_getLangConfiguredServices:function(){return s},_setLangConfiguredServices:function(e){s=e}}}),define("sap.watt.ideplatform.basevalidator/service/ValidatorProjectSettingConfig",["sap/watt/common/plugin/platform/service/ui/AbstractConfig","../util/RulesManager"],function(e,t){"use strict";
return e.extend("sap.watt.common.plugin.linter.basevalidator.ValidatorProjectSettingConfig",{_oValidatorView:null,_oValidatorController:null,_getfileExtensionByMenueId:function(e){return"esLintSetting"===e?"js":void 0},getProjectSettingContent:function(e,n,r){var i=this;return i._oValidatorView?this._oValidatorView.getController().setProjectPath(r):i._oValidatorView=new sap.ui.view({viewName:"sap.watt.ideplatform.plugin.basevalidator.view.ValidatorSetting",type:sap.ui.core.mvc.ViewType.XML,viewData:{context:i.context,rulesManager:t,projectPath:r}}),i._oValidatorView._projectPath=r,i._oValidatorController=i._oValidatorView.getController(),i._oValidatorView},saveProjectSetting:function(e,t,n){var r=this._oValidatorController.getErrorMessgae();if(r)return Q.reject(r);var i=this._oValidatorController.getRulesManagerInst();if(i){var o=this._oValidatorController.getConfiguredValues(),a=this;return i.saveValidatorConfiguration(o).then(function(){return a.context.service.basevalidator.validatorConfigurationsChangeHandler(n)})}}})}),define("sap.watt.ideplatform.basevalidator/service/ValidatorUserSettings",[],function(){"use strict";return{_sLintingSettingNode:null,configure:function(e){this._sLintingSettingNode=e.lintingSetting.node},_loadSetting:function(){var e=this,t={disabledCodeCheck:!1,trigger:"onChange",filterLevel:{key:"e_w_i",value:["error","warning","info"]}},n=this._getPreferencesService();return n.get(e._sLintingSettingNode).then(function(n){return n&&(t.disabledCodeCheck=e._setDisbaleCodeCheck(n),t.trigger=e._setTriggeringCodeCheck(n),n.filterLevel?t.filterLevel=n.filterLevel:t.disabledCodeCheck&&(t.filterLevel={key:"none",value:[]})),t})},_setDisbaleCodeCheck:function(e){return e&&void 0!==e.disabledCodeCheck?e.disabledCodeCheck:"noLinting"===e.lintingTrigger?!0:!1},_setTriggeringCodeCheck:function(e){return e&&void 0!==e.trigger?e.trigger:"onSaveESLint"===e.lintingTrigger||"onSaveESLintAndJSHint"===e.lintingTrigger?"onSave":"onChangeESLint"===e.lintingTrigger||"onChangeESLintAndJSHint"===e.lintingTrigger?"onChange":"onChange"},_storeSetting:function(e){var t=this,n=this._getPreferencesService();return n.remove(t._sLintingSettingNode).then(function(){return n.set(e,t._sLintingSettingNode)})},_getPreferencesService:function(){return this.context.service.preferences},getCurrentLintingSettings:function(){return this._loadSetting().then(function(e){return e})},setCurrentLintingSettings:function(e){return e.filterLevel&&(e.disabledCodeCheck=0===e.filterLevel.value.length),this._storeSetting(e)}}}),define("sap.watt.ideplatform.beautify/command/BeautifyCommand",[],function(){"use strict";return{execute:function(){var e=this.context.service;e.usagemonitoring.startPerf("editor","format_content").done();var t=this;return e.selection.assertNotEmpty().then(function(n){var r=n&&n[0];if(r){var i=r.document&&r.document.getEntity().getFileExtension();return r.document.getContent().then(function(n){return e.beautifierProcessor.beautify(n,i,null).then(function(e){return t._setContentInEditor(e).then(function(){t.context.service.usagemonitoring.report("editor","format_content",i).done()})})})}return Q()})},_getCodeEditor:function(){return this.context.service.selection.getOwner().then(function(e){return e&&e.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor")?e:null})},_setContentInEditor:function(e){return this._getCodeEditor().then(function(t){return t?t.getUI5Editor().then(function(t){if(t){var n=t.getCursorPosition();return t.setDocValue(e),n?Q(t.moveCursorTo(n.row,n.column)):Q()}}):Q()})},isAvailable:function(){return!0},_isAceEditorInstance:function(){return this._getVisibleAceEditor().then(function(e){return!!e})},_getVisibleAceEditor:function(){return this.context.service.selection.getOwner().then(function(e){return e&&e.instanceOf&&e.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor")?e:null})},isEnabled:function(){var e=this;return this._isAceEditorInstance().then(function(t){if(t){var n=e.context.service.selection,r=e.context.service.beautifierProcessor;return n.assertNotEmpty().then(function(e){var t=e&&e[0];if(t){var n=t.document&&t.document.getEntity().getFileExtension();return r.hasBeautifierForFileExtension(n)}return!1})}return!1})}}}),define("sap.watt.ideplatform.beautify/service/BeautifierProcessor",[],function(){"use strict";var e={_beautifiers:{},configure:function(e){var t=e.beautifier||[],n=this;t.forEach(function(e){if(e)for(var t=e.fileExtensions||[],r=0;r<t.length;r++){var i=t[r];i||n.context.service.log.warn(n.context.service.beautifierProcessor.getProxyMetadata().getName(),"Invalid extension configured for beautifier "+e.name+".this beautifier will be ignored.",["user"]).done(),n._beautifiers[i]?n.context.service.log.warn(n.context.service.beautifierProcessor.getProxyMetadata().getName(),"Beautifier for file of type "+i+"already defined. Beautifier "+e.name+" will be ignored.",["user"]).done():n._beautifiers[i]=e.service}})},beautify:function(e,t,n){var r=this._beautifiers[t];return r?r.beautify(e,n):Q(e)},hasBeautifierForFileExtension:function(e){var t=this._beautifiers[e];return!(null===t||void 0===t)},getBeautifiedExtentions:function(){var e=[];try{for(var t in this._beautifiers)this._beautifiers.hasOwnProperty(t)&&e.push(t)}catch(n){this.context.service.log.error(this.context.service.beautifierProcessor.getProxyMetadata().getName(),"configuration variable object not initialized properly",["user"]).done()}return e}};return e}),define("sap.watt.ideplatform.generationwizard/command/CreateComponent",{execute:function(e){var t=this,n="";return e&&(n="more"===e?"more":e.getName()),Q.sap.require("sap.watt.ideplatform.generationwizard/ui/ComponentGenerationWizard").then(function(r){return t.context.service.selection.getSelection().then(function(i){i&&1===i.length&&!i[0].document.getEntity().isRoot()&&("more"===n?r.openComponentWizardUI(t.context,i[0].document):r.openComponentWizardUIFromSecondStep(t.context,i[0].document,e))})})},isAvailable:function(){return this.context.service.selection.isOwner(this.context.service.repositorybrowser)},isEnabled:function(){var e=this.context.service.selection;return e.assertOwner(this.context.service.repositorybrowser).then(function(){return e.assertNotEmpty().then(function(e){return 1===e.length&&!e[0].document.getEntity().isRoot()})})}}),define("sap.watt.ideplatform.generationwizard/command/CreateModule",{execute:function(e){var t=this,n="";return e&&(n="more"===e?"more":e.getName()),Q.sap.require("sap.watt.ideplatform.generationwizard/ui/ProjectGenerationWizard").then(function(r){return t.context.service.selection.getSelection().then(function(i){i&&1===i.length&&!i[0].document.getEntity().isRoot()&&("more"===n?r.openGenerationWizardUI(t.context,i[0].document,"module"):r.openGenerationWizardUIFromSecondStep(t.context,i[0].document,e))})})},isAvailable:function(){return this.context.service.selection.isOwner(this.context.service.repositorybrowser)},isEnabled:function(){var e=this.context.service.selection;return e.assertOwner(this.context.service.repositorybrowser).then(function(){return e.assertNotEmpty().then(function(e){return 1===e.length&&!e[0].document.getEntity().isRoot()})})}}),define("sap.watt.ideplatform.generationwizard/command/CreateProject",{execute:function(){var e=this;require(["sap.watt.ideplatform.generationwizard/ui/ProjectGenerationWizard"],function(t){t.openGenerationWizardUI(e.context)})},isAvailable:function(){return!0},isEnabled:function(){return!0}}),define("sap.watt.ideplatform.generationwizard/command/CreateReferenceProject",{execute:function(){var e=this;require(["sap.watt.ideplatform.generationwizard/ui/ReferenceProjectGenerationWizard"],function(t){t.openGenerationWizardUI(e.context)})},isAvailable:function(){return!0},isEnabled:function(){return!0}}),define("sap.watt.ideplatform.generationwizard/command/DisplayTemplates",{execute:function(){var e=this;require(["sap.watt.ideplatform.generationwizard/ui/TemplateManagementDialog"],function(t){t.openTemplateManagementUI(e.context)})},isAvailable:function(){return!0},isEnabled:function(){return!0}}),define("sap.watt.ideplatform.generationwizard/command/CreateCloudConnectivity",[],function(){"use strict";return{execute:function(){var e=this,t=this.context.service.filesystem.documentProvider;e.context.service.selection.assertNotEmpty().then(function(n){var r=n[0].document;return e.context.service.neoapp.addDestinations(null,r).then(function(){return t.getDocument(r.getEntity().getFullPath()+"/neo-app.json").then(function(t){return e.context.service.repositorybrowser.setSelection(t,!0)})})}).fail(function(t){e.context.service.usernotification.alert(e.context.i18n.getText("i18n","createConnectivity_Error")+"\n\n"+t.message).done()})},isAvailable:function(){return this._isProject()},isEnabled:function(){return this._isProject()},_isProject:function(){var e=this.context.service.selection;return e.assertOwner(this.context.service.repositorybrowser).then(function(){return e.assertNotEmpty().then(function(e){return 1===e.length&&!e[0].document.getEntity().isRoot()&&""===e[0].document.getEntity().getParentPath()})})}}}),define("sap.watt.ideplatform.generationwizard/service/ProjectBasicStep",{getContent:function(){jQuery.sap.require("sap.watt.ideplatform.plugin.generationwizard.ui.wizard.ProjectNameStep");var e=new sap.watt.ideplatform.plugin.generationwizard.ui.wizard.ProjectNameStep({context:this.context}),t=this.context.i18n.getText("projectGenWizard_basicStepTitle");return this.context.service.wizard.createWizardStep(e,t,"")}}),define("sap.watt.ideplatform.generationwizard/service/ComponentFinishStep",{getContent:function(){jQuery.sap.require("sap.watt.ideplatform.plugin.generationwizard.ui.wizard.ComponentFinishStep");var e=new sap.watt.ideplatform.plugin.generationwizard.ui.wizard.ComponentFinishStep({context:this.context});return this.context.service.wizard.createWizardStep(e,"","")}}),define("sap.watt.ideplatform.generationwizard/service/OfflineStep",{getContent:function(){jQuery.sap.require("sap.watt.ideplatform.plugin.generationwizard.ui.wizard.OfflineStepContent");var e=new sap.watt.ideplatform.plugin.generationwizard.ui.wizard.OfflineStepContent({context:this.context}),t=this.context.i18n.getText("projectGenWizard_offlineStepTitle");return this.context.service.wizard.createWizardStep(e,t,"")}}),define("sap.watt.ideplatform.generationwizard/service/AppDescriptorGenericStep",{getContent:function(){jQuery.sap.require("sap.watt.ideplatform.plugin.generationwizard.ui.wizard.AppDescriptorGenericStepContent");var e=new sap.watt.ideplatform.plugin.generationwizard.ui.wizard.AppDescriptorGenericStepContent({context:this.context}),t=this.context.i18n.getText("projectGenWizard_AppDescriptorGenericStepTitle");return this.context.service.wizard.createWizardStep(e,t,"")}}),define("sap.watt.ideplatform.generationwizard/service/TemplateSelectStep",{getContent:function(){var e=this;jQuery.sap.require("sap.watt.ideplatform.plugin.generationwizard.ui.wizard.SelectTemplateStep");var t=new sap.watt.ideplatform.plugin.generationwizard.ui.wizard.SelectTemplateStep({context:e.context}),n=e.context.i18n.getText("commonGenWizard_availableTemplatesTitle");return e.context.service.wizard.createWizardStep(t,n,"")}}),define("sap.watt.ideplatform.generationwizard/service/SelectReferenceProjectStep",{getContent:function(){var e=this;jQuery.sap.require("sap.watt.ideplatform.plugin.generationwizard.ui.wizard.SelectTemplateStep");var t=new sap.watt.ideplatform.plugin.generationwizard.ui.wizard.SelectTemplateStep({context:e.context}),n=e.context.i18n.getText("referenceProjectGenWizard_availableTemplatesTitle");return e.context.service.wizard.createWizardStep(t,n,"")}}),define("sap.watt.ideplatform.generationwizard/service/ModelBuilderStep",{getContent:function(){var e=this,t=[];return t.push(),Q.sap.require("sap.watt.ideplatform.generationwizard/core/DataProviderManager").then(function(t){jQuery.sap.require("sap.watt.ideplatform.plugin.generationwizard.ui.wizard.TemplateCustomizationStep");var n=new sap.watt.ideplatform.plugin.generationwizard.ui.wizard.TemplateCustomizationStep({context:e.context,dataProviderManager:t}),r=e.context.i18n.getText("commonGenWizard_modelBuilderTitle");return e.context.service.wizard.createWizardStep(n,r,"")})}}),define("sap.watt.ideplatform.generationwizard/service/ConfirmReferenceAppTerms",{getContent:function(){jQuery.sap.require("sap.watt.ideplatform.plugin.generationwizard.ui.wizard.ConfirmTermsStepContent");var e=new sap.watt.ideplatform.plugin.generationwizard.ui.wizard.ConfirmTermsStepContent({context:this.context});return this.context.service.wizard.createWizardStep(e,"","")}}),define("sap.watt.ideplatform.generationwizard/service/XmlTemplateViewsStep",{getContent:function(){jQuery.sap.require("sap.watt.ideplatform.plugin.generationwizard.ui.wizard.XmlTemplateViewsStepContent");var e=new sap.watt.ideplatform.plugin.generationwizard.ui.wizard.XmlTemplateViewsStepContent({context:this.context}),t=this.context.i18n.getText("projectGenWizard_xmlTemplateViewsTitle");return this.context.service.wizard.createWizardStep(e,t,"")}}),define("sap.watt.ideplatform.generationwizard/service/SmartDocProvider",{_oContextDocBuilder:void 0,_oCachedSmartDoc:void 0,init:function(){var e=this;return Q.sap.require("sap.watt.ideplatform.generationwizard/core/ContextDocBuilder").then(function(t){e._oContextDocBuilder=t.initContextDocBuilder()})},createSmartDoc:function(e,t,n){if(this._oContextDocBuilder){var r=this;return this.context.service.pluginmanagement.getPluginFile(e,t,!1).then(function(e){var t=[],i=r._oContextDocBuilder.Document(JSON.parse(e));if(i.Import)for(var o=0;o<i.Import.length;o++){var a=r.context.service.template.getTemplate(i.Import[o]).then(function(e){var t=e.getTemplateClass().getProxyMetadata().getName();return r.context.service.pluginmanagement.getPluginFile(t,e.getPath()+"/"+e.getModelFileName(),!1).then(function(e){if(e){var t=JSON.parse(e);for(var n in t)i.hasOwnProperty(n)||i.append(n,t[n])}})});t.push(a)}return Q.all(t).then(function(){return n&&(r._oCachedSmartDoc={id:n,smartDoc:i}),i})})}},getSmartDocByTemplate:function(e){if(e){if(this._oCachedSmartDoc&&this._oCachedSmartDoc.id===e.getId())return this._oCachedSmartDoc.smartDoc;var t=e.getModelFileName();if(t){var n=e.getTemplateClass().getProxyMetadata().getName(),r=e.getPath()+"/"+t;return this.createSmartDoc(n,r,e.getId())}}},invalidateCachedSmartDoc:function(){this._oCachedSmartDoc=void 0}}),define("sap.watt.ideplatform.generationwizard/service/RelevantArtifactsProvider",["sap.watt.platform.commandgroup/module/ActionItem","sap/watt/lib/lodash/lodash"],function(e,t){"use strict";return{getItemsByType:function(e,n){this.context=e;var r=this;return this.context.service.template.getTemplates(n).then(function(e){return r.context.service.selection.getSelection().then(function(i){var o=t.values(e);sap.watt.getEnv("internal")||(o=t.filter(o,function(e){return!e.getInternalOnly()})),o.sort(function(e,t){var n=e.getOrderPriority(),r=t.getOrderPriority();return n===r?e.getName().localeCompare(t.getName()):n&&r?n-r:n?-1:1});var a;return a="component"===n?"template.createComponent":"template.createModule",r.context.service.command.getCommand(a).then(function(e){var a={};i&&1===i.length&&!i[0].document.getEntity().isRoot()&&(a.componentPath=i[0].document.getEntity().getFullPath());var s=[],u=[],c=[],l=[];return i&&i[0]&&i[0].document?r.context.service.projectType.getProjectTypes(i[0].document).then(function(i){t.forEach(i,function(e){s.push(e.id)});var p=[];return t.forEach(o,function(e){var t=e.getSupportedProjectTypes(),n=r._isTemplateValid(t,s);(n||!t||0===t.length)&&(l.push(e),u.push(e.validateOnSelection(a)),c.push(e.customValidation(a)))}),Q.allSettled(u).then(function(i){return Q.allSettled(c).then(function(o){return t.forEach(l,function(t,a){if("fulfilled"===i[a].state&&i[a].value&&"fulfilled"===o[a].state&&o[a].value){if(4===p.length)return"component"===n?r._createMoreComponentsActionItem(e,p):r._createMoreModulesActionItem(e,p),!1;r._createAnActionItem(e,t,p)}}),p})})}):[]})})})},_isTemplateValid:function(e,n){var r=!1;return t.forEach(e,function(e){return t.indexOf(n,e)>-1?(r=!0,!1):void 0}),r},_createAnActionItem:function(t,n,r){var i=n.getId();t.setValue(n,i);var o=new e({id:i,label:n.getName()},t);r.push(o)},_createMoreComponentsActionItem:function(t,n){var r=this.context.i18n.getText("command_moreLabel");t.setValue("more","moreComponents");var i=new e({id:"moreComponents",label:r},t);n.push(i)},_createMoreModulesActionItem:function(t,n){var r=this.context.i18n.getText("command_moreLabel");t.setValue("more","moreModules");var i=new e({id:"moreModules",label:r},t);n.push(i)}}}),define("sap.watt.ideplatform.generationwizard/service/RelevantComponentsProvider",["sap.watt.ideplatform.generationwizard/service/RelevantArtifactsProvider"],function(e){"use strict";return{getItems:function(){return e.getItemsByType(this.context,"component")}}}),define("sap.watt.ideplatform.generationwizard/service/RelevantModulesProvider",["sap.watt.ideplatform.generationwizard/service/RelevantArtifactsProvider"],function(e){"use strict";return{getItems:function(){return e.getItemsByType(this.context,"module")}}}),define("sap/watt/ideplatform/plugin/gitclient/command/Constants",{_ACTIVATED_FROM_COMMAND:"from_command"}),define("sap.watt.ideplatform.gitclient/command/GitLog",["sap/watt/ideplatform/plugin/gitclient/command/Constants"],function(e){"use strict";return{execute:function(){var t=this;return Q.all([t.context.service.selection.getSelection(),t.context.service.gitlog.setVisible(!0,e._ACTIVATED_FROM_COMMAND)]).spread(function(e){return e[0]&&e[0].document&&e[0].document.getEntity()?t.context.service.gitlog.getLogHistory(e[0].document):void 0})},isAvailable:function(){var e=this;return e.context.service.git.isFeatureSupported("GitHistory").then(function(t){return t?Q.all([e.context.service.selection.getSelection().then(function(t){return t&&t[0]&&t[0].document?e.context.service.gitclient.isAvailable(t[0].document):void 0}),e.context.service.selection.isOwner(e.context.service.repositorybrowser)]).spread(function(e,t){return e&&t}):!1})},isEnabled:function(){var e=this;return e.context.service.selection.getSelection().then(function(t){return e.context.service.gitlog.isEnabled(t)})}}}),define("sap.watt.ideplatform.gitclient/command/Clone",["sap/watt/ideplatform/plugin/gitclient/command/Constants"],function(e){"use strict";return{execute:function(){var t=this,n=this.context.service;return n.clone.doClone().then(function(r){return r?n.git.getRepositoryDetailsByLocation(r).then(function(r){return n.filesystem.documentProvider.getDocument(URI("/"+r.Name).toString()).then(function(r){return t.context.service.usagemonitoring.report("git","fetch",e._ACTIVATED_FROM_COMMAND).done(),n.repositorybrowser.setSelection(r,!0).thenResolve(!0)})}):!1}).fail(function(e){return e?(t._alertError(e),!1):void 0})},_alertError:function(e){var t=this.context.service;e.detailedMessage?t.usernotification.alert(e.name+"\n\n"+e.detailedMessage).done():t.usernotification.alert(e.name+"\n\n"+e.message).done()}}}),define("sap.watt.ideplatform.gitclient/command/FetchFromUpstream",["sap/watt/ideplatform/plugin/gitclient/command/Constants"],function(e){"use strict";return{execute:function(){var t=this;return this.context.service.selection.getSelection().then(function(n){n[0].document.getProject().then(function(n){return t.context.service.gitdispatcher.fetchFromUpstream(n.getEntity(),e._ACTIVATED_FROM_COMMAND)})})},isAvailable:function(){var e=this;return Q.all([this.context.service.selection.getSelection().then(function(t){return t&&t[0]&&t[0].document?e.context.service.gitclient.isAvailable(t[0].document):void 0}),this.context.service.selection.isOwner(this.context.service.repositorybrowser)]).spread(function(e,t){return e&&t})},isEnabled:function(){var e=this;return this.context.service.selection.getSelection().then(function(t){return e.context.service.gitclient.isEnabled(t)})}}}),define("sap.watt.ideplatform.gitclient/command/FetchFromGerrit",["sap/watt/ideplatform/plugin/gitclient/command/Constants"],function(e){"use strict";return{execute:function(){var t=this;return this.context.service.selection.getSelection().then(function(n){n[0].document.getProject().then(function(n){return t.context.service.gitdispatcher.fetchFromGerrit(n.getEntity(),e._ACTIVATED_FROM_COMMAND)})})},isAvailable:function(){var e=this;return e.context.service.git.isFeatureSupported("Gerrit").then(function(t){return t?Q.all([e.context.service.selection.getSelection().then(function(t){return t&&t[0]&&t[0].document?e.context.service.gitclient.isAvailable(t[0].document):void 0}),e.context.service.selection.isOwner(e.context.service.repositorybrowser)]).spread(function(e,t){return e&&t&&!!sap.watt.getEnv("internal")}):!1})},isEnabled:function(){var e=this;return this.context.service.selection.getSelection().then(function(t){return e.context.service.gitclient.isEnabled(t).then(function(e){return e&&!!sap.watt.getEnv("internal")})})}}}),define("sap.watt.ideplatform.gitclient/command/Push",["sap/watt/ideplatform/plugin/gitclient/command/Constants"],function(e){"use strict";return{execute:function(){var t=this,n=!0;return this.context.service.selection.getSelection().then(function(r){r[0].document.getProject().then(function(){var i=r[0].document.getEntity();return t.context.service.git.getRepositoryConfigurations(i.getBackendData().git).then(function(r){for(var o=!1,a=0;a<r.length;a++)if("gerrit.createchangeid"===r[a].Key){o="true"===r[a].Value;break}return t.context.service.gitdispatcher.pushTo(i,o,n,e._ACTIVATED_FROM_COMMAND)}).fail(function(){return t.context.service.gitdispatcher.pushTo(i,!1,n,e._ACTIVATED_FROM_COMMAND)})})})},isAvailable:function(){var e=this;return Q.all([this.context.service.selection.getSelection().then(function(t){return t&&t[0]&&t[0].document?e.context.service.gitclient.isAvailable(t[0].document):void 0}),this.context.service.selection.isOwner(this.context.service.repositorybrowser)]).spread(function(e,t){return e&&t})},isEnabled:function(){var e=this;return this.context.service.selection.getSelection().then(function(t){return e.context.service.gitclient.isEnabled(t)})}}}),define("sap.watt.ideplatform.gitclient/command/Pull",["sap/watt/ideplatform/plugin/gitclient/command/Constants"],function(e){"use strict";return{execute:function(){var t=this;return this.context.service.selection.getSelection().then(function(n){n[0].document.getProject().then(function(n){return t.context.service.gitdispatcher.pull(n.getEntity(),e._ACTIVATED_FROM_COMMAND)})})},isAvailable:function(){var e=this;return Q.all([this.context.service.selection.getSelection().then(function(t){return t&&t[0]&&t[0].document?e.context.service.gitclient.isAvailable(t[0].document):void 0}),this.context.service.selection.isOwner(this.context.service.repositorybrowser)]).spread(function(e,t){return e&&t})},isEnabled:function(){var e=this;return this.context.service.selection.getSelection().then(function(t){return e.context.service.gitclient.isEnabled(t)})}}}),define("sap.watt.ideplatform.gitclient/command/Stash",["sap/watt/ideplatform/plugin/gitclient/command/Constants"],function(e){"use strict";return{execute:function(){var t=this;return this.context.service.selection.getSelection().then(function(n){return n[0].document.getProject().then(function(n){return t.context.service.gitdispatcher.stash(n.getEntity(),e._ACTIVATED_FROM_COMMAND)})})},isAvailable:function(){var e=this;return Q.all([this.context.service.selection.getSelection().then(function(t){return t&&t[0]&&t[0].document?e._isStashSupported(t[0].document).then(function(n){return e.context.service.gitclient.isAvailable(t[0].document).then(function(e){return e&&n})}):void 0}),this.context.service.selection.isOwner(this.context.service.repositorybrowser)]).spread(function(e,t){return e&&t})},isEnabled:function(){var e=this;return this.context.service.selection.getSelection().then(function(t){return e.context.service.gitclient.isEnabled(t)})},_isStashSupported:function(e){var t=this,n=e.getEntity().getBackendData().git;return n?this.context.service.git.isFeatureSupported("gitStashSupported").then(function(e){return e?t.context.service.git.isStashSupported(n):Q(!1)}):Q(!1)}}}),define("sap.watt.ideplatform.gitclient/command/InitRepository",["sap/watt/ideplatform/plugin/gitclient/command/Constants"],function(e){"use strict";return{execute:function(){var t=this;return this.context.service.selection.getSelection().then(function(n){return n[0].document.getProject().then(function(n){return t.context.service.gitdispatcher.initRepository(n,e._ACTIVATED_FROM_COMMAND)})})},isAvailable:function(){var e=this;return e.context.service.git.isFeatureSupported("initRepositoryCommand")},isEnabled:function(){return!0}}}),define("sap.watt.ideplatform.gitclient/command/UseStash",["sap/watt/ideplatform/plugin/gitclient/command/Constants"],function(e){"use strict";return{execute:function(){var t=this;return this.context.service.selection.getSelection().then(function(n){return n[0].document.getProject().then(function(n){return t.context.service.gitdispatcher.useStash(n.getEntity(),e._ACTIVATED_FROM_COMMAND)})})},isAvailable:function(){var e=this;return Q.all([this.context.service.selection.getSelection().then(function(t){return t&&t[0]&&t[0].document?e._isStashSupported(t[0].document).then(function(n){return e.context.service.gitclient.isAvailable(t[0].document).then(function(e){return e&&n})}):void 0}),this.context.service.selection.isOwner(this.context.service.repositorybrowser)]).spread(function(e,t){return e&&t})},isEnabled:function(){var e=this;return this.context.service.selection.getSelection().then(function(t){var n=t[0].document.getEntity();return Q.all([e.context.service.gitclient.isEnabled(t),e.context.service.gitdispatcher.isStashAvailable(n)]).spread(function(e,t){return e&&t})})},_isStashSupported:function(e){var t=this,n=e.getEntity().getBackendData().git;return n?this.context.service.git.isFeatureSupported("gitStashSupported").then(function(e){return e?t.context.service.git.isStashSupported(n):Q(!1)}):Q(!1)}}}),define("sap.watt.ideplatform.gitclient/command/Rebase",["sap/watt/ideplatform/plugin/gitclient/command/Constants"],function(e){"use strict";return{execute:function(){var t=this;return this.context.service.selection.getSelection().then(function(n){n[0].document.getProject().then(function(n){return t.context.service.gitdispatcher.rebase(n.getEntity(),e._ACTIVATED_FROM_COMMAND)})})},isAvailable:function(){var e=this;return Q.all([this.context.service.selection.getSelection().then(function(t){return t&&t[0]&&t[0].document?e.context.service.gitclient.isAvailable(t[0].document):void 0}),this.context.service.selection.isOwner(this.context.service.repositorybrowser)]).spread(function(e,t){return e&&t})},isEnabled:function(){var e=this;return this.context.service.selection.getSelection().then(function(t){return e.context.service.gitclient.isEnabled(t)})}}}),define("sap.watt.ideplatform.gitclient/command/Merge",["sap/watt/ideplatform/plugin/gitclient/command/Constants"],function(e){"use strict";return{execute:function(){var t=this;return this.context.service.selection.getSelection().then(function(n){return n&&n[0]&&n[0].document?n[0].document.getProject().then(function(n){var r=n.getEntity();return t.context.service.git.getRepositoryConfigurations(r.getBackendData().git).then(function(n){for(var i=!1,o=0;o<n.length;o++)if("gerrit.createchangeid"===n[o].Key){i="true"===n[o].Value;break}return t.context.service.gitdispatcher.merge(r,i,e._ACTIVATED_FROM_COMMAND)})}):void 0})},isAvailable:function(){var e=this;return Q.all([this.context.service.selection.getSelection().then(function(t){return t&&t[0]&&t[0].document?e.context.service.gitclient.isAvailable(t[0].document):void 0}),this.context.service.selection.isOwner(this.context.service.repositorybrowser)]).spread(function(e,t){return e&&t})},isEnabled:function(){var e=this;return this.context.service.selection.getSelection().then(function(t){return e.context.service.gitclient.isEnabled(t)})}}}),define("sap.watt.ideplatform.gitclient/command/Reset",["sap/watt/ideplatform/plugin/gitclient/command/Constants"],function(e){"use strict";return{execute:function(){var t=this;return this.context.service.selection.getSelection().then(function(n){return n[0].document.getProject().then(function(n){return t.context.service.gitdispatcher.reset(n.getEntity(),e._ACTIVATED_FROM_COMMAND)})})},isAvailable:function(){var e=this;return Q.all([this.context.service.selection.getSelection().then(function(t){return t&&t[0]&&t[0].document?e.context.service.gitclient.isAvailable(t[0].document):void 0}),this.context.service.selection.isOwner(this.context.service.repositorybrowser)]).spread(function(e,t){return e&&t})},isEnabled:function(){var e=this;return this.context.service.selection.getSelection().then(function(t){return e.context.service.gitclient.isEnabled(t)})}}}),define("sap.watt.ideplatform.gitclient/command/Delete",[],function(){"use strict";return{execute:function(){var e=this,t=this.context.service.selection,n=this.context.service.usernotification;return t.getSelection().then(function(t){if(t[0]&&t[0].document&&t[0].document.getEntity()){var r=t[0].document,i=e.context.i18n.getText("i18n","commandDelete_confirm",[r.getEntity().getName()]);return n.confirm(i).then(function(e){return e.bResult?r.delete():void 0})}})},isEnabled:function(){var e=this.context.service.selection;return e.assertNotEmpty().then(function(e){var t=e[0].stageTableRow&&!e[0].stageTableRow.Stage,n=e[0].stageTableRow.Status;return e[0].document&&t&&("U"===n||"M"===n)})}}}),define("sap.watt.ideplatform.gitclient/command/Ignore",["sap/watt/ideplatform/plugin/gitclient/command/Constants"],function(e){"use strict";return{execute:function(){var t=this;return this.context.service.selection.assertNotEmpty().then(function(n){return n[0].document&&n[0].document.getEntity()?t.context.service.gitdispatcher.ignore(n[0].document.getEntity(),e._ACTIVATED_FROM_COMMAND):void 0})},isAvailable:function(){var e=this;return e.context.service.git.isFeatureSupported("ignore")},isEnabled:function(){var e=this.context.service.selection;return e.assertNotEmpty().then(function(e){return e[0].document&&"U"===e[0].stageTableRow.Status&&!e[0].stageTableRow.Stage})}}}),define("sap.watt.ideplatform.gitclient/command/UntrackAndIgnore",[],function(){"use strict";return{execute:function(){var e=this.context.service.selection,t=this;return e.assertNotEmpty().then(function(e){return e[0]&&e[0].document&&"file"===e[0].document.getType()?t.context.service.gitdispatcher.untrackAndIgnore(e[0].document.getEntity()):void 0})},isAvailable:function(){var e=this;return Q.all([this.context.service.selection.getSelection().then(function(t){return t&&t[0]&&t[0].document?e._isSupported(t[0].document).then(function(n){return e.context.service.gitclient.isAvailable(t[0].document).then(function(e){return e&&n})}):void 0}),this.context.service.selection.isOwner(this.context.service.repositorybrowser)]).spread(function(e){return e})},isEnabled:function(){var e=this,t=this.context.service.selection;return t.assertNotEmpty().then(function(t){return e.context.service.gitclient.isEnabled(t)&&t[0].document&&"file"===t[0].document.getType()})},_isSupported:function(e){var t=e.getEntity().getBackendData().git;return t?this.context.service.git.isRmSupported(t):Q(!1)}}}),define("sap.watt.ideplatform.gitclient/command/Edit",[],function(){"use strict";return{execute:function(){var e=this.context.service.selection,t=this;return e.assertNotEmpty().then(function(e){return e[0]&&e[0].document&&"file"===e[0].document.getType()?t.context.service.document.open(e[0].document):void 0})},isAvailable:function(){return this.context.service.selection.assertOwner(this.context.service.repositorybrowser)},isEnabled:function(){var e=this.context.service.selection;return e.assertNotEmpty().then(function(e){return e[0].document&&"D"!==e[0].stageTableRow.Status
})}}}),define("sap.watt.ideplatform.gitclient/command/Compare",["sap/watt/ideplatform/plugin/gitclient/command/Constants"],function(e){"use strict";return{execute:function(){var t=this.context.service.selection,n=this;return t.assertNotEmpty().then(function(t){if(!(t[0].stageTableRow&&t[0].document&&t[0].document.getEntity()&&t[0].document.getEntity().getBackendData()&&t[0].document.getEntity().getBackendData().git))throw new Error("Compare failed");var r=t[0].document,i=t[0].stageTableRow.Stage,o=t[0].stageTableRow.Status;return n.context.service.gitdispatcher.openCompareEditor(r,i,"C"===o,e._ACTIVATED_FROM_COMMAND)})},isAvailable:function(){var e=this;return e.context.service.git.isFeatureSupported("compare")},isEnabled:function(){var e=this.context.service.selection;return e.assertNotEmpty().then(function(e){if(e[0].document){var t=e[0].stageTableRow.Status;return"M"===t||"C"===t}})}}}),define("sap.watt.ideplatform.gitclient/service/Decorator",{CONFLICT:{text:" ",styleClass:"rdeRepositoryBrowserPrefixGitConflict"},GIT:{text:" ",styleClass:"rdeRepositoryBrowserPrefixGitCommitted"},DELETED:{text:" ",styleClass:"rdeRepositoryBrowserPrefixGitDeleted"},STAGE:{text:" ",styleClass:"rdeRepositoryBrowserPrefixGitModifiedStaged"},MODIFIED:{text:" ",styleClass:"rdeRepositoryBrowserPrefixGitModified"},NEW:{text:" ",styleClass:"rdeRepositoryBrowserPrefixGitStagedInitial"},UNTRACKED:{text:" ",styleClass:"rdeRepositoryBrowserPrefixGitStagedUntracked"},decorate:function(e){if(e&&e.getEntity()&&e.getEntity().getBackendData()&&e.getEntity().getBackendData().git){var t,n={prefix:this.GIT},r=this,i=[],o=e.getEntity().getBackendData().git;return i.push(this.context.service.gitclient.getStatusForNode(e).then(function(e){e&&(n.prefix=e.stage?r.STAGE:r[e.status])})),e.isProject()&&i.push(r.context.service.git.getLocalBranches(o).then(function(e){return r.context.service.git.getCurrentBranchName(e).then(function(e){t=e})})),Q.allSettled(i).then(function(){return t&&(n.suffix=[{text:"["+t+"]",styleClass:"rdeRepositoryBrowserSuffixRepo"}]),n})}}}),define("sap.watt.ideplatform.gitclient/service/GitClient",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";var t=e.extend("sap.watt.ideplatform.plugin.gitclient.service.GitClient",{_oGitPaneView:void 0,_oSelectedDocument:void 0,_oContextMenuGroup:void 0,_oSelectedStageTableRow:void 0,_mStatus:{},_mDefer:{},init:function(){},configure:function(t){var n=this;return e.prototype.configure.apply(this,arguments).then(function(){return n._aStyles&&n.context.service.resource.includeStyles(n._aStyles).done(),t.contextMenu?n.context.service.commandGroup.getGroup(t.contextMenu).then(function(e){n._oContextMenuGroup=e}):void 0})},getFocusElement:function(){return this.getContent()},getSelection:function(){var e=this;return e._oSelectedDocument&&e._oSelectedStageTableRow?[{stageTableRow:e._oSelectedStageTableRow,document:e._oSelectedDocument}]:[]},setSelection:function(e){this._oSelectedStageTableRow=e.stageTableRow,this._oSelectedDocument=e.document},getContent:function(){var e=this;return this._oGitPaneView||(this._oGitPaneView=sap.ui.view({viewName:"sap.watt.ideplatform.plugin.gitclient.view.GitPane",type:sap.ui.core.mvc.ViewType.JS,viewData:{context:this.context,menuGroup:this._oContextMenuGroup}})),e._oGitPaneView},onAfterSetSelection:function(e){var t=e.params.owner,n=e.params.selection;if(t&&(t===this.context.service.repositorybrowser||t.instanceOf("sap.watt.common.service.editor.Editor"))&&n){if(n.length>1&&!this._analyzeMultiSelect(n))return this._oSelectedDocument=null,this._oSelectedStageTableRow=null,void 0;n[0]&&n[0].document&&n[0].document.getEntity().getBackendData()&&this.doUpdate(n[0].document,!1)}},_analyzeMultiSelect:function(e){for(var t=!1,n=null,r=0;r<e.length;r++)if(e[r]&&e[r].document&&e[r].document.getEntity()){if(0===r){n=e[r].document.getEntity().getBackendData()?e[r].document.getEntity().getBackendData().git:n,t=!0;continue}var i=e[r].document.getEntity().getBackendData().git&&!n;if(i=i||!e[r].document.getEntity().getBackendData().git&&n,e[r].document.getEntity().getBackendData().git&&n&&(i=e[r].document.getEntity().getBackendData().git.CloneLocation!==n.CloneLocation),i)return this.isVisible()&&this._oGitPaneView&&this._oGitPaneView.getController().cleanPane(),!1}return t},onAfterStatusChanged:function(e){if(("externalChanged"!==e.name||"import"===e.params.operation)&&e&&e.params&&e.params.document&&e.params.document.getEntity().getBackendData()){var t=e.params.document;if(!t.getEntity||t.getEntity().isRoot())return;var n=this;t.getParent().then(function(r){var i=r.getEntity().isRoot();"deleted"===e.name&&t.getEntity().getBackendData().git&&t.isProject()&&i?(this._oSelectedDocument=null,this._oSelectedStageTableRow=null,this._oGitPaneView&&this._oGitPaneView.getController().cleanPane()):t.getProject().then(function(r){return r&&r.getEntity().getBackendData().git?n.isVisible()&&n._oGitPaneView?n._oGitPaneView.getController().updateStagingTable(!0):n.getStatus(r.getEntity(),!0).then(function(){return Q("deleted"===e.name?t.getParent():t).then(function(t){return n._updateChain(t,e)})}):void 0}).done()})}},isAvailable:function(e){return e.getEntity?e.getProject().then(function(e){return e?!!e.getEntity().getBackendData().git:!1}):void 0},isEnabled:function(e){var t=this._analyzeMultiSelect(e);if(!t)return!1;if(this._oGitPaneView){var n=this._oGitPaneView.getModel();return!(n.getProperty("/modelData/isRebaseInteractive")||n.getProperty("/modelData/isCherryPickingOrMerging"))}return t},doUpdate:function(e,t){e=e||this._oSelectedDocument;var n=this;e&&e.getEntity&&e.getProject().then(function(e){var r=n.isVisible();if(e&&"workspace"===e.getEntity().getDAO()&&(e!==n._oSelectedDocument||t)){if(!e.getEntity().getBackendData().git)return n._oSelectedDocument=null,n._oSelectedStageTableRow=null,r&&n._oGitPaneView&&n._oGitPaneView.getController().cleanPane(),void 0;n._oSelectedDocument=e,r&&n._oGitPaneView&&n._oGitPaneView.getController().updatePane(e.getEntity(),t)}}).done()},updateUnsyncedCommits:function(e){var t=this;this.isVisible()&&this._oGitPaneView&&(this._oGitPaneView.getModel().setProperty("/modelData/isGit",!1),this._oGitPaneView.getController().updateUnsyncedCommits(e).then(function(){t._oGitPaneView.getModel().setProperty("/modelData/isGit",!0)}).done())},updateUnsyncedCommitsAndRefresh:function(e){var t=this,n=e.params&&e.params.message?e.params.message:"";this.isVisible()&&this._oGitPaneView&&(this._oGitPaneView.getModel().setProperty("/modelData/isGit",!1),this._oGitPaneView.getController().updateUnsyncedCommits(e).then(function(){t._oGitPaneView.getModel().setProperty("/modelData/isGit",!0),n&&t.context.service.usernotification.liteInfo(t.context.i18n.getText("i18n",n,!0)).done()}).done())},updateStagingTableAndUnsyncedCommitsAndRefresh:function(){var e=this,t=[],n=this.isVisible()&&this._oGitPaneView;n&&(this._oGitPaneView.getModel().setProperty("/modelData/isGit",!1),t.push(this._oGitPaneView.getController().updateUnsyncedCommits()),t.push(this._oGitPaneView.getController().updateStagingTable(!0))),Q.all(t).spread(function(){return n&&e._oGitPaneView.getModel().setProperty("/modelData/isGit",!0),e._updateDecoration()}).done()},updateBranches:function(e){var t=this,n=e.params&&e.params.message?e.params.message:"";this.isVisible()&&this._oGitPaneView&&(this._oGitPaneView.getModel().setProperty("/modelData/isGit",!1),this._oGitPaneView.getController().updateBranches().then(function(){t._oGitPaneView.getModel().setProperty("/modelData/isGit",!0),n&&t.context.service.usernotification.liteInfo(t.context.i18n.getText("i18n",n,!0)).done()}).done())},updateBranchesAndStagingTableAndRefresh:function(){var e=this;if(this.isVisible()&&this._oGitPaneView){this._oGitPaneView.getModel().setProperty("/modelData/isGit",!1);var t=[];t.push(this._oGitPaneView.getController().updateBranches()),t.push(this._oGitPaneView.getController().updateStagingTable(!0)),Q.all(t).then(function(){e._oGitPaneView.getModel().setProperty("/modelData/isGit",!0)}).done()}},cleanCommitDescription:function(){this.isVisible()&&this._oGitPaneView&&this._oGitPaneView.getModel().setProperty("/modelData/sCommitDescription","")},updateStagingTable:function(){var e=this;this.isVisible()&&this._oGitPaneView&&(this._oGitPaneView.getModel().setProperty("/modelData/isGit",!1),this._oGitPaneView.getController().updateStagingTable(!0).then(function(){e._oGitPaneView.getModel().setProperty("/modelData/isGit",!0)}).done())},operationStarted:function(e){this._oGitPaneView&&this._oGitPaneView.getController()._setAnimation(e.params.entity,e.params.name,!0)},operationStopped:function(e){this._oGitPaneView&&this._oGitPaneView.getController()._setAnimation(e.params.entity,e.params.name,!1)},setVisible:function(t){var n=this;return e.prototype.setVisible.apply(this,arguments).then(function(){return t&&n.doUpdate(null,!0),Q()})},getStatus:function(e,t){var n=this,r=this._getProjectName(e);return!t&&this._mStatus[r]?Q(this._mStatus[r]):(this._mDefer[r]||(this._mDefer[r]=Q.defer()),e.isProject()&&!this._mDefer[r].inProgress&&(this._mDefer[r].inProgress=!0,this.context.service.git.getStatus(e.getBackendData().git).then(function(e){n._mStatus[r]=e.sort(function(e,t){return n._mPriority[e.FullStatus]-n._mPriority[t.FullStatus]+(t.Stage-e.Stage)}),n._mDefer[r].resolve(n._mStatus[r]),n._mDefer[r]=null}).done()),this._mDefer[r].promise)},_mPriority:{CONFLICT:0,DELETED:5,NEW:10,MODIFIED:15},getStatusForNode:function(e){return this.getStatus(e.getEntity()).then(function(t){for(var n,r=e.getEntity().getBackendData().location,i=0;i<t.length;i++)if(n=t[i].Location,n===r||n.indexOf(r)>-1&&"folder"===e.getType())return{status:t[i].FullStatus,stage:t[i].Stage}})},_updateDecoration:function(e){var t=this;return e?this.context.service.decoration.updateDecorations(e,!0):this._oGitPaneView?this._oGitPaneView.getController().getDocument().then(function(e){return Q(e?e:t.context.service.filesystem.documentProvider.getRoot()).then(function(e){return t.context.service.decoration.updateDecorations(e,!0)})}):this.context.service.filesystem.documentProvider.getRoot().then(function(e){return t.context.service.decoration.updateDecorations(e,!0)})},_updateChain:function(e,t){var n=this;return e.isProject()?this.context.service.decoration.updateDecorations(e,!1,t):this.context.service.decoration.updateDecorations(e,!1,t).then(function(){return e.getParent().then(function(e){return n._updateChain(e,t)})})},_getProjectName:function(e){return e.getParentPath()?e.getParentPath().split("/")[1]:e.getName()}});return t}),define("sap.watt.ideplatform.gitclient/service/GitLog",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";var t=e.extend("sap.watt.ideplatform.plugin.gitclient.service.GitLog",{_oGitLogView:void 0,_oSelectedDocument:void 0,_DEFAULT_LOG_LOCATION:"from_pane",configure:function(){return e.prototype.configure.apply(this,arguments)},init:function(){},getFocusElement:function(){return this.getContent()},getContent:function(){var t=this;return this._oGitLogView||(this._oGitLogView=sap.ui.view({viewName:"sap.watt.ideplatform.plugin.gitclient.view.GitLog",type:sap.ui.core.mvc.ViewType.JS,viewData:{context:this.context}})),e.prototype.getContent.apply(this,arguments).then(function(){return t._oGitLogView})},getLogHistory:function(e){var t=this;this._oSelectedDocument=e,t._oGitLogView.getController().clearPane(),e.getProject().then(function(n){return t._oGitLogView&&n.getEntity()?t._oGitLogView.getController().updateGitLogPane(e.getEntity(),n.getEntity().getName()):void 0}).done()},onAfterSetSelection:function(e){var t=this;e.params.selection&&e.params.selection.length>0&&(this._analyzeValidGitLog(e.params.selection)?e.params.selection[0]&&e.params.selection[0].document&&this.context.service.repositorybrowser.getStateLinkWithEditor().then(function(n){(e.params.owner===t.context.service.repositorybrowser||"aceeditor"===e.params.owner.getProxyMetadata().getName()&&n)&&t.doUpdate(e.params.selection[0].document)}).done():t._oGitLogView&&t._oGitLogView.getController().clearPane())},onDocumentDeleted:function(e){if(e&&e.params&&e.params.document){var t=e.params.document;this._oSelectedDocument===t&&this._oGitLogView&&(this._oSelectedDocument=null,this._oGitLogView.getController().clearPane())}},doUpdate:function(e){if(e=e||this._oSelectedDocument,e&&e.getEntity&&e.getEntity().getBackendData()){var t=this.isVisible();if(!e.getEntity().getBackendData().git)return this._oSelectedDocument=null,t&&this._oGitLogView&&this._oGitLogView.getController().clearPane(),void 0;this._oSelectedDocument=e;var n=this._oSelectedDocument.getEntity();t&&this._oGitLogView&&this._oGitLogView.getController().updateGitLogPane(n,n.getName())}},setVisible:function(t,n){var r=this;return n=n?n:r._DEFAULT_LOG_LOCATION,e.prototype.setVisible.apply(this,arguments).then(function(){return t&&(r.context.service.usagemonitoring.report("gitlog","pane_open",n).done(),r.doUpdate()),Q()})},_analyzeValidGitLog:function(e){return 1===e.length&&e[0]&&e[0].document&&e[0].document.getEntity()&&e[0].document.getEntity().getBackendData()&&e[0].document.getEntity().getBackendData().git?!0:!1},isEnabled:function(e){var t=this._analyzeValidGitLog(e);return t}});return t}),define("sap.watt.ideplatform.gitclient/service/Clone",{_oCloneView:void 0,configure:function(e){this._aStyles=e.styles,this._aStyles&&this.context.service.resource.includeStyles(this._aStyles).done()},getContent:function(){return this._oCloneView||(this._oCloneView=sap.ui.view({viewName:"sap.watt.ideplatform.plugin.gitclient.view.GitCloneDialog",type:sap.ui.core.mvc.ViewType.JS,viewData:{service:this.context.service,context:this.context}})),this._oCloneView},getFocusElement:function(){return this.getContent()},doClone:function(e,t){return this._oCloneView||this.getContent(),this._oCloneView.getController().open(e,t)}}),define("sap.watt.ideplatform.gitclient/service/GitDispatcher",[],function(){var e={_DEFAULT_LOG_LOCATION:"from_pane",_oAuthenticationView:null,_oFetchView:null,_oBranchesView:null,_oUserInfoDialog:null,_oStashDialogView:null,_oUseStashDialogView:null,_oIgnoreSystemFilesDialogView:null,configure:function(e){this._aStyles=e.styles,this._aStyles&&this.context.service.resource.includeStyles(this._aStyles).done()},initRepository:function(e,t){var n=this,r=e.getEntity();return t=t?t:n._DEFAULT_LOG_LOCATION,n.context.service.git.initRepository(r.getName(),r.getBackendData().location,r.getFullPath()).then(function(){n.context.service.usagemonitoring.report("git","init",t).done()}).fail(function(e){n._callMessageDialog(e)})},fetchFromUpstream:function(e,t){var n=this,r=!0,i=this.context.service.usagemonitoring;return t=t?t:n._DEFAULT_LOG_LOCATION,this._getRepositoryDetails(e,!1,"FETCH").then(function(o){return o?(i.startPerf("git","fetch").done(),n.context.event.fireOperationStarted({entity:e,name:"FETCH"}).done(),n.context.service.git.fetch(o.oGit,o.oDetails,o.sshPrivateKey,o.httpsPass,o.gitUsername).then(function(e){n.context.event.fireFetchCompleted().done(),n.context.service.git.isFeatureSupported("DisplayFetchResults").then(function(t){t?n._getFetchChangesDialog().getController().open(e):n.context.service.usernotification.liteInfo(n.context.i18n.getText("i18n","gitDispatcher_FetchCompletedSuccessfully",!0)).done()}).then(function(){i.report("git","fetch",t).done()})}).fail(function(e){return r=!n._isNotAuthorized(e),Q.reject(e)}).fin(function(){r&&n._saveToStorage(o)})):Q()}).fail(function(e){n._callMessageDialog(e)}).fin(function(){n.context.event.fireOperationStopped({entity:e,name:"FETCH"}).done()})},stash:function(e,t){var n=this;t=t?t:n._DEFAULT_LOG_LOCATION;var r=e.getBackendData().git;return n.context.event.fireOperationStarted({entity:e,name:"STASH"}).done(),n.context.service.git.getLocalBranches(r).then(function(i){return n.context.service.git.getCurrentBranchName(i).then(function(i){return n._getStashDialog().getController().open(i).then(function(i){return"CANCEL"!==i?n.context.service.git.stash(r,i).then(function(){n.context.service.usagemonitoring.report("git","stash",t).done(),n.context.event.fireStashCompleted({message:"gitDispatcher_StashCompletedSuccessfully"}).done()}).fail(function(e){n._callMessageDialog(e)}).fin(function(){n.context.service.usernotification.liteInfo(n.context.i18n.getText("i18n","gitDispatcher_StashCompletedSuccessfully",!0)).done(),n.context.event.fireOperationStopped({entity:e,name:"STASH"}).done()}):(n.context.event.fireOperationStopped({entity:e,name:"STASH"}).done(),void 0)})})})},isStashAvailable:function(e){var t=e.getBackendData().git;return this.context.service.git.getStash(t).then(function(e){var t=e.Children&&e.Children.length>0?!0:!1;return t})},useStash:function(e,t){var n=this;t=t?t:n._DEFAULT_LOG_LOCATION;var r=e.getBackendData().git;return n.context.event.fireOperationStarted({entity:e,name:"USESTASH"}).done(),n.context.service.git.getStash(r).then(function(i){return i.Children&&i.Children.length>0?n._getUseStashDialog().getController().open(i).then(function(i){return"CANCEL"!==i?n.context.service.git.useStash(r,i).then(function(){n.context.event.fireUseStashCompleted({message:"gitDispatcher_UseStashCompletedSuccessfully"}).done()}).fail(function(r){409===r.status&&n.context.service.gitclient.getStatus(e,!1).then(function(e){if(n.context.service.usagemonitoring.report("git","show stash",t).done(),e.length>0){r.detailedMessage=n.context.i18n.getText("i18n","gitDispatcher_UseStashConflictWithoutCommit",!0);for(var i=0;i<e.length;i++)if("C"===e[i].Status){r.detailedMessage=n.context.i18n.getText("i18n","gitDispatcher_UseStashConflictWithCommit",!0);break}}else r.type="Warning",r.detailedMessage=n.context.i18n.getText("i18n","gitDispatcher_UseStashConflictWithCommit",!0);n.context.event.fireStashConflict().done(),n._callMessageDialog(r)})}).fin(function(){n.context.service.usernotification.liteInfo(n.context.i18n.getText("i18n","gitDispatcher_UseStashCompletedSuccessfully",!0)).done(),n.context.event.fireOperationStopped({entity:e,name:"USESTASH"}).done()}):(n.context.event.fireOperationStopped({entity:e,name:"USESTASH"}).done(),void 0)}):(n.context.event.fireOperationStopped({entity:e,name:"USESTASH"}).done(),n.context.service.usernotification.alert(n.context.i18n.getText("i18n","gITUseStashDialog_no_stash_error")).done(),void 0)})},fetchFromGerrit:function(e,t){var n=this;t=t?t:n._DEFAULT_LOG_LOCATION;var r=null;return this._getRepositoryDetails(e,!0,"FETCHGERRIT").then(function(t){return t?(n.context.event.fireOperationStarted({entity:e,name:"FETCHGERRIT"}).done(),r=t,n._fetchFromGerrit(t)):Q()}).fail(function(t){if(409===t.status){var i={files:t.files,checkoutBranch:t.sBranchName};return n.context.service.gitconflicts.openDialog(e,i).then(function(e){return e?n._fetchFromGerrit(r):void 0})}n._callMessageDialog(t)}).fin(function(){n.context.event.fireOperationStopped({entity:e,name:"FETCHGERRIT"}).done()})},_fetchFromGerrit:function(e,t){var n=this,r=!0,i=this.context.service;return i.git.fetchFromGerrit(e.oGit,e.oDetails,e.oEntity.getName(),e.change,e.sshPrivateKey,e.httpsPass,e.gitUsername).then(function(){n.context.service.usagemonitoring.report("git","fetch from gerrit",t).done(),n.context.event.fireFetchFromGerritCompleted({message:"gitDispatcher_FetchfromGerritCompletedSuccessfully"}).done()}).fail(function(e){return r=!n._isNotAuthorized(e),Q.reject(e)}).fin(function(){r&&n._saveToStorage(e)})},pull:function(e,t){var n=this,r=!0;t=t?t:n._DEFAULT_LOG_LOCATION;var i=this.context.service;return this._getRepositoryDetails(e,!1,"PULL").then(function(o){return o?(n.context.event.fireOperationStarted({entity:e,name:"PULL"}).done(),i.git.pull(o.oGit,o.oDetails,o.sshPrivateKey,o.httpsPass,o.gitUsername).then(function(){n.context.event.firePullCompleted().done(),i.usernotification.liteInfo(n.context.i18n.getText("i18n","gitDispatcher_PullCompletedSuccessfully",!0)).done(),n.context.service.usagemonitoring.report("git","pull",t).done()}).fail(function(e){return r=!n._isNotAuthorized(e),Q.reject(e)}).fin(function(){r&&n._saveToStorage(o)})):Q()}).fail(function(e){"Conflicts"===e.status&&n.context.event.firePullCompletedWithConflict().done(),n._callMessageDialog(e)}).fin(function(){n.context.event.fireOperationStopped({entity:e,name:"PULL"}).done()})},pushTo:function(e,t,n,r){var i=this,o=e.getBackendData().git;return this.context.service.git.getRemoteBranches(o).then(function(o){return o?i._getBranchesDialog().getController().open({remoteBranches:o},e,"PUSH",t).then(function(o){var a=o[0],s=o[1];return a?i._pushInternal(e,t,s,a,n,r):void 0}):void 0})},push:function(e,t,n,r,i){this._pushInternal(e,t,!1,n,r,i)},_pushInternal:function(e,t,n,r,i,o){var a=this,s=!0,u=this.context.service,c=this.context.i18n;return o=o?o:a._DEFAULT_LOG_LOCATION,this._getRepositoryDetails(e,!1,!0).then(function(e){return e?a.context.service.git.push(e.oGit,t,e.oDetails,e.sshPrivateKey,e.httpsPass,e.gitUsername,r,i,n).then(function(e){if(e&&e.sDetailedMessage&&(-1!==e.sDetailedMessage.indexOf("New Changes:")||-1!==e.sDetailedMessage.indexOf("Updated Changes:"))){var t=e.sDetailedMessage,n=a._getPushNotificationfragment(),r=n.getModel();r.setProperty("/sChanges",-1!==t.indexOf("New Changes:")?c.getText("i18n","gitDispatcher_pushNewChanges"):c.getText("i18n","gitDispatcher_pushUpdatedChanges")),r.setProperty("/aNotificationLinks",a._getPushNotificationUrls(t)),r.setProperty("/sPushCompletedMessage",c.getText("i18n","gitDispatcher_pushCompletedSuccessfully")),e.aFailedTags.length>0&&(r.setProperty("/sPushCompletedMessage",c.getText("i18n","gitDispatcher_pushCompletedWithTagErrors")),r.setProperty("/sFailedPushedTags",c.getText("i18n","gitDispatcher_pushFailedTags",[e.aFailedTags.join()])),r.setProperty("/isFailedPushedTags",!0)),e.aSuccessTags.length>0&&(r.setProperty("/sSuccessfullyPushedTags",c.getText("i18n","gitDispatcher_SuccessTags",[e.aSuccessTags.join()])),r.setProperty("/isSuccessfullyPushedTags",!0)),n.open()}else u.usernotification.liteInfo(c.getText("i18n","gitDispatcher_pushCompletedSuccessfully",!0)).done();a.context.event.firePushCompleted().done(),a.context.service.usagemonitoring.report("git","push",o).done()}).fail(function(e){return s=!a._isNotAuthorized(e),Q.reject(e)}).fin(function(){s&&a._saveToStorage(e)}):Q()}).fail(function(e){if("Warning"===e.type)u.usernotification.warning(e.name).done();else if("PushFailed"===e.status){var t=e.oErrorPushResponse,n=t.oPushedCommit,r=n.Result,i=n.Message?c.getText("i18n","gitDispatcher_pushErrorMessage",[c.getText("i18n","gitDispatcher_pushFailureReason")+" "+n.Message.charAt(0).toUpperCase()+n.Message.substring(1)+"\n\n"," "+r]):c.getText("i18n","gitDispatcher_pushErrorMessage",[""," "+r]);t.sDetailedMessage&&(i+=c.getText("i18n","gitDispatcher_pushDetailedFailureReason",["\n\n ","\n "+t.sDetailedMessage])),t.aFailedTags.length>0&&(i+="\n\n "+c.getText("i18n","gitDispatcher_pushFailedTags",[t.aFailedTags.join()])),t.aSuccessTags.length>0&&(i+="\n\n "+c.getText("i18n","gitDispatcher_SuccessTags",[t.aSuccessTags.join()])),a._callMessageDialog({source:"git",name:e.name,detailedMessage:i})}else a._callMessageDialog(e)})},merge:function(e,t,n){var r=this;n=n?n:r._DEFAULT_LOG_LOCATION;var i=this.context.service,o=e.getBackendData().git;return this.context.event.fireOperationStarted({entity:e,name:"MERGE"}).done(),Q.all([i.git.getLocalBranches(o),i.git.getRemoteBranches(o)]).spread(function(n,i){return r._getBranchesDialog().getController().open({localBranches:n,remoteBranches:i},e,"MERGE",t)}).then(function(e){e&&(i.usernotification.liteInfo(r.context.i18n.getText("i18n","gitDispatcher_MergeCompletedSuccessfully",!0)).done(),r.context.event.fireMergeCompleted().done(),r.context.service.usagemonitoring.report("git","merge",n).done())}).fail(function(e){r.context.event.fireMergeCompleted().done(),e&&r._callMessageDialog(e)}).fin(function(){r.context.event.fireOperationStopped({entity:e,name:"MERGE"}).done()})},rebase:function(e,t){var n=this;t=t?t:n._DEFAULT_LOG_LOCATION;var r=this.context.service,i=e.getBackendData().git;return this.context.event.fireOperationStarted({entity:e,name:"REBASE"}).done(),Q.all([r.git.getLocalBranches(i),r.git.getRemoteBranches(i)]).spread(function(t,r){return n._getBranchesDialog().getController().open({localBranches:t,remoteBranches:r},e,"REBASE")}).then(function(e){e?(n.context.event.fireRebaseCompleted({message:"gitDispatcher_RebaseCompletedSuccessfully"}).done(),n.context.service.usagemonitoring.report("git","rebase",t).done()):n.context.event.fireRebaseInteractive().done()}).fail(function(e){e&&e.message&&r.usernotification.alert(e.message).done()}).fin(function(){n.context.event.fireOperationStopped({entity:e,name:"REBASE"}).done()})},reset:function(e,t,n){var r=this,i=this.context.service,o=e.getBackendData().git;return n=n?n:r._DEFAULT_LOG_LOCATION,t?i.usernotification.confirm(r.context.i18n.getText("i18n","gitDispatcher_resetInRebaseInteractiveConfirmation",["\n\n"])).then(function(t){return t.bResult?(r.context.event.fireOperationStarted({entity:e,name:"RESET"}).done(),i.git.resetBranch(o,"HARD").then(function(){r.context.event.fireResetCompleted().done(),i.usernotification.liteInfo(r.context.i18n.getText("i18n","gitDispatcher_ResetCompletedSuccessfully",!0)).done(),r.context.service.usagemonitoring.report("git","reset",n).done()})):void 0}).fin(function(){r.context.event.fireOperationStopped({entity:e,name:"RESET"}).done()}):(this.context.event.fireOperationStarted({entity:e,name:"RESET"}).done(),Q.all([i.git.getLocalBranches(o),i.git.getRemoteBranches(o)]).spread(function(t,n){return r._getBranchesDialog().getController().open({localBranches:t,remoteBranches:n},e,"RESET")}).then(function(e){e&&(r.context.event.fireResetCompleted().done(),i.usernotification.liteInfo(r.context.i18n.getText("i18n","gitDispatcher_ResetCompletedSuccessfully",!0)).done(),r.context.service.usagemonitoring.report("git","reset",n).done())}).fin(function(){r.context.event.fireOperationStopped({entity:e,name:"RESET"}).done()}))},ignore:function(e,t){var n=this;return t=t?t:n._DEFAULT_LOG_LOCATION,this.context.service.git.setIgnore(e).then(function(){return n.context.service.usagemonitoring.report("git","ignore",t).done(),n.context.event.fireIgnoreCompleted()})},untrackAndIgnore:function(e){var t=this,n=e.getBackendData().git;return t.context.service.git.untrack(n).then(function(){return t.context.service.git.setIgnore(e).then(function(){return t.context.event.fireIgnoreCompleted()})}).fail(function(e){e&&t._callMessageDialog(e)})},ignoreSystemFiles:function(e,t){var n=this;return t=t?t:n._DEFAULT_LOG_LOCATION,this.context.service.git.setIgnoreSystemFiles(e).then(function(t){return t&&e.getEntity().getBackendData()&&e.getEntity().getBackendData().git?n._getIgnoreSystemFilesDialog().getController().open().then(function(t){if("CANCEL"!==t){var r=t,i=e.getEntity().getBackendData().git;return n.verifyUserInfo(e.getEntity()).then(function(t){return n.verifyIsGerrit(e.getEntity()).then(function(o){return n.context.service.git.commit(i,r,t,!1,o).then(function(){return n.context.service.git.getLocalBranches(i).then(function(t){return n.context.service.git.getCurrentBranchName(t).then(function(){return n.push(e.getEntity(),o,void 0,!0,void 0)})})})})})}}):void 0}).fin(function(){return n.context.service.usagemonitoring.report("git","ignoreSystemFiles",t).done(),n.context.event.fireIgnoreSystemFilesCompleted({document:e})})},openCompareEditor:function(e,t,n,r){var i=this;return r=r?r:"from_pane",i._openCompareEditor(e,t,n).then(function(){i.context.service.usagemonitoring.report("git","compare",r).done()})},_openCompareEditor:function(e,t,n){var r=this;if(e){if(n){var i=[e.getVersion("CONFLICT_NEW","gitFileDao"),e.getVersion("CONFLICT_OLD","gitFileDao")];return Q.all(i).spread(function(e,t){return r.context.service.compare.compare(e,t)})}return t?Q.all([r.context.service.git.getFileHead(e.getEntity().getBackendData().git,t),r.context.service.git.getFileNew(e.getEntity().getBackendData().git,t)]).spread(function(t,n){return r.context.service.compare.compare(e,t,n)}):this.context.service.git.getFileHead(e.getEntity().getBackendData().git,t).then(function(t){return r.context.service.compare.compare(e,t)})}},_saveToStorage:function(e){if(e.saveToCache){var t=URI(e.oDetails.GitUrl).host(),n=URI(e.oDetails.GitUrl).protocol();"ssh"===n?this.context.service.keystorage.setSsh(t,e.gitUsername,e.sshPrivateKey).done():"https"===n&&this.context.service.keystorage.setHttps(t,e.gitUsername,e.httpsPass).done()}},_getRepositoryDetails:function(e,t,n){var r=this,i=e.getBackendData().git;return this.context.event.fireOperationStarted({entity:e,name:n}).done(),this.context.service.git.getRepositoryDetails(i).then(function(o){return r.context.event.fireOperationStopped({entity:e,name:n}).done(),r._getAuthenticationView().getController().open(o.GitUrl,t).then(function(t){return t?Q({oEntity:e,oGit:i,oDetails:o,gitUsername:t.userName,sshPrivateKey:t.sshPrivateKey,httpsPass:t.httpsPassword,change:t.change,saveToCache:t.saveToCache}):Q()})})},verifyIsGerrit:function(e){var t=this,n=e.getBackendData().git;return Q(n?t.context.service.git.getRepositoryConfigurations(n):[]).then(function(e){for(var t=!1,n=0;n<e.length;n++)if("gerrit.createchangeid"===e[n].Key){"string"==typeof e[n].Value?t="true"===e[n].Value:e[n].Value.constructor===Array&&(t="true"===e[n].Value[0]);break}return t})},verifyUserInfo:function(e){var t=this,n=e.getBackendData().git;return Q(n?this.context.service.git.getRepositoryConfigurations(n):[]).then(function(r){for(var i={},o=0;o<r.length;o++){var a=r[o];"user.email"===a.Key&&a.Value?i.sEmail=a.Value:"user.name"===a.Key&&a.Value&&(i.sName=a.Value)}return i.sEmail?void 0:t.context.service.git.getGitSettings().then(function(r){return r&&r.sEmail?(n&&t.context.service.git.setRepositoryConfiguration(n,{Key:"user.email",Value:r.sEmail}).then(function(){return t.context.service.git.setRepositoryConfiguration(n,{Key:"user.name",Value:r.sName})}).done(),void 0):t.context.service.system.getSystemInfo().then(function(n){var r=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,i=t._getUserInfoDialog(),o=i.getModel();return n&&r.test(n.sEMail)?(o.setProperty("/commitData/email",n.sEMail),o.setProperty("/commitData/user",n.sFirstName+" "+n.sLastName),o.setProperty("/commitData/bButtonEnabled",!0)):o.setProperty("/commitData/bButtonEnabled",!1),o.setProperty("/commitData/bError",!1),o.setProperty("/entity",e),i.open(),t._oUserInfoPromis=Q.defer(),t._oUserInfoPromis.promise})})})},_handleUserInfo:function(e){var t=this,n=this._getUserInfoDialog(),r=n.getModel(),i=r.getProperty("/entity").getBackendData().git,o={sEmail:r.getProperty("/commitData/email"),sName:r.getProperty("/commitData/user")};return n.close(),"sapescape"===e.type||e.getSource().data("close")?(t._oUserInfoPromis.reject(),void 0):(Q(i?this.context.service.git.setRepositoryConfiguration(i,{Key:"user.email",Value:o.sEmail}).then(function(){return t.context.service.git.setRepositoryConfiguration(i,{Key:"user.name",Value:o.sName})}):"").then(function(){return t.context.service.git.setGitSettings(o.sEmail,o.sName).then(function(){t._oUserInfoPromis.resolve()})}).fail(function(e){t._oUserInfoPromis.reject(),t._callMessageDialog(e)}).done(),void 0)},_callMessageDialog:function(e){if(!e.source||"git"!==e.source)throw e;var t=e.detailedMessage?"\n\n"+e.detailedMessage:"";switch(e.type){case"Warning":this.context.service.usernotification.warning(e.name+t).done();break;case"Info":this.context.service.usernotification.info(e.name+t).done();break;default:this.context.service.usernotification.alert(e.name+t).done()}},_getUserInfoDialog:function(){if(!this._oUserInfoDialog){var e={commitData:{email:"",user:"",bSaved:!0,bButtonEnabled:!1,bError:!1},entity:{}};this._oUserInfoDialog=sap.ui.jsfragment("sap.watt.ideplatform.plugin.gitclient.view.GitUserInfoDialog",this),this._oUserInfoDialog.setModel(new sap.ui.model.json.JSONModel(e)),this.context.i18n.applyTo(this._oUserInfoDialog)
}return this._oUserInfoDialog},_getAuthenticationView:function(){return this._oAuthenticationView||(this._oAuthenticationView=sap.ui.view({viewName:"sap.watt.ideplatform.plugin.gitclient.view.GitAuthentication",type:sap.ui.core.mvc.ViewType.JS,viewData:{context:this.context}})),this._oAuthenticationView},_getFetchChangesDialog:function(){return this._oFetchView||(this._oFetchView=sap.ui.view({viewName:"sap.watt.ideplatform.plugin.gitclient.view.GitFetchDialog",type:sap.ui.core.mvc.ViewType.JS,viewData:{context:this.context}})),this._oFetchView},_getBranchesDialog:function(){return this._oBranchesView||(this._oBranchesView=sap.ui.view({viewName:"sap.watt.ideplatform.plugin.gitclient.view.GitBranchesDialog",type:sap.ui.core.mvc.ViewType.JS,viewData:{context:this.context}})),this._oBranchesView},_getIgnoreSystemFilesDialog:function(){return this._oIgnoreSystemFilesDialogView||(this._oIgnoreSystemFilesDialogView=sap.ui.view({viewName:"sap.watt.ideplatform.plugin.gitclient.view.GitIgnoreSystemFilesDialog",type:sap.ui.core.mvc.ViewType.JS,viewData:{context:this.context}})),this._oIgnoreSystemFilesDialogView},_getStashDialog:function(){return this._oStashDialogView||(this._oStashDialogView=sap.ui.view({viewName:"sap.watt.ideplatform.plugin.gitclient.view.GitStashDialog",type:sap.ui.core.mvc.ViewType.JS,viewData:{context:this.context}})),this._oStashDialogView},_getUseStashDialog:function(){return this._oUseStashDialogView||(this._oUseStashDialogView=sap.ui.view({viewName:"sap.watt.ideplatform.plugin.gitclient.view.GitUseStashDialog",type:sap.ui.core.mvc.ViewType.JS,viewData:{context:this.context}})),this._oUseStashDialogView},_getPushNotificationfragment:function(){if(this._oPushNotificationfragment){var e=this._oPushNotificationfragment.getModel();e.setProperty("/sSuccessfullyPushedTags",""),e.setProperty("/sFailedPushedTags",""),e.setProperty("/aNotificationLinks",[])}else{var t=new sap.ui.model.json.JSONModel;t.setData({aNotificationLinks:[],sChanges:"",sSuccessfullyPushedTags:"",sFailedPushedTags:"",isSuccessfullyPushedTags:!1,isFailedPushedTags:!1,sPushCompletedMessage:""}),this._oPushNotificationfragment=sap.ui.jsfragment("sap.watt.ideplatform.plugin.gitclient.view.GitPushNotification",this),this._oPushNotificationfragment.setModel(t),this.context.i18n.applyTo(this._oPushNotificationfragment)}return this._oPushNotificationfragment},_getPushNotificationUrls:function(e){for(var t=e.indexOf("New Changes:")>-1?e.substring(e.indexOf("New Changes:")).trim():e.substring(e.indexOf("Updated Changes:")).trim(),n=t.split("\n"),r=[],i=1;i<n.length;i++){var o=n[i].trim().split(" ");r.push({link:o[0]})}return r},_isNotAuthorized:function(e){return e.detailedMessage&&e.detailedMessage.indexOf("not authorized")>-1?!0:!1}};return e}),define("sap.watt.ideplatform.gitclient/service/KeyStorage",{_oSsh:{},_oHttps:{},get:function(e,t){if("SSH"===t.toUpperCase())return this._oSsh[e];if("HTTPS"===t.toUpperCase())return this._oHttps[e];throw new Error("Unsupported type")},setSsh:function(e,t,n){this._oSsh[e]={username:t,key:n}},setHttps:function(e,t,n){this._oHttps[e]={username:t,password:n}},resetKeys:function(){this._oSsh={},this._oHttps={}}}),define("sap.watt.ideplatform.gitclient/service/GitCheckoutConflictsHandler",{_oCheckoutConflictsFragment:null,_oCheckoutConflictsDeferred:null,_aBranches:null,_oEntity:null,getContent:function(){this._oCheckoutConflictsFragment||(this._oCheckoutConflictsFragment=sap.ui.jsfragment("sap.watt.ideplatform.plugin.gitclient.view.GitCheckoutConflicts",this),this._oCheckoutConflictsFragment.setModel(new sap.ui.model.json.JSONModel),this.context.i18n.applyTo(this._oCheckoutConflictsFragment))},_getBranches:function(e){var t=this;return this.context.service.git.getLocalBranches(e).then(function(e){t._aBranches=e}).fail(function(e){t.callMessageDialog(e),t._oCheckoutConflictsDeferred.reject(e)})},callMessageDialog:function(e){if(!e.source||"git"!==e.source)throw e;var t=e.detailedMessage?"\n\n"+e.detailedMessage:"";switch(e.type){case"Warning":this._oContext.service.usernotification.warning(e.name+t).done();break;case"Info":this._oContext.service.usernotification.info(e.name+t).done();break;default:this._oContext.service.usernotification.alert(e.name+t).done()}},openDialog:function(e,t,n){var r=this;this._oEntity=e,this._aBranches=n;var i=e.getBackendData().git;return this._oCheckoutConflictsFragment||this.getContent(),Q(this._aBranches?this._aBranches:this._getBranches(i)).then(function(){r._oCheckoutConflictsFragment.open()}).done(),this._oCheckoutConflictsFragment.getModel().setData(t),this._oCheckoutConflictsDeferred=Q.defer(),this._oCheckoutConflictsDeferred.promise},cancel:function(){this._oCheckoutConflictsFragment.close(),this._oCheckoutConflictsDeferred.resolve(!1)},resetHard:function(){var e=this,t=this._oEntity.getBackendData().git;this._oCheckoutConflictsFragment.close(),this.context.service.git.getRemoteBranchOfCurrent(e._aBranches).then(function(n){return e.context.service.usernotification.confirm(e.context.i18n.getText("i18n","gitDispatcher_resetInRebaseInteractiveConfirmation",["\n\n"])).then(function(r){return r.bResult?e.context.service.git.resetBranch(t,"HARD",n).then(function(){e._oCheckoutConflictsDeferred.resolve(!0)}):(e._oCheckoutConflictsDeferred.resolve(!1),void 0)})}).fail(function(t){e._oCheckoutConflictsDeferred.reject(t)}).done()}}),define("sap.watt.ideplatform.gitclient/service/GitSettings",["sap/watt/common/plugin/platform/service/ui/AbstractConfig"],function(e){"use strict";return e.extend("sap.watt.common.plugin.gitclient.service.GitSettings",{_oContent:null,getUserPreferenceContent:function(){var e=this;return this._oContent||(this._oContent=this._createUI()),e.context.service.git.isFeatureSupported("GitUserAndEmail").then(function(t){if(t)return e.context.service.git.getGitSettings().then(function(t){return Q(t&&t.sEmail?t:e.context.service.system.getSystemInfo().then(function(t){var n=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(t&&n.test(t.sEMail)){var r=e.context.i18n.getText("gITSettings_auto_fill_IDP");return r+=e.context.i18n.getText("gITSettingsDialog_Git_Email_Address")+" "+t.sEMail+"\n\n",(t.sLastName||t.sFirstName)&&(r+=e.context.i18n.getText("gITSettingsDialog_Git_User_Name")+" ",r+=t.sLastName?t.sLastName+" ":"",r+=t.sFirstName),e.context.service.usernotification.confirm(r).then(function(n){return n.bResult?(e.context.service.git.setGitSettings(t.sEMail,t.sLastName+" "+t.sFirstName).fail(function(t){e._callMessageDialog(t)}).done(),{sName:t.sLastName+" "+t.sFirstName,sEmail:t.sEMail}):{sName:"",sEmail:""}})}return{sName:"",sEmail:""}})).then(function(t){return e._oContent.getModel().setProperty("/modelData",t),e._oContent})}).fail(function(t){e._callMessageDialog(t)});var n={sName:"",sEmail:"",isUserAndEmailSupported:t};return e._oContent.getModel().setProperty("/modelData",n),e._oContent})},saveUserPreference:function(){var e=this._oContent.getModel().getData().modelData,t=this;return this.context.service.git.setGitSettings(e.sEmail,e.sName).fail(function(e){t._callMessageDialog(e)})},_callMessageDialog:function(e){if(!e.source||"git"!==e.source)throw e;var t=e.detailedMessage?"\n\n"+e.detailedMessage:"";switch(e.type){case"Warning":this.contextcontextcontext.service.usernotification.warning(e.name+t).done();break;case"Info":this.contextcontext.service.usernotification.info(e.name+t).done();break;default:this.context.service.usernotification.alert(e.name+t).done()}},_createUI:function(){var e=new sap.ui.commons.TextField({width:"100%",value:"{sEmail}",editable:"{isUserAndEmailSupported}",layoutData:new sap.ui.layout.GridData({span:"L7 M7 S7"})}),t=new sap.ui.commons.Label({labelFor:e,text:"{i18n>gITSettingsDialog_Git_Email_Address}",width:"100%",layoutData:new sap.ui.layout.GridData({span:"L3 M3 S5",linebreak:!0})}),n=new sap.ui.commons.TextField({width:"100%",value:"{sName}",editable:"{isUserAndEmailSupported}",layoutData:new sap.ui.layout.GridData({span:"L7 M7 S7"})}),r=new sap.ui.commons.Label({labelFor:n,text:"{i18n>gITSettingsDialog_Git_User_Name}",width:"100%",layoutData:new sap.ui.layout.GridData({span:"L3 M3 S5",linebreak:!0})}),i=new sap.ui.layout.Grid({vSpacing:1,width:"100%",content:[t,e,r,n]});return i.setModel(new sap.ui.model.json.JSONModel({modelData:{sName:"",sEmail:""}})),i.bindElement("/modelData"),this.context.i18n.applyTo(i),i}})}),define("sap.watt.ideplatform.gitclient/service/GitConfigurations",["sap/watt/common/plugin/platform/service/ui/AbstractConfig"],function(e){"use strict";return e.extend("sap.watt.ideplatform.gitclient.service.GitConfigurations",{_oContent:null,_oGit:null,getProjectSettingContent:function(){var e=this;return this.context.service.selection.getSelection().then(function(t){return t&&t[0]&&t[0].document&&t[0].document.getEntity().getBackendData().git?(e._oGit=t[0].document.getEntity().getBackendData().git,e._getAndUpdateRepositoryConfigurations().then(function(){return e._oContent})):e._setMissingConfigurations()}).fail(function(t){e._callMessageDialog(t)})},saveProjectSetting:function(){var e=this,t=[],n=this._oContent.getModel();n.getProperty("/modelData/isKeyValid")&&n.getProperty("/modelData/isValueValid")&&t.push({operation:"add"});for(var r=this._oContent.getContent(),i=0;i<r.length;i++){var o=r[i];if(o.data().grid)for(var a=o.getContent(),s=0;s<a.length;s++)for(var u=a[s].getContent(),c=0;c<u.length;c++){var l=u[c];if(l.data().value)var p=l.getValue(),f=l;if(l.data().lineLayout)for(var d=l.getContent(),h=0;h<d.length;h++){var m=d[h];m.data().save&&m.getEnabled()&&t.push({operation:"update",index:s,value:p,saveButton:m,valueTextField:f})}}}var g=function(t){return function(){return"add"===t.operation?e._addAndSaveConfigEntry("saveAll"):"update"===t.operation?e._saveConfigEntry(null,t):void 0}},v=Q();for(i=0;i<t.length;i++)v=v.then(g(t[i]));return v.fin(function(){return t.length>0?e._getAndUpdateRepositoryConfigurations():void 0})},_getAndUpdateRepositoryConfigurations:function(){var e,t=this;return t.context.service.git.getRepositoryConfigurations(this._oGit).then(function(n){return n&&0!==n.length?(t._oContent||(jQuery.sap.includeStyleSheet("resources/sap/watt/ideplatform/plugin/gitclient/css/gitConfigurations.css"),t._oContent=t._createUI(),e=new sap.ui.model.json.JSONModel,e.setData({configurations:[],modelData:{key:"",value:"",isKeyValid:!1,isValueValid:!1,isAddLineVisible:!1}}),t._oContent.setModel(e),t.context.i18n.applyTo(t._oContent)),e=t._oContent.getModel(),e.setProperty("/configurations",[]),e.setProperty("/configurations",n),e.setProperty("/modelData/isAddLineVisible",!1),void 0):t._setMissingConfigurations()})},_getLineIndex:function(e){var t=e.getSource().getBindingContext().sPath,n=t.split("/");return n[n.length-1]},_deleteConfigEntry:function(e){var t=this,n=this._getLineIndex(e),r=this._oContent.getModel(),i=r.getProperty("/configurations");this.context.service.git.deleteRepositoryConfiguration(i[n]).then(function(){i.splice(n,1),r.setProperty("/configurations",i)}).fail(function(e){t._callMessageDialog(e)}).done()},_editConfigEntry:function(e){for(var t=e.getSource().getParent(),n=t.getContent(),r=0;r<n.length;r++){var i=n[r];i.data().save&&i.setEnabled(!0)}var o=t.getParent().getContent();for(r=0;r<o.length;r++){var a=o[r];a.data().value&&a.setEnabled(!0)}},_verifyValueInputIsNotEmpty:function(e){for(var t=e.getSource().getParent().getContent(),n=0;n<t.length;n++){var r=t[n];if(r.data().lineLayout){for(var i=r.getContent(),o=0;o<i.length;o++){var a=i[o];if(a.data().save){a.setEnabled(!!e.getParameter("liveValue"));break}}break}}},_saveConfigEntry:function(e,t){var n,r,i,o,a=this,s=this._oContent.getModel(),u=s.getProperty("/configurations");if(t)n=t.index,r=t.value,i=t.valueTextField,o=t.saveButton;else{n=this._getLineIndex(e);for(var c=e.getSource().getParent(),l=c.getContent(),p=0;p<l.length;p++){var f=l[p];f.data().save&&(o=f)}var d=c.getParent().getContent();for(p=0;p<d.length;p++){var h=d[p];if(h.data().value){i=h,r=h.getValue();break}}}var m=r;a.context.service.git.updateRepositoryConfiguration(u[n],{Value:m}).then(function(){i.setEnabled(!1),o.setEnabled(!1)}).fail(function(e){a._callMessageDialog(e)})},_addAndSaveConfigEntry:function(e){var t=this,n=this._oContent.getModel();return this.context.service.git.setRepositoryConfiguration(t._oGit,{Key:n.getProperty("/modelData/key"),Value:n.getProperty("/modelData/value")}).then(function(){return n.setProperty("/modelData/isKeyValid",!1),n.setProperty("/modelData/isValueValid",!1),"saveAll"!==e?t._getAndUpdateRepositoryConfigurations():void 0}).fail(function(e){t._callMessageDialog(e)})},_changeConfigEntryLineState:function(){var e=this._oContent.getModel(),t=e.getProperty("/modelData/isAddLineVisible");e.setProperty("/modelData/isAddLineVisible",!t),t||(e.setProperty("/modelData/key",""),e.setProperty("/modelData/value",""),e.setProperty("/modelData/isKeyValid",!1),e.setProperty("/modelData/isValueValid",!1))},_verifyKeyInput:function(e){var t=this._oContent.getModel();t.setProperty("/modelData/isKeyValid",!1);var n=e.getParameter("liveValue");if(n){var r=new RegExp("[^\\.]+\\.[^\\.]+");if(r.test(n)){this._oContent.getModel().getProperty("/configurations");for(var i=this._oContent.getModel().getProperty("/configurations"),o=0;o<i.length;o++)if(n===i[o].Key)return;t.setProperty("/modelData/isKeyValid",!0)}}},_verifyValueInput:function(e){this._oContent.getModel().setProperty("/modelData/isValueValid",!!e.getParameter("liveValue"))},_setMissingConfigurations:function(){var e=new sap.ui.commons.Label({text:"{i18n>git_configuration_no_configurations}"});return this.context.i18n.applyTo(e),e},_callMessageDialog:function(e){if(!e.source||"git"!==e.source)throw e;var t=e.detailedMessage?"\n\n"+e.detailedMessage:"";switch(e.type){case"Warning":this.context.service.usernotification.warning(e.name+t).done();break;case"Info":this.context.service.usernotification.info(e.name+t).done();break;default:this.context.service.usernotification.alert(e.name+t).done()}},_addParamLineTemplate:function(){var e=new sap.ui.commons.Label({width:"100%",text:"{Key}",layoutData:new sap.ui.layout.GridData({span:"L3 M3 S3"})}),t=new sap.ui.commons.TextField({width:"100%",value:"{Value}",enabled:!1,liveChange:[this._verifyValueInputIsNotEmpty,this],layoutData:new sap.ui.layout.GridData({span:"L5 M5 S5"})}).data("value","value").addStyleClass("gitConfigurationTextView"),n=new sap.ui.commons.Button({icon:"sap-icon://watt/delete",lite:!0,tooltip:"{i18n>git_configuration_delete_tooltip}",press:[this._deleteConfigEntry,this],layoutData:new sap.ui.layout.GridData({span:"L1 M1 S1"})}).addStyleClass("gitConfigurationButtonLiteHover"),r=new sap.ui.commons.Button({icon:"sap-icon://edit",lite:!0,tooltip:"{i18n>git_configuration_edit_tooltip}",press:[this._editConfigEntry,this],layoutData:new sap.ui.layout.GridData({span:"L1 M1 S1"})}).addStyleClass("gitConfigurationButtonLiteHover"),i=new sap.ui.commons.Button({icon:"sap-icon://save",lite:!0,tooltip:"{i18n>git_configuration_save_tooltip}",press:[this._saveConfigEntry,this],enabled:!1,layoutData:new sap.ui.layout.GridData({span:"L1 M1 S1"})}).data("save","save").addStyleClass("gitConfigurationButtonLiteHover"),o=new sap.ui.commons.layout.HorizontalLayout({content:[r,n,i],layoutData:new sap.ui.layout.GridData({span:"L3 M3 S3"})}).data("lineLayout","lineLayout"),a=new sap.ui.layout.Grid({width:"100%",hSpacing:0,content:[e,t,o],layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})});return a},_createUI:function(){var e=this,t=new sap.ui.commons.Label({text:"{i18n>git_configuration_key}",design:"Bold",textAlign:"Begin",width:"100%",layoutData:new sap.ui.layout.GridData({span:"L3 M3 S3"})}),n=new sap.ui.commons.Label({text:"{i18n>git_configuration_value}",design:"Bold",width:"100%",layoutData:new sap.ui.layout.GridData({span:"L5 M5 S5"})}),r=new sap.ui.layout.Grid({content:[t,n],width:"100%",vSpacing:0,hSpacing:0,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})}),i=new sap.ui.layout.Grid({width:"100%",vSpacing:0,hSpacing:0,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})}).data("grid","grid"),o=this._addParamLineTemplate();i.bindAggregation("content",{path:"/configurations",template:o});var a=new sap.ui.commons.Button({text:{path:"isAddLineVisible",formatter:function(t){return t?e.context.i18n.getText("git_configuration_hide_button"):e.context.i18n.getText("git_configuration_add_button")}},tooltip:"{i18n>git_configuration_add_tooltip}",layoutData:new sap.ui.layout.GridData({span:"L2 M2 S2"}),press:[this._changeConfigEntryLineState,this]}).addStyleClass("riverControlSmall"),s=new sap.ui.commons.Label({text:"{i18n>git_configuration_key}",required:!0,design:"Bold",tooltip:"{i18n>git_configuration_newLineKeyTooltip}",visible:"{isAddLineVisible}",layoutData:new sap.ui.layout.GridData({span:"L1 M1 S1"})}),u=new sap.ui.commons.TextField({width:"100%",value:"{key}",visible:"{isAddLineVisible}",tooltip:"{i18n>git_configuration_newLineKeyTooltip}",liveChange:[this._verifyKeyInput,this],layoutData:new sap.ui.layout.GridData({span:"L3 M3 S3"})}),c=new sap.ui.commons.Label({text:"{i18n>git_configuration_value}",required:!0,design:"Bold",tooltip:"{i18n>git_configuration_newLineValueTooltip}",visible:"{isAddLineVisible}",layoutData:new sap.ui.layout.GridData({span:"L1 M1 S1"})}),l=new sap.ui.commons.TextField({width:"100%",value:"{value}",visible:"{isAddLineVisible}",tooltip:"{i18n>git_configuration_newLineValueTooltip}",liveChange:[this._verifyValueInput,this],layoutData:new sap.ui.layout.GridData({span:"L4 M4 S4"})}),p=new sap.ui.commons.Button({icon:"sap-icon://save",lite:!0,tooltip:"{i18n>git_configuration_save_tooltip}",press:[this._addAndSaveConfigEntry,this],enabled:{parts:["isKeyValid","isValueValid"],formatter:function(e,t){return e&&t}},visible:"{isAddLineVisible}",layoutData:new sap.ui.layout.GridData({span:"L1 M1 S1"})}).addStyleClass("gitConfigurationButtonLiteHover"),f=new sap.ui.layout.Grid({width:"100%",vSpacing:0,hSpacing:0,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),containerQuery:!0,content:[a,s,u,c,l,p]}).addStyleClass("gitConfigurationGridHeight");f.bindElement("/modelData");var d=new sap.ui.layout.Grid({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),content:[f,r,i]});return d}})}),define("sap.watt.ideplatform.aceeditor/command/Find",{isEnabled:function(){return this._getCodeEditor().then(function(e){return e?Q(!0):Q(!1)})},execute:function(){return this._getCodeEditor().then(function(e){return e?e.showFind():Q()})},_getCodeEditor:function(){return this.context.service.selection.getOwner().then(function(e){return e&&e.instanceOf&&e.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor")?e:null})}}),define("sap.watt.ideplatform.aceeditor/command/FindAndReplace",{isEnabled:function(){return this._getCodeEditor().then(function(e){return e?Q(!0):Q(!1)})},execute:function(){return this._getCodeEditor().then(function(e){return e?e.showReplace():Q()})},_getCodeEditor:function(){return this.context.service.selection.getOwner().then(function(e){return e&&e.instanceOf&&e.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor")?e:null})}}),define("sap.watt.ideplatform.aceeditor/command/Comment",{execute:function(){var e=this;return this._getCodeEditor().then(function(t){return t?t.toggleComment().then(function(){e.context.service.focus.setFocus(t)}):Q()})},isAvailable:function(){return!0},isEnabled:function(){return this._getCodeEditor().then(function(e){return e?e.getVisible().then(function(t){return t?e.getSelectionRange().then(function(e){return e?!0:!1}):!1}):!1})},_getCodeEditor:function(){return this.context.service.selection.getOwner().then(function(e){return e&&e.instanceOf&&e.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor")?e:null})}}),define("sap.watt.ideplatform.aceeditor/command/BlockComment",{execute:function(){var e=this;return this._getCodeEditor().then(function(t){return t?t.toggleBlockComment().then(function(){e.context.service.focus.setFocus(t)}):Q()})},isAvailable:function(){return!0},isEnabled:function(){return this._getCodeEditor().then(function(e){return e?e.getVisible().then(function(t){return t?e.getSelectionRange().then(function(e){return e?!0:!1}):!1}):!1})},_getCodeEditor:function(){return this.context.service.selection.getOwner().then(function(e){return e&&e.instanceOf&&e.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor")?e:null})}}),define("sap.watt.ideplatform.aceeditor/command/Invisibles",{execute:function(){return this._getCodeEditor().then(function(e){return e?e.toggleShowInvisibles():Q()})},isAvailable:function(){return!0},isEnabled:function(){return this._getCodeEditor().then(function(e){return e?e.getVisible().then(function(e){return e?e:!1}):!1})},_getCodeEditor:function(){return this.context.service.selection.getOwner().then(function(e){return e&&e.instanceOf&&e.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor")?e:null})}}),define("sap.watt.ideplatform.aceeditor/command/Todo",{execute:function(){var e=this;return this._getCodeEditor().then(function(t){return t?t.addTodo().then(function(){e.context.service.focus.setFocus(t)}):Q()})},_isSupported:function(){var e=!1;return this._getCodeEditor().then(function(t){return t?Q.all([t.getVisible(),t.hasTodoTag()]).spread(function(n,r){return n&&r?t.getCurrentFilePath().then(function(t){!t||null===t.match(/\.js$/)&&null===t.match(/\.xsjs$/)&&null===t.match(/\.xsjslib$/)||(e=!0)}):void 0}):Q()}).then(function(){return e})},isAvailable:function(){return this._isSupported()},isEnabled:function(){return this._isSupported()},_getCodeEditor:function(){return this.context.service.selection.getOwner().then(function(e){return e&&e.instanceOf&&e.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor")?e:null})}}),define("sap.watt.ideplatform.aceeditor/command/General",[],function(){return{execute:function(e,t){return this.context=t,this._getCodeEditor().then(function(t){return t?t.executeCommand(e):Q()})},isAvailable:function(){return!0},isEnabled:function(e){return this.context=e,this._getCodeEditor().then(function(e){return e?e.getVisible().then(function(t){return t?e.getSelectionRange().then(function(e){return e?!0:!1}):!1}):!1})},_getCodeEditor:function(){return this.context.service.selection.getOwner().then(function(e){return e&&e.instanceOf&&e.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor")?e:null})}}}),define("sap.watt.ideplatform.aceeditor/command/Indent",["./General"],function(e){"use strict";return{execute:function(t){return e.execute(t,this.context)},isAvailable:function(){return!0},isEnabled:function(){return e.isEnabled(this.context)}}}),define("sap.watt.ideplatform.aceeditor/command/Outdent",["./General"],function(e){"use strict";return{execute:function(t){return e.execute(t,this.context)},isAvailable:function(){return!0},isEnabled:function(){return e.isEnabled(this.context)}}}),define("sap.watt.ideplatform.aceeditor/command/MoveLinesUp",["./General"],function(e){"use strict";return{execute:function(t){return e.execute(t,this.context)},isAvailable:function(){return!0},isEnabled:function(){return e.isEnabled(this.context)}}}),define("sap.watt.ideplatform.aceeditor/command/MoveLinesDown",["./General"],function(e){"use strict";return{execute:function(t){return e.execute(t,this.context)},isAvailable:function(){return!0},isEnabled:function(){return e.isEnabled(this.context)}}}),define("sap.watt.ideplatform.aceeditor/command/CopyLinesUp",["./General"],function(e){"use strict";return{execute:function(t){return e.execute(t,this.context)},isAvailable:function(){return!0},isEnabled:function(){return e.isEnabled(this.context)}}}),define("sap.watt.ideplatform.aceeditor/command/CopyLinesDown",["./General"],function(e){"use strict";return{execute:function(t){return e.execute(t,this.context)},isAvailable:function(){return!0},isEnabled:function(){return e.isEnabled(this.context)}}}),define("sap.watt.ideplatform.aceeditor/command/Utils",[],function(){"use strict";return{_getCodeEditor:function(e){return e.getOwner().then(function(e){return e&&e.instanceOf&&e.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor")?e:null})}}}),define("sap.watt.ideplatform.aceeditor/command/ExpandAll",["./Utils"],function(e){"use strict";return{execute:function(){var e=this;return this._getCodeEditor().then(function(t){return t?t.expandAll().then(function(){e.context.service.focus.setFocus(t)}):Q()})},isAvailable:function(){return!0},isEnabled:function(){return this._getCodeEditor().then(function(e){return e?e.getVisible().then(function(t){return t?e.getSelectionRange().then(function(e){return e?!0:!1}):!1}):!1})},_getCodeEditor:function(){return e._getCodeEditor(this.context.service.selection)}}}),define("sap.watt.ideplatform.aceeditor/command/CollapseAll",["./Utils"],function(e){"use strict";return{execute:function(){var e=this;return this._getCodeEditor().then(function(t){return t?t.collapseAll().then(function(){e.context.service.focus.setFocus(t)}):Q()})},isAvailable:function(){return!0},isEnabled:function(){return this._getCodeEditor().then(function(e){return e?e.getVisible().then(function(t){return t?e.getSelectionRange().then(function(e){return e?!0:!1}):!1}):!1})},_getCodeEditor:function(){return e._getCodeEditor(this.context.service.selection)}}}),define("sap.watt.ideplatform.aceeditor/service/EditorFactory",{create:function(e,t){return e=e||"aceeditor",t=jQuery.extend(t||{},{"implements":"sap.watt.common.plugin.aceeditor.service.Editor",module:"sap.watt.ideplatform.aceeditor/service/EditorImpl"}),this.context.create(e,t)}}),define("sap.watt.ideplatform.aceeditor/service/EditorMode",[],function(){var e=function(e,t,n){if(this.type=e,this.desc=t,this.mode="ace/mode/"+e,/\^/.test(n))var r=n.replace(/\|(\^)?/g,function(e,t){return"$|"+(t?"^":"^.*\\.")})+"$";else var r="^.*\\.("+n+")$";this.extRe=new RegExp(r,"gi")};return e.prototype={supportsFile:function(e){return e.match(this.extRe)}},e}),define("sap.watt.ideplatform.aceeditor/service/EditorContextMenu",[],function(){var e=function(e,t){this.extension=e,this.menuGroup=t};return e}),define("sap.watt.ideplatform.aceeditor/service/EditorGutterContextMenu",[],function(){var e=function(e,t){this.extension=e,this.menuGroup=t};return e}),jQuery.sap.declare("sap.watt.common.plugin.aceeditor.control.Editor"),jQuery.sap.require("sap.watt.ideplatform.plugin.aceeditor.control.lib.ace-noconflict.ace"),jQuery.sap.require("sap.watt.ideplatform.plugin.aceeditor.control.lib.ace-noconflict.ext-searchbox"),sap.ui.core.Control.extend("sap.watt.common.plugin.aceeditor.control.Editor",{metadata:{properties:{width:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},value:"string",showPrintMargin:{type:"boolean",defaultValue:!1},annotations:{type:"object",defaultValue:{}},readOnly:{type:"boolean",defaultValue:!1},fontSize:{type:"sap.ui.core.CSSSize",defaultValue:"12px"},theme:{type:"string",defaultValue:"ace/theme/sap-cumulus"},mode:{type:"string",defaultValue:"ace/mode/javascript"},gutterAnnotations:{type:"array",defaultValue:[]}},events:{liveChange:{},renderDone:{},beforeClosing:{},editorScroll:{},changeSession:{},editorNativeContextMenu:{},undoRedoStateChange:{},editorGutterMousedown:{},contentFormatted:{}}},init:function(){this._sTargetFile="",this._aSessions=[],this._isDocumentOpening=!1,ace.config.set("basePath",jQuery.sap.getModulePath("sap.watt.ideplatform.plugin.aceeditor.control.lib.ace-noconflict")),ace.config.set("modePath",jQuery.sap.getModulePath("sap.watt.ideplatform.plugin.aceeditor.control.lib.ace-noconflict")),ace.config.set("themePath",jQuery.sap.getModulePath("sap.watt.ideplatform.plugin.aceeditor.control.lib.ace-noconflict")),ace.config.set("workerPath",jQuery.sap.getModulePath("sap.watt.ideplatform.plugin.aceeditor.control.lib.ace-noconflict")),sap.ui.core.ResizeHandler.register(this,jQuery.proxy(this._onResize,this))},_onResize:function(){this.refresh()},refresh:function(){this.oEditor&&this.oEditor.resize(!0)},getSession:function(){return this.oEditor?this.oEditor.getSession():null},setSession:function(e){this.oEditor&&this.oEditor.setSession(e)},createSession:function(){var e=ace.createEditSession("",this.getMode());return e},setDocOpenStatus:function(e){this._documentOpened=e},getValue:function(){return this.getSession()&&this.getSession().getValue()},setValue:function(e){this.getSession().setValue(e)},getDocument:function(){this.oEditor.getSession().getDocument()},_getUndoManager:function(){return this.getSession()&&this.getSession().getUndoManager()},undo:function(){var e=this._getUndoManager();e&&(e.undo(!1),this.setFocus())},redo:function(){var e=this._getUndoManager();e&&(e.redo(!1),this.setFocus())},hasUndo:function(){var e=!1;return this._documentOpened&&(e=this._getUndoManager().hasUndo()),e},hasRedo:function(){var e=!1;return this._documentOpened&&(e=this._getUndoManager().hasRedo()),e},markClean:function(){var e=this._getUndoManager();e&&e.markClean()},isClean:function(){var e=!1,t=this._getUndoManager();return t&&(e=t.isClean()),e},setShowPrintMargin:function(e){this.setProperty("showPrintMargin",e,!0),this.oEditor&&this.oEditor.setShowPrintMargin(e)},setReadOnly:function(e){this.setProperty("readOnly",e,!0),this.oEditor&&this.oEditor.setReadOnly(e)},setFontSize:function(e){this.setProperty("fontSize",e,!0),this.oEditor&&this.oEditor.setFontSize(e)},setAnnotations:function(e){this.formatAnnotations(e),this.setProperty("annotations",e,!0),this.oEditor&&this.oEditor.getSession().setAnnotations(e)},setTheme:function(e){this.setProperty("theme",e,!0),this.oEditor&&this.oEditor.setTheme(e)},setMode:function(e){this.setProperty("mode",e,!0)},clearAnnotations:function(){this.oEditor&&(this.oEditor.getSession().clearAnnotations(),this.clearInlineAnnotations())},hasAnnotations:function(){if(this.oEditor)for(var e in this.oEditor.getSession().getAnnotations())return!0;return!1},getSessionMarkers:function(){var e=this.getSession();return e?(e._aMarkerId||(e._aMarkerId=[]),e._aMarkerId):[]},formatAnnotations:function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var n=e[t];n.text&&(n.html='<p class="errorType_'+n.type+'">'+n.text.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")+"</p>",n.text=void 0)}},clearInlineAnnotations:function(){for(;this.getSessionMarkers()&&this.getSessionMarkers().length>0;){var e=this.getSessionMarkers().pop();this.removeMarker(e[0])}},setInlineAnnotations:function(e){var t=[],n=[];if(e&&e.length>0)for(var r=0;r<e.length;r++){var i,o=e[r],a="";if(void 0===o.source)return;a=o.source,i=this.getRange(o.row,o.column+1,o.row,o.column+1+a.length),t.push([i,o.type,o.html])}for(var r=0;r<t.length;r++){for(var s=t[r],u=!1,c=0;c<n.length;c++)s[0].start.row==n[c][0].start.row&&s[0].start.column==n[c][0].start.column&&s[0].end.row==n[c][0].end.row&&s[0].end.column==n[c][0].end.column&&(u=!0,"info"==n[c][1]?n[c][1]=s[1]:"warning"==n[c][1]&&"error"==s[1]&&(n[c][1]=s[1]),n[c][2]+=s[2]);u||n.push(s)}n.sort(function(e,t){return t[0].end.column-t[0].start.column-(e[0].end.column-e[0].start.column)});for(var r=0;r<n.length;r++)this.getSessionMarkers().push([this.addMarker(n[r][0],"acmark_error errorType_"+n[r][1]+" errorId_"+r,"line",!0),r,n[r][2]])},bindInlineToolTipEvents:function(){this._errorTooltipTimer&&jQuery.sap.clearDelayedCall(this._errorTooltipTimer),this._errorTooltipTimer=jQuery.sap.delayedCall(200,this,function(){var e=this;jQuery(".acmark_error").hover(function(t){var n=t.target;if(n.className.indexOf("acmark_error")>=0&&n.className.indexOf("errorType")>=0){for(var r=n.className.split(" "),i=-1,o="",a=0;a<r.length;a++)if(r[a].indexOf("errorId")>=0){var s=r[a].split("_");if(s.length>1){i=parseInt(s[1]);break}}if(i>-1)for(var a=0;a<e.getSessionMarkers().length;a++)e.getSessionMarkers()[a][1]==i&&(o=e.getSessionMarkers()[a][2]);
""!=o&&e.showInlineErrorToolTip(n,o)}},function(t){var n=t.target;n.className.indexOf("acmark_error")>=0&&n.className.indexOf("errorId")>=0&&e._oToolTip&&e._oToolTip.hide()}),e._oToolTip&&e._oToolTip.hide(),e._errorTooltipTimer=null})},showInlineErrorToolTip:function(e,t){if(this._oToolTip||(this._oToolTip=this.getToolTip()),this._oToolTip){this._oToolTip.setHtml(t),this._oToolTip.show();var n=e.getBoundingClientRect(),e=this._oToolTip.getElement(),r=e.style,i=n.right,o=n.bottom,a=e.offsetWidth,s=e.offsetHeight,u=jQuery(this.oEditor.container).offset(),c=u.left+this.oEditor.container.offsetWidth,l=u.top+this.oEditor.container.offsetHeight;i+a>c&&(i=c-a),o+s>l&&(o=n.top-s),r.left=i+"px",r.top=o+"px"}},getToolTip:function(){var e=ace.require("ace/tooltip").Tooltip;return new e(this.oEditor.container)},getTextRange:function(e,t,n,r){var i=this.getRange(e,t,n,r);return this.oEditor.getSession().getDocument().getTextRange(i)},getRange:function(e,t,n,r){var i=ace.require("ace/range").Range;return new i(e,t,n,r)},setCursorPosition:function(e){this._cursorPosition=e},getGutterAnnotations:function(){return this.oEditor?this.oEditor.renderer.$gutterLayer.$annotations:[]},setGutterAnnotations:function(e){this.oEditor.renderer.$gutterLayer.$annotations=e},setDocument:function(e){this._oDocument=e},open:function(e,t,n){var r=this._getSessionIndex(this._sTargetFile);r>=0&&(this._aSessions[r].gutterAnnotations=this.getGutterAnnotations()),this._isDocumentOpening=!0,this._oDocument=e;var i=e.getEntity().getFullPath();this._sTargetFile=i,this.setCurrentFilePath(i);var o=this;return this._aSessions.length>0&&this.fireBeforeClosing(),e.getContent().then(function(r){var a=!1;return r instanceof Blob&&(r="Binary Data...",a=!0),o._getSessionIndex(i)>=0&&n?(o.reload(r),o._isDocumentOpening=!1,void 0):(o.setDocument(e),o.setDocOpenStatus(!1),o.setMode(t),o._documentChanged(e).then(function(){e.isReadOnly()||a?o.setReadOnly(!0):o.setReadOnly(!1)}))})},close:function(e){var t=e.getEntity().getFullPath(),n=this._getSessionIndex(t);if(-1!==n){for(var r=0,i=0;i<this._aSessions.length;i++)""!==this._aSessions[i].path&&r++;1==r&&this.fireBeforeClosing();var o=this._aSessions[n].session;o.removeAllListeners("change"),o.removeAllListeners("changeMode"),o.removeAllListeners("tokenizerUpdate"),o.removeAllListeners("changeTabSize"),o.removeAllListeners("changeWrapLimit"),o.removeAllListeners("changeWrapMode"),o.removeAllListeners("changeFold"),o.removeAllListeners("changeFrontMarker"),o.removeAllListeners("changeBackMarker"),o.removeAllListeners("changeBreakpoint"),o.removeAllListeners("changeAnnotation"),o.removeAllListeners("changeOverwrite"),o.removeAllListeners("changeScrollTop"),o.removeAllListeners("changeScrollLeft");var a=o.getSelection();a.removeAllListeners("changeCursor"),a.removeAllListeners("changeSelection"),a.removeAllListeners("addRange"),a.removeAllListeners("removeRange"),a.removeAllListeners("singleSelect"),a.removeAllListeners("multiSelect"),o.setUseWorker(!1),this._aSessions.splice(n,1);var s=0===this._aSessions.length;this._documentOpened=!1,s&&(this._sTargetFile="",this.setCurrentFilePath(""))}},onAfterRendering:function(){!this._isDocumentOpening&&this._oDocument&&this._documentChanged(this._oDocument).done(),this.oEditor=ace.edit(this.getId()),this.oEditor.setSelectionStyle("text");var e=this;this.oEditor.on("changeSession",function(){e.fireChangeSession({control:e})}),this.oEditor.renderer.on("afterRender",function(){e.bindInlineToolTipEvents()}),this.oEditor.on("nativecontextmenu",function(t){t.preventDefault(),e.fireEditorNativeContextMenu({mouseEvent:t})}),this.oEditor.on("guttermousedown",function(t){t.preventDefault(),setTimeout(function(){e.fireEditorGutterMousedown({mouseEvent:t})})})},_documentChanged:function(e){var t=this;return e.getContent().then(function(n){var r=!1;n instanceof Blob&&(n="Binary Data...",r=!0);var i=t.getDomRef();if(i){i.addEventListener("contextmenu",function(e){e.preventDefault()}),t.oEditor=ace.edit(t.getId()),t.oEditor.setTheme(t.getTheme()),t._adjustCommandKeys();var o=t._sessionHandler(),a=t.oEditor.getSession();o?(a.setValue(n),a.setMode(t.getMode()),a.on("change",function(e){if(!t._isDocumentOpening){var n=e.data.action;!n||-1==n.indexOf("insert")&&-1==n.indexOf("remove")||setTimeout(function(){t.fireLiveChange()},0)}}),t._documentOpened=!0,t._prevUndoState=t._prevRedoState=!1,t.oEditor.on("input",function(){var e=t._getUndoManager();(e.hasUndo()!==t._prevUndoState||e.hasRedo()!==t._prevRedoState)&&(t._prevUndoState=e.hasUndo(),t._prevRedoState=e.hasRedo(),t.fireUndoRedoStateChange())}),t.oEditor.commands.addCommand({name:"Undo",bindKey:{win:"Ctrl-Z",mac:"Command-Z"},exec:function(){t.undo()},readOnly:!0}),t.oEditor.commands.addCommand({name:"Redo",bindKey:{win:"Ctrl-Y",mac:"Command-Y"},exec:function(){t.redo()},readOnly:!0})):(a.getValue()!==n&&(a.setValue(n),t._prevUndoState=t._prevRedoState=!1),t._documentOpened=!0),t.setReadOnly(t.getReadOnly()||r),t.setShowPrintMargin(t.getShowPrintMargin()),setTimeout(jQuery.proxy(t._navigate,t),0),t._isDocumentOpening=!1;var s=a.getValue();e.isReadOnly()||s instanceof Blob||s===n||t.fireContentFormatted({document:e,value:s})}else{var u={onAfterRendering:function(){t._documentChanged(e).done(),t.removeEventDelegate(u)}};t.addEventDelegate(u)}})},_adjustCommandKeys:function(){var e=this.oEditor.commands.commands.foldOther,t=this.oEditor.commands.commands.foldall,n=this.oEditor.commands.commands.unfoldall,r=this.oEditor.commands.commands.copylinesup,i=this.oEditor.commands.commands.copylinesdown,o=this.oEditor.commands.commands.togglecomment,a=this.oEditor.commands.commands.toggleBlockComment;e.bindKey={win:"Alt-F2",mac:"Command-Option-F2"},t.bindKey={win:"Ctrl-Alt-F2",mac:"Command-Alt-F2"},n.bindKey={win:"Alt-Shift-F2",mac:"Alt-Shift-F2"},r.bindKey={win:"Alt-Shift-Up",mac:"Alt-Shift-Up"},i.bindKey={win:"Alt-Shift-Down",mac:"Alt-Shift-Down"},o.bindKey={win:"Ctrl-/|Alt-7",mac:"Command-/|Alt-7"},a.bindKey={win:"Ctrl-Shift-/|Ctrl-Shift-7",mac:"Command-Shift-/|Command-Shift-7"},this.oEditor.commands.removeCommand("foldOther"),this.oEditor.commands.removeCommand("foldall"),this.oEditor.commands.removeCommand("unfoldall"),this.oEditor.commands.removeCommand("copylinesup"),this.oEditor.commands.removeCommand("copylinesdown"),this.oEditor.commands.removeCommand("togglecomment"),this.oEditor.commands.removeCommand("toggleBlockComment"),this.oEditor.commands.addCommand(e),this.oEditor.commands.addCommand(t),this.oEditor.commands.addCommand(n),this.oEditor.commands.addCommand(r),this.oEditor.commands.addCommand(i),this.oEditor.commands.addCommand(o),this.oEditor.commands.addCommand(a)},_setUseWorker:function(e){if(e&&this._sTargetFile){var t=this._sTargetFile.match(/\.js$|\.xsjs$|\.xsjslib$|\.json$/);t&&e.setUseWorker(!1)}},_sessionHandler:function(){var e,t=this._getSessionIndex(this._sTargetFile),n=!1;if(-1===t?(n=!0,e=this.createSession(),this._setUseWorker(e),e.setUseSoftTabs(!1),this.setSession(e),this._aSessions.push({path:this._sTargetFile,session:e})):(e=this._aSessions[t].session,this.oEditor.getSession()!==e&&(e.getSelection()&&e.getSelection().removeAllListeners("changeCursor"),this.setSession(e))),this.oEditor){e=this.oEditor.getSession(),this._setUseWorker(e);var r=this,i=function(){if(r._aSessions[r._getSessionIndex(r._sTargetFile)]){var e=r._aSessions[r._getSessionIndex(r._sTargetFile)].gutterAnnotations;Array.isArray(e)&&e.length>0&&r.setGutterAnnotations(e)}r.oEditor.renderer.off("beforeRender",i)};this.oEditor.renderer.on("beforeRender",i);var o=function(){r.fireRenderDone({control:r}),r.oEditor.renderer.off("afterRender",o),n&&(r.oEditor.renderer.scrollToY(1),r.oEditor.renderer.updateFull(!0),r.oEditor.renderer.scrollToY(0)),r.setAnnotations(r.getAnnotations())};this.oEditor.renderer.on("afterRender",o),this._onScroll=function(){r.fireEditorScroll()},this.getSession().off("changeScrollTop",this._onScroll),this.getSession().off("changeScrollLeft",this._onScroll),this.getSession().on("changeScrollTop",this._onScroll),this.getSession().on("changeScrollLeft",this._onScroll)}return n},_getSessionIndex:function(e){for(var t=0;t<this._aSessions.length;t++)if(this._aSessions[t].path===e)return t;return-1},_navigate:function(){this.oEditor&&(this.oEditor.focus(),this._cursorPosition&&(this.oEditor.moveCursorTo(this._cursorPosition.row,this._cursorPosition.column),this.oEditor.scrollToLine(this._cursorPosition.row,!0,!0,null)))},reload:function(e){this.oEditor.getSession().setValue(e),this._prevUndoState=this._prevRedoState=!1,this.oEditor.renderer.updateFull(!0)},renderer:function(e,t){e.write("<pre"),e.writeControlData(t),e.writeClasses(),e.addStyle("position","relative"),e.addStyle("font-size",t.getFontSize()),e.addStyle("line-height","150%"),e.addStyle("width",t.getWidth()),e.addStyle("height",t.getHeight()),e.writeStyles(),e.write(">"),t.getValue()&&e.writeEscaped(t.getValue()),e.write("</pre>")},addEventListener:function(e,t){var n=this.getSession();n&&("changeCursor"==e?n=n.selection:"gutterClick"==e&&(n=this.oEditor),n.addEventListener(e,t))},removeEventListener:function(e,t){var n=this.getSession();n&&("changeCursor"==e?n=n.selection:"gutterClick"==e&&(n=this.oEditor),n.removeEventListener(e,t))},getMarkers:function(e){return this.getSession()?this.getSession().getMarkers(e):null},removeMarker:function(e){this.getSession()&&this.getSession().removeMarker(e)},indexToPosition:function(e,t){return this.getSession()&&this.getSession().doc?this.getSession().doc.indexToPosition(e,t):null},positionToIndex:function(e,t){return this.getSession()&&this.getSession().doc?((null===e||void 0===e)&&(e=this.oEditor.selection.getCursor()),this.getSession().doc.positionToIndex(e,t)):null},getLine:function(e){return this.getSession()&&this.getSession().getDocument()?this.getSession().getDocument().getLine(e):null},getAllLines:function(){return this.getSession()&&this.getSession().getDocument()?this.getSession().getDocument().getAllLines():null},addMarker:function(e,t,n,r){return this.getSession()?this.getSession().addMarker(e,t,n,r):null},setModuleUrl:function(e,t){ace.config.setModuleUrl(e,t)},gotoLine:function(e,t,n){this.oEditor&&(this.oEditor.renderer.updateFull(!0),this.oEditor.gotoLine(e,t,n))},replace:function(e,t){this.getSession()&&this.getSession().replace(e,t)},getSelectionRange:function(){return this.oEditor?this.oEditor.getSelectionRange():null},getSelection:function(){return this.oEditor?this.oEditor.getSelection():null},clearSelection:function(){this.oEditor&&this.oEditor.clearSelection()},getCursorPosition:function(){return this.oEditor?this.oEditor.getCursorPosition():null},moveCursorTo:function(e,t){this.oEditor&&this.oEditor.moveCursorTo(e,t)},setFocus:function(){this.oEditor&&this.oEditor.focus()},getFocusElement:function(){return this.oEditor?this.oEditor.textInput.getElement():this},navigateTo:function(e,t){this.oEditor&&this.oEditor.navigateTo(e,t)},getContainer:function(){return this.oEditor?this.oEditor.container:null},getFileURI:function(){return this.getId()},getAnnotations:function(){return this.getSession()?this.getSession().getAnnotations():null},setBreakpoint:function(e,t){this.getSession()&&this.getSession().setBreakpoint(e,t)},clearBreakpoint:function(e){this.getSession()&&this.getSession().clearBreakpoint(e)},removeGutterDecoration:function(e,t){this.getSession()&&this.getSession().removeGutterDecoration(e,t)},addGutterDecoration:function(e,t){this.getSession()&&this.getSession().addGutterDecoration(e,t)},replaceAll:function(e,t){return this.oEditor?this.oEditor.replaceAll(e,t):null},find:function(e,t,n){this.oEditor&&this.oEditor.find(e,t,n)},getTabSize:function(){return this.getSession()?this.getSession().getTabSize():null},moveCursorToPosition:function(e){this.selection&&this.selection.moveCursorToPosition(e)},setCurrentFilePath:function(e){this._sTargetFile=e},getCurrentFilePath:function(){return this._sTargetFile},getNativeEditor:function(){return this.oEditor},deleteCurrentSelection:function(){this.getSession()&&this.getSession().remove(this.oEditor.getSelectionRange())},isVisible:function(){return this._aSessions.length>0},toggleComment:function(){this.oEditor&&this.oEditor.toggleCommentLines()},toggleBlockComment:function(){this.oEditor&&this.oEditor.toggleBlockComment()},setShowInvisibles:function(e){this.oEditor&&this.oEditor.setShowInvisibles(e)},getShowInvisibles:function(){return this.oEditor?this.oEditor.getShowInvisibles():!1},toggleShowInvisibles:function(){this.setShowInvisibles(!this.oEditor.getShowInvisibles())},expandAll:function(){this.oEditor&&this.oEditor.session.unfold()},collapseAll:function(){this.oEditor&&this.oEditor.session.foldAll()},setDocValue:function(e){this.getSession()&&this.getSession().getDocument()&&this.getSession().getDocument().setValue(e)},executeCommand:function(e){this.oEditor&&this.oEditor.commands.commands[e]&&this.oEditor.commands.commands[e].exec(this.oEditor)},showGutter:function(e){this.oEditor&&this.oEditor.renderer&&this.oEditor.renderer.setShowGutter(e)}}),define("sap.watt.ideplatform.aceeditor/control/Editor",function(){}),define("sap/watt/common/plugin/platform/service/ui/AbstractEditor",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";var t=e.extend("sap.watt.common.plugin.platform.service.ui.AbstractEditor",{constructor:function(){this._oDocument=null},getSelection:function(){return{document:this._oDocument}},getState:function(){return null},open:function(e){this._oDocument=e},isRestorable:function(){return!0},isAvailable:function(){return!0},close:function(){return this.context.event.fireClosed({document:this._oDocument})}});return t}),define("sap.watt.ideplatform.aceeditor/service/EditorImpl",["./EditorMode","./EditorContextMenu","./EditorGutterContextMenu","../control/Editor","sap/watt/common/plugin/platform/service/ui/AbstractEditor"],function(e,t,n,r,i){"use strict";var o=i.extend("sap.watt.common.plugin.aceeditor.service.AceEditor",{});return jQuery.extend(o.prototype,{_oEditor:null,_oDocument:null,_oContentStatus:null,_oUserSettings:null,_mEditorModes:null,_mEditorContextMenus:null,_mEditorGutterContextMenus:null,init:function(){return this._aStyles=[],this._aStyles.push({uri:"sap.watt.ideplatform.aceeditor/css/aceeditor.css"}),this._mEditorModes={},this._oContentStatus={buffer:"",offset:0,prefix:""},this._oUserSettings={theme:"ace/theme/sap-cumulus",showInvisibles:!1},this.context.service.aceeditor.config.attachEvent("preferencesSaved",this.onPreferencesSaved,this),this.context.event.fireInit()},configure:function(e){e.modes&&this._createEditorModes(e.modes),e.editorContextMenu&&this._createEditorContextMenu(e.editorContextMenu),e.editorGutterContextMenu&&this._createEditorGutterContextMenu(e.editorGutterContextMenu),e.styles&&(this._aStyles=this._aStyles.concat(e.styles)),this._todoTag=e.todoTag},_onEditorNativeContextMenu:function(e){var t=this;t.clientX=e.mParameters.mouseEvent.domEvent.clientX,t.clientY=e.mParameters.mouseEvent.domEvent.clientY;var n,r=this._oDocument.getEntity().getFileExtension();n=this._getMenuGroup(r),this.context.service.commandGroup.getGroup(n).then(function(e){return t._oContextMenuGroup=e,t.context.service.contextMenu.open(t._oContextMenuGroup,t.clientX,t.clientY)}).done()},_onEditorGutterMousedown:function(e){var t=this;if(2===e.mParameters.mouseEvent.getButton()){t.clientX=e.mParameters.mouseEvent.domEvent.clientX,t.clientY=e.mParameters.mouseEvent.domEvent.clientY;var n=this._oDocument.getEntity().getFileExtension(),r=this._getGutterMenuGroup(n);this.context.service.commandGroup.getGroup(r).then(function(e){return t._oContextMenuGroup=e,t.context.service.contextMenu.open(t._oContextMenuGroup,t.clientX,t.clientY)}).done()}},_getMenuGroup:function(e){try{return this._mEditorContextMenus[e].menuGroup}catch(t){return"commonContextMenu"}},_getGutterMenuGroup:function(e){try{return this._mEditorGutterContextMenus[e].menuGroup}catch(t){return void 0}},onPreferencesSaved:function(e){var t=e.params.theme;t&&this.setTheme(t);var n=e.params.fontSize;n&&this.setFontSize(n+"px")},_createEditorModes:function(t){for(var n=0;n<t.length;n++){var r=t[n],i=r.type;if(this._mEditorModes[i]=new e(i,r.description,r.extension,r.path,r.prio),r.path){var o=require.toUrl(r.path);this.setModuleUrl("ace/mode/"+i,o)}}},_createEditorContextMenu:function(e){this._mEditorContextMenus={};for(var n=0;n<e.length;n++){var r=e[n],i=r.extension;this._mEditorContextMenus[i]=new t(i,r.menuGroup)}},_createEditorGutterContextMenu:function(e){this._mEditorGutterContextMenus={};for(var t=0;t<e.length;t++){var r=e[t],i=r.extension;this._mEditorGutterContextMenus[i]=new n(i,r.menuGroup)}},_getModeFromPath:function(e){var t="/ace/mode/text";if(e){var n=e.split(/[\/\\]/).pop();for(var r in this._mEditorModes)if(this._mEditorModes.hasOwnProperty(r)&&this._mEditorModes[r].supportsFile(n)){t=this._mEditorModes[r].mode;break}}return t},_onClose:function(){this.context.event.fireBeforeClosing().done()},_onEditorRenderDone:function(e){var t=e.getParameter("control");this.context.event.fireRendered({control:t}).done()},_onChangeSession:function(e){var t=e.getParameter("control");this.context.event.fireChangeSession({control:t}).done()},_onEditorScroll:function(){this.context.event.fireScroll().done()},_onUndoRedoStateChange:function(){this.context.service.command.invalidateAll().done()},_onContentFormatted:function(e){var t=e.getParameter("document"),n=e.getParameter("value"),r=t.getEntity().getName();t.setContent(n,this.context.self).done(),this.context.service.usernotification.info(this.context.i18n.getText("i18n","msg_file_changed",[r])).done()},open:function(e,t,n,r,o){n||(n=this._getEditor()),i.prototype.open.apply(this,arguments);var a=e.getEntity().getFullPath();this._sTargetFile=a,r||(r=this._getModeFromPath(a));var s=this;return this.context.service.aceeditor.config.getUserSetting().then(function(i){return s.initUserSettings(i),n.open(e,r,t).then(function(){return o?void 0:s.context.event.fireOpened({document:e})})}).then(function(){return s.context.event.fireSelectionChanged()})},initUserSettings:function(e){e&&(void 0!=e.theme&&""!=e.theme&&(this._oUserSettings.theme=e.theme),void 0!=e.fontSize&&""!=e.fontSize&&(this._oUserSettings.fontSize=e.fontSize),void 0!=e.showInvisibles&&""!=e.showInvisibles&&(this._oUserSettings.showInvisibles=e.showInvisibles)),this._oUserSettings.fontSize&&this._oUserSettings.fontSize!=this._getEditor().getProperty("fontSize")&&this._getEditor().setFontSize(this._oUserSettings.fontSize+"px"),this._oUserSettings.theme!=this._getEditor().getProperty("theme")&&this._getEditor().setTheme(this._oUserSettings.theme),this._oUserSettings.showInvisibles!=this._getEditor().getShowInvisibles()&&this._getEditor().setShowInvisibles(this._oUserSettings.showInvisibles)},flush:function(){var e=this._getEditor().getValue();null!==e&&this.getReadOnly()!==!0&&this._oDocument.setContent(e,this.context.self).done()},close:function(e){return i.prototype.close.apply(this,arguments).done(),this._getEditor().close(e)},getTitle:function(){return this._oDocument.getEntity().getName()},getTooltip:function(){return this._oDocument.getEntity().getFullPath()},getWordSuggestions:function(){throw new Error(this.context.i18n.getText("i18n","msg_no_implemented"))},undo:function(){this._getEditor().undo()},hasUndo:function(){return this._getEditor().hasUndo()},redo:function(){this._getEditor().redo()},hasRedo:function(){return this._getEditor().hasRedo()},markClean:function(){return this._getEditor().markClean()},isClean:function(){return this._getEditor().isClean()},_createEditor:function(){if(!this._oEditor){this._oEditor=new sap.watt.common.plugin.aceeditor.control.Editor;var e=this._getEditor();e.attachLiveChange(this.flush,this),e.attachBeforeClosing(this._onClose,this),e.attachChangeSession(this._onChangeSession,this),e.attachRenderDone(this._onEditorRenderDone,this),e.attachEditorScroll(this._onEditorScroll,this),e.attachEditorNativeContextMenu(this._onEditorNativeContextMenu,this),e.attachEditorGutterMousedown(this._onEditorGutterMousedown,this),e.attachUndoRedoStateChange(this._onUndoRedoStateChange,this),e.attachContentFormatted(this._onContentFormatted,this)}return this._oEditor},_getEditor:function(){return this._createEditor()},getContent:function(){var e=this;return this._aStyles?this.context.service.resource.includeStyles(this._aStyles).then(function(){return e._createEditor()}):this._createEditor()},getContentStatus:function(e,t,n){if(n||(n=this._getEditor().oEditor),n){if(this._oContentStatus.buffer=this._getBuffer(n),this._oContentStatus.targetFile=this._sTargetFile,e){this._oContentStatus.prefix=this._getPrefix(n),this._oContentStatus.coords=this._getCoords(n),this._oContentStatus.delimiter=this._getDelimiter(n),this._oContentStatus.tab=this._getTab(n);var r=this._getPositionStatus(n);this._oContentStatus.offset=r.offset,this._oContentStatus.indentation=r.indentation,this._oContentStatus.bSuffix=r.bSuffix,this._oContentStatus.bComment=this._checkComment(n),this._oContentStatus.token=this._getToken(n),this._oContentStatus.cursorPosition=n.getCursorPosition(),this._oContentStatus.aRowTokens=this._getRowTokens(n)}return t&&(this._oContentStatus.stringValue=this._getStringValue(n)),this._oContentStatus}},getContentStatusByPosition:function(e){var t=this._getEditor().oEditor;if(t){var n={};return n.buffer=this._getBuffer(t),n.targetFile=this._sTargetFile,n.offset=this._getPositionStatus(t,e).offset,n}},_getStringValue:function(e){var t=e.getSession(),n=e.getCursorPosition(),r=t.getTokenAt(n.row,n.column);if(r&&("string"===r.type||"string.attribute-value.xml"===r.type)){var i=r.value.length;if(i>1&&r.start+i>n.column&&r.value[0]===r.value[i-1]&&("'"===r.value[0]||'"'===r.value[0]))return this._oContentStatus.prefix=r.value.substring(1,n.column-r.start),r.value.substring(1,i-1)}return void 0},_checkComment:function(e){var t=e.getSession(),n=e.getCursorPosition(),r=t.getTokenAt(n.row,n.column);return r&&r.type.indexOf("comment")>=0?!0:!1},addString:function(e,t,n){if(t||(t=this._getEditor().oEditor),n){var r=t.getCursorPosition().row,i=t.getSession().getLine(r),o=t.getSession().getMode().$getIndent(i);e=e.replace(/\n/g,"\n"+o)}t.getSession().insert(t.getCursorPosition(),e)},getCurrentSelection:function(e){return e||(e=this._getEditor().oEditor),e.getSelection().isEmpty()?"":e.getCopyText()},cutCurrentSelection:function(e){e||(e=this._getEditor().oEditor);var t=e.getSelection().isEmpty()?"":e.getCopyText();return e.remove(e.getSelectionRange()),t},deleteCurrentSelection:function(){this._getEditor().deleteCurrentSelection()},getSelectionRanges:function(e){e||(e=this._getEditor().oEditor);var t=null;return e.getSelection().isEmpty()||(t=e.getSelection().toJSON(),t instanceof Array||(t=[t])),t},setHighlight:function(e,t,n){var r;if(e&&e.length>0){this._getEditor().oEditor.getSelection().fromJSON(e),t||(t="ace_highlight-marker"),n||(n="background");var i,o,a,s;if(this._getEditor().oEditor.getSelection().rangeCount>0){r=this._getEditor().oEditor.getSelection().ranges;var u=Math.min(r.length,e.length);for(i=0;u>i;i++)a=r[i].clazz||e[i].clazz||t,s=r[i].type||e[i].type||n,r[i].markerId=this._getEditor().addMarker(r[i],a,s)}else o=this._getEditor().oEditor.getSelection().getRange(),o&&(a=o.clazz||e[0].clazz||t,s=o.type||e[0].type||n,o.markerId=this._getEditor().addMarker(o,a,s),r=[o])}return r},_getBuffer:function(e){for(var t="",n=e.getSession(),r=n.getDocument(),i=r.getAllLines(),o=this._getDelimiter(),a=i.length,s=0;a>s;s++)t+=i[s],a-1>s&&(t+=o);return t},_getPositionStatus:function(e,t){var n=e.getSession(),r=n.getDocument(),i=r.getAllLines();t?t.row=Math.min(t.row,i.length-1):t=e.getCursorPosition();for(var o=i[t.row],a=0;a<o.length&&/\s/.test(o.charAt(a));)a++;for(var s=o.substring(0,a),u=0,c=0,l=!1;c<t.row;)u+=i[c].length+1,c++;return u+=t.column,t.column<i[c].length&&(l=!0),{indentation:s,offset:u,bSuffix:l}},_getPrefix:function(e){var t=e.getCursorPosition(),n=this._getToken(e);if(!n||!n.value)return"";var r=n.value.substr(0,t.column-n.start),i=/;|\(|\)|\n|\s/;return i.test(r.charAt(r.length-1))?"":r},_getToken:function(e){var t=e.getSession(),n=e.getCursorPosition();return t.getTokenAt(n.row,n.column)},_getRowTokens:function(e){var t=e.getSession(),n=e.getCursorPosition();return t.getTokens(n.row)},_getCoords:function(e){var t=e.getCursorPosition();return e.renderer.textToScreenCoordinates(t.row,t.column)},_getDelimiter:function(){return"\n"},_getTab:function(){return"	"},showFind:function(){var e=this._getEditor();e&&e.isVisible()?e.oEditor.execCommand("find"):sap.ui.commons.MessageBox.alert(this.context.i18n.getText("i18n","msg_no_fileopen"),"WARNING",this.context.i18n.getText("i18n","dlg_warning"))},showReplace:function(){var e=this._getEditor();e&&e.isVisible()?e.oEditor.execCommand("replace"):sap.ui.commons.MessageBox.alert(this.context.i18n.getText("i18n","msg_no_fileopen"),"WARNING",this.context.i18n.getText("i18n","dlg_warning"))},getUI5Editor:function(){return this._getEditor()},addEventListener:function(e,t){this._getEditor().addEventListener(e,t)},removeEventListener:function(e,t){this._getEditor().removeEventListener(e,t)},indexToPosition:function(e,t){return this._getEditor().indexToPosition(e,t)},positionToIndex:function(e,t){return this._getEditor().positionToIndex(e,t)},getMarkers:function(e){return this._getEditor().getMarkers(e)},removeMarker:function(e){this._getEditor().removeMarker(e)},addMarker:function(e,t,n,r){return this._getEditor().addMarker(e,t,n,r)},clearAnnotations:function(){this._getEditor().clearAnnotations()},setAnnotations:function(e,t){var n=this._getEditor();n.setAnnotations(e),t?n.setInlineAnnotations(e):n.clearInlineAnnotations()},getAnnotations:function(){return this._getEditor().getAnnotations()},getCurrentRowAnnotations:function(){var e,t,n=[],r=[],i=this._getEditor().getCursorPosition(),o=i.row,a=this._getEditor().getAnnotations(),s=a.length;for(t=0;s>t;t++)e=a[t],e.row===o&&-1===r.indexOf(e.raw)&&(r.push(e.raw),n.push(e));return n},gotoLine:function(e,t,n){this._getEditor().gotoLine(e,t,n)},getRange:function(e,t,n,r){return this._getEditor().getRange(e,t,n,r)},getFileURI:function(){return this._getEditor().getFileURI()},getCurrentFilePath:function(){var e=this._getEditor();return e&&e.isVisible()?this._sTargetFile:null},setModuleUrl:function(e,t){ace.config.setModuleUrl(e,t)},setBreakpoint:function(e,t){this._getEditor().setBreakpoint(e,t)},clearBreakpoint:function(e){this._getEditor().clearBreakpoint(e)},removeGutterDecoration:function(e,t){this._getEditor().removeGutterDecoration(e,t)},addGutterDecoration:function(e,t){this._getEditor().addGutterDecoration(e,t)},replaceAll:function(e,t){return this._getEditor().replaceAll(e,t)},find:function(e,t,n){this._getEditor().find(e,t,n)},getTabSize:function(){return this._getEditor().getTabSize()},moveCursorToPosition:function(e){this._getEditor().moveCursorToPosition(e)},getNativeEditor:function(){return this._getEditor().getNativeEditor()},getTextRange:function(e,t,n,r){return this._getEditor().getTextRange(e,t,n,r)},clearSelection:function(){this._getEditor().clearSelection()},getValue:function(){return this._getEditor().getValue()},setValue:function(e){this._getEditor().setValue(e)},setTheme:function(e){this._getEditor().setTheme(e)},getTheme:function(){if(this._oDocument)return this._getEditor().getTheme();var e=this;return this.context.service.aceeditor.config.getUserSetting().then(function(t){return t&&void 0!=t.theme&&""!=t.theme?t.theme:e._getEditor().getTheme()})},setFontSize:function(e){this._getEditor().setFontSize(e)},setFocus:function(){this._getEditor().setFocus()},getFocusElement:function(){return this._getEditor().getFocusElement()},toggleComment:function(){this._getEditor().toggleComment()},toggleBlockComment:function(){this._getEditor().toggleBlockComment()},getSelection:function(){return Q({document:this._oDocument})},getSelectionRange:function(){return this._getEditor().getSelectionRange()},getVisible:function(){var e=this._getEditor();return e&&e.isVisible()?!0:!1},toggleShowInvisibles:function(){this._getEditor().toggleShowInvisibles(),this._oUserSettings.showInvisibles=this._getEditor().getShowInvisibles(),this.context.service.aceeditor.config.setUserSetting(this._oUserSettings).done()},getName:function(){return this.context.self._sName},addTodo:function(){var e=this._getEditor();if(e&&this._todoTag){var t=e.getSelectionRange(),n=e.getLine(t.start.row);if(n.indexOf(this._todoTag)<0&&e.oEditor&&e.oEditor.getSession()){var r=e.oEditor.getSession().doc;r&&r.insertInLine({row:t.start.row,column:t.start.column},this._todoTag)}}},hasTodoTag:function(){return!!this._todoTag},expandAll:function(){this._getEditor().expandAll()},collapseAll:function(){this._getEditor().collapseAll()},executeCommand:function(e){var t=this._getEditor();t&&t.executeCommand(e)},getReadOnly:function(){var e=this._getEditor();return e?e.getReadOnly():!1}}),o}),define("sap.watt.ideplatform.aceeditor/service/EditorConfig",["sap/watt/common/plugin/platform/service/ui/AbstractConfig","../control/Editor"],function(e){"use strict";return e.extend("sap.watt.common.plugin.aceeditor.service.EditorConfig",{_oThemesRBG:null,_sSelectedTheme:null,_sStoredTheme:null,_oContent:null,_nFontSize:null,_oDropdownBox_fontSize:null,_demoScript:"/**\n* This is a sample sum function \n*/\ngetSum: function(a, b) {\n var i;\n                i = a + b;\n              return i;\n}",_previewSetFontSize:function(e){this._oEditor.setFontSize(e+"px")},getUserPreferenceContent:function(){return this._oContent||(this._oContent=this._createUI()),this._sStoredTheme=this._oSettings.theme,this._setSelectedTheme(this._sStoredTheme),this._oContent},configure:function(e){this._oPreferenceModel=new this.PreferenceModel(e.preferenceService),this._aStyles=e.styles},saveUserPreference:function(){if(!this._oContent)return Q();this._configureAutoSave();var e=this;return(this._sSelectedTheme||this._nFontSize)&&(this._sSelectedTheme&&(this._sStoredTheme=this._sSelectedTheme,jQuery.extend(e._oSettings,{theme:e._sSelectedTheme}),this._oEditor&&this._oEditor.setTheme(e._sSelectedTheme)),e._nFontSize&&jQuery.extend(e._oSettings,{fontSize:e._nFontSize}),e._oPreferenceModel.storeSession(e._oSettings),e.context.event.firePreferencesSaved(e._oSettings).done()),Q()},cancel:function(){this._setSelectedTheme(this._sStoredTheme)},_createUI:function(){var e=this;this.context.service.resource.includeStyles(this._aStyles).done(),this._oThemesRBG=new sap.ui.commons.RadioButtonGroup({items:[new sap.ui.core.Item({text:this.context.i18n.getText("i18n","theme_eclipse"),key:"ace/theme/eclipse"}),new sap.ui.core.Item({text:this.context.i18n.getText("i18n","theme_xcode"),key:"ace/theme/xcode"}),new sap.ui.core.Item({text:this.context.i18n.getText("i18n","theme_chrome"),key:"ace/theme/chrome"}),new sap.ui.core.Item({text:this.context.i18n.getText("i18n","theme_cumulus"),key:"ace/theme/sap-cumulus"}),new sap.ui.core.Item({text:this.context.i18n.getText("i18n","theme_flower"),key:"ace/theme/sap-flowerpower"}),new sap.ui.core.Item({text:this.context.i18n.getText("i18n","theme_monokai"),key:"ace/theme/monokai"}),new sap.ui.core.Item({text:this.context.i18n.getText("i18n","theme_tomorrow_night"),key:"ace/theme/tomorrow_night"}),new sap.ui.core.Item({text:this.context.i18n.getText("i18n","theme_basement"),key:"ace/theme/sap-basement"}),new sap.ui.core.Item({text:this.context.i18n.getText("i18n","theme_morlock"),key:"ace/theme/sap-morlock"})],select:function(){return e._sSelectedTheme=e._oThemesRBG.getSelectedItem().getKey(),e._oEditor.setTheme(e._sSelectedTheme)}}).addStyleClass("editorSetting_form  editor_labels2"),this._oEditor||(this._oEditor=new sap.watt.common.plugin.aceeditor.control.Editor("editor-theme",{width:"100%",height:"300px",layoutData:new sap.ui.layout.form.GridElementData({hCells:"8",vCells:8})}),this._oEditor.addEventDelegate({onAfterRendering:function(){e._oEditor.setTheme(e._sSelectedTheme||e._sStoredTheme),e._oEditor.getSession().setMode("ace/mode/javascript"),e._oEditor.getSession().setUseWorker(!1),e._oEditor.setValue(e._demoScript),e._oAutoSaveCheckBox.setChecked(e._oSettings.autoSave),e._oSettings.fontSize?(e._previewSetFontSize(e._oSettings.fontSize),e._oDropdownBox_fontSize.setSelectedKey(e._oSettings.fontSize)):(e._previewSetFontSize(12),e._oDropdownBox_fontSize.setSelectedKey(12))
}})),this._oAutoSaveCheckBox=new sap.ui.commons.CheckBox({text:this.context.i18n.getText("i18n","dlg_Auto_Save_selection"),tooltip:this.context.i18n.getText("i18n","dlg_Auto_Save_selection")});var t=new sap.ui.commons.Label({text:this.context.i18n.getText("i18n","dlg_Auto_Save_description"),tooltip:this.context.i18n.getText("i18n","dlg_Auto_Save_description")});this._oDropdownBox_fontSize=new sap.ui.commons.DropdownBox("DropdownBox_fontSize",{tooltip:this.context.i18n.getText("i18n","tooltip_fontsize"),items:[new sap.ui.core.ListItem("ID1",{text:"8px",key:8}),new sap.ui.core.ListItem("ID2",{text:"9px",key:9}),new sap.ui.core.ListItem("ID3",{text:"10px",key:10}),new sap.ui.core.ListItem("ID4",{text:"11px",key:11}),new sap.ui.core.ListItem("ID5",{text:"12px",key:12}),new sap.ui.core.ListItem("ID6",{text:"13px",key:13}),new sap.ui.core.ListItem("ID7",{text:"14px",key:14}),new sap.ui.core.ListItem("ID8",{text:"16px",key:16}),new sap.ui.core.ListItem("ID9",{text:"18px",key:18})],change:function(t){e._nFontSize=parseInt(t.oSource.getSelectedKey(),10),e._previewSetFontSize(e._nFontSize)},layoutData:new sap.ui.layout.form.GridElementData({hCells:"2"})});var n=new sap.ui.commons.Label("LabelFont",{text:this.context.i18n.getText("i18n","dlg_font_title"),layoutData:new sap.ui.layout.form.GridElementData({hCells:"2"})}).addStyleClass("editorSetting_form editor_labels"),r=new sap.ui.commons.Label("LabelSize",{text:this.context.i18n.getText("i18n","dlg_size_title"),layoutData:new sap.ui.layout.form.GridElementData({hCells:"2"})}).addStyleClass("editorSetting_form editor_labels2"),i=new sap.ui.layout.form.GridLayout("EditorConfigLayout"),o=new sap.ui.layout.form.Form("EditorConfigForm",{layout:i,formContainers:[new sap.ui.layout.form.FormContainer("EditorConfigContainer1",{title:new sap.ui.core.Title({text:this.context.i18n.getText("i18n","dlg_theme_selection")}),formElements:[new sap.ui.layout.form.FormElement({fields:[new sap.ui.commons.Label({text:this.context.i18n.getText("i18n","dlg_editortheme_title")}).addStyleClass("editorSetting_form editor_labels"),this._oEditor]}),new sap.ui.layout.form.FormElement({fields:[this._oThemesRBG]}),new sap.ui.layout.form.FormElement({fields:[n]}),new sap.ui.layout.form.FormElement({fields:[r,this._oDropdownBox_fontSize]}),new sap.ui.layout.form.FormElement({label:new sap.ui.commons.Label({text:" ",layoutData:new sap.ui.layout.form.GridElementData({hCells:"1"})})})]}),new sap.ui.layout.form.FormContainer("EditorConfigContainer2",{title:new sap.ui.core.Title({text:this.context.i18n.getText("i18n","dlg_Auto_Save_Title_selection")}),formElements:[new sap.ui.layout.form.FormElement({fields:[this._oAutoSaveCheckBox]}),new sap.ui.layout.form.FormElement({fields:[t]})]})]});return o.addStyleClass("editorSetting_form"),o},_configureAutoSave:function(){this._oSettings.autoSave!==this._oAutoSaveCheckBox.getChecked()&&(this._oAutoSaveCheckBox.getChecked()?this.context.service.content.startAutoSave().done():this.context.service.content.stopAutoSave().done(),jQuery.extend(this._oSettings,{autoSave:this._oAutoSaveCheckBox.getChecked()}),this._oPreferenceModel.storeSession(this._oSettings))},_setSelectedTheme:function(e){for(var t=this._oThemesRBG.getItems(),n=0;n<t.length;n++)t[n].getKey()===e&&this._oThemesRBG.setSelectedIndex(n)},PreferenceModel:function(e){var t={beginSession:function(){return Q(!0)},storeSession:function(){},getSession:function(){return null},removeSession:function(){return Q(!0)}},n={_fPersistenceSrv:void 0,_sPersistenceNode:void 0,_oUserPreferencesAsJson:void 0,_bLoaded:!1,beginSession:function(){var e=this;return this._bLoaded?Q(this._oUserPreferencesAsJson):(this._bLoaded=!0,this._fPersistenceSrv.get(this._sPersistenceNode).then(function(t){if(t){e._oUserPreferencesAsJson={};for(var n in t)t.hasOwnProperty(n)&&(e._oUserPreferencesAsJson[n]=t[n])}return e._oUserPreferencesAsJson}).fail(function(){e._oUserPreferencesAsJson=void 0}))},storeSession:function(e){this._oUserPreferencesAsJson=e,this._fPersistenceSrv.set(e,this._sPersistenceNode).done()},getSession:function(){return this._oUserPreferencesAsJson},removeSession:function(){this._oUserPreferencesAsJson=void 0,this._fPersistenceSrv.remove(this._sPersistenceNode).done()}};return e&&e.service?(n._fPersistenceSrv=e.service,n._sPersistenceNode=e.node,n):t},getUserSetting:function(){if(this._oSettings)return this._oSettings;var e=this;return this._oPreferenceModel.beginSession().then(function(t){return t||(t={theme:"ace/theme/sap-cumulus",showInvisibles:!1,autoSave:!1}),e._oSettings=t,t})},setUserSetting:function(e){return this._oSettings=e,this._oPreferenceModel.storeSession(e)}})}),define("sap.watt.ideplatform.editor/service/Editor",[],function(){"use strict";return{_mRegistry:{},_mConfig:{},_defEditor:[],configure:function(e){var t=this;t._mConfig=e,jQuery.each(e.editors,function(e,n){var r=[],i={service:n.service,name:n.name};if("string"==typeof n.fileExtension)r.push(n.fileExtension);else{if(!n.fileExtension)throw new Error("No file type key provided");r=n.fileExtension}jQuery.each(r,function(e,n){if(t._mRegistry[n])t._mRegistry[n].push(i);else{var r=new Array;r.push(i),t._mRegistry[n]=r}})}),jQuery.each(e.defaultEditors,function(e,n){for(var r=t._mConfig.editors,i=0;i<r.length;i++)if(r[i].id===n.editorId){t._defEditor[n.extention]=r[i];break}})},getSpecificEditor:function(e,t){return this.getAllEditors(e).then(function(e){for(var n=null,r=0;r<e.length;r++)if(e[r].service._sName===t||e[r].name===t){n=e[r];break}return n})},getAllEditors:function(e){var t=[];if("file"===e.getType()){var n=e.getTitle();n=n.toLowerCase(),t=this._getAllEditorsForFileExtension(n)}return Q.all(t.map(function(e){return e.service.isAvailable()})).then(function(e){return t.filter(function(t,n){return e[n]})})},_getAllEditorsForFileExtension:function(e){var t=".",n=[],r=Object.keys(this._mRegistry),i=this._getAllExtensions(e,t,r);"manifest.json"===e&&this._defEditor["manifest.json"]&&i.push("manifest.json");for(var o=i.length,a=0;o>a;a++)for(var s=i[a],u=this._mRegistry[s],c=u.length,l=0;c>l;l++)n.push(u[l]);if(n.length<1&&(n=this._mRegistry["*"]),!n&&n.length<1)throw new Error("No editor available");return n},_getAllExtensions:function(e,t,n){for(var r=[],i=e.split(t),o=i.length-1,a=e,s=e.length,u="",c=0;o>c;c++){var l=a.lastIndexOf(t),p=a.substring(l+1,s);c>0&&(u=t+u),u=p+u,a=e.substring(0,l),$.inArray(u,n)>-1&&r.push(u)}return r},_getEndAfter:function(e,t){return e.substring(e.lastIndexOf(t)+1,e.length)},_endWith:function(e,t){var n=e.length,r=n-t.length,i=n,o=e.substring(r,i);return t==o},getDefaultEditor:function(e){var t=null;if(e){var n=e.getEntity().getFileExtension();n=n.toLowerCase();var r=e.getTitle();t="manifest.json"===r&&this._defEditor["manifest.json"]?this._defEditor["manifest.json"]:this._defEditor[n]?this._defEditor[n]:this._defEditor["*"]}return t?t.service.isAvailable().then(function(e){return e?t:void 0}):void 0}}}),define("sap.watt.ideplatform.outlinepane/service/OutlinePane",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";var t=e.extend("sap.watt.ideplatform.plugin.outlinepane.service.OutlinePane",{_oEditor:null,_oOutlineService:null,_mOutlines:[],init:function(){},configure:function(e){var t=this;this._mOutlines=e.outlines,this._aStyles=e.styles,jQuery.each(this._mOutlines,function(e,n){var r=n.service;r.attachEvent("visibilityChanged",t._onVisibilityChanged,t)})},_getView:function(){return this._oView||(this._oView=sap.ui.view({viewName:"sap.watt.ideplatform.plugin.outlinepane.view.OutlinePane",type:sap.ui.core.mvc.ViewType.XML}),this._getController().init(this.context)),this._oView},_getController:function(){return this._oController||(this._oController=this._getView().getController()),this._oController},getContent:function(){var t=this;return e.prototype.getContent.apply(this,arguments).then(function(){return t._getView()})},_onVisibilityChanged:function(e){var t=this,n=e.source.context.self;return e.params.visible?n.getContent().then(function(e){return t._getController().placeOutlineView(e)}):this._oOutlineService===n?(this._oEditor&&(this._oEditor.detachEvent("closed",t._onEditorClose,t),this._oEditor=null,this._oDoc=null),this._oOutlineService=null,this._getController().removeOutlineView()):void 0},_getSelectedDocument:function(e){var t=null;return $(e).map(function(e){return e&&e.document?(t=e.document,!1):void 0}),t},onSelectionChanged:function(e){var t=this,n=e.params.owner,r=this._getSelectedDocument(e.params.selection),i=[];return t._oEditor===n&&t._oDoc===r?Q():n.instanceOf("sap.watt.common.service.editor.Editor")?n.getState().then(function(o){return o?Q():(jQuery.each(t._mOutlines,function(o,a){if(n.instanceOf(a.editor)){var s=a.service;i.push(s.canHandle(e).then(function(i){return i?(t._oEditor&&t._oEditor.detachEvent("closed",t._onEditorClose,t),t._oEditor=n,t._oDoc=r,n.attachEvent("closed",t._onEditorClose,t),t._oOutlineService=s,s.setVisible(!0).then(function(){return s.onSelectionChanged(e)})):t._oOutlineService?t._oOutlineService.setVisible(!1):void 0}))}else t._oOutlineService&&a.service===t._oOutlineService&&i.push(t._oOutlineService.setVisible(!1))}),Q.all(i))}):Q()},_onEditorClose:function(){var e=this;return this.context.service.content.getCurrentEditor().then(function(t){return t!==e._oEditor?e._oOutlineService.setVisible(!1):void 0})}});return t}),define("sap.watt.ideplatform.indexmanager/service/util/remoteDocUtil",[],function(){"use strict";function e(e){if(!e){var t=this.i18n.getText("i18n","log_emptypath");return Q.reject(new Error(t))}return this.docProvider.getDocument(e).then(function(e){return e?e.getContent().then(function(e){return Q(e.replace(/\r/g,""))}):Q()}).fail(function(e){return Q.reject(e)})}function t(e,t){if(!e){var n=this.i18n.getText("i18n","log_emptypath");return Q.reject(new Error(n))}var r=this.docProvider,o=this.i18n;return i(e,r,o).then(function(){return r.getDocument(e).then(function(n){if(n)return n.setContent(t).then(function(){return n.save()});var r=o.getText("i18n","log_failtoopen",[e]);return Q.reject(new Error(r))})}).fail(function(e){return Q.reject(e)})}function n(e){if(!e){var t=this.i18n.getText("i18n","log_emptypath");return Q.reject(new Error(t))}var n=this.i18n;return this.docProvider.getDocument(e).then(function(t){if(t)return t.delete();var r=n.getText("i18n","log_failtoopen",[e]);return Q.reject(new Error(r))}).fail(function(e){return Q.reject(e)})}function r(e){if(!e){var t=this.i18n.getText("i18n","log_emptypath");return Q.reject(new Error(t))}return this.docProvider.getDocument(e).then(function(e){return e?Q(e.getDocumentMetadata()):Q()}).fail(function(e){return Q.reject(e)})}function i(e,t,n){return t.getDocument(e).then(function(r){if(r)return Q();var i=e.lastIndexOf("/");if(0>i){var a=n.getText("i18n","log_invalidpath",[e]);return Q.reject(new Error(a))}var s=e.substring(0,i),u=e.substring(i+1);return o(s,t,n).then(function(e){if(e)return e.createFile(u);var t=n.getText("i18n","log_failtocreateopen",[s]);return Q.reject(new Error(t))})})}function o(e,t,n){return t.getDocument(e).then(function(r){if(r)return Q(r);var i=a(e);if(i){var s=e.substring(i.length+1);return o(i,t,n).then(function(e){return e.createFolder(s)})}var u=n.getText("i18n","log_failtocreatenoroot",[e]);return Q.reject(new Error(u))}).fail(function(){return t.getDocument(e)})}function a(e){if(e&&e.trim()){e=e.trim(),"/"==e[e.length-1]&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");if(!(0>t))return e.substring(0,t)}}function s(e,t){if(!e||!t)throw new Error;this.docProvider=e,this.i18n=t}return s.prototype={loadDocument:e,saveDocument:t,deleteDocument:n,getDocumentMetadata:r},{RemoteDocUtil:s}}),define("sap.watt.ideplatform.indexmanager/service/util/indexUtil",["./remoteDocUtil","sap/watt/lib/orion/javascript/esprima/esprimaVisitor","sap/watt/lib/orion/javascript/esprima/esprimaJsContentAssist"],function(e,t,n){"use strict";function r(e){return e&&e.toLowerCase()===E}function i(e){var t=d(e);if(e&&t){var n=e.substring(t.length);if(n){var r=n.lastIndexOf(".");if(!(r>0))return t+S+n;var i=n.substring(0,r);if(i)return t+S+i+"."+C}}}function o(e){if(!e){var t=this.i18n.getText("i18n","log_emptypath");return Q.reject(new Error(t))}return this.remoteDocUtil.getDocumentMetadata(e).then(function(e){return e?Q(e.changedOn):Q(0)}).fail(function(){return Q()})}function a(e){var t=this;if(!e){var r=this.i18n.getText("i18n","log_emptypath");return Q.reject(new Error(r))}var i=this.remoteDocUtil;return i.loadDocument(e).then(function(t){t=t||"";var r=new n.EsprimaJavaScriptContentAssistProvider;return r.computeSummary(t,e).then(function(t){return i.getDocumentMetadata(e).then(function(e){return t&&e&&(t.changedOn=e.changedOn),Q(t)})})}).fail(function(){return t._summaryFromMetaProvider.getSummaryFromMeta(e).then(function(t){return t?t:(console.log("Document "+e+" out of scope"),{})}).fail(function(e){return console.log(e.message),{}})})}function s(e,t,n,r){var i=_(n,e);return i&&i.require&&0!==i.require.length?f.call(this,t,i,this.remoteDocUtil,this.i18n,r):Q([])}function u(e,t,n){var r=this.remoteDocUtil,i=this,o=this.i18n;return r.loadDocument(t).then(function(a){var s=y(a,e);return s&&s.require&&0!==s.require.length?f.call(i,t,s,r,o,n):Q([])})}function c(e,t){if("CallExpression"===e.type&&e.callee&&e.arguments){var n=e.callee,r=n.property;if(r&&"Identifier"===r.type&&"declare"===r.name){for(var i=n,o="declare";i.object;)o=i.object.property?i.object.property.name+"."+o:i.object.name+"."+o,i=i.object;if(o===t.id){var a=e.arguments;if(a.length>0){var s=[];return a[0].value&&s.push(a[0]),s&&s.length>0&&s.forEach(function(e){t.declare.push(e.value)}),!1}}}}return!0}function l(e,t){if(!e||!e.getFullPath()){var n=this.i18n.getText("i18n","log_emptypath");return Q.reject(new Error(n))}var r=this.remoteDocUtil,i=t,o=/".+"/i,a=e.getFullPath();return r.loadDocument(a).then(function(e){e=e||"";var t=i.exec(e);if(t&&t[0]){var n=o.exec(t[0]);if(n&&n[0]){var r={id:n[0].substring(1,n[0].length-1),path:a};return Q(r)}return Q.reject()}return Q.reject()}).fail(function(t){return a=e.getFullPath(),console.log("Document "+a+" out of scope "+t),Q({id:"Unknown "+a,path:a})})}function p(e){function t(e){var t=/jQuery\.sap\.declare\(".+"\);/i,n=/".+"/i;return e.getContent().then(function(e){var r=t.exec(e);if(r&&r[0]){var i=n.exec(r[0]);return i&&i[0]?i[0].substring(1,i[0].length-1):Q.reject()}return Q.reject()}).fail()}var n=Q.defer(),r={bContentSearch:!0,nStart:0,nRows:999,sFileType:"*.js",sFolderName:e+"/",sSearchTerm:"jQuery.sap.declare"},i=[],o=[],a={};return this._docProvider.search(r).then(function(e){return e.aFileEntries.forEach(function(e){i.push(e),o.push(t(e))}),Q.allSettled(o).then(function(e){for(var t=0;t<e.length;t++){var r=e[t];"fulfilled"===r.state&&(a[i[t].getEntity().getFullPath()]=r.value)}n.resolve(a)})}).fail(function(){n.reject("Search error")}).done(),n.promise}function f(e,t,n,r,i){var o=this;if(!t||!t.require||0===t.require.length)return Q([]);var a=t.require;return d.call(this,e).then(function(s){if(!s){var u=r.getText("i18n","log_invalidpath",[e]);return Q.reject(new Error(u))}return o._docProvider.getDocument(e).then(function(){var r=[];for(var u in a){var c=a[u];c&&("jQuery.sap.require"===t.id?r.push(o._getFilePathFromID(s,c,n,i)):r.push(o._getFilePathFromUI5DefineDependency(s,e,c)))}return Q.all(r).then(function(e){var t=[];for(var n in e){var r=e[n];r&&!o._isArrayContains(t,r)&&t.push(r)}return Q(t)}).fail(function(e){return Q.reject(e)})})})}function d(e){var t=this._docProvider;return t.getDocument(e).then(function(t){return t?t.getProject().then(function(e){return e.getEntity().getFullPath()}):Q.reject(e+" - not found")}).fail(function(t){console.log("Deleted document "+t);var n=e.split("/");return"/"+n[1]})}function h(e,t,n,r){if(!t)return Q();if(r){var i=r[t];if(i)return Q(i)}if("."===t.charAt(0)||0===t.split(".").length)return Q();if(0===("/"+t).indexOf(e+".")){var o=t.substring(e.length-1);return i=e+"/src/main/webapp"+o.replace(/\./g,"/")+".js",this.remoteDocUtil.docProvider.getDocument(i).then(function(e){return e?Q(i):Q()})}return Q()}function m(e,t){if("ReturnStatement"===e.type&&e.argument&&e.argument.callee&&e.argument.arguments){var n=e.argument.callee,r=e.argument.arguments;if(n.property&&"Identifier"===n.property.type&&"extend"===n.property.name&&r[0]&&"Literal"===r[0].type){var i=r[0].value;return t.namespace=i.substr(0,i.lastIndexOf(".")),!1}}return!0}function g(e){if(!e)return Q();if(!this._projectInfo[e]){var n={nRows:1,nStart:0,sFileType:"*.js",sFolderName:e+"/",sSearchTerm:"Component"};this._projectInfo[e]=this.remoteDocUtil.docProvider.search(n).then(function(e){if(e&&e.numFound>0){var n=e.aFileEntries[0];return n.getContent().then(function(e){try{var r=t.parse(e),i={namespace:""};if(t.visit(r,i,m),!i.namespace)return null;var o=i.namespace.replace(/\./g,"/"),a=n.getEntity().getFullPath(),s=a.slice(0,a.lastIndexOf("/"));return{namespace:o,rootPath:s}}catch(u){return null}})}}).fail(function(){return Q()})}return this._projectInfo[e]}function v(e,t,n){if(!n)return Q();if("."===n.charAt(0)){var r=new URI(n);return Q(r.absoluteTo(t).toString()+".js")}return this.getUI5ProjectInfo(e).then(function(e){if(e){var t=e.namespace;return n.slice(0,t.length)===t?e.rootPath+n.slice(e.namespace.length)+".js":n}})}function y(e,n){try{var r=t.parse(e);return _(r,n)}catch(i){console.warn(i)}}function _(e,n){try{var r={id:n,require:[]};return t.visit(e,r,x),r}catch(i){console.warn(i)}}function x(e,t){if("CallExpression"===e.type&&e.callee&&e.arguments){var n=e.callee,r=n.property,i=n.name,o=null;if("define"===i||r&&"define"===r.name)o="define";else{if(!("require"===i||r&&"require"===r.name))return!0;o="require"}for(var a=n;a.object;)o=a.object.property?a.object.property.name+"."+o:a.object.name+"."+o,a=a.object;if(o===t.id){var s=e.arguments;if(s.length>0){var u=[];if("ArrayExpression"===s[0].type&&s[0].elements)u=s[0].elements;else for(var c=0;c<s.length;c++){var l=s[c];"Literal"===l.type&&l.value&&u.push(l)}return u&&u.length>0&&u.forEach(function(e){t.require.push(e.value)}),!1}}}return!0}function b(e,t){for(var n in e)if(e[n]===t)return!0;return!1}function w(t,n,r){if(!t||!n)throw new Error;this._docProvider=t,this._visitDeclare=T,this._getFilePathFromID=h,this._getFilePathFromUI5DefineDependency=v,this._isArrayContains=b,this._mapProjectModules=p,this.remoteDocUtil=new e.RemoteDocUtil(t,n),this.i18n=n,this._projectInfo={},this._summaryFromMetaProvider=r}var S="/.indexes",E="js",C="index",T=function(e){return e.getContent().then(function(n){var r=t.parse(n),i={fullPath:e.getEntity().getFullPath(),id:"jQuery.sap.declare",declare:[]};return t.visit(r,i,c),i})};return w.prototype={isSupported:r,getModule:l,getIndexPath:i,getTimestamp:o,searchDependencies:u,searchDependenciesFromAST:s,generateIndexJson:a,mapProjectModules:p,getProjectPath:d,getUI5ProjectInfo:g},{IndexUtil:w}}),define("sap.watt.ideplatform.indexmanager/service/util/dependencyMapUtil",["sap/watt/lib/lodash/lodash"],function(e){"use strict";function t(e){return e.getProject().then(function(e){return e.getChild(u).then(function(e){return e?Q(!0):Q(!1)})})}function n(t){var n=this;return t.getProject().then(function(t){return t.createFile(u).then(function(r){var i={};return r.setContent(JSON.stringify(i)).then(function(){return t.getCurrentMetadata(!0).then(function(r){for(var i=[],o=0;o<r.length;o++){var a=r[o];e.endsWith(a.name,".js")&&(i=i.concat(t._oOwner.context.service.filesystem.documentProvider.getDocument(a.path).then(function(e){n.indexManagerImpl.getDependencies(e)})))}return Q.allSettled(i).then(function(e){var r=[];return e.forEach(function(e){e.value&&e.value.length>0&&e.value[0]&&r.push(e.value[0])}),n.updateDependencies(t,r)})})})})})}function r(e,t,n){var r=this;return e.getChild(u).then(function(e){return e.getContent().then(function(i){try{var o=JSON.parse(i)}catch(a){return Q}return o.modules||(o.modules=[]),n&&r.removeExistingDependencies(o,n),t.forEach(function(e){var t=e.document.getEntity().getFullPath();if(o.modules.length>0){for(var n=!1,r=0;r<o.modules.length;r++)if(o.modules[r].filePath===e.filePath){for(var i=!1,a=0;a<o.modules[r].dependentModules.length;a++)if(o.modules[r].dependentModules[a].filePath===t){i=!0;break}i||t===o.modules[r].filePath||o.modules[r].dependentModules.push({filePath:t,requireType:e.requireType}),n=!0;break}n||o.modules.push({filePath:e.filePath,dependentModules:[{filePath:t,requireType:e.requireType}]})}else o.modules.push({filePath:e.filePath,dependentModules:[{filePath:t,requireType:e.requireType}]})}),o.generationDateTime=(new Date).toUTCString(),e.setContent(JSON.stringify(o,null,4)).then(function(){return e.save()})})})}function i(e){return e.getProject().then(function(t){return t.getChild(u).then(function(t){return t.getContent().then(function(t){for(var n=JSON.parse(t),r=0;r<n.modules.length;r++)if(n.modules[r].filePath===e.getEntity().getFullPath())return Q(n.modules[r].dependentModules);return Q(null)})})})}function o(e){var t=e.getEntity().getFullPath();return e.getProject().then(function(e){return e.getChild(u).then(function(e){for(var n=JSON.parse(e.getContent()),r=[],i=0;i<n.modules.length;i++)for(var o=0;o<n.modules[i].dependentModules.length;o++)n.modules[i].dependentModules[o].filePath===t&&r.push({filePath:n.modules[i].filePath,name:n.modules[i].name});return Q(r)})})}function a(e,t){for(var n=t.getEntity().getFullPath(),r=e.modules.length-1;r>=0;r--)if(e.modules[r].dependentModules){for(var i=e.modules[r].dependentModules.length-1;i>=0;i--)e.modules[r].dependentModules[i].filePath===n&&e.modules[r].dependentModules.splice(i,1);0===e.modules[r].dependentModules.length&&e.modules.splice(r,1)}}function s(e,t,n,r){if(!e||!n)throw new Error;this.docProvider=e,this.settingProject=t,this.i18n=n,this.indexManagerImpl=r}var u=".dependencies.json";return s.prototype={dependencyMapExists:t,buildDependencyMap:n,updateDependencies:r,getDependent:i,getRequired:o,removeExistingDependencies:a},{DependencyMapUtil:s}}),define("sap.watt.ideplatform.indexmanager/service/cache/indexMemoryCache",[],function(){"use strict";function e(e){if(!e){var t=this.i18n.getText("i18n","log_emptypath");return Q.reject(new Error(t))}return l[e]?Q({source:e,index:l[e]}):Q()}function t(e){if(!e){var t=this.i18n.getText("i18n","log_emptypath");return Q.reject(new Error(t))}var n=this.indexUtil;return r(e,n).then(function(t){return t?i(e,n):Q()}).fail(function(e){return Q.reject(e)})}function n(e){if(!e){var t=this.i18n.getText("i18n","log_emptypath");return Q.reject(new Error(t))}return l[e]?(delete l[e],Q(e)):Q()}function r(e,t){return l[e]?t.getTimestamp(e).then(function(t){t=t||0;var n=l[e].changedOn||0;return Q(t>n)}):Q(!0)}function i(e,t){return t.generateIndexJson(e).then(function(n){return n?(l[e]=n,t.getProjectPath(e).then(function(t){p[t]&&(p[t][e]=n.module)}).done(),Q(e)):Q()})}function o(e,t){var n=this,r={};if(p[t]){var i=p[t];for(var o in i)i.hasOwnProperty(o)&&(r[i[o]]=o);return Q(r)}var a=Q.defer(),s=[],u=[];return e.forEach(function(e){"jQuery.sap.require"===e.identifier&&(s.push(n.indexUtil.mapProjectModules(t)),u.push(e))}),Q.allSettled(s).then(function(e){for(var n=0;n<e.length;n++){var s=e[n];if("fulfilled"===s.state&&"jQuery.sap.require"===u[n].identifier){i=s.value,p[t]=i;for(o in s.value)i.hasOwnProperty(o)&&(r[i[o]]=o)}}a.resolve(r)}),a.promise}function a(e,t,n){var r=this;if(!p[t])return Q({});var i=p[t],o=Q.defer(),a=[];return e.forEach(function(e){"jQuery.sap.require"===e.identifier&&a.push(r.indexUtil.getModule(n))}),Q.allSettled(a).then(function(t){for(var r=0;r<t.length;r++){var a=t[r];"fulfilled"===a.state&&"jQuery.sap.require"===e[r].identifier&&(i[n.getFullPath()]=a.value.id)}o.resolve()}),o.promise}function s(e,t,n){var r=this;if(!p[t])return Q();var i=Q.defer(),o=[];return e.forEach(function(e){"jQuery.sap.require"===e.identifier?o.push(r.indexUtil.getModule(n,/jQuery\.sap\.declare\(".+"\);/i)):"sap.ui.define"===e.identifier&&o.push(r.indexUtil.getModule(n,/sap\.ui\.define\(".+"\);/i))}),Q.all(o).then(function(e){e.forEach(function(e){e&&e.id&&(p[t][e.path]=e.id)}),i.resolve()}),i.promise}function u(e){return this.indexUtil.getProjectPath(e).then(function(e){if(p.hasOwnProperty(e)){var t=p[e];for(var n in t)t.hasOwnProperty(n)&&delete t[n];return Q()}})}function c(e,t){if(!e||!t)throw new Error;this.indexUtil=e,this.i18n=t}var l={},p={};return c.prototype={loadIndex:e,refreshIndex:t,deleteIndex:n,deleteModule:u,refreshModuleList:o,refreshModule:a,addModule:s},{IndexMemoryCache:c}}),define("sap.watt.ideplatform.indexmanager/service/cache/indexFileCache",["../util/remoteDocUtil"],function(e){"use strict";function t(e){var t=this.indexUtil.getIndexPath(e);return this.remoteDocUtil.loadDocument(t).then(function(t){try{return Q({source:e,index:JSON.parse(t)})}catch(n){return Q({})}}).fail(function(e){return Q.reject(e)})}function n(e){var t=this.remoteDocUtil,n=this.indexUtil;return i(e,t,n).then(function(r){return r?o(e,t,n):Q()}).fail(function(e){return Q.reject(e)})}function r(e){var t=this.indexUtil.getIndexPath(e);return this.remoteDocUtil.deleteDocument(t).then(function(){return Q(e)}).fail(function(e){return Q.reject(e)})}function i(e,t,n){var r=n.getIndexPath(e);return t.loadDocument(r).then(function(t){if(!t)return Q(!0);var r=0;try{var i=JSON.parse(t);r=i.changedOn||0}catch(o){return Q(!0)}return n.getTimestamp(e).then(function(e){return docChangedOn=e||0,Q(docChangedOn>r)})}).fail(function(){return Q(!0)})}function o(e,t,n){return n.generateIndexJson(e).then(function(r){if(r){var i=n.getIndexPath(e),o=JSON.stringify(r,null,"	");return t.saveDocument(i,o).then(function(){return Q(e)})}return Q()})}function a(t,n,r){if(!t||!n||!r)throw new Error;this.remoteDocUtil=new e.RemoteDocUtil(t,r),this.indexUtil=n}return a.prototype={loadIndex:t,refreshIndex:n,deleteIndex:r},{IndexFileCache:a}}),define("sap.watt.ideplatform.indexmanager/service/IndexManagerImpl",["./util/indexUtil","./util/dependencyMapUtil","./cache/indexMemoryCache","./cache/indexFileCache"],function(e,t,n,r){"use strict";function i(t,i,o,a){return u?u:(s=new e.IndexUtil(i,o,a),u=t&&"file"===t.host?new r.IndexFileCache(i,s,o):new n.IndexMemoryCache(s,o),void 0)}var o,a,s,u=null;return{configure:function(e){o=e.dependencies,i(e.cache,this.context.service.filesystem.documentProvider,this.context.i18n,e.summaryFromMetaProvider),a=new t.DependencyMapUtil(this.context.service.filesystem.documentProvider,this.context.service.setting.project,this.context.i18n,this)},getDependentIndexes:function(e,t){return s.getProjectPath(e).then(function(n){return n&&0===n.indexOf("/com.sap.watt")?Q([]):u.refreshModuleList(o,n).then(function(n){var r=[];return t?o.forEach(function(i){r.push(s.searchDependenciesFromAST(i.identifier,e,t,n))}):o.forEach(function(t){r.push(s.searchDependencies(t.identifier,e,n))}),Q.all(r).then(function(e){for(var t=[],n=[],r=0;r<e.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(i[o]),t.push(u.refreshIndex(i[o]));return Q.all(t).then(function(){var e=[];for(r=0;r<n.length;r++){var t=u.loadIndex(n[r]).then(function(e){return Q({name:e.source,json:e.index})});e.push(t)}return Q.all(e).then(function(e){var t={};for(var n in e){var r=e[n];t[r.name]=r.json}return Q(t)})})}).fail(function(e){return Q.reject(e)})})})},getDependentModules:function(e){var t=this.context.service.filesystem.documentProvider;return this.updateDependencyMap(e).then(function(){return a.getDependent(e).then(function(e){var n=[];return e.forEach(function(e){n.push(t.getDocument(e.filePath))}),Q.all(n)})})},hasDependentModules:function(e){var t=this,n=e.getEntity().getName();return this.updateDependencyMap(e).then(function(){return a.getDependent(e).then(function(r){if(r&&r.length>0){var i="Delete not possible, file "+n+" has "+r.length+" dependent modules. \nDo you want to refactor?";return t.context.service.usernotification.confirm(i).then(function(n){n.bResult&&t.context.service.filesearch.setVisible(!0).then(function(){t.context.service.filesearch.refactor(e)})}).done(),Q(!0)}return Q(!1)})})},getUI5ProjectInfo:function(e){return s.getProjectPath(e).then(function(e){return s.getUI5ProjectInfo(e)})},onDocumentSaved:function(e){var t=e.params.document,n=this;if(t&&t.getEntity){var r=t.getEntity();if(!r||!s.isSupported(r.getFileExtension()))return;s.getProjectPath(r.getFullPath()).then(function(e){e&&0===e.indexOf("/com.sap.watt")||u.refreshIndex(r.getFullPath()).then(function(){u.refreshModule(o,e,r).then(function(){u.refreshModuleList(o,e).then(function(e){Q.all(n.getDependencies(t,e)).then(function(){})}).done()}).done()}).fail(function(e){console.warn(e)}).done()}).done()}},onDocumentDeleted:function(e){var t=e.params.document;if(t&&t.getEntity){var n=t.getEntity();if(!n)return;if(s.isSupported(n.getFileExtension())||"folder"===n.getType()){var r=n.getFullPath();u.deleteIndex(r).fail(function(e){console.warn(e)}).done(),u.deleteModule(r).fail(function(e){console.warn(e)}).done()}}},onDocumentChanged:function(e){"renamed"===e.params.changeType&&this.onDocumentDeleted(e)},onDocumentOpened:function(e){var t=e.params.document;if(t&&t.getEntity){var n=t.getEntity(),r=n.getFullPath(),i=[];o.forEach(function(e){s.searchDependencies(e.identifier,r).then(function(e){for(var t in e)i.push(u.refreshIndex(e[t]))}).fail(function(e){console.warn(e)})}),Q.all(i).then(function(){}).done()}},onDocumentCreated:function(e){var t=e.params.document;if(t&&t.getEntity){var n=t.getEntity();if(!n||!s.isSupported(n.getFileExtension()))return;s.getProjectPath(n.getFullPath()).then(function(e){return e&&0===e.indexOf("/com.sap.watt")?Q():Q(u.addModule(o,e,n))}).done()}},getDependencies:function(e,t){var n=e.getEntity().getFullPath(),r=[],i=[];return o.forEach(function(o){r.push(s.searchDependencies(o.identifier,n,t).then(function(t){for(var n in t){var r={filePath:t[n],requireType:o.identifier,document:e};i.push(r)}}).fail(function(e){console.warn(e)}))}),Q.allSettled(r).then(function(){return Q(i)})},updateDependencyMap:function(e,t){return e.getProject().then(function(n){return"com.sap.watt"!==n.getEntity().getName()?a.dependencyMapExists(e).then(function(r){return r?t?a.updateDependencies(n,t,e):Q:a.buildDependencyMap(e)}):void 0})},_getIndexUtil:function(){return s}}}),define("sap.watt.ideplatform.intellisence/command/Intellisence",{execute:function(){return this.context.service.intellisence.executeIntellisence()},isAvailable:function(){return!0},isEnabled:function(){return this.context.service.intellisence.getCodeEditor().then(function(e){return e?e.getVisible().then(function(e){return e?!0:!1}):!1})}}),define("sap.watt.ideplatform.intellisence/service/contentassist/LinkModeHelper",[],function(){var e,t=function(t){e=new s(t)},n=function(t){for(;e.aMarkerId&&e.aMarkerId.length>0;){var n=e.aMarkerId.pop();e._oEditorControl.removeMarker(n)}if(e._oEditorControl.clearSelection(),t)if(e.escapePosition)e._oEditorControl.moveCursorTo(e.escapePosition.row,e.escapePosition.column);else if(e.aLinkPositions&&e.aLinkPositions.length>0){var r=e.aLinkPositions.pop();e._oEditorControl.moveCursorTo(r.end.row,r.end.column+1)}e.bLinkPosition=!1,e.bLinkGroup=!1,e.aLinkPositions=[],e.aLinkGroups=[],e._oEditorControl.removeEventListener("change",e._onEditorChange)},r=function(){if(e.bLinkPosition){var t=e._oEditorControl.getCursorPosition(),r=e._getLinkPositionIndexByCursor(e.aLinkPositions,t);if(0>r)n(!1);else{if(e.aLinkPositions.length<2)return;r<e.aLinkPositions.length-1?r++:r=0}e._setSelection(e.aLinkPositions[r])}else if(e.bLinkGroup){var t=e._oEditorControl.getCursorPosition(),r=e._getLinkGroupIndexByCursor(t);if(0>r)n(!1);else{if(e.aLinkGroups.length<2)return;r<e.aLinkGroups.length-1?r++:r=0}e._setGroupSelection(e.aLinkGroups[r])}},i=function(){if(e.bLinkPosition){var t=e._oEditorControl.getCursorPosition(),r=e._getLinkPositionIndexByCursor(e.aLinkPositions,t);if(0>r)n(!1);else{if(e.aLinkPositions.length<2)return;r>0?r--:r=e.aLinkPositions.length-1}e._setSelection(e.aLinkPositions[r])
}else if(e.bLinkGroup){var t=e._oEditorControl.getCursorPosition(),r=e._getLinkGroupIndexByCursor(t);if(0>r)n(!1);else{if(e.aLinkGroups.length<2)return;r>0?r--:r=e.aLinkGroups.length-1}e._setGroupSelection(e.aLinkGroups[r])}},o=function(){return e&&(e.bLinkPosition||e.bLinkGroup)},a=function(t){if(!o())if(void 0!=t.groups&&null!=t.groups&&0!=t.groups.length||void 0!=t.positions&&null!=t.positions&&0!=t.positions.length){if(e.bLinkPosition=!1,e.bLinkGroup=!1,e.escapePosition=t.escapePosition?e._offsetToPos(t.escapePosition):null,e._onEditorChange=function(t){if(!e.bIgnoreChange)if(e.bLinkPosition){var r=t.data,i=-1;"removeText"==t.data.action?i=e._getLinkPositionIndexByRange(e.aLinkPositions,r.range,"remove"):"insertText"==t.data.action&&(i=e._getLinkPositionIndexByRange(e.aLinkPositions,r.range,"insert")),0>i?n(!1):"removeText"==t.data.action?e._updateLinkMode(i,t.data,"remove"):"insertText"==t.data.action&&e._updateLinkMode(i,t.data,"insert")}else if(e.bLinkGroup){var r=t.data,i=-1;"removeText"==t.data.action?i=e._getLinkGroupIndexByRange(r.range,"remove"):"insertText"==t.data.action&&(i=e._getLinkGroupIndexByRange(r.range,"insert")),0>i?n(!1):"removeText"==t.data.action?e._updateLinkMode(i,t.data,"remove"):"insertText"==t.data.action&&e._updateLinkMode(i,t.data,"insert")}},e._oEditorControl.addEventListener("change",e._onEditorChange),t.positions&&t.positions.length>0){e.bLinkPosition=!0,e.aLinkPositions=[],e.aMarkerId=[];for(var r=0;r<t.positions.length;r++)e.aLinkPositions.push({start:e._offsetToPos(t.positions[r].offset),end:e._offsetToPos(t.positions[r].offset+t.positions[r].length)});e._setSelection(e.aLinkPositions[0]),e._setMarker(e.aLinkPositions)}else if(t.groups&&t.groups.length>0){e.bLinkGroup=!0,e.aLinkGroups=[],e.aMarkerId=[];for(var r=0;r<t.groups.length;r++){for(var i=[],a=0;a<t.groups[r].positions.length;a++)i.push({start:e._offsetToPos(t.groups[r].positions[a].offset),end:e._offsetToPos(t.groups[r].positions[a].offset+t.groups[r].positions[a].length)});e.aLinkGroups.push(i),e._setMarker(i)}e._setGroupSelection(e.aLinkGroups[0])}}else e._oEditorControl.setFocus()},s=function(e){this.bLinkPosition=!1,this.bLinkGroup=!1,this.parent=e,this._oEditorControl=e._oEditorControl};return s.prototype={_setMarker:function(e){for(var t=0;t<e.length;t++){var n=e[t],r=this._oEditorControl.getRange(n.start.row,n.start.column,n.end.row,n.end.column);this.aMarkerId.push(this._oEditorControl.addMarker(r,"acmark","text",!1))}},_setSelection:function(e){var t=this._oEditorControl.getSelection(),n=t.getRange();n.setStart(e.start.row,e.start.column),n.setEnd(e.end.row,e.end.column),t.clearSelection(),t.setSelectionRange(n)},_offsetToPos:function(e){for(var t=this._oEditorControl.getAllLines(),n=0,r=0,i=0;n<t.length&&i+t[n].length<e;)i+=t[n].length,i++,n++;return r=e-i,{row:n,column:r}},_setGroupSelection:function(e){this._setSelection(e[0])},_updateLinkMode:function(e,t,n){for(;this.aMarkerId&&this.aMarkerId.length>0;){var r=this.aMarkerId.pop();this._oEditorControl.removeMarker(r)}if(this.bLinkPosition){if("remove"==n){var i=t.range.end.column-t.range.start.column;this.aLinkPositions[e].end.column-=i;for(var o=e+1;o<this.aLinkPositions.length;o++)this.aLinkPositions[o].start.column-=i,this.aLinkPositions[o].end.column-=i;this.escapePosition.row==this.aLinkPositions[e].end.row&&this.escapePosition.column>=this.aLinkPositions[e].end.column&&(this.escapePosition.column-=i)}else if("insert"==n){var i=t.range.end.column-t.range.start.column;this.aLinkPositions[e].end.column+=i;for(var o=e+1;o<this.aLinkPositions.length;o++)this.aLinkPositions[o].start.column+=i,this.aLinkPositions[o].end.column+=i;this.escapePosition.row==this.aLinkPositions[e].end.row&&this.escapePosition.column>=this.aLinkPositions[e].start.column&&(this.escapePosition.column+=i)}this.aMarkerId=[],this._setMarker(this.aLinkPositions)}else if(this.bLinkGroup){for(var a=[],o=0;o<this.aLinkGroups[e].length;o++)a.push({start:{row:this.aLinkGroups[e][o].start.row,column:this.aLinkGroups[e][o].start.column},end:{row:this.aLinkGroups[e][o].end.row,column:this.aLinkGroups[e][o].end.column}});this._oEditorControl.getSelectionRange();var s=this._getLinkPositionIndexByRange(this.aLinkGroups[e],t.range,n);if("remove"==n)for(var i=t.range.end.column-t.range.start.column,o=0;o<this.aLinkGroups[e].length;o++)this._updateGroupPosition(e,o,i,"remove");else if("insert"==n)for(var i=t.range.end.column-t.range.start.column,o=0;o<this.aLinkGroups[e].length;o++)this._updateGroupPosition(e,o,i,"insert");this._updateSameGroupText(a,e,s),this.aMarkerId=[];for(var o=0;o<this.aLinkGroups.length;o++)this._setMarker(this.aLinkGroups[o])}},_updateSameGroupText:function(e,t,n){for(var r=this._oEditorControl.getTextRange(this.aLinkGroups[t][n].start.row,this.aLinkGroups[t][n].start.column,this.aLinkGroups[t][n].end.row,this.aLinkGroups[t][n].end.column),i=this.aLinkGroups[t][n].end.column-this.aLinkGroups[t][n].start.column,o=e[n].end.column-e[n].start.column,a=this._oEditorControl.oEditor,s=0;s<e.length;s++)if(s!=n){var u;n>s?u=this._oEditorControl.getRange(e[s].start.row,e[s].start.column,e[s].end.row,e[s].end.column):s>n&&(e[s].start.row==e[n].start.row&&(e[s].start.column+=i-o,e[s].end.column+=i-o),u=this._oEditorControl.getRange(e[s].start.row,e[s].start.column,e[s].end.row,e[s].end.column)),this.bIgnoreChange=!0,a.session.bIgnoreChange=!0,this._oEditorControl.replace(u,r),a.session.bIgnoreChange=!1,this.bIgnoreChange=!1;for(var c=s+1;c<e.length;c++)e[c].start.row==e[n].start.row&&(e[c].start.column+=i-o,e[c].end.column+=i-o)}},_updateGroupPosition:function(e,t,n,r){if("remove"==r){this.aLinkGroups[e][t].end.column-=n;for(var i=0;i<this.aLinkGroups.length;i++)for(var o=0;o<this.aLinkGroups[i].length;o++)(i!=e||o!=t)&&this.aLinkGroups[i][o].start.row==this.aLinkGroups[e][t].end.row&&this.aLinkGroups[i][o].start.column>this.aLinkGroups[e][t].start.column&&(this.aLinkGroups[i][o].start.column-=n,this.aLinkGroups[i][o].end.column-=n)}else if("insert"==r){this.aLinkGroups[e][t].end.column+=n;for(var i=0;i<this.aLinkGroups.length;i++)for(var o=0;o<this.aLinkGroups[i].length;o++)(i!=e||o!=t)&&this.aLinkGroups[i][o].start.row==this.aLinkGroups[e][t].end.row&&this.aLinkGroups[i][o].start.column>this.aLinkGroups[e][t].start.column&&(this.aLinkGroups[i][o].start.column+=n,this.aLinkGroups[i][o].end.column+=n)}},_getLinkGroupIndexByCursor:function(e){for(var t=0;t<this.aLinkGroups.length;t++){var n=this._getLinkPositionIndexByCursor(this.aLinkGroups[t],e);if(n>=0)return t}return-1},_getLinkPositionIndexByCursor:function(e,t){for(var n=0;n<e.length;n++)if(t.row>=e[n].start.row&&t.row<=e[n].end.row&&t.column>=e[n].start.column&&t.column<=e[n].end.column)return n;return-1},_getLinkGroupIndexByRange:function(e,t){for(var n=0;n<this.aLinkGroups.length;n++){var r=this._getLinkPositionIndexByRange(this.aLinkGroups[n],e,t);if(r>=0)return n}return-1},_getLinkPositionIndexByRange:function(e,t,n){if("insert"==n){for(var r=0;r<e.length;r++)if(t.start.row==e[r].end.row&&t.start.column>=e[r].start.column&&t.start.column<=e[r].end.column)return r}else if("remove"==n)for(var r=0;r<e.length;r++)if(t.start.row>=e[r].start.row&&t.start.row<=e[r].end.row&&t.end.column>=e[r].start.column&&t.end.column<=e[r].end.column)return r;return-1}},{initLinkMode:t,exitLinkMode:n,nextLinkPos:r,preLinkPos:i,getLinkMode:o,enterLinkMode:a}}),define("sap.watt.ideplatform.intellisence/service/contentassist/HintModeHelper",[],function(){var e,t=function(t){e=new l(t)},n=function(){return e&&e.bHintMode},r=function(t,n,r,i){if(e.bSuffix=i,void 0==t)return e.bHintMode&&(e._oHintElement.style.display="none",e.bHintMode=!1,e._replaceBySpace(e._oHintStatus,0)),void 0;e.parent.aProposals=t,e.parent.oCoords=n,e.parent.sPrefix=r;for(var o=0;o<e.parent.aProposals.length-1&&e.parent.aProposals[o].unselectable;)o++;return e.parent.selectedIndex=o,a()},i=function(t,n){e.bHintMode&&(e._oHintElement.style.display="none",e.bHintMode=!1,t?(e._oHintStatus.column=-1,e._oHintStatus.row=-1,e._oHintStatus.length=0):e._replaceBySpace(e._oHintStatus,0,!0,n))},o=function(t,n,r){t&&(e._oHintStatus.column=t),n&&(e._oHintStatus.row=n),r&&(e._oHintStatus.length=r)},a=function(){if(e.parent.aProposals.length>0){e.parent.selectedIndex||(e.parent.selectedIndex=0);var t=e.parent.aProposals[e.parent.selectedIndex],n="",r=e.parent.sPrefix,i="",o=0;t.proposal&&r&&t.proposal.toLowerCase().indexOf(r.toLowerCase())>=0&&(r=t.proposal.slice(0,t.proposal.toLowerCase().indexOf(r.toLowerCase())+r.length)),void 0==r&&(r="");var a,s=0;for(a=t.proposal;"\n"!=a[s]&&s<a.length;)n+=a[s],s++;if(s<a.length&&"\n"==a[s]&&(n+="..."),t.overwrite&&n.length>=r.length||!t.overwrite&&n.length>=0){var u=e._getPosition(e.parent.selectedIndex),c=e.parent._oContainer.offsetWidth-60;c=c>20?c:1e3;var l=t.helpDescription,p=!1;l&&l.length>0&&-1!==l.indexOf("Deprecated!")&&(p=!0),t.overwrite?(i=p?"<span class='description' style='text-decoration:line-through; max-width:"+(c-10)+"px' >"+n.substring(r.length)+"</span><div class='arrows' style='background-position:0% "+u+"'></div>":"<span class='description' style='max-width:"+(c-10)+"px' >"+n.substring(r.length)+"</span><div class='arrows' style='background-position:0% "+u+"'></div>",o=n.substring(r.length).length):(i=p?"<span class='description' style='text-decoration:line-through; max-width:"+(c-20)+"px' >"+n+"</span><div class='arrows' style='background-position:0% "+u+"'></div>":"<span class='description' style='max-width:"+(c-20)+"px' >"+n+"</span><div class='arrows' style='background-position:0% "+u+"'></div>",o=n.length),e._oHintElement.innerHTML=i,h=jQuery(e._oHintElement).height(),e._oHintElement.style.top=e.parent.oCoords.pageY+"px",e._oHintElement.style.left=e.parent.oCoords.pageX+"px",e._oHintElement.style.display="block";var f=e.parent.aProposals.filter(function(e){return!e.unselectable});e.bHintMode?0==o&&1==e.parent.aProposals.length?(e._oHintElement.style.display="none",e.bHintMode=!1,e._replaceBySpace(e._oHintStatus,0)):f.length>1?e._replaceBySpace(e._oHintStatus,o+1):e._replaceBySpace(e._oHintStatus,o):0==o&&1==e.parent.aProposals.length?(e._oHintElement.style.display="none",e.bHintMode=!1):(e.bHintMode=!0,e._oHintStatus.length=0,f.length>1?e._replaceBySpace(e._oHintStatus,o+1):e._replaceBySpace(e._oHintStatus,o))}else e.bHintMode&&(e._oHintElement.style.display="none",e.bHintMode=!1,e._replaceBySpace(e._oHintStatus,0))}else e.bHintMode&&(e._oHintElement.style.display="none",e.bHintMode=!1,e._replaceBySpace(e._oHintStatus,0))},s=function(t,n){var r=jQuery(e.parent._oContainer).offset();return t<r.left||n<r.top||t>r.left+e.parent._oContainer.offsetWidth||n>r.top+e.parent._oContainer.offsetHeight?(this.cancelHint(),void 0):(e._oHintElement.style.top=n+"px",e._oHintElement.style.left=t+"px",void 0)},u=function(){if(e._checkBottomIndex(e.parent.selectedIndex))return!1;var t=e.parent.selectedIndex===e.parent.aProposals.length-1?0:e.parent.selectedIndex+1;return e._lineDown(t)},c=function(){if(e._checkTopIndex(e.parent.selectedIndex))return!1;var t=0===e.parent.selectedIndex?e.parent.aProposals.length-1:e.parent.selectedIndex-1;return e._lineUp(t)};tryShowHint=function(){var t=e.parent._oCodeCompletionService,n=e.parent._oEditor;t&&n.getContentStatus(!0,!0).then(function(n){var r=n;return n.ignoreSnippetProposals=!0,n.ignoreContextProposals=!1,n.isAutoHint=!0,n.caseSensitive=!0,e.parent.oContentStatus=n,t.instanceOf("sap.watt.common.service.editor.PrefixCalculation")?t.getCalculatedPrefix(r).then(function(e){return r.prefix=e,r}):Q(r)}).then(function(n){var i=n;(!n.bComment||e.parent._bHintComment)&&t.getWordSuggestions(n).then(function(t){if(!(t.targetFile&&t.targetFile!=i.targetFile||t.asyncId&&t.asyncId!=i.prefix))if(t.isValue&&0==t.proposals.length)""===i.prefix&&e.bHintMode&&r(void 0,void 0,void 0,i.bSuffix);else{if(!e._canShowHint(i,t.proposals))return r(void 0,void 0,void 0,i.bSuffix),void 0;r(t.proposals,i.coords,i.prefix,i.bSuffix)}}).fail(function(e){console.warn(e)}).done()}).done()};var l=function(e){this.bHintMode=!1,this.parent=e,this._oContainer=e._oContainer,this._oEditorControl=e._oEditorControl,this._oHintStatus={column:-1,row:-1,length:0},this._initHintDiv()};return l.prototype={_initHintDiv:function(){var e=jQuery(".ace_autocomplete_hint"),t=!1;if(e&&e.length>0)for(var n=0;n<e.length;n++)if(e[n].parentNode===this._oContainer){this._oHintElement=e[n],t=!0;break}t||(this._oHintElement=document.createElement("div"),this._oHintElement.className="ace_autocomplete_hint",this._oHintElement.style.display="none",this._oContainer.appendChild(this._oHintElement))},_replaceBySpace:function(e,t,n,r){if(!this.bSuffix){var i=jQuery(this.parent._oContainer).offset().left;if(this.parent.oCoords.pageX+this._oHintElement.offsetWidth<=i)return}var o=this._oEditorControl.getCursorPosition();if(e.length!=t||e.column!=o.column||e.row!=o.row){var a=-1,s=-1,u=-1,c=-1,l=-1;if(0==e.length&&t>0?(a=o.row,s=o.column,u=o.row,c=o.column,l=t):e.length>0&&0==t?(n||r?(a=e.row,s=e.column,u=e.row,c=e.column+e.length):(a=o.row,s=o.column,u=o.row,c=o.column+e.length),l=0):(u=e.column==o.column&&e.row==o.row?o.row:e.row,a=o.row,s=o.column,c=o.column+e.length,l=t),this._oHintStatus.length=t,this._oHintStatus.column=o.column,this._oHintStatus.row=o.row,this._oHintStatus.row!=u&&!r)return this._oHintStatus.column=-1,this._oHintStatus.row=-1,this._oHintStatus.length=0,void 0;for(var p="",f=0;l>f;f++)p+=" ";if(-1!=l&&this._oEditorControl&&this._oEditorControl.oEditor){var d=this._oEditorControl.oEditor,h=this._oEditorControl.getRange(a,s,u,c);d.session.bIgnoreChange=!0;try{this._oEditorControl.replace(h,p),""==p&&this._oEditorControl.moveCursorTo(o.row,o.column+1),this._oEditorControl.moveCursorTo(o.row,o.column)}catch(m){d.session.bIgnoreChange=!1}d.session.bIgnoreChange=!1}}},_getPosition:function(e){var t=!1,n=!1;return 0>e||e>=this.parent.aProposals.length?"-100%":(t=this._checkTopIndex(e),n=this._checkBottomIndex(e),t&&n?"-100%":t||n?t?n?"-100%":"0%":"100%":"50%")},_canShowHint:function(e,t){if(0==e.offset)return!1;var n=e.buffer[e.offset-1];if("\n"==n||"	"==n||" "==n)return!1;if(0==t.length)return!1;if(e.offset<e.buffer.length){var r=e.buffer[e.offset];return r>="a"&&"z">=r||r>="A"&&"Z">=r||r>="0"&&"9">=r||"_"===r?!1:!0}return!0},_lineDown:function(e){for(;this.parent.aProposals[e].unselectable&&e<this.parent.aProposals.length-1;)e++;return this.parent.selectedIndex=e,a(),!0},_lineUp:function(e){for(;this.parent.aProposals[e].unselectable&&e>0;)e--;return this.parent.selectedIndex=e,a(),!0},_checkTopIndex:function(e){if(e>=0&&e<this.parent.aProposals.length){for(var t=0;e>t&&this.parent.aProposals[t].unselectable;)t++;return t==e?!0:!1}return!1},_checkBottomIndex:function(e){if(e>=0&&e<this.parent.aProposals.length){for(var t=e+1;t<this.parent.aProposals.length&&this.parent.aProposals[t].unselectable;)t++;return t==this.parent.aProposals.length?!0:!1}return!1}},{initHintMode:t,showHint:r,cancelHint:i,setHintStatus:o,showHtmlHint:a,lineDown:u,lineUp:c,tryShowHint:tryShowHint,getHintMode:n,updatePosition:s}}),define("sap.watt.ideplatform.intellisence/service/contentassist/PopupModeHelper",[],function(){var e,t=function(t){e=new f(t)},n=function(){return e&&e.bPopupMode},r=function(){var t,n,r,i,o,a,s,u;if(e.bPopupMode=!0,n="",u=e.parent._oContainer.offsetWidth,o=jQuery(e.parent._oContainer).offset().left+u,a=document.documentElement.clientHeight,e._oElement.style.height=e.parent.aProposals.length>e._nRows?e._nRows*e._nRowHeight+"px":"auto",e._oElement.setAttribute("unselectable","on"),e.parent.aProposals.length>0)for(t=0;t<e.parent.aProposals.length;t++){var c=e._getIconPath(e.parent.aProposals[t].category),l=e.parent.aProposals[t].helpDescription,p=!1;l&&l.length>0&&-1!==l.indexOf("Deprecated!")&&(p=!0),s=e.parent.aProposals[t].unselectable?"unselectable":"selectable",n+=""!==c?p?'<li  selected_id="'+t+'"'+' class="'+s+'-item"><img src="'+c+'" /><span style="text-decoration:line-through;" class="intellisense_description '+s+'">'+jQuery.sap.encodeHTML(e.parent.aProposals[t].description)+"</span></li>":'<li  selected_id="'+t+'"'+' class="'+s+'-item"><img src="'+c+'" /><span class="intellisense_description '+s+'">'+jQuery.sap.encodeHTML(e.parent.aProposals[t].description)+"</span></li>":p?'<li class="proposalitem '+s+'-item" selected_id="'+t+'"><span style="text-decoration:line-through;" class="'+s+'">'+jQuery.sap.encodeHTML(e.parent.aProposals[t].description)+"</span></li>":'<li class="proposalitem '+s+'-item" selected_id="'+t+'"><span class="'+s+'">'+jQuery.sap.encodeHTML(e.parent.aProposals[t].description)+"</span></li>"}e._oElement.innerHTML=n,e._oElement.style.width="auto",e._oElement.style.display="block",e._oElement.style.maxWidth=u-50+"px",setTimeout(function(){e._oElement.style.width=e._oElement.offsetWidth+"px"},100),r=e._oElement.offsetWidth,i=e._oElement.offsetHeight,e._oElement.style.left=e.parent.oCoords.pageX+r>o?o-r-2+"px":e.parent.oCoords.pageX+-2+"px",e._oElement.style.top=e.parent.oCoords.pageY+i+e._nRowHeight>a&&e.parent.oCoords.pageY-2-e._dynamicConfiguration.aceEditorFontSize>=i?e.parent.oCoords.pageY-i-6-e._dynamicConfiguration.aceEditorFontSize+"px":e.parent.oCoords.pageY+6+"px",e._ensureFocus(),e.parent.context.event.fireHelpTipShown({index:e.parent.selectedIndex,proposals:e.parent.aProposals,website:e.parent._sHelpWebsite,refresh:!0}).done(),jQuery(".selectable-item, .selectable-item > img, .selectable-item > span").hover(function(t){if(e.bPopupMode&&e.bInScrolling!==!0)try{var n=t.target;if("LI"!=n.tagName)var n=n.parentNode;var r=n.attributes.selected_id;if(r&&r.nodeValue){var i=parseInt(r.nodeValue);e._focusIndex(i)}}catch(t){}},function(){!e.bPopupMode})},i=function(t,n){var r=jQuery(e.parent._oContainer).offset();if(t<r.left||n<r.top||t>r.left+e.parent._oContainer.offsetWidth||n>r.top+e.parent._oContainer.offsetHeight)return this.deactivate(),void 0;var i=e._oElement.offsetWidth,o=e._oElement.offsetHeight,a=r.left+e.parent._oContainer.offsetWidth,s=document.documentElement.clientHeight;e._oElement.style.left=t+i>a?a-i-2+"px":t+-2+"px",e._oElement.style.top=n+o+e._nRowHeight>s&&n-2-e._dynamicConfiguration.aceEditorFontSize>=o?n-o-6-e._dynamicConfiguration.aceEditorFontSize+"px":n+6+"px"},o=function(){e.parent._oEditor.getContentStatus(!0,!1).then(function(t){return t?e.parent._oCodeCompletionService?(e.parent.oContentStatus=t,t.ignoreSnippetProposals=!1,t.ignoreContextProposals=!1,t.isAutoHint=!1,e.parent._oCodeCompletionService.getWordSuggestions(t).then(function(n){n.prefix&&(t.prefix=n.prefix),n.isValue&&0===n.proposals.length||e._updatePopup(n.proposals,t.coords,t.prefix)}).done(),void 0):(alert(e.parent.context.i18n.getText("i18n","msg_no_codecompletion")),void 0):(alert(e.parent.context.i18n.getText("i18n","msg_no_editor_content")),void 0)}).done()},a=function(){for(var t=e._oElement.childNodes,n=0;n<t.length;n++){var r=t[n];if(r.className.indexOf("ace_autocomplete_selected")>=0)return r}},s=function(){var t=e._getBottomIndex();return e._oElement.childNodes[t].className.indexOf("ace_autocomplete_selected")>-1&&(e._scrollIntoView(e._oElement.childNodes[t],!0),t=e._getBottomIndex()),e._lineDown(t)},u=function(){var t=e._getTopIndex();return e._oElement.childNodes[t].className.indexOf("ace_autocomplete_selected")>-1&&(e._scrollIntoView(e._oElement.childNodes[t],!1),t=e._getTopIndex()),e._lineUp(t)},c=function(){e._oElement.style.display="none",e.bPopupMode=!1},l=function(){var t=e.parent.selectedIndex===e.parent.aProposals.length-1?0:e.parent.selectedIndex+1;return e._lineDown(t)},p=function(){var t=0===e.parent.selectedIndex?e.parent.aProposals.length-1:e.parent.selectedIndex-1;return e._lineUp(t)},f=function(e){this.parent=e,this._oContainer=e._oContainer,this._oEditorControl=e._oEditorControl,this._nRows=10,this._nRowHeight=22,this._oElement={},this._dynamicConfiguration={aceEditorFontSize:13,bLogViewerShown:!1,bDebuggerShown:!1},this.bPopupMode=!1,this._initPopupDiv()};return f.prototype={_initPopupDiv:function(){var e=jQuery(".ace_autocomplete_popup"),t=!1;if(e&&e.length>0)for(var n=0;n<e.length;n++)if(e[n].parentNode===this._oContainer){this._oElement=e[n],jQuery(this._oElement).unbind("contextmenu"),jQuery(this._oElement).unbind("mouseup"),t=!0;break}t||(this._oElement=document.createElement("ul"),this._oElement.className="ace_autocomplete_popup",this._oElement.style.display="none",this._oContainer.appendChild(this._oElement));var r=this;jQuery(this._oElement).bind("contextmenu",function(){return r._oEditorControl.setFocus(),!1}),jQuery(this._oElement).bind("mouseup",function(){return r._oEditorControl.setFocus(),!1})},_updatePopup:function(e,t,n){if(this.parent.aProposals=e,this.parent.oCoords=t,this.parent.sPrefix=n,0==this.parent.aProposals.length)return c(),void 0;for(var i=0;i<this.parent.aProposals.length-1&&this.parent.aProposals[i].unselectable;)i++;this.parent.selectedIndex=i,r()},_getIconPath:function(e){var t="";if(void 0!=e)for(var n=0;n<this.parent._aCategoryIcon.length;n++)if(this.parent._aCategoryIcon[n].type==e)return this.parent._aCategoryIcon[n].isExternal?require.toUrl(this.parent._aCategoryIcon[n].path):this.parent._aCategoryIcon[n].isRoot?this.parent._aCategoryIcon[n].path:this.parent._sIconRoot+this.parent._aCategoryIcon[n].path;return t},_getSelectedIconPath:function(e){var t="";if(void 0!=e)for(var n=0;n<this.parent._aCategoryIcon.length;n++)if(this.parent._aCategoryIcon[n].type==e)return this.parent._aCategoryIcon[n].isExternal?require.toUrl(this.parent._aCategoryIcon[n].path):this.parent._aCategoryIcon[n].isRoot?this.parent._aCategoryIcon[n].pathSelected:this.parent._sIconRoot+this.parent._aCategoryIcon[n].pathSelected;return t},_focusElement:function(e,t){if(void 0==t&&(t=a()),void 0!=t){if(t.className=t.className.replace("ace_autocomplete_selected",""),t.childNodes.length>0&&"IMG"==t.childNodes[0].nodeName){var n=t.attributes.selected_id;if(n&&n.nodeValue){var r=parseInt(n.nodeValue);t.childNodes[0].src=this._getIconPath(this.parent.aProposals[r].category)}}e.className.indexOf("ace_autocomplete_selected")<0&&(e.className=e.className+" ace_autocomplete_selected",e.childNodes.length>0&&"IMG"==e.childNodes[0].nodeName&&(e.childNodes[0].src=this._getSelectedIconPath(this.parent.aProposals[this.parent.selectedIndex].category))),e.focus();var i=this._oElement;e.offsetTop<i.scrollTop?this._scrollIntoView(e,!0):e.offsetTop+e.offsetHeight>i.scrollTop+i.clientHeight&&this._scrollIntoView(e,!1),this.parent.context.event.fireHelpTipShown({index:this.parent.selectedIndex,proposals:this.parent.aProposals,website:this.parent._sHelpWebsite,refresh:!1}).done()}},_ensureFocus:function(){this._oElement.scrollTop=0;var e=this._oElement.childNodes[this.parent.selectedIndex];e&&(e.className.indexOf("ace_autocomplete_selected")<0&&(e.className=e.className+" ace_autocomplete_selected"),e.childNodes.length>0&&"IMG"==e.childNodes[0].nodeName&&(e.childNodes[0].src=this._getSelectedIconPath(this.parent.aProposals[this.parent.selectedIndex].category)))},_lineDown:function(e){for(;this.parent.aProposals[e].unselectable&&e<this.parent.aProposals.length-1;)e++;return this._focusIndex(e)},_lineUp:function(e){for(;this.parent.aProposals[e].unselectable&&e>0;)e--;return this._focusIndex(e)},_focusIndex:function(e){this.parent.selectedIndex=e;var t=this._oElement.childNodes[e];return this._focusElement(t),!0},_getTopIndex:function(){for(var e=this._oElement.childNodes,t=0;t<e.length;t++){var n=e[t];if(n.offsetTop>=this._oElement.scrollTop)return t}return 0},_getBottomIndex:function(){for(var e=this._oElement.childNodes,t=0;t<e.length;t++){var n=e[t];if(n.offsetTop+n.offsetHeight>this._oElement.scrollTop+this._oElement.clientHeight)return Math.max(0,t-1)}return e.length-1},_scrollIntoView:function(e,t){this.bInScrolling=!0,e.parentNode.scrollTop=t?e.offsetTop:e.offsetTop-e.parentNode.offsetHeight+e.offsetHeight+4,this._scrollingTimer&&jQuery.sap.clearDelayedCall(this._scrollingTimer),this._scrollingTimer=jQuery.sap.delayedCall(200,this,function(){this.bInScrolling=!1,this._scrollingTimer=null})}},{initPopupMode:t,showPopup:r,updatePopupProposals:o,current:a,pageDown:s,pageUp:u,lineDown:l,lineUp:p,deactivate:c,getPopupMode:n,updatePosition:i}}),define("sap.watt.ideplatform.intellisence/service/contentassist/TermModeHelper",[],function(){var e,t,n,r,i,o,a=!1,s=function(t){a=!1,e=t._oEditorControl},u=function(){return a},c=function(s){s.prefix,s.offset,i=s.offset,o=s.prefix,a=!0,t=s;var u=e.getCursorPosition();n=u.column,r=u.row;var c,l,f=0,d=0;return o&&(f=o.length),s.stringValue&&(d=s.stringValue.length),c=n-f,l=n-f+d,p(r,c,r,l),{stringValue:s.stringValue,container:e.getContainer()}},l=function(t){if(t&&e&&e.oEditor){var i,s,u=0;o&&(u=o.length),i=n-u,s=n;var c=f(r,i,r,s),l=e.getRange(c.start.row,c.start.column,c.end.row,c.end.column);e.replace(l,t),e.navigateTo(r,n)}a=!1,setTimeout(function(){e.setFocus()},0)},p=function(t,n,r,i){var o=e.getRange(t,n,r,i),a=e.getSelection();a&&a.setSelectionRange(o)},f=function(o,a,s,u){for(var c=i,l=e.getLine(r),p=l.substring(0,n),f=p.lastIndexOf('"'),d=p.lastIndexOf("{"),h=!1;"<"!==t.buffer[c]&&(">"!==t.buffer[c]||">"===t.buffer[c]&&d===f+1);){if('"'===t.buffer[c]||"'"===t.buffer[c]){h=!0;break}c++}return c>i&&h&&(u+=c-i),{start:{row:o,column:a},end:{row:s,column:u}}};return{initTermMode:s,initTermsContext:c,replaceByTerm:l,getTermMode:u}}),define("sap.watt.ideplatform.intellisence/service/IntellisenceImpl",["./contentassist/LinkModeHelper","./contentassist/HintModeHelper","./contentassist/PopupModeHelper","./contentassist/TermModeHelper"],function(e,t,n,r){"use strict";var i=[],o=function(e,t,n,r,i){return e.isEmpty()||(t>=e.start.row&&t<=e.end.row&&(t>e.start.row?n-1<=e.end.column&&(t=e.start.row,n=e.start.column):n-1<=e.end.column&&n>=e.start.column&&(t=e.start.row,n=e.start.column)),r>=e.start.row&&r<=e.end.row&&(r<e.end.row?i+1>=e.start.column&&(r=e.end.row,i=e.end.column):i<=e.end.column&&i+1>=e.start.column&&(r=e.end.row,i=e.end.column))),{start:{row:t,column:n},end:{row:r,column:i}}};return{_sHelpWebsite:"",configure:function(e){i=i.concat(e.codeCompletion),this._sHelpWebsite=e.helpWebsite,this._aCategoryIcon=e.categoryIcon,this._sIconRoot=e.iconRoot,this._iHintLevel=e.hintLevel,this._aStyles=e.styles,this._bStyleLoaded=!1,this._aConfiguredLibraries=e.libraries,this._aPrefix=e.aPrefix},getFocusElement:function(){return this.getContent()},executeIntellisence:function(){this.context.service.usagemonitoring.startPerf("editor","get_completion_content").done();var e=this.getCodeCompletion(),t=this.getCodeEditor(),n=Q.all([e,t]),r=this;return n.spread(function(e,t){return t?e?t.getReadOnly().then(function(n){if(n===!0)return Q();var i;return t.getContentStatus(!0,!0).then(function(t){return i=t,i.ignoreSnippetProposals=!1,i.ignoreContextProposals=!1,i.isAutoHint=!1,i.caseSensitive=!1,e.instanceOf("sap.watt.common.service.editor.PrefixCalculation")?e.getCalculatedPrefix(i).then(function(e){i.prefix=e}):Q()}).then(function(){return e.getWordSuggestions(i)}).then(function(n){return null!=n.prefix&&(i.prefix=n.prefix),null!=i.stringValue&&0===n.proposals.length&&n.isValue!==!1?r._showTranslationProposals(t,i):(r.showSuggestions(n.proposals,i.coords,i.prefix),r.context.service.usagemonitoring.report("editor","get_completion_content",e._sName).done(),void 0)})}):Q():(r.context.service.usernotification.info(r.context.i18n.getText("i18n","msg_no_editor")).done(),Q())})},getCodeEditor:function(){return this.context.service.selection.getOwner().then(function(e){return e&&(e.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor")||e.instanceOf("sap.watt.common.service.editor.CodeCompletion"))?e:null})},_getCodeCompletionByParams:function(e){var t,n=this,r=Q.defer();return n._oEditor&&(this._oEditor.getName?r.resolve(n._oEditor.getName()):r.resolve(this._oEditor._sName)),r.resolve(),r.promise.then(function(n){return jQuery.each(i,function(r,i){if(i.fileExtension===e.toLowerCase()){var o=i.editor?i.editor:"aceeditor";if(n===o)return t=i.service,void 0}}),t})},getCodeCompletion:function(){var e=this.context.service.content,t=this;return this._aStyles&&!this._bStyleLoaded&&(this.context.service.resource.includeStyles(this._aStyles).done(),this._bStyleLoaded=!0),e.getCurrentDocument().then(function(e){if(e){var n=e.getEntity().getFileExtension();return t._getCodeCompletionByParams(n)}})},getCalculatedLibraries:function(e){var t=this,n=this.context.service.content,r=this.context.service.intellisence.calculatelibraryversion,i=e?Q(e):n.getCurrentDocument();return i.then(function(e){return r.getCalculatedLibraryVersion(e,t._aConfiguredLibraries)})},onEditorBeforeClosing:function(){this._oEditor=null,this.clearIntellisenceContext(),this.context.service.intellisence.guidance.clearGuidance().done()},onScroll:function(){this.updatePosition()},onSplitterPositionChanged:function(){this._positionChangeTimer&&jQuery.sap.clearDelayedCall(this._positionChangeTimer),this._positionChangeTimer=jQuery.sap.delayedCall(100,this,function(){this.updatePosition(),this._positionChangeTimer=null})},updatePosition:function(){n.getPopupMode()&&this._oEditor.getContentStatus(!0,!1).then(function(e){n.updatePosition(e.coords.pageX,e.coords.pageY)}).done(),t.getHintMode()&&this._oEditor.getContentStatus(!0,!1).then(function(e){t.updatePosition(e.coords.pageX,e.coords.pageY)}).done()},onSelectionChanged:function(e){var t=e.params.owner,n=this;if(t&&(t.instanceOf("sap.watt.common.plugin.aceeditor.service.Editor")||t.instanceOf("sap.watt.common.service.editor.CodeCompletion"))){var r=!1;n._oEditor!=t&&(n._oEditor=t,t.detachEvent("beforeClosing",n.onEditorBeforeClosing,n),t.attachEvent("beforeClosing",n.onEditorBeforeClosing,n),t.detachEvent("scroll",n.onScroll,n),t.attachEvent("scroll",n.onScroll,n),r=!0);var i=e.params.selection[0]?e.params.selection[0].document:void 0;(n._oDocument!=i||r)&&(n._oDocument=i,t.getUI5Editor().then(function(e){e&&n.initIntellisenceContext(e)}).done())}},initIntellisenceContext:function(i){var o=this;this.context.service.intellisence.config.getUserSetting().then(function(e){o.setSetting(e)}).done(),setTimeout(function(){o._oContainer=i.getContainer(),o._oEditorControl=i,n.initPopupMode(o),e.initLinkMode(o),t.initHintMode(o),r.initTermMode(o);var a=i.oEditor;o.getCodeCompletion().then(function(s){o._oCodeCompletionService=s,i.getContainer().onclick=function(e){if(n.getPopupMode())try{var i=null;i="SPAN"==e.target.tagName||"IMG"==e.target.tagName?e.target.parentNode:"STRONG"==e.target.tagName?e.target.parentNode.parentNode:e.target;var a=i.attributes.selected_id;if(a&&a.nodeValue){var s=parseInt(a.nodeValue);o.replace(s),o._oEditorControl.setFocus()}else n.deactivate(),t.getHintMode()&&t.cancelHint(!1,!0)}catch(e){}else t.getHintMode()&&t.cancelHint(!1,!0);if(r.getTermMode()){var u=o.context.service.translation;u&&u.hideTermUI().done()}},i.getContainer().onkeydown=function(r){var i=r.keyCode,a=r.altKey||r.ctrlKey;r.target&&"ace_text-input"!=r.target.className||(n.getPopupMode()?(9==i||a)&&n.deactivate():t.getHintMode()&&9!=i&&13!=i&&16!=i&&20!=i&&t.cancelHint(),e.getLinkMode()&&(9==i||13==i)&&o._oEditorControl.deleteCurrentSelection())},i.getContainer().onkeyup=function(e){var r=e.keyCode;e.target&&"ace_text-input"!=e.target.className||(n.getPopupMode()&&8===r?n.updatePopupProposals():2===o._iHintLevel&&8===r?(t.getHintMode()&&(t.setHintStatus(i.getCursorPosition().column),t.cancelHint()),t.tryShowHint()):1!==o._iHintLevel||110!==r&&190!==r||t.tryShowHint())},void 0==o.originalOnTextInput&&(o.originalOnTextInput=a.onTextInput),a._timeoutId=null,a._timeout=300,a._setAutoHintTimeout=function(e){null!==this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=setTimeout(e,this._timeout)},a.onTextInput=function(r){if(n.getPopupMode())"\n"==r?o.replace():(o.originalOnTextInput.call(a,r),n.updatePopupProposals());else if(t.getHintMode())"\n"==r||"	"==r?o.replace():(o.originalOnTextInput.call(a,r),a._setAutoHintTimeout(t.tryShowHint));else if(e.getLinkMode())"\n"==r?e.exitLinkMode(!0):(o.originalOnTextInput.call(a,r),a._setAutoHintTimeout(t.tryShowHint));
else{if(1===r.length&&7===r.charCodeAt(0))return;o.originalOnTextInput.call(a,r),o._iHintLevel>0&&(1==o._iHintLevel?"."===r&&a._setAutoHintTimeout(t.tryShowHint):2==o._iHintLevel&&a._setAutoHintTimeout(t.tryShowHint))}},a.commands.removeCommand("hideautocomplete"),a.commands.removeCommand("confirmautohint"),a.commands.removeCommand("shiftTab"),a.commands.removeCommand("delChar"),o.commandOriginalTab=a.commands.commands.indent.exec,a.commands.addCommand({name:"confirmautohint",bindKey:{win:"Tab",mac:"Tab",sender:"editor"},multiSelectAction:"forEach",exec:function(r,i,s){n.getPopupMode()?o.replace():t.getHintMode()?o.replace():e.getLinkMode()?e.nextLinkPos():o.commandOriginalTab.call(a,r,i,s)}}),o.commandOriginalShiftTab=a.commands.commands.outdent.exec,a.commands.addCommand({name:"shiftTab",bindKey:{win:"Shift-Tab",mac:"Shift-Tab",sender:"editor"},multiSelectAction:"forEach",exec:function(t,n,r){e.getLinkMode()?e.preLinkPos():o.commandOriginalShiftTab.call(a,t,n,r)}}),a.commands.addCommand({name:"hideautocomplete",bindKey:{win:"Esc",mac:"Esc",sender:"editor"},exec:function(){n.getPopupMode()&&n.deactivate(),t.getHintMode()?t.cancelHint():e.getLinkMode()&&e.exitLinkMode(!1)}}),o.commandOriginalDel=a.commands.commands.del.exec,a.commands.addCommand({name:"delChar",bindKey:{win:"Delete",mac:"Delete|Ctrl-D|Shift-Delete",sender:"editor"},multiSelectAction:"forEach",exec:function(e,n,r){t.getHintMode()?t.cancelHint():o.commandOriginalDel.call(a,e,n,r)}}),void 0==o.originalLineDown&&(o.originalLineDown=a.commands.commands.golinedown.exec),void 0==o.originalLineUp&&(o.originalLineUp=a.commands.commands.golineup.exec),void 0==o.originalPageDown&&(o.originalPageDown=a.commands.commands.gotopagedown.exec),void 0==o.originalPageUp&&(o.originalPageUp=a.commands.commands.gotopageup.exec),void 0==o.originalGotoLeft&&(o.originalGotoLeft=a.commands.commands.gotoleft.exec),void 0==o.originalGotoRight&&(o.originalGotoRight=a.commands.commands.gotoright.exec),void 0==o.originalGotoLineStart&&(o.originalGotoLineStart=a.commands.commands.gotolinestart.exec),void 0==o.originalGotoLineEnd&&(o.originalGotoLineEnd=a.commands.commands.gotolineend.exec),a.commands.commands.golinedown.exec=function(e,r,i){n.getPopupMode()?n.lineDown():t.getHintMode()?t.lineDown():o.originalLineDown.call(a,e,r,i)},a.commands.commands.golineup.exec=function(e,r,i){n.getPopupMode()?n.lineUp():t.getHintMode()?t.lineUp():o.originalLineUp.call(a,e,r,i)},a.commands.commands.gotoright.exec=function(e,r,i){n.getPopupMode()?n.lineDown():(t.getHintMode()&&t.cancelHint(),o.originalGotoRight.call(a,e,r,i))},a.commands.commands.gotoleft.exec=function(e,r,i){n.getPopupMode()?n.lineUp():(t.getHintMode()&&t.cancelHint(),o.originalGotoLeft.call(a,e,r,i))},a.commands.commands.gotopagedown.exec=function(e,r,i){n.getPopupMode()?n.pageDown():(t.getHintMode()&&t.cancelHint(),o.originalPageDown.call(a,e,r,i))},a.commands.commands.gotopageup.exec=function(e,r,i){n.getPopupMode()?n.pageUp():(t.getHintMode()&&t.cancelHint(),o.originalPageUp.call(a,e,r,i))},a.commands.commands.gotolinestart.exec=function(e,r,i){n.getPopupMode()||(t.getHintMode()&&t.cancelHint(),o.originalGotoLineStart.call(a,e,r,i))},a.commands.commands.gotolineend.exec=function(e,r,i){n.getPopupMode()||(t.getHintMode()&&t.cancelHint(),o.originalGotoLineEnd.call(a,e,r,i))}}).done()},0)},clearIntellisenceContext:function(){if(t&&t.getHintMode()&&t.cancelHint(!0),e&&e.getLinkMode()&&e.exitLinkMode(!1),n&&n.getPopupMode()&&n.deactivate(),r&&r.getTermMode()){var i=this.context.service.translation;i&&i.hideTermUI().done()}this.oUIContainer&&this.oUIContainer.removeAllContent()},initTermsContext:function(e){return r.initTermsContext(e)},replaceByTerm:function(e){return r.replaceByTerm(e)},_showTranslationProposals:function(e,t){t.prefix||(t.prefix="");var n=this.initTermsContext(t);if(n&&null!=n.stringValue){var r=this.context.service.translation,i=this;return e.getSelection().then(function(e){return r.showGetTermsUI(i.replaceByTerm,n.stringValue,!1,!1,!0,{left:t.coords.pageX,top:t.coords.pageY,container:n.container},{document:e.document})})}},showSuggestions:function(e,r,i){if(this.aProposals=e,this.oCoords=r,this.sPrefix=i,0==this.aProposals.length)return n.deactivate(),t.showHtmlHint(),void 0;for(var o=0;o<this.aProposals.length-1&&this.aProposals[o].unselectable;)o++;this.selectedIndex=o,e&&n.showPopup()},replace:function(r){var i=this.getInsertTerm(r),a=this;if(this._oEditorControl&&this._oEditorControl.oEditor){var s,u,c=this._oEditorControl.getCursorPosition(),l=0;this.sPrefix&&(l=this.sPrefix.length),i.overwrite?(s=c.column-l,u=c.column):(s=c.column,u=c.column);var p=o(this._oEditorControl.getSelectionRange(),c.row,s,c.row,u),f=this._oEditorControl.getRange(p.start.row,p.start.column,p.end.row,p.end.column);this._oEditorControl.replace(f,i.proposal)}setTimeout(function(){n.getPopupMode()&&n.deactivate(),t.getHintMode()&&t.showHint(void 0,void 0,void 0,a.oContentStatus.bSuffix),e.enterLinkMode(i)},0)},getInsertTerm:function(e){if(n.getPopupMode()){var t,r;return e>=0?r=this.aProposals[e]:(t=jQuery(n.current()).attr("selected_id"),r=this.aProposals[t]),r}return this.selectedIndex||(this.selectedIndex=0),this.aProposals[this.selectedIndex]},isShowPopup:function(){return n&&n.getPopupMode()?!0:!1},getSetting:function(){return{hintCode:this._iHintLevel>0?!0:!1}},setSetting:function(e){this._iHintLevel=e.hintCode?2:0}}}),define("sap.watt.ideplatform.intellisence/service/Guidance",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";return e.extend("sap.watt.common.plugin.intellisence.service.Guidance",{_oUIType:{help:0,translate:1},UIType:0,_sTranslationTitle:"Translations",_sAPITitle:"API Reference",_sAPIMoreInfo:"See full API documentation",_sHint:"To display context-aware API reference support in this pane, press Ctrl + space in code editor.",configure:function(e){this._aStyles=e.styles,this._bStyleLoaded=!1},getContent:function(){this._aStyles&&!this._bStyleLoaded&&(this.context.service.resource.includeStyles(this._aStyles).done(),this._bStyleLoaded=!0),null==this.oUIShell&&this._createUI(),this.bVisible=!0;var e=Q.defer();return e.resolve(this.oUIShell),e.promise},setVisible:function(t){var n=this;return e.prototype.setVisible.apply(this,arguments).then(function(){return n._initGuidance(t)})},onHelpTipShown:function(e){var t;e&&(this.iApiIndex=e.params.index,this.aProposals=e.params.proposals,this.sHelpWebsite=e.params.website,t=e.params.refresh,this.bVisible&&this._initHelpTipUI(t),this.UIType=this._oUIType.help)},clearGuidance:function(){this.oUIContainer&&this.oUIContainer.getDomRef()&&this.oUIContainer.getDomRef().offsetWidth>0&&this.oUIContainer.removeAllContent()},onTermTranslated:function(e){var t;e&&(this.sSearchText=e.params.text,this.aTerms=e.params.terms,this.iTermIndex=e.params.index,t=e.params.refresh,this.bVisible&&this._initTranslationUI(t),this.UIType=this._oUIType.translate)},_initTranslationUI:function(e){null==this.oUIShell&&this._createUI(),this.oRightPaneTitle.setText(this._sTranslationTitle),null!=this.aTerms&&this.iTermIndex>-1&&(e?this._showTranslation(this.sSearchText,this.aTerms,this.iTermIndex):this._updateTranslation(this.aTerms,this.iTermIndex))},_initHelpTipUI:function(e){null==this.oUIShell&&this._createUI(),this.UIType!==this._oUIType.help&&this.oRightPaneTitle.setText(this._sAPITitle);var t=this.aProposals[this.iApiIndex].helpDescription;(void 0==t||null==t)&&(t="");var n=this.aProposals[this.iApiIndex].helpTarget,r=n;(void 0==n||""===n||null==n)&&(n="sap.ui");var i=n.lastIndexOf(".");"function"===this.aProposals[this.iApiIndex].category?r=n.substring(0,i)+".html#"+n.substring(i+1):r+=".html",n=n.substring(0,i);var o=/{@link\s+(#[\w|.]+)\s+([\w|.]+)}/g,a=t.replace(o,'<a href="'+this.sHelpWebsite+r+'$1" target="_new" >$2 </a>');o=/{@link\s+([[\w|.|:]+]{0,1})([#[\w|.|:]+]{0,1})\s+([\w|.|:]+)}/g,a=a.replace(o,'<a href="'+this.sHelpWebsite+'$1.html$2" target="_new" >$3 </a>'),o=/{@link\s+([\w|.|:]+)}/g,a=a.replace(o,'<a href="'+this.sHelpWebsite+'$1.html" target="_new" >$1 </a>'),o=/\r\n\r\n|\n\n/g,a=a.replace(o,"\r\r"),o=/\r\n|\n/g,a=a.replace(o," "),a=a.replace(/{/g,"&#123").replace(/}/g,"&#125");var s=this.aProposals[this.iApiIndex].description,u=this.aProposals[this.iApiIndex].categoryDesc;s&&(s=s.replace(/{/g,"&#123").replace(/}/g,"&#125")),u&&(s=s+" ("+u+")");var c="";c+='<div class="intellisence_apiheader">'+s+"</div>",c+='<div class="intellisence_apibody">'+a,c+="<br><br>",this.aProposals[this.iApiIndex].helpUrl&&(c+='<a href="'+this.aProposals[this.iApiIndex].helpUrl+'"'+'class="intellisence_apilink" target="_new">'+this.context.i18n.getText("i18n","pane_api_moreinfo")+"</a>",c+="<br><br>"),c+="</div>",e?this._showHelpTip(n,c,this.iApiIndex):this._updateHelpTip(c)},_createUI:function(){this._sAPITitle=this.context.i18n.getText("i18n","pane_api_title"),this._sTranslationTitle=this.context.i18n.getText("i18n","pane_translation_title"),this._sAPIMoreInfo=this.context.i18n.getText("i18n","pane_api_moreinfo"),this._sHint=this.context.i18n.getText("i18n","pane_api_hint"),this.oUIShell=new sap.ui.commons.layout.VerticalLayout({width:"100%"}),this.oUIShell.addStyleClass("intellisence_panel");var e=new sap.ui.commons.layout.HorizontalLayout({width:"100%"});e.addStyleClass("intellisence_title"),this.oRightPaneTitle=new sap.ui.commons.Label,this.oRightPaneTitle.setText(this._sAPITitle),e.addContent(this.oRightPaneTitle),this.oUIShell.addContent(e);var t=new sap.ui.commons.HorizontalDivider;t.addStyleClass("intellisence_item_divider"),this.oUIShell.addContent(t,{left:"0px",top:"0px"}),this.oUIContainer=new sap.ui.commons.layout.VerticalLayout({width:"100%"}),this.oUIShell.addContent(this.oUIContainer);var n=new sap.ui.core.HTML({content:'<div class="intellisence_api_hint">'+jQuery.sap.encodeHTML(this._sHint)+"</div>",preferDOM:!1,width:"100%"});this.oUIContainer.addContent(n),this.oUIShell.attachBrowserEvent("contextmenu",function(e){e.preventDefault()},this)},_updateHelpTip:function(e){var t,n,r,i;if(this.oUIContainer&&(t=this.oUIContainer.getContent()[2])){if(n=t.getContent()[0],this.preSelectedIndex>-1){r=n.getContent()[2*this.preSelectedIndex];var o=this.aProposals[this.preSelectedIndex].description;this.aProposals[this.preSelectedIndex].categoryDesc&&(o=o+" ("+this.aProposals[this.preSelectedIndex].categoryDesc+")"),r.setContent('<div class="intellisence_api_deactive">'+o+"</div>")}this.iApiIndex>-1&&(i=n.getContent()[2*this.iApiIndex],i.setContent('<div class="intellisence_api_active">'+e+"</div>"),this.preSelectedIndex=this.iApiIndex),setTimeout(function(){var e=i.getDomRef(),n=t.getDomRef();n&&n.childNodes.length>1&&(n=n.childNodes[1]),e&&n&&void 0!==n.scrollTop&&(e.offsetTop<n.scrollTop?e.scrollIntoView(!0):e.offsetTop+e.offsetHeight>n.scrollTop+n.clientHeight&&e.scrollIntoView(!1))},0)}},_showHelpTip:function(e,t,n,r){var i,o,a,s;i=new sap.ui.commons.Label,i.setText(e),i.addStyleClass("intellisence_topic"),this.oUIContainer.removeAllContent(),s=new sap.ui.commons.HorizontalDivider,s.addStyleClass("intellisence_item_divider"),this.oUIContainer.addContent(i),this.oUIContainer.addContent(s);var u,c=this;u=c.oUIShell.getDomRef()&&c.oUIShell.getDomRef().parentNode?new sap.ui.commons.Panel({height:c.oUIShell.getDomRef().parentNode.clientHeight-80+"px",showCollapseIcon:!1,borderDesign:sap.ui.commons.enums.BorderDesign.None}):new sap.ui.commons.Panel({showCollapseIcon:!1,borderDesign:sap.ui.commons.enums.BorderDesign.None}),u.addStyleClass("intellisence_api_panel");for(var l=new sap.ui.commons.layout.VerticalLayout({width:"100%"}),p=0;p<this.aProposals.length;p++)if(this.aProposals[p].unselectable)a=new sap.ui.core.HTML({content:'<div style="display:none;height:0px" />',preferDOM:!1}),s=new sap.ui.core.HTML({content:'<div style="display:none;height:0px" />',preferDOM:!1}),l.addContent(a),l.addContent(s);else{if(void 0!=r&&""!=r.trim()&&this.aProposals[p].description.indexOf(r.trim())<0)continue;if(p==n)o=new sap.ui.core.HTML({content:'<div class="intellisence_api_active">'+t+"</div>",preferDOM:!1,width:"100%"}),s=new sap.ui.commons.HorizontalDivider,s.addStyleClass("intellisence_item_divider"),l.addContent(o),l.addContent(s),this.preSelectedIndex=n;else{var f=void 0==this.aProposals[p].description?"":this.aProposals[p].description;this.aProposals[p].categoryDesc&&(f=f+" ("+this.aProposals[p].categoryDesc+")"),a=new sap.ui.core.HTML({content:'<div class="intellisence_api_deactive">'+f.replace(/{/g,"&#123").replace(/}/g,"&#125")+"</div>",preferDOM:!1}),s=new sap.ui.commons.HorizontalDivider,s.addStyleClass("intellisence_item_divider"),l.addContent(a),l.addContent(s)}}u.addContent(l),this.oUIContainer.addContent(u),setTimeout(function(){var e=o.getDomRef(),t=u.getDomRef();t&&t.childNodes.length>1&&(t=t.childNodes[1]),e&&(e.offsetTop<t.scrollTop?e.scrollIntoView(!0):e.offsetTop+e.offsetHeight>t.scrollTop+t.clientHeight&&e.scrollIntoView(!1))},0)},_initGuidance:function(e){var t=void 0;if(e){this.bVisible=!0;var n=this;this.context.service.intellisence.isShowPopup().then(function(e){e?n._initHelpTipUI(!0):t=n.context.service.translation.isShowPopup().then(function(e){e&&n._initTranslationUI(!0)}).done()}).done()}else if(this.bVisible=!1,this.oUIContainer){this.oRightPaneTitle.setText(this._sAPITitle),this.oUIContainer.removeAllContent();var r=new sap.ui.core.HTML({content:'<div class="intellisence_api_hint">'+jQuery.sap.encodeHTML(this._sHint)+"</div>",preferDOM:!1,width:"100%"});this.oUIContainer.addContent(r)}return t?t:Q()},_showTranslation:function(e,t,n){var r,i,o,a,s;r=new sap.ui.commons.Label,r.setText('Translation Term:"'+e+'"'),r.addStyleClass("translation_topic"),this.oUIContainer.removeAllContent(),s=new sap.ui.commons.HorizontalDivider,s.addStyleClass("intellisence_item_divider"),this.oUIContainer.addContent(r),this.oUIContainer.addContent(s);var u;u=this.oUIShell.getDomRef()&&this.oUIShell.getDomRef().parentNode?new sap.ui.commons.Panel({height:this.oUIShell.getDomRef().parentNode.clientHeight-80+"px",showCollapseIcon:!1,borderDesign:sap.ui.commons.enums.BorderDesign.None}):new sap.ui.commons.Panel({showCollapseIcon:!1,borderDesign:sap.ui.commons.enums.BorderDesign.None}),u.addStyleClass("intellisence_api_panel");for(var c=new sap.ui.commons.layout.VerticalLayout({width:"100%"}),l=0;l<t.length;l++){if(a=new sap.ui.commons.layout.VerticalLayout({width:"100%"}),l==n?(i=new sap.ui.core.HTML({content:'<div class="intellisence_translation_active">'+t[l].value+"</div>",preferDOM:!1,width:"100%"}),this.preTermIndex=l,a.addContent(i)):(o=new sap.ui.core.HTML({content:'<div class="intellisence_translation_deactive">'+t[l].value+"</div>",preferDOM:!1}),a.addContent(o)),t[l].translations){var p=new sap.ui.commons.layout.VerticalLayout({width:"100%"});p.addStyleClass("translation_container");var f=new sap.ui.commons.Label;f.setText("Translations"),f.addStyleClass("translation_header"),p.addContent(f);for(var d=0;d<t[l].translations.length;d++){var h=t[l].translations[d].language,m=t[l].translations[d].value,g=new sap.ui.commons.Label;g.setText(h+":"+m),g.addStyleClass("translation_item"),p.addContent(g)}a.addContent(p)}s=new sap.ui.commons.HorizontalDivider,s.addStyleClass("intellisence_item_divider"),a.addContent(s),c.addContent(a)}u.addContent(c),this.oUIContainer.addContent(u),setTimeout(function(){var e=i.getDomRef(),t=u.getDomRef();t&&t.childNodes.length>1&&(t=t.childNodes[1]),e&&(e.offsetTop<t.scrollTop?e.scrollIntoView(!0):e.offsetTop+e.offsetHeight>t.scrollTop+t.clientHeight&&e.scrollIntoView(!1))},0)},_updateTranslation:function(e,t){var n,r,i,o;if(this.oUIContainer&&(n=this.oUIContainer.getContent()[2])){if(r=n.getContent()[0],this.preTermIndex>-1){i=r.getContent()[this.preTermIndex],i.removeAllContent();var a=new sap.ui.core.HTML({content:'<div class="intellisence_translation_deactive">'+e[this.preTermIndex].value+"</div>",preferDOM:!1});i.addContent(a);var s=new sap.ui.commons.HorizontalDivider;s.addStyleClass("intellisence_item_divider"),i.addContent(s)}if(t>-1){o=r.getContent()[t],o.removeAllContent();var u=new sap.ui.core.HTML({content:'<div class="intellisence_translation_active">'+e[t].value+"</div>",preferDOM:!1,width:"100%"});if(o.addContent(u),e[t].translations){var c=new sap.ui.commons.layout.VerticalLayout({width:"100%"});c.addStyleClass("translation_container");var l=new sap.ui.commons.Label;l.setText("Translations"),l.addStyleClass("translation_header"),c.addContent(l);for(var p=0;p<e[t].translations.length;p++){var f=e[t].translations[p].language,d=e[t].translations[p].value,h=new sap.ui.commons.Label;h.setText(f+":"+d),h.addStyleClass("translation_item"),c.addContent(h)}o.addContent(c)}this.preTermIndex=t}setTimeout(function(){var e=o.getDomRef(),t=n.getDomRef();t&&t.childNodes.length>1&&(t=t.childNodes[1]),e&&(e.offsetTop<t.scrollTop?e.scrollIntoView(!0):e.offsetTop+e.offsetHeight>t.scrollTop+t.clientHeight&&e.scrollIntoView(!1))},0)}}})}),define("sap.watt.ideplatform.intellisence/service/Config",["sap/watt/common/plugin/platform/service/ui/AbstractConfig"],function(e){"use strict";return e.extend("sap.watt.common.plugin.intellisence.service.Config",{_oContent:null,getUserPreferenceContent:function(){var e=this;return this._oContent||(this._oContent=this._createUI()),this.getUserSetting().then(function(t){return e._oSetting=t,e._initUI(),e._oContent})},configure:function(e){this._oPreferenceModel=new this.PreferenceModel(e.preferenceService),this._aStyles=e.styles},saveUserPreference:function(){if(!this._oContent)return Q();this._oSetting={hintCode:this._oHintCode.getChecked()};var e=this;return this.context.service.intellisence.setSetting(this._oSetting).then(function(){return e._oPreferenceModel.storeSession(e._oSetting)})},cancel:function(){var e=this;this.context.service.intellisence.getSetting().then(function(t){e._oSetting=t,e._initUI()}).done()},_createUI:function(){this.context.service.resource.includeStyles(this._aStyles).done();var e=new sap.ui.layout.form.Form("IntellisenceConfigForm",{title:null,layout:new sap.ui.layout.form.GridLayout("IntellisenceConfigLayout")}).addStyleClass("IntellisenceSetting_form"),t=new sap.ui.layout.form.FormContainer("IntellisenceConfigContainer"),n=new sap.ui.commons.Label({text:"Set auto hint",layoutData:new sap.ui.layout.ResponsiveFlowLayoutData({linebreak:!0})}).addStyleClass("subheader");this._oHintCode=new sap.ui.commons.CheckBox({text:"Enable",checked:!0}).addStyleClass("edtCheckbox");var r=new sap.ui.layout.VerticalLayout({layoutData:new sap.ui.layout.form.GridElementData({hCells:"16"})});r.addContent();var i=new sap.ui.layout.form.FormElement,o=new sap.ui.layout.form.FormElement;return r.addContent(this._oHintCode),i.addField(n),o.addField(r),t.addFormElement(i),t.addFormElement(o),e.addFormContainer(t),e},_initUI:function(){this._oHintCode.setChecked(this._oSetting.hintCode)},PreferenceModel:function(e){var t={beginSession:function(){return Q(!0)},storeSession:function(){},getSession:function(){return null},removeSession:function(){return Q(!0)}},n={_fPersistenceSrv:void 0,_sPersistenceNode:void 0,_oUserPreferencesAsJson:void 0,_bLoaded:!1,beginSession:function(){var e=this;return this._bLoaded?Q(this._oUserPreferencesAsJson):(this._bLoaded=!0,this._fPersistenceSrv.get(this._sPersistenceNode).then(function(t){return t&&(e._oUserPreferencesAsJson=t),e._oUserPreferencesAsJson}).fail(function(){e._oUserPreferencesAsJson=void 0}))},storeSession:function(e){return this._oUserPreferencesAsJson=e,this._fPersistenceSrv.set(e,this._sPersistenceNode)},getSession:function(){return this._oUserPreferencesAsJson},removeSession:function(){this._oUserPreferencesAsJson=void 0,this._fPersistenceSrv.remove(this._sPersistenceNode).done()}};return e&&e.service?(n._fPersistenceSrv=e.service,n._sPersistenceNode=e.node,n):t},getUserSetting:function(){if(this._oSetting)return Q(this._oSetting);var e=this;return this._oPreferenceModel.beginSession().then(function(t){return t?(e._oSetting=t,Q(t)):e.context.service.intellisence.getSetting().then(function(t){return e._oSetting=t,Q(t)})})}})}),define("sap.watt.ideplatform.intellisence/service/LibraryVersion",[],function(){"use strict";return{_mLibVersion:{},getLibVersion:function(e,t){var n=this,r={project:"",aLibrary:[]},i={};if(!t)return Q();for(var o=0;o<t.length;o++)i[t[o].name+t[o].id]=1;return e.getProject().then(function(t){var a=e.getEntity().getFileExtension(),s=t.getEntity()?t.getEntity().getName():"";return r.project=s,n._mLibVersion[s+a]?n._mLibVersion[s+a]:n.context.service.appmetadata.getNeoMetadata(e).then(function(e){if(e&&e.routes&&e.routes.length>0){var t=e.routes,u=null;for(o=0;o<t.length;o++)u=t[o],u.target&&i[u.target.name+a]>0&&"/resources"===u.target.entryPath&&("/resources"===u.path||"/webapp/resources"===u.path)&&r.aLibrary.push({id:a,library:u.target.name,version:u.target.version,path:u.path,entrypath:u.target.entryPath});return r.aLibrary.length>1&&(r.aLibrary=r.aLibrary.filter(function(e){return"/webapp/resources"===e.path})),n._mLibVersion[s+a]=r,r}}).fail(function(){n.context.service.log.info("code completion",n.context.i18n.getText("i18n","msg_no_ui5_wrong_version_int"),["user"]).done()})})}}}),define("sap.watt.ideplatform.intellisence/service/CalculateLibraryVersion",[],function(){"use strict";return{_mLibraries:{},configure:function(e){"local_hcproxy"!==sap.watt.getEnv("server_type")&&(this.sdkVersionProvider=e.sdkVersionProvider)},getCalculatedLibraryVersion:function(e,t){var n=this,r=[];if(this.sFileExtension=e.getEntity().getFileExtension(),jQuery.isEmptyObject(t))return Q();var i=t.filter(jQuery.proxy(this._filterByFileExtenstion,this)).sort(jQuery.proxy(this._versionCompareSorting,this));return this._useUI5Snapshot?[{name:"sapui5",version:"snapshot",remPath:"/sapui5nightly"}]:this.sdkVersionProvider?this.context.service.intellisence.libversion.getLibVersion(e,t).then(function(e){if(e&&e.aLibrary&&e.aLibrary.length>0&&sap.watt.getEnv("internal"))for(var t=0;t<e.aLibrary.length;t++)if("sapui5"===e.aLibrary[t].library&&"snapshot"===e.aLibrary[t].version)return[{name:"sapui5",version:"snapshot",remPath:"/sapui5nightly"}];return n.sdkVersionProvider.service.getLibraryVersionsFromHCP(e).then(function(t){n.topLocalLibrary=i[i.length-2],t&&t.length>0&&(r=t.filter(jQuery.proxy(n._filterByFileExtenstionVer,n)).sort(jQuery.proxy(n._versionCompareSorting,n)));var o=i.concat(r);return o=o.sort(jQuery.proxy(n._versionCompareSorting,n)),n._calculateLibraryVersion(e,o,n.sFileExtension)})}):this.context.service.intellisence.libversion.getLibVersion(e,i).then(function(e){return n._calculateLibraryVersion(e,i)})},useUI5Snapshot:function(e){this._useUI5Snapshot=e},_filterByFileExtenstion:function(e){return e.id===this.sFileExtension},_filterByFileExtenstionVer:function(e){return e.id===this.sFileExtension&&1===this._versionCompare(e,this.topLocalLibrary)},_calculateLibraryVersion:function(e,t){var n,r,i=[],o=!1,a=this,s={},u=0;if((!e||e&&e.aLibrary&&0===e.aLibrary.length)&&t&&t.length>0){for(n=0;n<t.length;n++)r||r===t[n].name||(r=t[n].name,i.push(this._getLatestVersionForType(t,t[n].name)));return i}for(n=0;e&&e.aLibrary&&n<e.aLibrary.length;n++){for(var c=0;c<t.length;c++)if(e.aLibrary[n].library!==t[c].name&&i.push(t[c]),e.aLibrary[n].library===t[c].name&&!o)if(e.aLibrary[n].version)u=a._versionCompare(e.aLibrary[n],t[c]),isNaN(u)&&a.context.service.log.info("code completion",this.context.i18n.getText("i18n","msg_no_ui5_wrong_version_int"),["user"]).done(),0===u&&(i.push(t[c]),o=!0),0>u&&(i.push(jQuery.isEmptyObject(s)?t[c]:s),o=!0),s=t[c];else{var l=this._getLatestVersionForType(t,t[c].name);i.push(l),o=!0}if(!o)if(jQuery.isEmptyObject(s)){var p=this._getLatestVersionForType(t,e.aLibrary[n].library);jQuery.isEmptyObject(l)||i.push(p),s={}}else i.push(s);o=!1}return i},_getLatestVersionForType:function(e,t){for(var n={},r=0;r<e.length;r++)e[r].name===t&&(n=e[r]);return n},_versionCompare:function(e,t){for(var n,r,i=e.version||"",o=t.version||"",a=i.split("."),s=o.split("."),u=Math.min(a.length,s.length),c=0;u>c;c++)if(n=parseInt(a[c],10),r=parseInt(s[c],10),n!==r)return n>r?1:r>n?-1:0/0;return a.length===s.length?0:a.length<s.length?-1:1},_versionCompareSorting:function(e,t){return e.name===t.name?this._versionCompare(e,t):e.name<t.name?-1:1}}}),define("sap.watt.ideplatform.intellisence/service/LibraryMetadataProviderImpl",["sap/watt/lib/jszip/jszip-shim"],function(){"use strict";return{configure:function(e){this._sdkProvider=e.sdkProvider,e.packageSet&&(this._packageSet=e.packageSet)},getLibraryMetaFromHCP:function(e,t,n){if(this._sdkProvider){console.log("Read SDK Meta from HCP SDKProvider with id "+t+" type "+n);var r=this._packageSet.filter(function(e){return e.id===this.id&&e.type===this.type},{id:t,type:n}),i=[];if(r)for(var o=0;o<r.length;o++)r[o].packages&&(i=i.concat(r[o].packages));switch(n){case"js":var a=["Library.jsmeta.json","Library.jstemplates.json"];break;case"xml":a=["Library.xmlmeta.json","Library.xmltemplates.json"];break;default:a=[]}return this._sdkProvider.service.getLibraryMetaFromHCP(e,i,a)}return Q([])}}}),function(){"use strict";jQuery.sap.declare("sap.watt.common.plugin.multieditor.control.TabStrip"),jQuery.sap.require("sap.ui.commons.TabStrip"),sap.ui.commons.TabStrip.extend("sap.watt.common.plugin.multieditor.control.TabStrip",{metadata:{events:{tabClick:{}}},init:function(){},selectTabByDomRef:function(e){var t=this.getItemIndex(e);t>-1&&t!==this.getSelectedIndex()&&this.fireTabClick({currentTabIndex:this.getSelectedIndex(),selectedTabIndex:t})},renderer:{}})}(),define("sap.watt.ideplatform.multieditor/control/TabStrip",function(){}),define("sap.watt.ideplatform.multieditor/service/MultiEditor",["sap/watt/common/plugin/platform/service/ui/AbstractEditor","../control/TabStrip"],function(e){"use strict";var t=e.extend("sap.watt.common.plugin.multieditor.service.MultiEditor",{});return jQuery.extend(t.prototype,{_aStyles:null,_aEditors:null,_aEditorsContent:null,_oTabStrip:null,_mSelectedIndexByDocument:null,init:function(){this._mSelectedIndexByDocument={},this._aEditorsContent=[],this._aStyles=[];var e=document.querySelectorAll("script[data-sap-ide-basedir][data-sap-ide-main]"),t=e[0],n="true"===t.getAttribute("data-sap-ide-leanwebide");n||this._aStyles.push({uri:"sap.watt.ideplatform.multieditor/css/multieditor.css"}),this._oTabStrip=new sap.watt.common.plugin.multieditor.control.TabStrip,this._oTabStrip.setWidth("100%"),this._oTabStrip.setHeight("100%"),this._oTabStrip.attachTabClick(this._onTabClick,this),this._oTabStrip.addStyleClass("multiEditor")},configure:function(e){this._aEditors=e.editors,this._createTabs()},getContent:function(){var e=this;return e.context.service.resource.includeStyles(e._aStyles).then(function(){return e._oTabStrip})},open:function(t){e.prototype.open.apply(this,arguments),this._mSelectedIndexByDocument[t.getKeyString()]||(this._mSelectedIndexByDocument[t.getKeyString()]=0);var n=this._mSelectedIndexByDocument[t.getKeyString()];this._oTabStrip.setSelectedIndex(n);var r=this;return this._initEditorContent(this._oTabStrip.getSelectedIndex()).then(function(){return r.getActiveEditor().open(t)}).then(function(){return r._aEditorsContent[n].getDomRef()?r.context.service.focus.setFocus(r.getActiveEditor()):void 0})},close:function(e){if(!this.hasDocument(e))return Q();for(var t=[],n=this,r=0;r<this._aEditors.length;r++)t.push(this._aEditors[r].service.close(e));return this._oDocument===e&&(this._oDocument=null,t.push(this.context.service.focus.detachFocus(this.getActiveEditor()))),Q.all(t).then(function(){delete n._mSelectedIndexByDocument[e.getKeyString()]})},flush:function(){return this.getActiveEditor().flush()},getTitle:function(){return this._oDocument&&this._oDocument.getEntity().getName()},getTooltip:function(){return this._oDocument&&this._oDocument.getEntity().getFullPath()},undo:function(){return this.hasDocuments()&&this.getActiveEditor().instanceOf("sap.watt.common.service.editor.UndoRedo")?this.getActiveEditor().undo():Q()},redo:function(){return this.hasDocuments()&&this.getActiveEditor().instanceOf("sap.watt.common.service.editor.UndoRedo")?this.getActiveEditor().redo():Q()},hasUndo:function(){return this.hasDocuments()&&this.getActiveEditor().instanceOf("sap.watt.common.service.editor.UndoRedo")?this.getActiveEditor().hasUndo():Q(!1)},hasRedo:function(){return this.hasDocuments()&&this.getActiveEditor().instanceOf("sap.watt.common.service.editor.UndoRedo")?this.getActiveEditor().hasRedo():Q(!1)},markClean:function(){return this.hasDocuments()&&this.getActiveEditor().instanceOf("sap.watt.common.service.editor.UndoRedo")?this.getActiveEditor().markClean():void 0},isClean:function(){return this.hasDocuments()&&this.getActiveEditor().instanceOf("sap.watt.common.service.editor.UndoRedo")?this.getActiveEditor().isClean():Q(!0)},containsEditor:function(e){for(var t=0;t<this._aEditors.length;t++)if(this._aEditors[t].service._sName===e._sName)return!0;return!1},getActiveEditor:function(){return this._aEditors[this._oTabStrip.getSelectedIndex()].service},getAllEditors:function(){for(var e=[],t=0;t<this._aEditors.length;t++)e.push(this._aEditors[t].service);return e},hasDocument:function(e){return void 0!==this._mSelectedIndexByDocument[e.getKeyString()]},hasDocuments:function(){return Object.keys(this._mSelectedIndexByDocument).length>0},_createTabs:function(){for(var e,t=0;t<this._aEditors.length;t++)e=new sap.ui.commons.Tab({text:this._aEditors[t].name}),this._oTabStrip.addTab(e)},_initEditorContent:function(e){var t=this;return this._aEditorsContent[e]?Q(this._aEditorsContent[e]):this._getEditorAt(e).getContent().then(function(n){t._oTabStrip.getTabs()[e].addContent(n),t._aEditorsContent[e]=n,n.addEventDelegate({onAfterRendering:function(){t.context.service.focus.setFocus(t.getActiveEditor()).done()}})})},_onTabClick:function(e){var t=e.getParameter("selectedTabIndex"),n=this;this.context.service.focus.detachFocus(n.getActiveEditor()).then(function(){return n._oTabStrip.setSelectedIndex(t),n._initEditorContent(t)}).then(function(){return n._getEditorAt(t).open(n._oDocument)}).then(function(){n._mSelectedIndexByDocument[n._oDocument.getKeyString()]=n._oTabStrip.getSelectedIndex()}).done()},_getEditorAt:function(e){return this._aEditors[e].service}}),t}),define("sap.watt.ideplatform.compare/service/Compare",[],function(){var e;return{COMPARE_PREFIX:"version-compare-",CMD_COMPARE_PREFIX:"version-compare-cmd-",_oDocument:null,_DocumentEditorMap:{},_undeRedoDetail:{},_aStyles:null,init:function(){return this.context.service.perspective.attachEvent("splitterPositionChanged",this.onSplitterPositionChanged,this),this.context.service.content.attachEvent("tabDoubleClicked",this.onSplitterPositionChanged,this),Q.sap.require("sap.watt.ideplatform.compare/lib/built-compare").then(function(t){e=t})},configure:function(e){this._aStyles=e.styles},getContent:function(){var e,t=this;return t._DocumentEditorMap[this._oDocument.getKeyString()]&&t._DocumentEditorMap[this._oDocument.getKeyString()].wrapperDiv?e=t._DocumentEditorMap[this._oDocument.getKeyString()].wrapperDiv:(e=new sap.ui.core.HTML({content:"<div style='width: 100%;height: calc(100% - 32px);background-color: white;' class=\"rdeCompare\"><span id='"+t._getSpanId(this._oDocument)+"' style='z-index: -1;width: 100%;height: 100%;opacity:0.9;'"+' class="compareCmdDiv"'+"'></span>"+"<div id='"+t._getDivId(this._oDocument)+"' style='width: 100%;height: 100%;overflow: auto;clear: both'"+"'></div>"+"</div>"}),t._DocumentEditorMap[this._oDocument.getKeyString()].wrapperDiv=e),this.context.service.resource.includeStyles(this._aStyles).thenResolve(e)},open:function(e){return this._oDocument=e,this._doCompare(this._oDocument)},close:function(e){var t=this._DocumentEditorMap[e.getKeyString()].editor.getCompareView().getEditors()[1];jQuery(t._domNode).off("compareEditorModify",this._DocumentEditorMap[e.getKeyString()].handler),this._DocumentEditorMap[e.getKeyString()].editor=null;var n=jQuery("div[id='"+this._getDivId(e)+"']"),r=jQuery("span[id='"+this._getSpanId(this._oDocument)+"']");
n&&n.remove(),r&&r.remove(),this._DocumentEditorMap[e.getKeyString()]=null},flush:function(){var e=this._DocumentEditorMap[this._oDocument.getKeyString()].editor;if(!this._DocumentEditorMap[this._oDocument.getKeyString()].options.newFile.readonly&&e){var t=e.getCompareView().getEditors()[1];return this._updateCompareColoring(t),this._oDocument.setContent(t.getText(),this.context.self)}},undo:function(){if(this._oDocument&&this._DocumentEditorMap[this._oDocument.getKeyString()]&&this._DocumentEditorMap[this._oDocument.getKeyString()].editor){var e=this._DocumentEditorMap[this._oDocument.getKeyString()].editor,t=e.getCompareView().getEditors()[1];return t._undoStack.undo()}return!1},redo:function(){if(this._oDocument&&this._DocumentEditorMap[this._oDocument.getKeyString()]&&this._DocumentEditorMap[this._oDocument.getKeyString()].editor){var e=this._DocumentEditorMap[this._oDocument.getKeyString()].editor,t=e.getCompareView().getEditors()[1];return t._undoStack.redo()}return!1},hasUndo:function(){if(this._oDocument&&this._DocumentEditorMap[this._oDocument.getKeyString()]&&this._DocumentEditorMap[this._oDocument.getKeyString()].editor){var e=this._DocumentEditorMap[this._oDocument.getKeyString()].editor,t=e.getCompareView().getEditors()[1];return this._undeRedoDetail.undo?this._undeRedoDetail.undo:t._undoStack.canUndo()}return!1},hasRedo:function(){if(this._oDocument&&this._DocumentEditorMap[this._oDocument.getKeyString()]&&this._DocumentEditorMap[this._oDocument.getKeyString()].editor){var e=this._DocumentEditorMap[this._oDocument.getKeyString()].editor,t=e.getCompareView().getEditors()[1];return this._undeRedoDetail.redo?this._undeRedoDetail.redo:t._undoStack.canRedo()}return!1},markClean:function(){if(this._oDocument&&this._DocumentEditorMap[this._oDocument.getKeyString()]&&this._DocumentEditorMap[this._oDocument.getKeyString()].editor){var e=this._DocumentEditorMap[this._oDocument.getKeyString()].editor,t=e.getCompareView().getEditors()[1];return t._undoStack.markClean()}return!1},isClean:function(){if(this._oDocument&&this._DocumentEditorMap[this._oDocument.getKeyString()]&&this._DocumentEditorMap[this._oDocument.getKeyString()].editor){var e=this._DocumentEditorMap[this._oDocument.getKeyString()].editor,t=e.getCompareView().getEditors()[1];return t._undoStack.isClean()}return!1},getState:function(){return null},getTitle:function(){var e=this;return this._oDocument.getEntity().getName()+" ["+e.context.i18n.getText("i18n","compare_title")+"]"},getTooltip:function(){var e=this;return this._oDocument.getEntity().getFullPath()+" ["+e.context.i18n.getText("i18n","compare_title")+"]"},isRestorable:function(){return!1},isAvailable:function(){return!0},compare:function(e,t,n,r){var i=this;this._oDocument=e;var o=this._getDivId(e),a=e.getEntity().getName();return/.*\.(xml)$/.test(a)&&(a=a.substring(0,a.lastIndexOf(".xml"))+".html"),Q("string"==typeof t?t:t.getContent()).then(function(t){var s={parentDivId:o,newFile:{InitialContent:n,readonly:!!r,Name:"new"+a},oldFile:{readonly:!0,Content:t,Name:"old"+a}};return i._DocumentEditorMap[e.getKeyString()]||(i._DocumentEditorMap[e.getKeyString()]={}),i._DocumentEditorMap[e.getKeyString()].options=s,i.context.service.content.open(e,i.context.service.compare)})},getFocusElement:function(){return document.getElementById(this._getDivId(this._oDocument))},getSelection:function(){return{document:this._oDocument}},onSplitterPositionChanged:function(){if(this._oDocument&&this._DocumentEditorMap&&this._DocumentEditorMap[this._oDocument.getKeyString()]){var e=this._DocumentEditorMap[this._oDocument.getKeyString()].editor;if(e&&e.getCompareView()&&e.getCompareView().getWidget()){var t=e.getCompareView().getWidget();"twoWay"===t.type&&t._uiFactory.getSplitter()._resize()}}},_doCompare:function(t){var n=this,r=this._DocumentEditorMap[t.getKeyString()].options;return Q(r.newFile.InitialContent?r.newFile.InitialContent:t.getContent()).then(function(i){var o=n._DocumentEditorMap[t.getKeyString()].editor;if(o){if(r.newFile.readonly)return;var a=o.getCompareView().getWidget();a.getEditors()[1].getTextView().setText(i),a.options.newFile.Content=i,a.options.mapper=null,a.refresh(!1)}else{sap.ui.getCore().applyChanges(),r.newFile.Content=i;var s=jQuery("div[id='"+n._getDivId(t)+"']");s.length>0&&s.empty(),o=n._DocumentEditorMap[t.getKeyString()].editor=new e(r,n._getSpanId(n._oDocument));var u=o.getCompareView().getEditors()[1];n._DocumentEditorMap[t.getKeyString()].handler=function(){n._onKeyPress(u)},jQuery(u._domNode).on("compareEditorModify",n._DocumentEditorMap[t.getKeyString()].handler)}})},_onKeyPress:function(e){this._oDocument.setContent(e.getText(),this.context.self).done()},_updateCompareColoring:function(e){var t=this._DocumentEditorMap[this._oDocument.getKeyString()].editor;if(t){var n=t.getCompareView().getWidget();n.options.newFile.Content=e.getText(),n.options.mapper=null,n.refresh(!1)}},_getDivId:function(e){return this.COMPARE_PREFIX+e.getKeyString()},_getSpanId:function(e){return this.CMD_COMPARE_PREFIX+e.getKeyString()}}}),define("sap.watt.ideplatform.libmetaaccess/service/LibraryMetaAccess",["sap/watt/lib/jszip/jszip-shim"],function(e){var t={configure:function(){},_getResponseFromHCP:function(e,t){var n=Q.defer(),r=new XMLHttpRequest;return r.open("GET",e),r.setRequestHeader("Accept","*/*"),r.responseType=t,r.onload=function(e){4===this.readyState&&this.status<300?n.resolve(this.response):n.reject(e)},r.send(),n.promise},_getJSZipFromHCP:function(t){return this._getResponseFromHCP(t,"arraybuffer").then(function(t){var n=new e(t);return n})},_getJsonFromHCP:function(e){return window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),jQuery.get(window.location.origin+e).fail(function(){console.log("Missed "+window.location.origin+e)})},_getMetaFromHCP:function(e){return window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),this._getResponseFromHCP(window.location.origin+e,"text").fail(function(){console.log("Missed "+window.location.origin+e)})},_deferredHCPAvailableLibraries:null,getLibraryVersionsFromHCP:function(){return this._getLibraryVersionsFromHCP()},getLibraryMetaFromHCP:function(t,n,r){for(var i=[],o=[],a=[],s=0;s<n.length;s++)for(var u=n[s].replace(/\./g,"/"),c=t+"/test-resources/"+u+"/designtime/codeassistance/",l=0;l<r.length;l++){var p=c+r[l];i.push(this._getMetaFromHCP(p)),a.push(u+"/"+r[l])}return Q.allSettled(i).spread(function(){for(var t=[],n=[],r=0;r<arguments.length;r++){var i=arguments[r];"fulfilled"===i.state&&i.value?(t.push(i.value),n.push(a[r])):"rejected"===i.state&&console.log("Load rejected "+i.reason)}for(var s=0;s<t.length;s++){var u=new e,c=u.file(n[s],t[s]);o.push(c)}return o}).fail(function(){return[]})},onAllPluginsStarted:function(){this._getLibraryVersionsFromHCP().done()},_getLibraryVersionsFromHCP:function(){if(this._deferredHCPAvailableLibraries)return this._deferredHCPAvailableLibraries.promise;this._deferredHCPAvailableLibraries=Q.defer();var e=this,t="",n="";return sap.watt.getEnv("internal")?(t="/sapui5preview/neo-app.json",n="/sapui5preview"):(t="/sapui5versions/neo-app.json",n="/sapui5versions"),this._getJsonFromHCP(t).then(function(t){var r=[];if(t.routes)for(var i=0;i<t.routes.length;i++){var o=t.routes[i],a={},s={};s.name=a.name="sapui5",a.id="js",s.id="xml",s.version=a.version=o.target.version,s.remPath=a.remPath=n+o.path,"/"!==o.path&&(r.push(a),r.push(s))}e._deferredHCPAvailableLibraries.resolve(r)}).fail(function(){e._deferredHCPAvailableLibraries.resolve([])}).done(),this._deferredHCPAvailableLibraries.promise}};return t}),define("sap.watt.ideplatform.hcpconnectivity/command/OpenCockpit",{execute:function(e,t){var n=this.context.service.hcpconnectivity;n.openCockpit(t).done()},isAvailable:function(){return!0},isEnabled:function(){var e=sap.watt.getEnv("server_type");return"java"===e||"local_hcproxy"===e?!1:!0}}),define("sap.watt.ideplatform.hcpconnectivity/command/OpenUIThemeDesigner",{execute:function(e,t){var n=this.context.service.hcpconnectivity;n.openUIThemeDesigner(t).done()},isAvailable:function(){return!0},isEnabled:function(){var e=sap.watt.getEnv("server_type");return"java"===e||"local_hcproxy"===e?!1:!0}}),define("sap.watt.ideplatform.hcpconnectivity/service/HCPConnectivity",["sap/watt/lib/lodash/lodash"],function(e){"use strict";var t,n=sap.watt.getEnv("context_root")+"api/html5api/accounts/",r=function(e,r,i,o,a,s){return t.context.service.system.getSystemInfo().then(function(u){var c=n+e,l=c+"/applications"+a,p=u.sEMail;return r&&(p=r),t.context.service.ajaxrequest.serviceCall(o,l,"GET",null,p,i,s)})},i=function(e,r,i,o,a,s){return t.context.service.system.getSystemInfo().then(function(u){var c=n+e,l=c+"/applications"+a,p=u.sEMail;return r&&(p=r),t.context.service.ajaxrequest.serviceCall(o,l,"POST",s,p,i)})},o=function(e,n,r){t=this;var i=sap.watt.getEnv("context_root")+"services/v1/instances/"+e+"/accounts/v1/members/"+n+"/accountlist";return t.context.service.ajaxrequest.serviceCall("helium_listaccounts",i,"GET",null,n,r)},a=function(e,r,i,o,a){return t=this,this.context.service.system.getSystemInfo().then(function(s){var u=n+e,c=u+"/subscriptions",l=s.sUsername;return r&&(l=r),t.context.service.ajaxrequest.serviceCall("helium_listapps",c,"GET",null,l,i,o,a)})},s=function(e,n,i,o){t=this;var a="";return r(e,n,i,"hcp_connectivity_getapps",a,o)},u=function(e,n,r,o,a){t=this;var s={name:o};if(a){var u=a.split("/"),c=[u[3],u[4]].join("/");s.repository=c}var l="";return i(e,n,r,"hcp_connectivity_createapp",l,s)},c=function(e,n,i,o){t=this;var a="/"+o;return r(e,n,i,"hcp_connectivity_getappinfo",a)},l=function(e,n,i,o){t=this;var a="/"+o+"/commits";return r(e,n,i,"heliumGetCommits",a)},p=function(e,n,i,o){t=this;var a="/"+o+"/versions";return r(e,n,i,"heliumGetVersions",a).then(function(e){return e.appName=o,e})},f=function(e,n,r,o,a,s){t=this;var u={version:s,commitId:a},c="/"+o+"/versions";return i(e,n,r,"heliumSetAppVersion",c,u)},d=function(e,n,r,o,a){t=this,a=encodeURIComponent(a);var s="/"+o+"/versions/"+a+"/action",u="ACTIVATE";return i(e,n,r,"heliumActivateApp",s,u)},h=function(e,n,r,o){t=this;var a="/"+o+"/action",s="START";return i(e,n,r,"heliumActivateApp",a,s)},m=function(e,n,r,o){t=this;var a="/"+o+"/action",s="RESTART";return i(e,n,r,"heliumActivateApp",a,s)},g=function(e){var t=sap.watt.getEnv("server_type");return"java"===t||"local_hcproxy"===t?null:Q(e?e:this.getHCPDefaultAccount()).then(function(e){var t=window.location.origin;t||(t=window.location.host);for(var n=t.split("."),r=window.location.protocol+"//"+"account",i=2;i<n.length;i++)r+="."+n[i];return r+="/cockpit",null!==e&&(r+="#/acc/"+e+"/accountdashboard"),r})},v=function(){var e=sap.watt.getEnv("server_type");return"java"===e||"local_hcproxy"===e?null:this.context.service.system.getSystemInfo().then(function(e){var t=e.sAccount?e.sAccount.toLowerCase():null;if(t){var n=window.location.origin;n||(n=window.location.host);for(var r=n.split("."),i=window.location.protocol+"//"+"themedesigner-"+t,o=1;o<r.length;o++)i+="."+r[o];return i}})},y=function(e){this.getLinkToCockPit().then(function(t){e&&(e.location.href=t,e.focus())}).done()},_=function(e){this.getLinkToUIThemeDesigner().then(function(t){e&&(e.location.href=t,e.focus())}).done()},x=function(t,n,r,i){var o=null;return this.getApps(i,n,r).then(function(n){return o=e.find(n,function(e){return e.repository===t}),o?o.name:o})},b=function(e,n,r,i){var o=e.getEntity().getBackendData().git;return o?this.context.service.git.getRemotes(o).then(function(e){return t.getHCPRemoteGitURL(e)}).then(function(e){return t.getHCPAppNameByGitURL(e,n,r,i)}):void 0},w=function(){var e=null;if("hcproxy"===sap.watt.getEnv("server_type")){for(var t=sap.watt.getEnv("orion_preview"),n=t.split("/")[2],r=n.split("."),i=r.length-3,o=[],a=0;3>a;a++)o.push(r[i+a]);e=o.join(".")}else e="neo.ondemand.com";return e},S=function(n){var r=null;return r=e.filter(n.Children,function(n){var r=n.GitUrl,i=t.getLandscapeDomain(),o=r.split("/")[2];return e.startsWith(o,"git.")&&e.endsWith(o,i)}),r.length>0?r[0].GitUrl:""},E=function(e){return t=this,e?this.context.service.git.getRemotes(e).then(function(e){return t.getHCPRemoteGitURL(e)}).then(function(e){if(e){var t=e.split("/")[3];return t}return void 0}):void 0},C=function(){return this.context.service.system.getSystemInfo().then(function(e){var t=e.sAccount?e.sAccount.toLowerCase():null;return t})},T=function(e){this.context=e};return{getSubscriptions:a,getHCPRemoteGitURL:S,getHCPAccounts:o,getLandscapeDomain:w,getApps:s,getHCPAppName:b,getHCPAppNameByGitURL:x,getHCPDefaultAccount:C,getHCPAccountByGitURL:E,createApp:u,getAppInfo:c,getAppCommits:l,getAppVersions:p,setAppVersion:f,activateApp:d,startApp:h,restartApp:m,openCockpit:y,getLinkToCockPit:g,openUIThemeDesigner:_,getLinkToUIThemeDesigner:v,setContext:T}}),define("sap.watt.ideplatform.hcpconnectivity/service/HCPAuthentication",[],function(){var e,t,n,r=null,i=!0,o=function(){return r=this.context,sap.watt.includeCSS(require.toUrl("sap.watt.ideplatform.hcpconnectivity/css/Dialog.css")),sap.watt.includeCSS(require.toUrl("sap.watt.ideplatform.template/css/wizard.css")),sap.watt.includeCSS(require.toUrl("sap.watt.ideplatform.template/css/templateWizard.css")),r.service.system.getSystemInfo().then(function(o){return r.service.keystorage.get(o.sAccount,"HTTPS").then(function(u){if(u)return u.account=o.sAccount,u.member={},u.member=o.sUsername,r.service.ajaxrequest.isCSRFTokenValidForLastService().then(function(e){return e?u:r.service.hcpconnectivity.getSubscriptions(o.sAccount).then(function(){return u})});var c=Q.defer(),l=new sap.ui.commons.Dialog({title:r.i18n.getText("i18n","Authentication_LoginHeader"),resizable:!1,width:"500px",modal:!0,keepInWindow:!0}),p=s(o);l.addContent(p);var f=new sap.ui.commons.Button({text:r.i18n.getText("i18n","Authentication_Login"),enabled:!1,press:function(){l.setBusy(!0);var e=t.password,n=t.username,s=!0,u=!1;return r.service.hcpconnectivity.getSubscriptions(o.sAccount,n,e,s,u).then(function(){var t={username:n,password:e,account:o.sAccount,member:o.sUsername};i&&r.service.keystorage.setHttps(o.sAccount,n,e).done(),l.setBusy(!1),l.close(),c.resolve(t)}).fail(function(e){l.setBusy(!1),401===e.status?a(r.i18n.getText("i18n","Authentication_Unauthorized")):403===e.status?a(r.i18n.getText("i18n","Authentication_Forbidden")):a(e.info)})}});return l.addButton(f),l.setDefaultButton(f),l.setInitialFocus(e),l.addButton(new sap.ui.commons.Button({text:r.i18n.getText("i18n","Authentication_Cancel"),press:function(){l.close(),c.reject("Authentication_Cancel")}})),p.attachEvent("validationResult",function(e){n.setText(""),t=e.mParameters.result,f.setEnabled(t.isValid)}),l.open(),c.promise})}).fail(function(e){throw new Error(e)})},a=function(e){n.removeStyleClass("label"),n.addStyleClass("errorText"),n.setText(e)},s=function(t){var o=null;if(i=!0,"hcproxy"===sap.watt.getEnv("server_type")){for(var a=sap.watt.getEnv("orion_preview"),s=a.split("/")[2],u=s.split("."),c=u.length-3,l=[],p=0;3>p;p++)l.push(u[c+p]);o=l.join(".")}else o="neo.ondemand.com";var f="";t&&(f=t.sAccount.toLowerCase());var d="";t&&t.sEMail&&(d=t.sEMail.toLowerCase());var h=new sap.ui.commons.Label({text:r.i18n.getText("i18n","Authentication_Account"),textAlign:"Left",required:!0,layoutData:new sap.ui.layout.GridData({span:"L3 M3 S12"})}).addStyleClass("wizardBody"),m=new sap.ui.commons.TextField({value:f,width:"100%",enabled:!1,tooltip:r.i18n.getText("i18n","Authentication_AccountTooltip"),layoutData:new sap.ui.layout.GridData({span:"L6 M6 S12"}),liveChange:function(e){g(e)},accessibleRole:sap.ui.core.AccessibleRole.Textbox}),g=function(e){var t=e.getParameter("liveValue");m.setValue(t),N()},v=new sap.ui.layout.Grid({width:"100%",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),content:[h,m]}),y=new sap.ui.commons.Label({required:!0,text:r.i18n.getText("i18n","Authentication_Username"),textAlign:"Left",layoutData:new sap.ui.layout.GridData({span:"L3 M3 S12"})}).addStyleClass("wizardBody"),_=new sap.ui.commons.TextField({value:d,width:"100%",enabled:!0,tooltip:r.i18n.getText("i18n","Authentication_UsernameTooltip"),layoutData:new sap.ui.layout.GridData({span:"L6 M6 S12"}),liveChange:function(e){x(e)},accessibleRole:sap.ui.core.AccessibleRole.Textbox}),x=function(e){var t=e.getParameter("liveValue");_.setValue(t),N()},b=new sap.ui.layout.Grid({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),content:[y,_]}),w=new sap.ui.commons.Label({required:!0,text:r.i18n.getText("i18n","Authentication_Password"),textAlign:"Left",layoutData:new sap.ui.layout.GridData({span:"L3 M3 S12"})}).addStyleClass("wizardBody");e=new sap.ui.commons.PasswordField({value:"",width:"100%",tooltip:r.i18n.getText("i18n","Authentication_PasswordTooltip"),layoutData:new sap.ui.layout.GridData({span:"L6 M6 S12"}),liveChange:function(e){S(e)},accessibleRole:sap.ui.core.AccessibleRole.Textbox}),e.focus();var S=function(t){var n=t.getParameter("liveValue");n!==e.getValue()&&(e.setValue(n),N())},E=new sap.ui.layout.Grid({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),content:[w,e]});n=new sap.ui.commons.TextView({width:"100%",text:"",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})}).addStyleClass("errorText");var C=new sap.ui.commons.CheckBox({text:r.i18n.getText("i18n","Authentication_RememberMe"),tooltip:r.i18n.getText("i18n","Authentication_RememberMeTooltip"),checked:!0,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),change:function(){i=this.getChecked()}}),T=new sap.ui.layout.Grid({width:"100%",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),vSpacing:0,content:[v,b,E,C,n]}),P=function(e){var t={};return 0===e.length?(t.isValid=!1,t.message=r.i18n.getText("i18n","Authentication_EmptyAccountInfoMsg"),t.severity="info",t):(t.isValid=!0,t)},I=function(e){var t={};return 0===e.length?(t.isValid=!1,t.message=r.i18n.getText("i18n","Authentication_EmptyUsernameInfoMsg"),t.severity="info",t):(t.isValid=!0,t)},D=function(e){var t={};return 0===e.length?(t.isValid=!1,t.message=r.i18n.getText("i18n","Authentication_EmptyPasswordInfoMsg"),t.severity="info",t):(t.isValid=!0,t)},A=function(e){T.fireEvent("validationResult",{result:e})},N=function(){var t=m.getValue().trim(),n=P(t);if(n.isValid===!1)return A(n),void 0;var r=_.getValue().trim(),i=I(r);if(i.isValid===!1)return A(i),void 0;var o=e.getValue().trim(),a=D(o);if(a.isValid===!1)return A(a),void 0;var s={};s.isValid=!0,s.account=t,s.username=r,s.password=o,A(s)};return T};return{authenticate:o}}),define("sap.watt.ideplatform.imageviewer/service/ImageViewerFactory",{create:function(e,t){return e=e||"imageviewer",t=jQuery.extend(t||{},{"implements":"sap.watt.common.plugin.imageviewer.service.ImageViewer",module:"sap.watt.ideplatform.imageviewer/service/ImageViewerImpl"}),this.context.create(e,t)}}),define("sap.watt.ideplatform.imageviewer/service/ImageViewerImpl",["sap/watt/common/plugin/platform/service/ui/AbstractEditor"],function(e){"use strict";var t=e.extend("sap.watt.common.plugin.imageviewer.service.ImageViewer",{});return jQuery.extend(t.prototype,{_oView:null,oDocument:null,configure:function(){},init:function(){},open:function(e){var t=this;return this._oDocument=e,e.getContent().then(function(e){var n=t._oView.getController().getImage(),r=URL.createObjectURL(e);n.setSrc(r),n.setAlt(t._oDocument.getEntity().getFullPath()),t.focus()})},flush:function(){},close:function(){this._oDocument=null;var t=this._oView.getController().getImage();t.setSrc(""),t.setAlt(""),e.prototype.close.apply(this,arguments).done()},getTitle:function(){return this._oDocument.getEntity().getName()},getTooltip:function(){return this._oDocument.getEntity().getFullPath()},getContent:function(){return this._oView||(this._oView=sap.ui.view("imageviewer",{viewName:"sap.watt.ideplatform.plugin.imageviewer.view.ImageViewer",type:sap.ui.core.mvc.ViewType.XML}),this._oView.setWidth("100%"),this._oView.setHeight("100%")),this._oView},getSelection:function(){return[{document:this._oDocument}]}}),t}),define("sap.watt.ideplatform.run/command/RunAsCommand",["sap/watt/lib/lodash/lodash"],function(e){"use strict";var t,n=function(e){t=e},r=function(e,t){if(0===t.indexOf("*")){var n=e.getEntity().getFullPath(),r=t.substr(2);return n.substr(n.length-r.length)===r}var i=e.getEntity().getName();return i===t},i=function(n,i,o,a,s){var u=e.find(i.fileTypes,function(e){return r(o,e)});if(u)return t.service.configurationhelper.createConfiguration(i,o,a,!1,s);var c=e.find(n,function(e){return i.sId===e._metadata.runnerId});return c?c:a?t.service.configurationhelper.createConfiguration(i,o,a,!1,s):void 0},o=function(n,r,o,a){return t.service.configurationhelper.getAllPersistedConfigurations().then(function(t){var s=n.getEntity().getFullPath(),u=e.find(t,function(e){return e.filePath===s&&o.sId===e._metadata.runnerId});return u?u:i(t,o,n,r,a)})};return{getConfiguration:o,setContext:n,createConfigurationForRunner:i,checkFileType:r}}),define("sap.watt.ideplatform.run/command/RunCommand",["sap.watt.ideplatform.run/command/RunAsCommand","sap/watt/lib/lodash/lodash"],function(e,t){"use strict";var n=function(n,r){return r.service.run.getRunnersForSelectedProject().then(function(i){for(var o=0;o<i.length;o++)for(var a=i[o],s=a.fileTypes,u=0;u<s.length;u++){var c=s[u];if(e.checkFileType(n,c))return a}return r.service.projectType.getProjectTypesPerCategories(n).then(function(e){return t.find(i,function(n){return t.find(n.aProjectTypesIds,function(t){return t===e.builtInProjectTypes[0]})})})})},r=function(r,i,o){return o=o||this.context,o.service.configurationhelper.getAllPersistedConfigurations().then(function(a){var s=r.getEntity().getFullPath(),u=t.find(a,function(e){return e.filePath===s});return u?u:i?n(r,o).then(function(t){return e.createConfigurationForRunner(a,t,r,i)}):void 0})},i=function(e,t){return t.service.run.getSelectedDocument().then(function(n){return n?Q.spread([r(n,void 0,t),n.getProject()],function(r,i){return t.service.run.appcachebuster.createAppCacheBusterFile(i).then(function(){return e.oConfiguration=r,e.oSelectedDocument=n,e.oProjectDocument=i,e.oRunnableDocument=null,r&&!r._metadata.hasIssues&&r.filePath?t.service.filesystem.documentProvider.getDocument(r.filePath).then(function(t){e.oRunnableDocument=t}).fail(function(){e.oRunnableDocument=null}):void 0})}):void 0})},o=function(e){return i(e,this.context).then(function(){return!0})},a=function(e){var t=[],n=e.oSelectedDocument;return t.push(this.context.service.run.isRunConfigurationViewActive()),t.push(this.context.service.perspective.getCurrentPerspective()),t.push(this.context.service.run.getRunnersForSelectedProject()),Q.spread(t,function(e,t,r){return n&&e===!1&&"development"===t&&r.length>0?!0:!1})},s=function(){};return{isAvailable:o,isEnabled:a,execute:s,getConfiguration:r}}),define("sap.watt.ideplatform.run/command/RecentlyUsedCommand",[],function(){return{execute:function(){},isAvailable:function(){return!1},isEnabled:function(){return this.context.service.perspective.getCurrentPerspective().then(function(e){return"development"===e?!0:!1})}}}),define("sap.watt.ideplatform.run/command/ProjectRecentlyUsedCommand",[],function(){return{_prepareCommand:function(e){var t=this;return this.context.service.run.getSelectedDocument().then(function(n){return n?n.getProject().then(function(r){return e.oProjectDocument=r,e.oSelectedDocument=n,t.context.service.run.appcachebuster.createAppCacheBusterFile(r)}):void 0})},execute:function(){},isAvailable:function(e){return this._prepareCommand(e).then(function(){return!0})},isEnabled:function(){return this.context.service.perspective.getCurrentPerspective().then(function(e){return"development"===e?!0:!1})}}}),define("sap.watt.ideplatform.run/command/RunConfigurationsCommand",[],function(){return{execute:function(){var e=this;return e._selectedDocument.getProject().then(function(t){return e.context.service.run.getProjectSettingContent().then(function(n){return e.context.service.run.open(n,t.getTitle())})})},isAvailable:function(){return this.context.service.run.isRunConfigurationViewActive().then(function(e){return!e})},isEnabled:function(){var e=this,t=[];return t.push(this.context.service.perspective.getCurrentPerspective()),t.push(this.context.service.run.getSelectedDocument()),t.push(this.context.service.run.getRunnersForSelectedProject()),Q.spread(t,function(t,n,r){return"development"===t&&n&&r&&r.length>0?(e._selectedDocument=n,!0):(e._selectedDocument=void 0,!1)})}}}),define("sap.watt.ideplatform.run/error/ConfigurationError",[],function(){var e=function(e){this.name="ConfigurationError",this.message=e,this.stack=(new Error).stack};return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}),define("sap.watt.ideplatform.run/service/Run",["sap.watt.platform.commandgroup/module/ActionItem","sap/watt/lib/lodash/lodash","sap.watt.ideplatform.run/util/DocumentWindowsUtil","sap.watt.ideplatform.run/command/RunCommand","sap.watt.ideplatform.run/command/RunAsCommand","sap.watt.ideplatform.run/error/ConfigurationError"],function(e,t,n,r,i,o){"use strict";var a=function(e){this.isFree=!0,this.oCommand=e.command,this.oCommand.setValue(e.index,"runAsCommandId")};a.prototype.assign=function(e){this.isFree=!1,this.sRunnerId=e.sRunnerId},a.prototype.free=function(){this.isFree=!0,this.sRunnerId=null};var s=function(e){this.sId=e.id,this.oService=e.service,this.displayName=e.displayName,this.aProjectTypesIds=e.projectTypesIds,this.fileTypes=e.fileTypes,this.appCacheBuster=!1,e.internalOnly&&(this.internalOnly=e.internalOnly),(void 0===e.appCacheBuster||e.appCacheBuster===!0)&&(this.appCacheBuster=!0,this.appCacheBusterOffset=e.appCacheBusterOffset?e.appCacheBusterOffset:void 0),this.registerRunConsole=e.registerRunConsole},u={_runAsCommands:[],_runners:{},_oMainDialogfragment:null,configure:function(e){if(e){for(var t=this._sortRunners(e.runners),n=0;n<t.length;n++){var r=new s(t[n]);this._setRunner(r)}var i=e.styles;this.context.service.resource.includeStyles(i).done()}this._preloadServices()},_setRunner:function(e){e.internalOnly===!0?sap.watt.getEnv("internal")===!0&&(this._runners[e.sId]=e):this._runners[e.sId]=e,e.oService&&e.oService.run&&t.isFunction(e.oService.run)&&e.oService.run().fail(function(){}).done()},_preloadServices:function(){var e=this.context.service.runconfigurationhistory;e&&t.isFunction(e.store)&&e.store().fail(function(){}).done();var n=this.context.service.configurationhelper;n&&t.isFunction(n.getAllPersistedConfigurations)&&n.getAllPersistedConfigurations().fail(function(){}).done()},init:function(){this._oMainDialogfragment=sap.ui.jsfragment("sap.watt.ideplatform.plugin.run.view.RunConfigurations",this),this.context.i18n.applyTo([this._oMainDialogfragment]);var e=[this.context.service.command.getCommand("multiPurposeCommand1"),this.context.service.command.getCommand("multiPurposeCommand2"),this.context.service.command.getCommand("multiPurposeCommand3"),this.context.service.command.getCommand("multiPurposeCommand4"),this.context.service.command.getCommand("multiPurposeCommand5"),this.context.service.command.getCommand("multiPurposeCommand6"),this.context.service.command.getCommand("multiPurposeCommand7"),this.context.service.command.getCommand("multiPurposeCommand8"),this.context.service.command.getCommand("multiPurposeCommand9"),this.context.service.command.getCommand("multiPurposeCommand10"),this.context.service.command.getCommand("multiPurposeCommand11"),this.context.service.command.getCommand("multiPurposeCommand12")],n=this;return Q.all(e).then(function(e){for(var t=0;t<e.length;t++){var r=e[t];if(r){n._extendCommand(r);var i=new a({command:r,index:t});n._runAsCommands.push(i)}}}).then(function(){i.setContext(n.context);var e=[];return e.push(n.context.service.command.getCommand("preview.run")),e.push(n.context.service.command.getCommand("run.recentlyUsedCommand")),e.push(n.context.service.command.getCommand("run.projectRecentlyUsedCommand")),Q.all(e).then(function(e){t.forEach(e,function(e){e&&n._extendCommand(e)})})})},getContent:function(){return this._oMainDialogfragment},close:function(){this.context.service.usagemonitoring.report("runConfiguration","DialogCancel").done(),this._oMainDialogfragment.destroyContent(),this._oMainDialogfragment.close()},runAction:function(){this._runConfigurationsController.run(),this._oMainDialogfragment.close()},open:function(e,t){this.context.service.usagemonitoring.report("runConfiguration","DialogOpen").done(),this._oMainDialogfragment.destroyContent(),this._oMainDialogfragment.addContent(e),this._sProject=t;var n=this.context.i18n.getText("i18n","run_RunConfigurations",[t]);this._oMainDialogfragment.setTitle(n),this._oMainDialogfragment.open()},save:function(){this.context.service.usagemonitoring.report("runConfiguration","DialogOK").done(),this.saveProjectSetting(null,null,this._sProject).done(),this._oMainDialogfragment.close()},_oConfigurationIdWithIssues:void 0,_extendCommand:function(e){var t=this;e.execute=function(e){t.context.service.usagemonitoring.startPerf("runner","preview").done(),t.context.service.usagemonitoring.startPerf("runner","previewETE").done();var r=this._mValues,i=null;return e?"moreRunConfiguration"!==e.type&&(i=n.openWindow()):i=n.openWindow(),console.debug("start - "+Date.now()),t.context.service.usagemonitoring.report("runner","preview").done(),t.execute(e,i,r).fail(function(){n.closeWindow(i)})}},_freeAllRunAsCommands:function(){for(var e=0;e<this._runAsCommands.length;e++){var t=this._runAsCommands[e];t.free()}},_getSelection:function(){return this.context.service.selection.getSelection()},getSelectedDocument:function(){var e=this,n=this.context.service.selection,r=this.context.service.repositorybrowser;return n.isOwner(r).then(function(r){return n.getSelection().then(function(n){if(r&&n&&t.isArray(n)&&n.length>0&&(e._aSelectedDocuments=1===n.length?n:null),e._aSelectedDocuments){var i=e._aSelectedDocuments[0].document;if(!i.getEntity().isRoot())return i}return null})})},_getSelectedProjectTypes:function(){var e=this,n=[];return this.getSelectedDocument().then(function(r){return r?e.context.service.projectType.getProjectTypes(r).then(function(e){return t.forEach(e,function(e){e.isBuiltIn?n.unshift(e.id):n.push(e.id)}),n}):Q(n)})},getRunnersForSelectedProject:function(){var e=this;return this._getSelectedProjectTypes().then(function(n){var r=[];return t.forEach(n,function(n){t.forEach(t.values(e._runners),function(e){-1!==e.aProjectTypesIds.indexOf(n)&&r.push(e)})}),r=t.uniq(r,"sId")})},getItems:function(e){var t=this;return"run.runAsGroup"===e?(this._freeAllRunAsCommands(),this.getRunnersForSelectedProject().then(function(e){for(var n=[],r=0;r<e.length;r++){var i=t._getActionItemForRunAs(e[r]);i&&n.push(i)}return n})):[]},_getActionItemForRunAs:function(t){var n=this._assignCommand(t);return n?new e({id:t.sId,label:t.displayName},n.oCommand):null},_assignCommand:function(e){var t=this._getFreeCommand();return t?(t.assign({sRunnerId:e.sId}),t):null},_getFreeCommand:function(){for(var e=0;e<this._runAsCommands.length;e++){var t=this._runAsCommands[e];if(t.isFree)return t}return null},_setConfigurationAsRecentlyUsed:function(e,t){if(t){var n=t.getEntity().getFullPath();return this.context.service.runconfigurationhistory.store(e,n)}},_saveConfigurationAsFirstInFile:function(e,t){var n=this,r=e._metadata.id;return this.context.service.configurationhelper.getAllPersistedConfigurations(t).then(function(i){for(var o=0;o<i.length;o++){var a=i[o],s=a._metadata.id;r===s&&i.splice(o,1)}return i.unshift(e),n.context.service.configurationhelper.writeConfigurationsToFile(i,t)})},_prepareCommand:function(e){var t=this;return this.getSelectedDocument().then(function(n){return n?n.getProject().then(function(r){return e.oProjectDocument=r,e.oSelectedDocument=n,t.context.service.run.appcachebuster.createAppCacheBusterFile(r).then(function(){return t._getRunAsCommandConfiguration(e,n).then(function(n){return e.oConfiguration=n,e.oRunnableDocument=null,n&&!n._metadata.hasIssues&&n.filePath?t.context.service.filesystem.documentProvider.getDocument(n.filePath).then(function(t){e.oRunnableDocument=t
}).fail(function(){e.oRunnableDocument=null}):void 0})})}):void 0})},isAvailable:function(e){return this._prepareCommand(e).then(function(){return!0})},isEnabled:function(e){var t=e.oSelectedDocument;return this.context.service.perspective.getCurrentPerspective().then(function(e){var n="development"===e?!0:!1;return n&&t&&!t.getEntity().isRoot()?!0:!1})},_getRunAsCommandConfiguration:function(e,t){if(e&&void 0!==e.runAsCommandId){var n=this._runAsCommands[e.runAsCommandId],r=n.sRunnerId,o=this._runners[r];e.oRunner=o;var a=[];return this.isRunConfigurationViewActive()&&(a=this._runConfigurationsController.getConfigurationDisplaNames()),i.getConfiguration(t,void 0,o,a)}},execute:function(e,t,n){return n&&void 0!==n.runAsCommandId?this._executeRunAsCommand(t,n):e&&"recentlyUsed"===e.type?this._executeRecentlyUsedCommand(t,e):e&&"projectRecentlyUsed"===e.type?this._executeRecentlyUsedCommand(t,e):e&&"moreRunConfiguration"===e.type?this._executeProjectRecentlyUsedCommandMore(t,e):this._executeRunCommand(t,n)},_executeProjectRecentlyUsedCommandMore:function(){var e=this;return e.getSelectedDocument().then(function(t){return t.getProject().then(function(t){return e.getProjectSettingContent().then(function(n){return e.open(n,t.getTitle())})})})},_executeRunAsCommand:function(e,t){return this._executeCommand(e,t,i,"runAsClicked")},_executeRunCommand:function(e,t){return this._executeCommand(e,t,r,"runClicked")},_executeCommand:function(e,t,n,r){var i=this;return t.oRunnableDocument?(i.context.service.usagemonitoring.report("runConfiguration",r,t.oConfiguration._metadata.runnerId).done(),i.run(e,t.oConfiguration,!1,t.oProjectDocument,t.oRunnableDocument)):n.getConfiguration(t.oSelectedDocument,e,t.oRunner).then(function(n){return i.context.service.filesystem.documentProvider.getDocument(n.filePath).then(function(o){return i.context.service.usagemonitoring.report("runConfiguration",r,n._metadata.runnerId).done(),i.run(e,n,!1,t.oProjectDocument,o)})})},_executeRecentlyUsedCommand:function(e,t){var n=this,r=t.value;return"recentlyUsed"===t.type?n.run(e,r,!1,t.oProjectDocument,t.oRunnableDocument).then(function(){n.context.service.usagemonitoring.report("runConfiguration","recentlyUsedClicked",r._metadata.runnerId).done()}):n.run(e,r,!1,t.oProjectDocument,t.oRunnableDocument).then(function(){n.context.service.usagemonitoring.report("runConfiguration","projectRecentlyUsedClick",r._metadata.runnerId).done()})},run:function(e,t,r,i,a){var s=this;if(t&&t._metadata){if(t._metadata.hasIssues===!0)return s._handleHasIssues(t,e);var u=this._runners[t._metadata.runnerId],c=this._getWindowForRunner(e,t),l=i.getEntity().getName();a.getProject().then(function(e){var n=e.getEntity().getName();return l!==n?s._handleHasIssues(t,c.name):void 0}).done(),u.registerRunConsole&&s.context.service.runconsole.setVisible(!0).done();var p=t;u.appCacheBuster&&(p=this._addAppCacheBusterUrlParameter(t,u.appCacheBusterOffset));var f=u.oService.run(void 0,c,void 0,p,a);return f.then(function(){Q.all([s._setConfigurationAsRecentlyUsed(t,i),s._saveConfigurationAsFirstInFile(t,i)]).then(function(){!r&&s.isRunConfigurationViewActive()&&s._runConfigurationsController.addNewConfigurationToTreeAndSelectIt(t)}).done()}).fail(function(e){return t._metadata.hasIssues=!0,s._saveConfigurationAsFirstInFile(t,i).then(function(){return e instanceof o?s._handleHasIssues(t,c.name):void 0})}),f}return n.closeWindow(e),Q()},_addAppCacheBusterUrlParameter:function(e,n){if(e&&e.filePath&&e.urlParameters){e=t.cloneDeep(e,!0);for(var r=e.filePath.split("/"),i=r.length-2,o="",a=i;a--;)o+="../";n&&(o=n+o),e.urlParameters.push({paramName:"sap-ui-appCacheBuster",paramValue:o,paramActive:!0})}return e},_getWindowForRunner:function(e,t){var r="config_"+t._metadata.id,i=n.getWindow(r);return i&&n.closeWindow(r),n.renameWindow(e,r),i=n.getWindow(r),n.closeWindow(e),i},_handleHasIssues:function(e,t){var r=this;if(n.closeWindow(t),this.isRunConfigurationViewActive())return this._runConfigurationsController.selectConfiguration(e),Q();this._oConfigurationIdWithIssues=e._metadata.id;var i=e._metadata.displayName;r.context.service.usagemonitoring.report("runConfiguration","configurationError",e._metadata.runnerId).done();var o=this.context.i18n.getText("i18n","error_notification",[i]);return this._openDialog(o).then(function(t){return t?r.context.service.command.getCommand("run.runConfigurations").then(function(t){return t.execute(e)}):void 0})},_openDialog:function(e){var t=Q.defer(),n=(new sap.ui.commons.Dialog).addStyleClass("runConfigurationExceptionDialog");n.setTitle(this.context.i18n.getText("i18n","run_Error"));var r=new sap.ui.commons.TextView;r.setText(e),n.addContent(r),n.setModal(!0),n.setMinWidth("600px");var i=this;return n.addButton(new sap.ui.commons.Button({text:i.context.i18n.getText("i18n","run_OpenRunConfigurations"),press:function(){n.close(),t.resolve(!0)}})),n.addButton(new sap.ui.commons.Button({text:i.context.i18n.getText("i18n","run_Cancel"),press:function(){n.close(),t.resolve(!1)}})),n.open(),t.promise},getRunnersWithConfigurations:function(){var e=this,n=[this.getRunnersForSelectedProject(),this.getSelectedDocument()];return Q.spread(n,function(n,r){return e.context.service.configurationhelper.getAllPersistedConfigurations(r).then(function(r){var i=[],o=[];return t.forEach(n,function(n){var a={};a.runner=n,a.configurations=[];var s=n.sId;t.forEach(r,function(e){e._metadata.runnerId===s&&a.configurations.push(e)}),i.push(a),o.push(e._updateConfigurationsHasIssuesState(n,a.configurations))}),Q.all(o).then(function(){return i})})})},_updateConfigurationsHasIssuesState:function(e,n){var r=[];return this.getSelectedDocument().then(function(i){return!i||t.isEmpty(n)?Q():(t.forEach(n,function(n){r.push(e.oService.isConfigurationValid(t.clone(n,!0),i))}),Q.all(r).then(function(){for(var e=0;e<arguments.length;e++){var t=n[e],r=arguments[0][e];t._metadata.hasIssues!==!0&&r===!1&&(t._metadata.hasIssues=!0)}}))})},isRunConfigurationViewActive:function(){return this._runConfigurationsView?this._runConfigurationsView.isActive():!1},getProjectSettingContent:function(){var e=this;return this.isRunConfigurationViewActive()?this._runConfigurationsView:this.getRunnersWithConfigurations().then(function(t){return e._runConfigurationsView=sap.ui.view({viewName:"sap.watt.ideplatform.plugin.run.view.RunConfigurations",type:sap.ui.core.mvc.ViewType.JS,height:"100%",viewData:{context:e.context,documentWindowsUtil:n,configurationIdWithIssues:e._oConfigurationIdWithIssues,aConfigurationsPerRunner:t}}),e._runConfigurationsController=e._runConfigurationsView.getController(),e._runConfigurationsView})},saveProjectSetting:function(e,t,n){if(this._runConfigurationsController){var r=[];r.push(this._removeConfigurationsFromHistory());var i=this._runConfigurationsController.getConfigurations();return r.push(this.context.service.runconfigurationhistory.update(i,n)),r.push(this.context.service.configurationhelper.writeConfigurationsToFile(i)),Q.all(r)}},_removeConfigurationsFromHistory:function(){var e=this._runConfigurationsController._deletedConfigurationIds;return e.length>0?this.context.service.runconfigurationhistory.remove(e):Q()},onDocumentDeleted:function(e){var t=e.params.document;if(t.isProject()||".user.project.json"===t.getEntity().getName()){var n=this;return t.getProject().then(function(e){var t=e.getEntity().getFullPath();return n.context.service.runconfigurationhistory.removeByProjectPath(t)})}},getUserPreferenceContent:function(){},saveUserPreference:function(){},_sortRunners:function(e){for(var t=-1,n=-1,r=-1,i=-1,o=[],a=[],s=0;s<e.length;s++)"fiorirunner"===e[s].id?t=s:"webapprunner"===e[s].id?n=s:"qunitrunner"===e[s].id?r=s:"embeddedrunner"===e[s].id&&(i=s);-1!==t&&o.push(t),-1!==n&&o.push(n),-1!==r&&o.push(r),-1!==i&&o.push(i);for(var s=0;s<e.length;s++)s!==t&&s!==n&&s!==r&&s!==i&&o.push(s);for(var s=0;s<o.length;s++)a.push(e[o[s]]);return a}};return u}),define("sap.watt.ideplatform.run/service/RunConfigurationHistory",["sap/watt/lib/lodash/lodash"],function(e){"use strict";var t=function(e){e&&(this._nodeName=e.implements,this._maxConfigurationsToStore=e.maxConfigurationsToStore)},n=function(e){return e.context.service.preferences.get(e._nodeName).then(function(e){return e=e?e:{},e.runConfigurations=e.runConfigurations?e.runConfigurations:[],e.configurationNames=e.configurationNames?e.configurationNames:{},Q(e)})},r=function(e,t,n){var r={runConfigurations:t,configurationNames:n};return e.context.service.preferences.remove(e._nodeName).then(function(){return e.context.service.preferences.set(r,e._nodeName)})},i=function(t,r){return n(this).then(function(n){for(var i=e.keys(n.configurationNames),o=0;o<i.length;o++){var a=i[o];if(a!=r){var s=n.configurationNames[a].displayName||n.configurationNames[a];if(s.toLowerCase()===t.toLowerCase())return!0}}return!1})},o=function(t,i){var o=this;if(t){var a={};return a._metadata=e.clone(t._metadata,!0),a._metadata.projectPath=i,n(this).then(function(t){var n=t.configurationNames,i=t.runConfigurations;e.remove(i,function(e){return e._metadata.id===a._metadata.id}),i.length===o._maxConfigurationsToStore&&i.pop(),i.unshift(a);var s={displayName:a._metadata.displayName,projectPath:a._metadata.projectPath};return n[a._metadata.id]=s,r(o,i,n)})}},a=function(t,i){var o=this;return e.isArray(t)?n(this).then(function(n){var a=n.configurationNames,s=n.runConfigurations;return e.forEach(t,function(t){if(t._metadata.hasIssues!==!0){t=e.clone(t,!0),t._metadata.projectPath=i;var n=e.findIndex(s,function(e){return e._metadata.id===t._metadata.id});-1!==n&&(s[n]=t);var r={displayName:t._metadata.displayName,projectPath:t._metadata.projectPath};a[t._metadata.id]=r}}),r(o,s,a)}):void 0},s=function(t){var i=this;return n(this).then(function(n){var o=n.configurationNames,a=n.runConfigurations;e.remove(a,function(e){var n=e._metadata.projectPath||e.filePath;return 0===n.indexOf(t)});var s=e.keys(o);return e.forEach(s,function(n){e.isObject(o[n])&&o[n].projectPath===t&&delete o[n]}),r(i,a,o)})},u=function(t){var i=this;return e.isArray(t)?n(this).then(function(n){var o=n.configurationNames,a=n.runConfigurations;return e.forEach(t,function(t){e.remove(a,function(e){return e._metadata.id===t}),delete o[t]}),r(i,a,o)}):void 0},c=function(){return n(this).then(function(e){return e.runConfigurations})},l=function(){return n(this).then(function(t){var n=e.values(t.configurationNames),r=[];return e.forEach(n,function(t){e.isObject(t)?r.push(t.displayName):r.push(t)}),e.uniq(e.compact(r),function(e){return e.toLowerCase()})})};return{store:o,remove:u,removeByProjectPath:s,update:a,configure:t,getConfigurationNames:l,getLatestConfigurations:c,isDisplayNameExists:i}}),define("sap.watt.ideplatform.run/service/ConfigurationHelper",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{_createUniqConfigurationName:function(t,n){return n=n?n:[],this.context.service.runconfigurationhistory.getConfigurationNames().then(function(r){r=r.concat(n),r=e.uniq(r,function(e){return e.toLowerCase()}),t=t.trim();for(var i=t,o=0,a=e.findIndex(r,function(e){return e.toLowerCase()===i.toLowerCase()});-1!==a;)o++,i=t+" "+o,a=e.findIndex(r,function(e){return e.toLowerCase()===i.toLowerCase()});return i})},createConfiguration:function(e,t,n,r,i){var o=this;return r=r?r:!1,e?e.oService.createDefaultConfiguration(t,r,n).then(function(n){return n?o._getOtherConfigurationNames(r,i).then(function(r){return o._createConfigurationMetadata(e,r).then(function(r){return n._metadata=r,e.oService.isConfigurationValid(n,t).then(function(e){return e||(n._metadata.hasIssues=!0),n})})}):void 0}):Q()},_getOtherConfigurationNames:function(t,n){return e.isEmpty(n)?this._getPersistedConfigurationNames():Q(n)},_createConfigurationMetadata:function(e,t){return this._createUniqConfigurationName(this.context.i18n.getText("i18n","run_newRunner",[e.displayName]),t).then(function(t){var n={runnerId:e.sId,id:Math.floor(1e7*Math.random()+1),displayName:t};return n})},_getPersistedConfigurationNames:function(){return this.getAllPersistedConfigurations().then(function(t){var n=[];return e.forEach(t,function(e){e._metadata&&e._metadata.displayName&&n.push(e._metadata.displayName)}),e.uniq(n)})},getAllPersistedConfigurations:function(e){return this.context.service.setting.user.get(this.context.service.run,e).then(function(e){return e||[]})},writeConfigurationsToFile:function(e,t){var n=this,r=t?Q(t):this.context.service.run.getSelectedDocument();return r.then(function(t){return n.context.service.setting.user.set(n.context.service.run,e,t)}).fail(function(e){return n.context.service.usernotification.alert(e.message).done(),Q.reject(e.message)})}}}),define("sap.watt.ideplatform.run/service/RecentlyUsedProvider",["sap.watt.platform.commandgroup/module/ActionItem","sap/watt/lib/lodash/lodash"],function(e,t){"use strict";return{getItems:function(){var n=this;return this.context.service.command.getCommand("run.recentlyUsedCommand").then(function(r){return n.context.service.runconfigurationhistory.getLatestConfigurations().then(function(n){var i=[];return t.forEach(n,function(t){r.setValue({type:"recentlyUsed",value:t},t._metadata.id);var n=new e({id:t._metadata.id,label:t._metadata.displayName},r);i.push(n)}),i})})}}}),define("sap.watt.ideplatform.run/service/ProjectRecentlyUsedProvider",["sap.watt.platform.commandgroup/module/ActionItem","sap/watt/lib/lodash/lodash"],function(e,t){"use strict";return{_updateConfiguration:function(e){return e._metadata.hasIssues?void 0:this.context.service.filesystem.documentProvider.getDocument(e.filePath).then(function(t){e.oRunnableDocument=t})},_getConfigurations:function(e){var t=this,n=[];return this.context.service.configurationhelper.getAllPersistedConfigurations(e).then(function(e){for(var r=0;r<e.length;r++){var i=e[r];n.push(t._updateConfiguration(i))}return Q.all(n).then(function(){return e})})},getItems:function(){var n=this;return this.context.service.command.getCommand("run.projectRecentlyUsedCommand").then(function(r){return n.context.service.selection.getSelection().then(function(i){if(1!==i.length)return[];var o=i[0].document;return o.getProject().then(function(i){return n._getConfigurations(i).then(function(o){var a=[],s=!1;if(t.forEach(o,function(t){r.setValue({type:"projectRecentlyUsed",value:t,oProjectDocument:i,oRunnableDocument:t.oRunnableDocument},t._metadata.id),delete t.oRunnableDocument;var o=new e({id:t._metadata.id,label:t._metadata.displayName},r);if(0===a.length)a.push(o);else{var s;for(s=0;s<a.length;s++)if(o._sId===a[s]._sId)return n.context.service.log.error("run",n.context.i18n.getText("i18n","error_duplicateId",[o._sLabel]),["user"]).done(),void 0;s===a.length&&a.push(o)}}),a.length>5&&(s=!0,a=t.slice(a,0,5)),s){r.setValue({type:"moreRunConfiguration",value:"moreRunConfiguration"},"moreProjectRunner");var u=new e({id:"moreProjectRunner",label:n.context.i18n.getText("i18n","run_MoreRunConfigurations")},r);a.push(u)}return a})})})})}}}),define("sap.watt.ideplatform.run/util/AppCacheBusterHelper",[],function(){"use strict";return{SETTINGS_FILE_NAME:"sap-ui-cachebuster-info.json",_oCreatePromise:Q(),_getSettingsDocument:function(e,t,n,r){var i=this;return this._oCreatePromise=this._oCreatePromise.then(function(){return n.service.filesystem.documentProvider.getRoot().then(function(t){var o=e.getEntity().getFullPath();return t.getCurrentMetadata().then(function(t){for(var a=0;a<t.length;a++)if(t[a].path===o)return n.service.document.getDocumentByPath(o+"/"+i.SETTINGS_FILE_NAME).then(function(t){return t?t:i._createIndexFile(e,i.SETTINGS_FILE_NAME,n,r)})})})}),this._oCreatePromise},_createIndexFile:function(e,t){return e.createFile(t)},_setGitIgnore:function(e,t,n,r){return e&&e.getEntity().getBackendData().git?r.setIgnore(t.getEntity()).fail(function(e){n.service.log.warn("appCacheBuster - _setGitIgnore failed",e,["user"]).done()}):Q()},_saveSettings:function(e,t){return e?e.setContent(JSON.stringify(t,void 0,2)).then(function(){return e.save(!1).thenResolve(e)}):void 0}}}),define("sap.watt.ideplatform.run/service/AppCacheBuster",["sap/watt/lib/lodash/lodash","sap.watt.ideplatform.run/util/AppCacheBusterHelper"],function(e,t){"use strict";return{_aFoldersToIgnore:[],_aFilesToInore:[],_aFolderPathsToInore:[],_updateContentPromise:Q(),_appCBHelper:t,_oIgnoreService:null,configure:function(e){if(e.filesToIgnore&&(this._aFilesToInore=e.filesToIgnore),this._aFilesToInore.push(this._appCBHelper.SETTINGS_FILE_NAME),e.foldersToIgnore){this._aFoldersToIgnore=e.foldersToIgnore;for(var t=0;t<this._aFoldersToIgnore.length;t++){var n=this._aFoldersToIgnore[t];this._aFolderPathsToInore.push("/"+n+"/")}}e.ignore&&(this._oIgnoreService=e.ignore.service)},_getDocumentPathWithoutProject:function(e){var t=e.indexOf("/",1);return e.substr(t+1)},_isValidFile:function(t){if(!t.folder){var n=t.name,r=e.findIndex(this._aFilesToInore,function(e){return e===n});if(-1===r){var i=t.path,o=e.findIndex(this._aFolderPathsToInore,function(e){return-1!==i.indexOf(e)});return-1===o}}return!1},_isValidFolder:function(t,n){if(t.isProject()&&("created"===n||"deleted"===n))return!1;var r=e.findIndex(this._aFoldersToIgnore,function(e){return e===t.getEntity().getName()});return-1===r},_shoudUpdateIndexFile:function(e){var t=e.params.document,n=t.getEntity();if(n.isFolder())return this._isValidFolder(t,e.name);var r={};return r.name=n.getName(),r.path=n.getFullPath(),r.folder=!1,this._isValidFile(r)},onFileDocumentChange:function(e){this._shoudUpdateIndexFile(e)&&this._processUpdateEvents(e).done()},_processUpdateEvents:function(e){var t=this;return this._updateContentPromise=this._updateContentPromise.then(function(){return t._processUpdateEvent(e)}),this._updateContentPromise},_isExist:function(e){return this._getIndexFilePath(e).then(function(e){return void 0===e?!1:!0})},_getIndexFilePath:function(e){var t=this;return e.getCurrentMetadata().then(function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.name===t._appCBHelper.SETTINGS_FILE_NAME)return r.path}})},_processUpdateEvent:function(e){var t=this,n=e.params.document,r=null;return n.getProject(!0).then(function(e){return t._getIndexFilePath(e).then(function(n){return n?t.context.service.progress.startTask("UpdateIndexFile","Update index file").then(function(n){return r=n,t._updateAppCacheBusterFile(e)}):void 0})}).fail(function(e){return t.context.service.log.error("appCacheBuster - update",e.message,["user"])}).fin(function(){r&&t.context.service.progress.stopTask(r).done()})},_createIndexFileContent:function(e){var t=this;return e.getCurrentMetadata(!0).then(function(e){for(var n={},r=0;r<e.length;r++){var i=e[r];if(t._isValidFile(i)){var o=t._getDocumentPathWithoutProject(i.path);n[o]=""+i.changedOn}}return n})},_updateAppCacheBusterFile:function(e){var t=this;return Q.spread([t._createIndexFileContent(e),t._getIndexFileDocument(e)],function(e,n){return t._appCBHelper._saveSettings(n,e)}).fail(function(e){return t.context.service.log.error("appCacheBuster - create app cachebuster content",e.message,["user"])})},createAppCacheBusterFile:function(e){var t=this;return this._isExist(e).then(function(n){return n===!1?t._updateAppCacheBusterFile(e):void 0})},_getIndexFileDocument:function(e){var t=this;return this._getIndexFilePath(e).then(function(n){return n?t.context.service.filesystem.documentProvider.getDocument(n):t._appCBHelper._getSettingsDocument(e,!0,t.context,t._oIgnoreService)})}}}),define("sap.watt.ideplatform.run/service/controlservices/RunConfigFilePath",[],function(){"use strict";return{_oController:void 0,getControl:function(e,t,n){var r=this;return this._oController=this.context.service.filepathhandler,this._oController.setServiceData(e,n).then(function(){return Q.sap.ui.define(["sap/watt/ideplatform/plugin/run/ui/FilePathControl"]).then(function(e){var n=new e({maxHistoryItems:10,controlData:t,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"}),oController:r._oController});return n})})}}}),define("sap.watt.ideplatform.run/service/handler/FilePathHandler",{_oDocument:null,setServiceData:function(e,t){this._oDocument=e,this._aValidation=t},getDocument:function(){return this._oDocument},validatePathInput:function(e){return this._validatePath(e)},onPathFieldChange:function(e){var t=this;t._validatePathFieldChange(e).then(function(e){t._update(e)}).done()},onAfterPathFieldRendering:function(e){var t=this;t._validateAfterPathFieldRendering(e).then(function(e){t._update(e)}).done()},_update:function(e){e.isControlValid?this._switchToValidUi(e.oControl,e.sValidMessage):this._switchToInvalidUi(e.oControl,e.sInvalidMessage),this._fireEvent(e)},_fireEvent:function(e){e.oControl.fireEvent("ConfigurationValidationEvent",{isValid:e.isControlValid},!1,!0)},_switchToInvalidUi:function(e,t){e=e.getAggregation("_dropdownList"),e.hasStyleClass("inputError")||(e.removeStyleClass("inputConfirmed"),e.addStyleClass("inputError"),this._addRichToolTip(e,t))},_switchToValidUi:function(e,t){e=e.getAggregation("_dropdownList"),e.hasStyleClass("inputError")&&(e.removeStyleClass("inputError"),e.addStyleClass("inputConfirmed"),e.setValueState(sap.ui.core.ValueState.Success),setTimeout(function(){e.removeStyleClass("inputConfirmed"),e.setValueState(sap.ui.core.ValueState.None)},3e3),e.setTooltip(t))},_addRichToolTip:function(e,t){var n=new sap.ui.commons.RichTooltip({text:t,imageSrc:"",myPosition:"begin bottom",atPosition:"begin top",title:"{i18n>lbl_error}"}).addStyleClass("runConfigRtt");e.setTooltip(n)},_createControlData:function(e,t,n,r,i){var o={oControl:e,sControlId:t,isControlValid:n,sInvalidMessage:r,sValidMessage:i};return o},_validateAfterPathFieldRendering:function(e){var t=this,n=e.srcControl,r=n.getModel(),i=r.getData(),o=n.getAggregation("_dropdownList").getSelectedItemId(),a=i.filePath;return a||(a=n.getAggregation("_dropdownList").getItems()[0].getProperty("additionalText")),t.validatePathInput(a).then(function(e){return e.isValid?n.getAggregation("_dropdownList").setSelectedKey(a):n.getAggregation("_dropdownList").setSelectedItemId(o),t._createControlData(n,n.getId(),e.isValid,e.message,a)})},_validatePathFieldChange:function(e){var t=this,n="",r=e.getSource(),i=e.getParameter("selectedItem");if(null!=i){n=i.getKey();var o=i.getId()}return t.validatePathInput(n).then(function(e){var i=r.getModel(),a=i.getData();return a.filePath=n,r.getAggregation("_dropdownList").setSelectedItemId(o),i.setData(a),t._createControlData(r,r.getId(),e.isValid,e.message,n)})},_validatePath:function(e){var t=this,n={isValid:!0,message:""};return(!e||/^\s*$/.test(e))&&(n.isValid=!1,n.message=t.context.i18n.getText("msg_file_path_empty")),Q(n)}}),define("sap.watt.ideplatform.run/service/controlservices/RunConfigWithMock",[],function(){"use strict";return{_oController:void 0,getControl:function(){var e=this;return this._oController=this.context.service.withmockhandler,Q.sap.ui.define(["sap/watt/ideplatform/plugin/run/ui/WithMockControl"]).then(function(t){var n=new t({oController:e._oController});return n})}}}),define("sap.watt.ideplatform.run/service/handler/WithMockHandler",{updateCB:function(e,t,n){var r=e.getSource().getModel();r.setProperty(t,n?0:1)}}),define("sap.watt.ideplatform.run/service/controlservices/RunConfigPreview",[],function(){"use strict";return{_oController:void 0,getControl:function(){var e=this;return this._oController=this.context.service.previewhandler,Q.sap.ui.define(["sap/watt/ideplatform/plugin/run/ui/PreviewControl"]).then(function(t){var n=new t({oController:e._oController,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})});return n})}}}),define("sap.watt.ideplatform.run/service/handler/PreviewHandler",{updatePreviewSelected:function(e,t,n){var r=e.getSource().getModel(),i=e.getSource(),o=r.getProperty(t);o===n&&i.setPressed(!0),r.setProperty(t,n)},onIconPressed:function(e,t,n){var r=e.getSource(),i=r.getParent(),o=i.getContent()[1];e.oSource=o,this.updatePreviewSelected(e,t,n)}}),define("sap.watt.ideplatform.run/service/controlservices/RunConfigurationUi5Versions",[],function(){"use strict";var e={_oController:void 0,getControl:function(e,t,n){var r=this;return this._oController=this.context.service.ui5versionhandler,this._oController.setServiceData(e,t,n).then(function(){return Q.sap.ui.define(["sap/watt/ideplatform/plugin/run/ui/Ui5VersionsCompositeControl"]).then(function(e){var i=new e({text:"{i18n>title_run_config_ui_a2a_ui5version}",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"}),dropDownBoxItems:t,oController:r._oController,sUI5CurrentVersion:n});return i})})}};return e}),define("sap.watt.ideplatform.run/service/handler/Ui5VersionHandler",{_oDocument:null,_aUi5Version:null,_sUI5CurrentVersion:null,setServiceData:function(e,t,n){this._oDocument=e,this._aUi5Version=t,this._sUI5CurrentVersion=n},getDocument:function(){return this._oDocument},getUIVersions:function(){return this._aUi5Version},rbSelectedUpdateModel:function(e,t){var n,r=e.getModel();r.setProperty("/isDefaultVersion",t),1!==t?r.setProperty("/ui5VerSource",null):(n=r.getProperty("/ui5ActiveVersion"),n&&null!==n&&""!==n||(n=this._sUI5CurrentVersion&&""!==this._sUI5CurrentVersion?_.findIndex(this._aUi5Version,"value",this._sUI5CurrentVersion)>=0?this._sUI5CurrentVersion:this._aUi5Version[0].value:this._aUi5Version[0].value,r.setProperty("/ui5ActiveVersion",n)))},dropdownBoxChangeUpdateModel:function(e,t){var n=e.getModel();if(n.setProperty("/isDefaultVersion",1),t&&this._aUi5Version&&this._aUi5Version.length>0){var r=_.find(this._aUi5Version,function(e){return e.value===t?e:void 0});n.setProperty("/ui5VerSource",r.source)}else n.setProperty("/ui5VerSource",null)},rbGetSelectedIndex:function(e){var t=e.getModel(),n=t.getProperty("/isDefaultVersion");return n},updateModelDropdownField:function(e){var t=e.getModel(),n=t.getProperty("/ui5ActiveVersion");n=_.findIndex(this._aUi5Version,"value",n)>=0?n:this._aUi5Version[0].value,t.setProperty("/ui5ActiveVersion",n)}}),define("sap.watt.ideplatform.run/service/controlservices/RunConfigResourceMapping",[],function(){"use strict";return{_oController:void 0,_extservice:void 0,configure:function(e){e&&e.externalservices&&e.externalservices.length>0&&(this._extservice=e.externalservices[0].service)},getControl:function(e){var t=this;return this._oController=this.context.service.resourcemappinghandler,this._oController.setServiceData(e,this._extservice).then(function(){return Q.sap.ui.define(["sap/watt/ideplatform/plugin/run/ui/ResourceMappingControl"]).then(function(e){return Q.sap.ui.define(["sap/watt/ideplatform/plugin/run/ui/ReuseLibraryElement"]).then(function(n){var r=new n({oController:t._oController}),i=new e({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"}),oController:t._oController,rows:{path:"/appsVersion",template:r}});return i})})})}}}),define("sap.watt.ideplatform.run/service/handler/ResourceMappingHandler",{_oDocument:null,_extservice:null,setServiceData:function(e,t){this._oDocument=e,this._extservice=t},getDocument:function(){return this._oDocument},setOption:function(e,t){var n=["withoutWorkspace","withWorkspace"],r=e.getSource(),i=r.getModel();i.setProperty("/workspace",n[t])},onGetLibsVersionsClick:function(e){var t=this,n=e.getSource(),r=n.getModel();return this.getLibVersions(r).then(function(e){r.setProperty("/appsVersion",e),t._scrollToBottom()})},_scrollToBottom:function(){setTimeout(function(){var e=$(".sapUiHSplitterSecondPane"),t=e.height();e&&e.scrollTop(t)},100)},onLibVersionChange:function(e){var t=e.getSource(),n=t.getModel();n.setProperty(t.getBindingContext().getPath()+"/libraryVersion",t.getSelectedKey())},onResourceMappingChange:function(e){var t=this,n=e.getSource(),r=n.getChecked();t.setOption(e,r===!1?0:1)},getLibVersions:function(e){var t=this,n=[],r=!1;return this._extservice?t.context.service.neoapp.getAppllications(t._oDocument).then(function(i){if(i.length>0){if(void 0!==e){var o=e.getProperty("/workspace/");"withWorkspace"===o&&(r=!0)}return t._extservice.getLibsFromHCPandWorkspace(r).then(function(t){var r=t.hcp,o=t.ws;for(var a in i){var s=_.find(o,{externalName:i[a].name}),u=_.find(r,{externalName:i[a].name});if(void 0!==u&&void 0===s){var c,l,p=[{version:"Active",details:"Active"}];for(var f in u.versions)if(void 0!==u.versions[f].version){var d=u.versions[f].version;u.versions[f].isActive&&(c=u.versions[f].version),i[a].version===u.versions[f].version&&(l=u.versions[f].version),p.push({version:u.versions[f].version,details:d})}var h=void 0===i[a].version?"Active":i[a].version;n.push({libraryName:i[a].name,versions:p,activeVersion:c,neoappVersion:l,libraryVersion:h,detailVersion:h})}else n.push({libraryName:i[a].name,versions:[{version:"Workspace",details:"Version from Workspace"}]})}if(void 0!==e){var m=e.getProperty("/appsVersion/");if(void 0!==m)for(var g=0;g<m.length;g++)if(void 0!==m[g].libraryVersion){var v=_.find(n,{libraryName:m[g].libraryName});void 0!==v&&void 0!==v.libraryVersion&&(m[g].libraryVersion=v.libraryVersion)}}return n})}return n}).fail(function(){return n}):Q(n)}}),define("sap.watt.ideplatform.run/service/controlservices/RunConfigURLParameters",[],function(){"use strict";return{_oController:void 0,getControl:function(){var e=this;return this._oController=this.context.service.urlparametershandler,Q.sap.ui.define(["sap/watt/ideplatform/plugin/run/ui/URLParametersControl"]).then(function(t){var n=new t({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"}),oController:e._oController,sHashTitle:e.sHashTitle,sHashLabel:e.sHashTitle,sHashInfo:e.sHashInfo,sURLLabel:e.sURLLabel,sURLInfo:e.sURLInfo,sNamelabel:e.sNamelabel,sValuelabel:e.sHashInfo});return n})}}}),define("sap.watt.ideplatform.run/service/handler/URLParametersHandler",{_sRunnerId:null,_oDocument:null,_aErrorFields:[],deleteParameterLine:function(e){for(var t=this,n=e.getParent().getParent().getContent(),r=t.context.service.urlparametersvalidations,i=[],o=0;o<n.length;o++){var a=n[o].getContent(),s=a[0],u=t._createControlData(s,n[o].getId(),!0,"","");i.push(r.update(u))}Q.all(i).then(function(){var t=e.getBindingContext().sPath,n=t.split("/"),r=n[n.length-1],i=e.getBindingContext().getModel(),o=i.getProperty("/urlParameters");o.splice(r,1),0===o.length&&i.setProperty("/urlParametersNotNeeded",!0),i.setProperty("/urlParameters",o)})},onParamNameChange:function(e){var t=this;t._validateParamNameChange(e).then(function(e){return t.context.service.urlparametersvalidations.update(e)}).done()},onParamValueChange:function(e){var t=this;t._validateParamValueChange(e).then(function(e){return t.context.service.urlparametersvalidations.update(e)}).done()},checkUrlModelisValid:function(e){for(var t=this,n=e.getModel(),r=n.getProperty("/urlParameters"),i=0;i<r.length;i++){var o=r[i];if(""!==o.paramValue&&""===o.paramName){var a=t._createControlData(e.getParent(),"",!1,"");return t.context.service.urlparametersvalidations.update(a)}}},_validateParamValueChange:function(e){var t=this,n=e.getSource(),r=n.getParent().getContent(),i=r[0],o=r[1].getValue(),a=!0;return a?t.validateParameterNameInput(i.getValue(),o).then(function(e){return t._createControlData(i,i.getParent().getId(),e.isValid,e.message,o)}):Q(t._createControlData(i,n.getParent().getId(),!0,"",o))},onBeforeURLParametersRendering:function(e){var t=e.srcControl,n=t.getModel(),r=n.getProperty("/urlParameters"),i=n.getProperty("/urlParametersNotNeeded"),o=[{paramName:"",paramValue:""}];i||r&&0!==r.length||n.setProperty("/urlParameters",o)},createNewParameterLine:function(e){var t=e.getSource(),n=t.getModel(),r=n.getProperty("/urlParameters"),i=n.getProperty("/urlParametersNotNeeded");i&&n.setProperty("/urlParametersNotNeeded",!1),r?r.push({paramName:"",paramValue:""}):r={paramName:"",paramValue:""},n.setProperty("/urlParameters",r),this._scrollToBottom()},_scrollToBottom:function(){setTimeout(function(){var e=$(".sapUiHSplitterSecondPane"),t=e.height();e&&e.scrollTop(t)},100)},validateParameterNameInput:function(e,t){return this.context.service.urlparametersvalidations.validateUrlParameter(e,t)
},onAfterParamNameRendering:function(e){var t=this;t._validateAfterParamNameRendering(e).then(function(e){return t.context.service.urlparametersvalidations.updateWithOutFireEvent(e)}).done()},_validateParamNameChange:function(e){var t=this,n=e.getSource(),r=n.getValue(),i=n.getParent().getContent(),o=i[1].getValue();return o&&""!==o?t.validateParameterNameInput(r,o).then(function(e){return n.setValue(r),t._createControlData(n,n.getParent().getId(),e.isValid,e.message,r)}):!0},_createControlData:function(e,t,n,r,i){var o={oControl:e,sControlId:t,isControlValid:n,sInvalidMessage:r,sValidMessage:i};return o},_validateAfterParamNameRendering:function(e){var t=this,n=e.srcControl,r=n.getParent().getContent(),i=r[0],o=n.getValue();return""!==r[1].getValue()&&""===i.getValue()?t.validateParameterNameInput(i.getValue(),r[1].getValue()).then(function(e){return t._createControlData(n,n.getParent().getId(),e.isValid,e.message,o)}):Q(t._createControlData(n,n.getParent().getId(),!0,"",o))}}),define("sap.watt.ideplatform.run/service/validations/URLParametersValidations",{_sRunnerId:null,_oDocument:null,_aErrorFields:[],updateWithOutFireEvent:function(e){var t=this;t._updateStack(e.sControlId,e.isControlValid),e.isControlValid?t._switchToValidUi(e.oControl,e.sValidMessage):t._switchToInvalidUi(e.oControl,e.sInvalidMessage,e.bDisplayRtt)},update:function(e){var t=this;""!==e.sControlId&&(t._updateStack(e.sControlId,e.isControlValid),e.isControlValid?t._switchToValidUi(e.oControl,e.sValidMessage):t._switchToInvalidUi(e.oControl,e.sInvalidMessage,e.bDisplayRtt)),t._fireEvent(e)},_updateStack:function(e,t){var n=this._hasError(e);n&&t&&this._removeError(e),n||t||this._aErrorFields.push(e)},_hasError:function(e){for(var t=0;t<this._aErrorFields.length;t++)if(this._aErrorFields[t]===e)return!0;return!1},_removeError:function(e){this._aErrorFields=jQuery.grep(this._aErrorFields,function(t){return""+t!=""+e})},_switchToValidUi:function(e,t){e.hasStyleClass("inputError")&&(e.removeStyleClass("inputError"),e.addStyleClass("inputConfirmed"),setTimeout(function(){e.removeStyleClass("inputConfirmed")},3e3),e.setTooltip(t))},_switchToInvalidUi:function(e,t,n){e.hasStyleClass("inputError")||(e.removeStyleClass("inputConfirmed"),e.addStyleClass("inputError"),("undefined"==typeof n||n===!0)&&this._addRichToolTip(e,t))},_fireEvent:function(e){e.oControl.fireEvent("ConfigurationValidationEvent",{isValid:e.isControlValid},!1,!0)},_addRichToolTip:function(e,t){var n=new sap.ui.commons.RichTooltip({text:t,myPosition:"begin bottom",atPosition:"begin top",title:"{i18n>lbl_error}"}).addStyleClass("runConfigRtt");e.setTooltip(n)},validateUrlParameter:function(e,t){var n={isValid:!0,message:""};return e&&!/^\s*$/.test(e)||!t||""===t?(n.isValid=!0,Q(n)):(n.isValid=!1,n.message=this.context.i18n.getText("msg_appl_param_empty"),Q(n))}}),define("sap.watt.ideplatform.run/service/controlservices/RunConfigDestinationMapping",[],function(){"use strict";return{_oController:void 0,getControl:function(e,t,n){var r=this;return this._oController=this.context.service.destinationmappinghandler,this._oController.setServiceData(e,t,n).then(function(){return Q.sap.ui.define(["sap/watt/ideplatform/plugin/run/ui/DestinationMappingControl"]).then(function(e){return Q.sap.ui.define(["sap/watt/ideplatform/plugin/run/ui/DestinationMappingRowControl"]).then(function(t){var n=new t({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"}),oController:r._oController}),i=new e({oController:r._oController,rows:{path:"/backendSystem",template:n}});return i})})})}}}),define("sap.watt.ideplatform.run/service/handler/DestinationMappingHandler",[],function(){"use strict";return{_oDocument:null,_aSourceDestinations:null,_aTargetDestinations:null,setServiceData:function(e,t,n){this._oDocument=e,this._aSourceDestinations=t,this._aTargetDestinations=n},getDocument:function(){return this._oDocument},getSourceDestinations:function(){return this._aSourceDestinations},getTargetDestinations:function(){return this._aTargetDestinations},getBackendSystemModel:function(e){return e.getProperty("/backendSystem")},onTargetChanged:function(e,t,n){var r=e.getProperty("/backendSystem");r[t].destinations=n,e.setProperty("/backendSystem",r)},updateModel:function(e){var t=e.getModel().getProperty("/backendSystem"),n=this._aSourceDestinations,r=this._aTargetDestinations;if(t){if(!this._isModelUpdated(t,n)){for(var i=0;i<t.length;i++){for(var o=!1,a=t[i].source,s=0;s<n.length;s++){var u=n[s];if(a==u){o=!0;break}}o||(t.splice(i,1),i--)}for(var s=0;s<n.length;s++){for(var c=!1,u=n[s],i=0;i<t.length;i++){var a=t[i].source;if(a==u){c=!0;break}}if(!c){for(var l="",p=0;p<r.length;p++){var f=r[p];if(f==u){l=f;break}}var d={source:u,destinations:l};t.push(d)}}t.sort(this._backendSystemsCompare),e.getModel().setProperty("/backendSystem",t)}}else{t=[];for(var s=0;s<n.length;s++){for(var u=n[s],l="",p=0;p<r.length;p++){var f=r[p];if(f==u){l=f;break}}var d={source:u,destinations:l};t.push(d)}e.getModel().setProperty("/backendSystem",t)}},_isModelUpdated:function(e,t){if(!e||e.length!=t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n].source,i=t[n];if(r!=i)return!1}return!0},_backendSystemsCompare:function(e,t){return e.source<t.source?-1:e.source>t.source?1:0}}}),define("sap.watt.ideplatform.run/service/util/FileSearchUtil",{getRunnableFiles:function(e,t){var n=this;return e.getProject().then(function(e){if(null!==e){var r=e.getEntity();return r.isRoot()?null:e.getCurrentMetadata(!0,{hidden:!1}).then(function(e){var r=[],i=n._getValidationFunc(t);return n._searchRunnableFiles(e,r,i),r})}return null})},_getValidationFunc:function(e){var t=this;e||(e={include:[],exclude:[]});var n=e.include,r=e.exclude;return t._createValidationFunc(n,r)},_createValidationFunc:function(e,t){var n=function(n){try{for(var r=!1,i=!0,o=0;o<e.length;o++)if(e[o]=e[o].trim(),e[o]){var a=new RegExp(e[o],"i").test(n);if(a===!0){r=!0;break}}for(var o=0;o<t.length;o++)if(t[o]=t[o].trim(),t[o]){var a=!new RegExp(t[o],"i").test(n);if(a===!1){i=!1;break}}return r&&i}catch(s){return!1}};return n},_searchRunnableFiles:function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(!i.folder){var o=i.name,a=i.path;n(a)&&t.push({name:o,fullPath:a})}}}}),define("sap.watt.ideplatform.run/service/util/RunConfigChooseFilePopupHandler",["sap.watt.ideplatform.run/util/DocumentWindowsUtil"],function(e){"use strict";var t={_oChooseFilePopupFragment:null,_oFilesTable:null,_sSelectedFilePath:null,_oDeferred:void 0,_sWindowId:null,getContent:function(t,n){e.closeWindow(n),this._sWindowId=n,this._oDeferred=Q.defer(),this._oChooseFilePopupFragment||(this._oChooseFilePopupFragment=sap.ui.jsfragment("sap.watt.ideplatform.plugin.run.view.RunConfigChooseFilePopup",this)),this._oChooseFilePopupFragment.getButtons()[0].setEnabled(!1),this.context.i18n.applyTo(this._oChooseFilePopupFragment);var r=this._oChooseFilePopupFragment.getContent(),i=r[0].getContent();this._oFilesTable=i[0];var o=new sap.ui.model.json.JSONModel;return o.setData({aFileList:t}),this._oFilesTable.setModel(o),this._oFilesTable.bindRows("/aFileList"),this._oChooseFilePopupFragment.open(),this._oDeferred.promise},getResult:function(){return this._sSelectedFilePath},cancel:function(){this._oChooseFilePopupFragment.close(),this._oDeferred.resolve(!1)},dbClicked:function(t){var n=e.openWindow();e.renameWindow(n,this._sWindowId);var r=jQuery(t.target).control()[0],i=r.getModel().getProperty(r.getBindingContext().getPath());this._sSelectedFilePath=i.fullPath,this._oChooseFilePopupFragment.close(),this._oDeferred.resolve(!0)},ok:function(){var t=e.openWindow();e.renameWindow(t,this._sWindowId);var n=this._oFilesTable.getSelectedIndex(),r=this._oFilesTable.getModel().getProperty("/aFileList");this._sSelectedFilePath=r[n].fullPath,this._oChooseFilePopupFragment.close(),this._oDeferred.resolve(!0)},rowSelection:function(){var e=this._oFilesTable.getSelectedIndex();if(e>=0){var t=this._oFilesTable.getModel().getProperty("/aFileList");this._sSelectedFilePath=t[e].fullPath}},enableOK:function(){this._oFilesTable.getSelectedIndex()>=0?this._oChooseFilePopupFragment.getButtons()[0].setEnabled(!0):this._oChooseFilePopupFragment.getButtons()[0].setEnabled(!1)},cellClick:function(){if(this._sSelectedFilePath){var t=e.openWindow();e.renameWindow(t,this._sWindowId),this._oChooseFilePopupFragment.close(),t=e.openWindow(),e.renameWindow(t,this._sWindowId),this._oDeferred.resolve(!0)}},getFocusElement:function(){},getTitle:function(){},getTooltip:function(){},setVisible:function(){},isVisible:function(){}};return t}),define("sap.watt.ideplatform.runregistry/service/RunRegistry",[],function(){"use strict";return{_oRunService:null,configure:function(e){e.setRun.forEach(function(e){this._oRunService=e.service},this),this._oRunService&&this._oRunService.attachEvent("runProgress",this._fireRunProgress,this)},_fireRunProgress:function(e){this.context.event.fireRunProgress(e.params)},run:function(e,t){var n=this;return this._oRunService?this._oRunService.run(e,t):e.getProject().then(function(e){var t=e.getEntity().getName();n.context.service.log.error(t,n.context.i18n.getText("i18n","error_runservice"),["run"]).done()})},getProcesses:function(e){var t=this;return this._oRunService?this._oRunService.getProcesses(e):e.getProject().then(function(e){var n=e.getEntity().getName();t.context.service.log.error(n,t.context.i18n.getText("i18n","error_getProcessesService"),["run"]).done()})},stop:function(e,t){return this._oRunService?this._oRunService.stop(e,t):(this.context.service.log.error(t,this.context.i18n.getText("i18n","error_stopRunService"),["run"]).done(),void 0)},refresh:function(e,t){var n=this;return this._oRunService?this._oRunService.refresh(e,t):e.getProject().then(function(e){var t=e.getEntity().getName();n.context.service.log.error(t,this.context.i18n.getText("i18n","error_refreshService"),["run"]).done()})}}}),define("sap.watt.ideplatform.mockdatamodeler/command/EditMockData",{execute:function(){var e=this;return this.context.service.selection.assertNotEmpty().then(function(t){var n=t[0];return n.document&&n.document.getEntity?(e.context.service.usagemonitoring.report("mockDataEditor","opened").done(),e.context.service.mockdata.open(t[0].document)):void 0})},isAvailable:function(){var e,t;return Q.all([this.context.service.selection.assertNotEmpty().then(function(n){var r=n[0];return r.document&&r.document.getEntity&&(e=r.document.getEntity().getName(),t=r.document.getEntity().getType(),!/.*\.view.xml$/.test(e)&&!/.*\.fragment.xml$/.test(e)&&"file"===t&&/.*\.(xml|edmx)$/.test(e))?r.document.getContent().then(function(e){return e.indexOf("<edmx:Edmx")>-1}):!1}),this.context.service.selection.isOwner(this.context.service.repositorybrowser)]).spread(function(e,t){return e&&t})}}),define("sap.watt.ideplatform.mockdatamodeler/service/MockDataModeler",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";var t=e.extend("sap.watt.common.plugin.mockdatamodeler.service.MockDataModeler",{_oMainDialogfragment:null,_oComplexTypefragment:null,_oMetadata:null,_oDocument:null,getFocusElement:function(){return this.getContent()},configure:function(e){this._aStyles=e.styles,this._aStyles&&this.context.service.resource.includeStyles(this._aStyles).done()},init:function(){this._oMainDialogfragment=sap.ui.jsfragment("sap.watt.ideplatform.plugin.mockdatamodeler.ui.MockDataModeler",this),this._oComplexTypefragment=sap.ui.jsfragment("sap.watt.ideplatform.plugin.mockdatamodeler.ui.ComplexTypeMockData",this);var e={entitySets:[],mockData:[],selectedEntitySet:"",isInputValid:!0,inputViolations:0,validationText:"",isDeleteEnabled:!1,isDirty:!1,skip:"",isUseAsMockDataSource:!0};this._oMainDialogfragment.setModel(new sap.ui.model.json.JSONModel(e)),e={complexMockData:[],selectedBindingContext:null,selectedComplexName:null,isInputValid:!0,inputViolations:0,validationText:""},this._oComplexTypefragment.setModel(new sap.ui.model.json.JSONModel(e)),this.context.i18n.applyTo([this._oMainDialogfragment,this._oComplexTypefragment]),jQuery.sap.require("sap.ui.core.format.DateFormat");var t=sap.ui.getCore().getConfiguration().getLocale(),n=sap.ui.core.format.DateFormat.getDateInstance(t),r=!1;jQuery.sap.require("sap.ui.model.type.DateTime"),sap.ui.model.type.DateTime.extend("my.model.types.JsonDateTime",{formatValue:function(e){var t;return e?(t=/\/Date\([0-9]+\)\//.test(e)?new Date(parseInt(e.substr(6),10)):e,n.format(t,r)):void 0},parseValue:function(e){if(!e)return"";var t=new Date(e);if(isNaN(t.getTime()))throw new sap.ui.model.ValidateException;return"/Date("+t.getTime()+")/"},validateValue:function(e){if(!e)return!0;if(!/\/Date\([0-9]+\)\//.test(e))throw new sap.ui.model.ValidateException}})},getContent:function(){return this._oMainDialogfragment},close:function(){var e=this,t=this._oMainDialogfragment.getModel(),n=t.getProperty("/isDirty");n?this.context.service.usernotification.confirm(e.context.i18n.getText("i18n","CONFIRM_CANCEL")).then(function(t){t.bResult&&e._oMainDialogfragment.close()}).done():e._oMainDialogfragment.close()},open:function(e){var t=this;this._oMainDialogfragment.getModel().setProperty("/mockData",[]),this._oMainDialogfragment.getModel().setProperty("/isDirty",!1),this._oMainDialogfragment.getModel().setProperty("/isUseAsMockDataSource",!0),this._oMainDialogfragment.getModel().setProperty("/isInputValid",!0),this._oMainDialogfragment.getModel().setProperty("/validationText",""),this._oDocument=e;var n=t._checkAppType(t._oDocument.getEntity().getParentPath());return this.context.service.odataProvider.getMetadataFromWorkspace(e).then(function(e){return t._oMetadata=e,t._oMainDialogfragment.getModel().setProperty("/appType",n),t.context.service.odataProvider.getEntitySets(t._oMetadata).then(function(e){return 0===e.length?(t.context.service.usernotification.alert(t.context.i18n.getText("i18n","ERROR_MSG_PROP")).done(),void 0):(t._oMainDialogfragment.getModel().setProperty("/entitySets",e),t._oMainDialogfragment.open(),void 0)})}).fail(function(e){-1!==e.message.indexOf("This page contains the following errors:")?t.context.service.usernotification.alert(t.context.i18n.getText("i18n","ERROR_MSG_METAFILE")).done():t.context.service.usernotification.alert(t.context.i18n.getText("i18n","ERROR_MSG_META")).done()}).done()},onEntitySetSelection:function(e){var t=this,n=e.getParameter("rowIndex"),r=t._oMainDialogfragment.getModel(),i=r.getProperty("/entitySets")[n],o=r.getProperty("/appType");r.setProperty("/selectedEntitySet",i),r.setProperty("/skip",0),r.setProperty("/validationText",""),r.setProperty("/isInputValid",!0);var a=sap.ui.getCore().byId("mockdataTable");return this.context.service.odataProvider.getProperties(this._oMetadata,i,!1).then(function(e){t.setMockDataColumns(e,sap.ui.getCore().byId("mockdataTable"));var n=o?"/mockdata/":"/",s=t._oDocument.getEntity().getParentPath()+n+i.name+".json",u=r.getProperty("/mockData/"+i.name);return u&&0===u.length&&r.setProperty("/mockData/"+i.name,null),Q(r.getProperty("/mockData")[i.name]?null:t.context.service.filesystem.documentProvider.getDocument(s).then(function(e){if(e)return e.getContent().then(function(e){try{var n=JSON.parse(e)}catch(o){throw r.setProperty("/validationText",t.context.i18n.getText("i18n","JSON_PARSE_ERROR")),r.setProperty("/isInputValid",!1),o}n.d?n.d.results&&r.setProperty("/mockData/"+i.name,n.d.results):r.setProperty("/mockData/"+i.name,n)});var n=i.entityType;return s=t._oDocument.getEntity().getParentPath()+"/"+n.substring(n.lastIndexOf(".")+1)+".json",t.context.service.filesystem.documentProvider.getDocument(s).then(function(e){return e?e.getContent().then(function(e){try{var n=JSON.parse(e)}catch(o){throw r.setProperty("/validationText",t.context.i18n.getText("i18n","JSON_PARSE_ERROR")),r.setProperty("/isInputValid",!1),o}n.d?n.d.results&&r.setProperty("/mockData/"+i.name,n.d.results):r.setProperty("/mockData/"+i.name,n)}):(r.setProperty("/mockData/"+i.name,[]),void 0)})})).then(function(){}).fail(function(){r.setProperty("/mockData/"+i.name,[])}).fin(function(){a.bindRows("/mockData/"+i.name),a.clearSelection()}).done()}).fail(function(){t.context.service.usernotification.alert(t.context.i18n.getText("i18n","ERROR_MSG_PROP")).done(),t._oMainDialogfragment.close()}).done()},setMockDataColumns:function(e,t){var n,r=this;t.destroyColumns();for(var i=0;i<e.length;i++){var o=e[i],a=o.name,s=o.maxLength,u=o.type;if(o.nullable,isNaN(s)?0:parseInt(s,10),n=new sap.ui.commons.TextField({placeholder:"{i18n>CELL_PLACEHOLDER}",change:function(){r._oMainDialogfragment.getModel().setProperty("/isDirty",!0)}}),0!==u.indexOf("Edm."))n=new sap.ui.commons.Link({text:"{i18n>COMPLEX_LINK_TEXT}",press:[this.onEditComplexMockData,this]}),n.data("complex",{name:a,properties:e[i].properties});else{switch(u){case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":n.bindProperty("value",{path:a,type:new sap.ui.model.type.Integer}),n.attachChange(function(e){var n=e.getParameter("newValue"),i=t.getModel().getProperty("/inputViolations");isNaN(n)?(e.getSource().setValueState("Error"),i++):(e.getSource().setValueState(sap.ui.core.ValueState.None),0!==i&&i--),0===i?t.getModel().setProperty("/validationText",""):t.getModel().setProperty("/validationText",r.context.i18n.getText("i18n","INVALID_VALUE_FORMAT")),t.getModel().setProperty("/inputViolations",i),t.getModel().setProperty("/isInputValid",0===i)});break;case"Edm.Decimal":case"Edm.Single":n.bindProperty("value",{path:a,type:new sap.ui.model.type.Float}),n.attachChange(function(e){var n=e.getParameter("newValue");n=n.replace(/,/g,""),n=n.replace(/\./g,"");var i=t.getModel().getProperty("/inputViolations");isNaN(n)?(e.getSource().setValueState("Error"),i++):(e.getSource().setValueState(sap.ui.core.ValueState.None),0!==i&&i--),0===i?t.getModel().setProperty("/validationText",""):t.getModel().setProperty("/validationText",r.context.i18n.getText("i18n","INVALID_VALUE_FORMAT")),t.getModel().setProperty("/inputViolations",i),t.getModel().setProperty("/isInputValid",0===i)});break;case"Edm.DateTime":case"Edm.Date":n=(new sap.ui.commons.DatePicker).addStyleClass("mockdataDatePicker"),n.attachChange(function(e){var n=t.getModel().getProperty("/inputViolations");e.getParameter("invalidValue")?(e.oSource.setValueState(sap.ui.core.ValueState.Error),n++):(e.oSource.setValueState(sap.ui.core.ValueState.None),0!==n&&n--),0===n?t.getModel().setProperty("/validationText",""):t.getModel().setProperty("/validationText",r.context.i18n.getText("i18n","INVALID_VALUE_FORMAT")),t.getModel().setProperty("/isInputValid",0===n),t.getModel().setProperty("/inputViolations",n),r._oMainDialogfragment.getModel().setProperty("/isDirty",!0)}).bindProperty("value",{path:a,type:new my.model.types.JsonDateTime});break;case"Edm.Boolean":n=new sap.ui.commons.ToggleButton({pressed:{path:a,type:new sap.ui.model.type.Boolean},text:{path:a},tooltip:{path:a,formatter:function(e){return e?e.toString():e}}}).addStyleClass("riverSwitch"),n.attachPress(function(){this.rerender(),r._oMainDialogfragment.getModel().setProperty("/isDirty",!0)});break;default:n.bindProperty("value",a)}u=/^Edm\.(.*)/.exec(u)[1]}t.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:a+" ("+u+")",tooltip:r.context.i18n.getText("i18n","COLUMN_TOOLTIP",[a,u])}),template:n,width:"170px"}))}},onAddMockData:function(){var e=this._oMainDialogfragment.getModel(),t=e.getProperty("/mockData/"+e.getProperty("/selectedEntitySet").name);t.push({}),e.setProperty("/mockData/"+e.getProperty("/selectedEntitySet").name,t);var n=sap.ui.getCore().byId("mockdataTable");t.length-1<n.getVisibleRowCount()&&(n.getRows()[t.length-1].rerender(),n.getRows()[t.length-1].getCells()[0].focus())},onEditComplexMockData:function(e){var t=e.getSource().data("complex"),n=this._oMainDialogfragment.getModel(),r=sap.ui.getCore().byId("complexdataTable"),i=e.getSource().getBindingContext();this.setMockDataColumns(t.properties,r);var o=n.getProperty(i.getPath()+"/"+t.name);o||(o={});var a=r.getModel();a.setProperty("/complexMockData",[o]),a.setProperty("/selectedBindingContext",i),a.setProperty("/selectedComplexName",t.name),this._oComplexTypefragment.open()},onSaveComplexMockData:function(){this._oComplexTypefragment.close();var e=this._oComplexTypefragment.getModel(),t=e.getProperty("/complexMockData"),n=e.getProperty("/selectedBindingContext"),r=e.getProperty("/selectedComplexName"),i=this._oMainDialogfragment.getModel();i.setProperty(n.getPath()+"/"+r,t[0])},onDeleteMockData:function(){for(var e=this._oMainDialogfragment.getModel(),t=sap.ui.getCore().byId("mockdataTable"),n=t.getSelectedIndices(),r=e.getProperty("/mockData/"+e.getProperty("/selectedEntitySet").name),i=n.length;i>0;i--)r.splice(n[i-1],1);e.setProperty("/mockData/"+e.getProperty("/selectedEntitySet").name,r),e.setProperty("/isDirty",!0),t.clearSelection()},onRowSelection:function(e){var t=e.getSource(),n=t.getModel();n.setProperty("/isDeleteEnabled",-1!==t.getSelectedIndex())},onGenerateMockData:function(){var e=this._oMainDialogfragment.getModel(),t=e.getProperty("/selectedEntitySet").name,n=parseInt(e.getProperty("/skip"),10);jQuery.sap.require("sap.ui.core.util.MockServer");var r=new sap.ui.core.util.MockServer({rootUri:""});this._oDocument.getContent().then(function(i){sap.ui.core.util.MockServer.prototype._loadMetadata=function(e){return r._oMetadata=jQuery.sap.parseXML(e),r._oMetadata},r.simulate(i),r.start(),e.setProperty("/skip",n+10);var o=jQuery.sap.sjax({url:t+"?$top=10&$skip="+n,dataType:"json"}),a=e.getProperty("/mockData/"+t);a=a?a:[],o.success&&(a=a.concat(o.data.d.results),e.setProperty("/isDirty",!0)),e.setProperty("/mockData/"+t,a),sap.ui.core.util.MockServer.destroyAll()}).done()},onSaveMockData:function(){var e=this,t=this._oMainDialogfragment.getModel(),n=t.getProperty("/appType"),r="";e._oMainDialogfragment.close();var i=this._oDocument.getEntity().getParentPath();return this.context.service.usagemonitoring.report("mockDataEditor","saved").done(),this.context.service.filesystem.documentProvider.getDocument(i).then(function(i){var o=[],a=Object.keys(t.getProperty("/mockData"));return Q(t.getProperty("/isDirty")&&n?e._createMockFolder(i):null).then(function(){r=t.getProperty("/mockdataobject");for(var n=0;n<a.length;n++)o.push(e._createFile(i,a[n],r));var s=t.getProperty("/isUseAsMockDataSource");return o.push(e.context.service.setting.project.getProjectSettings("mockpreview",e._oDocument).then(function(t){return t?t.loadJSONFiles=s:t={loadJSONFiles:s},e.context.service.setting.project.setProjectSettings("mockpreview",t,e._oDocument)})),Q.all(o)})}).fail(function(){e.context.service.usernotification.alert(e.context.i18n.getText("i18n","ERROR_MSG_GETDOC")).done()}).done()},_createFile:function(e,t,n){var r=this._oMainDialogfragment.getModel(),i=r.getProperty("/appType"),o=r.getProperty("/mockData/"+t),a=!1;return this.context.service.beautifier.beautify(JSON.stringify(o)).then(function(r){return 0===o.length?e.getCurrentMetadata(!0).then(function(o){if(i&&n&&(e=n),o.length>1){for(var s=0;s<o.length;s++)o[s].name===t+".json"&&(a=!0);return a?e.importFile(new Blob([r]),!1,!0,t+".json"):Q()}}):(i&&n&&(e=n),e.importFile(new Blob([r]),!1,!0,t+".json"))})},_checkAppType:function(e){return new RegExp(".*/localService$").test(e)},_createMockFolder:function(e){var t=this;return e?e.getChild("mockdata").then(function(n){return Q(n?n:e.createFolder("mockdata")).then(function(e){t._oMainDialogfragment.getModel().setProperty("/mockdataobject",e)})}):void 0}});return t}),define("sap.watt.ideplatform.chepreview/service/ChePreviewAdapter",[],function(){return{_cWebUrl:"web url",getPreviewUrl:function(e){var t,n,r=this;return e.getProject().then(function(i){return n=i.getEntity().getFullPath(),r.context.service.runRegistry.getProcesses(e).then(function(i){return r._getRunOption(e,i).then(function(i){t=i.option;var o=i.oProcess;if("quit"===t)return r.context.service.log.error(n,r.context.i18n.getText("i18n","rerun_new_case"),["run"]);var a;return"stop&run"===t?r.context.service.runRegistry.stop(o.processId,n).then(function(i){return i&&"STOPPED"===i.status?(t="run",a=r._getReqBody(o,t),r._runApplication(t,e,a,n)):void 0}).fail(function(){return r.context.service.log.error(n,r.context.i18n.getText("i18n","stoprun_error_msg"),["run"])}):(a=r._getReqBody(o,t),r._runApplication(t,e,a,n))})})})},_runApplication:function(e,t,n,r){var i,o,a=this;return"restart"===e||"softReset"===e?a.context.service.runRegistry.refresh(t,n).then(function(e){return e&&e.links?(o=e.links.filter(function(e){return e.rel===a._cWebUrl}),i=URI(o[0].href)):void 0}).fail(function(){return a.context.service.log.error(r,a.context.i18n.getText("i18n","application_url_error"),["run"])}):a.context.service.runRegistry.run(t,n).then(function(e){return e&&e.links?(o=e.links.filter(function(e){return e.rel===a._cWebUrl}),i=URI(o[0].href)):void 0}).fail(function(){return a.context.service.log.error(r,a.context.i18n.getText("i18n","application_url_error"),["run"])})},_getRunOption:function(e,t){var n,r=this;if(!(t&&t.length>0))return Q({option:"run",oProcess:void 0});switch(n=t[0].status){case"NEW":return Q({option:"quit",oProcess:void 0});case"RUNNING":return r._isConfigurationFilesUpdated(e,t[0]).then(function(e){return e?{option:"restart",oProcess:t[0]}:{option:"softReset",oProcess:t[0]}});case"FAILED":return Q({option:"stop&run",oProcess:t[0]});case"CANCELLED":return Q({option:"run",oProcess:void 0});default:return Q({option:"run",oProcess:void 0})}},_getReqBody:function(e,t){var n={environmentId:"system:/sapui5/default",skipBuild:!0};if(e&&t){var r={};("restart"===t||"softReset"===t)&&(r={processId:e.processId,runOption:t}),n.options=r}return n},_isConfigurationFilesUpdated:function(e,t){var n=this;return n._isMTAupdated(e,t).then(function(r){return r?r:n._isJsonConfigurationFileUpdated(e,t)})},_isJsonConfigurationFileUpdated:function(e,t){return e.getProject().then(function(e){return e.getCurrentMetadata(!0).then(function(e){if(e&&e.length>0){for(var n=0;n<e.length;n++){var r=e[n];if(!r.folder&&("package.json"===r.name||"xs-app.json"===r.name)&&r.changedOn>t.startTime)return!0}return!1}return!1})})},_isMTAupdated:function(e,t){var n=!1,r=this.context.service.filesystem.documentProvider,i=e.getEntity().getFullPath(),o=i.split("/"),a=o[1],s="/"+a+"/mta.yaml";return r.getDocument(s).then(function(e){if(e){var r=e.getDocumentMetadata().changedOn,i=t.startTime;return r>i?!0:!1}return n})}}}),define("sap/watt/ideplatform/plugin/commonrunners/util/configEnum",[],function(){var e={withMock:0,withoutMock:1},t={withPreview:0,withoutPreview:1};return{dataStates:e,displayStates:t}}),define("sap.watt.ideplatform.chewebapprunner/service/CheWebAppRunner",["sap/watt/lib/lodash/lodash","sap/watt/ideplatform/plugin/commonrunners/util/configEnum","sap.watt.ideplatform.run/util/DocumentWindowsUtil","sap.watt.ideplatform.run/error/ConfigurationError"],function(e,t,n,r){"use strict";var i={_oRunnableFiles:{include:[".*resources.*[.]html$"],exclude:["mock_preview_sapui5.html","visual_ext_index.html"]},configure:function(){this._prepareServices()},_prepareServices:function(){this.context.service.basefilesearchutil.getRunnableFiles().fail(function(){}).done(),this.context.service.baserunnerrunutil.runHtmlFile().fail(function(){}).done(),this.context.service.baseinputvalidatorutil.isConfigurationValid().fail(function(){}).done()},run:function(e,t,n,r,i){var o,a=this,s=this._getRunParameters(r);if(s.sFilePath){if(i)return s.oRunConfiguration.sRelativePath=s.sFilePath.replace(/.*resources\//g,"/"),a.context.service.baserunnerrunutil.runHtmlFile(t,i,s).fail(function(){});o=a.context.i18n.getText("i18n","file_not_found_error_msg",[s.sFilePath,r._metadata.displayName]),a._logAndThrowError(o)}else o=a.context.i18n.getText("i18n","file_null_error_msg",[r._metadata.displayName]),a._logAndThrowError(o)},_getRunParameters:function(e){var t={oUrlParameters:e.urlParameters,oHashParameter:e.hashParameter},n={bNoFrame:1===e.previewMode,sFilePath:e.filePath,oRunConfiguration:t};return n},_logAndThrowError:function(e){throw this.context.service.log.error("CheWebAppRunner",e,["user"]).done(),new r(e)},createDefaultConfiguration:function(e,n,r){var i=this,o=[],a=e.getEntity().getFullPath();return i._isHtmlFile(a)?{filePath:a,previewMode:t.displayStates.withoutPreview,isDefaultVersion:0,urlParameters:o,urlParametersNotNeeded:!1}:(a=null,i.context.service.basefilesearchutil.getRunnableFiles(e,i._oRunnableFiles).then(function(e){if(null!==e&&void 0!==e){switch(e.length){case 0:a=null;break;case 1:a=e[0].fullPath;break;default:if(!n)return i.context.service.basechoosefilepopup.getContent(e,r).then(function(e){return e?i.context.service.basechoosefilepopup.getResult().then(function(e){return{filePath:e,previewMode:t.displayStates.withoutPreview,isDefaultVersion:0,urlParameters:o}}):null})}return{filePath:a,previewMode:t.displayStates.withoutPreview,isDefaultVersion:0,urlParameters:o}}}))},getConfigurationUi:function(e){var t=this;return{model:new sap.ui.model.json.JSONModel({}),getContent:function(){var n=new sap.ui.layout.Grid({hSpacing:0,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})});return t.context.service.basefilesearchutil.getRunnableFiles(e,t._oRunnableFiles).then(function(r){var i=[t.context.service.runconfig.filepath.getControl(e,r,[{isRegex:!1,rule:".html"}]),t.context.service.runconfig.preview.getControl(),t.context.service.runconfig.urlparameters.getControl()];return Q.all(i).spread(function(e,r,i){n.addContent(e),n.addContent(r);var o=[{name:t.context.i18n.getText("i18n","lbl_general"),content:n}],a=new sap.ui.layout.form.SimpleForm({layout:sap.ui.layout.form.SimpleFormLayout.ResponsiveGridLayout,labelSpanL:1,labelSpanM:1});return a.addContent(i),o.push({name:t.context.i18n.getText("i18n","lbl_parameters"),content:a}),o})})},setConfiguration:function(e){if(e.urlParameters&&0!==e.urlParameters.length){for(var n=!1,r=0;r<e.urlParameters.length;r++){var i=e.urlParameters[r];/^\s*$/.test(i.paramName)&&/^\s*$/.test(i.paramValue)&&i.paramActive?i.paramActive=!1:/^\s*$/.test(i.paramName)&&!/^\s*$/.test(i.paramValue)&&i.paramActive&&(n=!0)}n&&(e.urlParameters=e.urlParameters.filter(function(e){return/^\s*$/.test(e.paramName)&&/^\s*$/.test(e.paramValue)?!1:!0}))}else e.urlParameters=t._createEmptyModel();this.model.setData(e)},getConfiguration:function(){var e=this.model.getProperty("/urlParameters");if(e){var t=e.filter(function(e){return e.paramName});this.model.setProperty("/urlParameters",t)}return this.model.getData()}}},_createEmptyModel:function(){return[{paramName:"",paramValue:"",paramActive:!1},{paramName:"",paramValue:"",paramActive:!1}]},_isHtmlFile:function(e){var t=e.split(".");return"html"===t[t.length-1]?!0:!1},isConfigurationValid:function(e,t){return this.context.service.baseinputvalidatorutil.isConfigurationValid(e,t,[{isRegex:!1,rule:".html"}])},_isValidHtmlFile:function(e){return jQuery.sap.endsWith(e,".html")&&"mock_preview_sapui5.html"!==e&&"visual_ext_index.html"!==e?!0:!1}};return i}),define("sap.watt.ideplatform.projectType/service/ProjectTypeDecorator",{decorate:function(e){return e.isProject()?this.context.service.projectType.getProjectTypes(e).then(function(e){if(e&&e.length>0){var t=e[0],n=t.icon;if(n){var r={};return r.decoratorIconTopLeft=n,r}var i=t.decoratorIconStyleClass;if(i){var r={};return r.decoratorIconStyleClass=i,r}}}):void 0}}),define("sap.watt.ideplatform.projectType/service/ProjectType",[],function(){"use strict";function e(){this._oDao=null}return e.prototype.configure=function(e){if(e&&e.dao)return this._oDao=e.dao.service,this._oDao.initProjectType(e);throw new Error("ProjectType dao service must be defined")},e.prototype.getAllTypes=function(){return this._oDao.getAllTypes()},e.prototype.getType=function(e){return this._oDao.getType(e)},e.prototype.getIncludedTypes=function(e){return this._oDao.getIncludedTypes(e)},e.prototype.getProjectTypes=function(e){return this._oDao.getProjectTypes(e)},e.prototype.getProjectTypesPerCategories=function(e){return this._oDao.getProjectTypesPerCategories(e)
},e.prototype.addProjectTypes=function(e,t){var n=this;return this._oDao.addProjectTypes(e,t).then(function(e){return n._fireProjectTypesUpdated(e)})},e.prototype.removeProjectTypes=function(e,t){var n=this;return this._oDao.removeProjectTypes(e,t).then(function(e){return n._fireProjectTypesUpdated(e)})},e.prototype.setProjectTypes=function(e,t){var n=this;return this._oDao.setProjectTypes(e,t).then(function(e){return n._fireProjectTypesUpdated(e)})},e.prototype.updateDecorations=function(e){var t=e.params.projectDocument;this.context.service.decoration.updateDecorations(t,!1,e)},e.prototype._fireProjectTypesUpdated=function(e){if(e&&(e.bForce||e.aAddedTypes.length>0||e.aRemovedTypes.length>0)){var t=this;return e.oTargetDocument.getProject().then(function(n){return t.context.event.fireProjectTypesUpdated({projectDocument:n,added:e.aAddedTypes,removed:e.aRemovedTypes})})}return Q()},new e}),define("sap.watt.ideplatform.runconsole/command/openRunConsole",[],function(){"use strict";return{execute:function(){var e=this.context.service.runconsole;return e.isVisible().then(function(t){return e.setVisible(!t)})},isAvailable:function(){var e=sap.watt.getEnv("server_type");return"xs2"!==e?!1:!0},isEnabled:function(){var e=this.context.service.perspective;return e.getCurrentPerspective().then(function(e){return"development"===e})}}}),define("sap.watt.ideplatform.runconsole/service/RunConsole",["sap/watt/common/plugin/platform/service/ui/AbstractPart"],function(e){"use strict";var t=e.extend("sap.watt.ideplatform.plugin.runconsole.service.RunConsole",{_oCurrentDocument:null,_oView:null,_aTargets:null,_aProjectTypes:null,_cWebUrl:"web url",configure:function(e){var t=this._oView.getController();if(e){var n;for(n=0;n<e.targets.length;n++){var r=e.targets[n];this._aTargets[r]=r}for(n=0;n<e.projectTypes.length;n++){var i=e.projectTypes[n];this._aProjectTypes[i]=i}this.context.service.resource.includeStyles(e.styles).done(),t._sFormat=e.format?e.format:"$MESSAGE",t._iMaxLineCount=e.maxLineCount?e.maxLineCount:1e3}},init:function(){this._aTargets={},this._aProjectTypes={},this._oView=sap.ui.view("RunConsole",{viewName:"sap.watt.ideplatform.plugin.runconsole.view.RunConsole",type:sap.ui.core.mvc.ViewType.JS,viewData:{context:this.context}}),this.context.i18n.applyTo(this._oView)},getContent:function(){return this._oView},getFocusElement:function(){return this.getContent()},clear:function(){this._oView.getController().clearConsole()},onLoggerEvent:function(e){var t=this,n=sap.watt.getEnv("server_type");if("xs2"===n){var r=e.params.target,i=e.params.service,o=t._oView.getController();this._aTargets[r]&&i.getLastLogMessage(r).then(function(e){return e&&e.tag?o.addMessage(e):void 0}).done()}},onSelectionEvent:function(){var e=this,t=sap.watt.getEnv("server_type");if("xs2"===t){var n=e._oView.getController();e._getSelectedDocument().then(function(t){return t?e._getDocumentType(t).then(function(r){if(!r||!e._aProjectTypes[r])return e._oCurrentDocument=t,n.contextSwitch(n.NOT_RUNNABLE);var i=t.getEntity().getFullPath(),o=e._oCurrentDocument?e._oCurrentDocument.getEntity().getFullPath():null;return o&&o===i?void 0:(e._oCurrentDocument=t,n.contextSwitch(i))}):void 0}).done()}},onDeletedDocument:function(e){var t=this,n=sap.watt.getEnv("server_type");if("xs2"===n){var r=e.params.document,i=t._oView.getController();"folder"===r.getType()&&r.isProject()&&t._getDocumentType(r).then(function(e){if(e&&t._aProjectTypes[e]){var n=r.getEntity().getFullPath();return i.deleteModelEntity(n)}}).done()}},onRunStatusChange:function(e){var t=this,n=this._oView.getController(),r=null,i=e.params.sStatus,o=e.params.sProject;("RUNNING"===i||"FAILED"===i||"NEW"===i)&&(r=e.params.sProcessId),"RUNNING"===i?t._getApplicationUrl(r,o).then(function(e){return e?n.updateApplicationMode(o,e,"url"):void 0}).done():n.updateApplicationMode(o,"","url"),n.updateApplicationMode(o,r,"processId"),n.updateApplicationMode(o,i,"status")},stopRun:function(e,t){var n=this;return this.context.service.runRegistry.stop(e,t).then(function(e){return e&&"STOPPED"===e.status?!0:(n._logAndThrowError(n.context.i18n.getText("i18n","stoprun_error_msg"),t),void 0)}).fail(function(){return n.context.service.log.error(t,n.context.i18n.getText("i18n","stoprun_error_msg"),["run"]).done(),!1})},getInitialStatus:function(e){var t,n={},r=this;return this.context.service.filesystem.documentProvider.getDocument(e).then(function(e){return r.context.service.runRegistry.getProcesses(e).then(function(e){return e&&e.length>0&&(t=e[0],n.status=t.status,"RUNNING"===n.status&&(n.url=r._getUrl(t),n.sProcessId=t.processId)),n})})},_logAndThrowError:function(e,t){throw this.context.service.log.error(t,e,["run"]).done(),new Error(e)},_getSelectedDocument:function(){var e=this.context.service.selection,t=this.context.service.repositorybrowser;return e.isOwner(t).then(function(t){return t?e.isEmpty().then(function(t){return t?void 0:e.getSelection().then(function(e){var t=e[0].document;return t.getProject().then(function(e){return e})})}):void 0})},_getApplicationUrl:function(e,t){var n=this;return this.context.service.filesystem.documentProvider.getDocument(t).then(function(t){return n.context.service.runRegistry.getProcesses(t).then(function(t){var r=t.filter(function(t){return t.processId===e});if(r&&r.length>0){var i=r[0];return n._getUrl(i)}return void 0})}).fail(function(){return void 0})},_getUrl:function(e){var t=this,n=e.links.filter(function(e){return e.rel===t._cWebUrl});return n&&n.length>0?n[0].href:void 0},_getDocumentType:function(e){if("object"==typeof e&&e.isProject()){var t=e.getProjectMetadata();if(t)return Q(t.type)}return Q(void 0)}});return t}),define("sap.watt.ideplatform.preview/command/RunWOFrame",{execute:function(e,t){var n=this.context.service.selection,r=this.context.service.preview;return n.assertNotEmpty().then(function(e){return r.showPreview(e[0].document,t,!0)})},isAvailable:function(){return!0},isEnabled:function(){var e=this.context.service.preview,t=this.context.service.selection;return t.assertNotEmpty().then(function(t){return e.isExecutable(t[0])})}}),define("sap.watt.ideplatform.preview/service/PreviewImpl",{_sLastUrl:null,_sLastPath:null,_connector:null,_oSettings:null,configure:function(e){var t=this,n=sap.watt.getEnv("server_type");this._adapter="xs2"!==n?e.adapter.service:e.cheadapter.service,this._adapter&&this._adapter.getPreviewUrl().fail(function(){}).done(),this._modes={},e.modes.forEach(function(e){t._modes[e.id]=e.service}),this._runner={},e.runner.forEach(function(e){t._runner[e.id]=e.service,e.service.showPreview().fail(function(){}).done(),e.service.attachEvent("buttonClicked",function(e){return t.context.event.fireButtonClicked(e.params)},t)}),this._preProcessors={},e.preprocessors.forEach(function(e){t._preProcessors[e.id]=e.service})},_showPreview:function(e,t,n,r,i){var o=this;void 0!==i&&(e=this._addUi5Version(e,i.sUi5Version),e=this._addAppsVersion(e,i.oAppsVersion),e=this._addSwitchBackend(e,i.oSwitchBackendParameter),e=this._addHashParam(e,i.oHashParameter));var a=e,s={};i&&"fiorirunner"!==i.sRunnerId&&(s=i.oUrlParameters,this._addIdeUrlParams(["saml2idp"],s));var u=n?"noFrame":"frame",c=o._runner[u];t||(t=window.open("","Preview"));var l=this._getUrlWithParams(e,s);return l.then?l.then(function(e){return t?c.showPreview(t,URI(e),r,a).then(function(e){return t.focus(),e}):void 0}):t?c.showPreview(t,URI(l),r,a).then(function(e){return t.focus(),e}):void 0},_addIdeUrlParams:function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=this._getIdeParameterValue(r);if(i&&!this._isInUrlParameters(r,t)){var o={paramName:r,paramValue:i};t.push(o)}}},_isInUrlParameters:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.paramName===e)return!0}return!1},_getIdeParameterValue:function(e){for(var t,n=window.location.search.substr(1).split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]===e){t=i[1];break}}return t},_addUi5Version:function(e,t){if(void 0!==t&&null!==t){var n=URI(e);return sap.watt.getEnv("internal")?(n.addSearch("hc_appversion.sapui5preview",t),n.addSearch("hc_serviceversion.sapui5",t)):n.addSearch("hc_serviceversion.sapui5",t),n.toString()}return e},_addAppsVersion:function(e,t){if(void 0!==t&&null!==t){for(var n=URI(e),r=0;r<t.length;r++){var i=t[r];i.libraryVersion&&"Active"!==i.libraryVersion&&n.addSearch("hc_appversion."+i.libraryName,i.libraryVersion)}return n.toString()}return e},_addUrlParams:function(e,t){var n=e;if(t){for(var r=URI(e),i=0;i<t.length;i++){var o=t[i];r.addSearch(o.paramName,o.paramValue)}n=r.toString()}return n},_addHashParam:function(e,t){if(t){var n=e,r=new URI(e);return r=r.hash(t),n=r.toString()}return e},_addSwitchBackend:function(e,t){if(t){for(var n,r=e,i=new URI(e),o=0;o<t.length;o++)0!==t[o].destinations&&t[o].source!==t[o].destinations&&(n="hc_destmapping."+t[o].source,i.addSearch(n,t[o].destinations));return r=i.toString()}return e},_getUrlWithParams:function(e,t){var n=this;if(t&&t.length>0){var r=this._addUrlParams(e,t);return r}var i=this._oSettings?this._oSettings:this.context.service;return i.setting.project.get(i.appparams).then(function(t){return n._addUrlParams(e,t)}).fail(function(){return e})},showPreview:function(e,t,n,r,i){var o=this;if(e instanceof URI&&(e=e.toString()),"string"==typeof e)return this._showPreview(e,t,n,r,i);if(jQuery.sap.endsWith(e.getEntity().getName(),".html")){i=_.clone(i,!0),i.oUrlParameters&&i.oUrlParameters.splice(0,0,{paramName:"origional-url",paramValue:e.getEntity().getName()});var a=Q(e);return $.each(this._preProcessors,function(e,t){a=a.then(t.apply)}),a.then(function(e){var a=i?i.oAppForwarding:null,s=i?i.sUi5Version:null,u=i?i.sRelativePath:null;return o.getPreviewUrl(e,null,a,s,null,u,"").then(function(a){var s=a.toString();return o._sLastUrl=s,o._sLastPath=e.getEntity().getParentPath(),o._showPreview(s,t,n,r,i)})})}return this._showPreview(this._sLastUrl,t,n,r,i)},getPreviewUrl:function(e,t,n,r,i,o,a){var s=this;return this.getPreviewConfig(e,o).then(function(e){return s.assemblePreviewURI(e,n,r,i,a)})},getPreviewConfig:function(e,t){return e.getProject().then(function(n){var r;return r=t?t:e.getEntity().getProjectRelativePath(),{root:n,path:r,params:{}}})},assemblePreviewURI:function(e,t,n,r,i){return this._adapter.getPreviewUrl(e.root,t,n,i,r).then(function(t){var n=e.path;n=jQuery.sap.startsWith(n,"/")?n.substr(1):n,t=URI(n).absoluteTo(t);for(var r in e.params)t.addQuery(r,e.params[r]);return t})},isExecutable:function(e){var t=e.document;if(!t.getEntity)return!1;var n=t.getEntity().getName(),r=t.getType(),i=t.getEntity().getParentPath();return"folder"==r&&(i=i+"/"+n),!!(jQuery.sap.startsWith(i,this._sLastPath)||"file"==r&&jQuery.sap.endsWith(n,".html"))}}),define("sap.watt.ideplatform.preview/service/AppParamsProjectConfig",["sap/watt/common/plugin/platform/service/ui/AbstractConfig"],function(e){"use strict";return e.extend("sap.watt.common.plugin.preview.service.AppParamsProjectConfig",{getProjectSettingContent:function(){},saveProjectSetting:function(){}})}),define("sap.watt.ideplatform.preview/service/HTMLbuilder",{build:function(e,t,n){var r=this;return this.context.service.filesystem.documentProvider.getDocument(e.getEntity().getParentPath()).then(function(i){return e.getContent().then(function(e){var o=e.search("(| )*</(| )*head(| )*>"),a=e.substr(0,o)+t+e.substr(o);return i.importFile(new Blob([a]),!1,!0,n).then(function(e){return r.context.service.preview.getPreviewUrl(e).then(function(e){return e.toString()})})})})}}),define("sap.watt.ideplatform.preview/service/PreviewFrameRunner",[],function(){return{_aWindows:[],_bEventListenerExists:!1,_bOpenNoFrame:!1,_oCurrentWindow:null,showPreview:function(e,t,n,r){var i=this;if(i._oCurrentWindow=e,!t)return Q();var o=t.toString(),a=require.toUrl("sap.watt.ideplatform.preview/view/wrapper.html")+"?url="+window.encodeURIComponent(o),s=window["sap-ide-env"];"about:blank"===o&&"java"===s.server_type&&(a=require.toUrl("/resources/sap/watt/ideplatform/plugin/preview/view/wrapper.html")+"?url="+window.encodeURIComponent(o));var u=Q.defer();u.promise.debugInfo&&(u.promise.debugInfo.finalized=!0);for(var c,l=i._getWindowName(i._oCurrentWindow),p=0;p<i._aWindows.length;p++)if(l===i._aWindows[p].sWindowName){c=i._aWindows[p],c.sWindowName=l,c.oCustSettings=n,c.oDeferred=u,c.sFrameUrl=o,c.sNoFrameUrl=r;break}i._bOpenNoFrame=c||""==l?!1:!0,c||(c={sWindowName:l,oCustSettings:n,oDeferred:u,sFrameUrl:o,sNoFrameUrl:r},i._aWindows.push(c)),i._bEventListenerExists||(i._bEventListenerExists=!0,addEventListener("message",function(e){if(window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),window.location.origin===e.origin&&e.source&&e.source.window){for(var t,n,r,o,a=i._getWindowName(e.source),s=0;s<i._aWindows.length;s++)if(a===i._aWindows[s].sWindowName){t=e.source.window,n=i._aWindows[s].oCustSettings,r=i._aWindows[s].oDeferred,o=i._aWindows[s].sFrameUrl;break}if(t)if(2===e.data.search("changeDevice")){var u=JSON.parse(e.data),c=u.changeDevice;i.context&&i.context.service&&(i.context.service.preferences.set({device:c},"Preview").fail(function(e){console.log(e)}).done(),u.changeDeviceClicked&&i.context.service.usagemonitoring.report("preview","preview_size",u.changeDeviceClicked).done())}else if("initializeTexts"===e.data)i._initializeTexts(t);else if("previewReady"===e.data)if(t&&t.wrapper){if(t.wrapper.createCustButtons(n),i.context&&i.context.service){var l=i.context.service.qrcode;l&&l.getQrCode(o,!0,!0).then(function(e){if(e&&e.oDiv&&e.oDiv[0]){var n=t.document.getElementById("shareBtn"),r=t.document.getElementById("share"),o=e.oDiv[0];o.style.padding="16px",$(r.firstChild).replaceWith(e.oDiv.outerHTML()),n.removeAttribute("class");var a=t.document.getElementById("localhost-warning");a&&(a.innerText=i._getText("msg_localhost_warning"))}}).done()}r.resolve(t.wrapper)}else r.reject();else if(2===e.data.search("changeLanguage")){var u=JSON.parse(e.data),c=u.changeLanguage;i.context.service.usagemonitoring.report("preview","preview_language",u.changeLanguage).done()}else i.context.event.fireButtonClicked({id:e.data}).done()}},!1));var f=Q(a);return i.context&&i.context.service&&(f=i.context.service.setting.project.get(i.context.service.translation).then(function(e){if(e){var t=e.supportedLanguages,n=e.defaultLanguage;return n||(t?n=t.split(",")[0]:(t="en",n="en")),Q(a+"&lang="+window.encodeURIComponent(t)+"&dft="+window.encodeURIComponent(n))}return Q(a)},function(){return Q(a)}).then(function(e){return i.context.service.preferences.get("Preview").then(function(t){return e+"&device="+window.encodeURIComponent(t.device)}).fail(function(){return e})})),f.then(function(e){return i._bOpenNoFrame?(i._oCurrentWindow.window.location.href=c.sNoFrameUrl,setTimeout(function(){return i._oCurrentWindow.window.location.href=e,c.oDeferred.promise},2e3),void 0):(i._oCurrentWindow.window.location.href=e,c.oDeferred.promise)})},_initializeTexts:function(e){var t=[];try{t=e.document.getElementsByClassName("i18n")}catch(n){console.log(n.message)}e.document.title=this._getText("preview_title"),e.msg_invalid_url="msg_invalid_url",e.msg_no_ide="msg_invalid_url";for(var r in e.wrapper.msg)e.wrapper.msg[r]=this._getText(r);for(var i=0;i<t.length;i++){var o=t[i];""!=o.textContent&&0==o.textContent.indexOf("preview_")&&(o.textContent=this._getText(o.textContent)),""!=o.title&&0==o.title.indexOf("preview_")&&(o.title=this._getText(o.title))}},_getText:function(e){if(this.context){var t=this.context.i18n;return t.getText("i18n",e)}return e},_getWindowName:function(e){var t;try{t=e.name}catch(n){t=""}return t}}}),define("sap.watt.ideplatform.preview/service/PreviewNoFrameRunner",[],function(){return{showPreview:function(e,t){e.location.href=t.toString(),console.debug("end   - "+Date.now())}}}),define("sap.watt.ideplatform.projectmetadata/service/ProjectMetadata",[],function(){"use strict";return{_mProviders:{},configure:function(e){var t=this;e.providers.forEach(function(e){t._mProviders[e.projectType]={provider:e.provider}})},getDependencies:function(e){var t=this,n=[];return this.context.service.projectType.getProjectTypes(e).then(function(r){for(var i=0;i<r.length;i++){var o=r[i].id;t._mProviders[o]&&n.push(t._mProviders[o].provider.getDependencies(e))}return Q.all(n).then(function(e){var t=[];for(i=0;i<e.length;i++)t=t.concat(e[i]);return t})})}}}),define("sap.watt.ideplatform.snippet/command/InsertSnippet",[],function(){return{execute:function(e){var t;t=e.preSnippetInsertionHandler?e.preSnippetInsertionHandler.updateSnippetBeforeInsertion(e.snippetContent,e.currentDocument):Q(e.snippetContent);var n=this;return t.then(function(t){return e.currentEditor.addString(t)}).fail(function(e){n.context.service.log.error("Snippet",e.message,["user"]).done();var t=n.context.i18n.getText("i18n","invalid_snippet");return n.context.service.usernotification.alert(t)})},isAvailable:function(){return!0},isEnabled:function(){return!0}}}),define("sap.watt.ideplatform.snippet/service/Snippet",[],function(){"use strict";return{_mSnippets:{},configure:function(e){var t=this;e.snippets.forEach(function(e){t._mSnippets[e.fileExtension]={snippets:e.snippets}})},getAllSnippets:function(e){var t=this._mSnippets[e],n=this;return t?this._loadTemplatesFromFiles(t).then(function(){return t.snippets}).fail(function(e){return n.context.service.log.error("Snippet",e.message,["user"]).done(),null}):void 0},_loadTemplatesFromFiles:function(e){var t=[];return e.snippetLoadingDefer||(e.snippets.forEach(function(e){var n=require.toUrl(e.filePath);t.push(Q.sap.ajax(n))}),e.snippetLoadingDefer=Q.all(t).then(function(t){for(var n=0;n<t.length;n++)e.snippets[n].content=t[n][0]})),e.snippetLoadingDefer}}}),define("sap.watt.ideplatform.openwith/command/OpenWith",[],function(){"use strict";return{execute:function(e){var t=this.context.service.selection,n=this.context.service.content;return t.assertNotEmptySingleSelection().then(function(t){return n.setVisible(!0).then(function(){return n.open(t.document,e.service)})})},isEnabled:function(){return this.context.service.repositorybrowserUtils.isSingleFileSelection()}}}),define("sap/watt/ideplatform/orion/plugin/validationsDistributor/adopters/problemsView/data/cacheManager",[],function(){var e=function(){this.oProjectCollection={}};return e.prototype.addProjects=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.projectName;this.oProjectCollection[r]={},this.oProjectCollection[r].projectData={issues:n.projectData.issues}}},e.prototype.getProjects=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];this._isProjectExists(r)&&t.push({projectName:r,projectData:this.oProjectCollection[r].projectData})}return t},e.prototype.deleteProjects=function(e){for(var t=0;t<e.length;t++){var n=e[t];this._isProjectExists(n)&&(this.oProjectCollection=_.omit(this.oProjectCollection,n))}},e.prototype.deleteProjectSubFolder=function(e,t){if(this._isProjectExists(e)){var n=this.oProjectCollection[e].projectData.issues;n=_.omit(n,function(e,n){return _.startsWith(n,t)}),this.oProjectCollection[e].projectData.issues=n}},e.prototype.deleteAllProjects=function(){this.oProjectCollection={}},e.prototype.doProjectsExists=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push({projectName:r,isProjectExists:this._isProjectExists(r)})}return t},e.prototype.updateIssuesForSingleFile=function(e,t,n){if(!this.oProjectCollection[e]){var r={projectName:e,projectData:{issues:{}}};this.addProjects([r])}this.oProjectCollection[e].projectData.issues[t]={},this.oProjectCollection[e].projectData.issues[t].issues=n},e.prototype._isProjectExists=function(e){return _.has(this.oProjectCollection,e)},e}),define("sap/watt/ideplatform/orion/plugin/validationsDistributor/adopters/problemsView/data/queueManager",[],function(){var e=function(){this.qHandleServerRequest=[]};return e.prototype.addRequest=function(e){this.qHandleServerRequest.push(e)},e.prototype.dequeueRequest=function(){if(0!==this.qHandleServerRequest.length){var e=this.qHandleServerRequest.shift();return e}},e.prototype.getSizeOfQueue=function(){return this.qHandleServerRequest.length},e}),define("sap.watt.ideplatform.orion.validationsDistributor/adopters/problemsView/data/validationStoreManager",["sap/watt/lib/lodash/lodash","sap/watt/ideplatform/orion/plugin/validationsDistributor/adopters/problemsView/data/cacheManager","sap/watt/ideplatform/orion/plugin/validationsDistributor/adopters/problemsView/data/queueManager"],function(e,t,n){"use strict";var r=null,i="LOCAL",o=new t,a=new n;return{bIsRequestRunning:!1,analyse:function(t){return e.isNull(this.getSelectedProject())?Q():this.getSelectedProject()===i?this._getWorkspaceIssuesFromServer(t,!0):this._getProjectIssuesFromServer(t,[this.getSelectedProject()],!0)},select:function(t){var n=this;if(!e.isNull(this.getSelectedProject())){if(this.getSelectedProject()===i)return this._getWorkspaceProjectNames(t).then(function(e){var r=n._getMissingProjectsInCache(e);return 0===r.length?n._getProjectIssuesFromCache(t,e):n._fireIssuesUpdate([i],{},t)});var r=[this.getSelectedProject()],o=this.getCacheManager().doProjectsExists(r);if(o)return o[0].isProjectExists?n._getProjectIssuesFromCache(t,r):(n._fireIssuesUpdate([],{},t),n._getProjectIssuesFromServer(t,r))}return Q()},updateSingleFileValidation:function(t,n){if(!e.isNull(this.getSelectedProject())){var r=n.document,o=n.result.issues,a=r.split("/"),s=a[1];return r=r.split("/").join("\\"),this.getCacheManager().updateIssuesForSingleFile(s,r,o),this.getSelectedProject()===i?this.select(t):this._getProjectIssuesFromCache(t,[s])}return Q()},handleFolderDelete:function(e,t){var n=t.getEntity().getFullPath(),r=n.split("/"),i=r[1];return n=n.split("/").join("\\"),t.getEntity().isProject()?(o.deleteProjects([i]),this._fireIssuesUpdate([i],{},e)):(o.deleteProjectSubFolder(i,n),this._getProjectIssuesFromCache(e,[i]))},setSelectedProject:function(e){var t;return t=e.getEntity().isRoot()?"LOCAL":e.getEntity().getName(),this.getSelectedProject()&&t===this.getSelectedProject()?Q(!1):(r=t,Q(!0))},_getWorkspaceProjectNames:function(t){var n=this,r=[];return t.service.filesystem.documentProvider.getRoot().then(function(t){return t.getFolderContent().then(function(t){var i=[];return e(t).forEach(function(e){i.push(n._hasFiles(e))}).value(),Q.all(i).then(function(t){return e(t).forEach(function(e){e&&r.push(e)}).value(),r})})})},_hasFiles:function(t){return t.getEntity().isRoot()?Q(i):t.getCurrentMetadata(!0).then(function(n){var r=-1!==e.findIndex(n,{folder:!1});return r===!0?t.getEntity().getName():null})},_getMissingProjectsInCache:function(t){var n=[],r=this.getCacheManager().doProjectsExists(t);return e(r).forEach(function(e){e.isProjectExists||n.push(e.projectName)}).value(),n},_addProjectsToQueue:function(e,t,n){var r=this;if(n)this.getQueueManager().addRequest({projects:e,workspaceConfig:t,forceAnalyze:n});else{var i=r._getMissingProjectsInCache(e),o=i.length;0!==o&&this.getQueueManager().addRequest({projects:e,workspaceConfig:t,forceAnalyze:n})}},_fireIssuesUpdate:function(e,t,n){var r=this;return t?n.service.basevalidator.getIssuesWrappedForProblems(t).then(function(t){return t?n.service.validationTriggers.context.event.fireIssuesUpdate({displayed:r.getSelectedProject(),senders:e,validationsResults:t}):void 0}).fail(function(e){n.service.log.error(n.service.codeValidationDAO.getProxyMetadata().getName(),e.message,["system"]).done()}):void 0},_runNextQuedAction:function(e){var t=this;if(!this.bIsRequestRunning){var n=this.getQueueManager().dequeueRequest();if(n){var r=n.projects,i=n.workspaceConfig,o=n.forceAnalyze,a=r;if(o||(a=t._getMissingProjectsInCache(r)),0!==a.length)return t._performApplyToServer(e,a,i)}}return Q()},_performApplyToServer:function(e,t,n){var r=this;return e.service.problemsViewValidation.context.event.fireProblemsLongRunningProcessing({taskStage:"start"}).done(),r.bIsRequestRunning=!0,e.service.codeValidationDAO.codeValidationResponseStatus().then(function(i){var o;return e.service.codeValidationDAO.validateWorkspaceContent(n,t).then(function(n){n?(o=n,o.result&&o.integrity&&o.integrity.status!==i.ERROR?r._handelIssuesReturns(e,t,o):o.integrity.status=i.ERROR):o.integrity.status=i.ERROR}).fail(function(){o.integrity.status=i.ERROR}).fin(function(){return r.bIsRequestRunning=!1,e.service.problemsViewValidation.context.event.fireProblemsLongRunningProcessing({taskStage:"end",taskIntegrity:{status:o.integrity.status,info:void 0}}).done(),r._runNextQuedAction(e)})})},_handelIssuesReturns:function(t,n,r){var i=this,o=[],a=[],s=r.result;e(n).forEach(function(e){var t=i._isolateSpecificProjectIssues(e,s);t&&(o.push(t),a.push(e))}).value(),this.getCacheManager().addProjects(o),this._fireIssuesUpdate(a,s,t),this._reportIssuesFromServerToUsageMonitoring(t,s)},_reportIssuesFromServerToUsageMonitoring:function(t,n){var r=this;setTimeout(function(){var i=0,o=[];n&&e.each(n,function(e,t){i+=e.issues.length;var n=r._getStandardPath(t),a=n.split("\\")[1];-1===o.indexOf(a)&&o.push(a)}),o.length>1?t.service.usagemonitoring.report("ProblemsView","AnalyseMultipleProjects",i).done():t.service.usagemonitoring.report("ProblemsView","Analyse",i).done()},0)},_getProjectIssuesFromServer:function(e,t,n){var r=this;return e.service.basevalidator.getProjectsValidatorsConfiguration().then(function(i){return i=r._replaceFioriValidatorWithJsValidator(i),r._addProjectsToQueue(t,i,n),r.getQueueManager().getSizeOfQueue()>0?r._runNextQuedAction(e):void 0})},_getWorkspaceIssuesFromServer:function(t,n){var r=this;return t.service.basevalidator.getProjectsValidatorsConfiguration().then(function(i){i=r._replaceFioriValidatorWithJsValidator(i);var o=e.keysIn(i);return r._addProjectsToQueue(o,i,n),r.getQueueManager().getSizeOfQueue()>0?r._runNextQuedAction(t):void 0})},_getStandardPath:function(e){return e.split("/").join("\\")},_isolateSpecificProjectIssues:function(t,n){if(!t||!n)return null;var r={projectName:t,projectData:{issues:{}}},i=this;return e.forEach(n,function(e,n){n=i._getStandardPath(n);var o=n.split("\\");o[1]==t&&(r.projectData.issues[n]=e)}),r},_getProjectIssuesFromCache:function(t,n){var r=this,i={},o=this.getCacheManager().getProjects(n);return e(o).forEach(function(e){i=r._mergeIssues(i,e.projectData.issues)}).value(),this._fireIssuesUpdate(n,i,t)},_mergeIssues:function(t,n){var r={};return e.forEach(t,function(e,t){r[t]=e}),e.forEach(n,function(e,t){r[t]=e}),r},getIntegrityDictionary:function(e){return e.service.codeValidationDAO.codeValidationResponseStatus().then(function(e){return e}).fail(function(){e.service.log.error(e.service.self.getProxyMetadata().getName(),"failed to get integrity status dictionary from DAO",["system"]).done()})},_replaceFioriValidatorWithJsValidator:function(t){var n={};return e.each(t,function(t,r){if(t&&e.isArray(t.js)&&t.js.length>0&&"fioriJsValidator"===t.js[0].validator){var i={};e.each(t.js[0].validatorConfiguration.additionalRuleMetadata,function(e,t){i[t]=e;var n=e.severity?e.severity.toLowerCase():"warning";switch(n){case"e":i[t].severity="error";break;case"w":i[t].severity="warning";break;case"i":i[t].severity="info";break;default:i[t].severity="warning"}i[t].helpUrl=i[t].help});var o={rules:t.js[0].validatorConfiguration.rules,globals:t.js[0].validatorConfiguration.globals,env:t.js[0].validatorConfiguration.env};t.js[0].validatorConfiguration.eslintConfig=o,t.js[0].validatorConfiguration.rulesExt=i}var a=r.substr(1);n[a]=t}),n},getQueueManager:function(){return a},setQueueManager:function(){a=new n},getCacheManager:function(){return o},setCacheManager:function(){o=new t},getSelectedProject:function(){return r}}}),define("sap.watt.ideplatform.orion.validationsDistributor/adopters/problemsView/codeValidator",["sap/watt/lib/lodash/lodash","sap.watt.ideplatform.orion.validationsDistributor/adopters/problemsView/data/validationStoreManager"],function(e,t){return{_DOMAIN:"codeValidation",_WORKSPACE_FOLDER:"LOCAL",_convertIssuesToProblems:function(e,t){for(var n=this,r=[],i=e||[],o=t?-1!==t.indexOf("\\")?t.replace(/\\/g,"/"):t:null,a=0;a<i.length;a++){var s=i[a];void 0===s.column&&(s.column=0);var u=s.line+", "+s.column,c=o.split("/"),l=c.pop();r.push({checker:s.checker,ruleId:s.ruleId,category:s.category,helpUrl:s.helpUrl,id:o,severity:s.severity,description:s.message,path:o,line:s.line,column:s.column,location:c.join("/"),file:l+"("+u+")",navigate:{arguments:[this.context.service.editor,this.context.service.document,s.line,s.column,o],handler:function(e){var t=e[0],r=e[1],i=e[2],o=e[3],a=e[4];r.getDocumentByPath(a).then(function(e){return e?t.getSpecificEditor(e,"aceeditor").then(function(t){return r.open(e).then(function(){t.service.gotoLine(i,o)})}):void 0}).done(),n.context.service.usagemonitoring.report("ProblemsView","NavigateToIssue").done()}}})}return r},onProblemsUpdate:function(t){var n=this,r=this.context.service.problems,i=this._getIssuesUpdateInfo(t),o=i.validationsResults,a=i.displayed,s=i.senders,u=[],c=[];e.forEach(o,function(e){var t=e.document;if(t){var r=e.result.issues,i=n._convertIssuesToProblems(r,t);i.length?u=u.concat(i):c=c.concat(t)}}),0===o.length&&0===s.length?(r.clearProblems(this._DOMAIN).done(),r.clearTitle().done()):a===this._WORKSPACE_FOLDER?(u.length&&(r.setProblems(this._DOMAIN,u).done(),r.setTitle("workspace").done()),c.length&&(r.clearProblems(this._DOMAIN,c).done(),r.setTitle("workspace").done()),0===c.length&&0===u.length&&(r.clearProblems(this._DOMAIN).done(),r.clearTitle().done())):-1!==e.indexOf(s,a)&&(u.length?(r.setProblems(this._DOMAIN,u).done(),r.setTitle(a).done()):(r.clearProblems(this._DOMAIN).done(),r.clearTitle().done()))},problemsProcessingIntegrityStatus:function(){return t.getIntegrityDictionary(this.context)},_getIssuesUpdateInfo:function(e){return{displayed:e.params.displayed,senders:e.params.senders,validationsResults:e.params.validationsResults||[]}}}}),define("sap.watt.ideplatform.orion.validationsDistributor/adopters/problemsView/listener/validationTriggers",["sap.watt.ideplatform.orion.validationsDistributor/adopters/problemsView/data/validationStoreManager"],function(e){return{_isProblemsViewVisible:!1,analyse:function(){return this.getValidationStoreManager().analyse(this.context)},onProblemsViewVisibilityChanged:function(e){return e.params.visible===!0?(this.setProblemsViewVisibility(!0),this.onDocumentSelected()):(this.setProblemsViewVisibility(!1),void 0)},onDocumentSelected:function(){if(this.getProblemsViewVisibility()){var e=this,t=this.context;return e._getSelectedDocument().then(function(n){return n?e.getValidationStoreManager().setSelectedProject(n).then(function(r){return r?e.getValidationStoreManager()._hasFiles(n).then(function(n){return n?e.getValidationStoreManager().select(t):e.getValidationStoreManager()._fireIssuesUpdate([],{},t)}):void 0}):void 0})}},onClientValidationChanged:function(e){if(this.getProblemsViewVisibility()){var t=this.context,n=e.params.validationsResults[0];return this.getValidationStoreManager().updateSingleFileValidation(t,n)}},onDocumentDeleted:function(e){if(this.getProblemsViewVisibility()){var t;if(!(e&&e.params&&e.params.document))return Q();t=e.params.document;var n=this.context,r=t.getEntity().getType();if("file"===r){var i=this,o=t.getEntity().getFullPath(),a={root:{},issues:[]};return n.service.basevalidator.getIssuesWrappedForProblems(a,o).then(function(e){var t={params:{validationsResults:e}};return i.onClientValidationChanged(t)})}return this.getValidationStoreManager().handleFolderDelete(n,t)}},_getSelectedDocument:function(){var e=this;return e.context.service.repositorybrowser.getSelection().then(function(e){if(e&&e.length>0){var t=e[0].document;return t?t.getProject().then(function(e){return e}):Q(null)}return Q(null)})},getValidationStoreManager:function(){return e},getProblemsViewVisibility:function(){return this._isProblemsViewVisible},setProblemsViewVisibility:function(e){this._isProblemsViewVisible=e}}}),define("sap.watt.ideplatform.plugindevelopment/command/RunAsPluginPreview",{execute:function(e,t){var n=this,r=require.toUrl("sap.watt.ideplatform.plugindevelopment/ui/debugModeInitialPage.html");
t.open(r,"pluginPreview");var i=this.context.service.selection;i.assertNotEmpty().then(function(e){var r=e[0].document.getEntity().getParentPath();return n.context.service.archivetemplateresources.createArchive(r).then(function(){return n.context.service.plugindevelopment.writePluginToOrion(e[0].document.getEntity(),t).fail(function(e){return n.context.service.plugindevelopment.closeTargetWindow(),n.context.service.usernotification.alert(e.message).done()})}).fail(function(e){var t=n.context.i18n.getText("archive_template_resources_error_msg")+e.message;return n.context.service.usernotification.alert(t)})}).done()},isAvailable:function(){var e=this,t=this.context.service.selection;return t.assertNotEmpty().then(function(t){return e.context.service.plugindevelopment.isPluginProject(t[0].document.getEntity().getFullPath()).then(function(e){return e})})},isEnabled:function(){if("local_hcproxy"===sap.watt.getEnv("server_type"))return!1;var e=this.context.service.selection;return e.assertNotEmpty().then(function(e){return 1===e.length&&"plugin.json"===e[0].document.getEntity().getName()?!0:!1})}}),define("sap.watt.ideplatform.plugindevelopment/service/TemplateInfoStep",{getContent:function(){jQuery.sap.require("sap.watt.ideplatform.orion.plugin.plugindevelopment.ui.TemplateInfoStep");var e=new sap.watt.ideplatform.orion.plugin.plugindevelopment.ui.TemplateInfoStep({context:this.context}),t=this.context.i18n.getText("templateInfoStep_title");return this.context.service.wizard.createWizardStep(e,t,"")}}),define("sap.watt.ideplatform.plugindevelopment/service/TemplateFinishStep",{getContent:function(){jQuery.sap.require("sap.watt.ideplatform.orion.plugin.plugindevelopment.ui.TemplateFinishStep");var e=new sap.watt.ideplatform.orion.plugin.plugindevelopment.ui.TemplateFinishStep({context:this.context});return this.context.service.wizard.createWizardStep(e,"","")}}),define("sap.watt.ideplatform.plugindevelopment/service/TemplateStepsSelectionStep",{getContent:function(){jQuery.sap.require("sap.watt.ideplatform.orion.plugin.plugindevelopment.ui.TemplateStepsSelectionStep");var e=new sap.watt.ideplatform.orion.plugin.plugindevelopment.ui.TemplateStepsSelectionStep({context:this.context}),t=this.context.i18n.getText("templateStepsSelectionStep_title"),n=this.context.i18n.getText("templateStepsSelectionStep_description");return this.context.service.wizard.createWizardStep(e,t,n)}}),define("sap.watt.ideplatform.plugindevelopment/service/ExtendTemplateStep",{getContent:function(){jQuery.sap.require("sap.watt.ideplatform.orion.plugin.plugindevelopment.ui.ExtendTemplateStep");var e=new sap.watt.ideplatform.orion.plugin.plugindevelopment.ui.ExtendTemplateStep({context:this.context}),t=this.context.i18n.getText("ExtendTemplateStep_title");return this.context.service.wizard.createWizardStep(e,t,"")}}),define("sap.watt.ideplatform.plugindevelopment/service/PluginDevUtils",{_pluginsToLoad:[],isPluginProject:function(e){var t=this;return this.context.service.filesystem.documentProvider.getDocument(e).then(function(e){return t.context.service.projectType.getProjectTypes(e).then(function(e){for(var t=0;t<e.length;t++)if("sap.watt.uitools.ide.plugin"===e[t].id)return!0;return!1}).fail(function(){return!1})}).fail(function(){return!1})},writePluginToOrion:function(e,t){var n=e.getBackendData().location,r=e.getParentPath(),i=this,o=[];i._rdeTargetWindow=t;var a=sap.watt.getEnv("orion_server");if(a){var s=a.length-1;a.lastIndexOf("/")===s&&(a=a.substring(0,s))}else a="/orion";return void 0!==n&&""!==n.trim()&&o.push(a+n.substring(0,n.indexOf("/plugin.json"))),i._pluginsToLoad=[],this._readDependentPluginsRecursively(r).then(function(){for(var e=[],t=0,n=i._pluginsToLoad.length;n>t;t++){var s=i.context.service.filesystem.documentProvider.getDocument("/"+i._pluginsToLoad[t]).then(function(e){var t=e.getEntity().getBackendData().location,n=a+t.substring(0,t.lastIndexOf("/"));-1===o.indexOf(n)&&o.push(n)}).fail(function(e){throw new Error(e)});e.push(s)}return Q.all(e).then(function(){var e={plugins:o};return i.context.service.preferences.set(e,"config-dev.json").then(function(){return i._openNewRDEWorkspaceInstance(r)})},function(e){throw i._printToConsoleLog("error",e.message),new Error(e)})})},_openNewRDEWorkspaceInstance:function(e){var t=this;return this._readPluginDevelopmentSectionInProjectJson(e).then(function(e){var n=window.location.href,r=new URI(n);if(void 0===e||void 0===e.devUrlParameters||0===e.devUrlParameters.length)t._addDefaultUrlParameters(r);else{var i;r.addQuery("sap-ide-dev=true"),n=decodeURIComponent(r),i=e.devUrlParameters;for(var o in i)-1===n.indexOf(o)&&void 0!==i[o]&&""!==i[o]&&(r.addQuery(o+"="+i[o]),n=decodeURIComponent(r))}return t._rdeTargetWindow&&!t._rdeTargetWindow.closed&&(t._rdeTargetWindow.open(decodeURIComponent(r),"pluginPreview"),t._rdeTargetWindow.focus()),t._rdeTargetWindow})},closeTargetWindow:function(){this._rdeTargetWindow&&this._rdeTargetWindow.close&&this._rdeTargetWindow.close()},_addDefaultUrlParameters:function(e){e.addQuery("sap-ide-debug=false"),e.addQuery("sap-ide-dev=true")},_readPluginDevelopmentSectionInProjectJson:function(e){var t=this;return this.context.service.filesystem.documentProvider.getDocument(e).then(function(e){return t.context.service.setting.project.get(t.context.service.plugindevelopment,e)})},_getPluginDevelopmentSection:function(e){var t=this.context.service.filesystem.documentProvider,n=this;return t.getDocument(e).then(function(e){return n.context.service.setting.project.get(n.context.service.plugindevelopment,e)})},_getPluginName:function(e){var t=this.context.service.filesystem.documentProvider,n=this;return t.getDocument(e+"/plugin.json").then(function(t){if(t&&"file"===t.getType())return t.getContent().then(function(e){var t=JSON.parse(e),n=t.name;return n});throw new Error(n.context.i18n.getText("archive_template_resources_invalid_plugin",[e+"/plugin.json"]))})},_readPluginDependencies:function(e){var t=this;0!==e.indexOf("/")&&(e="/"+e);var n=[];return n.push(t._getPluginName(e)),n.push(t._getPluginDevelopmentSection(e)),Q.all(n).spread(function(e,n){var r=[];return void 0!==n&&void 0!==n.dependencies&&(n.dependencies.hasOwnProperty(e)?t._getRelevantPlugins(n.dependencies[e],r):n.dependencies.hasOwnProperty("all")&&t._getRelevantPlugins(n.dependencies.all,r)),r})},_getRelevantPlugins:function(e,t){for(var n=0,r=e.length;r>n;n++)void 0!==e[n]&&""!==e[n].trim()&&-1===t.indexOf(e[n])&&t.push(e[n])},_readDependentPluginsRecursively:function(e){var t=this;return this._readPluginDependencies(e).then(function(e){if(e.length>0){for(var n=[],r=0,i=e.length;i>r;r++)void 0!==e[r]&&""!==e[r].trim()&&-1===t._pluginsToLoad.indexOf(e[r])&&(t._pluginsToLoad.push(e[r]),n.push(t._readDependentPluginsRecursively(e[r])));return Q.all(n)}})}}),define("sap.watt.ideplatform.plugindevelopment/service/ArchiveTemplateResources",{_sProjectFolderPath:null,createArchive:function(e){var t=this;this._sProjectFolderPath=e;var n=this.context.service.filesystem.documentProvider;return n.getDocument(e+"/plugin.json").then(function(n){if(n&&"file"===n.getType()){var r=[];return n.getContent().then(function(e){var n=JSON.parse(e);if(n.configures&&n.configures.services){var i=n.configures.services["template:templates"];if(i)for(var o=0;o<i.length;o++)r.push(t._archiveAndImportResourcesZipFileForTemplate(i[o]));return Q.all(r).then(function(e){for(var n=0;n<e.length;n++)if(e[n]){var r=e[n].getEntity(),i=r.getParentPath().substring(r.getParentPath().lastIndexOf("/")+1),o="Successfully created the "+r.getName()+" file for template: "+t._sProjectFolderPath+"/"+i;t._printToConsoleLog("info",o)}},function(e){throw t._printToConsoleLog("error",e.message),new Error(e)})}t._printToConsoleLog("info","No templates to archive")})}throw new Error(t.context.i18n.getText("archive_template_resources_invalid_plugin",[e+"/plugin.json"]))})},_printToConsoleLog:function(e,t){"error"===e?this.context.service.log.error("Archive Templates",t,["user"]).done():"info"===e&&this.context.service.log.info("Archive Templates",t,["user"]).done()},_archiveAndImportResourcesZipFileForTemplate:function(e){var t=this;return this._createResourcesZipFileForTemplate(e).then(function(e){return e?t._importResourcesZipFile(e):void 0})},onAfterGeneration:function(e){var t=this,n=e.params.model;if(void 0!==n.template){var r=n.template.technicalname,i=e.params.path,o=i+"/"+r,a=n.template.selectedTemplateToExtend;if(a){if(a.getFileName()){var s=a.getTemplateClass().getProxyMetadata().getName(),u=a.getPath()+"/"+a.getFileName();return t.context.service.pluginmanagement.getPluginFile(s,u,!0).then(function(e){return t.context.service.filesystem.documentProvider.getDocument(o).then(function(t){return t.importFile(e,!1,!0,"resources.zip")})})}return Q()}return this.createArchive(i)}},_createResourcesZipFileForTemplate:function(e){var t=this._sProjectFolderPath.lastIndexOf("/"),n=this._sProjectFolderPath.substring(0,t)+"/"+e.path,r=n+"/resources",i=this.context.service.filesystem.documentProvider;return i.getDocument(r).then(function(t){return t?"folder"===t.getType()?t.getCurrentMetadata().then(function(n){return n&&0!==n.length?t.exportZip().then(function(t){return{blob:t,template:e}}):!1}).fail(function(){return!1}):!1:void 0}).fail(function(){return!1})},_importResourcesZipFile:function(e){var t=e.blob,n=e.template,r=n.fileName;r||(r="resources.zip");var i=this.context.service.filesystem.documentProvider,o=this._sProjectFolderPath.lastIndexOf("/"),a=this._sProjectFolderPath.substring(0,o)+"/"+n.path;return i.getDocument(a).then(function(e){var n=a+"/"+r;return i.getDocument(n).then(function(e){return e?e.delete():void 0}).then(function(){return e.importFile(t,!1,!0,r)})})},_loadResourcesDataToZipFile:function(e,t,n){var r=Q.defer();if(e){var i=new FileReader;i.onload=function(e){t.file(n,e.target.result,{binary:!0}),r.resolve()},i.readAsArrayBuffer(e)}else r.reject(this.context.i18n.getText("i18n","archive_template_resources_read_error_msg"));return r.promise},onBeforeExportZip:function(e){var t=this,n=[];if(void 0!==e.params.zip.files){var r=e.params.zip.files["plugin.json"];if(void 0!==r){this._sProjectFolderPath=e.params.fullPath;var i=JSON.parse(r.asText());if(i.configures&&i.configures.services){var o=i.configures.services["template:templates"];if(o)for(var a=0;a<o.length;a++)n.push(t._createResourcesZipFileForTemplate(o[a]));return Q.all(n).then(function(n){for(var r=[],i=[],o=0;o<n.length;o++)n[o]&&(r.push(t._importResourcesZipFile(n[o])),i.push(n[o].blob));return Q.all(r).then(function(n){for(var r=[],o=0;o<n.length;o++){var a=i[o],s=n[o].getEntity().getName(),u=n[o].getEntity().getParentPath();u=u.substring(u.lastIndexOf("/")+1),r.push(t._loadResourcesDataToZipFile(a,e.params.zip,u+"/"+s))}return Q.all(r)})},function(e){throw t._printToConsoleLog("error",e.message),new Error(e)})}}}}}),define("sap.watt.ideplatform.plugindevelopment/service/Config",["sap/watt/common/plugin/platform/service/ui/AbstractConfig"],function(e){"use strict";return e.extend("sap.watt.ideplatform.plugindevelopment.service.Config",{_oContent:null,_oEmptyContent:null,_mSettings:null,_aDependenciesPlugins:null,_oDependencies:null,SEVERITY:{none:"None",lite:"Lite",medium:"Medium",full:"Full"},getProjectSettingContent:function(e,t,n){var r=this;return this._aDependenciesPlugins=[],n?r._checkIfRootProjectHasPlugins(n).then(function(e){return e?r._readPluginDevelopmentSectionInProjectJson(n).then(function(e){return r.context.service.filesystem.documentProvider.getDocument(n).then(function(t){return r.oProjectDocument=t,r._mSettings=e,r._mSettings||(r._mSettings={},r._mSettings.dependencies={all:[]},r._mSettings.devUrlParameters={"sap-ide-debug":"",debugAsync:""}),r._oDependencies=r._mSettings.dependencies,r._oDependencies&&r._oDependencies.all&&(r._aDependenciesPlugins=r._mSettings.dependencies.all),r._oContent||(r._oContent=r._createUI()),r._updateUIControls(),r.oDependenciesTable.addDelegate({onAfterRendering:function(){jQuery("#"+r.oDependenciesTable.getId()+"-vsb-sb").scrollTop(0)}}),r._updatePluginsTable().then(function(){return r._updateArrayOfDependenciesPlugins(),r._oContent})})}):(r._oEmptyContent||(r._oEmptyContent=r._createEmptyForm()),r._oEmptyContent)}):null},_updateArrayOfDependenciesPlugins:function(){for(var e,t=!1,n=this.oDependenciesTable.getModel().getData().modelData,r=0;r<this._aDependenciesPlugins.length;){var i=this._aDependenciesPlugins[r];for(e=0;e<n.length;e++)if(n[e].PluginPath===i){t=!0;break}t?r++:this._aDependenciesPlugins.splice(r,1),t=!1}},_checkIfRootProjectHasPlugins:function(e){var t,n=e,r=e.indexOf("/",1);return r>-1&&(n=e.substring(0,r)),this.context.service.filesystem.documentProvider.getDocument(n).then(function(e){return e?e.getCurrentMetadata(!0).then(function(e){for(t=0;t<e.length;t++){var n=e[t];if(!n.folder&&"plugin.json"===n.name)return!0}return!1}):!1})},_createEmptyForm:function(){return new sap.ui.layout.form.Form("emptyForm",{layout:new sap.ui.layout.form.GridLayout,formContainers:[new sap.ui.layout.form.FormContainer({formElements:[new sap.ui.layout.form.FormElement({fields:[new sap.ui.commons.Label({text:"The current project is not an SAP Web IDE plugin project."})]})]})]}).addStyleClass("beautifierSetting_form")},_readPluginDevelopmentSectionInProjectJson:function(e){var t=this;return this.context.service.filesystem.documentProvider.getDocument(e).then(function(e){return t.context.service.setting.project.get(t.context.service.plugindevelopment,e)})},saveProjectSetting:function(){var e={};if(this.oDebugAsyncDropDown)var t=this.oDebugAsyncDropDown.getValue();e.devUrlParameters={"sap-ide-debug":""},e.dependencies={},this.oSapIdeDebugCheckBox&&(e.devUrlParameters["sap-ide-debug"]=this.oSapIdeDebugCheckBox.getChecked()),t!==this.SEVERITY.none&&(e.devUrlParameters.debugAsync=t),this._oDependencies&&(e.dependencies=this._oDependencies),e.dependencies.all=this._aDependenciesPlugins,this.context.service.setting.project.set(this.context.service.plugindevelopment,e,this.oProjectDocument).done()},_getWorkspaceMetadataContent:function(){return this.context.service.filesystem.documentProvider.getRoot().then(function(e){var t=[],n=[];if(e)return e.getFolderContent().then(function(e){if(e)for(var r=0;r<e.length;r++){var i=e[r];n.push(i.getCurrentMetadata(!0))}return Q.all(n).then(function(e){for(var n=0;n<e.length;n++)t.concat(e[n]);return t})});throw new Error("The root object has not been retrieved.")})},_updatePluginsTable:function(){var e,t,n=[],r=[],i=this;return this._getWorkspaceMetadataContent().then(function(o){for(e=0;e<o.length;e++){var a=o[e];a.folder||"plugin.json"!==a.name||n.push(a.path)}for(e=0;e<n.length;e++)for(t=0;t<n[e].length;t++){var s=n[e][t],u=s.substring(1,s.length),c=i._getPluginName(u),l=i._isDependentPlugin(u),p={PluginName:c,PluginPath:u,checked:l};r.push(p)}var f=new sap.ui.model.json.JSONModel;f.setData({modelData:r}),i.oDependenciesTable.setModel(f),i.oDependenciesTable.bindRows("/modelData")})},_getPluginName:function(e){var t=e.lastIndexOf("/"),n=e;return t>-1&&(n=e.substring(t+1,e.length)),n},_isDependentPlugin:function(e){if(void 0!==this._aDependenciesPlugins&&this._aDependenciesPlugins.length>0){var t=this._aDependenciesPlugins.indexOf(e);if(t>-1)return!0}return!1},_getPluginProjectsInFolder:function(e){return this.context.service.filesystem.documentProvider.getDocument(e).then(function(e){var t=[];return e.getEntity().isFolder()?e.getCurrentMetadata(!0).then(function(e){for(var n=0;n<e.length;n++){var r=e[n];r.folder||"plugin.json"!==r.name||t.push(r.parentPath)}return t}):t})},_updateUIControls:function(){var e=this._mSettings.devUrlParameters,t=!1,n=this.SEVERITY.none;if(e){var r=e["sap-ide-debug"];r&&(r===!0||"true"===r)&&(t=!0);var i=e.debugAsync;i&&(n=i===this.SEVERITY.lite||i===this.SEVERITY.medium||i===this.SEVERITY.full?i:this.SEVERITY.lite)}this.oSapIdeDebugCheckBox.setChecked(t),this.oDebugAsyncDropDown.setValue(n)},_onCheckBoxChange:function(e){var t=e.getSource(),n=t.getBindingContext().getObject(),r=n.PluginPath;if(t.getChecked())this._aDependenciesPlugins.push(r);else{var i=this._aDependenciesPlugins.indexOf(r);i>-1&&this._aDependenciesPlugins.splice(i,1)}},_createUI:function(){var e=new sap.ui.layout.form.Form("pluginDevelopmentSettings",{layout:new sap.ui.layout.form.GridLayout});e.addStyleClass("beautifierSetting_form");var t=new sap.ui.layout.form.FormContainer("configureUrlParameters",{title:new sap.ui.core.Title({text:this.context.i18n.getText("i18n","projectSettings_ConfigureURLParametersTableTitle"),tooltip:this.context.i18n.getText("i18n","projectSettings_ConfigureURLParametersTableToolTip")}),layoutData:new sap.ui.core.VariantLayoutData({multipleLayoutData:[new sap.ui.layout.GridData({span:"L12 M12 S12"})]})}),n=new sap.ui.layout.form.FormElement;this.oSapIdeDebugCheckBox=new sap.ui.commons.CheckBox({layoutData:new sap.ui.layout.form.GridElementData({hCells:"8"})}),this.oSapIdeDebugCheckBox.setText(this.context.i18n.getText("i18n","projectSettings_SapIdeDebugTitle")),n.addField(this.oSapIdeDebugCheckBox),t.addFormElement(n);var r=new sap.ui.commons.Label({text:this.context.i18n.getText("i18n","projectSettings_SapIdeDebugDes"),tooltip:this.context.i18n.getText("i18n","projectSettings_SapIdeDebugDes")}).addStyleClass("descriptionLabels");n=new sap.ui.layout.form.FormElement,n.addField(r),t.addFormElement(n),this.oDebugAsyncDropDown=new sap.ui.commons.DropdownBox({items:[new sap.ui.core.ListItem({text:this.SEVERITY.none}),new sap.ui.core.ListItem({text:this.SEVERITY.lite}),new sap.ui.core.ListItem({text:this.SEVERITY.medium}),new sap.ui.core.ListItem({text:this.SEVERITY.full})],layoutData:new sap.ui.layout.form.GridElementData({hCells:"4"})});var i=new sap.ui.commons.Label({labelFor:this.oDebugAsyncDropDown,layoutData:new sap.ui.layout.form.GridElementData({hCells:"6"})});i.setText(this.context.i18n.getText("i18n","projectSettings_DebugAsyncTitle")),n=new sap.ui.layout.form.FormElement,n.addField(i),n.addField(this.oDebugAsyncDropDown),t.addFormElement(n);var o=new sap.ui.commons.Label({text:this.context.i18n.getText("i18n","projectSettings_DebugAsyncDes"),tooltip:this.context.i18n.getText("i18n","projectSettings_DebugAsyncDes")}).addStyleClass("descriptionLabels");n=new sap.ui.layout.form.FormElement,n.addField(o),t.addFormElement(n);var a=new sap.ui.layout.form.FormContainer("selectPlugins",{title:new sap.ui.core.Title({text:this.context.i18n.getText("i18n","projectSettings_SelectPluginsTableTitle"),tooltip:this.context.i18n.getText("i18n","projectSettings_SelectPluginsTableToolTip")}),layoutData:new sap.ui.core.VariantLayoutData({multipleLayoutData:[new sap.ui.layout.GridData({span:"L12 M12 S12"})]})});this.oDependenciesTable=new sap.ui.table.Table({selectionMode:sap.ui.table.SelectionMode.None,visibleRowCount:6}),this.oDependenciesTable.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:this.context.i18n.getText("i18n","projectSettings_SelectPluginsTable_SelectColumn")}),template:new sap.ui.commons.CheckBox({change:[this._onCheckBoxChange,this]}).bindProperty("checked","checked"),width:"80px",hAlign:"Left"})),this.oDependenciesTable.addColumn(new sap.ui.table.Column({width:"220px",label:new sap.ui.commons.Label({text:this.context.i18n.getText("i18n","projectSettings_SelectPluginsTable_PluginNameColumn")}),template:(new sap.ui.commons.TextView).bindProperty("text","PluginName")})),this.oDependenciesTable.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:this.context.i18n.getText("i18n","projectSettings_SelectPluginsTable_PluginPathColumn")}),template:(new sap.ui.commons.TextView).bindProperty("text","PluginPath")})),n=new sap.ui.layout.form.FormElement,n.addField(this.oDependenciesTable),a.addFormElement(n);var s=new sap.ui.commons.Label({text:this.context.i18n.getText("i18n","projectSettings_SelectPluginsTableDes"),tooltip:this.context.i18n.getText("i18n","projectSettings_SelectPluginsTableDes")}).addStyleClass("descriptionLabels");return n=new sap.ui.layout.form.FormElement,n.addField(s),a.addFormElement(n),e.addFormContainer(t),e.addFormContainer(a),e}})}),define("sap.watt.ideplatform.orion.orionbackend/io/Request",[],function(){"use strict";var e={},t=void 0,n=new Q.sap.Queue;return e.DEFAULT_CONTENT_TYPE="application/json",e.getContentType=function(e){return"GET"===e?void 0:this.DEFAULT_CONTENT_TYPE},e.getData=function(t,n){return t===e.DEFAULT_CONTENT_TYPE?JSON.stringify(n):n},e.getUri=function(e,t){if(e&&-1!==e.indexOf(":"))for(var n in t){var r=new RegExp("(:"+n+")","gi");r.test(e)&&(e=e.replace(r,encodeURIComponent(t[n])),delete t[n])}return e},e.getDefaultHeader=function(){var e={headers:{"Orion-Version":"1.0","X-CSRF-Token":t?t:"Fetch"}};return e},e.getDefaultOptions=function(e,t,n){return jQuery.extend(!0,this.getDefaultHeader(),{type:e,contentType:t,data:this.getData(t,n),headers:{"Content-Type":t}})},e.resolveServerUrl=function(e){e=jQuery.sap.startsWith(e,"/")?e.substr(1):e;var t=URI(e).absoluteTo(sap.watt.getEnv("orion_server"));return t.toString()},e.send=function(e,n,r,i){var o=this;if(n=n||"GET",n=n.toUpperCase(),r=r||{},e=this.resolveServerUrl(this.getUri(e,i)),r.success||r.error)throw new Error("Success and error handler are not allowed in mOptions");var a=r.headers&&r.headers["Content-Type"]?r.headers["Content-Type"]:this.getContentType(n);return r=jQuery.extend(!0,this.getDefaultOptions(n,a,i),r),Q.sap.ajax(e,r).spread(function(e,n){return t||(t=n.getResponseHeader("X-CSRF-Token")),o._checkForSessionLoss(n),e}).fail(function(t){return o._handleCsrfFail(t,e,o,r,i)})},e.sendMultipart=function(e,n,r,i){var o=this;if(n=n||"GET",n=n.toUpperCase(),r=r||{},e=this.resolveServerUrl(this.getUri(e,i)),r.success||r.error)throw new Error("Success and error handler are not allowed in mOptions");var a=r.headers&&r.headers["Content-Type"]?r.headers["Content-Type"]:this.getContentType(n);return r=jQuery.extend(!0,this.getDefaultOptions(n,a,i),r),Q.sap.ajax(e,r).spread(function(e,n){t||(t=n.getResponseHeader("X-CSRF-Token")),o._checkForSessionLoss(n);var r=n.getResponseHeader("Content-Type");if(-1===r.indexOf("multipart/related"))throw new Error("Not a valid multipart response");var i="--"+r.substring(r.indexOf("boundary")+10,r.length-1);e=e.trim();var a=e.split(i);return a.splice(0,1),a.splice(a.length-1,1),a[1]=a[1].replace(/^[\r\n]+[\r\n]+$/g,"").trim(),a}).fail(function(t){return o._handleCsrfFail(t,e,o,r,i)})},e._handleCsrfFail=function(e,r,i,o){if(403===e.status)return n.next(function(){return t=void 0,Q.sap.ajax(r,i.getDefaultOptions("GET")).spread(function(e,n){return t||(t=n.getResponseHeader("X-CSRF-Token"),o.headers["X-CSRF-Token"]=t),Q.sap.ajax(r,o).spread(function(e,t){return i._checkForSessionLoss(t),e})}).fail(function(t){throw 400===t.status?e:t})});throw e},e.createXMLHttpRequest=function(e,t){var n=new XMLHttpRequest,r=this.resolveServerUrl(t);n.open(e,r.toString(),!0);var i=this.getDefaultHeader();for(var o in i.headers)n.setRequestHeader(o,i.headers[o]);return n},e.sendXMLHttpRequest=function(e,t){var n=Q.defer(),r=this;return e.onreadystatechange=function(){4===this.readyState&&(this.status<300&&this.status>=200?n.resolve(this.response):n.reject(r._getErrorFromOrionErrorResponse(this.response)))},e.send(t),n.promise},e._getErrorFromOrionErrorResponse=function(e){var t=null;try{if(0===e.indexOf("<html")){var n=$("<div></div>");n.html(e);var r=$("h1",n);r&&r.length>0&&(t=new Error(r[0].innerHTML))}else{var i=JSON.parse(e);t=new Error(i.Message),t.status=i.HttpCode}}catch(o){t=new Error(e)}return t},e._checkForSessionLoss=function(e){if("login-request"==e.getResponseHeader("com.sap.cloud.security.login"))throw new Error("SESSION_GONE")},e}),define("sap.watt.ideplatform.orion.orionbackend/dao/CodeValidator",["../io/Request"],function(e){"use strict";var t={validateWorkspaceContent:function(t,n,r){var i={headers:{"Content-Type":"application/json"}};return e.send("validateWorkspaceContent","POST",i,{type:"workspace",workspaceId:t,configuration:n,projects:r})}};return t}),define("sap.watt.ideplatform.orion.orionbackend/dao/File",["../io/Request"],function(e){"use strict";var t={_io:e,_orionVersion:null,connect:function(e,t){var n=this;return sap.watt.getEnv("orion_needs_login")?this._login(e,t).fail(function(r){if(401==r.status&&sap.watt.getEnv("orion_create_user")){var i={UserName:encodeURI(e),Password:encodeURI(t),FullName:encodeURI(e)};return n._io.send("/users?"+n._getUserParam(e)+"&password="+encodeURI(t),"POST",{},i).then(function(){return n._login(e,t)})}throw r}).then(function(e){return n.user=e,n.user||(n.user={Name:"orionode"}),n.user}):Q()},_getUserParam:function(e){var t=encodeURI(e);return"username="+t+"&login="+t},_login:function(e,t){return this._io.send("/login/form?"+this._getUserParam(e)+"&password="+encodeURI(t),"POST",{timeout:5e3})},logout:function(){return this._io.send("logout","POST")},fetchChildren:function(e){return this._io.send(e)},createWorkspace:function(e){var t=URI("workspace").absoluteTo(sap.watt.getEnv("orion_path")).toString();return this._io.send(t,"POST",{headers:{Slug:e}})},loadWorkspaces:function(){var e=URI("workspace").absoluteTo(sap.watt.getEnv("orion_path")).toString();return this._io.send(e)},loadWorkspace:function(e){return this._io.send(e)},createProject:function(){throw new Error("Not implemented")},createFolder:function(e,t){return this._io.send(e+"/","POST",{headers:{Slug:t,"X-Create-Options":"no-overwrite"}},{Name:t,Directory:!0})},createFile:function(e,t){return this._io.send(e+"/","POST",{headers:{Slug:t,"X-Create-Options":"no-overwrite"}},{Name:t,Directory:!1})},deleteFile:function(e){return this._io.send(e,"DELETE")},move:function(e,t,n){return this._io.send(t+"/","POST",{headers:{Slug:n,"X-Create-Options":"move"}},{Location:e})},copy:function(e,t,n,r){return this._io.send(t+"/","POST",{headers:{Slug:n,"X-Create-Options":"copy"+(r?"":",no-overwrite")}},{Location:e})},read:function(e,t,n,r){return t?this._io.send(e+"?parts=meta").then(function(e){return"string"===jQuery.type(e)&&(e=JSON.parse(e)),e}):r?this._io.sendMultipart(e+"?parts=meta,body","GET",{headers:{"Content-Type":"text/plain"},dataType:"text"}).then(function(e){var t=e[0].replace("Content-Type: application/json","").trim();return e[0]=JSON.parse(_.unescape(t)),e}):this._io.send(e,"GET",{headers:{"Content-Type":"text/plain"},dataType:"text",responseType:n?"blob":void 0})},doGetOrionVersion:function(){var e=this,t={};return t.DAOName="Orion",this._orionVersion?Q(this._orionVersion):this._io.send("/healthcheck","GET",{headers:{"Content-Type":"text/html"},dataType:"text"}).then(function(n){var r=n.substring(n.indexOf("Orion Server"));return t.version=r.substr("Orion Server".length+1,1),e._orionVersion=t,Q(e._orionVersion)}).fail(function(){return t.version=5,e._orionVersion=t,Q(e._orionVersion)})},write:function(e,t,n){var r={headers:{"Content-Type":"text/plain"}};return n&&(r=jQuery.extend(!0,r,{headers:{"If-Match":n}})),this._io.send(e,"PUT",r,t)},remoteImport:function(){throw new Error("Not implemented")},remoteExport:function(){throw new Error("Not implemented")},search:function(e,t){var n=Q.defer();return this._io.send(e+t,"GET").then(function(e){n.resolve(JSON.parse(_.unescape(e)))},function(e){n.reject(e)}),n.promise}};return t}),define("sap.watt.ideplatform.orion.orionbackend/service/orionCodeValidationDAO",["../dao/CodeValidator","../dao/File"],function(e,t){"use strict";function n(){var e={maxRetries:s,timeout:a,retryCount:0};return e}function r(e,t,n){return{result:e,integrity:{status:t,info:n}}}function i(e){return e&&e.Workspaces[0]&&!_.isUndefined(e.Workspaces[0].Id)&&!_.isUndefined(e.Workspaces[0].Id)?!0:!1}function o(n,a,l){var p=this;return t.loadWorkspaces().then(function(t){if(i(t)){var o=t.Workspaces[0].Id;if(o)return e.validateWorkspaceContent(o,n,a).then(function(e){return p.context.service.usagemonitoring.report("ProblemsView","SuccessAfterRetries",l.retryCount).done(),r(e,c.OK)})}}).fail(function(e){if(p.context.service.usagemonitoring.report("ProblemsView","ServerResponse",e.status||"no status").done(),e.status&&e.status==u){if(p.context.service.usagemonitoring.report("ProblemsView","ServerResponse",u).done(),l.retryCount<l.maxRetries)return l.retryCount++,Q.delay(1e3*l.timeout).then(function(){return o.call(p,n,a,l)});p.context.service.usagemonitoring.report("ProblemsView","RejectedAfterMaxRetries",s).done()}return p.context.service.log.error(p.context.self.getProxyMetadata().getName(),e.message,["user"]).done(),r(void 0,c.ERROR,e.message)})}var a=5,s=10,u=429,c={OK:0,ERROR:1,PARTIAL_ERROR:2};return{codeValidationResponseStatus:function(){return _.clone(c)},validateWorkspaceContent:function(e,t){return o.call(this,e,t,n())}}}),define("sap.watt.ideplatform.orion.orionbackend/dao/Transfer",["../io/Request"],function(e){"use strict";var t={_io:e,exportFolder:function(e){var t=this._io.createXMLHttpRequest("GET",e+"?"+(new Date).getTime().toString());return t.responseType="arraybuffer",this._io.sendXMLHttpRequest(t)},importZip:function(e,t,n){e=n?e+"?force=true":e;var r=this._io.createXMLHttpRequest("POST",e);r.setRequestHeader("Content-Type","application/x-zip-compressed");var i=t.name?t.name:"blob.zip";return r.setRequestHeader("Slug",i),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),n&&r.setRequestHeader("X-Xfer-Options","overwrite-older"),this._io.sendXMLHttpRequest(r,t)},importFile:function(e,t,n){var r="",i=this._io.createXMLHttpRequest("POST",e),o=t.type?t.type:"text/plain";if(i.setRequestHeader("Content-Type",o),t instanceof File)r=t.name;else{if(!(t instanceof Blob))throw new Error("Unexpected Error");if("undefined"==typeof n||null==n)throw new Error("Unexpected Error");r=n}return i.setRequestHeader("Slug",r),i.setRequestHeader("X-Xfer-Options","raw,overwrite-older"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),this._io.sendXMLHttpRequest(i,t)}};return t}),define("sap.watt.ideplatform.orion.orionbackend/util/PathMapping",[],function(){"use strict";return{workspace:{}}}),define("sap/watt/ideplatform/backend/util/MetadataManager",["sap/watt/lib/lodash/lodash"],function(e){var t={_oMetadataStorage:{},_getProjectPath:function(t){if(e.startsWith(t,"/")){var n=t.indexOf("/",1);return-1===n?t:t.substr(0,n)}return""===t?t:void 0},_getProjectMetadataStorage:function(e){return this._oMetadataStorage[e]},hasChildren:function(t){var n=this._getProjectPath(t);if(n){var r=this._getProjectMetadataStorage(n);if(r)for(var i=t+"/",o=e.keys(r),a=0;a<o.length;a++){var s=o[a];if(0===s.indexOf(i))return!0}}return!1},deleteMetadata:function(t,n){n=n===!0;var r=this._getProjectPath(t);if(r){if(r===t)return delete this._oMetadataStorage[r],void 0;var i=this._getProjectMetadataStorage(r);if(i&&(delete i[t],n))for(var o=t+"/",a=e.keys(i),s=0;s<a.length;s++){var u=a[s];0===u.indexOf(o)&&delete i[u]}}},getMetadata:function(t,n,r){n=n===!0,r=r===!0;var i=this._getProjectPath(t);if(""===i)return this._getRootProjectsMetadata();if(i){var o=this._getProjectMetadataStorage(i);if(o){if(n){for(var a=t+"/",s={},u=e.keys(o),c=0;c<u.length;c++){var l=u[c];0===l.indexOf(a)&&(r===!0&&-1===l.replace(a,"").indexOf("/")?s[l]=o[l]:r===!1&&(s[l]=o[l]))}return s}return o[t]}}},_getRootProjectsMetadata:function(){for(var e=Object.keys(this._oMetadataStorage),t={},n=0;n<e.length;n++){var r=e[n];t[r]=this.getMetadata(r)}return t},setMetadata:function(t){if(e.isObject(t)){var n=e.keys(t);if(e.isEmpty(n))return;var r=this._getProjectPath(n[0]);if(r){var i=this._getProjectMetadataStorage(r);void 0===i&&(i={}),i=$.extend(i,t),this._oMetadataStorage[r]=i}}}};return t}),define("sap.watt.ideplatform.orion.orionbackend/service/OrionFileDAO",["../dao/File","../dao/Transfer","sap.watt.common.filesystem/document/FileFolderEntity","../util/PathMapping","sap/watt/lib/lodash/lodash","sap/watt/ideplatform/backend/util/MetadataManager"],function(e,t,n,r,i,o){"use strict";return{_bWorkspaceCached:!1,_oOnLoadRootProjectCached:{},ERROR_FILE_ALREADY_EXISTS:"ERROR_FILE_ALREADY_EXISTS",ERROR_FOLDER_ALREADY_EXISTS:"ERROR_FOLDER_ALREADY_EXISTS",ERROR_INVALID_FILE_NAME:"ERROR_INVALID_FILE_NAME",ERROR_INVALID_FOLDER_NAME:"ERROR_INVALID_FOLDER_NAME",ERROR_INVALID_FILE_OR_FOLDER_NAME:"ERROR_INVALID_FILE_OR_FOLDER_NAME",ERROR_INVALID_PATH_NAME:"ERROR_INVALID_PATH_NAME",ERROR_NO_EXPORT_LOCATION:"ERROR_NO_EXPORT_LOCATION",ERROR_DEST_NOT_ALLOWED:"ERROR_DEST_NOT_ALLOWED",ERROR_FILE_ALREADY_MODIFIED:"ERROR_FILE_ALREADY_MODIFIED",_mWorkspace:r.workspace,_oLastSearch:{searchTermLocation:"",result:null,preFetchedFiles:{aFileEntries:[],numFound:0,start:0}},_oDao:e,_oTransfer:t,init:function(){this.ERROR_FILE_ALREADY_EXISTS=this.context.i18n.getText("i18n","orionFileDAO_errorFileAlreadyExists"),this.ERROR_FOLDER_ALREADY_EXISTS=this.context.i18n.getText("i18n","orionFileDAO__errorFolderAlreadyExists"),this.ERROR_INVALID_FILE_NAME=this.context.i18n.getText("i18n","orionFileDAO_errorInvalidFileOrFolderName"),this.ERROR_INVALID_FOLDER_NAME=this.context.i18n.getText("i18n","orionFileDAO_errorInvalidFileOrFolderName"),this.ERROR_INVALID_FILE_OR_FOLDER_NAME=this.context.i18n.getText("i18n","orionFileDAO_errorInvalidFileOrFolderName"),this.ERROR_INVALID_PATH_NAME=this.context.i18n.getText("i18n","orionFileDAO_errorInvalidPathName"),this.ERROR_NO_EXPORT_LOCATION=this.context.i18n.getText("i18n","orionFileDAO_errorNoExportLocation"),this.ERROR_DEST_NOT_ALLOWED=this.context.i18n.getText("i18n","orionFileDAO_errorDestinationNotAllowed"),this.ERROR_FILE_ALREADY_MODIFIED=this.context.i18n.getText("i18n","orionFileDAO_errorFileAlreadyModified")
},convertToProject:function(){return Q.reject("convertToProject is not supported in Orion")},updateProject:function(){return Q.reject("updateProject is not supported in Orion")},_createEntity:function(e,t){return new n(e,t.sName,t.sPath)},getRoot:function(){var e={location:this._mWorkspace.location,childLocation:this._mWorkspace.childLocation},t=this._createEntity("folder",{sName:"",sPath:""});return t.setBackendData(e),this.context.service.document.getDocument(t)},createFile:function(e,t){if(t=t.trim(),!this._checkFileFolderNameAllowed(t))return Q.reject(new Error(this.ERROR_INVALID_FILE_NAME));var n=e.getEntity().getBackendData().location,r=this;return this._oDao.createFile(n,t).then(function(t){return r._createFileFolderDocument(e,t)},function(e){throw r._checkFileFolderCreationError_FileFolderAlreadyExists(e)?new Error(r.ERROR_FILE_ALREADY_EXISTS):new Error(e.message)})},createFolder:function(e,t){if(t=t.trim(),!this._checkFileFolderNameAllowed(t))return Q.reject(new Error(this.ERROR_INVALID_FOLDER_NAME));var n=e.getEntity().getBackendData().location,r=e.getEntity().isRoot(),i=this;return this._oDao.createFolder(n,t).then(function(e){var t=e.ContentLocation?e.ContentLocation:e.Location;return t=t.replace("/workspace",""),i._oDao.read(t,!0)}).then(function(t){return i._createFileFolderDocument(e,t)},function(e){throw i._checkFileFolderCreationError_FileFolderAlreadyExists(e,r)?new Error(i.ERROR_FOLDER_ALREADY_EXISTS):new Error(e.message)})},createProject:function(e,t){var n=this;if(e.getEntity().isRoot())return this.createFolder(e,t.name).then(function(e){var r=[];t.attributes=t.attributes||{};for(var i=Object.keys(t.attributes),o=i.length,a=0;o>a;a++){var s=i[a],u=t.attributes[s];r.push(n.context.service.setting.project.setProjectSettings(s,u,e))}return t.additionalTypes=t.additionalTypes||[],t.type&&t.additionalTypes.push(t.type),t.additionalTypes.length>0&&r.push(n.context.service.projectType.setProjectTypes(e,t.additionalTypes)),Q.all(r).then(function(){return e})});throw new Error("Orion does not support nested projects")},copyObject:function(e,t,n,r){var i=e.getEntity().getName(),o=e.getEntity().getBackendData().location,a=t.getEntity().getBackendData().location,s=this;return 0===a.indexOf(o)?Q.reject(new Error(this.ERROR_DEST_NOT_ALLOWED)):(n||(n=i),n=n.trim(),this._checkFileFolderNameAllowed(n)?this._oDao.copy(o,a,n,r).then(function(e){return s._createFileFolderDocument(t,e)},function(e){throw s._checkFileFolderCreationError_FileFolderAlreadyExists(e)?new Error(s.ERROR_FOLDER_ALREADY_EXISTS):new Error(e.message)}):Q.reject(new Error(this.ERROR_INVALID_FILE_OR_FOLDER_NAME)))},onLogIn:function(){var e=this,t=this._mWorkspace.childLocation;this._oDao.fetchChildren(t).then(function(t){for(var n=t.Children,r=[],i=n.length,o=0;i>o;o++){var a=n[o];r.push(e._cacheProject(a))}return Q.all(r).then(function(){e._bWorkspaceCached=!0})}).done()},_cacheProject:function(e){var t=this;return this._fetchChildren("/"+e.Id,e.ChildrenLocation.replace("depth=1","depth=1000"),!0,!0).then(function(){t._oOnLoadRootProjectCached["/"+e.Id]=!0})},load:function(e){if(!e.getEntity().isFile())throw new Error("Unsupported operation. Can't load "+e.getType());var t=this;return e.isBinary().then(function(n){return n?Q.all([t.readFileContent(e),t.readFileMetadata(e)]).spread(function(e,t){return{mContent:e,sETag:t.sETag}}):t.readFileMetaAndContent(e).then(function(e){return{mContent:e.content,sETag:e.metadata.sETag}})})},save:function(e){if(!e.getEntity().isFile())throw new Error("Unsupported operation. Can't load "+e.getType());return this.writeFileContent(e).then(function(e){return e.sETag})},deleteFile:function(e){var t=e.getEntity();return this._oDao.deleteFile(t.getBackendData().location).then(function(){return o.deleteMetadata(t.getFullPath()),null})},deleteFolder:function(e){var t=this._getLocation(e);return this._oDao.deleteFile(t).then(function(){return o.deleteMetadata(e.getEntity().getFullPath(),!0),{}})},exportZip:function(e){var t=this;return this._getExportLocation(e).then(function(e){return e?t._oTransfer.exportFolder(e).then(function(e){var n=t._removeFromZip(e,[".git",".gitignore","mock_preview_sapui5.html","visual_ext_index.html","preview_hidden.html","sap-ui-cachebuster-info.json","UIAdaptation_index.html","changes_preview_index.html"]);return n}):Q.reject(new Error(t.ERROR_NO_EXPORT_LOCATION))})},_getOrionRawNode:function(e){if(this._isMetadataCached(e))return Q(o.getMetadata(e));var t=this._mWorkspace.location,n=this._correctLocation(t)+e;return this._oDao.read(n,!0)},getDocument:function(e,t,n){if(n)return null;if(""===e)return this.getRoot();if(!this._checkPathNameAllowed(e))return Q.reject(new Error(this.ERROR_INVALID_PATH_NAME+": >"+e+"<"));var r=this;return this._getOrionRawNode(e).then(function(t){if(!t)return null;var n=i.clone(e),o=n.lastIndexOf("/");return o===n.length-1&&(n=n.substring(0,o),o=n.lastIndexOf("/")),n=n.substring(0,o),r._createFileFolderDocument(n,t)},function(e){if(404===e.status)return Q(null);throw new Error(e.message)})},getVersions:function(){return[]},getVersion:function(){return null},search:function(e){var t=e.sFolderName,n=e.oFolderDocument,r=e.sFileType,i=e.bContentSearch,o=e.sSearchTerm,a=e.nStart,s=e.nRows,u="";if(i?(o=encodeURIComponent(this._escapeSpecialCharacters(o)),r&&(o=o+"+NameLower:"+r)):(o="NameLower:*"+o,o+=r?r:"*"),t){var c=this._mWorkspace.location,l=this._correctLocation(c)+t;o=o+"+Location:"+l+"*"}else n&&(o=o+"+Location:"+n.getEntity().getBackendData().location+"*");u=o,o+="&rows=300";var p=this;return p._oLastSearch.searchTermLocation===u&&a>0?p._handleSearchResult(p._oLastSearch.result,a,s):(p._oLastSearch.searchTermLocation=u,this._oDao.search(this._mWorkspace.searchLocation,o).then(function(e){return p._oLastSearch.result=e,p._handleSearchResult(e,a,s)},function(e){throw e.responseText&&-1!==e.responseText.indexOf("Unclosed group")?new Error(p.context.i18n.getText("i18n","searchExpressionError")):new Error(e.errorThrown)}))},_handleSearchResult:function(e,t,n){function r(e,r){var i=this;e.length>0&&Q.all(e).then(function(e){i._oLastSearch.preFetchedFiles={aFileEntries:e,numFound:r?r:i._oLastSearch.preFetchedFiles.numFound,start:t+n}})}var i=this,o={aFileEntries:[],numFound:e.response.numFound,start:e.response.start},a=0===t?0:t+i._oLastSearch.preFetchedFiles.aFileEntries.length,s=e.response.docs.length-a,u=0===t?2*n:n,c=a+(u>s?s:u);0===t&&(i._oLastSearch.preFetchedFiles={aFileEntries:[],numFound:0,start:0});for(var l=a;c>l;l++){var p="/"+e.response.docs[l].Path.substring(0,e.response.docs[l].Path.lastIndexOf("/")),f=this._createFileFolderDocument(p,e.response.docs[l]);o.aFileEntries.push(f)}if(i._oLastSearch.preFetchedFiles.aFileEntries.length>0&&i._oLastSearch.preFetchedFiles.start===t)return r.call(i,o.aFileEntries),i._oLastSearch.preFetchedFiles;var d=u>n?o.aFileEntries.splice(n,u-n):[];return r.call(i,d,e.response.numFound),Q.all(o.aFileEntries).then(function(e){return o.aFileEntries=e,Q(o)})},_getChildrenLocation:function(e,t){t=t===!0;var n=e.getBackendData().childLocation;if(e.isRoot()&&t)throw new Error("Cannot get the root folder children recursively");return e.isRoot()&&!t||(t&&!e.isRoot()?n=n.replace("depth=1","depth=1000"):t||e.isRoot()||(n=n.replace("depth=1","depth=2"))),n},getCurrentMetadata:function(e,t,n,r){var o=this,a=e.getEntity(),s=this._getChildrenLocation(a,t);return this._fetchChildren(a.getFullPath(),s,t,n).then(function(e){for(var t=[],n=i.keys(e),a=n.length,s=0;a>s;s++){var u=n[s],c=e[u];t.push({name:c.Name,path:u,changedOn:c.LocalTimeStamp||c.LastModified,folder:c.Directory,parentPath:u.substr(0,u.lastIndexOf("/")||0)})}return o.context.service.filefilter.filterMetadata(t,r)})},_getFolderContent:function(e,t){t=t===!0;var n=this,r=e.getEntity(),i=this._getChildrenLocation(r,!1);return this._fetchChildren(r.getFullPath(),i,!1,t).then(function(e){return Q.all(n._mapOrionChildren2DocumentPromisesArray(e))})},getFolderContent:function(e,t){return this._getFolderContent(e,t)},_fetchChildren:function(e,t,n,r){return r===!0?this._fetchAndSaveRawBackendNodes(e,t,n):this._isMetadataCached(e)?Q(o.getMetadata(e,!0,!n)):this._fetchAndSaveRawBackendNodes(e,t,n)},_isMetadataCached:function(e){if(this._bWorkspaceCached)return!0;if(""!==e){var t=e.indexOf("/",1),n=-1===t?e:e.substr(0,t);return this._oOnLoadRootProjectCached[n]}return!1},_fetchAndSaveRawBackendNodes:function(e,t,n){var r=this;return this._oDao.fetchChildren(t).then(function(t){r._isMetadataCached(e)&&n&&o.deleteMetadata(e,!0);var i={};i[e]=t,o.setMetadata(i);var a=r._saveRawBackendNodes(t.Children,n);return o.setMetadata(a),a})},_saveRawBackendNodes:function(e,t){for(var n=this,r={},i=this._mWorkspace.location.lastIndexOf("/"),o=this._mWorkspace.location.substr(i),a=e.length,s=0;a>s;s++){var u=e[s],c=u.Location.indexOf(o)+o.length,l=u.Location.substr(c);u.Directory&&""!==l&&(l=l.substring(0,l.length-1)),r[l]=u,u.Directory&&t&&(r=$.extend(r,n._saveRawBackendNodes(u.Children||[],t)))}return r},importFile:function(e,t,n,r,i){var a=this,s=e.getEntity(),u=s.getBackendData(),c=s.getFullPath();return n&&t.type&&-1!==t.type.search("zip")?this.importZip(e,t,r):this._oTransfer.importFile(u.importLocation,t,i).then(function(){return a._oDao.read(u.childLocation,!1).then(function(e){"string"===jQuery.type(e)&&(e=JSON.parse(e));var n=a._saveRawBackendNodes(e.Children,!1);n[c]=e,o.setMetadata(n);var r=t.name||i,s=o.getMetadata(c+"/"+r);return a._createFileFolderDocument(c,s)})})},importZip:function(e,t,n){var r=e.getEntity().getBackendData().importLocation;return this._oTransfer.importZip(r,t,n)},objectExists:function(e,t){if(null===e)return Q(!1);var n=new URI(t);if(""!==n.directory()){if(!this._checkPathNameAllowed("/"+t))return Q.reject(new Error(this.ERROR_INVALID_PATH_NAME+": >"+t+"<"))}else if(!this._checkFileFolderNameAllowed(t))return Q.reject(new Error(this.ERROR_INVALID_FILE_OR_FOLDER_NAME));var r=e.getEntity(),a=r.getFullPath();if(this._isMetadataCached(a)){var s=o.getMetadata(a,!0),u=i.keys(s),c=i.findIndex(u,function(e){var n=e.indexOf(t);if(-1!==n){var r=e.substring(n);return r===t}return!1});return-1===c?Q(!1):Q(!0)}var l=this._correctLocation(r.getBackendData().location),p=l+"/"+t;return this._oDao.read(p,!0).then(function(){return Q(!0)},function(e){if(404===e.status)return Q(!1);throw new Error(e.message)})},moveObject:function(e,t,n){if(n=n.trim(),!this._checkFileFolderNameAllowed(n))return Q.reject(new Error(this.ERROR_INVALID_FILE_OR_FOLDER_NAME));var r=this,i=t.getEntity().getBackendData().location,a=this._getLocation(e);return this._oDao.move(a,i,n).then(function(n){return o.deleteMetadata(e.getEntity().getFullPath(),!0),r._createFileFolderDocument(t,n)})},readFileContent:function(e){var t=e.getEntity(),n=t.getFullPath(),r=o.getMetadata(n);if(this._isMetadataCached(n)&&!r)return Q(void 0);var i=t.getBackendData().location,a=this;return e.isBinary().then(function(e){return a._oDao.read(i,!1,e)}).then(function(e){return e})},readFileMetadata:function(e){var t=this,n=e.getEntity(),r=n.getFullPath(),i=o.getMetadata(r);if(this._isMetadataCached(r)&&!i)return Q(void 0);var a=n.getBackendData().location;return this._oDao.read(a,!0).then(function(e){return t._createFileFolderDocument(n.getParentPath(),e).then(function(){var t={};return t.sETag=e.ETag,t})}).fail(function(){return null})},readFileMetaAndContent:function(e){var t=this,n=e.getEntity(),r=n.getFullPath(),i=o.getMetadata(r);if(this._isMetadataCached(r)&&!i)return Q(void 0);var a=n.getBackendData().location;return this._oDao.read(a,!1,!1,!0).then(function(e){var r=e[0],i=e[1];return t._createFileFolderDocument(n.getParentPath(),r).then(function(){var e={metadata:{sETag:r.ETag},content:i};return e})})},writeFileContent:function(e){var t=this,n=e.getEntity();return Q.spread([e.getContent(),e.isBinary()],function(r,i){if(i)throw new Error("Unsupported: Orion API does not support writing binary content");return t._oDao.write(n.getBackendData().location,r,e.getETag(),i).then(function(r){return"string"===jQuery.type(r)&&(r=JSON.parse(r)),t._createFileFolderDocument(n.getParentPath(),r).then(function(t){var n=t.getDocumentMetadata();return e.setDocumentMetadata(n),{sETag:r.ETag,mMetadata:n}})})}).fail(function(e){if(412===e.status)throw new Error(t.ERROR_FILE_ALREADY_MODIFIED);throw new Error(e.message)})},_correctLocation:function(e){var t=e.indexOf("/workspace/");return e==this._mWorkspace.location&&t>-1?e.substring(0,t)+"/file/"+e.substring(t+"/workspace/".length):e},_checkFileFolderCreationError_FileFolderAlreadyExists:function(e,t){return t&&e&&e.responseJSON&&400===e.responseJSON.HttpCode&&0===e.responseJSON.Message.indexOf("Duplicate project name:")?!0:!t&&e&&e.responseJSON&&412===e.responseJSON.HttpCode&&"A file or folder with the same name already exists at this location"===e.responseJSON.Message?!0:!1},getProjectTypes:function(){throw new Error("Orion does not support project type")},_checkFileFolderNameAllowed:function(e){var t=/^[a-zA-Z0-9\.\-_@]*[a-zA-Z0-9\-_@]+$/,n=t.exec(e);return!!n},_checkPathNameAllowed:function(e){var t=/^(\/[a-zA-Z0-9\.\-_@]*[a-zA-Z0-9\-_@]+)*$/,n=t.exec(e);return!!n},_createFileFolderDocument:function(e,t){var n=this,r=this._createMetadataFromOrionResult(e,t),i=r.entity,a={},s=i.getFullPath();return a[s]=t,o.setMetadata(a),this.context.service.document.getDocument(i).then(function(e){n._isMetadataCached(s)&&(r.metadata.hasChildren=o.hasChildren(s));var t=e.getDocumentMetadata(),i=$.extend({},t,r.metadata);return e.setDocumentMetadata(i),t.hasChildren!==i.hasChildren?e._oEventEmitter.fireChanged({document:e,changeType:"children"}).thenResolve(e):e})},_createMetadataFromOrionResult:function(e,t){var n,r,i;if(t.Directory){var o;r={location:t.Location,childLocation:t.ChildrenLocation,projectLocation:o,exportLocation:t.ExportLocation,importLocation:t.ImportLocation,git:t.Git};var a;a=t.Children?t.Children&&t.Children.length>0?!0:!1:void 0,i={changedOn:t.LocalTimeStamp&&t.LocalTimeStamp.toString()||t.LastModified||"",hasChildren:a},n=this._createEntity("folder",{sName:t.Name,sPath:e})}else r={location:t.Location,git:t.Git},i={length:t.Length,changedOn:t.LocalTimeStamp&&t.LocalTimeStamp.toString()||t.LastModified||""},n=this._createEntity("file",{sName:t.Name,sPath:e});return n.setBackendData(r),{entity:n,metadata:i}},_getProjectLocation:function(e,t){var n;if(e)for(var r=0;r<e.length;r++)if(e[r].Id===t.Id||e[r].Id===t.Name)return n=e[r].Location;return n},_getLocation:function(e){var t=e.getEntity(),n=t.getBackendData().location;if(e.isProject()){var r="/"+t.getName()+"/";n=n.replace(r,"/project"+r).replace("/file/","/workspace/")}return n},_getExportLocation:function(e){var t=e.getEntity().getBackendData(),n=t.exportLocation;return n?Q(t.exportLocation):this._oDao.read(t.location,!0).then(function(e){return e.ExportLocation})},_mapOrionChildren2DocumentPromisesArray:function(e){for(var t=[],n=i.keys(e),r=0;r<n.length;r++){var o=n[r],a=e[o],s=o.lastIndexOf("/"),u=o.substr(0,s);t.push(this._createFileFolderDocument(u,a))}return t},_removeFromZip:function(e,t){return Q.sap.require("sap/watt/lib/jszip/jszip-shim").then(function(n){var r=new n;r.load(e);for(var i=0;i<t.length;i++)r.remove(t[i]);return r})},_contains:function(e,t,n){var r=null;r="folder"===t.getEntity().getType()?t.getEntity().getFullPath()+"/":t.getEntity().getFullPath();for(var i in e)if(n+"/"+i===r)return!0;return!1},_escapeSpecialCharacters:function(e,t){for(var n="",r='+-&|!(){}[]^"~:\\'+(t?"":"*?"),i=0;i<e.length;i++){var o=e.charAt(i);r.indexOf(o)>=0&&(n+="\\"),n+=o}return n}}}),define("sap.watt.ideplatform.orion.orionbackend/util/DiffParser",[],function(){var e={parse:function(e,t){for(var n="\n",r="",i=!1,o=e.split(n),a=0;a<o.length;a++)o[a].match("^<<<<<<<")?i=!t:"======="!==o[a]?o[a].match("^>>>>>>>")?i=!1:i||(r=r?r+n+o[a]:o[a]):i=!!t;return r}};return e}),define("sap.watt.ideplatform.orion.orionbackend/service/GitFileDAO",["sap.watt.common.filesystem/document/FileFolderEntity","../util/DiffParser"],function(e,t){return{_sDaoName:"gitFileDao",_mConflictsDoc:[],getDocument:function(t,n,r){if(n!==this._sDaoName)throw new Error("Wrong dao passed "+n);var i,o=t.split("::");return i=2===o.length&&"file"===o[1]?new e("file",o[0],null,n,r):new e("folder",t,null,n,r),this.context.service.document.getDocument(i).then(function(e){return e})},getVersion:function(t,n,r){if(r!==this._sDaoName)throw new Error("Wrong dao passed "+r);if("file"!==t.getType())return t;var i=this,o=new e("file",t.getEntity().getFullPath(),null,r,n);return this.context.service.document.getDocument(o).then(function(e){if(-1!==n.indexOf("CONFLICT")){var r=e.getEntity().getBackendData()||{};r.workspacedocument=t,e.getEntity().setBackendData(r);var o=t.getEntity().getBackendData().git.CloneLocation;i._mConflictsDoc[o]||(i._mConflictsDoc[o]={}),i._mConflictsDoc[o][e.getKeyString()]=e}return e})},load:function(e){if("file"!==e.getType())throw new Error("Unsupported operation. Can't load "+e.getType());var n=e.getEntity().getVersionId();return-1!==n.indexOf("CONFLICT")?e.getEntity().getBackendData().workspacedocument.getContent().then(function(e){var r="";return-1!==n.indexOf("NEW")?r=t.parse(e,!1):-1!==n.indexOf("OLD")&&(r=t.parse(e,!0)),{mContent:r,sETag:""}}):{mContent:"",sETag:""}},objectExists:function(){return!0},save:function(e){if("file"!==e.getType())throw new Error("Unsupported operation. Can't load "+e.getType());var t=e.getEntity().getVersionId(),n=e.getEntity().getBackendData().workspacedocument;return-1!==t.indexOf("CONFLICT_NEW")&&n?e.getContent().then(function(e){return n.setContent(e).then(function(){return n.save()})}):""},readFileMetadata:function(){return{sETag:""}},refresh:function(e){var t=e.params.CloneLocation;if(this._mConflictsDoc[t]){for(var n in this._mConflictsDoc[t])this._mConflictsDoc[t].hasOwnProperty(n)&&this._mConflictsDoc[t][n]._notifyAboutDeletion(null,this._mConflictsDoc[t][n]);this._mConflictsDoc[t]=null}},updateWorkspace:function(e){var t=this,n=this.context.service;return n.git.getRepositoryDetails(e.params).then(function(e){return n.filesystem.documentProvider.getDocument(URI("/"+e.Name).toString()).then(function(e){return t.context.event.fireExternalChanged({oDocument:e})})})}}}),define("sap.watt.ideplatform.orion.orionbackend/service/AbstractSystem",[],function(){"use strict";return{}}),define("sap.watt.ideplatform.orion.orionbackend/service/System",["./AbstractSystem","../dao/File","../util/PathMapping","../io/Request"],function(e,t,n,r){"use strict";var i=jQuery.extend(e,{_mWorkspace:n.workspace,_oDao:t,_ensureLogin:null,_mUser:{sName:null,sAccount:null,sEMail:null,sFirstName:null,sLastName:null},logout:function(){var e=this;return this._logout().then(function(t){e._ensureLogin=null;var n="logout.html",r="/"+n;if(e.context.event.fireLoggedOut().done(),t!==!0){n="logoutLocal.html";var i=window.location.pathname,o=i.split(/\//),a=jQuery.inArray("webide",o);a>-1&&(o[a+1]=n,r=o.join("/"))}window.location.href=r})},login:function(e,t){if(this._ensureLogin)return this._ensureLogin;var n=this;return this._ensureLogin=Q.all([this._getCurrentUser(),this._oDao.connect(e,t)]).spread(function(e){return e&&(n._mUser.sName=e.name,n._mUser.sEMail=e.email,n._mUser.sFirstName=e.firstName,n._mUser.sLastName=e.lastName),n._oDao.loadWorkspaces()}).then(function(e){var t=e.UserName.split("$"),r=t.length>1?t[0]:null,i=t.length>1?t[1]:t[0];if(n._mUser.sAccount=r,n._mUser.sName||(n._mUser.sName=i),e&&e.Workspaces.length>0){var o=e.Workspaces[0];return n._oDao.loadWorkspace(o.Location)}return n._oDao.createWorkspace("Orion Content")}).then(function(e){return n._mWorkspace.location=e.Location,n._mWorkspace.childLocation=e.ChildrenLocation,n._mWorkspace.searchLocation=e.SearchLocation,n.context.event.fireLoggedIn()},function(e){if(401===e.status)throw new Error(JSON.parse(e.responseText).error);if(0===e.status&&"timeout"===e.statusText)throw new Error(n.context.i18n.getText("i18n","system_timeout"));var t=n.context.i18n.getText("i18n","orionbackend_unexpected_error");return console.error(t),console.error(e.message+"\n"+e.stack),n.context.event.fireFailure()}),this._ensureLogin},_callHeliumApi:function(e){return jQuery.ajax({url:e,dataType:"json"})},_getCurrentUser:function(){return"hcproxy"===sap.watt.getEnv("server_type")?this._callHeliumApi(sap.watt.getEnv("context_root")+"services/userapi/currentUser"):Q(null)},_logout:function(){return"local_hcproxy"===sap.watt.getEnv("server_type")||"java"===sap.watt.getEnv("server_type")?this._oDao.logout():Q(!0)},getQuota:function(){return r.send("/s2s/config/quota/global","GET",{dataType:"json"}).fail(function(){return null})},isAlive:function(){var e=this,t=URI("workspace").absoluteTo(sap.watt.getEnv("orion_server")).toString(),n=jQuery.ajax(t);return Q(n).then(function(){if(200!==n.status)throw new Error("SERVER_ERROR");if(e._isCloudSessionLost(n))throw new Error("SESSION_LOST")},function(){throw new Error("CONNECTION_LOST")})},_isCloudSessionLost:function(e){return"login-request"==e.getResponseHeader("com.sap.cloud.security.login")},getSystemInfo:function(){var e=this;return this._ensureLogin.then(function(){return{sDbname:"Orion",sUsername:e._mUser.sName,sAccount:e._mUser.sAccount,sEMail:e._mUser.sEMail,sFirstName:e._mUser.sFirstName,sLastName:e._mUser.sLastName}})}});return i}),define("sap.watt.ideplatform.orion.orionbackend/dao/Git",["../io/Request"],function(e){var t={_getPostData:function(e,t,n,r,i,o,a,s,u){var c={};return r&&(c.GitUrl=r),e&&(c.GitSshKnownHost=e),t&&(c.GitSshUsername=t),i&&(c.GitSshPassword=i),n&&(c.GitSshPrivateKey=n),o&&(c.GitSshPassphrase=o),a&&(c.Location=a),u&&(c.DestinationName=u),s&&(s.GitMail&&(c.GitMail=s.GitMail),s.GitName&&(c.GitName=s.GitName)),c},doInitRepository:function(t,n,r,i){var o={};o.Name=t,o.Location=n,i&&(i.GitMail&&(o.GitMail=i.GitMail),i.GitName&&(o.GitName=i.GitName)),r&&(o.Path=r);var a=URI("gitapi/clone/").absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(a,"POST",{},o)},doClone:function(t,n,r,i,o,a,s,u,c){var l=URI("gitapi/clone/").absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(l,"POST",{},this._getPostData(n,r,o,t,i,a,s,u,c))},doFetch:function(t,n,r,i,o,a){var s=URI(t.Children[0].Location).absoluteTo(sap.watt.getEnv("orion_path")).toString(),u=this._getPostData(r,i,o,void 0,a);return u.Fetch="true",u.Force=n,e.send(s,"POST",{},u)},doPull:function(t,n,r,i,o,a){var s=URI(t.Children[0].CloneLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString(),u=this._getPostData(r,i,o,void 0,a);return u.Pull="true",u.Force=n,e.send(s,"POST",{},u)},getRepositoryDetails:function(t){var n=URI(t.CloneLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(n,"GET")},getUserInfo:function(){var t=URI("prefs/user/git/config").absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(t,"GET")},getRepositoryConfigurations:function(t){var n=URI(t.ConfigLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(n,"GET")},setRepositoryConfiguration:function(t,n){var r=URI(t.ConfigLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(r,"POST",{},n)},deleteRepositoryConfiguration:function(t){var n=URI(t).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(n,"DELETE",{})},updateRepositoryConfiguration:function(t,n){var r=URI(t).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(r,"PUT",{},n)},doRebase:function(t,n,r){var i={};i.Rebase=n,i.Operation=r?r:"BEGIN";var o=URI(t.HeadLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(o,"POST",{},i)},doMerge:function(t,n,r){var i={};i.Merge=n,i.Squash=r?r:!1;var o=URI(t.CommitLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(o,"POST",{},i)},doAddRemote:function(t,n,r,i,o,a){var s={};s.Remote=n,s.RemoteURI=r,i&&(s.FetchRefSpec=i),o&&(s.PushURI=o),a&&(s.PushRefSpec=a);var u=URI(t.RemoteLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(u,"POST",{},s)},doDeleteRemote:function(t,n){var r=t.RemoteLocation.split("/"),i=r.indexOf("file"),o=r.slice(0,i);o.push(n),o=o.concat(r.slice(i,r.length));var a=o.join("/"),s=URI(a).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(s,"DELETE",{})},getRemotes:function(t){if(!t)return Q();var n=URI(t.RemoteLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(n,"GET")},doMergeChangesFromRemoteToHead:function(t,n){var r={};r.Merge=n;var i=URI(t.HeadLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(i,"POST",{},r)},doRevert:function(t,n){var r={};r.Revert=n.Name;var i=URI(t.HeadLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(i,"POST",{},r)},doPush:function(t,n,r,i,o,a,s,u,c,l){if(t&&!n){var p=o.indexOf("remote/origin/")+"remote/origin/".length;o=o.substr(0,p)+"refs%252Ffor%252F"+o.substr(p)}var f=URI(o).absoluteTo(sap.watt.getEnv("orion_path")).toString(),d=this._getPostData(s,u,c,void 0,l);return d.PushSrcRef=r,d.PushTags=i,d.Force=a,e.send(f,"POST",{},d)},doCherryPick:function(t,n){var r={};r["Cherry-Pick"]=n.Name;var i=URI(t.HeadLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(i,"POST",{},r)},getTask:function(t){if(t&&t.Location){var n=URI(t.Location).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(n,"GET")}throw new Error("Missing params")},getChangesUri:function(t,n){var r=URI(t).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(r,"POST",{},{New:n})},getChanges:function(t){var n=URI(t).absoluteTo(sap.watt.getEnv("orion_path"));return n.setSearch({pageSize:1e3}),e.send(n.toString(),"GET")},getRepositoriesList:function(t){var n=URI("gitapi/clone/"+t).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(n,"GET")},getStatus:function(t){if(!t)return Q();var n=URI(t.StatusLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(n,"GET")},doCommit:function(t,n,r,i,o){var a={};a.Amend=i,a.ChangeId=o,n&&(a.Message=n),r&&(r.sEmail&&(a.CommitterEmail=r.sEmail),r.sName&&(a.CommitterName=r.sName));var s=URI(t.HeadLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(s,"POST",{},a)},doGetStash:function(t){var n=URI(t).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(n,"GET",{})},doStash:function(t,n){var r={};r.IncludeUntracked=!0,n&&(r.WorkingDirectoryMessage=n);var i=URI(t).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(i,"POST",{},r)},doUseStash:function(t,n){t=n.applyLocation?n.applyLocation:t;var r,i;n.apply===!0?(r={},r.ApplyIndex=n.apply,r.ApplyUntracked=!0,i="PUT"):i="DELETE";var o=URI(t).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(o,i,{},r)},get:function(t,n,r){var i=URI(t).absoluteTo(sap.watt.getEnv("orion_path")).toString();return n&&(i=URI(i).setSearch({page:n}).toString()),r&&(i=URI(i).setSearch({pageSize:r}).toString()),e.send(i,"GET")},getFileDiff:function(t,n){var r=null;return r=n?URI(t.DiffLocation.replace("Default","Cached")+"?parts=uris").absoluteTo(sap.watt.getEnv("orion_path")).toString():URI(t.DiffLocation+"?parts=uris").absoluteTo(sap.watt.getEnv("orion_path")).toString(),e.send(r,"GET")},getFileBase:function(t){var n=URI(t.Base).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(n,"GET")},getFileNew:function(t){var n=URI(t.New).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(n,"GET")},getCommitsUri:function(t){var n=URI(t.Children[0].CommitLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(n,"POST",{},{New:"HEAD"})},getCommits:function(t){var n=URI(t).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(n,"GET")},getLastCommit:function(t){var n=URI(t.HeadLocation+"/?page=1&pageSize=1").absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(n,"GET")},getCommitHistory:function(t,n){var r=URI(t.CommitLocation+"/?page="+n).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(r,"GET")},checkoutLocalBranch:function(t,n,r){var i=URI(t.CloneLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString(),o={};return o.Branch=n,r&&(o.Tag=r.Name),e.send(i,"PUT",{},o)},createLocalBranch:function(t,n,r){var i=URI(t.BranchLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString(),o={};return o.Name=n,r&&(o.Branch=r),e.send(i,"POST",{},o)},removeLocalBranch:function(t){var n=URI(t.Location).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(n,"DELETE")},checkoutRemoteBranch:function(t,n){var r=URI(t.BranchLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(r,"POST",{},{Branch:n})},stageMultipleFiles:function(t,n){var r={Path:n};n&&0!==n.length||(r={});var i=URI(t.IndexLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(i,"PUT",{},r)},stage:function(t){var n=URI(t.IndexLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(n,"PUT")},unStage:function(t){var n=URI(t.IndexLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(n,"POST")},doDiscardChanges:function(t,n,r){var i=URI(t.CloneLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString(),r=r||"false";return e.send(i,"PUT",{},{Path:n,RemoveUntracked:r})},doResetIndex:function(t,n,r){var i={Reset:n};r&&(i.Commit=r);var o=URI(t.IndexLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(o,"POST",{},i)},getGitSettings:function(){var t=URI("prefs/user/git/config").absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(t,"GET")},setGitSettings:function(t,n){var r=URI("prefs/user/git/config").absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(r,"PUT",{},{userInfo:{GitMail:t,GitName:n}})},doTag:function(t,n){var r=URI(t.Location).absoluteTo(sap.watt.getEnv("orion_path")).toString();return e.send(r,"PUT",{},{Name:n})},untrack:function(t){var n=URI(t.RmLocation).absoluteTo(sap.watt.getEnv("orion_path")).toString(),r={cached:"true"};return e.send(n,"POST",{},r)}};return t}),define("sap.watt.ideplatform.orion.orionbackend/featuretoggle/FeatureToggle",["../dao/File","sap/watt/lib/lodash/lodash"],function(e,t){"use strict";return{isFeatureSupported:function(n,r){return this.getUnSupportedFeatures().then(function(i){return"local_hcproxy"===sap.watt.getEnv("server_type")&&i[n][r]&&i[n][r].localInstallation?!1:e.doGetOrionVersion().then(function(e){return i[n][r]&&(t.includes(i[n][r].versions,e.version)||t.includes(i[n][r].versions,"all"))?!1:!0})})},getUnSupportedFeatures:function(){var e=jQuery.sap.getModulePath("sap.watt.ideplatform.orion.plugin.orionbackend.featuretoggle.UnSupportedFeatures",".json");return Q(jQuery.ajax({url:e,dataType:"json"}))}}}),define("sap.watt.ideplatform.orion.orionbackend/service/Git",["../dao/Git","../featuretoggle/FeatureToggle","sap/watt/lib/lodash/lodash"],function(e,t,n){return{_sSSHKnownHostKey:"ssh_known_host_",_oStorage:void 0,_i18n:void 0,_repositoryDetailsMap:{},_gitLogDetailsMap:{},_oIgnoreMap:void 0,init:function(){jQuery.sap.require("jquery.sap.storage"),this._oStorage=jQuery.sap.storage(jQuery.sap.storage.Type.session),this._i18n=this.context.i18n},configure:function(e){if(e.ignore&&e.ignore.length>0){var t=n.uniq(e.ignore);this._oIgnoreMap={};for(var r=0;r<t.length;r++)this._oIgnoreMap[t[r]]=null}},clone:function(t,n,r,i,o,a,s){var u=this;return u.context.service.log.info("git","Clone request sent",["user"]).done(),Q(i?u._getKnownHost(t,a,n,r,i,o):"").then(function(c){return e.doClone(t,c,n,r,i,o,a,{},s).then(function(e){return u._waitForTask(e).then(function(e){return u.context.service.log.info("git","Clone request completed successfully",["user"]).done(),e})})}).fail(function(e){u._logAndThrowCustomError(u._i18n.getText("i18n","gitService_errorCloneRequestFailed"),e)})},getRepositoryDetailsByLocation:function(t){var n=this;return e.get(t.Location).then(function(e){return e&&e.Children&&e.Children[0]?e.Children[0]:[]}).fail(function(e){n._logAndThrowCustomError(n._i18n.getText("i18n","gitService_errorRepositorySelection"),e)
})},getRepositoryDetails:function(t){var n=this;return this._repositoryDetailsMap[t.CloneLocation]?Q(this._repositoryDetailsMap[t.CloneLocation]):e.getRepositoryDetails(t).then(function(e){if(e&&e.Children&&e.Children[0])return n._repositoryDetailsMap[t.CloneLocation]=e.Children[0];throw new Error("GET Repository Details request failed")}).fail(function(e){n._logAndThrowCustomError(n._i18n.getText("i18n","gitService_errorGetRepositoryDetailsRequestFailed"),e)})},getFileHead:function(t,n){var r=this;return e.getFileDiff(t,n).then(function(t){return e.getFileBase(t)}).fail(function(e){r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorDiffRequestFailed"),e)})},getFileNew:function(t,n){var r=this;return e.getFileDiff(t,n).then(function(t){return e.getFileNew(t)}).fail(function(e){r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorDiffRequestFailed"),e)})},pull:function(t,n,r,i,o){var a=this,s=n.GitUrl,u=URI(s).host();return this.context.service.log.info("git","Pull request sent",["user"]).done(),e.get(n.RemoteLocation).then(function(t){if(!(t&&t.Children&&t.Children[0]))return[];var n=function(t,n,r,i,o){return e.doPull(t,!1,n,r,i,o).then(function(e){return a._waitForTask(e).then(function(e){if(e){if("OK"===e.Message||/^Pulling.*done$/.test(e.Message))return a.context.service.log.info("git","Pull request completed successfully",["user"]).done(),!0;throw a.context.service.log.error("git","Pull request failed",["user"]).done(),new Error(e)}})})},s=a._oStorage.get(a._sSSHKnownHostKey+u);return n(t,s,o,r,i).fail(function(e){if(r){var s=a._handleKnownHost(e,u);return n(t,s,o,r,i)}throw e})}).fail(function(e){switch(e.Message){case"CONFLICTING":a._logAndThrowCustomError(a._i18n.getText("i18n","gitService_errorPULLRequestFailed"),new Error(a._i18n.getText("i18n","gitService_errorPullRequestFailedDueToConflicts")),"Warning","Conflicts");break;default:a._logAndThrowCustomError(a._i18n.getText("i18n","gitService_errorPULLRequestFailed"),e,"Error")}}).fin(function(){return a.context.event.firePullFinished(t)})},fetch:function(t,n,r,i,o){var a=this,s=n.GitUrl,u=URI(s).host();return this.context.service.log.info("git","Fetch request sent",["user"]).done(),e.get(n.RemoteLocation).then(function(n){if(!(n&&n.Children&&n.Children[0]))return[];var s=function(n,r,i,o,s){return e.doFetch(n,!1,r,i,o,s).then(function(e){return a._waitForTask(e).then(function(){return a._getChanges(t)})})},c=a._oStorage.get(a._sSSHKnownHostKey+u);return s(n,c,o,r,i).fail(function(e){if(r){var t=a._handleKnownHost(e,u);return s(n,t,o,r,i)}throw e})}).fail(function(e){a._logAndThrowCustomError(a._i18n.getText("i18n","gitService_errorFetchRequestFailed"),e)})},fetchFromGerrit:function(e,t,n,r,i,o,a){var s=this;return this.context.service.filesystem.documentProvider.getDocument(URI("/"+n+"/.git/config").toString()).then(function(n){return n.getContent().then(function(u){var c='[remote "origin"]',l=u.indexOf(c),p=u.substring(0,l+c.length),f=s._getFetchFromGerritString(r),d=u.substring(l+c.length,u.length);u=p+f+d;var h=new Blob([u]);return n.getParent().then(function(n){return n.importFile(h,!1,!0,"config").then(function(){return s.fetch(e,t,i,o,a).then(function(){return s.checkoutLocalBranch(e,s._getBrnachName(r))})})})})}).fail(function(e){return 409===e.status&&(e.sBranchName=s._getBrnachName(r)),s._logAndThrowCustomError(s._i18n.getText("i18n","gitService_errorFetchFromGerritRequestFailed"),e)}).fin(function(){return s._removeGerritBranchFetchConfiguration([r],n)})},merge:function(t,n,r,i){var o=this;return this.context.service.log.info("git","Merge request sent",["user"]).done(),e.doMerge(t,n,r).then(function(n){if("ALREADY_UP_TO_DATE"===n.Result||"FAST_FORWARD"===n.Result||"MERGED"===n.Result)return Q().then(function(){return i&&"MERGED"===n.Result?o.getLastCommit(t).then(function(n){var r=!0;return e.doCommit(t,n.Message,void 0,r,i)}):void 0}).then(function(){return o.context.service.log.info("git","Merge request completed successfully: "+n.Result,["user"]).done(),!0});throw new Error(n.Result)}).fail(function(e){switch(e.message){case"CONFLICTING":o._logAndThrowCustomError(o._i18n.getText("i18n","gitService_errorMergeRequestFailed"),new Error(o._i18n.getText("i18n","gitService_errorMergeRequestFailedDueToConflicts")),"Warning");break;default:o._logAndThrowCustomError(o._i18n.getText("i18n","gitService_errorMergeRequestFailed"),e,"Error")}}).fin(function(){return o.context.event.fireMergeFinished(t)})},rebase:function(t,n){var r=this;return this.context.service.log.info("git","Rebase request sent",["user"]).done(),e.doRebase(t,n).then(function(e){if("OK"===e.Result||"UP_TO_DATE"===e.Result||"FAST_FORWARD"===e.Result)return r.context.service.log.info("git","Rebase request completed successfully",["user"]);throw new Error(e.Result)}).fail(function(e){switch(e.message){case"STOPPED":r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorRebaseRequestFailed"),new Error(r._i18n.getText("i18n","gitService_errorRebaseInteractiveConflictsOccuredContinueSkipAbort")),"Warning","RebaseInteractive");break;case"FAILED_WRONG_REPOSITORY_STATE":r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorRebaseRequestFailed"),new Error(r._i18n.getText("i18n","gitService_errorRebaseInProgressReferToGItPane")),"Error","RebaseInteractive");break;case"FAILED_UNMERGED_PATHS":case"FAILED_PENDING_CHANGES":r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorRebaseRequestFailed"),new Error(r._i18n.getText("i18n","gitService_errorRebaseInteractiveConflictsOccuredContinueSkipAbort")),"Error","RebaseInteractive");break;case"CONFLICTS":r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorRebaseRequestFailed"),new Error(r._i18n.getText("i18n","gitService_errorRebaseInteractiveConflicts")),"Warning","RebaseInteractive");break;default:r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorRebaseRequestFailed"),e,"Error")}}).fin(function(){return r.context.event.fireRebaseFinished(t)})},rebaseInteractive:function(t,n){var r=this;return this.context.service.log.info("git",n+" request sent",["user"]).done(),e.doRebase(t,"",n).then(function(e){return r._handleRebaseInteractiveResponse(e,n)}).fail(function(e){r._logAndThrowCustomError(e.name,e)}).fin(function(){return r.context.event.fireRebaseInteractiveFinished(t)})},deleteRepositoryConfiguration:function(t){var n=this;return this.context.service.log.info("git","Delete configuration request sent",["user"]).done(),e.deleteRepositoryConfiguration(t.Location).then(function(){return n.context.service.log.info("git","Delete configuration completed successfully",["user"]).done(),!0}).fail(function(e){n._logAndThrowCustomError(e.name,e)})},updateRepositoryConfiguration:function(t,n){var r=this;return this.context.service.log.info("git","Update configuration request sent",["user"]).done(),e.updateRepositoryConfiguration(t.Location,n).then(function(){return r.context.service.log.info("git","Update configuration completed successfully",["user"])}).fail(function(e){r._logAndThrowCustomError(e.name,e)})},_handleRebaseInteractiveResponse:function(e,t){switch(e.Result){case"OK":case"ABORTED":return this.context.service.log.info("git",t+" request completed successfully",["user"]).done(),!0;case"FAILED_UNMERGED_PATHS":throw{name:this._i18n.getText("i18n","gitService_errorRebaseInteractiveContinueRequestFailed"),detailedMessage:this._i18n.getText("i18n","gitService_errorRebaseInteractiveUnmergedPaths")};case"NOTHING_TO_COMMIT":throw{name:this._i18n.getText("i18n","gitService_errorRebaseInteractiveContinueCannotBeProcessed"),detailedMessage:this._i18n.getText("i18n","gitService_errorRebaseInteractiveNothingToCommit"),sType:"Warning"};case"STOPPED":throw{name:this._i18n.getText("i18n","gitService_errorRebaseInteractiveSkipPatchOperationStatusStopped"),detailedMessage:this._i18n.getText("i18n","gitService_errorRebaseInteractiveRepositoryContainesConflicts"),sType:"Warning"}}},push:function(t,n,r,i,o,a,s,u,c){var l=this,p=r.GitUrl,f=URI(p).host();return this.context.service.log.info("git","Push request sent",["user"]).done(),this.getLocalBranches(t).then(function(t){var r,p=function(t,r,i,o,a,s){return e.doPush(n,c,t,u,r,!1,i,o,a,s).then(function(e){return l._waitForTask(e).then(function(e){return l._verifyPushResponse(e)})})};r=s?s.Location:l.getCurrentBranch(t).RemoteLocation[0].Children[0].Location;var d=l._oStorage.get(l._sSSHKnownHostKey+f);return p("HEAD",r,d,a,i,o).fail(function(e){if(i){var t=l._handleKnownHost(e,f);return p("HEAD",r,t,a,i,o)}throw e})}).fail(function(e){if(("Warning"===e.type||"PushFailedWithErrorTag"===e.status)&&l._logAndThrowCustomError(e.name,e,e.type),"PushFailed"===e.status)throw l.context.service.log.error("git",l._i18n.getText("i18n","gitService_errorPushRequestFailed"),["user"]).done(),e;l._logAndThrowCustomError(l._i18n.getText("i18n","gitService_errorPushRequestFailed"),e)}).fin(function(){return l.context.event.firePushFinished(t)})},getLog:function(t,n,r){var i=this,o=[];return this.context.service.log.info("git","Log request sent",["user"]).done(),e.get(t.CommitLocation,n,r).then(function(e){return i._waitForTask(e).then(function(e){i._gitLogDetailsMap[t.CommitLocation]&&1!==n?o=i._gitLogDetailsMap[t.CommitLocation]=i._gitLogDetailsMap[t.CommitLocation].concat(e.Children):(i._gitLogDetailsMap={},o=i._gitLogDetailsMap[t.CommitLocation]=e.Children),i.context.service.log.info("git","Log request completed successfully",["user"]).done();var r=i._getFormattedLogsResponse(o);return{aFormattedLogData:r,sNextUrl:e.NextLocation}})}).fail(function(e){i._logAndThrowCustomError(i._i18n.getText("i18n","gitService_errorGetLog"),e)})},getRepositoriesList:function(t){var n=this;return e.getRepositoriesList(t).then(function(e){return e.Children}).fail(function(e){n._logAndThrowCustomError(n._i18n.getText("i18n","gitService_errorGetRepositoriesListRequestFailed"),e)})},getStatus:function(t){var n=this;return e.getStatus(t).then(function(e){return n._getFormattedStageResponse(e)}).fail(function(e){n._logAndThrowCustomError(n._i18n.getText("i18n","gitService_errorStatusRequestFailed"),e)})},commit:function(t,n,r,i,o){var a=this;return this.context.service.log.info("git","Commit request sent",["user"]).done(),e.doCommit(t,n,r,i,o).then(function(){return a.context.service.log.info("git","Commit request completed successfully",["user"])}).fail(function(e){a._logAndThrowCustomError(a._i18n.getText("i18n","gitService_errorCommitRequestFailed"),e)})},isStashSupported:function(e){return this._getStashLocation(e).then(function(e){return e&&""!==e?!0:!1})},isRmSupported:function(e){return e.RmLocation&&""!==e.RmLocation?!0:!1},getStash:function(t){var n=this;return n._getStashLocation(t).then(function(t){return e.doGetStash(t).then(function(e){return e}).fail(function(e){n._logAndThrowCustomError(n._i18n.getText("i18n","gitService_errorGetStashFailed"),e)})})},stash:function(t,n){var r=this;return this.context.service.log.info("git","Stash request sent",["user"]).done(),r._getStashLocation(t).then(function(i){return e.doStash(i,n).then(function(){return r.context.service.log.info("git","Stash request completed successfully",["user"])}).fail(function(e){r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorStashFailed"),e)}).fin(function(){return r.context.event.fireStashFinished(t)})})},useStash:function(t,n){var r=this;return this.context.service.log.info("git","Use stash request sent",["user"]).done(),r._getStashLocation(t).then(function(i){return e.doUseStash(i,n).then(function(){return r.context.service.log.info("git","Use stash request completed successfully",["user"])}).fail(function(e){r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorUseStashFailed"),e)}).fin(function(){return r.context.event.fireUseStashFinished(t)})})},stageFile:function(t){var n=this;return this.context.service.log.info("git","Stage File request sent",["user"]).done(),e.stage(t).then(function(){return n.context.service.log.info("git","Stage File request completed successfully",["user"])}).fail(function(e){n._logAndThrowCustomError(n._i18n.getText("i18n","gitService_errorStageFileFailed"),e)})},stageMultipleFiles:function(t,n){var r=this;return this.context.service.log.info("git","Stage Multiple Files request sent",["user"]).done(),e.stageMultipleFiles(t,n).then(function(e){return r.context.service.log.info("git","Stage Multiple Files request completed successfully",["user"]).done(),e}).fail(function(e){r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorStageMultipleFilesFailed"),e)})},unStageFile:function(t){var n=this;return this.context.service.log.info("git","Unstage File request sent",["user"]).done(),e.unStage(t).then(function(){return n.context.service.log.info("git","Unstage File request completed successfully",["user"])}).fail(function(e){n._logAndThrowCustomError(n._i18n.getText("i18n","gitService_errorUnstageFileRequestFailed"),e)})},unstageAll:function(t){var n=this;return this.context.service.log.info("git","Unstage All request sent",["user"]).done(),e.doResetIndex(t,"MIXED").then(function(e){return n.context.service.log.info("git","Unstage All request completed successfully",["user"]).done(),e}).fail(function(e){n._logAndThrowCustomError(n._i18n.getText("i18n","gitService_errorUnstageAllRequestFailed"),e)})},getLocalBranches:function(t){var n=this;return this.getRepositoryDetails(t).then(function(t){return e.get(t.BranchLocation).then(function(e){return n._waitForTask(e).then(function(e){return e.Children})})}).fail(function(e){n._logAndThrowCustomError(n._i18n.getText("i18n","gitService_errorGetLocalBranchesRequestFailed"),e)})},getRemoteBranches:function(t){var n=this;return this.getRepositoryDetails(t).then(function(t){return e.get(t.RemoteLocation).then(function(t){return n._waitForTask(t).then(function(t){return 0===t.Children.length?[]:e.get(t.Children[0].Location).then(function(e){return e.Children})})})}).fail(function(e){n._logAndThrowCustomError(n._i18n.getText("i18n","gitService_errorGetRemoteBranchesRequestFailed"),e)})},getCommits:function(t){var n=this;return this._getBranchesData(t).then(function(t){var r=n.getCurrentBranch(t.Children);if(r&&r.RemoteLocation&&0!==r.RemoteLocation.length)return e.getCommitsUri(r.RemoteLocation[0]).then(function(t){return e.getCommits(t.Location).then(function(e){return Q(e.Children?e:n._waitForTask(e)).then(function(e){for(var t=[],n=0;n<e.Children.length;n++)t.push({Message:e.Children[n].Message,Time:new Date(e.Children[n].Time)});return t})})})}).fail(function(e){n._logAndThrowCustomError(n._i18n.getText("i18n","gitService_errorGetCommitsRequestFailed"),e)})},getCommitsCount:function(t){var n=this;return this.getLocalBranches(t).then(function(t){return n._waitForTask(t).then(function(t){var r=n.getCurrentBranch(t);if(!(r&&r.RemoteLocation&&r.RemoteLocation[0]&&r.RemoteLocation[0].Children&&!/^[0-9]+\/[0-9]+$/.test(r.Name)&&1===r.RemoteLocation[0].Children.length&&r.RemoteLocation[0].Children[0].Id))return{};var i=r.RemoteLocation[0].Children;return Q.all([e.getChangesUri(r.CommitLocation,i[0].Id).then(function(t){return e.getChanges(t.Location).then(function(e){return n._waitForTask(e)})}),e.getCommitsUri(r.RemoteLocation[0]).then(function(t){return e.getCommits(t.Location).then(function(e){return n._waitForTask(e)})})]).spread(function(e,t){var n={};return e&&e.Children&&(n.Incoming=e.Children.length),t&&t.Children&&(n.Outgoing=t.Children.length),n})})}).fail(function(e){n._logAndThrowCustomError(n._i18n.getText("i18n","gitService_errorGetCommitsRequestFailed"),e)})},getLastCommit:function(t){var n=this;return e.getLastCommit(t).then(function(e){return n._waitForTask(e).then(function(e){if(e&&e.Children&&e.Children[0])return e.Children[0];throw new Error(n._i18n.getText("i18n","gitService_errorGetLastCommitRequestFailed"))})}).fail(function(e){n._logAndThrowCustomError(n._i18n.getText("i18n","gitService_errorGetLastCommitRequestFailed"),e)})},getRemoteBranchOfCurrent:function(e){return this.getRemoteBranchOfLocalBranch(this.getCurrentBranch(e))},getRemoteBranchOfLocalBranch:function(e){var t;return!jQuery.isEmptyObject(e)&&!jQuery.isEmptyObject(e.RemoteLocation)&&e.RemoteLocation.length>0&&(t=e.RemoteLocation[0].Children,1===t.length&&!/^[0-9]+\/[0-9]+$/.test(e.Name)&&t[0].Id)?t[0].Name:""},getCurrentBranchName:function(e){return jQuery.isEmptyObject(this.getCurrentBranch(e))?"":this.getCurrentBranch(e).Name},cherryPick:function(t,n){var r=this,i=n.Message.split("\n\n")[0];return this.context.service.log.info("git","Cherry-Pick request for commit "+i+" sent",["user"]).done(),e.doCherryPick(t,n).then(function(e){return r._waitForTask(e).then(function(e){r._handleCherryPickResponse(e),r.context.service.log.info("git","Cherry-Pick request for commit "+i+" completed successfully",["user"]).done()})}).fail(function(e){e.status&&r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorCherryPickRequestFailed"),e),r._repositoryDetailsMap[t.CloneLocation].CherryPickCommitDescription=i,r._logAndThrowCustomError(e.name,e,e.sType)}).fin(function(){return r.context.event.fireCherryPickFinished(t)})},_handleCherryPickResponse:function(e){switch(e.Result){case"CONFLICTING":throw{name:this._i18n.getText("i18n","gitService_cherryPickRequestConflicts"),detailedMessage:this._i18n.getText("i18n","gitService_cherryPickRequestConflictsDetailedMessage"),sType:"Warning"};case"FAILED":throw{name:this._i18n.getText("i18n","gitService_errorCherryPickRequestFailed"),detailedMessage:this._i18n.getText("i18n","gitService_cherryPickRequestFailedStatusDetailedMessage"),sType:"Warning"}}if(!e.HeadUpdated)throw{name:this._i18n.getText("i18n","gitService_successCherryPickRequestHasBeenAlreadyPicked"),detailedMessage:this._i18n.getText("i18n","gitService_successCherryPickRequestNothingChangedInfo"),sType:"Info"}},_getStashLocation:function(e){return this.getRepositoryDetails(e).then(function(e){return e.StashLocation})},getCurrentBranch:function(e){for(var t=0;t<e.length;t++)if(e[t].Current)return e[t];return{}},checkoutRemoteBranch:function(t,n){var r=this;return this.context.service.log.info("git","Checkout Remote Branch "+n+" request sent",["user"]).done(),this.getRepositoryDetails(t).then(function(t){return e.checkoutRemoteBranch(t,n).then(function(e){return r.context.service.log.info("git","Checkout Remote Branch request completed successfully",["user"]).done(),e})}).fail(function(e){r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorCheckoutRemoteBranchRequestFailed",[n]),e)})},checkoutLocalBranch:function(t,n,r){var i=this;return this.context.service.log.info("git","Checkout Local Branch "+n+" request sent",["user"]).done(),e.checkoutLocalBranch(t,n,r).then(function(e){return i.context.service.log.info("git","Checkout Local request completed successfully",["user"]).done(),e}).fail(function(e){i._logAndThrowCustomError(i._i18n.getText("i18n","gitService_errorCheckoutLocalBranchRequestFailed",[n]),e)}).fin(function(){return i.context.event.fireCheckoutBranch(t)})},setNewBranchConfiguration:function(e,t,n){var r=this;return this.context.service.log.info("git","Set New Branch Configurations "+t+" request sent",["user"]).done(),this.getRepositoryConfigurations(e).then(function(i){for(var o=0;o<i.length;o++)if(i[o].Key==="branch."+n+".merge")return r.setRepositoryConfiguration(e,{Key:"branch."+t+".merge",Value:i[o].Value.constructor===Array?i[o].Value[0]:i[o].Value}).then(function(){return r.context.service.log.info("git","Set New Branch Configurations "+t+" completed successfully",["user"])})}).fail(function(e){r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorSetNewBranchConfigurationFailed"),e)})},createLocalBranch:function(t,n,r){var i=this;return this.context.service.log.info("git","Create Local Branch "+n+" request sent",["user"]).done(),this.getRepositoryDetails(t).then(function(t){return e.createLocalBranch(t,n,r).then(function(){var e=r?"Create Branch request from "+r+" completed successfully":"Create Local Branch request completed successfully";i.context.service.log.info("git",e,["user"]).done()}).fail(function(e){i._logAndThrowCustomError(i._i18n.getText("i18n","gitService_errorCreateLocalBranchRequestFailed",[n]),e)})})},resetBranch:function(t,n,r){var i=this;return this.context.service.log.info("git","Reset Index request sent",["user"]).done(),e.doResetIndex(t,n,r).then(function(e){return i._waitForTask(e).then(function(e){return i.context.service.log.info("git","Reset Index request completed successfully",["user"]).done(),e})}).fail(function(e){i._logAndThrowCustomError(i._i18n.getText("i18n","gitService_errorResetBranchRequestFailed"),e)}).fin(function(){return i.context.event.fireResetFinished(t)})},discardFiles:function(t,n){var r=this;return this.context.service.log.info("git","Revert Files request sent",["user"]).done(),e.doDiscardChanges(t,n,!0).then(function(e){return r.context.service.log.info("git","Revert Files request completed successfully",["user"]).done(),e}).fail(function(e){r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorRevertFilesRequestFailed"),e)}).fin(function(){return r.context.event.fireDiscardFinished(t)})},removeLocalBranches:function(t,n){for(var r=this,i=[],o=function(t){return function(){return e.removeLocalBranch(t).then(function(){return i.push(t.Name),r.context.service.log.info("git","Remove Local Branch "+t.Name+" request completed successfully",["user"])}).fail(function(e){r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorRemoveLocalBranchRequestFailed"),e)})}},a=Q(),s=0;s<t.length;s++){var u=t[s];r.context.service.log.info("git","Remove Local Branch "+u.Name+" request sent",["user"]).done(),a=a.then(o(u))}return a.fin(function(){return i.length>0?r._removeGerritBranchFetchConfiguration(i,n):void 0})},getRepositoryConfigurations:function(t){var n=this;return e.getRepositoryConfigurations(t).then(function(e){return n._waitForTask(e).then(function(e){return e.Children?e.Children:[]})}).fail(function(e){n._logAndThrowCustomError(n._i18n.getText("i18n","gitService_errorGetUserSettingsRequestFailed"),e)})},setRepositoryConfiguration:function(t,n){var r=this;return this.context.service.log.info("git","Set Repository Configurations request sent",["user"]).done(),e.setRepositoryConfiguration(t,n).then(function(){r.context.service.log.info("git","Set Repository Configuration updated successfully",["user"]).done()}).fail(function(e){r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorSetRepositoryConfigurationFailed"),e)})},setGitSettings:function(t,n){var r=this;return r.context.service.log.info("git","Settings request sent",["user"]).done(),e.setGitSettings(t,n).then(function(){r.context.service.log.info("git","Settings updated successfully",["user"]).done()}).fail(function(e){r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_error_Unable_to_update_Git_settings"),e)})},getGitSettings:function(){var t=this;return e.getGitSettings().then(function(e){return t.context.service.log.info("git","Settings fetched successfully",["user"]).done(),e.userInfo?{sEmail:e.userInfo.GitMail,sName:e.userInfo.GitName}:{sEmail:"",sName:""}}).fail(function(e){return 404===e.status&&"Not Found"===e.statusText?(t.context.service.log.info("git","Settings fetched successfully",["user"]).done(),{sEmail:"",sName:""}):(t._logAndThrowCustomError(t._i18n.getText("i18n","gitService_errorUnable_to_get_Git_Configuration_Settings"),e),void 0)})},_setIgnore:function(e,t){if(null===t||0===t.length)return Q();var r=this,i=r.context.service.filesystem.documentProvider,o=!1;return i.getDocument(e).then(function(r){return r.objectExists(".gitignore").then(function(a){return Q(a?i.getDocument(URI(e+"/.gitignore").toString()).then(function(e){return e.getContent()}):"").then(function(e){var i=e.split("\n");if(n.forEach(t,function(t){""!==t&&-1===n.indexOf(i,t)&&(e+="\n"+t,o=!0)}),o){var a=new Blob([e]);return r.importFile(a,!1,!0,".gitignore").then(function(e){return e.save()})}})})}).fail(function(e){r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorUnable_to_add_git_ignore"),e,e.type)}).fin(function(){o||r.context.service.log.info("git",r._i18n.getText("i18n","gitService_infoGitIgnoreNotUpdated"),["user"]).done()})},setIgnore:function(e){var t=this;return t.context.service.document.getDocument(e).then(function(n){return n.getProject(!0).then(function(n){return t._setIgnore(n.getEntity().getFullPath(),[e.getProjectRelativePath()])})})},setIgnoreSystemFiles:function(e){if(!e||!e.getEntity())return Q();var t=this,r=e.getEntity().getFullPath();return t._setIgnore(r,n.keys(t._oIgnoreMap)).then(function(){var n=!1;return e.getEntity().getBackendData()&&e.getEntity().getBackendData().git?e.getChild(".gitignore").then(function(e){return e?t.stageFile(e.getEntity().getBackendData().git):void 0}).then(function(){return t._untrackSystemFiles(e)}).then(function(){return t.context.service.git.getStatus(e.getEntity().getBackendData().git).then(function(e){return n=e.length?!0:!1,Q(n)})}):Q(n)})},_untrackSystemFiles:function(e){var t=this,r=n.keys(t._oIgnoreMap),i=[];return n.forEach(r,function(t){i.push(e.getChild(t).fail(function(){return Q()}))}),Q.all(i).then(function(e){var r=[];return n.forEach(e,function(e){e&&e.getEntity().getBackendData().git&&r.push(t.untrack(e.getEntity().getBackendData().git))}),Q.all(r).then(function(){return Q()})})},initRepository:function(t,n,r){var i=this;return i.context.service.log.info("git","Initialize repository request sent",["user"]).done(),i.context.service.filesystem.documentProvider.getRoot().then(function(o){return o.getChild(t).then(function(o){return i.setIgnoreSystemFiles(o).then(function(){return e.doInitRepository(t,n,r).then(function(e){return i._waitForTask(e).then(function(e){return i.context.service.log.info("git","Initialize repository completed successfully",["user"]).done(),e})}).fail(function(e){i._logAndThrowCustomError("Unable to get initialize git repositorys",e)})}).fail(function(e){i._logAndThrowCustomError("Failed to create .gitignore file",e)})})})},isFeatureSupported:function(e){return t.isFeatureSupported("git",e)},addRemote:function(t,n,r,i,o,a){return e.doAddRemote(t,n,r,i,o,a)},deleteRemote:function(t,n){return e.doDeleteRemote(t,n)},getRemotes:function(t){return e.getRemotes(t)},mergeChangesFromRemoteToHead:function(t,n){return e.doMergeChangesFromRemoteToHead(t,n)},revert:function(t,n){var r=this;return this.context.service.log.info("git","Revert request sent",["user"]).done(),e.doRevert(t,n).then(function(e){return r._waitForTask(e).then(function(e){if("OK"===e.Result)return r.context.service.log.info("git","Revert request completed successfully",["user"]).done(),e;throw new Error(e.Result)})}).fail(function(e){"FAILURE"===e.message&&r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorRevert"),new Error(r._i18n.getText("i18n","gitService_errorRebaseInteractiveConflicts")),"Warning","Revert"),r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorRevert"),e)}).fin(function(){return r.context.event.fireRevertFinished(t)})},tag:function(t,n){var r=this;return this.context.service.log.info("git","Tag request sent",["user"]).done(),e.doTag(t,n).then(function(e){return r._waitForTask(e).then(function(e){return r.context.service.log.info("git","Tag completed successfully",["user"]).done(),e})}).fail(function(e){r._logAndThrowCustomError(r._i18n.getText("i18n","gitService_errorTag"),e)})},untrack:function(t){var n=this;return this.context.service.log.info("git","Untrack File request sent",["user"]).done(),e.untrack(t).then(function(){return n.context.service.log.info("git","Untrack File request completed successfully",["user"])}).fail(function(e){n._logAndThrowCustomError(n._i18n.getText("i18n","gitService_errorUntrackFileFailed"),e)})},_verifyPushResponse:function(e){if(e&&e.Updates&&e.Updates[0]){for(var t={aSuccessTags:[],aFailedTags:[],oPushedCommit:null,sDetailedMessage:e.Message},n=0;n<e.Updates.length;n++){var r=e.Updates[n];r.LocalName===r.RemoteName?"OK"===r.Result?t.aSuccessTags.push(r.LocalName):t.aFailedTags.push(r.LocalName):t.oPushedCommit=r}var i=t.oPushedCommit.Result;if("OK"===i||/^Pushing .*done$/.test(e.Message))return 0===t.aFailedTags.length?this.context.service.log.info("git","Push request completed successfully",["user"]).done():this.context.service.log.info("git","Push has been completed with tag errors",["user"]).done(),Q(t);if("UP_TO_DATE"===i||"no new changes"===t.oPushedCommit.Message){if(t.aFailedTags.length>0)throw{name:this._i18n.getText("i18n","gitService_errorPushRequestFailed"),message:this._i18n.getText("i18n","gitService_pushFailedTags",[t.aFailedTags.join()]),status:"PushFailedWithErrorTag"};if(t.aSuccessTags.length>0)return Q();throw{name:this._i18n.getText("i18n","gitService_warnNonewChangesToPush"),message:this._i18n.getText("i18n","gitService_warnNonewChangesToPush"),type:"Warning"}}throw{name:this._i18n.getText("i18n","gitService_errorPushRequestFailed"),oErrorPushResponse:t,status:"PushFailed",source:"git"}}},commitAfterContinue:function(t,n){return e.getChangesUri(t.CommitLocation,n)},_getChanges:function(t){var n=this;return this.getLocalBranches(t).then(function(t){for(var r=[],i=0;i<t.length;i++){var o=t[i].RemoteLocation[0].Children;1===o.length&&!/^[0-9]+\/[0-9]+$/.test(t[i].Name)&&o[0].Id&&r.push(e.getChangesUri(t[i].CommitLocation,o[0].Id).then(function(t){return e.getChanges(t.Location).then(function(e){return n._waitForTask(e)})}))}return Q.all(r).then(function(e){for(var t=[],r=0;r<e.length;r++)e[r]&&e[r].Children&&e[r].Children.length>0&&t.push({branch:e[r].fromRef.Name+"( "+e[r].fromRef.RemoteLocation[0].Children[0].Name+" )",changes:e[r].Children});return n.context.service.log.info("git","Fetch request completed",["user"]).done(),t})})},_getBranchesData:function(t){var n=this;return this.getRepositoryDetails(t).then(function(t){return e.get(t.BranchLocation).then(function(e){return n._waitForTask(e)})}).fail(function(e){n._logAndThrowCustomError(n._i18n.getText("i18n","gitService_erroGetBranchesDataRequestFailed"),e)})},_getKnownHost:function(t,n,r,i,o,a){var s=this,u=URI(t).host(),c=this._oStorage.get(this._sSSHKnownHostKey+u);return c?Q(c):e.doClone(t,"",r,i,o,a,n).then(function(e){return s._waitForTask(e).then(function(e){if(!e)throw new Error("unexpected error");var t=s._createKnownHost(e);return s._oStorage.put(c,t),t})}).fail(function(e){return s._handleKnownHost(e,u)})},_handleKnownHost:function(e,t){var n;if(e&&400===e.HttpCode&&e.JsonData?n=e.JsonData:e&&e.responseJSON&&400===e.responseJSON.HttpCode&&e.responseJSON.JsonData&&(n=e.responseJSON.JsonData),n&&n.Host&&n.HostKey&&n.KeyType){var r=this._createKnownHost(n);return this._oStorage.put(this._sSSHKnownHostKey+t,r),r}throw e},_createKnownHost:function(e){return e.Host+" "+e.KeyType+" "+e.HostKey},_waitForTask:function(e){if(!e||!e.type||"loadstart"!==e.type)return Q(e);var t=Q.defer();return this._notifyTaskHandled(e,t),t.promise},_notifyTaskHandled:function(t,n){var r=this;"loadstart"===t.type?setTimeout(function(){return e.getTask(t).then(function(e){return e.Location||(e.Location=t.Location),e.type&&"error"===e.type?(n.reject(e.Result),void 0):r._notifyTaskHandled(e,n)}).fail(function(e){n.reject(e)})},2e3):t.Result&&t.Result.JsonData?n.resolve(t.Result.JsonData):n.resolve(t.Result)},_getFormattedLogsResponse:function(e){for(var t,n=[],r={},i=e.length-1;i>=0;i--){var o=e[i],a=[];o.Diffs&&(o.Diffs.constructor===Array?a=o.Diffs:o.Diffs.Children&&(a=o.Diffs.Children)),t={Branches:o.Branches,CommitterName:o.CommitterName,CommitterEmail:o.CommitterEmail,AuthorName:o.AuthorName,AuthorEmail:o.AuthorEmail,Time:o.Time,Name:o.Name,Message:o.Message,Diffs:a,ParentNames:o.Parents,Tags:o.Tags,Location:o.Location,Children:[],Parents:[]},n[i]=t,r[o.Name]=n[i];for(var s=0;s<t.ParentNames.length;s++){var u=r[t.ParentNames[s].Name];u&&(u.Children.push(t),t.Parents.push(u))}for(s=0;n[i].Diffs&&s<n[i].Diffs.length;s++)switch(n[i].Diffs[s].ChangeType){case"MODIFY":n[i].Diffs[s].Status="M",n[i].Diffs[s].FullStatus="MODIFIED";
break;case"ADD":n[i].Diffs[s].Status="A",n[i].Diffs[s].FullStatus="ADDED";break;case"DELETE":n[i].Diffs[s].Status="D",n[i].Diffs[s].FullStatus="DELETED"}}return n},_getFormattedStageResponse:function(e){var t=[];e.Untracked.forEach(function(e){e.Stage=!1,e.Status="U",e.FullStatus="UNTRACKED",t.push(e)}),e.Modified.forEach(function(e){e.Stage=!1,e.Status="M",e.FullStatus="MODIFIED",t.push(e)}),e.Missing.forEach(function(e){e.Stage=!1,e.Status="D",e.FullStatus="DELETED",t.push(e)}),e.Added.forEach(function(e){e.Stage=!0,e.Status="N",e.FullStatus="NEW",t.push(e)}),e.Changed.forEach(function(e){e.Stage=!0,e.Status="M",e.FullStatus="MODIFIED",t.push(e)}),e.Removed.forEach(function(e){e.Stage=!0,e.Status="D",e.FullStatus="DELETED",t.push(e)}),e.Conflicting.forEach(function(e){e.Stage=!1,e.Status="C",e.FullStatus="CONFLICT",t.push(e)});var n=this,r=function(){var r=n._repositoryDetailsMap[e.CloneLocation];r&&(t.CherryPickCommitDescription=r.CherryPickCommitDescription)};switch(e.RepositoryState){case"REBASING_INTERACTIVE":t.repositoryState="RebaseInProgress";break;case"CHERRY_PICKING":t.repositoryState="CherryPickInConflict",r();break;case"CHERRY_PICKING_RESOLVED":t.repositoryState="CherryPickResolved",r(),this.context.event.fireCherryPickResolved(e).done();break;case"MERGING":t.repositoryState="MergeInConflict";break;case"MERGING_RESOLVED":t.repositoryState="MergeResolved",this.context.event.fireMergeResolved(e).done()}return t},_getFetchFromGerritString:function(e){var t=e.split("/");return"\n	fetch = +"+e+":"+t[0]+"/heads/"+t[3]+"/"+t[4]},_getBrnachName:function(e){var t=e.split("/");return t[3]+"/"+t[4]},_logAndThrowCustomError:function(e,t,n,r){var i,o,a=[];t.responseJSON?(i=t.responseJSON.Message||t.responseJSON.message,o=t.responseJSON.DetailedMessage||t.responseJSON.detailedMessage):(i=t.Message||t.message,o=t.DetailedMessage||t.detailedMessage);var s=this.context.service.log.error;switch(n){case"Warning":s=this.context.service.log.warn;break;case"Info":s=this.context.service.log.info}if(o?s("git",e+" "+o,["user"]).done():s("git",e+" "+i,["user"]).done(),409===t.status&&o)for(var u=o.split("\n").splice(1),c=0;c<u.length;c++)a.push({fileName:u[c]});throw{name:e,message:i,detailedMessage:o||i,type:n,source:"git",status:r?r:t.status,files:a,sBranchName:t.sBranchName}},_removeGerritBranchFetchConfiguration:function(e,t){return this.context.service.filesystem.documentProvider.getDocument(URI("/"+t+"/.git/config").toString()).then(function(t){return t.getContent().then(function(n){for(var r='[remote "origin"]',i=n.indexOf(r),o=n.substring(0,i+r.length),a=n.substring(i+r.length),s=a.indexOf("["),u=a.substring(0,s),c=a.substring(s),l=u.split("\n"),p=new RegExp("fetch = \\+refs/changes"),f=0;f<l.length;f++){var d=l[f];if(""!==d&&p.test(d))for(var h=0;h<e.length;h++)if(d.indexOf(e[h])>-1){l.splice(f,1);break}}u=l.join("\n"),n=o+u+c;var m=new Blob([n]);return t.getParent().then(function(e){return e.importFile(m,!1,!0,"config")})})})}}}),define("sap.watt.saptoolsets.fiori.common.welcomescreenimpl/command/ImportFromWelcomePage",[],function(){"use strict";return{execute:function(){this.context.service.import.getImportDialog().then(function(e){e.open()}).done()}}}),define("sap/watt/ideplatform/plugin/welcomescreen/ui/controls/BasicWelcomeContainer",[],function(){"use strict";sap.ui.commons.Panel.extend("sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeContainer",{renderer:{}})}),define("sap.watt.saptoolsets.fiori.common.welcomescreenimpl/ui/WelcomeContainer",["sap/watt/ideplatform/plugin/welcomescreen/ui/controls/BasicWelcomeContainer"],function(){"use strict";var e=function(){var e=this,t=new sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeContainer("welcomeContainer",{borderDesign:sap.ui.commons.enums.BorderDesign.None,showCollapseIcon:!1,title:new sap.ui.core.Title({text:"",level:sap.ui.core.TitleLevel.H3})});t.setLayoutData(new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}));var n=new sap.ui.commons.Label({wrapping:!0,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}).addStyleClass("welcomeContentLabel");t.addContent(n);var r=new sap.ui.commons.Link({text:e.context.i18n.getText("i18n","welcomeContainer_newVersionLink"),href:"https://help.hana.ondemand.com/webide/frameset.htm?98fd3efb757d4e39b25740d2f3c83b61.html",target:"_blank",press:function(){e.context.service.usagemonitoring.report("welcome_screen","welcomeContainer_newVersionLink").done()}}).addStyleClass("welcomeContentWhatsNewLink");t.addContent(r);var i=new sap.ui.commons.Button("OpenMyWorkspaceButton",{text:e.context.i18n.getText("i18n","welcomeContainer_openMyWorkspaceButton"),icon:require.toUrl("sap.watt.saptoolsets.fiori.common.welcomescreenimpl/images/editor_button.png"),styled:!1,lite:!0,press:function(){e.context.service.usagemonitoring.report("welcome_screen","open_my_workspace").done(),e.context.service.perspective.renderPerspective("development").done()}}).addStyleClass("welcomeContentOpenMyWorkspaceButton");return t.addContent(i),this.context.service.system.getSystemInfo().then(function(r){var i=r.sFirstName?r.sFirstName:r.sUsername;e.context.service.WelcomeScreenPersistency.getPerspectiveSettings().then(function(r){if(r&&r.bIsVersionUpdate===!0){var o=r.oVersionUpdate.from,a=r.oVersionUpdate.to;o&&""!==o?e.context.service.Version.compareVersions(a,o).then(function(t){t>0?n.setText(e.context.i18n.getText("i18n","welcomeContainer_updatedFromVersion",[o,a])):n.setText(e.context.i18n.getText("i18n","welcomeContainer_downgradedFromVersion",[o,a]))}).fail(function(){n.setText(e.context.i18n.getText("i18n","welcomeContainer_currentVersion",[a]))}).done():n.setText(e.context.i18n.getText("i18n","welcomeContainer_updatedVersion",[a])),r.bIsVersionUpdate=!1,e.context.service.WelcomeScreenPersistency.setPerspectiveSettings(r).done()}else e.context.service.Version.getCurrentVersion().then(function(t){n.setText(e.context.i18n.getText("i18n","welcomeContainer_currentVersion",[t]))}).done();t.getTitle().setText(e.context.i18n.getText("i18n","welcomeContainer_containerTitle",[i]))}).done()}).done(),t};return{getContainer:e}}),define("sap/watt/ideplatform/plugin/welcomescreen/ui/controls/BasicWelcomeTile",[],function(){"use strict";sap.watt.includeCSS(require.toUrl("sap.watt.ideplatform.welcomescreen/ui/css/welcomescreen.css")),sap.ui.commons.Button.extend("sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeTile",{metadata:{properties:{title:{type:"string",multiple:!1},icon:{type:"string",multiple:!1}},aggregations:{textView:{type:"sap.ui.commons.Label",multiple:!1},iconControl:{type:"sap.ui.core.Icon",multiple:!1}}},init:function(){this.setAggregation("iconControl",new sap.ui.core.Icon({src:""})),this.setAggregation("textView",new sap.ui.commons.Label({text:"",wrapping:!0}))},setTitle:function(e){this.setAggregation("textView",new sap.ui.commons.Label({text:e,wrapping:!0,textAlign:"Center"}))},attachPress:function(e,t,n){"function"==typeof e&&void 0===n&&(n=t,t=e,e=void 0);var r=this,i=function(e){r.getEnabled()===!0&&(r.setEnabled(!1),t(e),setTimeout(function(){r.setEnabled(!0)},500))};return this.attachEvent("press",e,i,n),this},ondblclick:function(e){return e.stopImmediatePropagation(),e.preventDefault(),e.cancelBubble=!0,!1},getTitle:function(){return this.getTextView().getText()},setIcon:function(e){this.setAggregation("iconControl",new sap.ui.core.Icon({src:e,height:"100%",width:"100%",useIconTooltip:!1}))},getIcon:function(){return this.getIconControl().getSrc()},renderer:function(e,t){e.write("<div"),e.writeControlData(t),e.write("><div"),e.writeClasses(t),e.write("><div"),e.writeAttribute("class","welcomeTileDiv"),e.writeAttribute("tabindex","0"),e.write(">"),e.write("<div"),e.writeAttribute("class","welcomeTileIcon"),e.write(">"),e.renderControl(t.getIconControl()),e.write("</div>"),e.write("<div"),e.writeAttribute("class","welcomeTileLabel"),e.write(">"),e.renderControl(t.getTextView()),e.write("</div></div></div></div>")}})}),define("sap.watt.saptoolsets.fiori.common.welcomescreenimpl/ui/VideoContainer",["sap/watt/ideplatform/plugin/welcomescreen/ui/controls/BasicWelcomeContainer","sap/watt/ideplatform/plugin/welcomescreen/ui/controls/BasicWelcomeTile"],function(){"use strict";var e=function(){var e=this,t=new sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeContainer("videoContainer",{borderDesign:sap.ui.commons.enums.BorderDesign.None,showCollapseIcon:!1,title:new sap.ui.core.Title({text:e.context.i18n.getText("i18n","videoContainer_containerTitle"),level:sap.ui.core.TitleLevel.H3})});t.setLayoutData(new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})),this.context.service.WelcomeScreenPersistency.getPerspectiveSettings().then(function(n){if(n&&n.oVersionUpdate){var r=n.oVersionUpdate.from,i=n.oVersionUpdate.to,o=new sap.ui.commons.Label({text:e.context.i18n.getText("i18n","videoContainer_newVersionLabel"),wrapping:!0,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}).addStyleClass("welcomeContentNewUpdate");r&&""!==r?e.context.service.Version.compareVersions(i,r).then(function(e){e>0&&t.addContent(o)}).done():t.addContent(o)}}).done();var n=new sap.ui.core.HTML("embeddedVideoHTML",{content:'<iframe width="100%" height="212" src="https://www.youtube.com/embed/lt0L1L9U7js?showinfo=0" frameborder="0" allowfullscreen></iframe>'});return t.addContent(n),t};return{getContainer:e}}),define("sap/watt/ideplatform/plugin/welcomescreen/ui/controls/BasicWelcomeActionContainer",["./BasicWelcomeContainer"],function(){"use strict";sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeContainer.extend("sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeActionContainer",{addButton:function(e){this.addContent(e)},renderer:{}})}),define("sap.watt.saptoolsets.fiori.common.welcomescreenimpl/ui/NewProjectContainer",["sap/watt/ideplatform/plugin/welcomescreen/ui/controls/BasicWelcomeActionContainer","sap/watt/ideplatform/plugin/welcomescreen/ui/controls/BasicWelcomeTile"],function(){"use strict";var e=function(){var e=this,t=new sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeActionContainer("newProjectContainer",{borderDesign:sap.ui.commons.enums.BorderDesign.None,showCollapseIcon:!1,title:new sap.ui.core.Title({text:e.context.i18n.getText("i18n","createNewContainer_containerTitle"),level:sap.ui.core.TitleLevel.H3})});if(t.setLayoutData(new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})),jQuery.browser.chrome){var n=new sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeTile("newQuickStartWithLayoutEditorProjectTile",{title:e.context.i18n.getText("i18n","createNewContainer_newQuickStartWithLayoutEditorProjectTile"),icon:"sap-icon://add-product",press:function(){e.context.service.usagemonitoring.report("welcome_screen","quickStart").done(),e.context.service.command.getCommand("ui5wysiwygeditor.quickStart").then(function(e){return e.execute()}).done()}});t.addButton(n)}var r=new sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeTile("newProjectTile",{title:e.context.i18n.getText("i18n","createNewContainer_newProjectTile"),icon:"sap-icon://watt/proj_template",press:function(){e.context.service.usagemonitoring.report("welcome_screen","project_template").done(),e.context.service.command.getCommand("template.createProject").then(function(e){return e.execute()}).done()}});t.addButton(r);var i=new sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeTile("newSampleAppTile",{title:e.context.i18n.getText("i18n","createNewContainer_fromSampleTile"),icon:"sap-icon://watt/proj_sample",press:function(){e.context.service.usagemonitoring.report("welcome_screen","project_sample_application").done(),e.context.service.command.getCommand("template.createReferenceProject").then(function(e){return e.execute()}).done()}});t.addButton(i);var o=new sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeTile("newExtensionProjectTile",{title:e.context.i18n.getText("i18n","createNewContainer_newExtensionTile"),icon:"sap-icon://watt/proj_extension",press:function(){e.context.service.usagemonitoring.report("welcome_screen","extension_project").done(),e.context.service.command.getCommand("template.createExtensionProject").then(function(e){return e.execute()}).done()}});return t.addButton(o),t};return{getContainer:e}}),define("sap.watt.saptoolsets.fiori.common.welcomescreenimpl/ui/ImportContainer",["sap/watt/ideplatform/plugin/welcomescreen/ui/controls/BasicWelcomeActionContainer","sap/watt/ideplatform/plugin/welcomescreen/ui/controls/BasicWelcomeTile"],function(){"use strict";var e=function(){var e=this,t=new sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeActionContainer("importContainer",{borderDesign:sap.ui.commons.enums.BorderDesign.None,showCollapseIcon:!1,title:new sap.ui.core.Title({text:e.context.i18n.getText("i18n","importContainer_containerTitle"),level:sap.ui.core.TitleLevel.H3})});t.setLayoutData(new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}));var n=new sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeTile("importArchiveTile",{title:e.context.i18n.getText("i18n","importContainer_archiveTile"),icon:"sap-icon://attachment-zip-file",press:function(){e.context.service.usagemonitoring.report("welcome_screen","import_archive").done(),e.context.service.import.openImportUI().then(function(t){return"ExecuteImport"===t?e.context.service.perspective.renderPerspective("development"):void 0}).done()}});t.addButton(n);var r=new sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeTile("importABAPTile",{title:e.context.i18n.getText("i18n","importContainer_abapTile"),icon:"sap-icon://sap-logo-shape",press:function(){e.context.service.usagemonitoring.report("welcome_screen","import_ABAP").done(),e.context.service.command.getCommand("repositorybrowser.importFromBSP").then(function(e){return e.execute()}).done()}});t.addButton(r);var i=new sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeTile("importHCPTile",{title:e.context.i18n.getText("i18n","importContainer_hcpTile"),icon:"sap-icon://world",press:function(){e.context.service.usagemonitoring.report("welcome_screen","import_HCP").done(),e.context.service.command.getCommand("repositorybrowser.importFromHelium").then(function(e){return e.execute()}).done()}}),o=sap.watt.getEnv("server_type");("java"===o||"local_hcproxy"===o)&&(i.setEnabled(!1),i.addStyleClass("disabledWelcomeTileDiv")),t.addButton(i);var a=new sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeTile("cloneGitTile",{title:e.context.i18n.getText("i18n","importContainer_gitTile"),icon:"sap-icon://watt/git",press:function(){e.context.service.usagemonitoring.report("welcome_screen","import_clone_GIT").done(),e.context.service.command.getCommand("gitclient.clone").then(function(t){return t.execute().then(function(t){return t?e.context.service.perspective.renderPerspective("development"):void 0})}).done()}});return t.addButton(a),t};return{getContainer:e}}),define("sap/watt/ideplatform/plugin/welcomescreen/ui/controls/BasicWelcomeLinksContainer",["./BasicWelcomeContainer"],function(){"use strict";sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeContainer.extend("sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeLinksContainer",{metadata:{properties:{i18nSource:"object",showDescription:{type:"boolean",defaultValue:"false"},linksModel:"object"}},setLinksModel:function(e,t){this.setProperty("linksModel",e);var n=this.getI18nSource(),r=this.getShowDescription(),i=new sap.ui.commons.RowRepeater({design:"BareShell",numberOfRows:e.data.length}),o=new sap.ui.commons.FormattedTextView,a=new sap.ui.model.json.JSONModel;a.setData(e),i.setModel(a);var s=new sap.ui.commons.Link({target:"_blank",press:function(){var e=this.getBindingContext().getObject().linkDesc;t(e)}});s.bindProperty("href","href"),s.bindProperty("text","linkDesc",function(e){return n.getText("i18n",e)});var u='<embed data-index="0"><br><embed data-index="1">';if(o.setHtmlText(u),o.addControl(s),r===!0){var c=new sap.ui.commons.Link;c.bindProperty("text","text",function(e){return n.getText("i18n",e)}),c.setEnabled(!1),c.addStyleClass("welcomeLinkLabel"),o.addControl(c)}i.bindRows("/data",o),this.removeContent(),this.addContent(i)},renderer:{}})}),define("sap.watt.saptoolsets.fiori.common.welcomescreenimpl/ui/ToolsContainer",["sap/watt/ideplatform/plugin/welcomescreen/ui/controls/BasicWelcomeLinksContainer"],function(){"use strict";var e=function(){var e=this,t=jQuery.sap.getModulePath("sap.watt.saptoolsets.fiori.common.plugin.welcomescreenimpl.helpfullinks",".json");return Q.sap.ajax({url:t,dataType:"json"}).then(function(t){var n=t[0],r=[];return r.push(e.context.service.hcpconnectivity.getLinkToCockPit()),r.push(e.context.service.hcpconnectivity.getLinkToUIThemeDesigner()),Q.spread(r,function(t,r){t&&""!==t&&n.data.push({href:t,linkDesc:"toolsContainer_cockpitLink"}),r&&""!==r&&n.data.push({href:r,linkDesc:"toolsContainer_themeDesignerLink"});var i=new sap.watt.ideplatform.plugin.welcomescreen.ui.controls.BasicWelcomeLinksContainer("toolsContainer",{borderDesign:sap.ui.commons.enums.BorderDesign.None,showCollapseIcon:!1,title:new sap.ui.core.Title({text:e.context.i18n.getText("i18n","toolsContainer_containerTitle"),level:sap.ui.core.TitleLevel.H3}),layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),i18nSource:e.context.i18n});return i.setLinksModel(n,function(t){e.context.service.usagemonitoring.report("welcome_screen",t).done()}),i})})};return{getContainer:e}}),define("sap.watt.saptoolsets.fiori.common.metadatahandler/service/metadataHandler",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{METADATA_FILE_NAME:"metadata.xml",WEBAPP_FOLDER_NAME:"webapp",MODEL_FOLDER_NAME:"model",LOCALSERVICE_FOLDER_NAME:"localService",WEBAPP_LOCALSERVICE_FOLDER_NAME:"webapp/localService",_oUpdateAnnotationsQueue:new Q.sap.Queue,onAfterGenerate:function(e){var t=e.params.model,n=t.connectionData,r="",i=null;if(e.params.model.webappPath)r=e.params.model.webappPath,i=this.context.service.filesystem.documentProvider.getDocument(e.params.targetDocument.getEntity().getFullPath()+"/"+r);else if(t.componentPath){var o=t.componentPath.split("/"),a="/"+o[1];i=this.context.service.filesystem.documentProvider.getDocument(a)}else i=Q(e.params.targetDocument);var s=this;return i.then(function(r){if(n){var i=t.componentPath?t.connectionData.serviceName:"",o=t.connectionData.metadataPath;return s.updateMetadataXml(r,n.metadataContent,i,o).then(function(){return s._addTemplateInfoToAppDescriptor(e).done(),t.annotationsXML||t.annotations?s._generateAnnotationFiles(r,t,o):void 0})}return t.annotationsXML||t.annotations?(s._addTemplateInfoToAppDescriptor(e).done(),s._generateAnnotationFiles(r,t,o)):void 0}).then(function(){return s.context.event.fireMetadataUploaded()})},_generateAnnotationFiles:function(e,t,n){var r=t.annotations,i=this,o=[];if(r)for(var a=0;a<r.length;a++){var s=r[a].filename,u=r[a].generateInModelFolder,c=r[a].content,l=r[a].destination?!1:!0;o.push(i.updateAnnotationDocument(e,s,u,c,n,l))}var p=t.annotationsXML;if(p){var f=p.filename;u=p.generateInModelFolder,c=p.content,o.push(i.updateAnnotationDocument(e,f,u,c,n))}return Q.all(o)},_getMetaDataPathByServiceName:function(t,n){var r=this;return Q.all([t.objectExists(this.WEBAPP_LOCALSERVICE_FOLDER_NAME),t.objectExists(this.LOCALSERVICE_FOLDER_NAME)]).spread(function(i,o){if(!i&&!o)return r.WEBAPP_LOCALSERVICE_FOLDER_NAME;var a;a=i?r.WEBAPP_LOCALSERVICE_FOLDER_NAME:r.LOCALSERVICE_FOLDER_NAME;var s=t.getEntity().getFullPath()+"/"+a;return r.context.service.filesystem.documentProvider.getDocument(s).then(function(t){return t.getCurrentMetadata().then(function(t){var i=e.find(t,function(e){return e.name===r.METADATA_FILE_NAME});return i?a+"/"+n:a})})})},getMetadataPath:function(e,t){if(e){var n=this,r=this.context.service.ui5projecthandler;return r.isManifestProjectGuidelinesType(e).then(function(i){return i?t?n._getMetaDataPathByServiceName(e,t).then(function(e){return e}):r.getHandlerFilePath(e).then(function(e){if(e){var t=e.length,r="/webapp".length,i=e.indexOf("/webapp",t-r)>-1;return i?n.WEBAPP_LOCALSERVICE_FOLDER_NAME:n.LOCALSERVICE_FOLDER_NAME}}):e.objectExists(n.WEBAPP_FOLDER_NAME).then(function(t){return t?e.objectExists(n.LOCALSERVICE_FOLDER_NAME).then(function(e){return e?n.WEBAPP_LOCALSERVICE_FOLDER_NAME:n.WEBAPP_FOLDER_NAME+"/"+n.MODEL_FOLDER_NAME}):n.MODEL_FOLDER_NAME})}).fail(function(){return n.MODEL_FOLDER_NAME})}},getMetadataDocuments:function(e){if(e){var t=this;return t.getMetadataPath(e).then(function(n){return e.getCurrentMetadata(!0).then(function(e){for(var r=[],i=0;i<e.length;i++){var o=e[i];if(!o.folder){var a=o.path,s=a.indexOf("/"+n+"/"+t.METADATA_FILE_NAME);-1!==s&&r.push(t.context.service.filesystem.documentProvider.getDocument(a))}}return Q.all(r)})})}return[]},_getMetadataFolderObject:function(e,t,n){if(e)return this.context.service.filesystem.documentProvider.getDocument(t.getEntity().getFullPath()+"/"+n);var r=n.split("/");return this._createDestinationFolder(t,0,r)},_createDestinationFolder:function(e,t,n){var r=this,i=n[t];return this._getFolderByName(e,i).then(function(e){return t<n.length-1?r._createDestinationFolder(e,++t,n):e})},_getFolderByName:function(e,t){var n=e.getEntity().getFullPath()+"/"+t;return this.context.service.document.getDocumentByPath(n).then(function(n){return n?n:e.createFolder(t)})},_createFileInLocation:function(e,t,n){var r=this;return e.objectExists(t).then(function(i){return r._getMetadataFolderObject(!!i,e,t).then(function(e){return e.importFile(new Blob([n]),!1,!0,r.METADATA_FILE_NAME)})})},updateMetadataXml:function(e,t,n,r){if(e&&t){var i=this;return Q.sap.require("sap/watt/lib/beautifiers/xml/vkbeautify").then(function(o){var a=o.xml(t);return r?i._createFileInLocation(e,r,a):i.getMetadataPath(e,n).then(function(t){return i._createFileInLocation(e,t,a)})})}},_fnGenerateAnnotationFile:function(e,t,n){return e.createFile(t).then(function(e){return e.setContent(n).then(function(){return e.save()})})},_createAnnotationFileInLocation:function(e,t,n,r){var i=this;return this._oUpdateAnnotationsQueue.next(function(){return e.objectExists(t).then(function(o){return i._getMetadataFolderObject(o,e,t).then(function(e){return i._fnGenerateAnnotationFile(e,n,r)})})})},updateAnnotationDocument:function(e,t,n,r,i,o){var a=this;return e&&r&&t?Q.sap.require("sap/watt/lib/beautifiers/xml/vkbeautify").then(function(s){var u=s.xml(r);if(n){if(i)return a._createAnnotationFileInLocation(e,i,t,u);var c=Q();return c=o?a._getLocalAnnotationsFolderLocation(e):a.getMetadataPath(e),c.then(function(n){return a._createAnnotationFileInLocation(e,n,t,u)})}return a._fnGenerateAnnotationFile(e,t,u)}):void 0},_getLocalAnnotationsFolderLocation:function(e){var t="webapp",n="annotations";return e.objectExists(t).then(function(e){return e?t+"/"+n:n})},_addTemplateInfoToAppDescriptor:function(e){var t=this.context.service.ui5projecthandler;if(e&&e.params&&e.params.selectedTemplate&&e.params.targetDocument){var n=e.params.selectedTemplate,r=e.params.targetDocument,i={id:n.getId(),version:n.getVersion()};return t.addSourceTemplate(r,i,!0).then(function(e){return e}).fail(function(e){return e&&"FileDoesNotExist"===e.name?!1:void 0})}return Q()}}}),function(){function e(e,t){this.code=e,this.message=t||Gr[e]}function t(t){var n=t.match(/\$?(?:(?![0-9-])(?:[\w-]+|\*):)?(?![0-9-])(?:[\w-]+|\*)|\(:|:\)|\/\/|\.\.|::|\d+(?:\.\d*)?(?:[eE][+-]?\d+)?|\.\d+(?:[eE][+-]?\d+)?|"[^"]*(?:""[^"]*)*"|'[^']*(?:''[^']*)*'|<<|>>|[!<>]=|(?![0-9-])[\w-]+:\*|\s+|./g);if(n){for(var r=0,i=0,o=n.length;o>i;i++)"(:"==n[i]?r++:":)"==n[i]&&r?r--:r||/^\s/.test(n[i])||(this[this.length++]=n[i]);if(r)throw new e("XPST0003","Unclosed comment")}}function n(){}function r(e,t,r,i){this.staticContext=e,this.item=t,this.scope=r||{},this.stack={},this.DOMAdapter=i||new n;var o=new Dr,a=o.getTimezoneOffset();this.dateTime=new Zt(o.getFullYear(),o.getMonth()+1,o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds()+o.getMilliseconds()/1e3,-a),this.timezone=new Pn(0,Nr.abs(~~(a/60)),Nr.abs(a%60),0,a>0)}function i(){this.dataTypes={},this.documents={},this.functions={},this.collations={},this.collections={}}function o(e,t,n){zr[e]=n,Wr[e]=t}function a(e,t){qr[e]=t}function s(n,r){var i=new t(n),o=p(i,r);if(!i.eof())throw new e("XPST0003","Unexpected token beyond end of query");if(!o)throw new e("XPST0003","Expected expression");this.internalExpression=o}function u(){}function c(){}function l(){this.items=[]}function p(t,n){var r;if(!t.eof()&&(r=f(t,n))){var i=new l;for(i.items.push(r);","==t.peek();){if(t.next(),t.eof()||!(r=f(t,n)))throw new e("XPST0003","Expected expression");i.items.push(r)}return i}}function f(e,t){return e.eof()?void 0:y(e,t)||h(e,t)||x(e,t)||F(e,t)}function d(){this.bindings=[],this.returnExpr=null}function h(t,n){if("for"==t.peek()&&"$"==t.peek(1).substr(0,1)){t.next();var r,i=new d;do i.bindings.push(g(t,n));while(","==t.peek()&&t.next());if("return"!=t.peek())throw new e("XPST0003","Expected 'return' token in for expression");if(t.next(),t.eof()||!(r=f(t,n)))throw new e("XPST0003","Expected return statement operand in for expression");return i.returnExpr=r,i}}function m(e,t,n,r){this.prefix=e,this.localName=t,this.namespaceURI=n,this.inExpr=r}function g(t,n){var r=t.peek().substr(1).match(ii);if(!r)throw new e("XPST0003","Expected binding in for expression");if("*"==r[1]||"*"==r[2])throw new e("XPST0003","Illegal use of wildcard in for expression binding variable name");if(t.next(),"in"!=t.peek())throw new e("XPST0003","Expected 'in' token in for expression binding");t.next();var i;if(t.eof()||!(i=f(t,n)))throw new e("XPST0003","Expected in statement operand in for expression binding");return new m(r[1]||null,r[2],r[1]?n.getURIForPrefix(r[1]):null,i)}function v(e,t,n){this.condExpr=e,this.thenExpr=t,this.elseExpr=n}function y(t,n){var r,i,o;if("if"==t.peek()&&"("==t.peek(1)){if(t.next(2),t.eof()||!(r=p(t,n)))throw new e("XPST0003","Expected if statement operand in conditional expression");if(")"!=t.peek())throw new e("XPST0003","Expected ')' token in for expression");if(t.next(),"then"!=t.peek())throw new e("XPST0003","Expected 'then' token in conditional if expression");if(t.next(),t.eof()||!(i=f(t,n)))throw new e("XPST0003","Expected then statement operand in condional expression");if("else"!=t.peek())throw new e("XPST0003","Expected 'else' token in conditional if expression");if(t.next(),t.eof()||!(o=f(t,n)))throw new e("XPST0003","Expected else statement operand in condional expression");return new v(r,i,o)}}function _(e){this.quantifier=e,this.bindings=[],this.satisfiesExpr=null}function x(t,n){var r=t.peek();if(("some"==r||"every"==r)&&"$"==t.peek(1).substr(0,1)){t.next();var i,o=new _(r);do o.bindings.push(w(t,n));while(","==t.peek()&&t.next());if("satisfies"!=t.peek())throw new e("XPST0003","Expected 'satisfies' token in quantified expression");if(t.next(),t.eof()||!(i=f(t,n)))throw new e("XPST0003","Expected satisfies statement operand in quantified expression");return o.satisfiesExpr=i,o}}function b(e,t,n,r){this.prefix=e,this.localName=t,this.namespaceURI=n,this.inExpr=r}function w(t,n){var r=t.peek().substr(1).match(ii);if(!r)throw new e("XPST0003","Expected binding in quantified expression");if("*"==r[1]||"*"==r[2])throw new e("XPST0003","Illegal use of wildcard in quantified expression binding variable name");if(t.next(),"in"!=t.peek())throw new e("XPST0003","Expected 'in' token in quantified expression binding");t.next();var i;if(t.eof()||!(i=f(t,n)))throw new e("XPST0003","Expected in statement operand in quantified expression binding");return new b(r[1]||null,r[2],r[1]?n.getURIForPrefix(r[1]):null,i)}function S(e,t,n){this.left=e,this.right=t,this.operator=n}function E(t,n){var r,i;if(!t.eof()&&(r=Et(t,n))){if(!(t.peek()in Yr))return r;var o=t.peek();if(t.next(),t.eof()||!(i=Et(t,n)))throw new e("XPST0003","Expected second operand in comparison expression");return new S(r,i,o)}}function C(e,t){var n=xr(e.left.evaluate(t),t);if(!n.length)return new $t(!1);var r=xr(e.right.evaluate(t),t);if(!r.length)return new $t(!1);for(var i,o,a=!1,s=0,u=n.length;u>s&&!a;s++)for(var c,l,p=0,f=r.length;f>p&&!a;p++)o=n[s],l=r[p],i=o instanceof En,c=l instanceof En,i&&c?(o=bn.cast(o),l=bn.cast(l)):(i?l instanceof Pn?o=Pn.cast(o):l instanceof Cn?o=Cn.cast(o):l.primitiveKind&&(o=qr[l.primitiveKind].cast(o)):c&&(o instanceof Pn?l=Pn.cast(l):o instanceof Cn?l=Cn.cast(l):o.primitiveKind&&(l=qr[o.primitiveKind].cast(l))),o instanceof qt&&(o=bn.cast(o)),l instanceof qt&&(l=bn.cast(l))),a=Jr[$r[e.operator]](o,l,t).valueOf();return new $t(a)}function T(e,t){var n=xr(e.left.evaluate(t),t);if(!n.length)return null;xt(t,n,"?","first operand of '"+e.operator+"'");var r=xr(e.right.evaluate(t),t);if(!r.length)return null;xt(t,r,"?","second operand of '"+e.operator+"'");var i=n[0],o=r[0];return i instanceof En&&(i=bn.cast(i)),o instanceof En&&(o=bn.cast(o)),i instanceof qt&&(i=bn.cast(i)),o instanceof qt&&(o=bn.cast(o)),Jr[e.operator](i,o,t)}function P(e,t){var n=e.left.evaluate(t);if(!n.length)return null;xt(t,n,"?","first operand of '"+e.operator+"'"),_t(t,n,Kn,"first operand of '"+e.operator+"'");var r=e.right.evaluate(t);return r.length?(xt(t,r,"?","second operand of '"+e.operator+"'"),_t(t,r,Kn,"second operand of '"+e.operator+"'"),Kr[e.operator](n[0],r[0],t)):null}function I(e){this.left=e,this.items=[]}function D(t,n){var r;if(!t.eof()&&(r=N(t,n))){if(!(t.peek()in Zr))return r;for(var i,o=new I(r);(i=t.peek())in Zr;){if(t.next(),t.eof()||!(r=N(t,n)))throw new e("XPST0003","Expected second operand in additive expression");o.items.push([i,r])}return o}}function A(e){this.left=e,this.items=[]}function N(t,n){var r;if(!t.eof()&&(r=Tt(t,n))){if(!(t.peek()in ei))return r;for(var i,o=new A(r);(i=t.peek())in ei;){if(t.next(),t.eof()||!(r=Tt(t,n)))throw new e("XPST0003","Expected second operand in multiplicative expression");o.items.push([i,r])}return o}}function k(e,t){this.operator=e,this.expression=t}function O(t,n){if(!t.eof()){if(!(t.peek()in ti))return R(t,n);for(var r,i="+";t.peek()in ti;)"-"==t.peek()&&(i="-"==i?"+":"-"),t.next();if(t.eof()||!(r=R(t,n)))throw new e("XPST0003","Expected operand in unary expression");return new k(i,r)}}function R(e,t){return q(e,t)}function j(e){this.left=e,this.items=[]}function F(t,n){var r;if(!t.eof()&&(r=M(t,n))){if("or"!=t.peek())return r;for(var i=new j(r);"or"==t.peek();){if(t.next(),t.eof()||!(r=M(t,n)))throw new e("XPST0003","Expected second operand in logical expression");i.items.push(r)}return i}}function L(e){this.left=e,this.items=[]}function M(t,n){var r;if(!t.eof()&&(r=E(t,n))){if("and"!=t.peek())return r;for(var i=new L(r);"and"==t.peek();){if(t.next(),t.eof()||!(r=E(t,n)))throw new e("XPST0003","Expected second operand in logical expression");i.items.push(r)}return i}}function B(){}function U(e,t){return e.eof()?void 0:dt(e,t)||G(e,t)}function V(t,n,r){for(var i;"["==t.peek();){if(t.next(),t.eof()||!(i=p(t,n)))throw new e("XPST0003","Expected expression in predicate");if(r.predicates.push(i),"]"!=t.peek())throw new e("XPST0003","Expected ']' token in predicate");t.next()}}function Q(e,t){this.axis=e,this.test=t,this.predicates=[]}function G(t,n){var r,i,o=t.peek();if("::"==t.peek(1)){if(!(o in ni))throw new e("XPST0003","Unknown axis name: "+o);if(t.next(2),t.eof()||!(r=$(t,n)))throw new e("XPST0003","Expected node test expression in axis step");i=new Q(o,r)}else if(".."==o)t.next(),i=new Q("parent",new J("node"));else if("@"==o){if(t.next(),t.eof()||!(r=$(t,n)))throw new e("XPST0003","Expected node test expression in axis step");i=new Q("attribute",r)}else{if(t.eof()||!(r=$(t,n)))return;i=new Q(r instanceof J&&"attribute"==r.name?"attribute":"child",r)}return V(t,n,i),i}function H(e,t,n){for(var r;e;e=n(e,"nextSibling"))t.push(e),(r=n(e,"firstChild"))&&H(r,t,n)
}function z(e,t,n){for(var r;e;e=n(e,"previousSibling"))(r=n(e,"lastChild"))&&z(r,t,n),t.push(e)}function W(){this.items=[]}function q(t,n){if(!t.eof()){var r,i="/",o="//",a=new W,s=t.peek();if((s==o||s==i)&&(t.next(),a.items.push(new gt(null,"root",Ur)),s==o&&a.items.push(new Q("descendant-or-self",new J("node")))),!t.eof()&&(r=U(t,n))){for(a.items.push(r);(s=t.peek())==i||s==o;){if(s==o&&a.items.push(new Q("descendant-or-self",new J("node"))),t.next(),t.eof()||!(r=U(t,n)))throw new e("XPST0003","Expected path step expression");a.items.push(r)}return 1==a.items.length?a.items[0]:a}if(s==i)return a.items[0];if(s==o)throw new e("XPST0003","Expected path step expression")}}function X(){}function $(e,t){return e.eof()?void 0:K(e,t)||Z(e,t)}function J(e){this.name=e,this.args=[]}function K(t){var n=t.peek();if("("==t.peek(1)){if(!(n in ri))throw new e("XPST0003","Unknown '"+n+"' kind test");t.next(2);var r=new J(n);if(")"!=t.peek());else{if("schema-attribute"==n)throw new e("XPST0003","Expected attribute declaration in 'schema-attribute' kind test");if("schema-element"==n)throw new e("XPST0003","Expected element declaration in 'schema-element' kind test")}if(")"!=t.peek())throw new e("XPST0003","Expected ')' token in kind test");return t.next(),r}}function Y(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}function Z(t,n){var r=t.peek().match(ii);if(r){if("*"==r[1]&&"*"==r[2])throw new e("XPST0003","Illegal use of *:* wildcard in name test");return t.next(),new Y(r[1]||null,r[2],r[1]?"*"==r[1]?"*":n.getURIForPrefix(r[1])||null:n.defaultElementNamespace)}}function et(e,t){return e.eof()?void 0:it(e,t)||nt(e,t)||vt(e,t)||mt(e,t)||at(e,t)}function tt(e){this.expression=e}function nt(t,n){if("("==t.peek()){t.next();var r=null;if(")"!=t.peek()&&(r=p(t,n)),")"!=t.peek())throw new e("XPST0003","Expected ')' token in parenthesized expression");return t.next(),new tt(r)}}function rt(){}function it(e){return"."==e.peek()?(e.next(),new rt):void 0}function ot(){}function at(e,t){return e.eof()?void 0:ut(e,t)||pt(e,t)}function st(e){this.value=e}function ut(e){var t=e.peek(),n=ct(t);return n?(e.next(),new st(n)):void 0}function ct(e){var t=e.match(oi);if(t){var n=Dn;return t[5]?n=sn:(t[2]||t[3])&&(n=an),new n(+e)}}function lt(e){this.value=e}function pt(e){var t=e.peek().match(ai);return t?(e.next(),new lt(new bn(t[1]?t[1].replace("''","'"):t[2]?t[2].replace('""','"'):""))):void 0}function ft(e){this.expression=e,this.predicates=[]}function dt(e,t){var n;if(!e.eof()&&(n=et(e,t))){var r=new ft(n);return V(e,t,r),0==r.predicates.length?r.expression:r}}function ht(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}function mt(t,n){if("$"==t.peek().substr(0,1)){var r=t.peek().substr(1).match(ii);if(r){if("*"==r[1]||"*"==r[2])throw new e("XPST0003","Illegal use of wildcard in var expression variable name");var i=new ht(r[1]||null,r[2],r[1]?n.getURIForPrefix(r[1]):null);return t.next(),i}}}function gt(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n,this.args=[]}function vt(t,n){var r=t.peek().match(ii);if(r&&"("==t.peek(1)){if(!r[1]&&r[2]in ri)return G(t,n);if("*"==r[1]||"*"==r[2])throw new e("XPST0003","Illegal use of wildcard in function name");var i,o=new gt(r[1]||null,r[2],r[1]?n.getURIForPrefix(r[1])||null:n.defaultFunctionNamespace);if(t.next(2),")"!=t.peek()){do{if(t.eof()||!(i=f(t,n)))throw new e("XPST0003","Expected function call argument");o.args.push(i)}while(","==t.peek()&&t.next());if(")"!=t.peek())throw new e("XPST0003","Expected ')' token in function call")}return t.next(),o}}function yt(t,n,r,i,o){for(var a,s,u=i.length,c=n.length,l=0;l<n.length&&!n[l][2];)l++;if(u>c)throw new e("XPST0017","Function "+t+"() must have "+(c?" no more than ":"")+c+" argument"+(c>1||!c?"s":""));if(l>u)throw new e("XPST0017","Function "+t+"() must have "+(l==c?"exactly":"at least")+" "+l+" argument"+(c>1?"s":""));for(var p=0;u>p;p++)s=n[p],a=i[p],xt(o,a,s[1],si[p]+" argument of "+t+"()"),_t(o,a,s[0],si[p]+" argument of "+t+"()"),"+"!=s[1]&&"*"!=s[1]&&(i[p]=a.length?a[0]:null)}function _t(t,n,r,i){for(var o,a,s=0,u=n.length;u>s;s++)if(a=n[s],r==Kn||r.prototype instanceof Kn){if(!t.DOMAdapter.isNode(a))throw new e("XPTY0004","Required item type of "+i+" is "+r);if(r!=Kn&&(o=t.DOMAdapter.getProperty(a,"nodeType"),[null,tr,Yn,rr,rr,null,null,nr,Zn,er,null,null,null][o]!=r))throw new e("XPTY0004","Required item type of "+i+" is "+r)}else if(r==zt||r.prototype instanceof zt){if(a=xr([a],t)[0],r!=zt&&(a instanceof En?a=r.cast(a):r==bn?a instanceof qt&&(a=bn.cast(a)):r==sn&&Wt(a)&&(a=r.cast(a))),!(a instanceof r))throw new e("XPTY0004","Required item type of "+i+" is "+r);n[s]=a}}function xt(t,n,r,i){var o=n.length;if("?"==r){if(o>1)throw new e("XPTY0004","Required cardinality of "+i+" is one or zero")}else if("+"==r){if(1>o)throw new e("XPTY0004","Required cardinality of "+i+" is one or more")}else if("*"!=r&&1!=o)throw new e("XPTY0004","Required cardinality of "+i+" is exactly one")}function bt(e){this.left=e,this.items=[]}function wt(t,n){var r,i;if(!t.eof()&&(r=It(t,n))){if("intersect"!=(i=t.peek())&&"except"!=i)return r;for(var o=new bt(r);"intersect"==(i=t.peek())||"except"==i;){if(t.next(),t.eof()||!(r=It(t,n)))throw new e("XPST0003","Expected second operand in "+i+" expression");o.items.push([i,r])}return o}}function St(e,t){this.left=e,this.right=t}function Et(t,n){var r,i;if(!t.eof()&&(r=D(t,n))){if("to"!=t.peek())return r;if(t.next(),t.eof()||!(i=D(t,n)))throw new e("XPST0003","Expected second operand in range expression");return new St(r,i)}}function Ct(e){this.left=e,this.items=[]}function Tt(t,n){var r,i;if(!t.eof()&&(r=wt(t,n))){if("|"!=(i=t.peek())&&"union"!=i)return r;for(var o=new Ct(r);"|"==(i=t.peek())||"union"==i;){if(t.next(),t.eof()||!(r=wt(t,n)))throw new e("XPST0003","Expected second operand in union expression");o.items.push(r)}return o}}function Pt(e,t){this.expression=e,this.type=t}function It(t,n){var r,i;if(!t.eof()&&(r=At(t,n))){if("instance"!=t.peek()||"of"!=t.peek(1))return r;if(t.next(2),t.eof()||!(i=Ut(t,n)))throw new e("XPST0003","Expected second operand in instance of expression");return new Pt(r,i)}}function Dt(e,t){this.expression=e,this.type=t}function At(t,n){var r,i;if(!t.eof()&&(r=kt(t,n))){if("treat"!=t.peek()||"as"!=t.peek(1))return r;if(t.next(2),t.eof()||!(i=Ut(t,n)))throw new e("XPST0003","Expected second operand in treat expression");return new Dt(r,i)}}function Nt(e,t){this.expression=e,this.type=t}function kt(t,n){var r,i;if(!t.eof()&&(r=Rt(t,n))){if("castable"!=t.peek()||"as"!=t.peek(1))return r;if(t.next(2),t.eof()||!(i=Qt(t,n)))throw new e("XPST0003","Expected second operand in castable expression");return new Nt(r,i)}}function Ot(e,t){this.expression=e,this.type=t}function Rt(t,n){var r,i;if(!t.eof()&&(r=O(t,n))){if("cast"!=t.peek()||"as"!=t.peek(1))return r;if(t.next(2),t.eof()||!(i=Qt(t,n)))throw new e("XPST0003","Expected second operand in cast expression");return new Ot(r,i)}}function jt(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}function Ft(t,n){var r=t.peek().match(ii);if(r){if("*"==r[1]||"*"==r[2])throw new e("XPST0003","Illegal use of wildcard in type name");return t.next(),new jt(r[1]||null,r[2],r[1]?n.getURIForPrefix(r[1]):null)}}function Lt(e){this.test=e}function Mt(t,n){if(!t.eof()){var r;if("item"==t.peek()&&"("==t.peek(1)){if(t.next(2),")"!=t.peek())throw new e("XPST0003","Expected ')' token in item type expression");return t.next(),new Lt}return(r=K(t,n))?new Lt(r):(r=Ft(t,n))?new Lt(r):void 0}}function Bt(e,t){this.itemType=e||null,this.occurence=t||null}function Ut(t,n){if(!t.eof()){if("empty-sequence"==t.peek()&&"("==t.peek(1)){if(t.next(2),")"!=t.peek())throw new e("XPST0003","Expected ')' token in sequence type");return t.next(),new Bt}var r,i;return!t.eof()&&(r=Mt(t,n))?(i=t.peek(),"?"==i||"*"==i||"+"==i?t.next():i=null,new Bt(r,i)):void 0}}function Vt(e,t){this.itemType=e||null,this.occurence=t||null}function Qt(e,t){var n,r;return!e.eof()&&(n=Ft(e,t))?(r=e.peek(),"?"==r?e.next():r=null,new Vt(n,r)):void 0}function Gt(){}function Ht(){}function zt(){}function Wt(e){return e instanceof fn||e instanceof sn||e instanceof an}function qt(e,t,n,r,i){this.scheme=e,this.authority=t,this.path=n,this.query=r,this.fragment=i}function Xt(e){this.value=e}function $t(e){this.value=e}function Jt(e,t,n,r,i){this.year=e,this.month=t,this.day=n,this.timezone=r,this.negative=i}function Kt(e,t){return 2==t&&(0==e%400||0!=e%100&&0==e%4)?29:fi[t-1]}function Yt(e,t){if(!t){var n=Kt(e.year,e.month);if(e.day>n)for(;e.day>n;)e.month+=1,e.month>12&&(e.year+=1,0==e.year&&(e.year=1),e.month=1),e.day-=n,n=Kt(e.year,e.month);else if(e.day<1)for(;e.day<1;)e.month-=1,e.month<1&&(e.year-=1,0==e.year&&(e.year=-1),e.month=12),n=Kt(e.year,e.month),e.day+=n}return e.month>12?(e.year+=~~(e.month/12),0==e.year&&(e.year=1),e.month=e.month%12):e.month<1&&(e.year+=~~(e.month/12)-1,0==e.year&&(e.year=-1),e.month=e.month%12+12),e}function Zt(e,t,n,r,i,o,a,s){this.year=e,this.month=t,this.day=n,this.hours=r,this.minutes=i,this.seconds=o,this.timezone=a,this.negative=s}function en(e,t){return sValue=Cr(e),arguments.length<2&&(t=2),(sValue.length<t+1?new Pr(t+1-sValue.length).join("0"):"")+sValue}function tn(e){var t=e.timezone;return null==t?"":t?(t>0?"+":"-")+en(Nr.abs(~~(t/60)))+":"+en(Nr.abs(t%60)):"Z"}function nn(e){return(e.negative?"-":"")+en(e.year,4)+"-"+en(e.month)+"-"+en(e.day)}function rn(e){var t=Cr(e.seconds).split(".");return en(e.hours)+":"+en(e.minutes)+":"+en(t[0])+(t.length>1?"."+t[1]:"")}function on(e){return Yt(Sn(e))}function an(e){this.value=e}function sn(e){this.value=e}function un(e,t,n,r,i,o,a){this.year=e,this.month=t,this.day=n,this.hours=r,this.minutes=i,this.seconds=o,this.negative=a}function cn(e){return(e.year?e.year+"Y":"")+(e.month?e.month+"M":"")}function ln(e){return(e.day?e.day+"D":"")+(e.hours||e.minutes||e.seconds?"T"+(e.hours?e.hours+"H":"")+(e.minutes?e.minutes+"M":"")+(e.seconds?e.seconds+"S":""):"")}function pn(e){return Tn(In(e))}function fn(e){this.value=e}function dn(e,t){this.day=e,this.timezone=t}function hn(e,t){this.month=e,this.timezone=t}function mn(e,t,n){this.month=e,this.day=t,this.timezone=n}function gn(e,t){this.year=e,this.timezone=t}function vn(e,t,n){this.year=e,this.month=t,this.timezone=n}function yn(e){this.value=e}function _n(){}function xn(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}function bn(e){this.value=e}function wn(e,t,n,r){this.hours=e,this.minutes=t,this.seconds=n,this.timezone=r}function Sn(e){return(e.seconds>=60||e.seconds<0)&&(e.minutes+=~~(e.seconds/60)-(e.seconds<0&&e.seconds%60?1:0),e.seconds=e.seconds%60+(e.seconds<0&&e.seconds%60?60:0)),(e.minutes>=60||e.minutes<0)&&(e.hours+=~~(e.minutes/60)-(e.minutes<0&&e.minutes%60?1:0),e.minutes=e.minutes%60+(e.minutes<0&&e.minutes%60?60:0)),(e.hours>=24||e.hours<0)&&(e instanceof Zt&&(e.day+=~~(e.hours/24)-(e.hours<0&&e.hours%24?1:0)),e.hours=e.hours%24+(e.hours<0&&e.hours%24?24:0)),e}function En(e){this.value=e}function Cn(e,t,n){un.call(this,e,t,0,0,0,0,n)}function Tn(e){return e.month>=12&&(e.year+=~~(e.month/12),e.month%=12),e}function Pn(e,t,n,r,i){un.call(this,0,0,e,t,n,r,i)}function In(e){return e.seconds>=60&&(e.minutes+=~~(e.seconds/60),e.seconds%=60),e.minutes>=60&&(e.hours+=~~(e.minutes/60),e.minutes%=60),e.hours>=24&&(e.day+=~~(e.hours/24),e.hours%=24),e}function Dn(e){this.value=e}function An(e){this.value=e}function Nn(e){this.value=e}function kn(e){this.value=e}function On(e){this.value=e}function Rn(e){this.value=e}function jn(e){this.value=e}function Fn(e){this.value=e}function Ln(e){this.value=e}function Mn(e){this.value=e}function Bn(e){this.value=e}function Un(e){this.value=e}function Vn(e){this.value=e}function Qn(e){this.value=e}function Gn(e){this.value=e}function Hn(e){this.value=e}function zn(e){this.value=e}function Wn(e){this.value=e}function qn(e){this.value=e}function Xn(e){this.value=e}function $n(e){this.value=e}function Jn(){}function Kn(){}function Yn(){}function Zn(){}function er(){}function tr(){}function nr(){}function rr(){}function ir(e,t,n){var r=dr(e),i=dr(t);return new $t("lt"==n?i>r:"gt"==n?r>i:r==i)}function or(e,t,n){return ar(Zt.cast(e),Zt.cast(t),n)}function ar(e,t,n){var r=new Pn(0,0,0,0),i=yr(e,r).toString(),o=yr(t,r).toString();return new $t("lt"==n?o>i:"gt"==n?i>o:i==o)}function sr(e,t,n){var r;e instanceof Jt?r=new Jt(e.year,e.month,e.day,e.timezone,e.negative):e instanceof Zt&&(r=new Zt(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative)),r.year=r.year+t.year*("-"==n?-1:1),r.month=r.month+t.month*("-"==n?-1:1),Yt(r,!0);var i=Kt(r.year,r.month);return r.day>i&&(r.day=i),r}function ur(e,t,n){var r;return e instanceof Jt?(r=new Jt(e.year,e.month,e.day,e.timezone,e.negative),r.day=r.day+t.day*("-"==n?-1:1),Yt(r)):e instanceof Zt&&(r=new Zt(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative),r.seconds=r.seconds+t.seconds*("-"==n?-1:1),r.minutes=r.minutes+t.minutes*("-"==n?-1:1),r.hours=r.hours+t.hours*("-"==n?-1:1),r.day=r.day+t.day*("-"==n?-1:1),on(r)),r}function cr(e){return(60*(60*(24*e.day+e.hours)+e.minutes)+e.seconds)*(e.negative?-1:1)}function lr(e){var t=(e=Nr.round(e))<0,n=~~((e=Nr.abs(e))/86400),r=~~((e-=24*3600*n)/3600),i=~~((e-=3600*r)/60),o=e-=60*i;return new Pn(n,r,i,o,t)}function pr(e){return(12*e.year+e.month)*(e.negative?-1:1)}function fr(e){var t=(e=Nr.round(e))<0,n=~~((e=Nr.abs(e))/12),r=e-=12*n;return new Cn(n,r,t)}function dr(e){return e.seconds+60*(e.minutes-(null!=e.timezone?e.timezone%60:0)+60*(e.hours-(null!=e.timezone?~~(e.timezone/60):0)))}function hr(e,t){if(Or(e)||Nr.abs(e)==Fr||Or(t)||Nr.abs(t)==Fr)return 0;var n=Cr(e).match(oi),r=Cr(t).match(oi),i=Nr.max(1,(n[2]||n[3]||"").length+(n[5]||0)*("+"==n[4]?-1:1),(r[2]||r[3]||"").length+(r[5]||0)*("+"==r[4]?-1:1));return i+(i%2?0:1)}function mr(e,t,n){return new(e instanceof Dn&&t instanceof Dn&&n==Nr.round(n)?Dn:an)(n)}function gr(e,t){if(null==e)return null;var n=e[t]*(e.negative?-1:1);return"seconds"==t?new an(n):new Dn(n)}function vr(e,t){if(null==e)return null;if("timezone"==t){var n=e.timezone;return null==n?null:new Pn(0,Nr.abs(~~(n/60)),Nr.abs(n%60),0,0>n)}var r=e[t];return e instanceof Jt||"hours"==t&&24==r&&(r=0),e instanceof wn||(r*=e.negative?-1:1),"seconds"==t?new an(r):new Dn(r)}function yr(e,t){if(null==e)return null;var n;if(n=e instanceof Jt?new Jt(e.year,e.month,e.day,e.timezone,e.negative):e instanceof wn?new wn(e.hours,e.minutes,e.seconds,e.timezone,e.negative):new Zt(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative),null==t)n.timezone=null;else{var r=cr(t)/60;if(null!=e.timezone){var i=r-e.timezone;e instanceof Jt?0>i&&n.day--:(n.minutes+=i%60,n.hours+=~~(i/60)),on(n)}n.timezone=r}return n}function _r(t,n){if(!t.length)return!1;var r=t[0];if(n.DOMAdapter.isNode(r))return!0;if(1==t.length){if(r instanceof $t)return r.value.valueOf();if(r instanceof bn)return!!r.valueOf().length;if(Wt(r))return!(Or(r.valueOf())||0==r.valueOf());throw new e("FORG0006","Effective boolean value is defined only for sequences containing booleans, strings, numbers, URIs, or nodes")}throw new e("FORG0006","Effective boolean value is not defined for a sequence of two or more items")}function xr(e,t){for(var n,r,i=[],o=0,a=e.length;a>o;o++){if(n=e[o],r=null,null==n)r=null;else if(t.DOMAdapter.isNode(n)){var s=t.DOMAdapter.getProperty;switch(s(n,"nodeType")){case 1:r=new En(s(n,"textContent"));break;case 2:r=new En(s(n,"value"));break;case 3:case 4:case 8:r=new En(s(n,"data"));break;case 7:r=new En(s(n,"data"));break;case 9:var u=s(n,"documentElement");r=new En(u?s(u,"textContent"):"")}}else n instanceof zt&&(r=n);null!=r&&i.push(r)}return i}function br(e,t){return e.sort(function(e,n){var r=t.DOMAdapter.compareDocumentPosition(e,n);return 2&r?1:4&r?-1:0})}function wr(t,n){var r="À-ÖØ-öø-˿",i="Ͱ-ͽͿ-῿‌-‍",o="⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�",a="A-Z_a-z\\-.0-9·"+r+"̀-ͯ"+i+"‿-⁀"+o,s="A-Z_a-z"+r+i+o;if(t=t.replace(/\[\\i-\[:\]\]/g,"["+s+"]").replace(/\[\\c-\[:\]\]/g,"["+a+"]").replace(/\\i/g,"[:"+s+"]").replace(/\\I/g,"[^:"+s+"]").replace(/\\c/g,"[:"+a+"]").replace(/\\C/g,"[^:"+a+"]"),n&&!n.match(/^[smix]+$/))throw new e("FORX0001");var u=n.indexOf("s")>=0,c=n.indexOf("x")>=0;if(u||c){n=n.replace(/[sx]/g,"");for(var l,p=[],f=/\s/,d=0,h=t.length,m=!1,g="";h>d;d++)l=t.charAt(d),"\\"!=g&&("["==l?m=!0:"]"==l&&(m=!1)),!m&&c&&f.test(l)||(p[p.length]=!m&&u&&"."==l&&"\\"!=g?"(?:.|\\s)":l),g=l;t=p.join("")}return new Ir(t,n+"g")}function Sr(){}function Er(e,t,n){("undefined"==typeof t||null===t)&&(t="");var o=e[0];"undefined"==typeof o&&(o=null);var a=o&&"DIV"==(9==o.nodeType?o:o.ownerDocument).createElement("div").tagName?Ui:Vi;a.namespaceResolver=n;var u=new s(Cr(t),a);a.namespaceResolver=null;var c,l=new Fi,p=ki;Mi?p=a==Ui?Ri:ji:Bi&&a==Ui&&(p=Oi),c=u.evaluate(new r(a,o,null,p));for(var f,d=0,h=c.length;h>d;d++)l.push(p.isNode(f=c[d])?f:i.xs2js(f));return l}var Cr=window.String,Tr=(window.Boolean,window.Number),Pr=(window.Object,window.Array),Ir=window.RegExp,Dr=window.Date,Ar=window.Function,Nr=window.Math,kr=window.Error,Or=(window.SyntaxError,window.TypeError,window.isNaN),Rr=window.isFinite,jr=window.NaN,Fr=window.Infinity,Lr=function(){return Cr.prototype.trim?function(e){return Cr(e).trim()}:function(e){return Cr(e).replace(/^\s+|\s+$/g,"")}}(),Mr=function(){return Pr.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}}(),Br="http://www.w3.org/2001/XMLSchema",Ur="http://www.w3.org/2005/xpath-functions",Vr="http://www.w3.org/2000/xmlns/",Qr="http://www.w3.org/XML/1998/namespace";e.prototype=new kr;var Gr={};Gr.XPDY0002="Evaluation of an expression relies on some part of the dynamic context that has not been assigned a value.",Gr.XPST0003="Expression is not a valid instance of the grammar",Gr.XPTY0004="Type is not appropriate for the context in which the expression occurs",Gr.XPST0008="Expression refers to an element name, attribute name, schema type name, namespace prefix, or variable name that is not defined in the static context",Gr.XPST0010="Axis not supported",Gr.XPST0017="Expanded QName and number of arguments in a function call do not match the name and arity of a function signature",Gr.XPTY0018="The result of the last step in a path expression contains both nodes and atomic values",Gr.XPTY0019="The result of a step (other than the last step) in a path expression contains an atomic value.",Gr.XPTY0020="In an axis step, the context item is not a node.",Gr.XPST0051="It is a static error if a QName that is used as an AtomicType in a SequenceType is not defined in the in-scope schema types as an atomic type.",Gr.XPST0081="A QName used in an expression contains a namespace prefix that cannot be expanded into a namespace URI by using the statically known namespaces.",Gr.FORG0001="Invalid value for cast/constructor.",Gr.FORG0003="fn:zero-or-one called with a sequence containing more than one item.",Gr.FORG0004="fn:one-or-more called with a sequence containing no items.",Gr.FORG0005="fn:exactly-one called with a sequence containing zero or more than one item.",Gr.FORG0006="Invalid argument type.",Gr.FODC0001="No context document.",Gr.FORX0001="Invalid regular expression flags.",Gr.FOCA0002="Invalid lexical value.",Gr.FOCH0002="Unsupported collation.",Gr.FONS0004="No namespace found for prefix.",t.prototype.index=0,t.prototype.length=0,t.prototype.reset=function(){this.index=0},t.prototype.peek=function(e){return this[this.index+(e||0)]||""},t.prototype.next=function(e){return(this.index+=e||1)<this.length},t.prototype.back=function(e){return(this.index-=e||1)>0},t.prototype.eof=function(){return this.index>=this.length},n.prototype.isNode=function(e){return e&&!!e.nodeType},n.prototype.getProperty=function(e,t){return e[t]},n.prototype.isSameNode=function(e,t){return e==t},n.prototype.compareDocumentPosition=function(e,t){return e.compareDocumentPosition(t)},n.prototype.lookupNamespaceURI=function(e,t){return e.lookupNamespaceURI(t)},n.prototype.getElementById=function(e,t){return e.getElementById(t)},n.prototype.getElementsByTagNameNS=function(e,t,n){return e.getElementsByTagNameNS(t,n)},r.prototype.item=null,r.prototype.position=0,r.prototype.size=0,r.prototype.scope=null,r.prototype.stack=null,r.prototype.dateTime=null,r.prototype.timezone=null,r.prototype.staticContext=null,r.prototype.pushVariable=function(e,t){this.stack.hasOwnProperty(e)||(this.stack[e]=[]),this.stack[e].push(this.scope[e]),this.scope[e]=t},r.prototype.popVariable=function(e){this.stack.hasOwnProperty(e)&&(this.scope[e]=this.stack[e].pop(),this.stack[e].length||(delete this.stack[e],"undefined"==typeof this.scope[e]&&delete this.scope[e]))},i.prototype.baseURI=null,i.prototype.dataTypes=null,i.prototype.documents=null,i.prototype.functions=null,i.prototype.defaultFunctionNamespace=null,i.prototype.collations=null,i.prototype.defaultCollationName=Ur+"/collation/codepoint",i.prototype.collections=null,i.prototype.namespaceResolver=null,i.prototype.defaultElementNamespace=null;var Hr=/^(?:\{([^\}]+)\})?(.+)$/;i.prototype.setDataType=function(e,t){var n=e.match(Hr);n&&n[1]!=Br&&(this.dataTypes[e]=t)},i.prototype.getDataType=function(e){var t=e.match(Hr);return t?t[1]==Br?qr[Ir.$2]:this.dataTypes[e]:void 0},i.prototype.setDocument=function(e,t){this.documents[e]=t},i.prototype.setFunction=function(e,t){var n=e.match(Hr);n&&n[1]!=Ur&&(this.functions[e]=t)},i.prototype.getFunction=function(e){var t=e.match(Hr);return t?t[1]==Ur?zr[Ir.$2]:this.functions[e]:void 0},i.prototype.setCollation=function(e,t){this.collations[e]=t},i.prototype.getCollation=function(e){return this.collations[e]},i.prototype.setCollection=function(e,t){this.collections[e]=t},i.prototype.getURIForPrefix=function(t){var n,r=this.namespaceResolver,i=r&&r.lookupNamespaceURI?r.lookupNamespaceURI:r;if(i instanceof Ar&&(n=i.call(r,t)))return n;if("fn"==t)return Ur;if("xs"==t)return Br;if("xml"==t)return Qr;if("xmlns"==t)return Vr;throw new e("XPST0081","Prefix '"+t+"' has not been declared")},i.js2xs=function(e){return e="boolean"==typeof e?new $t(e):"number"==typeof e?Or(e)||!Rr(e)?new sn(e):ct(Cr(e)):new bn(Cr(e))},i.xs2js=function(e){return e=e instanceof $t?e.valueOf():Wt(e)?e.valueOf():e.toString()};var zr={},Wr={},qr={},Xr={};s.prototype.internalExpression=null,s.prototype.evaluate=function(e){return this.internalExpression.evaluate(e)},u.prototype.equals=function(){throw"Not implemented"},u.prototype.compare=function(){throw"Not implemented"},c.ANYSIMPLETYPE_DT=1,c.STRING_DT=2,c.BOOLEAN_DT=3,c.DECIMAL_DT=4,c.FLOAT_DT=5,c.DOUBLE_DT=6,c.DURATION_DT=7,c.DATETIME_DT=8,c.TIME_DT=9,c.DATE_DT=10,c.GYEARMONTH_DT=11,c.GYEAR_DT=12,c.GMONTHDAY_DT=13,c.GDAY_DT=14,c.GMONTH_DT=15,c.HEXBINARY_DT=16,c.BASE64BINARY_DT=17,c.ANYURI_DT=18,c.QNAME_DT=19,c.NOTATION_DT=20,c.NORMALIZEDSTRING_DT=21,c.TOKEN_DT=22,c.LANGUAGE_DT=23,c.NMTOKEN_DT=24,c.NAME_DT=25,c.NCNAME_DT=26,c.ID_DT=27,c.IDREF_DT=28,c.ENTITY_DT=29,c.INTEGER_DT=30,c.NONPOSITIVEINTEGER_DT=31,c.NEGATIVEINTEGER_DT=32,c.LONG_DT=33,c.INT_DT=34,c.SHORT_DT=35,c.BYTE_DT=36,c.NONNEGATIVEINTEGER_DT=37,c.UNSIGNEDLONG_DT=38,c.UNSIGNEDINT_DT=39,c.UNSIGNEDSHORT_DT=40,c.UNSIGNEDBYTE_DT=41,c.POSITIVEINTEGER_DT=42,c.LISTOFUNION_DT=43,c.LIST_DT=44,c.UNAVAILABLE_DT=45,c.DATETIMESTAMP_DT=46,c.DAYMONTHDURATION_DT=47,c.DAYTIMEDURATION_DT=48,c.PRECISIONDECIMAL_DT=49,c.ANYATOMICTYPE_DT=50,c.ANYTYPE_DT=51,c.XT_YEARMONTHDURATION_DT=-1,c.XT_UNTYPEDATOMIC_DT=-2,l.prototype.items=null,l.prototype.evaluate=function(e){for(var t=[],n=0,r=this.items.length;r>n;n++)t=Xr.concatenate.call(e,t,this.items[n].evaluate(e));return t},d.prototype.bindings=null,d.prototype.returnExpr=null,d.prototype.evaluate=function(e){var t=[];return function(n,r){for(var i=n.bindings[r++],o=i.inExpr.evaluate(e),a=(i.namespaceURI?"{"+i.namespaceURI+"}":"")+i.localName,s=0,u=o.length;u>s;s++)e.pushVariable(a,o[s]),r<n.bindings.length?arguments.callee(n,r):t=t.concat(n.returnExpr.evaluate(e)),e.popVariable(a)}(this,0),t},m.prototype.prefix=null,m.prototype.localName=null,m.prototype.namespaceURI=null,m.prototype.inExpr=null,v.prototype.condExpr=null,v.prototype.thenExpr=null,v.prototype.elseExpr=null,v.prototype.evaluate=function(e){return this[_r(this.condExpr.evaluate(e),e)?"thenExpr":"elseExpr"].evaluate(e)},_.prototype.bindings=null,_.prototype.quantifier=null,_.prototype.satisfiesExpr=null,_.prototype.evaluate=function(e){var t="every"==this.quantifier,n=t?!0:!1;return function(r,i){for(var o=r.bindings[i++],a=o.inExpr.evaluate(e),s=(o.namespaceURI?"{"+o.namespaceURI+"}":"")+o.localName,u=0,c=a.length;c>u&&(t?n:!n);u++)e.pushVariable(s,a[u]),i<r.bindings.length?arguments.callee(r,i):n=_r(r.satisfiesExpr.evaluate(e),e),e.popVariable(s)}(this,0),[new $t(n)]},b.prototype.prefix=null,b.prototype.localName=null,b.prototype.namespaceURI=null,b.prototype.inExpr=null,S.prototype.left=null,S.prototype.right=null,S.prototype.operator=null,S.prototype.evaluate=function(e){var t=Yr[this.operator](this,e);return null==t?[]:[t]};var $r={"=":"eq","!=":"ne",">":"gt","<":"lt",">=":"ge","<=":"le"},Jr={};Jr.eq=function(t,n,r){var i="";if(Wt(t))Wt(n)&&(i="numeric-equal");else if(t instanceof $t)n instanceof $t&&(i="boolean-equal");else if(t instanceof bn){if(n instanceof bn)return Xr["numeric-equal"].call(r,zr.compare.call(r,t,n),new Dn(0))}else t instanceof Jt?n instanceof Jt&&(i="date-equal"):t instanceof wn?n instanceof wn&&(i="time-equal"):t instanceof Zt?n instanceof Zt&&(i="dateTime-equal"):t instanceof un?n instanceof un&&(i="duration-equal"):t instanceof vn?n instanceof vn&&(i="gYearMonth-equal"):t instanceof gn?n instanceof gn&&(i="gYear-equal"):t instanceof mn?n instanceof mn&&(i="gMonthDay-equal"):t instanceof hn?n instanceof hn&&(i="gMonth-equal"):t instanceof dn?n instanceof dn&&(i="gDay-equal"):t instanceof xn?n instanceof xn&&(i="QName-equal"):t instanceof yn?n instanceof yn&&(i="hexBinary-equal"):t instanceof Xt&&n instanceof Xt&&(i="base64Binary-equal");if(i)return Xr[i].call(r,t,n);throw new e("XPTY0004","Cannot compare values of given types")},Jr.ne=function(e,t,n){return new $t(!Jr.eq(e,t,n).valueOf())},Jr.gt=function(t,n,r){var i="";if(Wt(t))Wt(n)&&(i="numeric-greater-than");else if(t instanceof $t)n instanceof $t&&(i="boolean-greater-than");else if(t instanceof bn){if(n instanceof bn)return Xr["numeric-greater-than"].call(r,zr.compare.call(r,t,n),new Dn(0))}else t instanceof Jt?n instanceof Jt&&(i="date-greater-than"):t instanceof wn?n instanceof wn&&(i="time-greater-than"):t instanceof Zt?n instanceof Zt&&(i="dateTime-greater-than"):t instanceof Cn?n instanceof Cn&&(i="yearMonthDuration-greater-than"):t instanceof Pn&&n instanceof Pn&&(i="dayTimeDuration-greater-than");if(i)return Xr[i].call(r,t,n);throw new e("XPTY0004","Cannot compare values of given types")},Jr.lt=function(t,n,r){var i="";if(Wt(t))Wt(n)&&(i="numeric-less-than");else if(t instanceof $t)n instanceof $t&&(i="boolean-less-than");else if(t instanceof bn){if(n instanceof bn)return Xr["numeric-less-than"].call(r,zr.compare.call(r,t,n),new Dn(0))}else t instanceof Jt?n instanceof Jt&&(i="date-less-than"):t instanceof wn?n instanceof wn&&(i="time-less-than"):t instanceof Zt?n instanceof Zt&&(i="dateTime-less-than"):t instanceof Cn?n instanceof Cn&&(i="yearMonthDuration-less-than"):t instanceof Pn&&n instanceof Pn&&(i="dayTimeDuration-less-than");if(i)return Xr[i].call(r,t,n);throw new e("XPTY0004","Cannot compare values of given types")},Jr.ge=function(t,n,r){var i="";if(Wt(t)){if(Wt(n))return Xr["numeric-greater-than"].call(r,t,n)||Xr["numeric-equal"].call(r,t,n)}else if(t instanceof $t)n instanceof $t&&(i="boolean-less-than");else if(t instanceof bn){if(n instanceof bn)return Xr["numeric-greater-than"].call(r,zr.compare.call(r,t,n),new Dn(-1))}else t instanceof Jt?n instanceof Jt&&(i="date-less-than"):t instanceof wn?n instanceof wn&&(i="time-less-than"):t instanceof Zt?n instanceof Zt&&(i="dateTime-less-than"):t instanceof Cn?n instanceof Cn&&(i="yearMonthDuration-less-than"):t instanceof Pn&&n instanceof Pn&&(i="dayTimeDuration-less-than");if(i)return new $t(!Xr[i].call(r,t,n).valueOf());throw new e("XPTY0004","Cannot compare values of given types")},Jr.le=function(t,n,r){var i="";if(Wt(t)){if(Wt(n))return Xr["numeric-less-than"].call(r,t,n)||Xr["numeric-equal"].call(r,t,n)}else if(t instanceof $t)n instanceof $t&&(i="boolean-greater-than");else if(t instanceof bn){if(n instanceof bn)return Xr["numeric-less-than"].call(r,zr.compare.call(r,t,n),new Dn(1))}else t instanceof Jt?n instanceof Jt&&(i="date-greater-than"):t instanceof wn?n instanceof wn&&(i="time-greater-than"):t instanceof Zt?n instanceof Zt&&(i="dateTime-greater-than"):t instanceof Cn?n instanceof Cn&&(i="yearMonthDuration-greater-than"):t instanceof Pn&&n instanceof Pn&&(i="dayTimeDuration-greater-than");if(i)return new $t(!Xr[i].call(r,t,n).valueOf());throw new e("XPTY0004","Cannot compare values of given types")};var Kr={};Kr.is=function(e,t,n){return Xr["is-same-node"].call(n,e,t)},Kr[">>"]=function(e,t,n){return Xr["node-after"].call(n,e,t)},Kr["<<"]=function(e,t,n){return Xr["node-before"].call(n,e,t)};var Yr={"=":C,"!=":C,"<":C,"<=":C,">":C,">=":C,eq:T,ne:T,lt:T,le:T,gt:T,ge:T,is:P,">>":P,"<<":P};I.prototype.left=null,I.prototype.items=null;var Zr={};Zr["+"]=function(t,n,r){var i="",o=!1;if(Wt(t)?Wt(n)&&(i="numeric-add"):t instanceof Jt?n instanceof Cn?i="add-yearMonthDuration-to-date":n instanceof Pn&&(i="add-dayTimeDuration-to-date"):t instanceof Cn?n instanceof Jt?(i="add-yearMonthDuration-to-date",o=!0):n instanceof Zt?(i="add-yearMonthDuration-to-dateTime",o=!0):n instanceof Cn&&(i="add-yearMonthDurations"):t instanceof Pn?n instanceof Jt?(i="add-dayTimeDuration-to-date",o=!0):n instanceof wn?(i="add-dayTimeDuration-to-time",o=!0):n instanceof Zt?(i="add-dayTimeDuration-to-dateTime",o=!0):n instanceof Pn&&(i="add-dayTimeDurations"):t instanceof wn?n instanceof Pn&&(i="add-dayTimeDuration-to-time"):t instanceof Zt&&(n instanceof Cn?i="add-yearMonthDuration-to-dateTime":n instanceof Pn&&(i="add-dayTimeDuration-to-dateTime")),i)return Xr[i].call(r,o?n:t,o?t:n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},Zr["-"]=function(t,n,r){var i="";if(Wt(t)?Wt(n)&&(i="numeric-subtract"):t instanceof Jt?n instanceof Jt?i="subtract-dates":n instanceof Cn?i="subtract-yearMonthDuration-from-date":n instanceof Pn&&(i="subtract-dayTimeDuration-from-date"):t instanceof wn?n instanceof wn?i="subtract-times":n instanceof Pn&&(i="subtract-dayTimeDuration-from-time"):t instanceof Zt?n instanceof Zt?i="subtract-dateTimes":n instanceof Cn?i="subtract-yearMonthDuration-from-dateTime":n instanceof Pn&&(i="subtract-dayTimeDuration-from-dateTime"):t instanceof Cn?n instanceof Cn&&(i="subtract-yearMonthDurations"):t instanceof Pn&&n instanceof Pn&&(i="subtract-dayTimeDurations"),i)return Xr[i].call(r,t,n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},I.prototype.evaluate=function(e){var t=xr(this.left.evaluate(e),e);if(!t.length)return[];xt(e,t,"?","first operand of '"+this.items[0][0]+"'");var n=t[0];n instanceof En&&(n=sn.cast(n));for(var r,i,o=0,a=this.items.length;a>o;o++){if(r=xr(this.items[o][1].evaluate(e),e),!r.length)return[];xt(e,r,"?","first operand of '"+this.items[o][0]+"'"),i=r[0],i instanceof En&&(i=sn.cast(i)),n=Zr[this.items[o][0]](n,i,e)}return[n]},A.prototype.left=null,A.prototype.items=null;var ei={};ei["*"]=function(t,n,r){var i="",o=!1;if(Wt(t)?Wt(n)?i="numeric-multiply":n instanceof Cn?(i="multiply-yearMonthDuration",o=!0):n instanceof Pn&&(i="multiply-dayTimeDuration",o=!0):t instanceof Cn?Wt(n)&&(i="multiply-yearMonthDuration"):t instanceof Pn&&Wt(n)&&(i="multiply-dayTimeDuration"),i)return Xr[i].call(r,o?n:t,o?t:n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},ei.div=function(t,n,r){var i="";if(Wt(t)?Wt(n)&&(i="numeric-divide"):t instanceof Cn?Wt(n)?i="divide-yearMonthDuration":n instanceof Cn&&(i="divide-yearMonthDuration-by-yearMonthDuration"):t instanceof Pn&&(Wt(n)?i="divide-dayTimeDuration":n instanceof Pn&&(i="divide-dayTimeDuration-by-dayTimeDuration")),i)return Xr[i].call(r,t,n);
throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},ei.idiv=function(t,n,r){if(Wt(t)&&Wt(n))return Xr["numeric-integer-divide"].call(r,t,n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},ei.mod=function(t,n,r){if(Wt(t)&&Wt(n))return Xr["numeric-mod"].call(r,t,n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},A.prototype.evaluate=function(e){var t=xr(this.left.evaluate(e),e);if(!t.length)return[];xt(e,t,"?","first operand of '"+this.items[0][0]+"'");var n=t[0];n instanceof En&&(n=sn.cast(n));for(var r,i,o=0,a=this.items.length;a>o;o++){if(r=xr(this.items[o][1].evaluate(e),e),!r.length)return[];xt(e,r,"?","second operand of '"+this.items[o][0]+"'"),i=r[0],i instanceof En&&(i=sn.cast(i)),n=ei[this.items[o][0]](n,i,e)}return[n]},k.prototype.operator=null,k.prototype.expression=null;var ti={};ti["-"]=function(t,n){if(Wt(t))return Xr["numeric-unary-minus"].call(n,t);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},ti["+"]=function(t,n){if(Wt(t))return Xr["numeric-unary-plus"].call(n,t);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},k.prototype.evaluate=function(e){var t=xr(this.expression.evaluate(e),e);if(!t.length)return[];xt(e,t,"?","second operand of '"+this.operator+"'");var n=t[0];return n instanceof En&&(n=sn.cast(n)),[ti[this.operator](n,e)]},j.prototype.left=null,j.prototype.items=null,j.prototype.evaluate=function(e){for(var t=_r(this.left.evaluate(e),e),n=0,r=this.items.length;r>n&&!t;n++)t=_r(this.items[n].evaluate(e),e);return[new $t(t)]},L.prototype.left=null,L.prototype.items=null,L.prototype.evaluate=function(e){for(var t=_r(this.left.evaluate(e),e),n=0,r=this.items.length;r>n&&t;n++)t=_r(this.items[n].evaluate(e),e);return[new $t(t)]},B.prototype.predicates=null,B.prototype.applyPredicates=function(e,t){for(var n,r=t.item,i=t.position,o=t.size,a=0,s=this.predicates.length;s>a;a++){n=e,e=[];for(var u,c=0,l=n.length;l>c;c++)t.item=n[c],t.position=c+1,t.size=l,u=this.predicates[a].evaluate(t),1==u.length&&Wt(u[0])?u[0].valueOf()==c+1&&e.push(n[c]):_r(u,t)&&e.push(n[c])}return t.item=r,t.position=i,t.size=o,e},Q.prototype=new B,Q.prototype.axis=null,Q.prototype.test=null;var ni={};ni.attribute={},ni.child={},ni.descendant={},ni["descendant-or-self"]={},ni.following={},ni["following-sibling"]={},ni.self={},ni.ancestor={},ni["ancestor-or-self"]={},ni.parent={},ni.preceding={},ni["preceding-sibling"]={},Q.prototype.evaluate=function(t){var n=t.item;if(!t.DOMAdapter.isNode(n))throw new e("XPTY0020");var r=[],i=t.DOMAdapter.getProperty,o=i(n,"nodeType");switch(this.axis){case"attribute":if(1==o)for(var a=i(n,"attributes"),s=0,u=a.length;u>s;s++)r.push(a[s]);break;case"child":for(var c=i(n,"firstChild");c;c=i(c,"nextSibling"))r.push(c);break;case"descendant-or-self":r.push(n);case"descendant":H(i(n,"firstChild"),r,i);break;case"following":for(var l,p=n;p;p=i(p,"parentNode"))(l=i(p,"nextSibling"))&&H(l,r,i);break;case"following-sibling":for(var c=n;c=i(c,"nextSibling");)r.push(c);break;case"self":r.push(n);break;case"ancestor-or-self":r.push(n);case"ancestor":for(var c=2==o?i(n,"ownerElement"):n;c=i(c,"parentNode");)r.push(c);break;case"parent":var p=2==o?i(n,"ownerElement"):i(n,"parentNode");p&&r.push(p);break;case"preceding":for(var l,p=n;p;p=i(p,"parentNode"))(l=i(p,"previousSibling"))&&z(l,r,i);break;case"preceding-sibling":for(var c=n;c=i(c,"previousSibling");)r.push(c)}if(r.length&&!(this.test instanceof J&&"node"==this.test.name)){var f=r;r=[];for(var s=0,u=f.length;u>s;s++)this.test.test(f[s],t)&&r.push(f[s])}switch(r.length&&this.predicates.length&&(r=this.applyPredicates(r,t)),this.axis){case"ancestor":case"ancestor-or-self":case"parent":case"preceding":case"preceding-sibling":r.reverse()}return r},W.prototype.items=null,W.prototype.evaluate=function(t){for(var n,r=t.item,i=[r],o=0,a=this.items.length;a>o;o++){n=[];for(var s=0,u=i.length;u>s;s++){t.item=i[s];for(var c=0,l=this.items[o].evaluate(t),p=l.length;p>c;c++){if(a-1>o&&!t.DOMAdapter.isNode(l[c]))throw new e("XPTY0019");-1==Mr(n,l[c])&&n.push(l[c])}}i=n}return t.item=r,br(i,t)},J.prototype=new X,J.prototype.name=null,J.prototype.args=null;var ri={};ri["document-node"]={},ri.element={},ri.attribute={},ri["processing-instruction"]={},ri.comment={},ri.text={},ri.node={},ri["schema-element"]={},ri["schema-attribute"]={},J.prototype.test=function(e,t){var n=t.DOMAdapter.getProperty,r=t.DOMAdapter.isNode(e)?n(e,"nodeType"):0;switch(this.name){case"node":return!!r;case"attribute":if(2!=r)return!1;break;case"document-node":return 9==r;case"element":return 1==r;case"processing-instruction":if(7!=r)return!1;break;case"comment":return 8==r;case"text":return 3==r||4==r;case"schema-attribute":throw"KindTest 'schema-attribute' not implemented";case"schema-element":throw"KindTest 'schema-element' not implemented"}return 2==r?"xmlns"!=n(e,"prefix")&&"xmlns"!=n(e,"localName"):7==r?"xml"!=n(e,"target"):!0},Y.prototype=new X,Y.prototype.prefix=null,Y.prototype.localName=null,Y.prototype.namespaceURI=null;var ii=/^(?:(?![0-9-])([\w-]+|\*)\:)?(?![0-9-])([\w-]+|\*)$/;Y.prototype.test=function(e,t){var n=t.DOMAdapter.getProperty,r=n(e,"nodeType");if(1==r||2==r){if("*"==this.localName)return(1==r||"xmlns"!=n(e,"prefix")&&"xmlns"!=n(e,"localName"))&&(!this.prefix||n(e,"namespaceURI")==this.namespaceURI);if(this.localName==n(e,"localName"))return"*"==this.namespaceURI||2==r&&!this.prefix&&!n(e,"prefix")||n(e,"namespaceURI")==this.namespaceURI}return!1},tt.prototype.evaluate=function(e){return this.expression?this.expression.evaluate(e):[]},rt.prototype.evaluate=function(t){if(null==t.item)throw new e("XPDY0002","Dynamic context does not have context item initialized");return[t.item]},ot.prototype.value=null,ot.prototype.evaluate=function(){return[this.value]},st.prototype=new ot;var oi=/^[+\-]?(?:(?:(\d+)(?:\.(\d*))?)|(?:\.(\d+)))(?:[eE]([+-])?(\d+))?$/;lt.prototype=new ot;var ai=/^'([^']*(?:''[^']*)*)'|"([^"]*(?:""[^"]*)*)"$/;ft.prototype=new B,ft.prototype.expression=null,ft.prototype.evaluate=function(e){var t=this.expression.evaluate(e);return this.predicates.length&&t.length&&(t=this.applyPredicates(t,e)),t},ht.prototype.prefix=null,ht.prototype.localName=null,ht.prototype.namespaceURI=null,ht.prototype.evaluate=function(t){var n=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName;if(t.scope.hasOwnProperty(n))return[t.scope[n]];throw new e("XPST0008","Variable $"+(this.prefix?this.prefix+":":"")+this.localName+" has not been declared")},gt.prototype.prefix=null,gt.prototype.localName=null,gt.prototype.namespaceURI=null,gt.prototype.args=null,gt.prototype.evaluate=function(t){for(var n,r,i=[],o=0,a=this.args.length;a>o;o++)i.push(this.args[o].evaluate(t));var s=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName;if(this.namespaceURI==Ur){if(r=zr[this.localName]){(n=Wr[this.localName])&&yt(this.localName,n,r,i,t);var u=r.apply(t,i);return null==u?[]:u instanceof Pr?u:[u]}throw new e("XPST0017","Unknown system function: "+s+"()")}if(this.namespaceURI==Br){if((r=qr[this.localName])&&"NOTATION"!=this.localName&&"anyAtomicType"!=this.localName)return yt(this.localName,[[zt]],r,i,t),[r.cast(i[0])];throw new e("XPST0017","Unknown type constructor function: "+s+"()")}if(r=t.staticContext.getFunction(s)){var u=r.apply(t,i);return null==u?[]:u instanceof Pr?u:[u]}throw new e("XPST0017","Unknown user function: "+s+"()")};var si=["first","second","third","fourth","fifth"];bt.prototype.left=null,bt.prototype.items=null,bt.prototype.evaluate=function(e){for(var t,n=this.left.evaluate(e),r=0,i=this.items.length;i>r;r++)n=Xr[(t=this.items[r])[0]].call(e,n,t[1].evaluate(e));return n},St.prototype.left=null,St.prototype.right=null,St.prototype.evaluate=function(e){var t=this.left.evaluate(e);if(!t.length)return[];var n="first operand of 'to'";xt(e,t,"?",n),_t(e,t,Dn,n);var r=this.right.evaluate(e);return r.length?(n="second operand of 'to'",xt(e,r,"?",n),_t(e,r,Dn,n),Xr.to.call(e,t[0],r[0])):[]},Ct.prototype.left=null,Ct.prototype.items=null,Ct.prototype.evaluate=function(e){for(var t=this.left.evaluate(e),n=0,r=this.items.length;r>n;n++)t=Xr.union.call(e,t,this.items[n].evaluate(e));return t},Pt.prototype.expression=null,Pt.prototype.type=null,Pt.prototype.evaluate=function(e){var t=this.expression.evaluate(e),n=this.type.itemType,r=this.type.occurence;if(!n)return[new $t(!t.length)];if(!t.length)return[new $t("?"==r||"*"==r)];if(1!=t.length&&"+"!=r&&"*"!=r)return[new $t(!1)];if(!n.test)return[new $t(!0)];for(var i=!0,o=0,a=t.length;a>o&&i;o++)i=n.test.test(t[o],e);return[new $t(i)]},Dt.prototype.expression=null,Dt.prototype.type=null,Dt.prototype.evaluate=function(t){var n=this.expression.evaluate(t),r=this.type.itemType,i=this.type.occurence;if(!r){if(n.length)throw new e("XPDY0050","The only value allowed for the value in 'treat as' expression is an empty sequence");return n}if("?"!=i&&"*"!=i&&!n.length)throw new e("XPDY0050","An empty sequence is not allowed as the value in 'treat as' expression");if("+"!=i&&"*"!=i&&1!=n.length)throw new e("XPDY0050","A sequence of more than one item is not allowed as the value in 'treat as' expression");if(!r.test)return n;for(var o=0,a=n.length;a>o;o++)if(!r.test.test(n[o],t))throw new e("XPDY0050","Required item type of value in 'treat as' expression is "+(r.test.prefix?r.test.prefix+":":"")+r.test.localName);return n},Nt.prototype.expression=null,Nt.prototype.type=null,Nt.prototype.evaluate=function(t){var n=this.expression.evaluate(t),r=this.type.itemType,i=this.type.occurence;if(n.length>1)return[new $t(!1)];if(!n.length)return[new $t("?"==i)];try{r.cast(xr(n,t)[0])}catch(o){if("XPST0051"==o.code)throw o;if("XPST0017"==o.code)throw new e("XPST0080","No value is castable to "+(r.prefix?r.prefix+":":"")+r.localName);return[new $t(!1)]}return[new $t(!0)]},Ot.prototype.expression=null,Ot.prototype.type=null,Ot.prototype.evaluate=function(e){var t=this.expression.evaluate(e);return xt(e,t,this.type.occurence,"'cast as' expression operand"),t.length?[this.type.itemType.cast(xr(t,e)[0],e)]:[]},jt.prototype.prefix=null,jt.prototype.localName=null,jt.prototype.namespaceURI=null,jt.prototype.test=function(t,n){var r=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName,i=this.namespaceURI==Br?qr[this.localName]:n.staticContext.getDataType(r);if(i)return t instanceof i;throw new e("XPST0051","Unknown simple type "+(this.prefix?this.prefix+":":"")+this.localName)},jt.prototype.cast=function(t,n){var r=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName,i=this.namespaceURI==Br?qr[this.localName]:n.staticContext.getDataType(r);if(i)return i.cast(t);throw new e("XPST0051","Unknown atomic type "+(this.prefix?this.prefix+":":"")+this.localName)},Lt.prototype.test=null,Bt.prototype.itemType=null,Bt.prototype.occurence=null,Vt.prototype.itemType=null,Vt.prototype.occurence=null,Ht.prototype.builtInKind=c.ANYTYPE_DT,Ht.prototype=new Gt,Ht.prototype.builtInKind=c.ANYSIMPLETYPE_DT,Ht.prototype.primitiveKind=null,Ht.PRIMITIVE_ANYURI="anyURI",Ht.PRIMITIVE_BASE64BINARY="base64Binary",Ht.PRIMITIVE_BOOLEAN="boolean",Ht.PRIMITIVE_DATE="date",Ht.PRIMITIVE_DATETIME="dateTime",Ht.PRIMITIVE_DECIMAL="decimal",Ht.PRIMITIVE_DOUBLE="double",Ht.PRIMITIVE_DURATION="duration",Ht.PRIMITIVE_FLOAT="float",Ht.PRIMITIVE_GDAY="gDay",Ht.PRIMITIVE_GMONTH="gMonth",Ht.PRIMITIVE_GMONTHDAY="gMonthDay",Ht.PRIMITIVE_GYEAR="gYear",Ht.PRIMITIVE_GYEARMONTH="gYearMonth",Ht.PRIMITIVE_HEXBINARY="hexBinary",Ht.PRIMITIVE_NOTATION="NOTATION",Ht.PRIMITIVE_QNAME="QName",Ht.PRIMITIVE_STRING="string",Ht.PRIMITIVE_TIME="time",zt.prototype=new Ht,zt.prototype.builtInKind=c.ANYATOMICTYPE_DT,zt.cast=function(){throw new e("XPST0017","Abstract type used in constructor function xs:anyAtomicType")},a("anyAtomicType",zt),qt.prototype=new zt,qt.prototype.builtInKind=c.ANYURI_DT,qt.prototype.primitiveKind=Ht.PRIMITIVE_ANYURI,qt.prototype.scheme=null,qt.prototype.authority=null,qt.prototype.path=null,qt.prototype.query=null,qt.prototype.fragment=null,qt.prototype.toString=function(){return(this.scheme?this.scheme+":":"")+(this.authority?"//"+this.authority:"")+(this.path?this.path:"")+(this.query?"?"+this.query:"")+(this.fragment?"#"+this.fragment:"")};var ui=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;qt.cast=function(t){if(t instanceof qt)return t;if(t instanceof bn||t instanceof En){var n;if(n=Lr(t).match(ui))return new qt(n[2],n[4],n[5],n[7],n[9]);throw new e("FORG0001")}throw new e("XPTY0004","Casting value '"+t+"' to xs:anyURI can never succeed")},a("anyURI",qt),Xt.prototype=new zt,Xt.prototype.builtInKind=c.BASE64BINARY_DT,Xt.prototype.primitiveKind=Ht.PRIMITIVE_BASE64BINARY,Xt.prototype.value=null,Xt.prototype.valueOf=function(){return this.value},Xt.prototype.toString=function(){return this.value};var ci=/^((([A-Za-z0-9+\/]\s*){4})*(([A-Za-z0-9+\/]\s*){3}[A-Za-z0-9+\/]|([A-Za-z0-9+\/]\s*){2}[AEIMQUYcgkosw048]\s*=|[A-Za-z0-9+\/]\s*[AQgw]\s*=\s*=))?$/;Xt.cast=function(t){if(t instanceof Xt)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(ci);if(n)return new Xt(n[0]);throw new e("FORG0001")}if(t instanceof yn)throw"Casting from 'xs:hexBinary' to 'xs:base64Binary' not implemented";throw new e("XPTY0004","Casting value '"+t+"' to xs:hexBinary can never succeed")},a("base64Binary",Xt),$t.prototype=new zt,$t.prototype.builtInKind=c.BOOLEAN_DT,$t.prototype.primitiveKind=Ht.PRIMITIVE_BOOLEAN,$t.prototype.value=null,$t.prototype.valueOf=function(){return this.value},$t.prototype.toString=function(){return Cr(this.value)};var li=/^(0|1|true|false)$/;$t.cast=function(t){if(t instanceof $t)return t;if(t instanceof bn||t instanceof En){var n;if(n=Lr(t).match(li))return new $t("1"==n[1]||"true"==n[1]);throw new e("FORG0001")}if(Wt(t))return new $t(0!=t);throw new e("XPTY0004","Casting value '"+t+"' to xs:boolean can never succeed")},a("boolean",$t),Jt.prototype=new zt,Jt.prototype.builtInKind=c.DATE_DT,Jt.prototype.primitiveKind=Ht.PRIMITIVE_DATE,Jt.prototype.year=null,Jt.prototype.month=null,Jt.prototype.day=null,Jt.prototype.timezone=null,Jt.prototype.negative=null,Jt.prototype.toString=function(){return nn(this)+tn(this)};var pi=/^(-?)([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;Jt.cast=function(t){if(t instanceof Jt)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(pi);if(n){var r=+n[2],i=+n[3],o=+n[4];if(o-1<Kt(r,i))return new Jt(r,i,o,n[5]?"Z"==n[5]?0:("-"==n[6]?-1:1)*(60*n[7]+1*n[8]):null,"-"==n[1]);throw new e("FORG0001","Invalid date '"+t+"' (Non-existent date)")}throw new e("FORG0001")}if(t instanceof Zt)return new Jt(t.year,t.month,t.day,t.timezone,t.negative);throw new e("XPTY0004","Casting value '"+t+"' to xs:date can never succeed")};var fi=[31,28,31,30,31,30,31,31,30,31,30,31];a("date",Jt),Zt.prototype=new zt,Zt.prototype.builtInKind=c.DATETIME_DT,Zt.prototype.primitiveKind=Ht.PRIMITIVE_DATETIME,Zt.prototype.year=null,Zt.prototype.month=null,Zt.prototype.day=null,Zt.prototype.hours=null,Zt.prototype.minutes=null,Zt.prototype.seconds=null,Zt.prototype.timezone=null,Zt.prototype.negative=null,Zt.prototype.toString=function(){return nn(this)+"T"+rn(this)+tn(this)};var di=/^(-?)([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])T(([01]\d|2[0-3]):([0-5]\d):([0-5]\d)(?:\.(\d+))?|(24:00:00)(?:\.(0+))?)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;Zt.cast=function(t){if(t instanceof Zt)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(di);if(n){var r=+n[2],i=+n[3],o=+n[4],a=!!n[10];if(o-1<Kt(r,i))return on(new Zt(r,i,o,a?24:+n[6],a?0:+n[7],Tr((a?0:n[8])+"."+(a?0:n[9]||0)),n[12]?"Z"==n[12]?0:("-"==n[13]?-1:1)*(60*n[14]+1*n[15]):null,"-"==n[1]));throw new e("FORG0001","Invalid date '"+t+"' (Non-existent date)")}throw new e("FORG0001")}if(t instanceof Jt)return new Zt(t.year,t.month,t.day,0,0,0,t.timezone,t.negative);throw new e("XPTY0004","Casting value '"+t+"' to xs:dateTime can never succeed")},a("dateTime",Zt),an.prototype=new zt,an.prototype.builtInKind=c.DECIMAL_DT,an.prototype.primitiveKind=Ht.PRIMITIVE_DECIMAL,an.prototype.value=null,an.prototype.valueOf=function(){return this.value},an.prototype.toString=function(){return Cr(this.value)};var hi=/^[+\-]?((\d+(\.\d*)?)|(\.\d+))$/;an.cast=function(t){if(t instanceof an)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(hi);if(n)return new an(+t);throw new e("FORG0001")}if(t instanceof $t)return new an(1*t);if(Wt(t)){if(Or(t)||!Rr(t))throw new e("FOCA0002","Cannot convert '"+t+"' to xs:decimal");return new an(+t)}throw new e("XPTY0004","Casting value '"+t+"' to xs:decimal can never succeed")},a("decimal",an),sn.prototype=new zt,sn.prototype.builtInKind=c.DOUBLE_DT,sn.prototype.primitiveKind=Ht.PRIMITIVE_DOUBLE,sn.prototype.value=null,sn.prototype.valueOf=function(){return this.value},sn.prototype.toString=function(){return Cr(this.value)};var mi=/^([+\-]?((\d+(\.\d*)?)|(\.\d+))([eE][+\-]?\d+)?|(-?INF)|NaN)$/;sn.cast=function(t){if(t instanceof sn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(mi);if(n)return new sn(n[7]?+n[7].replace("INF","Infinity"):+t);throw new e("FORG0001")}if(t instanceof $t)return new sn(1*t);if(Wt(t))return new sn(t.value);throw new e("XPTY0004","Casting value '"+t+"' to xs:double can never succeed")},a("double",sn),un.prototype=new zt,un.prototype.builtInKind=c.DURATION_DT,un.prototype.primitiveKind=Ht.PRIMITIVE_DURATION,un.prototype.year=null,un.prototype.month=null,un.prototype.day=null,un.prototype.hours=null,un.prototype.minutes=null,un.prototype.seconds=null,un.prototype.negative=null,un.prototype.toString=function(){return(this.negative?"-":"")+"P"+(cn(this)+ln(this)||"T0S")};var gi=/^(-)?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:((?:(?:[0-9]+(?:.[0-9]*)?)|(?:.[0-9]+)))S)?)?$/;un.cast=function(t){if(t instanceof Cn)return new un(t.year,t.month,0,0,0,0,t.negative);if(t instanceof Pn)return new un(0,0,t.day,t.hours,t.minutes,t.seconds,t.negative);if(t instanceof un)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(gi);if(n)return pn(new un(+n[2]||0,+n[3]||0,+n[4]||0,+n[5]||0,+n[6]||0,+n[7]||0,"-"==n[1]));throw new e("FORG0001")}throw new e("XPTY0004","Casting value '"+t+"' to xs:duration can never succeed")},a("duration",un),fn.prototype=new zt,fn.prototype.builtInKind=c.FLOAT_DT,fn.prototype.primitiveKind=Ht.PRIMITIVE_FLOAT,fn.prototype.value=null,fn.prototype.valueOf=function(){return this.value},fn.prototype.toString=function(){return Cr(this.value)};var vi=/^([+\-]?((\d+(\.\d*)?)|(\.\d+))([eE][+\-]?\d+)?|(-?INF)|NaN)$/;fn.cast=function(t){if(t instanceof fn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(vi);if(n)return new fn(n[7]?+n[7].replace("INF","Infinity"):+t);throw new e("FORG0001")}if(t instanceof $t)return new fn(1*t);if(Wt(t))return new fn(t.value);throw new e("XPTY0004","Casting value '"+t+"' to xs:float can never succeed")},a("float",fn),dn.prototype=new zt,dn.prototype.builtInKind=c.GDAY_DT,dn.prototype.primitiveKind=Ht.PRIMITIVE_GDAY,dn.prototype.day=null,dn.prototype.timezone=null,dn.prototype.toString=function(){return"---"+en(this.day)+tn(this)};var yi=/^---(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;dn.cast=function(t){if(t instanceof dn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(yi);if(n){var r=+n[1];return new dn(r,n[2]?"Z"==n[2]?0:("-"==n[3]?-1:1)*(60*n[4]+1*n[5]):null)}throw new e("FORG0001")}if(t instanceof Jt||t instanceof Zt)return new dn(t.day,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:gDay can never succeed")},a("gDay",dn),hn.prototype=new zt,hn.prototype.builtInKind=c.GMONTH_DT,hn.prototype.primitiveKind=Ht.PRIMITIVE_GMONTH,hn.prototype.month=null,hn.prototype.timezone=null,hn.prototype.toString=function(){return"--"+en(this.month)+tn(this)};var _i=/^--(0[1-9]|1[0-2])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;hn.cast=function(t){if(t instanceof hn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(_i);if(n){var r=+n[1];return new hn(r,n[2]?"Z"==n[2]?0:("-"==n[3]?-1:1)*(60*n[4]+1*n[5]):null)}throw new e("FORG0001")}if(t instanceof Jt||t instanceof Zt)return new hn(t.month,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:gMonth can never succeed")},a("gMonth",hn),mn.prototype=new zt,mn.prototype.builtInKind=c.GMONTHDAY_DT,mn.prototype.primitiveKind=Ht.PRIMITIVE_GMONTHDAY,mn.prototype.month=null,mn.prototype.day=null,mn.prototype.timezone=null,mn.prototype.toString=function(){return"--"+en(this.month)+"-"+en(this.day)+tn(this)};var xi=/^--(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;mn.cast=function(t){if(t instanceof mn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(xi);if(n){var r=+n[1],i=+n[2];if(i-1<Kt(1976,r))return new mn(r,i,n[3]?"Z"==n[3]?0:("-"==n[4]?-1:1)*(60*n[5]+1*n[6]):null);throw new e("FORG0001","Invalid date '"+t+"' (Non-existent date)")}throw new e("FORG0001")}if(t instanceof Jt||t instanceof Zt)return new mn(t.month,t.day,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:gMonthDay can never succeed")},a("gMonthDay",mn),gn.prototype=new zt,gn.prototype.builtInKind=c.GYEAR_DT,gn.prototype.primitiveKind=Ht.PRIMITIVE_GYEAR,gn.prototype.year=null,gn.prototype.timezone=null,gn.prototype.toString=function(){return en(this.year)+tn(this)};var bi=/^-?([1-9]\d\d\d+|0\d\d\d)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;gn.cast=function(t){if(t instanceof gn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(bi);if(n){var r=+n[1];return new gn(r,n[2]?"Z"==n[2]?0:("-"==n[3]?-1:1)*(60*n[4]+1*n[5]):null)}throw new e("FORG0001")}if(t instanceof Jt||t instanceof Zt)return new gn(t.year,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:gYear can never succeed")},a("gYear",gn),vn.prototype=new zt,vn.prototype.builtInKind=c.GYEARMONTH_DT,vn.prototype.primitiveKind=Ht.PRIMITIVE_GYEARMONTH,vn.prototype.year=null,vn.prototype.month=null,vn.prototype.timezone=null,vn.prototype.toString=function(){return en(this.year)+"-"+en(this.month)+tn(this)};var wi=/^-?([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;vn.cast=function(t){if(t instanceof vn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(wi);if(n){var r=+n[1],i=+n[2];return new vn(r,i,n[3]?"Z"==n[3]?0:("-"==n[4]?-1:1)*(60*n[5]+1*n[6]):null)}throw new e("FORG0001")}if(t instanceof Jt||t instanceof Zt)return new vn(t.year,t.month,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:gYearMonth can never succeed")},a("gYearMonth",vn),yn.prototype=new zt,yn.prototype.builtInKind=c.HEXBINARY_DT,yn.prototype.primitiveKind=Ht.PRIMITIVE_HEXBINARY,yn.prototype.value=null,yn.prototype.valueOf=function(){return this.value},yn.prototype.toString=function(){return this.value};var Si=/^([0-9a-fA-F]{2})*$/;yn.cast=function(t){if(t instanceof yn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(Si);if(n)return new yn(n[0].toUpperCase());throw new e("FORG0001")}if(t instanceof Xt)throw"Casting from 'xs:base64Binary' to 'xs:hexBinary' not implemented";throw new e("XPTY0004","Casting value '"+t+"' to xs:hexBinary can never succeed")},a("hexBinary",yn),_n.prototype=new zt,_n.prototype.builtInKind=c.NOTATION_DT,_n.prototype.primitiveKind=Ht.PRIMITIVE_NOTATION,_n.cast=function(){throw new e("XPST0017","Abstract type used in constructor function xs:NOTATION")},a("NOTATION",_n),xn.prototype=new zt,xn.prototype.builtInKind=c.QNAME_DT,xn.prototype.primitiveKind=Ht.PRIMITIVE_QNAME,xn.prototype.prefix=null,xn.prototype.localName=null,xn.prototype.namespaceURI=null,xn.prototype.toString=function(){return(this.prefix?this.prefix+":":"")+this.localName};var Ei=/^(?:(?![0-9-])([\w-]+)\:)?(?![0-9-])([\w-]+)$/;xn.cast=function(t){if(t instanceof xn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(Ei);if(n)return new xn(n[1]||null,n[2],null);throw new e("FORG0001")}throw new e("XPTY0004","Casting value '"+t+"' to xs:QName can never succeed")},a("QName",xn),bn.prototype=new zt,bn.prototype.value=null,bn.prototype.builtInKind=c.STRING_DT,bn.prototype.primitiveKind=Ht.PRIMITIVE_STRING,bn.prototype.valueOf=function(){return this.value},bn.prototype.toString=function(){return this.value},bn.cast=function(e){return new bn(Cr(e))},a("string",bn),wn.prototype=new zt,wn.prototype.builtInKind=c.TIME_DT,wn.prototype.primitiveKind=Ht.PRIMITIVE_TIME,wn.prototype.hours=null,wn.prototype.minutes=null,wn.prototype.seconds=null,wn.prototype.timezone=null,wn.prototype.toString=function(){return rn(this)+tn(this)};var Ci=/^(([01]\d|2[0-3]):([0-5]\d):([0-5]\d)(?:\.(\d+))?|(24:00:00)(?:\.(0+))?)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;wn.cast=function(t){if(t instanceof wn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(Ci);if(n){var r=!!n[6];return new wn(r?0:+n[2],r?0:+n[3],Tr((r?0:n[4])+"."+(r?0:n[5]||0)),n[8]?"Z"==n[8]?0:("-"==n[9]?-1:1)*(60*n[10]+1*n[11]):null)}throw new e("FORG0001")}if(t instanceof Zt)return new wn(t.hours,t.minutes,t.seconds,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:time can never succeed")},a("time",wn),En.prototype=new zt,En.prototype.builtInKind=c.XT_UNTYPEDATOMIC_DT,En.prototype.toString=function(){return Cr(this.value)},En.cast=function(e){return e instanceof En?e:new En(Cr(e))},a("untypedAtomic",En),Cn.prototype=new un,Cn.prototype.builtInKind=c.XT_YEARMONTHDURATION_DT,Cn.prototype.toString=function(){return(this.negative?"-":"")+"P"+(cn(this)||"0M")};var Ti=/^(-)?P(?:([0-9]+)Y)?(?:([0-9]+)M)?$/;Cn.cast=function(t){if(t instanceof Cn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(Ti);if(n)return Tn(new Cn(+n[2]||0,+n[3]||0,"-"==n[1]));throw new e("FORG0001")}if(t instanceof Pn)return new Cn(0,0);if(t instanceof un)return new Cn(t.year,t.month,t.negative);throw new e("XPTY0004","Casting value '"+t+"' to xs:yearMonthDuration can never succeed")},a("yearMonthDuration",Cn),Pn.prototype=new un,Pn.prototype.builtInKind=c.DAYTIMEDURATION_DT,Pn.prototype.toString=function(){return(this.negative?"-":"")+"P"+(ln(this)||"T0S")};var Pi=/^(-)?P(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:((?:(?:[0-9]+(?:.[0-9]*)?)|(?:.[0-9]+)))S)?)?$/;Pn.cast=function(t){if(t instanceof Pn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(Pi);if(n)return In(new Pn(+n[2]||0,+n[3]||0,+n[4]||0,+n[5]||0,"-"==n[1]));throw new e("FORG0001")}if(t instanceof Cn)return new Pn(0,0,0,0);if(t instanceof un)return new Pn(t.day,t.hours,t.minutes,t.seconds,t.negative);throw new e("XPTY0004","Casting value '"+t+"' to xs:dayTimeDuration can never succeed")},a("dayTimeDuration",Pn),Dn.prototype=new an,Dn.prototype.builtInKind=c.INTEGER_DT;var Ii=/^[-+]?[0-9]+$/;Dn.cast=function(t){if(t instanceof Dn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(Ii);if(n)return new Dn(~~t);throw new e("FORG0001")}if(t instanceof $t)return new Dn(1*t);if(Wt(t)){if(Or(t)||!Rr(t))throw new e("FOCA0002","Cannot convert '"+t+"' to xs:integer");return new Dn(~~t)}throw new e("XPTY0004","Casting value '"+t+"' to xs:integer can never succeed")},a("integer",Dn),An.prototype=new Dn,An.prototype.builtInKind=c.NONPOSITIVEINTEGER_DT,An.cast=function(e){return new An(Tr(e))},a("nonPositiveInteger",An),Nn.prototype=new An,Nn.prototype.builtInKind=c.NEGATIVEINTEGER_DT,Nn.cast=function(e){return new Nn(Tr(e))},a("negativeInteger",Nn),kn.prototype=new Dn,kn.prototype.builtInKind=c.LONG_DT,kn.cast=function(e){return new kn(Tr(e))},a("long",kn),On.prototype=new kn,On.prototype.builtInKind=c.INT_DT,On.cast=function(e){return new On(Tr(e))},a("int",On),Rn.prototype=new On,Rn.prototype.builtInKind=c.SHORT_DT,Rn.cast=function(e){return new Rn(Tr(e))},a("short",Rn),jn.prototype=new Rn,jn.prototype.builtInKind=c.BYTE_DT,jn.cast=function(e){return new jn(Tr(e))},a("byte",jn),Fn.prototype=new Dn,Fn.prototype.builtInKind=c.NONNEGATIVEINTEGER_DT,Fn.cast=function(e){return new Fn(Tr(e))},a("nonNegativeInteger",Fn),Ln.prototype=new Fn,Ln.prototype.builtInKind=c.POSITIVEINTEGER_DT,Ln.cast=function(e){return new Ln(Tr(e))},a("positiveInteger",Ln),Mn.prototype=new Fn,Mn.prototype.builtInKind=c.UNSIGNEDLONG_DT,Mn.cast=function(e){return new Mn(Tr(e))},a("unsignedLong",Mn),Bn.prototype=new Fn,Bn.prototype.builtInKind=c.UNSIGNEDINT_DT,Bn.cast=function(e){return new Bn(Tr(e))},a("unsignedInt",Bn),Un.prototype=new Bn,Un.prototype.builtInKind=c.UNSIGNEDSHORT_DT,Un.cast=function(e){return new Un(Tr(e))},a("unsignedShort",Un),Vn.prototype=new Un,Vn.prototype.builtInKind=c.UNSIGNEDBYTE_DT,Vn.cast=function(e){return new Vn(Tr(e))},a("unsignedByte",Vn),Qn.prototype=new bn,Qn.prototype.builtInKind=c.NORMALIZEDSTRING_DT,Qn.cast=function(e){return new Qn(Cr(e))},a("normalizedString",Qn),Gn.prototype=new Qn,Gn.prototype.builtInKind=c.TOKEN_DT,Gn.cast=function(e){return new Gn(Cr(e))},a("token",Gn),Hn.prototype=new Gn,Hn.prototype.builtInKind=c.NAME_DT,Hn.cast=function(e){return new Hn(Cr(e))},a("Name",Hn),zn.prototype=new Hn,zn.prototype.builtInKind=c.NCNAME_DT,zn.cast=function(e){return new zn(Cr(e))},a("NCName",zn),Wn.prototype=new zn,Wn.prototype.builtInKind=c.ENTITY_DT,Wn.cast=function(e){return new Wn(Cr(e))},a("ENTITY",Wn),qn.prototype=new zn,qn.prototype.builtInKind=c.ID_DT,qn.cast=function(e){return new qn(Cr(e))},a("ID",qn),Xn.prototype=new Gn,Xn.prototype.builtInKind=c.LANGUAGE_DT,Xn.cast=function(e){return new Xn(Cr(e))},a("language",Xn),$n.prototype=new Gn,$n.prototype.builtInKind=c.NMTOKEN_DT,$n.cast=function(e){return new $n(Cr(e))},a("NMTOKEN",$n),Kn.prototype=new Jn,Yn.prototype=new Kn,Zn.prototype=new Kn,er.prototype=new Kn,tr.prototype=new Kn,nr.prototype=new Kn,rr.prototype=new Kn,Xr["hexBinary-equal"]=function(e,t){return new $t(e.valueOf()==t.valueOf())},Xr["base64Binary-equal"]=function(e,t){return new $t(e.valueOf()==t.valueOf())},Xr["boolean-equal"]=function(e,t){return new $t(e.valueOf()==t.valueOf())},Xr["boolean-less-than"]=function(e,t){return new $t(e.valueOf()<t.valueOf())},Xr["boolean-greater-than"]=function(e,t){return new $t(e.valueOf()>t.valueOf())},Xr["yearMonthDuration-less-than"]=function(e,t){return new $t(pr(e)<pr(t))},Xr["yearMonthDuration-greater-than"]=function(e,t){return new $t(pr(e)>pr(t))},Xr["dayTimeDuration-less-than"]=function(e,t){return new $t(cr(e)<cr(t))},Xr["dayTimeDuration-greater-than"]=function(e,t){return new $t(cr(e)>cr(t))},Xr["duration-equal"]=function(e,t){return new $t(e.negative==t.negative&&pr(e)==pr(t)&&cr(e)==cr(t))},Xr["dateTime-equal"]=function(e,t){return ar(e,t,"eq")},Xr["dateTime-less-than"]=function(e,t){return ar(e,t,"lt")},Xr["dateTime-greater-than"]=function(e,t){return ar(e,t,"gt")},Xr["date-equal"]=function(e,t){return or(e,t,"eq")},Xr["date-less-than"]=function(e,t){return or(e,t,"lt")},Xr["date-greater-than"]=function(e,t){return or(e,t,"gt")},Xr["time-equal"]=function(e,t){return ir(e,t,"eq")},Xr["time-less-than"]=function(e,t){return ir(e,t,"lt")},Xr["time-greater-than"]=function(e,t){return ir(e,t,"gt")},Xr["gYearMonth-equal"]=function(e,t){return ar(new Zt(e.year,e.month,Kt(e.year,e.month),0,0,0,null==e.timezone?this.timezone:e.timezone),new Zt(t.year,t.month,Kt(t.year,t.month),0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},Xr["gYear-equal"]=function(e,t){return ar(new Zt(e.year,1,1,0,0,0,null==e.timezone?this.timezone:e.timezone),new Zt(t.year,1,1,0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},Xr["gMonthDay-equal"]=function(e,t){return ar(new Zt(1972,e.month,e.day,0,0,0,null==e.timezone?this.timezone:e.timezone),new Zt(1972,t.month,t.day,0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},Xr["gMonth-equal"]=function(e,t){return ar(new Zt(1972,e.month,Kt(1972,t.month),0,0,0,null==e.timezone?this.timezone:e.timezone),new Zt(1972,t.month,Kt(1972,t.month),0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},Xr["gDay-equal"]=function(e,t){return ar(new Zt(1972,12,e.day,0,0,0,null==e.timezone?this.timezone:e.timezone),new Zt(1972,12,t.day,0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")
},Xr["add-yearMonthDurations"]=function(e,t){return fr(pr(e)+pr(t))},Xr["subtract-yearMonthDurations"]=function(e,t){return fr(pr(e)-pr(t))},Xr["multiply-yearMonthDuration"]=function(e,t){return fr(pr(e)*t)},Xr["divide-yearMonthDuration"]=function(e,t){return fr(pr(e)/t)},Xr["divide-yearMonthDuration-by-yearMonthDuration"]=function(e,t){return new an(pr(e)/pr(t))},Xr["add-dayTimeDurations"]=function(e,t){return lr(cr(e)+cr(t))},Xr["subtract-dayTimeDurations"]=function(e,t){return lr(cr(e)-cr(t))},Xr["multiply-dayTimeDuration"]=function(e,t){return lr(cr(e)*t)},Xr["divide-dayTimeDuration"]=function(e,t){return lr(cr(e)/t)},Xr["divide-dayTimeDuration-by-dayTimeDuration"]=function(e,t){return new an(cr(e)/cr(t))},Xr["subtract-dateTimes"]=function(){throw"Operator function 'subtract-dateTimes' not implemented"},Xr["subtract-dates"]=function(){throw"Operator function 'subtract-dates' not implemented"},Xr["subtract-times"]=function(e,t){return lr(dr(e)-dr(t))},Xr["add-yearMonthDuration-to-dateTime"]=function(e,t){return sr(e,t,"+")},Xr["add-dayTimeDuration-to-dateTime"]=function(e,t){return ur(e,t,"+")},Xr["subtract-yearMonthDuration-from-dateTime"]=function(e,t){return sr(e,t,"-")},Xr["subtract-dayTimeDuration-from-dateTime"]=function(e,t){return ur(e,t,"-")},Xr["add-yearMonthDuration-to-date"]=function(e,t){return sr(e,t,"+")},Xr["add-dayTimeDuration-to-date"]=function(e,t){return ur(e,t,"+")},Xr["subtract-yearMonthDuration-from-date"]=function(e,t){return sr(e,t,"-")},Xr["subtract-dayTimeDuration-from-date"]=function(e,t){return ur(e,t,"-")},Xr["add-dayTimeDuration-to-time"]=function(e,t){var n=new wn(e.hours,e.minutes,e.seconds,e.timezone);return n.hours+=t.hours,n.minutes+=t.minutes,n.seconds+=t.seconds,Sn(n)},Xr["subtract-dayTimeDuration-from-time"]=function(e,t){var n=new wn(e.hours,e.minutes,e.seconds,e.timezone);return n.hours-=t.hours,n.minutes-=t.minutes,n.seconds-=t.seconds,Sn(n)},Xr["is-same-node"]=function(e,t){return new $t(this.DOMAdapter.isSameNode(e,t))},Xr["node-before"]=function(e,t){return new $t(!!(4&this.DOMAdapter.compareDocumentPosition(e,t)))},Xr["node-after"]=function(e,t){return new $t(!!(2&this.DOMAdapter.compareDocumentPosition(e,t)))},Xr["numeric-add"]=function(e,t){var n=e.valueOf(),r=t.valueOf(),i=Nr.pow(10,hr(n,r));return mr(e,t,(n*i+r*i)/i)},Xr["numeric-subtract"]=function(e,t){var n=e.valueOf(),r=t.valueOf(),i=Nr.pow(10,hr(n,r));return mr(e,t,(n*i-r*i)/i)},Xr["numeric-multiply"]=function(e,t){var n=e.valueOf(),r=t.valueOf(),i=Nr.pow(10,hr(n,r));return mr(e,t,n*i*r*i/(i*i))},Xr["numeric-divide"]=function(e,t){var n=e.valueOf(),r=t.valueOf(),i=Nr.pow(10,hr(n,r));return mr(e,t,e*i/(t*i))},Xr["numeric-integer-divide"]=function(e,t){return new Dn(~~(e/t))},Xr["numeric-mod"]=function(e,t){var n=e.valueOf(),r=t.valueOf(),i=Nr.pow(10,hr(n,r));return mr(e,t,n*i%(r*i)/i)},Xr["numeric-unary-plus"]=function(e){return e},Xr["numeric-unary-minus"]=function(e){return e.value*=-1,e},Xr["numeric-equal"]=function(e,t){return new $t(e.valueOf()==t.valueOf())},Xr["numeric-less-than"]=function(e,t){return new $t(e.valueOf()<t.valueOf())},Xr["numeric-greater-than"]=function(e,t){return new $t(e.valueOf()>t.valueOf())},Xr["QName-equal"]=function(e,t){return new $t(e.localName==t.localName&&e.namespaceURI==t.namespaceURI)},Xr.concatenate=function(e,t){return e.concat(t)},Xr.union=function(t,n){for(var r,i=[],o=0,a=t.length;a>o;o++){if(!this.DOMAdapter.isNode(r=t[o]))throw new e("XPTY0004","Required item type of first operand of 'union' is node()");-1==Mr(i,r)&&i.push(r)}for(var r,o=0,a=n.length;a>o;o++){if(!this.DOMAdapter.isNode(r=n[o]))throw new e("XPTY0004","Required item type of second operand of 'union' is node()");-1==Mr(i,r)&&i.push(r)}return br(i,this)},Xr.intersect=function(t,n){for(var r,i,o=[],a=0,s=t.length;s>a;a++){if(!this.DOMAdapter.isNode(r=t[a]))throw new e("XPTY0004","Required item type of second operand of 'intersect' is node()");i=!1;for(var u=0,c=n.length;c>u&&!i;u++){if(!this.DOMAdapter.isNode(n[u]))throw new e("XPTY0004","Required item type of first operand of 'intersect' is node()");i=this.DOMAdapter.isSameNode(n[u],r)}i&&-1==Mr(o,r)&&o.push(r)}return br(o,this)},Xr.except=function(t,n){for(var r,i,o=[],a=0,s=t.length;s>a;a++){if(!this.DOMAdapter.isNode(r=t[a]))throw new e("XPTY0004","Required item type of second operand of 'except' is node()");i=!1;for(var u=0,c=n.length;c>u&&!i;u++){if(!this.DOMAdapter.isNode(n[u]))throw new e("XPTY0004","Required item type of first operand of 'except' is node()");i=this.DOMAdapter.isSameNode(n[u],r)}i||-1!=Mr(o,r)||o.push(r)}return br(o,this)},Xr.to=function(e,t){for(var n=[],r=e.valueOf(),i=t.valueOf();i>=r;r++)n.push(new Dn(r));return n},o("node-name",[[Kn,"?"]],function(e){if(null!=e){var t=this.DOMAdapter.getProperty;switch(t(e,"nodeType")){case 1:case 2:return new xn(t(e,"prefix"),t(e,"localName"),t(e,"namespaceURI"));case 5:throw"Not implemented";case 6:throw"Not implemented";case 7:return new xn(null,t(e,"target"),null);case 10:return new xn(null,t(e,"name"),null)}}return null}),o("nilled",[[Kn,"?"]],function(e){return null!=e&&1==this.DOMAdapter.getProperty(e,"nodeType")?new $t(!1):null}),o("string",[[Jn,"?",!0]],function(t){if(!arguments.length){if(!this.item)throw new e("XPDY0002");t=this.item}return null==t?new bn(""):bn.cast(xr([t],this)[0])}),o("data",[[Jn,"*"]],function(e){return xr(e,this)}),o("base-uri",[[Kn,"?",!0]],function(t){if(!arguments.length){if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","base-uri() function called when the context item is not a node");t=this.item}return qt.cast(new bn(this.DOMAdapter.getProperty(t,"baseURI")||""))}),o("document-uri",[[Kn,"?"]],function(e){if(null!=e){var t=this.DOMAdapter.getProperty;if(9==t(e,"nodeType"))return qt.cast(new bn(t(e,"documentURI")||""))}return null}),o("resolve-uri",[[bn,"?"],[bn,"",!0]],function(t,n){var n;if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","resolve-uri() function called when the context item is not a node");n=new bn(this.DOMAdapter.getProperty(this.item,"baseURI")||"")}if(null==t)return null;if(""==t.valueOf()||"#"==t.valueOf().charAt(0))return qt.cast(n);var r=qt.cast(t);if(r.scheme)return r;var i=qt.cast(n);if(r.scheme=i.scheme,!r.authority&&(r.authority=i.authority,"/"!=r.path.charAt(0))){var o=r.path.split("/"),a=i.path.split("/");a.pop();for(var s=""==a[0]?1:0,u=0,c=o.length;c>u;u++)".."==o[u]?a.length>s?a.pop():(a.push(o[u]),s++):"."!=o[u]&&a.push(o[u]);(".."==o[--u]||"."==o[u])&&a.push(""),r.path=a.join("/")}return r}),o("true",[],function(){return new $t(!0)}),o("false",[],function(){return new $t(!1)}),o("not",[[Jn,"*"]],function(e){return new $t(!_r(e,this))}),o("position",[],function(){return new Dn(this.position)}),o("last",[],function(){return new Dn(this.size)}),o("current-dateTime",[],function(){return this.dateTime}),o("current-date",[],function(){return Jt.cast(this.dateTime)}),o("current-time",[],function(){return wn.cast(this.dateTime)}),o("implicit-timezone",[],function(){return this.timezone}),o("default-collation",[],function(){return new bn(this.staticContext.defaultCollationName)}),o("static-base-uri",[],function(){return qt.cast(new bn(this.staticContext.baseURI||""))}),o("years-from-duration",[[un,"?"]],function(e){return gr(e,"year")}),o("months-from-duration",[[un,"?"]],function(e){return gr(e,"month")}),o("days-from-duration",[[un,"?"]],function(e){return gr(e,"day")}),o("hours-from-duration",[[un,"?"]],function(e){return gr(e,"hours")}),o("minutes-from-duration",[[un,"?"]],function(e){return gr(e,"minutes")}),o("seconds-from-duration",[[un,"?"]],function(e){return gr(e,"seconds")}),o("year-from-dateTime",[[Zt,"?"]],function(e){return vr(e,"year")}),o("month-from-dateTime",[[Zt,"?"]],function(e){return vr(e,"month")}),o("day-from-dateTime",[[Zt,"?"]],function(e){return vr(e,"day")}),o("hours-from-dateTime",[[Zt,"?"]],function(e){return vr(e,"hours")}),o("minutes-from-dateTime",[[Zt,"?"]],function(e){return vr(e,"minutes")}),o("seconds-from-dateTime",[[Zt,"?"]],function(e){return vr(e,"seconds")}),o("timezone-from-dateTime",[[Zt,"?"]],function(e){return vr(e,"timezone")}),o("year-from-date",[[Jt,"?"]],function(e){return vr(e,"year")}),o("month-from-date",[[Jt,"?"]],function(e){return vr(e,"month")}),o("day-from-date",[[Jt,"?"]],function(e){return vr(e,"day")}),o("timezone-from-date",[[Jt,"?"]],function(e){return vr(e,"timezone")}),o("hours-from-time",[[wn,"?"]],function(e){return vr(e,"hours")}),o("minutes-from-time",[[wn,"?"]],function(e){return vr(e,"minutes")}),o("seconds-from-time",[[wn,"?"]],function(e){return vr(e,"seconds")}),o("timezone-from-time",[[wn,"?"]],function(e){return vr(e,"timezone")}),o("adjust-dateTime-to-timezone",[[Zt,"?"],[Pn,"?",!0]],function(e,t){return yr(e,arguments.length>1&&null!=t?arguments.length>1?t:this.timezone:null)}),o("adjust-date-to-timezone",[[Jt,"?"],[Pn,"?",!0]],function(e,t){return yr(e,arguments.length>1&&null!=t?arguments.length>1?t:this.timezone:null)}),o("adjust-time-to-timezone",[[wn,"?"],[Pn,"?",!0]],function(e,t){return yr(e,arguments.length>1&&null!=t?arguments.length>1?t:this.timezone:null)}),o("name",[[Kn,"?",!0]],function(t){if(arguments.length){if(null==t)return new bn("")}else{if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","name() function called when the context item is not a node");t=this.item}var n=zr["node-name"].call(this,t);return new bn(null==n?"":n.toString())}),o("local-name",[[Kn,"?",!0]],function(t){if(arguments.length){if(null==t)return new bn("")}else{if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","local-name() function called when the context item is not a node");t=this.item}return new bn(this.DOMAdapter.getProperty(t,"localName")||"")}),o("namespace-uri",[[Kn,"?",!0]],function(t){if(arguments.length){if(null==t)return qt.cast(new bn(""))}else{if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","namespace-uri() function called when the context item is not a node");t=this.item}return qt.cast(new bn(this.DOMAdapter.getProperty(t,"namespaceURI")||""))}),o("number",[[zt,"?",!0]],function(t){if(!arguments.length){if(!this.item)throw new e("XPDY0002");t=xr([this.item],this)[0]}var n=new sn(jr);if(null!=t)try{n=sn.cast(t)}catch(r){}return n}),o("lang",[[bn,"?"],[Kn,"",!0]],function(t,n){if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","lang() function called when the context item is not a node");n=this.item}var r=this.DOMAdapter.getProperty;2==r(n,"nodeType")&&(n=r(n,"ownerElement"));for(var i;n;n=r(n,"parentNode"))if(i=r(n,"attributes"))for(var o=0,a=i.length;a>o;o++)if("xml:lang"==r(i[o],"nodeName"))return new $t(r(i[o],"value").replace(/-.+/,"").toLowerCase()==t.valueOf().replace(/-.+/,"").toLowerCase());return new $t(!1)}),o("root",[[Kn,"?",!0]],function(t){if(arguments.length){if(null==t)return null}else{if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","root() function called when the context item is not a node");t=this.item}var n=this.DOMAdapter.getProperty;2==n(t,"nodeType")&&(t=n(t,"ownerElement"));for(var r=t;r;r=n(t,"parentNode"))t=r;return t}),o("abs",[[sn,"?"]],function(e){return new an(Nr.abs(e))}),o("ceiling",[[sn,"?"]],function(e){return new an(Nr.ceil(e))}),o("floor",[[sn,"?"]],function(e){return new an(Nr.floor(e))}),o("round",[[sn,"?"]],function(e){return new an(Nr.round(e))}),o("round-half-to-even",[[sn,"?"],[Dn,"",!0]],function(e,t){var n=arguments.length>1?t.valueOf():0;if(0>n){var r=new Dn(Nr.pow(10,-n)),i=Nr.round(Xr["numeric-divide"].call(this,e,r)),o=new Dn(i);return nDecimal=Nr.abs(Xr["numeric-subtract"].call(this,o,Xr["numeric-divide"].call(this,e,r))),Xr["numeric-multiply"].call(this,Xr["numeric-add"].call(this,o,new an(.5==nDecimal&&i%2?-1:0)),r)}var r=new Dn(Nr.pow(10,n)),i=Nr.round(Xr["numeric-multiply"].call(this,e,r)),o=new Dn(i);return nDecimal=Nr.abs(Xr["numeric-subtract"].call(this,o,Xr["numeric-multiply"].call(this,e,r))),Xr["numeric-divide"].call(this,Xr["numeric-add"].call(this,o,new an(.5==nDecimal&&i%2?-1:0)),r)}),o("resolve-QName",[[bn,"?"],[tr]],function(t,n){if(null==t)return null;var r=t.valueOf(),i=r.match(Ei);if(!i)throw new e("FOCA0002","Invalid QName '"+r+"'");var o=i[1]||null,a=i[2],s=this.DOMAdapter.lookupNamespaceURI(n,o);if(null!=o&&!s)throw new e("FONS0004","Namespace prefix '"+o+"' has not been declared");return new xn(o,a,s||null)}),o("QName",[[bn,"?"],[bn]],function(t,n){var r=n.valueOf(),i=r.match(Ei);if(!i)throw new e("FOCA0002","Invalid QName '"+r+"'");return new xn(i[1]||null,i[2]||null,null==t?"":t.valueOf())}),o("prefix-from-QName",[[xn,"?"]],function(e){return null!=e&&e.prefix?new zn(e.prefix):null}),o("local-name-from-QName",[[xn,"?"]],function(e){return null==e?null:new zn(e.localName)}),o("namespace-uri-from-QName",[[xn,"?"]],function(e){return null==e?null:qt.cast(new bn(e.namespaceURI||""))}),o("namespace-uri-for-prefix",[[bn,"?"],[tr]],function(e,t){var n=null==e?"":e.valueOf(),r=this.DOMAdapter.lookupNamespaceURI(t,n||null);return null==r?null:qt.cast(new bn(r))}),o("in-scope-prefixes",[[tr]],function(){throw"Function 'in-scope-prefixes' not implemented"}),o("boolean",[[Jn,"*"]],function(e){return new $t(_r(e,this))}),o("index-of",[[zt,"*"],[zt],[bn,"",!0]],function(e,t){if(!e.length||null==t)return[];var n=t;n instanceof En&&(n=bn.cast(n));for(var r,i=[],o=0,a=e.length;a>o;o++)r=e[o],r instanceof En&&(r=bn.cast(r)),r.valueOf()===n.valueOf()&&i.push(new Dn(o+1));return i}),o("empty",[[Jn,"*"]],function(e){return new $t(!e.length)}),o("exists",[[Jn,"*"]],function(e){return new $t(!!e.length)}),o("distinct-values",[[zt,"*"],[bn,"",!0]],function(e){if(!e.length)return null;for(var t,n=[],r=0,i=e.length;i>r;r++){t=e[r],t instanceof En&&(t=bn.cast(t));for(var o,a=0,s=n.length,u=!1;s>a&&!u;a++)o=n[a],o instanceof En&&(o=bn.cast(o)),o.valueOf()===t.valueOf()&&(u=!0);u||n.push(e[r])}return n}),o("insert-before",[[Jn,"*"],[Dn],[Jn,"*"]],function(e,t,n){if(!e.length)return n;if(!n.length)return e;var r=e.length,i=t.valueOf();1>i?i=1:i>r&&(i=r+1);for(var o=[],a=0;r>a;a++)i==a+1&&(o=o.concat(n)),o.push(e[a]);return i==a+1&&(o=o.concat(n)),o}),o("remove",[[Jn,"*"],[Dn]],function(e,t){if(!e.length)return[];var n=e.length,r=t.valueOf();if(1>r||r>n)return e;for(var i=[],o=0;n>o;o++)r!=o+1&&i.push(e[o]);return i}),o("reverse",[[Jn,"*"]],function(e){return e.reverse(),e}),o("subsequence",[[Jn,"*"],[sn,""],[sn,"",!0]],function(e,t,n){var r=Nr.round(t),i=arguments.length>2?Nr.round(n):e.length-r+1;return e.slice(r-1,r-1+i)}),o("unordered",[[Jn,"*"]],function(e){return e}),o("zero-or-one",[[Jn,"*"]],function(t){if(t.length>1)throw new e("FORG0003");return t}),o("one-or-more",[[Jn,"*"]],function(t){if(!t.length)throw new e("FORG0004");return t}),o("exactly-one",[[Jn,"*"]],function(t){if(1!=t.length)throw new e("FORG0005");return t}),o("deep-equal",[[Jn,"*"],[Jn,"*"],[bn,"",!0]],function(){throw"Function 'deep-equal' not implemented"}),o("count",[[Jn,"*"]],function(e){return new Dn(e.length)}),o("avg",[[zt,"*"]],function(t){if(!t.length)return null;try{var n=t[0];n instanceof En&&(n=sn.cast(n));for(var r,i=1,o=t.length;o>i;i++)r=t[i],r instanceof En&&(r=sn.cast(r)),n=Zr["+"](n,r,this);return ei.div(n,new Dn(o),this)}catch(a){throw"XPTY0004"!=a.code?a:new e("FORG0006","Input to avg() contains a mix of types")}}),o("max",[[zt,"*"],[bn,"",!0]],function(t){if(!t.length)return null;try{for(var n=t[0],r=1,i=t.length;i>r;r++)Jr.ge(t[r],n,this).valueOf()&&(n=t[r]);return n}catch(o){throw"XPTY0004"!=o.code?o:new e("FORG0006","Input to max() contains a mix of not comparable values")}}),o("min",[[zt,"*"],[bn,"",!0]],function(t){if(!t.length)return null;try{for(var n=t[0],r=1,i=t.length;i>r;r++)Jr.le(t[r],n,this).valueOf()&&(n=t[r]);return n}catch(o){throw"XPTY0004"!=o.code?o:new e("FORG0006","Input to min() contains a mix of not comparable values")}}),o("sum",[[zt,"*"],[zt,"?",!0]],function(t,n){if(!t.length)return arguments.length>1?n:new sn(0);try{var r=t[0];r instanceof En&&(r=sn.cast(r));for(var i,o=1,a=t.length;a>o;o++)i=t[o],i instanceof En&&(i=sn.cast(i)),r=Zr["+"](r,i,this);return r}catch(s){throw"XPTY0004"!=s.code?s:new e("FORG0006","Input to sum() contains a mix of types")}}),o("id",[[bn,"*"],[Kn,"",!0]],function(t,n){if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","id() function called when the context item is not a node");n=this.item}var r=zr.root.call(this,n);if(9!=this.DOMAdapter.getProperty(r,"nodeType"))throw new e("FODC0001");for(var i=[],o=0;o<t.length;o++)for(var a=0,s=Lr(t[o]).split(/\s+/),u=s.length;u>a;a++)(n=this.DOMAdapter.getElementById(r,s[a]))&&-1==Mr(i,n)&&i.push(n);return br(i,this)}),o("idref",[[bn,"*"],[Kn,"",!0]],function(){throw"Function 'idref' not implemented"}),o("doc",[[bn,"?",!0]],function(){throw"Function 'doc' not implemented"}),o("doc-available",[[bn,"?",!0]],function(){throw"Function 'doc-available' not implemented"}),o("collection",[[bn,"?",!0]],function(){throw"Function 'collection' not implemented"}),o("element-with-id",[[bn,"*"],[Kn,"",!0]],function(){throw"Function 'element-with-id' not implemented"}),o("codepoints-to-string",[[Dn,"*"]],function(e){for(var t=[],n=0,r=e.length;r>n;n++)t.push(Cr.fromCharCode(e[n]));return new bn(t.join(""))}),o("string-to-codepoints",[[bn,"?"]],function(e){if(null==e)return null;var t=e.valueOf();if(""==t)return[];for(var n=[],r=0,i=t.length;i>r;r++)n.push(new Dn(t.charCodeAt(r)));return n}),o("compare",[[bn,"?"],[bn,"?"],[bn,"",!0]],function(t,n,r){if(null==t||null==n)return null;var i,o=this.staticContext.defaultCollationName;if(arguments.length>2&&(o=r.valueOf()),i=o==Ur+"/collation/codepoint"?Di:this.staticContext.getCollation(o),!i)throw new e("FOCH0002","Unknown collation {"+o+"}");return new Dn(i.compare(t.valueOf(),n.valueOf()))}),o("codepoint-equal",[[bn,"?"],[bn,"?"]],function(e,t){return null==e||null==t?null:new $t(e.valueOf()==t.valueOf())}),o("concat",null,function(){if(arguments.length<2)throw new e("XPST0017","Function concat() must have at least 2 arguments");for(var t,n=[],r=0,i=arguments.length;i>r;r++)t=arguments[r],xt(this,t,"?","each argument of concat()"),t.length&&(n[n.length]=bn.cast(xr(t,this)[0]).valueOf());return new bn(n.join(""))}),o("string-join",[[bn,"*"],[bn]],function(e,t){return new bn(e.join(t))}),o("substring",[[bn,"?"],[sn],[sn,"",!0]],function(e,t,n){var r=null==e?"":e.valueOf(),i=Nr.round(t)-1,o=arguments.length>2?i+Nr.round(n):r.length;return new bn(o>i?r.substring(i,o):"")}),o("string-length",[[bn,"?",!0]],function(t){if(!arguments.length){if(!this.item)throw new e("XPDY0002");t=bn.cast(xr([this.item],this)[0])}return new Dn(null==t?0:t.valueOf().length)}),o("normalize-space",[[bn,"?",!0]],function(t){if(!arguments.length){if(!this.item)throw new e("XPDY0002");t=bn.cast(xr([this.item],this)[0])}return new bn(null==t?"":Lr(t).replace(/\s\s+/g," "))}),o("normalize-unicode",[[bn,"?"],[bn,"",!0]],function(){throw"Function 'normalize-unicode' not implemented"}),o("upper-case",[[bn,"?"]],function(e){return new bn(null==e?"":e.valueOf().toUpperCase())}),o("lower-case",[[bn,"?"]],function(e){return new bn(null==e?"":e.valueOf().toLowerCase())}),o("translate",[[bn,"?"],[bn],[bn]],function(e,t,n){if(null==e)return new bn("");for(var r,i=e.valueOf().split(""),o=t.valueOf().split(""),a=n.valueOf().split(""),s=a.length,u=[],c=0,l=i.length;l>c;c++)-1==(r=o.indexOf(i[c]))?u[u.length]=i[c]:s>r&&(u[u.length]=a[r]);return new bn(u.join(""))}),o("encode-for-uri",[[bn,"?"]],function(e){return new bn(null==e?"":window.encodeURIComponent(e))}),o("iri-to-uri",[[bn,"?"]],function(e){return new bn(null==e?"":window.encodeURI(window.decodeURI(e)))}),o("escape-html-uri",[[bn,"?"]],function(e){if(null==e||""==e.valueOf())return new bn("");for(var t,n=e.valueOf().split(""),r=0,i=n.length;i>r;r++)((t=n[r].charCodeAt(0))<32||t>126)&&(n[r]=window.encodeURIComponent(n[r]));return new bn(n.join(""))}),o("contains",[[bn,"?"],[bn,"?"],[bn,"",!0]],function(e,t){return new $t((null==e?"":e.valueOf()).indexOf(null==t?"":t.valueOf())>=0)}),o("starts-with",[[bn,"?"],[bn,"?"],[bn,"",!0]],function(e,t){return new $t(0==(null==e?"":e.valueOf()).indexOf(null==t?"":t.valueOf()))}),o("ends-with",[[bn,"?"],[bn,"?"],[bn,"",!0]],function(e,t){var n=null==e?"":e.valueOf(),r=null==t?"":t.valueOf();return new $t(n.indexOf(r)==n.length-r.length)}),o("substring-before",[[bn,"?"],[bn,"?"],[bn,"",!0]],function(e,t){var n,r=null==e?"":e.valueOf(),i=null==t?"":t.valueOf();return new bn((n=r.indexOf(i))>=0?r.substring(0,n):"")}),o("substring-after",[[bn,"?"],[bn,"?"],[bn,"",!0]],function(e,t){var n,r=null==e?"":e.valueOf(),i=null==t?"":t.valueOf();return new bn((n=r.indexOf(i))>=0?r.substring(n+i.length):"")}),o("matches",[[bn,"?"],[bn],[bn,"",!0]],function(e,t,n){var r=null==e?"":e.valueOf(),i=wr(t.valueOf(),arguments.length>2?n.valueOf():"");return new $t(i.test(r))}),o("replace",[[bn,"?"],[bn],[bn],[bn,"",!0]],function(e,t,n,r){var i=null==e?"":e.valueOf(),o=wr(t.valueOf(),arguments.length>3?r.valueOf():"");return new $t(i.replace(o,n.valueOf()))}),o("tokenize",[[bn,"?"],[bn],[bn,"",!0]],function(e,t,n){for(var r=null==e?"":e.valueOf(),i=wr(t.valueOf(),arguments.length>2?n.valueOf():""),o=[],a=0,s=r.split(i),u=s.length;u>a;a++)o.push(new bn(s[a]));return o}),o("trace",[[Jn,"*"],[bn]],function(e,t){var n=window.console;return n&&n.log&&n.log(t.valueOf(),e),e});var Di=new u;Di.equals=function(e,t){return e==t},Di.compare=function(e,t){return e==t?0:e>t?1:-1};var Ai=function(){};Ai.prototype.nodeType=2,Ai.prototype.nodeName=Ai.prototype.nodeValue=Ai.prototype.ownerDocument=Ai.prototype.localName=Ai.prototype.namespaceURI=Ai.prototype.prefix=Ai.prototype.attributes=Ai.prototype.childNodes=Ai.prototype.firstChild=Ai.prototype.lastChild=Ai.prototype.previousSibling=Ai.prototype.nextSibling=Ai.prototype.parentNode=Ai.prototype.name=Ai.prototype.specified=Ai.prototype.value=Ai.prototype.ownerElement=null,Sr.prototype=new n;var Ni=new i;Sr.prototype.getProperty=function(e,t){if(t in e)return e[t];if("baseURI"==t){for(var n,r="",i=Ni.getFunction("{http://www.w3.org/2005/xpath-functions}resolve-uri"),o=Ni.getDataType("{http://www.w3.org/2001/XMLSchema}string"),a=e;a;a=a.parentNode)1==a.nodeType&&(n=a.getAttribute("xml:base"))&&(r=i(new o(n),new o(r)).toString());return r}if("textContent"==t){var s=[];return function(e){for(var t,n=0;t=e.childNodes[n];n++)3==t.nodeType||4==t.nodeType?s.push(t.data):1==t.nodeType&&t.firstChild&&arguments.callee(t)}(e),s.join("")}},Sr.prototype.compareDocumentPosition=function(e,t){if("compareDocumentPosition"in e)return e.compareDocumentPosition(t);if(t==e)return 0;var n,r,i,o,a,s=null,u=null;if(2==e.nodeType&&(s=e,e=this.getProperty(s,"ownerElement")),2==t.nodeType&&(u=t,t=this.getProperty(u,"ownerElement")),s&&u&&e&&e==t)for(o=0,n=this.getProperty(e,"attributes"),a=n.length;a>o;o++){if(r=n[o],r==s)return 36;if(r==u)return 34}var c,l,p,f,d=[],h=[];for(s&&d.push(s),i=e;i;i=i.parentNode)d.push(i);for(u&&h.push(u),i=t;i;i=i.parentNode)h.push(i);if((e.ownerDocument||e)!=(t.ownerDocument||t)||d[d.length-1]!=h[h.length-1])return 33;for(o=Nr.min(c=d.length,p=h.length);o;--o)if((l=d[--c])!=(f=h[--p])){if(2==l.nodeType)return 4;if(2==f.nodeType)return 2;if(!f.nextSibling)return 4;if(!l.nextSibling)return 2;for(i=f.previousSibling;i;i=i.previousSibling)if(i==l)return 4;return 2}return p>c?20:10},Sr.prototype.lookupNamespaceURI=function(e,t){if("lookupNamespaceURI"in e)return e.lookupNamespaceURI(t);for(;e&&9!=e.nodeType;e=e.parentNode){if(t==this.getProperty(oChild,"prefix"))return this.getProperty(e,"namespaceURI");if(1==e.nodeType)for(var n=this.getProperty(e,"attributes"),r=0,i=n.length,o="xmlns:"+t;i>r;r++)if(this.getProperty(n[r],"nodeName")==o)return this.getProperty(n[r],"value")}return null},Sr.prototype.getElementsByTagNameNS=function(e,t,n){if("getElementsByTagNameNS"in e)return e.getElementsByTagNameNS(t,n);var r=[],i="*"==t,o="*"==n;return function(e){for(var a,s=0;a=e.childNodes[s];s++)1==a.nodeType&&(!o&&n!=this.getProperty(a,"localName")||!i&&t!=this.getProperty(a,"namespaceURI")||(r[r.length]=a),a.firstChild&&arguments.callee(a))}(e),r};var ki=new Sr,Oi=new Sr;Oi.getProperty=function(e,t){return"localName"==t&&1==e.nodeType?e.localName.toLowerCase():"namespaceURI"==t?1==e.nodeType?"http://www.w3.org/1999/xhtml":null:Sr.prototype.getProperty.call(this,e,t)};var Ri=new Sr;Ri.getProperty=function(e,t){if("localName"==t&&1==e.nodeType)return e.nodeName.toLowerCase();if("prefix"==t)return null;if("namespaceURI"==t)return 1==e.nodeType?"http://www.w3.org/1999/xhtml":null;if("textContent"==t)return e.innerText;if("attributes"==t&&1==e.nodeType){for(var n,r,i=[],o=0,a=e.attributes,s=a.length;s>o;o++)n=a[o],n.specified&&(r=new Ai,r.ownerElement=e,r.ownerDocument=e.ownerDocument,r.specified=!0,r.value=r.nodeValue=n.nodeValue,r.name=r.nodeName=r.localName=n.nodeName.toLowerCase(),i[i.length]=r);return i}return Sr.prototype.getProperty.call(this,e,t)};var ji=new Sr;ji.getProperty=function(e,t){if("localName"==t){if(7==e.nodeType)return null;if(1==e.nodeType)return e.baseName}if("prefix"==t||"namespaceURI"==t)return e[t]||null;if("textContent"==t)return e.text;if("attributes"==t&&1==e.nodeType){for(var n,r,i=[],o=0,a=e.attributes,s=a.length;s>o;o++)n=a[o],n.specified&&(r=new Ai,r.nodeType=2,r.ownerElement=e,r.ownerDocument=e.ownerDocument,r.specified=!0,r.value=r.nodeValue=n.nodeValue,r.name=r.nodeName=n.nodeName,r.localName=n.baseName,r.prefix=n.prefix||null,r.namespaceURI=n.namespaceURI||null,i[i.length]=r);return i}return Sr.prototype.getProperty.call(this,e,t)},ji.getElementById=function(e,t){return e.nodeFromID(t)};var Fi=(window.HTMLDocument,window.jQuery),Li=window.document,Mi=!!Li.namespaces&&!Li.createElementNS,Bi=!Mi&&"http://www.w3.org/1999/xhtml"!=Li.documentElement.namespaceURI,Ui=new i,Vi=new i;Ui.baseURI=Li.location.href,Ui.defaultFunctionNamespace="http://www.w3.org/2005/xpath-functions",Ui.defaultElementNamespace="http://www.w3.org/1999/xhtml",Vi.defaultFunctionNamespace=Ui.defaultFunctionNamespace;var Qi={};Qi.xpath=function(e,t,n){return Er(e instanceof Fi?e:new Fi(e),t,n)},Fi.extend(Fi,Qi),Qi={},Qi.xpath=function(e,t){return Er(this,e,t)},Fi.extend(Fi.prototype,Qi)}(),define("sap/watt/lib/jqueryxpathplugin/jqueryXpath",function(){}),define("sap/watt/platform/plugin/utils/xml/XmlUtil",["sap/watt/lib/jqueryxpathplugin/jqueryXpath"],function(){var e=function(e,t){for(var n=e.attributes,r=0;r<n.length;r++){var i=n[r];if(i.nodeName===t)return i.value}return"file"},t=function(e){for(var t=null,n=e.childNodes,r=0;r<n.length;r++)if(n[r].nodeType==Node.ELEMENT_NODE){t=n[r];break}return t},n=function(e){for(var t=[],n=e.childNodes,r=0;r<n.length;r++)n[r].nodeType==Node.ELEMENT_NODE&&t.push(n[r]);return t},r=function(e,t){for(var n=e.childNodes,r=0;r<n.length;r++){var i=n[r];if(i.tagName===t)return i}return void 0},i=function(e,t,n,r){var i=[],o=e?e.childNodes:null;if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s.attributes;if(u)for(var c=0;c<u.length;c++){var l=u[c];l.name===n&&l.nodeValue===r&&s.tagName===t&&i.push(s)}}return i},o=function(e,t,n){var r=[],i=e?e.childNodes:null;if(i)for(var o=0;o<i.length;o++){var a=i[o],s=a.attributes;if(s)for(var u=0;u<s.length;u++){var c=s[u];c.name===t&&c.nodeValue===n&&r.push(a)}}return r},a=function(e,t){for(var n=0;n<e.childElementCount;n++){var r=e.childNodes[n];if(r.tagName===t)return r.textContent}return""},s=function(e){var t=e;if("string"==typeof t){var n=new DOMParser;t=n.parseFromString(e,"text/xml")}return t},u=function(e,t){try{var n=l(e,t);if(n){var r=n.getMetadata();if(r)for(var i=r.getAllPublicMethods(),o=0;o<i.length;o++)if("getVisible"===i[o])return!0}}catch(a){}return!1},c=function(e,t,n){try{var r=l(e,t);if(r){var i=r.getMetadata();if(i){var o=i.getAllAggregations();if(o[n])return!0}}}catch(a){}return!1},l=function(e,t){var n=t.split(":");2===n.length&&(t=n[1]),"View"===t&&(e="sap.ui.core.mvc");for(var r=sap,i=!0,o=e.split("."),a=1;a<o.length;a++)r=r[o[a]],r||(i=!1);if(!i){try{sap.ui.getCore().loadLibrary(e)}catch(s){console.log(s.message)}for(r=sap,a=1;a<o.length;a++)if(r=r[o[a]],!r)return void 0}return r=r[t]},p=function(e,t,n){for(var r=e.getElementsByTagName("*"),i=[],o=0;o<r.length;o++){var a=r[o].getAttribute(n);null!==a&&void 0!==a&&("*"===t?u(r[o].namespaceURI,r[o].nodeName)&&i.push({name:a,nodeName:r[o].nodeName}):jQuery.sap.endsWith(r[o].tagName,t)&&i.push({name:a,nodeName:r[o].nodeName}))}return i},f=function(e){for(var t={},n=e.attributes,r=0;r<n.length;r++)t[n[r].name]=n[r].value;return t};return{getAttribute:e,getChildByTagName:r,getChildNodeValue:a,getXmlParameters:p,getTagAttributes:f,stringToXml:s,isVisible:u,isAggregation:c,firstElementChild:t,children:n,getChildByAttrNameVal:o,getChildByTagAttrNameVal:i}}),define("sap.watt.saptoolsets.fiori.common.librarydiscovery/service/LibraryDiscoveryService",["sap/watt/lib/jszip/jszip-shim","sap/watt/platform/plugin/utils/xml/XmlUtil"],function(e,t){var n={configure:function(e){this._aStyles=e.styles,this._aStyles&&this.context.service.resource.includeStyles(this._aStyles).done()},_asciiReplaceSlash:function(e){return e.replace(/\./g,"%2f")},_getFile:function(e){return Q.sap.ajax({type:"GET",url:e,dataType:"text"}).then(function(e){return 4===e[1].readyState&&e[1].status<300?e[0]:404===e[1].status?null:void 0})},_parseDotLibraryToGetDescription:function(e){var t=/documentation\s*\>([\s\S]*?)\</,n=e.match(t);return n?n[1]:""},_buildLibraryJson:function(e,t,n,r,i,o,a,s,u){var c={name:e,externalName:t,description:n,version:i,controls:r,entryPath:o,path:a,account:s,isManifest:u};return c},_parseToGetControls:function(e){var t=/controls\s*:\s*\[([\s\S]*?)\]/,n=e.match(t),r=[],i=[];if(n){if(""===n[1])return i;r=n[1].split(",");for(var o=0;o<r.length;o++){r[o]=r[o].trim().replace(/"/g,"");var a={};a.name=r[o],i.push(a)}}return i},_parseToGetVersion:function(e){var n=/version\s*:\s*\"([\s\S]*?)\"/,r="",i=e.match(n);if(i)r=i[1];else{var o=jQuery.sap.parseXML(e),a=t.firstElementChild(o),s=t.getChildByTagName(a,"version");r=s.textContent}return r},_parseToGetName:function(e){var t=/name\s*:\s*\"([\s\S]*?)\"/,n=e.match(t);return n[1]},_isABAPLibrary:function(e,t){var n="library.js/content",r=this;return r._getFile(t.filestore_ui5_bsp+"/"+e.title+"%2fversion.json/content").then(function(i){if(i){var o=JSON.parse(i),a=r._asciiReplaceSlash(o.application),s=require.toUrl(t.filestore_ui5_bsp+"/"+e.title+"%2f"+a+"%2f"+n);return r._getFile(s).then(function(t){if(t){var n=o.application,i=r._parseToGetVersion(t),a=r._parseToGetControls(t),s=o.application.replace(/\./g,"/");return r._buildLibraryJson(n,e.title,e.summary,a,i,"/sap/bc/ui5_ui5/sap/"+e.title+"/"+s,"/resources/"+s,"","")}return null})}})},_filterABAPLibraries:function(e,t){for(var n=[],r=[],i=this,o=0;o<e.length;o++)i.app=e[o],r.push(i._isABAPLibrary(i.app,t));return Q.allSettled(r).then(function(e){return e.forEach(function(e){"fulfilled"===e.state&&e.value&&n.push(e.value)}),n})},_getResponseFromHCP:function(e,t){var n=Q.defer(),r=new XMLHttpRequest;return r.open("GET",e),r.setRequestHeader("Accept","*/*"),r.responseType=t,r.onload=function(e){4===this.readyState&&this.status<300?n.resolve(this.response):n.reject(e)},r.send(),n.promise},_getJSZipFromHCP:function(t){return this._getResponseFromHCP(t,"arraybuffer").then(function(t){var n=new e(t);return n})},_getHCPLibrary:function(e,t,n){var r=this,i="/api/html5api/accounts/"+e+"/applications/"+t.name+(n?"/versions/"+n:"")+"/content?pathSuffixFilter=library.js,.library,manifest.json";return this.context.service.libraryDiscovery._getJSZipFromHCP(i).then(function(n){var o=Object.keys(n.files),a=Object.keys(o).length;if(a){for(var s,u,c=!1,l=0;l<o.length;l++){var p=o[l];if(-1!==p.search("library.js")?s=p:-1!==p.search(".library")?u=p:-1!==p.search("manifest.json")&&(c=!0),s&&u&&c)break}var f=t.name;if(s&&u&&n.file(u)){var d=n.file(u).asText(),h=r._parseDotLibraryToGetDescription(d),m=n.file(s).asText(),g=r._parseToGetControls(m),v=r._parseToGetName(m),y="Active",_="";
i="";var x=t.providerAccount?t.providerAccount:e;return r._buildLibraryJson(v,f,h,g,y,_,i,x,c)}return null}return null}).fail(function(){return null})},_filterHCPLibraries:function(e,t,n,r){for(var i=this.context.service.hcpconnectivity,o=[],a=[],s=this,u=0;u<e.length;u++)s.app=e[u],a.push(s._getHCPLibrary(t,s.app));return Q.allSettled(a).then(function(e){var a=[];return e.forEach(function(e){if("fulfilled"===e.state&&e.value){var s=e.value.externalName;a.push(i.getAppVersions(t,n,r,s)),o.push(e.value)}}),Q.allSettled(a).then(function(e){return o.forEach(function(t){for(var n=0;n<e.length;n++)if(void 0!==e[n].value&&e[n].value.appName===t.externalName){t.versions=e[n].value;break}}),o})})},_getHCPName:function(e){return this.context.service.setting.project.getProjectSettings("hcpdeploy",e).then(function(e){return e.name})},_getWorkspaceLibrary:function(e,t){var n=this,r=e.getEntity().getFullPath();return n.isLibraryProject(r,t).then(function(i){return i?n.getWorkspaceLibraryNamespace(r).then(function(r){return t.getDocument(e.getEntity().getFullPath()+"/src"+r+"/library.js").then(function(i){return i.getContent().then(function(i){var o=n._parseToGetControls(i),a=n._parseToGetName(i);return n._getHCPName(e).then(function(i){return t.getDocument(e.getEntity().getFullPath()+"/src"+r+"/.library").then(function(s){return s.getContent().then(function(s){return t.getDocument(e.getEntity().getFullPath()+"/src"+r+"/manifest.json").then(function(r){var u=null!==r?!0:!1,c=n._parseDotLibraryToGetDescription(s),l="",p="",f="";return t.getDocument(e.getEntity().getFullPath()+"/pom.xml").then(function(e){return e?e.getContent().then(function(e){var t=n._parseToGetVersion(e);return n._buildLibraryJson(a,i,c,o,t,l,p,f,u)}):null})})})})})})})}).fail(function(){}):null})},getWorkspaceLibraryNamespace:function(e){var n=this,r=e+"/pom.xml";return n.context.service.document.getDocumentByPath(r).then(function(r){return n.context.service.librarydevelopment.getAppNamespace(r).then(function(i){return $.isEmptyObject(i)?r.getContent().then(function(r){var i=jQuery.sap.parseXML(r),o=i.getElementsByTagName("sap.ui5.library.name");if(o.length>0)var a=o[0].textContent;if(!a){var s=t.firstElementChild(i),u=t.getChildByTagName(s,"artifactId");if(!u){var c=e+" - "+n.context.i18n.getText("i18n","LibraryDiscovery_WSP_NoLibraryNamespace");return new Error(c)}a=u.textContent}return"/"+a.split(".").join("/")}):i})})},isLibraryProject:function(e){var t=this;return t.context.service.document.getDocumentByPath(e).then(function(e){return t.context.service.projectType.getProjectTypes(e).then(function(e){for(var t=0;t<e.length;t++)if("com.watt.uitools.plugin.reuselibrary"===e[t].id)return!0;return!1})}).fail(function(){return!1})},getLibrariesFromABAP:function(e){var t=this.context.service.abaprepository,n=this.context.service.discovery,r=this;return n.getStatusBySystem(e).then(function(e){var n=e;return n?t.getApplications(n).then(function(e){return r._filterABAPLibraries(e,n).then(function(e){return e})}):void 0})},getLibrariesFromSAPUI5:function(){var e="sap.m";sap.ui.getCore().loadLibrary(e);var t=sap.ui.getCore().getLoadedLibraries()[e],n=t.controls,r=[];for(var i in n){var o={};o.name=n[i],r.push(o)}return[this._buildLibraryJson(e,e,"",r,t.version,"","","")]},getLibrariesFromWorkspace:function(){var e=[],t=this,n=this.context.service.filesystem.documentProvider;return n.getRoot().then(function(e){return e.getFolderContent()}).then(function(r){var i=[];return jQuery.each(r,function(e,r){i.push(t._getWorkspaceLibrary(r,n))}),Q.allSettled(i).then(function(t){return t.forEach(function(t){"fulfilled"===t.state&&t.value&&e.push(t.value)}),e})})},getLibrariesFromHCP:function(){var e=this;return e.context.service.hcpauthentication.authenticate().then(function(t){var n=t.username,r=t.password;return e._getLibrariesFromHCP(n,r)})},_getLibrariesFromHCP:function(e,t){var n=this.context.service.system,r=this.context.service.hcpconnectivity,i=this;return n.getSystemInfo().then(function(n){var o=n.sAccount;i.account=o;var a=[];a.push(r.getApps(o,e,t,!0)),a.push(r.getSubscriptions(o,e,t,!0));var s=[],u=[];return Q.all(a).spread(function(){s=arguments[0].concat(arguments[1]);for(var n=0;n<s.length;n++){var r=s[n].status;"STARTED"===r&&u.push(s[n])}return i.startedApplications=u,u.length>0?i._filterHCPLibraries(u,o,e,t):[]})})},getLibraryFromHCP:function(e,t){for(var n=0;n<this.startedApplications.length;n++)if(this.startedApplications[n].name===e)return"Active"===t&&(t=this.startedApplications[n].activeVersion),this._getHCPLibrary(this.account,this.startedApplications[n],t)},getLibraryDiscoveryUI:function(e){var t=this;return t.context.oContentType=e,t.context.service.pluginmanagement.getPluginPath("sap.watt.saptoolsets.fiori.common.librarydiscovery").then(function(e){jQuery.sap.registerModulePath("sap.watt.saptoolsets.fiori.common.plugin.librarydiscovery",e);var n=sap.ui.view({viewName:"sap.watt.saptoolsets.fiori.common.plugin.librarydiscovery.ui.view.LibraryDiscoveryPane",type:sap.ui.core.mvc.ViewType.JS,viewData:t.context}),r={content:n,getSelectedContent:function(){return n.oController.getSelectedContent()},setChangeHandler:function(e){n.oController.setSelectionChangeHandler(e)},getRepositoryType:function(){return n.oController.getRepositoryType()},initDataBeforeOpen:function(e){n.oController.initDataBeforeOpen(e)},setValidationHandler:function(e){n.oController.setValidationHandler(e)},setProgressHandler:function(e){n.oController.setProgressHandler(e)}};return r})}};return n}),define("sap.watt.saptoolsets.fiori.common.applicationstatus/command/ApplicationStatus",{execute:function(){var e=this,t=this.context.service.applicationstatus,n=this.context.service.selection;return n.assertOwner(e.context.service.repositorybrowser).then(function(){return n.assertNotEmpty().then(function(e){return t.openDialog(e[0])})})},isAvailable:function(){return!0},isEnabled:function(){var e=this.context.service.repositorybrowserUtils;return e.isSingleNoRootSelection(this.context.service).then(function(e){return e})}}),define("sap.watt.saptoolsets.fiori.common.applicationstatus/service/ApplicationStatus",[],function(){var e=function(){this.openDialog=function(e){var t=this,n=!1,r=sap.watt.getEnv("server_type");return("java"===r||"local_hcproxy"===r)&&(n=!0),t.context.service.deployment.initializeParams(e).then(function(r){return t.createApplicationStatusView(),n?t._oStatusView.getController().open(r,e,n):t.context.service.gitdispatcher.verifyUserInfo(r.entity).fail(function(e){503===e.status?t.context.service.usernotification.warning(e.name+". "+e.detailedMessage).done():t.context.service.usernotification.warning(t.context.i18n.getText("i18n","MissingGitSettings")).done()}).then(function(){return t._oStatusView.getController().open(r,e,n)})})},this.createApplicationStatusView=function(){var e=this.context;this._oStatusView||(this._oStatusView=sap.ui.view({viewName:"sap.watt.saptoolsets.fiori.common.plugin.applicationstatus.view.ApplicationStatusDialog",type:sap.ui.core.mvc.ViewType.JS,viewData:{context:e}}))},this.getABAPDeploymentInfo=function(e){return this.context.service.abaprepository.getDeploymentInfo(e)}};return e}),define("sap.watt.saptoolsets.fiori.common.ui5icons/service/IconDialog",["sap/watt/lib/lodash/lodash"],function(e){"use strict";function t(e){var t=e&&e.getParameter("value"),r=[];t&&r.push(new sap.ui.model.Filter("name",sap.ui.model.FilterOperator.Contains,t)),o.getBinding("rows").filter(r),n()}function n(){var e=r.getProperty("/selectedIcon"),t=-1,n=o.getVisibleRowCount();if(e)for(var i=0,a=o.getBinding("rows").getLength();a>i;i++)if(o.getContextByIndex(i).getProperty("name")===e){t=i;break}-1===t?(o.setFirstVisibleRow(0),o.clearSelection()):(o.setFirstVisibleRow(Math.floor(t/n)*n),o.setSelectedIndex(t))}sap.watt.includeCSS(require.toUrl("sap.watt.saptoolsets.fiori.common.ui5icons/css/ui5icons.css"));var r=new sap.ui.model.json.JSONModel({icons:null,hasSelection:!1,accepted:!1,selectedIcon:""}),i=new sap.ui.commons.SearchField({enableListSuggest:!1,showListExpander:!1,enableFilterMode:!0,enableClear:!0,startSuggestion:0,width:"100%",tooltip:"{i18n>IconDialog_SearchTooltip}",suggest:t}).addStyleClass("SearchField"),o=new sap.ui.table.Table({title:"",selectionMode:sap.ui.table.SelectionMode.Single,selectionBehavior:sap.ui.table.SelectionBehavior.RowOnly,visibleRowCount:9,rows:"{/icons}",width:"100%",columns:[new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{i18n>IconDialog_Icon}",design:sap.ui.commons.LabelDesign.Bold}),template:new sap.ui.core.Icon({src:"{icon}"}).addStyleClass("iconsize"),resizable:!1,width:"30%"}),new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{i18n>IconDialog_Name}",design:sap.ui.commons.LabelDesign.Bold}),template:new sap.ui.commons.TextView({text:"{name}"}),resizable:!1,width:"70%"})],rowSelectionChange:function(e){e.getParameter("rowContext")&&(r.setProperty("/selectedIcon",e.getParameter("rowContext").getProperty("name")),r.setProperty("/hasSelection",!0))}}),a=new sap.ui.commons.Dialog({title:"{i18n>IconDialog_SelectIcon}",resizable:!1,width:"420px",height:"500px",modal:!0,content:[i,o],buttons:[new sap.ui.commons.Button({text:"{i18n>IconDialog_OKButton}",enabled:"{/hasSelection}",press:function(){r.setProperty("/accepted",!0),a.close()}}),new sap.ui.commons.Button({text:"{i18n>IconDialog_CancelButton}",press:function(){a.close()}})]});return a.setInitialFocus(i),a.setModel(r),{_init:e.once(function(){r.setProperty("/icons",e.sortBy(e.map(sap.ui.core.IconPool.getIconNames(),function(e){return{name:e.toLowerCase(),icon:sap.ui.core.IconPool.getIconInfo(e).uri}}),"name")),this.context.i18n.applyTo(a)}),openIconDialog:function(e){function n(){a.detachClosed(n),s.resolve({icon:r.getProperty("/selectedIcon"),accepted:r.getProperty("/accepted")})}var s=Q.defer();return this._init(),r.setProperty("/selectedIcon",(e||"").replace(/^(sap-icon:\/\/)(.*)/,"$2")),r.setProperty("/accepted",!1),t(),r.setProperty("/hasSelection",-1!==o.getSelectedIndex()),i.setValue(""),a.attachClosed(n),a.open(),s.promise}}}),define("sap.watt.saptoolsets.fiori.common.tipsandtricksopener/service/TipsAndTricksOpener",[],function(){function e(){var e=this;return e.context.service.tipsandtricks.getShowOnStartup().then(function(t){return t?e.context.service.tipsandtricks.openTipsAndTricksDialog():void 0})}return{onWelcomePerspectiveNotVisibleOnStartup:e}}),define("sap.watt.saptoolsets.fiori.project.fiorireferenceapps/service/ReferenceTemplateValidator",{validate:function(e){var t=this,n=e.getAdditionalData();if(n&&n.projectName){var r=n.projectName;return this.context.service.filesystem.documentProvider.getDocument("/"+r).then(function(e){if(e)throw new Error(t.context.i18n.getText("referenceTemplateValidator_projectExistsError",[r]));return!0})}return!0}}),define("sap.watt.saptoolsets.fiori.project.fiorireuselibrarytemplate/command/CreateReferenceToLibrary",{execute:function(){var e=this;require(["sap.watt.saptoolsets.fiori.project.fiorireuselibrarytemplate/ui/ReferenceLibraryDialog"],function(t){t.openDialogUI(e.context)})},isAvailable:function(){return sap.watt.getEnv("internal")?!0:!1},isEnabled:function(){var e=this,t=e.context.service.selection;return t.assertOwner(e.context.service.repositorybrowser).then(function(){return t.assertNotEmpty().then(function(t){return 1===t.length?e.context.service.libraryReference.isValidForReference().then(function(e){return e}).fail(function(){return!1}):!1})})}}),define("sap.watt.saptoolsets.fiori.project.fiorireuselibrarytemplate/service/LibraryDevelopment",["sap/watt/lib/lodash/lodash"],function(e){"use strict";var t=function(e){var t=this,n=e+"/.project.json";return t.context.service.document.getDocumentByPath(n).then(function(e){return e&&"file"===e.getType()?!0:!1}).fail(function(){return!1})},n=function(e){return e.getProject()},r=function(e,t){var n=this;if(e.getEntity().getName()===t){var r=[];return r.push(Q(e)),Q.all(r)}return n._getProject(e).then(function(e){return e.getCurrentMetadata(!0).then(function(e){for(var r=[],i=0;i<e.length;i++)e[i].name===t&&r.push(n.context.service.filesystem.documentProvider.getDocument(e[i].path));return Q.all(r)})})},i=function(e){var t=JSON.parse(e);if(void 0!==t){var n=t["sap.app"];if(void 0!==n&&"library"===n.type){var r=n.id;if(void 0!==r)return"/"+r.split(".").join("/")}return null}return null},o=function(t,n){var r=this;if(!e.isEmpty(n)){("object"!=typeof t["sap.ui5"]||null===t["sap.ui5"])&&(t["sap.ui5"]={}),("object"!=typeof t["sap.ui5"].dependencies||null===t["sap.ui5"].dependencies)&&(t["sap.ui5"].dependencies={});var i=jQuery.extend(!0,t["sap.ui5"].dependencies,n);t["sap.ui5"].dependencies=i;var o=JSON.stringify(t);return r.context.service.beautifier.beautify(o).then(function(e){return e})}},a=function(e){var t=this,n="manifest.json";return t._getHandlerDocument(e,n).then(function(e){if(!e||void 0===e)return Q({});for(var n=[],r=0;r<e.length;r++)n.push(e[r].getContent());return Q.all(n).then(function(e){for(var n=0;n<e.length;n++){var r=t._getNamespace(e[n]);if(r)return Q(r)}return null})})},s=function(e){var t=this;return t.context.service.document.getDocumentByPath(e).then(function(e){return t.context.service.projectType.getProjectTypes(e).then(function(e){for(var t=0;t<e.length;t++)if("com.watt.uitools.plugin.reuselibrary"===e[t].id)return!0;return!1})}).fail(function(){return!1})},u=function(e,t){return{destination:e.destinationValue,repositoryType:t,entryPath:e.entryPath,path:e.path,libraryName:e.name,libraryExternalName:e.externalName,libraryDescription:e.description,libraryVersion:e.version,libraryNumber:e.versions&&e.versions.length>0?e.versions[0].version:e.version,controlName:e.controls&&e.controls.length>0?e.controls[0].name:null,isManifest:e.isManifest}},c=function(e){var t=this;return t.context.service.filesystem.documentProvider.getDocument(e).then(function(e){return t.context.service.setting.project.getProjectSettings("appparams",e).then(function(n){var r={paramName:"sap-ui-xx-lesssupport",paramValue:"true",paramActive:!0};if(n){var i;for(i=0;i<n.length;i++)if("sap-ui-xx-lesssupport"===n[i].paramName){n[i].paramValue="true",n[i].paramActive=!0;break}i===n.length&&n.push(r)}else n=[r];return t.context.service.setting.project.setProjectSettings("appparams",n,e)})})},l=function(e){var t=this,n="/"+e.params.model.projectName,r=e.params.selectedTemplate.getId();if("fiorireuselibrarytemplate.reuselibrary"===r){var i="/"+e.params.model.projectPath,o={account:e.params.model.reuselibrary.systemAcount,name:e.params.model.reuselibrary.libraryName,entryPath:"src"+i};return this.context.service.filesystem.documentProvider.getDocument(n).then(function(e){var r=[],i=t.updateAppParamsInProjectSetting(n);r.push(i);var a=t.context.service.projectType.setProjectTypes(e,["com.watt.uitools.plugin.reuselibrary"]);r.push(a);var s=t.context.service.setting.project.setProjectSettings("hcpdeploy",o,e);return r.push(s),Q.all(r)})}};return{isProject:t,isLibraryProject:s,getSelectedLibraryModelObject:u,updateAppParamsInProjectSetting:c,getAppNamespace:a,_getHandlerDocument:r,_getNamespace:i,_getProject:n,addDependenciesToAppDescriptor:o,onAfterGeneration:l}}),define("sap.watt.saptoolsets.fiori.project.fiorireuselibrarytemplate/service/LibraryComponentStep",{getContent:function(){var e=this;jQuery.sap.require("sap.watt.saptoolsets.fiori.project.plugin.fiorireuselibrarytemplate.ui.SelectLibraryComponentStep");var t=new sap.watt.saptoolsets.fiori.project.plugin.fiorireuselibrarytemplate.ui.SelectLibraryComponentStep({context:e.context}),n=e.context.i18n.getText("libraryComponentSelectLibraryComponentStep_title"),r=e.context.i18n.getText("libraryComponentSelectLibraryComponentStep_description");return e.context.service.wizard.createWizardStep(t,n,r)}}),define("sap.watt.saptoolsets.fiori.project.fiorireuselibrarytemplate/util/RepositoryConstants",[],function(){return{SAPUI5:0,ABAP:1,HCP:2,WORKSPACE:3}}),define("sap.watt.saptoolsets.fiori.project.fiorireuselibrarytemplate/util/NeoAppUtil",["./RepositoryConstants"],function(e){var t=function(e,t){var n=JSON.parse(t),r=n.routes;for(var i in r)if(r[i].target&&r[i].path===e.path&&r[i].target.type===e.target.type&&r[i].target.name===e.target.name)return!0;return!1},n=function(t,n){var r=t.repositoryType===e.ABAP?t.destination:t.libraryExternalName,i=JSON.parse(n),o=i.routes;for(var a in o)if(o[a].target&&o[a].target.name===r)return t.repositoryType===e.ABAP||t.repositoryType===e.WORKSPACE?!0:o[a].target.version&&o[a].target.version===t.libraryVersion||!o[a].target.version&&"Active"===t.libraryVersion?!0:!1;return!1},r=function(e,n,r,i,o){var a=JSON.parse(e),s=a.routes;if(i){var u=n.target.name;for(var c in s)s[c].target&&s[c].target.name===u&&(n.target.version&&"Active"!==n.target.version?s[c].target.version=n.target.version:delete s[c].target.version)}else s.unshift(n),o&&!t(o,e)&&s.unshift(o);var l=JSON.stringify(a);return r.service.beautifier.beautify(l).then(function(e){return e})},i=function(t){var n,r=t.repositoryType===e.ABAP?!0:!1,i="/resources";if(!t.libraryExternalName||""===t.libraryExternalName)throw new Error(this.context.service.i18n.getText("i18n","referenceLibrary_no_Name"));var o={type:r?"destination":"application",name:r?t.destination:t.libraryExternalName};return""!==t.entryPath&&(o.entryPath=t.entryPath),t.repositoryType===e.HCP&&"Active"!==t.libraryVersion&&(o.version=t.libraryVersion),t.isManifest&&(i+="/"+t.libraryName.split(".").join("/")),n={path:r?t.path:i,target:o,description:t.libraryDescription?t.libraryDescription:""}},o=function(e,t){return t.service.filesystem.documentProvider.getDocument(e+"/neo-app.json").then(function(e){if(!e)throw new Error(t.i18n.getText("i18n","referenceLibrary_NeoAppNotExist"));return e.getContent().then(function(e){return e})})},a=function(o,a,s){var u=null;return s.service.filesystem.documentProvider.getDocument(a+"/neo-app.json").then(function(a){return s.service.ui5projecthandler.getHandlerFilePath(a).then(function(e){if(e){var t=e.split("/");u=e.replace("/"+t[1],"")}}).fail(function(){}).then(function(){return a.getContent().then(function(c){var l=i(o),p=null;u&&(p={path:u+l.path,target:l.target,description:l.description});var f=!1,d=t(l,c);if(d){if(o.repositoryType!==e.HCP||n(o,c))return Q();f=!0}return r(c,l,s,f,p).then(function(e){return a.setContent(e).then(function(){return a.save().done})})})})})};return{isLibInNeoApp:t,isLibSameVersion:n,buildLibraryObjectForNeoApp:i,getUpdatedNeoAppString:r,updateNeoAppFile:a,getNeoAppDocument:o}}),define("sap.watt.saptoolsets.fiori.project.fiorireuselibrarytemplate/service/LibraryReference",["../util/NeoAppUtil"],function(e){var t={configure:function(e){this._aStyles=e.styles,this._aStyles&&this.context.service.resource.includeStyles(this._aStyles).done()},isValidForReference:function(){var e=this;return e.context.service.selection.getSelection().then(function(t){var n="/";return t&&t[0]&&"folder"===t[0].document.getType()&&""!==t[0].document.getEntity().getFullPath()&&(n=t[0].document.getEntity().getFullPath()),e.context.service.librarydevelopment.isProject(n)}).fail(function(){return!1})},setLibraryReference:function(t,n,r){var i=this;return i.context.service.librarydevelopment.getSelectedLibraryModelObject(t,n).then(function(t){return i.context.service.filesystem.documentProvider.getDocument(r).then(function(e){i.context.service.ui5projecthandler.getDependencies(e).then(function(n){n.libs[t.libraryName]={minVersion:t.libraryNumber},i.context.service.ui5projecthandler.addDependencies(e,n,!0)}).fail(function(){})}),e.updateNeoAppFile(t,r,i.context).then(function(){return i.context.service.librarydevelopment.updateAppParamsInProjectSetting(r)})})}};return t}),define("sap.watt.saptoolsets.fiori.project.ui5projecthandler/util/AppDescriptorHandler",["sap/watt/lib/lodash/lodash"],function(e){"use strict";var t="manifest.json",n=new Q.sap.Queue,r=function(e,t){return t.service.filesystem.jsonProvider.getJSONContent(e).then(function(e){return e}).fail(function(){var e=new Error(t.i18n.getText("i18n","projectHandler_manifestFileIsNotValid"));throw e.name="FileIsNotValid",e})},i=function(t,n,i){return r(t,i).then(function(t){var r=D(t,n),i={};return e.isEmpty(r)||(i=e.get(r[0],n)),i})},o=function(){return t},a=function(e){var t=e.getEntity().getFullPath(),n=t.lastIndexOf("/");return t.substr(0,n)},s=function(t,n){return i(t,"sap.app",n).then(function(t){var n;return e.isEmpty(t)||(n=e.get(t,"id")),n?n:""})},u=function(e,t){return i(e,"dataSources",t).then(function(e){return e})},c=function(e,t){return u(e,t).then(function(e){return Object.keys(e)})},l=function(t,n,r){return u(t,r).then(function(t){var r={};return e.isEmpty(t)||(r=e.get(t,n)),r?r:{}})},p=function(t,n,r){return u(t,r).then(function(t){var r=[];if(!e.isEmpty(t)){var i=e.get(t,n),o=D(i,"annotations"),a=[];e.isEmpty(o)||(a=e.get(o[0],"annotations"));for(var s=a?a.length:0,u=0;s>u;u++)r[a[u]]=e.get(t,a[u])}return r})},f=function(t,n,r){return u(t,r).then(function(t){var r=[];if(!e.isEmpty(t))for(var i in t){var o=t[i];n&&o.type===n&&(r[i]=o),"OData"!==n||o.type||(r[i]=o)}return r})},d=function(e,t){return i(e,"sourceTemplate",t).then(function(e){return e})},h=function(e,t){return i(e,"dependencies",t).then(function(e){return e})},m=function(e,t){return i(e,"extensions",t).then(function(e){return e})},g=function(t,n){return i(t,"extends",n).then(function(t){if(e.isEmpty(t))return!1;var n=t.component;return!(e.isUndefined(n)||"sap.ca.scfld.md"!==n)})},v=function(t,i,o,a,s,u){var c;return e.isUndefined(i)||e.isNull(i)?(c=new Error(u.i18n.getText("i18n","projectHandler_extensionNotDefined")),c.name="ExtensionNotDefined",Q.reject(c)):e.isUndefined(o)||e.isNull(o)?(c=new Error(u.i18n.getText("i18n","projectHandler_viewNotDefined")),c.name="ViewNotDefined",Q.reject(c)):e.isUndefined(a)||e.isNull(a)?(c=new Error(u.i18n.getText("i18n","projectHandler_contentNotDefined")),c.name="ContentNotDefined",Q.reject(c)):r(t,u).then(function(r){return m(t,u).then(function(l){var p;if(!e.isEmpty(l)){var f=l[i];e.isUndefined(f)||(p=f[o])}if(e.isUndefined(p)||e.isNull(p))("object"!=typeof r["sap.ui5"]||null===r["sap.ui5"])&&(r["sap.ui5"]={}),("object"!=typeof r["sap.ui5"].extends||null===r["sap.ui5"].extends)&&(r["sap.ui5"].extends={}),("object"!=typeof r["sap.ui5"].extends.extensions||null===r["sap.ui5"].extends.extensions)&&(r["sap.ui5"].extends.extensions={}),("object"!=typeof r["sap.ui5"].extends.extensions[i]||null===r["sap.ui5"].extends.extensions[i])&&(r["sap.ui5"].extends.extensions[i]={}),r["sap.ui5"].extends.extensions[i][o]=a;else switch(i){case"sap.ui.viewReplacements":case"sap.ui.controllerExtensions":if(!s)throw c=new Error(u.i18n.getText("i18n","projectHandler_extensionExistInHandler")),c.name="ExtensionExistInHandler",c;r["sap.ui5"].extends.extensions[i][o]=a;break;case"sap.ui.viewExtensions":case"sap.ui.viewModifications":var d=Object.keys(a),h=r["sap.ui5"].extends.extensions[i][o],m=h[d[0]];if(!e.isUndefined(m)&&!e.isNull(m)&&!s)throw c=new Error(u.i18n.getText("i18n","projectHandler_extensionExistInHandler")),c.name="ExtensionExistInHandler",c;for(var g=0;g<d.length;++g)(!h[d[g]]||s)&&(h[d[g]]=a[d[g]]);r["sap.ui5"].extends.extensions[i][o]=h}return n.next(function(){return I(t,r,u)})})})},y=function(t,i,o,a,s){if(e.isUndefined(i)||e.isNull(i)){var c=new Error(s.i18n.getText("i18n","projectHandler_dataSourceNameNotDefined"));return c.name="DataSourceNameNotDefined",Q.reject(c)}if(e.isUndefined(o)||e.isNull(o)){var c=new Error(s.i18n.getText("i18n","projectHandler_contentNotDefined"));return c.name="ContentNotDefined",Q.reject(c)}return r(t,s).then(function(r){return u(t,s).then(function(u){var c={};if(e.isEmpty(u)||(c=e.get(u,i)),e.isEmpty(c))("object"!=typeof r["sap.app"]||null===r["sap.app"])&&(r["sap.app"]={}),("object"!=typeof r["sap.app"].dataSources||null===r["sap.app"].dataSources)&&(r["sap.app"].dataSources={});else if(!a){var l=new Error(s.i18n.getText("i18n","projectHandler_dataSourceNameExistInManifest"));throw l.name="DataSourceNameExistInManifest",l}return u=e.isEmpty(u)?r["sap.app"].dataSources:u,u[i]=o,r["sap.app"].dataSources=u,n.next(function(){return I(t,r,s)})})})},_=function(t,n,r,i,o){var a=e.get(t,"type");if("OData"!==a&&!e.isUndefined(a)&&!e.isNull(a)){var s=new Error(o.i18n.getText("i18n","projectHandler_dataSourceWrongType"));throw s.name="DataSourceWrongType",s}if(!e.isEmpty(e.get(n,r))&&!i){var s=new Error(o.i18n.getText("i18n","projectHandler_annotationExistInManifest"));throw s.name="AnnotationExistInManifest",s}var u=e.get(t,"settings");if(u){var c=e.get(u,"annotations");e.isEmpty(c)?(u.annotations=[],u.annotations.push(r)):e.contains(c,r)||c.push(r)}else t.settings={},t.settings.annotations=[],t.settings.annotations.push(r)},x=function(t,i,o,a,s){if(e.isUndefined(i)||e.isNull(i)){var c=new Error(s.i18n.getText("i18n","projectHandler_dataSourceNameNotDefined"));return c.name="DataSourceNameNotDefined",Q.reject(c)}if(e.isUndefined(o)||e.isNull(o)){var c=new Error(s.i18n.getText("i18n","projectHandler_contentNotDefined"));return c.name="ContentNotDefined",Q.reject(c)}return r(t,s).then(function(r){return u(t,s).then(function(u){var c={};e.isEmpty(u)||(c=e.get(u,i));var l=e.keys(o)[0],p=e.get(o,l);if(e.isEmpty(c)){var f=new Error(s.i18n.getText("i18n","projectHandler_dataSourceNotExistInManifest"));throw f.name="DataSourceNotExistInManifest",f}return _(c,u,l,a,s),u[l]=p,r["sap.app"].dataSources=u,n.next(function(){return I(t,r,s)})})})},b=function(t,o,a,s){if(e.isUndefined(o)||e.isNull(o)){var u=new Error(s.i18n.getText("i18n","projectHandler_contentNotDefined"));return u.name="ContentNotDefined",Q.reject(u)}return r(t,s).then(function(r){return i(t,"sourceTemplate",s).then(function(i){if(e.isEmpty(i))("object"!=typeof r["sap.app"]||null===r["sap.app"])&&(r["sap.app"]={}),("object"!=typeof r["sap.app"].sourceTemplate||null===r["sap.app"].sourceTemplate)&&(r["sap.app"].sourceTemplate={});else if(!a){var u=new Error(s.i18n.getText("i18n","projectHandler_sourceTemplateExistInManifest"));throw u.name="SourceTemplateExistInManifest",u}return r["sap.app"].sourceTemplate=o,n.next(function(){return I(t,r,s)})})})},w=function(t,o,a,s){if(e.isUndefined(o)||e.isNull(o)){var u=new Error(s.i18n.getText("i18n","projectHandler_contentNotDefined"));return u.name="ContentNotDefined",Q.reject(u)}return r(t,s).then(function(r){return i(t,"dependencies",s).then(function(i){if(e.isEmpty(i))("object"!=typeof r["sap.ui5"]||null===r["sap.ui5"])&&(r["sap.ui5"]={}),("object"!=typeof r["sap.ui5"].dependencies||null===r["sap.ui5"].dependencies)&&(r["sap.ui5"].dependencies={});else if(!a)throw u=new Error(s.i18n.getText("i18n","projectHandler_dependenciesExistInManifest")),u.name="DependenciesExistInManifest",u;return r["sap.ui5"].dependencies=o,n.next(function(){return I(t,r,s)})})})},S=function(t,i,o){if(e.isUndefined(i)||e.isNull(i)){var a=new Error(o.i18n.getText("i18n","projectHandler_contentNotDefined"));return a.name="ContentNotDefined",Q.reject(a)}return i._version||(i._version="1.1.0"),r(t,o).then(function(e){return e["sap.platform.hcp"]=i,n.next(function(){return I(t,e,o)})})},E=function(t,i,o){if(e.isUndefined(i)||e.isNull(i)){var a=new Error(o.i18n.getText("i18n","projectHandler_contentNotDefined"));return a.name="ContentNotDefined",Q.reject(a)}return i._version||(i._version="1.1.0"),r(t,o).then(function(e){return e["sap.platform.abap"]=i,n.next(function(){return I(t,e,o)})})},C=function(t,i,o,a,s){var u;return e.isUndefined(i)||e.isNull(i)?(u=new Error(s.i18n.getText("i18n","projectHandler_extensionNotDefined")),u.name="ExtensionNotDefined",Q.reject(u)):e.isUndefined(o)||e.isNull(o)?(u=new Error(s.i18n.getText("i18n","projectHandler_viewNotDefined")),u.name="ViewNotDefined",Q.reject(u)):m(t,s).then(function(c){if(e.isEmpty(c))throw u=new Error(s.i18n.getText("i18n","projectHandler_extensionNotFound")),u.name="ExtensionNotFound",u;return r(t,s).then(function(r){var l={};if(c[i]&&c[i][o]&&(l=c[i][o]),e.isEmpty(l))throw u=new Error(s.i18n.getText("i18n","projectHandler_extensionNotFound")),u.name="ExtensionNotFound",u;if(a&&"string"==typeof a){var p=l[a]?l[a]:{};if(e.isEmpty(p))throw u=new Error(s.i18n.getText("i18n","projectHandler_extensionNotFound")),u.name="ExtensionNotFound",u;delete c[i][o][a],e.isEmpty(c[i][o])&&delete c[i][o]}else delete c[i][o];return e.isEmpty(c[i])&&delete c[i],r["sap.ui5"].extends.extensions=c,n.next(function(){return I(t,r,s)})})})},T=function(t,i,o){if(e.isUndefined(i)||e.isNull(i)){var a=new Error(o.i18n.getText("i18n","projectHandler_dataSourceNameNotDefined"));return a.name="DataSourceNameNotDefined",Q.reject(a)}return r(t,o).then(function(r){return u(t,o).then(function(a){var s={};if(e.isEmpty(a)||(s=e.get(a,i)),e.isEmpty(s)){var u=new Error(o.i18n.getText("i18n","projectHandler_removeDataSourceNotExistInManifest"));throw u.name="DataSourceNotExistInManifest",u}return delete a[i],r["sap.app"].dataSources=a,n.next(function(){return I(t,r,o)})})})},P=function(t,i,o,a){if(e.isUndefined(i)||e.isNull(i)){var s=new Error(a.i18n.getText("i18n","projectHandler_dataSourceNameNotDefined"));return s.name="DataSourceNameNotDefined",Q.reject(s)}if(e.isUndefined(o)||e.isNull(o)){var s=new Error(a.i18n.getText("i18n","projectHandler_annotationNameNotDefined"));return s.name="AnnotationNameNotDefined",Q.reject(s)}return r(t,a).then(function(r){return u(t,a).then(function(s){var u={};if(e.isEmpty(s)||(u=e.get(s,i)),e.isEmpty(u)){var c=new Error(a.i18n.getText("i18n","projectHandler_removeDataSourceNotExistInManifest"));throw c.name="DataSourceNotExistInManifest",c}var l=e.get(u,"type");if("OData"!==l&&!e.isUndefined(l)&&!e.isNull(l)){var c=new Error(a.i18n.getText("i18n","projectHandler_removeDataSourceWrongType"));throw c.name="DataSourceWrongType",c}var p=e.get(u,"settings");if(!p){var c=new Error(a.i18n.getText("i18n","projectHandler_dataSourceNotContainSettings"));throw c.name="DataSourceNotContainSettings",c}var f=e.get(p,"annotations");if(e.isEmpty(f)){var c=new Error(a.i18n.getText("i18n","projectHandler_dataSourceNotContainAnnotations"));throw c.name="DataSourceNotContainAnnotations",c}if(!e.contains(f,o)){var c=new Error(a.i18n.getText("i18n","projectHandler_dataSourceNotContainGiveAnnotation"));throw c.name="DataSourceNotContainGiveAnnotation",c}return f=e.without(f,o),s[i].settings.annotations=f,r["sap.app"].dataSources=s,n.next(function(){return I(t,r,a)})})})},I=function(e,t,n){return n.service.filesystem.jsonProvider.writeJsonByDocument(e,t).then(function(e){return e})},D=function(t,n){if(e.has(t,n))return[t];var r=[];return e.forEach(t,function(e){"object"==typeof e&&(e=D(e,n)).length&&r.push.apply(r,e)}),r},A=function(t,n){return i(t,"sap.ui5",n).then(function(t){var n;return e.isEmpty(t)||(n=e.get(t,"models")),n?n:void 0})},N=function(t,i,o,a,s){var u;return e.isUndefined(i)||e.isNull(i)?(u=new Error(s.i18n.getText("i18n","projectHandler_modelNotDefined")),u.name="ModelNotDefined",Q.reject(u)):e.isUndefined(o)||e.isNull(o)?(u=new Error(s.i18n.getText("i18n","projectHandler_contentNotDefined")),u.name="ContentNotDefined",Q.reject(u)):r(t,s).then(function(r){return A(t,s).then(function(u){var c={};if(e.isEmpty(u)||(c=e.get(u,i)),e.isEmpty(c))("object"!=typeof r["sap.ui5"]||null===r["sap.ui5"])&&(r["sap.ui5"]={}),("object"!=typeof r["sap.ui5"].models||null===r["sap.ui5"].models)&&(r["sap.ui5"].models={});else if(!a){var l=new Error(s.i18n.getText("i18n","projectHandler_modelNameExistInManifest"));throw l.name="ModelNameExistInManifest",l}return u=e.isEmpty(u)?r["sap.ui5"].models:u,u[i]=o,r["sap.ui5"].models=u,n.next(function(){return I(t,r,s)})})})},k=function(t,n){return i(t,"sap.app",n).then(function(t){var n;return e.isEmpty(t)||(n=e.get(t,"i18n")),n?n:void 0})},O=function(e,t,i,o){return r(e,o).then(function(r){return k(e,o).then(function(a){if(a){if(!i){var s=new Error(o.i18n.getText("i18n","projectHandler_i18nPathExistInManifest"));throw s.name="i18nPathExistInManifest",s}}else("object"!=typeof r["sap.app"]||null===r["sap.app"])&&(r["sap.app"]={}),("string"!=typeof r["sap.app"].i18n||null===r["sap.app"].i18n)&&(r["sap.app"].i18n="");
return a=a?a:r["sap.app"].i18n,r["sap.app"].i18n=t,n.next(function(){return I(e,r,o)})})})},R=function(t,n){return i(t,"sap.ui5",n).then(function(t){var n;return e.isEmpty(t)||(n=e.get(t,"config")),n?n:void 0})},j=function(t,i,o,a,s){var u;return e.isUndefined(i)||e.isNull(i)?(u=new Error(s.i18n.getText("i18n","projectHandler_configNotDefined")),u.name="ConfigNotDefined",Q.reject(u)):e.isUndefined(o)||e.isNull(o)?(u=new Error(s.i18n.getText("i18n","projectHandler_contentNotDefined")),u.name="ContentNotDefined",Q.reject(u)):r(t,s).then(function(r){return R(t,s).then(function(u){var c={};if(e.isEmpty(u)||(c=e.get(u,i)),e.isEmpty(c))("object"!=typeof r["sap.ui5"]||null===r["sap.ui5"])&&(r["sap.ui5"]={}),("object"!=typeof r["sap.ui5"].config||null===r["sap.ui5"].config)&&(r["sap.ui5"].config={});else if(!a){var l=new Error(s.i18n.getText("i18n","projectHandler_configNameExistInManifest"));throw l.name="ConfigNameExist",l}return u=e.isEmpty(u)?r["sap.ui5"].config:u,u[i]=o,r["sap.ui5"].config=u,n.next(function(){return I(t,r,s)})})})},F=function(e,t,n,r,i,o,a){var s={uri:n,settings:{localUri:r}};return y(e,t,s,o,a).then(function(n){if(n){var r=[{name:t,isDefault:i}];return j(e,"sap.ca.serviceConfigs",r,o,a)}return!1})},L=function(e,t,n,r){return s(e,r).then(function(i){var o=t,a=o.lastIndexOf(".properties");-1!==a&&(o=o.substring(0,a)),o=i+"."+o.split("/").join(".");var s={type:"sap.ui.model.resource.ResourceModel",settings:{bundleName:o}};return N(e,"i18n",s,n,r).then(function(){return O(e,t,!0,r)})})},M=function(t,n){return i(t,"sap.app",n).then(function(t){var n;return e.isEmpty(t)||(n=e.get(t,"type")),n?n:""})};return{getAttribute:i,getHandlerFileName:o,getHandlerFilePath:a,getAppNamespace:s,getDataSources:u,getAllDataSourceNames:c,getDataSourcesByName:l,getDataSourceAnnotationsByName:p,getDataSourcesByType:f,getSourceTemplate:d,getDependencies:h,getAllExtensions:m,isScaffoldingBased:g,addExtension:v,addDataSource:y,addDataSourceAnnotation:x,addSourceTemplate:b,addDependencies:w,setHCPPlatformBlock:S,setABAPPlatformBlock:E,removeDataSource:T,removeDataSourceAnnotation:P,removeExtension:C,addModel:N,getModels:A,addConfig:j,addExtensionForScaffoldingDataSource:F,getConfigs:R,addi18nExtensionModel:L,addI18nPath:O,getI18nPath:k,getAppType:M}}),define("sap.watt.saptoolsets.fiori.project.ui5projecthandler/util/GenericHandler",["sap/watt/lib/lodash/lodash","sap/watt/lib/orion/javascript/esprima/esprimaVisitor","sap/watt/lib/orion/ui/esprima/esprima","sap/watt/lib/orion/ui/escodegen/escodegen.browser"],function(e){"use strict";var t=function(e){var t=e.getEntity().getFullPath(),n=t.lastIndexOf("/");return t.substr(0,n)},n=function(e,t){return e.getContent().then(function(e){return o(e,t)})},r=function(e){return e.getProject()},i=function(t,n,r,i){t||Q.reject(new Error(this.context.i18n.getText("i18n","projectHandler_noProjectSelected")));var o=e.filter(n,function(e){return e.name===r});return i.service.builder.getTargetFolder(t).then(function(e){if(e!==t){var n="projectHandler_failFindDescFile",r="projectHandler_failFindDescFile";o=d(e,o,i,n,r)}return h(o,i)}).fail(function(){return h(o,i)})},o=function(e,t){var n=t.substr(0,t.length-3),r=null,i=/\.declare\s*\(\s*/,o=e.search(i);if(-1!==o){var a,s=e.indexOf('"',o);if(-1!==s)a=e.indexOf("."+n,s),-1!==a&&(r=e.substring(s+1,a));else{var u=e.indexOf("'",o);-1!==u&&(a=e.indexOf("."+n,u),-1!==a&&(r=e.substring(u+1,a)))}}if(null===r){var c='.extend\\(\\"(.*).',l=new RegExp(c+n+'\\"'),p=l.exec(e);p&&(r=p[1])}return r?r:""},a=function(e,t){return e.type===esprima.Syntax.Property&&e.key&&e.key.name===t.sBlockName?(t.oBlock=t.bContent===!0?e.value:e,!1):!0},s=function(e,t){return e.type===esprima.Syntax.Property&&e.key&&e.key.name===t.sBlockName?(e.value=t.oBlock.value,!1):!0},u=function(e,t){return e.type===esprima.Syntax.Property&&e.key&&e.key.name===t.sParentBlockName?(e.value.properties.push(t.oBlock),!1):!0},c=function(t,n){return t.type===esprima.Syntax.CallExpression&&t.callee&&t.callee.property&&t.callee.property.type===esprima.Syntax.Identifier&&"extend"===t.callee.property.name?t.arguments[0].value&&e.endsWith(t.arguments[0].value,n.sIdSuffix)?(n.oExtendedObjectContent=t.arguments[1],!1):!0:!0},l=function(e,t){return t.service.builder.getTargetFolder(e).then(function(e){return e})},p=function(t,n){var r=e.find(t,function(e){return e.name===n});return r},f=function(e,t){return e.getParent().then(function(e){return e?e.getChild(t).then(function(e){return e}):void 0})},d=function(t,n){var r=t.getEntity().getName(),i=e.filter(n,function(t){var n=t.path,i=n.lastIndexOf("/");return!e.includes(n.substr(0,i),r)});return i},h=function(t,n){var r=e.sortBy(t,function(e){return e.path.length}),i=e.first(r);return i?n.service.filesystem.documentProvider.getDocument(i.path).then(function(e){return e}):null};return{getHandlerFilePath:t,getHandlerNamespace:n,getProject:r,getBlockByName:a,replaceBlockContent:s,getExtendedObjectBySuffix:c,createBlock:u,getTargetBuildFolder:l,getAppComponent:i,getFileFromFolder:p,getDescriptorFileFromCompLocation:f}}),define("sap.watt.saptoolsets.fiori.project.ui5projecthandler/util/ComponentHandler",["sap/watt/lib/lodash/lodash","sap.watt.saptoolsets.fiori.project.ui5projecthandler/util/GenericHandler","sap/watt/lib/orion/javascript/esprima/esprimaVisitor","sap/watt/lib/orion/ui/esprima/esprima","sap/watt/lib/orion/ui/escodegen/escodegen.browser"],function(e,t,n){"use strict";var r="Component.js",i=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},o=function(){return r},a=function(e){return t.getHandlerFilePath(e)},s=function(e){return t.getHandlerNamespace(e,r)},u=function(e){return e.getContent().then(function(e){try{var r=n.parse(e),i={oExtendedObjectContent:{},sIdSuffix:".Component"};if(n.visit(r,i,t.getExtendedObjectBySuffix),i.oExtendedObjectContent&&i.oExtendedObjectContent.properties)for(var o=i.oExtendedObjectContent.properties,a=0;a<o.length&&o[a].key;a++)if("metadata"===o[a].key.name||"metadata"===o[a].key.value){var s=o[a].value,u=[];"ObjectExpression"===s.type?u=s.properties:"CallExpression"===s.type&&s.arguments&&s.arguments[1]&&"ObjectExpression"===s.arguments[1].type&&(u=s.arguments[1].properties);for(var c=0;c<u.length&&u[c].key;c++)if("config"===u[c].key.name||"config"===u[c].key.value){var l=u[c].value;return l}}}catch(p){var f=new Error("File parsing failed");throw f.name="FileParsingFailed",f}return null})},c=function(t,r){return u(t,r).then(function(t){var r={};return e.isEmpty(t)||(n.visit(t,{},v),r=escodegen.generate(t,{format:{json:!0}}),r=JSON.parse(r)),r})},l=function(e,t){return c(e,t).then(function(e){if(e&&e.serviceConfig){var t=e.serviceConfig.name,n=e.serviceConfig.serviceUrl;if(void 0!==t){var r={};return r[t]={uri:n,type:"OData"},r}}return null})},p=function(e,t){return l(e,t).then(function(e){return"object"==typeof e&&null!==e?Object.keys(e):[]})},f=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},d=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},h=function(e,t,n){if("OData"===t)return l(e,n);var r=new Error("This method is not implemented");return r.name="UnimplementedMethod",Q.reject(r)},m=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},g=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},v=function(e){if(e.key&&e.key.type===esprima.Syntax.Identifier){var t={type:esprima.Syntax.Literal,value:e.key.name,range:e.key.range};e.key=t}return!0},y=function(r){return r.getContent().then(function(r){try{var i=n.parse(r),o={oBlock:{},bContent:!0,sBlockName:"customizing"};n.visit(i,o,t.getBlockByName);var a={};if(!e.isEmpty(o.oBlock)){var s=o.oBlock;n.visit(s,o,v),a=escodegen.generate(o.oBlock,{format:{json:!0}}),a=JSON.parse(a)}return a}catch(u){var c=new Error("File parsing failed");throw c.name="FileParsingFailed",c}})},_=function(e){return e.getContent().then(function(e){var t=/(?:\s*)sap\.ca\.scfld\.md[\.\w]*\.extend/m;return t.test(e)})},x=function(r,i,o,a){var s;return r.getContent().then(function(u){var c={sBlockName:"metadata",bContent:!0,oBlock:{}};try{var l=n.parse(u,{range:!0,tokens:!0,comment:!0});l=escodegen.attachComments(l,l.comments,l.tokens),n.visit(l,c,t.getBlockByName)}catch(p){throw s=new Error("File parsing failed"),s.name="FileParsingFailed",s}var f=c.oBlock;if(e.isEmpty(f))throw s=new Error("No metadata section in file"),s.name="MetadataBlockMissing",s;var d=e.find(f.properties,function(e){return!e.key||e.key.value!==i&&e.key.name!==i?void 0:!0});try{var h=JSON.stringify(o),m=n.parse("var tmp = {"+i+":"+h+"};");c={sBlockName:i,bContent:!1,oBlock:{}},n.visit(m,c,t.getBlockByName),m=c.oBlock}catch(p){throw s=new Error("File parsing failed"),s.name="FileParsingFailed",s}"object"==typeof d&&null!==d?d.value=m.value:f.properties.push(m);var g=escodegen.generate(l,{format:{quotes:"double"},comment:!0});return a.service.beautifierProcessor.beautify(g,"js",null).then(function(e){return r.setContent(e).then(function(){return r.save().then(function(){return!0})})})})},b=function(t,n,r,i,o){var a;return e.isUndefined(n)||e.isNull(n)?(a=new Error(o.i18n.getText("i18n","projectHandler_configNotDefined")),a.name="ConfigNotDefined",Q.reject(a)):e.isUndefined(r)||e.isNull(r)?(a=new Error(o.i18n.getText("i18n","projectHandler_contentNotDefined")),a.name="ContentNotDefined",Q.reject(a)):c(t,o).then(function(e){if(e||(e={}),!e[n]||i)return e[n]=r,x(t,"config",e,o);throw a=new Error("Configuration with this name already exist. Use bOverwrite parameter to overwrite the configuration data"),a.name="ConfigNameExist",a})},w=function(t,n,r,i,o,a){var s;return e.isUndefined(n)||e.isNull(n)?(s=new Error("The extension type is not defined."),s.name="ExtensionNotDefined",Q.reject(s)):e.isUndefined(r)||e.isNull(r)?(s=new Error("The view name is not defined."),s.name="ViewNotDefined",Q.reject(s)):e.isUndefined(i)||e.isNull(i)?(s=new Error("The content is not defined."),s.name="ContentNotDefined",Q.reject(s)):y(t,a).then(function(u){var c={};if(!e.isEmpty(u)){var l=u[n];l&&l[r]&&(c=l[r])}if(e.isEmpty(c))("object"!=typeof u[n]||null===u[n])&&(u[n]={}),u[n][r]=i;else switch(n){case"sap.ui.viewReplacements":case"sap.ui.controllerExtensions":if(!o)throw s=new Error('The extension already exists, use "bOverwrite" parameter to overwrite it'),s.name="ExtensionExistInHandler",s;u[n][r]=i;break;case"sap.ui.viewExtensions":case"sap.ui.viewModifications":for(var p=Object.keys(i),f=u[n][r],d=0;d<p.length;++d)(!f[p[d]]||o)&&(f[p[d]]=i[p[d]]);u[n][r]=f}return x(t,"customizing",u,a)})},S=function(t,n,r,i,o){var a;return e.isUndefined(n)||e.isNull(n)?(a=new Error("The data source name is not defined."),a.name="DataSourceNameNotDefined",Q.reject(a)):e.isUndefined(r)||e.isNull(r)?(a=new Error("The content is not defined."),a.name="ContentNotDefined",Q.reject(a)):l(t).then(function(s){if(i||e.isNull(s)||s[""])return c(t,o).then(function(e){return e||(e={}),e.serviceConfig||(e.serviceConfig={}),e.serviceConfig.name=n,e.serviceConfig.serviceUrl=r.uri?r.uri:"",x(t,"config",e,o)});throw a=new Error("Service already exist. Use bOverwrite parameter to overwrite the service data"),a.name="ServiceExist",a})},E=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},C=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},T=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},P=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},I=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},D=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},A=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},N=function(t,n,r,i,o){var a;return e.isUndefined(n)||e.isNull(n)?(a=new Error("The extension type is not defined."),a.name="ExtensionNotDefined",Q.reject(a)):e.isUndefined(r)||e.isNull(r)?(a=new Error("The view name is not defined."),a.name="ViewNotDefined",Q.reject(a)):y(t,o).then(function(s){var u={};if(!e.isEmpty(s)){var c=s[n];c&&c[r]&&(u=c[r])}if(e.isEmpty(u))throw a=new Error("The extension does not exist"),a.name="ExtensionNotFound",a;if(i){var l=u[i]?u[i]:{};if(e.isEmpty(l))throw a=new Error("The extension does not exist"),a.name="ExtensionNotFound",a;delete s[n][r][i],e.isEmpty(s[n][r])&&delete s[n][r]}else delete s[n][r];return e.isEmpty(s[n])&&delete s[n],x(t,"customizing",s,o)})},k=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},O=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},R=function(e,t,n,r,i,o,a){var s=[{name:t,serviceUrl:n,isDefault:i,mockedDataSource:r}];return b(e,"sap.ca.serviceConfigs",s,o,a)},j=function(e,t){if(e.type===esprima.Syntax.CallExpression&&e.callee&&e.callee.property&&e.callee.property.type===esprima.Syntax.Identifier&&"extend"===e.callee.property.name){var n="";return e.callee.object&&(n=escodegen.generate(e.callee.object),n&&0===n.indexOf("this.")&&(n=n.substring(5))),t.sOriginalComponentName=n,!1}return!0},F=function(e,t){var r="init : function() {if ("+t+".prototype.init !== undefined) {"+t+".prototype.init.apply(this, arguments);"+"}"+"var i18nModel = new sap.ui.model.resource.ResourceModel({"+'bundleUrl : "./'+e+'"'+"});"+"\n// set new i18n model"+'\nthis.setModel(i18nModel, "i18n");'+"}";r="var x={"+r+"};";var i=n.parse(r,{tokens:!0,comment:!0});return i=escodegen.attachComments(i,i.comments,i.tokens),i.body[0].declarations[0].init.properties[0]},L=function(e,t){if(e.type===esprima.Syntax.CallExpression&&e.callee&&e.callee.property&&e.callee.property.type===esprima.Syntax.Identifier&&"extend"===e.callee.property.name){if(e.arguments[1]&&e.arguments[1].properties){for(var n=e.arguments[1].properties,r=!1,i=0;i<n.length;i++)if("init"===n[i].key.name){r=!0,t.bOverwrite?n[i]=t.oInitFuncAst:(t.oError=new Error("Init method with possible i18n model already exists in the application Component. Use bOverwrite parameter to overwrite the i18n model data"),t.oError.name="InitMethodExistInComponent");break}r||n.push(t.oInitFuncAst)}else t.oError=new Error("File parsing failed"),t.oError.name="FileParsingFailed";return!1}return!0},M=function(e,t,r,i){var o,a;return e.getContent().then(function(s){try{a=n.parse(s,{range:!0,tokens:!0,comment:!0}),a=escodegen.attachComments(a,a.comments,a.tokens)}catch(u){throw o=new Error("File parsing failed"),o.name="FileParsingFailed",o}var c={sOriginalComponentName:""};if(n.visit(a,c,j),c.sOriginalComponentName){var l=F(t,c.sOriginalComponentName),p={oInitFuncAst:l,bOverwrite:r};if(n.visit(a,p,L),p.oError)throw p.oError;var f=escodegen.generate(a,{format:{quotes:"double"},comment:!0});return i.service.beautifierProcessor.beautify(f,"js",null).then(function(t){return e.setContent(t).then(function(){return e.save().then(function(){return!0})})})}throw o=new Error("File parsing failed"),o.name="FileParsingFailed",o})},B=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},U=function(e,t){if(t&&-1===t.indexOf("/")){var n=t.replace(e+".",""),r=n.lastIndexOf(".properties"),i=n;-1!==r&&(i=n.substr(0,r));var o=i.lastIndexOf(".");i=i.substr(0,o),t=i.split(".").join("/")+"/"+n.substr(o+1,n.length),-1===r&&(t+=".properties")}return t},V=function(e,t){return c(e,t).then(function(n){var r=n.resourceBundle;return r?r:(r=n.i18nBundle,s(e,t).then(function(e){return r=U(e,r)}))})};return{getAttribute:i,getHandlerFileName:o,getHandlerFilePath:a,getAppNamespace:s,getDataSources:l,getAllDataSourceNames:p,getDataSourcesByName:f,getDataSourceAnnotationsByName:d,getDataSourcesByType:h,getSourceTemplate:m,getDependencies:g,getAllExtensions:y,isScaffoldingBased:_,addExtension:w,addDataSource:S,addDataSourceAnnotation:E,addExtensionForScaffoldingDataSource:R,addSourceTemplate:C,addDependencies:T,setHCPPlatformBlock:P,setABAPPlatformBlock:I,removeDataSource:D,removeDataSourceAnnotation:A,removeExtension:N,addModel:k,getModels:O,addConfig:b,getConfigs:c,addi18nExtensionModel:M,addI18nPath:B,getI18nPath:V}}),define("sap.watt.saptoolsets.fiori.project.ui5projecthandler/util/ConfigurationHandler",["sap/watt/lib/lodash/lodash","sap.watt.saptoolsets.fiori.project.ui5projecthandler/util/GenericHandler","sap/watt/lib/orion/javascript/esprima/esprimaVisitor"],function(e,t,n){"use strict";var r="Configuration.js",i=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},o=function(){return r},a=function(e){return t.getHandlerFilePath(e)},s=function(e){return t.getHandlerNamespace(e,r)},u=function(e){return e.getContent().then(function(e){try{var r=n.parse(e),i={oExtendedObjectContent:{},sIdSuffix:".Configuration"};if(n.visit(r,i,t.getExtendedObjectBySuffix),i.oExtendedObjectContent&&i.oExtendedObjectContent.properties)for(var o=i.oExtendedObjectContent.properties,a=0;a<o.length&&o[a].key;a++)if("oServiceParams"===o[a].key.name||"oServiceParams"===o[a].key.value){var s=o[a].value;if("ObjectExpression"===s.type)for(var u=s.properties,c=0;c<u.length&&u[c].key;c++)if("serviceList"===u[c].key.name||"serviceList"===u[c].key.value){var l=u[c].value;if("ArrayExpression"===l.type&&l.elements.length>0){for(var p,f,d,h,m=l.elements,g={},v=0;v<m.length;v++)if(f="",d="",h="",p=m[v].properties){for(var y=0;y<p.length&&p[y].key;y++)"name"!==p[y].key.name&&"name"!==p[y].key.value||!p[y].value||(f=p[y].value.value),"serviceUrl"!==p[y].key.name&&"serviceUrl"!==p[y].key.value||!p[y].value||(d=p[y].value.value),"mockedDataSource"!==p[y].key.name&&"mockedDataSource"!==p[y].key.value||!p[y].value||(h=p[y].value.value);f&&(g[f]={uri:d,type:"OData",settings:{localUri:h}})}return g}}}}catch(_){var x=new Error("File parsing failed");throw x.name="FileParsingFailed",x}return null})},c=function(e,t){return u(e,t).then(function(e){return"object"==typeof e&&null!==e?Object.keys(e):[]})},l=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},p=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},f=function(e,t,n){if("OData"===t)return u(e,n);var r=new Error("This method is not implemented");throw r.name="UnimplementedMethod",r},d=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},h=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},m=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},g=function(){return!0},v=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},y=function(t,n,r,i){if(e.isUndefined(n)||e.isNull(n)){var o=new Error("The data source name is not defined.");throw o.name="DataSourceNameNotDefined",o}if(e.isUndefined(r)||e.isNull(r)){var o=new Error("The content is not defined.");throw o.name="ContentNotDefined",o}return u(t).then(function(o){if(i||e.isNull(o)||o[""])return t.getContent().then(function(e){var i=P(e,n,r);return t.setContent(i).then(function(){return t.save().then(function(){return!0})})});var a=new Error("Service already exist. Use bOverwrite parameter to overwrite the service data");throw a.name="ServiceExist",a})},_=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},x=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},b=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},w=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},S=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},E=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},C=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},T=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},P=function(e,r,i){var o,a=e,s={sBlockName:"oServiceParams",bContent:!0,oBlock:{}};try{var u=n.parse(e);n.visit(u,s,t.getBlockByName);for(var c=-1,l=0;l<s.oBlock.properties.length;l++)if("serviceList"==s.oBlock.properties[l].key.name){c=l;break}for(var p=!1,l=0;l<s.oBlock.properties[c].value.elements[0].properties.length;l++)"name"===s.oBlock.properties[c].value.elements[0].properties[l].key.name?s.oBlock.properties[c].value.elements[0].properties[l].value.value=r:"serviceUrl"===s.oBlock.properties[c].value.elements[0].properties[l].key.name?s.oBlock.properties[c].value.elements[0].properties[l].value.value=i.uri?i.uri:"":"masterCollection"===s.oBlock.properties[c].value.elements[0].properties[l].key.name&&(p=!0);var f={type:"Property",key:{type:"Identifier",name:"masterCollection"},value:{type:"Literal",value:""},kind:"init"};p||s.oBlock.properties[c].value.elements[0].properties.push(f);var d={sBlockName:"oServiceParams",oBlock:s.oBlock};n.visit(u,d,function(e,t){return e.type===esprima.Syntax.Property&&e.key&&e.key.name===t.sBlockName?(e.value=t.oBlock,!1):!0}),a=escodegen.generate(u)}catch(h){throw o=new Error("File parsing failed"),o.name="FileParsingFailed",o}return a},I=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},D=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},A=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},N=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},k=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},O=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},R=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e},j=function(){var e=new Error("This method is not implemented");throw e.name="UnimplementedMethod",e};return{getAttribute:i,getHandlerFileName:o,getHandlerFilePath:a,getAppNamespace:s,getDataSources:u,getAllDataSourceNames:c,getDataSourcesByName:l,getDataSourceAnnotationsByName:p,getDataSourcesByType:f,getSourceTemplate:d,getDependencies:h,getAllExtensions:m,isScaffoldingBased:g,addExtension:v,addDataSource:y,addDataSourceAnnotation:_,addSourceTemplate:x,addDependencies:b,setHCPPlatformBlock:w,setABAPPlatformBlock:S,removeDataSource:E,removeDataSourceAnnotation:C,removeExtension:T,addModel:I,getModels:D,addConfig:A,addExtensionForScaffoldingDataSource:N,getConfigs:k,addi18nExtensionModel:O,addI18nPath:R,getI18nPath:j}}),define("sap.watt.saptoolsets.fiori.project.ui5projecthandler/service/UI5ProjectHandler",["sap.watt.saptoolsets.fiori.project.ui5projecthandler/util/AppDescriptorHandler","sap.watt.saptoolsets.fiori.project.ui5projecthandler/util/ComponentHandler","sap.watt.saptoolsets.fiori.project.ui5projecthandler/util/ConfigurationHandler","sap.watt.saptoolsets.fiori.project.ui5projecthandler/util/GenericHandler","sap/watt/lib/lodash/lodash"],function(e,t,n,r,i){"use strict";return sap.ui.base.Object.extend("sap.watt.saptoolsets.fiori.project.ui5projecthandler.service.UI5ProjectHandler",{projectGuidelinesTypes:{DESCRIPTOR:null,SCAFFOLDING_CONF:null,SCAFFOLDING_COMP:null},guidelinesFileNames:{DESCRIPTOR:null,SCAFFOLDING_COMP:null,SCAFFOLDING_CONF:null},init:function(){this.projectGuidelinesTypes.DESCRIPTOR=e,this.projectGuidelinesTypes.SCAFFOLDING_CONF=n,this.projectGuidelinesTypes.SCAFFOLDING_COMP=t,this.guidelinesFileNames.DESCRIPTOR=e.getHandlerFileName(),this.guidelinesFileNames.SCAFFOLDING_CONF=n.getHandlerFileName(),this.guidelinesFileNames.SCAFFOLDING_COMP=t.getHandlerFileName()},configure:function(){return Q()},getAttribute:function(e){return this._handle(e,"getAttribute",arguments)},getHandlerFileName:function(e){return this._handle(e,"getHandlerFileName",arguments)},getHandlerFilePath:function(e){return this._handle(e,"getHandlerFilePath",arguments)},getHandlerDocument:function(e){return this._getProjectGuidelinesSelection(e).then(function(e){return e.handlerDoc})},getAppNamespace:function(e){var t=this,n=arguments;return this._getSelectedDocument().then(function(i){return n[0]=e||i,t._getProjectGuidelinesTypeHandler(n[0]).then(function(e){return e.handlerDoc.getEntity().getName()===t.guidelinesFileNames.SCAFFOLDING_COMP?(e=t._createProjectGuidelinesObj(t.projectGuidelinesTypes.SCAFFOLDING_COMP,e.handlerDoc),t._dispatch("getAppNamespace",e,n)):r.getDescriptorFileFromCompLocation(e.handlerDoc,t.guidelinesFileNames.SCAFFOLDING_COMP).then(function(r){return e=t._createProjectGuidelinesObj(t.projectGuidelinesTypes.SCAFFOLDING_COMP,r),t._dispatch("getAppNamespace",e,n)})})})},getDataSources:function(e){return this._handle(e,"getDataSources",arguments)},getAllDataSourceNames:function(e){return this._handle(e,"getAllDataSourceNames",arguments)},getDataSourcesByName:function(e){return this._handle(e,"getDataSourcesByName",arguments)},getDataSourceAnnotationsByName:function(e){return this._handle(e,"getDataSourceAnnotationsByName",arguments)},getDataSourcesByType:function(e){return this._handle(e,"getDataSourcesByType",arguments)},getSourceTemplate:function(e){return this._handle(e,"getSourceTemplate",arguments)},getDependencies:function(e){return this._handle(e,"getDependencies",arguments)},getAllExtensions:function(e){return this._handle(e,"getAllExtensions",arguments)},isScaffoldingBased:function(e){return this._handle(e,"isScaffoldingBased",arguments)},addDataSource:function(e){return this._handle(e,"addDataSource",arguments)},addDataSourceAnnotation:function(e){return this._handle(e,"addDataSourceAnnotation",arguments)},addExtension:function(e){return this._handle(e,"addExtension",arguments)},addSourceTemplate:function(e){return this._handle(e,"addSourceTemplate",arguments)},addDependencies:function(e){return this._handle(e,"addDependencies",arguments)},removeDataSource:function(e){return this._handle(e,"removeDataSource",arguments)},removeDataSourceAnnotation:function(e){return this._handle(e,"removeDataSourceAnnotation",arguments)},removeExtension:function(e,t,n,r){var o=Array.prototype.slice.call(arguments);return(i.isNull(r)||i.isUndefined(r))&&o.length<4&&o.push(null),this._handle(e,"removeExtension",o)},isManifestProjectGuidelinesType:function(e){var t=this;return this._getProjectGuidelinesSelection(e).then(function(e){return e.handler===t.projectGuidelinesTypes.DESCRIPTOR}).fail(function(){return!1})},isConfigProjectGuidelinesType:function(e){var t=this;return this._getProjectGuidelinesSelection(e).then(function(e){return e.handler===t.projectGuidelinesTypes.SCAFFOLDING_CONF}).fail(function(){return!1})},isComponentProjectGuidelinesType:function(e){var t=this;return this._getProjectGuidelinesSelection(e).then(function(e){return e.handler===t.projectGuidelinesTypes.SCAFFOLDING_COMP}).fail(function(){return!1})},addModel:function(e){return this._handle(e,"addModel",arguments)},getModels:function(e){return this._handle(e,"getModels",arguments)},addConfig:function(e){return this._handle(e,"addConfig",arguments)},addExtensionForScaffoldingDataSource:function(e){return this._handle(e,"addExtensionForScaffoldingDataSource",arguments)},addi18nExtensionModel:function(e){return this._handle(e,"addi18nExtensionModel",arguments)},setHCPPlatformBlock:function(e){return this._handle(e,"setHCPPlatformBlock",arguments)},setABAPPlatformBlock:function(e){return this._handle(e,"setABAPPlatformBlock",arguments)},getConfigs:function(e){return this._handle(e,"getConfigs",arguments)},addI18nPath:function(e){return this._handle(e,"addI18nPath",arguments)},getI18nPath:function(e){var t=this,n=arguments;return this._getSelectedDocument().then(function(i){return n[0]=e||i,t._getProjectGuidelinesTypeHandler(n[0]).then(function(e){return e.handler===t.projectGuidelinesTypes.SCAFFOLDING_CONF?r.getDescriptorFileFromCompLocation(e.handlerDoc,t.guidelinesFileNames.SCAFFOLDING_COMP).then(function(r){return e=t._createProjectGuidelinesObj(t.projectGuidelinesTypes.SCAFFOLDING_COMP,r),t._dispatch("getI18nPath",e,n)}):t._dispatch("getI18nPath",e,n)})})},_handle:function(e,t,n){var r=this;return this._getSelectedDocument().then(function(i){return n[0]=e||i,r._getProjectGuidelinesTypeHandler(n[0]).then(function(e){return r._dispatch(t,e,n)})})},_getProjectGuidelinesSelection:function(e){var t=this;return this._getSelectedDocument().then(function(n){var r=e||n;return t._getProjectGuidelinesTypeHandler(r).then(function(e){return e})})},_getGuidelineForExternalDoc:function(e,t,n){var r,i=n?n:this,o=e.getEntity().getName();switch(o){case this.guidelinesFileNames.DESCRIPTOR:r=this.projectGuidelinesTypes.DESCRIPTOR;break;case this.guidelinesFileNames.SCAFFOLDING_COMP:r=this.projectGuidelinesTypes.SCAFFOLDING_COMP;break;case this.guidelinesFileNames.SCAFFOLDING_CONF:r=this.projectGuidelinesTypes.SCAFFOLDING_CONF;break;default:var a=new Error(t.i18n.getText("i18n","projectHandler_unknownProjectGuidelines"));throw a.name="UnknownProjectGuidelines",a}return Q(i._createProjectGuidelinesObj(r,e))},getDescriptorProjectGuidelines:function(t,n,r){return t.getContent().then(function(t){if(n._isComponentDirectToManifest(t))return e.getAppType(r,n.context).then(function(e){if("application"===e)return n._createProjectGuidelinesObj(n.projectGuidelinesTypes.DESCRIPTOR,r);var t=new Error(n.context.i18n.getText("i18n","projectHandler_manifestFileIsNotValid"));throw t.name="FileIsNotValid",t});var i=new Error(n.context.i18n.getText("i18n","projectHandler_directionError"));throw i.name="directionError",i})},_getProjectGuidelinesByAppComponent:function(e,n,i){return r.getAppComponent(e,n,t.getHandlerFileName(),i.context).then(function(e){if(!e){var t=new Error(i.context.i18n.getText("i18n","projectHandler_unknownProjectGuidelines"));throw t.name="UnknownProjectGuidelines",t}var o=r.getFileFromFolder(n,"sap-mobile-hybrid.js");return o?i._createProjectGuidelinesObj(i.projectGuidelinesTypes.SCAFFOLDING_COMP,e):r.getDescriptorFileFromCompLocation(e,i.guidelinesFileNames.DESCRIPTOR).then(function(t){return t?i.getDescriptorProjectGuidelines(e,i,t):r.getDescriptorFileFromCompLocation(e,i.guidelinesFileNames.SCAFFOLDING_CONF).then(function(t){return t?i._createProjectGuidelinesObj(i.projectGuidelinesTypes.SCAFFOLDING_CONF,t):i._createProjectGuidelinesObj(i.projectGuidelinesTypes.SCAFFOLDING_COMP,e)})})})},_getProjectGuidelinesTypeHandler:function(e){var t=this;if(e){var n=e.getExtInfo();return n&&n.external?this._getGuidelineForExternalDoc(e,t.context,t):t._getProject(e).then(function(e){return e.getCurrentMetadata(!0).then(function(n){if(i.isEmpty(n)){var r=new Error(t.context.i18n.getText("i18n","projectHandler_unknownProjectGuidelines"));throw r.name="UnknownProjectGuidelines",r}return t._getProjectGuidelinesByAppComponent(e,n,t)})})}var r=new Error(t.context.i18n.getText("i18n","projectHandler_noProjectSelected"));throw r.name="NoProjectSelected",r},_isComponentDirectToManifest:function(e){var t=/"?manifest"?\s*:\s*"json"/;return t.test(e)},_dispatch:function(e,t,n){if(!i.isEmpty(n)){var r=this,o=Array.prototype.slice.call(n);return o[0]=t.handlerDoc,o.push(r.context),t.handler[e].apply(r,o)}},_getSelectedDocument:function(){var e=this.context.service.selection;return e.getSelection().then(function(e){var t=e[0];return t&&t.document?t.document:void 0})},_getProject:function(e){return e.getProject()},_createProjectGuidelinesObj:function(e,t){return{handler:e,handlerDoc:t}}})}),define("sap.watt.saptoolsets.fiori.project.servicecatalog/command/Select",{isAvailable:function(){var e=this.context.service.selection;
return e.assertOwner(this.context.service.servicecatalog).then(function(){return e.assertNotEmpty().then(function(e){return!!e[0].document.data("ServiceUrl")||!!e[0].document.data("RDLPackage")})})},isEnabled:function(){return!0},execute:function(){var e=this.context.service.servicecatalog;return this.context.service.selection.getSelection().then(function(t){return e.setSelectedNode(t[0].document)})}}),define("sap.watt.saptoolsets.fiori.project.servicecatalog/command/Expand",{isAvailable:function(){var e=this.context.service.selection;return e.assertOwner(this.context.service.servicecatalog).then(function(){return e.assertNotEmpty().then(function(e){return e[0].document.getHasExpander()&&!e[0].document.getExpanded()})})},isEnabled:function(){return!0},execute:function(){return this.context.service.selection.getSelection().then(function(e){var t=e[0].document;t&&(t.setExpanded(!0),t.fireToggleOpenState(!0))})}}),define("sap.watt.saptoolsets.fiori.project.servicecatalog/command/Collapse",{isAvailable:function(){var e=this.context.service.selection;return e.assertOwner(this.context.service.servicecatalog).then(function(){return e.assertNotEmpty().then(function(e){return e[0].document.getHasExpander()&&e[0].document.getExpanded()})})},isEnabled:function(){return!0},execute:function(){return this.context.service.selection.getSelection().then(function(e){var t=e[0].document;t&&(t.setExpanded(!1),t.fireToggleOpenState(!1))})}}),define("sap.watt.saptoolsets.fiori.project.servicecatalog/utils/DataConnectionUtils",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{BSP_EXECUTE_ABAP:"bsp_execute_abap",getAdditionalData:function(e){var t={};if(e)for(var n=0;n<e.length;n++)"api_mgmt"===e[n]&&(t.isApimgmt=!0),"full_url"===e[n]&&(t.isFullUrl=!0);return t},compareDestinationsByDescription:function(e,t){return e.description.toLowerCase()<t.description.toLowerCase()?-1:e.description.toLowerCase()>t.description.toLowerCase()?1:0},getConnections:function(e,t,n){var r=this,i=r.getFormatterConnections(e,t);return n?(r.addBSPConnections(e,i),i):i},addBSPConnections:function(e,t){var n=this,r=[];return r=e.filter(function(e){return e.wattUsage===n.BSP_EXECUTE_ABAP}),r.sort(n.compareDestinationsByDescription),r.forEach(function(e){for(var r=!1,i=0;i<t.length;i++)if(t[i].name===e.description){t[i].destinationBSP=e,r=!0;break}r||t.push(n.createDestination(e))}),t},getFormatterConnections:function(e,t){var n=this,r=[],i=[];return e&&(i=e.filter(function(e){var n=!1;return t.forEach(function(t){e.wattUsage===t&&(n=!0)}),n})),i.sort(n.compareDestinationsByDescription),i.forEach(function(e){r.push(n.createDestination(e))}),r},createDestination:function(e){var t=e.url,n={url:t,name:e.description,type:e.wattUsage,destination:e};return jQuery.extend(n,this.getAdditionalData(e.additionalData)),n},getUrlPath:function(e){if(e){var t=URI(e).path().toString().replace(/\$metadata/g,"");return t="/"===t[0]?t:"/"+t,t="/"===t[t.length-1]?t:t+"/"}},getDesigntimeUrl:function(t,n){if(t&&n){var r=n;if(!e.startsWith(r,"/")){var i=new Error("URL is not supported.");throw i.name="UrlNotSupported",i}return-1===r.indexOf(t.url)&&(-1!==r.indexOf(t.path)?r=r.replace(t.path,t.url):e.startsWith(r,"/destinations/")||(r=e.trimRight(t.url,"/")+"/"+e.trimLeft(r,"/"))),r}},getRuntimeUrl:function(t,n){if(t&&n){if(!e.startsWith(t,"/")){var r=new Error("URL is not supported.");throw r.name="UrlNotSupported",r}var i=t.replace(n.url,n.path);return-1===i.indexOf(n.path)&&(e.startsWith(i,"/destinations")||(i=n.path+i)),i=i.replace(/\/\//g,"/"),-1===i.indexOf("/",i.length-1)&&(i+="/"),i}},removeAbsoluteURL:function(e,t){if(!e||!t)return e;var n=e.indexOf(t);if(-1===n)return e;var r=n+t.length,i=e.lastIndexOf("=",r);if(-1===i)return e;var o=e.substring(i+2,r);return e=e.replace(new RegExp(o,"g"),".")}}}),define("sap.watt.saptoolsets.fiori.project.servicecatalog/service/Catalog",["sap/watt/common/plugin/platform/service/ui/AbstractPart","sap/watt/lib/lodash/lodash","../utils/DataConnectionUtils"],function(e,t,n){var r=e.extend("sap.watt.saptoolsets.fiori.project.servicecatalog.service.Catalog",{_CATALOG_RDL:"river",_CATALOG_ODATA_ABAP:"odata_abap",_CATALOG_GENERIC:"odata_gen",_CATALOG_APIMGMT_CATALOG:"api_mgmt_catalog",_CATALOG_APIMGMT_PROXY:"api_mgmt_proxy",_oContextMenuGroup:null,_oCurrentSelectedDocument:null,_oApiManagmentEndPointDest:null,_dConnectionData:null,_oServiceCallsQueue:new Q.sap.Queue,_context:null,configure:function(e){var t=this;return e.styles&&this.context.service.resource.includeStyles(e.styles).done(),e.contextMenu?this.context.service.commandGroup.getGroup(e.contextMenu).then(function(e){t._oContextMenuGroup=e}):void 0},_i18n:void 0,_createGrid:function(){var e=this,t={bSelectAPIStep:!0,bSelectedApiService:!1,bHasRelatedProduct:!1,bSelectedProduct:!1},n=new sap.ui.model.json.JSONModel;n.setData({modelData:t}),this.oServiceInfoAndDetailsGrid=new sap.ui.layout.Grid({vSpacing:0,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})}),this.oServiceInfoAndDetailsGrid.setModel(n),this.oServiceInfoAndDetailsGrid.bindElement("/modelData"),this.oGrid=new sap.ui.layout.Grid({hSpacing:0,vSpacing:0,layoutData:new sap.ui.layout.GridData({span:"L7 M7 S7"})}).addStyleClass("serviceCatalogMainGridBorder");var r=new sap.ui.commons.Label({text:{path:"bSelectAPIStep",formatter:function(t){return t?e._i18n.getText("i18n","dataConnectionWizardStep_oServiceInformationLabel"):e._i18n.getText("i18n","dataConnectionWizardStep_oAvailableProductsLabel")}},textAligh:"Left",width:"100%",layoutData:new sap.ui.layout.GridData({span:"L7 M7 S7"})}).addStyleClass("serviceCatalogHeaderLabel"),i=new sap.ui.commons.Label({text:"{i18n>dataConnectionWizardStep_apiDetailsLabel}",width:"100%",layoutData:new sap.ui.layout.GridData({span:"L5 M5 S5"}),visible:{path:"bSelectedApiService",formatter:function(e){return e}}}).addStyleClass("serviceCatalogHeaderLabel");this.oCatalogComboBox=new sap.ui.commons.DropdownBox({width:"100%",change:[e._handleCatalogComboBox,e],placeholder:"{i18n>catalog_select_system_placeholder}",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"}),accessibleRole:sap.ui.core.AccessibleRole.Combobox,visible:{path:"bSelectAPIStep",formatter:function(e){return e}}}).addStyleClass("serviceCatalogStepBottomMargin"),this.populateConnections(this.oCatalogComboBox,0),this.oSearchField=new sap.ui.commons.SearchField({enableListSuggest:!1,enableFilterMode:!0,enableClear:!0,enabled:!1,width:"100%",tooltip:"{i18n>service_name_or_description_search}",suggest:[e._doSuggest,e],startSuggestion:0,layoutData:new sap.ui.layout.GridData({linebreak:!0,span:"L12 M12 S12"}),accessibleRole:sap.ui.core.AccessibleRole.Search,visible:{path:"bSelectAPIStep",formatter:function(e){return e}}}).addStyleClass("serviceCatalogStepBottomMargin"),this.oGrid.addContent(this.oCatalogComboBox),this.oGrid.addContent(this.oSearchField);var o=new sap.ui.commons.Button({text:"{i18n>dataConnectionWizardStep_apiBackToApiListButton}",lite:!0,icon:"sap-icon://navigation-left-arrow",press:function(){e.oServiceInfoAndDetailsGrid.getModel().setProperty("/modelData/bSelectAPIStep",!0),e.oServiceInfoAndDetailsGrid.getModel().setProperty("/modelData/bSelectedApiService",!0)},layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"}),visible:{path:"bSelectAPIStep",formatter:function(e){return!e}}}).addStyleClass("oBackToApiListButton");this.oGrid.addContent(o),this.oProductsTree=new sap.ui.commons.Tree({showHeader:!1,height:"300px",width:"100%",visible:{path:"bSelectAPIStep",formatter:function(e){return e===!1}},layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"}),select:function(){e.oServiceInfoAndDetailsGrid.getModel().setProperty("/modelData/bSelectedProduct",!0)}}).addStyleClass("productsTree"),this.oAPIProductsNodeTemplate=new sap.ui.commons.TreeNode({text:"{dataModel>name}",expanded:!1,nodes:[new sap.ui.commons.TreeNode({selectable:!1,text:"{dataModel>description}"}).addStyleClass("productDescriptionNode")]}),this.oGrid.addContent(this.oProductsTree);var a=new sap.ui.layout.Grid({layoutData:new sap.ui.layout.GridData({span:"L5 M5 S5"}),visible:{path:"bSelectedApiService",formatter:function(e){return e}}}),s=new sap.ui.commons.Label({text:"{i18n>dataConnectionWizardStep_apiDescriptionLabel}",width:"100%",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})});this.oApiDescriptionText=new sap.ui.commons.TextArea({editable:!1,wrapping:sap.ui.core.Wrapping.Soft,rows:3,width:"100%",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})}).addStyleClass("apiDescriptionText"),a.addContent(s),a.addContent(this.oApiDescriptionText);var u=new sap.ui.commons.Button({text:"{i18n>dataConnectionWizardStep_apiSubscribeButton}",press:function(){e.oServiceInfoAndDetailsGrid.getModel().setProperty("/modelData/bSelectAPIStep",!1),e.oServiceInfoAndDetailsGrid.getModel().setProperty("/modelData/bSelectedApiService",!1)},visible:{path:"bSelectedApiService",formatter:function(e){return e}},enabled:{path:"bHasRelatedProduct",formatter:function(e){return e}}}),c=new sap.ui.commons.Button({text:"{i18n>dataConnectionWizardStep_apiSelectProductButton}",press:function(){e._onSubscribeToProduct()},visible:{path:"bSelectAPIStep",formatter:function(e){return!e}},enabled:{path:"bSelectedProduct",formatter:function(e){return e}}}),l=new sap.ui.layout.HorizontalLayout({content:[u,c],layoutData:new sap.ui.layout.GridData({span:"L7 M7 S7"})}).addStyleClass("subscribeLayout");this.oServiceInfoAndDetailsGrid.addContent(r),this.oServiceInfoAndDetailsGrid.addContent(i),this.oServiceInfoAndDetailsGrid.addContent(this.oGrid),this.oServiceInfoAndDetailsGrid.addContent(a),this.oServiceInfoAndDetailsGrid.addContent(l)},_resetTreeFields:function(){this.oTree&&(this.oGrid.removeContent(this.oTree),this.nodes=void 0,this.oSearchField.setValue(""),this._markAsDisabled(this.oSearchField,!0),this.context.event.fireValidateNextSent({bNextEnabled:!1,message:"",severity:""}).done())},populateConnections:function(e,n){var r=this;this.context.event.fireRequestSent().done(),this.context.service.destination.getDestinations().then(function(i){t.forEach(i,function(e){return e.wattUsage===r._CATALOG_APIMGMT_PROXY?(r._oApiManagmentEndPointDest=e,!1):void 0}),e.addItem(new sap.ui.core.ListItem({text:""}).data("connection",void 0)),r._getFormatterConnections(i,n).forEach(function(t){e.addItem(new sap.ui.core.ListItem({text:t.name}).data("connection",t))});var o=e.getItems();2===o.length&&(e.fireEvent("change",{selectedItem:o[1]}),e.setSelectedItemId(o[1].getId()))}).fail(function(e){r._throwValidate(e)}).fin(function(){r.context.event.fireRequestCompleted().done()})},_markAsDisabled:function(e,t){e.setEnabled(!t)},_onBeforeClose:function(e){e&&e.data&&(this.context.event.fireValidateNextSent({bNextEnabled:!1,sMessage:"",severity:""}).done(),this._oConnectionDetails.wattUsage===this._CATALOG_ODATA_ABAP?this._handleOnBeforeCloseOData(e):this._oConnectionDetails.wattUsage===this._CATALOG_APIMGMT_CATALOG&&this._handleOnSelectedForApiMgm(e))},getServiceConnectionData:function(e,t){var r=this,i=[],o=e.destination,a=n.getUrlPath(t),s=n.getDesigntimeUrl(o,a);o.wattUsage===this._CATALOG_ODATA_ABAP&&(t=s);var u=n.getRuntimeUrl(a,o);return o.wattUsage===this._CATALOG_GENERIC&&(u=s),e.isApimgmt&&(i.apiKey=e.apiKey),this.context.event.fireRequestSent().done(),s="/"!==s.charAt(s.length-1)?s+"/":s,this._callAjax(s+"$metadata","GET",null,"text",i).then(function(i){return r.context.service.csdlParser.parse(i[0],null,null).then(function(a){return r.context.service.astLibrary.getRiverAstLibrary(a.response[0]).then(function(a){return r.context.event.fireServiceSelectionCompleted({connectionData:{serviceName:"",metadata:a,runtimeUrl:u,url:t,type:r._CATALOG_RDL,destination:o,metadataContent:n.removeAbsoluteURL(i[0],o.url),apiKey:e.apiKey}})})}).fail(function(){r._throwValidate(new Error(r._i18n.getText("i18n","serviceCatalogWizardStep_could_not_parse_file")))})}).fail(function(e){r._throwValidate(new Error(e.statusText))}).fin(function(){r.context.event.fireRequestCompleted().done()})},_handleOnSelectedForApiMgm:function(e){if(e.data("APIProxy")){var t=this;this.oServiceInfoAndDetailsGrid.getModel().setProperty("/modelData/bSelectedProduct",!1),this.oApiDescriptionText.setValue(e.data("Description"));var n=this._oConnectionDetails.url,r=e.data("APIProxy")+"?$expand=ToProxyEndPoints,ToAPIProducts";this.context.event.fireRequestSent().done();var i="/"===n[n.length-1]?n+r:n+"/"+r,o=new sap.ui.model.json.JSONModel;this._oServiceCallsQueue.next(function(){t._callAjax(i,"GET",null,"json").then(function(n){o.setData(n[0]),t.oProductsTree.setModel(o,"dataModel"),t.oProductsTree.bindNodes("dataModel>/d/ToAPIProducts/results",t.oAPIProductsNodeTemplate,null,[new sap.ui.model.Filter({test:function(){return!0},path:"name"})]);var r=n[0].d.ToAPIProducts.results.length>0;if(!r){var i=t._i18n.getText("i18n","catalogService_No_Products_for_API_Proxy");t._throwValidate(new Error(i),"info")}t.oServiceInfoAndDetailsGrid.getModel().setProperty("/modelData/bHasRelatedProduct",r),t.oServiceInfoAndDetailsGrid.getModel().setProperty("/modelData/bSelectedApiService",!0),e.data("ServiceUrl",n[0].d.ToProxyEndPoints.results[0].base_path),sap.ui.getCore().getEventBus().publish("servicecatalog","requestCompleted")}).fail(function(n){t._errorHandler(new Error(n.statusText),e)}).fin(function(){t.context.event.fireRequestCompleted().done()})})}},_handleOnBeforeCloseOData:function(e){if(e.data("ServiceUrl")){var t=this,r=e.data("ServiceUrl"),i=e.data("serviceName");this.context.event.fireRequestSent().done();var o="/"===r[r.length-1]?URI(r+"$metadata").path():URI(r+"/$metadata").path();-1===o.indexOf(this._oConnectionDetails.url)&&(o=o.replace(this._oConnectionDetails.path,this._oConnectionDetails.url)),this._oServiceCallsQueue.next(function(){t._callAjax(o,"GET",null,"text").then(function(o){return t.context.service.csdlParser.parse(o[0]).then(function(a){return t.context.service.astLibrary.getRiverAstLibrary(a.response[0]).then(function(a){return t.context.event.fireServiceSelectionCompleted({connectionData:{serviceName:i,metadata:a,runtimeUrl:n.getRuntimeUrl(r,t._oConnectionDetails),url:r,type:t._CATALOG_RDL,destination:t._oConnectionDetails,metadataContent:n.removeAbsoluteURL(o[0],t._oConnectionDetails.url),sPath:e.getBindingContext().getPath()}})})}).fail(function(){t._throwValidate(new Error(t._i18n.getText("i18n","serviceCatalogWizardStep_could_not_parse_file")))})}).fail(function(n){t._errorHandler(new Error(n.statusText),e)}).fin(function(){t.context.event.fireRequestCompleted().done()})})}},_handleCatalogComboBox:function(e){if(this.oServiceInfoAndDetailsGrid.getModel().setProperty("/modelData/bSelectedApiService",!1),!e.getParameter("selectedItem")||""===e.getParameter("selectedItem").getText())return this._resetTreeFields(),void 0;var t=e.getParameter("selectedItem").data("connection");t&&(this._populateServicesTree(t),this._oConnectionDetails=t.destination,this._sConnectionUrl=t.url)},_populateServicesTree:function(e){var t=this;this._resetTreeFields(),this.context.event.fireRequestSent().done(),e&&this.getCatalog(e).then(function(e){t.oTree=e,t.oTree.attachBrowserEvent("contextmenu",t._onRightClick,t),t.oTree.attachBrowserEvent("dblclick",t._onSelectedTreeNode,t),e.setLayoutData(new sap.ui.layout.GridData({span:"L12 M12 S12"})),e.setShowHeader(!1),e.addStyleClass("serviceCatalogStepBottomMargin"),t.oGrid.addContent(e),t.context.event.fireRequestCompleted().done(),t._markAsDisabled(t.oSearchField,!1)}).fail(function(e){t._throwValidate(e),t.context.event.fireRequestCompleted().done()}).done()},_onRightClick:function(e){e.preventDefault();for(var t=e.target;t&&!t.attributes.id;)t=t.parentElement;if(t&&t.attributes.id){var n=t.attributes.id.value,r=sap.ui.getCore().byId(n);this.setCurrentSelectedDocument(r),this.context.service.contextMenu.open(this._oContextMenuGroup,e.pageX,e.pageY).done()}},_onAPIServiceToggle:function(e){e.getSource()},_onServiceToggle:function(e){var t=this,n=e.getSource();if(n.getNodes()&&0===n.getNodes().length&&(this.context.event.fireRequestSent().done(),this._oConnectionDetails.wattUsage===this._CATALOG_ODATA_ABAP)){var r=n.data("ServiceUrl"),i=n.data("sap_client");-1===r.indexOf(this._oConnectionDetails.url)&&(r=r.replace(this._oConnectionDetails.path,this._oConnectionDetails.url));var o=URI(r).path(),a=n.data("metadata");a||this._oServiceCallsQueue.next(function(){t.context.service.odataProvider.getMetadata(o,i).then(function(e){n.data("metadata",e),require(["sap.watt.saptoolsets.fiori.project.servicecatalog/providers/ODataTreeNodesProvider"],function(r){try{r.getCatalogServiceTreeNodes(e,t.context.service.odataProvider,t.context.i18n).forEach(function(e){n.addNode(e)})}catch(i){t._errorHandler(i,n)}},t._throwValidate)}).fail(function(e){t._errorHandler(e,n)}).fin(function(){t.context.event.fireRequestCompleted().done()})})}},_doSuggest:function(e){this.nodes||(this.nodes=this.oTree.getNodes());var t=this;this.oTree.removeAllNodes(),this.nodes.forEach(function(n){-1!==n.getText().toLowerCase().indexOf(e.getParameter("value").toLowerCase())&&t.oTree.addNode(n)})},_errorHandler:function(e,t){var n="";t.getHasExpander()&&(n=e&&e.response&&e.response.statusText?e.response.statusText:e.statusText?e.statusText:e.message,t.setIsSelected(!1),t.setSelectable(!1),t.addStyleClass("serviceCatalogTreeNode"),t.setText(t.getText()),t.setHasExpander(!1),t.data("ServiceUrl",void 0),t.data("APIProxy",void 0),this.context.event.fireValidateNextSent({bNextEnabled:!1,sMessage:n,severity:""}).done())},_throwValidate:function(e,t){var n="";e.status&&401===e.status||(n=this._i18n.getText("i18n","odata_request_failed")),e.detailedMessage&&(n=e.detailedMessage),e.message&&(n=e.message),t||(t=""),this.context.event.fireValidateNextSent({bNextEnabled:!1,sMessage:n,severity:t}).done()},_getFormatterConnections:function(e,t){var r=this,i=[];return e&&(i=3===t?n.getFormatterConnections(e,[this._CATALOG_ODATA_ABAP,this._CATALOG_GENERIC]):n.getFormatterConnections(e,[this._CATALOG_ODATA_ABAP,this._CATALOG_APIMGMT_CATALOG]),i.forEach(function(e){e.type!==r._CATALOG_ODATA_ABAP||e.isFullUrl||(e.url=e.url+"/IWFND/CATALOGSERVICE;v=2")})),i},_onSelectedTreeNode:function(e){e&&e.getSource&&(e.getSource().data("ServiceUrl")||e.getSource().data("RDLApplicationName")&&e.getSource().data("RDLPackage")||e.getSource().data("serviceName")||e.getSource().data("APIProxy"))&&this._onBeforeClose(e.getSource())},_onSubscribeToProduct:function(){var e=this,t=this.oProductsTree.getSelection(),r=t.getText(),i=this.oTree.getSelection(),o=i.data("ServiceUrl"),a=i.data("ServiceName"),s=Q.defer(),u=o.split("/"),c=u.splice(0,3).join("").length+3;if(!e._oApiManagmentEndPointDest)return e._throwValidate(new Error(e._i18n.getText("i18n","catalogService_No_Destination_for_API_Endpoint"))),void 0;var l=e._oApiManagmentEndPointDest.url+"/"+o.substring(c);this.context.event.fireRequestSent().done();var p=this._context?this._context.appName:"",f={id:"0",version:"1",title:p,ToAPIProductsDetails:[{__metadata:{uri:"APIMgmt.APIProducts('"+r+"')"}}]},d=this._oConnectionDetails.url+"/APIMgmt.Applications";return this._callAjax(d,"POST",f,"json").then(function(t){var i=t[0].d.id,o=d+"('"+i+"')";e._callAjax(o,"GET",null,"json").then(function(t){e.appKey=t[0].d.app_key,e.appSecret=t[0].d.app_secret;var i={APIKey:e.appKey,appSecret:e.appSecret};e._callAjax(l+"/$metadata","GET",null,"text",i).then(function(t){return e.context.service.csdlParser.parse(t[0]).then(function(i){return e.context.service.astLibrary.getRiverAstLibrary(i.response[0]).then(function(i){return e.context.event.fireServiceSelectionCompleted({connectionData:{serviceName:a,productName:r,metadata:i,runtimeUrl:l,url:l,apiKey:e.appKey,appSecret:e.appSecre,type:e._CATALOG_RDL,destination:e._oApiManagmentEndPointDest,metadataContent:n.removeAbsoluteURL(t[0],e._oApiManagmentEndPointDest.url)}})})}).fail(function(){e._throwValidate(new Error(e._i18n.getText("i18n","serviceCatalogWizardStep_could_not_parse_file")))})}).fail(function(t){e._throwValidateror(new Error(t.statusText));var n=new Error(e._i18n.getText("i18n","ajax_request_failed",[t.statusText]));s.reject(n)}).fin(function(){e.context.event.fireRequestCompleted().done()})})}).fail(function(t){e._throwValidate(new Error(t.statusText));var n=new Error(e._i18n.getText("i18n","ajax_request_failed",[t.statusText]));e._setXHRDataToError(n,t),s.reject(n)}).done(),s.promise},_getAPIMgmtCatalog:function(e){var t=this,n=new sap.ui.commons.TreeNode({text:{parts:["proxiesModel>title","proxiesModel>description","proxiesModel>version"],formatter:function(e,t,n){return e+" ["+t+"]"+"         version "+n}},expanded:!1,hasExpander:!1,selected:[t._onSelectedTreeNode,t],toggleOpenState:[t._onAPIServiceToggle,t]}).data("APIProxy","APIMgmt.APIProxies('{proxiesModel>name}')").data("Description","{proxiesModel>description}").data("ServiceName","{proxiesModel>name}"),r=new sap.ui.model.json.JSONModel,i=Q.defer(),o=e.url+"/APIMgmt.APIProxies";return this._callAjax(o,"GET",null,"json").then(function(e){r.setData(e[0]),t.oTree.setModel(r,"proxiesModel"),t.oTree.bindNodes("proxiesModel>/d/results",n,null,[new sap.ui.model.Filter({test:function(){return!0},path:"name"})]),t.oSearchField&&t._markAsDisabled(t.oSearchField,!1),sap.ui.getCore().getEventBus().publish("servicecatalog","requestCompleted"),i.resolve(t.oTree)}).fail(function(e){t._throwValidate(new Error(e.statusText));var n=new Error(t._i18n.getText("i18n","ajax_request_failed",[e.statusText]));t._setXHRDataToError(n,e),i.reject(n)}).done(),i.promise},_getODataServiceMetadata:function(e,t){var n=this,r=t;r||(r=Q.defer());var i=new sap.ui.model.odata.v2.ODataModel(e);return this._sMetadataXml=i.oServiceData.oMetadata.sMetadataBody,this._oMetadata=null,i.attachMetadataFailed(function(){var t=arguments[0].getParameters().statusCode;if(403===t)n._getODataCatalog(e,r);else{var i=n._i18n.getText("i18n","odata_request_failed"),o=401,a=new Error(i);a.status=o,r.reject(a)}}),i.attachMetadataLoaded(function(){n._oMetadata=i.getServiceMetadata(),r.resolve()}),r.promise},_getODataCatalog:function(e,t){var n=this,r=new sap.ui.commons.TreeNode({text:{parts:["Title","Description"],formatter:function(e,t){return e+" ["+t+"]"}},expanded:!1,hasExpander:!0,selected:[n._onSelectedTreeNode,n],toggleOpenState:[n._onServiceToggle,n]}).data("ServiceUrl",{parts:["ServiceUrl"],formatter:function(e){return URI(e).path()}}).data("serviceName","{Title}"),i=new sap.ui.model.odata.ODataModel(e.url,!0,null,null,{},!1,!1,!0);i.setSizeLimit(2e3),this.oTree.setModel(i);var o=t;return o||(o=Q.defer()),i.attachRequestCompleted(function(e){if(!e.getParameter("success")){var t=new Error(n._i18n.getText("i18n","serviceCatalog_request_failed"));t.status=404,o.reject(t)}n.oSearchField&&n._markAsDisabled(n.oSearchField,!1),sap.ui.getCore().getEventBus().publish("servicecatalog","requestCompleted"),o.resolve(n.oTree)}),i.attachMetadataFailed(function(){var t=e.url.indexOf(";v="),r=arguments[0].getParameters().statusCode;if(t>-1&&403===r)e.url=e.url.substring(0,t),n._getODataCatalog(e,o);else{var i,a,s=e.isFullUrl;404===r&&s?(i=n._i18n.getText("i18n","odata_full_url_request_failed"),a=r):(i=n._i18n.getText("i18n","odata_request_failed"),a=401);var u=new Error(i);u.status=a,o.reject(u)}}),i.attachMetadataLoaded(function(){n.oTree.bindNodes({path:"/ServiceCollection",template:r,parameters:{navigation:{}}})}),o.promise},_getRDLCatalog:function(e){var t=this,n=new sap.ui.commons.TreeNode({text:{parts:["name","pkg"],formatter:function(e,t){return e+" ["+t+"]"}},selected:[t._onSelectedTreeNode,t],expanded:!1,hasExpander:!0,toggleOpenState:[t._onServiceToggle,t]}).data("RDLApplicationName","{name}").data("RDLPackage","{pkg}"),r=new sap.ui.model.json.JSONModel,i=Q.defer();return this._callAjax(e.url+"/sap/hana/rdl/catalog/service/search?exp=*","GET",null).then(function(e){r.setData(e[0]),t.oTree.setModel(r),t.oTree.bindNodes("/d/results",n),t.oSearchField&&t._markAsDisabled(t.oSearchField,!1),sap.ui.getCore().getEventBus().publish("servicecatalog","requestCompleted"),i.resolve(t.oTree)}).fail(function(e){t._throwValidate(new Error(e.statusText));var n=new Error(t._i18n.getText("i18n","ajax_request_failed",[e.statusText]));t._setXHRDataToError(n,e),i.reject(n)}).done(),i.promise},_callAjax:function(e,t,n,r,i){return i||(i={}),i["Content-Type"]="application/json",void 0!==i.apiKey&&(i["Cache-Control"]="no-cache",i["no-store"]="must-revalidate"),"POST"==t?(i["X-CSRF-Token"]="Fetch",Q.sap.ajax({type:"GET",url:e,headers:i,dataType:r,beforeSend:function(e){e.setRequestHeader("X-Requested-With",{toString:function(){return""}})}}).then(function(o){return i["X-CSRF-Token"]=o[1].getResponseHeader("X-CSRF-Token"),Q.sap.ajax({type:t,url:e,data:JSON.stringify(n),headers:i,dataType:r,beforeSend:function(e){e.setRequestHeader("X-Requested-With",{toString:function(){return""}})}})})):Q.sap.ajax({type:t,url:e,data:n?JSON.stringify(n):null,headers:i,dataType:r,beforeSend:function(e){e.setRequestHeader("X-Requested-With",{toString:function(){return""}})}})},_setXHRDataToError:function(e,t){e.status=t.status,e.statusText=t.statusText,e.responseText=t.responseText,e.responseJSON=t.responseJSON},getContent:function(){return this._i18n=this.context.i18n,this.oServiceInfoAndDetailsGrid||(this._createGrid(),this.context.service.focus.attachFocus(this.context.self).done()),this._i18n.applyTo(this.oServiceInfoAndDetailsGrid),this.oServiceInfoAndDetailsGrid},setSelectedNode:function(e){return this._onBeforeClose(e)},setServiceContext:function(e){this._context=e},getCatalog:function(e){return this.oTree=new sap.ui.commons.Tree({showHeaderIcons:!1,height:"300px",width:"100%",visible:{path:"bSelectAPIStep",formatter:function(e){return e}}}),this.oSearchField&&this._markAsDisabled(this.oSearchField,!0),sap.ui.getCore().getEventBus().publish("servicecatalog","requestSent"),e.type===this._CATALOG_RDL?this._getRDLCatalog(e):e.type===this._CATALOG_ODATA_ABAP?this._getODataCatalog(e):e.type===this._CATALOG_APIMGMT_CATALOG?this._getAPIMgmtCatalog(e):void 0},cleanSelection:function(){this.oTree&&(this.oTree.collapseAll(),this.oTree.getSelection()&&this.oTree.getSelection().setIsSelected(!1)),this.oProductsTree&&(this.oProductsTree.collapseAll(),this.oProductsTree.getSelection()&&this.oProductsTree.getSelection().setIsSelected(!1)),this.oServiceInfoAndDetailsGrid&&(this.oServiceInfoAndDetailsGrid.getModel().setProperty("/modelData/bSelectedApiService",!1),this.oServiceInfoAndDetailsGrid.getModel().setProperty("/modelData/bSelectAPIStep",!0),this.oServiceInfoAndDetailsGrid.getModel().setProperty("/modelData/bHasRelatedProduct",!1),this.oServiceInfoAndDetailsGrid.getModel().setProperty("/modelData/bSelectedProduct",!1))},cleanGrid:function(){this.cleanSelection(),this.oServiceInfoAndDetailsGrid=void 0},getFocusElement:function(){return this.oServiceInfoAndDetailsGrid},getSelection:function(){return this._oCurrentSelectedDocument},setCurrentSelectedDocument:function(e){this._oCurrentSelectedDocument=e?{document:e}:null,this.context.event.fireSelectionChanged().done()}});return r}),define("sap.watt.saptoolsets.fiori.project.servicecatalog/service/Connectivity",{_getFileFromFolder:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e)return this.context.service.filesystem.documentProvider.getDocument(r.path)}return Q()},onAfterGeneration:function(e){if("servicecatalog.connectivityComponent"===e.params.selectedTemplate.getId()){var t=this,n="serviceBinding.js",r="index.html",i=e.params.model.componentPath.split("/"),o="/"+i[1];return t.context.service.filesystem.documentProvider.getDocument(o).then(function(i){return Q.spread([i.getCurrentMetadata(!0),e.params.targetDocument.getCurrentMetadata(!0)],function(i,o){return t._getFileFromFolder(n,o).then(function(o){return e.params.model.needBindingFile?t._getFileFromFolder(r,i).then(function(e){return Q.spread([o.getParent(),e.getParent()],function(e,t){return e!==t?Q.spread([o.getContent(),t.touch(n)],function(e,t){return t.setContent(e).then(function(){return t.save(),o.delete()})}):void 0})}):o.delete()})})})}}}),define("sap.watt.saptoolsets.fiori.project.servicecatalog/service/CatalogStep",{_step:null,_aExtensionFilters:[],configure:function(e){var t=this;return e.styles&&this.context.service.resource.includeStyles(e.styles).done(),e.repositoryBrowserExtensionFilters.length>0&&(this._aExtensionFilters=e.repositoryBrowserExtensionFilters),e.contextMenu?this.context.service.commandGroup.getGroup(e.contextMenu).then(function(e){t._oContextMenuGroup=e}):void 0},getContent:function(){jQuery.sap.require("sap.watt.saptoolsets.fiori.project.plugin.servicecatalog.ui.wizard.ServiceCatalogWizardStep"),this._step=new sap.watt.saptoolsets.fiori.project.plugin.servicecatalog.ui.wizard.ServiceCatalogWizardStep({context:this.context,extensionFilters:this._aExtensionFilters});var e=this.context.i18n.getText("serviceCatalogWizardStep_title_label"),t=this.context.i18n.getText("dataConnectionWizardStep_oInstructionLabel_choose_service");return this.context.service.wizard.createWizardStep(this._step,e,t)},setProgressBarOn:function(){this._step.fireProcessingStarted()},setProgressBarOff:function(){this._step.fireProcessingEnded()},createDetailsContent:function(){this._step.createDetailsContent()},onCatalogServiceSelectionSuccess:function(e){this._step.onCatalogServiceSelectionSuccess(e.params.connectionData)},onServiceCatalogStepNext:function(e){this._step.onServiceCatalogStepNext(e.params.bNextEnabled,e.params.sMessage,e.params.severity)}}),define("sap.watt.saptoolsets.fiori.project.servicecatalog/service/ConnectivityComponentFinishStep",{getContent:function(){jQuery.sap.require("sap.watt.saptoolsets.fiori.project.plugin.servicecatalog.ui.wizard.ConnectivityComponentFinishStep");var e=new sap.watt.saptoolsets.fiori.project.plugin.servicecatalog.ui.wizard.ConnectivityComponentFinishStep({context:this.context});return this.context.service.wizard.createWizardStep(e,"","")}}),define("sap.watt.saptoolsets.fiori.project.servicecatalog/service/DataConnectionUtilsProvider",[],function(){return{getDataConnectionUtils:function(){return Q.sap.require("sap.watt.saptoolsets.fiori.project.servicecatalog/utils/DataConnectionUtils").then(function(e){return e})}}}),define("sap.watt.saptoolsets.fiori.project.ui5template/service/MDWithAttachmentsSettings",{onAfterGeneration:function(e){if("ui5template.mdWithAttachmentsKapsel"===e.params.selectedTemplate.getId()||"ui5template.mdWithAttachmentsAnnotation"===e.params.selectedTemplate.getId()){var t=this,n="/"+e.params.model.projectName;return this.context.service.filesystem.documentProvider.getDocument(n).then(function(e){var n={appname:"sample",appid:"com.sap.sample",appdesc:"a new mobile application",appversion:"1.0.0",server:"",port:""};return n.platform={ios:{selected:!0,preferences:{Fullscreen:!1,Orientation:"default",EnableViewportScale:!0}},android:{selected:!0,preferences:{Fullscreen:!1,Orientation:"default",ShowTitle:!0,LogLevel:"VERBOSE"}}},n.plugins={cordova:{device:{selected:!0,registry:"org.apache.cordova.device"},network:{selected:!0,registry:"org.apache.cordova.network-information"},battery:{selected:!1,registry:"org.apache.cordova.battery-status"},accelerometer:{selected:!1,registry:"org.apache.cordova.device-motion"},comprass:{selected:!1,registry:"org.apache.cordova.device-orientation"},geolocation:{selected:!1,registry:"org.apache.cordova.geolocation"},camera:{selected:!0,registry:"org.apache.cordova.camera"},capture:{selected:!1,registry:"org.apache.cordova.media-capture"},media:{selected:!1,registry:"org.apache.cordova.media"},file:{selected:!1,registry:"org.apache.cordova.file"},transfer:{selected:!1,registry:"org.apache.cordova.file-transfer"},dialogs:{selected:!1,registry:"org.apache.cordova.dialogs"},vibration:{selected:!1,registry:"org.apache.cordova.vibration"},contacts:{selected:!1,registry:"org.apache.cordova.contacts"},globalization:{selected:!1,registry:"org.apache.cordova.globalization"},splashscreen:{selected:!1,registry:"org.apache.cordova.splashscreen"},inappbrowser:{selected:!0,registry:"org.apache.cordova.inappbrowser"},console:{selected:!1,registry:"org.apache.cordova.console"}},kapsel:{logon:{selected:!0,registry:"com.sap.mp.cordova.plugins.logon"},appupdate:{selected:!1,registry:"com.sap.mp.cordova.plugins.appupdate"},logger:{selected:!0,registry:"com.sap.mp.cordova.plugins.logger"},settings:{selected:!1,registry:"com.sap.mp.cordova.plugins.settings"},push:{selected:!1,registry:"com.sap.mp.cordova.plugins.push"},encryptedstorage:{selected:!1,registry:"com.sap.mp.cordova.plugins.encryptedstorage"},authproxy:{selected:!0,registry:"com.sap.mp.cordova.plugins.authproxy"},barcode:{selected:!1,registry:"com.sap.mp.cordova.plugins.barcodescanner"},odata:{selected:!0,registry:"com.sap.mp.cordova.plugins.odata"},e2etrace:{selected:!1,registry:"com.sap.mp.cordova.plugins.e2etrace"},corelibs:{selected:!0,registry:"com.sap.mp.cordova.plugins.corelibs"}}},t.context.service.setting.project.setProjectSettings("hybrid",n,e)
})}}}),define("sap.watt.saptoolsets.fiori.project.ui5template/service/SmartTemplateHelper",["sap/watt/lib/lodash/lodash"],function(e){return{_callAjax:function(e,t,n){var r=this,i={type:t,data:null,dataType:n};return Q.sap.ajax(e,i).then(function(e){return e&&e.length>0?e[0]:void 0}).fail(function(e){r.context.service.log.error(e.message)})},writeToI18n:function(t,n,r){var i=[];if(e.isEmpty(n))return null;r||(r="XTIT");for(var o=0;o<n.length;o++)i.push({textType:r,key:n[o],value:n[o]});return this.context.service.translation.updatePropertyKeys(void 0,"i18n",i,t)},createNewViewExtensionEntry:function(e,t,n,r,i,o,a){var s,u=this,c=this.context.service.ui5projecthandler;if(!n||!r){var l=new Error("Missing parameter for ExtensionPointID");throw l.name="missingParamForExtensionPointID",l}var p={extensionType:"sap.ui.viewExtensions",view:t,content:{}};if("SmartFilterBarControlConfigurationExtension"===n)s=n+"|"+r,p.content[s]=i;else if(n.indexOf("Facet")>-1){if(!o){var f=u.context.i18n.getText("i18n","smartTemplateHelper_FacetIdIsNull");return this.context.service.log.error("SmartTemplateHelper",f,["user"]).done(),void 0}s=n+"|"+r+"|"+o,p.content[s]=i}return c.addExtension(e,p.extensionType,p.view,p.content,a).fail(function(e){u._handleOverwriteException(e)})},_handleOverwriteException:function(e){if("ExtensionExistInHandler"===e.name){var t=this.context.i18n.getText("i18n","overwrite_message");throw new Error(t)}throw e},createNewControllerExtensionEntry:function(e,t,n,r){var i=this,o=this.context.service.ui5projecthandler,a={extensionType:"sap.ui.controllerExtensions",view:t,content:{controllerName:n}};return o.addExtension(e,a.extensionType,a.view,a.content,r).fail(function(e){i._handleOverwriteException(e)})},getFacetsPerEntitySet:function(t,n){var r=this,i=[];if(e.isEmpty(n))return i;var o=this.context.service.ui5projecthandler;return o.getHandlerDocument(t).then(function(a){var s=a.getEntity().getParentPath();return o.getDataSources(a).then(function(a){if(a&&a.mainService&&a.mainService.settings){var u=s+"/"+a.mainService.settings.localUri;return r._getFileContent(u).then(function(a){return a?o.getDataSourceAnnotationsByName(t,"mainService").then(function(o){if(o){var u=[],c=[];for(var l in o){var p=s+"/"+o[l].settings.localUri;c.push(l),u.push(r._getFileContent(p))}return Q.all(u).then(function(o){for(var u=0;u<o.length;u++){var l=c[u],p={name:l,content:o[u]};i.push(p)}return r._createMetaModel(a,i).then(function(i){return e.isEmpty(i)?void 0:r._getArrayOfEntitysetsWithFacets(t,i,n,s)})})}return i}):i})}})}).fail(function(e){var t=r.context.i18n.getText("i18n","smartTemplateHelper_FailedGetFacetsMsg");return e&&(t=e.message),r.context.service.log.error("SmartTemplateHelper",t,["user"]).done(),i})},validateOnSelection:function(e,t){var n=this;return this.context.service.ui5projecthandler.getAttribute(e,"sap.ui.generic.app").then(function(e){if(e)return n._searchTemplateInPages(e.pages,t);var r=new Error;throw r.name="TemplateDoesNotExist",r})},_searchTemplateInPages:function(e,t){if(e)for(var n=0;n<e.length;n++)return e[n].component&&e[n].component.name===t?!0:this._searchTemplateInPages(e[n].pages,t);var r=new Error;throw r.name="TemplateDoesNotExist",r},_getArrayOfEntitysetsWithFacets:function(e,t,n,r){var i=this,o=r.indexOf("/",1);return r=o>-1?r.substr(o+1)+"/":"",this.context.service.ui5projecthandler.getI18nPath(e).then(function(o){var a="i18n";if(o){a="smartTemplateLan";var s=sap.watt.getEnv("orion_server");s=s.substr(0,s.length-1);var u=e.getEntity().getBackendData().location+r+o;i.context.i18n.bundles[a]=s+u}for(var c=[],l=[],p=0;p<n.length;p++)c.push(i._getFacetsForEntitySet(t,n[p].name,a));return Q.all(c).then(function(e){for(p=0;p<e.length;p++){var t={name:n[p].name,facets:e[p]};l.push(t)}return l})})},_getFacetsForEntitySet:function(e,t,n){var r,i=[],o=e.getODataEntitySet(t).entityType,a=e.getODataEntityType(o),s=a["com.sap.vocabularies.UI.v1.Facets"];if(s)for(var u=0;u<s.length;u++){var c={};if(s[u].Label.String&&(r=this._getFacetLabel(s[u].Label.String,n)),s[u].RecordType.indexOf("CollectionFacet")>-1)c={facetId:s[u].ID.String,label:r},i.push(c);else if(s[u].RecordType.indexOf("ReferenceFacet")>-1){if(s[u].ID&&s[u].ID.String)c={facetId:s[u].ID.String,label:r};else{var l=s[u].Target.AnnotationPath;l=l.replace("@","").replace("/","::").replace("#","::"),c={facetId:l,label:r}}i.push(c)}}return i},_getFacetLabel:function(e,t){var n="i18n>",r=e.indexOf(n);if(r>-1){var i=e.indexOf("}");e=e.substr(r+n.length,i-r-n.length),e=this.context.i18n.getText(t,e)}return e},_createMetaModel:function(e,t){var n=this;return this.context.service.annotation.mockFiles("",e,t).then(function(){return n.context.service.annotation.getMetaModel("",t).then(function(e){return e}).fail(function(){var e=n.context.i18n.getText("i18n","smartTemplateHelper_MetaModelFailedMsg");n.context.service.log.error("SmartTemplateHelper",e,["user"]).done()}).fin(function(){n.context.service.mockFileLoader.stopMock()})})},_getFileContent:function(e){return this.context.service.filesystem.documentProvider.getDocument(e).then(function(e){return e?e.getContent():void 0})},getEntitySets:function(t,n){var r=this,i=[];return t&&n?r.context.service.ui5projecthandler.getAttribute(t,"sap.ui.generic.app").then(function(t){return t&&t.pages&&r._getEntitySetsFromPage(e.first(t.pages),n,i),i}).fail(function(e){r.context.service.log.error("SmartTemplateHelper",e.message,["user"]).done()}):i},_getEntitySetsFromPage:function(t,n,r){var i=t.component.name.toLowerCase();if(i.indexOf(n.toLowerCase())>-1){var o={name:t.entitySet};r.push(o)}t.pages&&this._getEntitySetsFromPage(e.first(t.pages),n,r)},getAllExtensionPoints:function(t){var n,r=this;return t&&(t.toLowerCase().indexOf("objectpage")>-1?n="/smartTemplateGeneration/ObjectPage/view/Details.view.xml":t.toLowerCase().indexOf("listreport")>-1&&(n="/smartTemplateGeneration/ListReport/view/ListReport.view.xml")),this._callAjax(n,"GET","text").then(function(t){var n=[],i=(new DOMParser).parseFromString(t,"text/xml");try{var o=jQuery(i).xpath("//*:ExtensionPoint")}catch(a){r.context.service.log.error("SmartTemplateHelper",a.message,["user"]).done()}if(!e.isEmpty(o))for(var s=0;s<o.length;s++){var u=o[s],c=u.getAttribute("name"),l=c.indexOf("|");l>-1&&(c=c.substring(0,l)),n.push({name:c})}return n})}}}),define("sap.watt.saptoolsets.fiori.project.ui5template/service/SmartExtension",{onAfterGeneration:function(e){var t=this;return"ui5template.objectpageextension"!==e.params.selectedTemplate.getId()&&"ui5template.listreportextension"!==e.params.selectedTemplate.getId()||!e.params.model.sViewFile?void 0:this.context.service.filesystem.documentProvider.getDocument(e.params.model.sViewFile).then(function(e){return t.context.service.repositorybrowser.setSelection(e,!0)})}}),define("sap.watt.saptoolsets.fiori.project.ui5template/smartExtensions/service/ObjectPageExtensionStep",{getContent:function(){jQuery.sap.require("sap.watt.saptoolsets.fiori.project.ui5template.smartExtensions.ui.wizard.ObjectPageExtensionStep");var e=new sap.watt.saptoolsets.fiori.project.ui5template.smartExtensions.ui.wizard.ObjectPageExtensionStep({context:this.context}),t=this.context.i18n.getText("objectPageExtensionStep_title");return this.context.service.wizard.createWizardStep(e,t,"")}}),define("sap.watt.saptoolsets.fiori.project.uiannotations/service/Annotations",{_sModelFolderName:"model",_CATALOG_ODATA_ABAP:"odata_abap",_sMockServiceURL:"MockServer/Service",_sMockAnnotaionURL:"MockServer/annotations/",_callAjax:function(e,t,n,r){return Q(jQuery.ajax({type:t,url:e,data:n,dataType:r})).then(null,function(t){var n=new Error("Request failed: "+t.statusText+" URI: "+e);throw n.status=t.status,n.statusText=t.statusText,n.responseText=t.responseText,n.responseJSON=t.responseJSON,n})},getAnnotationXML:function(e,t){var n=t,r=[];return t&&e&&e.path&&e.url?(-1==t.indexOf("/destinations")&&(n=t.replace(e.path,e.url)),this._callAjax(n,"GET",null).then(function(e){var t=new XMLSerializer;return jQuery(e).contents().each(function(e,n){r.push(t.serializeToString(n))}),r.join("\n")})):""},isMetaDataContainsAnnotions:function(e){return Q.sap.require("sap/watt/platform/plugin/utils/xml/XmlUtil").then(function(t){for(var n=t.stringToXml(e),r=t.firstElementChild(n).childNodes,i=r.length,o=0;i>o;o++){var a=r[o],s=t.getChildByTagName(a,"Schema");if(s){var u=t.getChildByTagName(s,"Annotations");if(u)return!0}}return!1})},mockFiles:function(e,t,n){var r=[],i=this;if(e||r.push(i.context.service.mockFileLoader.mockFile(i._sMockServiceURL+"/$metadata",t)),n)for(var o=0;o<n.length;o++){var a=n[o].url;if(!a){var s=n[o].name;a=i._sMockAnnotaionURL+s;var u=n[o].content;r.push(i.context.service.mockFileLoader.mockFile(a,u))}}return Q.all(r)},getMetaModel:function(e,t){var n=sap.ui.model.odata.v2.ODataModel,r=[];if(e=e||this._sMockServiceURL,r.push(e+"/$metadata"),t)for(var i=0;i<t.length;i++){var o=t[i].name,a=t[i].url||this._sMockAnnotaionURL+o;r.push(a)}var s=new n(e,{annotationURI:r,json:!0,loadMetadataAsync:!0});return s.getMetaModel?Q(s.getMetaModel().loaded()).then(function(){return s.getMetaModel()}):Q()},getAnnotationsUrls:function(e,t){var n=Q.defer(),r=e.url;e.wattUsage!==this._CATALOG_ODATA_ABAP||e.isFullUrl||(r=e.url+"/IWFND/CATALOGSERVICE;v=2");var i=r+t+"/Annotations",o=[];return this._callAjax(i,"GET",null,"json").then(function(e){return e.d.results&&e.d.results.length>0&&(o=e.d.results),n.resolve(o),o}).fail(function(e){n.reject(e)})}}),define("sap.watt.saptoolsets.fiori.project.uiannotations/service/SelectAnnotationStep",{_step:null,_aExtensionFilters:[],configure:function(e){e.styles&&this.context.service.resource.includeStyles(e.styles).done(),e.repositoryBrowserExtensionFilters.length>0&&(this._aExtensionFilters=e.repositoryBrowserExtensionFilters)},getContent:function(){jQuery.sap.require("sap.watt.saptoolsets.fiori.project.plugin.uiannotations.ui.wizard.AnnotationSelectionWizardStep"),this._step=new sap.watt.saptoolsets.fiori.project.plugin.uiannotations.ui.wizard.AnnotationSelectionWizardStep({context:this.context,extensionFilters:this._aExtensionFilters});var e=this.context.i18n.getText("annotationSelectionWizardStep_title_label");return this.context.service.wizard.createWizardStep(this._step,e,"")}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/manager/ComponentManager",[],function(){var e=function(e){var t=this;this.customizationFileName="ComponentCustomizing.json",this.customizingJson=null;var n=function(e){if(e.fiori.extensionCommon.extensionFilePath){var t=e.fiori.extensionCommon.extensionFilePath.replace(e.extensionResourceLocationPath,"");return t=e.extensionProjectNamespace+"."+t,t=t.replace(/\//gm,".")}return""};this.getResourceOutputPath=function(e,t){var n=null,r=e.fiori.extensionCommon.resourceLocationPath,i=e.fiori.extensionCommon.resourceName;if(!i)return r+t;var o=e.fiori.extensionCommon.resourceSuffix;return n=o?e.fiori.extensionCommon.extensionFilePath+o:e.fiori.extensionCommon.extensionFilePath},this.onBeforeTemplateGenerate=function(r,i){return e.service.extensionproject.getExtensionRevision(i).then(function(){return i.fiori.extensionCommon.extensionResourceId=n(i),e.service.filesystem.documentProvider.getDocument(i.extensionProjectPath).then(function(n){return e.service.ui5projecthandler.getHandlerDocument(n).then(function(o){return i.extensionHandlerPath=o.getEntity().getFullPath(),e.service.ui5projecthandler.getAllExtensions(n).then(function(e){return t.customizingJson=e,[r,i]})})})})},this.getFileContentFromZip=function(e){var n="{}",r=e.files[t.customizationFileName];return r&&(n=r.asText()),n},this.onAfterGenerateCommon=function(e,t){t.extensionShouldOpenFiles=!0,r(e,t)},this.onAfterGenerateUpdates=function(e,n){var r=t.getFileContentFromZip(e),i=JSON.parse(r),o=Object.keys(i)[0];if(t.customizingJson[o])if(n.fiori.extensionCommon.resourceId){var a=Object.keys(i[o])[0];if(t.customizingJson[o][a]){if("string"!=typeof i[o][a]){var s=Object.keys(i[o][a])[0];s&&(t.customizingJson[o][a][s]=i[o][a][s])}}else t.customizingJson[o][a]=i[o][a]}else t.customizingJson[o]=i[o];else t.customizingJson[o]=i[o];return t.onAfterGenerateCommon(e,n),o},this.onAfterGenerate=function(n,r){var i=this.onAfterGenerateUpdates(n,r);return e.service.filesystem.documentProvider.getDocument(r.extensionProjectPath).then(function(o){i||(i=r.fiori.extensionCommon.customizationId);var a=r.fiori.extensionCommon.resourceId,s=t.customizingJson[i];return e.service.ui5projecthandler.addExtension(o,i,a,s[a],!0).then(function(){return[n,r]})})};var r=function(e,n){e.remove(t.customizationFileName);for(file in e.files){var r=t.getResourceOutputPath(n,file);e.file(r,e.files[file].asBinary()),e.remove(e.files[file].name)}}};return e.generatedEventHandler=function(e,t,n){var r=e.params.model;return r.extensionShouldOpenFiles?t.isExtensibilityOpen().then(function(e){return e?void 0:n.openDocument(r.extensionProjectPath,r.fiori.extensionCommon,r.fiori.extensionCommon.resourceId,r.fiori.extensionCommon.extensionId,r.extensionResourceLocationPath)}).fail(function(){return Q()}):Q()},e.prototype.initializeComponentModel=function(e,t){e.fiori||(e.fiori={}),e.fiori.extensionCommon||(e.fiori.extensionCommon={});var n=Object.keys(t),r=n[0],i=Object.keys(t[r]);if(i.forEach(function(n){e.fiori[r][n]=t[r][n]}),n.length>1){var o=n[1];e.fiori[o]=t[o]}},e}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/constants/ComponentConstants",{constants:{components:{initModel:{Common:{fiori:{extensionCommon:{}}},ExtendController:{extensionCommon:{customizationId:"sap.ui.controllerExtensions",resourceSuffix:".controller.js",resourceTypeName:"controllerName"},extendController:{parentMethodHeaders:{},resourceSuffix:{},parentControllerContent:{}}},ExtendView:{extensionCommon:{customizationId:"sap.ui.viewExtensions",resourceSuffix:".fragment.xml",resourceTypeName:"fragmentName"},extendView:{}},HideControl:{extensionCommon:{customizationId:"sap.ui.viewModifications"}},ReplaceView:{extensionCommon:{customizationId:"sap.ui.viewReplacements",resourceSuffix:".view.xml",resourceTypeName:"viewName"},replaceView:{parentAttributesPrefix:{},parentAttributesSuffix:{},parentViewContent:{}}}}}}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/steps/WizardStepContentHelper",[],function(){var e=function(e,t,r,i,o,a,s){var u=e.service.parentproject,c=[];t.resources=[],c.push(u.getResources(t,r)),s&&c.push(u.getResources(t,s)),Q.all(c).spread(function(){var e=arguments[0];arguments.length>1&&$.merge(e,arguments[1]),t.resources.length>0&&(t.resources=[]);for(var r=0;r<e.length;r++)t.resources.push(e[r]);var s=n(e,i,a);s.isValid===!0&&i.fireChange({selectedItem:i.getItems()[0]}),o.fireValidation(s)}).fail(function(e){var t={isValid:!1,message:e.message||e};o.fireValidation(t)}).done()},t=function(e,t,n){void 0===e.fiori&&(e.fiori={}),void 0===e.fiori.extensionCommon&&(e.fiori.extensionCommon={}),e.fiori.extensionCommon.resourceName=t.name,e.fiori.extensionCommon.selectedDocumentPath=t.path,e.fiori.extensionCommon.resourceId=t.id;var r=e.extensionResourceLocationPath;e.fiori.extensionCommon.resourceLocationPath=r+t.resourceLocationPath,void 0!==n&&(e.fiori.extensionCommon.extensionId=n.name,n.args&&(e.fiori.extensionCommon.extensionArgs=n.args))},n=function(e,t,n){t.getItems().length>0&&t.removeAllItems();var r,i=0;e.forEach(function(e){var n=e;void 0!==e.name&&(n=e.name);var o=new sap.ui.core.ListItem({text:n,key:i++,data:e});r=new sap.ui.model.json.JSONModel,r.setData(e),o.setModel(r),t.addItem(o)});var o={isValid:!1,message:n};return t.getItems().length>0&&(o={isValid:!0}),o};return{updateModelWithSelectedResource:t,buildResourcesDropdownbox:e,fillDropdownBox:n}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/util/ExtensionHook",["sap/watt/lib/lodash/lodash","sap/watt/lib/orion/javascript/esprima/esprimaVisitor","sap/watt/lib/orion/ui/esprima/esprima","sap/watt/lib/orion/ui/escodegen/escodegen.browser"],function(e,t){function n(e,t){if(e.type===esprima.Syntax.CallExpression&&e.callee&&e.callee.property&&e.callee.property.name&&0===e.callee.property.name.indexOf("extHook")&&e.callee.object&&e.callee.object.type===esprima.Syntax.ThisExpression){var n=e.callee.property.name,r=[];e.arguments&&jQuery.each(e.arguments,function(e,t){var n=a(t);r.push(n)}),t.hooksObj[n]=r}return!0}function r(e,t){return e.type===esprima.Syntax.ObjectExpression&&e.properties&&e.properties.length>0&&jQuery.each(e.properties,function(e,n){return n.key&&n.key.name===t.hookName?(t.isHookExtended=!0,!1):void 0}),!0}function i(e,t){return e.type===esprima.Syntax.ObjectExpression&&e.properties&&jQuery.each(e.properties,function(n,r){return r.key&&r.key.name===t.hookName?(e.properties.splice(n,1),!1):void 0}),!0}function o(e,t){if(e.type===esprima.Syntax.ObjectExpression&&e.properties){var n="var dummy = {"+t.hook+"};",r=esprima.parse(n,{range:!0,tokens:!0,comment:!0});r=escodegen.attachComments(r,r.comments,r.tokens);var i=r.body[0].declarations[0].init.properties[0];return e.properties.push(i),!1}return!0}var a=function(e){return e?e.type===esprima.Syntax.MemberExpression?a(e.object)+"_"+e.property.name:e.type===esprima.Syntax.Identifier?e.name:e.type===esprima.Syntax.ThisExpression?"that":"":""},s=function(r){var i=esprima.parse(r,{}),o={hooksObj:{}};t.visit(i,o,n);var a=e.map(o.hooksObj,function(e,t){return{name:t,args:e}});return a=e.sortBy(a,"name")},u=function(e,n){if(!n)return!1;var i=esprima.parse(n,{}),o={hookName:e,isHookExtended:!1};return t.visit(i,o,r),o.isHookExtended},c=function(e,n){var r=esprima.parse(n,{range:!0,tokens:!0,comment:!0});r=escodegen.attachComments(r,r.comments,r.tokens);var o={hookName:e};t.visit(r,o,i);var a=escodegen.generate(r,{comment:!0,format:{quotes:"double",indent:{style:"	"}}});return a},l=function(e,n){var r=esprima.parse(n,{range:!0,tokens:!0,comment:!0});r=escodegen.attachComments(r,r.comments,r.tokens);var i={hook:e};t.visit(r,i,o);var a=escodegen.generate(r,{comment:!0,format:{quotes:"double",indent:{style:"	"}}});return a};return{getHooks:s,isHookExtended:u,removeHook:c,addHook:l,_getArgumentString:a}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/util/ExtendUtil",["../../manager/ComponentManager","../../constants/ComponentConstants","../../ui/steps/WizardStepContentHelper","../../util/ExtensionHook","sap/watt/lib/lodash/lodash"],function(e,t,n,r,i){var o="controller",a="view",s="fragment",u="hook",c="extensionpoint",l={REPLACE_VIEW_WITH_EMPTY:"Replace View with Empty",REPLACE_VIEW_WITH_COPY:"Replace View with Copy",HIDE_CONTROL:"Hide UI Control",EXTEND_VIEW:"Extend Extension Point",EXTEND_CONTROLLER_WITH_EMPTY:"Extend Controller with Empty",EXTEND_CONTROLLER_WITH_COPY:"Extend Controller with Copy",EXTEND_CONTROLLER_HOOK:"Extend Controller Hook"},p=function(r,i,o,a){switch(o.name){case l.EXTEND_CONTROLLER_WITH_COPY:o.name="Copy of the parent controller";break;case l.EXTEND_CONTROLLER_WITH_EMPTY:o.name="Empty controller"}var s=new e(a);s.initializeComponentModel(i,t.constants.components.initModel.ExtendController),n.updateModelWithSelectedResource(i,r,o)},f=function(r,i,o,a){var s=new e(a);s.initializeComponentModel(i,t.constants.components.initModel.ExtendController),n.updateModelWithSelectedResource(i,r,o)},d=function(r,i,o,a){switch(o.name){case l.REPLACE_VIEW_WITH_COPY:o.name="Copy of the parent view";break;case l.REPLACE_VIEW_WITH_EMPTY:o.name="Empty view"}var s=new e(a);s.initializeComponentModel(i,t.constants.components.initModel.ReplaceView),n.updateModelWithSelectedResource(i,r,o)},h=function(t,r,i,o,a){var s=new e(a);s.initializeComponentModel(i,r);var u={name:t.resourceInfo.name,path:t.resourceInfo.path,resourceLocationPath:t.resourceInfo.resourceLocationPath,id:t.resourceInfo.id};n.updateModelWithSelectedResource(i,u,o)},m=function(e,t,n,r){return r.service.generation.generate(n.extensionProjectPath,t,n,!0,e)},g=function(e,t,n,r){var i=e[t];if(i){var o=i[n];if(o){if("sap.ui.viewReplacements"===t||"sap.ui.controllerExtensions"===t)return!0;var a=o[r];if("sap.ui.viewModifications"===t)return a&&a.visible===!1;if(a)return!0}}return!1},v=function(e,t,n){var r=e.extensionId,i=e.customizationId,o=e.resourceInfo.originalId;return o||(o=e.resourceInfo.id),n.service.ui5projecthandler.removeExtension(t,i,o,r).then(function(){return n.service.ui5projecthandler.getAllExtensions(t)})},y=function(e,n,r,i,o,a){var s=e.type,u=this,c=new sap.ui.model.json.JSONModel;c.setData({}),c.oData=r,c.oData.extensionProjectPath=n.getEntity().getFullPath(),c.oData.extensionProjectName=n.getEntity().getName();var l=e.resourceInfo,g={};return Q.all([a.service.extensionproject.getResourceLocation(c.oData.extensionProjectPath),a.service.ui5projecthandler.getAppNamespace(n)]).spread(function(r,v){switch(c.oData.extensionResourceLocationPath=r,c.oData.extensionProjectNamespace=v,s){case u.EXT_TYPE_VIEW:g.name=o,d(l,c.oData,g,a);break;case u.EXT_TYPE_CONTROLLER:g.name=o,p(l,c.oData,g,a);break;case u.EXT_TYPE_HOOK:g.name=e.attributes.id,c.oData.fiori||(c.oData.fiori={},c.oData.fiori.extensionCommon={}),c.oData.fiori.extensionCommon.originalId=l.originalId,c.oData.fiori.extensionCommon.extensionArgs=e.extensionHookArgs,f(l,c.oData,g,a);break;case u.EXT_TYPE_EXT_POINT:var y=t.constants.components.initModel.ExtendView;g.name=e.attributes.name,h(e,y,c.oData,g,a);break;default:if(e.isExtendable===!0&&e.isVisible===!0){var y=t.constants.components.initModel.HideControl;g.name=e.attributes.id,h(e,y,c.oData,g,a)}}return c.oData.selectedTemplate=i,m(n,i,c.oData,a)})},_=function(e,n,r,i,o){var a,s=n.getBindingContext().getObject();switch(s.type){case this.EXT_TYPE_EXT_POINT:a=t.constants.components.initModel.ExtendView.extensionCommon;break;case this.EXT_TYPE_VIEW:a=t.constants.components.initModel.ReplaceView.extensionCommon;break;default:return Q.reject(i.i18n.getText("i18n","VisualExt_WrongNodeForLayoutEditor"))}return i.service.extensionproject.openLayoutEditor(e,s,a,r,i).then(function(){i.service.usagemonitoring.report("extensibility","open_layout_editor","open_layout_editor_"+o).done()}).fail(function(e){i.service.usernotification.alert(e.message).done(),i.service.usagemonitoring.report("extensibility","open_layout_editor","error_while_open_layout_editor_"+o).done()})},x=function(e,n,r,i){var o,a,s,u,c=n.getBindingContext().getObject().type,l=n.getBindingContext().getObject();switch(c){case this.EXT_TYPE_EXT_POINT:s=t.constants.components.initModel.ExtendView.extensionCommon,o=l.resourceInfo.id,a=l.attributes.name;break;case this.EXT_TYPE_VIEW:s=t.constants.components.initModel.ReplaceView.extensionCommon,u=l.resourceInfo.originalId,o=u||l.resourceInfo.id;break;case this.EXT_TYPE_CONTROLLER:case this.EXT_TYPE_HOOK:s=t.constants.components.initModel.ExtendController.extensionCommon,u=l.resourceInfo.originalId,o=u||l.resourceInfo.id;break;default:l.isExtended===!0&&l.isVisible===!0&&(s=t.constants.components.initModel.HideControl.extensionCommon,o=l.resourceInfo.id,a=l.attributes.id)}return i.service.extensionproject.openDocument(e,s,o,a,r).fail(function(e){i.service.usernotification.alert(e.message).done()})},b=function(e,t,n){var r,i=e.getBindingContext().getObject(),o=i.resourceInfo.originalName||i.resourceInfo.name;switch(i.resourceInfo.type){case this.EXT_TYPE_CONTROLLER:r=t.extensibility.controllers[o];break;case this.EXT_TYPE_VIEW:r=t.extensibility.views[o];break;case this.EXT_TYPE_FRAGMENT:r=t.extensibility.fragments[o];break;default:r=t.extensibility.component}var a="file",s=t.extensibility.system,u=t.extensibility.type;return n.service.parentproject.getDocument(r,a,s,u,!0).then(function(e){if(e)return"Workspace"===u&&n.service.repositorybrowser.setSelection(e,!0).done(),n.service.document.open(e);var t=n.i18n.getText("i18n","ExtUtil_DocNotFound");n.service.usernotification.alert(t).done()}).fail(function(e){n.service.usernotification.alert(e.message).done()})},w=function(e){return e?e.type!==this.EXT_TYPE_CONTROLLER&&e.type!==this.EXT_TYPE_VIEW&&e.type!==this.EXT_TYPE_FRAGMENT&&e.type!==this.EXT_TYPE_HOOK?e.isExtended===!0&&!e.resourceInfo.newId:e.isExtended===!0:!1},S=function(e,t,n,r,i){var o=e.replace(t,"");return""!==i&&(i="/"+i.replace("/","")),o=n+i+o.replace(/\./g,"/")+r},E=function(e,n,i,o){var a=i.getEntity(),s=this;return o.service.ui5projecthandler.getAppNamespace(i).then(function(i){var u=e.resourceInfo.newId;u||(u=e.resourceInfo.id);var c=s.getCustomResourceFilePath(u,i,a.getFullPath(),t.constants.components.initModel.ExtendController.extensionCommon.resourceSuffix,n.extensionResourceLocationPath);return o.service.filesystem.documentProvider.getDocument(c).then(function(t){return t.getContent().then(function(n){var i=r.removeHook(e.attributes.id,n),a=o.i18n.getText("i18n","VisualExt_HookRemovalFailed");return i===n?Q.reject(a):o.service.beautifierProcessor.beautify(i,"js").then(function(e){return t.setContent(e).then(function(){return t.save()})}).fail(function(e){o.service.log.error("ExtendUtil",a+" Error: "+e.message,["system"]).done(),o.service.usernotification.warning(a).done()})})})})},C=function(e,n,r){var i=n.extensionProjectNamespace,o=this.getCustomResourceFilePath(e,i,n.extensionProjectPath,t.constants.components.initModel.ExtendController.extensionCommon.resourceSuffix,n.extensionResourceLocationPath);return r.service.filesystem.documentProvider.getDocument(o).then(function(e){return e})},T=function(e){var t=Q.defer(),n={},r=sap.watt.getEnv("context_root"),o=new sap.ui.model.odata.ODataModel(r+"fioriappslibrary",!0);return o.read("Apps?$filter=BSPName eq '"+e+"'",null,null,!0,function(e,r){if(r.data.results.length>0){var a=r.data.results[0].appId;n.url=r.data.results[0].ExtensibilityDocumentationLink,o.read("Apps('"+a+"')/Extensions",null,null,!0,function(e,r){n.map={},i.forEach(r.data.results,function(e){n.map[e.File+"."+e.Name]=e}),t.resolve(n)},function(){t.reject()})}else t.reject()},function(){t.reject()}),t.promise},P=function(e,t){if(!t){var n=e.i18n.getText("i18n","ExtendUtil_badInputForGetRunConfiguration");return e.service.log.error(e.i18n.getText("i18n","Extension_LogTitle"),n,["system"]).done(),Q(null)}return e.service.setting.user.get(e.service.run,t).then(function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t];if(n&&n._metadata&&n._metadata.runnerId&&"webapprunner"===n._metadata.runnerId){var r=new URI("");if(n.urlParameters)for(var i=0;i<n.urlParameters.length;i++){var o=n.urlParameters[i];o.paramActive&&r.addSearch(o.paramName,o.paramValue)}return n.hashParameter&&r.hash(n.hashParameter),r}}return null})};return{EXT_TYPE_CONTROLLER:o,EXT_TYPE_VIEW:a,EXT_TYPE_FRAGMENT:s,EXT_TYPE_HOOK:u,EXT_TYPE_EXT_POINT:c,EXTENSION_TYPES:l,isExtended:g,removeExtension:v,extendProject:y,openLayoutEditor:_,openExtendedDocument:x,openParentDocument:b,isExtendedByNode:w,removeHookExtension:E,getCustomControllerDocument:C,getCustomResourceFilePath:S,getFioriAppExtensionsDocumentation:T,getRunConfigurationInfo:P}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/command/RemoveExtension",["../util/ExtendUtil"],function(e){var t=function(){return this.context.service.uicontent.getFocusElement().then(function(t){if(!t)return!1;var n=t.type;return n===e.EXT_TYPE_VIEW||n===e.EXT_TYPE_CONTROLLER?!1:e.isExtendedByNode(t)})},n=function(){return!0},r=function(){return this.context.service.uicontent.removeExtensionFromSelectedElement()};return{execute:r,isAvailable:t,isEnabled:n}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/command/ExtendEmptyController",[],function(){var e=function(){var e=this;return this.context.service.uicontent.getExtensionTypes().then(function(t){return e.context.service.uicontent.isSelectedElementExtensibleForType(t.EXTEND_CONTROLLER_WITH_EMPTY)})},t=function(){return!0},n=function(){var e=this;return this.context.service.uicontent.getExtensionTypes().then(function(t){return e.context.service.uicontent.extendSelectedElement(t.EXTEND_CONTROLLER_WITH_EMPTY)})};return{execute:n,isAvailable:e,isEnabled:t}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/command/ExtendParentController",[],function(){var e=function(){var e=this;return this.context.service.uicontent.getExtensionTypes().then(function(t){return e.context.service.uicontent.isSelectedElementExtensibleForType(t.EXTEND_CONTROLLER_WITH_COPY)})},t=function(){return!0},n=function(){var e=this;return this.context.service.uicontent.getExtensionTypes().then(function(t){return e.context.service.uicontent.extendSelectedElement(t.EXTEND_CONTROLLER_WITH_COPY)})};return{execute:n,isAvailable:e,isEnabled:t}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/command/ExtendHook",[],function(){var e=function(){var e=this;return this.context.service.uicontent.getExtensionTypes().then(function(t){return e.context.service.uicontent.isSelectedElementExtensibleForType(t.EXTEND_CONTROLLER_HOOK)})},t=function(){return!0},n=function(){var e=this;return this.context.service.uicontent.getExtensionTypes().then(function(t){return e.context.service.uicontent.extendSelectedElement(t.EXTEND_CONTROLLER_HOOK)})};return{execute:n,isAvailable:e,isEnabled:t}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/command/HideControl",[],function(){var e=function(){var e=this;return this.context.service.uicontent.getFocusElement().then(function(t){if(!t){var n=e.context.i18n.getText("i18n","VisualExt_ElementNotFound");e.context.service.usernotification.info(n).done()}return e.context.service.uicontent.getExtensionTypes().then(function(t){return e.context.service.uicontent.isSelectedElementExtensibleForType(t.HIDE_CONTROL)})})},t=function(){return!0},n=function(){var e=this;return this.context.service.uicontent.getExtensionTypes().then(function(t){return e.context.service.uicontent.extendSelectedElement(t.HIDE_CONTROL)})};return{execute:n,isAvailable:e,isEnabled:t}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/command/ExtendView",[],function(){var e=function(){var e=this;return this.context.service.uicontent.getExtensionTypes().then(function(t){return e.context.service.uicontent.isSelectedElementExtensibleForType(t.EXTEND_VIEW)})},t=function(){return!0},n=function(){var e=this;return this.context.service.uicontent.getExtensionTypes().then(function(t){return e.context.service.uicontent.extendSelectedElement(t.EXTEND_VIEW)})};return{execute:n,isAvailable:e,isEnabled:t}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/command/ReplaceEmptyView",[],function(){var e=function(){var e=this;return this.context.service.uicontent.getExtensionTypes().then(function(t){return e.context.service.uicontent.isSelectedElementExtensibleForType(t.REPLACE_VIEW_WITH_EMPTY)})},t=function(){return!0},n=function(){var e=this;return this.context.service.uicontent.getExtensionTypes().then(function(t){return e.context.service.uicontent.extendSelectedElement(t.REPLACE_VIEW_WITH_EMPTY)})};return{execute:n,isAvailable:e,isEnabled:t}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/command/ReplaceParentView",[],function(){var e=function(){var e=this;return this.context.service.uicontent.getExtensionTypes().then(function(t){return e.context.service.uicontent.isSelectedElementExtensibleForType(t.REPLACE_VIEW_WITH_COPY)})},t=function(){return!0},n=function(){var e=this;return this.context.service.uicontent.getExtensionTypes().then(function(t){return e.context.service.uicontent.extendSelectedElement(t.REPLACE_VIEW_WITH_COPY)})};return{execute:n,isAvailable:e,isEnabled:t}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/command/GoToCode",[],function(){var e=function(){return this.context.service.uicontent.getFocusElement().then(function(e){return e?e.isExtended===!0:!1})},t=function(){return!0},n=function(){return this.context.service.uicontent.openExtensionCodeOfSelectedElement(!1)};return{execute:n,isAvailable:e,isEnabled:t}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/command/GoToParentCode",[],function(){var e=function(){return!0
},t=function(){return this.context.service.uicontent.getFocusElement().then(function(e){return e?e.isRoot!==!0:!1})},n=function(){return this.context.service.uicontent.openOriginalCodeOfSelectedElement()};return{execute:n,isAvailable:e,isEnabled:t}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/command/LayoutEditor",["../util/ExtendUtil"],function(e){var t=function(){return this.context.service.uicontent.getFocusElement().then(function(t){return t?(t.type===e.EXT_TYPE_VIEW||t.type===e.EXT_TYPE_EXT_POINT)&&t.isExtended===!0:!1})},n=function(){return!0},r=function(){return this.context.service.uicontent.openExtensionCodeOfSelectedElement(!0)};return{execute:r,isAvailable:t,isEnabled:n}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/command/CreateExtension",{execute:function(){var e=this;return e.context.service.projectType.getProjectTypes().then(function(t){if(sap.watt.getEnv("internal"))for(var n=0;n<t.length;n++)if("sap.watt.saptoolsets.fiori.project.ui5template.smartProject"===t[n].id)return e.context.service.selection.getSelection().then(function(t){return t[0].document.getProject().then(function(t){return Q.sap.require("sap.watt.ideplatform.generationwizard/ui/ComponentGenerationWizard").then(function(n){return n.openComponentWizardUI(e.context,t,"smart_extension")})})});return Q.sap.require("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/wizard/ExtensionWizard").then(function(t){t.openExtensionWizardUI(e.context)})})},isAvailable:function(){return this.context.service.selection.assertNotEmpty()},isEnabled:function(){return this.context.service.selection.getSelection().then(function(e){return!e[0].document.getEntity().isRoot()})}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/command/CreateExtensionProject",{execute:function(){var e=this;return Q.sap.require("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/wizard/ExtensionProjectWizard").then(function(t){t.openGenerationWizardUI(e.context)})},isAvailable:function(){return!0},isEnabled:function(){return!0}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/command/VisualizeProject",[],function(){var e=null,t=null,n=null,r=function(){return n.context.service.uicontent.openVisualExt(n.context,e,t,!1)},i=function(){return!0},o=function(){var e=this.context.service.selection;return n=this,e.assertNotEmpty().then(function(e){var t=e[0].document;return n.context.service.uicontent.isExtensibilityOpen().then(function(e){return e?!1:a(t)})})},a=function(r){return r?r.getProject().then(function(r){var i=r.getEntity().getFullPath();return n.context.service.extensionproject.getExtensibilityModel(i).then(function(n){return!n.extensibility||jQuery.isEmptyObject(n.extensibility.views)||jQuery.isEmptyObject(n.extensibility.controllers)?!1:(t=n,e=r,!0)}).fail(function(){return!1})}).fail(function(){return!1}):!1};return{execute:r,isAvailable:i,isEnabled:o}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/command/ImportFromBSP",{execute:function(){var e=this;return Q.sap.require("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/dialogs/ImportFromBSPDialog").then(function(t){t.openRemoteDialog(e.context)})}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/command/ImportFromBSPContextMenu",{execute:function(){var e=this;return Q.sap.require("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/dialogs/ImportFromBSPDialog").then(function(t){t.openRemoteDialog(e.context)})},isAvailable:function(){return this.context.service.repositorybrowserUtils.isSingleRootSelection()}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/command/VisualizeProjectWithMock",[],function(){var e=null,t=null,n=null,r=function(){return this.context.service.metadataHandler.getMetadataPath(e).then(function(r){return e.objectExists(r).then(function(i){return i?n.context.service.uicontent.openVisualExt(n.context,e,t,!0):(n.context.service.usernotification.alert(n.context.i18n.getText("i18n","msg_mock_model_missing",[r])).done(),void 0)})})},i=function(){return!0},o=function(){var e=this.context.service.selection;return n=this,e.assertNotEmpty().then(function(e){var t=e[0].document;return n.context.service.uicontent.isExtensibilityOpen().then(function(e){return e?!1:a(t)})})},a=function(r){return r?r.getProject().then(function(r){var i=r.getEntity().getFullPath();return n.context.service.extensionproject.getExtensibilityModel(i).then(function(n){return!n.extensibility||jQuery.isEmptyObject(n.extensibility.views)||jQuery.isEmptyObject(n.extensibility.controllers)?!1:(t=n,e=r,!0)}).fail(function(){return!1})}).fail(function(){return!1}):!1};return{execute:r,isAvailable:i,isEnabled:o}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/contentProvider/TreeContentProvider",[],function(){var e=function(e){var t=null;this.getTreeNodes=function(r,i,o){if(null===t){var a=i.extensibility.type;return e.service.extensionproject.getResourceLocation(r).then(function(t){var s=[];return i.extensionResourceLocationPath=t,e.service.ui5projecthandler.getAllExtensions(o).then(function(u){return e.service.ui5projecthandler.getAppNamespace(o).then(function(e){var o=n(i,a,"views",r,t,u,e);s.push(o);var c=n(i,a,"controllers",r,t,u,e);s.push(c);var l=n(i,a,"fragments",r,t,u,e);return s.push(l),Q.all(s).spread(function(){var e=[],t=arguments[0];e=e.concat(t);var n=arguments[1];e=e.concat(n);var r=arguments[2];return e=e.concat(r)})})})})}return t};var n=function(t,n,i,o,a,s,u){return e.service.parentproject.getResources(t,i).then(function(e){var c=[],l="view";"controllers"===i&&(l="controller"),"fragments"===i&&(l="fragment");for(var p=[],f=0;f<e.length;f++){var d=e[f],h=r(o,a,d,n,t,l,s,u);p.push(h)}return Q.all(p).spread(function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];c=c.concat(t)}return c}).fail(function(){return[]})}).fail(function(){return[]})},r=function(t,n,r,i,o,a,s,u){var c=null;switch(a){case"controller":c=e.service.parentproject.getControllerInfo(r,i,o.extensibility.system);break;case"view":c=e.service.parentproject.getViewInfo(r,i,o.extensibility.system);break;case"fragment":c=e.service.parentproject.getFragmentInfo(r,i,o.extensibility.system)}return c.then(function(r){return e.service.extensionproject.getExtendedResourceInfo(t,n,r,a,s,u).then(function(e){return e.name?(e.hooks=r.hooks,e.resourceLocationPath=n+r.resourceLocationPath,e):r})})}};return e}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/outline/ExtensionProjectTree",["../contentProvider/TreeContentProvider","sap/watt/platform/plugin/utils/xml/XmlUtil","../util/ExtendUtil","../../util/ExtensionHook","sap/watt/lib/lodash/lodash"],function(e,t,n,r,i){var o=function(o,a,s,u){jQuery.sap.require("sap.ui.core.IconPool");var c,l=this,p=new e(o),f=a.getEntity().getFullPath();this._mFragmentToView=null,this._aResourcesInfo=null,this._tree=null,this._treeSelectionHandlers=[],this._treeRightClickHandlers=[],this._hoverNode=null,this._getExtensionsFromExtensionProject=function(){return o.service.ui5projecthandler.getAllExtensions(a)},this._getParentResourcesInfo=function(){return p.getTreeNodes(f,s,a,o)},this.createContent=function(){var e=this._createUIContent();return l._getExtensionsFromExtensionProject().then(function(t){return c=t,l._getParentResourcesInfo().then(function(t){l._aResourcesInfo=t,l._tree.removeAllNodes();var n=l._createTreeModel();l._tree.setModel(n);for(var r=E(),i=0;i<r.length;i++)r[i].setExpanded(!1);return w(),e})})};var d=function(){var e=new sap.ui.commons.Label({text:o.i18n.getText("i18n","VisualExt_ApplicationOutline"),width:"100%",layoutData:new sap.ui.layout.GridData({span:"L11 M11 S11",linebreak:!0})}).addStyleClass("previewTitleLabel"),t=new sap.ui.commons.DropdownBox("filterOptionsDropdownBox",{value:{path:"value",type:new sap.ui.model.type.String},width:"100%",layoutData:new sap.ui.layout.GridData({span:"L11 M11 S11",linebreak:!0}),items:[new sap.ui.core.ListItem("showAllElements",{text:o.i18n.getText("i18n","VisualExt_AllItems")}),new sap.ui.core.ListItem("showExtendedElements",{text:o.i18n.getText("i18n","VisualExt_ExtendedItems")}),new sap.ui.core.ListItem("showExtensibleElements",{text:o.i18n.getText("i18n","VisualExt_ExtendableItems")}),new sap.ui.core.ListItem("showExtensionPoints",{text:o.i18n.getText("i18n","VisualExt_ExtensionPoints")})]}).addStyleClass("flatControlSmall");t.attachChange(function(e){var t=e.getParameter("selectedItem").getText(),r=l._tree.getBinding("nodes"),i=[];switch(t){case o.i18n.getText("i18n","VisualExt_ExtendedItems"):i.push(new sap.ui.model.Filter("isExtended",sap.ui.model.FilterOperator.EQ,!0));break;case o.i18n.getText("i18n","VisualExt_ExtendableItems"):i.push(new sap.ui.model.Filter("isExtendable",sap.ui.model.FilterOperator.EQ,!0));break;case o.i18n.getText("i18n","VisualExt_ExtensionPoints"):i.push(new sap.ui.model.Filter("type",sap.ui.model.FilterOperator.EQ,n.EXT_TYPE_EXT_POINT));break;case o.i18n.getText("i18n","VisualExt_AllItems"):}r.filter(i),l._handleSelectionAfterFilter()});var r=sap.ui.getCore().byId("filterGridLayout");return void 0===r&&(r=new sap.ui.layout.Grid({layoutData:new sap.ui.layout.GridData({span:"L11 M11 S11",linebreak:!0}),content:[e,t]})),r.setVSpacing(0),r},h=function(){var e=new sap.ui.commons.Tree({layoutData:new sap.ui.layout.GridData({span:"L11 M11 S11",linebreak:!0}),width:"100%",height:"100%",showHeader:!1,showHeaderIcons:!1,showHorizontalScrollbar:!0,selectionMode:sap.ui.commons.TreeSelectionMode.Single}).bindNodes({path:"/",template:l._getTreeNodeTemplate(),parameters:{arrayNames:["childTreeNodeModels"]}});return e.attachSelect(g,l),e.attachBrowserEvent("contextmenu",m,l),l._tree=e,e},m=function(e){e.preventDefault();for(var t=e.target;t&&!t.attributes.id;)t=t.parentElement;if(t&&t.attributes.id){var n=t.attributes.id.value,r=sap.ui.getCore().byId(n);if(r){l._tree.setSelection(r);var o=r.getBindingContext().getObject();o.isRoot||i.forEach(this._treeRightClickHandlers,function(t){t(e,r)})}}},g=function(e){var t=e.getParameters().node;i.forEach(this._treeSelectionHandlers,function(n){n(e,t)})};this._createUIContent=function(){return{top:d(),middle:h()}},this._getDocumentationTooltip=function(e,t,n){var r;if(e&&e.type){var i="";switch(e.originalName?i=e.originalName:e.name&&(i=e.name),e.type){case"controller":i+=".controller.js";break;case"view":i+=".view.xml";break;case"fragment":i+=".fragment.xml"}r=i+"."+(t?t:"")}if(u&&r&&u[r]){var a=""===u[r].Description?o.i18n.getText("i18n","ExtDocumentation_NotAvailable"):u[r].Description;return n+": "+a}return null};var v=function(e,t){var r,i,o=e.customizationId,a=e.type;if(a===n.EXT_TYPE_VIEW){if(t&&c[o]&&(i=c[o][t].viewName))return r=i.substr(i.lastIndexOf(".")+1)}else if(a===n.EXT_TYPE_CONTROLLER){if(t&&c[o]&&(i=c[o][t].controllerName))return r=i.substr(i.lastIndexOf(".")+1)}else if(a===n.EXT_TYPE_EXT_POINT&&(i=c[o][t][e.extensionId].fragmentName))return r=i.substr(i.lastIndexOf(".")+1)},y=function(e,t){var r,i=e.type,o=e.resourceInfo.resourceLocationPath;o=o.replace(/%2f/g,"/");var a=v(e,t);return i===n.EXT_TYPE_VIEW?r=o+a+".view.xml":i===n.EXT_TYPE_CONTROLLER?r=o+a+".controller.js":i===n.EXT_TYPE_EXT_POINT&&(r=o+a+".fragment.xml"),r};this._getNodeText=function(e,t){var r,i=e.type;if(e.isExtended!==!0)return i===n.EXT_TYPE_EXT_POINT?e.attributes.name:i===n.EXT_TYPE_HOOK?e.attributes.id:i===n.EXT_TYPE_CONTROLLER||i===n.EXT_TYPE_VIEW||i===n.EXT_TYPE_FRAGMENT&&e.resourceInfo.type===n.EXT_TYPE_FRAGMENT?(r=e.resourceInfo.originalName,r=r||e.resourceInfo.name):e.attributes.id?e.attributes.id:e.namespaceURI+":"+i;var a,s;return r=e.resourceInfo.originalName||e.resourceInfo.name,i===n.EXT_TYPE_VIEW?(s=v(e,t),a=s+" "+o.i18n.getText("i18n","VisualExt_ViewReplacementDescription",[r])):i===n.EXT_TYPE_CONTROLLER?(s=v(e,t),a=s+" "+o.i18n.getText("i18n","VisualExt_ControllerExtensionDescription",[r])):i===n.EXT_TYPE_EXT_POINT?a=e.attributes.name+" "+o.i18n.getText("i18n","VisualExt_ExtendedDescription"):i===n.EXT_TYPE_HOOK?a=e.attributes.id+" "+o.i18n.getText("i18n","VisualExt_ExtendedDescription"):e.isVisible&&(a=e.attributes.id+" "+o.i18n.getText("i18n","VisualExt_HiddenDescription")),a?a:void 0};var _=function(e,t){return l._tree.getSelection()||e.scrollIntoView(),t?(l._hoverNode=e,l._hoverNode.addStyleClass("hoveredNode"),l._hoverNode):(l._tree.setSelection(e),e)},x=function(e,t,r,i){if(!e)return null;if(i||(i=n.EXT_TYPE_VIEW),t&&i!==n.EXT_TYPE_VIEW)return null;if(i!==n.EXT_TYPE_VIEW&&i!==n.EXT_TYPE_CONTROLLER)return null;var o=E();l._hoverNode&&l._hoverNode.removeStyleClass("hoveredNode");for(var a=0;a<o.length;a++){var s=o[a],u=s.getBindingContext().getObject();if(u.resourceInfo.id===e||u.resourceInfo.newId===e||u.resourceInfo.originalId===e){if((u.type===n.EXT_TYPE_VIEW||u.type===n.EXT_TYPE_CONTROLLER)&&!t&&u.type===i)return _(s,r);var c=b(s,t);if(c)return _(c,r)}}},b=function(e,t){var r=e.getBindingContext().getObject(),i=r.attributes;if(i){var o;if(r.type===n.EXT_TYPE_EXT_POINT?o=i.name:(r.isVisible===!0||i.id)&&(o=i.id),o&&o===t)return e.oParent.setExpanded(!0),e}if(r.type===n.EXT_TYPE_FRAGMENT&&r.resourceInfo.type!==n.EXT_TYPE_FRAGMENT){var a=r.attributes.fragmentName,s=E();for(var u in s)if(a===s[u].getBindingContext().getObject().resourceInfo.id){var c=b(s[u],t);if(c)return s[u].oParent.setExpanded(!0),c}}if(e.hasChildren())for(var l=e.getNodes(),p=0;p<l.length;++p){var c=b(l[p],t);if(c)return l[p].oParent.setExpanded(!0),c}return void 0},w=function(){l._mFragmentToView=[];for(var e=E(),t=0;t<e.length;++t)e[t].getBindingContext().getObject().type===n.EXT_TYPE_VIEW&&S(e[t])},S=function(e){var t=e.getBindingContext().getObject();t.type===n.EXT_TYPE_FRAGMENT&&(l._mFragmentToView[t.attributes.fragmentName]=t.resourceInfo.id);var r=e.getNodes();if(r)for(var i=0;i<r.length;++i)S(r[i])};this.getParentViewOfFragment=function(e){return l._mFragmentToView[e]?l._mFragmentToView[e]:""};var E=function(){for(var e=l._tree.getNodes(),t=[],n=0;n<e.length;n++)t=t.concat(e[n].getNodes());return t},C=function(){for(var e=l._tree.getModel().getData().childTreeNodeModels,t=[],n=0;n<e.length;n++)t=t.concat(e[n].childTreeNodeModels);return t};this._updateCustomization=function(){return o.service.ui5projecthandler.getAllExtensions(a).then(function(e){c=e})},this._buildViewModelObject=function(e){var r=t.stringToXml(e.resourceContent);r=t.firstElementChild(r);var i=t.getTagAttributes(r),o={attributes:i,isExtended:e.isExtended===!0,isExtendable:!0,type:n.EXT_TYPE_VIEW,namespaceURI:r.namespaceURI,resourceInfo:e,customizationId:"sap.ui.viewReplacements",componentId:"fioriexttemplate.replaceviewcomponent"},a=t.children(r);if(a.length>0){o.childTreeNodeModels=[];for(var s=0;s<a.length;++s)o.childTreeNodeModels[s]=l._buildXmlNodeModelObject(o,a[s])}return o},this._buildFragmentModelObject=function(e){var n=t.stringToXml(e.fragmentXml);n=t.firstElementChild(n);var r=t.getTagAttributes(n),i={attributes:r,isExtended:e.isExtended===!0,isExtendable:!1,type:e.type,namespaceURI:n.namespaceURI,resourceInfo:e,customizationId:"sap.ui.viewReplacements",componentId:"fioriexttemplate.replaceviewcomponent"},o=t.children(n);if(o.length>0){i.childTreeNodeModels=[];for(var a=0;a<o.length;++a)i.childTreeNodeModels[a]=l._buildXmlNodeModelObject(i,o[a])}return i},this._buildXmlNodeModelObject=function(e,r){var i,o=r.tagName.substr(r.tagName.lastIndexOf(":")+1).toLowerCase();if(o===n.EXT_TYPE_EXT_POINT)i=l._buildExtensionPointModelObject(e,r);else if(i=l._buildUIControlModelObject(e,r),r.hasChildNodes()){i.childTreeNodeModels=[];for(var a=t.children(r),s=0;s<a.length;++s)i.childTreeNodeModels[s]=l._buildXmlNodeModelObject(e,a[s])}return i},this._buildExtensionPointModelObject=function(e,r){var i=t.getTagAttributes(r),o=i.name,a=r.tagName.substr(r.tagName.lastIndexOf(":")+1),s=t.isVisible(r.namespaceURI,a),u={attributes:i,isVisible:s,isAggregation:!1,customizationId:"sap.ui.viewExtensions",componentId:"fioriexttemplate.extendviewcomponent",extensionId:o,isExtendable:!0,isExtended:!1,type:n.EXT_TYPE_EXT_POINT,resourceInfo:e.resourceInfo,namespaceURI:r.namespaceURI},p=n.isExtended(c,u.customizationId,u.resourceInfo.id,u.extensionId);u.isExtended=p===!0;var f=t.children(r);if(f.length>0){u.childTreeNodeModels=[];for(var d=0;d<f.length;++d)u.childTreeNodeModels[d]=l._buildXmlNodeModelObject(u,f[d])}return u},this._buildUIControlModelObject=function(e,r){var i=r.tagName.substr(r.tagName.lastIndexOf(":")+1),o=i.toLowerCase(),a=t.isAggregation(r.namespaceURI,r.parentNode.tagName,i),s=t.isVisible(r.namespaceURI,i),u=t.getTagAttributes(r),l={attributes:u,isVisible:s,isAggregation:a,isExtended:!1,isExtendable:!1,type:o,namespaceURI:r.namespaceURI,resourceInfo:e.resourceInfo};if(r.attributes.id&&s===!0&&(l.customizationId="sap.ui.viewModifications",l.componentId="fioriexttemplate.hidecontrolcomponent",l.isExtendable=!0),l.resourceInfo.type===n.EXT_TYPE_FRAGMENT&&(l.isExtendable=!1),e.isExtended===!1&&l.isExtendable===!0){l.extensionId=l.attributes.id;var p=n.isExtended(c,l.customizationId,e.resourceInfo.id,l.extensionId);l.isExtended=p===!0}return l},this._buildControllerModelObject=function(e){var t={isExtended:e.isExtended===!0,isExtendable:!0,type:n.EXT_TYPE_CONTROLLER,resourceInfo:e,customizationId:"sap.ui.controllerExtensions",componentId:"fioriexttemplate.extendcontrollercomponent"},r=e.hooks;if(r.length>0){t.childTreeNodeModels=[];for(var i=0;i<r.length;i++)t.childTreeNodeModels[i]=l._buildControllerHookModelObject(e,r[i])}return t},this._buildControllerHookModelObject=function(e,t){var i=!1,a=t.name;try{i=r.isHookExtended(t.name,e.resourceContent)}catch(s){var u=o.i18n.getText("i18n","ExtensionProject_IsHookExtendedPaneErr",[a,e.name,s]);throw o.service.log.error(o.i18n.getText("i18n","Extension_LogTitle"),u,["system"]).done(),new Error(u)}return{isVisible:!0,isExtended:i,isExtendable:!0,type:n.EXT_TYPE_HOOK,resourceInfo:e,attributes:{id:a},extensionHookArgs:t.args,componentId:"fioriexttemplate.extendcontrollerhook",extensionId:a}},this._getTreeNodeTemplate=function(){return new sap.ui.commons.TreeNode({selectable:{parts:[{path:"isRoot",type:new sap.ui.model.type.Boolean}],formatter:function(e){return!e},useRawValues:!0},text:{parts:[{path:"isRoot",type:new sap.ui.model.type.Boolean},{path:"type",type:new sap.ui.model.type.String},{path:"isAggregation",type:new sap.ui.model.type.Boolean},{path:"resourceInfo"},{path:"attributes"},{path:"namespaceURI"},{path:"isExtended"},{path:"isExtendable"}],formatter:function(){var e=this.getBindingContext().getObject();if(this.removeStyleClass("extPaneExtendedNode"),this.removeStyleClass("extPaneNonExtensibleNode"),this.removeStyleClass("extPaneRootNode"),e.isRoot===!0?this.addStyleClass("extPaneRootNode"):(e.isExtendable||this.addStyleClass("extPaneNonExtensibleNode"),e.isExtended===!0&&this.addStyleClass("extPaneExtendedNode")),e.isRoot===!0)switch(e.type){case n.EXT_TYPE_VIEW:return o.i18n.getText("i18n","VisualExt_ViewsRootNode");case n.EXT_TYPE_FRAGMENT:return o.i18n.getText("i18n","VisualExt_FragmentsRootNode");case n.EXT_TYPE_CONTROLLER:return o.i18n.getText("i18n","VisualExt_ControllersRootNode")}if(e.isAggregation===!0)return e.type;if(e.type===n.EXT_TYPE_VIEW||e.type===n.EXT_TYPE_FRAGMENT&&e.resourceInfo.type===n.EXT_TYPE_FRAGMENT||e.type===n.EXT_TYPE_CONTROLLER){var t=e.resourceInfo.originalId||e.resourceInfo.id;return l._getNodeText(e,t)}return l._getNodeText(e)},useRawValues:!0},icon:{parts:[{path:"type",type:new sap.ui.model.type.String},{path:"resourceInfo"}],formatter:function(e){return e===n.EXT_TYPE_HOOK||e===n.EXT_TYPE_EXT_POINT?sap.ui.core.IconPool.getIconURI("add-equipment"):void 0},useRawValues:!0},tooltip:{parts:[{path:"resourceInfo"},{path:"isAggregation"},{path:"isRoot"},{path:"type"},{path:"attributes"},{path:"namespaceURI"}],formatter:function(e,t,r,i,o,a){if(r)return i;if(t)return i+" aggregation";var s;switch(i){case n.EXT_TYPE_HOOK:s=l._getDocumentationTooltip(e,o.id,"Controller Hook");break;case n.EXT_TYPE_EXT_POINT:s=l._getDocumentationTooltip(e,o.name?o.name:"","<"+a+":"+i+">")}return s?s:a?"<"+a+":"+i+">":"<"+i+">"},useRawValues:!0},expanded:{parts:[{path:"isRoot"}],formatter:function(e){return e===!0},useRawValues:!0}})},this._createTreeModel=function(){var e,t=new sap.ui.model.json.JSONModel,r=[],i=[],o=[],a={childTreeNodeModels:[{isExtended:!1,isExtendable:!1,isRoot:!0,type:n.EXT_TYPE_VIEW},{isExtended:!1,isExtendable:!1,isRoot:!0,type:n.EXT_TYPE_FRAGMENT},{isExtended:!1,isExtendable:!1,isRoot:!0,type:n.EXT_TYPE_CONTROLLER}]};for(e=0;e<l._aResourcesInfo.length;e++){var s=l._aResourcesInfo[e];switch(s.type){case n.EXT_TYPE_VIEW:r.push(l._buildViewModelObject(s));break;case n.EXT_TYPE_FRAGMENT:o.push(l._buildFragmentModelObject(s));break;case n.EXT_TYPE_CONTROLLER:i.push(l._buildControllerModelObject(s));break;default:throw new Error("Unknown resource type")}}return a.childTreeNodeModels[0].childTreeNodeModels=r,a.childTreeNodeModels[1].childTreeNodeModels=o,a.childTreeNodeModels[2].childTreeNodeModels=i,t.setData(a),t},this.attachTreeSelectionHandler=function(e){this._treeSelectionHandlers.push(e)},this.attachRightClickHandler=function(e){this._treeRightClickHandlers.push(e)},this.getSelectedElementData=function(){var e=l._tree.getSelection();return e?e.getBindingContext().getObject():e};var T=function(e){return e.type===n.EXT_TYPE_VIEW&&e.isExtended===!1&&e.isRoot!==!0},P=function(e){var t=e.resourceInfo;if(e.type===n.EXT_TYPE_VIEW||e.type===n.EXT_TYPE_CONTROLLER||e.type===n.EXT_TYPE_FRAGMENT||e.type===n.EXT_TYPE_HOOK||e.type===n.EXT_TYPE_EXT_POINT||e.isRoot===!0)return!1;var r=e.type!==n.EXT_TYPE_FRAGMENT&&t.type===n.EXT_TYPE_FRAGMENT;return!(e.isVisible!==!0||t.isExtended&&t.isExtended!==!1||e.isExtendable!==!0||e.isExtended!==!1||t.newId||r)},I=function(e){return e.type===n.EXT_TYPE_CONTROLLER&&e.isExtended===!1&&e.isRoot!==!0},D=function(e){var t=e.resourceInfo;return!(e.type!==n.EXT_TYPE_EXT_POINT||t.isExtended&&t.isExtended!==!1||e.isExtended!==!1||t.newId)},A=function(e){return e.type===n.EXT_TYPE_HOOK&&e.isExtended===!1&&e.isRoot!==!0},N=function(e,t){var r=e.getBindingContext().getObject();switch(t){case n.EXTENSION_TYPES.REPLACE_VIEW_WITH_EMPTY:case n.EXTENSION_TYPES.REPLACE_VIEW_WITH_COPY:return T(r);case n.EXTENSION_TYPES.EXTEND_VIEW:return D(r);case n.EXTENSION_TYPES.HIDE_CONTROL:return P(r);case n.EXTENSION_TYPES.EXTEND_CONTROLLER_WITH_EMPTY:case n.EXTENSION_TYPES.EXTEND_CONTROLLER_WITH_COPY:return I(r);case n.EXTENSION_TYPES.EXTEND_CONTROLLER_HOOK:return A(r);default:return!1}};this.isSelectedElementExtensibleForType=function(e){var t=l._tree.getSelection();return t?N(t,e):!1};var k=function(e,t){var n=sap.ui.getCore().byId("filterOptionsDropdownBox");if(n){var r=n.getValue();if(r===o.i18n.getText("i18n","VisualExt_ExtendedItems")){var i=l._tree.getBinding("nodes"),a=new sap.ui.model.Filter("isExtended",sap.ui.model.FilterOperator.EQ,!0);i.filter([a]),l._handleSelectionAfterFilter()}else e===!0&&l._tree.fireSelect({node:t,nodeContext:t.getBindingContext()})}};this._handleSelectionAfterFilter=function(){var e=l._tree.getSelection();if(e&&e.oParent){for(var t=e.oParent;t&&t.setExpanded;)t.setExpanded(!0),t=t.oParent;l._tree.fireSelect({node:e,nodeContext:e.getBindingContext()})}else e&&e.setIsSelected&&e.setIsSelected(!1),l._tree.fireSelect()},this.extendSelectedElement=function(e){var t=l._tree.getSelection();if(t&&N(t,e)){var r=t.getModel(),i=t.getBindingContext().getPath(),u=t.getBindingContext().getObject();return o.service.template.getTemplates().then(function(c){var p=c[u.componentId];return n.extendProject(u,a,s,p,e,o).then(function(){return l._updateCustomization().then(function(){r.setProperty(i+"/isExtended",!0);var e=u.resourceInfo.originalId||u.resourceInfo.id,o=u.type;if(o===n.EXT_TYPE_VIEW||o===n.EXT_TYPE_CONTROLLER){var a=v(u,e);r.setProperty(i+"/resourceInfo/newId",a),r.setProperty(i+"/resourceInfo/newResourceName",a)}else if(o===n.EXT_TYPE_HOOK){var c=t.getParent(),l=c.getBindingContext().getPath();r.getProperty(l+"/isExtended")!==!0&&(r.setProperty(l+"/isExtended",!0),r.setProperty(l+"/resourceInfo/newId",s.fiori.extensionCommon.extensionResourceId))}return r.setProperty(i+"/resourceInfo/filePath",y(u,e)),k(!1,t),u})})})}return Q.reject(new Error("The provided extension type is not applicable for the selected node, or no node was selected"))},this.removeExtensionFromSelectedElement=function(){var e=this._tree.getSelection();if(e&&n.isExtendedByNode(e.getBindingContext().getObject())){var t=e.getModel(),r=e.getBindingContext().getPath(),i=e.getBindingContext().getObject();return i.type===n.EXT_TYPE_HOOK?n.removeHookExtension(i,s,a,o).then(function(){return t.setProperty(r+"/isExtended",!1),k(!0,e),i}):n.removeExtension(i,a,o).then(function(n){return c=n,t.setProperty(r+"/isExtended",!1),k(!0,e),i})}return Q.reject(new Error("Remove extension is not applicable for the selected node, or no node was selected"))},this.selectTreeElement=function(e,t,n){x(e,t,!1,n)},this.hoverOnTreeElement=function(e,t,n){x(e,t,!0,n)},this.openOriginalCodeOfSelectedElement=function(){var e=this._tree.getSelection();return e?n.openParentDocument(this._tree.getSelection(),s,o):Q.reject(new Error("Cannot call openOriginalCodeOfSelectedElement when no element is selected"))},this.openExtensionCodeOfSelectedElement=function(e,t){var r=this._tree.getSelection();return r?e?n.openLayoutEditor(f,r,s.extensionResourceLocationPath,o,t):n.openExtendedDocument(f,r,s.extensionResourceLocationPath,o):Q.reject(new Error("Cannot call openOriginalCodeOfSelectedElement when no element is selected"))},this.clearSelection=function(){var e=this._tree.getSelection();e&&e.setIsSelected(!1),l._hoverNode&&l._hoverNode.removeStyleClass("hoveredNode")};var O=function(e,t){var r;for(r=0;r<e.length;r++)if(e[r].type===n.EXT_TYPE_EXT_POINT&&e[r].extensionId===t)return r;return r},R=function(e){return e?e.isVisible?l._getNodeText(e):void 0:void 0},j=function(e,t){var n,r={},i=O(e,t);if(1!==e.length){var o;if(0===i){var a=[];for(o=i+1;o<e.length;o++)n=e[o],n.attributes.id&&n.isVisible&&a.push(n.attributes.id);r.nextIds=a}else{var s=[];for(o=i-1;o>=0;o--)n=e[o],n.attributes.id&&n.isVisible&&s.push(n.attributes.id);r.prevIds=s}}return r},F=function(e,t){var r=e.childTreeNodeModels;if(r)for(var i=0;i<r.length;i++){var o=r[i];if(o.type===n.EXT_TYPE_EXT_POINT){var a={},s=l._getNodeText(o);o.isExtended||(a=j(r,s)),t.push({name:s,parent:R(e),nextSiblings:a.nextIds,previousSiblings:a.prevIds,isExtended:o.isExtended})}if(o.type===n.EXT_TYPE_FRAGMENT&&o.resourceInfo.type!==n.EXT_TYPE_FRAGMENT){var u=o.attributes.fragmentName,c=C();for(var p in c)u===c[p].resourceInfo.id&&F(c[p],t)}F(o,t)}return t};this.getAllExtensionPoints=function(){var e=C(),t={};t.views=[];for(var r=0;r<e.length;r++){var i=e[r];if(i.resourceInfo.type===n.EXT_TYPE_VIEW&&!i.isExtended){var o=i.resourceInfo.extensionPoints;if(o&&0!==o.length){var a=F(i,[]);t.views.push({name:i.resourceInfo.id,extensionPoints:a})}}}return t}};return jQuery.sap.require("sap.ui.commons.TreeNode"),sap.ui.commons.TreeNode.prototype.scrollIntoView=function(){var e=this,t=e.$();if(t.length){var n,r,i=t.find(".sapUiTreeNodeContent"),o=e.getTree().$(),a=o.find(".sapUiTreeCont"),s=t[0].offsetTop,u=a.scrollTop(),c=a.height(),l=i.context.offsetLeft,p=a.scrollLeft(),f=a.width(),d=s+t[0].offsetHeight;if(d>u+c?n=d-Math.floor(.8*c):u>s&&(n=s-Math.floor(.2*c)),l>p+.1*f?r=l:p+.1*f>l&&(r=l-Math.floor(.1*f),0>r&&(r=0)),void 0!==n||void 0!==r){var h={};void 0!==n&&(h.scrollTop=n),void 0!==r&&(h.scrollLeft=r),a.animate(h)}}},o}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/outline/MessageHandler",[],function(){var e=function(e,t,n,r,i){var o=window.addEventListener?"addEventListener":"attachEvent",a=window[o],s="attachEvent"===o?"onmessage":"message",u=i,c=function(i){if(t&&t instanceof Array&&l(i.origin)){var o=i.data;if(jQuery.sap.startsWith(o,"HOVER_")){var a=o.replace("HOVER_",""),s=a.split(";"),c=s[0],p=s[1];r.hover(c,p,"view")}else if(jQuery.sap.startsWith(o,"ELEMENT_")){var a=o.replace("ELEMENT_",""),s=a.split(";"),c=s[0],p=s[1];r.select(c,p,"view")}else if(jQuery.sap.startsWith(o,"CLEAR_TREE"))r.clear();else if(jQuery.sap.startsWith(o,"CONTEXT_MENU")){r.clear();var a=o.replace("CONTEXT_MENU_",""),s=a.split(";"),c=s[0],p=s[1],f=s[2],d=s[3],h=e.getBoundingClientRect();f=parseInt(f,10)+h.left,d=parseInt(d,10)+h.top;var m=$("#ExtensionPreviewContainer-content").offset();f+=m.left,d+=m.top,r.select(c,p,"view"),r.contextMenu(f,d)}else jQuery.sap.startsWith(o,"LOCK_UI")?(r.clear(),e&&e.contentWindow&&(e.contentWindow.postMessage("LOCK_UI",n),u.service.usagemonitoring.report("extensibility","switch_mode","switch_to_extensibility_mode").done())):jQuery.sap.startsWith(o,"UNLOCK_UI")&&(r.clear(),e&&e.contentWindow&&(e.contentWindow.postMessage("UNLOCK_UI",n),u.service.usagemonitoring.report("extensibility","switch_mode","switch_to_preview_mode").done()))}};a(s,c,!1),this.sendMessage=function(t,r,i){i||(i=""),e&&e.contentWindow&&e.contentWindow.postMessage(t+r+";"+i,n)},this.detachHandler=function(){window.removeEventListener?window.removeEventListener("message",c,!1):window.detachEvent("onmessage",c)};var l=function(e){if("java"===sap.watt.getEnv("server_type")||"local_hcproxy"===sap.watt.getEnv("server_type"))return jQuery.sap.startsWith(e.toLowerCase(),this.location.protocol+"//"+this.location.hostname)?!0:!1;for(var n=0;n<t.length;n++)if(jQuery.sap.startsWith(t[n].toLowerCase(),e.toLowerCase()))return!0;return!1}};return e}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/ui/UIContent",["../outline/ExtensionProjectTree","../outline/MessageHandler","../util/ExtendUtil"],function(e,t,n){var r=null,i=null,o=null,a=null,s=null,u=null,c=null,l=null,p=null,f=null,d=!1,h=!1,m=!0,g=null,v=null,y=null,_=null,x=null,b=null,w=null,S=null,E=null;this.mExtensionTypes=n.EXTENSION_TYPES,this.mReportTypes={FROM_BUTTON:"from_button",FROM_OUTLINE:"from_right_click_on_outline",FROM_APPLICATION:"from_right_click_on_application"};var C=this,T=function(e){return e.contextMenu?this.context.service.commandGroup.getGroup(e.contextMenu).then(function(e){s=e}):void 0},P=function(e,t,n){return C.oContext.service.dialogprogress.show(e,n).then(function(){return I(t)})},I=function(e){return C.oContext.service.dialogprogress.setProgress(e||0)},D=function(){return C.oContext.service.dialogprogress.hide()},A=function(){return h},N=function(){var t=C.oContext.i18n.getText("VisualExt_ProgressMessage");return P(t,20).then(function(){var t;return C.oContext.service.ui5projecthandler.getHandlerFilePath(x).then(function(e){return b.extensionHandlerPath=e,b.extensibility.BSPName?n.getFioriAppExtensionsDocumentation(b.extensibility.BSPName):void 0}).then(function(e){t=e}).fail(function(){C.oContext.service.log.info("Extensibility Pane",C.oContext.i18n.getText("VisualExt_AppDocFailedLogMessage"),["user"]).done()}).finally(function(){var n=t?t.map:void 0;return c=new e(C.oContext,x,b,n),h?void 0:(h=!0,c.createContent().then(function(e){return c.attachRightClickHandler(U),c.attachTreeSelectionHandler(et),g={},I(30).then(function(){return j(C.oContext,t?t.url:void 0,e)})}).fail(function(e){return h=!1,D().then(function(){return C.oContext.service.usernotification.warning(e.message)})}))})}).fail(function(e){return D().then(function(){return C.oContext.service.usernotification.warning(e.message)})})},k=function(e,t,n,r){C.oContext=e;var i;return i=m?C.oContext.service.usagemonitoring.startPerf("extensibility","open_extensibility_pane"):C.oContext.service.usagemonitoring.startPerf("extensibility","open_cached_ext_pane"),b=n,x=t,_=r,i.then(function(){var e={getProxyMetadata:function(){return{getName:function(){return"extensibility"}}}};return C.oContext.service.setting.project.get(e,x).then(function(e){return e&&e.type&&"hcp"===e.type?C.oContext.service.hcpauthentication.authenticate().then(function(){return N().then(function(){return m?(m=!1,C.oContext.service.usagemonitoring.report("extensibility","open_extensibility_pane","open")):C.oContext.service.usagemonitoring.report("extensibility","open_cached_ext_pane","open")
})}).fail(function(e){if("Authentication_Cancel"!==e.message)throw new Error(e.message)}):N().then(function(){return m?(m=!1,C.oContext.service.usagemonitoring.report("extensibility","open_extensibility_pane","open")):C.oContext.service.usagemonitoring.report("extensibility","open_cached_ext_pane","open")})}).fail(function(e){if("INVALID_JSON_FORMAT"===e.message)throw new Error(C.context.i18n.getText("i18n","Command_invalidProjectJson"))})})},O=function(e){return n.getRunConfigurationInfo(C.oContext,x).then(function(t){var n=new URI(e);if(t){for(var r=t.search(!0),i=Object.keys(r),o=0;o<i.length;o++){var a=i[o],s=r[a];n.addSearch(a,s)}var u=t.hash();!n.hash()&&u&&n.hash(u)}return n.toString()})},R=function(e){var t=URI(e);return t.removeSearch("sap-ui-xx-componentPreload"),t.addSearch("sap-ui-xx-componentPreload","async"),t.toString()},j=function(e,n,r){return I(50).then(function(){S=sap.ui.getCore().byId("ExtensionPreviewContainer"),void 0!==S&&S.destroy(),sap.watt.includeCSS(require.toUrl("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/ui/css/Preview.css")),S=new sap.ui.ux3.OverlayContainer("ExtensionPreviewContainer",{openButtonVisible:!1}).addStyleClass("wizardBodyVisualExt"),L(n),F(r);var i=new sap.ui.core.HTML,o={onAfterRendering:function(n){$("#previewApp").load(function(){try{$(this).contents()}catch(r){return}f=$(this).contents().find("#display"),f.on("load",function(){var r=this.src;if(("java"===sap.watt.getEnv("server_type")||"local_hcproxy"===sap.watt.getEnv("server_type"))&&(r="*"),!C.messageHandler){var i=[];i.push(n),i.push(this.src);var o={hover:ct,select:B,contextMenu:ut,clear:st};C.messageHandler=new t(this,i,r,o,e)}C.$("#previewApp").contents().find("div#UNLOCK_UI").click(),c.clearSelection(),this.contentWindow.postMessage("INITIALIZE",r);var a=c.getAllExtensionPoints();try{this.contentWindow.postMessage("EXTENSION_POINTS"+JSON.stringify(a),r)}catch(s){e.service.log.info("Extensibility Pane","Could not locate extension points",["user"]).done()}})})}};return y=new sap.ui.commons.Dialog({title:C.oContext.i18n.getText("i18n","VisualExt_ApplicationChanged"),resizable:!1,width:"760px",modal:!0}),y.insertButton(new sap.ui.commons.Button({text:C.oContext.i18n.getText("i18n","command_goToCode"),press:function(){y.close(),y.removeAllContent(),mt(!1).done()},tooltip:C.oContext.i18n.getText("i18n","ExtPane_Dialog_OpenExtensionCode_Tooltip")}),0),y.insertButton(new sap.ui.commons.Button({text:C.oContext.i18n.getText("i18n","DialogAfterExtension_Refresh"),press:function(){f.attr("src",f.attr("src"));var e=sap.ui.getCore().byId("goToCodeButton");e.setEnabled(!1);var t=sap.ui.getCore().byId("extOptionsMenuButton");t.setEnabled(!1),y.close(),y.removeAllContent()},tooltip:C.oContext.i18n.getText("i18n","ExtPane_Dialog_YesButton_Tooltip")}),1),y.insertButton(new sap.ui.commons.Button({text:C.oContext.i18n.getText("i18n","DialogAfterExtension_Close"),press:function(){y.close(),y.removeAllContent()},tooltip:C.oContext.i18n.getText("i18n","ExtPane_Dialog_NoButton_Tooltip")}),2),y.insertButton(new sap.ui.commons.Button({text:C.oContext.i18n.getText("i18n","OK"),press:function(){y.close(),y.removeAllContent()}}),3),I(70).then(function(){return it(e).then(function(e){return i.addDelegate(o),i.setContent(e),M(i,u),S.addContent(w),S.attachClose(function(){C.messageHandler&&C.messageHandler.detachHandler(),C.messageHandler=null,void 0!==S&&S.close(),h=!1,w&&w.destroy()}),I(85).then(function(){return S.open(),p=R(p),O(p).then(function(e){p=e;var t=document.createElement("iframe");t.setAttribute("src",p),t.setAttribute("style","border : none;"),t.setAttribute("id","previewApp"),t.setAttribute("height","100%"),t.setAttribute("width","100%");var n=$("#previewApp").replaceWith(t);n=null;var r=this.location.origin||this.location.href;return o.onAfterRendering(r),C.oContext.service.preview.showPreview(p,$("#previewApp")[0].contentWindow,!1,{ExtDropDown:{id:"ExtDropDown","default":"UNLOCK_UI",items:{UNLOCK_UI:{label:C.oContext.i18n.getText("i18n","VisualExt_PreviewMode")},LOCK_UI:{label:C.oContext.i18n.getText("i18n","VisualExt_ExtensibilityMode")}}}}).then(function(){return I(100).then(function(){return D()})})})})})})})},F=function(e){sap.ui.core.Control.extend("my.Layout",{metadata:{aggregations:{top:{type:"sap.ui.core.Control",multiple:!1},middle:{type:"sap.ui.core.Control",multiple:!1},bottom:{type:"sap.ui.core.Control",multiple:!1}}},renderer:function(e,t){e.write("<div "),e.writeControlData(t),e.addClass("extPane filesearch"),e.writeClasses(),e.addStyle("position","relative"),e.addStyle("height","100%"),e.addStyle("width","100%"),e.writeStyles(),e.write(">"),e.write("<div "),e.addStyle("position","absolute"),e.addStyle("width","95%"),e.addStyle("background-color","#FAF9F7"),e.addStyle("margin-right","8px"),e.addStyle("margin-left","8px"),e.addStyle("top","80px"),e.addStyle("bottom","160px"),e.writeStyles(),e.write("><div "),e.addStyle("height","100%"),e.writeStyles(),e.write(">"),t.getMiddle()&&e.renderControl(t.getMiddle()),e.write("</div></div>"),e.write("<div "),e.addStyle("position","absolute"),e.addStyle("top","0"),e.addStyle("height","80px"),e.addStyle("width","100%"),e.writeStyles(),e.write(">"),t.getTop()&&e.renderControl(t.getTop()),e.write("</div>"),e.write("<div "),e.addStyle("position","absolute"),e.addStyle("bottom","0"),e.addStyle("height","160px"),e.addStyle("width","100%"),e.addStyle("overflow","auto"),e.writeStyles(),e.write(">"),t.getBottom()&&e.renderControl(t.getBottom()),e.write("</div>"),e.write("</div>")}}),u=new my.Layout({top:e.top,middle:e.middle,bottom:r})},L=function(e){v=new sap.ui.commons.TextView({text:"No control is selected",width:"100%",wrapping:!0,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})}).addStyleClass("statusMessage"),new sap.ui.commons.TextView({text:C.oContext.i18n.getText("i18n","VisualExt_PossibleExtensions"),width:"100%",layoutData:new sap.ui.layout.GridData({span:"L11 M11 S11",linebreak:!0})}).addStyleClass("label"),l=new sap.ui.commons.MenuButton("extOptionsMenuButton",{text:C.oContext.i18n.getText("i18n","VisualExt_ExtOptionsMenuButton"),tooltip:C.oContext.i18n.getText("i18n","VisualExt_ExtOptionsTooltip"),enabled:!1}).addStyleClass("extendButton flatControlSmall");var t=new sap.ui.commons.Menu;l.setMenu(t),i=sap.ui.getCore().byId("removeExtBtn"),void 0===i&&(i=new sap.ui.commons.Button("removeExtBtn",{text:C.oContext.i18n.getText("i18n","VisualExt_RemoveExtensionButton"),tooltip:C.oContext.i18n.getText("i18n","VisualExt_RemoveExtensionTooltip"),enabled:!1}).addStyleClass("removeExtBtn flatControlSmall")),i.attachPress(dt,this);var n=new sap.ui.commons.MenuButton("goToCodeButton",{text:C.oContext.i18n.getText("i18n","VisualExt_GoToCode"),tooltip:C.oContext.i18n.getText("i18n","VisualExt_GoToCodeTooltip"),enabled:!1}).addStyleClass("extendButton flatControlSmall"),s=new sap.ui.commons.Menu;a=new sap.ui.unified.MenuItem("openLayoutEditorItem",{text:C.oContext.i18n.getText("i18n","VisualExt_OpenLayoutEditor"),tooltip:C.oContext.i18n.getText("i18n","VisualExt_openLayoutEditorTooltip"),enabled:!1,select:[G,this]}),s.addItem(a),o=new sap.ui.unified.MenuItem("goToExtensionCodeItem",{text:C.oContext.i18n.getText("i18n","VisualExt_GoToExtensionCode"),tooltip:C.oContext.i18n.getText("i18n","VisualExt_GoToCodeTooltip"),enabled:!1,select:[V,this]}),s.addItem(o);var u=new sap.ui.unified.MenuItem("goToParentCodeItem",{text:C.oContext.i18n.getText("i18n","VisualExt_GoToParentCode"),tooltip:C.oContext.i18n.getText("i18n","VisualExt_GoToCodeTooltip"),enabled:!0,select:[ht,this]});s.addItem(u),n.setMenu(s);var c,p=new sap.ui.layout.HorizontalLayout({allowWrapping:!0,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),width:"100%",content:[l,i,n]});if(e){var f=new sap.ui.commons.Link({text:C.oContext.i18n.getText("i18n","ExtDocumentation_LinkText"),tooltip:C.oContext.i18n.getText("i18n","ExtDocumentation_LinkTooltipText"),target:"_blank",href:e}).addStyleClass("extDocumentationLink");f.setLayoutData(new sap.ui.layout.GridData({span:"L11 M11 S11",linebreak:!0})),c=[v,p,f]}else c=[v,p];r=sap.ui.getCore().byId("ExtendGridLayout"),void 0===r&&(r=new sap.ui.layout.Grid({layoutData:new sap.ui.layout.GridData({span:"L11 M11 S11",linebreak:!0}),content:c})),r.setVSpacing(0)},M=function(e,t){w=sap.ui.getCore().byId("splitterV"),void 0===w&&(w=new sap.ui.commons.Splitter("splitterV"),w.setSplitterOrientation(sap.ui.commons.Orientation.vertical),w.setSplitterPosition("73%"),w.setWidth("100%"),w.setHeight("100%"),w.addStyleClass("splitter")),w.setShowScrollBars(!1),w.addFirstPaneContent(e),w.addSecondPaneContent(t)},B=function(e,t,n){c.selectTreeElement(e,t,n),E=C.mReportTypes.FROM_APPLICATION},U=function(e,t){var n=t.getBindingContext().getObject();n.isRoot||(E=C.mReportTypes.FROM_OUTLINE,C.oContext.service.contextMenu.open(s,e.pageX,e.pageY).done())},V=function(){mt(!1).done()},G=function(){mt(!0).done()},H=function(){var e=sap.ui.getCore().byId("goToCodeButton");e.setEnabled(!1);var t=sap.ui.getCore().byId("extOptionsMenuButton");t.setEnabled(!1);var n=sap.ui.getCore().byId("removeExtBtn");n.setEnabled(!1),S.setBusy(!0)},z=function(){S.setBusy(!1)},W=function(e,t,r){if(t===!0)switch(r){case C.mExtensionTypes.REPLACE_VIEW_WITH_EMPTY:C.oContext.service.usagemonitoring.report("extensibility","add_extension","replace_with_empty_view_"+E).done();break;case C.mExtensionTypes.REPLACE_VIEW_WITH_COPY:C.oContext.service.usagemonitoring.report("extensibility","add_extension","replace_with_copy_of_original_view_"+E).done();break;case C.mExtensionTypes.EXTEND_VIEW:C.oContext.service.usagemonitoring.report("extensibility","add_extension","extend_extension_point_"+E).done();break;case C.mExtensionTypes.EXTEND_CONTROLLER_WITH_EMPTY:C.oContext.service.usagemonitoring.report("extensibility","add_extension","replace_with_empty_controller_"+E).done();break;case C.mExtensionTypes.EXTEND_CONTROLLER_WITH_COPY:C.oContext.service.usagemonitoring.report("extensibility","add_extension","replace_with_copy_of_original_controller_"+E).done();break;case C.mExtensionTypes.EXTEND_CONTROLLER_HOOK:C.oContext.service.usagemonitoring.report("extensibility","add_extension","implement_controller_hook_"+E).done();break;case C.mExtensionTypes.HIDE_CONTROL:C.oContext.service.usagemonitoring.report("extensibility","add_extension","hide_control_"+E).done()}else switch(e.type){case n.EXT_TYPE_VIEW:C.oContext.service.usagemonitoring.report("extensibility","remove_extension","remove_view_extension_"+E).done();break;case n.EXT_TYPE_EXT_POINT:C.oContext.service.usagemonitoring.report("extensibility","remove_extension","remove_extension_point_"+E).done();break;case n.EXT_TYPE_CONTROLLER:C.oContext.service.usagemonitoring.report("extensibility","remove_extension","remove_controller_extension_"+E).done();break;case n.EXT_TYPE_HOOK:C.oContext.service.usagemonitoring.report("extensibility","remove_extension","remove_controller_hook_"+E).done();break;default:C.oContext.service.usagemonitoring.report("extensibility","remove_extension","remove_hide_extension_"+E).done()}},q=function(e,t,n,r){var i,o;switch(r){case C.mExtensionTypes.REPLACE_VIEW_WITH_COPY:d=!1,o=C.oContext.i18n.getText("i18n","VisualExt_ReplacedSuccess",['"'+n+'"',e.type]),i=C.oContext.i18n.getText("i18n","VisualExt_ExtensionAdded",['"'+t+'"',e.type,o]);break;case C.mExtensionTypes.REPLACE_VIEW_WITH_EMPTY:d=!0,o=C.oContext.i18n.getText("i18n","VisualExt_ReplacedSuccess",['"'+n+'"',e.type]),i=C.oContext.i18n.getText("i18n","VisualExt_ExtensionAdded",['"'+t+'"',e.type,o]);break;case C.mExtensionTypes.EXTEND_VIEW:d=!1,o=C.oContext.i18n.getText("i18n","VisualExt_ExtendedSuccess"),i=C.oContext.i18n.getText("i18n","VisualExt_ExtensionAdded",['"'+t+'"',"extension point",o]);break;case C.mExtensionTypes.EXTEND_CONTROLLER_WITH_COPY:case C.mExtensionTypes.EXTEND_CONTROLLER_WITH_EMPTY:d=!1,o=C.oContext.i18n.getText("i18n","VisualExt_ExtendedSuccessBy",['"'+n+'"',e.type]),i=C.oContext.i18n.getText("i18n","VisualExt_ExtensionAdded",['"'+t+'"',e.type,o]);break;case C.mExtensionTypes.EXTEND_CONTROLLER_HOOK:d=!0,o=C.oContext.i18n.getText("i18n","VisualExt_ExtendedSuccess"),i=C.oContext.i18n.getText("i18n","VisualExt_ExtensionAdded",['"'+t+'"',"extension hook",o]);break;default:d=!0,o=C.oContext.i18n.getText("i18n","VisualExt_HiddenSuccess"),i=C.oContext.i18n.getText("i18n","VisualExt_ExtensionAdded",['"'+t+'"',"control",o])}return i},X=function(e,t,r){var i;return i=e.type===n.EXT_TYPE_VIEW||e.type===n.EXT_TYPE_CONTROLLER?C.oContext.i18n.getText("i18n","VisualExt_ExtensionRemoved",['"'+r+'"',e.type]):e.type===n.EXT_TYPE_EXT_POINT?C.oContext.i18n.getText("i18n","VisualExt_ExtensionRemoved",['"'+t+'"',"extension point"]):C.oContext.i18n.getText("i18n","VisualExt_ExtensionRemoved",['"'+t+'"',"control"])},J=function(e,t,r){var i,o;e.type===n.EXT_TYPE_VIEW||e.type===n.EXT_TYPE_CONTROLLER?(i=e.resourceInfo.originalName||e.resourceInfo.name,o=e.resourceInfo.newResourceName):i=e.type===n.EXT_TYPE_EXT_POINT?e.attributes.name:e.type===n.EXT_TYPE_HOOK?e.attributes.id:e.attributes.id;var a;t===!0?(a=q(e,i,o,r),y.getButtons()[0].setVisible(!0)):(a=X(e,i,o),d=!0,y.getButtons()[0].setVisible(!1));var s=new sap.ui.commons.Label({text:a,width:"100%"});if(y.addContent(s),t===!0&&(e.type===n.EXT_TYPE_VIEW||e.type===n.EXT_TYPE_CONTROLLER)){var u=new sap.ui.commons.Label({text:C.oContext.i18n.getText("i18n","AddExtensionMessage_Important")+" ",design:sap.ui.commons.LabelDesign.Bold});y.addContent(u);var c=new sap.ui.commons.Label({wrapping:!0}).addStyleClass("implicationTextAfterExtension");switch(r){case C.mExtensionTypes.REPLACE_VIEW_WITH_COPY:c.setText(C.oContext.i18n.getText("i18n","ReplaceViewWithCopy_Implication",['"'+o+'"','"'+i+'"']));break;case C.mExtensionTypes.REPLACE_VIEW_WITH_EMPTY:c.setText(C.oContext.i18n.getText("i18n","ReplaceViewWithEmpty_Implication",['"'+o+'"','"'+i+'"']));break;case C.mExtensionTypes.EXTEND_CONTROLLER_WITH_COPY:c.setText(C.oContext.i18n.getText("i18n","ReplaceControllerWithCopy_Implication",['"'+o+'"','"'+i+'"']));break;case C.mExtensionTypes.EXTEND_CONTROLLER_WITH_EMPTY:c.setText(C.oContext.i18n.getText("i18n","ReplaceControllerWithEmpty_Implication",['"'+o+'"','"'+i+'"']));break;default:c.setText(""),y.removeContent(u)}y.addContent(c);var l=new sap.ui.commons.Link({text:C.oContext.i18n.getText("i18n","AddExtensionMessage_ImplicationsLink"),target:"_blank",href:"https://sapui5.hana.ondemand.com/sdk/#docs/guide/aef3384510724522a07df94ec90d1351.html"}).addStyleClass("implicationLinkAfterExtension");y.addContent(l)}d?(y.getButtons()[1].setVisible(!0),y.getButtons()[2].setVisible(!0),y.getButtons()[3].setVisible(!1)):(y.getButtons()[1].setVisible(!1),y.getButtons()[2].setVisible(!1),y.getButtons()[3].setVisible(!0)),y.open()},K=function(e,t){E=C.mReportTypes.FROM_BUTTON,pt(t.type).done()},Y=function(e){var t=e.type;t===n.EXT_TYPE_VIEW||t===n.EXT_TYPE_CONTROLLER?i.setEnabled(!1):i.setEnabled(n.isExtendedByNode(e))},Z=function(e){h===!0&&(e.isExtended===!0?(o.setEnabled(!0),(e.type===n.EXT_TYPE_VIEW||e.type===n.EXT_TYPE_EXT_POINT)&&a.setEnabled(!0),l.getMenu().removeAllItems(),tt(e)):(tt(e),o.setEnabled(!1),a.setEnabled(!1)))},et=function(e,t){E=C.mReportTypes.FROM_OUTLINE;var n=sap.ui.getCore().byId("goToCodeButton");if(!t)return n.setEnabled(!1),l.setEnabled(!1),i.setEnabled(!1),tt(null),nt(null),void 0;var r=t.getBindingContext().getObject();return Y(r),n.setEnabled(!0),v.setText(C.oContext.i18n.getText("i18n","VisualExt_NodeIsSelected",[t.getText()])),r.isRoot?(n.setEnabled(!1),l.setEnabled(!1),tt(null),void 0):"fragment"===r.resourceInfo.type&&"extensionpoint"!==r.type?(l.setEnabled(!1),void 0):(nt(r),Z(r),void 0)},tt=function(e){var t=l.getMenu();if(null===e)return v.setText(C.oContext.i18n.getText("i18n","VisualExt_NoControlIsSelected")),void 0;if(e.type!==n.EXT_TYPE_HOOK&&(e.resourceInfo.newId||e.resourceInfo.isExtended&&e.resourceInfo.isExtended===!0))return t.removeAllItems(),e.resourceInfo.name?v.setText(C.oContext.i18n.getText("i18n","VisualExt_NodeAlreadyExtended",[e.resourceInfo.name])):v.setText(C.oContext.i18n.getText("i18n","VisualExt_ElementAlreadyExtended")),l.setEnabled(!1),void 0;if(e.isExtended===!0)return v.setText(C.oContext.i18n.getText("i18n","VisualExt_NodeAlreadyExtended",[e.extensionId])),l.setEnabled(!1),void 0;switch(t.getItems().length>0&&t.removeAllItems(),e.type){case n.EXT_TYPE_VIEW:var r=new sap.ui.unified.MenuItem({text:C.oContext.i18n.getText("i18n","VisualExt_ReplaceWithEmptyView"),select:[{type:C.mExtensionTypes.REPLACE_VIEW_WITH_EMPTY},K,this]}),i=new sap.ui.unified.MenuItem({text:C.oContext.i18n.getText("i18n","VisualExt_ReplaceCopyParentView"),select:[{type:C.mExtensionTypes.REPLACE_VIEW_WITH_COPY},K,this]});t.addItem(r),t.addItem(i);break;case n.EXT_TYPE_EXT_POINT:var o=new sap.ui.unified.MenuItem({text:C.oContext.i18n.getText("i18n","VisualExt_ExtendView"),select:[{type:C.mExtensionTypes.EXTEND_VIEW},K,this]});t.addItem(o);break;case n.EXT_TYPE_CONTROLLER:var a=new sap.ui.unified.MenuItem({text:C.oContext.i18n.getText("i18n","VisualExt_ExtendEmptyController"),select:[{type:C.mExtensionTypes.EXTEND_CONTROLLER_WITH_EMPTY},K,this]}),s=new sap.ui.unified.MenuItem({text:C.oContext.i18n.getText("i18n","VisualExt_ExtendParentController"),select:[{type:C.mExtensionTypes.EXTEND_CONTROLLER_WITH_COPY},K,this]});t.addItem(a),t.addItem(s);break;case n.EXT_TYPE_HOOK:var u=new sap.ui.unified.MenuItem({text:C.oContext.i18n.getText("i18n","VisualExt_ExtendHook"),select:[{type:C.mExtensionTypes.EXTEND_CONTROLLER_HOOK},K,this]});t.addItem(u);break;default:if(e.isVisible&&e.attributes.id){var c=new sap.ui.unified.MenuItem({text:C.oContext.i18n.getText("i18n","VisualExt_HideControl"),select:[{type:C.mExtensionTypes.HIDE_CONTROL},K,this]});t.addItem(c)}}t.getItems().length<=0?(e.attributes.id?e.isVisible===!1&&v.setText(C.oContext.i18n.getText("i18n","VisualExt_ElementNotVisible",[e.attributes.id])):v.setText(C.oContext.i18n.getText("i18n","VisualExt_NoIdAvailable")),l.setEnabled(!1)):l.setEnabled(!0)},nt=function(e){if(C.messageHandler){if(!e)return C.messageHandler.sendMessage("CLEAR","",""),void 0;if(e.type===n.EXT_TYPE_VIEW)return C.messageHandler.sendMessage("SELECT_",e.resourceInfo.id),void 0;var t=e.resourceInfo.id;e.resourceInfo.type===n.EXT_TYPE_FRAGMENT&&(t=c.getParentViewOfFragment(t)),e.isVisible===!0&&e.attributes.id?C.messageHandler.sendMessage("SELECT_",t,e.attributes.id):e.type===n.EXT_TYPE_EXT_POINT?C.messageHandler.sendMessage("SELECT_",t,e.attributes.name):C.messageHandler.sendMessage("CLEAR","","")}else C.oContext.service.usernotification.alert(C.oContext.i18n.getText("i18n","VisualExt_ErrorOccurred")).then(function(e){if("OK"===e.sResult){f.attr("src",f.attr("src"));var t=sap.ui.getCore().byId("goToCodeButton");t.setEnabled(!1)}}).done()},rt=function(e){var t=x.getEntity().getFullPath()+"/index.html",n=x.getEntity().getFullPath()+"/webapp/index.html";return e.service.filesystem.documentProvider.getDocument(n).then(function(n){return n?Q(n):e.service.filesystem.documentProvider.getDocument(t)})},it=function(e){return rt(e).then(function(t){if(t){var n=require.toUrl("sap.watt.saptoolsets.fiori.project.fioriexttemplate/visualExt/transceiver.js"),r='<script src="'+n+'" type="text/javascript"></script>';return _?e.service.mockpreview.getRunnableMockSettings(t,b.mockpreview).then(function(n){return e.service.mockpreview.buildRunnableDocument(n,t).then(function(t){return e.service.htmlbuilder.build(t,r,"visual_ext_index.html").then(function(e){p=e;var t="<iframe style='border : none;' id='previewApp' height='100%' width='100%'></iframe>";return t})})}):e.service.htmlbuilder.build(t,r,"visual_ext_index.html").then(function(e){p=e;var t="<iframe style='border : none;' id='previewApp' height='100%' width='100%'></iframe>";return t})}})},ot=function(){S.fireClose()},at=function(){return c.getSelectedElementData()},st=function(){c.clearSelection(),tt(null),i.setEnabled(!1),o.setEnabled(!1),C.oContext.service.contextMenu.close().done()},ut=function(e,t){return C.oContext.service.contextMenu.open(s,e,t)},ct=function(e,t,n){c.hoverOnTreeElement(e,t,n)},lt=function(){return C.mExtensionTypes},pt=function(e){return H(),C.oContext.service.usagemonitoring.startPerf("extensibility","add_extension").then(function(){return c.extendSelectedElement(e).then(function(t){W(t,!0,e),J(t,!0,e),Y(t);var n=sap.ui.getCore().byId("goToCodeButton");return n.setEnabled(!0),t.isRoot?(n.setEnabled(!1),l.setEnabled(!1),tt(null),void 0):"fragment"===t.resourceInfo.type&&"extensionpoint"!==t.type?(l.setEnabled(!1),void 0):(nt(t),Z(t),void 0)})}).fail(function(e){return C.oContext.service.usernotification.alert(e)}).finally(function(){z()})},ft=function(e){return c.isSelectedElementExtensibleForType(e)},dt=function(){return H(),c.removeExtensionFromSelectedElement().then(function(e){W(e,!1),J(e,!1)}).fail(function(e){return C.oContext.service.usernotification.alert(e)}).finally(function(){z()})},ht=function(){return ot(),c.openOriginalCodeOfSelectedElement()},mt=function(e){return ot(),c.openExtensionCodeOfSelectedElement(e,E)};return{isExtensibilityOpen:A,openVisualExt:k,closeVisualExt:ot,configure:T,getFocusElement:at,getExtensionTypes:lt,extendSelectedElement:pt,isSelectedElementExtensibleForType:ft,removeExtensionFromSelectedElement:dt,openOriginalCodeOfSelectedElement:ht,openExtensionCodeOfSelectedElement:mt,_appendRunConfigurationInfoToIframeUrl:O,_enableComponentPreloadInIframeUrl:R}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/services/AddFinishStepContent",{getContent:function(){jQuery.sap.require("sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.AddFinishStepContent");var e=new sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.AddFinishStepContent({context:this.context});return e}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/services/ExtendControllerStepContent",{getContent:function(){var e=this;return Q.sap.require("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/steps/WizardStepContentHelper").then(function(t){jQuery.sap.require("sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.ExtendControllerStepContent");var n=new sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.ExtendControllerStepContent({context:e.context,wizardStepContentHelper:t});n.addOptionsToReplaceWithCombo();var r=e.context.i18n.getText("command_extendController");return e.context.service.wizard.createWizardStep(n,r,"")})}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/services/ExtendHookStepContent",{getContent:function(){var e=this;return Q.sap.require("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/steps/WizardStepContentHelper").then(function(t){jQuery.sap.require("sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.ExtendHookStepContent");var n=new sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.ExtendHookStepContent({context:e.context,wizardStepContentHelper:t}),r=e.context.i18n.getText("command_extendHookConfiguration");return e.context.service.wizard.createWizardStep(n,r,"")})}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/services/ExtendViewStepContent",{getContent:function(){var e=this;return Q.sap.require("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/steps/WizardStepContentHelper").then(function(t){jQuery.sap.require("sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.ExtendViewStepContent");var n=new sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.ExtendViewStepContent({context:e.context,wizardStepContentHelper:t}),r=e.context.i18n.getText("command_selectExtensionPoint");return e.context.service.wizard.createWizardStep(n,r,"")})}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/services/ReplaceViewStepContent",{getContent:function(){var e=this;return Q.sap.require("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/steps/WizardStepContentHelper").then(function(t){jQuery.sap.require("sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.ReplaceViewStepContent");var n=new sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.ReplaceViewStepContent({context:e.context,wizardStepContentHelper:t});n.addOptionsToReplaceWithCombo();var r=e.context.i18n.getText("command_replaceView");return e.context.service.wizard.createWizardStep(n,r,"")})}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/services/HideControlStepContent",{getContent:function(){var e=this;return Q.sap.require("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/steps/WizardStepContentHelper").then(function(t){jQuery.sap.require("sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.HideControlStepContent");var n=new sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.HideControlStepContent({context:e.context,wizardStepContentHelper:t}),r=e.context.i18n.getText("command_hideControlConfiguration");return e.context.service.wizard.createWizardStep(n,r,"")})}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/services/ParentProjectStepContent",{getContent:function(){var e=this,t=[];return t.push(Q.sap.require("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/dialogs/RemoteDialog")),t.push(Q.sap.require("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/dialogs/LocalDialog")),t.push(this.context.service.applicationsdialogservice.getContent()),Q.all(t).spread(function(t,n,r){jQuery.sap.require("sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.ParentProjectStepContent");var i=new sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.ParentProjectStepContent({context:e.context,localDialog:n,remoteDialog:t,applicationsDialog:r}),o=e.context.i18n.getText("ExProjWizard_ParentProjectAndName");return e.context.service.wizard.createWizardStep(i,o,"")})}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/services/SelectExtensionProjectStepContent",{getContent:function(){jQuery.sap.require("sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.SelectExtensionProjectStep");var e=new sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.SelectExtensionProjectStep({context:this.context}),t=this.context.i18n.getText("ExtensionWizard_SelectExtensionProject");return this.context.service.wizard.createWizardStep(e,t,"")}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/ui/services/SelectExtensionStepContent",{getContent:function(){jQuery.sap.require("sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.SelectExtensionStep");var e=new sap.watt.saptoolsets.fiori.project.plugin.fioriexttemplate.ui.steps.SelectExtensionStep({context:this.context}),t=this.context.i18n.getText("ExtensionWizard_Extension"),n=this.context.i18n.getText("ExtensionWizard_SelectExtensionToAdd");return this.context.service.wizard.createWizardStep(e,t,n)}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/services/ExtensionProject",["sap/watt/platform/plugin/utils/xml/XmlUtil","../util/ExtensionHook","../visualExt/util/ExtendUtil"],function(e,t,n){var r=function(){var r=this,i="Custom";this.getExtendUtil=function(){return n},this.createFolderName=function(e){return o(e,0)},this.isFolderExist=function(e,t){for(var n=t.length;n--;)if(t[n].name.toLowerCase()===e.toLowerCase())return!0;return!1};var o=function(e,t){var n=e;return t>0&&(n+=t),r.context.service.filesystem.documentProvider.getRoot().then(function(i){return i.getCurrentMetadata().then(function(i){var a=r.isFolderExist(n,i);return a===!0?(t+=1,o(e,t)):n})})};this.getExtensionNamespace=function(e){return r.context.service.filesystem.documentProvider.getDocument(e).then(function(e){return r.context.service.ui5projecthandler.getAppNamespace(e)})};var a=function(e,t){if(e)return r.context.service.repositorybrowser.setSelection(e,!0).done(),r.context.service.document.open(e);throw new Error(r.context.i18n.getText("i18n","ExtensionProjectSRV_wasNotFound",t))},s=function(e){return r.context.service.filesystem.documentProvider.getDocument(e).then(function(t){return a(t,e)})};this.openDocument=function(e,t,n,i,o){return r.context.service.filesystem.documentProvider.getDocument(e).then(function(u){return u.refresh().then(function(){return r.context.service.ui5projecthandler.getHandlerDocument(u).then(function(c){return a(c,c.getTitle()).then(function(){return r.context.service.ui5projecthandler.getAllExtensions(u).then(function(a){return r.context.service.ui5projecthandler.getAppNamespace(u).then(function(r){var u=t.customizationId;if(!u||!n)return Q();var c=a[u][n],l=null;if("sap.ui.viewExtensions"===u){var p=c[i];l=p[t.resourceTypeName]}else l=c[t.resourceTypeName];if(!l)return Q();var f=e;return("string"==typeof o||o instanceof String)&&""!==o&&(f=f+"/"+o.replace("/","")),f+=l.replace(r,"").replace(/\./g,"/"),s(f+t.resourceSuffix)})})})})})}).fail(function(e){throw r.context.service.log.error("ExtensionProject","An error has occured. "+e,["user"]).done(),e})},this.openLayoutEditor=function(e,t,n,i){var o=t.resourceInfo.originalId||t.resourceInfo.id,a=t.attributes.name;return r.context.service.filesystem.documentProvider.getDocument(e).then(function(t){return t.refresh().then(function(){return r.context.service.ui5projecthandler.getAllExtensions(t).then(function(s){return r.context.service.ui5projecthandler.getAppNamespace(t).then(function(t){var u=n.customizationId;if(!u||!o)return Q();var c=s[u][o],l=null;if("sap.ui.viewExtensions"===u){var p=c[a];l=p[n.resourceTypeName]}else l=c[n.resourceTypeName];if(!l)return Q();var f=e;return("string"==typeof i||i instanceof String)&&""!==i&&(f=f+"/"+i.replace("/","")),f=f+l.replace(t,"").replace(/\./g,"/")+n.resourceSuffix,r.context.service.filesystem.documentProvider.getDocument(f).then(function(e){if(e)return r.context.service.repositorybrowser.setSelection(e,!0).done(),r.context.service.content.open(e,r.context.service.ui5wysiwygeditor);throw new Error(r.context.i18n.getText("i18n","ExtensionProjectSRV_wasNotFound",f))})})})})}).fail(function(e){throw r.context.service.log.error("ExtensionProject","An error has occurred. "+e,["user"]).done(),e})},this.getExtendedResourceInfo=function(e,t,n,i,o,a){var s=r._getExtendedResourceMetadata(n,i,e,t,o,a);return s.extendedResourcePath?r.context.service.filesystem.documentProvider.getDocument(s.extendedResourcePath).then(function(e){return e?e.getContent().then(function(t){var n=e.getEntity().getName();return r._getExtendedResourceInfo(t,i,n,s.resourceSuffix,s.replacedResourceId,s.originalResourceId)}):{}}):{}},this._getExtendedResourceInfo=function(t,n,r,i,o,a){var s=t;"view"===n&&(s=e.stringToXml(t));var u={name:r.replace(i,""),id:o,resourceContent:s,originalId:a,originalName:a.substr(a.lastIndexOf(".")+1),isExtended:!0,type:n};return u},this._getResourceConsts=function(e){var t={customizationId:"sap.ui.viewReplacements",resourceSuffix:".view.xml",resourceTypeName:"viewName"};return"controller"===e&&(t.customizationId="sap.ui.controllerExtensions",t.resourceSuffix=".controller.js",t.resourceTypeName="controllerName"),t},this._getExtendedResourceMetadata=function(e,t,n,i,o,a){var s=r._getResourceConsts(t);s.originalResourceId=e.id;var u=o[s.customizationId];if(u){var c=u[s.originalResourceId];if(c)return s.replacedResourceId=c[s.resourceTypeName],s.extendedResourcePath=r.getExtendUtil().getCustomResourceFilePath(s.replacedResourceId,a,n,s.resourceSuffix,i),s}return s},this.getCustomizingJson=function(e){return r.context.service.filesystem.documentProvider.getDocument(e).then(function(e){return r.context.service.ui5projecthandler.getAllExtensions(e)})},this.updateFileContent=function(e,t){return e.setContent(t).then(function(){return e.save()})},this.getResourceLocation=function(e){return r.context.service.filesystem.documentProvider.getDocument(e).then(function(t){return t.getCurrentMetadata(!0).then(function(t){for(var n=0;n<t.length;n++){var r=t[n];
if("Component.js"===r.name&&!r.folder){var i=r.parentPath;if(i=i.replace(e,"")+"/",0===i.indexOf("/"))return i=i.substring(1)}}return""})})},this.getExtensibilityModel=function(e){var t=Q.defer(),n=this,r=e+"/.project.json";return this.context.service.filesystem.documentProvider.getDocument(r).then(function(r){if(r)r.getContent().then(function(e){if(0===e.length)t.reject(n.context.i18n.getText("i18n","ExtensionProjectSRV_ProjectJsonEmpty"));else try{var r=jQuery.parseJSON(e);t.resolve(r)}catch(o){i=n.context.i18n.getText("i18n","ExtensionProjectSRV_ProjectJsonContentInvalid"),t.reject(i)}}).fail(function(){t.reject(n.context.i18n.getText("i18n","ExtensionProjectSRV_ProjectJsonNotFound",[e]))});else{var i={};i=n.context.i18n.getText("i18n","ExtensionProjectSRV_ProjectJsonNotFound",[e]),t.reject(i)}}).fail(function(r){r=n.context.i18n.getText("i18n","ExtensionProjectSRV_wasNotFound",[e]),t.reject(r)}),t.promise},this.isExtendable=function(e,t,n){return this.getCustomizingJson(e).then(function(e){var r=e["sap.ui.viewReplacements"];if("sap.ui.viewReplacements"===t){if(r&&n in r)return!1}else if(("sap.ui.viewExtensions"===t||"sap.ui.viewModifications"===t)&&r&&n in r)return!1;return!0})},this.getExtensionRevision=function(e){var t=0,n=e.fiori.extensionCommon;if(!n.resourceName)return t;var o=n.resourceLocationPath+n.resourceName;n.extensionId&&(o=o+"_"+n.extensionId),o=o.replace(/%2f/gm,"/");var a=n.originalId&&!jQuery.sap.endsWith(n.originalId,n.resourceName);a||(o+=i);var s=e.fiori.extensionCommon.resourceSuffix,u=Q.defer();return r.findExtensionRevision(e,o,s,t,u),u.promise},this.findExtensionRevision=function(e,t,n,i,o){var a=e.extensionProjectName+"/"+t;i>0&&(a+=i),a+=n,r.context.service.filesystem.documentProvider.getRoot().then(function(s){s.objectExists(a).then(function(a){a===!0?(i+=1,r.findExtensionRevision(e,t,n,i,o)):(e.fiori.extensionCommon.extensionFilePath=i>0?t+i:t,o.resolve(i))}).fail(function(e){o.reject(e)})}).fail(function(e){o.reject(e)})},this.validateExtensionProject=function(e){var t={};return"/"===e?(t={isValid:!1,message:this.context.i18n.getText("i18n","ExtensionProjectSRV_ExtensionProjectMustPointToExistingFolder")},Q(t)):this.getExtensibilityModel(e).then(function(e){return t=!e.extensibility||jQuery.isEmptyObject(e.extensibility.views)||jQuery.isEmptyObject(e.extensibility.controllers)?{isValid:!1,message:r.context.i18n.getText("i18n","ExtensionProjectSRV_ExtensionProjectNotValid")}:{isValid:!0,projectJson:e,extensibility:e.extensibility}}).fail(function(e){return t={isValid:!1,message:e}})},this.isHookExtendedInController=function(e,n,i){return r.getExtendUtil().getCustomControllerDocument(n,i,r.context).then(function(n){return n.getContent().then(function(n){try{return t.isHookExtended(e,n)}catch(i){var o=r.context.i18n.getText("i18n","ExtensionProject_IsHookExtendedWizardErr",[e,i]);throw r.context.service.log.error(r.context.i18n.getText("i18n","Extension_LogTitle"),o,["system"]).done(),new Error(o)}})})}};return r}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/services/ParentProjectController",["sap/watt/platform/plugin/utils/xml/XmlUtil","../util/ExtensionHook","sap/watt/lib/lodash/lodash"],function(e,t,n){var r=function(){var r=this,i=".view.xml",o=".fragment.xml",a=".controller.js",s="-dbg.controller.js",u="Component.js",c="Workspace",l="hcp",p="BSP",f="abaprep",d=function(e){if(e===c)return r.context.service.workspaceparentproject;if(e===p||e===f)return r.context.service.bspparentproject;if(e===l)return r.context.service.heliumparentproject;throw new Error(r.context.i18n.getText("i18n","ParentProjectSRV_UnknownExtensibilityType"))},h=function(e){var t=/"?manifest"?\s*:\s*"json"/;return t.test(e)};this.getGuidelinesDocument=function(e,t,n){var i=e.manifest,o=e.configuration,a=e.component;return this.getDocument(a,"file",t,n).then(function(e){return e.getContent().then(function(a){return i&&h(a)?r.getDocument(i,"file",t,n):o?r.getDocument(o,"file",t,n):e})})},this.import=function(e,t,n,r){return d(r).import(e,t,n)},this.getDocument=function(e,t,n,r,i){return d(r).getDocument(e,t,n,i)},this.geti18nFolderFiles=function(e,t,n){return d(n).geti18nFolderFiles(e,t)},this.getModelFolderFiles=function(e,t,n){return d(n).getModelFolderFiles(e,t)},this.getFileResourcesInfo=function(e,t,n){return d(n).getFileResourcesInfo(e,t)},this.getRuntimeDestinations=function(e,t,n){return n?this.getDocument(n,"file",e,t).then(function(n){return n.getContent().then(function(n){if(n&&""!==n){var r=JSON.parse(n),i=r.routes;return d(t).getRuntimeDestinations(e,i)}return d(t).getRuntimeDestinations(e,[])})}):d(t).getRuntimeDestinations(e,[])},this.getResources=function(e,t){var n=[],r=e.extensibility;if(void 0===r[t])return n;for(var i=Object.keys(r[t]),o=0;o<i.length;o++){var a=i[o],s=r[t][a],c={};c.name=a;var l=r.component.replace(u,""),p=s.replace(l,""),f=p.indexOf(a);p=p.substring(0,f),c.id=(r.namespace+"."+p+a).replace(/\//g,".").replace(/%2f/g,"."),c.parentNamespace=r.namespace,c.path=s,c.resourceLocationPath=p,c.type=t,"/"===p||"%2f"===p?n.splice(0,0,c):n.push(c)}return n};var m=function(t,n,a,s,u){return r.getDocument(t.path,"file",u,n).then(function(t){return t?"file"===t.getEntity().getType()?jQuery.sap.endsWith(t.getEntity().getName(),i)||jQuery.sap.endsWith(t.getEntity().getName(),o)?t.getContent().then(function(t){var n=t;"string"==typeof n&&(n=jQuery.sap.parseXML(t));var r=e.getXmlParameters(n,a,s);return r}):[]:[]:[]})};this.getExtensionPoints=function(e,t,n){return m(e,t,"ExtensionPoint","name",n)},this.getControlIds=function(e,t,n){return m(e,t,"*","id",n)},this.isSubComponentResource=function(e,t){for(var r=0;r<t.length;r++)if(n.startsWith(e,t[r]))return!0;return!1},this.getComponentsInfo=function(e){for(var t,n=null,r=[],i=0;i<e.length;i++){var o=e[i],a=o.parentFolderPath,s=o.path,c=o.name;c===u&&(null===n?(n=a,t=s):a.split("/").length<n.split("/").length||""===a?(r.push(n),n=a,t=s):r.push(a))}return{rootComponentPath:n,rootComponentFilePath:t,subComponentPaths:r}},this.adjustBuildResources=function(e,t,r,i){if(r===c&&(t=t?"/"+t:t,t&&!n.startsWith(t,i)&&(t=i+t)),t&&t!==i)for(var o=e.length-1;o>=0;o--){var a=e[o].parentFolderPath;r===c?n.startsWith(a,t)&&e.splice(o,1):n.startsWith(a,t)||e.splice(o,1)}},this.getBuildFolderPath=function(e,t,n){switch(n){case c:return r.context.service.filesystem.documentProvider.getDocument(e).then(function(e){return r.context.service.builder.getTargetFolder(e).then(function(e){return e.getEntity().getTitle()}).fail(function(){return null})});case p:case f:return Q(null);case l:return r.context.service.heliumparentproject.getDocument(".project.json","file",t,!1).then(function(e){return e.getContent().then(function(e){var t=jQuery.parseJSON(e);return r.context.service.builder.getTargetFolderByProjectSettings(t).then(function(e){return e})})}).fail(function(){return null});default:throw new Error(r.context.i18n.getText("i18n","ParentProjectSRV_UnknownExtensibilityType"))}},this.isValidMetadataLocation=function(e,t,r,i){var o=decodeURIComponent(e);return r===l&&i&&(t="/"+t),n.startsWith(o,t+"/"+"model/metadata.xml")||n.startsWith(o,t+"/"+"localService/metadata.xml")?!0:!1},this.validateParentProject=function(e,t,u){var l={},p={};return p.extensibility={},p.extensibility.controllers={},p.extensibility.views={},p.extensibility.fragments={},p.extensibility.type=c,t&&(p.extensibility.type=t),r.getFileResourcesInfo(e,u,p.extensibility.type).then(function(f){return r.getBuildFolderPath(e,u,p.extensibility.type).then(function(d){r.adjustBuildResources(f,d,p.extensibility.type,e);var m=0,g=r.getComponentsInfo(f);p.extensibility.component=g.rootComponentFilePath;for(var v=0;v<f.length;v++){var y=f[v],_=y.path,x=y.parentFolderPath,b=y.name;if(n.endsWith(_,i)&&!r.isSubComponentResource(x,g.subComponentPaths)){var w=b.replace(i,"");p.extensibility.views[w]=_}if(n.endsWith(_,o)&&!r.isSubComponentResource(x,g.subComponentPaths)){var w=b.replace(o,"");p.extensibility.fragments[w]=_}if(n.endsWith(_,a)&&!r.isSubComponentResource(x,g.subComponentPaths)&&!n.endsWith(_,s)&&-1===decodeURIComponent(_).indexOf(e+"/webapp/test")){var w=b.replace(a,"");p.extensibility.controllers[w]=_}"manifest.json"!==b||r.isSubComponentResource(x,g.subComponentPaths)||(p.extensibility.manifest=_),"Configuration.js"!==b||r.isSubComponentResource(x,g.subComponentPaths)||(p.extensibility.configuration=_),"neo-app.json"===b&&(p.neoAppPath=_,m++),".project.json"===b&&_===e+"/.project.json"&&(p.extensibility.projectjson=_),"metadata.xml"===b&&r.isValidMetadataLocation(_,g.rootComponentPath,t,d)&&(p.metadataPath=_)}var S;return S=p.extensibility.manifest?r.getDocument(p.extensibility.component,"file",u,p.extensibility.type).then(function(e){return e.getContent().then(function(e){h(e)||(p.extensibility.manifest=void 0)})}):Q(),S.then(function(){return p.extensibility.type===c&&e.split("/").length>2?(l.isValid=!1,l.message=r.context.i18n.getText("i18n","ParentProjectSRV_SelectSubFolderWorkspaceError"),l):g.rootComponentFilePath?m>1?(l.isValid=!1,l.message=r.context.i18n.getText("i18n","ParentProjectSRV_MultipleNeoApp_JSON")+" "+r.context.i18n.getText("i18n","ParentProjectSRV_OneNeoappFileAllowed"),l):jQuery.isEmptyObject(p.extensibility.views)||jQuery.isEmptyObject(p.extensibility.controllers)?(l.isValid=!1,l.message=r.context.i18n.getText("i18n","ParentProjectSRV_NoViewsOrControllers"),l):(l.extensionProjectName=arguments[0],l.isValid=!0,l.model=p,l):(l.isValid=!1,l.message=r.context.i18n.getText("i18n","ParentProjectSRV_Component_jsNotFoundInSpecifiedFolder"),l)})})})},this.getMockPreview=function(e,t){return e.extensibility.projectjson?r.getDocument(e.extensibility.projectjson,"file",t,e.extensibility.type).then(function(e){return e?e.getContent().then(function(e){var t=jQuery.parseJSON(e);return t.mockpreview}):Q()}):Q()},this.getViewInfo=function(t,n,o){return r.getDocument(t.path,"file",o,n).then(function(n){if(null!==n&&"file"===n.getEntity().getType()){var r=n.getEntity().getName();return jQuery.sap.endsWith(r,i)?n.getContent().then(function(n){var o=e.stringToXml(n),a=e.getXmlParameters(o,"ExtensionPoint","name"),s=e.getXmlParameters(o,"*","id"),u={name:r.replace(i,""),resourceContent:n,extensionPoints:a,controlIds:s,id:t.id,path:t.path,resourceLocationPath:t.resourceLocationPath,type:"view"};return u}):{}}return{}})},this.getFragmentInfo=function(t,n,i){return r.getDocument(t.path,"file",i,n).then(function(n){if(null!==n&&"file"===n.getEntity().getType()){var r=n.getEntity().getName();return jQuery.sap.endsWith(r,o)?n.getContent().then(function(n){var i=e.stringToXml(n),a=e.getXmlParameters(i,"ExtensionPoint","name"),s=e.getXmlParameters(i,"*","id"),u={name:r.replace(o,""),fragmentXml:n,extensionPoints:a,controlIds:s,id:t.id,path:t.path,resourceLocationPath:t.resourceLocationPath,type:"fragment"};return u}):{}}return{}})},this.getControllerInfo=function(e,n,i){return r.getDocument(e.path,"file",i,n).then(function(n){if(null!==n&&"file"===n.getEntity().getType()){var r=n.getEntity().getName();return jQuery.sap.endsWith(r,a)?n.getContent().then(function(n){var i={name:r.replace(a,""),controllerJs:n,id:e.id,path:e.path,resourceLocationPath:e.resourceLocationPath,type:"controller",hooks:t.getHooks(n)};return i}):{}}return{}})}};return r}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/services/WorkspaceParentProject",[],function(){var e=function(){var e=this,t="/",n=function(e){for(var t=e,n=!0,r=sap.watt.getEnv("orion_server"),i=0;i<t.length;i++)if(t[i].path===r){n=!1;break}if(n){var o={path:r,target:{type:"service",name:"orion",preferLocal:!0},description:"Orion Server"};t.push(o)}return t};this.getRuntimeDestinations=function(e,t){return n(t)},this.getFileResourcesInfo=function(t){return e.context.service.filesystem.documentProvider.getDocument(t).then(function(e){return e.getCurrentMetadata(!0).then(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(!r.folder){var i={name:r.name,path:r.path,parentFolderPath:r.path.substring(0,r.path.lastIndexOf("/"))};t.push(i)}}return t})})},this.geti18nFolderFiles=function(t){return e.context.service.filesystem.documentProvider.getDocument(t).then(function(e){return e.getFolderContent()})},this.getModelFolderFiles=function(n){var r=[],i=n.substring(0,n.lastIndexOf(t));return e.context.service.filesystem.documentProvider.getDocument(i).then(function(t){return t.getCurrentMetadata(!0).then(function(t){for(var n=0;n<t.length;n++)r.push(e.context.service.filesystem.documentProvider.getDocument(t[n].path));return Q.all(r)})})},this.getDocument=function(t){return e.context.service.filesystem.documentProvider.getDocument(t)},this.import=function(){}};return e}),define("sap/watt/platform/plugin/utils/common/RemoteDocument",[],function(){var e=function(e,t,n,r,i,o,a){this.getContent=function(){return Q(n)},this.getEntity=function(){return{getType:function(){return t},getName:function(){return e},getFullPath:function(){return r?r:""},getParentPath:function(){if(r){var e=r,t=r.lastIndexOf("/");return-1!==t&&(e=e.substring(0,t)),e}return""},getParent:function(){return i},getContentUrl:function(){return o},getParentContentUrl:function(){return a},setParent:function(e){i=e},setContentUrl:function(e){o=e},setParentContentUrl:function(e){a=e}}}};return e}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/services/WorkspaceApplicationFactory",["sap/watt/platform/plugin/utils/common/RemoteDocument","sap/watt/lib/jszip/jszip-shim"],function(e,t){var n=function(){var n=this;this._normalizeEOLtoWindowsStyle=function(e){return e.replace(/(?:\r\n|\r|\n)/g,"\r\n")};var r=function(e,t){var n=e.lastIndexOf(t);n=n>0?n-1:0;var r=e.substring(0,n);return""===r?"":"/"+r},i=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},o=function(e){var t=i(e.name,"/");return e.options.dir||t?!0:!1},a=function(e){var t="",n=e.lastIndexOf(".");return n>0&&(t=e.substr(n+1)),t},s=function(e){switch(a(e).toLowerCase()){case"jpg":case"jpeg":case"gif":case"ico":case"png":case"ttf":case"zip":case"jar":case"war":case"bmp":case"tif":case"tiff":return!0;default:return!1}},u=function(e,t){if(t.indexOf(".git")>-1)return!0;for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1},c=function(e){return e.getFolderContent().then(function(e){for(var t=0;t<e.length;t++){var n=e[t];if(".Ui5RepositoryIgnore"===n.getEntity().getName())return n}})};this._buildIgnoreList=function(e){var t=[];return c(e).then(function(e){return e?e.getContent().then(function(e){for(var n=e.split("\n"),r=0;r<n.length;r++)n[r]=n[r].trim(),n[r].length>0&&t.push(n[r]);return t}):[]})},this._onZipLoad=function(i,a,c,l){var p={};p.localPath=a.getEntity().getFullPath();var f=[],d=new t(i.target.result),h=d.files,m=p.localPath;for(var g in h)if(h.hasOwnProperty(g)&&!u(c,g)){var v="",y="folder",_=null,x=null,b=null;o(h[g])?(b=g.split("/"),_=b[b.length-2],b.length-3>=0&&(x=b[b.length-3])):(y="file",b=g.split("/"),_=b[b.length-1],b.length-2>=0&&(x=b[b.length-2]),v=s(_)?h[g].asUint8Array():n._normalizeEOLtoWindowsStyle(h[g].asText()));var w=m+r(g,_),S=new e(_,y,v,w,x);f.push(S)}p.localProjectName=m,p.remoteDocuments=f,l.resolve(p)},this.getApplicationFromWorkspace=function(e){return e?e.getProject().then(function(t){return n._buildIgnoreList(t).then(function(t){return e.exportZip().then(function(r){var i=Q.defer(),o=new FileReader;return o.onload=function(r){n._onZipLoad(r,e,t,i)},o.readAsArrayBuffer(r),i.promise})})}):Q()}};return n}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/util/ExtensionProjectSettings",["sap/watt/lib/lodash/lodash"],function(e){return{createExtensibilityProjectSettings:function(e,t,n,r,i,o){var a=this;return e.params.model.extensibility?this.createMockPreview(e,n,r,i,o).then(function(){return a.createExtensibility(e,t).then(function(){return a.createBuild(e,t)})}):Q()},createExtensibility:function(e,t){var n=e.params.model.extensibility;n.projectjson=void 0;var r=e.params.targetDocument;return t.project.setProjectSettings("extensibility",n,r)},createBuild:function(e,t){var n=e.params.targetDocument,r={targetFolder:"dist",sourceFolder:"webapp",buildRequired:!0};return t.project.setProjectSettings("build",r,n)},createMockPreview:function(e,t,n,r,i){var o=e.params.model;if(o.metadataPath&&!o.connectionData){var a=o.extensibility.system,s=this;return t.getMockPreview(o,a).then(function(t){var n=e.params.targetDocument;if(t||(t={mockUri:"",loadCustomRequests:!1,loadJSONFiles:!1,metadataFilePath:"",mockRequestsFilePath:""}),t.metadataFilePath="",t.mockRequestsFilePath){var a=t.mockRequestsFilePath.lastIndexOf("/");t.mockRequestsFilePath="localService"+t.mockRequestsFilePath.substring(a)}return t.mockUri?i.updateSettings(n,t):s.getParentServiceUrl(r,o).then(function(e){return e&&e.length>0&&(t.mockUri=e),i.updateSettings(n,t)})})}return Q()},getParentServiceUrl:function(t,n){return t.getDataSourcesByType(n.parentGuidelinesDocument,"OData").then(function(t){var n;if(t){var r=e.values(t);r[0]&&(n=r[0].uri)}return n}).fail(function(){return null})}}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/services/ExtensionGenerationHandler",["../manager/ComponentManager","../util/ExtensionProjectSettings"],function(e,t){return{onAfterGeneration:function(n){var r=this.context.service;return Q.all([t.createExtensibilityProjectSettings(n,r.setting,r.parentproject,r.filesystem,r.ui5projecthandler,r.mockpreview),e.generatedEventHandler(n,this.context.service.uicontent,this.context.service.extensionproject)])}}}),define("sap.watt.saptoolsets.fiori.project.fioriexttemplate/services/ParentCode",[],function(){var e;return{PARENT_PREFIX:"version-parentcode-",_oDocument:null,_DocumentEditorMap:{},init:function(){return this.context.service.perspective.attachEvent("splitterPositionChanged",this.onSplitterPositionChanged,this),this.context.service.content.attachEvent("tabDoubleClicked",this.onSplitterPositionChanged,this),Q.sap.require("sap.watt.ideplatform.compare/lib/built-compare").then(function(t){e=t})},configure:function(e){this.context.service.resource.includeStyles(e.styles).done()},getContent:function(){var e,t=this;return t._DocumentEditorMap[this._oDocument.getKeyString()]&&t._DocumentEditorMap[this._oDocument.getKeyString()].wrapperDiv?e=t._DocumentEditorMap[this._oDocument.getKeyString()].wrapperDiv:(e=new sap.ui.core.HTML({content:"<div id='"+t._getDivId(this._oDocument)+"' style='width=100%;height:100%;background-color:white;'"+' class="rdeCompare"'+"'></div>"}),t._DocumentEditorMap[this._oDocument.getKeyString()].wrapperDiv=e),e},open:function(e){this._oDocument=e;var t=$("div[id='"+this._getDivId(e)+"']");return t.length>0&&t.empty(),this._openPreview(this._oDocument)},close:function(e){var t=$("div[id='"+this._getDivId(e)+"']");t.length>0&&t.empty()},flush:function(){return Q()},setVisible:function(e){return Q(e)},isVisible:function(){return Q()},isAvailable:function(){return Q()},getTitle:function(){return this._oDocument.getEntity().getName()+" [read only]"},getTooltip:function(){return this._oDocument.getEntity().getFullPath()+" [read only]"},getState:function(){return Q()},readOnly:function(e,t){this._oDocument=e;var n=this._getDivId(e),r=e.getEntity().getName();/.*\.(xml)$/.test(r)&&(r=r.substring(0,r.lastIndexOf(".xml"))+".html");var i={viewType:"inline",parentDivId:n,newFile:{InitialContent:t,readonly:!0,Name:r},oldFile:{readonly:!0,Content:t,Name:r}};this._DocumentEditorMap[e.getKeyString()]||(this._DocumentEditorMap[e.getKeyString()]={}),this._DocumentEditorMap[e.getKeyString()].options=i,this.context.service.content.open(e,this.context.service.parentcode).done()},getFocusElement:function(){return document.getElementById(this._getDivId(this._oDocument))},getSelection:function(){return{document:this._oDocument}},onSplitterPositionChanged:function(){if(this._oDocument&&this._DocumentEditorMap&&this._DocumentEditorMap[this._oDocument.getKeyString()]){var e=this._DocumentEditorMap[this._oDocument.getKeyString()].editor;if(e&&e.getCompareView()&&e.getCompareView().getWidget()){var t=e.getCompareView().getWidget();"twoWay"===t.type&&t._uiFactory.getSplitter()._resize()}}},isRestorable:function(){return!1},_openPreview:function(t){var n=this,r=this._DocumentEditorMap[t.getKeyString()].options;return Q(r.newFile.InitialContent?r.newFile.InitialContent:t.getContent()).then(function(i){r.newFile.Content=i,n._DocumentEditorMap[t.getKeyString()].editor=new e(r,"",r.viewType),n._DocumentEditorMap[t.getKeyString()].editor.getCompareView().removeRulers(),n._DocumentEditorMap[t.getKeyString()].editor.getCompareView()._textView.redraw()})},_getDivId:function(e){return this.PARENT_PREFIX+e.getKeyString()}}}),define("sap.watt.saptoolsets.fiori.project.uiadaptation/command/AdaptUi",["sap/watt/lib/lodash/lodash"],function(e){var t=null,n=null,r=function(){return n.context.service.uiadaptation.openAdaptUI(t)},i=function(){return sap.watt.getEnv("internal")?!0:!1},o=function(){return n=this,this.context.service.selection.assertNotEmpty().then(function(e){var t=e[0].document;return t.getProject()}).then(function(e){t=e;var r=e.getEntity().getFullPath()+"/webapp";return n.context.service.filesystem.documentProvider.getDocument(r)}).then(function(r){return r?Q.all([n.context.service.projectType.getProjectTypes(t),n.context.service.uiadaptation.getUIAdaptationProjectTypeId()]).spread(function(t,n){return e.isArray(t)&&e.contains(e.pluck(t,"id"),n)}):!1})};return{execute:r,isAvailable:i,isEnabled:o}}),define("sap.watt.saptoolsets.fiori.project.uiadaptation/command/DeployChangesToABAP",["sap/watt/lib/lodash/lodash"],function(e){var t=null,n=function(){var e=this;return e.context.service.uiadaptation.loadChangesFromWorkspace(t).then(function(t){return e.context.service.lrepconnector.updateChange(t).then(function(){})})},r=function(){return!1},i=function(){var n=this;return this.context.service.selection.assertNotEmpty().then(function(e){var t=e[0].document;return t.getProject()}).then(function(e){return t=e,Q.all([n.context.service.projectType.getProjectTypes(t),n.context.service.uiadaptation.getUIAdaptationProjectTypeId()])}).spread(function(t,n){return e.isArray(t)&&e.contains(e.pluck(t,"id"),n)})};return{execute:n,isAvailable:r,isEnabled:i}}),define("sap.watt.saptoolsets.fiori.project.uiadaptation/command/RunWithChanges",["sap/watt/lib/lodash/lodash"],function(e){var t=null,n=function(e,n){return this.context.service.uiadaptation.previewAppWithChanges(t,n)},r=function(){return this.isEnabled()},i=function(){if(sap.watt.getEnv("internal")){var n=this;return this.context.service.selection.assertNotEmpty().then(function(e){var t=e[0].document;return t.getProject()}).then(function(e){t=e;var r=e.getEntity().getFullPath()+"/webapp";return n.context.service.filesystem.documentProvider.getDocument(r)}).then(function(r){return r?Q.all([n.context.service.projectType.getProjectTypes(t),n.context.service.uiadaptation.getUIAdaptationProjectTypeId()]).spread(function(t,n){return e.isArray(t)&&e.contains(e.pluck(t,"id"),n)}):!1})}return!1};return{execute:n,isAvailable:r,isEnabled:i}}),define("sap.watt.saptoolsets.fiori.project.uiadaptation/util/UIAdaptationMessageHandler",[],function(){var e=function(e,t,n,r){var i=window.addEventListener?"addEventListener":"attachEvent",o=window[i],a="attachEvent"===i?"onmessage":"message",s=function(e){if("java"===sap.watt.getEnv("server_type")||"local_hcproxy"===sap.watt.getEnv("server_type"))return jQuery.sap.startsWith(e.toLowerCase(),this.location.protocol+"//"+this.location.hostname)?!0:!1;for(var n=0;n<t.length;n++)if(jQuery.sap.startsWith(t[n].toLowerCase(),e.toLowerCase()))return!0;return!1},u=function(e){if(e.stopImmediatePropagation(),e.cancelBubble=!0,t&&t instanceof Array&&s(e.origin)){var n=e.data;n.action&&"CREATE"===n.action&&n.change?r.createChange(n.change).done():"RTA_STOPPED"===n?r.onClose():"ADAPT_UI"===n?r.onSwitchToAdaptUi().done():"STOP_ADAPT_UI"===n&&r.onSwitchToPreview()}};o(a,u,!1),this.postMessage=function(t){e&&e.contentWindow&&e.contentWindow.postMessage(t,n)},this.detachHandler=function(){window.removeEventListener?window.removeEventListener("message",u,!1):window.detachEvent("onmessage",u)}};return e}),define("sap.watt.saptoolsets.fiori.project.uiadaptation/ui/UIAdaptationPane.controller",["../util/UIAdaptationMessageHandler"],function(e){return sap.ui.controller("sap.watt.saptoolsets.fiori.project.plugin.uiadaptation.ui.UIAdaptationPane",{_oContext:null,_oMessageHandler:null,_oProjectDocument:null,_sComponentName:null,_sFrameUrl:null,_sIdeSrc:null,_oIframe:null,_oClosingPromise:null,onInit:function(){this._oClosingPromise=Q.defer();var e=this.getView().getViewData();this._oContext=e.oContext,this._sComponentName=e.sComponentName,this._sFrameUrl=e.sFrameUrl+"&sap-ui-layer="+e.sLayer,this._sIdeSrc=e.sIdeSrc,this._oProjectDocument=e.oProjectDoc},onAfterRendering:function(){if(!this._oIframe){var e=this.getView().createId("adaptUiPreview");this._oIframe=$("#"+e).load({oController:this},this._onPreviewLoad),this._oContext.service.preview.showPreview(this._sFrameUrl,this._oIframe[0].contentWindow,!1,{AdaptUIDropDown:{id:"AdaptUIDropDown","default":"ADAPT_UI",items:{ADAPT_UI:{label:this._oContext.i18n.getText("i18n","AdaptationPane_AdaptUI")},STOP_ADAPT_UI:{label:this._oContext.i18n.getText("i18n","AdaptationPane_PreviewMode")}}}}).done()}},getAppComponentName:function(){return this._sComponentName},getChangesFromWorkspace:function(){return this._oContext.service.uiadaptation.loadChangesFromWorkspace(this._oProjectDocument)},createChange:function(e){var t=this;return this._oContext.service.uiadaptation.saveChangeToWorkspace(this._oProjectDocument,e).then(function(){t._oMessageHandler.postMessage({action:"CHANGE_SAVED"})}).fail(function(e){t._oMessageHandler.postMessage({action:"CHANGE_SAVE_FAILED",message:e.message||e})})},getVariant:function(){return this._oContext.service.uiadaptation.getVariantForLREPChanges(this._oProjectDocument)},onSwitchToAdaptUi:function(){var e=this;return this.getVariant().then(function(t){e._oMessageHandler.postMessage({action:"START_RTA",variant:t})})},onSwitchToPreview:function(){this._oMessageHandler.postMessage({action:"STOP_RTA"})},onLoadChangesFail:function(e){sap.ui.commons.MessageBox.alert(this._oContext.i18n.getText("i18n","AdaptationPane_loadChangesFailed")+e)},onClose:function(){this._oClosingPromise.resolve()},_onPreviewLoad:function(t){var n=this,r=t.data.oController;try{$(n).contents()}catch(i){return}var o=$(n).contents().find("#display");o.load(function(){var t=this.src;("java"===sap.watt.getEnv("server_type")||"local_hcproxy"===sap.watt.getEnv("server_type"))&&(t="*"),r._oMessageHandler&&r._oMessageHandler.detachHandler();var n=[];n.push(r._sIdeSrc),n.push(this.src),r._oMessageHandler=new e(this,n,t,r),r.getChangesFromWorkspace().then(function(e){r._oMessageHandler.postMessage({action:"CHANGES",changes:e,componentName:r.getAppComponentName()})}).fail(function(e){r._oMessageHandler.postMessage({action:"LOAD_CHANGES_ERROR",error:e.message}),r.onLoadChangesFail(e.message)}).finally(function(){return r.onSwitchToAdaptUi()}).done()})},onBeforeExit:function(){this._oMessageHandler?this._oMessageHandler.postMessage({action:"STOP_RTA",type:"close"}):this._oClosingPromise.resolve();var e=this;return this._oClosingPromise.promise.then(function(){e._oMessageHandler&&(e._oMessageHandler.detachHandler(),e._oMessageHandler=null)})}})}),define("sap.watt.saptoolsets.fiori.project.uiadaptation/service/UIAdaptation",["sap/watt/lib/lodash/lodash","../ui/UIAdaptationPane.controller"],function(e){var t=function(){var t=this,n="uiadaptation",r=function(e){return'<script src="'+e+'" type="text/javascript"></script>'};this.createUIAdaptationIndexHTML=function(n,i,o){var a=e.map(o,r);return t.context.service.template.getTemplate("uiadaptation.uiadaptationpanehtml").then(function(e){var r={sComponentName:i,scriptsTags:a.join("\n")};return t.context.service.generation.generate(n.getEntity().getFullPath(),e,r,!0,n)}).then(function(){return n.getChild("UIAdaptation_index.html")}).then(function(e){return t.context.service.preview.getPreviewUrl(e).then(function(e){return e.toString()})})},this.previewAppWithChanges=function(e,n){return t.getApplicationComponentName(e).then(function(n){return t.createChangesPreviewIndexHTML(e,n)}).then(function(){return e.getChild("changes_preview_index.html")}).then(function(e){return t.context.service.preview.getPreviewUrl(e)}).then(function(e){return t.context.service.preview.showPreview(e,n)})},this.createChangesPreviewIndexHTML=function(e,n){var r={sComponentName:n,sAppResourcesPath:"/webapp",sChangesFolderPath:"/webapp/changes"};return t.context.service.template.getTemplate("uiadaptation.changespreviewhtml").then(function(n){return t.context.service.generation.generate(e.getEntity().getFullPath(),n,r,!0,e)})},this.getApplicationComponentName=function(e){return t.context.service.setting.project.getProjectSettings(n,e).then(function(n){return n&&n.componentname?n.componentname:t.context.service.ui5projecthandler.getAppNamespace(e)})},this.getVariantForLREPChanges=function(){return null},this.getUIAdaptationProjectTypeId=function(){return"sap.watt.saptoolsets.fiori.project.uiadaptation"};var i=function(e,n,r,i){return r.creation=i,n.createFile(e).then(function(e){return t.context.service.beautifierProcessor.beautify(JSON.stringify(r),"json").then(function(t){return e.setContent(t).then(function(){return e.save()})})})},o=function(e,t){var n,r,o,a=[],s=new Date;for(n=0;n<e.length;n++)r=e[n].fileName,o=r+".change",s.setMilliseconds(s.getMilliseconds()+1),a.push(i(o,t,e[n],s.toISOString()));return Q.all(a)};this.saveChangeToWorkspace=function(e,n){var r=e.getEntity().getFullPath()+"/webapp",i=r+"/changes";return t.context.service.filesystem.documentProvider.getDocument(i).then(function(e){return e?o(n,e):t.context.service.filesystem.documentProvider.getDocument(r).then(function(e){return e.createFolder("changes").then(function(e){return o(n,e)})})})},this.loadChangesFromWorkspace=function(e){var n=e.getEntity().getFullPath()+"/webapp/changes";return t.context.service.filesystem.documentProvider.getDocument(n).then(function(e){var t=[];return e?e.getFolderContent().then(function(e){var n,r,i,o=[];for(n=0;n<e.length;n++)o.push(e[n].getContent());return Q.all(o).then(function(e){for(r=0;r<e.length;r++)i=JSON.parse(e[r]),t.push(i);return t.sort(function(e,t){return new Date(e.creation)-new Date(t.creation)}),t})}):t})};var a=function(e){var n;return t.getApplicationComponentName(e).then(function(r){n=r;var i=[],o=require.toUrl("sap.watt.saptoolsets.fiori.project.uiadaptation/util/UIAdaptationTransceiver.js");return i.push(o),t.createUIAdaptationIndexHTML(e,r,i)}).then(function(e){return{sComponent:n,sFrameUrl:e}})};this.openAdaptUI=function(e){return sap.watt.includeCSS(require.toUrl("sap.watt.saptoolsets.fiori.project.uiadaptation/ui/css/UIAdaptation.css")),a(e).then(function(n){var r=sap.ui.getCore().byId("adaptUiContainer");void 0!==r&&r.destroy(),r=new sap.ui.ux3.OverlayContainer("adaptUiContainer",{openButtonVisible:!1}).addStyleClass("wizardBodyVisualExt");var i=sap.ui.view({viewName:"sap.watt.saptoolsets.fiori.project.plugin.uiadaptation.ui.UIAdaptationPane",type:sap.ui.core.mvc.ViewType.XML,viewData:{oContext:t.context,oProjectDoc:e,sFrameUrl:n.sFrameUrl,sComponentName:n.sComponent,sLayer:"VENDOR",sIdeSrc:this.location.origin||this.location.href}});return r.addContent(i),r.attachClose(function(e){e.preventDefault(),i.getController().onBeforeExit().then(function(){i.destroyContent(),r.destroy()}).done()}),r.open(),r})}};return t}),define("sap.watt.saptoolsets.fiori.project.fioriodata/service/FioriOData",["sap/watt/lib/lodash/lodash"],function(e){var t=function(){var t=function(e,t){for(var n=0;n<t.length;n++)if(t[n].name===e&&t[n].folder===!1)return t[n];return void 0};this.addService=function(e,t,n,r,i,o){var a=this;return a.context.service.filesystem.documentProvider.getDocument(e).then(function(e){return a.context.service.metadataHandler.getMetadataPath(e,t).then(function(s){var u="metadata.xml";
s="/"===s[s.length-1]?s+u:s+"/"+u,i&&(i.localUri=s);var c={uri:n,type:r,settings:i};return a.context.service.ui5projecthandler.addDataSource(e,t,c,o).then(function(e){return e}).fail(function(e){throw e})})})};var n=function(e,n){return e.getCurrentMetadata(!0).then(function(e){var r=t("Configuration.js",e),i=/"?serviceUrl"?\s*:\s*(?:(?:[\w\.]+\([\w\"\s,\.]*\))+\s*\+\s*)*"(.*?)",?/,o=/serviceUrl?\s*:\s*(?:(?:[\w\.]+\([\w\'\s,\.]*\))+\s*\+\s*)*'(.*?)',?/;return void 0===r&&(r=t("Component.js",e)),r?n.service.filesystem.documentProvider.getDocument(r.path).then(function(e){return e.getContent().then(function(e){var t;return i.test(e)?(t=i.exec(e),t[1]):o.test(e)?(t=o.exec(e),t[1]):void 0})}):void 0})};this.getServiceUrl=function(t,r){var i=this;return this.context.service.filesystem.jsonProvider.readJson(t,"manifest.json",!0).then(function(o){var a=o["sap.app"].dataSources;if(a)for(var s=e.keys(a),u=e.values(a),c=0;c<s.length;c++)if(u[c].type===r)return u[c].uri;return i.context.service.filesystem.documentProvider.getDocument(t).then(function(e){return n(e,i.context)})}).fail(function(){return i.context.service.filesystem.documentProvider.getDocument(t).then(function(e){return n(e,i.context)})})}};return t}),define("sap.watt.saptoolsets.fiori.project.qunit/service/ChooseFileStep",{getContent:function(){jQuery.sap.require("sap.watt.saptoolsets.fiori.project.qunit.control.ChooseFileStepContent");var e=new sap.watt.saptoolsets.fiori.project.plugin.qunit.control.ChooseFileStepContent({context:this.context}),t=this.context.i18n.getText("Choose_File"),n=this.context.i18n.getText("Select_File");return this.context.service.wizard.createWizardStep(e,t,n)}}),define("sap.watt.saptoolsets.fiori.project.qunit/service/SelectViewsStep",{getContent:function(){jQuery.sap.require("sap.watt.saptoolsets.fiori.project.qunit.control.SelectViewsStepContent");var e=new sap.watt.saptoolsets.fiori.project.plugin.qunit.control.SelectViewsStepContent({context:this.context}),t=this.context.i18n.getText("Select_Views_Title"),n=this.context.i18n.getText("Select_View_Description");return this.context.service.wizard.createWizardStep(e,t,n)}}),define("sap.watt.saptoolsets.fiori.project.qunit/service/finishstep",{getContent:function(){jQuery.sap.require("sap.watt.saptoolsets.fiori.project.plugin.qunit.control.FinishStepControl");var e=new sap.watt.saptoolsets.fiori.project.plugin.qunit.control.FinishStepControl({context:this.context});return this.context.service.wizard.createWizardStep(e,"","")}}),define("sap.watt.saptoolsets.fiori.project.qunit/service/EsprimaParser",[],function(){function e(e,t){var n=t.nodeFunction;return e.range[0]>=n.range[0]&&e.range[1]<=n.range[1]?!0:!1}function t(n,r){if(0===r.aInsideFuncs.length)return r.aInsideFuncs.push({nodeFunction:n,aInsideFuncs:[]}),void 0;var i=r.aInsideFuncs[r.aInsideFuncs.length-1];e(n,i)?t(n,i):r.aInsideFuncs.push({nodeFunction:n,aInsideFuncs:[]})}function n(e,n){if("FunctionDeclaration"===e.type||"FunctionExpression"===e.type){var r=n;t(e,r)}return!0}function r(e,t){var r={nodeFunction:null,aInsideFuncs:[]};return t.visit(e,r,n).then(function(){return r})}function i(e,t){for(var n,r=0;r<t.length;r++)if(t[r].range===e.range){n=r;break}for(var i=n-1;i>=0;i--)if(t[i].range[0]<=e.range[0]&&t[i].range[1]>=e.range[1])return t[i]}function o(e,t){return t.push(e),!0}function a(e,t){var n=[];return t.visit(e,n,o).then(function(){return n})}function s(e){if(e.left.property)var t=e.left.property.name;for(var n=e.left.object;n&&"MemberExpression"===n.type;)t=n.property.name+"."+t,n=n.object;return n&&"Identifier"===n.type&&(t=n.name+"."+t),t}function u(e,t){var n=i(e,t.aFlatTree);return"CallExpression"===n.type?!0:!1}function c(e){var t=[];if(e.oFuncsTree.aInsideFuncs.length>1&&(t=e.oFuncsTree.aInsideFuncs),1===e.oFuncsTree.aInsideFuncs.length){var n=e.oFuncsTree.aInsideFuncs[0].nodeFunction;t="FunctionExpression"===n.type&&u(n,e)?e.oFuncsTree.aInsideFuncs[0].aInsideFuncs:e.oFuncsTree.aInsideFuncs}return t}function l(e,t){for(var n=0;n<t.length;n++)if(t[n].nodeFunction.range===e.range)return!0;return!1}function p(e,t){if(e.properties){for(var n=new y,r=0;r<e.properties.length;r++){var o=e.properties[r].key,a=e.properties[r].value;if("FunctionExpression"===a.type&&l(a,t.aValidFunctions)){for(var u=new _(o.name,[]),c=0;c<a.params.length;c++)u.setFunctionParameter(a.params[c].name,"");n.setFunctions(u)}}var p,f=i(e,t.aFlatTree);"CallExpression"===f.type&&f.arguments[0].value&&(p=f.arguments[0].value),"VariableDeclarator"===f.type&&(p=f.id.name),"AssignmentExpression"===f.type&&(p=s(f)),n.setName(p),n.getFunctions().length>0&&(t.aObjectFunctions?t.aObjectFunctions.push(n):t.aObjectFunctions=[n])}}function f(e,t){if(l(e,t.aValidFunctions)){for(var n=new _(e.id.name,[]),r=0;r<e.params.length;r++)n.setFunctionParameter(e.params[r].name,"");t.aFunctions?t.aFunctions.push(n):t.aFunctions=[n]}}function d(e,t){if(e.init&&"FunctionExpression"===e.init.type&&l(e.init,t.aValidFunctions)){for(var n=new _(e.id.name,[]),r=0;r<e.init.params.length;r++)n.setFunctionParameter(e.init.params[r].name,"");t.aFunctions?t.aFunctions.push(n):t.aFunctions=[n]}}function h(e,t){if(l(e.right,t.aValidFunctions)){for(var n=s(e),r=new _(n,[]),i=0;i<e.right.params.length;i++)r.setFunctionParameter(e.right.params[i].name,"");t.aFunctions?t.aFunctions.push(r):t.aFunctions=[r]}}function m(e){return"IfStatement"===e.type||"SwitchStatement"===e.type||"WhileStatement"===e.type||"DoWhileStatement"===e.type||"ForStatement"===e.type||"ForInStatement"===e.type?!0:!1}function g(e,t){return"ObjectExpression"!==e.type||t.bInCondition||p(e,t),"FunctionDeclaration"!==e.type||t.bInCondition||f(e,t),"VariableDeclarator"!==e.type||t.bInCondition||d(e,t),"AssignmentExpression"!==e.type||"FunctionExpression"!==e.right.type||t.bInCondition||h(e,t),m(e)&&t.bInCondition===!1&&(t.oConditionNode=e,t.bInCondition=!0),!0}function v(e,t){e===t.oConditionNode&&(t.bInCondition=!1,t.oConditionNode=null)}var y=function(e,t){this.objectName=e,this.aFunctionList=t&&t.length>0?t:[]};y.prototype.setName=function(e){this.objectName=e},y.prototype.getFunctions=function(){return this.aFunctionList},y.prototype.setFunctions=function(e){this.aFunctionList.push(e)};var _=function(e,t){this.functionName=e,this.aFunctionParameters=t&&t.length>0?t:[]};_.prototype.setFunctionParameter=function(e,t){this.aFunctionParameters.push({paramerName:e,defaultValue:t})},_.prototype.getFunctionParameter=function(){return this.aFunctionParameters};var x={parse:function(e){var t=this.context.service.jsASTManager,n={range:!0,tolerant:!0,comment:!0};return t.parse(e,n).then(function(e){return r(e,t).then(function(n){return a(e,t).then(function(r){var i={aObjectFunctions:[],aFunctions:[],aFlatTree:r,oFuncsTree:n,aValidFunctions:[],oConditionNode:null,bInCondition:!1};return i.aValidFunctions=c(i),t.visit(e,i,g,v).then(function(){var e={};return e.getFunctions=function(){return i.aFunctions},e.getObjects=function(){return i.aObjectFunctions},e})})})})}};return x}),define("sap.watt.saptoolsets.fiori.project.fioriprojectmetadataprovider/service/FioriProjectMetadataProvider",[],function(){"use strict";return{getDependencies:function(e){var t={};return this.context.service.appmetadata.getNeoMetadata(e).then(function(e){if(e&&e.routes&&e.routes.length>0)for(var n=e.routes,r=null,i=0;i<n.length;i++)if(r=n[i],r.target&&"/resources"===r.target.entryPath){if("/webapp/resources"===r.path){t={library:r.target.name,version:r.target.version};break}"/resources"===r.path&&(t={library:r.target.name,version:r.target.version})}return jQuery.isEmptyObject(t)&&(t=[{library:"sapui5",version:null}]),t})}}}),define("sap.watt.saptoolsets.fiori.rdlastlibrary/service/astPrint",[],function(){function e(){this.printNode=function(e,o){function a(){var e=[],i=r(k);e.push(i+"namespace "),o=D(o,e);var a=o.getAccessibleByList(),s=o.getAnnotations(),u=o.getNestedContexts(),c=o.getNestedEntities(),l=o.getElements(),p=o.getActions(),f=o.getNestedTypes();n(s)&&(jQuery.each(o.getAnnotations(),function(){t(this)||this.print(N,0)}),N.push("\n"+i)),"APPLICATION"===o.componentType?N.push("application "+o.getFullyQualifiedName()+" "):N.push(e.join("")+o.getName()+" "),n(a)&&(N.push("accessible by "),jQuery.each(a,function(){t(this)||this.print(N,0)})),N.push("{\n"),k++,e=N.length,jQuery.each(u,function(){t(this)||this.print(N,k)}),N.length!==e&&n(c)&&(N.push("\n"),e=N.length),jQuery.each(c,function(){t(this)||this.print(N,k)}),N.length!==e&&n(l)&&(N.push("\n"),e=N.length),jQuery.each(l,function(){t(this)||this.print(N,k)}),N.length!==e&&n(p)&&(N.push("\n"),e=N.length),jQuery.each(p,function(){t(this)||this.print(N,k)}),N.length!==e&&n(f)&&N.push("\n"),jQuery.each(f,function(){t(this)||this.print(N,k)}),N.push(i+"}\n")}function s(){N.push(r(k)+(o.exported?"export ":"")+"view "+o.getName()+" as\n"),k++,o.getQuery().print(N,k),N.push(";\n")}function u(){var e=N.length,i=r(k),a=o.getActions(),s=o.getNestedTypes();N.push(i+(o.exported?"export ":"")+"entity "+o.getName()+" {\n"),k++,jQuery.each(o.getConstElements(),function(){t(this)||this.print(N,k)}),jQuery.each(o.getElements(),function(){t(this)||this.print(N,k)}),N.length!==e&&n(a)&&(N.push("\n"),e=N.length),jQuery.each(a,function(){t(this)||this.print(N,k)}),N.length!==e&&n(s)&&N.push("\n"),jQuery.each(s,function(){t(this)||this.print(N,k)}),N.push(i+"}\n")}function c(){N.push(r(k)),jQuery.each(o.getAnnotations(),function(){t(this)||this.print(N,0)}),N.push("const "),N.push(o.getName()),N.push(T(o,o.getType()));var e=o.defaultExpression||o.calculatedExpression;t(e)||(N.push(o.defaultExpression?" default ":" = "),e.print(N,0)),N.push(";\n")}function l(){var e=I(o).instanceOf("IEnum");N.push(r(k)),jQuery.each(o.getAnnotations(),function(){t(this)||this.print(N,0)}),o.isKey&&N.push("key "),e||N.push("element "),N.push(o.getName()),N.push(T(o,o.getType()));var n=o.defaultExpression||o.calculatedExpression;t(n)||(N.push(!e&&o.defaultExpression?" default ":" = "),n.print(N,0)),N.push(";\n")}function p(){var e=r(k),n=[],i=o.getDefaultReturnParameter();N.push(e+"action "+o.getName()+" ("),jQuery.each(o.getParameters(),function(){t(this)||this.print(n,0)}),N.push(n.join(", ")),N.push(")"),i.print(N,0),N.push(" {\n"),k++,N.push(r(k)+"/* add your code here */\n"),t(i.getType())||N.push(r(k)+"return null; //this is generate code!\n"),N.push(e+"}\n")}function f(){N.push((o.instanceOf("IRdlNamedParameter")?o.getName():"")+T(o,o.getType()))}function d(){var e=r(k);N.push(e+"type "+o.getName()),N.push(T(o,o.getFrom())),N.push(" enum {\n"),k++,jQuery.each(o.getEnumValues(),function(){t(this)||this.print(N,k)}),N.push(e+"}\n")}function h(){var e=r(k);N.push(e+"type "+o.getName()+" {\n"),k++,jQuery.each(o.getElements(),function(){t(this)||this.print(N,k)}),N.push(e+"}\n")}function m(){N.push(r(k)+"type "+o.getName()),N.push(T(o,o.getFrom())),N.push(";\n")}function g(){N.push("@"+o.getName()+" ")}function v(){N.push(o.getName()+" ")}function y(){(o.upperBound>1||o.lowerBound===o.upperBound)&&N.push("["+o.lowerBound+".."+(4294967295===o.upperBound?"*":o.upperBound)+"] ")}function _(){function e(){if(n.instanceOf("IRdlStructuredType")){var e=[],t=r(k);jQuery.each(n.getElements(),function(){e.push(t+this.getName())}),N.push(e.join(","+(a?"\n":" ")))}else i("_printQLQuery.MISSING TYPE "+n.$intf)}var t=r(k),n=o.getType(),a=n.instanceOf("IArray");N.push(t+"SELECT "),o.isReturnOne?N.push("ONE"):o.topNum&&N.push("TOP "+o.topNum.intValue+" "),a||(N.push(" "),e(),N.push(" ")),o.getFrom().print(N,k),a&&(N.push("{\n"),k++,n=n.getType(),e(),k--,N.push("\n"+t+"}")),o.where&&(N.push("\n"),N.push(t+"WHERE ???")),o.groupBy&&(N.push("\n"),o.groupBy.print(N,k)),o.orderBy&&(N.push("\n"),o.orderBy.print(N,k))}function x(){var e=[];N.push("FROM "),jQuery.each(o.getElements(),function(){t(this)||this.print(e,0)}),N.push(e.join(", ")+" ")}function b(){var e=o.expr,t="";e.instanceOf("IIdentifierExpression")?t=e.getName():i("_printQLFromElement.MISSING TYPE "+e.$intf),o.alias&&(t+=" as "+o.alias),N.push(t)}function w(){var e=r(k),t=[];N.push(e+"GROUP BY\n"),jQuery.each(o.getEntries(),function(){var n=e;this.instanceOf("IDataAccessExpr")?n+=this.getName():i("_printQLGroupBy.MISSING TYPE "+this.$intf),t.push(n)}),N.push(t.join(",\n"))}function S(){var e=r(k),t=[];N.push(e+"ORDER BY\n"),jQuery.each(o.getEntries(),function(){var e=[];this.print(e,k),t.push(e.join(""))}),N.push(t.join(",\n"))}function E(){var e=o.expr,t=r(k);N.push(t),e.instanceOf("IIdentifierExpression")?N.push(e.getName()):e.instanceOf("IExprAgg")?N.push("SUM(???)"):i("_printQLOrderBy.MISSING TYPE "+e.$intf),"Descending"===o.order&&N.push(" DESC")}function C(){if(o.instanceOf("IFalseExpression"))return N.push("false");if(o.instanceOf("ITrueExpression"))return N.push("true");if(o.instanceOf("INullExpression"))return N.push("NULL");if(o.instanceOf("IDateExpression"))return N.push(o.astDateValue);if(o.instanceOf("ITimeExpression"))return N.push(o.astTimeValue);if(o.instanceOf("IStringExpression","IUTCDateTimeExpression","IUTCTimeStampExpression"))return N.push(o.astValue);if(o.instanceOf("IDataAccessExpr"))return N.push(o.getName());if(o.instanceOf("IQLQuery")){var e=[];return o.print(e,0),N.push(e.join(" ").replace("\n",""))}if(o.instanceOf("INumberExpression")){switch(o.numberType){case"INTEGER":return N.push(o.intValue);case"DOUBLE":return N.push(o.doubleValue);case"DECIMALFLOAT":return N.push(o.floatValue)}return N.push("0")}return i("AST_PRINT._printExpression: MISSING TYPE "+o.$intf),N.push(o.astValue||o.value||o.name)}function T(e,t){if(t.instanceOf("IPrimitiveUndefined","IEnumValueType"))return"";var n=" : ";if(t.instanceOf("IPrimitiveType"))n+=t.getFullyQualifiedName(),t.instanceOf("IPrimitiveString")?n+=5e3===t.param?"":"("+t.param+")":t.instanceOf("IPrimitiveDecimal")&&(n+="("+t.p+", "+t.s+")");else if(t.instanceOf("IEnum","IRdlEntity","IDerivedType","IRdlStructuredType")){var r=P(e).getFullyQualifiedName(),o=P(t).getFullyQualifiedName();n+=0===r.indexOf(o)?t.getName():t.getFullyQualifiedName()}else if(t.instanceOf("IAssociationType")){if(n+="association ",t.cardinality){var a=[];t.getCardinality().print(a,0),n+=a.join("")}n+="to "+t.getTargetEntity().getName(),t.instanceOf("IAssociationViaBacklink")?n+=" via backlink "+t.getViaBacklinkField().getName():t.instanceOf("IAssociationViaEntity")&&(n+=" via entity "+t.getViaEntity().getName())}else if(t.instanceOf("IArray")){var s=t.getCardinality();n=T(t,t.getType()),n+="["+(4294967295===s.upperBound?"":s.upperBound)+"]"}else i("AST_PRINT._printInlineType: MISSING TYPE "+t.$intf),n="";return n}function P(t){var n=t.getFullyQualifiedName(),r=(n||"").split(".");return t.instanceOf("IElement","IRdlAction")?n=r.slice(0,-2).join("."):t.instanceOf("IRdlStructuredType","IEnum")&&(n=r.slice(0,-1).join(".")),e.getSymbol(n)}function I(t){var n=(t.getFullyQualifiedName()||"").split(".");if(t.instanceOf("IElement")){var r=n.slice(0,-1).join(".");return e.getSymbol(r)}return null}function D(e,t){return jQuery.isArray(e)&&1===e.length&&(e=e[0]),e.isExplicitlyDefined?e:(t.push(e.getName()+"."),D(e.getNestedContexts()))}if(!o||!jQuery.isFunction(o.instanceOf))return null;if(o.instanceOf("IAstPosition"))return i("AST_PRINT.printNode: Not printable node "+o.$intf,i.WARNING),null;if(o.instanceOf("IQLQuery"))throw new Error("Query element is not supported");var A=2===arguments.length,N=[],k=0;if(A||(N=arguments[2],k=arguments[3]),o.instanceOf("IRdlContext")?a():o.instanceOf("IView")?s():o.instanceOf("IRdlEntity")?u():o.instanceOf("IConstElement")?c():o.instanceOf("IElement")?l():o.instanceOf("IAction")?p():o.instanceOf("IRdlParameter")?f():o.instanceOf("IEnum")?d():o.instanceOf("IRdlStructuredType")?h():o.instanceOf("IDerivedType")?m():o.instanceOf("IRdlAnnotation")?g():o.instanceOf("IAccessibleByItem")?v():o.instanceOf("ICardinality")?y():o.instanceOf("IQLQuery")?_():o.instanceOf("IQLFrom")?x():o.instanceOf("IQLFromElement")?b():o.instanceOf("IQLGroupBy")?w():o.instanceOf("IQLOrderBy")?S():o.instanceOf("IQLOrderByEntry")?E():o.instanceOf("IRdlExpression")?C():i("AST_PRINT.printNode: MISSING TYPE "+o.$intf),A){var O=N.join("");return i(O,i.LOG),O}}}function t(e){return!e||e.autoGenerated}function n(e){var n=!1;return jQuery.each(e||[],function(){return t(this)?void 0:(n=!0,!1)}),n}function r(e){for(var t="	";t.length<e;)t+=t;return t.slice(0,e)}function i(e,t){if(o){t||(t=a);var n="log";switch(t){case i.ERROR:n="error";break;case i.DEBUG:n="debug";break;case i.WARNING:n="warning";break;case i.INFO:n="info";break;case i.LOG:n="log"}top.console[n](e)}}i.ERROR=1,i.DEBUG=2,i.WARNING=3,i.INFO=4,i.LOG=5;var o=!0,a=i.WARNING;return e.instance||(e.instance=new e),e.instance}),define("sap.watt.saptoolsets.fiori.rdlastlibrary/service/astLibrary",["./astPrint"],function(e){function t(t){function i(e){return h[e]}function o(){var e=this;return e.length&&"undefined"!=typeof e[0].$node_id&&jQuery.each(e,function(t,n){e[t]=i(n.$node_id)}),e}function a(e){var t=this.length&&"undefined"!=typeof this[0].$node_id,n=null;return jQuery.each(this,function(){var r=t?i(this.$node_id):this;return r.name===e?(n=r,!1):void 0}),n}function s(){var e=this;return jQuery.each(e,function(){var e=l(this.src);e&&(this.src=e)}),e}function u(){var e=this;return jQuery.each(e,function(){var e=l(this.source);e&&(this.source=e)}),e}function c(e,t){return"get"+e.charAt(0).toUpperCase()+e.substring(1,e.length-(t||0))}function l(e){var n=t.sources[e];return n&&n.resourceName||null}function p(){return i(this.$node_id)}function f(e){return e}function d(){if("undefined"==typeof this.$intf)return!1;var e=!1,n=this,r=n.$intf;return jQuery.each(arguments,function(n,i){if(i){if(r===i)return e=!0,!1;for(var o=r,a=t.interfaces[o];a!==o;){if(a===i)return e=!0,!1;o=a,a=t.interfaces[a]}}}),e}t=t||{};var h={},m=[],g=[],v=this;jQuery.each(t.nodes||[],function(){var t=this;jQuery.each(t||{},function(e,i){jQuery.isArray(i)?"positions"===e?t[c(e)]=s.bind(i):(t[c(e)]=o.bind(i),"s"===e.charAt(e.length-1)&&(t[c(e,1)]=a.bind(i))):e in n?t[c(e)]=p.bind(i):i&&"undefined"!=typeof i.$node_id&&1===Object.keys(i).length?m.push({n:t,propertyName:e}):e in r&&(t[c(e)]=f.bind(null,i))}),t.instanceOf=d.bind(t),t.print=e.printNode.bind(null,v,t),h[t.$id]=t,h[t.fullyQualifiedName]=t}),jQuery.each(m,function(){this.n[this.propertyName]=i(this.n[this.propertyName].$node_id)}),jQuery.each(t.roots||[],function(){g.push(i(this))}),this.getSymbol=i,this.getRoots=function(){return g},this.getParsingIssues=function(){return u.apply(t.issues)},this.isFileInAst=function(e){var n=t.sources,r=!1;return jQuery.each(n,function(){return this.resourceName===e?(r=!0,!1):void 0}),r},this.getMasterContext=function(e){return e=e||g,1===e.length?(e=e[0],e.isExplicitlyDefined?e:this.getMasterContext(e.getNestedContexts())):null},this.getSources=function(){return t.sources},this.isSuccess=function(){return t.isSuccess},this.getContErrors=function(){return t.cont_errors?u.apply(t.cont_errors):[]},this.toRdlString=function(){try{var e=this.getMasterContext();if(e)return e.print()}catch(t){top.console.error(t.message)}return null}}Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i});var n={type:!0,from:!0,targetEntity:!0,viaBacklinkField:!0,viaEntity:!0,cardinality:!0,defaultReturnParameter:!0,query:!0},r={fullyQualifiedName:!0,name:!0};return{getRiverAstLibrary:function(e){return new t(e)}}}),define("sap.watt.saptoolsets.fiori.river/service/docslib",{parseCsdl:function(e){function t(e){var t={},n=null,r=null,i=C,o=e;for(var a in o)n=o[a],r=n?i[n.name]:n,r&&(t[r]=o[a].value);return t}function n(e,t,n){var r=e.attr(t);return"false"===r?!1:"true"===r?!0:n}function r(e,t,r){var i;switch(t.sapType=r.attr("sap:type"),e){case"Edm.DateTimeOffset":t.isDate=!0,i=r.attr("Precision"),i&&(i=parseInt(i,10),t.precision=isNaN(i)?null:i);break;case"Edm.Time":t.isTime=!0;break;case"Edm.String":t.unicode=n(r,"Unicode",!0),i=r.attr("MaxLength"),i&&("max"===i?t.maxLength=Math.pow(2,t.unicode?30:31):(i=parseInt(i,10),isNaN(i)||(t.maxLength=i)));break;case"Edm.Decimal":i=r.attr("Precision"),i&&(i=parseInt(i,10),isNaN(i)||(t.precision=i)),i=r.attr("Scale"),t.scale=0,i&&(i=parseInt(i,10),isNaN(i)||(t.scale=i))}}function i(e,n){var r=n.attr("Name"),i=e.name+"."+r,o=h(i);o.name||(o.name=r,o.sapType=n.attr("sap:type"),o.qualifiedName=i,o.isEnum=!0,o.isComplex=!1,o.schema=e,o.members=[],o.annotations=n[0]?t(n[0].attributes):{},e.enumTypes.push(o),$("Member",n).each(function(){var e=$(this);o.members.push({name:e.attr("Name"),value:void 0===e.attr("Value")?e.attr("Value"):e.attr("rdl:literal")})}))}function o(e,n){var r=n.attr("Name"),i=e.name+"."+r,o=h(i);o.name||(o.name=r,o.qualifiedName=i,o.isComplex=!0,o.isEnum=!1,o.schema=e,o.elements=[],o.annotations=n[0]?t(n[0].attributes):{},e.complexTypes.push(o))}function a(e,n){var r=n.attr("Name"),i=e.name+"."+r,o=h(i);o.name||(o.name=r,o.qualifiedName=i,o.isComplex=!1,o.isEnum=!1,o.isEntity=!0,o.schema=e,o.elements=[],o.actions=[],o.keysMap={},o.annotations=n[0]?t(n[0].attributes):{},e.entityTypes.push(o),$("PropertyRef",n).each(function(){o.keysMap[$(this).attr("Name")]=!0}))}function s(e,n){var r=n.attr("Name"),i=e.name+"."+r;if(!E.associationMap[i]||$.isEmptyObject(E.associationMap[i])){var o={name:r,qualifiedName:i,ends:{},annotations:n[0]?t(n[0].attributes):{}};$("End",n).each(function(){var e=$(this),t={role:e.attr("Role"),type:h(e.attr("Type")),multiplicity:e.attr("Multiplicity"),sapMinoccurs:e.attr("sap:minoccurs"),sapMaxoccurs:e.attr("sap:maxoccurs")};o.ends[t.role]=t}),$.extend(E.associationMap[i]?E.associationMap[i]:E.associationMap[i]={},o),e.associations.push(o)}}function u(e,i){var o=i.attr("Type"),a=o.indexOf("Edm."),s={name:i.attr("Name"),type:o,isAssoc:!1,value:null,isNullable:n(i,"Nullable",!0),isReadOnly:n(i,"ReadOnly",!1),defaultValue:i.attr("DefaultValue"),isComputed:n(i,"rdl:ComputedDefaultValue",!1),isCalculated:n(i,"rdl:Computed",!1),sapType:i.attr("sap:type"),sapFilterable:n(i,"sap:filterable",!0),annotations:i[0]?t(i[0].attributes):{}};e.isEntity&&(s.isKey=s.name in e.keysMap),0===a?r(o,s,i):(s.value=h(o),s.isComplex=s.value.isComplex,s.isEnum=s.value.isEnum),e.elements.push(s)}function c(e,n){var r=n.attr("Relationship"),i={name:n.attr("Name"),isAssoc:!0,toRole:n.attr("ToRole"),fromRole:n.attr("FromRole"),backlink:n.attr("sap:backlink")};E.associationMap[r]||(r=e.schema.name+"."+n.attr("Relationship"),E.associationMap[r]||(E.associationMap[r]={})),i.relationship=E.associationMap[r],i.annotations=n[0]?t(n[0].attributes):{},e.elements.push(i)}function l(e,t){var n=t.attr("Name"),r={name:n,qualifiedName:e.name+"."+n,schema:e,isDefaultContainer:!1,entitySets:[],actions:[],associationSets:[],views:[]};"true"===t.attr("m:IsDefaultEntityContainer")&&(r.isDefaultContainer=!0,E.defaultEntityContainder=r),E.entityContainersMap[r.qualifiedName]=r,e.entityContainers.push(r),$("EntitySet",t).each(function(){p(r,$(this))}),$("AssociationSet",t).each(function(){f(r,$(this))}),$("FunctionImport",t).each(function(){m(r,$(this))})}function p(e,n){var r=n.attr("Name"),i=e.qualifiedName+"."+r,o=d(i);o.name||(o.name=r,o.qualifiedName=i,o.container=e,o.type=h(n.attr("EntityType")),o.annotations=t(n[0].attributes),e.entitySets.push(o))}function f(e,t){var n=t.attr("Name"),r=e.name+"."+n,i=t.attr("Association"),o={name:n,quailfiedName:r,ends:{}};E.associationMap[i]||(E.associationMap[i]={}),o.association=E.associationMap[i],$("End",t).each(function(){var t=$(this),n={role:t.attr("Role")},r=t.attr("EntitySet");-1===r.indexOf(".")&&(r=e.qualifiedName+"."+r),n.entitySet=d(r),o.ends[n.role]=n}),e.associationSets.push(o)}function d(e){return E.entitySetMap[e]||(E.entitySetMap[e]={assoctionSetMap:{}}),E.entitySetMap[e]}function h(e){return E.typeMap[e]||(E.typeMap[e]={}),E.typeMap[e]}function m(e,n){var r={name:n.attr("Name"),container:e,parameters:[],returnTypes:[],bindable:"true"===n.attr("IsBindable"),annotations:n[0]?t(n[0].attributes):{}};g(r,n),$("Parameter",n).each(function(){_(r,$(this))}),"action"===n.attr("rdl:source-object")?e.actions.push(r):"view"===n.attr("rdl:source-object")?e.views.push(r):e.actions.push(r)}function g(e,t){t.attr("ReturnType")?v(t,"ReturnType",e,"returnTypes"):$("ReturnType",t).each(function(){v($(this),"Type",e,"returnTypes")})}function v(e,t,n,i,o){var a=e.attr(t),s={isMulti:0===a.indexOf("Collection(")};if(o&&(s.name=e.attr("Name"),s.mode=e.attr("Mode")),s.isMulti&&(a=a.substring(11,a.length-1)),a=y(a),-1===a.indexOf(".")&&(a=n.container.schema.name+"."+a),0===a.indexOf("Edm."))r(a,s,e),s.isPrimitive=!0,s.isComplex=!1,s.isEntity=!1,s.isEnum=!1,s.type=a;else if(s.value=h(a),s.type=s.value.name,s.isPrimitive=!1,s.isComplex=s.value.isComplex,s.isEnum=s.value.isEnum,s.isEntity=s.value.isEntity,e.attr("EntitySet")){var u=n.container.qualifiedName+"."+e.attr("EntitySet");s.entitySet=d(u),s.isEntity=!0}n[i].push(s)}function y(e){return 0===e.indexOf("Ref(")?e.substring(4,e.length-1):e}function _(e,t){if(e.bindable&&"bindingParam"===t.attr("Name")){var n=h(t.attr("Type"));n.actions||(n.actions=[]),n.actions.push(e)}else v(t,"Type",e,"parameters",!0)}function x(e){var t=e.attr("Namespace");if(!(t in E.schemaMap)){var n={name:t,complexTypes:[],enumTypes:[],entityTypes:[],associations:[],entityContainers:[]};E.schemaMap[t]=n,E.schemas.push(n),$("ComplexType",e).each(function(){o(n,$(this))}),$("EnumType",e).each(function(){i(n,$(this))}),$("EntityType",e).each(function(){a(n,$(this))}),$("Association",e).each(function(){s(n,$(this))}),$("Property",e).each(function(){u(E.typeMap[t+"."+$(this).parent().attr("Name")],$(this))}),$("NavigationProperty",e).each(function(){c(E.typeMap[t+"."+$(this).parent().attr("Name")],$(this))})}}function b(e,t){$("EntityContainer",e).each(function(){l(t,$(this))})}function w(){$.each(E.entitySetMap,function(){var e=this,t=e.type;e.elements=[],t&&($.each(t.elements,function(){e.elements.push(this)}),e&&$.each(e.elements,function(){var t=this;if(t.isAssoc){var n=t.relationship;$.each(e.container.associationSets,function(){this.association.qualifiedName===n.qualifiedName&&(t.value=this.ends[t.toRole].entitySet,t.type=n.ends[t.toRole].type)})}}))})}function S(e){E=this,this.schemas=[],this.schemaMap={},this.typeMap={},this.associationMap={},this.entityContainersMap={},this.entitySetMap={},this.defaultEntityContainder=null,$("Schema",e).each(function(){x($(this))}),$("Schema",e).each(function(){var e=$(this).attr("Namespace");b($(this),E.schemaMap[e])}),w();var t=this;this.getEntities=function(){return this.__entities||(this.__entities=[],$.each(this.schemas,function(){$.each(this.entityContainers,function(){$.each(this.entitySets,function(){t.__entities.push(this)})})})),this.__entities},this.getViews=function(){return this.__views||(this.__views=[],$.each(this.schemas,function(){$.each(this.entityContainers,function(){$.each(this.views,function(){t.__views.push(this)})})})),this.__views},this.getNonBindableActions=function(){return this.__globalActions||(this.__globalActions=[],$.each(this.schemas,function(){$.each(this.entityContainers,function(){$.each(this.actions,function(){this.bindable||t.__globalActions.push(this)})})})),this.__globalActions}}var E,C={"sap:label":"label","sap:addressable":"addressable","sap:creatable":"creatable","sap:updatable":"updatable","sap:deletable":"deletable"};return _parse$Metadata=function(e){return new S(e)},_parse$Metadata(e)}}),define("sap.watt.saptoolsets.fiori.river/service/csdlParser",["sap.watt.saptoolsets.fiori.river/service/docslib"],function(e){return{_parseCsdl:function(t,n,r){function i(){C={}}function o(){if(T.schemas.length&&(n=T.schemas[0].name),T.schemas[0].entityContainers.length)for(var e=0;e<T.schemas[0].entityContainers.length;e++)if(T.schemas[0].entityContainers[e].isDefaultContainer){_defaultEntityContainer=T.schemas[0].entityContainers[e].name;break}var t={id:2},i={$id:1,$intf:"IRdlContext",componentType:"APPLICATION",fullyQualifiedName:n,name:n,symbolCategory:"SYMBOL_APPLICATION",positions:[{src:0}],nestedEntities:[],nestedContexts:[]},o={isSuccess:!0,nodes:[{$id:0,$intf:"IRdlContext",componentType:"CONTEXT",fullyQualifiedName:"Context",name:"Context",positions:[{src:0}],nestedContexts:[{$node_id:1}],symbolCategory:"SYMBOL_CONTEXT"}],roots:[0],sources:[{resourceName:"/"+r}],issues:[],interfaces:{IAction:"IRdlSymbol",IDataMember:"IRdlSymbol",IElement:"IDataMember",IEnumValueType:"IRdlSymbol",IAssociationType:"IStreamType",IStreamType:"ITypeBase",IPrimitiveBoolean:"IPrimitiveType",IPrimitiveDate:"IPrimitiveType",IPrimitiveUTCDateTime:"IPrimitiveType",IPrimitiveTime:"IPrimitiveType",IPrimitiveTimestamp:"IPrimitiveType",IPrimitiveInteger:"IPrimitiveType",IPrimitiveDecimal:"IPrimitiveType",IPrimitiveDouble:"IPrimitiveType",IPrimitiveDecimalFloat:"IPrimitiveType",IPrimitiveSizedType:"IPrimitiveType",IPrimitiveString:"IPrimitiveSizedType",IPrimitiveLargeString:"IPrimitiveString",IPrimitiveBinary:"IPrimitiveString",IPrimitiveLargeBinary:"IPrimitiveString",IPrimitiveType:"ITypeBase",IRdlAction:"IAction",IRdlContext:"IRdlStructuredType",IRdlEntity:"IRdlStructuredType",IRdlNamedParameter:"IRdlParameter",IRdlParameter:"IRdlSymbol",IRdlStructuredType:"ITypeBase",IRdlSymbol:"IRdlSymbol",ITypeBase:"IRdlSymbol"}},a={status:"OK",response:[]},s=[];s=T.getEntities(),jQuery.each(s,function(){if(this.qualifiedName){var e=u(o,t,this);i.nestedEntities.push({$node_id:e.$id})}}),y();var c=d(T.getNonBindableActions());return jQuery.each(D,function(e,t){t.targetEntity=I[t.targetEntity]?{$node_id:I[t.targetEntity].$id}:{$node_id:""}}),i.actions=p(c||[],o,t),o.nodes.push(i),a.response.push(o),a}function a(e,t,n){jQuery.each(e.nodes,function(e){return this.fullyQualifiedName===e.fullyQualifiedName?this:void 0}),t.id++;var r,i,o,a={$id:t.id,$intf:"",fullyQualifiedName:n.type||n.name||n.remoteType,name:n.type||n.name||n.remoteType,positions:[{src:0}],symbolCategory:""};if(n.isComplex||"Complex"===n.type)i="SYMBOL_ENTITY",o="IRdlEntity",r=f(n.value.elements),r=c(r||[],e,t,n);else if(n.isAssoc){i="SYMBOL_TYPE",o="IAssociationType",a.displayName="Association to "+n.remoteType;var u=s(e,t,n);a.cardinality={$node_id:u.$id},a.targetEntity=n.value?n.value.qualifiedName:"",D.push(a)}else i="SYMBOL_PRIMITIVE",o=x(n);return a.$intf=o,a.symbolCategory=i,n.maxLength&&(a.maxLength=n.maxLength),r&&(a.elements=r),e.nodes.push(a),a}function s(e,t,n){var r=(n.remoteType||n.name||n.type)+".CARDINALITY";jQuery.each(e.nodes,function(e){return r===e.fullyQualifiedName?this:void 0}),t.id++;var i={$id:t.id,$intf:"ICardinality",name:"CARDINALITY",fullyQualifiedName:r,positions:[{src:0}],symbolCategory:"SYMBOL_CARDINALITY",lowerBound:n.minOccurs?n.minOccurs:0,upperBound:n.isMulti?n.maxOccurs?n.maxOccurs:4294967295:1};return e.nodes.push(i),i}function u(e,t,n){jQuery.each(e.nodes,function(e){return this.fullyQualifiedName===e.qualifiedName?this:void 0});var r=d(n.type.actions),i=f(n.type.elements);t.id++;var o={$id:t.id,$intf:"IRdlEntity",name:n.container.name===_defaultEntityContainer?n.name:n.container.name+"."+n.name,annotations:n.annotations,fullyQualifiedName:n.qualifiedName,elements:c(i||[],e,t,n),actions:p(r||[],e,t,n),positions:[{src:0}],symbolCategory:"SYMBOL_ENTITY"},a=n.type?n.type.qualifiedName:null;o.annotations?o.annotations.entityType=a:o.annotations={entityType:a};var a=n.type?n.type.qualifiedName:null;return o.annotations?o.annotations.entityType=a:o.annotations={entityType:a},e.nodes.push(o),I[o.fullyQualifiedName]=o,o}function c(e,t,n){var r=[];return 0===e.length?[]:(jQuery.each(e,function(){n.id++;var e={$id:n.id,$intf:"IElement",name:this.name,isKey:this.isKey||!1,fullyQualifiedName:this.name,annotations:this.annotations,positions:[{src:0}],type:{$node_id:a(t,n,this).$id},symbolCategory:"SYMBOL_ELEMENT"};
t.nodes.push(e),r.push({$node_id:e.$id})}),r)}function l(e,t,n){var r=[];return 0===e.length?[]:(jQuery.each(e,function(){n.id++;var e={$id:n.id,$intf:"IRdlNamedParameter",name:this.name||null,fullyQualifiedName:this.name||null,annotations:this.annotations||null,positions:[{src:0}],type:{$node_id:a(t,n,this).$id},symbolCategory:"SYMBOL_PARAMETER"};t.nodes.push(e),r.push({$node_id:e.$id})}),r)}function p(e,t,n){var r=[];return jQuery.each(e.sort(b),function(){n.id++;var e={$id:n.id,$intf:"IRdlAction",name:this.name,fullyQualifiedName:this.name,annotations:this.annotations,parameters:l(this.parameters||[],t,n,self),returnTypes:l(this.returnTypes||[],t,n,self),positions:[{src:0}],symbolCategory:"SYMBOL_ACTION"};t.nodes.push(e),r.push({$node_id:e.$id})}),r}function f(e,t,n){var r=[];return e&&0!==e.length?(n=n||{},jQuery.each(e,function(){var e=t?t+"/"+this.name:this.name;if(n.isEnum=!1,this.value){if(this.value.isComplex)return r=r.concat(f(this.value.elements||[],e,{required:n.required||void 0!==this.isNullable&&!this.isNullable,isReadOnly:n.isReadOnly||this.isReadOnly})),void 0;n.isEnum=this.value.isEnum}var i=g(this,_(this),e,n);i&&r.push(i)}),r):[]}function d(e){var t=[];return jQuery.each(e.sort(b),function(){t.push({name:this.name,annotations:this.annotations,context:!this.bindable&&this.schemaName||void 0,parameters:h(this.parameters||[]),returnTypes:m(this.returnTypes||[])})}),t}function h(e,t,n){if(0===e.length)return[];var r=[];return n=n||{},jQuery.each(e,function(){var e=t?t+"/"+this.name:this.name;if(n.isEnum=!1,this.value){if(this.value.isComplex&&!this.isMulti)return r=r.concat(h(this.value.elements||[],e)),void 0;n.isEnum=this.value.isEnum}var i=g(this,_(this),e,n);i&&r.push(i)}),r}function m(e){var t=[];return jQuery.each(e,function(){var e=g(this,_(this),null,{isEnum:this.isEnum});e&&t.push(e)}),t}function g(e,t,n,r){var i={};if(r=r||{},n&&(i.name=n),e.annotations&&(i.annotations=e.annotations),e.isKey&&(i.isKey=e.isKey),t&&(i.type=t,-1!==t.indexOf(".")&&(i.remoteType=t,i.type=e.isComplex?"Complex":"Reference",e.value&&(i.value=e.value))),e.maxLength&&5e3!==e.maxLength&&(i.maxLength=e.maxLength),e.precision&&"Decimal"===t&&(i.precision=e.precision),e.scale&&"Decimal"===t&&(i.scale=e.scale),void 0!==e.defaultValue&&null!==e.defaultValue&&(i.defaultValue="UTCTimestamp"===t?e.defaultValue.replace(/\..*$/,""):e.defaultValue),e.isComputed&&(delete i.defaultValue,i.isKey))return null;if(e.isAssoc){i.isAssoc=e.isAssoc,i.remoteType=t,i.type="Reference";var o=e.relationship.ends;"*"===o[e.toRole].multiplicity?i.isMulti=!0:"1"===o[e.toRole].multiplicity&&(i.required=!0),(i.isMulti||e.backlink||o[e.fromRole].type===o[e.toRole].type)&&v(o[e.fromRole].type,o[e.toRole].type),o[e.toRole].sapMinoccurs&&(i.minOccurs=parseInt(o[e.toRole].sapMinoccurs,10),i.required=!0),o[e.toRole].sapMaxoccurs&&(i.maxOccurs=parseInt(o[e.toRole].sapMaxoccurs,10))}return(r.isReadOnly||e.isReadOnly||e.isCalculated)&&(i.isCalculated=!0),(r.isMulti||e.isMulti)&&(i.isMulti=!0),(r.required||void 0!==e.isNullable&&!e.isNullable&&!e.isKey)&&(i.required=!0),r.isEnum&&(i.type="Enum",i.remoteType=t),i}function v(e,t){var n=e.qualifiedName.replace(/_entityType$/,""),r=t.qualifiedName.replace(/_entityType$/,"");C[n]||(C[n]={}),C[r]||(C[r]={}),C[n][r]=!0,C[n][n]=!0,C[r][n]=!0}function y(){var e={};return jQuery.each(C,function(t,n){e[t]=[],jQuery.each(n,function(n){e[t].push(n)})}),e}function _(e){if(e.sapType)return e.sapType;if(e.isAssoc)return e.relationship.ends[e.toRole].type.qualifiedName.replace(/_entityType$/,"");if(e.isEntity)return e.value.qualifiedName.replace(/_entityType$/,"");if(e.isEnum||e.isComplex)return e.value.qualifiedName;var t=e.type;switch(t){case"Edm.String":return e.sapFilterable===!1?"LargeString":"String";case"Edm.Decimal":return e.precision?"Decimal":"DecimalFloat";case"Edm.Single":return"Decimal";case"Edm.DateTimeOffset":case"Edm.DateTime":return 7===e.precision?"UTCTimestamp":"UTCDateTime";case"Edm.Time":return"LocalTime";case"Edm.Int16":case"Edm.Int64":case"Edm.Int32":case"Edm.SByte":return"Integer";case"Edm.Double":return"BinaryFloat";case"Edm.Boolean":return"Boolean";case"Edm.Guid":return"UUID";case"Edm.Binary":return e.sapFilterable===!1?"LargeBinary":"Binary"}return t}function x(e){var t=e.type;switch(t){case"String":return"IPrimitiveString";case"LargeString":return"IPrimitiveLargeString";case"Decimal":return"IPrimitiveDecimal";case"DecimalFloat":return"IPrimitiveDecimalFloat";case"UTCDateTime":return"IPrimitiveUTCDateTime";case"UTCTimestamp":return"IPrimitiveTimestamp";case"LocalTime":return"IPrimitiveTime";case"LocalDate":return"IPrimitiveDate";case"Integer":return"IPrimitiveInteger";case"BinaryFloat":return"IPrimitiveDouble";case"Boolean":return"IPrimitiveBoolean";case"UUID":return"IPrimitiveString";case"Binary":return"IPrimitiveBinary";case"LargeBinary":return"IPrimitiveLargeBinary";default:return"IPrimitiveString"}return t}function b(e,t){var n,r,i=(e.qualifiedName||e.name).toLowerCase().split("."),o=(t.qualifiedName||t.name).toLowerCase().split("."),a=i.length,s=o.length;for(n=0,r=Math.min(a,s);r>n;n++){if(1===a-n||1===s-n)return 1===a-n&&1===s-n?w(i[n],o[n]):1!==a-n?1:-1;if(i[n]!==o[n])return w(i[n],o[n])}return 0}function w(e,t){return t>e?-1:e>t?1:0}void 0===n&&(n="APPLICATION_NAME_NOT_PROVIDED"),void 0===r&&(r="FILE_URI_NOT_PROVIDED");try{var S=$.parseXML(t)}catch(E){return null}var C,T,P,I={},D=[];return i(),T=e.parseCsdl(S),P=o()},parse:function(e,t,n){return this._parseCsdl(e,t,n)}}}),define("sap.watt.saptoolsets.fiori.hcp.fiorilaunchpad/command/RegisterToFLP",[],function(){"use strict";function e(e){var t=e.service.selection,n=e.service.repositorybrowserUtils;return n.isSingleFolderNotRootSelection().then(function(e){return e?t.getSelection().then(function(e){return e[0].document.getProject().then(function(e){return e})}):null})}function t(){if(r)return this.context.service.fiorilaunchpad.openWizard(r,"menu");var t=this;return e(t.context).then(function(e){return t.context.service.fiorilaunchpad.openWizard(e,"menu")})}function n(){var t=this,n=sap.watt.getEnv("server_type");return"java"===n||"local_hcproxy"===n?!1:e(t.context).then(function(e){return r=e,e?!0:!1})}var r=null;return{execute:t,isAvailable:function(){return!0},isEnabled:n}}),define("sap.watt.saptoolsets.fiori.hcp.fiorilaunchpad/ui/services/GeneralInfoStepService",{getContent:function(){jQuery.sap.require("sap.watt.saptoolsets.fiori.hcp.plugin.fiorilaunchpad.ui.steps.GeneralInfoStep");var e=new sap.watt.saptoolsets.fiori.hcp.plugin.fiorilaunchpad.ui.steps.GeneralInfoStep({context:this.context}),t=this.context.i18n.getText("GeneralInfoStep_GeneralInfo");return this.context.service.wizard.createWizardStep(e,t,"")}}),define("sap.watt.saptoolsets.fiori.hcp.fiorilaunchpad/ui/services/ConfigureTileStepService",{getContent:function(){var e=this;jQuery.sap.require("sap.watt.saptoolsets.fiori.hcp.plugin.fiorilaunchpad.ui.steps.ConfigureTileStep");var t=new sap.watt.saptoolsets.fiori.hcp.plugin.fiorilaunchpad.ui.steps.ConfigureTileStep({context:e.context}),n=e.context.i18n.getText("ConfigureTileStep_ConfigureTile");return e.context.service.wizard.createWizardStep(t,n,"")}}),define("sap.watt.saptoolsets.fiori.hcp.fiorilaunchpad/ui/services/AssignToStepService",{getContent:function(){jQuery.sap.require("sap.watt.saptoolsets.fiori.hcp.plugin.fiorilaunchpad.ui.steps.AssignToStep");var e=new sap.watt.saptoolsets.fiori.hcp.plugin.fiorilaunchpad.ui.steps.AssignToStep({context:this.context}),t=this.context.i18n.getText("AssignToStep_Title");return this.context.service.wizard.createWizardStep(e,t,"")}}),define("sap.watt.saptoolsets.fiori.hcp.fiorilaunchpad/services/FioriLaunchpad",[],function(){var e=function(){var e,t=sap.watt.getEnv("context_root")+"sap/flp/",n="/fiori/flp/designer/v1",r=this,i="Component.js";this.isComponentJsExist=function(e){return e.getCurrentMetadata(!0).then(function(e){for(var t=0;t<e.length;t++)if("Component.js"===e[t].name)return!0;return!1})};var o=function(e){return e.getCurrentMetadata(!0).then(function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.name===i)return r.context.service.filesystem.documentProvider.getDocument(n.path)}})};this.getComponentJsDocument=function(e){return r.context.service.builder.isBuildSupported(e).then(function(t){return t?r.context.service.builder.getTargetFolder(e).then(function(t){return t?o(t).then(function(t){return t?t:o(e).then(function(e){return e})}):o(e).then(function(e){return e})}):o(e).then(function(e){return e})})};var a=function(t){return r.getComponentJsDocument(t).then(function(t){e=t.getEntity().getFullPath()})},s=function(e){return r.context.service.ui5projecthandler.getAppNamespace(e)},u=function(e){var t=e.getEntity().getFullPath();return r.context.service.extensionproject.getExtensibilityModel(t).then(function(e){var t="";return e.extensibility&&e.extensibility.system&&(t=void 0!==e.extensibility.system.application?e.extensibility.system.application:""),t})};this.getHtml5App=function(e,n,r,i){for(var o=[],a=[],s=0;s<e.length;s++){var u=t+e[s].name+"/fiori/v1/designer/v1/apps/getHtml5/"+n;a.push(this.context.service.ajaxrequest.serviceCall("registercheck",u,"GET",null,r,i,!0,!0))}return Q.allSettled(a).then(function(t){for(var n=0;n<t.length;n++)if("fulfilled"===t[n].state){var r=t[n].value;if(r.length>0){var i={};i.subscription=e[n],i.value=r,o.push(i)}}return o})},this.getSites=function(e){var n=t+e+"/fiori/flp/runtime/v1/sites";return this.context.service.ajaxrequest.serviceCall("getSites",n,"GET",null,null,null,!1,!0)},this.getGroups=function(e,r){var i=t+e+n+"/groups/site/"+r;return this.context.service.ajaxrequest.serviceCall("getGroups",i,"GET",null,null,null,!1,!0)},this.getCategories=function(e){var r=t+e+n+"/categories";return this.context.service.ajaxrequest.serviceCall("getCategories",r,"GET",null,null,null,!1,!0)},this.getContentPackages=function(e,r){var i=t+e+n+"/content_packages?siteId="+r;return this.context.service.ajaxrequest.serviceCall("getContentPackage",i,"GET",null,null,null,!1,!0)};var c=function(e,t){e.push.apply(e,t)};this.getFioriLaunchpadModel=function(e){var t=Q.defer(),n=e+"/flp-config.json";return this.context.service.filesystem.documentProvider.getDocument(n).then(function(n){if(n)n.getContent().then(function(e){var n=jQuery.parseJSON(e);t.resolve(n)}).fail(function(n){n=r.context.i18n.getText("i18n","FioriLaunchpad_flpConfigJsonNotFound",[e]),t.reject(n)});else{var i={};i=r.context.i18n.getText("i18n","FioriLaunchpad_flpConfigJsonNotFound",[e]),t.reject(i)}}).fail(function(n){n=r.context.i18n.getText("i18n","FioriLaunchpad_wasNotFound",[e]),t.reject(n)}),t.promise},this.openWizard=function(e,t,n){return Q.sap.require("sap.watt.saptoolsets.fiori.hcp.fiorilaunchpad/ui/wizard/FLPRegistrationWizard").then(function(i){return i.openWizardUI(r.context,e,t,n)})};var l=function(t){var n=e.replace("/"+i,"");return n=n.replace("/"+t.getEntity().getName(),""),0===n.length&&(n="/"),n};this.getAllFioriProviderAccounts=function(e){for(var n=[],r=[],i=0;i<e.length;i++){var o=t+e[i].name+"/fiori/v1/neoRoles/isAdmin";r.push(this.context.service.ajaxrequest.serviceCall("authorization check",o,"GET",null,null,null,!0,!0))}return Q.allSettled(r).then(function(t){for(var r,i=0;i<t.length;i++)r=t[i],"fulfilled"===r.state&&(e[i].isAdmin=r.value,n.push(e[i]));return n})},this.getAllFlpSubscriptions=function(e,t,n){return r.context.service.hcpconnectivity.getSubscriptions(e,t,n,!0).then(function(e){return r.getAllFioriProviderAccounts(e)})},this.register=function(e,i,o){return a(i).then(function(){return r.context.service.flpconfig.loadConfig(i).then(function(a){return s(i).then(function(s){return u(i).then(function(u){a.application.title=e.name,a.application.description=e.description,a.application.intentSemanticObject=e.intent[0].semanticObject,a.application.intentAction=e.intent[0].action;var p=l(i);a.application.componentUrl=p,a.application.navigationComponentName=s,a.application.html5ApplicationName=e.hcpAppName,a.application.HCPParentApplicationName=u,1!==e.selectedGroups.length||e.selectedGroups[0]?c(a.assignment.groups,e.selectedGroups):a.assignment.groups=[],c(a.assignment.categories,e.selectedCategories),c(a.assignment.contentPackages,e.selectedcontentPackages),a.tile.type=e.selectedTiletype,a.tile.title=e.title,a.tile.subtitle=e.subtitle,a.tile.displayIconUrl=e.icon,a.tile.displayInfoText="";var f=[e.title,e.subtitle];return a.tile.searchKeywords=f.join(),"DynamicTile"===e.selectedTiletype&&(a.tile.serviceURL="/sap/fiori/"+e.hcpAppName+e.relativeServiceUrl+e.collection+"/$count",a.tile.displayNumberUnit=e.numberunit,a.tile.refreshInterval=e.refreshrate),r.context.service.ajaxrequest.resetCsrfToken().then(function(){var s=t+o+n+"/groups/site/DEFAULT";return r.context.service.ajaxrequest.serviceCall("getCSRF",s,"GET",null,null,null,!1,!0).then(function(){return s=t+o+n+"/descriptor/site/"+e.selectedSite,r.context.service.ajaxrequest.serviceCall("Register",s,"POST",a,null,null,!1,!1).then(function(e){return a.application.appUrl=e,r.context.service.flpconfig.saveConfig(a,i).then(function(){return{status:!0,appUrl:e}})}).catch(function(e){return{status:!1,message:e.errorResponse.error.msg}})})})})})})}).catch(function(e){return{status:!1,message:e}})}};return e}),define("sap.watt.saptoolsets.fiori.hcp.fiorilaunchpad/services/FlpConfig",[],function(){var e=function(){var e="flp-config.json",t=this;this.loadConfig=function(){return{application:{id:"",title:"",description:"",type:"SAP_UI5_Component",componentUrl:"",appUrl:"",navigationComponentName:"",intentSemanticObject:"",intentAction:"",html5ApplicationName:""},assignment:{groups:[],contentPackages:[],categories:[]},tile:{type:"StaticTile",title:"",subtitle:"",searchKeywords:"",displayIconUrl:"",displayInfoText:"",size:"1x1",serviceURL:"",refreshInterval:""}}};var n=function(e,t){return e.getEntity().getFullPath()+"/"+t},r=function(e,r){return e.objectExists(r).then(function(i){return i?t.context.service.filesystem.documentProvider.getDocument(n(e,r)):e.createFile(r)})};this.saveConfig=function(t,n){return r(n,e).then(function(e){return e.setContent(JSON.stringify(t,void 0,4)).then(function(){return e.save()})})}};return e}),define("sap.watt.saptoolsets.fiori.hcp.fiorilaunchpad/ui/dialogs/NotificationDialog",[],function(){"use strict";return{that:null,title:null,oDialog:void 0,init:function(){},info:function(e,t){void 0!==this.oDialog&&this.oDialog.destroy(),this.oDialog=new sap.ui.commons.Dialog({title:this.context.i18n.getText("i18n","usernotification_title"),resizable:!1,width:"500px",modal:!0,keepInWindow:!0});var n=this,r=new sap.ui.commons.TextView({text:this.context.i18n.getText("i18n","usernotification_success"),textAlign:"Left",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}).addStyleClass("RegisterSuccessMessageTV"),i=new sap.ui.commons.Link({text:this.context.i18n.getText("i18n","open_registered_application_link_text"),href:e,target:"_blank",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})}).addStyleClass("successfullyRegisteredLink"),o=' <embed data-index="0"> ',a=new sap.ui.commons.FormattedTextView;a.setHtmlText(o),a.addControl(i),a.addStyleClass("successfullyRegisteredText"),a.setLayoutData(new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}));var s=new sap.ui.commons.Link({text:this.context.i18n.getText("i18n","open_fiori_Launchpad_link_text"),href:t,target:"_blank",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})}).addStyleClass("successfullyRegisteredLink"),u=' <embed data-index="0"> ',c=new sap.ui.commons.FormattedTextView;c.setHtmlText(u),c.addControl(s),c.addStyleClass("successfullyRegisteredText"),c.setLayoutData(new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}));var l=new sap.ui.layout.Grid({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),vSpacing:0,content:[r,a,c]});return this.oDialog.addContent(l),this.oDialog.addButton(new sap.ui.commons.Button({text:this.context.i18n.getText("i18n","OK"),press:function(){n.oDialog.close()}})),this.oDialog.open()}}}),define("sap.watt.saptoolsets.fiori.hcp.heliumrepository/command/ImportFromHelium",{execute:function(){var e=this;return e.context.service.applicationsdialogservice.getContent().then(function(e){e.open("import",null).done()})},isEnabled:function(){var e=sap.watt.getEnv("server_type");return"java"===e||"local_hcproxy"===e?!1:!0}}),define("sap.watt.saptoolsets.fiori.hcp.heliumrepository/command/ImportFromHeliumContextMenu",{execute:function(){var e=this;return e.context.service.applicationsdialogservice.getContent().then(function(e){e.open("import",null).done()})},isAvailable:function(){return this.context.service.repositorybrowserUtils.isSingleRootSelection()},isEnabled:function(){var e=sap.watt.getEnv("server_type");return"java"===e||"local_hcproxy"===e?!1:!0}}),define("sap.watt.saptoolsets.fiori.hcp.heliumrepository/services/HeliumParentProject",["sap.watt.common.filesystem/document/FileFolderEntity","sap/watt/lib/jszip/jszip-shim"],function(e,t){var n=function(){var n=this,r="/",i=function(e,t){if(!e)throw new Error(t+" must be defined.")};this.getModelFolderFiles=function(e,t){i(e,"model folder path"),i(t,"system");var n="/api/html5api/accounts/"+t.account+"/"+t.type+"s/"+t.application+"/content?pathSuffixFilter=.json,metadata.xml";return e=e.substring(0,e.lastIndexOf("/")),s(n,e,t)},this.getDocument=function(t,o,a,s){i(t,"resource path"),i(o,"resource type"),i(a,"system"),0===t.indexOf(r)&&(t=t.substring(1));var u=t.lastIndexOf(r),c=t.substring(u+r.length),l=t.substring(0,t.lastIndexOf(r)),p=new e(o,c,l,"heliumFileDao","");return n.context.service.filesystem.documentProvider.createDocumentInternally(p,n.context.service.document.context.event).then(function(e){var t=e.getExtInfo();return t||(t={}),t.origin=a,t.external=!0,t.bBeautify=s,e.setExtInfo(t),e.getProject=function(){return this.isProject()?Q(this):Q(null)},e.getContent().thenResolve(e)}).fail(function(e){throw console.log(e),e})},this.getResourcesFromZipFiles=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r.lastIndexOf("/"),o=r;-1!==i&&(o=r.substring(i+1,r.length));var a={name:o,path:"/"+r,parentFolderPath:r.substring(0,r.lastIndexOf("/"))};t.push(a)}return t},this.getFileResourcesInfo=function(e,t){var r="/api/html5api/accounts/"+t.account+"/"+t.type+"s/"+e+"/content";return a(r).then(function(e){var t=Object.keys(e.files);return n.getResourcesFromZipFiles(t)})};var o=function(e){return n.getResponseFromHCP(e,"blob")},a=function(e){return n.getResponseFromHCP(e,"arraybuffer").then(function(e){var n=new t(e);return n})};this.getResponseFromHCP=function(e,t){var r=Q.defer(),i=new XMLHttpRequest;return i.open("GET",e),i.setRequestHeader("Accept","*/*"),i.responseType=t,i.onload=function(){if(4===this.readyState&&this.status<300)r.resolve(this.response);else{var e={};e.message=404===this.status||400===this.status?n.context.i18n.getText("i18n","HeliumParentProject_404_error"):n.context.i18n.getText("i18n","HeliumParentProject_internal_error"),r.reject(e)}},i.send(),r.promise},this.geti18nFolderFiles=function(e,t){var n="/api/html5api/accounts/"+t.account+"/"+t.type+"s/"+t.application+"/content?pathSuffixFilter=.properties";return s(n,e,t)};var s=function(t,i,o){return 0===i.indexOf(r)&&(i=i.substring(1)),a(t).then(function(t){var a=[];n.filePromises=[];for(var s=Object.keys(t.files),u=0;u<s.length;u++){var c=s[u];if(-1!==c.indexOf(i+r)&&t.files[c].options.dir===!1){var l=t.file(c).asText(),p=c.substring(c.lastIndexOf(r)+r.length,c.length),f=c.substring(0,c.lastIndexOf(r)),d=new e("file",p,f,"heliumFileDao",""),h=n.context.service.filesystem.documentProvider.createDocumentInternally(d,n.context.service.document.context.event).then(function(e){var t=e.getExtInfo();return t||(t={}),t.origin=o,t.external=!0,e.setExtInfo(t),e.getProject=function(){return this.isProject()?Q(this):Q(null)},e.setContent(l).thenResolve(e)}).fail(function(e){throw console.log(e),e});n.filePromises.push(h)}}return Q.allSettled(n.filePromises).spread(function(){jQuery.each(arguments,function(e,t){"fulfilled"===t.state&&t.value&&a.push(t.value)})}).then(function(){return a})})},u=function(e,t){i(e,"system"),i(e.account,"account"),i(e.application,"application name");var n={path:"/webapp/parent",target:{type:"application",preferLocal:!0,name:e.application},description:"Original Application"};return e.entryPath&&(n.target.entryPath=e.entryPath),t.push(n),Q(t)};this.getRuntimeDestinations=function(e,t){return u(e,t)};var c=function(){return sap.watt.getEnv("ui5dist")?{path:"/resources",target:{type:"destination",name:"ui5dist"},description:"SAPUI5 Resources"}:{path:"/resources",target:{type:"service",name:"sapui5",entryPath:"/resources"},description:"SAPUI5 Resources"}},l=function(){return sap.watt.getEnv("ui5dist")?{path:"/test-resources",target:{type:"destination",name:"ui5dist-test-resources"},description:"SAPUI5 Test Resources"}:{path:"/test-resources",target:{type:"service",name:"sapui5",entryPath:"/test-resources"},description:"SAPUI5 Test Resources"}},p=function(e,t){for(var r=!0,i=!0,o=[],a=0;a<e.length;a++)"/resources"===e[a].path&&(r=!1),"/test-resources"===e[a].path&&(i=!1);return r&&o.push(c()),i&&o.push(l()),o.length>0?n.context.service.neoapp.addDestinations(o,t):Q()};this.import=function(e,t,r){var i=[],a="/api/html5api/accounts/"+t.account+"/"+t.type+"s/"+e+"/content";return o(a).then(function(t){return r.importZip(t,!0).then(function(){return n.context.service.neoapp.getDestinations(r).spread(function(t,o){return o&&o.routes&&(i=o.routes),p(i,r).then(function(){return n.context.service.mockpreview.updateSettings(r).then(function(){n.context.service.repositorybrowser.setSelection(r,!0).done(),n.context.service.usernotification.liteInfo(n.context.i18n.getText("i18n","HeliumParentProject_msg_end",[e]),!0).done(),n.context.service.log.info("Import",n.context.i18n.getText("i18n","HeliumParentProject_msg_end",[e]),["user"]).done()})})})})})}};return n}),define("sap.watt.saptoolsets.fiori.hcp.heliumrepository/services/HeliumExtensionProject",[],function(){var e=function(){var e=this,t=function(t,n,r){return e.context.service.template.getTemplatesPerCategories("Fiori_project").then(function(i){var o=i[0].templates[0];return n.model.selectedTemplate=o,e.context.service.generation.generate(t,o,n.model,!0,r)})};this.create=function(n,r){return r.type="application",r.providerAccount&&(r.type="subscription"),e.context.service.parentproject.validateParentProject(r.application,"hcp",r).then(function(i){if(i.isValid===!0)return i.model.extensibility.system={},i.model.extensibility.system.account=r.account,i.model.extensibility.system.type=r.type,r.providerAccount&&(i.model.extensibility.system.providerAccount=r.providerAccount,i.model.extensibility.system.providerName=r.providerName),i.model.extensibility.system.application=r.name,i.model.extensibility.type="hcp",i.model.projectName=n,e.context.service.filesystem.documentProvider.getRoot().then(function(e){return e.createFolder(n).then(function(e){var n=e.getEntity().getFullPath();return t(n,i,e)})});throw new Error(i.message)})}};return e}),define("sap.watt.saptoolsets.fiori.hcp.heliumrepository/ui/services/ApplicationsDialogService",{getContent:function(){return this.context.service.applicationsdialog}}),define("sap.watt.saptoolsets.fiori.hcp.heliumrepository/ui/dialogs/ApplicationsDialog",[],function(){var e,t=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null,l=null,p=null,f=null,d=null,h=null,m=[],g=null,v=function(v,_){t=this.context,i=null,sap.watt.includeCSS(require.toUrl("sap.watt.saptoolsets.fiori.hcp.heliumrepository/ui/css/Dialog.css")),sap.watt.includeCSS(require.toUrl("sap.watt.ideplatform.template/css/wizard.css")),sap.watt.includeCSS(require.toUrl("sap.watt.ideplatform.template/css/templateWizard.css")),sap.watt.includeCSS(require.toUrl("sap.watt.saptoolsets.fiori.hcp.heliumrepository/ui/css/ApplicationsDialog.css")),n=new sap.ui.model.json.JSONModel,p=new sap.ui.commons.Dialog({title:t.i18n.getText("i18n","ApplicationsDialog_SelectApplicationHelium"),resizable:!1,width:"700px",modal:!0,keepInWindow:!0}),t.service.hcpauthentication.authenticate().then(function(b){f=b.account,d=b.username,h=b.password;var T=function(){s.setBusy(!0);var e=[],r=[],i=[],a=window.location.host.split("-")[0];e.push(t.service.hcpconnectivity.getApps(f,d,h)),e.push(t.service.hcpconnectivity.getSubscriptions(f,d,h)),o=[],Q.all(e).spread(function(){o=arguments[0],i=arguments[1];for(var e=0;e<i.length;e++)i[e].name!==a&&i[e].displayName.indexOf("webide")<0&&r.push(i[e]);o=o.concat(r),l.setText(""),n.setData({modelData:o}),s.setModel(n),s.bindRows("/modelData"),s.setBusy(!1),u.setEnabled(!0),u.focus()}).fail(function(e){C(),s.setBusy(!1),401===e.status?S(t.i18n.getText("i18n","ApplicationsDialog_WrongCredentials")):403===e.status?S(t.i18n.getText("i18n","ApplicationsDialog_NoAuthorizations")):S(e.info),p.getButtons()[0].setEnabled(!1)}).done()};u=new sap.ui.commons.SearchField({enableListSuggest:!1,enableFilterMode:!0,enableClear:!0,enabled:!1,tooltip:t.i18n.getText("i18n","ApplicationsDialog_SearchApplication"),width:"100%",startSuggestion:0,suggest:function(e){w(""),P(s,e.getParameter("value"))},layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})}).addStyleClass("buttons SearchField");var P=function(e,t){var o=I(t);n.setData({modelData:o}),e.setModel(n),e.bindRows("/modelData"),e.removeSelectionInterval(0,r),i=null,p.getButtons()[0].setEnabled(!1),"import"===v&&(A.setValue(""),w(""))},I=function(e){for(var t=[],n=0;n<o.length;n++){var r=o[n].name.toLowerCase();if(""===o[n].status)e&&0!==e.length&&-1===r.indexOf(e.toLowerCase())||t.push(o[n]);else{var i=o[n].status.toLowerCase();e&&0!==e.length&&-1===r.indexOf(e.toLowerCase())&&-1===i.indexOf(e.toLowerCase())||t.push(o[n])}}return t};if(s=new sap.ui.table.Table({visibleRowCount:7,firstVisibleRow:1,selectionMode:sap.ui.table.SelectionMode.Single,navigationMode:sap.ui.table.NavigationMode.Scrollbar,extension:[u],layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"}),noData:t.i18n.getText("i18n","ApplicationsDialog_NoData")}),s.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:t.i18n.getText("i18n","ApplicationsDialog_Name"),design:"Bold"}),template:(new sap.ui.commons.TextView).bindProperty("text","name"),sortProperty:"name",width:"300px"})),s.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:t.i18n.getText("i18n","ApplicationsDialog_State"),design:"Bold"}),template:(new sap.ui.commons.TextView).bindProperty("text","status"),sortProperty:"status",width:"200px"})),s.attachRowSelectionChange(function(e){if(w(""),s.setBusy(!0),p.getButtons()[0].setEnabled(!1),null!==e.getParameter("rowContext")){r=e.getParameter("rowIndex"),s.setSelectedIndex(r);var t=e.getParameter("rowContext"),n=t.getPath(),o=n.split("/"),a=o[o.length-1];return i=t.getModel().oData.modelData[a],k(v).then(function(){s.setBusy(!1)}).fail(function(e){s.setBusy(!1),e&&e.message&&S(e.message),p.getButtons()[0].setEnabled(!1)})}s.setBusy(!1)}),s.setSelectionBehavior(sap.ui.table.SelectionBehavior.RowOnly),T(),l=new sap.ui.commons.TextView({width:"100%",text:"",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})}).addStyleClass("errorTextWithHeight"),c=new sap.ui.layout.Grid({vSpacing:0}),"import"===v){var D=new sap.ui.commons.Label({text:t.i18n.getText("i18n","ApplicationsDialog_folder"),textAlign:"Left",layoutData:new sap.ui.layout.GridData({span:"L3 M2 S12"})}),A=new sap.ui.commons.TextField({placeholder:"",tooltip:t.i18n.getText("i18n","ApplicationsDialog_folder"),width:"100%",layoutData:new sap.ui.layout.GridData({span:"L9 M10 S12"}),liveChange:function(e){y(e).done()}}),N=new sap.ui.layout.Grid({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),vSpacing:0,content:[D,A]}).addStyleClass("buttons SearchField");c.addContent(u),c.addContent(s),c.addContent(N),c.addContent(l)}else c.addContent(u),c.addContent(s),c.addContent(l);p.addContent(c),p.addButton(new sap.ui.commons.Button({text:t.i18n.getText("i18n","OK"),enabled:!1,press:function(){O(i,v)}})),p.addButton(new sap.ui.commons.Button({text:t.i18n.getText("i18n","Cancel"),press:function(){R(v)}})),s.sort(s.getColumns()[0]),p.open();var k=function(e){switch(e){case"create":if("stopped"===i.status.toLowerCase())return p.getButtons()[0].setEnabled(!1),S(t.i18n.getText("i18n","ApplicationsDialog_StoppedApplication")),Q();var n={};return n.account=f,n.application=i.name,n.type="application",i.providerAccount&&(n.providerAccount=i.providerAccount,n.providerName=i.providerName,n.type="subscription"),t.service.parentproject.validateParentProject(i.name,"hcp",n).then(function(e){if(e.isValid===!0){var t=e.model.extensibility.component.replace("/Component.js","");t&&0!==t.indexOf("/")&&(t="/"+t),t&&(n.entryPath=t+"/"),e.model.extensibility.system=n,e.model.extensibility.type="hcp",a=e,p.getButtons()[0].setEnabled(!0),l.setText(""),E(i)}else p.getButtons()[0].setEnabled(!1),S(e.message)});case"import":return i.activeVersion?(A.setValue(i.name),x(i.name).then(function(e){e&&(p.getButtons()[0].setEnabled(!0),w(""))})):(p.getButtons()[0].setEnabled(!1),S(t.i18n.getText("i18n","HeliumParentProject_404_error")),Q());default:throw new Error(t.i18n.getText("i18n","ApplicationsDialog_AppSelectionErrorOccurred"))}},O=function(n,r){switch(r){case"create":_.setProjectValidation(a),_.setSelectedParentProjectPath(n.name,!1,"hcp",a.model.extensibility.system),p.close();break;case"import":return p.close(),m=[],t.service.progress.startTask().then(function(r){g=r,t.service.usernotification.liteInfo(t.i18n.getText("i18n","HeliumParentProject_msg_start",[n.name]),!1).done();var i={};return i.account=f,i.type="application",n.providerAccount&&(i.type="subscription"),i.application=n.name,e=A.getValue(),t.service.filesystem.documentProvider.getRoot().then(function(r){return r.createFolder(e).then(function(e){return e?t.service.perspective.getCurrentPerspective().then(function(e){return"development"!==e?t.service.perspective.renderPerspective("development"):Q()}).then(function(){return t.service.heliumparentproject.import(n.name,i,e).then(function(){t.service.progress.stopTask(g).done()})}):void 0}).fail(function(e){throw t.service.progress.stopTask(g).done(),e&&e.message?new Error(e.message):new Error(t.i18n.getText("i18n","ExProjWizard_FaildToCreateFolder"))}).fail(function(e){throw t.service.progress.stopTask(g).done(),e&&e.message?new Error(e.message):new Error(t.i18n.getText("i18n","ExProjWizard_FaildToGenerateExProject"))})}).done()}).done();default:throw t.service.progress.stopTask(g).done(),t.service.usernotification.liteInfo(t.i18n.getText("i18n","ApplicationsDialog_ClickOKErrorOccurred"),!0).done(),new Error(t.i18n.getText("i18n","ApplicationsDialog_ClickOKErrorOccurred"))}},R=function(e){switch(e){case"create":case"import":p.close(),m=[];break;default:throw new Error(t.i18n.getText("i18n","ApplicationsDialog_ClickCancelErrorOccurred"))}}}).fail(function(e){if("Authentication_Cancel"!==e.message)throw new Error(e.message)}).done()},y=function(n){if(S(""),e=n.getParameter("liveValue"),e=e.trim(),""===e)S(t.i18n.getText("i18n","ApplicationsDialog_emptyfoldermsg")),p.getButtons()[0].setEnabled(!1);else if(null===i)S(t.i18n.getText("i18n","ApplicationsDialog_selectappmsg")),p.getButtons()[0].setEnabled(!1);else if(i.activeVersion){var r=e.charAt(e.length-1);if("."===r)S(t.i18n.getText("i18n","ApplicationsDialog_foldervalidationmsg")),p.getButtons()[0].setEnabled(!1);else for(var o=e.split("."),a=/^[a-zA-Z_]+[a-zA-Z0-9_]*$/,s=0;s<o.length;s++)return a.test(o[s])?x(e).then(function(e){e&&(w(""),p.getButtons()[0].setEnabled(!0))}):(S(t.i18n.getText("i18n","ApplicationsDialog_foldervalidationmsg")),p.getButtons()[0].setEnabled(!1),Q())}else p.getButtons()[0].setEnabled(!1),S(t.i18n.getText("i18n","HeliumParentProject_404_error"));return Q()},_=function(e){for(var n=0;n<m.length;n++)if(m[n].name.toLowerCase()===e.toLowerCase())return S(t.i18n.getText("i18n","ApplicationsDialog_folderexistmsg")),p.getButtons()[0].setEnabled(!1),!1;
return!0},x=function(e){return 0===m.length?b().then(function(){return _(e)}):Q(_(e))},b=function(){return t.service.filesystem.documentProvider.getRoot().then(function(e){return e.getCurrentMetadata().then(function(e){m=e})})},w=function(e){l.removeStyleClass("errorText"),l.addStyleClass("label"),l.setText(e)},S=function(e){l.removeStyleClass("label"),l.addStyleClass("errorText"),l.setText(e)},E=function(e){var n="";switch(e.status){case"STARTED":break;case"STOPPED":n=t.i18n.getText("i18n","ApplicationsDialog_StoppedApplication");break;default:return}w(n)},C=function(){n=new sap.ui.model.json.JSONModel,n.setData({modelData:{}}),s.setModel(n),s.bindRows("/modelData"),u.setEnabled(!1),u.setValue("")};return{open:v}}),define("sap.watt.saptoolsets.fiori.hcp.heliumrepository/ui/services/AuthenticationUIContainerService",{getContent:function(){return this.context.service.authenticationuicontainer},getFocusElement:function(){return Q()},getTitle:function(){return Q()},getTooltip:function(){return Q()},setVisible:function(){return Q()},isVisible:function(){return Q()}}),define("sap.watt.saptoolsets.fiori.hcp.heliumrepository/ui/containers/AuthenticationUIContainer",[],function(){var e,t=null,n=function(){return t=this.context,sap.watt.includeCSS(require.toUrl("sap.watt.saptoolsets.fiori.hcp.heliumrepository/ui/css/Dialog.css")),sap.watt.includeCSS(require.toUrl("sap.watt.ideplatform.template/css/wizard.css")),sap.watt.includeCSS(require.toUrl("sap.watt.ideplatform.template/css/templateWizard.css")),t.service.system.getSystemInfo().then(function(e){return r(e)}).fail(function(){return r()})},r=function(n){var r=null;if("hcproxy"===sap.watt.getEnv("server_type")){for(var i=sap.watt.getEnv("orion_preview"),o=i.split("/")[2],a=o.split("."),s=a.length-3,u=[],c=0;3>c;c++)u.push(a[s+c]);r=u.join(".")}else r="neo.ondemand.com";var l="";n&&(l=n.sAccount.toLowerCase());var p=n?n.sEMail.toLowerCase():"",f=new sap.ui.commons.Label({text:t.i18n.getText("i18n","AuthenticationUIContainer_Account"),textAlign:"Left",required:!0,layoutData:new sap.ui.layout.GridData({span:"L3 M3 S12"})}).addStyleClass("wizardBody"),d=new sap.ui.commons.TextField({value:l,width:"100%",enabled:!1,tooltip:t.i18n.getText("i18n","AuthenticationUIContainer_AccountTooltip"),layoutData:new sap.ui.layout.GridData({span:"L8 M8 S12"}),liveChange:function(e){h(e)},accessibleRole:sap.ui.core.AccessibleRole.Textbox}),h=function(e){var t=e.getParameter("liveValue");d.setValue(t),I()},m=new sap.ui.layout.Grid({width:"100%",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),content:[f,d]}),g=new sap.ui.commons.Label({required:!0,text:t.i18n.getText("i18n","AuthenticationUIContainer_Username"),textAlign:"Left",layoutData:new sap.ui.layout.GridData({span:"L3 M3 S12"})}).addStyleClass("wizardBody"),v=new sap.ui.commons.TextField({value:p,width:"100%",enabled:!1,tooltip:t.i18n.getText("i18n","AuthenticationUIContainer_UsernameTooltip"),layoutData:new sap.ui.layout.GridData({span:"L8 M8 S12"}),liveChange:function(e){y(e)},accessibleRole:sap.ui.core.AccessibleRole.Textbox}),y=function(e){var t=e.getParameter("liveValue");v.setValue(t),I()},_=new sap.ui.layout.Grid({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),content:[g,v]}),x=new sap.ui.commons.Label({required:!0,text:t.i18n.getText("i18n","AuthenticationUIContainer_Password"),textAlign:"Left",layoutData:new sap.ui.layout.GridData({span:"L3 M3 S12"})}).addStyleClass("wizardBody");e=new sap.ui.commons.PasswordField({value:"",width:"100%",tooltip:t.i18n.getText("i18n","AuthenticationUIContainer_PasswordTooltip"),layoutData:new sap.ui.layout.GridData({span:"L8 M8 S12"}),liveChange:function(e){b(e)},accessibleRole:sap.ui.core.AccessibleRole.Textbox});var b=function(t){var n=t.getParameter("liveValue");n!==e.getValue()&&(e.setValue(n),I())},w=new sap.ui.layout.Grid({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),content:[x,e]}),S=new sap.ui.layout.Grid({width:"100%",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),vSpacing:0,content:[m,_,w]}),E=function(e){var n={};return 0===e.length?(n.isValid=!1,n.message=t.i18n.getText("i18n","AuthenticationUIContainer_EmptyAccountInfoMsg"),n.severity="info",n):(n.isValid=!0,n)},C=function(e){var n={};return 0===e.length?(n.isValid=!1,n.message=t.i18n.getText("i18n","AuthenticationUIContainer_EmptyUsernameInfoMsg"),n.severity="info",n):(n.isValid=!0,n)},T=function(e){var n={};return 0===e.length?(n.isValid=!1,n.message=t.i18n.getText("i18n","AuthenticationUIContainer_EmptyPasswordInfoMsg"),n.severity="info",n):(n.isValid=!0,n)},P=function(e){S.fireEvent("validationResult",{result:e})},I=function(){var t=d.getValue().trim(),n=E(t);if(n.isValid===!1)return P(n),void 0;var r=v.getValue().trim(),i=C(r);if(i.isValid===!1)return P(i),void 0;var o=e.getValue().trim(),a=T(o);if(a.isValid===!1)return P(a),void 0;var s={};s.isValid=!0,s.account=t,s.username=r,s.password=o,P(s)};return S},i=function(){e.setValue("")};return{create:n,clearPassword:i}}),define("sap.watt.saptoolsets.fiori.hcp.deployment/command/DeployToHelium",{execute:function(){var e=this.context.service.selection,t=this.context.service.deployment;return e.assertNotEmpty().then(function(e){return t.deployToHelium(e[0])})},isAvailable:function(){return!0},isEnabled:function(){var e=sap.watt.getEnv("server_type");if("java"===e||"local_hcproxy"===e)return!1;var t=this.context.service.repositorybrowserUtils;return t.isSingleFolderNotRootSelection()}}),define("sap.watt.saptoolsets.fiori.hcp.deployment/util/OrionGit",[],function(){"use strict";var e={_fileService:null,_gitService:null,_initService:function(e){this._gitService=e.service.git,this._fileService=e.service.filesystem},_getOrionGitRepos:function(e){var t=Q.defer();return this._gitService.getRepositoriesList(e).then(function(e){t.resolve(e)}).fail(function(e){e.action="orion_getrepos",t.reject(e)}),t.promise},_initOrionGitRepo:function(e,t){var n,r=this,i=Q.defer();return this._fileService.documentProvider.getRoot().then(function(i){return n=i,r._gitService.initRepository(e,i.getEntity().getBackendData().location,t)}).then(function(){return n.refresh()}).then(function(e){i.resolve(e)}).fail(function(e){e.action="orion_initrepo",i.reject(e)}),i.promise},_getRemotesOfOrionGit:function(e){var t=Q.defer();return this._gitService.getRemotes(e).then(function(e){t.resolve(e)}).fail(function(e){e.action="orion_getremotes",t.reject(e)}),t.promise},_getRemoteOrionGit:function(e){var t=Q.defer();return this._gitService.getRemoteBranches(e).then(function(e){t.resolve(e)}).fail(function(e){e.action="orion_getremote",t.reject(e)}),t.promise},_addHeliumAsOrionRemoteGit:function(e,t){var n=Q.defer();return this._gitService.addRemote(e,"origin",t).then(function(e){n.resolve(e)}).fail(function(e){e.action="orion_addremote",n.reject(e)}),n.promise},_deleteRemoteOrionGit:function(e,t){var n=Q.defer();return this._gitService.deleteRemote(e,t).then(function(e){n.resolve(e)}).fail(function(e){e.action="orion_deleteremote",n.reject(e)}),n.promise},_fetchFromRemoteGit:function(e,t,n){var r=this,i=Q.defer();return this._gitService.getRepositoryDetails(e).then(function(i){return r._gitService.fetch(e,i,"",n,t)}).then(function(e){i.resolve(e)}).fail(function(e){e.action="orion_fetchfromremote",i.reject(e)}),i.promise},_getStatusOrionGit:function(e){var t=Q.defer();return this._gitService.getStatus(e).then(function(e){t.resolve(e)}).fail(function(e){e.action="orion_getstatus",t.reject(e)}),t.promise},_stageChangesOrionGit:function(e,t){var n=Q.defer();return this._gitService.stageMultipleFiles(e,t).then(function(e){n.resolve(e)}).fail(function(e){e.action="orion_stage",n.reject(e)}),n.promise},_getConfigOrionGit:function(){var e=Q.defer();return this._gitService.getGitSettings().then(function(t){e.resolve(t)}).fail(function(t){if(t&&404===t.status&&"git"===t.source){var n={};n.name="",n.email="",e.resolve(n)}else t.action="orion_getconfig",e.reject(t)}),e.promise},_commitChangesOrionGit:function(e,t){"undefined"==typeof t&&(t="project template");var n=Q.defer();return this._gitService.commit(e,t,void 0,!1,"").then(function(e){n.resolve(e)}).fail(function(e){e.action="orion_commit",n.reject(e)}),n.promise},_rebaseChangesOrionGit:function(e){var t=Q.defer();return this._gitService.rebase(e,"origin/master").then(function(e){t.resolve(e)}).fail(function(e){e.action="orion_reabse",t.reject(e)}),t.promise},_mergeChangesOrionGit:function(e){var t=Q.defer();return this._gitService.mergeChangesFromRemoteToHead(e,"origin/master").then(function(e){t.resolve(e)}).fail(function(e){e.action="orion_merge",t.reject(e)}),t.promise},_pushAllToRemoteGit:function(e,t,n){var r=this,i=Q.defer();return this._gitService.getRepositoryDetails(e).then(function(i){return r._gitService.push(e,!1,i,"",n,t)}).then(function(e){i.resolve(e)}).fail(function(e){e.action="orion_pushtoremote",i.reject(e)}),i.promise},_setRepoConfigurations:function(e){var t=this,n=Q.defer();return this._gitService.setRepositoryConfiguration(e,{Key:"branch.master.merge",Value:"refs/heads/master"}).then(function(){return t._gitService.setRepositoryConfiguration(e,{Key:"branch.master.remote",Value:"origin"})}).then(function(){n.resolve()}).fail(function(e){e.action="orion_setrepoconfig",n.reject(e)}),n.promise}};return e}),define("sap.watt.saptoolsets.fiori.hcp.deployment/service/Deployment",["../util/OrionGit","sap/watt/lib/lodash/lodash"],function(e,t){"use strict";var n="Forbidden";return{_appEntity:null,_oDocument:null,_oAuthView:null,_projectDocument:null,_sEventValue:null,_systemInfo:{appname:null,deployedappname:null,account:null,username:null},NEO_APP_FILE_NAME:"neo-app.json",init:function(){e._initService(this.context)},_setStatusView:function(){var e=this.context;this._oStatusView||(this._oStatusView=sap.ui.view({viewName:"sap.watt.saptoolsets.fiori.common.plugin.applicationstatus.view.ApplicationStatusDialog",type:sap.ui.core.mvc.ViewType.JS,viewData:{context:e}}))},_getAuthenticationView:function(){var e=this.context;this._oAuthView||(this._oAuthView=sap.ui.view({viewName:"sap.watt.saptoolsets.fiori.hcp.plugin.deployment.view.DeploymentDialog",type:sap.ui.core.mvc.ViewType.JS,viewData:{context:e}}))},_setErrorMsgInDialog:function(e,t){this._oAuthView.getController().reportError(this._getText(e),t),this._oAuthView._oDlg.setBusy(!1)},_handleDeployErrors:function(e,t){if(e.context.service.usernotification.liteInfo(e.context.i18n.getText("i18n","DeployLogFailureMsg"),!0).done(),e.context.service.usagemonitoring.report("deployment","deploy_to_hcp",e._sEventValue+"_failed").done(),"undefined"==typeof t.action){var r={title:"dlg_error",message:"msg_fail_heliumservices",info:""};e._oAuthView.getController().close(r)}else{if("Unauthorized"===t.info)return e._setErrorMsgInDialog("msg_unauthorized"),void 0;if(t.info===n&&403===t.status)return e._setErrorMsgInDialog("msg_forbidden"),void 0;switch(t.action){case"hcp_build":e._oAuthView.getController().close(),e.context.service.usernotification.alert(e.context.i18n.getText("i18n","deployment_cannotbuild",[t.message])).done();break;case"hcp_connectivity_getapps":e._setErrorMsgInDialog("msg_hcp_connectivity_getapps");break;case"hcp_connectivity_createapp":409===t.status?e._setErrorMsgInDialog("msg_heliumapp_exist"):e._setErrorMsgInDialog("msg_heliumapp_notcreated");break;case"hcp_connectivity_getappinfo":e._setErrorMsgInDialog("msg_hcp_connectivity_getappinfo");break;case"orion_initrepo":e._setErrorMsgInDialog("msg_initrepo");break;case"orion_getremotes":e._setErrorMsgInDialog("msg_getremotes");break;case"orion_addremote":e._setErrorMsgInDialog("msg_addremote");break;case"orion_deleteremote":e._setErrorMsgInDialog("msg_deleteremote");break;case"orion_fetchfromremote":e._setErrorMsgInDialog("msg_fetchfromremote");break;case"orion_getstatus":e._setErrorMsgInDialog("msg_getstatus");break;case"orion_stage":e._setErrorMsgInDialog("msg_stage");break;case"orion_commit":e._setErrorMsgInDialog("msg_commit");break;case"orion_merge":e._setErrorMsgInDialog("msg_merge");break;case"orion_merge_conflicts":e._setErrorMsgInDialog("msg_merge_conflicts",!0);break;case"orion_pushtoremote":t.oErrorPushResponse&&t.oErrorPushResponse.oPushedCommit&&"invalid committer"===t.oErrorPushResponse.oPushedCommit.Message?e._setErrorMsgInDialog("msg_invalid_committer"):e._setErrorMsgInDialog("msg_heliumapp_created");break;case"unsupported_deployment":e._setErrorMsgInDialog("msg_unsupported_deployment");break;case"app_version_exists":e._setErrorMsgInDialog("msg_version_exists",!0);break;case"heliumActivateApp":e._setErrorMsgInDialog("msg_activate_app");break;default:e._setErrorMsgInDialog("msg_unhandled_error")}}},ApplicationStatus:function(e){var t=this;return t.initializeParams(e).then(function(){t._setStatusView();var n={helium:t._systemInfo,projectDocument:t._projectDocument};return t.context.service.gitdispatcher.verifyUserInfo(t._projectDocument.getEntity()).then(function(){return t._oStatusView.getController().open(n,e)}).fail(function(){t.context.service.usernotification.warning(t._getText("msg_gitconfig")).done()})})},getDeploymentCase:function(n,r,i){var o=this,a=this.context,s=o._appEntity.getBackendData().git,u={firstDeployment:!0,gitURL:"",isGitUrlAlive:!1,useHCPForSCAndDeployment:!0,HCPAppName:""};return s?e._getRemotesOfOrionGit(s).then(function(o){var c=t.map(o.Children,"GitUrl");return c.length>0?a.service.hcpconnectivity.getHCPRemoteGitURL(o).then(function(t){u.firstDeployment=t?!1:!0,u.firstDeployment||(u.gitURL=t);var o=t?1:0;if(c.length>o&&(u.useHCPForSCAndDeployment=!1),o>0){var l=t;return a.service.hcpconnectivity.getHCPAppNameByGitURL(l,n,r,i).then(function(t){return t?(u.HCPAppName=t,u.isGitUrlAlive=!0,u):e._fetchFromRemoteGit(s,n,r).then(function(){return u.isGitUrlAlive=!0,u}).fail(function(){return u.isGitUrlAlive=!1,u})})}return u}):u}):Q(u)},_handleNewApplicationPrefix:function(t,n,r,i,o){var a=null,s=this._appEntity.getBackendData().git,u=this;return this.context.service.hcpconnectivity.createApp(t,n,r,i,o).then(function(){return u.context.service.hcpconnectivity.getAppInfo(t,n,r,i)}).then(function(e){a=e}).then(function(){return s?void 0:e._initOrionGitRepo(u._appEntity.getName(),u._appEntity.getBackendData().location).then(function(){return u.context.service.filesystem.documentProvider.getDocument(u._appEntity.getName())}).then(function(t){return u._projectDocument=t,u._appEntity=u._projectDocument.getEntity(),s=u._appEntity.getBackendData().git,e._setRepoConfigurations(s)})}).then(function(){var e={account:t,name:i};return u.context.service.setting.project.setProjectSettings("hcpdeploy",e,u._oDocument).fail(function(){})}).then(function(){return e._addHeliumAsOrionRemoteGit(s,a.repository)}).then(function(){return a})},_handleFirstDeploymentPrefix:function(e,t,n,r){return this._handleNewApplicationPrefix(e,t,n,r)},_handleApplicationStillExistsPrefix:function(e,t,n,r){return this.context.service.hcpconnectivity.getAppInfo(e,t,n,r).fail(function(){throw new Error(this.context.i18n.getText("i18n","msg_error_connecting_hcp"))})},_handleApplicationDeletedGitDeletedPrefix:function(t,n,r,i){var o=this;return e._deleteRemoteOrionGit(this._appEntity.getBackendData().git,"origin").then(function(){return o._handleNewApplicationPrefix(t,n,r,i)})},_handleApplicationDeletedGitExistsPrefix:function(e,t,n,r,i){return this._handleNewApplicationPrefix(e,t,n,r,i)},initializeParams:function(e){var t=this,n=e.document;return t._oDocument=n,n.getProject().then(function(e){t._projectDocument=e,t._appEntity=e.getEntity(),t._systemInfo.appname=t._appEntity.getName();var n={helium:t._systemInfo,projectDocument:t._projectDocument,entity:t._projectDocument.getEntity()},r=n.entity.getBackendData().git;return r?t.context.service.hcpconnectivity.getHCPAccountByGitURL(r).then(function(e){return e?(n.helium.account=e,n):t._getDefaultAccount().then(function(e){return n.helium.account=e,n})}):t._getDefaultAccount().then(function(e){return n.helium.account=e,n})})},_initDeployedAppName:function(e){if(""!==e.HCPAppName)return this._systemInfo.deployedappname=e.HCPAppName,void 0;var t=this._systemInfo.appname,n=/^[a-z][0-9a-z]*$/;t.length>30&&(t=t.substring(0,30)),n.test(t)||(t=t.replace(/[^a-z\d\s]+/gi,"")),this._systemInfo.deployedappname=t.toLowerCase()},_getAppInfoAnyCase:function(e,t,n,r,i){return e.firstDeployment?this._handleFirstDeploymentPrefix(t,n,r,i):e.firstDeployment||""===e.HCPAppName?e.firstDeployment||""!==e.HCPAppName||e.isGitUrlAlive?!e.firstDeployment&&""===e.HCPAppName&&e.isGitUrlAlive?this._handleApplicationDeletedGitExistsPrefix(t,n,r,i,e.gitURL):void 0:this._handleApplicationDeletedGitDeletedPrefix(t,n,r,i):this._handleApplicationStillExistsPrefix(t,n,r,e.HCPAppName)},_addCacheControls:function(e){var t=this;return e.objectExists(this.NEO_APP_FILE_NAME).then(function(n){if(n){var r=[],i={path:"*html",directive:"private",maxAge:0};return r.push(i),i={path:"sap-ui-cachebuster-info.json",directive:"private",maxAge:0},r.push(i),i={directive:"public",maxAge:31536e3},r.push(i),t.context.service.neoapp.addCacheControls(r,e,!1)}})},_setHCPPlatformBlock:function(e){var n=this;return n.context.service.ui5projecthandler.isManifestProjectGuidelinesType(e).then(function(r){return r?Q.all([n.context.service.ui5projecthandler.getHandlerFilePath(e),n.context.service.ui5projecthandler.getAttribute(e,"sap.platform.hcp")]).spread(function(r,i){var o=t.drop(r.split("/"),2).join("/");return i.uri=o,n.context.service.ui5projecthandler.setHCPPlatformBlock(e,i)}):Q()})},deployToHelium:function(r){var i,o=this,a=this.context,s=null,u=null;return this._getAuthenticationView(),o.initializeParams(r).then(function(c){return c.buttonText="setting_deploy",c.execution=function(r,c,l,p,f,d,h){a.service.usernotification.liteInfo(a.i18n.getText("i18n","DeployInProcess"),!1).done();var m=this;if(!u.useHCPForSCAndDeployment){var g=new Error;return g.action="unsupported_deployment",o._handleDeployErrors(o,g)}o._setHCPPlatformBlock(m.projectDocument).fail(function(e){a.service.log.warn("Deployment",a.i18n.getText("i18n","AddUriToManifestFailed",[e.message]),["user"]).done()}).then(function(){return o.context.service.builder.isBuildRequired(m.projectDocument).then(function(e){return e?o.context.service.builder.build(m.projectDocument):void 0})}).then(function(){return o._getAppInfoAnyCase(u,l,p,f,c).then(function(e){return s=o._appEntity.getBackendData().git,i=e,o.context.service.setting.project.getProjectSettings("hcpdeploy",m.projectDocument)}).then(function(e){return e||(e={account:l,name:c}),e.lastVersionWeTriedToDeploy=d,o.context.service.setting.project.setProjectSettings("hcpdeploy",e,m.projectDocument).fail(function(){})}).then(function(){return o._addCacheControls(m.projectDocument).fail(function(e){a.service.log.warn("Deployment",a.i18n.getText("i18n","AddCacheControlToNeoappFailed",[e.message]),["user"]).done()})}).then(function(){return e._fetchFromRemoteGit(s,p,f)}).then(function(){return e._getStatusOrionGit(s)}).then(function(n){var r=t.map(n,"Path");return e._stageChangesOrionGit(s,r)}).then(function(){return e._commitChangesOrionGit(s,"Commit of version: "+d)}).then(function(){return e._rebaseChangesOrionGit(s).fail(function(){a.service.gitclient.setVisible(!0);var e=new Error;throw e.action="orion_merge_conflicts",e})}).then(function(){return e._pushAllToRemoteGit(s,p,f)}).then(function(){return a.service.hcpconnectivity.getAppCommits(l,p,f,c)}).then(function(e){if(d&&""!==d){var t=e[0].commitId;return a.service.hcpconnectivity.setAppVersion(l,p,f,c,t,d).fail(function(e){var t=new Error;throw t.action="app_version_exists",e&&403===e.status&&(t.info=n,t.status=e.status),t})}}).then(function(){return h&&d&&""!==d?a.service.hcpconnectivity.activateApp(l,p,f,c,d).then(function(){return"STARTED"!==i.status?a.service.hcpconnectivity.startApp(l,p,f,c):void 0}):void 0}).then(function(){a.service.usernotification.liteInfo(a.i18n.getText("i18n","DeployLogSuccessMsg"),!0).done(),a.service.usagemonitoring.report("deployment","deploy_to_hcp",o._sEventValue).done();var e={title:"dlg_success",message:"msg_afterdeployment",info:""};h||(e.info="msg_heliumapp_version"),h&&(e.info="msg_heliumapp_started"),o._oAuthView.getController().close(e)}).finally(function(){a.service.repositorybrowser.refresh().then(function(){return a.service.gitclient.isAvailable(m.projectDocument).then(function(e){return e?a.service.gitclient.getStatus(m.projectDocument.getEntity(),!0).then(function(){return a.service.decoration.updateDecorations(m.projectDocument,!0)}):void 0})}).fail(function(){a.service.log.error("Deployment",a.i18n.getText("i18n","RepoBrowserRefreshFailed"),["user"]).done()}).done()}).fail(function(e){return o._handleDeployErrors(o,e)}).done()}).fail(function(e){return o._handleDeployErrors(o,e)}).done()},o.context.service.gitdispatcher.verifyUserInfo(c.entity).then(function(){return a.service.hcpauthentication.authenticate().then(function(e){return o.credentials=e,o.getDeploymentCase(e.username,e.password,c.helium.account).then(function(e){u=e,o._initDeployedAppName(u),u.firstDeployment?(o._oAuthView.getController().open(c,"deploy",c.entity.getBackendData().git,r,o.credentials),o._sEventValue="new"):u.firstDeployment||""!==u.HCPAppName||u.isGitUrlAlive?!u.firstDeployment&&""===u.HCPAppName&&u.isGitUrlAlive?o._oAuthView.getController().open(c,"deletedGitExists",c.entity.getBackendData().git,r,o.credentials):(o._oAuthView.getController().open(c,"redeploy",c.entity.getBackendData().git,r,o.credentials),o._sEventValue="update"):o._oAuthView.getController().open(c,"deletedGitNotExists",c.entity.getBackendData().git,r,o.credentials)}).then(function(){o.credentials=void 0}).fail(function(){o.context.service.usernotification.error(o._getText("msg_unhandled_error")).done()})}).fail(function(){})}).fail(function(){o.context.service.usernotification.warning(o._getText("msg_gitconfig")).done()})})},_showDeployedApp:function(e,t,n){var r=Q.defer(),i=require.toUrl("sap/watt/ideplatform/plugin/preview/view/wrapper.html")+"?url="+window.encodeURIComponent(e),o=t?t:window.open("","Deployment");return n?i=require.toUrl(e):addEventListener("message",function(e){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),e.origin===window.location.origin&&"previewReady"===e.data&&(o&&o.wrapper?r.resolve(o.wrapper):r.reject())},!1),o&&(o.location.href=i,o.focus()),r.promise},_getText:function(e){if(this.context){var t=this.context.i18n;return t.getText("i18n",e)}return e},_getDefaultAccount:function(){return this.context.service.hcpconnectivity.getHCPDefaultAccount().then(function(e){return e})},getAppURI:function(e,t,n,r){var i,o=this;return this.context.service.hcpconnectivity.getAppInfo(e,t,n,r).then(function(a){return i=a,o.context.service.hcpconnectivity.getAppCommits(e,t,n,r)}).then(function(e){return{activeURI:i.url,commitURI:i.url+"/?hc_commitid="+e[0].commitId}})}}}),define("sap.watt.saptoolsets.fiori.abap.abaprepository/command/DeployToBSP",{execute:function(){var e=this,t=this.context.service.selection;return Q.sap.require("sap/watt/saptoolsets/fiori/abap/plugin/abaprepository/ui/wizard/DeployWizard").then(function(n){return t.assertOwner(e.context.service.repositorybrowser).then(function(){return t.assertNotEmpty().then(function(t){return n.openWizard(e.context,t)})})})},isAvailable:function(){return!0},isEnabled:function(){var e=this;return this.context.service.repositorybrowserUtils.isSingleFolderNotRootSelection().then(function(t){return t?e.context.service.abaprepository.$().then(function(e){return!e.getdeployInProgress()}):!1})}}),define("sap.watt.saptoolsets.fiori.abap.abaprepository/service/ABAPDestination",[],function(){function e(){var e=this,t=null;this.getRestResource=function(n){return!n||null===n||"string"!=typeof n.wattUsage||"dev_abap"!==n.wattUsage||"string"!=typeof n.proxyUrlPrefix||n.proxyUrlPrefix.length<1?Q(null):(t&&null!==t&&"object"==typeof t[n.proxyUrlPrefix]||(t=t||{},t[n.proxyUrlPrefix]=e.context.service.adtRestResourceFactory.createInstance({urlPrefix:n.proxyUrlPrefix})),t[n.proxyUrlPrefix])}}return new e}),define("sap.watt.saptoolsets.fiori.abap.abaprepository/utils/ABAPRepositoryConstants",[],function(){return{CREATE_ACTION:1,UPDATE_ACTION:2,DELETE_ACTION:3,TRANSPORT_STATUS_S:4,TRANSPORT_STATUS_E:5,TRANSPORT_STATUS_LOCKED:6,TRANSPORT_STATUS_NOT_ASSAIGNED:7,TRANSPORT_STATUS_LOCAL_PACKAGE:8}}),define("sap.watt.saptoolsets.fiori.abap.abaprepository/ui/dialog/IndexMessagesDialog",[],function(){var e=function(e,t){var n=Q.defer(),r=new sap.ui.commons.Dialog({title:e.i18n.getText("i18n","IndexMessageDialog_Title"),resizable:!0,width:"50%",modal:!0,keepInWindow:!0}),i=new sap.ui.commons.Label({text:e.i18n.getText("i18n","IndexMessageDialog_MultiHeading"),textAlign:"Left",design:sap.ui.commons.LabelDesign.Bold,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}),o=new sap.ui.table.Table({visibleRowCount:3,selectionMode:sap.ui.table.SelectionMode.None,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})}),a=new sap.ui.commons.Label({text:e.i18n.getText("i18n","IndexMessageDialog_TypeColumn"),design:"Bold"});o.addColumn(new sap.ui.table.Column({label:a,template:(new sap.ui.commons.TextView).bindProperty("text","messageType"),width:"6rem"}));var s=new sap.ui.commons.Label({text:e.i18n.getText("i18n","IndexMessageDialog_MessageColumn"),design:"Bold"});o.addColumn(new sap.ui.table.Column({label:s,template:new sap.ui.commons.TextView({text:"{messageText}",tooltip:"{messageText}"}),width:"30rem"}));var u=new sap.ui.commons.Label({text:e.i18n.getText("i18n","IndexMessageDialog_LongTextColumn"),design:"Bold"});o.addColumn(new sap.ui.table.Column({label:u,template:new sap.ui.commons.TextView({text:"{longText}",tooltip:"{longText}"})}));var c=new sap.ui.model.json.JSONModel;c.setData({modelData:t}),o.setModel(c),o.bindRows("/modelData");var l=new sap.ui.layout.Grid({layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0}),content:[i,o],vSpacing:0});return r.addContent(l),r.addButton(new sap.ui.commons.Button({text:e.i18n.getText("i18n","OK"),press:function(){r.close(),n.resolve({sResult:"YES",bResult:!0})}})),r.open(),n.promise};return{open:e}}),define("sap.watt.saptoolsets.fiori.abap.abaprepository/utils/DeploymentUtility",["./ABAPRepositoryConstants"],function(e){var t=function(e){var t,n=$(e).xpath("//@xml:base");return n&&n.length>0&&(t=n[0].value),t},n=function(e,t){var n,r=$(e).find("atom\\:content, content");if(r&&r.length>0){var i=r[0];n=jQuery(i).attr("src"),n=URI(n).absoluteTo(t).toString()}return n},r=function(e,t){var n,r=jQuery(e).find("[rel='appindex']");if(r&&r.length>0){var i=r[0];n=jQuery(i).attr("href"),n=URI(n).absoluteTo(t).toString()}return n},i=function(e,t){var n="",r=0;if(e.deleted.length>0){for(n=n+t.i18n.getText("i18n","DeployWizard_Deleted")+"\n",r=0;r<e.deleted.length;r++)n=n+e.deleted[r].getEntity().getName()+"\n";n+="\n\n"}if(e.updated.length>0){for(n=n+t.i18n.getText("i18n","DeployWizard_Updated")+"\n",r=0;r<e.updated.length;r++)n=n+e.updated[r].getEntity().getName()+"\n";n+="\n\n"}if(e.created.length>0){for(n=n+t.i18n.getText("i18n","DeployWizard_Created")+"\n",r=0;r<e.created.length;r++)n=n+e.created[r].getEntity().getName()+"\n";n+="\n\n"}return""===n&&(n=t.i18n.getText("i18n","DeployWizard_UpdateApp")),n+=t.i18n.getText("i18n","DeployWizard_Continue")},o=function(t,n){for(var r={updated:[],deleted:[],created:[]},o=0;o<t.length;o++)t[o].actionType===e.CREATE_ACTION&&r.created.push(t[o].remoteDocument),t[o].actionType===e.UPDATE_ACTION&&r.updated.push(t[o].remoteDocument),t[o].actionType===e.DELETE_ACTION&&r.deleted.push(t[o].remoteDocument);return i(r,n)};return{getXmlBaseUrl:t,getContentUrl:n,getAppIndexUrl:r,buildUpdateMessage:o}}),define("sap.watt.saptoolsets.fiori.abap.abaprepository/service/ABAPRepository",["sap/watt/platform/plugin/utils/xml/XmlUtil","../utils/ABAPRepositoryConstants","../ui/dialog/IndexMessagesDialog","../utils/DeploymentUtility","sap/watt/lib/lodash/lodash","sap/watt/lib/jqueryxpathplugin/jqueryXpath"],function(e,t,n,r,i){var o=function(){var o=this,a=" ",s=1,u=1,c=!1,l={},p="sap";this.getdeployInProgress=function(){return c},this.openDeployWizard=function(e){return Q.sap.require("sap/watt/saptoolsets/fiori/abap/plugin/abaprepository/ui/wizard/DeployWizard").then(function(t){return t.openWizard(o.context,[e])})},this.getErrorMessage=function(t){var n="";if(0===t.indexOf("<?xml")){var r=e.stringToXml(t),i=e.getChildByTagName(r.childNodes[0],"message");n=i?i.textContent:t}else if(0===t.indexOf("<html")){var o=$("<div></div>");o.html(t);var a=$("h1",o);n=a&&a.length>0?a[0].innerHTML:t}else n=t;return n};var f=function(e,t){t=encodeURIComponent(t);var n=e.filestore_ui5_bsp+"/"+t;return Q.sap.ajax({type:"GET",url:n,headers:{"X-CSRF-Token":e.csrfToken}})},d=function(e){var t=e.proxyUrlPrefix+e.appIndexUrl;return Q.sap.ajax({type:"POST",url:t,headers:{Accept:"*/*","Content-Type":"application/octet-stream","X-CSRF-Token":e.csrfToken}})},h=function(e){var t=e[0],r=$(t).xpath("//*:MESSAGES/*");if(!r||0===r.length)return o.context.service.log.info(o.context.i18n.getText("i18n","DeployToBSPDialog_DeployLogTitle"),o.context.i18n.getText("i18n","ABAPRepository_AppIndexInfo"),["user"]).done(),void 0;for(var i=[],a=0;a<r.length;a++){var s,u="W",c="",l=$(r[a]).xpath("TYPE/text()")[0];l&&(u=l.textContent);var p=$(r[a]).xpath("LONG_TEXT/text()")[0];p&&(c=p.textContent);var f=$(r[a]).xpath("MESSAGE/text()")[0];if(f)s=f.textContent;else switch(u){case"A":s=o.context.i18n.getText("i18n","DeployIndexResponse_AbortedMessage");break;case"E":s=o.context.i18n.getText("i18n","DeployIndexResponse_ErrorMessage");break;default:continue}switch(u){case"A":case"W":case"E":i.push({messageType:o.context.i18n.getText("i18n","DeployIndexResponse_Type"+u),messageText:s,longText:c});case"S":case"I":u=o.context.i18n.getText("i18n","DeployIndexResponse_Type"+u),o.context.service.log.info(u+" - "+s,["user"]).done()}}i.length>0&&n.open(o.context,i).done()};this.createApplication=function(e,t){if(c=!0,s=1,u=t.remoteDocuments.length,e.filestore_ui5_bsp)return o.postFolder(a,t.name,e,t).then(function(n){var i=n[0],o=r.getXmlBaseUrl(i);e.xmlBaseValue=o;var a=r.getContentUrl(i,o);l.root=a;var s=r.getAppIndexUrl(i,o);e.appIndexUrl=s;var u=_(t.remoteDocuments);return m(u,0,e,t).then(function(){var n=x(t.remoteDocuments);return y(n,0,e,t).then(function(){return e.appIndexUrl?d(e).then(function(e){return h(e)}):Q()})})}).catch(function(e){c=!1;var n;n=e.responseText?o.getErrorMessage(e.responseText):e.message,o.context.service.log.error(o.context.i18n.getText("i18n","DeployToBSPDialog_DeployLogTitle"),o.context.i18n.getText("i18n","DeployWizard_FileError2",[t.name,n]),["user"]).done();var r={message:o.context.i18n.getText("i18n","DeployWizard_FileError2",[t.name,n])};return o.context.service.usagemonitoring.report("deployment","deploy_to_abap",n).done(),Q.reject(r)});throw new Error(o.context.i18n.getText("i18n","ABAPRepositoryService_DeployFailed_filestoreui5bspNotFound"))};var m=function(e,t,n,i){var a;if(t||(t=0),t<e.length){var c=e[t].getEntity().getName(),p=e[t].getEntity().getFullPath(),f=e[t].getEntity().getParent(),d=e[t].getEntity().getParentPath();return f?(a=l[d+"/"+f],a||(a=o.findParentContentUrl(i,f))):a=l.root,P(c,s,u),s+=1,o.postFolder(a,c,n,i).then(function(o){var s=o[0];a=r.getContentUrl(s,n.xmlBaseValue),l[p+"/"+c]=a;var u=t+1;return m(e,u,n,i)})}return Q()},g=function(e){var t="",n=e.lastIndexOf(".");return n>0&&(t=e.substr(n+1)),t},v=function(e){switch(g(e).toLowerCase()){case"jpg":case"jpeg":case"gif":case"ico":case"png":case"ttf":case"zip":case"jar":case"war":case"bmp":case"tif":case"tiff":return!0;default:return!1}},y=function(e,n,i,a,p){n||(n=0);var f;if(p||(p=t.CREATE_ACTION),n<e.length){var d=e[n].getEntity().getName(),h=e[n].getEntity().getFullPath(),m=e[n].getEntity().getParent(),g=e[n].getEntity().getParentPath(),_=e[n].getEntity().getContentUrl();
p===t.UPDATE_ACTION?f=_:m?(f=l[g+"/"+m],f||(f=o.findParentContentUrl(a,m))):f=l.root;var x=v(d),b="UTF-8";return P(d,s,u),s+=1,e[n].getContent().then(function(s){var u;return"string"==typeof s&&""===s.trim()?(o.context.service.log.error(o.context.i18n.getText("i18n","DeployToBSPDialog_DeployLogTitle"),o.context.i18n.getText("i18n","DeployWizard_FileError",[e[n].getEntity().getName()]),["user"]).done(),u=n+1,y(e,u,i,a)):p===t.UPDATE_ACTION?S(f,s,b,x,i,a).then(function(){return u=n+1,y(e,u,i,a,p)}):o.postFile(f,d,s,b,x,i,a).then(function(t){var o=t[0];return f=r.getContentUrl(o,i.xmlBaseValue),l[h+"/"+d]=f,u=n+1,y(e,u,i,a,p)})})}return c=!1,Q()};this.findParentContentUrl=function(e,t){for(var n,r=0;r<e.remoteDocuments.length;r++)if(n=e.remoteDocuments[r],n.getEntity().getName()===t)return n.getEntity().getContentUrl()},this.postFolder=function(e,t,n,r){var i,o="folder",a=!1,s=r.package;i=" "===e?n.filestore_ui5_bsp+"/"+e+"/content":n.proxyUrlPrefix+e;var u={};return u.type=o,u.name=t,u.isBinary=a,u.devclass=s,r.transport&&(u.corrNr=r.transport),r.description||(r.description="")," "===e&&(u.description=r.description),i=URI(i).search(u).toString(),Q.sap.ajax({type:"POST",url:i,headers:{Accept:"*/*","Content-Type":"application/octet-stream","X-CSRF-Token":n.csrfToken}})};var _=function(e,t){var n=[];return jQuery.each(e,function(e,r){"folder"===r.getEntity().getType()&&(t?t===r.action&&n.push(r):n.push(r))}),n},x=function(e,t){var n;return t?jQuery.isFunction(t)?(n=e.filter(function(e){return"file"===e.getEntity().getType()}),n.filter(t)):(n=e.filter(function(e){return"file"===e.getEntity().getType()}),n.filter(function(e){return e.action===t})):e.filter(function(e){return"file"===e.getEntity().getType()})},b=function(e,t,n){var r;return n?jQuery.isFunction(n)?(r=e.filter(function(e){return e.remoteDocument.getEntity().getType()===t}),r.filter(n)):(r=e.filter(function(e){return e.remoteDocument.getEntity().getType()===t}),r.filter(function(e){return e.actionType===n})):e.filter(function(e){return e.remoteDocument.getEntity().getType()===t})},w=function(e,t,n){for(var r=b(e,t,n),i=[],o=0;o<r.length;o++)i.push(r[o].remoteDocument);return i};this.postFile=function(e,t,n,r,i,o,a){var s=o.proxyUrlPrefix+e,u={};return u.type="file",u.name=t,u.isBinary=i,u.devclass=a.package,u.charset=r,a.transport&&(u.corrNr=a.transport),s=URI(s).search(u).toString(),Q.sap.ajax({type:"POST",url:s,data:n,processData:!1,headers:{Accept:"*/*","Content-Type":"application/octet-stream",processData:!1,"X-CSRF-Token":o.csrfToken}})};var S=function(e,t,n,r,i,o){var a=i.proxyUrlPrefix+e,s={};return s.isBinary=r,s.charset=n,o.transport&&(s.corrNr=o.transport),a=URI(a).search(s).toString(),Q.sap.ajax({type:"PUT",url:a,data:t,processData:!1,headers:{Accept:"*/*","Content-Type":"application/octet-stream",processData:!1,"X-CSRF-Token":i.csrfToken,"If-Match":"*"}})};this.deleteResource=function(e,t,n,r){c=!0;var i={};return r&&(i.deleteChildren="true"),n.transport&&(i.corrNr=n.transport),e=URI(e).search(i).toString(),Q.sap.ajax({type:"DELETE",url:e,headers:{Accept:"*/*","Content-Type":"application/octet-stream","X-CSRF-Token":t.csrfToken,"If-Match":"*"}}).then(function(){return c=!1,Q()}).catch(function(e){return c=!1,Q(e)})};var E=function(e,t,n){o.context.service.log.info("Deploy to SAPUI5 ABAP Repository",o.context.i18n.getText("i18n","Command_msg_report_delete",[e,t,n]),["user"]).done()},C=function(e,t,n,r){t||(t=0);var i=!1;if(t<e.length){var a=e[t].getEntity().getName();"folder"===e[t].getEntity().getType()&&(i=!0);var l=e[t].getEntity().getContentUrl();return l=n.proxyUrlPrefix+l,E(a,s,u),s+=1,o.deleteResource(l,n,r,i).then(function(){var i=t+1;return C(e,i,n,r)})}return c=!1,Q()},T=function(e){var n=w(e,"folder",t.UPDATE_ACTION);return e.length-n.length};this.updateApplication=function(e,n,i){if(c=!0,s=1,u=T(i),e.filestore_ui5_bsp){var a=w(i,"file",t.DELETE_ACTION);return C(a,0,e,n).then(function(){var a=w(i,"folder",t.DELETE_ACTION);return C(a,0,e,n).then(function(){var o=w(i,"folder",t.CREATE_ACTION);return f(e,n.name).then(function(a){var s=a[0],u=r.getXmlBaseUrl(s);e.xmlBaseValue=u;var c=r.getContentUrl(s,u);l.root=c;var p=r.getAppIndexUrl(s,u);return e.appIndexUrl=p,m(o,0,e,n).then(function(){var r=w(i,"file",t.CREATE_ACTION);return y(r,0,e,n,t.CREATE_ACTION).then(function(){var r=w(i,"file",t.UPDATE_ACTION);return y(r,0,e,n,t.UPDATE_ACTION).then(function(){return e.appIndexUrl?d(e).then(function(e){return h(e)}):void 0})})})})}).catch(function(e){c=!1;var t;t=e.responseText?o.getErrorMessage(e.responseText):e.message,o.context.service.log.error(o.context.i18n.getText("i18n","DeployToBSPDialog_DeployLogTitle"),o.context.i18n.getText("i18n","DeployWizard_FileError2",[n.name,t]),["user"]).done();var r={message:t};return o.context.service.usagemonitoring.report("deployment","deploy_to_abap",t).done(),Q.reject(r)})})}},this.getApplications=function(t){if(t.filestore_ui5_bsp){var n=t.filestore_ui5_bsp+"?path";return Q.sap.ajax({url:n,dataType:"xml",cache:!1}).then(function(t){var n=[];if(null===t[0])return n;for(var r=e.firstElementChild(t[0]).childNodes,i=0;i<r.length;i++){var o=r[i];if("atom:entry"===o.tagName&&o.hasChildNodes()){var a={};a.id=e.getChildNodeValue(o,"atom:id"),a.title=e.getChildNodeValue(o,"atom:title"),a.summary=e.getChildNodeValue(o,"atom:summary"),n.push(a)}}return n})}throw new Error(o.context.i18n.getText("i18n","ABAPRepositoryService_DeployFailed_filestoreui5bspNotFound"))},this.getDeploymentSettings=function(e){return e&&e.getEntity()?o.context.service.setting.project.getProjectSettings("deploy",e).then(function(e){return e?e:null}).fail(function(e){throw"INVALID_JSON_FORMAT"===e.message?new Error(o.context.i18n.getText("i18n","Command_invalidProjectJson")):e}):null},this.getAppNamespace=function(e){var t=p;if(e.lastIndexOf("/")===e.length-1&&(e=e.substring(0,e.length-1)),0===e.indexOf("/")&&(e=e.substring(1)),e.lastIndexOf("/")>-1){var n=e.split("/");t=n[0]}return t},this.getDeploymentInfo=function(e){if(e){var t;return this.context.service.abaprepository.getDeploymentSettings(e).then(function(e){return e&&e.name&&e.destination?(t=e.name,o.context.service.destination.getDestination(e.destination).then(function(n){var r=null;if(r=i.find(n,function(e){var t=e.wattUsage;return"dev_abap"===t?!0:void 0})){var a=r.proxyUrlPrefix+"/sap/bc/adt/filestore/ui5-bsp/objects",s={};return s.path=t,a=URI(a).search(s).toString(),Q.sap.ajax({type:"GET",url:a}).then(function(e){return e&&e[0]?o.getDeploymentDetails(t,r):void 0}).fail(function(e){var n;n=e.responseText?o.getErrorMessage(e.responseText):e.message,o.context.service.log.error(o.context.i18n.getText("i18n","ApplicationStatus_LogTitle"),o.context.i18n.getText("i18n","ApplicationStatus_GetAtomFeedFailed",[t,n]),["user"]).done()})}o.context.service.log.error(o.context.i18n.getText("i18n","ApplicationStatus_LogTitle"),o.context.i18n.getText("i18n","ApplicationStatus_GetDestination",[e.destination]),["user"]).done()})):void 0})}},this.getDeploymentDetails=function(e,t){var n;if(e&&t)return this.context.service.transport.getApplicationInfo(e,t).then(function(r){return n=r,n.destination=t.name,n.name=e,n.package=r.packageValue,n}).fail(function(r){return r.jqXHR&&r.jqXHR.status&&404===r.jqXHR.status?(n={},n.destination=t.name,n.name=e,n.package="$TMP",n):(o.context.service.log.error(o.context.i18n.getText("i18n","ApplicationStatus_LogTitle"),o.context.i18n.getText("i18n","ApplicationStatus_GetAppInfoFailed",[e,r.message]),["user"]).done(),void 0)})};var P=function(e,t,n){o.context.service.log.info("Deploy to SAPUI5 ABAP Repository",o.context.i18n.getText("i18n","Command_msg_report",[e,t,n]),["user"]).done()};this.updateProjectJsonWithDeploy=function(e,t,n){return o.context.service.filesystem.documentProvider.getDocument(t).then(function(t){var r={};return r.destination=n.name,r.name=e,o.context.service.setting.project.setProjectSettings("deploy",r,t)})},this.getAtoSettings=function(t){var n=t;return Q.sap.ajax({url:n,dataType:"xml",cache:!1}).then(function(t){var n=e.firstElementChild(t[0]);if("ato:settings"===n.tagName){var r={};return r.packageName=n.getAttribute("developmentPackage"),r.prefixName=n.getAttribute("developmentPrefix"),r.operationsType=n.getAttribute("operationsType"),r.isExtensibilityDevSystem=n.getAttribute("isExtensibilityDevelopmentSystem"),r}})},this.parseDependenciesResponse=function(e,t){var n=[];if(e&&t&&t.length>0){var r=e[t];if(r){var o=r.dependencies;o&&o.length>0&&(n=i.remove(o,function(e){return e.url.length>0&&e.id!==t}))}}return n};var I=function(e,t){var n=t.id;n=n.split(".").join("/");var r={path:"/resources/"+n,target:{type:"destination",name:e.name,entryPath:t.url,preferLocal:!0},description:n+" Reuse Library"};return r},D=function(e,t){var n="/sap/bc/ui2/app_index/ui5_app_info",r=e.proxyUrlPrefix+n,i={};return i.id=t,e.sapClient&&e.sapClient.length>0&&(i["sap-client"]=e.sapClient),r=URI(r).search(i).toString(),Q.sap.ajax({type:"GET",url:r})};this.getDependenciesAsNeoappRoutes=function(e,t){var n=[];return e&&t&&0!==t.length?o.getDependencies(e,t).then(function(t){for(var r,i=0;i<t.length;i++)r=I(e,t[i]),n.push(r);return n}):n},this.getDependencies=function(e,t){var n=[];return e&&t&&0!==t.length?D(e,t).then(function(e){return e&&e.length>0&&(n=o.parseDependenciesResponse(e[0],t)),n}):n}};return o}),define("sap.watt.saptoolsets.fiori.abap.abaprepository/service/BSPParentProject",["sap/watt/platform/plugin/utils/xml/XmlUtil","sap.watt.common.filesystem/document/FileFolderEntity","sap/watt/lib/jszip/jszip-shim","../utils/DeploymentUtility"],function(e,t,n,r){var i=function(){var i=this,o="%2f",a={};this.getFileResourcesInfo=function(e,t,n){return i.context.service.discovery.getStatusBySystem(t).then(function(t){if(t.filestore_ui5_bsp){var r=[],o=[],a=l(t,e,r,e,n);return o.push(a),Q.all(o).spread(function(){return r})}throw new Error(i.context.i18n.getText("i18n","ABAPRepositoryService_DeployFailed_filestoreui5bspNotFound"))})};var s=function(e,t){return e.indexOf(t)>-1},u=function(e){return s(e,"/")?encodeURIComponent(e):e},c=function(e){return s(e,"%2f")?decodeURIComponent(e):e};i._getLocalFullName=function(e,t,n){if(!e||!t||!n)return"";var r=c(e),i=r.replace(t,n);return i};var l=function(t,n,s,c,f){n=u(n);var d=t.filestore_ui5_bsp+"/"+n+"/content";return Q.sap.ajax({url:d,dataType:"xml",cache:!1}).then(function(u){for(var p=[],d=e.firstElementChild(u[0]).childNodes,h=d.length,m=0;h>m;m++){var g=d[m];if("atom:entry"===g.tagName){var v=e.getChildByTagName(g,"atom:category"),y=e.getAttribute(v,"term"),_="folder"===y?!0:!1;n=e.getChildNodeValue(g,"atom:id");var x=n.substring(n.lastIndexOf(o)+3,n.length),b=n.substring(0,n.lastIndexOf(o)),w=r.getXmlBaseUrl(g),S=r.getContentUrl(g,w);a[x]=S;var E=a[b],C=i._getLocalFullName(n,c,f),T=decodeURIComponent(n),P={name:x,path:n,localFullName:C,type:y,parent:b,contentUrl:S,parentContentUrl:E,parentFolderPath:T.substring(0,T.lastIndexOf("/"))};if(s.push(P),_){var I=l(t,n,s,c,f);p.push(I)}}}return Q.all(p).spread(function(){})}).fail(function(e){var t=p(e.responseText);return i.context.service.log.error(i.context.i18n.getText("i18n","Import_ImportTitle"),t,["user"]).done(),Q({message:t})})},p=function(t){var n=e.stringToXml(t),r=e.getChildByTagName(n.childNodes[0],"message");return r.textContent};this.getRuntimeDestinations=function(e){var t=[];if(!e)return t;var n={ui5_execute_abap:"ui5_execute_abap",odata_abap:"odata_abap"};return this.context.service.destination.getDestinations().then(function(r){if(!r)return t;for(var i=0;i<r.length;i++){var o=r[i];if(o.name===e.name){for(var a=0;a<r.length;a++){var s=r[a],u=s.wattUsage;if(n[u]&&s.systemId===o.systemId&&s.name===o.name&&s.sapClient===o.sapClient){var c={};c.path=s.path,c.wattUsage=s.wattUsage,c.target={},c.target.type="destination",c.target.name=s.name,s.entryPath&&(c.target.entryPath=s.entryPath),c.description=s.description;for(var l=!0,p=0;p<t.length;p++)if(t[p].path===c.path){l=!1;break}l&&t.push(c)}}return t}}return t})};var f=function(t,n,r){return i.context.self.getDocument(t,"folder",r).then(function(t){return t.getContent().then(function(t){for(var n=[],o=e.firstElementChild(t),a=0;a<o.childElementCount;a++){var s=o.childNodes[a];if(s.hasChildNodes()){var u=e.getChildNodeValue(s,"atom:id");u.length>0&&n.push(i.context.self.getDocument(u,"file",r))}}return Q.allSettled(n).then(function(e){var t=[];return jQuery.each(e,function(e,n){"fulfilled"===n.state&&n.value&&t.push(n.value)}),t})})})};this.geti18nFolderFiles=function(e,t){return f(e,"i18nFolderName",t)},this.getModelFolderFiles=function(e,t){return e=e.substring(0,e.lastIndexOf("%2f")),f(e,"model",t)},this.getDocument=function(e,n,r,a){var s,u=e.lastIndexOf(o);s=-1===u?e:e.substring(u+o.length);var l=c(e),p=l.substring(0,l.lastIndexOf("/")),f=new t(n,s,p,"bspFileDao","");return i.context.service.filesystem.documentProvider.createDocumentInternally(f,i.context.service.document.context.event).then(function(e){var t=e.getExtInfo();return t||(t={}),t.origin=r,t.external=!0,t.bBeautify=a===!0,e.setExtInfo(t),e.getProject=function(){return this.isProject()?Q(this):Q(null)},e.getContent().thenResolve(e)}).fail(function(e){throw console.log(e),e})};var d=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.name===t.name||r.systemId===t.id&&r.sapClient===t.client)return r}};this._addDestinations=function(e,t){var n=[];return i.context.service.destination.getDestinations().then(function(r){for(var o=0;o<r.length;o++){var a=r[o];if(a.systemId===e.systemId&&a.name===e.name&&a.sapClient===e.sapClient&&"odata_abap"===a.wattUsage){var s={path:a.path,target:{type:"destination",name:a.name},description:a.description};s=a.entryPath?jQuery.extend(!0,s,{target:{entryPath:a.entryPath}}):s,n.push(s)}}var u={path:"/sap/bc/ui5_ui5",target:{type:"destination",name:e.name,entryPath:"/sap/bc/ui5_ui5"},description:e.description};return n.push(u),i.context.service.neoapp.addDestinations(n,t)})},this._updateNeoAppJson=function(e,t){return i._addDestinations(e,t).then(function(){return i.context.service.ui5projecthandler.isManifestProjectGuidelinesType(t).then(function(n){return n?i.context.service.ui5projecthandler.getAppNamespace(t).then(function(n){return i.context.service.abaprepository.getDependenciesAsNeoappRoutes(e,n).then(function(e){return e&&e.length>0?i.context.service.neoapp.addDestinations(e,t):void 0}).fail(function(e){i.context.service.log.info(i.context.i18n.getText("i18n","Import_ImportTitle"),i.context.i18n.getText("i18n","ImportFromABAP_FailedToGetDependencies",[n,e.responseText]),["user"]).done()})}):void 0})})};var h=function(e,t,n){i.context.service.log.info("Import from SAPUI5 ABAP Repository",i.context.i18n.getText("i18n","BSPParentProject_msg_report",[e,t,n]),["user"]).done()},m=function(e,t,n,r){return n.importZip(t,!0).then(function(){return i.context.service.destination.getDestinations("dev_abap").then(function(t){var o=d(t,e);return i._updateNeoAppJson(o,n).then(function(){return i.context.service.mockpreview.updateSettings(n).then(function(){return i.context.service.abaprepository.updateProjectJsonWithDeploy(r,n.getEntity().getFullPath(),e)})})})})};this.getResponse=function(e){var t=Q.defer(),n=new XMLHttpRequest;return n.open("GET",e),n.setRequestHeader("Accept","*/*"),n.responseType="arraybuffer",n.onload=function(){4===this.readyState&&this.status<300?t.resolve(this.response):t.reject(this.statusText)},n.send(),t.promise},this.handleSingleFileFromBsp=function(e,t,n,r,a){var s,u,c=n+"/";return i.getResponse(e).then(function(e){var n=/\.[0-9a-z]+$/i;return e||(e=""),"folder"!==t.type&&(s=t.path.split(o).join("/"),u=s.indexOf(c),u>-1&&(s=s.substr(u+c.length)),jQuery.sap.endsWith(s,".xml")?a.file(s,e):n.test(s)&&a.file(s,e)),Q()}).catch(function(e){var n=t.path.split(o).join("/");i.context.service.log.error(i.context.i18n.getText("i18n","Import_ImportTitle"),i.context.i18n.getText("i18n","Import_ImportError",[t.type+" "+n,e]),["user"]).done();var r=t.type;return r=r.charAt(0).toUpperCase()+r.slice(1),Q({error:r+" "+n+": "+e+"\n"})})},this.import=function(e,t,r){var o=new n;return i.getFileResourcesInfo(e,t).then(function(n){return 0===n.length?Q():i.context.service.destination.getDestinations("dev_abap").then(function(a){for(var s=d(a,t),u=n.length,c=[],l=0;l<n.length;l++){var p=n[l];h(p.name,l+1,u);var f=s.url+"/filestore/ui5-bsp/objects/"+p.path+"/content";c.push(i.handleSingleFileFromBsp(f,p,e,t,o))}return Q.all(c).spread(function(){var n=o.generate({type:"blob"}),a=arguments,s=[];return m(t,n,r,e).then(function(){i.context.service.repositorybrowser.setSelection(r,!0).done(),i.context.service.usernotification.liteInfo(i.context.i18n.getText("i18n","BSPParentProject_msg_end",[e]),!0).done(),i.context.service.log.info("Import",i.context.i18n.getText("i18n","BSPParentProject_msg_end",[e]),["user"]).done();for(var t=0;t<a.length;t++)a[t]&&s.push(a[t]);return s.length>0?Q.reject(s):void 0})})})})}};return i}),define("sap.watt.saptoolsets.fiori.abap.abaprepository/service/Transport",["../utils/ABAPRepositoryConstants"],function(e){var t="sap/bc/adt/discovery",n="http://www.sap.com/adt/categories/cts",r="transports",i="transportchecks",o=function(){function o(e,r){return u.context.service.adtDiscoveryFactory.getDiscovery(t,{urlPrefix:r.proxyUrlPrefix}).then(function(t){return t.getCollectionMember(n,e).then(function(e){return e.getUri()},function(){})})}function a(e){return o(r,e)}function s(e){return o(i,e)}var u=this;this.createTransport=function(e,t,n,r){return a(r).then(function(i){if(i&&null!==i){var o='<?xml version="1.0" encoding="UTF-8"?><asx:abap xmlns:asx="http://www.sap.com/abapxml" version="1.0"><asx:values><DATA><OPERATION>I</OPERATION><DEVCLASS>'+e+"</DEVCLASS>"+"<REQUEST_TEXT>"+n+"</REQUEST_TEXT>"+"<REF>/sap/bc/adt/filestore/ui5-bsp/objects/"+t+"/$create</REF>"+"</DATA>"+"</asx:values>"+"</asx:abap>";return u.context.service.abapdestination.getRestResource(r).then(function(e){return e.post({url:i,data:o,headers:{Accept:"text/plain","X-sap-adt-profiling":"server-time","Content-Type":"application/vnd.sap.as+xml; charset=utf-8; dataname=com.sap.adt.CreateCorrectionRequest"}}).then(function(e){var t=e.data.replace("/com.sap.cts/object_record/","");return t},function(e){var t;throw e.adtErrorData?(t=e.adtErrorData,t.message&&t.message.text&&(t=t.message.text)):t=e.textStatus,new Error(u.context.i18n.getText("i18n","Transport_CreateRequestFailed",[t]))})})}throw new Error(u.context.i18n.getText("i18n","Transport_CreateFailed_transportsNotFound"))})},this.getApplicationInfo=function(e,t){return s(t).then(function(n){return n&&null!==n?c("",e,"","$new",t,n).then(function(e){var t;t="string"==typeof e?e:(new XMLSerializer).serializeToString(e);var n=$(jQuery.sap.parseXML(t));return packge=n.find("DEVCLASS").text(),transport=n.find("LOCKS>CTS_OBJECT_LOCK>LOCK_HOLDER>REQ_HEADER>TRKORR").text(),""===transport&&(transport=void 0),{transportValue:transport,packageValue:packge}}):{transportValue:void 0,packageValue:"$TMP"}})},this.getTransports=function(e,t,n){return s(n).then(function(r){if(r&&null!==r){var i="I",o="$create";return c(e,t,i,o,n,r)}throw new Error(u.context.i18n.getText("i18n","Transport_GetTransportsFailed_transportchecksNotFound"))},function(e){throw e})};var c=function(e,t,n,r,i,o){var a=o,s=p(t,e,n,r);return u.context.service.abapdestination.getRestResource(i).then(function(e){return e.post({url:a,data:s,headers:{Accept:"application/vnd.sap.as+xml; dataname=com.sap.adt.transport.service.checkData","Content-Type":"application/vnd.sap.as+xml; charset=UTF-8; dataname=com.sap.adt.transport.service.checkData","X-sap-adt-profiling":"server-time"}}).then(function(e){if(200===e.jqXHR.status&&""===e.data)throw new Error(u.context.i18n.getText("i18n","TransportChecks_Note_Not_Implemented"));return e.data},function(e){throw e})})},l=function(e){return encodeURIComponent(e)},p=function(e,t,n,r){var i=[];i.push(t),i.push(n),e=l(e),i.push(e),i.push(r);var o='<?xml version="1.0" encoding="UTF-8" ?><asx:abap version="1.0" xmlns:asx="http://www.sap.com/abapxml"><asx:values><DATA><PGMID></PGMID><OBJECT></OBJECT><OBJECTNAME></OBJECTNAME><DEVCLASS>{0}</DEVCLASS><OPERATION>{1}</OPERATION><URI>/sap/bc/adt/filestore/ui5-bsp/objects/{2}/{3}</URI></DATA></asx:values></asx:abap>';return o=f(o,i)},f=function(e,t){for(var n=0;n<t.length;n++){var r=new RegExp("\\{"+n+"\\}","gm");e=e.replace(r,t[n])}return e},d=function(t,n){var r=t.find("DLVUNIT").text();if("LOCAL"===r){var i=t.find("DEVCLASS").text();return n.status=e.TRANSPORT_STATUS_LOCAL_PACKAGE,n.data.package=i,n}return void 0},h=function(t,n){var r=t.find("LOCKS").text();if(r){var i=t.find("TRKORR"),o=$(i[0]).text(),a=t.find("DEVCLASS").text();return n.status=e.TRANSPORT_STATUS_LOCKED,n.data.transport=o,n.data.package=a,n}return void 0};this.analyseTransportsResponse=function(t){var n,r,i={status:"",data:{}};if(""===t)return i.status=e.TRANSPORT_STATUS_E,i.data.message="",i;var o=(new XMLSerializer).serializeToString(t),a=$(jQuery.sap.parseXML(o)),s=a.find("RESULT").text();if("S"===s){i.status=e.TRANSPORT_STATUS_S;var u=a.find("RECORDING").text();if(""===u)return(r=h(a,i))?r:(r=d(a,i))?r:(i.status=e.TRANSPORT_STATUS_NOT_ASSAIGNED,i);i.data.transports=[];var c=a.find("REQ_HEADER");if(c){if(r=h(a,i))return r;c.each(function(){var e={};e.transportRequest=$(this).find("TRKORR").text(),e.user=$(this).find("AS4USER").text(),e.target=$(this).find("TARSYSTEM").text(),e.text=$(this).find("AS4TEXT").text(),i.data.transports.push(e)})}return i}return"E"===s?(n=a.find("TEXT").text(),i.status=e.TRANSPORT_STATUS_E,i.data.message=n,i):void 0}};return o}),define("sap.watt.saptoolsets.fiori.abap.abaprepository/service/Discovery",[],function(){var e=function(){var e={transports:{scheme:"http://www.sap.com/adt/categories/cts",term:"transports"},transportchecks:{scheme:"http://www.sap.com/adt/categories/cts",term:"transportchecks"},filestore_ui5_bsp:{scheme:"http://www.sap.com/adt/categories/filestore",term:"filestore-ui5-bsp"},search:{scheme:"http://www.sap.com/adt/categories/respository",term:"search"},ato_settings:{scheme:"http://www.sap.com/adt/categories/ato",term:"settings"}},t=function(e,t,n){if(e)for(var r=jQuery(e).find("[term='"+t.term+"']"),i=0;i<r.length;i++){var o=r[i];if(o.attributes&&o.attributes.scheme&&o.attributes.scheme.value===t.scheme&&o.parentNode){var a=o.parentNode.getAttribute("href");if(a){var s=a.indexOf(n.path);if(-1!==s){var u=s+n.path.length;return n.url+a.substring(u)}}}}return void 0},n=function(n,r,i){for(var o=Object.keys(e),a=0;a<o.length;a++){var s=o[a],u=e[s];n[s]=t(r,u,i)}};this.getStatusBySystem=function(e){var t=this;return this.context.service.destination.getDestinations("dev_abap").then(function(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===e.name||i.systemId===e.id&&i.sapClient===e.client)return t.getStatus(i)}})},this.getStatus=function(e){if(e){var t=e.url+"/discovery";return Q.sap.ajax({url:t,dataType:"text",headers:{"X-CSRF-Token":"Fetch",Accept:"application/xml"}}).then(function(t){var r=jQuery.sap.parseXML(t[0]),i={};return i.csrfToken=t[1].getResponseHeader("X-CSRF-Token"),n(i,r,e),i.description=e.description,i.proxyUrlPrefix=e.proxyUrlPrefix,i}).fail(function(e){throw void 0!==e.statusText?new Error(e.statusText):new Error(e.responseText)})}}};return e}),define("sap.watt.saptoolsets.fiori.abap.abaprepository/service/Search",["sap/watt/platform/plugin/utils/xml/XmlUtil"],function(e){var t=function(){this.getPackages=function(n,r){if(n.search)return t(n,r).then(function(t){for(var n,r=[],i=e.firstElementChild(t[0]).childNodes,o=0;o<i.length;o++){n=i[o];var a={};a.name=e.getAttribute(n,"adtcore:name"),r.push(a)}return r});throw new Error("search service was not found on "+n.description)};var t=function(e,t){t=encodeURIComponent(t.toUpperCase());var n=e.search;return n=n+"?operation=quickSearch&query="+t+"%2A&useSearchProvider=X&maxResults=50&objectType=DEVC%2FK",Q.sap.ajax({type:"GET",url:n,headers:{Accept:"application/xml"}})}};return t}),define("sap.watt.saptoolsets.fiori.abap.abaprepository/ui/services/SelectABAPSystemStep",{getContent:function(){jQuery.sap.require("sap.watt.saptoolsets.fiori.abap.plugin.abaprepository.ui.steps.SelectDeployABAPSystemStep");var e=new sap.watt.saptoolsets.fiori.abap.plugin.abaprepository.ui.steps.SelectDeployABAPSystemStep({context:this.context}),t=this.context.i18n.getText("DeployWizard_DeploymentOptions");return this.context.service.wizard.createWizardStep(e,t,"")}}),define("sap.watt.saptoolsets.fiori.abap.abaprepository/ui/services/CreateApplicationStepService",{getContent:function(){var e=this,t=[];return t.push(Q.sap.require("sap.watt.saptoolsets.fiori.abap.abaprepository/ui/dialog/PackageDialog")),t.push(Q.sap.require("sap/watt/platform/plugin/utils/xml/XmlUtil")),t.push(Q.sap.require("sap.watt.saptoolsets.fiori.abap.abaprepository/utils/ABAPRepositoryConstants")),Q.all(t).spread(function(t,n,r){jQuery.sap.require("sap.watt.saptoolsets.fiori.abap.plugin.abaprepository.ui.steps.CreateApplicationStep");var i=new sap.watt.saptoolsets.fiori.abap.plugin.abaprepository.ui.steps.CreateApplicationStep({context:e.context,packageDialog:t,xmlUtil:n,"const":r}),o=e.context.i18n.getText("CreateApplicationStep_CreateNewApplication");return e.context.service.wizard.createWizardStep(i,o,"")})}}),define("sap.watt.saptoolsets.fiori.abap.abaprepository/ui/services/SelectApplicationStepService",{getContent:function(){var e=this;return Q.sap.require("sap.watt.saptoolsets.fiori.abap.abaprepository/utils/ABAPRepositoryConstants").then(function(t){return Q.sap.require("sap/watt/platform/plugin/utils/xml/XmlUtil").then(function(n){jQuery.sap.require("sap.watt.saptoolsets.fiori.abap.plugin.abaprepository.ui.steps.SelectApplicationStep");var r=new sap.watt.saptoolsets.fiori.abap.plugin.abaprepository.ui.steps.SelectApplicationStep({context:e.context,xmlUtil:n,"const":t}),i=e.context.i18n.getText("SelectApplicationStep_SelectApplication");return e.context.service.wizard.createWizardStep(r,i,"")})})}}),define("sap.watt.saptoolsets.fiori.abap.abaprepository/ui/services/SelectTransportStepService",{getContent:function(){jQuery.sap.require("sap.watt.saptoolsets.fiori.abap.plugin.abaprepository.ui.steps.SelectTransportStep");var e=new sap.watt.saptoolsets.fiori.abap.plugin.abaprepository.ui.steps.SelectTransportStep({context:this.context}),t=this.context.i18n.getText("SelectTransportStep_SelectTransport");return this.context.service.wizard.createWizardStep(e,t,"")}}),define("sap.watt.saptoolsets.fiori.abap.abaprepository/service/LREPConnector",[],function(){var e=function(){var e=function(){var e="/destinations/flplrep_server/sap/bc/lrep/actions/getcsrftoken/?sap-client=120";return Q.sap.ajax({type:"GET",url:e,headers:{Accept:"*/*","Content-Type":"application/octet-stream",processData:!1,"X-CSRF-Token":"fetch","X-Requested-With":"XMLHttpRequest",Connection:"keep-alive","Accept-Encoding":"gzip, deflate, sdch"}})};this.updateChange=function(t){var n=JSON.stringify(t),r="/destinations/flplrep_server/sap/bc/lrep/changes/?sap-client=120";return e().then(function(e){var t=e[1].getResponseHeader("X-CSRF-Token");return Q.sap.ajax({type:"POST",url:r,data:n,headers:{Accept:"*/*","Content-Type":"application/json",processData:!1,"X-CSRF-Token":t}})})}};return e}),define("sap.watt.saptoolsets.fiori.abap.adt.communication/util/AdtCheckUtil",[],function(){"use strict";var e=new function(){this.CheckError=function(e){this.message=e;var t=new Error(this.message);if("string"==typeof t.stack)this.stack=t.stack;else try{throw t}catch(n){this.stack=n.stack}("string"!=typeof this.constructor.name||"CheckError"!==this.constructor.name)&&(this.constructor.name="CheckError")},this.CheckError.prototype=new Error,this.CheckError.prototype.constructor=this.CheckError,this.CheckError.prototype.name="CheckError";var e=function(){return"undefined"!=typeof window&&"undefined"!=typeof window.console&&"undefined"!=typeof window.console.assert?window.console:new function(){this.warn=function(){},this.assert=function(){}}}();this.__test__injectConsole=function(t){e=t},this.check=function(t,n){if(!t)throw e.assert(t,n),new this.CheckError(n)},this.checkArgumentIsDefinedAndNotNull=function(e,t,n){this.check(void 0!==n&&null!==n,"Function "+e+", argument "+t+": the argument has an illegal value: "+n)},this.checkStringArgumentIsNotEmpty=function(e,t,n){this.checkArgumentIsDefinedAndNotNull(e,t,n),this.check("string"==typeof n,"Function "+e+", argument "+t+": the argument has an illegal type: "+typeof n),this.check(n.length>0,"Function "+e+", argument "+t+": the argument is an empty string: "+n)}};return e}),define("sap.watt.saptoolsets.fiori.abap.adt.communication/util/AdtUrlUtil",[],function(){"use strict";var e=new function(){this.ensureLeadingUriPrefix=function(e,t){return"string"!=typeof e||0===e.length||0===t.indexOf(e)?t:"string"!=typeof t||0===t.length?e:"/"!==t.charAt(0)&&"\\"!==t.charAt(0)?e+"/"+t:e+t},this.extractHostUrl=function(e){var t="";if("string"==typeof e&&(0===e.indexOf("https:")||0===e.indexOf("http:"))){var n=e.split("/");t=n[0]+"//"+n[2]}return t}};return e}),define("sap.watt.saptoolsets.fiori.abap.adt.communication/util/AdtErrorDataContentHandlerXml",["../util/AdtCheckUtil"],function(e){"use strict";var t=new function(){this.deserialize=function(t){e.checkStringArgumentIsNotEmpty("AdtRestResource.deserialize","xml",t);var n=jQuery.parseXML(t),r=jQuery(n),i={};return i.message={text:r.find("message").text(),language:r.find("message").attr("lang")},i.namespace=r.find("namespace").attr("id"),i.type=r.find("type").attr("id"),i.localizedMessage={text:r.find("localizedMessage").text(),language:r.find("localizedMessage").attr("lang")},i.getProperty=function(e){for(var t=r.find("entry"),n=0;n<t.length;n++)if(jQuery(t[n]).attr("key")===e)return jQuery(t[n]).text()},i}};return t}),define("sap.watt.saptoolsets.fiori.abap.adt.communication/util/AdtFreezerUtil",[],function(){"use strict";function e(){this.createFreezer=function(e){var n=new t(e);return r.makeImmutable(n),n},this.createPrototypeFreezer=function(e){var t=new n(e);return r.makeImmutable(t),t}}function t(e){var t=this;if(!Object.freeze||!Object.isFrozen)return this.makeImmutable=function(){return!1},void 0;var n;e?(n=e,"boolean"!=typeof e.freezeDeeply&&(n.freezeDeeply=!0),"boolean"!=typeof e.freezeInheritedProperties&&(n.freezeInheritedProperties=!0),"boolean"!=typeof e.freezeFunctions&&(n.freezeFunctions=!0)):n={freezeDeeply:!0,freezeInheritedProperties:!0,freezeFunctions:!0},this.makeImmutable=function(e){if(null===e||"object"!=typeof e&&("function"!=typeof e||!n.freezeFunctions))return!0;try{Object.isFrozen(e)||Object.freeze(e);var r=!0;if(n.freezeDeeply){var i;for(var o in e)(e.hasOwnProperty(o)||n.freezeInheritedProperties)&&(i=e[o],r=r&&t.makeImmutable(i))}}catch(a){r=!1}return r}}function n(e){if(!Object.freeze||!Object.isFrozen)return this.makeImmutable=function(){return!1},void 0;var n=new t({freezeDeeply:!1,freezeInheritedProperties:!1,freezeFunctions:!0}),r=new t(e);this.makeImmutable=function(e){if(null===e||"object"!=typeof e)return!0;try{var t,i=n.makeImmutable(e);for(var o in e)e.hasOwnProperty(o)&&(t=e[o],i=i&&r.makeImmutable(t))}catch(a){i=!1}return i}}var r=new t,i=new n;i.makeImmutable(e.prototype),i.makeImmutable(t.prototype),i.makeImmutable(n.prototype);var o=new e;return r.makeImmutable(o),o}),define("sap.watt.saptoolsets.fiori.abap.adt.communication/util/AdtSecurityChecker",["../util/AdtCheckUtil","../util/AdtFreezerUtil"],function(e,t){return function(){"use strict";function n(){this.createInstance=function(e){var t={};for(var n in c)t[n]=c[n];if("object"==typeof e)for(n in e)n in l&&(t[n]=e[n]===s||e[n]===u?e[n]:s);var o=new r(t);return i.makeImmutable(o),o}}function r(t){function n(e){return"function"==typeof URL&&"object"==typeof document&&"string"==typeof document.baseURI?new URL(e,document.baseURI):void 0}var r,o={strict:new function(){this.handle=function(t){throw new e.CheckError(t)}},info:new function(){this.handle=function(e){a.warn(e)
}}};i.makeImmutable(o);var c={checkUsernamePassword:new function(){this.check=function(e,t,i){(t.username||t.password)&&i.handle('Request "'+e+" "+t.url+'" contains user name and/or password in the JQuery ajax settings.'),r=r||n(t.url),r&&(("string"==typeof r.username&&r.username.length>0||typeof r.password>"string"&&r.password.length>0)&&i.handle('Request "'+e+" "+t.url+'" contains user name and/or password in the URL.'),r.search&&p.test(r.search)&&i.handle('Request "'+e+" "+t.url+'" contains user name and/or password in the query parameters.'))}},checkInvalidCharacters:new function(){this.check=function(e,t,n){for(var r in t.headers){var i=t.headers[r];(h.test(r)||h.test(i))&&n.handle('Request "'+e+" "+t.url+'" contains not printable characters in header field "'+r+'"')}}},checkAsyncFalse:new function(){this.check=function(e,t,n){t.async===!1&&n.handle('Request "'+e+" "+t.url+'" is executed as synchronous request')}},checkProtocolHTTPS:new function(){this.check=function(e,t,i){if(r=r||n(t.url),r&&r.protocol&&null!==r.protocol)f.test(r.protocol)||i.handle('Request "'+e+" "+t.url+'" does not use HTTPS');else{var o=d.exec(t.url);null===o&&("undefined"!=typeof document||"undefined"!=typeof document.URL)&&(o=d.exec(document.URL)),null!==o&&f.test(o)||i.handle('Request "'+e+" "+t.url+'" does not use HTTPS')}}}};i.makeImmutable(c),this.__test__injectConsole=function(t){a=t,e.__test__injectConsole(t)},this.checkAndRefuseCSRFTokenHeader=function(e,t){try{t&&t.headers&&t.headers["x-csrf-token"]&&o[s].handle('Request "'+e+" "+t.url+"\" uses proprietary CSRF token handling: it uses a header field 'x-csrf-token'.")}finally{r=void 0}},this.checkAndCorrectCsrfTokenHeader=function(e,t){e&&(t.headers=t.headers||{}),t.headers["x-csrf-token"]!==e&&(e?t.headers["x-csrf-token"]=e:delete t.headers["x-csrf-token"],o[u].handle('Request "'+t.type+" "+t.url+"\": the header field 'x-csrf-token' was reset to its original value."))},this.check=function(e,n){for(var r in t)r in c&&t[r]in o&&c[r].check(e,n,o[t[r]])}}var i=t.createFreezer({freezeDeeply:!0,freezeInheritedProperties:!0,freezeFunctions:!0}),o=t.createPrototypeFreezer({freezeDeeply:!0,freezeInheritedProperties:!0,freezeFunctions:!0}),a=function(){return"undefined"!=typeof window&&"undefined"!=typeof window.console&&"undefined"!=typeof window.console.warn?window.console:new function(){this.warn=function(){},this.error=function(){}}}(),s="strict",u="info",c={checkInvalidCharacters:s,checkUsernamePassword:s},l={checkAsyncFalse:s,checkProtocolHTTPS:s};i.makeImmutable(c),i.makeImmutable(l);var p=/[(^\?)|&](sap-user=|sap-password=)/,f=/^https:?$/,d=/^[a-zA-Z][a-zA-Z0-9\+\-\.]*:/,h=/[\000-\037]/;i.makeImmutable(p),i.makeImmutable(f),i.makeImmutable(d),i.makeImmutable(h),o.makeImmutable(n.prototype),o.makeImmutable(r.prototype);var m=new n;return i.makeImmutable(m),m}()}),define("sap.watt.saptoolsets.fiori.abap.adt.communication/service/AdtRestResource",["../util/AdtCheckUtil","../util/AdtUrlUtil","../util/AdtErrorDataContentHandlerXml","../util/AdtSecurityChecker"],function(e,t,n,r){"use strict";function i(){this.createInstance=function(t){return t&&t.urlPrefix&&e.checkStringArgumentIsNotEmpty("AdtRestResourceFactory.createInstance","settings.urlPrefix",t.urlPrefix),new o(t)}}function o(){function i(){return null!==S}function o(){S=null}function c(e,t,n,r,i){this.message="Request [ "+e+" "+t+" ] failed: "+n.statusText;var o=new Error(this.message);if("string"==typeof o.stack)this.stack=o.stack;else try{throw o}catch(a){this.stack=a.stack}this.jqXHR=n,this.textStatus=r,this.errorThrown=i;try{("string"!=typeof this.constructor.name||"AdtAjaxError"!==this.constructor.name)&&(this.constructor.name="AdtAjaxError")}catch(s){}}function l(e,t){var n=Q.defer(),r=e.headers?e.headers["x-csrf-token"]:void 0;return e.beforeSend=h(e.beforeSend,r,t),jQuery.ajax(e).then(function(e,t,r){delete r.then,n.resolve({data:e,textStatus:t,jqXHR:r})},function(t,r,i){delete t.then;var o=new c(e.type,e.url,t,r,i);n.reject(o)}),n.promise}function p(e){e.toString=function(){return"{ status: "+e.status+", ... }"}}function f(e){e&&e.jqXHR&&p(e.jqXHR),e.toString=function(){return"{ jqXHR: "+e.jqXHR+", textStatus: "+e.textStatus+", data: "+e.data+" }"}}function d(e){e&&e.jqXHR&&p(e.jqXHR),e.toString=function(){return"{ jqXHR: "+e.jqXHR+", textStatus: "+e.textStatus+", errorThrown: "+e.errorThrown+", adtErrorData: "+e.adtErrorData+" }"}}function h(e,t,n){return function(r,i){"function"==typeof e&&(e(r,i),n.checkAndCorrectCsrfTokenHeader(t,i)),n.check(i.type,i)}}function m(t){if(i())return S;var r={type:"GET",url:y(t),cache:!1,headers:{"x-csrf-token":"fetch"},dataType:"xml",crossDomain:!0};return S=l(r,P).then(function(t){var n=t.jqXHR.getResponseHeader("x-csrf-token");return e.check(0!==n.length,"Security handling with CSRF token is not supported for public ICF services: ICF service '/sap/bc/adt'."),n},function(e){if(e.jqXHR.status!==a&&e.jqXHR.status!==s){var t=e.jqXHR.getResponseHeader("content-type");null!==t&&t.indexOf("application/xml")>-1&&(e.adtErrorData=n.deserialize(e.jqXHR.responseText))}throw o(),d(e),e})}function g(e,t){if(void 0!==t.success&&null!==t.success){var r=t.success;t.success=void 0}t.type=e,_(e,t);var i=l(t,T).then(function(n){return b(e,t,n),void 0!==t.adtContentHandler&&null!==t.adtContentHandler&&(n.data=t.adtContentHandler.serialize(n.data,n.jqXHR)),void 0!==r&&r(n),f(n),n},function(e){if(e.jqXHR.status!==a&&e.jqXHR.status!==s){var t=e.jqXHR.getResponseHeader("content-type");null!==t&&t.indexOf("application/xml")>-1&&(e.adtErrorData=n.deserialize(e.jqXHR.responseText))}throw d(e),e});return i}function v(n,r,i){var a=i||{};"string"==typeof r?(e.checkStringArgumentIsNotEmpty("AdtRestResource."+n,"url",r),a.url=r):(e.checkArgumentIsDefinedAndNotNull("AdtRestResource."+n,"settings",r),a=r),T.checkAndRefuseCSRFTokenHeader(n,a);var s=t.extractHostUrl(a.url),c=m(s);return c.then(function(e){a.headers=a.headers||{},a.headers["x-csrf-token"]=e;var t=g(n,a);return t.then(function(e){return e},function(e){if(e.jqXHR.status===u&&void 0===e.adtErrorData){o();var t=m(s);return t.then(function(e){a.headers["x-csrf-token"]=e;var t=g(n,a);return t})}throw e})},function(e){throw o(),e})}function y(n){if("string"==typeof n&&""!==n){e.check("string"!=typeof E.urlPrefix||n===E.urlPrefix,"AdtRestResource: inconsistent host URL and URL prefix: "+n+"!=="+E.urlPrefix);var r=n}else r=E.urlPrefix;return t.ensureLeadingUriPrefix(r,"/sap/bc/adt/compatibility/graph")}function _(e,t){x(e,t)}function x(n,r){if("string"==typeof E.urlPrefix&&""!==E.urlPrefix){var i=t.extractHostUrl(r.url);"string"==typeof i&&""!==i&&e.check("string"!=typeof E.urlPrefix||i===E.urlPrefix,"AdtRestResource: inconsistent host URL and URL prefix: "+i+"!=="+E.urlPrefix),r.url=t.ensureLeadingUriPrefix(E.urlPrefix,r.url)}}function b(e,t,n){w(e,t,n)}function w(e,t,n){n.jqXHR.status>=200&&n.jqXHR.status<300&&void 0!==n.data&&null!==n.data&&(void 0===t.headers||null===t.headers||void 0===t.headers.Accept||null===t.headers.Accept)&&I.warn('Request "'+t.type+" "+t.url+'" resulted in a response with a body. The request did not specify acceptable content types via the accept header. This can lead to client/server compatibility problems.')}var S=null,E=arguments[0]||{},C=E.security||{},T=r.createInstance(C),P=r.createInstance({}),I=function(){return"undefined"!=typeof window&&"undefined"!=typeof window.console&&"undefined"!=typeof window.console.warn?window.console:new function(){this.warn=function(){}}}();this.__test__injectConsole=function(t){I=t,e.__test__injectConsole(t),T.__test__injectConsole(t),P.__test__injectConsole(t)},c.prototype=new Error,c.prototype.constructor=c,c.prototype.name="AdtAjaxError",this.get=function(t,n){var r;return"string"==typeof t?(e.checkStringArgumentIsNotEmpty("AdtRestResource.get","url",t),r=n||{},r.url=t):(e.checkArgumentIsDefinedAndNotNull("AdtRestResource.get","settings",t),r=t),T.checkAndRefuseCSRFTokenHeader("GET",r),g("GET",r)},this.post=function(e,t){return v("POST",e,t)},this.put=function(e,t){return v("PUT",e,t)},this.del=function(e,t){return v("DELETE",e,t)}}var a=0,s=200,u=403;return new i}),!function(e){"use strict";function t(e){var n;if(null===e||void 0===e)return!1;if(r.isArray(e))return e.length>0;if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return!0;for(n in e)if(e.hasOwnProperty(n)&&t(e[n]))return!0;return!1}var n=function(){function e(e){this.options=e}return e.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options},e}(),r=function(){function e(e){return"[object Array]"===Object.prototype.toString.apply(e)}function t(e){return"[object String]"===Object.prototype.toString.apply(e)}function n(e){return"[object Number]"===Object.prototype.toString.apply(e)}function r(e){return"[object Boolean]"===Object.prototype.toString.apply(e)}function i(e,t){var n,r="",i=!0;for(n=0;n<e.length;n+=1)i?i=!1:r+=t,r+=e[n];return r}function o(e,t){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}function a(e,t){for(var n=[],r=0;r<e.length;r+=1)t(e[r])&&n.push(e[r]);return n}function s(e){if("object"!=typeof e||null===e)return e;Object.freeze(e);var t,n;for(n in e)e.hasOwnProperty(n)&&(t=e[n],"object"==typeof t&&u(t));return e}function u(e){return"function"==typeof Object.freeze?s(e):e}return{isArray:e,isString:t,isNumber:n,isBoolean:r,join:i,map:o,filter:a,deepFreeze:u}}(),i=function(){function e(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e}function t(e){return e>="0"&&"9">=e}function n(e){return t(e)||e>="a"&&"f">=e||e>="A"&&"F">=e}return{isAlpha:e,isDigit:t,isHexDigit:n}}(),o=function(){function e(e){var t,n,r="",i=a.encode(e);for(n=0;n<i.length;n+=1)t=i.charCodeAt(n),r+="%"+(16>t?"0":"")+t.toString(16).toUpperCase();return r}function t(e,t){return"%"===e.charAt(t)&&i.isHexDigit(e.charAt(t+1))&&i.isHexDigit(e.charAt(t+2))}function n(e,t){return parseInt(e.substr(t,2),16)}function r(e){if(!t(e,0))return!1;var r=n(e,1),i=a.numBytes(r);if(0===i)return!1;for(var o=1;i>o;o+=1)if(!t(e,3*o)||!a.isValidFollowingCharCode(n(e,3*o+1)))return!1;return!0}function o(e,r){var i=e.charAt(r);if(!t(e,r))return i;var o=n(e,r+1),s=a.numBytes(o);if(0===s)return i;for(var u=1;s>u;u+=1)if(!t(e,r+3*u)||!a.isValidFollowingCharCode(n(e,r+3*u+1)))return i;return e.substr(r,3*s)}var a={encode:function(e){return unescape(encodeURIComponent(e))},numBytes:function(e){return 127>=e?1:e>=194&&223>=e?2:e>=224&&239>=e?3:e>=240&&244>=e?4:0},isValidFollowingCharCode:function(e){return e>=128&&191>=e}};return{encodeCharacter:e,isPctEncoded:r,pctCharAt:o}}(),a=function(){function e(e){return i.isAlpha(e)||i.isDigit(e)||"_"===e||o.isPctEncoded(e)}function t(e){return i.isAlpha(e)||i.isDigit(e)||"-"===e||"."===e||"_"===e||"~"===e}function n(e){return":"===e||"/"===e||"?"===e||"#"===e||"["===e||"]"===e||"@"===e||"!"===e||"$"===e||"&"===e||"("===e||")"===e||"*"===e||"+"===e||","===e||";"===e||"="===e||"'"===e}return{isVarchar:e,isUnreserved:t,isReserved:n}}(),s=function(){function e(e,t){var n,r="",i="";for(("number"==typeof e||"boolean"==typeof e)&&(e=e.toString()),n=0;n<e.length;n+=i.length)i=e.charAt(n),r+=a.isUnreserved(i)||t&&a.isReserved(i)?i:o.encodeCharacter(i);return r}function t(t){return e(t,!0)}function n(e,t){var n=o.pctCharAt(e,t);return n.length>1?n:a.isReserved(n)||a.isUnreserved(n)?n:o.encodeCharacter(n)}function r(e){var t,n="",r="";for(t=0;t<e.length;t+=r.length)r=o.pctCharAt(e,t),n+=r.length>1?r:a.isReserved(r)||a.isUnreserved(r)?r:o.encodeCharacter(r);return n}return{encode:e,encodePassReserved:t,encodeLiteral:r,encodeLiteralCharacter:n}}(),u=function(){function e(e){t[e]={symbol:e,separator:"?"===e?"&":""===e||"+"===e||"#"===e?",":e,named:";"===e||"&"===e||"?"===e,ifEmpty:"&"===e||"?"===e?"=":"",first:"+"===e?"":e,encode:"+"===e||"#"===e?s.encodePassReserved:s.encode,toString:function(){return this.symbol}}}var t={};return e(""),e("+"),e("#"),e("."),e("/"),e(";"),e("?"),e("&"),{valueOf:function(e){return t[e]?t[e]:"=,!@|".indexOf(e)>=0?null:t[""]}}}(),c=function(){function e(e){this.literal=s.encodeLiteral(e)}return e.prototype.expand=function(){return this.literal},e.prototype.toString=e.prototype.expand,e}(),l=function(){function e(e){function t(){var t=e.substring(d,c);if(0===t.length)throw new n({expressionText:e,message:"a varname must be specified",position:c});f={varname:t,exploded:!1,maxLength:null},d=null}function r(){if(h===c)throw new n({expressionText:e,message:"after a ':' you have to specify the length",position:c});f.maxLength=parseInt(e.substring(h,c),10),h=null}var s,c,l=[],f=null,d=null,h=null,m="";for(s=function(t){var r=u.valueOf(t);if(null===r)throw new n({expressionText:e,message:"illegal use of reserved operator",position:c,operator:t});return r}(e.charAt(0)),c=s.symbol.length,d=c;c<e.length;c+=m.length){if(m=o.pctCharAt(e,c),null!==d){if("."===m){if(d===c)throw new n({expressionText:e,message:"a varname MUST NOT start with a dot",position:c});continue}if(a.isVarchar(m))continue;t()}if(null!==h){if(c===h&&"0"===m)throw new n({expressionText:e,message:"A :prefix must not start with digit 0",position:c});if(i.isDigit(m)){if(c-h>=4)throw new n({expressionText:e,message:"A :prefix must have max 4 digits",position:c});continue}r()}if(":"!==m)if("*"!==m){if(","!==m)throw new n({expressionText:e,message:"illegal character",character:m,position:c});l.push(f),f=null,d=c+1}else{if(null===f)throw new n({expressionText:e,message:"exploded without varspec",position:c});if(f.exploded)throw new n({expressionText:e,message:"exploded twice",position:c});if(f.maxLength)throw new n({expressionText:e,message:"an explode (*) MUST NOT follow to a prefix",position:c});f.exploded=!0}else{if(null!==f.maxLength)throw new n({expressionText:e,message:"only one :maxLength is allowed per varspec",position:c});if(f.exploded)throw new n({expressionText:e,message:"an exploeded varspec MUST NOT be varspeced",position:c});h=c+1}}return null!==d&&t(),null!==h&&r(),l.push(f),new p(e,s,l)}function t(t){var r,i,o=[],a=null,s=0;for(r=0;r<t.length;r+=1)if(i=t.charAt(r),null===s){if(null===a)throw new Error("reached unreachable code");if("{"===i)throw new n({templateText:t,message:"brace already opened",position:r});if("}"===i){if(a+1===r)throw new n({templateText:t,message:"empty braces",position:a});try{o.push(e(t.substring(a+1,r)))}catch(u){if(u.prototype===n.prototype)throw new n({templateText:t,message:u.options.message,position:a+u.options.position,details:u.options});throw u}a=null,s=r+1}}else{if("}"===i)throw new n({templateText:t,message:"unopened brace closed",position:r});"{"===i&&(r>s&&o.push(new c(t.substring(s,r))),s=null,a=r)}if(null!==a)throw new n({templateText:t,message:"unclosed brace",position:a});return s<t.length&&o.push(new c(t.substr(s))),new f(t,o)}return t}(),p=function(){function e(e){return JSON&&JSON.stringify?JSON.stringify(e):e}function n(e){if(!t(e))return!0;if(r.isString(e))return""===e;if(r.isNumber(e)||r.isBoolean(e))return!1;if(r.isArray(e))return 0===e.length;for(var n in e)if(e.hasOwnProperty(n))return!1;return!0}function i(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push({name:t,value:e[t]});return n}function o(e,t,n){this.templateText=e,this.operator=t,this.varspecs=n}function a(e,t,n){var r="";if(n=n.toString(),t.named){if(r+=s.encodeLiteral(e.varname),""===n)return r+=t.ifEmpty;r+="="}return null!==e.maxLength&&(n=n.substr(0,e.maxLength)),r+=t.encode(n)}function u(e){return t(e.value)}function c(e,o,a){var c=[],l="";if(o.named){if(l+=s.encodeLiteral(e.varname),n(a))return l+=o.ifEmpty;l+="="}return r.isArray(a)?(c=a,c=r.filter(c,t),c=r.map(c,o.encode),l+=r.join(c,",")):(c=i(a),c=r.filter(c,u),c=r.map(c,function(e){return o.encode(e.name)+","+o.encode(e.value)}),l+=r.join(c,",")),l}function l(e,o,a){var c=r.isArray(a),l=[];return c?(l=a,l=r.filter(l,t),l=r.map(l,function(t){var r=s.encodeLiteral(e.varname);return r+=n(t)?o.ifEmpty:"="+o.encode(t)})):(l=i(a),l=r.filter(l,u),l=r.map(l,function(e){var t=s.encodeLiteral(e.name);return t+=n(e.value)?o.ifEmpty:"="+o.encode(e.value)})),r.join(l,o.separator)}function p(e,n){var o=[],a="";return r.isArray(n)?(o=n,o=r.filter(o,t),o=r.map(o,e.encode),a+=r.join(o,e.separator)):(o=i(n),o=r.filter(o,function(e){return t(e.value)}),o=r.map(o,function(t){return e.encode(t.name)+"="+e.encode(t.value)}),a+=r.join(o,e.separator)),a}return o.prototype.toString=function(){return this.templateText},o.prototype.expand=function(i){var o,s,u,f,d=[],h=!1,m=this.operator;for(o=0;o<this.varspecs.length;o+=1)if(s=this.varspecs[o],u=i[s.varname],null!==u&&void 0!==u)if(s.exploded&&(h=!0),f=r.isArray(u),"string"==typeof u||"number"==typeof u||"boolean"==typeof u)d.push(a(s,m,u));else{if(s.maxLength&&t(u))throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+e(u));s.exploded?t(u)&&(m.named?d.push(l(s,m,u)):d.push(p(m,u))):(m.named||!n(u))&&d.push(c(s,m,u))}return 0===d.length?"":m.first+r.join(d,m.separator)},o}(),f=function(){function e(e,t){this.templateText=e,this.expressions=t,r.deepFreeze(this)}return e.prototype.toString=function(){return this.templateText},e.prototype.expand=function(e){var t,n="";for(t=0;t<this.expressions.length;t+=1)n+=this.expressions[t].expand(e);return n},e.parse=l,e.UriTemplateError=n,e}();e(f)}(function(e){"use strict";"undefined"!=typeof module?module.exports=e:"function"==typeof define?define("sap.watt.saptoolsets.fiori.abap.adt.compatibility/lib/uritemplate-min",[],function(){return e}):"undefined"!=typeof window?window.UriTemplate=e:global.UriTemplate=e}),define("sap.watt.saptoolsets.fiori.abap.adt.compatibility/service/AdtUriTemplate",["../lib/uritemplate-min","sap.watt.saptoolsets.fiori.abap.adt.communication/util/AdtCheckUtil"],function(e,t){function n(){this.createUriTemplate=function(e){return t.checkStringArgumentIsNotEmpty("AdtUriTemplateFactory.createUriTemplate","uriTemplateString",e),new r(e)},this.AdtExpressionParseError=function(e){this.message=e,this.stack=new Error(e).stack},this.AdtExpressionParseError.prototype=new Error,this.AdtExpressionParseError.prototype.constructor=this.AdtExpressionParseError,this.AdtExpressionParseError.prototype.name="AdtExpressionParseError",this.AdtVariableExpandError=function(e){this.message=e,this.stack=new Error(e).stack},this.AdtVariableExpandError.prototype=new Error,this.AdtVariableExpandError.prototype.constructor=this.AdtVariableExpandError,this.AdtVariableExpandError.prototype.name="AdtVariableExpandError"}function r(n){var r=this,o=void 0,a={};this.containsVariable=function(r){t.checkStringArgumentIsNotEmpty("AdtUriTemplate.containsVariable","variableName",r);try{o=o||e.parse(n)}catch(a){throw new i.AdtExpressionParseError(a.toString())}if("object"==typeof o.expressions&&null!==o.expressions)for(var s in o.expressions){var u=o.expressions[s];if(u&&null!==u&&"object"==typeof u.varspecs)for(var c in u.varspecs){var l=u.varspecs[c];if(null!==l&&"string"==typeof l.varname&&l.varname===r)return!0}}return!1},this.set=function(e,n){return t.checkStringArgumentIsNotEmpty("AdtUriTemplate.set","variableName",e),a[e]=n,r},this.expand=function(){try{o=o||e.parse(n)}catch(t){throw new i.AdtExpressionParseError(t.toString())}try{return o.expand(a)}catch(t){throw new i.AdtVariableExpandError(t.toString())}},this.getTemplate=function(){return n}}"undefined"==typeof e&&"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(e=module.exports);var i=new n;return i}),define("sap.watt.saptoolsets.fiori.abap.adt.compatibility/service/AdtDiscovery",["sap.watt.saptoolsets.fiori.abap.adt.communication/service/AdtRestResource","sap.watt.saptoolsets.fiori.abap.adt.communication/util/AdtCheckUtil","sap.watt.saptoolsets.fiori.abap.adt.communication/util/AdtUrlUtil","sap.watt.saptoolsets.fiori.abap.adt.communication/util/AdtFreezerUtil","sap.watt.saptoolsets.fiori.abap.adt.compatibility/service/AdtUriTemplate"],function(e,t,n,r,i){"use strict";function o(){var e=new u;this.__test__ResetDiscovery=function(){e=new u},this.__test__injectConsole=function(e){d=e,t.__test__injectConsole(d)},this.getDiscovery=function(r,i){if(t.checkStringArgumentIsNotEmpty("AdtDiscoveryFactory.getDiscovery","discoveryUrl",r),i&&i.urlPrefix){t.checkStringArgumentIsNotEmpty("AdtDiscoveryFactory.getInstance","settings.urlPrefix",i.urlPrefix);var o=n.extractHostUrl(r);"string"==typeof o&&""!==o&&t.check(o===i.urlPrefix,"AdtDiscovery: The discovery URL "+r+" does not start with the configured URL prefix "+i.urlPrefix);var s=n.ensureLeadingUriPrefix(i.urlPrefix,r)}else s=r;var u=e.get(s);return u||(u=new a(s),p.makeImmutable(u),e.add(s,u)),u}}function a(n){function r(){return null!==u}function o(e){function r(e){if("undefined"==typeof e||null===e||"number"!=typeof e.length)return null;for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t}function o(e){var n=jQuery("atom\\:category, category",e)[0];t.check(n&&null!==n,u+"category for collection missing");var r=jQuery(n).attr("scheme");t.check(r&&null!==r&&r.length>0,u+"scheme for collection with category "+n+" missing");var i=jQuery(n).attr("term");t.check(i&&null!==i&&i.length>0,u+"term for collection with category "+n+" missing");var o=e.attr("href");return t.check(o&&null!==o&&o.length>0,u+"uri for collection with category "+n+" missing"),{scheme:r,term:i,uri:o}}function a(e){var t=e.children(),n=null,o=null,a=[],s=0;for(var u in t)if(t.hasOwnProperty(u))if("app:accept"===t[u].nodeName){var l=jQuery(t[u]).text();l&&l.length>0&&(a[s++]=l)}else if("adtcomp:templateLinks"===t[u].nodeName&&(o=r(t[u].childNodes),o&&o.length>0)){n=new c;for(var p=0;p<o.length;p++){var f=jQuery(o[p]),d=f.attr("rel"),h=f.attr("type"),m=i.createUriTemplate(f.attr("template"));n.add(d,h,m)}}return{contentTypes:a,templateLinks:n,templateLinksRaw:o}}var u="Inconsistent discovery document ("+n+"): ";this.build=function(){var n=jQuery("app\\:collection, collection",e);t.check(n&&null!==n,u+"no collections defined");for(var r=new c,i=0;i<n.length;i++){var l=jQuery(n[i]),f=o(l),d=a(l);if(d&&null!==d){p.makeImmutable(d.contentTypes),p.makeImmutable(d.templateLinks);var h=new s(f.scheme,f.term,f.uri,d.contentTypes,d.templateLinks,d.templateLinksRaw);r.add(f.scheme,f.term,h)}}return r.makeImmutable(),r}}var a,u=null,f=function(){if(r())return u;var t=e.createInstance();return d&&null!=d&&t.__test__injectConsole(d),u=t.get({url:n,dataType:"xml",async:!0,headers:{Accept:"application/atomsvc+xml","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}).then(function(e){var t=jQuery(e.data);return a=new o(t).build()},function(e){if(u=null,l)throw e;return e})};this.getCollectionMember=function(e,n){t.checkStringArgumentIsNotEmpty("AdtDiscovery.getCollectionMember","categoryScheme",e),t.checkStringArgumentIsNotEmpty("AdtDiscovery.getCollectionMember","categoryTerm",n);var r=f();return r.then(function(t){var r=t.get(e,n);return r})}}function s(e,n,r,i,o){var a=arguments;this.getUri=function(){return r},this.getAcceptedContentTypes=function(){return i},this.getTemplateLink=function(e,n){return t.checkStringArgumentIsNotEmpty("AdtDiscoveryCollectionMember.getTemplateLink","relation",e),o?o.get(e,n):null},this.__debug__getTemplateLinksRaw=function(){return a[5]},this.__debug__getData=function(){return{uri:r,contentTypes:i,templateLinks:o}}}function u(){var e={};this.get=function(t){return e[t]},this.add=function(t,n){e[t]=n},this.__debug__getData=function(){return e}}function c(){var e={},t=this;this.get=function(t,n){var r=e[t];return r?r[n]:void 0},this.add=function(t,n,r){var i=e[t];i||(i={},e[t]=i),i[n]=r},this.makeImmutable=function(){p.makeImmutable(t),p.makeImmutable(e)},this.__debug__getData=function(){return e}}var l=!0,p=r.createFreezer({freezeDeeply:!0,freezeInheritedProperties:!0,freezeFunctions:!0}),f=r.createPrototypeFreezer({freezeDeeply:!0,freezeInheritedProperties:!0,freezeFunctions:!0}),d=null;o.prototype.ADT_DISCOVERY_URL="/sap/bc/adt/discovery",o.prototype.ADT_CORE_DISCOVERY_URL="/sap/bc/adt/core/discovery",f.makeImmutable(o.prototype),f.makeImmutable(a.prototype),s.prototype.accepts=function(e){return t.checkStringArgumentIsNotEmpty("AdtDiscoveryCollectionMember.accepts","contentType",e),this.getAcceptedContentTypes().indexOf(e)>-1},f.makeImmutable(s.prototype),f.makeImmutable(u.prototype),f.makeImmutable(c.prototype);var h=new o;return p.makeImmutable(h),h}),define("sap.watt.saptoolsets.fiori.abap.adt.compatibility/service/AdtDiscoveryWrapper",["sap.watt.saptoolsets.fiori.abap.adt.compatibility/service/AdtDiscovery"],function(e){"use strict";function t(){this.getDiscovery=function(t,n){return e.getDiscovery(t,n)}}var n=new t;return n}),define("fiorixmlanalysis/utils/SAX",[],function(){function e(t,r){if(!(this instanceof e))return new e(t,r);var i=this;n(i),i.q=i.c="",i.bufferCheckPosition=E.MAX_BUFFER_LENGTH,i.opt=r||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!t,i.noscript=!(!t&&!i.opt.noscript),i.state=Q.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(E.XML_ENTITIES):Object.create(E.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(B)),i.trackPosition=i.opt.position!==!1,i.trackPosition&&(i.position=i.line=i.column=0),l(i,"onready")}function t(e){for(var t=Math.max(E.MAX_BUFFER_LENGTH,10),n=0,r=0,i=C.length;i>r;r++){var o=e[C[r]].length;if(o>t)switch(C[r]){case"textNode":f(e);break;case"cdata":p(e,"oncdata",e.cdata),e.cdata="";break;case"script":p(e,"onscript",e.script),e.script="";break;default:h(e,"Max buffer length exceeded: "+C[r])}n=Math.max(n,o)}e.bufferCheckPosition=E.MAX_BUFFER_LENGTH-n+e.position}function n(e){for(var t=0,n=C.length;n>t;t++)e[C[t]]=""}function r(e){f(e),""!==e.cdata&&(p(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(p(e,"onscript",e.script),e.script="")}function i(e,t){return new o(e,t)}function o(t,n){if(!(this instanceof o))return new o(t,n);T.apply(this),this._parser=new e(t,n),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(e){r.emit("error",e),r._parser.error=null},this._decoder=null,I.forEach(function(e){Object.defineProperty(r,"on"+e,{get:function(){return r._parser["on"+e]},set:function(t){return t?(r.on(e,t),void 0):(r.removeAllListeners(e),r._parser["on"+e]=t)},enumerable:!0,configurable:!1})})}function a(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function s(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function u(e,t){return s(e)?!!t.match(e):e[t]}function c(e,t){return!u(e,t)}function l(e,t,n){e[t]&&e[t](n)}function p(e,t,n){e.textNode&&f(e),l(e,t,n)}function f(e){e.textNode=d(e.opt,e.textNode),e.textNode&&l(e,"ontext",e.textNode),e.textNode=""}function d(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function h(e,t){return f(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,l(e,"onerror",t),e}function m(t){return t.sawRoot&&!t.closedRoot&&g(t,"Unclosed root tag"),t.state!==Q.BEGIN&&t.state!==Q.BEGIN_WHITESPACE&&t.state!==Q.TEXT&&h(t,"Unexpected end"),f(t),t.c="",t.closed=!0,l(t,"onend"),e.call(t,t.strict,t.opt),t}function g(t,n){if("object"!=typeof t||!(t instanceof e))throw new Error("bad call to strictFail");t.strict&&h(t,n)}function v(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0}function y(e,t){var n=e.indexOf(":"),r=0>n?["",e]:e.split(":"),i=r[0],o=r[1];return t&&"xmlns"===e&&(i="xmlns",o=""),{prefix:i,local:o}}function _(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))return e.attribName=e.attribValue="";if(e.opt.xmlns){var t=y(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==L)g(e,"xml: prefix must be bound to "+L+"\n"+"Actual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==M)g(e,"xmlns: prefix must be bound to "+M+"\n"+"Actual: "+e.attribValue);else{var i=e.tag,o=e.tags[e.tags.length-1]||e;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,p(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}function x(e,t){if(e.opt.xmlns){var n=e.tag,r=y(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(g(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){p(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var o=0,a=e.attribList.length;a>o;o++){var s=e.attribList[o],u=s[0],c=s[1],l=y(u,!0),f=l.prefix,d=l.local,h=""==f?"":n.ns[f]||"",m={name:u,value:c,prefix:f,local:d,uri:h};f&&"xmlns"!=f&&!h&&(g(e,"Unbound namespace prefix: "+JSON.stringify(f)),m.uri=f),e.tag.attributes[u]=m,p(e,"onattribute",m)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),p(e,"onopentag",e.tag),t||(e.state=e.noscript||"script"!==e.tagName.toLowerCase()?Q.TEXT:Q.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function b(e){if(!e.tagName)return g(e,"Weird empty close tag."),e.textNode+="</>",e.state=Q.TEXT,void 0;if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",e.state=Q.SCRIPT,void 0;p(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--;){var i=e.tags[t];if(i.name===r)break;g(e,"Unexpected close tag")}if(0>t)return g(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",e.state=Q.TEXT,void 0;e.tagName=n;for(var o=e.tags.length;o-->t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,p(e,"onclosetag",e.tagName);var s={};for(var u in a.ns)s[u]=a.ns[u];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==c.ns&&Object.keys(a.ns).forEach(function(t){var n=a.ns[t];p(e,"onclosenamespace",{prefix:t,uri:n})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=Q.TEXT}function w(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:(n=r,"#"===n.charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),t=parseInt(n,16),i=t.toString(16)):(n=n.slice(1),t=parseInt(n,10),i=t.toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(g(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function S(e){var n=this;if(this.error)throw this.error;if(n.closed)return h(n,"Cannot write after close. Assign an onready handler.");if(null===e)return m(n);for(var r=0,i="";n.c=i=e.charAt(r++);)switch(n.trackPosition&&(n.position++,"\n"===i?(n.line++,n.column=0):n.column++),n.state){case Q.BEGIN:if(n.state=Q.BEGIN_WHITESPACE,"﻿"===i)continue;case Q.BEGIN_WHITESPACE:"<"===i?(n.state=Q.OPEN_WAKA,n.startTagLine=n.line,n.startTagColumn=n.column,n.startTagPosition=n.position):c(D,i)&&(g(n,"Non-whitespace before first tag."),n.textNode=i,n.state=Q.TEXT);continue;case Q.TEXT:if(n.sawRoot&&!n.closedRoot){for(var o=r-1;i&&"<"!==i&&"&"!==i;)i=e.charAt(r++),i&&n.trackPosition&&(n.position++,"\n"===i?(n.line++,n.column=0):n.column++);n.textNode+=e.substring(o,r-1)}"<"!==i||n.sawRoot&&n.closedRoot&&!n.strict?(!c(D,i)||n.sawRoot&&!n.closedRoot||g(n,"Text data outside of root node."),"&"===i?n.state=Q.TEXT_ENTITY:n.textNode+=i):(n.state=Q.OPEN_WAKA,n.startTagLine=n.line,n.startTagColumn=n.column,n.startTagPosition=n.position);continue;case Q.SCRIPT:"<"===i?n.state=Q.SCRIPT_ENDING:n.script+=i;continue;case Q.SCRIPT_ENDING:"/"===i?n.state=Q.CLOSE_TAG:(n.script+="<"+i,n.state=Q.SCRIPT);continue;case Q.OPEN_WAKA:if("!"===i)n.state=Q.SGML_DECL,n.sgmlDecl="";else if(u(D,i));else if(u(U,i))n.state=Q.OPEN_TAG,n.tagName=i;
else if("/"===i)n.state=Q.CLOSE_TAG,n.tagName="";else if("?"===i)n.state=Q.PROC_INST,n.procInstName=n.procInstBody="";else{if(g(n,"Unencoded <"),n.startTagPosition+1<n.position){var a=n.position-n.startTagPosition;i=new Array(a).join(" ")+i}n.textNode+="<"+i,n.state=Q.TEXT}continue;case Q.SGML_DECL:(n.sgmlDecl+i).toUpperCase()===j?(p(n,"onopencdata"),n.state=Q.CDATA,n.sgmlDecl="",n.cdata=""):"--"===n.sgmlDecl+i?(n.state=Q.COMMENT,n.comment="",n.sgmlDecl=""):(n.sgmlDecl+i).toUpperCase()===F?(n.state=Q.DOCTYPE,(n.doctype||n.sawRoot)&&g(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===i?(p(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=Q.TEXT):u(k,i)?(n.state=Q.SGML_DECL_QUOTED,n.sgmlDecl+=i):n.sgmlDecl+=i;continue;case Q.SGML_DECL_QUOTED:i===n.q&&(n.state=Q.SGML_DECL,n.q=""),n.sgmlDecl+=i;continue;case Q.DOCTYPE:">"===i?(n.state=Q.TEXT,p(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=i,"["===i?n.state=Q.DOCTYPE_DTD:u(k,i)&&(n.state=Q.DOCTYPE_QUOTED,n.q=i));continue;case Q.DOCTYPE_QUOTED:n.doctype+=i,i===n.q&&(n.q="",n.state=Q.DOCTYPE);continue;case Q.DOCTYPE_DTD:n.doctype+=i,"]"===i?n.state=Q.DOCTYPE:u(k,i)&&(n.state=Q.DOCTYPE_DTD_QUOTED,n.q=i);continue;case Q.DOCTYPE_DTD_QUOTED:n.doctype+=i,i===n.q&&(n.state=Q.DOCTYPE_DTD,n.q="");continue;case Q.COMMENT:"-"===i?n.state=Q.COMMENT_ENDING:n.comment+=i;continue;case Q.COMMENT_ENDING:"-"===i?(n.state=Q.COMMENT_ENDED,n.comment=d(n.opt,n.comment),n.comment&&p(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+i,n.state=Q.COMMENT);continue;case Q.COMMENT_ENDED:">"!==i?(g(n,"Malformed comment"),n.comment+="--"+i,n.state=Q.COMMENT):n.state=Q.TEXT;continue;case Q.CDATA:"]"===i?n.state=Q.CDATA_ENDING:n.cdata+=i;continue;case Q.CDATA_ENDING:"]"===i?n.state=Q.CDATA_ENDING_2:(n.cdata+="]"+i,n.state=Q.CDATA);continue;case Q.CDATA_ENDING_2:">"===i?(n.cdata&&p(n,"oncdata",n.cdata),p(n,"onclosecdata"),n.cdata="",n.state=Q.TEXT):"]"===i?n.cdata+="]":(n.cdata+="]]"+i,n.state=Q.CDATA);continue;case Q.PROC_INST:"?"===i?n.state=Q.PROC_INST_ENDING:u(D,i)?n.state=Q.PROC_INST_BODY:n.procInstName+=i;continue;case Q.PROC_INST_BODY:if(!n.procInstBody&&u(D,i))continue;"?"===i?n.state=Q.PROC_INST_ENDING:n.procInstBody+=i;continue;case Q.PROC_INST_ENDING:">"===i?(p(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=Q.TEXT):(n.procInstBody+="?"+i,n.state=Q.PROC_INST_BODY);continue;case Q.OPEN_TAG:u(V,i)?n.tagName+=i:(v(n),">"===i?x(n):"/"===i?n.state=Q.OPEN_TAG_SLASH:(c(D,i)&&g(n,"Invalid character in tag name"),n.state=Q.ATTRIB));continue;case Q.OPEN_TAG_SLASH:">"===i?(x(n,!0),b(n)):(g(n,"Forward-slash in opening tag not followed by >"),n.state=Q.ATTRIB);continue;case Q.ATTRIB:if(u(D,i))continue;">"===i?x(n):"/"===i?n.state=Q.OPEN_TAG_SLASH:u(U,i)?(n.attribName=i,n.attribValue="",n.state=Q.ATTRIB_NAME):g(n,"Invalid attribute name");continue;case Q.ATTRIB_NAME:"="===i?n.state=Q.ATTRIB_VALUE:">"===i?(g(n,"Attribute without value"),n.attribValue=n.attribName,_(n),x(n)):u(D,i)?n.state=Q.ATTRIB_NAME_SAW_WHITE:u(V,i)?n.attribName+=i:g(n,"Invalid attribute name");continue;case Q.ATTRIB_NAME_SAW_WHITE:if("="===i)n.state=Q.ATTRIB_VALUE;else{if(u(D,i))continue;g(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",p(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===i?x(n):u(U,i)?(n.attribName=i,n.state=Q.ATTRIB_NAME):(g(n,"Invalid attribute name"),n.state=Q.ATTRIB)}continue;case Q.ATTRIB_VALUE:if(u(D,i))continue;u(k,i)?(n.q=i,n.state=Q.ATTRIB_VALUE_QUOTED):(g(n,"Unquoted attribute value"),n.state=Q.ATTRIB_VALUE_UNQUOTED,n.attribValue=i);continue;case Q.ATTRIB_VALUE_QUOTED:if(i!==n.q){"&"===i?n.state=Q.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=i;continue}_(n),n.q="",n.state=Q.ATTRIB_VALUE_CLOSED;continue;case Q.ATTRIB_VALUE_CLOSED:u(D,i)?n.state=Q.ATTRIB:">"===i?x(n):"/"===i?n.state=Q.OPEN_TAG_SLASH:u(U,i)?(g(n,"No whitespace between attributes"),n.attribName=i,n.attribValue="",n.state=Q.ATTRIB_NAME):g(n,"Invalid attribute name");continue;case Q.ATTRIB_VALUE_UNQUOTED:if(c(R,i)){"&"===i?n.state=Q.ATTRIB_VALUE_ENTITY_U:n.attribValue+=i;continue}_(n),">"===i?x(n):n.state=Q.ATTRIB;continue;case Q.CLOSE_TAG:if(n.tagName)">"===i?b(n):u(V,i)?n.tagName+=i:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=Q.SCRIPT):(c(D,i)&&g(n,"Invalid tagname in closing tag"),n.state=Q.CLOSE_TAG_SAW_WHITE);else{if(u(D,i))continue;c(U,i)?n.script?(n.script+="</"+i,n.state=Q.SCRIPT):g(n,"Invalid tagname in closing tag."):n.tagName=i}continue;case Q.CLOSE_TAG_SAW_WHITE:if(u(D,i))continue;">"===i?b(n):g(n,"Invalid characters in closing tag");continue;case Q.TEXT_ENTITY:case Q.ATTRIB_VALUE_ENTITY_Q:case Q.ATTRIB_VALUE_ENTITY_U:switch(n.state){case Q.TEXT_ENTITY:var s=Q.TEXT,l="textNode";break;case Q.ATTRIB_VALUE_ENTITY_Q:var s=Q.ATTRIB_VALUE_QUOTED,l="attribValue";break;case Q.ATTRIB_VALUE_ENTITY_U:var s=Q.ATTRIB_VALUE_UNQUOTED,l="attribValue"}";"===i?(n[l]+=w(n),n.entity="",n.state=s):u(O,i)?n.entity+=i:(g(n,"Invalid character entity"),n[l]+="&"+n.entity+i,n.entity="",n.state=s);continue;default:throw new Error(n,"Unknown state: "+n.state)}return n.position>=n.bufferCheckPosition&&t(n),n}var E={};E.parser=function(t,n){return new e(t,n)},E.SAXParser=e,E.SAXStream=o,E.createStream=i,E.MAX_BUFFER_LENGTH=65536;var C=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];E.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){this.__proto__=e}return t.prototype=e,new t}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),e.prototype={end:function(){m(this)},write:S,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){r(this)}};try{var T=require("stream").Stream}catch(P){var T=function(){}}var I=E.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});o.prototype=Object.create(T.prototype,{constructor:{value:o}}),o.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=require("string_decoder").StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},o.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},o.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===I.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),T.prototype.on.call(n,e,t)};var D="\r\n	 ",A="0124356789",N="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",k="'\"",O=A+N+"#",R=D+">",j="[CDATA[",F="DOCTYPE",L="http://www.w3.org/XML/1998/namespace",M="http://www.w3.org/2000/xmlns/",B={xml:L,xmlns:M};D=a(D),A=a(A),N=a(N);var U=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,V=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;k=a(k),O=a(O),R=a(R);var Q=0;E.STATE={BEGIN:Q++,BEGIN_WHITESPACE:Q++,TEXT:Q++,TEXT_ENTITY:Q++,OPEN_WAKA:Q++,SGML_DECL:Q++,SGML_DECL_QUOTED:Q++,DOCTYPE:Q++,DOCTYPE_QUOTED:Q++,DOCTYPE_DTD:Q++,DOCTYPE_DTD_QUOTED:Q++,COMMENT_STARTING:Q++,COMMENT:Q++,COMMENT_ENDING:Q++,COMMENT_ENDED:Q++,CDATA:Q++,CDATA_ENDING:Q++,CDATA_ENDING_2:Q++,PROC_INST:Q++,PROC_INST_BODY:Q++,PROC_INST_ENDING:Q++,OPEN_TAG:Q++,OPEN_TAG_SLASH:Q++,ATTRIB:Q++,ATTRIB_NAME:Q++,ATTRIB_NAME_SAW_WHITE:Q++,ATTRIB_VALUE:Q++,ATTRIB_VALUE_QUOTED:Q++,ATTRIB_VALUE_CLOSED:Q++,ATTRIB_VALUE_UNQUOTED:Q++,ATTRIB_VALUE_ENTITY_Q:Q++,ATTRIB_VALUE_ENTITY_U:Q++,CLOSE_TAG:Q++,CLOSE_TAG_SAW_WHITE:Q++,SCRIPT:Q++,SCRIPT_ENDING:Q++},E.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},E.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(E.ENTITIES).forEach(function(e){var t=E.ENTITIES[e],n="number"==typeof t?String.fromCharCode(t):t;E.ENTITIES[e]=n});for(var Q in E.STATE)E.STATE[E.STATE[Q]]=Q;return Q=E.STATE,String.fromCodePoint||!function(){var e=String.fromCharCode,t=Math.floor,n=function(){var n,r,i=16384,o=[],a=-1,s=arguments.length;if(!s)return"";for(var u="";++a<s;){var c=Number(arguments[a]);if(!isFinite(c)||0>c||c>1114111||t(c)!=c)throw RangeError("Invalid code point: "+c);65535>=c?o.push(c):(c-=65536,n=(c>>10)+55296,r=c%1024+56320,o.push(n,r)),(a+1==s||o.length>i)&&(u+=e.apply(null,o),o.length=0)}return u};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}(),E}),define("fiorixmlanalysis/utils/customXmlParser",["./SAX"],function(e){"use strict";function t(e,t){return function(n){var r=t.createElementNS(n.ns[n.prefix]||"",n.name);for(var i in n.attributes)if(n.attributes.hasOwnProperty(i)){var o=n.attributes[i];r.setAttribute(o.name,o.value)}r.position={line:{start:this.startTagLine+1,end:this.line+1},column:{start:this.startTagColumn-1,end:this.column+1}},e.push(r)}}function n(e,t){return function(){var n=e.pop();n&&(0===e.length?t.appendChild(n):e[e.length-1].appendChild(n))}}function r(e,t){return function(n){var r=t.createComment(n);0===e.length?t.appendChild(r):e[e.length-1].appendChild(r)}}return{parseXML:function(i){var o=!0,a=[],s=document.implementation.createDocument("","",null),u=e.parser(o,{xmlns:!0,position:!0});return u.oncomment=r(a,s),u.onopentag=t(a,s),u.onclosetag=n(a,s),u.write(i),s}}}),define("fiorixmlanalysis/reporter/syntaxReporter",[],function(){return{SEVIRITY_WARNING:"warning",SEVIRITY_ERROR:"error",SEVIRITY_FATAL_ERROR:"fatalError",id:"syntaxReporter",report:function(e,t,n,r){return this.reportParseErrors(e,t,n,r),!n.issues.length},reportParseErrors:function(e,t,n,r){e&&e.options&&e.options.errors&&e.options.errors.length&&this.reportError(e.options.errors,t,n,r)},reportError:function(e,t,n,r){var i=this.SEVIRITY_WARNING,o=this.SEVIRITY_ERROR,a=this.SEVIRITY_FATAL_ERROR,s={};s[i]=function(e){return(n.root.severity!==o||n.root.severity!==a)&&(n.root.severity=i),e.severity=i,e},s[o]=function(e){return n.root.severity=o,e.severity=o,e},s[a]=function(e){s[o](e)},e.forEach(function(e){var i={category:"Syntax Error",checker:"",helpUrl:"",line:e.row,column:e.column,message:e.text,source:"",path:t};"function"==typeof s[e.type.toLowerCase()]?n.issues.push(s[e.type](i)):(r.service.log.error(that.context.service.fioriXmlAnalysis.getProxyMetadata().getName(),"wrong severity value sent by dom parser: "+e.type,["system"]).done(),n.issues.push(s[SEVIRITY_ERROR](i)))})}}}),function(){function e(e,t){this.code=e,this.message=t||Gr[e]}function t(t){var n=t.match(/\$?(?:(?![0-9-])(?:[\w-]+|\*):)?(?![0-9-])(?:[\w-]+|\*)|\(:|:\)|\/\/|\.\.|::|\d+(?:\.\d*)?(?:[eE][+-]?\d+)?|\.\d+(?:[eE][+-]?\d+)?|"[^"]*(?:""[^"]*)*"|'[^']*(?:''[^']*)*'|<<|>>|[!<>]=|(?![0-9-])[\w-]+:\*|\s+|./g);if(n){for(var r=0,i=0,o=n.length;o>i;i++)"(:"==n[i]?r++:":)"==n[i]&&r?r--:r||/^\s/.test(n[i])||(this[this.length++]=n[i]);if(r)throw new e("XPST0003","Unclosed comment")}}function n(){}function r(e,t,r,i){this.staticContext=e,this.item=t,this.scope=r||{},this.stack={},this.DOMAdapter=i||new n;var o=new Dr,a=o.getTimezoneOffset();this.dateTime=new Zt(o.getFullYear(),o.getMonth()+1,o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds()+o.getMilliseconds()/1e3,-a),this.timezone=new Pn(0,Nr.abs(~~(a/60)),Nr.abs(a%60),0,a>0)}function i(){this.dataTypes={},this.documents={},this.functions={},this.collations={},this.collections={}}function o(e,t,n){zr[e]=n,Wr[e]=t}function a(e,t){qr[e]=t}function s(n,r){var i=new t(n),o=p(i,r);if(!i.eof())throw new e("XPST0003","Unexpected token beyond end of query");if(!o)throw new e("XPST0003","Expected expression");this.internalExpression=o}function u(){}function c(){}function l(){this.items=[]}function p(t,n){var r;if(!t.eof()&&(r=f(t,n))){var i=new l;for(i.items.push(r);","==t.peek();){if(t.next(),t.eof()||!(r=f(t,n)))throw new e("XPST0003","Expected expression");i.items.push(r)}return i}}function f(e,t){return e.eof()?void 0:y(e,t)||h(e,t)||x(e,t)||F(e,t)}function d(){this.bindings=[],this.returnExpr=null}function h(t,n){if("for"==t.peek()&&"$"==t.peek(1).substr(0,1)){t.next();var r,i=new d;do i.bindings.push(g(t,n));while(","==t.peek()&&t.next());if("return"!=t.peek())throw new e("XPST0003","Expected 'return' token in for expression");if(t.next(),t.eof()||!(r=f(t,n)))throw new e("XPST0003","Expected return statement operand in for expression");return i.returnExpr=r,i}}function m(e,t,n,r){this.prefix=e,this.localName=t,this.namespaceURI=n,this.inExpr=r}function g(t,n){var r=t.peek().substr(1).match(ii);if(!r)throw new e("XPST0003","Expected binding in for expression");if("*"==r[1]||"*"==r[2])throw new e("XPST0003","Illegal use of wildcard in for expression binding variable name");if(t.next(),"in"!=t.peek())throw new e("XPST0003","Expected 'in' token in for expression binding");t.next();var i;if(t.eof()||!(i=f(t,n)))throw new e("XPST0003","Expected in statement operand in for expression binding");return new m(r[1]||null,r[2],r[1]?n.getURIForPrefix(r[1]):null,i)}function v(e,t,n){this.condExpr=e,this.thenExpr=t,this.elseExpr=n}function y(t,n){var r,i,o;if("if"==t.peek()&&"("==t.peek(1)){if(t.next(2),t.eof()||!(r=p(t,n)))throw new e("XPST0003","Expected if statement operand in conditional expression");if(")"!=t.peek())throw new e("XPST0003","Expected ')' token in for expression");if(t.next(),"then"!=t.peek())throw new e("XPST0003","Expected 'then' token in conditional if expression");if(t.next(),t.eof()||!(i=f(t,n)))throw new e("XPST0003","Expected then statement operand in condional expression");if("else"!=t.peek())throw new e("XPST0003","Expected 'else' token in conditional if expression");if(t.next(),t.eof()||!(o=f(t,n)))throw new e("XPST0003","Expected else statement operand in condional expression");return new v(r,i,o)}}function _(e){this.quantifier=e,this.bindings=[],this.satisfiesExpr=null}function x(t,n){var r=t.peek();if(("some"==r||"every"==r)&&"$"==t.peek(1).substr(0,1)){t.next();var i,o=new _(r);do o.bindings.push(w(t,n));while(","==t.peek()&&t.next());if("satisfies"!=t.peek())throw new e("XPST0003","Expected 'satisfies' token in quantified expression");if(t.next(),t.eof()||!(i=f(t,n)))throw new e("XPST0003","Expected satisfies statement operand in quantified expression");return o.satisfiesExpr=i,o}}function b(e,t,n,r){this.prefix=e,this.localName=t,this.namespaceURI=n,this.inExpr=r}function w(t,n){var r=t.peek().substr(1).match(ii);if(!r)throw new e("XPST0003","Expected binding in quantified expression");if("*"==r[1]||"*"==r[2])throw new e("XPST0003","Illegal use of wildcard in quantified expression binding variable name");if(t.next(),"in"!=t.peek())throw new e("XPST0003","Expected 'in' token in quantified expression binding");t.next();var i;if(t.eof()||!(i=f(t,n)))throw new e("XPST0003","Expected in statement operand in quantified expression binding");return new b(r[1]||null,r[2],r[1]?n.getURIForPrefix(r[1]):null,i)}function S(e,t,n){this.left=e,this.right=t,this.operator=n}function E(t,n){var r,i;if(!t.eof()&&(r=Et(t,n))){if(!(t.peek()in Yr))return r;var o=t.peek();if(t.next(),t.eof()||!(i=Et(t,n)))throw new e("XPST0003","Expected second operand in comparison expression");return new S(r,i,o)}}function C(e,t){var n=xr(e.left.evaluate(t),t);if(!n.length)return new $t(!1);var r=xr(e.right.evaluate(t),t);if(!r.length)return new $t(!1);for(var i,o,a=!1,s=0,u=n.length;u>s&&!a;s++)for(var c,l,p=0,f=r.length;f>p&&!a;p++)o=n[s],l=r[p],i=o instanceof En,c=l instanceof En,i&&c?(o=bn.cast(o),l=bn.cast(l)):(i?l instanceof Pn?o=Pn.cast(o):l instanceof Cn?o=Cn.cast(o):l.primitiveKind&&(o=qr[l.primitiveKind].cast(o)):c&&(o instanceof Pn?l=Pn.cast(l):o instanceof Cn?l=Cn.cast(l):o.primitiveKind&&(l=qr[o.primitiveKind].cast(l))),o instanceof qt&&(o=bn.cast(o)),l instanceof qt&&(l=bn.cast(l))),a=Jr[$r[e.operator]](o,l,t).valueOf();return new $t(a)}function T(e,t){var n=xr(e.left.evaluate(t),t);if(!n.length)return null;xt(t,n,"?","first operand of '"+e.operator+"'");var r=xr(e.right.evaluate(t),t);if(!r.length)return null;xt(t,r,"?","second operand of '"+e.operator+"'");var i=n[0],o=r[0];return i instanceof En&&(i=bn.cast(i)),o instanceof En&&(o=bn.cast(o)),i instanceof qt&&(i=bn.cast(i)),o instanceof qt&&(o=bn.cast(o)),Jr[e.operator](i,o,t)}function P(e,t){var n=e.left.evaluate(t);if(!n.length)return null;xt(t,n,"?","first operand of '"+e.operator+"'"),_t(t,n,Kn,"first operand of '"+e.operator+"'");var r=e.right.evaluate(t);return r.length?(xt(t,r,"?","second operand of '"+e.operator+"'"),_t(t,r,Kn,"second operand of '"+e.operator+"'"),Kr[e.operator](n[0],r[0],t)):null}function I(e){this.left=e,this.items=[]}function D(t,n){var r;if(!t.eof()&&(r=N(t,n))){if(!(t.peek()in Zr))return r;for(var i,o=new I(r);(i=t.peek())in Zr;){if(t.next(),t.eof()||!(r=N(t,n)))throw new e("XPST0003","Expected second operand in additive expression");o.items.push([i,r])}return o}}function A(e){this.left=e,this.items=[]}function N(t,n){var r;if(!t.eof()&&(r=Tt(t,n))){if(!(t.peek()in ei))return r;for(var i,o=new A(r);(i=t.peek())in ei;){if(t.next(),t.eof()||!(r=Tt(t,n)))throw new e("XPST0003","Expected second operand in multiplicative expression");o.items.push([i,r])}return o}}function k(e,t){this.operator=e,this.expression=t}function O(t,n){if(!t.eof()){if(!(t.peek()in ti))return R(t,n);for(var r,i="+";t.peek()in ti;)"-"==t.peek()&&(i="-"==i?"+":"-"),t.next();if(t.eof()||!(r=R(t,n)))throw new e("XPST0003","Expected operand in unary expression");return new k(i,r)}}function R(e,t){return q(e,t)}function j(e){this.left=e,this.items=[]}function F(t,n){var r;if(!t.eof()&&(r=M(t,n))){if("or"!=t.peek())return r;for(var i=new j(r);"or"==t.peek();){if(t.next(),t.eof()||!(r=M(t,n)))throw new e("XPST0003","Expected second operand in logical expression");i.items.push(r)}return i}}function L(e){this.left=e,this.items=[]}function M(t,n){var r;if(!t.eof()&&(r=E(t,n))){if("and"!=t.peek())return r;for(var i=new L(r);"and"==t.peek();){if(t.next(),t.eof()||!(r=E(t,n)))throw new e("XPST0003","Expected second operand in logical expression");i.items.push(r)}return i}}function B(){}function U(e,t){return e.eof()?void 0:dt(e,t)||G(e,t)}function V(t,n,r){for(var i;"["==t.peek();){if(t.next(),t.eof()||!(i=p(t,n)))throw new e("XPST0003","Expected expression in predicate");if(r.predicates.push(i),"]"!=t.peek())throw new e("XPST0003","Expected ']' token in predicate");t.next()}}function Q(e,t){this.axis=e,this.test=t,this.predicates=[]}function G(t,n){var r,i,o=t.peek();if("::"==t.peek(1)){if(!(o in ni))throw new e("XPST0003","Unknown axis name: "+o);if(t.next(2),t.eof()||!(r=$(t,n)))throw new e("XPST0003","Expected node test expression in axis step");i=new Q(o,r)}else if(".."==o)t.next(),i=new Q("parent",new J("node"));else if("@"==o){if(t.next(),t.eof()||!(r=$(t,n)))throw new e("XPST0003","Expected node test expression in axis step");i=new Q("attribute",r)}else{if(t.eof()||!(r=$(t,n)))return;i=new Q(r instanceof J&&"attribute"==r.name?"attribute":"child",r)}return V(t,n,i),i}function H(e,t,n){for(var r;e;e=n(e,"nextSibling"))t.push(e),(r=n(e,"firstChild"))&&H(r,t,n)}function z(e,t,n){for(var r;e;e=n(e,"previousSibling"))(r=n(e,"lastChild"))&&z(r,t,n),t.push(e)}function W(){this.items=[]}function q(t,n){if(!t.eof()){var r,i="/",o="//",a=new W,s=t.peek();if((s==o||s==i)&&(t.next(),a.items.push(new gt(null,"root",Ur)),s==o&&a.items.push(new Q("descendant-or-self",new J("node")))),!t.eof()&&(r=U(t,n))){for(a.items.push(r);(s=t.peek())==i||s==o;){if(s==o&&a.items.push(new Q("descendant-or-self",new J("node"))),t.next(),t.eof()||!(r=U(t,n)))throw new e("XPST0003","Expected path step expression");a.items.push(r)}return 1==a.items.length?a.items[0]:a}if(s==i)return a.items[0];if(s==o)throw new e("XPST0003","Expected path step expression")}}function X(){}function $(e,t){return e.eof()?void 0:K(e,t)||Z(e,t)}function J(e){this.name=e,this.args=[]}function K(t){var n=t.peek();if("("==t.peek(1)){if(!(n in ri))throw new e("XPST0003","Unknown '"+n+"' kind test");t.next(2);var r=new J(n);if(")"!=t.peek());else{if("schema-attribute"==n)throw new e("XPST0003","Expected attribute declaration in 'schema-attribute' kind test");if("schema-element"==n)throw new e("XPST0003","Expected element declaration in 'schema-element' kind test")}if(")"!=t.peek())throw new e("XPST0003","Expected ')' token in kind test");return t.next(),r}}function Y(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}function Z(t,n){var r=t.peek().match(ii);if(r){if("*"==r[1]&&"*"==r[2])throw new e("XPST0003","Illegal use of *:* wildcard in name test");return t.next(),new Y(r[1]||null,r[2],r[1]?"*"==r[1]?"*":n.getURIForPrefix(r[1])||null:n.defaultElementNamespace)}}function et(e,t){return e.eof()?void 0:it(e,t)||nt(e,t)||vt(e,t)||mt(e,t)||at(e,t)}function tt(e){this.expression=e}function nt(t,n){if("("==t.peek()){t.next();var r=null;if(")"!=t.peek()&&(r=p(t,n)),")"!=t.peek())throw new e("XPST0003","Expected ')' token in parenthesized expression");return t.next(),new tt(r)}}function rt(){}function it(e){return"."==e.peek()?(e.next(),new rt):void 0}function ot(){}function at(e,t){return e.eof()?void 0:ut(e,t)||pt(e,t)}function st(e){this.value=e}function ut(e){var t=e.peek(),n=ct(t);return n?(e.next(),new st(n)):void 0}function ct(e){var t=e.match(oi);if(t){var n=Dn;return t[5]?n=sn:(t[2]||t[3])&&(n=an),new n(+e)}}function lt(e){this.value=e}function pt(e){var t=e.peek().match(ai);return t?(e.next(),new lt(new bn(t[1]?t[1].replace("''","'"):t[2]?t[2].replace('""','"'):""))):void 0}function ft(e){this.expression=e,this.predicates=[]}function dt(e,t){var n;if(!e.eof()&&(n=et(e,t))){var r=new ft(n);return V(e,t,r),0==r.predicates.length?r.expression:r}}function ht(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}function mt(t,n){if("$"==t.peek().substr(0,1)){var r=t.peek().substr(1).match(ii);if(r){if("*"==r[1]||"*"==r[2])throw new e("XPST0003","Illegal use of wildcard in var expression variable name");var i=new ht(r[1]||null,r[2],r[1]?n.getURIForPrefix(r[1]):null);return t.next(),i}}}function gt(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n,this.args=[]}function vt(t,n){var r=t.peek().match(ii);if(r&&"("==t.peek(1)){if(!r[1]&&r[2]in ri)return G(t,n);if("*"==r[1]||"*"==r[2])throw new e("XPST0003","Illegal use of wildcard in function name");var i,o=new gt(r[1]||null,r[2],r[1]?n.getURIForPrefix(r[1])||null:n.defaultFunctionNamespace);if(t.next(2),")"!=t.peek()){do{if(t.eof()||!(i=f(t,n)))throw new e("XPST0003","Expected function call argument");o.args.push(i)}while(","==t.peek()&&t.next());if(")"!=t.peek())throw new e("XPST0003","Expected ')' token in function call")}return t.next(),o}}function yt(t,n,r,i,o){for(var a,s,u=i.length,c=n.length,l=0;l<n.length&&!n[l][2];)l++;if(u>c)throw new e("XPST0017","Function "+t+"() must have "+(c?" no more than ":"")+c+" argument"+(c>1||!c?"s":""));if(l>u)throw new e("XPST0017","Function "+t+"() must have "+(l==c?"exactly":"at least")+" "+l+" argument"+(c>1?"s":""));for(var p=0;u>p;p++)s=n[p],a=i[p],xt(o,a,s[1],si[p]+" argument of "+t+"()"),_t(o,a,s[0],si[p]+" argument of "+t+"()"),"+"!=s[1]&&"*"!=s[1]&&(i[p]=a.length?a[0]:null)}function _t(t,n,r,i){for(var o,a,s=0,u=n.length;u>s;s++)if(a=n[s],r==Kn||r.prototype instanceof Kn){if(!t.DOMAdapter.isNode(a))throw new e("XPTY0004","Required item type of "+i+" is "+r);if(r!=Kn&&(o=t.DOMAdapter.getProperty(a,"nodeType"),[null,tr,Yn,rr,rr,null,null,nr,Zn,er,null,null,null][o]!=r))throw new e("XPTY0004","Required item type of "+i+" is "+r)}else if(r==zt||r.prototype instanceof zt){if(a=xr([a],t)[0],r!=zt&&(a instanceof En?a=r.cast(a):r==bn?a instanceof qt&&(a=bn.cast(a)):r==sn&&Wt(a)&&(a=r.cast(a))),!(a instanceof r))throw new e("XPTY0004","Required item type of "+i+" is "+r);n[s]=a}}function xt(t,n,r,i){var o=n.length;if("?"==r){if(o>1)throw new e("XPTY0004","Required cardinality of "+i+" is one or zero")}else if("+"==r){if(1>o)throw new e("XPTY0004","Required cardinality of "+i+" is one or more")}else if("*"!=r&&1!=o)throw new e("XPTY0004","Required cardinality of "+i+" is exactly one")}function bt(e){this.left=e,this.items=[]}function wt(t,n){var r,i;if(!t.eof()&&(r=It(t,n))){if("intersect"!=(i=t.peek())&&"except"!=i)return r;for(var o=new bt(r);"intersect"==(i=t.peek())||"except"==i;){if(t.next(),t.eof()||!(r=It(t,n)))throw new e("XPST0003","Expected second operand in "+i+" expression");o.items.push([i,r])}return o}}function St(e,t){this.left=e,this.right=t}function Et(t,n){var r,i;if(!t.eof()&&(r=D(t,n))){if("to"!=t.peek())return r;if(t.next(),t.eof()||!(i=D(t,n)))throw new e("XPST0003","Expected second operand in range expression");return new St(r,i)}}function Ct(e){this.left=e,this.items=[]}function Tt(t,n){var r,i;if(!t.eof()&&(r=wt(t,n))){if("|"!=(i=t.peek())&&"union"!=i)return r;for(var o=new Ct(r);"|"==(i=t.peek())||"union"==i;){if(t.next(),t.eof()||!(r=wt(t,n)))throw new e("XPST0003","Expected second operand in union expression");o.items.push(r)}return o}}function Pt(e,t){this.expression=e,this.type=t}function It(t,n){var r,i;if(!t.eof()&&(r=At(t,n))){if("instance"!=t.peek()||"of"!=t.peek(1))return r;if(t.next(2),t.eof()||!(i=Ut(t,n)))throw new e("XPST0003","Expected second operand in instance of expression");return new Pt(r,i)}}function Dt(e,t){this.expression=e,this.type=t}function At(t,n){var r,i;if(!t.eof()&&(r=kt(t,n))){if("treat"!=t.peek()||"as"!=t.peek(1))return r;if(t.next(2),t.eof()||!(i=Ut(t,n)))throw new e("XPST0003","Expected second operand in treat expression");return new Dt(r,i)}}function Nt(e,t){this.expression=e,this.type=t}function kt(t,n){var r,i;if(!t.eof()&&(r=Rt(t,n))){if("castable"!=t.peek()||"as"!=t.peek(1))return r;if(t.next(2),t.eof()||!(i=Qt(t,n)))throw new e("XPST0003","Expected second operand in castable expression");return new Nt(r,i)}}function Ot(e,t){this.expression=e,this.type=t}function Rt(t,n){var r,i;if(!t.eof()&&(r=O(t,n))){if("cast"!=t.peek()||"as"!=t.peek(1))return r;if(t.next(2),t.eof()||!(i=Qt(t,n)))throw new e("XPST0003","Expected second operand in cast expression");return new Ot(r,i)}}function jt(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}function Ft(t,n){var r=t.peek().match(ii);if(r){if("*"==r[1]||"*"==r[2])throw new e("XPST0003","Illegal use of wildcard in type name");return t.next(),new jt(r[1]||null,r[2],r[1]?n.getURIForPrefix(r[1]):null)}}function Lt(e){this.test=e}function Mt(t,n){if(!t.eof()){var r;if("item"==t.peek()&&"("==t.peek(1)){if(t.next(2),")"!=t.peek())throw new e("XPST0003","Expected ')' token in item type expression");return t.next(),new Lt}return(r=K(t,n))?new Lt(r):(r=Ft(t,n))?new Lt(r):void 0}}function Bt(e,t){this.itemType=e||null,this.occurence=t||null}function Ut(t,n){if(!t.eof()){if("empty-sequence"==t.peek()&&"("==t.peek(1)){if(t.next(2),")"!=t.peek())throw new e("XPST0003","Expected ')' token in sequence type");return t.next(),new Bt}var r,i;return!t.eof()&&(r=Mt(t,n))?(i=t.peek(),"?"==i||"*"==i||"+"==i?t.next():i=null,new Bt(r,i)):void 0}}function Vt(e,t){this.itemType=e||null,this.occurence=t||null}function Qt(e,t){var n,r;return!e.eof()&&(n=Ft(e,t))?(r=e.peek(),"?"==r?e.next():r=null,new Vt(n,r)):void 0}function Gt(){}function Ht(){}function zt(){}function Wt(e){return e instanceof fn||e instanceof sn||e instanceof an}function qt(e,t,n,r,i){this.scheme=e,this.authority=t,this.path=n,this.query=r,this.fragment=i}function Xt(e){this.value=e}function $t(e){this.value=e}function Jt(e,t,n,r,i){this.year=e,this.month=t,this.day=n,this.timezone=r,this.negative=i}function Kt(e,t){return 2==t&&(0==e%400||0!=e%100&&0==e%4)?29:fi[t-1]}function Yt(e,t){if(!t){var n=Kt(e.year,e.month);if(e.day>n)for(;e.day>n;)e.month+=1,e.month>12&&(e.year+=1,0==e.year&&(e.year=1),e.month=1),e.day-=n,n=Kt(e.year,e.month);else if(e.day<1)for(;e.day<1;)e.month-=1,e.month<1&&(e.year-=1,0==e.year&&(e.year=-1),e.month=12),n=Kt(e.year,e.month),e.day+=n}return e.month>12?(e.year+=~~(e.month/12),0==e.year&&(e.year=1),e.month=e.month%12):e.month<1&&(e.year+=~~(e.month/12)-1,0==e.year&&(e.year=-1),e.month=e.month%12+12),e}function Zt(e,t,n,r,i,o,a,s){this.year=e,this.month=t,this.day=n,this.hours=r,this.minutes=i,this.seconds=o,this.timezone=a,this.negative=s}function en(e,t){return sValue=Cr(e),arguments.length<2&&(t=2),(sValue.length<t+1?new Pr(t+1-sValue.length).join("0"):"")+sValue}function tn(e){var t=e.timezone;return null==t?"":t?(t>0?"+":"-")+en(Nr.abs(~~(t/60)))+":"+en(Nr.abs(t%60)):"Z"}function nn(e){return(e.negative?"-":"")+en(e.year,4)+"-"+en(e.month)+"-"+en(e.day)}function rn(e){var t=Cr(e.seconds).split(".");return en(e.hours)+":"+en(e.minutes)+":"+en(t[0])+(t.length>1?"."+t[1]:"")}function on(e){return Yt(Sn(e))}function an(e){this.value=e}function sn(e){this.value=e}function un(e,t,n,r,i,o,a){this.year=e,this.month=t,this.day=n,this.hours=r,this.minutes=i,this.seconds=o,this.negative=a}function cn(e){return(e.year?e.year+"Y":"")+(e.month?e.month+"M":"")}function ln(e){return(e.day?e.day+"D":"")+(e.hours||e.minutes||e.seconds?"T"+(e.hours?e.hours+"H":"")+(e.minutes?e.minutes+"M":"")+(e.seconds?e.seconds+"S":""):"")
}function pn(e){return Tn(In(e))}function fn(e){this.value=e}function dn(e,t){this.day=e,this.timezone=t}function hn(e,t){this.month=e,this.timezone=t}function mn(e,t,n){this.month=e,this.day=t,this.timezone=n}function gn(e,t){this.year=e,this.timezone=t}function vn(e,t,n){this.year=e,this.month=t,this.timezone=n}function yn(e){this.value=e}function _n(){}function xn(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}function bn(e){this.value=e}function wn(e,t,n,r){this.hours=e,this.minutes=t,this.seconds=n,this.timezone=r}function Sn(e){return(e.seconds>=60||e.seconds<0)&&(e.minutes+=~~(e.seconds/60)-(e.seconds<0&&e.seconds%60?1:0),e.seconds=e.seconds%60+(e.seconds<0&&e.seconds%60?60:0)),(e.minutes>=60||e.minutes<0)&&(e.hours+=~~(e.minutes/60)-(e.minutes<0&&e.minutes%60?1:0),e.minutes=e.minutes%60+(e.minutes<0&&e.minutes%60?60:0)),(e.hours>=24||e.hours<0)&&(e instanceof Zt&&(e.day+=~~(e.hours/24)-(e.hours<0&&e.hours%24?1:0)),e.hours=e.hours%24+(e.hours<0&&e.hours%24?24:0)),e}function En(e){this.value=e}function Cn(e,t,n){un.call(this,e,t,0,0,0,0,n)}function Tn(e){return e.month>=12&&(e.year+=~~(e.month/12),e.month%=12),e}function Pn(e,t,n,r,i){un.call(this,0,0,e,t,n,r,i)}function In(e){return e.seconds>=60&&(e.minutes+=~~(e.seconds/60),e.seconds%=60),e.minutes>=60&&(e.hours+=~~(e.minutes/60),e.minutes%=60),e.hours>=24&&(e.day+=~~(e.hours/24),e.hours%=24),e}function Dn(e){this.value=e}function An(e){this.value=e}function Nn(e){this.value=e}function kn(e){this.value=e}function On(e){this.value=e}function Rn(e){this.value=e}function jn(e){this.value=e}function Fn(e){this.value=e}function Ln(e){this.value=e}function Mn(e){this.value=e}function Bn(e){this.value=e}function Un(e){this.value=e}function Vn(e){this.value=e}function Qn(e){this.value=e}function Gn(e){this.value=e}function Hn(e){this.value=e}function zn(e){this.value=e}function Wn(e){this.value=e}function qn(e){this.value=e}function Xn(e){this.value=e}function $n(e){this.value=e}function Jn(){}function Kn(){}function Yn(){}function Zn(){}function er(){}function tr(){}function nr(){}function rr(){}function ir(e,t,n){var r=dr(e),i=dr(t);return new $t("lt"==n?i>r:"gt"==n?r>i:r==i)}function or(e,t,n){return ar(Zt.cast(e),Zt.cast(t),n)}function ar(e,t,n){var r=new Pn(0,0,0,0),i=yr(e,r).toString(),o=yr(t,r).toString();return new $t("lt"==n?o>i:"gt"==n?i>o:i==o)}function sr(e,t,n){var r;e instanceof Jt?r=new Jt(e.year,e.month,e.day,e.timezone,e.negative):e instanceof Zt&&(r=new Zt(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative)),r.year=r.year+t.year*("-"==n?-1:1),r.month=r.month+t.month*("-"==n?-1:1),Yt(r,!0);var i=Kt(r.year,r.month);return r.day>i&&(r.day=i),r}function ur(e,t,n){var r;return e instanceof Jt?(r=new Jt(e.year,e.month,e.day,e.timezone,e.negative),r.day=r.day+t.day*("-"==n?-1:1),Yt(r)):e instanceof Zt&&(r=new Zt(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative),r.seconds=r.seconds+t.seconds*("-"==n?-1:1),r.minutes=r.minutes+t.minutes*("-"==n?-1:1),r.hours=r.hours+t.hours*("-"==n?-1:1),r.day=r.day+t.day*("-"==n?-1:1),on(r)),r}function cr(e){return(60*(60*(24*e.day+e.hours)+e.minutes)+e.seconds)*(e.negative?-1:1)}function lr(e){var t=(e=Nr.round(e))<0,n=~~((e=Nr.abs(e))/86400),r=~~((e-=24*3600*n)/3600),i=~~((e-=3600*r)/60),o=e-=60*i;return new Pn(n,r,i,o,t)}function pr(e){return(12*e.year+e.month)*(e.negative?-1:1)}function fr(e){var t=(e=Nr.round(e))<0,n=~~((e=Nr.abs(e))/12),r=e-=12*n;return new Cn(n,r,t)}function dr(e){return e.seconds+60*(e.minutes-(null!=e.timezone?e.timezone%60:0)+60*(e.hours-(null!=e.timezone?~~(e.timezone/60):0)))}function hr(e,t){if(Or(e)||Nr.abs(e)==Fr||Or(t)||Nr.abs(t)==Fr)return 0;var n=Cr(e).match(oi),r=Cr(t).match(oi),i=Nr.max(1,(n[2]||n[3]||"").length+(n[5]||0)*("+"==n[4]?-1:1),(r[2]||r[3]||"").length+(r[5]||0)*("+"==r[4]?-1:1));return i+(i%2?0:1)}function mr(e,t,n){return new(e instanceof Dn&&t instanceof Dn&&n==Nr.round(n)?Dn:an)(n)}function gr(e,t){if(null==e)return null;var n=e[t]*(e.negative?-1:1);return"seconds"==t?new an(n):new Dn(n)}function vr(e,t){if(null==e)return null;if("timezone"==t){var n=e.timezone;return null==n?null:new Pn(0,Nr.abs(~~(n/60)),Nr.abs(n%60),0,0>n)}var r=e[t];return e instanceof Jt||"hours"==t&&24==r&&(r=0),e instanceof wn||(r*=e.negative?-1:1),"seconds"==t?new an(r):new Dn(r)}function yr(e,t){if(null==e)return null;var n;if(n=e instanceof Jt?new Jt(e.year,e.month,e.day,e.timezone,e.negative):e instanceof wn?new wn(e.hours,e.minutes,e.seconds,e.timezone,e.negative):new Zt(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative),null==t)n.timezone=null;else{var r=cr(t)/60;if(null!=e.timezone){var i=r-e.timezone;e instanceof Jt?0>i&&n.day--:(n.minutes+=i%60,n.hours+=~~(i/60)),on(n)}n.timezone=r}return n}function _r(t,n){if(!t.length)return!1;var r=t[0];if(n.DOMAdapter.isNode(r))return!0;if(1==t.length){if(r instanceof $t)return r.value.valueOf();if(r instanceof bn)return!!r.valueOf().length;if(Wt(r))return!(Or(r.valueOf())||0==r.valueOf());throw new e("FORG0006","Effective boolean value is defined only for sequences containing booleans, strings, numbers, URIs, or nodes")}throw new e("FORG0006","Effective boolean value is not defined for a sequence of two or more items")}function xr(e,t){for(var n,r,i=[],o=0,a=e.length;a>o;o++){if(n=e[o],r=null,null==n)r=null;else if(t.DOMAdapter.isNode(n)){var s=t.DOMAdapter.getProperty;switch(s(n,"nodeType")){case 1:r=new En(s(n,"textContent"));break;case 2:r=new En(s(n,"value"));break;case 3:case 4:case 8:r=new En(s(n,"data"));break;case 7:r=new En(s(n,"data"));break;case 9:var u=s(n,"documentElement");r=new En(u?s(u,"textContent"):"")}}else n instanceof zt&&(r=n);null!=r&&i.push(r)}return i}function br(e,t){return e.sort(function(e,n){var r=t.DOMAdapter.compareDocumentPosition(e,n);return 2&r?1:4&r?-1:0})}function wr(t,n){var r="À-ÖØ-öø-˿",i="Ͱ-ͽͿ-῿‌-‍",o="⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�",a="A-Z_a-z\\-.0-9·"+r+"̀-ͯ"+i+"‿-⁀"+o,s="A-Z_a-z"+r+i+o;if(t=t.replace(/\[\\i-\[:\]\]/g,"["+s+"]").replace(/\[\\c-\[:\]\]/g,"["+a+"]").replace(/\\i/g,"[:"+s+"]").replace(/\\I/g,"[^:"+s+"]").replace(/\\c/g,"[:"+a+"]").replace(/\\C/g,"[^:"+a+"]"),n&&!n.match(/^[smix]+$/))throw new e("FORX0001");var u=n.indexOf("s")>=0,c=n.indexOf("x")>=0;if(u||c){n=n.replace(/[sx]/g,"");for(var l,p=[],f=/\s/,d=0,h=t.length,m=!1,g="";h>d;d++)l=t.charAt(d),"\\"!=g&&("["==l?m=!0:"]"==l&&(m=!1)),!m&&c&&f.test(l)||(p[p.length]=!m&&u&&"."==l&&"\\"!=g?"(?:.|\\s)":l),g=l;t=p.join("")}return new Ir(t,n+"g")}function Sr(){}function Er(e,t,n){("undefined"==typeof t||null===t)&&(t="");var o=e[0];"undefined"==typeof o&&(o=null);var a=o&&"DIV"==(9==o.nodeType?o:o.ownerDocument).createElement("div").tagName?Ui:Vi;a.namespaceResolver=n;var u=new s(Cr(t),a);a.namespaceResolver=null;var c,l=new Fi,p=ki;Mi?p=a==Ui?Ri:ji:Bi&&a==Ui&&(p=Oi),c=u.evaluate(new r(a,o,null,p));for(var f,d=0,h=c.length;h>d;d++)l.push(p.isNode(f=c[d])?f:i.xs2js(f));return l}var Cr=window.String,Tr=(window.Boolean,window.Number),Pr=(window.Object,window.Array),Ir=window.RegExp,Dr=window.Date,Ar=window.Function,Nr=window.Math,kr=window.Error,Or=(window.SyntaxError,window.TypeError,window.isNaN),Rr=window.isFinite,jr=window.NaN,Fr=window.Infinity,Lr=function(){return Cr.prototype.trim?function(e){return Cr(e).trim()}:function(e){return Cr(e).replace(/^\s+|\s+$/g,"")}}(),Mr=function(){return Pr.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}}(),Br="http://www.w3.org/2001/XMLSchema",Ur="http://www.w3.org/2005/xpath-functions",Vr="http://www.w3.org/2000/xmlns/",Qr="http://www.w3.org/XML/1998/namespace";e.prototype=new kr;var Gr={};Gr.XPDY0002="Evaluation of an expression relies on some part of the dynamic context that has not been assigned a value.",Gr.XPST0003="Expression is not a valid instance of the grammar",Gr.XPTY0004="Type is not appropriate for the context in which the expression occurs",Gr.XPST0008="Expression refers to an element name, attribute name, schema type name, namespace prefix, or variable name that is not defined in the static context",Gr.XPST0010="Axis not supported",Gr.XPST0017="Expanded QName and number of arguments in a function call do not match the name and arity of a function signature",Gr.XPTY0018="The result of the last step in a path expression contains both nodes and atomic values",Gr.XPTY0019="The result of a step (other than the last step) in a path expression contains an atomic value.",Gr.XPTY0020="In an axis step, the context item is not a node.",Gr.XPST0051="It is a static error if a QName that is used as an AtomicType in a SequenceType is not defined in the in-scope schema types as an atomic type.",Gr.XPST0081="A QName used in an expression contains a namespace prefix that cannot be expanded into a namespace URI by using the statically known namespaces.",Gr.FORG0001="Invalid value for cast/constructor.",Gr.FORG0003="fn:zero-or-one called with a sequence containing more than one item.",Gr.FORG0004="fn:one-or-more called with a sequence containing no items.",Gr.FORG0005="fn:exactly-one called with a sequence containing zero or more than one item.",Gr.FORG0006="Invalid argument type.",Gr.FODC0001="No context document.",Gr.FORX0001="Invalid regular expression flags.",Gr.FOCA0002="Invalid lexical value.",Gr.FOCH0002="Unsupported collation.",Gr.FONS0004="No namespace found for prefix.",t.prototype.index=0,t.prototype.length=0,t.prototype.reset=function(){this.index=0},t.prototype.peek=function(e){return this[this.index+(e||0)]||""},t.prototype.next=function(e){return(this.index+=e||1)<this.length},t.prototype.back=function(e){return(this.index-=e||1)>0},t.prototype.eof=function(){return this.index>=this.length},n.prototype.isNode=function(e){return e&&!!e.nodeType},n.prototype.getProperty=function(e,t){return e[t]},n.prototype.isSameNode=function(e,t){return e==t},n.prototype.compareDocumentPosition=function(e,t){return e.compareDocumentPosition(t)},n.prototype.lookupNamespaceURI=function(e,t){return e.lookupNamespaceURI(t)},n.prototype.getElementById=function(e,t){return e.getElementById(t)},n.prototype.getElementsByTagNameNS=function(e,t,n){return e.getElementsByTagNameNS(t,n)},r.prototype.item=null,r.prototype.position=0,r.prototype.size=0,r.prototype.scope=null,r.prototype.stack=null,r.prototype.dateTime=null,r.prototype.timezone=null,r.prototype.staticContext=null,r.prototype.pushVariable=function(e,t){this.stack.hasOwnProperty(e)||(this.stack[e]=[]),this.stack[e].push(this.scope[e]),this.scope[e]=t},r.prototype.popVariable=function(e){this.stack.hasOwnProperty(e)&&(this.scope[e]=this.stack[e].pop(),this.stack[e].length||(delete this.stack[e],"undefined"==typeof this.scope[e]&&delete this.scope[e]))},i.prototype.baseURI=null,i.prototype.dataTypes=null,i.prototype.documents=null,i.prototype.functions=null,i.prototype.defaultFunctionNamespace=null,i.prototype.collations=null,i.prototype.defaultCollationName=Ur+"/collation/codepoint",i.prototype.collections=null,i.prototype.namespaceResolver=null,i.prototype.defaultElementNamespace=null;var Hr=/^(?:\{([^\}]+)\})?(.+)$/;i.prototype.setDataType=function(e,t){var n=e.match(Hr);n&&n[1]!=Br&&(this.dataTypes[e]=t)},i.prototype.getDataType=function(e){var t=e.match(Hr);return t?t[1]==Br?qr[Ir.$2]:this.dataTypes[e]:void 0},i.prototype.setDocument=function(e,t){this.documents[e]=t},i.prototype.setFunction=function(e,t){var n=e.match(Hr);n&&n[1]!=Ur&&(this.functions[e]=t)},i.prototype.getFunction=function(e){var t=e.match(Hr);return t?t[1]==Ur?zr[Ir.$2]:this.functions[e]:void 0},i.prototype.setCollation=function(e,t){this.collations[e]=t},i.prototype.getCollation=function(e){return this.collations[e]},i.prototype.setCollection=function(e,t){this.collections[e]=t},i.prototype.getURIForPrefix=function(t){var n,r=this.namespaceResolver,i=r&&r.lookupNamespaceURI?r.lookupNamespaceURI:r;if(i instanceof Ar&&(n=i.call(r,t)))return n;if("fn"==t)return Ur;if("xs"==t)return Br;if("xml"==t)return Qr;if("xmlns"==t)return Vr;throw new e("XPST0081","Prefix '"+t+"' has not been declared")},i.js2xs=function(e){return e="boolean"==typeof e?new $t(e):"number"==typeof e?Or(e)||!Rr(e)?new sn(e):ct(Cr(e)):new bn(Cr(e))},i.xs2js=function(e){return e=e instanceof $t?e.valueOf():Wt(e)?e.valueOf():e.toString()};var zr={},Wr={},qr={},Xr={};s.prototype.internalExpression=null,s.prototype.evaluate=function(e){return this.internalExpression.evaluate(e)},u.prototype.equals=function(){throw"Not implemented"},u.prototype.compare=function(){throw"Not implemented"},c.ANYSIMPLETYPE_DT=1,c.STRING_DT=2,c.BOOLEAN_DT=3,c.DECIMAL_DT=4,c.FLOAT_DT=5,c.DOUBLE_DT=6,c.DURATION_DT=7,c.DATETIME_DT=8,c.TIME_DT=9,c.DATE_DT=10,c.GYEARMONTH_DT=11,c.GYEAR_DT=12,c.GMONTHDAY_DT=13,c.GDAY_DT=14,c.GMONTH_DT=15,c.HEXBINARY_DT=16,c.BASE64BINARY_DT=17,c.ANYURI_DT=18,c.QNAME_DT=19,c.NOTATION_DT=20,c.NORMALIZEDSTRING_DT=21,c.TOKEN_DT=22,c.LANGUAGE_DT=23,c.NMTOKEN_DT=24,c.NAME_DT=25,c.NCNAME_DT=26,c.ID_DT=27,c.IDREF_DT=28,c.ENTITY_DT=29,c.INTEGER_DT=30,c.NONPOSITIVEINTEGER_DT=31,c.NEGATIVEINTEGER_DT=32,c.LONG_DT=33,c.INT_DT=34,c.SHORT_DT=35,c.BYTE_DT=36,c.NONNEGATIVEINTEGER_DT=37,c.UNSIGNEDLONG_DT=38,c.UNSIGNEDINT_DT=39,c.UNSIGNEDSHORT_DT=40,c.UNSIGNEDBYTE_DT=41,c.POSITIVEINTEGER_DT=42,c.LISTOFUNION_DT=43,c.LIST_DT=44,c.UNAVAILABLE_DT=45,c.DATETIMESTAMP_DT=46,c.DAYMONTHDURATION_DT=47,c.DAYTIMEDURATION_DT=48,c.PRECISIONDECIMAL_DT=49,c.ANYATOMICTYPE_DT=50,c.ANYTYPE_DT=51,c.XT_YEARMONTHDURATION_DT=-1,c.XT_UNTYPEDATOMIC_DT=-2,l.prototype.items=null,l.prototype.evaluate=function(e){for(var t=[],n=0,r=this.items.length;r>n;n++)t=Xr.concatenate.call(e,t,this.items[n].evaluate(e));return t},d.prototype.bindings=null,d.prototype.returnExpr=null,d.prototype.evaluate=function(e){var t=[];return function(n,r){for(var i=n.bindings[r++],o=i.inExpr.evaluate(e),a=(i.namespaceURI?"{"+i.namespaceURI+"}":"")+i.localName,s=0,u=o.length;u>s;s++)e.pushVariable(a,o[s]),r<n.bindings.length?arguments.callee(n,r):t=t.concat(n.returnExpr.evaluate(e)),e.popVariable(a)}(this,0),t},m.prototype.prefix=null,m.prototype.localName=null,m.prototype.namespaceURI=null,m.prototype.inExpr=null,v.prototype.condExpr=null,v.prototype.thenExpr=null,v.prototype.elseExpr=null,v.prototype.evaluate=function(e){return this[_r(this.condExpr.evaluate(e),e)?"thenExpr":"elseExpr"].evaluate(e)},_.prototype.bindings=null,_.prototype.quantifier=null,_.prototype.satisfiesExpr=null,_.prototype.evaluate=function(e){var t="every"==this.quantifier,n=t?!0:!1;return function(r,i){for(var o=r.bindings[i++],a=o.inExpr.evaluate(e),s=(o.namespaceURI?"{"+o.namespaceURI+"}":"")+o.localName,u=0,c=a.length;c>u&&(t?n:!n);u++)e.pushVariable(s,a[u]),i<r.bindings.length?arguments.callee(r,i):n=_r(r.satisfiesExpr.evaluate(e),e),e.popVariable(s)}(this,0),[new $t(n)]},b.prototype.prefix=null,b.prototype.localName=null,b.prototype.namespaceURI=null,b.prototype.inExpr=null,S.prototype.left=null,S.prototype.right=null,S.prototype.operator=null,S.prototype.evaluate=function(e){var t=Yr[this.operator](this,e);return null==t?[]:[t]};var $r={"=":"eq","!=":"ne",">":"gt","<":"lt",">=":"ge","<=":"le"},Jr={};Jr.eq=function(t,n,r){var i="";if(Wt(t))Wt(n)&&(i="numeric-equal");else if(t instanceof $t)n instanceof $t&&(i="boolean-equal");else if(t instanceof bn){if(n instanceof bn)return Xr["numeric-equal"].call(r,zr.compare.call(r,t,n),new Dn(0))}else t instanceof Jt?n instanceof Jt&&(i="date-equal"):t instanceof wn?n instanceof wn&&(i="time-equal"):t instanceof Zt?n instanceof Zt&&(i="dateTime-equal"):t instanceof un?n instanceof un&&(i="duration-equal"):t instanceof vn?n instanceof vn&&(i="gYearMonth-equal"):t instanceof gn?n instanceof gn&&(i="gYear-equal"):t instanceof mn?n instanceof mn&&(i="gMonthDay-equal"):t instanceof hn?n instanceof hn&&(i="gMonth-equal"):t instanceof dn?n instanceof dn&&(i="gDay-equal"):t instanceof xn?n instanceof xn&&(i="QName-equal"):t instanceof yn?n instanceof yn&&(i="hexBinary-equal"):t instanceof Xt&&n instanceof Xt&&(i="base64Binary-equal");if(i)return Xr[i].call(r,t,n);throw new e("XPTY0004","Cannot compare values of given types")},Jr.ne=function(e,t,n){return new $t(!Jr.eq(e,t,n).valueOf())},Jr.gt=function(t,n,r){var i="";if(Wt(t))Wt(n)&&(i="numeric-greater-than");else if(t instanceof $t)n instanceof $t&&(i="boolean-greater-than");else if(t instanceof bn){if(n instanceof bn)return Xr["numeric-greater-than"].call(r,zr.compare.call(r,t,n),new Dn(0))}else t instanceof Jt?n instanceof Jt&&(i="date-greater-than"):t instanceof wn?n instanceof wn&&(i="time-greater-than"):t instanceof Zt?n instanceof Zt&&(i="dateTime-greater-than"):t instanceof Cn?n instanceof Cn&&(i="yearMonthDuration-greater-than"):t instanceof Pn&&n instanceof Pn&&(i="dayTimeDuration-greater-than");if(i)return Xr[i].call(r,t,n);throw new e("XPTY0004","Cannot compare values of given types")},Jr.lt=function(t,n,r){var i="";if(Wt(t))Wt(n)&&(i="numeric-less-than");else if(t instanceof $t)n instanceof $t&&(i="boolean-less-than");else if(t instanceof bn){if(n instanceof bn)return Xr["numeric-less-than"].call(r,zr.compare.call(r,t,n),new Dn(0))}else t instanceof Jt?n instanceof Jt&&(i="date-less-than"):t instanceof wn?n instanceof wn&&(i="time-less-than"):t instanceof Zt?n instanceof Zt&&(i="dateTime-less-than"):t instanceof Cn?n instanceof Cn&&(i="yearMonthDuration-less-than"):t instanceof Pn&&n instanceof Pn&&(i="dayTimeDuration-less-than");if(i)return Xr[i].call(r,t,n);throw new e("XPTY0004","Cannot compare values of given types")},Jr.ge=function(t,n,r){var i="";if(Wt(t)){if(Wt(n))return Xr["numeric-greater-than"].call(r,t,n)||Xr["numeric-equal"].call(r,t,n)}else if(t instanceof $t)n instanceof $t&&(i="boolean-less-than");else if(t instanceof bn){if(n instanceof bn)return Xr["numeric-greater-than"].call(r,zr.compare.call(r,t,n),new Dn(-1))}else t instanceof Jt?n instanceof Jt&&(i="date-less-than"):t instanceof wn?n instanceof wn&&(i="time-less-than"):t instanceof Zt?n instanceof Zt&&(i="dateTime-less-than"):t instanceof Cn?n instanceof Cn&&(i="yearMonthDuration-less-than"):t instanceof Pn&&n instanceof Pn&&(i="dayTimeDuration-less-than");if(i)return new $t(!Xr[i].call(r,t,n).valueOf());throw new e("XPTY0004","Cannot compare values of given types")},Jr.le=function(t,n,r){var i="";if(Wt(t)){if(Wt(n))return Xr["numeric-less-than"].call(r,t,n)||Xr["numeric-equal"].call(r,t,n)}else if(t instanceof $t)n instanceof $t&&(i="boolean-greater-than");else if(t instanceof bn){if(n instanceof bn)return Xr["numeric-less-than"].call(r,zr.compare.call(r,t,n),new Dn(1))}else t instanceof Jt?n instanceof Jt&&(i="date-greater-than"):t instanceof wn?n instanceof wn&&(i="time-greater-than"):t instanceof Zt?n instanceof Zt&&(i="dateTime-greater-than"):t instanceof Cn?n instanceof Cn&&(i="yearMonthDuration-greater-than"):t instanceof Pn&&n instanceof Pn&&(i="dayTimeDuration-greater-than");if(i)return new $t(!Xr[i].call(r,t,n).valueOf());throw new e("XPTY0004","Cannot compare values of given types")};var Kr={};Kr.is=function(e,t,n){return Xr["is-same-node"].call(n,e,t)},Kr[">>"]=function(e,t,n){return Xr["node-after"].call(n,e,t)},Kr["<<"]=function(e,t,n){return Xr["node-before"].call(n,e,t)};var Yr={"=":C,"!=":C,"<":C,"<=":C,">":C,">=":C,eq:T,ne:T,lt:T,le:T,gt:T,ge:T,is:P,">>":P,"<<":P};I.prototype.left=null,I.prototype.items=null;var Zr={};Zr["+"]=function(t,n,r){var i="",o=!1;if(Wt(t)?Wt(n)&&(i="numeric-add"):t instanceof Jt?n instanceof Cn?i="add-yearMonthDuration-to-date":n instanceof Pn&&(i="add-dayTimeDuration-to-date"):t instanceof Cn?n instanceof Jt?(i="add-yearMonthDuration-to-date",o=!0):n instanceof Zt?(i="add-yearMonthDuration-to-dateTime",o=!0):n instanceof Cn&&(i="add-yearMonthDurations"):t instanceof Pn?n instanceof Jt?(i="add-dayTimeDuration-to-date",o=!0):n instanceof wn?(i="add-dayTimeDuration-to-time",o=!0):n instanceof Zt?(i="add-dayTimeDuration-to-dateTime",o=!0):n instanceof Pn&&(i="add-dayTimeDurations"):t instanceof wn?n instanceof Pn&&(i="add-dayTimeDuration-to-time"):t instanceof Zt&&(n instanceof Cn?i="add-yearMonthDuration-to-dateTime":n instanceof Pn&&(i="add-dayTimeDuration-to-dateTime")),i)return Xr[i].call(r,o?n:t,o?t:n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},Zr["-"]=function(t,n,r){var i="";if(Wt(t)?Wt(n)&&(i="numeric-subtract"):t instanceof Jt?n instanceof Jt?i="subtract-dates":n instanceof Cn?i="subtract-yearMonthDuration-from-date":n instanceof Pn&&(i="subtract-dayTimeDuration-from-date"):t instanceof wn?n instanceof wn?i="subtract-times":n instanceof Pn&&(i="subtract-dayTimeDuration-from-time"):t instanceof Zt?n instanceof Zt?i="subtract-dateTimes":n instanceof Cn?i="subtract-yearMonthDuration-from-dateTime":n instanceof Pn&&(i="subtract-dayTimeDuration-from-dateTime"):t instanceof Cn?n instanceof Cn&&(i="subtract-yearMonthDurations"):t instanceof Pn&&n instanceof Pn&&(i="subtract-dayTimeDurations"),i)return Xr[i].call(r,t,n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},I.prototype.evaluate=function(e){var t=xr(this.left.evaluate(e),e);if(!t.length)return[];xt(e,t,"?","first operand of '"+this.items[0][0]+"'");var n=t[0];n instanceof En&&(n=sn.cast(n));for(var r,i,o=0,a=this.items.length;a>o;o++){if(r=xr(this.items[o][1].evaluate(e),e),!r.length)return[];xt(e,r,"?","first operand of '"+this.items[o][0]+"'"),i=r[0],i instanceof En&&(i=sn.cast(i)),n=Zr[this.items[o][0]](n,i,e)}return[n]},A.prototype.left=null,A.prototype.items=null;var ei={};ei["*"]=function(t,n,r){var i="",o=!1;if(Wt(t)?Wt(n)?i="numeric-multiply":n instanceof Cn?(i="multiply-yearMonthDuration",o=!0):n instanceof Pn&&(i="multiply-dayTimeDuration",o=!0):t instanceof Cn?Wt(n)&&(i="multiply-yearMonthDuration"):t instanceof Pn&&Wt(n)&&(i="multiply-dayTimeDuration"),i)return Xr[i].call(r,o?n:t,o?t:n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},ei.div=function(t,n,r){var i="";if(Wt(t)?Wt(n)&&(i="numeric-divide"):t instanceof Cn?Wt(n)?i="divide-yearMonthDuration":n instanceof Cn&&(i="divide-yearMonthDuration-by-yearMonthDuration"):t instanceof Pn&&(Wt(n)?i="divide-dayTimeDuration":n instanceof Pn&&(i="divide-dayTimeDuration-by-dayTimeDuration")),i)return Xr[i].call(r,t,n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},ei.idiv=function(t,n,r){if(Wt(t)&&Wt(n))return Xr["numeric-integer-divide"].call(r,t,n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},ei.mod=function(t,n,r){if(Wt(t)&&Wt(n))return Xr["numeric-mod"].call(r,t,n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},A.prototype.evaluate=function(e){var t=xr(this.left.evaluate(e),e);if(!t.length)return[];xt(e,t,"?","first operand of '"+this.items[0][0]+"'");var n=t[0];n instanceof En&&(n=sn.cast(n));for(var r,i,o=0,a=this.items.length;a>o;o++){if(r=xr(this.items[o][1].evaluate(e),e),!r.length)return[];xt(e,r,"?","second operand of '"+this.items[o][0]+"'"),i=r[0],i instanceof En&&(i=sn.cast(i)),n=ei[this.items[o][0]](n,i,e)}return[n]},k.prototype.operator=null,k.prototype.expression=null;var ti={};ti["-"]=function(t,n){if(Wt(t))return Xr["numeric-unary-minus"].call(n,t);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},ti["+"]=function(t,n){if(Wt(t))return Xr["numeric-unary-plus"].call(n,t);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},k.prototype.evaluate=function(e){var t=xr(this.expression.evaluate(e),e);if(!t.length)return[];xt(e,t,"?","second operand of '"+this.operator+"'");var n=t[0];return n instanceof En&&(n=sn.cast(n)),[ti[this.operator](n,e)]},j.prototype.left=null,j.prototype.items=null,j.prototype.evaluate=function(e){for(var t=_r(this.left.evaluate(e),e),n=0,r=this.items.length;r>n&&!t;n++)t=_r(this.items[n].evaluate(e),e);return[new $t(t)]},L.prototype.left=null,L.prototype.items=null,L.prototype.evaluate=function(e){for(var t=_r(this.left.evaluate(e),e),n=0,r=this.items.length;r>n&&t;n++)t=_r(this.items[n].evaluate(e),e);return[new $t(t)]},B.prototype.predicates=null,B.prototype.applyPredicates=function(e,t){for(var n,r=t.item,i=t.position,o=t.size,a=0,s=this.predicates.length;s>a;a++){n=e,e=[];for(var u,c=0,l=n.length;l>c;c++)t.item=n[c],t.position=c+1,t.size=l,u=this.predicates[a].evaluate(t),1==u.length&&Wt(u[0])?u[0].valueOf()==c+1&&e.push(n[c]):_r(u,t)&&e.push(n[c])}return t.item=r,t.position=i,t.size=o,e},Q.prototype=new B,Q.prototype.axis=null,Q.prototype.test=null;var ni={};ni.attribute={},ni.child={},ni.descendant={},ni["descendant-or-self"]={},ni.following={},ni["following-sibling"]={},ni.self={},ni.ancestor={},ni["ancestor-or-self"]={},ni.parent={},ni.preceding={},ni["preceding-sibling"]={},Q.prototype.evaluate=function(t){var n=t.item;if(!t.DOMAdapter.isNode(n))throw new e("XPTY0020");var r=[],i=t.DOMAdapter.getProperty,o=i(n,"nodeType");switch(this.axis){case"attribute":if(1==o)for(var a=i(n,"attributes"),s=0,u=a.length;u>s;s++)r.push(a[s]);break;case"child":for(var c=i(n,"firstChild");c;c=i(c,"nextSibling"))r.push(c);break;case"descendant-or-self":r.push(n);case"descendant":H(i(n,"firstChild"),r,i);break;case"following":for(var l,p=n;p;p=i(p,"parentNode"))(l=i(p,"nextSibling"))&&H(l,r,i);break;case"following-sibling":for(var c=n;c=i(c,"nextSibling");)r.push(c);break;case"self":r.push(n);break;case"ancestor-or-self":r.push(n);case"ancestor":for(var c=2==o?i(n,"ownerElement"):n;c=i(c,"parentNode");)r.push(c);break;case"parent":var p=2==o?i(n,"ownerElement"):i(n,"parentNode");p&&r.push(p);break;case"preceding":for(var l,p=n;p;p=i(p,"parentNode"))(l=i(p,"previousSibling"))&&z(l,r,i);break;case"preceding-sibling":for(var c=n;c=i(c,"previousSibling");)r.push(c)}if(r.length&&!(this.test instanceof J&&"node"==this.test.name)){var f=r;r=[];for(var s=0,u=f.length;u>s;s++)this.test.test(f[s],t)&&r.push(f[s])}switch(r.length&&this.predicates.length&&(r=this.applyPredicates(r,t)),this.axis){case"ancestor":case"ancestor-or-self":case"parent":case"preceding":case"preceding-sibling":r.reverse()}return r},W.prototype.items=null,W.prototype.evaluate=function(t){for(var n,r=t.item,i=[r],o=0,a=this.items.length;a>o;o++){n=[];for(var s=0,u=i.length;u>s;s++){t.item=i[s];for(var c=0,l=this.items[o].evaluate(t),p=l.length;p>c;c++){if(a-1>o&&!t.DOMAdapter.isNode(l[c]))throw new e("XPTY0019");-1==Mr(n,l[c])&&n.push(l[c])}}i=n}return t.item=r,br(i,t)},J.prototype=new X,J.prototype.name=null,J.prototype.args=null;var ri={};ri["document-node"]={},ri.element={},ri.attribute={},ri["processing-instruction"]={},ri.comment={},ri.text={},ri.node={},ri["schema-element"]={},ri["schema-attribute"]={},J.prototype.test=function(e,t){var n=t.DOMAdapter.getProperty,r=t.DOMAdapter.isNode(e)?n(e,"nodeType"):0;switch(this.name){case"node":return!!r;case"attribute":if(2!=r)return!1;break;case"document-node":return 9==r;case"element":return 1==r;case"processing-instruction":if(7!=r)return!1;break;case"comment":return 8==r;case"text":return 3==r||4==r;case"schema-attribute":throw"KindTest 'schema-attribute' not implemented";case"schema-element":throw"KindTest 'schema-element' not implemented"}return 2==r?"xmlns"!=n(e,"prefix")&&"xmlns"!=n(e,"localName"):7==r?"xml"!=n(e,"target"):!0},Y.prototype=new X,Y.prototype.prefix=null,Y.prototype.localName=null,Y.prototype.namespaceURI=null;var ii=/^(?:(?![0-9-])([\w-]+|\*)\:)?(?![0-9-])([\w-]+|\*)$/;Y.prototype.test=function(e,t){var n=t.DOMAdapter.getProperty,r=n(e,"nodeType");if(1==r||2==r){if("*"==this.localName)return(1==r||"xmlns"!=n(e,"prefix")&&"xmlns"!=n(e,"localName"))&&(!this.prefix||n(e,"namespaceURI")==this.namespaceURI);if(this.localName==n(e,"localName"))return"*"==this.namespaceURI||2==r&&!this.prefix&&!n(e,"prefix")||n(e,"namespaceURI")==this.namespaceURI}return!1},tt.prototype.evaluate=function(e){return this.expression?this.expression.evaluate(e):[]},rt.prototype.evaluate=function(t){if(null==t.item)throw new e("XPDY0002","Dynamic context does not have context item initialized");return[t.item]},ot.prototype.value=null,ot.prototype.evaluate=function(){return[this.value]},st.prototype=new ot;var oi=/^[+\-]?(?:(?:(\d+)(?:\.(\d*))?)|(?:\.(\d+)))(?:[eE]([+-])?(\d+))?$/;lt.prototype=new ot;var ai=/^'([^']*(?:''[^']*)*)'|"([^"]*(?:""[^"]*)*)"$/;ft.prototype=new B,ft.prototype.expression=null,ft.prototype.evaluate=function(e){var t=this.expression.evaluate(e);return this.predicates.length&&t.length&&(t=this.applyPredicates(t,e)),t},ht.prototype.prefix=null,ht.prototype.localName=null,ht.prototype.namespaceURI=null,ht.prototype.evaluate=function(t){var n=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName;if(t.scope.hasOwnProperty(n))return[t.scope[n]];throw new e("XPST0008","Variable $"+(this.prefix?this.prefix+":":"")+this.localName+" has not been declared")},gt.prototype.prefix=null,gt.prototype.localName=null,gt.prototype.namespaceURI=null,gt.prototype.args=null,gt.prototype.evaluate=function(t){for(var n,r,i=[],o=0,a=this.args.length;a>o;o++)i.push(this.args[o].evaluate(t));var s=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName;if(this.namespaceURI==Ur){if(r=zr[this.localName]){(n=Wr[this.localName])&&yt(this.localName,n,r,i,t);var u=r.apply(t,i);return null==u?[]:u instanceof Pr?u:[u]}throw new e("XPST0017","Unknown system function: "+s+"()")}if(this.namespaceURI==Br){if((r=qr[this.localName])&&"NOTATION"!=this.localName&&"anyAtomicType"!=this.localName)return yt(this.localName,[[zt]],r,i,t),[r.cast(i[0])];throw new e("XPST0017","Unknown type constructor function: "+s+"()")}if(r=t.staticContext.getFunction(s)){var u=r.apply(t,i);return null==u?[]:u instanceof Pr?u:[u]}throw new e("XPST0017","Unknown user function: "+s+"()")};var si=["first","second","third","fourth","fifth"];bt.prototype.left=null,bt.prototype.items=null,bt.prototype.evaluate=function(e){for(var t,n=this.left.evaluate(e),r=0,i=this.items.length;i>r;r++)n=Xr[(t=this.items[r])[0]].call(e,n,t[1].evaluate(e));return n},St.prototype.left=null,St.prototype.right=null,St.prototype.evaluate=function(e){var t=this.left.evaluate(e);if(!t.length)return[];var n="first operand of 'to'";xt(e,t,"?",n),_t(e,t,Dn,n);var r=this.right.evaluate(e);return r.length?(n="second operand of 'to'",xt(e,r,"?",n),_t(e,r,Dn,n),Xr.to.call(e,t[0],r[0])):[]},Ct.prototype.left=null,Ct.prototype.items=null,Ct.prototype.evaluate=function(e){for(var t=this.left.evaluate(e),n=0,r=this.items.length;r>n;n++)t=Xr.union.call(e,t,this.items[n].evaluate(e));return t},Pt.prototype.expression=null,Pt.prototype.type=null,Pt.prototype.evaluate=function(e){var t=this.expression.evaluate(e),n=this.type.itemType,r=this.type.occurence;if(!n)return[new $t(!t.length)];if(!t.length)return[new $t("?"==r||"*"==r)];if(1!=t.length&&"+"!=r&&"*"!=r)return[new $t(!1)];if(!n.test)return[new $t(!0)];for(var i=!0,o=0,a=t.length;a>o&&i;o++)i=n.test.test(t[o],e);return[new $t(i)]},Dt.prototype.expression=null,Dt.prototype.type=null,Dt.prototype.evaluate=function(t){var n=this.expression.evaluate(t),r=this.type.itemType,i=this.type.occurence;if(!r){if(n.length)throw new e("XPDY0050","The only value allowed for the value in 'treat as' expression is an empty sequence");return n}if("?"!=i&&"*"!=i&&!n.length)throw new e("XPDY0050","An empty sequence is not allowed as the value in 'treat as' expression");if("+"!=i&&"*"!=i&&1!=n.length)throw new e("XPDY0050","A sequence of more than one item is not allowed as the value in 'treat as' expression");if(!r.test)return n;for(var o=0,a=n.length;a>o;o++)if(!r.test.test(n[o],t))throw new e("XPDY0050","Required item type of value in 'treat as' expression is "+(r.test.prefix?r.test.prefix+":":"")+r.test.localName);return n},Nt.prototype.expression=null,Nt.prototype.type=null,Nt.prototype.evaluate=function(t){var n=this.expression.evaluate(t),r=this.type.itemType,i=this.type.occurence;if(n.length>1)return[new $t(!1)];if(!n.length)return[new $t("?"==i)];try{r.cast(xr(n,t)[0])}catch(o){if("XPST0051"==o.code)throw o;if("XPST0017"==o.code)throw new e("XPST0080","No value is castable to "+(r.prefix?r.prefix+":":"")+r.localName);
return[new $t(!1)]}return[new $t(!0)]},Ot.prototype.expression=null,Ot.prototype.type=null,Ot.prototype.evaluate=function(e){var t=this.expression.evaluate(e);return xt(e,t,this.type.occurence,"'cast as' expression operand"),t.length?[this.type.itemType.cast(xr(t,e)[0],e)]:[]},jt.prototype.prefix=null,jt.prototype.localName=null,jt.prototype.namespaceURI=null,jt.prototype.test=function(t,n){var r=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName,i=this.namespaceURI==Br?qr[this.localName]:n.staticContext.getDataType(r);if(i)return t instanceof i;throw new e("XPST0051","Unknown simple type "+(this.prefix?this.prefix+":":"")+this.localName)},jt.prototype.cast=function(t,n){var r=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName,i=this.namespaceURI==Br?qr[this.localName]:n.staticContext.getDataType(r);if(i)return i.cast(t);throw new e("XPST0051","Unknown atomic type "+(this.prefix?this.prefix+":":"")+this.localName)},Lt.prototype.test=null,Bt.prototype.itemType=null,Bt.prototype.occurence=null,Vt.prototype.itemType=null,Vt.prototype.occurence=null,Ht.prototype.builtInKind=c.ANYTYPE_DT,Ht.prototype=new Gt,Ht.prototype.builtInKind=c.ANYSIMPLETYPE_DT,Ht.prototype.primitiveKind=null,Ht.PRIMITIVE_ANYURI="anyURI",Ht.PRIMITIVE_BASE64BINARY="base64Binary",Ht.PRIMITIVE_BOOLEAN="boolean",Ht.PRIMITIVE_DATE="date",Ht.PRIMITIVE_DATETIME="dateTime",Ht.PRIMITIVE_DECIMAL="decimal",Ht.PRIMITIVE_DOUBLE="double",Ht.PRIMITIVE_DURATION="duration",Ht.PRIMITIVE_FLOAT="float",Ht.PRIMITIVE_GDAY="gDay",Ht.PRIMITIVE_GMONTH="gMonth",Ht.PRIMITIVE_GMONTHDAY="gMonthDay",Ht.PRIMITIVE_GYEAR="gYear",Ht.PRIMITIVE_GYEARMONTH="gYearMonth",Ht.PRIMITIVE_HEXBINARY="hexBinary",Ht.PRIMITIVE_NOTATION="NOTATION",Ht.PRIMITIVE_QNAME="QName",Ht.PRIMITIVE_STRING="string",Ht.PRIMITIVE_TIME="time",zt.prototype=new Ht,zt.prototype.builtInKind=c.ANYATOMICTYPE_DT,zt.cast=function(){throw new e("XPST0017","Abstract type used in constructor function xs:anyAtomicType")},a("anyAtomicType",zt),qt.prototype=new zt,qt.prototype.builtInKind=c.ANYURI_DT,qt.prototype.primitiveKind=Ht.PRIMITIVE_ANYURI,qt.prototype.scheme=null,qt.prototype.authority=null,qt.prototype.path=null,qt.prototype.query=null,qt.prototype.fragment=null,qt.prototype.toString=function(){return(this.scheme?this.scheme+":":"")+(this.authority?"//"+this.authority:"")+(this.path?this.path:"")+(this.query?"?"+this.query:"")+(this.fragment?"#"+this.fragment:"")};var ui=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;qt.cast=function(t){if(t instanceof qt)return t;if(t instanceof bn||t instanceof En){var n;if(n=Lr(t).match(ui))return new qt(n[2],n[4],n[5],n[7],n[9]);throw new e("FORG0001")}throw new e("XPTY0004","Casting value '"+t+"' to xs:anyURI can never succeed")},a("anyURI",qt),Xt.prototype=new zt,Xt.prototype.builtInKind=c.BASE64BINARY_DT,Xt.prototype.primitiveKind=Ht.PRIMITIVE_BASE64BINARY,Xt.prototype.value=null,Xt.prototype.valueOf=function(){return this.value},Xt.prototype.toString=function(){return this.value};var ci=/^((([A-Za-z0-9+\/]\s*){4})*(([A-Za-z0-9+\/]\s*){3}[A-Za-z0-9+\/]|([A-Za-z0-9+\/]\s*){2}[AEIMQUYcgkosw048]\s*=|[A-Za-z0-9+\/]\s*[AQgw]\s*=\s*=))?$/;Xt.cast=function(t){if(t instanceof Xt)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(ci);if(n)return new Xt(n[0]);throw new e("FORG0001")}if(t instanceof yn)throw"Casting from 'xs:hexBinary' to 'xs:base64Binary' not implemented";throw new e("XPTY0004","Casting value '"+t+"' to xs:hexBinary can never succeed")},a("base64Binary",Xt),$t.prototype=new zt,$t.prototype.builtInKind=c.BOOLEAN_DT,$t.prototype.primitiveKind=Ht.PRIMITIVE_BOOLEAN,$t.prototype.value=null,$t.prototype.valueOf=function(){return this.value},$t.prototype.toString=function(){return Cr(this.value)};var li=/^(0|1|true|false)$/;$t.cast=function(t){if(t instanceof $t)return t;if(t instanceof bn||t instanceof En){var n;if(n=Lr(t).match(li))return new $t("1"==n[1]||"true"==n[1]);throw new e("FORG0001")}if(Wt(t))return new $t(0!=t);throw new e("XPTY0004","Casting value '"+t+"' to xs:boolean can never succeed")},a("boolean",$t),Jt.prototype=new zt,Jt.prototype.builtInKind=c.DATE_DT,Jt.prototype.primitiveKind=Ht.PRIMITIVE_DATE,Jt.prototype.year=null,Jt.prototype.month=null,Jt.prototype.day=null,Jt.prototype.timezone=null,Jt.prototype.negative=null,Jt.prototype.toString=function(){return nn(this)+tn(this)};var pi=/^(-?)([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;Jt.cast=function(t){if(t instanceof Jt)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(pi);if(n){var r=+n[2],i=+n[3],o=+n[4];if(o-1<Kt(r,i))return new Jt(r,i,o,n[5]?"Z"==n[5]?0:("-"==n[6]?-1:1)*(60*n[7]+1*n[8]):null,"-"==n[1]);throw new e("FORG0001","Invalid date '"+t+"' (Non-existent date)")}throw new e("FORG0001")}if(t instanceof Zt)return new Jt(t.year,t.month,t.day,t.timezone,t.negative);throw new e("XPTY0004","Casting value '"+t+"' to xs:date can never succeed")};var fi=[31,28,31,30,31,30,31,31,30,31,30,31];a("date",Jt),Zt.prototype=new zt,Zt.prototype.builtInKind=c.DATETIME_DT,Zt.prototype.primitiveKind=Ht.PRIMITIVE_DATETIME,Zt.prototype.year=null,Zt.prototype.month=null,Zt.prototype.day=null,Zt.prototype.hours=null,Zt.prototype.minutes=null,Zt.prototype.seconds=null,Zt.prototype.timezone=null,Zt.prototype.negative=null,Zt.prototype.toString=function(){return nn(this)+"T"+rn(this)+tn(this)};var di=/^(-?)([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])T(([01]\d|2[0-3]):([0-5]\d):([0-5]\d)(?:\.(\d+))?|(24:00:00)(?:\.(0+))?)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;Zt.cast=function(t){if(t instanceof Zt)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(di);if(n){var r=+n[2],i=+n[3],o=+n[4],a=!!n[10];if(o-1<Kt(r,i))return on(new Zt(r,i,o,a?24:+n[6],a?0:+n[7],Tr((a?0:n[8])+"."+(a?0:n[9]||0)),n[12]?"Z"==n[12]?0:("-"==n[13]?-1:1)*(60*n[14]+1*n[15]):null,"-"==n[1]));throw new e("FORG0001","Invalid date '"+t+"' (Non-existent date)")}throw new e("FORG0001")}if(t instanceof Jt)return new Zt(t.year,t.month,t.day,0,0,0,t.timezone,t.negative);throw new e("XPTY0004","Casting value '"+t+"' to xs:dateTime can never succeed")},a("dateTime",Zt),an.prototype=new zt,an.prototype.builtInKind=c.DECIMAL_DT,an.prototype.primitiveKind=Ht.PRIMITIVE_DECIMAL,an.prototype.value=null,an.prototype.valueOf=function(){return this.value},an.prototype.toString=function(){return Cr(this.value)};var hi=/^[+\-]?((\d+(\.\d*)?)|(\.\d+))$/;an.cast=function(t){if(t instanceof an)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(hi);if(n)return new an(+t);throw new e("FORG0001")}if(t instanceof $t)return new an(1*t);if(Wt(t)){if(Or(t)||!Rr(t))throw new e("FOCA0002","Cannot convert '"+t+"' to xs:decimal");return new an(+t)}throw new e("XPTY0004","Casting value '"+t+"' to xs:decimal can never succeed")},a("decimal",an),sn.prototype=new zt,sn.prototype.builtInKind=c.DOUBLE_DT,sn.prototype.primitiveKind=Ht.PRIMITIVE_DOUBLE,sn.prototype.value=null,sn.prototype.valueOf=function(){return this.value},sn.prototype.toString=function(){return Cr(this.value)};var mi=/^([+\-]?((\d+(\.\d*)?)|(\.\d+))([eE][+\-]?\d+)?|(-?INF)|NaN)$/;sn.cast=function(t){if(t instanceof sn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(mi);if(n)return new sn(n[7]?+n[7].replace("INF","Infinity"):+t);throw new e("FORG0001")}if(t instanceof $t)return new sn(1*t);if(Wt(t))return new sn(t.value);throw new e("XPTY0004","Casting value '"+t+"' to xs:double can never succeed")},a("double",sn),un.prototype=new zt,un.prototype.builtInKind=c.DURATION_DT,un.prototype.primitiveKind=Ht.PRIMITIVE_DURATION,un.prototype.year=null,un.prototype.month=null,un.prototype.day=null,un.prototype.hours=null,un.prototype.minutes=null,un.prototype.seconds=null,un.prototype.negative=null,un.prototype.toString=function(){return(this.negative?"-":"")+"P"+(cn(this)+ln(this)||"T0S")};var gi=/^(-)?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:((?:(?:[0-9]+(?:.[0-9]*)?)|(?:.[0-9]+)))S)?)?$/;un.cast=function(t){if(t instanceof Cn)return new un(t.year,t.month,0,0,0,0,t.negative);if(t instanceof Pn)return new un(0,0,t.day,t.hours,t.minutes,t.seconds,t.negative);if(t instanceof un)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(gi);if(n)return pn(new un(+n[2]||0,+n[3]||0,+n[4]||0,+n[5]||0,+n[6]||0,+n[7]||0,"-"==n[1]));throw new e("FORG0001")}throw new e("XPTY0004","Casting value '"+t+"' to xs:duration can never succeed")},a("duration",un),fn.prototype=new zt,fn.prototype.builtInKind=c.FLOAT_DT,fn.prototype.primitiveKind=Ht.PRIMITIVE_FLOAT,fn.prototype.value=null,fn.prototype.valueOf=function(){return this.value},fn.prototype.toString=function(){return Cr(this.value)};var vi=/^([+\-]?((\d+(\.\d*)?)|(\.\d+))([eE][+\-]?\d+)?|(-?INF)|NaN)$/;fn.cast=function(t){if(t instanceof fn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(vi);if(n)return new fn(n[7]?+n[7].replace("INF","Infinity"):+t);throw new e("FORG0001")}if(t instanceof $t)return new fn(1*t);if(Wt(t))return new fn(t.value);throw new e("XPTY0004","Casting value '"+t+"' to xs:float can never succeed")},a("float",fn),dn.prototype=new zt,dn.prototype.builtInKind=c.GDAY_DT,dn.prototype.primitiveKind=Ht.PRIMITIVE_GDAY,dn.prototype.day=null,dn.prototype.timezone=null,dn.prototype.toString=function(){return"---"+en(this.day)+tn(this)};var yi=/^---(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;dn.cast=function(t){if(t instanceof dn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(yi);if(n){var r=+n[1];return new dn(r,n[2]?"Z"==n[2]?0:("-"==n[3]?-1:1)*(60*n[4]+1*n[5]):null)}throw new e("FORG0001")}if(t instanceof Jt||t instanceof Zt)return new dn(t.day,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:gDay can never succeed")},a("gDay",dn),hn.prototype=new zt,hn.prototype.builtInKind=c.GMONTH_DT,hn.prototype.primitiveKind=Ht.PRIMITIVE_GMONTH,hn.prototype.month=null,hn.prototype.timezone=null,hn.prototype.toString=function(){return"--"+en(this.month)+tn(this)};var _i=/^--(0[1-9]|1[0-2])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;hn.cast=function(t){if(t instanceof hn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(_i);if(n){var r=+n[1];return new hn(r,n[2]?"Z"==n[2]?0:("-"==n[3]?-1:1)*(60*n[4]+1*n[5]):null)}throw new e("FORG0001")}if(t instanceof Jt||t instanceof Zt)return new hn(t.month,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:gMonth can never succeed")},a("gMonth",hn),mn.prototype=new zt,mn.prototype.builtInKind=c.GMONTHDAY_DT,mn.prototype.primitiveKind=Ht.PRIMITIVE_GMONTHDAY,mn.prototype.month=null,mn.prototype.day=null,mn.prototype.timezone=null,mn.prototype.toString=function(){return"--"+en(this.month)+"-"+en(this.day)+tn(this)};var xi=/^--(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;mn.cast=function(t){if(t instanceof mn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(xi);if(n){var r=+n[1],i=+n[2];if(i-1<Kt(1976,r))return new mn(r,i,n[3]?"Z"==n[3]?0:("-"==n[4]?-1:1)*(60*n[5]+1*n[6]):null);throw new e("FORG0001","Invalid date '"+t+"' (Non-existent date)")}throw new e("FORG0001")}if(t instanceof Jt||t instanceof Zt)return new mn(t.month,t.day,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:gMonthDay can never succeed")},a("gMonthDay",mn),gn.prototype=new zt,gn.prototype.builtInKind=c.GYEAR_DT,gn.prototype.primitiveKind=Ht.PRIMITIVE_GYEAR,gn.prototype.year=null,gn.prototype.timezone=null,gn.prototype.toString=function(){return en(this.year)+tn(this)};var bi=/^-?([1-9]\d\d\d+|0\d\d\d)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;gn.cast=function(t){if(t instanceof gn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(bi);if(n){var r=+n[1];return new gn(r,n[2]?"Z"==n[2]?0:("-"==n[3]?-1:1)*(60*n[4]+1*n[5]):null)}throw new e("FORG0001")}if(t instanceof Jt||t instanceof Zt)return new gn(t.year,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:gYear can never succeed")},a("gYear",gn),vn.prototype=new zt,vn.prototype.builtInKind=c.GYEARMONTH_DT,vn.prototype.primitiveKind=Ht.PRIMITIVE_GYEARMONTH,vn.prototype.year=null,vn.prototype.month=null,vn.prototype.timezone=null,vn.prototype.toString=function(){return en(this.year)+"-"+en(this.month)+tn(this)};var wi=/^-?([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;vn.cast=function(t){if(t instanceof vn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(wi);if(n){var r=+n[1],i=+n[2];return new vn(r,i,n[3]?"Z"==n[3]?0:("-"==n[4]?-1:1)*(60*n[5]+1*n[6]):null)}throw new e("FORG0001")}if(t instanceof Jt||t instanceof Zt)return new vn(t.year,t.month,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:gYearMonth can never succeed")},a("gYearMonth",vn),yn.prototype=new zt,yn.prototype.builtInKind=c.HEXBINARY_DT,yn.prototype.primitiveKind=Ht.PRIMITIVE_HEXBINARY,yn.prototype.value=null,yn.prototype.valueOf=function(){return this.value},yn.prototype.toString=function(){return this.value};var Si=/^([0-9a-fA-F]{2})*$/;yn.cast=function(t){if(t instanceof yn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(Si);if(n)return new yn(n[0].toUpperCase());throw new e("FORG0001")}if(t instanceof Xt)throw"Casting from 'xs:base64Binary' to 'xs:hexBinary' not implemented";throw new e("XPTY0004","Casting value '"+t+"' to xs:hexBinary can never succeed")},a("hexBinary",yn),_n.prototype=new zt,_n.prototype.builtInKind=c.NOTATION_DT,_n.prototype.primitiveKind=Ht.PRIMITIVE_NOTATION,_n.cast=function(){throw new e("XPST0017","Abstract type used in constructor function xs:NOTATION")},a("NOTATION",_n),xn.prototype=new zt,xn.prototype.builtInKind=c.QNAME_DT,xn.prototype.primitiveKind=Ht.PRIMITIVE_QNAME,xn.prototype.prefix=null,xn.prototype.localName=null,xn.prototype.namespaceURI=null,xn.prototype.toString=function(){return(this.prefix?this.prefix+":":"")+this.localName};var Ei=/^(?:(?![0-9-])([\w-]+)\:)?(?![0-9-])([\w-]+)$/;xn.cast=function(t){if(t instanceof xn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(Ei);if(n)return new xn(n[1]||null,n[2],null);throw new e("FORG0001")}throw new e("XPTY0004","Casting value '"+t+"' to xs:QName can never succeed")},a("QName",xn),bn.prototype=new zt,bn.prototype.value=null,bn.prototype.builtInKind=c.STRING_DT,bn.prototype.primitiveKind=Ht.PRIMITIVE_STRING,bn.prototype.valueOf=function(){return this.value},bn.prototype.toString=function(){return this.value},bn.cast=function(e){return new bn(Cr(e))},a("string",bn),wn.prototype=new zt,wn.prototype.builtInKind=c.TIME_DT,wn.prototype.primitiveKind=Ht.PRIMITIVE_TIME,wn.prototype.hours=null,wn.prototype.minutes=null,wn.prototype.seconds=null,wn.prototype.timezone=null,wn.prototype.toString=function(){return rn(this)+tn(this)};var Ci=/^(([01]\d|2[0-3]):([0-5]\d):([0-5]\d)(?:\.(\d+))?|(24:00:00)(?:\.(0+))?)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;wn.cast=function(t){if(t instanceof wn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(Ci);if(n){var r=!!n[6];return new wn(r?0:+n[2],r?0:+n[3],Tr((r?0:n[4])+"."+(r?0:n[5]||0)),n[8]?"Z"==n[8]?0:("-"==n[9]?-1:1)*(60*n[10]+1*n[11]):null)}throw new e("FORG0001")}if(t instanceof Zt)return new wn(t.hours,t.minutes,t.seconds,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:time can never succeed")},a("time",wn),En.prototype=new zt,En.prototype.builtInKind=c.XT_UNTYPEDATOMIC_DT,En.prototype.toString=function(){return Cr(this.value)},En.cast=function(e){return e instanceof En?e:new En(Cr(e))},a("untypedAtomic",En),Cn.prototype=new un,Cn.prototype.builtInKind=c.XT_YEARMONTHDURATION_DT,Cn.prototype.toString=function(){return(this.negative?"-":"")+"P"+(cn(this)||"0M")};var Ti=/^(-)?P(?:([0-9]+)Y)?(?:([0-9]+)M)?$/;Cn.cast=function(t){if(t instanceof Cn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(Ti);if(n)return Tn(new Cn(+n[2]||0,+n[3]||0,"-"==n[1]));throw new e("FORG0001")}if(t instanceof Pn)return new Cn(0,0);if(t instanceof un)return new Cn(t.year,t.month,t.negative);throw new e("XPTY0004","Casting value '"+t+"' to xs:yearMonthDuration can never succeed")},a("yearMonthDuration",Cn),Pn.prototype=new un,Pn.prototype.builtInKind=c.DAYTIMEDURATION_DT,Pn.prototype.toString=function(){return(this.negative?"-":"")+"P"+(ln(this)||"T0S")};var Pi=/^(-)?P(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:((?:(?:[0-9]+(?:.[0-9]*)?)|(?:.[0-9]+)))S)?)?$/;Pn.cast=function(t){if(t instanceof Pn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(Pi);if(n)return In(new Pn(+n[2]||0,+n[3]||0,+n[4]||0,+n[5]||0,"-"==n[1]));throw new e("FORG0001")}if(t instanceof Cn)return new Pn(0,0,0,0);if(t instanceof un)return new Pn(t.day,t.hours,t.minutes,t.seconds,t.negative);throw new e("XPTY0004","Casting value '"+t+"' to xs:dayTimeDuration can never succeed")},a("dayTimeDuration",Pn),Dn.prototype=new an,Dn.prototype.builtInKind=c.INTEGER_DT;var Ii=/^[-+]?[0-9]+$/;Dn.cast=function(t){if(t instanceof Dn)return t;if(t instanceof bn||t instanceof En){var n=Lr(t).match(Ii);if(n)return new Dn(~~t);throw new e("FORG0001")}if(t instanceof $t)return new Dn(1*t);if(Wt(t)){if(Or(t)||!Rr(t))throw new e("FOCA0002","Cannot convert '"+t+"' to xs:integer");return new Dn(~~t)}throw new e("XPTY0004","Casting value '"+t+"' to xs:integer can never succeed")},a("integer",Dn),An.prototype=new Dn,An.prototype.builtInKind=c.NONPOSITIVEINTEGER_DT,An.cast=function(e){return new An(Tr(e))},a("nonPositiveInteger",An),Nn.prototype=new An,Nn.prototype.builtInKind=c.NEGATIVEINTEGER_DT,Nn.cast=function(e){return new Nn(Tr(e))},a("negativeInteger",Nn),kn.prototype=new Dn,kn.prototype.builtInKind=c.LONG_DT,kn.cast=function(e){return new kn(Tr(e))},a("long",kn),On.prototype=new kn,On.prototype.builtInKind=c.INT_DT,On.cast=function(e){return new On(Tr(e))},a("int",On),Rn.prototype=new On,Rn.prototype.builtInKind=c.SHORT_DT,Rn.cast=function(e){return new Rn(Tr(e))},a("short",Rn),jn.prototype=new Rn,jn.prototype.builtInKind=c.BYTE_DT,jn.cast=function(e){return new jn(Tr(e))},a("byte",jn),Fn.prototype=new Dn,Fn.prototype.builtInKind=c.NONNEGATIVEINTEGER_DT,Fn.cast=function(e){return new Fn(Tr(e))},a("nonNegativeInteger",Fn),Ln.prototype=new Fn,Ln.prototype.builtInKind=c.POSITIVEINTEGER_DT,Ln.cast=function(e){return new Ln(Tr(e))},a("positiveInteger",Ln),Mn.prototype=new Fn,Mn.prototype.builtInKind=c.UNSIGNEDLONG_DT,Mn.cast=function(e){return new Mn(Tr(e))},a("unsignedLong",Mn),Bn.prototype=new Fn,Bn.prototype.builtInKind=c.UNSIGNEDINT_DT,Bn.cast=function(e){return new Bn(Tr(e))},a("unsignedInt",Bn),Un.prototype=new Bn,Un.prototype.builtInKind=c.UNSIGNEDSHORT_DT,Un.cast=function(e){return new Un(Tr(e))},a("unsignedShort",Un),Vn.prototype=new Un,Vn.prototype.builtInKind=c.UNSIGNEDBYTE_DT,Vn.cast=function(e){return new Vn(Tr(e))},a("unsignedByte",Vn),Qn.prototype=new bn,Qn.prototype.builtInKind=c.NORMALIZEDSTRING_DT,Qn.cast=function(e){return new Qn(Cr(e))},a("normalizedString",Qn),Gn.prototype=new Qn,Gn.prototype.builtInKind=c.TOKEN_DT,Gn.cast=function(e){return new Gn(Cr(e))},a("token",Gn),Hn.prototype=new Gn,Hn.prototype.builtInKind=c.NAME_DT,Hn.cast=function(e){return new Hn(Cr(e))},a("Name",Hn),zn.prototype=new Hn,zn.prototype.builtInKind=c.NCNAME_DT,zn.cast=function(e){return new zn(Cr(e))},a("NCName",zn),Wn.prototype=new zn,Wn.prototype.builtInKind=c.ENTITY_DT,Wn.cast=function(e){return new Wn(Cr(e))},a("ENTITY",Wn),qn.prototype=new zn,qn.prototype.builtInKind=c.ID_DT,qn.cast=function(e){return new qn(Cr(e))},a("ID",qn),Xn.prototype=new Gn,Xn.prototype.builtInKind=c.LANGUAGE_DT,Xn.cast=function(e){return new Xn(Cr(e))},a("language",Xn),$n.prototype=new Gn,$n.prototype.builtInKind=c.NMTOKEN_DT,$n.cast=function(e){return new $n(Cr(e))},a("NMTOKEN",$n),Kn.prototype=new Jn,Yn.prototype=new Kn,Zn.prototype=new Kn,er.prototype=new Kn,tr.prototype=new Kn,nr.prototype=new Kn,rr.prototype=new Kn,Xr["hexBinary-equal"]=function(e,t){return new $t(e.valueOf()==t.valueOf())},Xr["base64Binary-equal"]=function(e,t){return new $t(e.valueOf()==t.valueOf())},Xr["boolean-equal"]=function(e,t){return new $t(e.valueOf()==t.valueOf())},Xr["boolean-less-than"]=function(e,t){return new $t(e.valueOf()<t.valueOf())},Xr["boolean-greater-than"]=function(e,t){return new $t(e.valueOf()>t.valueOf())},Xr["yearMonthDuration-less-than"]=function(e,t){return new $t(pr(e)<pr(t))},Xr["yearMonthDuration-greater-than"]=function(e,t){return new $t(pr(e)>pr(t))},Xr["dayTimeDuration-less-than"]=function(e,t){return new $t(cr(e)<cr(t))},Xr["dayTimeDuration-greater-than"]=function(e,t){return new $t(cr(e)>cr(t))},Xr["duration-equal"]=function(e,t){return new $t(e.negative==t.negative&&pr(e)==pr(t)&&cr(e)==cr(t))},Xr["dateTime-equal"]=function(e,t){return ar(e,t,"eq")},Xr["dateTime-less-than"]=function(e,t){return ar(e,t,"lt")},Xr["dateTime-greater-than"]=function(e,t){return ar(e,t,"gt")},Xr["date-equal"]=function(e,t){return or(e,t,"eq")},Xr["date-less-than"]=function(e,t){return or(e,t,"lt")},Xr["date-greater-than"]=function(e,t){return or(e,t,"gt")},Xr["time-equal"]=function(e,t){return ir(e,t,"eq")},Xr["time-less-than"]=function(e,t){return ir(e,t,"lt")},Xr["time-greater-than"]=function(e,t){return ir(e,t,"gt")},Xr["gYearMonth-equal"]=function(e,t){return ar(new Zt(e.year,e.month,Kt(e.year,e.month),0,0,0,null==e.timezone?this.timezone:e.timezone),new Zt(t.year,t.month,Kt(t.year,t.month),0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},Xr["gYear-equal"]=function(e,t){return ar(new Zt(e.year,1,1,0,0,0,null==e.timezone?this.timezone:e.timezone),new Zt(t.year,1,1,0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},Xr["gMonthDay-equal"]=function(e,t){return ar(new Zt(1972,e.month,e.day,0,0,0,null==e.timezone?this.timezone:e.timezone),new Zt(1972,t.month,t.day,0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},Xr["gMonth-equal"]=function(e,t){return ar(new Zt(1972,e.month,Kt(1972,t.month),0,0,0,null==e.timezone?this.timezone:e.timezone),new Zt(1972,t.month,Kt(1972,t.month),0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},Xr["gDay-equal"]=function(e,t){return ar(new Zt(1972,12,e.day,0,0,0,null==e.timezone?this.timezone:e.timezone),new Zt(1972,12,t.day,0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},Xr["add-yearMonthDurations"]=function(e,t){return fr(pr(e)+pr(t))},Xr["subtract-yearMonthDurations"]=function(e,t){return fr(pr(e)-pr(t))},Xr["multiply-yearMonthDuration"]=function(e,t){return fr(pr(e)*t)},Xr["divide-yearMonthDuration"]=function(e,t){return fr(pr(e)/t)},Xr["divide-yearMonthDuration-by-yearMonthDuration"]=function(e,t){return new an(pr(e)/pr(t))},Xr["add-dayTimeDurations"]=function(e,t){return lr(cr(e)+cr(t))},Xr["subtract-dayTimeDurations"]=function(e,t){return lr(cr(e)-cr(t))},Xr["multiply-dayTimeDuration"]=function(e,t){return lr(cr(e)*t)},Xr["divide-dayTimeDuration"]=function(e,t){return lr(cr(e)/t)},Xr["divide-dayTimeDuration-by-dayTimeDuration"]=function(e,t){return new an(cr(e)/cr(t))},Xr["subtract-dateTimes"]=function(){throw"Operator function 'subtract-dateTimes' not implemented"},Xr["subtract-dates"]=function(){throw"Operator function 'subtract-dates' not implemented"},Xr["subtract-times"]=function(e,t){return lr(dr(e)-dr(t))},Xr["add-yearMonthDuration-to-dateTime"]=function(e,t){return sr(e,t,"+")},Xr["add-dayTimeDuration-to-dateTime"]=function(e,t){return ur(e,t,"+")},Xr["subtract-yearMonthDuration-from-dateTime"]=function(e,t){return sr(e,t,"-")},Xr["subtract-dayTimeDuration-from-dateTime"]=function(e,t){return ur(e,t,"-")},Xr["add-yearMonthDuration-to-date"]=function(e,t){return sr(e,t,"+")},Xr["add-dayTimeDuration-to-date"]=function(e,t){return ur(e,t,"+")},Xr["subtract-yearMonthDuration-from-date"]=function(e,t){return sr(e,t,"-")},Xr["subtract-dayTimeDuration-from-date"]=function(e,t){return ur(e,t,"-")},Xr["add-dayTimeDuration-to-time"]=function(e,t){var n=new wn(e.hours,e.minutes,e.seconds,e.timezone);return n.hours+=t.hours,n.minutes+=t.minutes,n.seconds+=t.seconds,Sn(n)},Xr["subtract-dayTimeDuration-from-time"]=function(e,t){var n=new wn(e.hours,e.minutes,e.seconds,e.timezone);return n.hours-=t.hours,n.minutes-=t.minutes,n.seconds-=t.seconds,Sn(n)},Xr["is-same-node"]=function(e,t){return new $t(this.DOMAdapter.isSameNode(e,t))},Xr["node-before"]=function(e,t){return new $t(!!(4&this.DOMAdapter.compareDocumentPosition(e,t)))},Xr["node-after"]=function(e,t){return new $t(!!(2&this.DOMAdapter.compareDocumentPosition(e,t)))},Xr["numeric-add"]=function(e,t){var n=e.valueOf(),r=t.valueOf(),i=Nr.pow(10,hr(n,r));return mr(e,t,(n*i+r*i)/i)},Xr["numeric-subtract"]=function(e,t){var n=e.valueOf(),r=t.valueOf(),i=Nr.pow(10,hr(n,r));return mr(e,t,(n*i-r*i)/i)},Xr["numeric-multiply"]=function(e,t){var n=e.valueOf(),r=t.valueOf(),i=Nr.pow(10,hr(n,r));return mr(e,t,n*i*r*i/(i*i))},Xr["numeric-divide"]=function(e,t){var n=e.valueOf(),r=t.valueOf(),i=Nr.pow(10,hr(n,r));return mr(e,t,e*i/(t*i))},Xr["numeric-integer-divide"]=function(e,t){return new Dn(~~(e/t))},Xr["numeric-mod"]=function(e,t){var n=e.valueOf(),r=t.valueOf(),i=Nr.pow(10,hr(n,r));return mr(e,t,n*i%(r*i)/i)},Xr["numeric-unary-plus"]=function(e){return e},Xr["numeric-unary-minus"]=function(e){return e.value*=-1,e},Xr["numeric-equal"]=function(e,t){return new $t(e.valueOf()==t.valueOf())},Xr["numeric-less-than"]=function(e,t){return new $t(e.valueOf()<t.valueOf())},Xr["numeric-greater-than"]=function(e,t){return new $t(e.valueOf()>t.valueOf())},Xr["QName-equal"]=function(e,t){return new $t(e.localName==t.localName&&e.namespaceURI==t.namespaceURI)},Xr.concatenate=function(e,t){return e.concat(t)},Xr.union=function(t,n){for(var r,i=[],o=0,a=t.length;a>o;o++){if(!this.DOMAdapter.isNode(r=t[o]))throw new e("XPTY0004","Required item type of first operand of 'union' is node()");-1==Mr(i,r)&&i.push(r)}for(var r,o=0,a=n.length;a>o;o++){if(!this.DOMAdapter.isNode(r=n[o]))throw new e("XPTY0004","Required item type of second operand of 'union' is node()");-1==Mr(i,r)&&i.push(r)}return br(i,this)},Xr.intersect=function(t,n){for(var r,i,o=[],a=0,s=t.length;s>a;a++){if(!this.DOMAdapter.isNode(r=t[a]))throw new e("XPTY0004","Required item type of second operand of 'intersect' is node()");i=!1;for(var u=0,c=n.length;c>u&&!i;u++){if(!this.DOMAdapter.isNode(n[u]))throw new e("XPTY0004","Required item type of first operand of 'intersect' is node()");i=this.DOMAdapter.isSameNode(n[u],r)}i&&-1==Mr(o,r)&&o.push(r)}return br(o,this)},Xr.except=function(t,n){for(var r,i,o=[],a=0,s=t.length;s>a;a++){if(!this.DOMAdapter.isNode(r=t[a]))throw new e("XPTY0004","Required item type of second operand of 'except' is node()");i=!1;for(var u=0,c=n.length;c>u&&!i;u++){if(!this.DOMAdapter.isNode(n[u]))throw new e("XPTY0004","Required item type of first operand of 'except' is node()");i=this.DOMAdapter.isSameNode(n[u],r)}i||-1!=Mr(o,r)||o.push(r)}return br(o,this)},Xr.to=function(e,t){for(var n=[],r=e.valueOf(),i=t.valueOf();i>=r;r++)n.push(new Dn(r));return n},o("node-name",[[Kn,"?"]],function(e){if(null!=e){var t=this.DOMAdapter.getProperty;switch(t(e,"nodeType")){case 1:case 2:return new xn(t(e,"prefix"),t(e,"localName"),t(e,"namespaceURI"));case 5:throw"Not implemented";case 6:throw"Not implemented";case 7:return new xn(null,t(e,"target"),null);case 10:return new xn(null,t(e,"name"),null)}}return null}),o("nilled",[[Kn,"?"]],function(e){return null!=e&&1==this.DOMAdapter.getProperty(e,"nodeType")?new $t(!1):null}),o("string",[[Jn,"?",!0]],function(t){if(!arguments.length){if(!this.item)throw new e("XPDY0002");t=this.item}return null==t?new bn(""):bn.cast(xr([t],this)[0])}),o("data",[[Jn,"*"]],function(e){return xr(e,this)}),o("base-uri",[[Kn,"?",!0]],function(t){if(!arguments.length){if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","base-uri() function called when the context item is not a node");t=this.item}return qt.cast(new bn(this.DOMAdapter.getProperty(t,"baseURI")||""))}),o("document-uri",[[Kn,"?"]],function(e){if(null!=e){var t=this.DOMAdapter.getProperty;if(9==t(e,"nodeType"))return qt.cast(new bn(t(e,"documentURI")||""))}return null}),o("resolve-uri",[[bn,"?"],[bn,"",!0]],function(t,n){var n;if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","resolve-uri() function called when the context item is not a node");n=new bn(this.DOMAdapter.getProperty(this.item,"baseURI")||"")}if(null==t)return null;if(""==t.valueOf()||"#"==t.valueOf().charAt(0))return qt.cast(n);var r=qt.cast(t);if(r.scheme)return r;var i=qt.cast(n);if(r.scheme=i.scheme,!r.authority&&(r.authority=i.authority,"/"!=r.path.charAt(0))){var o=r.path.split("/"),a=i.path.split("/");a.pop();for(var s=""==a[0]?1:0,u=0,c=o.length;c>u;u++)".."==o[u]?a.length>s?a.pop():(a.push(o[u]),s++):"."!=o[u]&&a.push(o[u]);(".."==o[--u]||"."==o[u])&&a.push(""),r.path=a.join("/")}return r}),o("true",[],function(){return new $t(!0)}),o("false",[],function(){return new $t(!1)}),o("not",[[Jn,"*"]],function(e){return new $t(!_r(e,this))}),o("position",[],function(){return new Dn(this.position)}),o("last",[],function(){return new Dn(this.size)}),o("current-dateTime",[],function(){return this.dateTime}),o("current-date",[],function(){return Jt.cast(this.dateTime)}),o("current-time",[],function(){return wn.cast(this.dateTime)}),o("implicit-timezone",[],function(){return this.timezone}),o("default-collation",[],function(){return new bn(this.staticContext.defaultCollationName)}),o("static-base-uri",[],function(){return qt.cast(new bn(this.staticContext.baseURI||""))}),o("years-from-duration",[[un,"?"]],function(e){return gr(e,"year")}),o("months-from-duration",[[un,"?"]],function(e){return gr(e,"month")}),o("days-from-duration",[[un,"?"]],function(e){return gr(e,"day")}),o("hours-from-duration",[[un,"?"]],function(e){return gr(e,"hours")}),o("minutes-from-duration",[[un,"?"]],function(e){return gr(e,"minutes")}),o("seconds-from-duration",[[un,"?"]],function(e){return gr(e,"seconds")}),o("year-from-dateTime",[[Zt,"?"]],function(e){return vr(e,"year")}),o("month-from-dateTime",[[Zt,"?"]],function(e){return vr(e,"month")}),o("day-from-dateTime",[[Zt,"?"]],function(e){return vr(e,"day")}),o("hours-from-dateTime",[[Zt,"?"]],function(e){return vr(e,"hours")}),o("minutes-from-dateTime",[[Zt,"?"]],function(e){return vr(e,"minutes")}),o("seconds-from-dateTime",[[Zt,"?"]],function(e){return vr(e,"seconds")}),o("timezone-from-dateTime",[[Zt,"?"]],function(e){return vr(e,"timezone")}),o("year-from-date",[[Jt,"?"]],function(e){return vr(e,"year")}),o("month-from-date",[[Jt,"?"]],function(e){return vr(e,"month")}),o("day-from-date",[[Jt,"?"]],function(e){return vr(e,"day")}),o("timezone-from-date",[[Jt,"?"]],function(e){return vr(e,"timezone")}),o("hours-from-time",[[wn,"?"]],function(e){return vr(e,"hours")}),o("minutes-from-time",[[wn,"?"]],function(e){return vr(e,"minutes")}),o("seconds-from-time",[[wn,"?"]],function(e){return vr(e,"seconds")}),o("timezone-from-time",[[wn,"?"]],function(e){return vr(e,"timezone")}),o("adjust-dateTime-to-timezone",[[Zt,"?"],[Pn,"?",!0]],function(e,t){return yr(e,arguments.length>1&&null!=t?arguments.length>1?t:this.timezone:null)}),o("adjust-date-to-timezone",[[Jt,"?"],[Pn,"?",!0]],function(e,t){return yr(e,arguments.length>1&&null!=t?arguments.length>1?t:this.timezone:null)}),o("adjust-time-to-timezone",[[wn,"?"],[Pn,"?",!0]],function(e,t){return yr(e,arguments.length>1&&null!=t?arguments.length>1?t:this.timezone:null)}),o("name",[[Kn,"?",!0]],function(t){if(arguments.length){if(null==t)return new bn("")}else{if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","name() function called when the context item is not a node");t=this.item}var n=zr["node-name"].call(this,t);return new bn(null==n?"":n.toString())}),o("local-name",[[Kn,"?",!0]],function(t){if(arguments.length){if(null==t)return new bn("")}else{if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","local-name() function called when the context item is not a node");t=this.item}return new bn(this.DOMAdapter.getProperty(t,"localName")||"")}),o("namespace-uri",[[Kn,"?",!0]],function(t){if(arguments.length){if(null==t)return qt.cast(new bn(""))
}else{if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","namespace-uri() function called when the context item is not a node");t=this.item}return qt.cast(new bn(this.DOMAdapter.getProperty(t,"namespaceURI")||""))}),o("number",[[zt,"?",!0]],function(t){if(!arguments.length){if(!this.item)throw new e("XPDY0002");t=xr([this.item],this)[0]}var n=new sn(jr);if(null!=t)try{n=sn.cast(t)}catch(r){}return n}),o("lang",[[bn,"?"],[Kn,"",!0]],function(t,n){if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","lang() function called when the context item is not a node");n=this.item}var r=this.DOMAdapter.getProperty;2==r(n,"nodeType")&&(n=r(n,"ownerElement"));for(var i;n;n=r(n,"parentNode"))if(i=r(n,"attributes"))for(var o=0,a=i.length;a>o;o++)if("xml:lang"==r(i[o],"nodeName"))return new $t(r(i[o],"value").replace(/-.+/,"").toLowerCase()==t.valueOf().replace(/-.+/,"").toLowerCase());return new $t(!1)}),o("root",[[Kn,"?",!0]],function(t){if(arguments.length){if(null==t)return null}else{if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","root() function called when the context item is not a node");t=this.item}var n=this.DOMAdapter.getProperty;2==n(t,"nodeType")&&(t=n(t,"ownerElement"));for(var r=t;r;r=n(t,"parentNode"))t=r;return t}),o("abs",[[sn,"?"]],function(e){return new an(Nr.abs(e))}),o("ceiling",[[sn,"?"]],function(e){return new an(Nr.ceil(e))}),o("floor",[[sn,"?"]],function(e){return new an(Nr.floor(e))}),o("round",[[sn,"?"]],function(e){return new an(Nr.round(e))}),o("round-half-to-even",[[sn,"?"],[Dn,"",!0]],function(e,t){var n=arguments.length>1?t.valueOf():0;if(0>n){var r=new Dn(Nr.pow(10,-n)),i=Nr.round(Xr["numeric-divide"].call(this,e,r)),o=new Dn(i);return nDecimal=Nr.abs(Xr["numeric-subtract"].call(this,o,Xr["numeric-divide"].call(this,e,r))),Xr["numeric-multiply"].call(this,Xr["numeric-add"].call(this,o,new an(.5==nDecimal&&i%2?-1:0)),r)}var r=new Dn(Nr.pow(10,n)),i=Nr.round(Xr["numeric-multiply"].call(this,e,r)),o=new Dn(i);return nDecimal=Nr.abs(Xr["numeric-subtract"].call(this,o,Xr["numeric-multiply"].call(this,e,r))),Xr["numeric-divide"].call(this,Xr["numeric-add"].call(this,o,new an(.5==nDecimal&&i%2?-1:0)),r)}),o("resolve-QName",[[bn,"?"],[tr]],function(t,n){if(null==t)return null;var r=t.valueOf(),i=r.match(Ei);if(!i)throw new e("FOCA0002","Invalid QName '"+r+"'");var o=i[1]||null,a=i[2],s=this.DOMAdapter.lookupNamespaceURI(n,o);if(null!=o&&!s)throw new e("FONS0004","Namespace prefix '"+o+"' has not been declared");return new xn(o,a,s||null)}),o("QName",[[bn,"?"],[bn]],function(t,n){var r=n.valueOf(),i=r.match(Ei);if(!i)throw new e("FOCA0002","Invalid QName '"+r+"'");return new xn(i[1]||null,i[2]||null,null==t?"":t.valueOf())}),o("prefix-from-QName",[[xn,"?"]],function(e){return null!=e&&e.prefix?new zn(e.prefix):null}),o("local-name-from-QName",[[xn,"?"]],function(e){return null==e?null:new zn(e.localName)}),o("namespace-uri-from-QName",[[xn,"?"]],function(e){return null==e?null:qt.cast(new bn(e.namespaceURI||""))}),o("namespace-uri-for-prefix",[[bn,"?"],[tr]],function(e,t){var n=null==e?"":e.valueOf(),r=this.DOMAdapter.lookupNamespaceURI(t,n||null);return null==r?null:qt.cast(new bn(r))}),o("in-scope-prefixes",[[tr]],function(){throw"Function 'in-scope-prefixes' not implemented"}),o("boolean",[[Jn,"*"]],function(e){return new $t(_r(e,this))}),o("index-of",[[zt,"*"],[zt],[bn,"",!0]],function(e,t){if(!e.length||null==t)return[];var n=t;n instanceof En&&(n=bn.cast(n));for(var r,i=[],o=0,a=e.length;a>o;o++)r=e[o],r instanceof En&&(r=bn.cast(r)),r.valueOf()===n.valueOf()&&i.push(new Dn(o+1));return i}),o("empty",[[Jn,"*"]],function(e){return new $t(!e.length)}),o("exists",[[Jn,"*"]],function(e){return new $t(!!e.length)}),o("distinct-values",[[zt,"*"],[bn,"",!0]],function(e){if(!e.length)return null;for(var t,n=[],r=0,i=e.length;i>r;r++){t=e[r],t instanceof En&&(t=bn.cast(t));for(var o,a=0,s=n.length,u=!1;s>a&&!u;a++)o=n[a],o instanceof En&&(o=bn.cast(o)),o.valueOf()===t.valueOf()&&(u=!0);u||n.push(e[r])}return n}),o("insert-before",[[Jn,"*"],[Dn],[Jn,"*"]],function(e,t,n){if(!e.length)return n;if(!n.length)return e;var r=e.length,i=t.valueOf();1>i?i=1:i>r&&(i=r+1);for(var o=[],a=0;r>a;a++)i==a+1&&(o=o.concat(n)),o.push(e[a]);return i==a+1&&(o=o.concat(n)),o}),o("remove",[[Jn,"*"],[Dn]],function(e,t){if(!e.length)return[];var n=e.length,r=t.valueOf();if(1>r||r>n)return e;for(var i=[],o=0;n>o;o++)r!=o+1&&i.push(e[o]);return i}),o("reverse",[[Jn,"*"]],function(e){return e.reverse(),e}),o("subsequence",[[Jn,"*"],[sn,""],[sn,"",!0]],function(e,t,n){var r=Nr.round(t),i=arguments.length>2?Nr.round(n):e.length-r+1;return e.slice(r-1,r-1+i)}),o("unordered",[[Jn,"*"]],function(e){return e}),o("zero-or-one",[[Jn,"*"]],function(t){if(t.length>1)throw new e("FORG0003");return t}),o("one-or-more",[[Jn,"*"]],function(t){if(!t.length)throw new e("FORG0004");return t}),o("exactly-one",[[Jn,"*"]],function(t){if(1!=t.length)throw new e("FORG0005");return t}),o("deep-equal",[[Jn,"*"],[Jn,"*"],[bn,"",!0]],function(){throw"Function 'deep-equal' not implemented"}),o("count",[[Jn,"*"]],function(e){return new Dn(e.length)}),o("avg",[[zt,"*"]],function(t){if(!t.length)return null;try{var n=t[0];n instanceof En&&(n=sn.cast(n));for(var r,i=1,o=t.length;o>i;i++)r=t[i],r instanceof En&&(r=sn.cast(r)),n=Zr["+"](n,r,this);return ei.div(n,new Dn(o),this)}catch(a){throw"XPTY0004"!=a.code?a:new e("FORG0006","Input to avg() contains a mix of types")}}),o("max",[[zt,"*"],[bn,"",!0]],function(t){if(!t.length)return null;try{for(var n=t[0],r=1,i=t.length;i>r;r++)Jr.ge(t[r],n,this).valueOf()&&(n=t[r]);return n}catch(o){throw"XPTY0004"!=o.code?o:new e("FORG0006","Input to max() contains a mix of not comparable values")}}),o("min",[[zt,"*"],[bn,"",!0]],function(t){if(!t.length)return null;try{for(var n=t[0],r=1,i=t.length;i>r;r++)Jr.le(t[r],n,this).valueOf()&&(n=t[r]);return n}catch(o){throw"XPTY0004"!=o.code?o:new e("FORG0006","Input to min() contains a mix of not comparable values")}}),o("sum",[[zt,"*"],[zt,"?",!0]],function(t,n){if(!t.length)return arguments.length>1?n:new sn(0);try{var r=t[0];r instanceof En&&(r=sn.cast(r));for(var i,o=1,a=t.length;a>o;o++)i=t[o],i instanceof En&&(i=sn.cast(i)),r=Zr["+"](r,i,this);return r}catch(s){throw"XPTY0004"!=s.code?s:new e("FORG0006","Input to sum() contains a mix of types")}}),o("id",[[bn,"*"],[Kn,"",!0]],function(t,n){if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","id() function called when the context item is not a node");n=this.item}var r=zr.root.call(this,n);if(9!=this.DOMAdapter.getProperty(r,"nodeType"))throw new e("FODC0001");for(var i=[],o=0;o<t.length;o++)for(var a=0,s=Lr(t[o]).split(/\s+/),u=s.length;u>a;a++)(n=this.DOMAdapter.getElementById(r,s[a]))&&-1==Mr(i,n)&&i.push(n);return br(i,this)}),o("idref",[[bn,"*"],[Kn,"",!0]],function(){throw"Function 'idref' not implemented"}),o("doc",[[bn,"?",!0]],function(){throw"Function 'doc' not implemented"}),o("doc-available",[[bn,"?",!0]],function(){throw"Function 'doc-available' not implemented"}),o("collection",[[bn,"?",!0]],function(){throw"Function 'collection' not implemented"}),o("element-with-id",[[bn,"*"],[Kn,"",!0]],function(){throw"Function 'element-with-id' not implemented"}),o("codepoints-to-string",[[Dn,"*"]],function(e){for(var t=[],n=0,r=e.length;r>n;n++)t.push(Cr.fromCharCode(e[n]));return new bn(t.join(""))}),o("string-to-codepoints",[[bn,"?"]],function(e){if(null==e)return null;var t=e.valueOf();if(""==t)return[];for(var n=[],r=0,i=t.length;i>r;r++)n.push(new Dn(t.charCodeAt(r)));return n}),o("compare",[[bn,"?"],[bn,"?"],[bn,"",!0]],function(t,n,r){if(null==t||null==n)return null;var i,o=this.staticContext.defaultCollationName;if(arguments.length>2&&(o=r.valueOf()),i=o==Ur+"/collation/codepoint"?Di:this.staticContext.getCollation(o),!i)throw new e("FOCH0002","Unknown collation {"+o+"}");return new Dn(i.compare(t.valueOf(),n.valueOf()))}),o("codepoint-equal",[[bn,"?"],[bn,"?"]],function(e,t){return null==e||null==t?null:new $t(e.valueOf()==t.valueOf())}),o("concat",null,function(){if(arguments.length<2)throw new e("XPST0017","Function concat() must have at least 2 arguments");for(var t,n=[],r=0,i=arguments.length;i>r;r++)t=arguments[r],xt(this,t,"?","each argument of concat()"),t.length&&(n[n.length]=bn.cast(xr(t,this)[0]).valueOf());return new bn(n.join(""))}),o("string-join",[[bn,"*"],[bn]],function(e,t){return new bn(e.join(t))}),o("substring",[[bn,"?"],[sn],[sn,"",!0]],function(e,t,n){var r=null==e?"":e.valueOf(),i=Nr.round(t)-1,o=arguments.length>2?i+Nr.round(n):r.length;return new bn(o>i?r.substring(i,o):"")}),o("string-length",[[bn,"?",!0]],function(t){if(!arguments.length){if(!this.item)throw new e("XPDY0002");t=bn.cast(xr([this.item],this)[0])}return new Dn(null==t?0:t.valueOf().length)}),o("normalize-space",[[bn,"?",!0]],function(t){if(!arguments.length){if(!this.item)throw new e("XPDY0002");t=bn.cast(xr([this.item],this)[0])}return new bn(null==t?"":Lr(t).replace(/\s\s+/g," "))}),o("normalize-unicode",[[bn,"?"],[bn,"",!0]],function(){throw"Function 'normalize-unicode' not implemented"}),o("upper-case",[[bn,"?"]],function(e){return new bn(null==e?"":e.valueOf().toUpperCase())}),o("lower-case",[[bn,"?"]],function(e){return new bn(null==e?"":e.valueOf().toLowerCase())}),o("translate",[[bn,"?"],[bn],[bn]],function(e,t,n){if(null==e)return new bn("");for(var r,i=e.valueOf().split(""),o=t.valueOf().split(""),a=n.valueOf().split(""),s=a.length,u=[],c=0,l=i.length;l>c;c++)-1==(r=o.indexOf(i[c]))?u[u.length]=i[c]:s>r&&(u[u.length]=a[r]);return new bn(u.join(""))}),o("encode-for-uri",[[bn,"?"]],function(e){return new bn(null==e?"":window.encodeURIComponent(e))}),o("iri-to-uri",[[bn,"?"]],function(e){return new bn(null==e?"":window.encodeURI(window.decodeURI(e)))}),o("escape-html-uri",[[bn,"?"]],function(e){if(null==e||""==e.valueOf())return new bn("");for(var t,n=e.valueOf().split(""),r=0,i=n.length;i>r;r++)((t=n[r].charCodeAt(0))<32||t>126)&&(n[r]=window.encodeURIComponent(n[r]));return new bn(n.join(""))}),o("contains",[[bn,"?"],[bn,"?"],[bn,"",!0]],function(e,t){return new $t((null==e?"":e.valueOf()).indexOf(null==t?"":t.valueOf())>=0)}),o("starts-with",[[bn,"?"],[bn,"?"],[bn,"",!0]],function(e,t){return new $t(0==(null==e?"":e.valueOf()).indexOf(null==t?"":t.valueOf()))}),o("ends-with",[[bn,"?"],[bn,"?"],[bn,"",!0]],function(e,t){var n=null==e?"":e.valueOf(),r=null==t?"":t.valueOf();return new $t(n.indexOf(r)==n.length-r.length)}),o("substring-before",[[bn,"?"],[bn,"?"],[bn,"",!0]],function(e,t){var n,r=null==e?"":e.valueOf(),i=null==t?"":t.valueOf();return new bn((n=r.indexOf(i))>=0?r.substring(0,n):"")}),o("substring-after",[[bn,"?"],[bn,"?"],[bn,"",!0]],function(e,t){var n,r=null==e?"":e.valueOf(),i=null==t?"":t.valueOf();return new bn((n=r.indexOf(i))>=0?r.substring(n+i.length):"")}),o("matches",[[bn,"?"],[bn],[bn,"",!0]],function(e,t,n){var r=null==e?"":e.valueOf(),i=wr(t.valueOf(),arguments.length>2?n.valueOf():"");return new $t(i.test(r))}),o("replace",[[bn,"?"],[bn],[bn],[bn,"",!0]],function(e,t,n,r){var i=null==e?"":e.valueOf(),o=wr(t.valueOf(),arguments.length>3?r.valueOf():"");return new $t(i.replace(o,n.valueOf()))}),o("tokenize",[[bn,"?"],[bn],[bn,"",!0]],function(e,t,n){for(var r=null==e?"":e.valueOf(),i=wr(t.valueOf(),arguments.length>2?n.valueOf():""),o=[],a=0,s=r.split(i),u=s.length;u>a;a++)o.push(new bn(s[a]));return o}),o("trace",[[Jn,"*"],[bn]],function(e,t){var n=window.console;return n&&n.log&&n.log(t.valueOf(),e),e});var Di=new u;Di.equals=function(e,t){return e==t},Di.compare=function(e,t){return e==t?0:e>t?1:-1};var Ai=function(){};Ai.prototype.nodeType=2,Ai.prototype.nodeName=Ai.prototype.nodeValue=Ai.prototype.ownerDocument=Ai.prototype.localName=Ai.prototype.namespaceURI=Ai.prototype.prefix=Ai.prototype.attributes=Ai.prototype.childNodes=Ai.prototype.firstChild=Ai.prototype.lastChild=Ai.prototype.previousSibling=Ai.prototype.nextSibling=Ai.prototype.parentNode=Ai.prototype.name=Ai.prototype.specified=Ai.prototype.value=Ai.prototype.ownerElement=null,Sr.prototype=new n;var Ni=new i;Sr.prototype.getProperty=function(e,t){if(t in e)return e[t];if("baseURI"==t){for(var n,r="",i=Ni.getFunction("{http://www.w3.org/2005/xpath-functions}resolve-uri"),o=Ni.getDataType("{http://www.w3.org/2001/XMLSchema}string"),a=e;a;a=a.parentNode)1==a.nodeType&&(n=a.getAttribute("xml:base"))&&(r=i(new o(n),new o(r)).toString());return r}if("textContent"==t){var s=[];return function(e){for(var t,n=0;t=e.childNodes[n];n++)3==t.nodeType||4==t.nodeType?s.push(t.data):1==t.nodeType&&t.firstChild&&arguments.callee(t)}(e),s.join("")}},Sr.prototype.compareDocumentPosition=function(e,t){if("compareDocumentPosition"in e)return e.compareDocumentPosition(t);if(t==e)return 0;var n,r,i,o,a,s=null,u=null;if(2==e.nodeType&&(s=e,e=this.getProperty(s,"ownerElement")),2==t.nodeType&&(u=t,t=this.getProperty(u,"ownerElement")),s&&u&&e&&e==t)for(o=0,n=this.getProperty(e,"attributes"),a=n.length;a>o;o++){if(r=n[o],r==s)return 36;if(r==u)return 34}var c,l,p,f,d=[],h=[];for(s&&d.push(s),i=e;i;i=i.parentNode)d.push(i);for(u&&h.push(u),i=t;i;i=i.parentNode)h.push(i);if((e.ownerDocument||e)!=(t.ownerDocument||t)||d[d.length-1]!=h[h.length-1])return 33;for(o=Nr.min(c=d.length,p=h.length);o;--o)if((l=d[--c])!=(f=h[--p])){if(2==l.nodeType)return 4;if(2==f.nodeType)return 2;if(!f.nextSibling)return 4;if(!l.nextSibling)return 2;for(i=f.previousSibling;i;i=i.previousSibling)if(i==l)return 4;return 2}return p>c?20:10},Sr.prototype.lookupNamespaceURI=function(e,t){if("lookupNamespaceURI"in e)return e.lookupNamespaceURI(t);for(;e&&9!=e.nodeType;e=e.parentNode){if(t==this.getProperty(oChild,"prefix"))return this.getProperty(e,"namespaceURI");if(1==e.nodeType)for(var n=this.getProperty(e,"attributes"),r=0,i=n.length,o="xmlns:"+t;i>r;r++)if(this.getProperty(n[r],"nodeName")==o)return this.getProperty(n[r],"value")}return null},Sr.prototype.getElementsByTagNameNS=function(e,t,n){if("getElementsByTagNameNS"in e)return e.getElementsByTagNameNS(t,n);var r=[],i="*"==t,o="*"==n;return function(e){for(var a,s=0;a=e.childNodes[s];s++)1==a.nodeType&&(!o&&n!=this.getProperty(a,"localName")||!i&&t!=this.getProperty(a,"namespaceURI")||(r[r.length]=a),a.firstChild&&arguments.callee(a))}(e),r};var ki=new Sr,Oi=new Sr;Oi.getProperty=function(e,t){return"localName"==t&&1==e.nodeType?e.localName.toLowerCase():"namespaceURI"==t?1==e.nodeType?"http://www.w3.org/1999/xhtml":null:Sr.prototype.getProperty.call(this,e,t)};var Ri=new Sr;Ri.getProperty=function(e,t){if("localName"==t&&1==e.nodeType)return e.nodeName.toLowerCase();if("prefix"==t)return null;if("namespaceURI"==t)return 1==e.nodeType?"http://www.w3.org/1999/xhtml":null;if("textContent"==t)return e.innerText;if("attributes"==t&&1==e.nodeType){for(var n,r,i=[],o=0,a=e.attributes,s=a.length;s>o;o++)n=a[o],n.specified&&(r=new Ai,r.ownerElement=e,r.ownerDocument=e.ownerDocument,r.specified=!0,r.value=r.nodeValue=n.nodeValue,r.name=r.nodeName=r.localName=n.nodeName.toLowerCase(),i[i.length]=r);return i}return Sr.prototype.getProperty.call(this,e,t)};var ji=new Sr;ji.getProperty=function(e,t){if("localName"==t){if(7==e.nodeType)return null;if(1==e.nodeType)return e.baseName}if("prefix"==t||"namespaceURI"==t)return e[t]||null;if("textContent"==t)return e.text;if("attributes"==t&&1==e.nodeType){for(var n,r,i=[],o=0,a=e.attributes,s=a.length;s>o;o++)n=a[o],n.specified&&(r=new Ai,r.nodeType=2,r.ownerElement=e,r.ownerDocument=e.ownerDocument,r.specified=!0,r.value=r.nodeValue=n.nodeValue,r.name=r.nodeName=n.nodeName,r.localName=n.baseName,r.prefix=n.prefix||null,r.namespaceURI=n.namespaceURI||null,i[i.length]=r);return i}return Sr.prototype.getProperty.call(this,e,t)},ji.getElementById=function(e,t){return e.nodeFromID(t)};var Fi=(window.HTMLDocument,window.jQuery),Li=window.document,Mi=!!Li.namespaces&&!Li.createElementNS,Bi=!Mi&&"http://www.w3.org/1999/xhtml"!=Li.documentElement.namespaceURI,Ui=new i,Vi=new i;Ui.baseURI=Li.location.href,Ui.defaultFunctionNamespace="http://www.w3.org/2005/xpath-functions",Ui.defaultElementNamespace="http://www.w3.org/1999/xhtml",Vi.defaultFunctionNamespace=Ui.defaultFunctionNamespace;var Qi={};Qi.xpath=function(e,t,n){return Er(e instanceof Fi?e:new Fi(e),t,n)},Fi.extend(Fi,Qi),Qi={},Qi.xpath=function(e,t){return Er(this,e,t)},Fi.extend(Fi.prototype,Qi)}(),define("fiorixmlanalysis/../../../../../lib/jqueryxpathplugin/jqueryXpath",function(){}),define("fiorixmlanalysis/utils/XPathUtils",["../../../../../../lib/jqueryxpathplugin/jqueryXpath"],function(){"use strict";function e(e){return t[e]||null}var t={core:"sap.ui.core",commons:"sap.ui.commons",form:"sap.ui.commons.form",layout:"sap.ui.commons.layout",uilayout:"sap.ui.layout",layoutform:"sap.ui.layout.form",ns:"sap.m",ui:"sap.ca.ui",mvc:"sap.ui.core.mvc",navpopover:"sap.ui.comp.navpopover",sfield:"sap.ui.comp.smartfield",sform:"sap.ui.comp.smartform",stable:"sap.ui.comp.smarttable",svariants:"sap.ui.comp.smartvariants",sfilter:"sap.ui.comp.smartfilterbar",html:"http://www.w3.org/1999/xhtml"};return{exec:function(t,n){return $.xpath(n,t,e)}}}),define("fiorixmlanalysis/config/default",{xmlAnalysisConfig:{rules:{XML_ICON_ACCESSIBILITY:0,XML_ICON_BUTTON_ACCESSIBILITY:0,XML_IMAGE_ACCESSIBILITY:0,XML_TITLE_ACCESSIBILITY:0,XML_PAGE_ACCESSIBILITY:0,XML_TABLE_ACCESSIBILITY:0,DG_XML_FOOTER_BUTTON_TEXT_ICON:1,DG_XML_LIST_BASE_SHOW_NO_DATA:1,DG_XML_NO_DUPLICATE_ICONS:1,DG_MULTIPLE_OBJECT_IDENTIFIER:0,DG_MULTIPLE_OBJECT_NUMBER:0,DG_XML_NO_SINGLE_TAB:2,DG_XML_FIRST_OBJECT_IDENTIFIER:0,DG_XML_USAGE_OBJECT_IDENTIFIER:0,XML_DIALOG_IN_VIEW:0,XML_UPLOAD_IN_VIEW:0,XML_COMMONS_USAGE:2,XML_FORM_USAGE:2,XML_LAYOUT_USAGE:2,XML_MISSING_STABLE_ID:1,XML_DEPRECATION:1,XML_METADATA_MEDIA_SRC_WITHOUT_FORMATTER:2}},rulesExt:{rule:{severity:"",category:""}}}),define("fiorixmlanalysis/rules/severity",["../config/default"],function(e){"use strict";return{get:function(t){switch(e.xmlAnalysisConfig.rules[t]){case 2:return"error";case 1:return"warning";case 0:return"info"}}}}),define("fiorixmlanalysis/rules/XML_ICON_ACCESSIBILITY",[],function(){"use strict";function e(){return"//core:Icon[(not(@tooltip) or normalize-space(@tooltip)='') and (not(@ariaLabelledBy) or normalize-space(@ariaLabelledBy)='') and (not(@ariaDescribedBy) or normalize-space(@ariaDescribedBy)='') and (not(@alt) or normalize-space(@alt)='')]"}return{id:"XML_ICON_ACCESSIBILITY",category:"Accessibility Error",path:e(),errorMsg:"An icon must define one of the following attributes: tooltip, ariaLabelledBy, ariaDescribedBy, alt",validate:function(e,t,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o&&r.push(o)}return r}}}),define("fiorixmlanalysis/rules/XML_ICON_BUTTON_ACCESSIBILITY",[],function(){"use strict";function e(){return"//ns:Button[(not(@tooltip) or normalize-space(@tooltip)='') and (not(@text) or normalize-space(@text)='')]"}return{id:"XML_ICON_BUTTON_ACCESSIBILITY",category:"Accessibility Error",path:e(),errorMsg:"An icon-only button must define the following attribute: tooltip",validate:function(e,t,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o&&r.push(o)}return r}}}),define("fiorixmlanalysis/rules/XML_IMAGE_ACCESSIBILITY",[],function(){"use strict";function e(){return"//ns:Image[(not(@tooltip) or normalize-space(@tooltip)='') and (not(@ariaLabelledBy) or normalize-space(@ariaLabelledBy)='') and (not(@ariaDescribedBy) or normalize-space(@ariaDescribedBy)='') and (not(@alt) or normalize-space(@alt)='')]"}return{id:"XML_IMAGE_ACCESSIBILITY",category:"Accessibility Error",path:e(),errorMsg:"An image must define one of the following attributes: tooltip, ariaLabeledBy, ariaDescribedBy, alt",validate:function(e,t,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o&&r.push(o)}return r}}}),define("fiorixmlanalysis/rules/XML_TITLE_ACCESSIBILITY",[],function(){"use strict";function e(){var e="//ns:Dialog[(not(@title) or normalize-space(@title)='')]",t="//layoutform:SimpleForm[(not(@title) or normalize-space(@title)='')]";return e+"|"+t}return{id:"XML_TITLE_ACCESSIBILITY",category:"Accessibility Error",path:e(),errorMsg:"A dialog or simple form must define the following attribute: title",validate:function(e,t,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o&&r.push(o)}return r}}}),define("fiorixmlanalysis/rules/XML_PAGE_ACCESSIBILITY",[],function(){"use strict";function e(){return"//ns:Page/ns:customHeader//ns:Title[not(@text) or normalize-space(@text)='']//ancestor::ns:Page | //ns:Page/ns:customHeader[count(descendant::ns:Title)=0]//ancestor::ns:Page | //ns:Page[count(ns:customHeader)=0 and (not(@title) or normalize-space(@title)='')]"}return{id:"XML_PAGE_ACCESSIBILITY",category:"Accessibility Error",path:e(),errorMsg:"A page must define a title attribute or a custom header with a title element within.",validate:function(e,t,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o&&r.push(o)}return r}}}),define("fiorixmlanalysis/rules/XML_TABLE_ACCESSIBILITY",[],function(){"use strict";function e(){return"//ns:Table/ns:headerToolbar[count(descendant::ns:Title)=0]//ancestor::ns:Table | //ns:Table[count(ns:headerToolbar)=0]"}return{id:"XML_TABLE_ACCESSIBILITY",category:"Accessibility Error",path:e(),errorMsg:"A table must define a custom header with a title element within.",validate:function(e,t,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o&&r.push(o)}return r}}}),define("fiorixmlanalysis/rules/DG_XML_FOOTER_BUTTON_TEXT_ICON",[],function(){"use strict";return{id:"DG_XML_FOOTER_BUTTON_TEXT_ICON",category:"Desgin Guidelines Error",path:"//ns:Page/ns:footer/*/ns:Button[@text and @icon]",errorMsg:"A footer button must either have an icon or a text.",validate:function(e,t,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o&&r.push(o)}return r}}}),define("fiorixmlanalysis/rules/DG_XML_LIST_BASE_SHOW_NO_DATA",[],function(){"use strict";function e(){return"//ns:List[@showNoData and translate(@showNoData,'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz')!='true']|//ns:Table[@showNoData and translate(@showNoData,'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz')!='true']"}return{id:"DG_XML_LIST_BASE_SHOW_NO_DATA",category:"Desgin Guidelines Error",path:e(),errorMsg:"List/Table: Attribute showNoData must be set to true",validate:function(e,t,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o&&r.push(o)}return r}}}),define("fiorixmlanalysis/rules/DG_XML_NO_DUPLICATE_ICONS",[],function(){"use strict";function e(e){return{tabbar:e,iconList:{}}}function t(t,n){for(var r=0,i=t.length;i>r;r++)if(t[r].tabbar===n)return t[r];return t[t.push(e(n))-1]}return{id:"DG_XML_NO_DUPLICATE_ICONS",category:"Desgin Guidelines Error",path:"//ns:IconTabBar/ns:items/ns:IconTabFilter[@icon]",errorMsg:"A specific icon must not occur twice in a tab bar",validate:function(e,n,r){for(var i=[],o=[],a=0;a<r.length;a++){var s=r[a];if(s){var u,c=s.parentNode.parentNode,l=t(o,c),p=s.getAttribute("icon");l&&(u=l.iconList,u[p]=u[p]||[],u[p].push(s))}}for(var f=0,d=o.length;d>f;f++){c=o[f];for(var h in c.iconList)u[h].length>1&&(i=i.concat(u[h]))}return i}}}),define("fiorixmlanalysis/rules/DG_XML_NO_SINGLE_TAB",[],function(){"use strict";return{id:"DG_XML_NO_SINGLE_TAB",category:"Desgin Guidelines Error",path:"//ns:IconTabBar/ns:items[count(ns:IconTabFilter)=1]//ancestor::ns:IconTabBar",errorMsg:"An icon tab bar should at least have two icon tab filter.",validate:function(e,t,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o&&r.push(o)}return r}}}),define("fiorixmlanalysis/rules/XML_DIALOG_IN_VIEW",[],function(){"use strict";function e(){return"/core:View/ns:Page/following-sibling::ns:Dialog|/core:View/ns:Page/following-sibling::ns:Popover|/core:View/ns:Page/following-sibling::ns:ResponsivePopover|/core:View/ns:Page/following-sibling::ns:ActionSheet"}return{id:"XML_DIALOG_IN_VIEW",category:"Security Error",path:e(),errorMsg:"Dialogs should not be declared in the view but rather in a separate fragment as they can result in UI artifacts.",validate:function(e,t,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o&&r.push(o)}return r}}}),define("fiorixmlanalysis/rules/XML_UPLOAD_IN_VIEW",[],function(){"use strict";function e(){return"//ui:FileUpload[@uploadEnabled='true']|//ui:AddPicture"}return{id:"XML_UPLOAD_IN_VIEW",category:"Security Error",path:e(),errorMsg:"Uploaded files shall be sent to VSI 2.0 before stored on DB.",validate:function(e,t,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o&&r.push(o)}return r}}}),define("fiorixmlanalysis/rules/XML_COMMONS_USAGE",[],function(){"use strict";return{id:"XML_COMMONS_USAGE",category:"Fiori Architectural Guidelines Error",path:"//commons:*",errorMsg:"Usage of sap.ui.commons controls is forbidden, please use controls from sap.m / sap.me or sap.ca.",validate:function(e,t,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o&&r.push(o)}return r}}}),define("fiorixmlanalysis/rules/XML_FORM_USAGE",[],function(){"use strict";return{id:"XML_FORM_USAGE",category:"Fiori Architectural Guidelines Error",path:"//form:*",errorMsg:"Usage of sap.ui.commons.form is deprecated, please use sap.ui.layout.form.",validate:function(e,t,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o&&r.push(o)}return r}}}),define("fiorixmlanalysis/rules/XML_LAYOUT_USAGE",[],function(){"use strict";return{id:"XML_LAYOUT_USAGE",category:"Fiori Architectural Guidelines Error",path:"//layout:*",errorMsg:"Usage of sap.ui.commons.layout is deprecated, please use sap.ui.layout.",validate:function(e,t,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o&&r.push(o)}return r}}}),define("fiorixmlanalysis/rules/XML_MISSING_STABLE_ID",[],function(){"use strict";function e(){return"//ns:Label[(not(@id) or normalize-space(@id)='')]|//ns:Column[(not(@id) or normalize-space(@id)='')]|//ns:Button[(not(@id) or normalize-space(@id)='')]|//ns:ObjectAttribute[(not(@id) or normalize-space(@id)='')]|//ns:Toolbar[(not(@id) or normalize-space(@id)='')]|//ns:IconTabFilter[(not(@id) or normalize-space(@id)='')]|//ns:IconTabBar[(not(@id) or normalize-space(@id)='')]|//ns:SearchField[(not(@id) or normalize-space(@id)='')]|//ns:Page[(not(@id) or normalize-space(@id)='')]|//navpopover:SmartLink[(not(@id) or normalize-space(@id)='')]|//sfilter:controlConfiguration[(not(@id) or normalize-space(@id)='')]|//sfilter:SmartFilterBar[(not(@id) or normalize-space(@id)='')]|//sfield:SmartField[(not(@id) or normalize-space(@id)='')]|//sfield:SmartLabel[(not(@id) or normalize-space(@id)='')]|//sform:SmartForm[(not(@id) or normalize-space(@id)='')]|//stable:SmartTable[(not(@id) or normalize-space(@id)='')]|//svariants:SmartVariantManagement[(not(@id) or normalize-space(@id)='')]|//svariants:SmartVariantManagementUi2[(not(@id) or normalize-space(@id)='')]|//core:Item[(not(@id) or normalize-space(@id)='')]|//uilayout:DynamicSideContent[(not(@id) or normalize-space(@id)='')]|//uilayout:FixFlex[(not(@id) or normalize-space(@id)='')]|//uilayout:Grid[(not(@id) or normalize-space(@id)='')]|//uilayout:GridData[(not(@id) or normalize-space(@id)='')]|//uilayout:GridIndent[(not(@id) or normalize-space(@id)='')]|//uilayout:GridPosition[(not(@id) or normalize-space(@id)='')]|//uilayout:GridSpan[(not(@id) or normalize-space(@id)='')]|//uilayout:HorizontalLayout[(not(@id) or normalize-space(@id)='')]|//uilayout:ResponsiveFlowLayout[(not(@id) or normalize-space(@id)='')]|//uilayout:ResponsiveFlowLayoutData[(not(@id) or normalize-space(@id)='')]|//uilayout:Splitter[(not(@id) or normalize-space(@id)='')]|//uilayout:SplitterLayoutData[(not(@id) or normalize-space(@id)='')]|//uilayout:VerticalLayout[(not(@id) or normalize-space(@id)='')]|//layoutform:Form[(not(@id) or normalize-space(@id)='')]|//layoutform:FormContainer[(not(@id) or normalize-space(@id)='')]|//layoutform:FormElement[(not(@id) or normalize-space(@id)='')]|//layoutform:FormLayout[(not(@id) or normalize-space(@id)='')]|//layoutform:GridContainerData[(not(@id) or normalize-space(@id)='')]|//layoutform:GridElementCells[(not(@id) or normalize-space(@id)='')]|//layoutform:GridElementData[(not(@id) or normalize-space(@id)='')]|//layoutform:GridLayout[(not(@id) or normalize-space(@id)='')]|//layoutform:ResponsiveGridLayout[(not(@id) or normalize-space(@id)='')]|//layoutform:ResponsiveLayout[(not(@id) or normalize-space(@id)='')]|//layoutform:SimpleForm[(not(@id) or normalize-space(@id)='')]|//layoutform:SimpleFormLayout[(not(@id) or normalize-space(@id)='')]"}return{id:"XML_MISSING_STABLE_ID",category:"Fiori Architectural Guidelines Error",path:e(),errorMsg:"An ID must be set for this control.",validate:function(e,t,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];o&&r.push(o)}return r}}}),define("fiorixmlanalysis/rules/XML_DEPRECATION",[],function(){"use strict";function e(){return"//*"}function t(e,t){return-1!==e.indexOf(t,e.length-t.length)}function n(e){return t(e,".view.xml")||t(e,".fragment.xml")}function r(e,t,n){var r=e+"."+t,i={isDeprecated:!1};return n.hasOwnProperty(r)?n[r].DeprecatedInfo||{isDeprecated:!0}:i}function i(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o&&"class"===o.filetype&&o.Deprecated&&(t[i]=o)}}return t}function o(e){var t={};if(e&&e.metadata&&e.metadata.files)for(var n in e.metadata.files)e.metadata.files.hasOwnProperty(n)&&(t[n]=JSON.parse(e.metadata.files[n].asText()).metadatas);return t}function a(e){for(var t,n="sapui5",r=0;r<e.length;r++)if(e[r].library===n){t=e[r].version;break}return u.librarymetadata.getMetadata(n,"xml",t)}function s(e,t,n){return"The control "+e+"."+t+" is deprecated"+(n.since?" since version "+n.since:"")+"."+(n.description?"\n	"+n.description:"")}var u;return{id:"XML_DEPRECATION",category:"Architectural Guidelines Error",path:e(),errorMsg:"",setServiceProvider:function(e){u=e},validate:function(e,t,c){var l=this;return u&&u.document&&u.projectmetadata&&u.librarymetadata?n(t)?u.document.getDocumentByPath(t).then(u.projectmetadata.getDependencies).then(a).then(o).then(i).then(function(e){for(var t=[],n=0;n<c.length;n++){var i=c[n];if(i){var o=r(i.namespaceURI,i.localName,e);o.isDeprecated&&(i.message=s(i.namespaceURI,i.localName,o),t.push(i))}}return{id:l.id,category:l.category,errorMsg:l.errorMsg,violations:t}}):Q([]):Q([])}}}),define("fiorixmlanalysis/rules/XML_METADATA_MEDIA_SRC_WITHOUT_FORMATTER",[],function(){"use strict";return{id:"XML_METADATA_MEDIA_SRC_WITHOUT_FORMATTER",category:"Fiori Architectural Guidelines Error",path:"//ns:UploadCollectionItem[@url]",errorMsg:"Use a formatter to generate absolute __metadata/media_src URLs",validate:function(e,t,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];if(o){var a=o.getAttribute("url");-1===a.indexOf("formatter")&&(a.indexOf("__metadata.media_src")>-1||a.indexOf("__metadata/media_src")>-1)&&r.push(o)}}return r}}}),define("fiorixmlanalysis/reporter/analysisReporter",["../utils/XPathUtils","../rules/severity","../rules/XML_ICON_ACCESSIBILITY","../rules/XML_ICON_BUTTON_ACCESSIBILITY","../rules/XML_IMAGE_ACCESSIBILITY","../rules/XML_TITLE_ACCESSIBILITY","../rules/XML_PAGE_ACCESSIBILITY","../rules/XML_TABLE_ACCESSIBILITY","../rules/DG_XML_FOOTER_BUTTON_TEXT_ICON","../rules/DG_XML_LIST_BASE_SHOW_NO_DATA","../rules/DG_XML_NO_DUPLICATE_ICONS","../rules/DG_XML_NO_SINGLE_TAB","../rules/XML_DIALOG_IN_VIEW","../rules/XML_UPLOAD_IN_VIEW","../rules/XML_COMMONS_USAGE","../rules/XML_FORM_USAGE","../rules/XML_LAYOUT_USAGE","../rules/XML_MISSING_STABLE_ID","../rules/XML_DEPRECATION","../rules/XML_METADATA_MEDIA_SRC_WITHOUT_FORMATTER"],function(e,t){"use strict";function n(e){i[e.id]=e}for(var r=2,i=Object.create(null),o=r,a=arguments.length;a>o;o++){var s=arguments[o];s&&n(s)}return{id:"analysisReporter",init:function(e){i.XML_DEPRECATION.setServiceProvider(e)},report:function(e,t,n,r){return this.reportAnalysisErrors(e,t,n,r,this.setRootSeverity,this.reportError)},reportAnalysisErrors:function(n,r,o,a,s,u){var c=[];for(var l in i){var p,f,d=i[l];a.indexOf(t.get(d.id))>=0&&(p=e.exec(d.path,n),f=d.validate(o,r,p),f.then?c.push(f):c.push(Q({id:d.id,category:d.category,errorMsg:d.errorMsg,violations:f})))}return Q.all(c).then(function(e){for(var n=0;n<e.length;n++){var i=e[n],a=t.get(i.id);
if(i.violations&&i.violations.length>0){s(o,a);for(var c=0;c<i.violations.length;c++){var l=i.violations[c];u(o,{id:i.id,category:i.category,checker:"Fiori XML Analysis",helpUrl:"https://github.wdf.sap.corp/fiori-code-quality/documentation/blob/master/analysis-plugin/"+i.id+".md",line:l.position.line.start,column:l.position.column.start,message:l.message||i.errorMsg||"",path:r,severity:a,source:l.outerHTML})}}}})},reportError:function(e,t){e&&e.issues&&e.issues.push(t)},setRootSeverity:function(e,t){if(t){switch(t){case"error":if(e.root.severity&&"info"!==e.root.severity&&"warning"!==e.root.severity)return;break;default:return}e.root.severity=t}}}}),define("fiorixmlanalysis/service/XmlAnalysis",["sap/watt/lib/XMLDomParser/dom_parser","../utils/customXmlParser","../reporter/syntaxReporter","../reporter/analysisReporter","../config/default"],function(e,t,n,r,i){"use strict";function o(){return{root:{},issues:[]}}return{init:function(){r.init(this.context.service)},getIssues:function(i,a,s){var u=this;return Q(o()).then(function(t){var r=new e.DomParser;r.parseFromString(i);var o=n.report(r,s,t,u.context);return o?Q.resolve(t):Q.reject(t)}).then(function(e){var n=r.report(t.parseXML(i),s,e,a.show);return n.then(function(){return e})},function(e){return e})},getIssuesSynchronously:function(e,t,n){return this.getIssues(e,t,n)},getPathToImplementationModule:function(){return"fiori.webide.xml.analysis.plugin/src/main/service/XmlAnalysis"},getCustomRulesContent:function(){return{}},convertRulesToDisplayFormat:function(){var e=[];return e},convertRulesToConcreteFormat:function(){return[]},getConfiguration:function(e){return{show:e,rules:{}}},getDefaultConfiguration:function(){return i.xmlAnalysisConfig}}}),define("sap.watt.saptoolsets.fiori.editor.appdescriptoreditor/util/Utilities",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{_convertEnumToMap:function(e){for(var t=e,n=[],r=0;r<t.length;r++)n.push({key:t[r],text:t[r]});return n},_convertStringToItemArray:function(e,t){var n={};return n.item={text:e,key:e},n.key=n.text=e,n.type=t,n},_convertObjectToMap:function(e){return jQuery.map(e,function(e){e.text=e}),e},_convertObjectItemToMap:function(t,n){return jQuery.map(t,function(t){t.item=e.cloneDeep(t),t.type=n}),t},_converMapToItemArray:function(t,n){var r=[];return e.forEach(t,function(t,i){var o={};o.name=i,o.item={},o.item[i]=e.cloneDeep(t),o.type=n,e.merge(o,e.cloneDeep(t)),r.push(o)}),r},_convertFromManifestObjectCrossNavigationToArray:function(t){var n=e.cloneDeep(t),r=[];return e.forEach(n,function(t,n){if(t&&t.signature&&t.signature.parameters){var i=[];e.forEach(t.signature.parameters,function(t,n){var r=e.cloneDeep(t);r.Name=n,i.push(r)}),t.signature.parameters=i}var o=e.cloneDeep(t);o.key=n,r.push(o)}),r}}}),define("sap.watt.saptoolsets.fiori.editor.appdescriptoreditor/service/AppDescriptorEditor",["sap/watt/common/plugin/platform/service/ui/AbstractEditor","sap/watt/lib/lodash/lodash","../util/Utilities"],function(e,t,n){"use strict";var r=e.extend("sap.watt.saptoolsets.fiori.editor.plugin.appdescriptoreditor.service.AppDescriptorEditor",{_oDocument:null,_oManifestContent:{},_oAdjustedSchema:null,_sSignaturesKeys:"",_bSchemaVersion_1_1_0:!1,_bVisibility:!1,configure:function(e){this.context.service.resource.includeStyles(e.styles).done(),e.repositoryBrowserExtensionFilters.length>0&&(this._aExtensionFilters=e.repositoryBrowserExtensionFilters)},isAvailable:function(){return!0},open:function(e){var n=this;this._oDocument=e,this._oManifestContent={};var r={_version:"1.2.0","sap.app":{_version:"1.2.0"}},i=this._oAppDescriptorEditorView.getController().getSelectedTabName();return this.context.service.usagemonitoring.report("appDescriptor","tab_select",i).done(),this._oDocument.getContent().then(function(e){try{jQuery.extend(n._oManifestContent,JSON.parse(e)),t.isEmpty(n._oManifestContent)||(r=n._oManifestContent),n._oAppDescriptorEditorView.getController().setParsingErrorPage(!1)}catch(i){return n._oAppDescriptorEditorView.getController().setParsingErrorPage(!0),console.log(n.context.i18n.getText("AppDescriptor_invalid_file")),Q()}return n.context.service.fioriSchemaProvider.getFlatSchema(r).then(function(e){n._bVisibility=sap.watt.getEnv("internal"),n._oAdjustedSchema=e,n._fillManifestSkeleton(n._oAdjustedSchema,n._oManifestContent),n._oAppDescriptorEditorView.getController().setManifestAndSchema(e.properties,n._oManifestContent,n._oDocument)})})},getContent:function(){return this._oAppDescriptorEditorView||(this._oAppDescriptorEditorView=sap.ui.view({viewName:"sap.watt.saptoolsets.fiori.editor.plugin.appdescriptoreditor.ui.AppDescriptorEditor",type:sap.ui.core.mvc.ViewType.XML,viewData:{oContext:this.context,oUtil:n,aExtentionFilters:this._aExtensionFilters}}),this.context.i18n.applyTo(this._oAppDescriptorEditorView),this._oAppDescriptorEditorView.getController().attachEvent("manifestChanged",this._onManifsetChanged,this)),this._oAppDescriptorEditorView},flush:function(){this._oDocument.isDirty()&&this.updateDocument()},_onManifsetChanged:function(){this.updateDocument()},_fillManifestSkeleton:function(e,n,r,i){var o=this,a={},s={},u=null,c="string",l=[],p=[],f=[];if(jQuery.each(e,function(e,t){switch(e){case"properties":a=t;break;case"patternProperties":s=t;break;case"default":u=t;break;case"type":c=t;break;case"enum":l=t;break;case"items":p=t;break;case"required":f=t}}),jQuery.isEmptyObject(a)&&!jQuery.isEmptyObject(s)||!jQuery.isEmptyObject(a)&&jQuery.isEmptyObject(s))jQuery.each(a,function(e,r){!t.isEmpty(f)&&t.contains(f,e)?(void 0===n[e]&&(n[e]={}),o._fillManifestSkeleton(r,n[e],n,e)):void 0!==n[e]&&o._fillManifestSkeleton(r,n[e],n,e)});else{if(jQuery.isPlainObject(r[i])){if(!jQuery.isEmptyObject(r[i]))return}else if(void 0!==r[i])return;if(i){var d=!1;if(r[i]&&jQuery.isArray(r[i])&&(d=!0),u)return d?r[i].push(u):r[i]=u,void 0;if(jQuery.isArray(l)){if(1==l.length)return d?r[i].push(l[0]):r[i]=l[0],void 0;if(l.length>1&&"_version"===i)return d?r[i].push(l[l.length-1]):r[i]=l[l.length-1],void 0;if(l.length>1)return d?r[i].push(l[0]):r[i]=l[0],void 0}switch(c){case"integer":d?r[i].push(0):r[i]=0;break;case"object":d?r[i].push({}):r[i]={};break;case"array":d?r[i].push([]):r[i]=[],o._fillManifestSkeleton(p,r[i],r,i);break;case"boolean":d?r[i].push(!1):r[i]=!1;break;default:d?r[i].push(""):r[i]=""}}}},updateDocument:function(){var e=this;this.context.service.beautifierProcessor.beautify(JSON.stringify(this._oManifestContent),"json").then(function(t){e._oDocument.setContent(t,e.context.self)}).done()}});return r}),define("sap.watt.saptoolsets.fiori.editor.fioriJsValidator/util/configReader",[],function(){"use strict";return{zipLoadCalled:!1,fioriDefaultConfig:{},fioriDefaultCustomRules:{},getFioriConfiguration:function(){var e=this;return Q(e.fioriDefaultConfig)},getFioriRules:function(){var e=this;return Q(e.fioriDefaultCustomRules)},getZipSourceUrl:function(){return require.toUrl("sap.watt.saptoolsets.fiori.editor.fioriJsValidator/rules/eslint.distribution-eslint.configuration.assembly.zip")},_loadDefaultConfig:function(){if(this.zipLoadCalled)return Q();this.zipLoadCalled=!0;var e=this,t=Q.defer(),n=this.getZipSourceUrl(),r=new XMLHttpRequest;return r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=function(){if(4===this.readyState&&this.status<300)try{var n=new JSZip;n.load(this.response);var r="";for(var i in n.files){var o=n.files[i];if(o.options&&o.options.dir)r=i;else if(".eslintrc"===i){var a=JSON.parse(o.asText());e.fioriDefaultConfig=a}else if(-1!==i.indexOf(".js")){var s=i.replace(/\.js/,"");s=s.replace(r,""),e.fioriDefaultCustomRules[s]=e._adaptCustomRulesContent(o.asText())}}t.resolve()}catch(u){t.reject(u)}else t.reject(new Error("rules could not be found. failed with status "+this.status))},r.onerror=function(e){t.reject(e)},r.send(null),t.promise},_adaptCustomRulesContent:function(e){var t=e.replace(/(\s*(module\.exports)\s*=)/,"\n return ");return t}}}),function(){var e=function t(n,r,i){function o(s,u){if(!r[s]){if(!n[s]){var c="function"==typeof e&&e;if(!u&&c)return c(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var p=r[s]={exports:{}};n[s][0].call(p.exports,function(e){var t=n[s][1][e];return o(t?t:e)},p,p.exports,t,n,r,i)}return r[s].exports}for(var a="function"==typeof e&&e,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t){"use strict";var n=e("./ast-node-types");t.exports={createArrayExpression:function(e){return{type:n.ArrayExpression,elements:e}},createArrowFunctionExpression:function(e,t,r){return{type:n.ArrowFunctionExpression,id:null,params:e,body:t,generator:!1,expression:r}},createAssignmentExpression:function(e,t,r){return{type:n.AssignmentExpression,operator:e,left:t,right:r}},createAssignmentPattern:function(e,t){return{type:n.AssignmentPattern,left:e,right:t}},createBinaryExpression:function(e,t,r){var i="||"===e||"&&"===e?n.LogicalExpression:n.BinaryExpression;return{type:i,operator:e,left:t,right:r}},createBlockStatement:function(e){return{type:n.BlockStatement,body:e}},createBreakStatement:function(e){return{type:n.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:n.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:n.CatchClause,param:e,body:t}},createClassBody:function(e){return{type:n.ClassBody,body:e}},createClassExpression:function(e,t,r){return{type:n.ClassExpression,id:e,superClass:t,body:r}},createClassDeclaration:function(e,t,r){return{type:n.ClassDeclaration,id:e,superClass:t,body:r}},createMethodDefinition:function(e,t,r,i,o){return{type:n.MethodDefinition,key:r,value:i,kind:t,"static":"static"===e,computed:o}},createConditionalExpression:function(e,t,r){return{type:n.ConditionalExpression,test:e,consequent:t,alternate:r}},createContinueStatement:function(e){return{type:n.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:n.DebuggerStatement}},createEmptyStatement:function(){return{type:n.EmptyStatement}},createExpressionStatement:function(e){return{type:n.ExpressionStatement,expression:e}},createWhileStatement:function(e,t){return{type:n.WhileStatement,test:e,body:t}},createDoWhileStatement:function(e,t){return{type:n.DoWhileStatement,body:t,test:e}},createForStatement:function(e,t,r,i){return{type:n.ForStatement,init:e,test:t,update:r,body:i}},createForInStatement:function(e,t,r){return{type:n.ForInStatement,left:e,right:t,body:r,each:!1}},createForOfStatement:function(e,t,r){return{type:n.ForOfStatement,left:e,right:t,body:r}},createFunctionDeclaration:function(e,t,r,i,o){return{type:n.FunctionDeclaration,id:e,params:t||[],body:r,generator:!!i,expression:!!o}},createFunctionExpression:function(e,t,r,i,o){return{type:n.FunctionExpression,id:e,params:t||[],body:r,generator:!!i,expression:!!o}},createIdentifier:function(e){return{type:n.Identifier,name:e}},createIfStatement:function(e,t,r){return{type:n.IfStatement,test:e,consequent:t,alternate:r}},createLabeledStatement:function(e,t){return{type:n.LabeledStatement,label:e,body:t}},createLiteralFromSource:function(e,t){var r={type:n.Literal,value:e.value,raw:t.slice(e.range[0],e.range[1])};return e.regex&&(r.regex=e.regex),r},createTemplateElement:function(e,t){return{type:n.TemplateElement,value:e,tail:t}},createTemplateLiteral:function(e,t){return{type:n.TemplateLiteral,quasis:e,expressions:t}},createSpreadElement:function(e){return{type:n.SpreadElement,argument:e}},createTaggedTemplateExpression:function(e,t){return{type:n.TaggedTemplateExpression,tag:e,quasi:t}},createMemberExpression:function(e,t,r){return{type:n.MemberExpression,computed:"["===e,object:t,property:r}},createNewExpression:function(e,t){return{type:n.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:n.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:n.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e,t){return{type:n.Program,body:e,sourceType:t}},createProperty:function(e,t,r,i,o,a){return{type:n.Property,key:t,value:r,kind:e,method:i,shorthand:o,computed:a}},createRestElement:function(e){return{type:n.RestElement,argument:e}},createReturnStatement:function(e){return{type:n.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:n.SequenceExpression,expressions:e}},createSuper:function(){return{type:n.Super}},createSwitchCase:function(e,t){return{type:n.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:n.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:n.ThisExpression}},createThrowStatement:function(e){return{type:n.ThrowStatement,argument:e}},createTryStatement:function(e,t,r){return{type:n.TryStatement,block:e,handler:t,finalizer:r}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:n.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:n.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:n.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:n.VariableDeclarator,id:e,init:t}},createWithStatement:function(e,t){return{type:n.WithStatement,object:e,body:t}},createYieldExpression:function(e,t){return{type:n.YieldExpression,argument:e||null,delegate:t}},createJSXAttribute:function(e,t){return{type:n.JSXAttribute,name:e,value:t||null}},createJSXSpreadAttribute:function(e){return{type:n.JSXSpreadAttribute,argument:e}},createJSXIdentifier:function(e){return{type:n.JSXIdentifier,name:e}},createJSXNamespacedName:function(e,t){return{type:n.JSXNamespacedName,namespace:e,name:t}},createJSXMemberExpression:function(e,t){return{type:n.JSXMemberExpression,object:e,property:t}},createJSXElement:function(e,t,r){return{type:n.JSXElement,openingElement:e,closingElement:t,children:r}},createJSXEmptyExpression:function(){return{type:n.JSXEmptyExpression}},createJSXExpressionContainer:function(e){return{type:n.JSXExpressionContainer,expression:e}},createJSXOpeningElement:function(e,t,r){return{type:n.JSXOpeningElement,name:e,selfClosing:r,attributes:t}},createJSXClosingElement:function(e){return{type:n.JSXClosingElement,name:e}},createExportSpecifier:function(e,t){return{type:n.ExportSpecifier,exported:t||e,local:e}},createImportDefaultSpecifier:function(e){return{type:n.ImportDefaultSpecifier,local:e}},createImportNamespaceSpecifier:function(e){return{type:n.ImportNamespaceSpecifier,local:e}},createExportNamedDeclaration:function(e,t,r){return{type:n.ExportNamedDeclaration,declaration:e,specifiers:t,source:r}},createExportDefaultDeclaration:function(e){return{type:n.ExportDefaultDeclaration,declaration:e}},createExportAllDeclaration:function(e){return{type:n.ExportAllDeclaration,source:e}},createImportSpecifier:function(e,t){return{type:n.ImportSpecifier,local:e||t,imported:t}},createImportDeclaration:function(e,t){return{type:n.ImportDeclaration,specifiers:e,source:t}}}},{"./ast-node-types":2}],2:[function(e,t){"use strict";t.exports={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression",JSXIdentifier:"JSXIdentifier",JSXNamespacedName:"JSXNamespacedName",JSXMemberExpression:"JSXMemberExpression",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXElement:"JSXElement",JSXClosingElement:"JSXClosingElement",JSXOpeningElement:"JSXOpeningElement",JSXAttribute:"JSXAttribute",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportAllDeclaration:"ExportAllDeclaration",ExportSpecifier:"ExportSpecifier",ImportDeclaration:"ImportDeclaration",ImportSpecifier:"ImportSpecifier",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier"}},{}],3:[function(e,t){"use strict";var n=e("./ast-node-types"),r={trailingComments:[],leadingComments:[],bottomRightStack:[]};t.exports={reset:function(){r.trailingComments=[],r.leadingComments=[],r.bottomRightStack=[]},addComment:function(e){r.trailingComments.push(e),r.leadingComments.push(e)},processComment:function(e){var t,i,o;if(!(e.type===n.Program&&e.body.length>0)){for(r.trailingComments.length>0?r.trailingComments[0].range[0]>=e.range[1]?(i=r.trailingComments,r.trailingComments=[]):r.trailingComments.length=0:r.bottomRightStack.length>0&&r.bottomRightStack[r.bottomRightStack.length-1].trailingComments&&r.bottomRightStack[r.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(i=r.bottomRightStack[r.bottomRightStack.length-1].trailingComments,delete r.bottomRightStack[r.bottomRightStack.length-1].trailingComments);r.bottomRightStack.length>0&&r.bottomRightStack[r.bottomRightStack.length-1].range[0]>=e.range[0];)t=r.bottomRightStack.pop();if(t)t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments);else if(r.leadingComments.length>0)if(r.leadingComments[r.leadingComments.length-1].range[1]<=e.range[0])e.leadingComments=r.leadingComments,r.leadingComments=[];else{for(o=0;o<r.leadingComments.length&&!(r.leadingComments[o].range[1]>e.range[0]);o++);e.leadingComments=r.leadingComments.slice(0,o),0===e.leadingComments.length&&delete e.leadingComments,i=r.leadingComments.slice(o),0===i.length&&(i=null)}i&&(e.trailingComments=i),r.bottomRightStack.push(e)}}}},{"./ast-node-types":2}],4:[function(e,t){"use strict";t.exports={arrowFunctions:!1,blockBindings:!0,destructuring:!1,regexUFlag:!1,regexYFlag:!1,templateStrings:!1,binaryLiterals:!1,octalLiterals:!1,unicodeCodePointEscapes:!0,defaultParams:!1,restParams:!1,forOf:!1,objectLiteralComputedProperties:!1,objectLiteralShorthandMethods:!1,objectLiteralShorthandProperties:!1,objectLiteralDuplicateProperties:!1,generators:!1,spread:!1,superInFunctions:!1,classes:!1,modules:!1,jsx:!1,globalReturn:!1}},{}],5:[function(e,t){"use strict";t.exports={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",InvalidRegExpFlag:"Invalid regular expression flag",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInFormalsList:"Invalid left-hand side in formals list",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",NoUnintializedConst:"Const must be initialized",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",IllegalYield:"Illegal yield expression",IllegalSpread:"Illegal spread element",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",DefaultRestParameter:"Rest parameter can not have a default value",ElementAfterSpreadElement:"Spread must be the final element of an element list",ObjectPatternAsRestParameter:"Invalid rest parameter",ObjectPatternAsSpread:"Invalid spread argument",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",DuplicatePrototypeProperty:"Duplicate '__proto__' property in object literal are not allowed",ConstructorSpecialMethod:"Class constructor may not be an accessor",DuplicateConstructor:"A class may only have one constructor",StaticPrototype:"Classes may not have static property named prototype",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",InvalidJSXAttributeValue:"JSX value should be either an expression or a quoted JSX text",ExpectedJSXClosingTag:"Expected corresponding JSX closing tag for %0",AdjacentJSXElements:"Adjacent JSX elements must be wrapped in an enclosing tag",MissingFromClause:"Missing from clause",NoAsAfterImportNamespace:"Missing as after import *",InvalidModuleSpecifier:"Invalid module specifier",IllegalImportDeclaration:"Illegal import declaration",IllegalExportDeclaration:"Illegal export declaration"}},{}],6:[function(e,t){"use strict";function n(){this.$data={}}n.prototype.get=function(e){return e="$"+e,this.$data[e]},n.prototype.set=function(e,t){return e="$"+e,this.$data[e]=t,this},n.prototype.has=function(e){return e="$"+e,Object.prototype.hasOwnProperty.call(this.$data,e)},n.prototype.delete=function(e){return e="$"+e,delete this.$data[e]},t.exports=n},{}],7:[function(e,t){"use strict";var n={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),LeadingZeros:new RegExp("^0+(?!$)")};t.exports={Regex:n,isDecimalDigit:function(e){return e>=48&&57>=e},isHexDigit:function(e){return"0123456789abcdefABCDEF".indexOf(e)>=0},isOctalDigit:function(e){return"01234567".indexOf(e)>=0},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||92===e||e>=128&&n.NonAsciiIdentifierStart.test(String.fromCharCode(e))},isIdentifierPart:function(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e||92===e||e>=128&&n.NonAsciiIdentifierPart.test(String.fromCharCode(e))},isFutureReservedWord:function(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}},isStrictModeReservedWord:function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},isRestrictedWord:function(e){return"eval"===e||"arguments"===e},isKeyword:function(e,t,n){if(t&&this.isStrictModeReservedWord(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||!n.generators&&"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},isJSXIdentifierStart:function(e){return 92!==e&&this.isIdentifierStart(e)},isJSXIdentifierPart:function(e){return 92!==e&&(45===e||this.isIdentifierPart(e))}}},{}],8:[function(e,t){"use strict";var n={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9,Template:10,JSXIdentifier:11,JSXText:12},r={};r[n.BooleanLiteral]="Boolean",r[n.EOF]="<end>",r[n.Identifier]="Identifier",r[n.Keyword]="Keyword",r[n.NullLiteral]="Null",r[n.NumericLiteral]="Numeric",r[n.Punctuator]="Punctuator",r[n.StringLiteral]="String",r[n.RegularExpression]="RegularExpression",r[n.Template]="Template",r[n.JSXIdentifier]="JSXIdentifier",r[n.JSXText]="JSXText";var i=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="];t.exports={Token:n,TokenName:r,FnExprTokens:i}},{}],9:[function(e,t){"use strict";t.exports={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪","int":"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}},{}],10:[function(e,t){t.exports={name:"espree",description:"An actively-maintained fork of Esprima, the ECMAScript parsing infrastructure for multipurpose analysis",author:{name:"Nicholas C. Zakas",email:"nicholas+npm@nczconsulting.com"},homepage:"https://github.com/eslint/espree",main:"espree.js",bin:{esparse:"./bin/esparse.js",esvalidate:"./bin/esvalidate.js"},version:"2.0.3",files:["bin","lib","test/run.js","test/runner.js","test/test.js","test/compat.js","test/reflect.js","espree.js"],engines:{node:">=0.10.0"},repository:{type:"git",url:"git+ssh://git@github.com/eslint/espree.git"},bugs:{url:"http://github.com/eslint/espree.git"},licenses:[{type:"BSD",url:"http://github.com/nzakas/espree/raw/master/LICENSE"}],devDependencies:{browserify:"^7.0.0",chai:"^1.10.0","complexity-report":"~0.6.1",dateformat:"^1.0.11",eslint:"^0.9.2",esprima:"git://github.com/jquery/esprima.git","esprima-fb":"^8001.2001.0-dev-harmony-fb",istanbul:"~0.2.6","json-diff":"~0.3.1",leche:"^1.0.1",mocha:"^2.0.1","npm-license":"^0.2.3",optimist:"~0.6.0",regenerate:"~0.5.4",semver:"^4.1.1",shelljs:"^0.3.0","shelljs-nodecli":"^0.1.1","unicode-6.3.0":"~0.1.0"},keywords:["ast","ecmascript","javascript","parser","syntax"],scripts:{"generate-regex":"node tools/generate-identifier-regex.js",test:"npm run-script lint && node Makefile.js test && node test/run.js",lint:"node Makefile.js lint",patch:"node Makefile.js patch",minor:"node Makefile.js minor",major:"node Makefile.js major",browserify:"node Makefile.js browserify",coverage:"npm run-script analyze-coverage && npm run-script check-coverage","analyze-coverage":"node node_modules/istanbul/lib/cli.js cover test/runner.js","check-coverage":"node node_modules/istanbul/lib/cli.js check-coverage --statement 99 --branch 99 --function 99",complexity:"npm run-script analyze-complexity && npm run-script check-complexity","analyze-complexity":"node tools/list-complexity.js","check-complexity":"node node_modules/complexity-report/src/cli.js --maxcc 14 --silent -l -w espree.js",benchmark:"node test/benchmarks.js","benchmark-quick":"node test/benchmarks.js quick"},dependencies:{},gitHead:"b60b597cfe4834aacd16c90179ce73e22705c132",_id:"espree@2.0.3",_shasum:"1fbdff60a410bd0d416b1ab3d6230d34b7a450e1",_from:"espree@>=2.0.1 <3.0.0",_npmVersion:"1.4.28",_npmUser:{name:"nzakas",email:"nicholas@nczconsulting.com"},maintainers:[{name:"nzakas",email:"nicholas@nczconsulting.com"}],dist:{shasum:"1fbdff60a410bd0d416b1ab3d6230d34b7a450e1",tarball:"http://registry.npmjs.org/espree/-/espree-2.0.3.tgz"},directories:{},_resolved:"https://registry.npmjs.org/espree/-/espree-2.0.3.tgz",readme:"ERROR: No README data found!"}
},{}],espree:[function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error("ASSERT: "+t)}function i(e,t,n,i,o){var a;r("number"==typeof n,"Comment must have valid position"),nr.lastCommentStart>=n||(nr.lastCommentStart=n,a={type:e,value:t},rr.range&&(a.range=[n,i]),rr.loc&&(a.loc=o),rr.comments.push(a),rr.attachComment&&fr.addComment(a))}function o(e){var t,n,r,o;for(t=Kn-e,n={start:{line:Yn,column:Kn-Zn-e}};er>Kn;)if(r=$n.charCodeAt(Kn),++Kn,ir.isLineTerminator(r))return rr.comments&&(o=$n.slice(t+e,Kn-1),n.end={line:Yn,column:Kn-Zn-1},i("Line",o,t,Kn-1,n)),13===r&&10===$n.charCodeAt(Kn)&&++Kn,++Yn,Zn=Kn,void 0;rr.comments&&(o=$n.slice(t+e,Kn),n.end={line:Yn,column:Kn-Zn},i("Line",o,t,Kn,n))}function a(){var e,t,n,r;for(rr.comments&&(e=Kn-2,t={start:{line:Yn,column:Kn-Zn-2}});er>Kn;)if(n=$n.charCodeAt(Kn),ir.isLineTerminator(n))13===n&&10===$n.charCodeAt(Kn+1)&&++Kn,++Yn,++Kn,Zn=Kn,Kn>=er&&rt({},cr.UnexpectedToken,"ILLEGAL");else if(42===n){if(47===$n.charCodeAt(Kn+1))return++Kn,++Kn,rr.comments&&(r=$n.slice(e+2,Kn-2),t.end={line:Yn,column:Kn-Zn},i("Block",r,e,Kn,t)),void 0;++Kn}else++Kn;rt({},cr.UnexpectedToken,"ILLEGAL")}function s(){var e,t;for(t=0===Kn;er>Kn;)if(e=$n.charCodeAt(Kn),ir.isWhiteSpace(e))++Kn;else if(ir.isLineTerminator(e))++Kn,13===e&&10===$n.charCodeAt(Kn)&&++Kn,++Yn,Zn=Kn,t=!0;else if(47===e)if(e=$n.charCodeAt(Kn+1),47===e)++Kn,++Kn,o(2),t=!0;else{if(42!==e)break;++Kn,++Kn,a()}else if(t&&45===e){if(45!==$n.charCodeAt(Kn+1)||62!==$n.charCodeAt(Kn+2))break;Kn+=3,o(3)}else{if(60!==e)break;if("!--"!==$n.slice(Kn+1,Kn+4))break;++Kn,++Kn,++Kn,++Kn,o(4)}}function u(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;n>t;++t){if(!(er>Kn&&ir.isHexDigit($n[Kn])))return"";r=$n[Kn++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(i)}function c(){var e,t,n,r;for(e=$n[Kn],t=0,"}"===e&&rt({},cr.UnexpectedToken,"ILLEGAL");er>Kn&&(e=$n[Kn++],ir.isHexDigit(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&rt({},cr.UnexpectedToken,"ILLEGAL"),65535>=t?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(1023&t-65536)+56320,String.fromCharCode(n,r))}function l(){var e,t;for(e=$n.charCodeAt(Kn++),t=String.fromCharCode(e),92===e&&(117!==$n.charCodeAt(Kn)&&rt({},cr.UnexpectedToken,"ILLEGAL"),++Kn,e=u("u"),e&&"\\"!==e&&ir.isIdentifierStart(e.charCodeAt(0))||rt({},cr.UnexpectedToken,"ILLEGAL"),t=e);er>Kn&&(e=$n.charCodeAt(Kn),ir.isIdentifierPart(e));)++Kn,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==$n.charCodeAt(Kn)&&rt({},cr.UnexpectedToken,"ILLEGAL"),++Kn,e=u("u"),e&&"\\"!==e&&ir.isIdentifierPart(e.charCodeAt(0))||rt({},cr.UnexpectedToken,"ILLEGAL"),t+=e);return t}function p(){var e,t;for(e=Kn++;er>Kn;){if(t=$n.charCodeAt(Kn),92===t)return Kn=e,l();if(!ir.isIdentifierPart(t))break;++Kn}return $n.slice(e,Kn)}function f(){var e,t,n;return e=Kn,t=92===$n.charCodeAt(Kn)?l():p(),n=1===t.length?dr.Identifier:ir.isKeyword(t,Jn,rr.ecmaFeatures)?dr.Keyword:"null"===t?dr.NullLiteral:"true"===t||"false"===t?dr.BooleanLiteral:dr.Identifier,{type:n,value:t,lineNumber:Yn,lineStart:Zn,range:[e,Kn]}}function d(){var e,t,n,r,i=Kn,o=$n.charCodeAt(Kn),a=$n[Kn];switch(o){case 40:case 41:case 59:case 44:case 91:case 93:case 58:case 63:case 126:return++Kn,rr.tokenize&&40===o&&(rr.openParenToken=rr.tokens.length),{type:dr.Punctuator,value:String.fromCharCode(o),lineNumber:Yn,lineStart:Zn,range:[i,Kn]};case 123:case 125:return++Kn,rr.tokenize&&123===o&&(rr.openCurlyToken=rr.tokens.length),Kn>nr.curlyLastIndex&&(nr.curlyLastIndex=Kn,123===o?nr.curlyStack.push("{"):nr.curlyStack.pop()),{type:dr.Punctuator,value:String.fromCharCode(o),lineNumber:Yn,lineStart:Zn,range:[i,Kn]};default:if(e=$n.charCodeAt(Kn+1),61===e)switch(o){case 37:case 38:case 42:case 43:case 45:case 47:case 60:case 62:case 94:case 124:return Kn+=2,{type:dr.Punctuator,value:String.fromCharCode(o)+String.fromCharCode(e),lineNumber:Yn,lineStart:Zn,range:[i,Kn]};case 33:case 61:return Kn+=2,61===$n.charCodeAt(Kn)&&++Kn,{type:dr.Punctuator,value:$n.slice(i,Kn),lineNumber:Yn,lineStart:Zn,range:[i,Kn]}}}return t=$n[Kn+1],n=$n[Kn+2],r=$n[Kn+3],">"===a&&">"===t&&">"===n&&"="===r?(Kn+=4,{type:dr.Punctuator,value:">>>=",lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):">"===a&&">"===t&&">"===n?(Kn+=3,{type:dr.Punctuator,value:">>>",lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):"<"===a&&"<"===t&&"="===n?(Kn+=3,{type:dr.Punctuator,value:"<<=",lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):">"===a&&">"===t&&"="===n?(Kn+=3,{type:dr.Punctuator,value:">>=",lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):(rr.ecmaFeatures.spread||rr.ecmaFeatures.restParams||rr.ecmaFeatures.jsx&&nr.inJSXSpreadAttribute)&&"."===a&&"."===t&&"."===n?(Kn+=3,{type:dr.Punctuator,value:"...",lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):a===t&&"+-<>&|".indexOf(a)>=0?(Kn+=2,{type:dr.Punctuator,value:a+t,lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):rr.ecmaFeatures.arrowFunctions&&"="===a&&">"===t?(Kn+=2,{type:dr.Punctuator,value:"=>",lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):"<>=!+-*%&|^/".indexOf(a)>=0?(++Kn,{type:dr.Punctuator,value:a,lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):"."===a?(++Kn,{type:dr.Punctuator,value:a,lineNumber:Yn,lineStart:Zn,range:[i,Kn]}):(rt({},cr.UnexpectedToken,"ILLEGAL"),void 0)}function h(e){for(var t="";er>Kn&&ir.isHexDigit($n[Kn]);)t+=$n[Kn++];return 0===t.length&&rt({},cr.UnexpectedToken,"ILLEGAL"),ir.isIdentifierStart($n.charCodeAt(Kn))&&rt({},cr.UnexpectedToken,"ILLEGAL"),{type:dr.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:Yn,lineStart:Zn,range:[e,Kn]}}function m(e){for(var t,n="";er>Kn&&(t=$n[Kn],"0"===t||"1"===t);)n+=$n[Kn++];return 0===n.length&&rt({},cr.UnexpectedToken,"ILLEGAL"),er>Kn&&(t=$n.charCodeAt(Kn),(ir.isIdentifierStart(t)||ir.isDecimalDigit(t))&&rt({},cr.UnexpectedToken,"ILLEGAL")),{type:dr.NumericLiteral,value:parseInt(n,2),lineNumber:Yn,lineStart:Zn,range:[e,Kn]}}function g(e,t){var n,r;for(ir.isOctalDigit(e)?(r=!0,n="0"+$n[Kn++]):(r=!1,++Kn,n="");er>Kn&&ir.isOctalDigit($n[Kn]);)n+=$n[Kn++];return r||0!==n.length||rt({},cr.UnexpectedToken,"ILLEGAL"),(ir.isIdentifierStart($n.charCodeAt(Kn))||ir.isDecimalDigit($n.charCodeAt(Kn)))&&rt({},cr.UnexpectedToken,"ILLEGAL"),{type:dr.NumericLiteral,value:parseInt(n,8),octal:r,lineNumber:Yn,lineStart:Zn,range:[t,Kn]}}function v(){var e,t,n;if(n=$n[Kn],r(ir.isDecimalDigit(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=Kn,e="","."!==n){if(e=$n[Kn++],n=$n[Kn],"0"===e){if("x"===n||"X"===n)return++Kn,h(t);if(rr.ecmaFeatures.binaryLiterals&&("b"===n||"B"===n))return++Kn,m(t);if(rr.ecmaFeatures.octalLiterals&&("o"===n||"O"===n)||ir.isOctalDigit(n))return g(n,t);n&&ir.isDecimalDigit(n.charCodeAt(0))&&rt({},cr.UnexpectedToken,"ILLEGAL")}for(;ir.isDecimalDigit($n.charCodeAt(Kn));)e+=$n[Kn++];n=$n[Kn]}if("."===n){for(e+=$n[Kn++];ir.isDecimalDigit($n.charCodeAt(Kn));)e+=$n[Kn++];n=$n[Kn]}if("e"===n||"E"===n)if(e+=$n[Kn++],n=$n[Kn],("+"===n||"-"===n)&&(e+=$n[Kn++]),ir.isDecimalDigit($n.charCodeAt(Kn)))for(;ir.isDecimalDigit($n.charCodeAt(Kn));)e+=$n[Kn++];else rt({},cr.UnexpectedToken,"ILLEGAL");return ir.isIdentifierStart($n.charCodeAt(Kn))&&rt({},cr.UnexpectedToken,"ILLEGAL"),{type:dr.NumericLiteral,value:parseFloat(e),lineNumber:Yn,lineStart:Zn,range:[t,Kn]}}function y(e){var t,n,r,i,o=!1;return e||rt({},cr.UnexpectedToken,"ILLEGAL"),ir.isLineTerminator(e.charCodeAt(0))?(++Yn,"\r"===e&&"\n"===$n[Kn]&&++Kn,Zn=Kn,i=""):"u"===e&&"{"===$n[Kn]?rr.ecmaFeatures.unicodeCodePointEscapes?(++Kn,i=c()):rt({},cr.UnexpectedToken,"ILLEGAL"):"u"===e||"x"===e?(r=Kn,n=u(e),n?i=n:(Kn=r,i=e)):"n"===e?i="\n":"r"===e?i="\r":"t"===e?i="	":"b"===e?i="\b":"f"===e?i="\f":"v"===e?i="":ir.isOctalDigit(e)?(t="01234567".indexOf(e),0!==t&&(o=!0),er>Kn&&ir.isOctalDigit($n[Kn])&&(o=!0,t=8*t+"01234567".indexOf($n[Kn++]),"0123".indexOf(e)>=0&&er>Kn&&ir.isOctalDigit($n[Kn])&&(t=8*t+"01234567".indexOf($n[Kn++]))),i=String.fromCharCode(t)):i=e,{ch:i,octal:o}}function _(){var e,t,n="",i=!1,o=Kn,a=Yn,s=Zn,u=$n[Kn];for(r("'"===u||'"'===u,"String literal must starts with a quote"),++Kn;er>Kn&&(e=$n[Kn++],!ir.isLineTerminator(e.charCodeAt(0)));){if(e===u){u="";break}"\\"===e?(e=$n[Kn++],t=y(e),n+=t.ch,i=t.octal||i):n+=e}return""!==u&&rt({},cr.UnexpectedToken,"ILLEGAL"),{type:dr.StringLiteral,value:n,octal:i,startLineNumber:a,startLineStart:s,lineNumber:Yn,lineStart:Zn,range:[o,Kn]}}function x(){var e,t,n="",r=Kn,i=!1,o=!1,a="`"===$n[Kn];for(++Kn;er>Kn;){if(e=$n[Kn++],"`"===e){o=!0,i=!0;break}if("$"===e){if("{"===$n[Kn]){++Kn,i=!0;break}n+=e}else"\\"===e?(e=$n[Kn++],t=y(e),t.octal&&rt({},cr.TemplateOctalLiteral),n+=t.ch):ir.isLineTerminator(e.charCodeAt(0))?(++Yn,"\r"===e&&"\n"===$n[Kn]&&++Kn,Zn=Kn,n+="\n"):n+=e}return i||rt({},cr.UnexpectedToken,"ILLEGAL"),Kn>nr.curlyLastIndex&&(nr.curlyLastIndex=Kn,o||nr.curlyStack.push("template"),a||nr.curlyStack.pop()),{type:dr.Template,value:{cooked:n,raw:$n.slice(r+1,Kn-(o?1:2))},head:a,tail:o,lineNumber:Yn,lineStart:Zn,range:[r,Kn]}}function b(e,t){var n=e,r="gmsi";rr.ecmaFeatures.regexYFlag&&(r+="y"),rr.ecmaFeatures.regexUFlag&&(r+="u"),RegExp("^["+r+"]*$").test(t)||rt({},cr.InvalidRegExpFlag),t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":(rt({},cr.InvalidRegExp),void 0)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{RegExp(n)}catch(i){rt({},cr.InvalidRegExp)}try{return new RegExp(e,t)}catch(o){return null}}function w(){var e,t,n,i,o;for(e=$n[Kn],r("/"===e,"Regular expression literal must start with a slash"),t=$n[Kn++],n=!1,i=!1;er>Kn;)if(e=$n[Kn++],t+=e,"\\"===e)e=$n[Kn++],ir.isLineTerminator(e.charCodeAt(0))&&rt({},cr.UnterminatedRegExp),t+=e;else if(ir.isLineTerminator(e.charCodeAt(0)))rt({},cr.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){i=!0;break}"["===e&&(n=!0)}return i||rt({},cr.UnterminatedRegExp),o=t.substr(1,t.length-2),{value:o,literal:t}}function S(){var e,t,n,r;for(t="",n="";er>Kn&&(e=$n[Kn],ir.isIdentifierPart(e.charCodeAt(0)));)if(++Kn,"\\"===e&&er>Kn)if(e=$n[Kn],"u"===e){if(++Kn,r=Kn,e=u("u"))for(n+=e,t+="\\u";Kn>r;++r)t+=$n[r];else Kn=r,n+="u",t+="\\u";it({},cr.UnexpectedToken,"ILLEGAL")}else t+="\\",it({},cr.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}function E(){var e,t,n,r;return tr=null,s(),e=Kn,t=w(),n=S(),r=b(t.value,n.value),rr.tokenize?{type:dr.RegularExpression,value:r,regex:{pattern:t.value,flags:n.value},lineNumber:Yn,lineStart:Zn,range:[e,Kn]}:{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},range:[e,Kn]}}function C(){var e,t,n,r;return s(),e=Kn,t={start:{line:Yn,column:Kn-Zn}},n=E(),t.end={line:Yn,column:Kn-Zn},rr.tokenize||(rr.tokens.length>0&&(r=rr.tokens[rr.tokens.length-1],r.range[0]===e&&"Punctuator"===r.type&&("/"===r.value||"/="===r.value)&&rr.tokens.pop()),rr.tokens.push({type:"RegularExpression",value:n.literal,regex:n.regex,range:[e,Kn],loc:t})),n}function T(e){return e.type===dr.Identifier||e.type===dr.Keyword||e.type===dr.BooleanLiteral||e.type===dr.NullLiteral}function P(){var e,t;if(e=rr.tokens[rr.tokens.length-1],!e)return C();if("Punctuator"===e.type){if("]"===e.value)return d();if(")"===e.value)return t=rr.tokens[rr.openParenToken-1],!t||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?d():C();if("}"===e.value){if(rr.tokens[rr.openCurlyToken-3]&&"Keyword"===rr.tokens[rr.openCurlyToken-3].type){if(t=rr.tokens[rr.openCurlyToken-4],!t)return d()}else{if(!rr.tokens[rr.openCurlyToken-4]||"Keyword"!==rr.tokens[rr.openCurlyToken-4].type)return d();if(t=rr.tokens[rr.openCurlyToken-5],!t)return C()}return mr.indexOf(t.value)>=0?d():C()}return C()}return"Keyword"===e.type?C():d()}function I(){var e,t=rr.ecmaFeatures.jsx,n=rr.ecmaFeatures.templateStrings;return t&&nr.inJSXChild||s(),Kn>=er?{type:dr.EOF,lineNumber:Yn,lineStart:Zn,range:[Kn,Kn]}:t&&nr.inJSXChild?M():(e=$n.charCodeAt(Kn),40===e||41===e||59===e?d():39===e||34===e?t&&nr.inJSXTag?L():_():t&&nr.inJSXTag&&ir.isJSXIdentifierStart(e)?R():n&&(96===e||125===e&&"template"===nr.curlyStack[nr.curlyStack.length-1])?x():ir.isIdentifierStart(e)?f():46===e?ir.isDecimalDigit($n.charCodeAt(Kn+1))?v():d():ir.isDecimalDigit(e)?v():rr.tokenize&&47===e?P():d())}function D(){var e,t,n,r,i,o=rr.ecmaFeatures.jsx;return o&&nr.inJSXChild||s(),e={start:{line:Yn,column:Kn-Zn}},t=I(),e.end={line:Yn,column:Kn-Zn},t.type!==dr.EOF&&(n=[t.range[0],t.range[1]],r=$n.slice(t.range[0],t.range[1]),i={type:hr[t.type],value:r,range:n,loc:e},t.regex&&(i.regex={pattern:t.regex.pattern,flags:t.regex.flags}),rr.tokens.push(i)),t}function A(){var e;return e=tr,Kn=e.range[1],Yn=e.lineNumber,Zn=e.lineStart,tr="undefined"!=typeof rr.tokens?D():I(),Kn=e.range[1],Yn=e.lineNumber,Zn=e.lineStart,e}function N(){var e,t,n;e=Kn,t=Yn,n=Zn,tr="undefined"!=typeof rr.tokens?D():I(),Kn=e,Yn=t,Zn=n}function k(){var e,t,n,r,i;return e="function"==typeof rr.advance?rr.advance:I,t=Kn,n=Yn,r=Zn,null===tr&&(tr=e()),Kn=tr.range[1],Yn=tr.lineNumber,Zn=tr.lineStart,i=e(),Kn=t,Yn=n,Zn=r,i}function O(e){return e.type===ar.JSXIdentifier?e.name:e.type===ar.JSXNamespacedName?e.namespace.name+":"+e.name.name:e.type===ar.JSXMemberExpression?O(e.object)+"."+O(e.property):(ot(e),void 0)}function R(){var e,t,n="";for(t=Kn;er>Kn&&(e=$n.charCodeAt(Kn),ir.isJSXIdentifierPart(e));)n+=$n[Kn++];return{type:dr.JSXIdentifier,value:n,lineNumber:Yn,lineStart:Zn,range:[t,Kn]}}function j(){var e,t,n="",i=Kn,o=0;for(e=$n[Kn],r("&"===e,"Entity must start with an ampersand"),Kn++;er>Kn&&o++<10&&(e=$n[Kn++],";"!==e);)n+=e;if(";"===e)if("#"===n[0]){if(t="x"===n[1]?+("0"+n.substr(1)):+n.substr(1).replace(gr.LeadingZeros,""),!isNaN(t))return String.fromCharCode(t)}else if(lr[n])return lr[n];return Kn=i+1,"&"}function F(e){var t,n,r="";for(n=Kn;er>Kn&&(t=$n[Kn],-1===e.indexOf(t));)"&"===t?r+=j():(Kn++,"\r"===t&&"\n"===$n[Kn]&&(r+=t,t=$n[Kn],Kn++),ir.isLineTerminator(t.charCodeAt(0))&&(++Yn,Zn=Kn),r+=t);return{type:dr.JSXText,value:r,lineNumber:Yn,lineStart:Zn,range:[n,Kn]}}function L(){var e,t,n;return t=$n[Kn],r('"'===t||"'"===t,"String literal must starts with a quote"),n=Kn,++Kn,e=F([t]),t!==$n[Kn]&&rt({},cr.UnexpectedToken,"ILLEGAL"),++Kn,e.range=[n,Kn],e}function M(){var e=$n.charCodeAt(Kn);return 123!==e&&60!==e?F(["<","{"]):d()}function B(){var e,t=et();return tr.type!==dr.JSXIdentifier&&ot(tr),e=A(),Z(t,sr.createJSXIdentifier(e.value))}function U(){var e,t,n=et();return e=B(),at(":"),t=B(),Z(n,sr.createJSXNamespacedName(e,t))}function V(){for(var e=et(),t=B();ut(".");)A(),t=Z(e,sr.createJSXMemberExpression(t,B()));return t}function Q(){return":"===k().value?U():"."===k().value?V():B()}function G(){return":"===k().value?U():B()}function H(){var e,t;return ut("{")?(e=W(),e.expression.type===ar.JSXEmptyExpression&&rt(e,"JSX attributes must only be assigned a non-empty expression")):ut("<")?e=Y():tr.type===dr.JSXText?(t=et(),e=Z(t,sr.createLiteralFromSource(A(),$n))):rt({},cr.InvalidJSXAttributeValue),e}function z(){for(var e=tt();"}"!==$n.charAt(Kn);)Kn++;return Z(e,sr.createJSXEmptyExpression())}function W(){var e,t,n,r=et();return t=nr.inJSXChild,n=nr.inJSXTag,nr.inJSXChild=!1,nr.inJSXTag=!1,at("{"),e=ut("}")?z():qt(),nr.inJSXChild=t,nr.inJSXTag=n,at("}"),Z(r,sr.createJSXExpressionContainer(e))}function q(){var e,t,n,r=et();return t=nr.inJSXChild,n=nr.inJSXTag,nr.inJSXChild=!1,nr.inJSXTag=!1,nr.inJSXSpreadAttribute=!0,at("{"),at("..."),nr.inJSXSpreadAttribute=!1,e=Wt(),nr.inJSXChild=t,nr.inJSXTag=n,at("}"),Z(r,sr.createJSXSpreadAttribute(e))}function X(){var e,t;return ut("{")?q():(t=et(),e=G(),ut("=")?(A(),Z(t,sr.createJSXAttribute(e,H()))):Z(t,sr.createJSXAttribute(e)))}function $(){var e,t;return ut("{")?e=W():tr.type===dr.JSXText?(t=tt(),e=Z(t,sr.createLiteralFromSource(A(),$n))):e=Y(),e}function J(){var e,t,n,r=et();return t=nr.inJSXChild,n=nr.inJSXTag,nr.inJSXChild=!1,nr.inJSXTag=!0,at("<"),at("/"),e=Q(),nr.inJSXChild=t,nr.inJSXTag=n,at(">"),Z(r,sr.createJSXClosingElement(e))}function K(){var e,t,n,r=[],i=!1,o=et();for(t=nr.inJSXChild,n=nr.inJSXTag,nr.inJSXChild=!1,nr.inJSXTag=!0,at("<"),e=Q();er>Kn&&"/"!==tr.value&&">"!==tr.value;)r.push(X());return nr.inJSXTag=n,"/"===tr.value?(at("/"),nr.inJSXChild=t,at(">"),i=!0):(nr.inJSXChild=!0,at(">")),Z(o,sr.createJSXOpeningElement(e,r,i))}function Y(){var e,t,n,r=null,i=[],o=et();if(t=nr.inJSXChild,n=nr.inJSXTag,e=K(),!e.selfClosing){for(;er>Kn&&(nr.inJSXChild=!1,"<"!==tr.value||"/"!==k().value);)nr.inJSXChild=!0,i.push($());nr.inJSXChild=t,nr.inJSXTag=n,r=J(),O(r.name)!==O(e.name)&&rt({},cr.ExpectedJSXClosingTag,O(e.name))}return!t&&ut("<")&&rt(tr,cr.AdjacentJSXElements),Z(o,sr.createJSXElement(e,r,i))}function Z(e,t){return rr.range&&(t.range=[e.offset,Kn]),rr.loc&&(t.loc={start:{line:e.line,column:e.col},end:{line:Yn,column:Kn-Zn}},rr.source&&(t.loc.source=rr.source)),rr.attachComment&&fr.processComment(t),t}function et(){return rr.loc||rr.range?(s(),{offset:Kn,line:Yn,col:Kn-Zn}):void 0}function tt(){return rr.loc||rr.range?{offset:Kn,line:Yn,col:Kn-Zn}:void 0}function nt(){var e,t,n,r;return e=Kn,t=Yn,n=Zn,s(),r=Yn!==t,Kn=e,Yn=t,Zn=n,r}function rt(e,t){var n,i=Array.prototype.slice.call(arguments,2),o=t.replace(/%(\d)/g,function(e,t){return r(t<i.length,"Message reference must be in range"),i[t]});throw"number"==typeof e.lineNumber?(n=new Error("Line "+e.lineNumber+": "+o),n.index=e.range[0],n.lineNumber=e.lineNumber,n.column=e.range[0]-Zn+1):(n=new Error("Line "+Yn+": "+o),n.index=Kn,n.lineNumber=Yn,n.column=Kn-Zn+1),n.description=o,n}function it(){try{rt.apply(null,arguments)}catch(e){if(!rr.errors)throw e;rr.errors.push(e)}}function ot(e){if(e.type===dr.EOF&&rt(e,cr.UnexpectedEOS),e.type===dr.NumericLiteral&&rt(e,cr.UnexpectedNumber),(e.type===dr.StringLiteral||e.type===dr.JSXText)&&rt(e,cr.UnexpectedString),e.type===dr.Identifier&&rt(e,cr.UnexpectedIdentifier),e.type===dr.Keyword){if(ir.isFutureReservedWord(e.value))rt(e,cr.UnexpectedReserved);else if(Jn&&ir.isStrictModeReservedWord(e.value))return it(e,cr.StrictReservedWord),void 0;rt(e,cr.UnexpectedToken,e.value)}e.type===dr.Template&&rt(e,cr.UnexpectedTemplate,e.value.raw),rt(e,cr.UnexpectedToken,e.value)}function at(e){var t=A();(t.type!==dr.Punctuator||t.value!==e)&&ot(t)}function st(e){var t=A();(t.type!==dr.Keyword||t.value!==e)&&ot(t)}function ut(e){return tr.type===dr.Punctuator&&tr.value===e}function ct(e){return tr.type===dr.Keyword&&tr.value===e}function lt(e){return tr.type===dr.Identifier&&tr.value===e}function pt(){var e;return tr.type!==dr.Punctuator?!1:(e=tr.value,"="===e||"*="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e)}function ft(){var e;return 59===$n.charCodeAt(Kn)||ut(";")?(A(),void 0):(e=Yn,s(),Yn===e&&(tr.type===dr.EOF||ut("}")||ot(tr)),void 0)}function dt(e){return e.type===ar.Identifier||e.type===ar.MemberExpression}function ht(){var e,t=[],n=et();for(at("[");!ut("]");)ut(",")?(A(),t.push(null)):(e=Dt(),t.push(e),ut("]")||at(","));return at("]"),Z(n,sr.createArrayExpression(t))}function mt(e,t){var n,r=Jn,i=nr.yieldAllowed,o=t?t.generator:!1;return nr.yieldAllowed=o,n=bn(),Jn&&e.firstRestricted&&it(e.firstRestricted,cr.StrictParamName),Jn&&e.stricted&&it(e.stricted,e.message),Jn=r,nr.yieldAllowed=i,Z(t.marker,sr.createFunctionExpression(null,e.params,n,o,n.type!==ar.BlockStatement))}function gt(e){var t,n,r=Jn,i=et();return Jn=!0,t=En(),t.stricted&&it(t.stricted,t.message),n=mt(t,{generator:e?e.generator:!1,marker:i}),Jn=r,n}function vt(){var e,t,n=et(),r=A(),i=rr.ecmaFeatures.objectLiteralComputedProperties;switch(r.type){case dr.StringLiteral:case dr.NumericLiteral:return Jn&&r.octal&&it(r,cr.StrictOctalLiteral),Z(n,sr.createLiteralFromSource(r,$n));case dr.Identifier:case dr.BooleanLiteral:case dr.NullLiteral:case dr.Keyword:return Z(n,sr.createIdentifier(r.value));case dr.Punctuator:if((!nr.inObjectLiteral||i)&&"["===r.value)return n=et(),e=Wt(),t=Z(n,e),at("]"),t}ot(r)}function yt(){switch(tr.type){case dr.Identifier:case dr.StringLiteral:case dr.BooleanLiteral:case dr.NullLiteral:case dr.NumericLiteral:case dr.Keyword:return!0;case dr.Punctuator:return"["===tr.value}return!1}function _t(e,t,n,r){var i,o,a;if(e.type===dr.Identifier){if("get"===e.value&&yt())return n=ut("["),t=vt(),a=et(),at("("),at(")"),i=mt({params:[],stricted:null,firstRestricted:null,message:null},{marker:a}),Z(r,sr.createProperty("get",t,i,!1,!1,n));if("set"===e.value&&yt())return n=ut("["),t=vt(),a=et(),at("("),o={params:[],defaultCount:0,stricted:null,firstRestricted:null,paramSet:new pr},ut(")")?it(tr,cr.UnexpectedToken,tr.value):Sn(o),at(")"),i=mt(o,{marker:a}),Z(r,sr.createProperty("set",t,i,!1,!1,n))}return ut("(")?(i=gt(),Z(r,sr.createProperty("init",t,i,!0,!1,n))):null}function xt(e,t){var n=tr.type===dr.Punctuator&&"["===tr.value;return ut("(")||ot(A()),Z(t,sr.createProperty("init",e,gt({generator:!0}),!0,!1,n))}function bt(){var e,t,n,r,i,o,a=rr.ecmaFeatures.objectLiteralComputedProperties,s=rr.ecmaFeatures.objectLiteralShorthandMethods,u=rr.ecmaFeatures.objectLiteralShorthandProperties,c=rr.ecmaFeatures.generators,l=rr.ecmaFeatures.destructuring,p=et();if(e=tr,r="["===e.value&&e.type===dr.Punctuator,e.type===dr.Identifier||a&&r){if(n=vt(),"get"===e.value&&!(ut(":")||ut("(")||ut(",")||ut("}")))return r="["===tr.value,t=vt(),i=et(),at("("),at(")"),Z(p,sr.createProperty("get",t,mt({generator:!1},{marker:i}),!1,!1,r));if("set"===e.value&&!(ut(":")||ut("(")||ut(",")||ut("}")))return r="["===tr.value,t=vt(),i=et(),at("("),o={params:[],defaultCount:0,stricted:null,firstRestricted:null,paramSet:new pr},ut(")")?it(tr,cr.UnexpectedToken,tr.value):Sn(o),at(")"),Z(p,sr.createProperty("set",t,mt(o,{marker:i}),!1,!1,r));if(ut(":"))return A(),Z(p,sr.createProperty("init",n,Wt(),!1,!1,r));if(s&&ut("("))return Z(p,sr.createProperty("init",n,gt({generator:!1}),!0,!1,r));if(l&&ut("=")){A();var f=Wt(),d=Z(p,sr.createAssignmentExpression("=",n,f));d.type=ar.AssignmentPattern;var h=sr.createProperty("init",n,d,!1,!0,r);return Z(p,h)}return(r||!u&&!l)&&ot(tr),Z(p,sr.createProperty("init",n,n,!1,!0,!1))}return e.type===dr.EOF||e.type===dr.Punctuator?(c&&ut("*")&&s||ot(e),A(),n=vt(),xt(n,p)):(t=vt(),ut(":")?(A(),Z(p,sr.createProperty("init",t,Wt(),!1,!1,!1))):s&&ut("(")?Z(p,sr.createProperty("init",t,gt(),!0,!1,!1)):(ot(A()),void 0))}function wt(e){var t=String;return e.type===ar.Identifier?e.name:t(e.value)}function St(){var e,t,n,r,i,o=et(),a=rr.ecmaFeatures.objectLiteralDuplicateProperties,s=[],u=nr.inObjectLiteral,c=new pr;for(nr.inObjectLiteral=!0,at("{");!ut("}");)e=bt(),e.computed||(t=wt(e.key),n="get"===e.kind?Xn.Get:Xn.Set,r="init"===e.kind?Xn.Data:n,c.has(t)?(i=c.get(t),i===Xn.Data?r===Xn.Data&&"__proto__"===t&&a?it({},cr.DuplicatePrototypeProperty):Jn&&r===Xn.Data&&!a?it({},cr.StrictDuplicateProperty):r!==Xn.Data&&it({},cr.AccessorDataProperty):r===Xn.Data?it({},cr.AccessorDataProperty):i&r&&it({},cr.AccessorGetSet),c.set(t,i|r)):c.set(t,r)),s.push(e),ut("}")||at(",");return at("}"),nr.inObjectLiteral=u,Z(o,sr.createObjectExpression(s))}function Et(e){var t,n;return(tr.type!==dr.Template||e.head&&!tr.head)&&rt({},cr.UnexpectedToken,"ILLEGAL"),t=et(),n=A(),Z(t,sr.createTemplateElement({raw:n.value.raw,cooked:n.value.cooked},n.tail))}function Ct(){var e,t,n,r=et();for(e=Et({head:!0}),t=[e],n=[];!e.tail;)n.push(qt()),e=Et({head:!1}),t.push(e);return Z(r,sr.createTemplateLiteral(t,n))}function Tt(){var e;return at("("),++nr.parenthesisCount,e=qt(),at(")"),e}function Pt(){var e,t,n,r,i=rr.ecmaFeatures.jsx,o=rr.ecmaFeatures.classes,a=o||rr.ecmaFeatures.superInFunctions;if(ut("("))return Tt();if(ut("["))return ht();if(ut("{"))return St();if(i&&ut("<"))return Y();if(e=tr.type,r=et(),e===dr.Identifier)n=sr.createIdentifier(A().value);else if(e===dr.StringLiteral||e===dr.NumericLiteral)Jn&&tr.octal&&it(tr,cr.StrictOctalLiteral),n=sr.createLiteralFromSource(A(),$n);else if(e===dr.Keyword){if(ct("function"))return Tn();if(a&&ct("super")&&nr.inFunctionBody)return r=et(),A(),Z(r,sr.createSuper());if(ct("this"))return r=et(),A(),Z(r,sr.createThisExpression());if(o&&ct("class"))return Un();ot(A())}else if(e===dr.BooleanLiteral)t=A(),t.value="true"===t.value,n=sr.createLiteralFromSource(t,$n);else if(e===dr.NullLiteral)t=A(),t.value=null,n=sr.createLiteralFromSource(t,$n);else if(ut("/")||ut("/="))n="undefined"!=typeof rr.tokens?sr.createLiteralFromSource(C(),$n):sr.createLiteralFromSource(E(),$n),N();else{if(e===dr.Template)return Ct();ot(A())}return Z(r,n)}function It(){var e,t=[];if(at("("),!ut(")"))for(;er>Kn&&(e=Dt(),t.push(e),!ut(")"));)at(",");return at(")"),t}function Dt(){if(ut("...")){var e=et();return A(),Z(e,sr.createSpreadElement(Wt()))}return Wt()}function At(){var e,t=et();return e=A(),T(e)||ot(e),Z(t,sr.createIdentifier(e.value))}function Nt(){return at("."),At()}function kt(){var e;return at("["),e=qt(),at("]"),e}function Ot(){var e,t,n=et();return st("new"),e=jt(),t=ut("(")?It():[],Z(n,sr.createNewExpression(e,t))}function Rt(){var e,t,n=nr.allowIn,r=et();for(nr.allowIn=!0,e=ct("new")?Ot():Pt(),nr.allowIn=n;ut(".")||ut("[")||ut("(")||tr.type===dr.Template&&tr.head;)ut("(")?(t=It(),e=Z(r,sr.createCallExpression(e,t))):e=ut("[")?Z(r,sr.createMemberExpression("[",e,kt())):ut(".")?Z(r,sr.createMemberExpression(".",e,Nt())):Z(r,sr.createTaggedTemplateExpression(e,Ct()));return e}function jt(){var e,t=nr.allowIn,n=et();for(e=ct("new")?Ot():Pt(),nr.allowIn=t;ut(".")||ut("[")||tr.type===dr.Template&&tr.head;)e=ut("[")?Z(n,sr.createMemberExpression("[",e,kt())):ut(".")?Z(n,sr.createMemberExpression(".",e,Nt())):Z(n,sr.createTaggedTemplateExpression(e,Ct()));return e}function Ft(){var e,t,n=et();return e=Rt(),tr.type===dr.Punctuator&&(!ut("++")&&!ut("--")||nt()||(Jn&&e.type===ar.Identifier&&ir.isRestrictedWord(e.name)&&it({},cr.StrictLHSPostfix),dt(e)||it({},cr.InvalidLHSInAssignment),t=A(),e=Z(n,sr.createPostfixExpression(t.value,e)))),e}function Lt(){var e,t,n;return tr.type!==dr.Punctuator&&tr.type!==dr.Keyword?t=Ft():ut("++")||ut("--")?(n=et(),e=A(),t=Lt(),Jn&&t.type===ar.Identifier&&ir.isRestrictedWord(t.name)&&it({},cr.StrictLHSPrefix),dt(t)||it({},cr.InvalidLHSInAssignment),t=sr.createUnaryExpression(e.value,t),t=Z(n,t)):ut("+")||ut("-")||ut("~")||ut("!")?(n=et(),e=A(),t=Lt(),t=sr.createUnaryExpression(e.value,t),t=Z(n,t)):ct("delete")||ct("void")||ct("typeof")?(n=et(),e=A(),t=Lt(),t=sr.createUnaryExpression(e.value,t),t=Z(n,t),Jn&&"delete"===t.operator&&t.argument.type===ar.Identifier&&it({},cr.StrictDelete)):t=Ft(),t}function Mt(e,t){var n=0;if(e.type!==dr.Punctuator&&e.type!==dr.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=t?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function Bt(){var e,t,n,r,i,o,a,s,u,c,l;if(r=nr.allowIn,nr.allowIn=!0,c=et(),s=Lt(),t=tr,n=Mt(t,r),0===n)return s;for(t.prec=n,A(),l=[c,et()],o=Lt(),i=[s,t,o];(n=Mt(tr,r))>0;){for(;i.length>2&&n<=i[i.length-2].prec;)o=i.pop(),a=i.pop().value,s=i.pop(),e=sr.createBinaryExpression(a,s,o),l.pop(),c=l.pop(),Z(c,e),i.push(e),l.push(c);t=A(),t.prec=n,i.push(t),l.push(et()),e=Lt(),i.push(e)}for(nr.allowIn=r,u=i.length-1,e=i[u],l.pop();u>1;)e=sr.createBinaryExpression(i[u-1].value,i[u-2],e),u-=2,c=l.pop(),Z(c,e);return e}function Ut(){var e,t,n,r,i=et();return e=Bt(),ut("?")&&(A(),t=nr.allowIn,nr.allowIn=!0,n=Wt(),nr.allowIn=t,at(":"),r=Wt(),e=sr.createConditionalExpression(e,n,r),Z(i,e)),e}function Vt(){return ut("{")?bn():Wt()}function Qt(e){var t,n,i,o,a,s=rr.ecmaFeatures.restParams;for(o=[],a={paramSet:new pr},t=0,n=e.length;n>t;t+=1)if(i=e[t],i.type===ar.Identifier)o.push(i),wn(a,i,i.name);else if(i.type===ar.ObjectExpression||i.type===ar.ArrayExpression)zt(a,i),o.push(i);else if(i.type===ar.SpreadElement)r(t===n-1,"It is guaranteed that SpreadElement is last element by parseExpression"),i.argument.type!==ar.Identifier&&rt({},cr.UnexpectedToken,"["),s||rt({},cr.UnexpectedToken,"."),zt(a,i.argument),i.type=ar.RestElement,o.push(i);else if(i.type===ar.RestElement)o.push(i),wn(a,i.argument,i.argument.name);else{if(i.type!==ar.AssignmentExpression)return null;i.type=ar.AssignmentPattern,delete i.operator,o.push(i),wn(a,i.left,i.left.name)}return a.message===cr.StrictParamDupe&&rt(Jn?a.stricted:a.firstRestricted,a.message),{params:o,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function Gt(e,t){var n,r;return at("=>"),n=Jn,r=Vt(),Jn&&e.firstRestricted&&rt(e.firstRestricted,e.message),Jn&&e.stricted&&it(e.stricted,e.message),Jn=n,Z(t,sr.createArrowFunctionExpression(e.params,r,r.type!==ar.BlockStatement))}function Ht(e){var t,n,r,i,o=rr.ecmaFeatures.destructuring;if(o||ot(A()),e.type===ar.ObjectExpression)for(e.type=ar.ObjectPattern,t=0,n=e.properties.length;n>t;t+=1)r=e.properties[t],"init"!==r.kind&&it({},cr.InvalidLHSInAssignment),Ht(r.value);else if(e.type===ar.ArrayExpression)for(e.type=ar.ArrayPattern,t=0,n=e.elements.length;n>t;t+=1)i=e.elements[t],i&&Ht(i);else e.type===ar.Identifier?ir.isRestrictedWord(e.name)&&it({},cr.InvalidLHSInAssignment):e.type===ar.SpreadElement?(Ht(e.argument),e.argument.type===ar.ObjectPattern&&it({},cr.ObjectPatternAsSpread)):"AssignmentExpression"===e.type&&"="===e.operator?e.type=ar.AssignmentPattern:e.type!==ar.MemberExpression&&e.type!==ar.CallExpression&&e.type!==ar.NewExpression&&e.type!==ar.AssignmentPattern&&it({},cr.InvalidLHSInAssignment)}function zt(e,t){var n,r,i,o,a=rr.ecmaFeatures.destructuring;if(a||ot(A()),t.type===ar.ObjectExpression)for(t.type=ar.ObjectPattern,n=0,r=t.properties.length;r>n;n+=1)i=t.properties[n],"init"!==i.kind&&it({},cr.InvalidLHSInFormalsList),zt(e,i.value);else if(t.type===ar.ArrayExpression)for(t.type=ar.ArrayPattern,n=0,r=t.elements.length;r>n;n+=1)o=t.elements[n],o&&zt(e,o);else t.type===ar.Identifier?wn(e,t,t.name):t.type===ar.SpreadElement?(t.argument.type!==ar.Identifier&&it({},cr.InvalidLHSInFormalsList),wn(e,t.argument,t.argument.name)):t.type===ar.AssignmentExpression&&"="===t.operator?t.type=ar.AssignmentPattern:t.type!==ar.AssignmentPattern&&rt({},cr.InvalidLHSInFormalsList)}function Wt(){var e,t,n,r,i,o,a=!1,s=nr.parenthesisCount,u=rr.ecmaFeatures.generators;if(u&&(nr.yieldAllowed&&lt("yield")||Jn&&ct("yield")))return Pn();if(o=et(),ut("(")){if(e=k(),")"===e.value&&e.type===dr.Punctuator||"..."===e.value)return i=En(),ut("=>")||ot(A()),Gt(i,o);a=!0}return e=tr,r=t=Ut(),ut("=>")&&(nr.parenthesisCount===s||nr.parenthesisCount===s+1)&&(r.type===ar.Identifier?i=Qt([r]):r.type===ar.AssignmentExpression||r.type===ar.ArrayExpression||r.type===ar.ObjectExpression?(a||ot(A()),i=Qt([r])):r.type===ar.SequenceExpression&&(i=Qt(r.expressions)),i)?Gt(i,o):(pt()&&(Jn&&t.type===ar.Identifier&&ir.isRestrictedWord(t.name)&&it(e,cr.StrictLHSAssignment),!ut("=")||r.type!==ar.ObjectExpression&&r.type!==ar.ArrayExpression?dt(r)||it({},cr.InvalidLHSInAssignment):Ht(r),e=A(),n=Wt(),r=Z(o,sr.createAssignmentExpression(e.value,t,n))),r)}function qt(){var e,t,n=et(),r=Wt(),i=[r];if(ut(",")){for(;er>Kn&&ut(",");)if(A(),r=Dt(),i.push(r),r.type===ar.SpreadElement){t=!0,ut(")")||rt({},cr.ElementAfterSpreadElement);break}e=Z(n,sr.createSequenceExpression(i))}return t&&"=>"!==k().value&&rt({},cr.IllegalSpread),e||r}function Xt(){for(var e,t=[];er>Kn&&!ut("}")&&(e=Qn(),"undefined"!=typeof e);)t.push(e);return t}function $t(){var e,t=et();return at("{"),e=Xt(),at("}"),Z(t,sr.createBlockStatement(e))}function Jt(){var e,t=et();return e=A(),e.type!==dr.Identifier&&(Jn&&e.type===dr.Keyword&&ir.isStrictModeReservedWord(e.value)?it(e,cr.StrictReservedWord):ot(e)),Z(t,sr.createIdentifier(e.value))}function Kt(e){var t,n=et(),r=null;return ut("{")?(t=St(),Ht(t)):ut("[")?(t=ht(),Ht(t)):(t=nr.allowKeyword?At():Jt(),Jn&&ir.isRestrictedWord(t.name)&&it({},cr.StrictVarName)),"const"===e?(ut("=")||rt({},cr.NoUnintializedConst),at("="),r=Wt()):ut("=")&&(A(),r=Wt()),Z(n,sr.createVariableDeclarator(t,r))
}function Yt(e){var t=[];do{if(t.push(Kt(e)),!ut(","))break;A()}while(er>Kn);return t}function Zt(){var e;return st("var"),e=Yt(),ft(),sr.createVariableDeclaration(e,"var")}function en(e){var t,n=et();return st(e),t=Yt(e),ft(),Z(n,sr.createVariableDeclaration(t,e))}function tn(){var e,t=et();return A(),ut("{")&&rt(tr,cr.ObjectPatternAsRestParameter),e=Jt(),ut("=")&&rt(tr,cr.DefaultRestParameter),ut(")")||rt(tr,cr.ParameterAfterRestParameter),Z(t,sr.createRestElement(e))}function nn(){return at(";"),sr.createEmptyStatement()}function rn(){var e=qt();return ft(),sr.createExpressionStatement(e)}function on(){var e,t,n;return st("if"),at("("),e=qt(),at(")"),t=xn(),ct("else")?(A(),n=xn()):n=null,sr.createIfStatement(e,t,n)}function an(){var e,t,n;return st("do"),n=nr.inIteration,nr.inIteration=!0,e=xn(),nr.inIteration=n,st("while"),at("("),t=qt(),at(")"),ut(";")&&A(),sr.createDoWhileStatement(t,e)}function sn(){var e,t,n;return st("while"),at("("),e=qt(),at(")"),n=nr.inIteration,nr.inIteration=!0,t=xn(),nr.inIteration=n,sr.createWhileStatement(e,t)}function un(){var e,t,n=et();return e=A(),t=Yt(),Z(n,sr.createVariableDeclaration(t,e.value))}function cn(e){var t,n,r,i,o,a,s,u,c=rr.ecmaFeatures.forOf,l=rr.ecmaFeatures.blockBindings;return t=n=r=null,st("for"),at("("),ut(";")?A():(ct("var")||l&&(ct("let")||ct("const"))?(nr.allowIn=!1,t=un(),nr.allowIn=!0,1===t.declarations.length&&(ct("in")||c&&lt("of"))&&(s=tr,("in"!==s.value&&"var"===t.kind||!t.declarations[0].init)&&(A(),i=t,o=qt(),t=null))):(nr.allowIn=!1,t=qt(),nr.allowIn=!0,c&&lt("of")?(s=A(),i=t,o=qt(),t=null):ct("in")&&(dt(t)||it({},cr.InvalidLHSInForIn),s=A(),i=t,o=qt(),t=null)),"undefined"==typeof i&&at(";")),"undefined"==typeof i&&(ut(";")||(n=qt()),at(";"),ut(")")||(r=qt())),at(")"),u=nr.inIteration,nr.inIteration=!0,void 0!==e&&e.ignoreBody||(a=xn()),nr.inIteration=u,"undefined"==typeof i?sr.createForStatement(t,n,r,a):rr.ecmaFeatures.forOf&&"of"===s.value?sr.createForOfStatement(i,o,a):sr.createForInStatement(i,o,a)}function ln(){var e=null;return st("continue"),59===$n.charCodeAt(Kn)?(A(),nr.inIteration||rt({},cr.IllegalContinue),sr.createContinueStatement(null)):nt()?(nr.inIteration||rt({},cr.IllegalContinue),sr.createContinueStatement(null)):(tr.type===dr.Identifier&&(e=Jt(),nr.labelSet.has(e.name)||rt({},cr.UnknownLabel,e.name)),ft(),null!==e||nr.inIteration||rt({},cr.IllegalContinue),sr.createContinueStatement(e))}function pn(){var e=null;return st("break"),59===$n.charCodeAt(Kn)?(A(),nr.inIteration||nr.inSwitch||rt({},cr.IllegalBreak),sr.createBreakStatement(null)):nt()?(nr.inIteration||nr.inSwitch||rt({},cr.IllegalBreak),sr.createBreakStatement(null)):(tr.type===dr.Identifier&&(e=Jt(),nr.labelSet.has(e.name)||rt({},cr.UnknownLabel,e.name)),ft(),null!==e||nr.inIteration||nr.inSwitch||rt({},cr.IllegalBreak),sr.createBreakStatement(e))}function fn(){var e=null;return st("return"),nr.inFunctionBody||rr.ecmaFeatures.globalReturn||it({},cr.IllegalReturn),32===$n.charCodeAt(Kn)&&ir.isIdentifierStart($n.charCodeAt(Kn+1))?(e=qt(),ft(),sr.createReturnStatement(e)):nt()?sr.createReturnStatement(null):(ut(";")||ut("}")||tr.type===dr.EOF||(e=qt()),ft(),sr.createReturnStatement(e))}function dn(){var e,t;return Jn&&(s(),it({},cr.StrictModeWith)),st("with"),at("("),e=qt(),at(")"),t=xn(),sr.createWithStatement(e,t)}function hn(){var e,t,n=[],r=et();for(ct("default")?(A(),e=null):(st("case"),e=qt()),at(":");er>Kn&&!(ut("}")||ct("default")||ct("case"))&&(t=Qn(),"undefined"!=typeof t);)n.push(t);return Z(r,sr.createSwitchCase(e,n))}function mn(){var e,t,n,r,i;if(st("switch"),at("("),e=qt(),at(")"),at("{"),t=[],ut("}"))return A(),sr.createSwitchStatement(e,t);for(r=nr.inSwitch,nr.inSwitch=!0,i=!1;er>Kn&&!ut("}");)n=hn(),null===n.test&&(i&&rt({},cr.MultipleDefaultsInSwitch),i=!0),t.push(n);return nr.inSwitch=r,at("}"),sr.createSwitchStatement(e,t)}function gn(){var e;return st("throw"),nt()&&rt({},cr.NewlineAfterThrow),e=qt(),ft(),sr.createThrowStatement(e)}function vn(){var e,t,n=et(),r=rr.ecmaFeatures.destructuring,i={paramSet:new pr};return st("catch"),at("("),ut(")")&&ot(tr),ut("[")?(r||ot(tr),e=ht(),zt(i,e)):ut("{")?(r||ot(tr),e=St(),zt(i,e)):e=Jt(),Jn&&e.name&&ir.isRestrictedWord(e.name)&&it({},cr.StrictCatchVariable),at(")"),t=$t(),Z(n,sr.createCatchClause(e,t))}function yn(){var e,t=null,n=null;return st("try"),e=$t(),ct("catch")&&(t=vn()),ct("finally")&&(A(),n=$t()),t||n||rt({},cr.NoCatchOrFinally),sr.createTryStatement(e,t,n)}function _n(){return st("debugger"),ft(),sr.createDebuggerStatement()}function xn(){var e,t,n,r=tr.type;if(r===dr.EOF&&ot(tr),r===dr.Punctuator&&"{"===tr.value)return $t();if(n=et(),r===dr.Punctuator)switch(tr.value){case";":return Z(n,nn());case"{":return $t();case"(":return Z(n,rn())}if(n=et(),r===dr.Keyword)switch(tr.value){case"break":return Z(n,pn());case"continue":return Z(n,ln());case"debugger":return Z(n,_n());case"do":return Z(n,an());case"for":return Z(n,cn());case"function":return Z(n,Cn());case"if":return Z(n,on());case"return":return Z(n,fn());case"switch":return Z(n,mn());case"throw":return Z(n,gn());case"try":return Z(n,yn());case"var":return Z(n,Zt());case"while":return Z(n,sn());case"with":return Z(n,dn())}return n=et(),e=qt(),e.type===ar.Identifier&&ut(":")?(A(),nr.labelSet.has(e.name)&&rt({},cr.Redeclaration,"Label",e.name),nr.labelSet.set(e.name,!0),t=xn(),nr.labelSet.delete(e.name),Z(n,sr.createLabeledStatement(e,t))):(ft(),Z(n,sr.createExpressionStatement(e)))}function bn(){var e,t,n,r,i,o,a,s,u,c=[],l=et();for(at("{");er>Kn&&tr.type===dr.StringLiteral&&(t=tr,e=Qn(),c.push(e),e.expression.type===ar.Literal);)n=$n.slice(t.range[0]+1,t.range[1]-1),"use strict"===n?(Jn=!0,r&&it(r,cr.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(i=nr.labelSet,o=nr.inIteration,a=nr.inSwitch,s=nr.inFunctionBody,u=nr.parenthesizedCount,nr.labelSet=new pr,nr.inIteration=!1,nr.inSwitch=!1,nr.inFunctionBody=!0;er>Kn&&!ut("}")&&(e=Qn(),"undefined"!=typeof e);)c.push(e);return at("}"),nr.labelSet=i,nr.inIteration=o,nr.inSwitch=a,nr.inFunctionBody=s,nr.parenthesizedCount=u,Z(l,sr.createBlockStatement(c))}function wn(e,t,n){Jn?(ir.isRestrictedWord(n)&&(e.stricted=t,e.message=cr.StrictParamName),e.paramSet.has(n)&&(e.stricted=t,e.message=cr.StrictParamDupe)):e.firstRestricted||(ir.isRestrictedWord(n)?(e.firstRestricted=t,e.message=cr.StrictParamName):ir.isStrictModeReservedWord(n)?(e.firstRestricted=t,e.message=cr.StrictReservedWord):e.paramSet.has(n)&&(e.firstRestricted=t,e.message=cr.StrictParamDupe)),e.paramSet.set(n,!0)}function Sn(e){var t,n,r,i=rr.ecmaFeatures.restParams,o=rr.ecmaFeatures.destructuring,a=rr.ecmaFeatures.defaultParams,s=et();return t=tr,"..."===t.value?(i||ot(tr),n=tn(),wn(e,n.argument,n.argument.name),e.params.push(n),!1):(ut("[")?(o||ot(tr),n=ht(),zt(e,n)):ut("{")?(o||ot(tr),n=St(),zt(e,n)):(n=Jt(),wn(e,t,t.value)),ut("=")&&(a||o?(A(),r=Wt(),++e.defaultCount):ot(tr)),r?e.params.push(Z(s,sr.createAssignmentPattern(n,r))):e.params.push(n),!ut(")"))}function En(e){var t;if(t={params:[],defaultCount:0,firstRestricted:e},at("("),!ut(")"))for(t.paramSet=new pr;er>Kn&&Sn(t);)at(",");return at(")"),{params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}}function Cn(e){var t,n,r,i,o,a,s,u,c=null,l=et(),p=rr.ecmaFeatures.generators;return st("function"),u=!1,p&&ut("*")&&(A(),u=!0),e&&ut("(")||(n=tr,c=Jt(),Jn?ir.isRestrictedWord(n.value)&&it(n,cr.StrictFunctionName):ir.isRestrictedWord(n.value)?(i=n,o=cr.StrictFunctionName):ir.isStrictModeReservedWord(n.value)&&(i=n,o=cr.StrictReservedWord)),r=En(i),i=r.firstRestricted,r.message&&(o=r.message),a=Jn,s=nr.yieldAllowed,nr.yieldAllowed=u,t=bn(),Jn&&i&&rt(i,o),Jn&&r.stricted&&it(r.stricted,o),Jn=a,nr.yieldAllowed=s,Z(l,sr.createFunctionDeclaration(c,r.params,t,u,!1))}function Tn(){var e,t,n,r,i,o,a,s,u=null,c=et(),l=rr.ecmaFeatures.generators;return st("function"),s=!1,l&&ut("*")&&(A(),s=!0),ut("(")||(e=tr,u=Jt(),Jn?ir.isRestrictedWord(e.value)&&it(e,cr.StrictFunctionName):ir.isRestrictedWord(e.value)?(t=e,n=cr.StrictFunctionName):ir.isStrictModeReservedWord(e.value)&&(t=e,n=cr.StrictReservedWord)),r=En(t),t=r.firstRestricted,r.message&&(n=r.message),o=Jn,a=nr.yieldAllowed,nr.yieldAllowed=s,i=bn(),Jn&&t&&rt(t,n),Jn&&r.stricted&&it(r.stricted,n),Jn=o,nr.yieldAllowed=a,Z(c,sr.createFunctionExpression(u,r.params,i,s,!1))}function Pn(){var e,t,n,i=et();return e=A(),r("yield"===e.value,"Called parseYieldExpression with non-yield lookahead."),nr.yieldAllowed||it({},cr.IllegalYield),t=!1,ut("*")&&(A(),t=!0),nt()?Z(i,sr.createYieldExpression(null,t)):(ut(";")||ut(")")||ut("}")||tr.type===dr.EOF||(n=Wt()),Z(i,sr.createYieldExpression(n,t)))}function In(){var e,t=et();return tr.type!==dr.StringLiteral&&rt({},cr.InvalidModuleSpecifier),e=sr.createLiteralFromSource(A(),$n),Z(t,e)}function Dn(){var e,t,n=et();return ct("default")?(A(),t=Z(n,sr.createIdentifier("default"))):t=Jt(),lt("as")&&(A(),e=At()),Z(n,sr.createExportSpecifier(t,e))}function An(){var e,t=null,n=null,r=[],i=et();if(st("export"),tr.type===dr.Keyword)switch(tr.value){case"let":case"const":case"var":case"class":case"function":return t=Qn(),Z(i,sr.createExportNamedDeclaration(t,r,null))}if(at("{"),!ut("}"))do e=e||ct("default"),r.push(Dn());while(ut(",")&&A());return at("}"),lt("from")?(A(),n=In(),ft()):e?rt({},tr.value?cr.UnexpectedToken:cr.MissingFromClause,tr.value):ft(),Z(i,sr.createExportNamedDeclaration(t,r,n))}function Nn(){var e,t=null,n=null,r=rr.ecmaFeatures.classes,i=et();if(st("export"),st("default"),ct("function")||ct("class")){if(e=k(),e.type===dr.Identifier)return t=Qn(),Z(i,sr.createExportDefaultDeclaration(t));if("function"===tr.value)return t=Cn(!0),Z(i,sr.createExportDefaultDeclaration(t));if(r&&"class"===tr.value)return t=Vn(!0),Z(i,sr.createExportDefaultDeclaration(t))}return lt("from")&&rt({},cr.UnexpectedToken,tr.value),n=ut("{")?St():ut("[")?ht():Wt(),ft(),Z(i,sr.createExportDefaultDeclaration(n))}function kn(){var e,t=et();return st("export"),at("*"),lt("from")||rt({},tr.value?cr.UnexpectedToken:cr.MissingFromClause,tr.value),A(),e=In(),ft(),Z(t,sr.createExportAllDeclaration(e))}function On(){nr.inFunctionBody&&rt({},cr.IllegalExportDeclaration);var e=k().value;return"default"===e?Nn():"*"===e?kn():An()}function Rn(){var e,t,n=et();return t=At(),lt("as")&&(A(),e=Jt()),Z(n,sr.createImportSpecifier(e,t))}function jn(){var e=[];if(at("{"),!ut("}"))do e.push(Rn());while(ut(",")&&A());return at("}"),e}function Fn(){var e,t=et();return e=At(),Z(t,sr.createImportDefaultSpecifier(e))}function Ln(){var e,t=et();return at("*"),lt("as")||rt({},cr.NoAsAfterImportNamespace),A(),e=At(),Z(t,sr.createImportNamespaceSpecifier(e))}function Mn(){var e,t,n=et();return nr.inFunctionBody&&rt({},cr.IllegalImportDeclaration),st("import"),e=[],tr.type===dr.StringLiteral?(t=In(),ft(),Z(n,sr.createImportDeclaration(e,t))):(!ct("default")&&T(tr)&&(e.push(Fn()),ut(",")&&A()),ut("*")?e.push(Ln()):ut("{")&&(e=e.concat(jn())),lt("from")||rt({},tr.value?cr.UnexpectedToken:cr.MissingFromClause,tr.value),A(),t=In(),ft(),Z(n,sr.createImportDeclaration(e,t)))}function Bn(){var e,t,n,r,i,o,a=!1,s=!1,u=rr.ecmaFeatures.generators,c=[],l={},p=et();for(l.static=new pr,l.prototype=new pr,at("{");!ut("}");)ut(";")?A():(e=tr,t=!1,s=ut("*"),r=ut("["),o=et(),s&&(u||ot(tr),A()),i=vt(),"static"===i.name&&ut("*")&&(u||ot(tr),s=!0,A()),"static"===i.name&&yt()&&(e=tr,t=!0,r=ut("["),i=vt()),n=s?xt(i,o):_t(e,i,r,o,s),n?(n.static=t,"init"===n.kind&&(n.kind="method"),t?n.computed||"prototype"!==(n.key.name||n.key.value.toString())||ot(e,cr.StaticPrototype):n.computed||"constructor"!==(n.key.name||n.key.value&&n.key.value.toString())||(("method"!==n.kind||!n.method||n.value.generator)&&ot(e,cr.ConstructorSpecialMethod),a?ot(e,cr.DuplicateConstructor):a=!0,n.kind="constructor"),n.type=ar.MethodDefinition,delete n.method,delete n.shorthand,c.push(n)):ot(tr));return A(),Z(p,sr.createClassBody(c))}function Un(){var e,t=null,n=null,r=et(),i=Jn;return Jn=!0,st("class"),tr.type===dr.Identifier&&(t=Jt()),ct("extends")&&(A(),n=Rt()),e=Bn(),Jn=i,Z(r,sr.createClassExpression(t,n,e))}function Vn(e){var t,n=null,r=null,i=et(),o=Jn;return Jn=!0,st("class"),e&&tr.type!==dr.Identifier||(n=Jt()),ct("extends")&&(A(),r=Rt()),t=Bn(),Jn=o,Z(i,sr.createClassDeclaration(n,r,t))}function Qn(){var e=rr.ecmaFeatures.classes,t=rr.ecmaFeatures.modules,n=rr.ecmaFeatures.blockBindings;if(tr.type===dr.Keyword)switch(tr.value){case"export":return t||it({},cr.IllegalExportDeclaration),On();case"import":return t||it({},cr.IllegalImportDeclaration),Mn();case"function":return Cn();case"class":if(e)return Vn();break;case"const":case"let":if(n)return en(tr.value);default:return xn()}return tr.type!==dr.EOF?xn():void 0}function Gn(){for(var e,t,n,r,i=[];er>Kn&&(t=tr,t.type===dr.StringLiteral)&&(e=Qn(),i.push(e),e.expression.type===ar.Literal);)n=$n.slice(t.range[0]+1,t.range[1]-1),"use strict"===n?(Jn=!0,r&&it(r,cr.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(;er>Kn&&(e=Qn(),"undefined"!=typeof e);)i.push(e);return i}function Hn(){var e,t,n=!!rr.ecmaFeatures.modules;return s(),N(),t=et(),Jn=n,e=Gn(),Z(t,sr.createProgram(e,n?"module":"script"))}function zn(){var e,t,n,r=[];for(e=0;e<rr.tokens.length;++e)t=rr.tokens[e],n={type:t.type,value:t.value},t.regex&&(n.regex={pattern:t.regex.pattern,flags:t.regex.flags}),rr.range&&(n.range=t.range),rr.loc&&(n.loc=t.loc),r.push(n);rr.tokens=r}function Wn(e,t){var n,r;n=String,"string"==typeof e||e instanceof String||(e=n(e)),$n=e,Kn=0,Yn=$n.length>0?1:0,Zn=0,er=$n.length,tr=null,nr={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1,yieldAllowed:!1,curlyStack:[],curlyLastIndex:0,inJSXSpreadAttribute:!1,inJSXChild:!1,inJSXTag:!1},rr={ecmaFeatures:ur},t=t||{},t.tokens=!0,rr.tokens=[],rr.tokenize=!0,rr.openParenToken=-1,rr.openCurlyToken=-1,rr.range="boolean"==typeof t.range&&t.range,rr.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.comment&&t.comment&&(rr.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(rr.errors=[]),t.ecmaFeatures&&"object"==typeof t.ecmaFeatures&&(rr.ecmaFeatures=t.ecmaFeatures);try{if(N(),tr.type===dr.EOF)return rr.tokens;for(A();tr.type!==dr.EOF;)try{A()}catch(i){if(rr.errors){rr.errors.push(i);break}throw i}zn(),r=rr.tokens,"undefined"!=typeof rr.comments&&(r.comments=rr.comments),"undefined"!=typeof rr.errors&&(r.errors=rr.errors)}catch(o){throw o}finally{rr={}}return r}function qn(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),$n=e,Kn=0,Yn=$n.length>0?1:0,Zn=0,er=$n.length,tr=null,nr={allowIn:!0,labelSet:new pr,parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1,yieldAllowed:!1,curlyStack:[],curlyLastIndex:0,inJSXSpreadAttribute:!1,inJSXChild:!1,inJSXTag:!1},rr={ecmaFeatures:Object.create(ur)},nr.curlyStack=[],"undefined"!=typeof t&&(rr.range="boolean"==typeof t.range&&t.range,rr.loc="boolean"==typeof t.loc&&t.loc,rr.attachComment="boolean"==typeof t.attachComment&&t.attachComment,rr.loc&&null!==t.source&&void 0!==t.source&&(rr.source=r(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(rr.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(rr.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(rr.errors=[]),rr.attachComment&&(rr.range=!0,rr.comments=[],fr.reset()),"module"===t.sourceType&&(rr.ecmaFeatures={arrowFunctions:!0,blockBindings:!0,regexUFlag:!0,regexYFlag:!0,templateStrings:!0,binaryLiterals:!0,octalLiterals:!0,unicodeCodePointEscapes:!0,superInFunctions:!0,defaultParams:!0,restParams:!0,forOf:!0,objectLiteralComputedProperties:!0,objectLiteralShorthandMethods:!0,objectLiteralShorthandProperties:!0,objectLiteralDuplicateProperties:!0,generators:!0,destructuring:!0,classes:!0,modules:!0}),t.ecmaFeatures&&"object"==typeof t.ecmaFeatures&&("module"===t.sourceType?Object.keys(t.ecmaFeatures).forEach(function(e){rr.ecmaFeatures[e]=t.ecmaFeatures[e]}):rr.ecmaFeatures=t.ecmaFeatures));try{n=Hn(),"undefined"!=typeof rr.comments&&(n.comments=rr.comments),"undefined"!=typeof rr.tokens&&(zn(),n.tokens=rr.tokens),"undefined"!=typeof rr.errors&&(n.errors=rr.errors)}catch(i){throw i}finally{rr={}}return n}var Xn,$n,Jn,Kn,Yn,Zn,er,tr,nr,rr,ir=e("./lib/syntax"),or=e("./lib/token-info"),ar=e("./lib/ast-node-types"),sr=e("./lib/ast-node-factory"),ur=e("./lib/features"),cr=e("./lib/messages"),lr=e("./lib/xhtml-entities"),pr=e("./lib/string-map"),fr=e("./lib/comment-attachment"),dr=or.Token,hr=or.TokenName,mr=or.FnExprTokens,gr=ir.Regex;Xn={Data:1,Get:2,Set:4},n.version=e("./package.json").version,n.tokenize=Wn,n.parse=qn,n.Syntax=function(){var e,t={};"function"==typeof Object.create&&(t=Object.create(null));for(e in ar)ar.hasOwnProperty(e)&&(t[e]=ar[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()},{"./lib/ast-node-factory":1,"./lib/ast-node-types":2,"./lib/comment-attachment":3,"./lib/features":4,"./lib/messages":5,"./lib/string-map":6,"./lib/syntax":7,"./lib/token-info":8,"./lib/xhtml-entities":9,"./package.json":10}]},{},[]);!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("sap.watt.saptoolsets.fiori.editor.fioriJsValidator/lib/eslint/eslint",[],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.eslint=e()}}(function(){return function t(n,r,i){function o(s,u){if(!r[s]){if(!n[s]){var c="function"==typeof e&&e;if(!u&&c)return c(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var p=r[s]={exports:{}};n[s][0].call(p.exports,function(e){var t=n[s][1][e];return o(t?t:e)},p,p.exports,t,n,r,i)}return r[s].exports}for(var a="function"==typeof e&&e,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t){"use strict";var n=e("globals");t.exports={builtin:n.builtin,browser:{globals:n.browser},node:{globals:n.node,ecmaFeatures:{globalReturn:!0},rules:{"no-catch-shadow":0,"no-console":0,"no-mixed-requires":2,"no-new-require":2,"no-path-concat":2,"no-process-exit":2,"global-strict":[0,"always"],"handle-callback-err":[2,"err"]}},worker:{globals:n.worker},amd:{globals:n.amd},mocha:{globals:n.mocha},jasmine:{globals:n.jasmine},phantomjs:{globals:n.phantom},jquery:{globals:n.jquery},prototypejs:{globals:n.prototypejs},shelljs:{globals:n.shelljs},meteor:{globals:n.meteor},mongo:{globals:n.mongo},applescript:{globals:n.applescript},es6:{ecmaFeatures:{arrowFunctions:!0,blockBindings:!0,regexUFlag:!0,regexYFlag:!0,templateStrings:!0,binaryLiterals:!0,octalLiterals:!0,unicodeCodePointEscapes:!0,superInFunctions:!0,defaultParams:!0,restParams:!0,forOf:!0,objectLiteralComputedProperties:!0,objectLiteralShorthandMethods:!0,objectLiteralShorthandProperties:!0,objectLiteralDuplicateProperties:!0,generators:!0,destructuring:!0,classes:!0}}}},{globals:136}],2:[function(e,t){t.exports={ecmaFeatures:{},parser:"espree",env:{browser:!1,node:!1,amd:!1,mocha:!1,jasmine:!1},rules:{"no-alert":2,"no-array-constructor":2,"no-bitwise":0,"no-caller":2,"no-catch-shadow":2,"no-comma-dangle":0,"no-cond-assign":2,"no-console":2,"no-constant-condition":2,"no-continue":0,"no-control-regex":2,"no-debugger":2,"no-delete-var":2,"no-div-regex":0,"no-dupe-keys":2,"no-dupe-args":2,"no-duplicate-case":2,"no-else-return":0,"no-empty":2,"no-empty-class":0,"no-empty-character-class":2,"no-empty-label":2,"no-eq-null":0,"no-eval":2,"no-ex-assign":2,"no-extend-native":2,"no-extra-bind":2,"no-extra-boolean-cast":2,"no-extra-parens":0,"no-extra-semi":2,"no-extra-strict":2,"no-fallthrough":2,"no-floating-decimal":0,"no-func-assign":2,"no-implied-eval":2,"no-inline-comments":0,"no-inner-declarations":[2,"functions"],"no-invalid-regexp":2,"no-irregular-whitespace":2,"no-iterator":2,"no-label-var":2,"no-labels":2,"no-lone-blocks":2,"no-lonely-if":0,"no-loop-func":2,"no-mixed-requires":[0,!1],"no-mixed-spaces-and-tabs":[2,!1],"linebreak-style":[0,"unix"],"no-multi-spaces":2,"no-multi-str":2,"no-multiple-empty-lines":[0,{max:2}],"no-native-reassign":2,"no-negated-in-lhs":2,"no-nested-ternary":0,"no-new":2,"no-new-func":2,"no-new-object":2,"no-new-require":0,"no-new-wrappers":2,"no-obj-calls":2,"no-octal":2,"no-octal-escape":2,"no-param-reassign":0,"no-path-concat":0,"no-plusplus":0,"no-process-env":0,"no-process-exit":2,"no-proto":2,"no-redeclare":2,"no-regex-spaces":2,"no-reserved-keys":0,"no-restricted-modules":0,"no-return-assign":2,"no-script-url":2,"no-self-compare":0,"no-sequences":2,"no-shadow":2,"no-shadow-restricted-names":2,"no-space-before-semi":0,"no-spaced-func":2,"no-sparse-arrays":2,"no-sync":0,"no-ternary":0,"no-trailing-spaces":2,"no-throw-literal":0,"no-undef":2,"no-undef-init":2,"no-undefined":0,"no-underscore-dangle":2,"no-unneeded-ternary":0,"no-unreachable":2,"no-unused-expressions":2,"no-unused-vars":[2,{vars:"all",args:"after-used"}],"no-use-before-define":2,"no-void":0,"no-var":0,"prefer-const":0,"no-warning-comments":[0,{terms:["todo","fixme","xxx"],location:"start"}],"no-with":2,"no-wrap-func":2,"array-bracket-spacing":[0,"never"],"accessor-pairs":0,"block-scoped-var":0,"brace-style":[0,"1tbs"],camelcase:2,"comma-dangle":[2,"never"],"comma-spacing":2,"comma-style":0,complexity:[0,11],"computed-property-spacing":[0,"never"],"consistent-return":2,"consistent-this":[0,"that"],curly:[2,"all"],"default-case":0,"dot-location":0,"dot-notation":[2,{allowKeywords:!0}],"eol-last":2,eqeqeq:2,"func-names":0,"func-style":[0,"declaration"],"generator-star":0,"generator-star-spacing":0,"global-strict":[2,"never"],"guard-for-in":0,"handle-callback-err":0,indent:0,"key-spacing":[2,{beforeColon:!1,afterColon:!0}],"lines-around-comment":0,"max-depth":[0,4],"max-len":[0,80,4],"max-nested-callbacks":[0,2],"max-params":[0,3],"max-statements":[0,10],"new-cap":2,"new-parens":2,"newline-after-var":0,"object-curly-spacing":[0,"never"],"object-shorthand":0,"one-var":0,"operator-assignment":[0,"always"],"operator-linebreak":0,"padded-blocks":0,"quote-props":0,quotes:[2,"double"],radix:0,semi:2,"semi-spacing":[2,{before:!1,after:!0}],"sort-vars":0,"space-after-function-name":[0,"never"],"space-after-keywords":[0,"always"],"space-before-blocks":[0,"always"],"space-before-function-paren":[0,"always"],"space-before-function-parentheses":[0,"always"],"space-in-brackets":[0,"never"],"space-in-parens":[0,"never"],"space-infix-ops":2,"space-return-throw-case":2,"space-unary-ops":[2,{words:!0,nonwords:!1}],"spaced-comment":0,"spaced-line-comment":[0,"always"],strict:2,"use-isnan":2,"valid-jsdoc":0,"valid-typeof":2,"vars-on-top":0,"wrap-iife":0,"wrap-regex":0,yoda:[2,"never"]}}},{}],3:[function(e,t){function n(e,t){return f.isUndefined(t)?""+t:f.isNumber(t)&&!isFinite(t)?t.toString():f.isFunction(t)||f.isRegExp(t)?t.toString():t}function r(e,t){return f.isString(e)?e.length<t?e:e.slice(0,t):e}function i(e){return r(JSON.stringify(e.actual,n),128)+" "+e.operator+" "+r(JSON.stringify(e.expected,n),128)}function o(e,t,n,r,i){throw new m.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function a(e,t){e||o(e,!0,t,"==",m.ok)}function s(e,t){if(e===t)return!0;if(f.isBuffer(e)&&f.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return f.isDate(e)&&f.isDate(t)?e.getTime()===t.getTime():f.isRegExp(e)&&f.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:f.isObject(e)||f.isObject(t)?c(e,t):e==t}function u(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function c(e,t){if(f.isNullOrUndefined(e)||f.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(f.isPrimitive(e)||f.isPrimitive(t))return e===t;var n=u(e),r=u(t);if(n&&!r||!n&&r)return!1;if(n)return e=d.call(e),t=d.call(t),s(e,t);var i,o,a=g(e),c=g(t);if(a.length!=c.length)return!1;for(a.sort(),c.sort(),o=a.length-1;o>=0;o--)if(a[o]!=c[o])return!1;for(o=a.length-1;o>=0;o--)if(i=a[o],!s(e[i],t[i]))return!1;return!0}function l(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}function p(e,t,n,r){var i;f.isString(n)&&(r=n,n=null);try{t()}catch(a){i=a}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&o(i,n,"Missing expected exception"+r),!e&&l(i,n)&&o(i,n,"Got unwanted exception"+r),e&&i&&n&&!l(i,n)||!e&&i)throw i}var f=e("util/"),d=Array.prototype.slice,h=Object.prototype.hasOwnProperty,m=t.exports=a;m.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=i(this),this.generatedMessage=!0);var t=e.stackStartFunction||o;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,a=t.name,s=r.indexOf("\n"+a);if(s>=0){var u=r.indexOf("\n",s+1);r=r.substring(u+1)}this.stack=r}}},f.inherits(m.AssertionError,Error),m.fail=o,m.ok=a,m.equal=function(e,t,n){e!=t&&o(e,t,n,"==",m.equal)},m.notEqual=function(e,t,n){e==t&&o(e,t,n,"!=",m.notEqual)},m.deepEqual=function(e,t,n){s(e,t)||o(e,t,n,"deepEqual",m.deepEqual)},m.notDeepEqual=function(e,t,n){s(e,t)&&o(e,t,n,"notDeepEqual",m.notDeepEqual)},m.strictEqual=function(e,t,n){e!==t&&o(e,t,n,"===",m.strictEqual)},m.notStrictEqual=function(e,t,n){e===t&&o(e,t,n,"!==",m.notStrictEqual)},m.throws=function(){p.apply(this,[!0].concat(d.call(arguments)))},m.doesNotThrow=function(){p.apply(this,[!1].concat(d.call(arguments)))},m.ifError=function(e){if(e)throw e};var g=Object.keys||function(e){var t=[];for(var n in e)h.call(e,n)&&t.push(n);return t}},{"util/":10}],4:[function(e,t){(function(n){function r(){}function i(){f.log.apply(f,arguments)}function o(){f.log.apply(f,arguments)}function a(){f.warn.apply(f,arguments)}function s(e){v[e]=m()}function u(e){var t=v[e];if(!t)throw new Error("No such label: "+e);var n=m()-t;f.log(e+": "+n+"ms")}function c(){var e=new Error;e.name="Trace",e.message=d.format.apply(null,arguments),f.error(e.stack)}function l(e){f.log(d.inspect(e)+"\n")}function p(e){if(!e){var t=g.call(arguments,1);h.ok(!1,d.format.apply(null,t))}}var f,d=e("util"),h=e("assert"),m=e("date-now"),g=Array.prototype.slice,v={};f="undefined"!=typeof n&&n.console?n.console:"undefined"!=typeof window&&window.console?window.console:{};for(var y=[[r,"log"],[i,"info"],[o,"warn"],[a,"error"],[s,"time"],[u,"timeEnd"],[c,"trace"],[l,"dir"],[p,"assert"]],_=0;_<y.length;_++){var x=y[_],b=x[0],w=x[1];f[w]||(f[w]=b)}t.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{assert:3,"date-now":5,util:10}],5:[function(e,t){function n(){return(new Date).getTime()}t.exports=n},{}],6:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),u=1;i>u;u++)s[u-1]=arguments[u];n.apply(this,s)}else if(o(n)){for(i=arguments.length,s=new Array(i-1),u=1;i>u;u++)s[u-1]=arguments[u];for(c=n.slice(),i=c.length,u=0;i>u;u++)c[u].apply(this,s)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var i;i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-->0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],7:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],8:[function(e,t){function n(){if(!a){a=!0;for(var e,t=o.length;t;){e=o,o=[];for(var n=-1;++n<t;)e[n]();t=o.length}a=!1}}function r(){}var i=t.exports={},o=[],a=!1;i.nextTick=function(e){o.push(e),a||setTimeout(n,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],9:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],10:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(t)?r.showHidden=t:t&&n._extend(r,t),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function a(e){return e}function s(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function u(e,t,r){if(e.customInspect&&t&&T(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);
return _(i)||(i=u(e,i,r)),i}var o=c(e,t);if(o)return o;var a=Object.keys(t),m=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),C(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(t);if(0===a.length){if(T(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(C(t))return l(t)}var v="",y=!1,x=["{","}"];if(h(t)&&(y=!0,x=["[","]"]),T(t)){var b=t.name?": "+t.name:"";v=" [Function"+b+"]"}if(w(t)&&(v=" "+RegExp.prototype.toString.call(t)),E(t)&&(v=" "+Date.prototype.toUTCString.call(t)),C(t)&&(v=" "+l(t)),0===a.length&&(!y||0==t.length))return x[0]+v+x[1];if(0>r)return w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var S;return S=y?p(e,t,r,m,a):a.map(function(n){return f(e,t,r,m,n,y)}),e.seen.pop(),d(S,v,x)}function c(e,t){if(b(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,i){for(var o=[],a=0,s=t.length;s>a;++a)N(t,String(a))?o.push(f(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(e,t,n,r,i,!0))}),o}function f(e,t,n,r,i,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),N(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=g(n)?u(e,c.value,null):u(e,c.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),b(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function d(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function _(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function b(e){return void 0===e}function w(e){return S(e)&&"[object RegExp]"===I(e)}function S(e){return"object"==typeof e&&null!==e}function E(e){return S(e)&&"[object Date]"===I(e)}function C(e){return S(e)&&("[object Error]"===I(e)||e instanceof Error)}function T(e){return"function"==typeof e}function P(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function I(e){return Object.prototype.toString.call(e)}function D(e){return 10>e?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[D(e.getHours()),D(e.getMinutes()),D(e.getSeconds())].join(":");return[e.getDate(),j[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var k=/%[sdj%]/g;n.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(e).replace(k,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),s=r[n];o>n;s=r[++n])a+=g(s)||!S(s)?" "+s:" "+i(s);return a},n.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(b(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return o};var O,R={};n.debuglog=function(e){if(b(O)&&(O=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!R[e])if(new RegExp("\\b"+e+"\\b","i").test(O)){var r=t.pid;R[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else R[e]=function(){};return R[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=m,n.isNull=g,n.isNullOrUndefined=v,n.isNumber=y,n.isString=_,n.isSymbol=x,n.isUndefined=b,n.isRegExp=w,n.isObject=S,n.isDate=E,n.isError=C,n.isFunction=T,n.isPrimitive=P,n.isBuffer=e("./support/isBuffer");var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",A(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":9,_process:8,inherits:7}],11:[function(e,t,n){!function(){"use strict";function t(e,t,n){return e.slice(t,n)}function r(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function i(e){return e>=97&&122>=e||e>=65&&90>=e||e>=48&&57>=e}function o(e){return"param"===e||"argument"===e||"arg"===e}function a(e){return"property"===e||"prop"===e}function s(e){return o(e)||a(e)||"alias"===e||"this"===e||"mixes"===e||"requires"===e}function u(e){return s(e)||"const"===e||"constant"===e}function c(e){return a(e)||o(e)}function l(e){return o(e)||"define"===e||"enum"===e||"implements"===e||"return"===e||"this"===e||"type"===e||"typedef"===e||"returns"===e||a(e)}function p(e){return l(e)||"throws"===e||"const"===e||"constant"===e||"namespace"===e||"member"===e||"var"===e||"module"===e||"constructor"===e||"class"===e||"extends"===e||"augments"===e||"public"===e||"private"===e||"protected"===e}function f(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function d(e){var t,n,r,i,o,a=0,s=1,u=2;for(e=e.replace(/^\/\*\*?/,"").replace(/\*\/$/,""),t=0,n=e.length,r=a,i="";n>t;){switch(o=e.charCodeAt(t),r){case a:y.code.isLineTerminator(o)?i+=String.fromCharCode(o):42===o?r=s:y.code.isWhiteSpace(o)||(i+=String.fromCharCode(o),r=u);break;case s:y.code.isWhiteSpace(o)||(i+=String.fromCharCode(o)),r=y.code.isLineTerminator(o)?a:u;break;case u:i+=String.fromCharCode(o),y.code.isLineTerminator(o)&&(r=a)}t+=1}return i}var h,m,g,v,y,_;y=e("esutils"),g=e("isarray"),h=e("./typed"),m=e("./utility"),_=function(){var e=Object.prototype.hasOwnProperty;return function(t,n){return e.call(t,n)}}(),function(e){function n(){var e=k.charCodeAt(D);return D+=1,!y.code.isLineTerminator(e)||13===e&&10===k.charCodeAt(D)||(A+=1),String.fromCharCode(e)}function r(){var e="";for(n();N>D&&i(k.charCodeAt(D));)e+=n();return e}function a(){var e,t,n=D;for(t=!1;N>n;){if(e=k.charCodeAt(n),!y.code.isLineTerminator(e)||13===e&&10===k.charCodeAt(n+1)){if(t){if(64===e)break;y.code.isWhiteSpace(e)||(t=!1)}}else A+=1,t=!0;n+=1}return n}function v(e,t){for(var r,i,a,s=!1;t>D;){if(r=k.charCodeAt(D),!y.code.isWhiteSpace(r)){if(123===r){n();break}s=!0;break}n()}if(s)return null;for(i=1,a="";t>D;)if(r=k.charCodeAt(D),y.code.isLineTerminator(r))n();else{if(125===r){if(i-=1,0===i){n();break}}else 123===r&&(i+=1);a+=n()}return 0!==i?m.throwError("Braces are not balanced"):o(e)?h.parseParamType(a):h.parseType(a)}function x(e){var t;if(!y.code.isIdentifierStart(k.charCodeAt(D)))return null;for(t=n();e>D&&y.code.isIdentifierPart(k.charCodeAt(D));)t+=n();return t}function b(e){for(;e>D&&(y.code.isWhiteSpace(k.charCodeAt(D))||y.code.isLineTerminator(k.charCodeAt(D)));)n()}function w(e,t,r){var i,o="";if(b(e),D>=e)return null;if(t&&91===k.charCodeAt(D)&&(i=!0,o=n()),!y.code.isIdentifierStart(k.charCodeAt(D)))return null;if(o+=x(e),r)for(58!==k.charCodeAt(D)||"module"!==o&&"external"!==o&&"event"!==o||(o+=n(),o+=x(e));46===k.charCodeAt(D)||35===k.charCodeAt(D)||126===k.charCodeAt(D);)o+=n(),o+=x(e);if(i){if(61===k.charCodeAt(D))for(o+=n();e>D&&93!==k.charCodeAt(D);)o+=n();if(D>=e||93!==k.charCodeAt(D))return null;o+=n()}return o}function S(){for(;N>D&&64!==k.charCodeAt(D);)n();return D>=N?!1:(m.assert(64===k.charCodeAt(D)),!0)}function E(e,t){this._options=e,this._title=t,this._tag={title:t,description:null},this._options.lineNumbers&&(this._tag.lineNumber=A),this._last=0,this._extra={}}function C(e){var t,n;return S()?(t=r(),n=new E(e,t),n.parse()):null}function T(){var e,t,r="";for(t=!0;N>D&&(e=k.charCodeAt(D),!t||64!==e);)y.code.isLineTerminator(e)?t=!0:t&&!y.code.isWhiteSpace(e)&&(t=!1),r+=n();return f(r)}function P(e,t){var n,r,i,o,a,s=[];if(void 0===t&&(t={}),k="boolean"==typeof t.unwrap&&t.unwrap?d(e):e,t.tags)if(g(t.tags))for(i={},o=0,a=t.tags.length;a>o;o++)"string"==typeof t.tags[o]?i[t.tags[o]]=!0:m.throwError('Invalid "tags" parameter: '+t.tags);else m.throwError('Invalid "tags" parameter: '+t.tags);for(N=k.length,D=0,A=0,O=t.recoverable,R=t.sloppy,j=t.strict,r=T();;){if(n=C(t),!n)break;(!i||i.hasOwnProperty(n.title))&&s.push(n)}return{description:r,tags:s}}var I,D,A,N,k,O,R,j;E.prototype.addError=function(e){var t=Array.prototype.slice.call(arguments,1),n=e.replace(/%(\d)/g,function(e,n){return m.assert(n<t.length,"Message reference must be in range"),t[n]});return this._tag.errors||(this._tag.errors=[]),j&&m.throwError(n),this._tag.errors.push(n),O},E.prototype.parseType=function(){if(l(this._title))try{if(this._tag.type=v(this._title,this._last),!this._tag.type&&!o(this._title)&&!this.addError("Missing or invalid tag type"))return!1}catch(e){if(this._tag.type=null,!this.addError(e.message))return!1}else if(p(this._title))try{this._tag.type=v(this._title,this._last)}catch(t){}return!0},E.prototype._parseNamePath=function(e){var t;return t=w(this._last,R&&o(this._title),!0),t||e||this.addError("Missing or invalid tag name")?(this._tag.name=t,!0):!1},E.prototype.parseNamePath=function(){return this._parseNamePath(!1)},E.prototype.parseNamePathOptional=function(){return this._parseNamePath(!0)},E.prototype.parseName=function(){var e,t;if(u(this._title))if(this._tag.name=w(this._last,R&&o(this._title),c(this._title)),this._tag.name)t=this._tag.name,"["===t.charAt(0)&&"]"===t.charAt(t.length-1)&&(e=t.substring(1,t.length-1).split("="),e[1]&&(this._tag["default"]=e[1]),this._tag.name=e[0],this._tag.type&&"OptionalType"!==this._tag.type.type&&(this._tag.type={type:"OptionalType",expression:this._tag.type}));else{if(!s(this._title))return!0;if(o(this._title)&&this._tag.type&&this._tag.type.name)this._extra.name=this._tag.type,this._tag.name=this._tag.type.name,this._tag.type=null;else if(!this.addError("Missing or invalid tag name"))return!1}return!0},E.prototype.parseDescription=function(){var e=f(t(k,D,this._last));return e&&(/^-\s+/.test(e)&&(e=e.substring(2)),this._tag.description=e),!0},E.prototype.parseKind=function(){var e,n;return n={"class":!0,constant:!0,event:!0,external:!0,file:!0,"function":!0,member:!0,mixin:!0,module:!0,namespace:!0,typedef:!0},e=f(t(k,D,this._last)),this._tag.kind=e,_(n,e)||this.addError("Invalid kind name '%0'",e)?!0:!1},E.prototype.parseAccess=function(){var e;return e=f(t(k,D,this._last)),this._tag.access=e,"private"===e||"protected"===e||"public"===e||this.addError("Invalid access name '%0'",e)?!0:!1},E.prototype.parseVariation=function(){var e,n;return n=f(t(k,D,this._last)),e=parseFloat(n,10),this._tag.variation=e,isNaN(e)&&!this.addError("Invalid variation '%0'",n)?!1:!0},E.prototype.ensureEnd=function(){var e=f(t(k,D,this._last));return e&&!this.addError("Unknown content '%0'",e)?!1:!0},E.prototype.epilogue=function(){var e;return e=this._tag.description,!o(this._title)||this._tag.type||!e||"["!==e.charAt(0)||(this._tag.type=this._extra.name,this._tag.name=void 0,R||this.addError("Missing or invalid tag name"))?!0:!1},I={access:["parseAccess"],alias:["parseNamePath","ensureEnd"],augments:["parseType","parseNamePathOptional","ensureEnd"],constructor:["parseType","parseNamePathOptional","ensureEnd"],"class":["parseType","parseNamePathOptional","ensureEnd"],"extends":["parseType","parseNamePathOptional","ensureEnd"],deprecated:["parseDescription"],global:["ensureEnd"],inner:["ensureEnd"],instance:["ensureEnd"],kind:["parseKind"],mixes:["parseNamePath","ensureEnd"],mixin:["parseNamePathOptional","ensureEnd"],member:["parseType","parseNamePathOptional","ensureEnd"],method:["parseNamePathOptional","ensureEnd"],module:["parseType","parseNamePathOptional","ensureEnd"],func:["parseNamePathOptional","ensureEnd"],"function":["parseNamePathOptional","ensureEnd"],"var":["parseType","parseNamePathOptional","ensureEnd"],name:["parseNamePath","ensureEnd"],namespace:["parseType","parseNamePathOptional","ensureEnd"],"private":["parseType","parseDescription"],"protected":["parseType","parseDescription"],"public":["parseType","parseDescription"],readonly:["ensureEnd"],requires:["parseNamePath","ensureEnd"],since:["parseDescription"],"static":["ensureEnd"],summary:["parseDescription"],"this":["parseNamePath","ensureEnd"],todo:["parseDescription"],variation:["parseVariation"],version:["parseDescription"]},E.prototype.parse=function(){var e,t,n,r;if(!this._title&&!this.addError("Missing or invalid title"))return null;for(this._last=a(this._title),n=_(I,this._title)?I[this._title]:["parseType","parseName","parseDescription","epilogue"],e=0,t=n.length;t>e;++e)if(r=n[e],!this[r]())return null;return D=this._last,this._tag},e.parse=P}(v={}),n.version=m.VERSION,n.parse=v.parse,n.parseType=h.parseType,n.parseParamType=h.parseParamType,n.unwrapComment=d,n.Syntax=r(h.Syntax),n.Error=m.DoctrineError,n.type={Syntax:n.Syntax,parseType:h.parseType,parseParamType:h.parseParamType,stringify:h.stringify}}()},{"./typed":12,"./utility":13,esutils:17,isarray:18}],12:[function(e,t,n){!function(){"use strict";function t(e){return-1==="><(){}[],:*|?!=".indexOf(String.fromCharCode(e))&&!B.code.isWhiteSpace(e)&&!B.code.isLineTerminator(e)}function r(e,t,n,r){this._previous=e,this._index=t,this._token=n,this._value=r}function i(){var e=O.charAt(j);return j+=1,e}function o(e){var t,n,r,o=0;for(n="u"===e?4:2,t=0;n>t;++t){if(!(R>j&&B.code.isHexDigit(O.charCodeAt(j))))return"";r=i(),o=16*o+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(o)}function a(){var e,t,n,r,a,s="";for(e=O.charAt(j),++j;R>j;){if(t=i(),t===e){e="";break}if("\\"===t)if(t=i(),B.code.isLineTerminator(t.charCodeAt(0)))"\r"===t&&10===O.charCodeAt(j)&&++j;else switch(t){case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="	";break;case"u":case"x":a=j,r=o(t),r?s+=r:(j=a,s+=t);break;case"b":s+="\b";break;case"f":s+="\f";break;case"v":s+="";break;default:B.code.isOctalDigit(t.charCodeAt(0))?(n="01234567".indexOf(t),R>j&&B.code.isOctalDigit(O.charCodeAt(j))&&(n=8*n+"01234567".indexOf(i()),"0123".indexOf(t)>=0&&R>j&&B.code.isOctalDigit(O.charCodeAt(j))&&(n=8*n+"01234567".indexOf(i()))),s+=String.fromCharCode(n)):s+=t}else{if(B.code.isLineTerminator(t.charCodeAt(0)))break;s+=t}}return""!==e&&U.throwError("unexpected quote"),M=s,k.STRING}function s(){var e,t;if(e="",t=O.charCodeAt(j),46!==t){if(e=i(),t=O.charCodeAt(j),"0"===e){if(120===t||88===t){for(e+=i();R>j&&(t=O.charCodeAt(j),B.code.isHexDigit(t));)e+=i();return e.length<=2&&U.throwError("unexpected token"),R>j&&(t=O.charCodeAt(j),B.code.isIdentifierStart(t)&&U.throwError("unexpected token")),M=parseInt(e,16),k.NUMBER}if(B.code.isOctalDigit(t)){for(e+=i();R>j&&(t=O.charCodeAt(j),B.code.isOctalDigit(t));)e+=i();return R>j&&(t=O.charCodeAt(j),(B.code.isIdentifierStart(t)||B.code.isDecimalDigit(t))&&U.throwError("unexpected token")),M=parseInt(e,8),k.NUMBER}B.code.isDecimalDigit(t)&&U.throwError("unexpected token")}for(;R>j&&(t=O.charCodeAt(j),B.code.isDecimalDigit(t));)e+=i()}if(46===t)for(e+=i();R>j&&(t=O.charCodeAt(j),B.code.isDecimalDigit(t));)e+=i();if(101===t||69===t)if(e+=i(),t=O.charCodeAt(j),(43===t||45===t)&&(e+=i()),t=O.charCodeAt(j),B.code.isDecimalDigit(t))for(e+=i();R>j&&(t=O.charCodeAt(j),B.code.isDecimalDigit(t));)e+=i();else U.throwError("unexpected token");return R>j&&(t=O.charCodeAt(j),B.code.isIdentifierStart(t)&&U.throwError("unexpected token")),M=parseFloat(e),k.NUMBER}function u(){var e,n;for(M=i();R>j&&t(O.charCodeAt(j));){if(e=O.charCodeAt(j),46===e){if(j+1>=R)return k.ILLEGAL;if(n=O.charCodeAt(j+1),60===n)break}M+=i()}return k.NAME}function c(){var e;for(F=j;R>j&&B.code.isWhiteSpace(O.charCodeAt(j));)i();if(j>=R)return L=k.EOF;switch(e=O.charCodeAt(j)){case 39:case 34:return L=a();case 58:return i(),L=k.COLON;case 44:return i(),L=k.COMMA;case 40:return i(),L=k.LPAREN;case 41:return i(),L=k.RPAREN;case 91:return i(),L=k.LBRACK;case 93:return i(),L=k.RBRACK;case 123:return i(),L=k.LBRACE;case 125:return i(),L=k.RBRACE;case 46:if(R>j+1){if(e=O.charCodeAt(j+1),60===e)return i(),i(),L=k.DOT_LT;if(46===e&&R>j+2&&46===O.charCodeAt(j+2))return i(),i(),i(),L=k.REST;if(B.code.isDecimalDigit(e))return L=s()}return L=k.ILLEGAL;case 60:return i(),L=k.LT;case 62:return i(),L=k.GT;case 42:return i(),L=k.STAR;case 124:return i(),L=k.PIPE;case 63:return i(),L=k.QUESTION;case 33:return i(),L=k.BANG;case 61:return i(),L=k.EQUAL;default:return B.code.isDecimalDigit(e)?L=s():(U.assert(t(e)),L=u())}}function l(e,t){U.assert(L===e,t||"consumed token not matched"),c()}function p(e,t){L!==e&&U.throwError(t||"unexpected token"),c()}function f(){var e;if(l(k.LPAREN,"UnionType should start with ("),e=[],L!==k.RPAREN)for(;;){if(e.push(E()),L===k.RPAREN)break;p(k.PIPE)}return l(k.RPAREN,"UnionType should end with )"),{type:N.UnionType,elements:e}}function d(){var e;for(l(k.LBRACK,"ArrayType should start with ["),e=[];L!==k.RBRACK;){if(L===k.REST){l(k.REST),e.push({type:N.RestType,expression:E()});break}e.push(E()),L!==k.RBRACK&&p(k.COMMA)}return p(k.RBRACK),{type:N.ArrayType,elements:e}}function h(){var e=M;return L===k.NAME||L===k.STRING?(c(),e):L===k.NUMBER?(l(k.NUMBER),String(e)):(U.throwError("unexpected token"),void 0)}function m(){var e;return e=h(),L===k.COLON?(l(k.COLON),{type:N.FieldType,key:e,value:E()}):{type:N.FieldType,key:e,value:null}}function g(){var e;if(l(k.LBRACE,"RecordType should start with {"),e=[],L===k.COMMA)l(k.COMMA);else for(;L!==k.RBRACE;)e.push(m()),L!==k.RBRACE&&p(k.COMMA);return p(k.RBRACE),{type:N.RecordType,fields:e}}function v(){var e=M;return p(k.NAME),L!==k.COLON||"module"!==e&&"external"!==e&&"event"!==e||(l(k.COLON),e+=":"+M,p(k.NAME)),{type:N.NameExpression,name:e}}function y(){var e=[];for(e.push(C());L===k.COMMA;)l(k.COMMA),e.push(C());return e}function _(){var e,t;return e=v(),L===k.DOT_LT||L===k.LT?(c(),t=y(),p(k.GT),{type:N.TypeApplication,expression:e,applications:t}):e}function x(){return l(k.COLON,"ResultType should start with :"),L===k.NAME&&"void"===M?(l(k.NAME),{type:N.VoidLiteral}):E()}function b(){for(var e,t=[],n=!1,r=!1;L!==k.RPAREN;)L===k.REST&&(l(k.REST),r=!0),e=E(),e.type===N.NameExpression&&L===k.COLON&&(l(k.COLON),e={type:N.ParameterType,name:e.name,expression:E()}),L===k.EQUAL?(l(k.EQUAL),e={type:N.OptionalType,expression:e},n=!0):n&&U.throwError("unexpected token"),r&&(e={type:N.RestType,expression:e}),t.push(e),L!==k.RPAREN&&p(k.COMMA);return t}function w(){var e,t,n,r,i;return U.assert(L===k.NAME&&"function"===M,"FunctionType should start with 'function'"),l(k.NAME),p(k.LPAREN),e=!1,n=[],t=null,L!==k.RPAREN&&(L!==k.NAME||"this"!==M&&"new"!==M?n=b():(e="new"===M,l(k.NAME),p(k.COLON),t=_(),L===k.COMMA&&(l(k.COMMA),n=b()))),p(k.RPAREN),r=null,L===k.COLON&&(r=x()),i={type:N.FunctionType,params:n,result:r},t&&(i["this"]=t,e&&(i["new"]=!0)),i}function S(){var e;switch(L){case k.STAR:return l(k.STAR),{type:N.AllLiteral};case k.LPAREN:return f();case k.LBRACK:return d();case k.LBRACE:return g();case k.NAME:if("null"===M)return l(k.NAME),{type:N.NullLiteral};if("undefined"===M)return l(k.NAME),{type:N.UndefinedLiteral};if(e=r.save(),"function"===M)try{return w()}catch(t){e.restore()}return _();default:U.throwError("unexpected token")}}function E(){var e;return L===k.QUESTION?(l(k.QUESTION),L===k.COMMA||L===k.EQUAL||L===k.RBRACE||L===k.RPAREN||L===k.PIPE||L===k.EOF||L===k.RBRACK||L===k.GT?{type:N.NullableLiteral}:{type:N.NullableType,expression:S(),prefix:!0}):L===k.BANG?(l(k.BANG),{type:N.NonNullableType,expression:S(),prefix:!0}):(e=S(),L===k.BANG?(l(k.BANG),{type:N.NonNullableType,expression:e,prefix:!1}):L===k.QUESTION?(l(k.QUESTION),{type:N.NullableType,expression:e,prefix:!1}):L===k.LBRACK?(l(k.LBRACK),p(k.RBRACK,"expected an array-style type declaration ("+M+"[])"),{type:N.TypeApplication,expression:{type:N.NameExpression,name:"Array"},applications:[e]}):e)}function C(){var e,t;if(e=E(),L!==k.PIPE)return e;for(t=[e],l(k.PIPE);;){if(t.push(E()),L!==k.PIPE)break;l(k.PIPE)}return{type:N.UnionType,elements:t}}function T(){var e;return L===k.REST?(l(k.REST),{type:N.RestType,expression:C()}):(e=C(),L===k.EQUAL?(l(k.EQUAL),{type:N.OptionalType,expression:e}):e)}function P(e,t){var n;return O=e,R=O.length,j=0,F=0,c(),n=C(),t&&t.midstream?{expression:n,index:F}:(L!==k.EOF&&U.throwError("not reach to EOF"),n)}function I(e,t){var n;return O=e,R=O.length,j=0,F=0,c(),n=T(),t&&t.midstream?{expression:n,index:F}:(L!==k.EOF&&U.throwError("not reach to EOF"),n)}function D(e,t,n){var r,i,o;switch(e.type){case N.NullableLiteral:r="?";break;case N.AllLiteral:r="*";break;case N.NullLiteral:r="null";break;case N.UndefinedLiteral:r="undefined";break;case N.VoidLiteral:r="void";break;case N.UnionType:for(r=n?"":"(",i=0,o=e.elements.length;o>i;++i)r+=D(e.elements[i],t),i+1!==o&&(r+="|");n||(r+=")");break;case N.ArrayType:for(r="[",i=0,o=e.elements.length;o>i;++i)r+=D(e.elements[i],t),i+1!==o&&(r+=t?",":", ");r+="]";break;case N.RecordType:for(r="{",i=0,o=e.fields.length;o>i;++i)r+=D(e.fields[i],t),i+1!==o&&(r+=t?",":", ");r+="}";break;case N.FieldType:r=e.value?e.key+(t?":":": ")+D(e.value,t):e.key;break;case N.FunctionType:for(r=t?"function(":"function (",e["this"]&&(r+=e["new"]?t?"new:":"new: ":t?"this:":"this: ",r+=D(e["this"],t),0!==e.params.length&&(r+=t?",":", ")),i=0,o=e.params.length;o>i;++i)r+=D(e.params[i],t),i+1!==o&&(r+=t?",":", ");r+=")",e.result&&(r+=(t?":":": ")+D(e.result,t));break;case N.ParameterType:r=e.name+(t?":":": ")+D(e.expression,t);break;case N.RestType:r="...",e.expression&&(r+=D(e.expression,t));break;case N.NonNullableType:r=e.prefix?"!"+D(e.expression,t):D(e.expression,t)+"!";break;case N.OptionalType:r=D(e.expression,t)+"=";break;case N.NullableType:r=e.prefix?"?"+D(e.expression,t):D(e.expression,t)+"?";break;case N.NameExpression:r=e.name;break;case N.TypeApplication:for(r=D(e.expression,t)+".<",i=0,o=e.applications.length;o>i;++i)r+=D(e.applications[i],t),i+1!==o&&(r+=t?",":", ");r+=">";break;default:U.throwError("Unknown type "+e.type)}return r}function A(e,t){return null==t&&(t={}),D(e,t.compact,t.topLevel)}var N,k,O,R,j,F,L,M,B,U;B=e("esutils"),U=e("./utility"),N={NullableLiteral:"NullableLiteral",AllLiteral:"AllLiteral",NullLiteral:"NullLiteral",UndefinedLiteral:"UndefinedLiteral",VoidLiteral:"VoidLiteral",UnionType:"UnionType",ArrayType:"ArrayType",RecordType:"RecordType",FieldType:"FieldType",FunctionType:"FunctionType",ParameterType:"ParameterType",RestType:"RestType",NonNullableType:"NonNullableType",OptionalType:"OptionalType",NullableType:"NullableType",NameExpression:"NameExpression",TypeApplication:"TypeApplication"},k={ILLEGAL:0,DOT_LT:1,REST:2,LT:3,GT:4,LPAREN:5,RPAREN:6,LBRACE:7,RBRACE:8,LBRACK:9,RBRACK:10,COMMA:11,COLON:12,STAR:13,PIPE:14,QUESTION:15,BANG:16,EQUAL:17,NAME:18,STRING:19,NUMBER:20,EOF:21},r.prototype.restore=function(){F=this._previous,j=this._index,L=this._token,M=this._value},r.save=function(){return new r(F,j,L,M)},n.parseType=P,n.parseParamType=I,n.stringify=A,n.Syntax=N}()},{"./utility":13,esutils:17}],13:[function(e,t,n){!function(){"use strict";function t(e){this.name="DoctrineError",this.message=e}function r(e){throw new t(e)}var i;i=e("../package.json").version,n.VERSION=i,t.prototype=function(){var e=function(){};return e.prototype=Error.prototype,new e}(),t.prototype.constructor=t,n.DoctrineError=t,n.throwError=r,n.assert=e("assert")}()},{"../package.json":19,assert:3}],14:[function(e,t){!function(){"use strict";function e(e){if(null==e)return!1;switch(e.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function n(e){if(null==e)return!1;switch(e.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function r(e){if(null==e)return!1;switch(e.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function i(e){return r(e)||null!=e&&"FunctionDeclaration"===e.type}function o(e){switch(e.type){case"IfStatement":return null!=e.alternate?e.alternate:e.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return e.body}return null}function a(e){var t;if("IfStatement"!==e.type)return!1;if(null==e.alternate)return!1;t=e.consequent;do{if("IfStatement"===t.type&&null==t.alternate)return!0;t=o(t)}while(t);return!1}t.exports={isExpression:e,isStatement:r,isIterationStatement:n,isSourceElement:i,isProblematicIfStatement:a,trailingStatement:o}}()},{}],15:[function(e,t){!function(){"use strict";function e(e){return e>=48&&57>=e}function n(t){return e(t)||t>=97&&102>=t||t>=65&&70>=t}function r(e){return e>=48&&55>=e}function i(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&c.indexOf(e)>=0}function o(e){return 10===e||13===e||8232===e||8233===e}function a(e){return e>=97&&122>=e||e>=65&&90>=e||36===e||95===e||92===e||e>=128&&u.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function s(e){return e>=97&&122>=e||e>=65&&90>=e||e>=48&&57>=e||36===e||95===e||92===e||e>=128&&u.NonAsciiIdentifierPart.test(String.fromCharCode(e))}var u,c;u={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},c=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279],t.exports={isDecimalDigit:e,isHexDigit:n,isOctalDigit:r,isWhiteSpace:i,isLineTerminator:o,isIdentifierStart:a,isIdentifierPart:s}}()},{}],16:[function(e,t){!function(){"use strict";function n(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function r(e,t){return t||"yield"!==e?i(e,t):!1}function i(e,t){if(t&&n(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function o(e,t){return"null"===e||"true"===e||"false"===e||r(e,t)}function a(e,t){return"null"===e||"true"===e||"false"===e||i(e,t)}function s(e){return"eval"===e||"arguments"===e}function u(e){var t,n,r;if(0===e.length)return!1;if(r=e.charCodeAt(0),!p.isIdentifierStart(r)||92===r)return!1;for(t=1,n=e.length;n>t;++t)if(r=e.charCodeAt(t),!p.isIdentifierPart(r)||92===r)return!1;return!0}function c(e,t){return u(e)&&!o(e,t)}function l(e,t){return u(e)&&!a(e,t)}var p=e("./code");t.exports={isKeywordES5:r,isKeywordES6:i,isReservedWordES5:o,isReservedWordES6:a,isRestrictedWord:s,isIdentifierName:u,isIdentifierES5:c,isIdentifierES6:l}}()},{"./code":15}],17:[function(e,t,n){!function(){"use strict";n.ast=e("./ast"),n.code=e("./code"),n.keyword=e("./keyword")}()},{"./ast":14,"./code":15,"./keyword":16}],18:[function(e,t){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],19:[function(e,t){t.exports={name:"doctrine",description:"JSDoc parser",homepage:"http://github.com/Constellation/doctrine.html",main:"lib/doctrine.js",version:"0.6.4",engines:{node:">=0.10.0"},directories:{lib:"./lib"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"}],repository:{type:"git",url:"git+ssh://git@github.com/Constellation/doctrine.git"},devDependencies:{coveralls:"^2.11.2",gulp:"^3.8.10","gulp-bump":"^0.1.13","gulp-eslint":"^0.5.0","gulp-filter":"^2.0.2","gulp-git":"^1.0.0","gulp-istanbul":"^0.6.0","gulp-jshint":"^1.9.0","gulp-mocha":"^2.0.0","gulp-tag-version":"^1.2.1","jshint-stylish":"^1.0.0",should:"^5.0.1"},licenses:[{type:"BSD",url:"http://github.com/Constellation/doctrine/raw/master/LICENSE.BSD"}],scripts:{test:"gulp","unit-test":"gulp test",lint:"gulp lint",coveralls:"cat ./coverage/lcov.info | coveralls && rm -rf ./coverage"},dependencies:{esutils:"^1.1.6",isarray:"0.0.1"},gitHead:"0835299b485ecdfa908d20628d6c8900144590ff",bugs:{url:"https://github.com/Constellation/doctrine/issues"},_id:"doctrine@0.6.4",_shasum:"81428491a942ef18b0492056eda3800eee57d61d",_from:"doctrine@>=0.6.2 <0.7.0",_npmVersion:"1.4.28",_npmUser:{name:"constellation",email:"utatane.tea@gmail.com"},dist:{shasum:"81428491a942ef18b0492056eda3800eee57d61d",tarball:"http://registry.npmjs.org/doctrine/-/doctrine-0.6.4.tgz"},_resolved:"https://registry.npmjs.org/doctrine/-/doctrine-0.6.4.tgz",readme:"ERROR: No README data found!"}
},{}],20:[function(e,t){"use strict";var n=/[|\\{}()[\]^$+*?.]/g;t.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(n,"\\$&")}},{}],21:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function l(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:l(i,t,n)}if("value"in r&&r.writable)return r.value;var o=r.get;return void 0===o?void 0:o.call(n)},o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(e("./variable")),u=function p(e,t,n,r,i,o){a(this,p),this.type=e,this.name=t,this.node=n,this.parent=r,this.index=i,this.kind=o};n["default"]=u;var c=function(e){function t(e,n,r,o){a(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,s.Parameter,e,n,null,r,null),this.rest=o}return o(t,e),t}(u);n.ParameterDefinition=c,n.Definition=u},{"./variable":27}],22:[function(e,t,n){"use strict";function r(){return{optimistic:!1,directive:!1,nodejsScope:!1,sourceType:"script",ecmaVersion:5}}function i(e,t){function n(e){return"object"==typeof e&&e instanceof Object&&!(e instanceof RegExp)}var r,o;for(r in t)t.hasOwnProperty(r)&&(o=t[r],n(o)?n(e[r])?i(e[r],o):e[r]=i({},o):e[r]=o);return e}function o(e,t){var n,o,a;return a=i(r(),t),n=new u(a),o=new c(n),o.visit(e),s(null===n.__currentScope,"currentScope should be null."),n}var a=function(e){return e&&e.__esModule?e["default"]:e};n.analyze=o,Object.defineProperty(n,"__esModule",{value:!0});var s=a(e("assert")),u=a(e("./scope-manager")),c=a(e("./referencer")),l=a(e("./reference")),p=a(e("./variable")),f=a(e("./scope")),d=e("../package.json").version;n.version=d,n.Reference=l,n.Variable=p,n.Scope=f,n.ScopeManager=u},{"../package.json":130,"./reference":23,"./referencer":24,"./scope":26,"./scope-manager":25,"./variable":27,assert:3}],23:[function(e,t){"use strict";var n=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=1,o=2,a=i|o,s=function(){function e(t,n,i,o,a,s,u){r(this,e),this.identifier=t,this.from=n,this.tainted=!1,this.resolved=null,this.flag=i,this.isWrite()&&(this.writeExpr=o,this.partial=s,this.init=u),this.__maybeImplicitGlobal=a}return n(e,{isStatic:{value:function(){return!this.tainted&&this.resolved&&this.resolved.scope.isStatic()}},isWrite:{value:function(){return!!(this.flag&e.WRITE)}},isRead:{value:function(){return!!(this.flag&e.READ)}},isReadOnly:{value:function(){return this.flag===e.READ}},isWriteOnly:{value:function(){return this.flag===e.WRITE}},isReadWrite:{value:function(){return this.flag===e.RW}}}),e}();t.exports=s,s.READ=i,s.WRITE=o,s.RW=a},{}],24:[function(e,t){"use strict";function n(e){return e[e.length-1]||null}function r(e,t,n){var r=new y(e,n);r.visit(e),null!=t&&r.rightHandNodes.forEach(t.visit,t)}function i(e){var t=e.type;return t===l.Identifier||t===l.ObjectPattern||t===l.ArrayPattern||t===l.SpreadElement||t===l.RestElement||t===l.AssignmentPattern}var o=function(e){return e&&e.__esModule?e["default"]:e},a=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function b(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:b(i,t,n)}if("value"in r&&r.writable)return r.value;var o=r.get;return void 0===o?void 0:o.call(n)},u=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},c=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},l=e("estraverse").Syntax,p=o(e("esrecurse")),f=o(e("./reference")),d=o(e("./variable")),h=e("./definition"),m=h.ParameterDefinition,g=h.Definition,v=o(e("assert")),y=function(e){function t(e,n){c(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.rootPattern=e,this.callback=n,this.assignments=[],this.rightHandNodes=[],this.restElements=[]}return u(t,e),a(t,{Identifier:{value:function(e){var t=n(this.restElements);this.callback(e,{topLevel:e===this.rootPattern,rest:null!=t&&t.argument===e,assignments:this.assignments})}},ObjectPattern:{value:function(e){var t,n,r;for(t=0,n=e.properties.length;n>t;++t)r=e.properties[t],r.computed&&this.rightHandNodes.push(r.key),this.visit(r.value)}},ArrayPattern:{value:function(e){var t,n,r;for(t=0,n=e.elements.length;n>t;++t)r=e.elements[t],this.visit(r)}},AssignmentPattern:{value:function(e){this.assignments.push(e),this.visit(e.left),this.rightHandNodes.push(e.right),this.assignments.pop()}},RestElement:{value:function(e){this.restElements.push(e),this.visit(e.argument),this.restElements.pop()}},MemberExpression:{value:function(e){e.computed&&this.rightHandNodes.push(e.property),this.rightHandNodes.push(e.object)}},SpreadElement:{value:function(e){this.visit(e.argument)}},ArrayExpression:{value:function(e){e.elements.forEach(this.visit,this)}},ObjectExpression:{value:function(e){var t=this;e.properties.forEach(function(e){e.computed&&t.rightHandNodes.push(e.key),t.visit(e.value)})}},AssignmentExpression:{value:function(e){this.assignments.push(e),this.visit(e.left),this.rightHandNodes.push(e.right),this.assignments.pop()}},CallExpression:{value:function(e){var t=this;e.arguments.forEach(function(e){t.rightHandNodes.push(e)}),this.visit(e.callee)}}}),t}(p.Visitor),_=function(e){function t(e,n){c(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.declaration=e,this.referencer=n}return u(t,e),a(t,{visitImport:{value:function(e,t){var n=this;this.referencer.visitPattern(e,function(e){n.referencer.currentScope().__define(e,new g(d.ImportBinding,e,t,n.declaration,null,null))})}},ImportNamespaceSpecifier:{value:function(e){var t=e.local||e.id;t&&this.visitImport(t,e)}},ImportDefaultSpecifier:{value:function(e){var t=e.local||e.id;this.visitImport(t,e)}},ImportSpecifier:{value:function(e){var t=e.local||e.id;e.name?this.visitImport(e.name,e):this.visitImport(t,e)}}}),t}(p.Visitor),x=function(e){function t(e){c(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.scopeManager=e,this.parent=null,this.isInnerMethodDefinition=!1}return u(t,e),a(t,{currentScope:{value:function(){return this.scopeManager.__currentScope}},close:{value:function(e){for(;this.currentScope()&&e===this.currentScope().block;)this.scopeManager.__currentScope=this.currentScope().__close(this.scopeManager)}},pushInnerMethodDefinition:{value:function(e){var t=this.isInnerMethodDefinition;return this.isInnerMethodDefinition=e,t}},popInnerMethodDefinition:{value:function(e){this.isInnerMethodDefinition=e}},materializeTDZScope:{value:function(e,t){this.scopeManager.__nestTDZScope(e,t),this.visitVariableDeclaration(this.currentScope(),d.TDZ,t.left,0,!0)}},materializeIterationScope:{value:function(e){var t,n=this;this.scopeManager.__nestForScope(e),t=e.left,this.visitVariableDeclaration(this.currentScope(),d.Variable,t,0),this.visitPattern(t.declarations[0].id,function(t){n.currentScope().__referencing(t,f.WRITE,e.right,null,!0,!0)})}},referencingDefaultValue:{value:function(e,t,n,r){var i=this.currentScope();t.forEach(function(t){i.__referencing(e,f.WRITE,t.right,n,e!==t.left,r)})}},visitPattern:{value:function(e,t,n){"function"==typeof t&&(n=t,t={processRightHandNodes:!1}),r(e,t.processRightHandNodes?this:null,n)}},visitFunction:{value:function(e){var t,n,r=this;for(e.type===l.FunctionDeclaration&&this.currentScope().__define(e.id,new g(d.FunctionName,e.id,e,null,null,null)),e.type===l.FunctionExpression&&e.id&&this.scopeManager.__nestFunctionExpressionNameScope(e),this.scopeManager.__nestFunctionScope(e,this.isInnerMethodDefinition),t=0,n=e.params.length;n>t;++t)this.visitPattern(e.params[t],{processRightHandNodes:!0},function(n,i){r.currentScope().__define(n,new m(n,e,t,i.rest)),r.referencingDefaultValue(n,i.assignments,null,!0)});e.rest&&this.visitPattern({type:"RestElement",argument:e.rest},function(t){r.currentScope().__define(t,new m(t,e,e.params.length,!0))}),e.body.type===l.BlockStatement?this.visitChildren(e.body):this.visit(e.body),this.close(e)}},visitClass:{value:function(e){e.type===l.ClassDeclaration&&this.currentScope().__define(e.id,new g(d.ClassName,e.id,e,null,null,null)),this.visit(e.superClass),this.scopeManager.__nestClassScope(e),e.id&&this.currentScope().__define(e.id,new g(d.ClassName,e.id,e)),this.visit(e.body),this.close(e)}},visitProperty:{value:function(e){var t,n;e.computed&&this.visit(e.key),n=e.type===l.MethodDefinition||e.method,n&&(t=this.pushInnerMethodDefinition(!0)),this.visit(e.value),n&&this.popInnerMethodDefinition(t)}},visitForIn:{value:function(e){var t=this;e.left.type===l.VariableDeclaration&&"var"!==e.left.kind?(this.materializeTDZScope(e.right,e),this.visit(e.right),this.close(e.right),this.materializeIterationScope(e),this.visit(e.body),this.close(e)):(e.left.type===l.VariableDeclaration?(this.visit(e.left),this.visitPattern(e.left.declarations[0].id,function(n){t.currentScope().__referencing(n,f.WRITE,e.right,null,!0,!0)})):this.visitPattern(e.left,{processRightHandNodes:!0},function(n,r){var i=null;t.currentScope().isStrict||(i={pattern:n,node:e}),t.referencingDefaultValue(n,r.assignments,i,!1),t.currentScope().__referencing(n,f.WRITE,e.right,i,!0,!1)}),this.visit(e.right),this.visit(e.body))}},visitVariableDeclaration:{value:function(e,t,n,r,i){var o,a,s=this;o=n.declarations[r],a=o.init,this.visitPattern(o.id,{processRightHandNodes:!i},function(u,c){e.__define(u,new g(t,u,o,n,r,n.kind)),i||s.referencingDefaultValue(u,c.assignments,null,!0),a&&s.currentScope().__referencing(u,f.WRITE,a,null,!c.topLevel,!0)})}},AssignmentExpression:{value:function(e){var t=this;i(e.left)?"="===e.operator?this.visitPattern(e.left,{processRightHandNodes:!0},function(n,r){var i=null;t.currentScope().isStrict||(i={pattern:n,node:e}),t.referencingDefaultValue(n,r.assignments,i,!1),t.currentScope().__referencing(n,f.WRITE,e.right,i,!r.topLevel,!1)}):this.currentScope().__referencing(e.left,f.RW,e.right):this.visit(e.left),this.visit(e.right)}},CatchClause:{value:function(e){var t=this;this.scopeManager.__nestCatchScope(e),this.visitPattern(e.param,{processRightHandNodes:!0},function(n,r){t.currentScope().__define(n,new g(d.CatchClause,e.param,e,null,null,null)),t.referencingDefaultValue(n,r.assignments,null,!0)}),this.visit(e.body),this.close(e)}},Program:{value:function(e){this.scopeManager.__nestGlobalScope(e),this.scopeManager.__isNodejsScope()&&(this.currentScope().isStrict=!1,this.scopeManager.__nestFunctionScope(e,!1)),this.scopeManager.__isES6()&&this.scopeManager.isModule()&&this.scopeManager.__nestModuleScope(e),this.visitChildren(e),this.close(e)}},Identifier:{value:function(e){this.currentScope().__referencing(e)}},UpdateExpression:{value:function(e){i(e.argument)?this.currentScope().__referencing(e.argument,f.RW,null):this.visitChildren(e)}},MemberExpression:{value:function(e){this.visit(e.object),e.computed&&this.visit(e.property)}},Property:{value:function(e){this.visitProperty(e)}},MethodDefinition:{value:function(e){this.visitProperty(e)}},BreakStatement:{value:function(){}},ContinueStatement:{value:function(){}},LabeledStatement:{value:function(e){this.visit(e.body)}},ForStatement:{value:function(e){e.init&&e.init.type===l.VariableDeclaration&&"var"!==e.init.kind&&this.scopeManager.__nestForScope(e),this.visitChildren(e),this.close(e)}},ClassExpression:{value:function(e){this.visitClass(e)}},ClassDeclaration:{value:function(e){this.visitClass(e)}},CallExpression:{value:function(e){this.scopeManager.__ignoreEval()||e.callee.type!==l.Identifier||"eval"!==e.callee.name||this.currentScope().variableScope.__detectEval(),this.visitChildren(e)}},BlockStatement:{value:function(e){this.scopeManager.__isES6()&&this.scopeManager.__nestBlockScope(e),this.visitChildren(e),this.close(e)}},ThisExpression:{value:function(){this.currentScope().variableScope.__detectThis()}},WithStatement:{value:function(e){this.visit(e.object),this.scopeManager.__nestWithScope(e),this.visit(e.body),this.close(e)}},VariableDeclaration:{value:function(e){var t,n,r,i;for(t="var"===e.kind?this.currentScope().variableScope:this.currentScope(),n=0,r=e.declarations.length;r>n;++n)i=e.declarations[n],this.visitVariableDeclaration(t,d.Variable,e,n),i.init&&this.visit(i.init)}},SwitchStatement:{value:function(e){var t,n;for(this.visit(e.discriminant),this.scopeManager.__isES6()&&this.scopeManager.__nestSwitchScope(e),t=0,n=e.cases.length;n>t;++t)this.visit(e.cases[t]);this.close(e)}},FunctionDeclaration:{value:function(e){this.visitFunction(e)}},FunctionExpression:{value:function(e){this.visitFunction(e)}},ForOfStatement:{value:function(e){this.visitForIn(e)}},ForInStatement:{value:function(e){this.visitForIn(e)}},ArrowFunctionExpression:{value:function(e){this.visitFunction(e)}},ImportDeclaration:{value:function(e){var t;v(this.scopeManager.__isES6()&&this.scopeManager.isModule(),"ImportDeclaration should appear when the mode is ES6 and in the module context."),t=new _(e,this),t.visit(e)}},visitExportDeclaration:{value:function(e){return e.source?void 0:e.declaration?(this.visit(e.declaration),void 0):(this.visitChildren(e),void 0)}},ExportDeclaration:{value:function(e){this.visitExportDeclaration(e)}},ExportNamedDeclaration:{value:function(e){this.visitExportDeclaration(e)}},ExportSpecifier:{value:function(e){var t=e.id||e.local;this.visit(t)}}}),t}(p.Visitor);t.exports=x},{"./definition":21,"./reference":23,"./variable":27,assert:3,esrecurse:126,estraverse:128}],25:[function(e,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=n(e("es6-weak-map")),a=e("./scope");n(a);var s=n(e("assert")),u=a.GlobalScope,c=a.CatchScope,l=a.WithScope,p=a.ModuleScope,f=a.ClassScope,d=a.SwitchScope,h=a.FunctionScope,m=a.ForScope,g=a.TDZScope,v=a.FunctionExpressionNameScope,y=a.BlockScope,_=function(){function e(t){i(this,e),this.scopes=[],this.globalScope=null,this.__nodeToScope=new o,this.__currentScope=null,this.__options=t}return r(e,{__useDirective:{value:function(){return this.__options.directive}},__isOptimistic:{value:function(){return this.__options.optimistic}},__ignoreEval:{value:function(){return this.__options.ignoreEval}},__isNodejsScope:{value:function(){return this.__options.nodejsScope}},isModule:{value:function(){return"module"===this.__options.sourceType}},__get:{value:function(e){return this.__nodeToScope.get(e)}},acquire:{value:function(e,t){function n(e){return"function"===e.type&&e.functionExpressionScope?!1:"TDZ"===e.type?!1:!0}var r,i,o,a;if(r=this.__get(e),!r||0===r.length)return null;if(1===r.length)return r[0];if(t){for(o=r.length-1;o>=0;--o)if(i=r[o],n(i))return i}else for(o=0,a=r.length;a>o;++o)if(i=r[o],n(i))return i;return null}},acquireAll:{value:function(e){return this.__get(e)}},release:{value:function(e,t){var n,r;return n=this.__get(e),n&&n.length?(r=n[0].upper,r?this.acquire(r.block,t):null):null}},attach:{value:function(){}},detach:{value:function(){}},__nestScope:{value:function(e){return e instanceof u&&(s(null===this.__currentScope),this.globalScope=e),this.__currentScope=e,e}},__nestGlobalScope:{value:function(e){return this.__nestScope(new u(this,e))}},__nestBlockScope:{value:function(e){return this.__nestScope(new y(this,this.__currentScope,e))}},__nestFunctionScope:{value:function(e,t){return this.__nestScope(new h(this,this.__currentScope,e,t))}},__nestForScope:{value:function(e){return this.__nestScope(new m(this,this.__currentScope,e))}},__nestCatchScope:{value:function(e){return this.__nestScope(new c(this,this.__currentScope,e))}},__nestWithScope:{value:function(e){return this.__nestScope(new l(this,this.__currentScope,e))}},__nestClassScope:{value:function(e){return this.__nestScope(new f(this,this.__currentScope,e))}},__nestSwitchScope:{value:function(e){return this.__nestScope(new d(this,this.__currentScope,e))}},__nestModuleScope:{value:function(e){return this.__nestScope(new p(this,this.__currentScope,e))}},__nestTDZScope:{value:function(e){return this.__nestScope(new g(this,this.__currentScope,e))}},__nestFunctionExpressionNameScope:{value:function(e){return this.__nestScope(new v(this,this.__currentScope,e))}},__isES6:{value:function(){return this.__options.ecmaVersion>=6}}}),e}();t.exports=_},{"./scope":26,assert:3,"es6-weak-map":83}],26:[function(e,t,n){"use strict";function r(e,t,n,r){var i,o,a,s,u;if(e.upper&&e.upper.isStrict)return!0;if(t.type===p.ArrowFunctionExpression)return!0;if(n)return!0;if("class"===e.type||"module"===e.type)return!0;if("block"===e.type||"switch"===e.type)return!1;if("function"===e.type)i="Program"===t.type?t:t.body;else{if("global"!==e.type)return!1;i=t}if(r){for(o=0,a=i.body.length;a>o&&(s=i.body[o],"DirectiveStatement"===s.type);++o)if('"use strict"'===s.raw||"'use strict'"===s.raw)return!0}else for(o=0,a=i.body.length;a>o&&(s=i.body[o],s.type===p.ExpressionStatement)&&(u=s.expression,u.type===p.Literal&&"string"==typeof u.value);++o)if(null!=u.raw){if('"use strict"'===u.raw||"'use strict'"===u.raw)return!0}else if("use strict"===u.value)return!0;return!1}function i(e,t){var n;e.scopes.push(t),n=e.__nodeToScope.get(t.block),n?n.push(t):e.__nodeToScope.set(t.block,[t])}function o(e){return e.type===h.ClassName||e.type===h.Variable&&"var"!==e.parent.kind}var a=function(e){return e&&e.__esModule?e["default"]:e},s=function y(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:y(i,t,n)}if("value"in r&&r.writable)return r.value;var o=r.get;return void 0===o?void 0:o.call(n)},u=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},c=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(n,"__esModule",{value:!0});var p=e("estraverse").Syntax,f=a(e("es6-map")),d=a(e("./reference")),h=a(e("./variable")),m=a(e("./definition")),g=a(e("assert")),v=function(){function e(t,n,o,a,s){l(this,e),this.type=n,this.set=new f,this.taints=new f,this.dynamic="global"===this.type||"with"===this.type,this.block=a,this.through=[],this.variables=[],this.references=[],this.variableScope="global"===this.type||"function"===this.type||"module"===this.type?this:o.variableScope,this.functionExpressionScope=!1,this.directCallToEvalScope=!1,this.thisFound=!1,this.__left=[],this.upper=o,this.isStrict=r(this,a,s,t.__useDirective()),this.childScopes=[],this.upper&&this.upper.childScopes.push(this),i(t,this)}return c(e,{__shouldStaticallyClose:{value:function(e){return!this.dynamic||e.__isOptimistic()}},__shouldStaticallyCloseForGlobal:{value:function(e){var t=e.identifier.name;if(!this.set.has(t))return!1;var n=this.set.get(t),r=n.defs;return r.length>0&&r.every(o)}},__staticCloseRef:{value:function(e){this.__resolve(e)||this.__delegateToUpperScope(e)}},__dynamicCloseRef:{value:function(e){var t=this;do t.through.push(e),t=t.upper;while(t)}},__globalCloseRef:{value:function(e){this.__shouldStaticallyCloseForGlobal(e)?this.__staticCloseRef(e):this.__dynamicCloseRef(e)}},__close:{value:function(e){var t;t=this.__shouldStaticallyClose(e)?this.__staticCloseRef:"global"!==this.type?this.__dynamicCloseRef:this.__globalCloseRef;for(var n=0,r=this.__left.length;r>n;++n){var i=this.__left[n];t.call(this,i)}return this.__left=null,this.upper}},__resolve:{value:function(e){var t,n;return n=e.identifier.name,this.set.has(n)?(t=this.set.get(n),t.references.push(e),t.stack=t.stack&&e.from.variableScope===this.variableScope,e.tainted&&(t.tainted=!0,this.taints.set(t.name,!0)),e.resolved=t,!0):!1}},__delegateToUpperScope:{value:function(e){this.upper&&this.upper.__left.push(e),this.through.push(e)}},__defineGeneric:{value:function(e,t,n,r,i){var o;o=t.get(e),o||(o=new h(e,this),t.set(e,o),n.push(o)),i&&o.defs.push(i),r&&o.identifiers.push(r)}},__define:{value:function(e,t){e&&e.type===p.Identifier&&this.__defineGeneric(e.name,this.set,this.variables,e,t)}},__referencing:{value:function(e,t,n,r,i,o){if(e&&e.type===p.Identifier&&"super"!==e.name){var a=new d(e,this,t||d.READ,n,r,!!i,!!o);this.references.push(a),this.__left.push(a)}}},__detectEval:{value:function(){var e;e=this,this.directCallToEvalScope=!0;do e.dynamic=!0,e=e.upper;while(e)}},__detectThis:{value:function(){this.thisFound=!0}},__isClosed:{value:function(){return null===this.__left}},resolve:{value:function(e){var t,n,r;for(g(this.__isClosed(),"Scope should be closed."),g(e.type===p.Identifier,"Target should be identifier."),n=0,r=this.references.length;r>n;++n)if(t=this.references[n],t.identifier===e)return t;return null}},isStatic:{value:function(){return!this.dynamic}},isArgumentsMaterialized:{value:function(){return!0}},isThisMaterialized:{value:function(){return!0}},isUsedName:{value:function(e){if(this.set.has(e))return!0;for(var t=0,n=this.through.length;n>t;++t)if(this.through[t].identifier.name===e)return!0;return!1}}}),e}();n["default"]=v,n.GlobalScope=function(e){function t(e,n){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"global",null,n,!1),this.implicit={set:new f,variables:[],left:[]}}return u(t,e),c(t,{__close:{value:function(e){for(var n=[],r=0,i=this.__left.length;i>r;++r){var o=this.__left[r];o.__maybeImplicitGlobal&&!this.set.has(o.identifier.name)&&n.push(o.__maybeImplicitGlobal)}for(var r=0,i=n.length;i>r;++r){var a=n[r];this.__defineImplicit(a.pattern,new m(h.ImplicitGlobalVariable,a.pattern,a.node,null,null,null))}return this.implicit.left=this.__left,s(Object.getPrototypeOf(t.prototype),"__close",this).call(this,e)}},__defineImplicit:{value:function(e,t){e&&e.type===p.Identifier&&this.__defineGeneric(e.name,this.implicit.set,this.implicit.variables,e,t)}}}),t}(v),n.ModuleScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"module",n,r,!1)}return u(t,e),t}(v),n.FunctionExpressionNameScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"function-expression-name",n,r,!1),this.__define(r.id,new m(h.FunctionName,r.id,r,null,null,null)),this.functionExpressionScope=!0}return u(t,e),t}(v),n.CatchScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"catch",n,r,!1)}return u(t,e),t}(v),n.WithScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"with",n,r,!1)}return u(t,e),c(t,{__close:{value:function(e){if(this.__shouldStaticallyClose(e))return s(Object.getPrototypeOf(t.prototype),"__close",this).call(this,e);for(var n=0,r=this.__left.length;r>n;++n){var i=this.__left[n];i.tainted=!0,this.__delegateToUpperScope(i)}return this.__left=null,this.upper}}}),t}(v),n.TDZScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"TDZ",n,r,!1)}return u(t,e),t}(v),n.BlockScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"block",n,r,!1)}return u(t,e),t}(v),n.SwitchScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"switch",n,r,!1)}return u(t,e),t}(v),n.FunctionScope=function(e){function t(e,n,r,i){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"function",n,r,i),this.block.type!==p.ArrowFunctionExpression&&this.__defineArguments()}return u(t,e),c(t,{isArgumentsMaterialized:{value:function(){if(this.block.type===p.ArrowFunctionExpression)return!1;if(!this.isStatic())return!0;var e=this.set.get("arguments");return g(e,"Always have arguments variable."),e.tainted||0!==e.references.length}},isThisMaterialized:{value:function(){return this.isStatic()?this.thisFound:!0}},__defineArguments:{value:function(){this.__defineGeneric("arguments",this.set,this.variables,null,null),this.taints.set("arguments",!0)}}}),t}(v),n.ForScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"for",n,r,!1)}return u(t,e),t}(v),n.ClassScope=function(e){function t(e,n,r){l(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"class",n,r,!1)}return u(t,e),t}(v)},{"./definition":21,"./reference":23,"./variable":27,assert:3,"es6-map":28,estraverse:128}],27:[function(e,t){"use strict";var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function i(e,t){n(this,i),this.name=e,this.identifiers=[],this.references=[],this.defs=[],this.tainted=!1,this.stack=!0,this.scope=t};t.exports=r,r.CatchClause="CatchClause",r.Parameter="Parameter",r.FunctionName="FunctionName",r.ClassName="ClassName",r.Variable="Variable",r.ImportBinding="ImportBinding",r.TDZ="TDZ",r.ImplicitGlobalVariable="ImplicitGlobalVariable"},{}],28:[function(e,t){"use strict";t.exports=e("./is-implemented")()?Map:e("./polyfill")},{"./is-implemented":29,"./polyfill":82}],29:[function(e,t){"use strict";t.exports=function(){var e,t,n;if("function"!=typeof Map)return!1;try{e=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(r){return!1}return 3!==e.size?!1:"function"!=typeof e.clear?!1:"function"!=typeof e.delete?!1:"function"!=typeof e.entries?!1:"function"!=typeof e.forEach?!1:"function"!=typeof e.get?!1:"function"!=typeof e.has?!1:"function"!=typeof e.keys?!1:"function"!=typeof e.set?!1:"function"!=typeof e.values?!1:(t=e.entries(),n=t.next(),n.done!==!1?!1:n.value?"raz"!==n.value[0]?!1:"one"!==n.value[1]?!1:!0:!1)}},{}],30:[function(e,t){"use strict";t.exports=function(){return"undefined"==typeof Map?!1:"[object Map]"===Object.prototype.toString.call(Map.prototype)}()},{}],31:[function(e,t){"use strict";t.exports=e("es5-ext/object/primitive-set")("key","value","key+value")},{"es5-ext/object/primitive-set":56}],32:[function(e,t){"use strict";var n,r=e("es5-ext/object/set-prototype-of"),i=e("d"),o=e("es6-iterator"),a=e("es6-symbol").toStringTag,s=e("./iterator-kinds"),u=Object.defineProperties,c=o.prototype._unBind;n=t.exports=function(e,t){return this instanceof n?(o.call(this,e.__mapKeysData__,e),t&&s[t]||(t="key+value"),u(this,{__kind__:i("",t),__values__:i("w",e.__mapValuesData__)}),void 0):new n(e,t)},r&&r(n,o),n.prototype=Object.create(o.prototype,{constructor:i(n),_resolve:i(function(e){return"value"===this.__kind__?this.__values__[e]:"key"===this.__kind__?this.__list__[e]:[this.__list__[e],this.__values__[e]]}),_unBind:i(function(){this.__values__=null,c.call(this)}),toString:i(function(){return"[object Map Iterator]"})}),Object.defineProperty(n.prototype,a,i("c","Map Iterator"))},{"./iterator-kinds":31,d:34,"es5-ext/object/set-prototype-of":57,"es6-iterator":69,"es6-symbol":78}],33:[function(e,t){"use strict";var n,r=e("es5-ext/object/copy"),i=e("es5-ext/object/map"),o=e("es5-ext/object/valid-callable"),a=e("es5-ext/object/valid-value"),s=Function.prototype.bind,u=Object.defineProperty,c=Object.prototype.hasOwnProperty;n=function(e,t,n){var i,l=a(t)&&o(t.value);return i=r(t),delete i.writable,delete i.value,i.get=function(){return c.call(this,e)?l:(t.value=s.call(l,null==n?this:this[n]),u(this,e,t),this[e])},i},t.exports=function(e){var t=arguments[1];return i(e,function(e,r){return n(r,e,t)})}},{"es5-ext/object/copy":46,"es5-ext/object/map":54,"es5-ext/object/valid-callable":60,"es5-ext/object/valid-value":61}],34:[function(e,t){"use strict";var n,r=e("es5-ext/object/assign"),i=e("es5-ext/object/normalize-options"),o=e("es5-ext/object/is-callable"),a=e("es5-ext/string/#/contains");n=t.exports=function(e,t){var n,o,s,u,c;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],null==e?(n=s=!0,o=!1):(n=a.call(e,"c"),o=a.call(e,"e"),s=a.call(e,"w")),c={value:t,configurable:n,enumerable:o,writable:s},u?r(i(u),c):c},n.gs=function(e,t,n){var s,u,c,l;return"string"!=typeof e?(c=n,n=t,t=e,e=null):c=arguments[3],null==t?t=void 0:o(t)?null==n?n=void 0:o(n)||(c=n,n=void 0):(c=t,t=n=void 0),null==e?(s=!0,u=!1):(s=a.call(e,"c"),u=a.call(e,"e")),l={get:t,set:n,configurable:s,enumerable:u},c?r(i(c),l):l}},{"es5-ext/object/assign":43,"es5-ext/object/is-callable":49,"es5-ext/object/normalize-options":55,"es5-ext/string/#/contains":62}],35:[function(e,t){"use strict";var n=e("../../object/valid-value");t.exports=function(){return n(this).length=0,this}},{"../../object/valid-value":61}],36:[function(e,t){"use strict";var n=e("../../number/to-pos-integer"),r=e("../../object/valid-value"),i=Array.prototype.indexOf,o=Object.prototype.hasOwnProperty,a=Math.abs,s=Math.floor;t.exports=function(e){var t,u,c,l;if(e===e)return i.apply(this,arguments);for(u=n(r(this).length),c=arguments[1],c=isNaN(c)?0:c>=0?s(c):n(this.length)-s(a(c)),t=c;u>t;++t)if(o.call(this,t)&&(l=this[t],l!==l))return t;return-1}},{"../../number/to-pos-integer":41,"../../object/valid-value":61}],37:[function(e,t){"use strict";t.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":38,"./shim":39}],38:[function(e,t){"use strict";t.exports=function(){var e=Math.sign;return"function"!=typeof e?!1:1===e(10)&&-1===e(-20)}},{}],39:[function(e,t){"use strict";t.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},{}],40:[function(e,t){"use strict";var n=e("../math/sign"),r=Math.abs,i=Math.floor;t.exports=function(e){return isNaN(e)?0:(e=Number(e),0!==e&&isFinite(e)?n(e)*i(r(e)):e)}},{"../math/sign":37}],41:[function(e,t){"use strict";var n=e("./to-integer"),r=Math.max;t.exports=function(e){return r(0,n(e))}},{"./to-integer":40}],42:[function(e,t){"use strict";var n=e("./is-callable"),r=e("./valid-callable"),i=e("./valid-value"),o=Function.prototype.call,a=Object.keys,s=Object.prototype.propertyIsEnumerable;t.exports=function(e,t){return function(u,c){var l,p=arguments[2],f=arguments[3];return u=Object(i(u)),r(c),l=a(u),f&&l.sort(n(f)?f.bind(u):void 0),l[e](function(e,n){return s.call(u,e)?o.call(c,p,u[e],e,u,n):t})}}},{"./is-callable":49,"./valid-callable":60,"./valid-value":61}],43:[function(e,t){"use strict";t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":44,"./shim":45}],44:[function(e,t){"use strict";t.exports=function(){var e,t=Object.assign;return"function"!=typeof t?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),"razdwatrzy"===e.foo+e.bar+e.trzy)}},{}],45:[function(e,t){"use strict";var n=e("../keys"),r=e("../valid-value"),i=Math.max;t.exports=function(e,t){var o,a,s,u=i(arguments.length,2);for(e=Object(r(e)),s=function(n){try{e[n]=t[n]}catch(r){o||(o=r)}},a=1;u>a;++a)t=arguments[a],n(t).forEach(s);
if(void 0!==o)throw o;return e}},{"../keys":51,"../valid-value":61}],46:[function(e,t){"use strict";var n=e("./assign"),r=e("./valid-value");t.exports=function(e){var t=Object(r(e));return t!==e?t:n({},e)}},{"./assign":43,"./valid-value":61}],47:[function(e,t){"use strict";var n,r=Object.create;e("./set-prototype-of/is-implemented")()||(n=e("./set-prototype-of/shim")),t.exports=function(){var e,t,i;return n?1!==n.level?r:(e={},t={},i={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){return"__proto__"===e?(t[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0},void 0):(t[e]=i,void 0)}),Object.defineProperties(e,t),Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(t,n){return r(null===t?e:t,n)}):r}()},{"./set-prototype-of/is-implemented":58,"./set-prototype-of/shim":59}],48:[function(e,t){"use strict";t.exports=e("./_iterate")("forEach")},{"./_iterate":42}],49:[function(e,t){"use strict";t.exports=function(e){return"function"==typeof e}},{}],50:[function(e,t){"use strict";var n={"function":!0,object:!0};t.exports=function(e){return null!=e&&n[typeof e]||!1}},{}],51:[function(e,t){"use strict";t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":52,"./shim":53}],52:[function(e,t){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],53:[function(e,t){"use strict";var n=Object.keys;t.exports=function(e){return n(null==e?e:Object(e))}},{}],54:[function(e,t){"use strict";var n=e("./valid-callable"),r=e("./for-each"),i=Function.prototype.call;t.exports=function(e,t){var o={},a=arguments[2];return n(t),r(e,function(e,n,r,s){o[n]=i.call(t,a,e,n,r,s)}),o}},{"./for-each":48,"./valid-callable":60}],55:[function(e,t){"use strict";var n=Array.prototype.forEach,r=Object.create,i=function(e,t){var n;for(n in e)t[n]=e[n]};t.exports=function(){var e=r(null);return n.call(arguments,function(t){null!=t&&i(Object(t),e)}),e}},{}],56:[function(e,t){"use strict";var n=Array.prototype.forEach,r=Object.create;t.exports=function(){var e=r(null);return n.call(arguments,function(t){e[t]=!0}),e}},{}],57:[function(e,t){"use strict";t.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":58,"./shim":59}],58:[function(e,t){"use strict";var n=Object.create,r=Object.getPrototypeOf,i={};t.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||n;return"function"!=typeof e?!1:r(e(t(null),i))===i}},{}],59:[function(e,t){"use strict";var n,r=e("../is-object"),i=e("../valid-value"),o=Object.prototype.isPrototypeOf,a=Object.defineProperty,s={configurable:!0,enumerable:!1,writable:!0,value:void 0};n=function(e,t){if(i(e),null===t||r(t))return e;throw new TypeError("Prototype must be null or an object")},t.exports=function(e){var t,r;return e?(2===e.level?e.set?(r=e.set,t=function(e,t){return r.call(n(e,t),t),e}):t=function(e,t){return n(e,t).__proto__=t,e}:t=function i(e,t){var r;return n(e,t),r=o.call(i.nullPolyfill,e),r&&delete i.nullPolyfill.__proto__,null===t&&(t=i.nullPolyfill),e.__proto__=t,r&&a(i.nullPolyfill,"__proto__",s),e},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{e=r.set,e.call(t,n)}catch(i){}if(Object.getPrototypeOf(t)===n)return{set:e,level:2}}return t.__proto__=n,Object.getPrototypeOf(t)===n?{level:2}:(t={},t.__proto__=n,Object.getPrototypeOf(t)===n?{level:1}:!1)}()),e("../create")},{"../create":47,"../is-object":50,"../valid-value":61}],60:[function(e,t){"use strict";t.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},{}],61:[function(e,t){"use strict";t.exports=function(e){if(null==e)throw new TypeError("Cannot use null or undefined");return e}},{}],62:[function(e,t){"use strict";t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":63,"./shim":64}],63:[function(e,t){"use strict";var n="razdwatrzy";t.exports=function(){return"function"!=typeof n.contains?!1:n.contains("dwa")===!0&&n.contains("foo")===!1}},{}],64:[function(e,t){"use strict";var n=String.prototype.indexOf;t.exports=function(e){return n.call(this,e,arguments[1])>-1}},{}],65:[function(e,t){"use strict";var n=Object.prototype.toString,r=n.call("");t.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||n.call(e)===r)||!1}},{}],66:[function(e,t){"use strict";var n,r=e("es5-ext/object/set-prototype-of"),i=e("es5-ext/string/#/contains"),o=e("d"),a=e("./"),s=Object.defineProperty;n=t.exports=function(e,t){return this instanceof n?(a.call(this,e),t=t?i.call(t,"key+value")?"key+value":i.call(t,"key")?"key":"value":"value",s(this,"__kind__",o("",t)),void 0):new n(e,t)},r&&r(n,a),n.prototype=Object.create(a.prototype,{constructor:o(n),_resolve:o(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e}),toString:o(function(){return"[object Array Iterator]"})})},{"./":69,d:34,"es5-ext/object/set-prototype-of":57,"es5-ext/string/#/contains":62}],67:[function(e,t){"use strict";var n=e("es5-ext/object/valid-callable"),r=e("es5-ext/string/is-string"),i=e("./get"),o=Array.isArray,a=Function.prototype.call;t.exports=function(e,t){var s,u,c,l,p,f,d,h,m=arguments[2];if(o(e)?s="array":r(e)?s="string":e=i(e),n(t),c=function(){l=!0},"array"===s)return e.some(function(e){return a.call(t,m,e,c),l?!0:void 0}),void 0;if("string"!==s)for(u=e.next();!u.done;){if(a.call(t,m,u.value,c),l)return;u=e.next()}else for(f=e.length,p=0;f>p&&(d=e[p],f>p+1&&(h=d.charCodeAt(0),h>=55296&&56319>=h&&(d+=e[++p])),a.call(t,m,d,c),!l);++p);}},{"./get":68,"es5-ext/object/valid-callable":60,"es5-ext/string/is-string":65}],68:[function(e,t){"use strict";var n=e("es5-ext/string/is-string"),r=e("./array"),i=e("./string"),o=e("./valid-iterable"),a=e("es6-symbol").iterator;t.exports=function(e){return"function"==typeof o(e)[a]?e[a]():n(e)?new i(e):new r(e)}},{"./array":66,"./string":76,"./valid-iterable":77,"es5-ext/string/is-string":65,"es6-symbol":71}],69:[function(e,t){"use strict";var n,r=e("es5-ext/array/#/clear"),i=e("es5-ext/object/assign"),o=e("es5-ext/object/valid-callable"),a=e("es5-ext/object/valid-value"),s=e("d"),u=e("d/auto-bind"),c=e("es6-symbol"),l=Object.defineProperty,p=Object.defineProperties;t.exports=n=function(e,t){return this instanceof n?(p(this,{__list__:s("w",a(e)),__context__:s("w",t),__nextIndex__:s("w",0)}),t&&(o(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear)),void 0):new n(e,t)},p(n.prototype,i({constructor:s(n),_next:s(function(){var e;if(this.__list__)return this.__redo__&&(e=this.__redo__.shift(),void 0!==e)?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:(this._unBind(),void 0)}),next:s(function(){return this._createResult(this._next())}),_createResult:s(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:s(function(e){return this.__list__[e]}),_unBind:s(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:s(function(){return"[object Iterator]"})},u({_onAdd:s(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return l(this,"__redo__",s("c",[e])),void 0;this.__redo__.forEach(function(t,n){t>=e&&(this.__redo__[n]=++t)},this),this.__redo__.push(e)}}),_onDelete:s(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),-1!==t&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,n){t>e&&(this.__redo__[n]=--t)},this)))}),_onClear:s(function(){this.__redo__&&r.call(this.__redo__),this.__nextIndex__=0})}))),l(n.prototype,c.iterator,s(function(){return this})),l(n.prototype,c.toStringTag,s("","Iterator"))},{d:34,"d/auto-bind":33,"es5-ext/array/#/clear":35,"es5-ext/object/assign":43,"es5-ext/object/valid-callable":60,"es5-ext/object/valid-value":61,"es6-symbol":71}],70:[function(e,t){"use strict";var n=e("es5-ext/string/is-string"),r=e("es6-symbol").iterator,i=Array.isArray;t.exports=function(e){return null==e?!1:i(e)?!0:n(e)?!0:"function"==typeof e[r]}},{"es5-ext/string/is-string":65,"es6-symbol":71}],71:[function(e,t){"use strict";t.exports=e("./is-implemented")()?Symbol:e("./polyfill")},{"./is-implemented":72,"./polyfill":74}],72:[function(e,t){"use strict";t.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(t){return!1}return"symbol"==typeof Symbol.iterator?!0:"object"!=typeof Symbol.isConcatSpreadable?!1:"object"!=typeof Symbol.iterator?!1:"object"!=typeof Symbol.toPrimitive?!1:"object"!=typeof Symbol.toStringTag?!1:"object"!=typeof Symbol.unscopables?!1:!0}},{}],73:[function(e,t){"use strict";t.exports=function(e){return e&&("symbol"==typeof e||"Symbol"===e["@@toStringTag"])||!1}},{}],74:[function(e,t){"use strict";var n,r,i=e("d"),o=e("./validate-symbol"),a=Object.create,s=Object.defineProperties,u=Object.defineProperty,c=Object.prototype,l=a(null),p=function(){var e=a(null);return function(t){for(var n,r=0;e[t+(r||"")];)++r;return t+=r||"",e[t]=!0,n="@@"+t,u(c,n,i.gs(null,function(e){u(this,n,i(e))})),n}}();r=function f(e){if(this instanceof r)throw new TypeError("TypeError: Symbol is not a constructor");return f(e)},t.exports=n=function d(e){var t;if(this instanceof d)throw new TypeError("TypeError: Symbol is not a constructor");return t=a(r.prototype),e=void 0===e?"":String(e),s(t,{__description__:i("",e),__name__:i("",p(e))})},s(n,{"for":i(function(e){return l[e]?l[e]:l[e]=n(String(e))}),keyFor:i(function(e){var t;o(e);for(t in l)if(l[t]===e)return t}),hasInstance:i("",n("hasInstance")),isConcatSpreadable:i("",n("isConcatSpreadable")),iterator:i("",n("iterator")),match:i("",n("match")),replace:i("",n("replace")),search:i("",n("search")),species:i("",n("species")),split:i("",n("split")),toPrimitive:i("",n("toPrimitive")),toStringTag:i("",n("toStringTag")),unscopables:i("",n("unscopables"))}),s(r.prototype,{constructor:i(n),toString:i("",function(){return this.__name__})}),s(n.prototype,{toString:i(function(){return"Symbol ("+o(this).__description__+")"}),valueOf:i(function(){return o(this)})}),u(n.prototype,n.toPrimitive,i("",function(){return o(this)})),u(n.prototype,n.toStringTag,i("c","Symbol")),u(r.prototype,n.toPrimitive,i("c",n.prototype[n.toPrimitive])),u(r.prototype,n.toStringTag,i("c",n.prototype[n.toStringTag]))},{"./validate-symbol":75,d:34}],75:[function(e,t){"use strict";var n=e("./is-symbol");t.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},{"./is-symbol":73}],76:[function(e,t){"use strict";var n,r=e("es5-ext/object/set-prototype-of"),i=e("d"),o=e("./"),a=Object.defineProperty;n=t.exports=function(e){return this instanceof n?(e=String(e),o.call(this,e),a(this,"__length__",i("",e.length)),void 0):new n(e)},r&&r(n,o),n.prototype=Object.create(o.prototype,{constructor:i(n),_next:i(function(){return this.__list__?this.__nextIndex__<this.__length__?this.__nextIndex__++:(this._unBind(),void 0):void 0}),_resolve:i(function(e){var t,n=this.__list__[e];return this.__nextIndex__===this.__length__?n:(t=n.charCodeAt(0),t>=55296&&56319>=t?n+this.__list__[this.__nextIndex__++]:n)}),toString:i(function(){return"[object String Iterator]"})})},{"./":69,d:34,"es5-ext/object/set-prototype-of":57}],77:[function(e,t){"use strict";var n=e("./is-iterable");t.exports=function(e){if(!n(e))throw new TypeError(e+" is not iterable");return e}},{"./is-iterable":70}],78:[function(e,t,n){arguments[4][71][0].apply(n,arguments)},{"./is-implemented":79,"./polyfill":80,dup:71}],79:[function(e,t){"use strict";t.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(t){return!1}return"symbol"==typeof Symbol.iterator?!0:"object"!=typeof Symbol.isConcatSpreadable?!1:"object"!=typeof Symbol.isRegExp?!1:"object"!=typeof Symbol.iterator?!1:"object"!=typeof Symbol.toPrimitive?!1:"object"!=typeof Symbol.toStringTag?!1:"object"!=typeof Symbol.unscopables?!1:!0}},{}],80:[function(e,t){"use strict";var n,r,i=e("d"),o=Object.create,a=Object.defineProperties;n=function(){var e=o(null);return function(t){for(var n=0;e[t+(n||"")];)++n;return t+=n||"",e[t]=!0,"@@"+t}}(),t.exports=r=function(e){var t;if(this instanceof r)throw new TypeError("TypeError: Symbol is not a constructor");return t=o(r.prototype),e=void 0===e?"":String(e),a(t,{__description__:i("",e),__name__:i("",n(e))})},Object.defineProperties(r,{create:i("",r("create")),hasInstance:i("",r("hasInstance")),isConcatSpreadable:i("",r("isConcatSpreadable")),isRegExp:i("",r("isRegExp")),iterator:i("",r("iterator")),toPrimitive:i("",r("toPrimitive")),toStringTag:i("",r("toStringTag")),unscopables:i("",r("unscopables"))}),a(r.prototype,{properToString:i(function(){return"Symbol ("+this.__description__+")"}),toString:i("",function(){return this.__name__})}),Object.defineProperty(r.prototype,r.toPrimitive,i("",function(){throw new TypeError("Conversion of symbol objects is not allowed")})),Object.defineProperty(r.prototype,r.toStringTag,i("c","Symbol"))},{d:34}],81:[function(e,t,n){"use strict";var r,i,o,a,s,u,c,l=e("d"),p=e("es5-ext/object/valid-callable"),f=Function.prototype.apply,d=Function.prototype.call,h=Object.create,m=Object.defineProperty,g=Object.defineProperties,v=Object.prototype.hasOwnProperty,y={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n;return p(t),v.call(this,"__ee__")?n=this.__ee__:(n=y.value=h(null),m(this,"__ee__",y),y.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},i=function(e,t){var n,i;return p(t),i=this,r.call(this,e,n=function(){o.call(i,e,n),f.call(t,this,arguments)}),n.__eeOnceListener__=t,this},o=function(e,t){var n,r,i,o;if(p(t),!v.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if(r=n[e],"object"==typeof r)for(o=0;i=r[o];++o)(i===t||i.__eeOnceListener__===t)&&(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else(r===t||r.__eeOnceListener__===t)&&delete n[e];return this},a=function(e){var t,n,r,i,o;if(v.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),t=1;n>t;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)f.call(r,this,o)}else switch(arguments.length){case 1:d.call(i,this);break;case 2:d.call(i,this,arguments[1]);break;case 3:d.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;n>t;++t)o[t-1]=arguments[t];f.call(i,this,o)}},s={on:r,once:i,off:o,emit:a},u={on:l(r),once:l(i),off:l(o),emit:l(a)},c=g({},u),t.exports=n=function(e){return null==e?h(c):g(Object(e),u)},n.methods=s},{d:34,"es5-ext/object/valid-callable":60}],82:[function(e,t){"use strict";var n,r=e("es5-ext/array/#/clear"),i=e("es5-ext/array/#/e-index-of"),o=e("es5-ext/object/set-prototype-of"),a=e("es5-ext/object/valid-callable"),s=e("es5-ext/object/valid-value"),u=e("d"),c=e("event-emitter"),l=e("es6-symbol"),p=e("es6-iterator/valid-iterable"),f=e("es6-iterator/for-of"),d=e("./lib/iterator"),h=e("./is-native-implemented"),m=Function.prototype.call,g=Object.defineProperties;t.exports=n=function(){var e,t,r=arguments[0];if(!(this instanceof n))return new n(r);if(void 0!==this.__mapKeysData__)throw new TypeError(this+" cannot be reinitialized");null!=r&&p(r),g(this,{__mapKeysData__:u("c",e=[]),__mapValuesData__:u("c",t=[])}),r&&f(r,function(n){var r=s(n)[0];n=n[1],-1===i.call(e,r)&&(e.push(r),t.push(n))},this)},h&&(o&&o(n,Map),n.prototype=Object.create(Map.prototype,{constructor:u(n)})),c(g(n.prototype,{clear:u(function(){this.__mapKeysData__.length&&(r.call(this.__mapKeysData__),r.call(this.__mapValuesData__),this.emit("_clear"))}),"delete":u(function(e){var t=i.call(this.__mapKeysData__,e);return-1===t?!1:(this.__mapKeysData__.splice(t,1),this.__mapValuesData__.splice(t,1),this.emit("_delete",t,e),!0)}),entries:u(function(){return new d(this,"key+value")}),forEach:u(function(e){var t,n,r=arguments[1];for(a(e),t=this.entries(),n=t._next();void 0!==n;)m.call(e,r,this.__mapValuesData__[n],this.__mapKeysData__[n],this),n=t._next()}),get:u(function(e){var t=i.call(this.__mapKeysData__,e);if(-1!==t)return this.__mapValuesData__[t]}),has:u(function(e){return-1!==i.call(this.__mapKeysData__,e)}),keys:u(function(){return new d(this,"key")}),set:u(function(e,t){var n,r=i.call(this.__mapKeysData__,e);return-1===r&&(r=this.__mapKeysData__.push(e)-1,n=!0),this.__mapValuesData__[r]=t,n&&this.emit("_add",r,e),this}),size:u.gs(function(){return this.__mapKeysData__.length}),values:u(function(){return new d(this,"value")}),toString:u(function(){return"[object Map]"})})),Object.defineProperty(n.prototype,l.iterator,u(function(){return this.entries()})),Object.defineProperty(n.prototype,l.toStringTag,u("c","Map"))},{"./is-native-implemented":30,"./lib/iterator":32,d:34,"es5-ext/array/#/clear":35,"es5-ext/array/#/e-index-of":36,"es5-ext/object/set-prototype-of":57,"es5-ext/object/valid-callable":60,"es5-ext/object/valid-value":61,"es6-iterator/for-of":67,"es6-iterator/valid-iterable":77,"es6-symbol":78,"event-emitter":81}],83:[function(e,t){"use strict";t.exports=e("./is-implemented")()?WeakMap:e("./polyfill")},{"./is-implemented":84,"./polyfill":125}],84:[function(e,t){"use strict";t.exports=function(){var e;return"function"!=typeof WeakMap?!1:(e=new WeakMap,"function"!=typeof e.set?!1:e.set({},1)!==e?!1:"function"!=typeof e.clear?!1:"function"!=typeof e.delete?!1:"function"!=typeof e.has?!1:!0)}},{}],85:[function(e,t){"use strict";t.exports=function(){return"undefined"==typeof WeakMap?!1:"[object WeakMap]"===Object.prototype.toString.call(WeakMap.prototype)}()},{}],86:[function(e,t,n){arguments[4][33][0].apply(n,arguments)},{dup:33,"es5-ext/object/copy":93,"es5-ext/object/map":101,"es5-ext/object/valid-callable":106,"es5-ext/object/valid-value":108}],87:[function(e,t,n){arguments[4][34][0].apply(n,arguments)},{dup:34,"es5-ext/object/assign":90,"es5-ext/object/is-callable":96,"es5-ext/object/normalize-options":102,"es5-ext/string/#/contains":109}],88:[function(e,t,n){arguments[4][35][0].apply(n,arguments)},{"../../object/valid-value":108,dup:35}],89:[function(e,t,n){arguments[4][42][0].apply(n,arguments)},{"./is-callable":96,"./valid-callable":106,"./valid-value":108,dup:42}],90:[function(e,t,n){arguments[4][43][0].apply(n,arguments)},{"./is-implemented":91,"./shim":92,dup:43}],91:[function(e,t,n){arguments[4][44][0].apply(n,arguments)},{dup:44}],92:[function(e,t,n){arguments[4][45][0].apply(n,arguments)},{"../keys":98,"../valid-value":108,dup:45}],93:[function(e,t,n){arguments[4][46][0].apply(n,arguments)},{"./assign":90,"./valid-value":108,dup:46}],94:[function(e,t,n){arguments[4][47][0].apply(n,arguments)},{"./set-prototype-of/is-implemented":104,"./set-prototype-of/shim":105,dup:47}],95:[function(e,t,n){arguments[4][48][0].apply(n,arguments)},{"./_iterate":89,dup:48}],96:[function(e,t,n){arguments[4][49][0].apply(n,arguments)},{dup:49}],97:[function(e,t,n){arguments[4][50][0].apply(n,arguments)},{dup:50}],98:[function(e,t,n){arguments[4][51][0].apply(n,arguments)},{"./is-implemented":99,"./shim":100,dup:51}],99:[function(e,t,n){arguments[4][52][0].apply(n,arguments)},{dup:52}],100:[function(e,t,n){arguments[4][53][0].apply(n,arguments)},{dup:53}],101:[function(e,t,n){arguments[4][54][0].apply(n,arguments)},{"./for-each":95,"./valid-callable":106,dup:54}],102:[function(e,t,n){arguments[4][55][0].apply(n,arguments)},{dup:55}],103:[function(e,t,n){arguments[4][57][0].apply(n,arguments)},{"./is-implemented":104,"./shim":105,dup:57}],104:[function(e,t,n){arguments[4][58][0].apply(n,arguments)},{dup:58}],105:[function(e,t,n){arguments[4][59][0].apply(n,arguments)},{"../create":94,"../is-object":97,"../valid-value":108,dup:59}],106:[function(e,t,n){arguments[4][60][0].apply(n,arguments)},{dup:60}],107:[function(e,t){"use strict";var n=e("./is-object");t.exports=function(e){if(!n(e))throw new TypeError(e+" is not an Object");return e}},{"./is-object":97}],108:[function(e,t,n){arguments[4][61][0].apply(n,arguments)},{dup:61}],109:[function(e,t,n){arguments[4][62][0].apply(n,arguments)},{"./is-implemented":110,"./shim":111,dup:62}],110:[function(e,t,n){arguments[4][63][0].apply(n,arguments)},{dup:63}],111:[function(e,t,n){arguments[4][64][0].apply(n,arguments)},{dup:64}],112:[function(e,t,n){arguments[4][65][0].apply(n,arguments)},{dup:65}],113:[function(e,t,n){arguments[4][66][0].apply(n,arguments)},{"./":116,d:87,dup:66,"es5-ext/object/set-prototype-of":103,"es5-ext/string/#/contains":109}],114:[function(e,t,n){arguments[4][67][0].apply(n,arguments)},{"./get":115,dup:67,"es5-ext/object/valid-callable":106,"es5-ext/string/is-string":112}],115:[function(e,t,n){arguments[4][68][0].apply(n,arguments)},{"./array":113,"./string":118,"./valid-iterable":119,dup:68,"es5-ext/string/is-string":112,"es6-symbol":120}],116:[function(e,t,n){arguments[4][69][0].apply(n,arguments)},{d:87,"d/auto-bind":86,dup:69,"es5-ext/array/#/clear":88,"es5-ext/object/assign":90,"es5-ext/object/valid-callable":106,"es5-ext/object/valid-value":108,"es6-symbol":120}],117:[function(e,t,n){arguments[4][70][0].apply(n,arguments)},{dup:70,"es5-ext/string/is-string":112,"es6-symbol":120}],118:[function(e,t,n){arguments[4][76][0].apply(n,arguments)},{"./":116,d:87,dup:76,"es5-ext/object/set-prototype-of":103}],119:[function(e,t,n){arguments[4][77][0].apply(n,arguments)},{"./is-iterable":117,dup:77}],120:[function(e,t,n){arguments[4][71][0].apply(n,arguments)},{"./is-implemented":121,"./polyfill":123,dup:71}],121:[function(e,t,n){arguments[4][72][0].apply(n,arguments)},{dup:72}],122:[function(e,t,n){arguments[4][73][0].apply(n,arguments)},{dup:73}],123:[function(e,t,n){arguments[4][74][0].apply(n,arguments)},{"./validate-symbol":124,d:87,dup:74}],124:[function(e,t,n){arguments[4][75][0].apply(n,arguments)},{"./is-symbol":122,dup:75}],125:[function(e,t){"use strict";var n,r,i=e("es5-ext/object/set-prototype-of"),o=e("es5-ext/object/valid-object"),a=e("es5-ext/object/valid-value"),s=e("d"),u=e("es6-iterator/get"),c=e("es6-iterator/for-of"),l=e("es6-symbol").toStringTag,p=e("./is-native-implemented"),f=Array.isArray,d=Object.defineProperty,h=Math.random,m=Object.prototype.hasOwnProperty;n=function(){var e=Object.create(null);return function(){var t;do t=h().toString(36).slice(2);while(e[t]);return e[t]=!0,t}}(),t.exports=r=function(){var e=arguments[0];if(!(this instanceof r))return new r(e);if(void 0!==this.__weakMapData__)throw new TypeError(this+" cannot be reinitialized");null!=e&&(f(e)||(e=u(e))),d(this,"__weakMapData__",s("c","$weakMap$"+n())),e&&c(e,function(e){a(e),this.set(e[0],e[1])},this)},p&&(i&&i(r,WeakMap),r.prototype=Object.create(WeakMap.prototype,{constructor:s(r)})),Object.defineProperties(r.prototype,{clear:s(function(){d(this,"__weakMapData__",s("c","$weakMap$"+n()))}),"delete":s(function(e){return m.call(o(e),this.__weakMapData__)?(delete e[this.__weakMapData__],!0):!1}),get:s(function(e){return m.call(o(e),this.__weakMapData__)?e[this.__weakMapData__]:void 0}),has:s(function(e){return m.call(o(e),this.__weakMapData__)}),set:s(function(e,t){return d(o(e),this.__weakMapData__,s("c",t)),this}),toString:s(function(){return"[object WeakMap]"})}),d(r.prototype,l,s("c","WeakMap"))},{"./is-native-implemented":85,d:87,"es5-ext/object/set-prototype-of":103,"es5-ext/object/valid-object":107,"es5-ext/object/valid-value":108,"es6-iterator/for-of":114,"es6-iterator/get":115,"es6-symbol":120}],126:[function(e,t,n){!function(){"use strict";function t(e){return null==e?!1:"object"==typeof e&&"string"==typeof e.type}function r(e,t){return(e===o.Syntax.ObjectExpression||e===o.Syntax.ObjectPattern)&&"properties"===t}function i(e){this.__visitor=e||this}var o,a,s;o=e("estraverse"),a=Array.isArray,a||(a=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),s=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n},i.prototype.visitChildren=function(e){var n,i,a,u,c,l,p;if(null!=e)for(n=e.type||o.Syntax.Property,i=o.VisitorKeys[n],i||(i=s(e)),a=0,u=i.length;u>a;++a)if(p=e[i[a]])if(Array.isArray(p))for(c=0,l=p.length;l>c;++c)p[c]&&(t(p[c])||r(n,i[a]))&&this.visit(p[c]);else t(p)&&this.visit(p)},i.prototype.visit=function(e){var t;if(null!=e)return t=e.type||o.Syntax.Property,this.__visitor[t]?(this.__visitor[t].call(this,e),void 0):(this.visitChildren(e),void 0)},n.version=e("./package.json").version,n.Visitor=i,n.visit=function(e,t){var n=new i(t);n.visit(e)}}()},{"./package.json":127,estraverse:128}],127:[function(e,t){t.exports={name:"esrecurse",description:"ECMAScript scope analyzer",homepage:"http://github.com/estools/esrecurse",main:"esrecurse.js",version:"3.1.1",engines:{node:">=0.10.0"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"},{name:"michaelficarra",email:"npm@michael.ficarra.me"}],repository:{type:"git",url:"git+ssh://git@github.com/estools/esrecurse.git"},dependencies:{estraverse:"~3.1.0"},devDependencies:{chai:"^2.1.1","coffee-script":"^1.9.1",esprima:"^2.1.0",gulp:"~3.8.10","gulp-bump":"^0.2.2","gulp-eslint":"^0.6.0","gulp-filter":"^2.0.2","gulp-git":"^1.1.0","gulp-mocha":"~2.0.0","gulp-tag-version":"^1.2.1",jsdoc:"~3.3.0-alpha10",minimist:"^1.1.0"},licenses:[{type:"BSD",url:"http://github.com/estools/esrecurse/raw/master/LICENSE.BSD"}],scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint"},gitHead:"600a8aac5e7b313875a873134fd110b47a76fc77",bugs:{url:"https://github.com/estools/esrecurse/issues"},_id:"esrecurse@3.1.1",_shasum:"8feb963699d4d1b2d65a576cd4b1296672a0f0e9",_from:"esrecurse@>=3.1.1 <4.0.0",_npmVersion:"2.0.0-alpha-5",_npmUser:{name:"constellation",email:"utatane.tea@gmail.com"},dist:{shasum:"8feb963699d4d1b2d65a576cd4b1296672a0f0e9",tarball:"http://registry.npmjs.org/esrecurse/-/esrecurse-3.1.1.tgz"},directories:{},_resolved:"https://registry.npmjs.org/esrecurse/-/esrecurse-3.1.1.tgz",readme:"ERROR: No README data found!"}},{}],128:[function(e,t,n){!function r(t){"use strict";function n(){}function i(e){var t,n,r={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],r[t]="object"==typeof n&&null!==n?i(n):n);return r}function o(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function a(e,t){var n,r,i,o;for(r=e.length,i=0;r;)n=r>>>1,o=i+n,t(e[o])?r=n:(i=o+1,r-=n+1);return i}function s(e,t){var n,r,i,o;for(r=e.length,i=0;r;)n=r>>>1,o=i+n,t(e[o])?(i=o+1,r-=n+1):r=n;return i}function u(e,t){var n,r,i,o=S(t);for(r=0,i=o.length;i>r;r+=1)n=o[r],e[n]=t[n];return e}function c(e,t){this.parent=e,this.key=t}function l(e,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function p(){}function f(e){return null==e?!1:"object"==typeof e&&"string"==typeof e.type}function d(e,t){return(e===y.ObjectExpression||e===y.ObjectPattern)&&"properties"===t}function h(e,t){var n=new p;return n.traverse(e,t)}function m(e,t){var n=new p;return n.replace(e,t)}function g(e,t){var n;return n=a(t,function(t){return t.range[0]>e.range[0]}),e.extendedRange=[e.range[0],e.range[1]],n!==t.length&&(e.extendedRange[1]=t[n].range[0]),n-=1,n>=0&&(e.extendedRange[0]=t[n].range[1]),e}function v(e,t,n){var r,o,a,s,u=[];if(!e.range)throw new Error("attachComments needs range information");if(!n.length){if(t.length){for(a=0,o=t.length;o>a;a+=1)r=i(t[a]),r.extendedRange=[0,e.range[0]],u.push(r);e.leadingComments=u}return e}for(a=0,o=t.length;o>a;a+=1)u.push(g(i(t[a]),n));return s=0,h(e,{enter:function(e){for(var t;s<u.length&&(t=u[s],!(t.extendedRange[1]>e.range[0]));)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),u.splice(s,1)):s+=1;return s===u.length?x.Break:u[s].extendedRange[0]>e.range[1]?x.Skip:void 0}}),s=0,h(e,{leave:function(e){for(var t;s<u.length&&(t=u[s],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),u.splice(s,1)):s+=1;return s===u.length?x.Break:u[s].extendedRange[0]>e.range[1]?x.Skip:void 0}}),e}var y,_,x,b,w,S,E,C,T;return _=Array.isArray,_||(_=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),n(o),n(s),w=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),S=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n},y={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SuperExpression:"SuperExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},b={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],SuperExpression:["super"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},E={},C={},T={},x={Break:E,Skip:C,Remove:T},c.prototype.replace=function(e){this.parent[this.key]=e
},c.prototype.remove=function(){return _(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},p.prototype.path=function(){function e(e,t){if(_(t))for(r=0,i=t.length;i>r;++r)e.push(t[r]);else e.push(t)}var t,n,r,i,o,a;if(!this.__current.path)return null;for(o=[],t=2,n=this.__leavelist.length;n>t;++t)a=this.__leavelist[t],e(o,a.path);return e(o,this.__current.path),o},p.prototype.type=function(){var e=this.current();return e.type||this.__current.wrap},p.prototype.parents=function(){var e,t,n;for(n=[],e=1,t=this.__leavelist.length;t>e;++e)n.push(this.__leavelist[e].node);return n},p.prototype.current=function(){return this.__current.node},p.prototype.__execute=function(e,t){var n,r;return r=void 0,n=this.__current,this.__current=t,this.__state=null,e&&(r=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=n,r},p.prototype.notify=function(e){this.__state=e},p.prototype.skip=function(){this.notify(C)},p.prototype["break"]=function(){this.notify(E)},p.prototype.remove=function(){this.notify(T)},p.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback="iteration"===t.fallback,this.__keys=b,t.keys&&(this.__keys=u(w(this.__keys),t.keys))},p.prototype.traverse=function(e,t){var n,r,i,o,a,s,u,c,p,h,m,g;for(this.__initialize(e,t),g={},n=this.__worklist,r=this.__leavelist,n.push(new l(e,null,null,null)),r.push(new l(null,null,null,null));n.length;)if(i=n.pop(),i!==g){if(i.node){if(s=this.__execute(t.enter,i),this.__state===E||s===E)return;if(n.push(g),r.push(i),this.__state===C||s===C)continue;if(o=i.node,a=i.wrap||o.type,h=this.__keys[a],!h){if(!this.__fallback)throw new Error("Unknown node type "+a+".");h=S(o)}for(c=h.length;(c-=1)>=0;)if(u=h[c],m=o[u])if(_(m)){for(p=m.length;(p-=1)>=0;)if(m[p]){if(d(a,h[c]))i=new l(m[p],[u,p],"Property",null);else{if(!f(m[p]))continue;i=new l(m[p],[u,p],null,null)}n.push(i)}}else f(m)&&n.push(new l(m,u,null,null))}}else if(i=r.pop(),s=this.__execute(t.leave,i),this.__state===E||s===E)return},p.prototype.replace=function(e,t){function n(e){var t,n,i,o;if(e.ref.remove())for(n=e.ref.key,o=e.ref.parent,t=r.length;t--;)if(i=r[t],i.ref&&i.ref.parent===o){if(i.ref.key<n)break;--i.ref.key}}var r,i,o,a,s,u,p,h,m,g,v,y,x;for(this.__initialize(e,t),v={},r=this.__worklist,i=this.__leavelist,y={root:e},u=new l(e,null,null,new c(y,"root")),r.push(u),i.push(u);r.length;)if(u=r.pop(),u!==v){if(s=this.__execute(t.enter,u),void 0!==s&&s!==E&&s!==C&&s!==T&&(u.ref.replace(s),u.node=s),(this.__state===T||s===T)&&(n(u),u.node=null),this.__state===E||s===E)return y.root;if(o=u.node,o&&(r.push(v),i.push(u),this.__state!==C&&s!==C)){if(a=u.wrap||o.type,m=this.__keys[a],!m){if(!this.__fallback)throw new Error("Unknown node type "+a+".");m=S(o)}for(p=m.length;(p-=1)>=0;)if(x=m[p],g=o[x])if(_(g)){for(h=g.length;(h-=1)>=0;)if(g[h]){if(d(a,m[p]))u=new l(g[h],[x,h],"Property",new c(g,h));else{if(!f(g[h]))continue;u=new l(g[h],[x,h],null,new c(g,h))}r.push(u)}}else f(g)&&r.push(new l(g,x,null,new c(o,x)))}}else if(u=i.pop(),s=this.__execute(t.leave,u),void 0!==s&&s!==E&&s!==C&&s!==T&&u.ref.replace(s),(this.__state===T||s===T)&&n(u),this.__state===E||s===E)return y.root;return y.root},t.version=e("./package.json").version,t.Syntax=y,t.traverse=h,t.replace=m,t.attachComments=v,t.VisitorKeys=b,t.VisitorOption=x,t.Controller=p,t.cloneEnvironment=function(){return r({})},t}(n)},{"./package.json":129}],129:[function(e,t){t.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"3.1.0",engines:{node:">=0.10.0"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"},{name:"michaelficarra",email:"npm@michael.ficarra.me"}],repository:{type:"git",url:"git+ssh://git@github.com/estools/estraverse.git"},devDependencies:{chai:"^2.1.1","coffee-script":"^1.8.0",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.2.1",jshint:"^2.5.6",mocha:"^2.1.0"},licenses:[{type:"BSD",url:"http://github.com/estools/estraverse/raw/master/LICENSE.BSD"}],scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers coffee:coffee-script/register"},gitHead:"166ebbe0a8d45ceb2391b6f5ef5d1bab6bfb267a",bugs:{url:"https://github.com/estools/estraverse/issues"},_id:"estraverse@3.1.0",_shasum:"15e28a446b8b82bc700ccc8b96c78af4da0d6cba",_from:"estraverse@>=3.1.0 <4.0.0",_npmVersion:"2.0.0-alpha-5",_npmUser:{name:"constellation",email:"utatane.tea@gmail.com"},dist:{shasum:"15e28a446b8b82bc700ccc8b96c78af4da0d6cba",tarball:"http://registry.npmjs.org/estraverse/-/estraverse-3.1.0.tgz"},directories:{},_resolved:"https://registry.npmjs.org/estraverse/-/estraverse-3.1.0.tgz",readme:"ERROR: No README data found!"}},{}],130:[function(e,t){t.exports={name:"escope",description:"ECMAScript scope analyzer",homepage:"http://github.com/estools/escope",main:"lib/index.js",version:"3.1.0",engines:{node:">=0.4.0"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"},{name:"michaelficarra",email:"npm@michael.ficarra.me"}],repository:{type:"git",url:"git+https://github.com/estools/escope.git"},dependencies:{"es6-map":"^0.1.1","es6-weak-map":"^0.1.2",esrecurse:"^3.1.1",estraverse:"^3.1.0"},devDependencies:{acorn:"^0.12.0",babel:"^4.7.12",browserify:"^9.0.3",chai:"^2.1.1","coffee-script":"^1.9.1",espree:"^2.0.2",esprima:"^2.1.0",gulp:"~3.8.10","gulp-babel":"^4.0.0","gulp-bump":"^0.3.0","gulp-coffee":"^2.2.0","gulp-eslint":"^0.6.0","gulp-espower":"^0.10.0","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-mocha":"~2.0.0","gulp-plumber":"^1.0.0","gulp-sourcemaps":"^1.3.0","gulp-tag-version":"^1.2.1",jsdoc:"=3.3.0-alpha13",lazypipe:"^0.2.2",minimist:"^1.1.0","vinyl-source-stream":"^1.0.0"},license:"BSD-2-Clause",scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",jsdoc:"jsdoc src/*.js README.md"},gitHead:"f237eefd4bfadfcf397e451219c3079e9bc3bb81",bugs:{url:"https://github.com/estools/escope/issues"},_id:"escope@3.1.0",_shasum:"92ca48f6286b380e4388e09188a904b0fa1d9b7e",_from:"escope@>=3.1.0 <4.0.0",_npmVersion:"2.10.1",_nodeVersion:"2.1.0",_npmUser:{name:"constellation",email:"utatane.tea@gmail.com"},dist:{shasum:"92ca48f6286b380e4388e09188a904b0fa1d9b7e",tarball:"http://registry.npmjs.org/escope/-/escope-3.1.0.tgz"},directories:{},_resolved:"https://registry.npmjs.org/escope/-/escope-3.1.0.tgz",readme:"ERROR: No README data found!"}},{}],131:[function(e,t){var n=t.exports=e("estraverse"),r=e("./keys");for(var i in r){n.Syntax[i]=i;var o=r[i];o&&(n.VisitorKeys[i]=o)}},{"./keys":132,estraverse:133}],132:[function(e,t,n){var r={Identifier:[],NamespacedName:["namespace","name"],MemberExpression:["object","property"],EmptyExpression:[],ExpressionContainer:["expression"],Element:["openingElement","closingElement","children"],ClosingElement:["name"],OpeningElement:["name","attributes"],Attribute:["name","value"],Text:null,SpreadAttribute:["argument"]},i={Type:[],AnyTypeAnnotation:[],VoidTypeAnnotation:[],NumberTypeAnnotation:[],StringTypeAnnotation:[],StringLiteralTypeAnnotation:["value","raw"],BooleanTypeAnnotation:[],TypeAnnotation:["typeAnnotation"],NullableTypeAnnotation:["typeAnnotation"],FunctionTypeAnnotation:["params","returnType","rest","typeParameters"],FunctionTypeParam:["name","typeAnnotation","optional"],ObjectTypeAnnotation:["properties"],ObjectTypeProperty:["key","value","optional"],ObjectTypeIndexer:["id","key","value"],ObjectTypeCallProperty:["value"],QualifiedTypeIdentifier:["qualification","id"],GenericTypeAnnotation:["id","typeParameters"],MemberTypeAnnotation:["object","property"],UnionTypeAnnotation:["types"],IntersectionTypeAnnotation:["types"],TypeofTypeAnnotation:["argument"],TypeParameterDeclaration:["params"],TypeParameterInstantiation:["params"],ClassProperty:["key","typeAnnotation"],ClassImplements:[],InterfaceDeclaration:["id","body","extends"],InterfaceExtends:["id"],TypeAlias:["id","typeParameters","right"],TupleTypeAnnotation:["types"],DeclareVariable:["id"],DeclareFunction:["id"],DeclareClass:["id"],DeclareModule:["id","body"]};for(var o in r)n["XJS"+o]=n["JSX"+o]=r[o];for(var o in i)n[o]=i[o]},{}],133:[function(e,t,n){!function r(t){"use strict";function n(){}function i(e){var t,n,r={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],r[t]="object"==typeof n&&null!==n?i(n):n);return r}function o(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function a(e,t){var n,r,i,o;for(r=e.length,i=0;r;)n=r>>>1,o=i+n,t(e[o])?r=n:(i=o+1,r-=n+1);return i}function s(e,t){var n,r,i,o;for(r=e.length,i=0;r;)n=r>>>1,o=i+n,t(e[o])?(i=o+1,r-=n+1):r=n;return i}function u(e,t){var n,r,i,o=S(t);for(r=0,i=o.length;i>r;r+=1)n=o[r],e[n]=t[n];return e}function c(e,t){this.parent=e,this.key=t}function l(e,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function p(){}function f(e){return null==e?!1:"object"==typeof e&&"string"==typeof e.type}function d(e,t){return(e===y.ObjectExpression||e===y.ObjectPattern)&&"properties"===t}function h(e,t){var n=new p;return n.traverse(e,t)}function m(e,t){var n=new p;return n.replace(e,t)}function g(e,t){var n;return n=a(t,function(t){return t.range[0]>e.range[0]}),e.extendedRange=[e.range[0],e.range[1]],n!==t.length&&(e.extendedRange[1]=t[n].range[0]),n-=1,n>=0&&(e.extendedRange[0]=t[n].range[1]),e}function v(e,t,n){var r,o,a,s,u=[];if(!e.range)throw new Error("attachComments needs range information");if(!n.length){if(t.length){for(a=0,o=t.length;o>a;a+=1)r=i(t[a]),r.extendedRange=[0,e.range[0]],u.push(r);e.leadingComments=u}return e}for(a=0,o=t.length;o>a;a+=1)u.push(g(i(t[a]),n));return s=0,h(e,{enter:function(e){for(var t;s<u.length&&(t=u[s],!(t.extendedRange[1]>e.range[0]));)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),u.splice(s,1)):s+=1;return s===u.length?x.Break:u[s].extendedRange[0]>e.range[1]?x.Skip:void 0}}),s=0,h(e,{leave:function(e){for(var t;s<u.length&&(t=u[s],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),u.splice(s,1)):s+=1;return s===u.length?x.Break:u[s].extendedRange[0]>e.range[1]?x.Skip:void 0}}),e}var y,_,x,b,w,S,E,C,T;return _=Array.isArray,_||(_=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),n(o),n(s),w=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),S=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n},y={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},b={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},E={},C={},T={},x={Break:E,Skip:C,Remove:T},c.prototype.replace=function(e){this.parent[this.key]=e},c.prototype.remove=function(){return _(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},p.prototype.path=function(){function e(e,t){if(_(t))for(r=0,i=t.length;i>r;++r)e.push(t[r]);else e.push(t)}var t,n,r,i,o,a;if(!this.__current.path)return null;for(o=[],t=2,n=this.__leavelist.length;n>t;++t)a=this.__leavelist[t],e(o,a.path);return e(o,this.__current.path),o},p.prototype.type=function(){var e=this.current();return e.type||this.__current.wrap},p.prototype.parents=function(){var e,t,n;for(n=[],e=1,t=this.__leavelist.length;t>e;++e)n.push(this.__leavelist[e].node);return n},p.prototype.current=function(){return this.__current.node},p.prototype.__execute=function(e,t){var n,r;return r=void 0,n=this.__current,this.__current=t,this.__state=null,e&&(r=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=n,r},p.prototype.notify=function(e){this.__state=e},p.prototype.skip=function(){this.notify(C)},p.prototype["break"]=function(){this.notify(E)},p.prototype.remove=function(){this.notify(T)},p.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback="iteration"===t.fallback,this.__keys=b,t.keys&&(this.__keys=u(w(this.__keys),t.keys))},p.prototype.traverse=function(e,t){var n,r,i,o,a,s,u,c,p,h,m,g;for(this.__initialize(e,t),g={},n=this.__worklist,r=this.__leavelist,n.push(new l(e,null,null,null)),r.push(new l(null,null,null,null));n.length;)if(i=n.pop(),i!==g){if(i.node){if(s=this.__execute(t.enter,i),this.__state===E||s===E)return;if(n.push(g),r.push(i),this.__state===C||s===C)continue;if(o=i.node,a=i.wrap||o.type,h=this.__keys[a],!h){if(!this.__fallback)throw new Error("Unknown node type "+a+".");h=S(o)}for(c=h.length;(c-=1)>=0;)if(u=h[c],m=o[u])if(_(m)){for(p=m.length;(p-=1)>=0;)if(m[p]){if(d(a,h[c]))i=new l(m[p],[u,p],"Property",null);else{if(!f(m[p]))continue;i=new l(m[p],[u,p],null,null)}n.push(i)}}else f(m)&&n.push(new l(m,u,null,null))}}else if(i=r.pop(),s=this.__execute(t.leave,i),this.__state===E||s===E)return},p.prototype.replace=function(e,t){function n(e){var t,n,i,o;if(e.ref.remove())for(n=e.ref.key,o=e.ref.parent,t=r.length;t--;)if(i=r[t],i.ref&&i.ref.parent===o){if(i.ref.key<n)break;--i.ref.key}}var r,i,o,a,s,u,p,h,m,g,v,y,x;for(this.__initialize(e,t),v={},r=this.__worklist,i=this.__leavelist,y={root:e},u=new l(e,null,null,new c(y,"root")),r.push(u),i.push(u);r.length;)if(u=r.pop(),u!==v){if(s=this.__execute(t.enter,u),void 0!==s&&s!==E&&s!==C&&s!==T&&(u.ref.replace(s),u.node=s),(this.__state===T||s===T)&&(n(u),u.node=null),this.__state===E||s===E)return y.root;if(o=u.node,o&&(r.push(v),i.push(u),this.__state!==C&&s!==C)){if(a=u.wrap||o.type,m=this.__keys[a],!m){if(!this.__fallback)throw new Error("Unknown node type "+a+".");m=S(o)}for(p=m.length;(p-=1)>=0;)if(x=m[p],g=o[x])if(_(g)){for(h=g.length;(h-=1)>=0;)if(g[h]){if(d(a,m[p]))u=new l(g[h],[x,h],"Property",new c(g,h));else{if(!f(g[h]))continue;u=new l(g[h],[x,h],null,new c(g,h))}r.push(u)}}else f(g)&&r.push(new l(g,x,null,new c(o,x)))}}else if(u=i.pop(),s=this.__execute(t.leave,u),void 0!==s&&s!==E&&s!==C&&s!==T&&u.ref.replace(s),(this.__state===T||s===T)&&n(u),this.__state===E||s===E)return y.root;return y.root},t.version=e("./package.json").version,t.Syntax=y,t.traverse=h,t.replace=m,t.attachComments=v,t.VisitorKeys=b,t.VisitorOption=x,t.Controller=p,t.cloneEnvironment=function(){return r({})},t}(n)},{"./package.json":134}],134:[function(e,t){t.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"2.0.0",engines:{node:">=0.10.0"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"}],repository:{type:"git",url:"git+ssh://git@github.com/estools/estraverse.git"},devDependencies:{chai:"^2.1.1","coffee-script":"^1.8.0",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.2.1",jshint:"^2.5.6",mocha:"^2.1.0"},licenses:[{type:"BSD",url:"http://github.com/estools/estraverse/raw/master/LICENSE.BSD"}],scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers coffee:coffee-script/register"},gitHead:"d8bc726f126817cc03c7a4e751528edb19db0ffb",bugs:{url:"https://github.com/estools/estraverse/issues"},_id:"estraverse@2.0.0",_shasum:"5ae46963243600206674ccb24a09e16674fcdca1",_from:"estraverse@>=2.0.0 <3.0.0",_npmVersion:"2.0.0-alpha-5",_npmUser:{name:"constellation",email:"utatane.tea@gmail.com"},dist:{shasum:"5ae46963243600206674ccb24a09e16674fcdca1",tarball:"http://registry.npmjs.org/estraverse/-/estraverse-2.0.0.tgz"},directories:{},_resolved:"https://registry.npmjs.org/estraverse/-/estraverse-2.0.0.tgz",readme:"ERROR: No README data found!"}},{}],135:[function(e,t){t.exports={builtin:{Array:!1,ArrayBuffer:!1,Boolean:!1,constructor:!1,DataView:!1,Date:!1,decodeURI:!1,decodeURIComponent:!1,encodeURI:!1,encodeURIComponent:!1,Error:!1,escape:!1,eval:!1,EvalError:!1,Float32Array:!1,Float64Array:!1,Function:!1,hasOwnProperty:!1,Infinity:!1,Int16Array:!1,Int32Array:!1,Int8Array:!1,isFinite:!1,isNaN:!1,isPrototypeOf:!1,JSON:!1,Map:!1,Math:!1,NaN:!1,Number:!1,Object:!1,parseFloat:!1,parseInt:!1,Promise:!1,propertyIsEnumerable:!1,Proxy:!1,RangeError:!1,ReferenceError:!1,Reflect:!1,RegExp:!1,Set:!1,String:!1,Symbol:!1,SyntaxError:!1,System:!1,toLocaleString:!1,toString:!1,TypeError:!1,Uint16Array:!1,Uint32Array:!1,Uint8Array:!1,Uint8ClampedArray:!1,undefined:!1,unescape:!1,URIError:!1,valueOf:!1,WeakMap:!1,WeakSet:!1},browser:{addEventListener:!1,alert:!1,applicationCache:!1,atob:!1,Audio:!1,AudioProcessingEvent:!1,BeforeUnloadEvent:!1,Blob:!1,blur:!1,btoa:!1,cancelAnimationFrame:!1,CanvasGradient:!1,CanvasPattern:!1,CanvasRenderingContext2D:!1,clearInterval:!1,clearTimeout:!1,close:!1,closed:!1,CloseEvent:!1,Comment:!1,CompositionEvent:!1,confirm:!1,console:!1,crypto:!1,CSS:!1,CustomEvent:!1,Debug:!1,defaultStatus:!1,devicePixelRatio:!1,dispatchEvent:!1,document:!1,Document:!1,DocumentFragment:!1,DOMParser:!1,DragEvent:!1,Element:!1,ElementTimeControl:!1,ErrorEvent:!1,event:!1,Event:!1,EventSource:!1,FileList:!1,FileReader:!1,fetch:!1,find:!1,focus:!1,FocusEvent:!1,FormData:!1,frameElement:!1,frames:!1,GamepadEvent:!1,getComputedStyle:!1,getSelection:!1,HashChangeEvent:!1,Headers:!1,history:!1,HTMLAnchorElement:!1,HTMLBaseElement:!1,HTMLBlockquoteElement:!1,HTMLBodyElement:!1,HTMLBRElement:!1,HTMLButtonElement:!1,HTMLCanvasElement:!1,HTMLDirectoryElement:!1,HTMLDivElement:!1,HTMLDListElement:!1,HTMLElement:!1,HTMLFieldSetElement:!1,HTMLFontElement:!1,HTMLFormElement:!1,HTMLFrameElement:!1,HTMLFrameSetElement:!1,HTMLHeadElement:!1,HTMLHeadingElement:!1,HTMLHRElement:!1,HTMLHtmlElement:!1,HTMLIFrameElement:!1,HTMLImageElement:!1,HTMLInputElement:!1,HTMLIsIndexElement:!1,HTMLLabelElement:!1,HTMLLayerElement:!1,HTMLLegendElement:!1,HTMLLIElement:!1,HTMLLinkElement:!1,HTMLMapElement:!1,HTMLMenuElement:!1,HTMLMetaElement:!1,HTMLModElement:!1,HTMLObjectElement:!1,HTMLOListElement:!1,HTMLOptGroupElement:!1,HTMLOptionElement:!1,HTMLParagraphElement:!1,HTMLParamElement:!1,HTMLPreElement:!1,HTMLQuoteElement:!1,HTMLScriptElement:!1,HTMLSelectElement:!1,HTMLStyleElement:!1,HTMLTableCaptionElement:!1,HTMLTableCellElement:!1,HTMLTableColElement:!1,HTMLTableElement:!1,HTMLTableRowElement:!1,HTMLTableSectionElement:!1,HTMLTextAreaElement:!1,HTMLTitleElement:!1,HTMLUListElement:!1,HTMLVideoElement:!1,IDBCursor:!1,IDBCursorWithValue:!1,IDBDatabase:!1,IDBEnvironment:!1,IDBFactory:!1,IDBIndex:!1,IDBKeyRange:!1,IDBObjectStore:!1,IDBOpenDBRequest:!1,IDBRequest:!1,IDBTransaction:!1,IDBVersionChangeEvent:!1,Image:!1,indexedDB:!1,innerHeight:!1,innerWidth:!1,InputEvent:!1,Intl:!1,KeyboardEvent:!1,length:!1,localStorage:!1,location:!1,matchMedia:!1,MessageChannel:!1,MessageEvent:!1,MessagePort:!1,MouseEvent:!1,moveBy:!1,moveTo:!1,MutationObserver:!1,name:!1,navigator:!1,Node:!1,NodeFilter:!1,NodeList:!1,Notification:!1,OfflineAudioCompletionEvent:!1,onbeforeunload:!0,onblur:!0,onerror:!0,onfocus:!0,onload:!0,onresize:!0,onunload:!0,open:!1,openDatabase:!1,opener:!1,opera:!1,Option:!1,outerHeight:!1,outerWidth:!1,PageTransitionEvent:!1,pageXOffset:!1,pageYOffset:!1,parent:!1,PopStateEvent:!1,postMessage:!1,print:!1,ProgressEvent:!1,prompt:!1,Range:!1,Request:!1,Response:!1,removeEventListener:!1,requestAnimationFrame:!1,resizeBy:!1,resizeTo:!1,screen:!1,screenX:!1,screenY:!1,scroll:!1,scrollbars:!1,scrollBy:!1,scrollTo:!1,scrollX:!1,scrollY:!1,self:!1,sessionStorage:!1,setInterval:!1,setTimeout:!1,SharedWorker:!1,showModalDialog:!1,status:!1,stop:!1,StorageEvent:!1,SVGAElement:!1,SVGAltGlyphDefElement:!1,SVGAltGlyphElement:!1,SVGAltGlyphItemElement:!1,SVGAngle:!1,SVGAnimateColorElement:!1,SVGAnimatedAngle:!1,SVGAnimatedBoolean:!1,SVGAnimatedEnumeration:!1,SVGAnimatedInteger:!1,SVGAnimatedLength:!1,SVGAnimatedLengthList:!1,SVGAnimatedNumber:!1,SVGAnimatedNumberList:!1,SVGAnimatedPathData:!1,SVGAnimatedPoints:!1,SVGAnimatedPreserveAspectRatio:!1,SVGAnimatedRect:!1,SVGAnimatedString:!1,SVGAnimatedTransformList:!1,SVGAnimateElement:!1,SVGAnimateMotionElement:!1,SVGAnimateTransformElement:!1,SVGAnimationElement:!1,SVGCircleElement:!1,SVGClipPathElement:!1,SVGColor:!1,SVGColorProfileElement:!1,SVGColorProfileRule:!1,SVGComponentTransferFunctionElement:!1,SVGCSSRule:!1,SVGCursorElement:!1,SVGDefsElement:!1,SVGDescElement:!1,SVGDocument:!1,SVGElement:!1,SVGElementInstance:!1,SVGElementInstanceList:!1,SVGEllipseElement:!1,SVGEvent:!1,SVGExternalResourcesRequired:!1,SVGFEBlendElement:!1,SVGFEColorMatrixElement:!1,SVGFEComponentTransferElement:!1,SVGFECompositeElement:!1,SVGFEConvolveMatrixElement:!1,SVGFEDiffuseLightingElement:!1,SVGFEDisplacementMapElement:!1,SVGFEDistantLightElement:!1,SVGFEFloodElement:!1,SVGFEFuncAElement:!1,SVGFEFuncBElement:!1,SVGFEFuncGElement:!1,SVGFEFuncRElement:!1,SVGFEGaussianBlurElement:!1,SVGFEImageElement:!1,SVGFEMergeElement:!1,SVGFEMergeNodeElement:!1,SVGFEMorphologyElement:!1,SVGFEOffsetElement:!1,SVGFEPointLightElement:!1,SVGFESpecularLightingElement:!1,SVGFESpotLightElement:!1,SVGFETileElement:!1,SVGFETurbulenceElement:!1,SVGFilterElement:!1,SVGFilterPrimitiveStandardAttributes:!1,SVGFitToViewBox:!1,SVGFontElement:!1,SVGFontFaceElement:!1,SVGFontFaceFormatElement:!1,SVGFontFaceNameElement:!1,SVGFontFaceSrcElement:!1,SVGFontFaceUriElement:!1,SVGForeignObjectElement:!1,SVGGElement:!1,SVGGlyphElement:!1,SVGGlyphRefElement:!1,SVGGradientElement:!1,SVGHKernElement:!1,SVGICCColor:!1,SVGImageElement:!1,SVGLangSpace:!1,SVGLength:!1,SVGLengthList:!1,SVGLinearGradientElement:!1,SVGLineElement:!1,SVGLocatable:!1,SVGMarkerElement:!1,SVGMaskElement:!1,SVGMatrix:!1,SVGMetadataElement:!1,SVGMissingGlyphElement:!1,SVGMPathElement:!1,SVGNumber:!1,SVGNumberList:!1,SVGPaint:!1,SVGPathElement:!1,SVGPathSeg:!1,SVGPathSegArcAbs:!1,SVGPathSegArcRel:!1,SVGPathSegClosePath:!1,SVGPathSegCurvetoCubicAbs:!1,SVGPathSegCurvetoCubicRel:!1,SVGPathSegCurvetoCubicSmoothAbs:!1,SVGPathSegCurvetoCubicSmoothRel:!1,SVGPathSegCurvetoQuadraticAbs:!1,SVGPathSegCurvetoQuadraticRel:!1,SVGPathSegCurvetoQuadraticSmoothAbs:!1,SVGPathSegCurvetoQuadraticSmoothRel:!1,SVGPathSegLinetoAbs:!1,SVGPathSegLinetoHorizontalAbs:!1,SVGPathSegLinetoHorizontalRel:!1,SVGPathSegLinetoRel:!1,SVGPathSegLinetoVerticalAbs:!1,SVGPathSegLinetoVerticalRel:!1,SVGPathSegList:!1,SVGPathSegMovetoAbs:!1,SVGPathSegMovetoRel:!1,SVGPatternElement:!1,SVGPoint:!1,SVGPointList:!1,SVGPolygonElement:!1,SVGPolylineElement:!1,SVGPreserveAspectRatio:!1,SVGRadialGradientElement:!1,SVGRect:!1,SVGRectElement:!1,SVGRenderingIntent:!1,SVGScriptElement:!1,SVGSetElement:!1,SVGStopElement:!1,SVGStringList:!1,SVGStylable:!1,SVGStyleElement:!1,SVGSVGElement:!1,SVGSwitchElement:!1,SVGSymbolElement:!1,SVGTests:!1,SVGTextContentElement:!1,SVGTextElement:!1,SVGTextPathElement:!1,SVGTextPositioningElement:!1,SVGTitleElement:!1,SVGTransform:!1,SVGTransformable:!1,SVGTransformList:!1,SVGTRefElement:!1,SVGTSpanElement:!1,SVGUnitTypes:!1,SVGURIReference:!1,SVGUseElement:!1,SVGViewElement:!1,SVGViewSpec:!1,SVGVKernElement:!1,SVGZoomAndPan:!1,Text:!1,TextDecoder:!1,TextEncoder:!1,TimeEvent:!1,top:!1,TouchEvent:!1,UIEvent:!1,URL:!1,WebGLActiveInfo:!1,WebGLBuffer:!1,WebGLContextEvent:!1,WebGLFramebuffer:!1,WebGLProgram:!1,WebGLRenderbuffer:!1,WebGLRenderingContext:!1,WebGLShader:!1,WebGLShaderPrecisionFormat:!1,WebGLTexture:!1,WebGLUniformLocation:!1,WebSocket:!1,WheelEvent:!1,window:!1,Window:!1,Worker:!1,XDomainRequest:!1,XMLHttpRequest:!1,XMLSerializer:!1,XPathEvaluator:!1,XPathException:!1,XPathExpression:!1,XPathNamespace:!1,XPathNSResolver:!1,XPathResult:!1},worker:{importScripts:!0,postMessage:!0,self:!0},node:{__dirname:!1,__filename:!1,arguments:!1,Buffer:!1,clearImmediate:!1,clearInterval:!1,clearTimeout:!1,console:!1,exports:!0,GLOBAL:!1,global:!1,module:!1,process:!1,require:!1,root:!1,setImmediate:!1,setInterval:!1,setTimeout:!1},amd:{define:!1,require:!1},mocha:{after:!1,afterEach:!1,before:!1,beforeEach:!1,context:!1,describe:!1,it:!1,mocha:!1,setup:!1,specify:!1,suite:!1,suiteSetup:!1,suiteTeardown:!1,teardown:!1,test:!1,xcontext:!1,xdescribe:!1,xit:!1,xspecify:!1},jasmine:{afterAll:!1,afterEach:!1,beforeAll:!1,beforeEach:!1,describe:!1,expect:!1,fail:!1,fdescribe:!1,fit:!1,it:!1,jasmine:!1,pending:!1,runs:!1,spyOn:!1,waits:!1,waitsFor:!1,xdescribe:!1,xit:!1},qunit:{asyncTest:!1,deepEqual:!1,equal:!1,expect:!1,module:!1,notDeepEqual:!1,notEqual:!1,notPropEqual:!1,notStrictEqual:!1,ok:!1,propEqual:!1,QUnit:!1,raises:!1,start:!1,stop:!1,strictEqual:!1,test:!1,"throws":!1},phantomjs:{console:!0,exports:!0,phantom:!0,require:!0,WebPage:!0},couch:{emit:!1,exports:!1,getRow:!1,log:!1,module:!1,provides:!1,require:!1,respond:!1,send:!1,start:!1,sum:!1},rhino:{defineClass:!1,deserialize:!1,gc:!1,help:!1,importClass:!1,importPackage:!1,java:!1,load:!1,loadClass:!1,Packages:!1,print:!1,quit:!1,readFile:!1,readUrl:!1,runCommand:!1,seal:!1,serialize:!1,spawn:!1,sync:!1,toint32:!1,version:!1},wsh:{ActiveXObject:!0,Enumerator:!0,GetObject:!0,ScriptEngine:!0,ScriptEngineBuildVersion:!0,ScriptEngineMajorVersion:!0,ScriptEngineMinorVersion:!0,VBArray:!0,WScript:!0,WSH:!0,XDomainRequest:!0},jquery:{$:!1,jQuery:!1},yui:{Y:!1,YUI:!1,YUI_config:!1},shelljs:{cat:!1,cd:!1,chmod:!1,config:!1,cp:!1,dirs:!1,echo:!1,env:!1,error:!1,exec:!1,exit:!1,find:!1,grep:!1,ls:!1,mkdir:!1,mv:!1,popd:!1,pushd:!1,pwd:!1,rm:!1,sed:!1,target:!1,tempdir:!1,test:!1,which:!1},prototypejs:{$:!1,$$:!1,$A:!1,$break:!1,$continue:!1,$F:!1,$H:!1,$R:!1,$w:!1,Abstract:!1,Ajax:!1,Autocompleter:!1,Builder:!1,Class:!1,Control:!1,Draggable:!1,Draggables:!1,Droppables:!1,Effect:!1,Element:!1,Enumerable:!1,Event:!1,Field:!1,Form:!1,Hash:!1,Insertion:!1,ObjectRange:!1,PeriodicalExecuter:!1,Position:!1,Prototype:!1,Scriptaculous:!1,Selector:!1,Sortable:!1,SortableObserver:!1,Sound:!1,Template:!1,Toggle:!1,Try:!1},meteor:{$:!1,_:!1,Accounts:!1,App:!1,Assets:!1,Blaze:!1,check:!1,Cordova:!1,DDP:!1,DDPServer:!1,Deps:!1,EJSON:!1,Email:!1,HTTP:!1,Log:!1,Match:!1,Meteor:!1,Mongo:!1,MongoInternals:!1,Npm:!1,Package:!1,Plugin:!1,process:!1,Random:!1,ReactiveDict:!1,ReactiveVar:!1,Router:!1,Session:!1,share:!1,Spacebars:!1,Template:!1,Tinytest:!1,Tracker:!1,UI:!1,Utils:!1,WebApp:!1,WebAppInternals:!1},mongo:{_isWindows:!1,_rand:!1,BulkWriteResult:!1,cat:!1,cd:!1,connect:!1,db:!1,getHostName:!1,getMemInfo:!1,hostname:!1,listFiles:!1,load:!1,ls:!1,md5sumFile:!1,mkdir:!1,Mongo:!1,ObjectId:!1,PlanCache:!1,pwd:!1,quit:!1,removeFile:!1,rs:!1,sh:!1,UUID:!1,version:!1,WriteResult:!1},applescript:{$:!1,Application:!1,Automation:!1,console:!1,delay:!1,Library:!1,ObjC:!1,ObjectSpecifier:!1,Path:!1,Progress:!1,Ref:!1}}},{}],136:[function(e,t){t.exports=e("./globals.json")},{"./globals.json":135}],137:[function(e,t,n){n["date-time"]=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}[tT ]\d{2}:\d{2}:\d{2}(\.\d+)?([zZ]|[+-]\d{2}:\d{2})$/,n.date=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}$/,n.time=/^\d{2}:\d{2}:\d{2}$/,n.email=/^\S+@\S+$/,n["ip-address"]=n.ipv4=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,n.ipv6=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,n.uri=/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,n.color=/(#?([0-9A-Fa-f]{3,6})\b)|(aqua)|(black)|(blue)|(fuchsia)|(gray)|(green)|(lime)|(maroon)|(navy)|(olive)|(orange)|(purple)|(red)|(silver)|(teal)|(white)|(yellow)|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\))/,n.hostname=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]))*$/,n.alpha=/^[a-zA-Z]+$/,n.alphanumeric=/^[a-zA-Z0-9]+$/,n.style=/\s*(.+?):\s*([^;]+);?/g,n.phone=/^\+(?:[0-9] ?){6,14}[0-9]$/,n["utc-millisec"]=/^[0-9]+(\.?[0-9]+)?$/
},{}],138:[function(e,t){var n=e("generate-object-property"),r=e("generate-function"),i=e("jsonpointer"),o=e("xtend"),a=e("./formats"),s=function(e,t,n){if(/^https?:\/\//.test(n))return null;var r=function(e){return e&&e.id===n?e:"object"==typeof e&&e?Object.keys(e).reduce(function(t,n){return t||r(e[n])},null):null},o=r(e);if(o)return o;n=n.replace(/^#/,""),n=n.replace(/\/$/,"");try{return i.get(e,decodeURI(n))}catch(a){var s,u=n.indexOf("#");if(0!==u)if(-1===u)s=t[n];else{var c=n.slice(0,u);s=t[c];var l=n.slice(u).replace(/^#/,"");try{return i.get(s,l)}catch(a){}}else s=t[n];return s||null}},u=function(e){e=JSON.stringify(e);for(var t=/\[([^\[\]"]+)\]/;t.test(e);)e=e.replace(t,'."+$1+"');return e},c={};c.any=function(){return"true"},c.null=function(e){return e+" === null"},c.boolean=function(e){return"typeof "+e+' === "boolean"'},c.array=function(e){return"Array.isArray("+e+")"},c.object=function(e){return"typeof "+e+' === "object" && '+e+" && !Array.isArray("+e+")"},c.number=function(e){return"typeof "+e+' === "number"'},c.integer=function(e){return"typeof "+e+' === "number" && (Math.floor('+e+") === "+e+" || "+e+" > 9007199254740992 || "+e+" < -9007199254740992)"},c.string=function(e){return"typeof "+e+' === "string"'};var l=function(e){for(var t=[],n=0;n<e.length;n++)t.push("object"==typeof e[n]?JSON.stringify(e[n]):e[n]);for(var n=1;n<t.length;n++)if(t.indexOf(t[n])!==n)return!1;return!0},p=function(e,t,i,f,d){var h=d?o(a,d.formats):a,m={unique:l,formats:h},g=d?!!d.verbose:!1,v=d&&void 0!==d.greedy?d.greedy:!1,y={},_=function(e){return e+(y[e]=(y[e]||0)+1)},x={},b=function(e){if(x[e])return x[e];var t=_("pattern");return m[t]=new RegExp(e),x[e]=t,t},w=["i","j","k","l","m","n","o","p","q","r","s","t","u","v","x","y","z"],S=function(){var e=w.shift();return w.push(e+e[0]),e},E=function(e,r,o,l){var f=r.properties,y=r.type,x=!1;Array.isArray(r.items)&&(f={},r.items.forEach(function(e,t){f[t]=e}),y="array",x=!0);var w=0,T=function(t,n,r){C("errors++"),o===!0&&(C("if (validate.errors === null) validate.errors = []"),g?C("validate.errors.push({field:%s,message:%s,value:%s})",u(n||e),JSON.stringify(t),r||e):C("validate.errors.push({field:%s,message:%s})",u(n||e),JSON.stringify(t)))};r.required===!0?(w++,C("if (%s === undefined) {",e),T("is required"),C("} else {")):(w++,C("if (%s !== undefined) {",e));var P=[].concat(y).map(function(t){return c[t||"any"](e)}).join(" || ")||"true";if("true"!==P&&(w++,C("if (!(%s)) {",P),T("is the wrong type"),C("} else {")),x)if(r.additionalItems===!1)C("if (%s.length > %d) {",e,r.items.length),T("has additional items"),C("}");else if(r.additionalItems){var I=S();C("for (var %s = %d; %s < %s.length; %s++) {",I,r.items.length,I,e,I),E(e+"["+I+"]",r.additionalItems,o,l),C("}")}if(r.format&&h[r.format]){"string"!==y&&a[r.format]&&C("if (%s) {",c.string(e));var D=_("format");m[D]=h[r.format],"function"==typeof m[D]?C("if (!%s(%s)) {",D,e):C("if (!%s.test(%s)) {",D,e),T("must be "+r.format+" format"),C("}"),"string"!==y&&a[r.format]&&C("}")}if(Array.isArray(r.required)){var A=function(t){var r=n(e,t);C("if (%s === undefined) {",r),T("is required",r),C("missing++"),C("}")};C("if ((%s)) {","object"!==y?c.object(e):"true"),C("var missing = 0"),r.required.map(A),C("}"),v||(C("if (missing === 0) {"),w++)}if(r.uniqueItems&&("array"!==y&&C("if (%s) {",c.array(e)),C("if (!(unique(%s))) {",e),T("must be unique"),C("}"),"array"!==y&&C("}")),r.enum){var N=r.enum.some(function(e){return"object"==typeof e}),k=N?function(t){return"JSON.stringify("+e+")"+" !== JSON.stringify("+JSON.stringify(t)+")"}:function(t){return e+" !== "+JSON.stringify(t)};C("if (%s) {",r.enum.map(k).join(" && ")||"false"),T("must be an enum value"),C("}")}if(r.dependencies&&("object"!==y&&C("if (%s) {",c.object(e)),Object.keys(r.dependencies).forEach(function(t){var i=r.dependencies[t];"string"==typeof i&&(i=[i]);var a=function(t){return n(e,t)+" !== undefined"};Array.isArray(i)&&(C("if (%s !== undefined && !(%s)) {",n(e,t),i.map(a).join(" && ")||"true"),T("dependencies not set"),C("}")),"object"==typeof i&&(C("if (%s !== undefined) {",n(e,t)),E(e,i,o,l),C("}"))}),"object"!==y&&C("}")),r.additionalProperties||r.additionalProperties===!1){"object"!==y&&C("if (%s) {",c.object(e));var I=S(),O=_("keys"),R=function(e){return O+"["+I+"] !== "+JSON.stringify(e)},j=function(e){return"!"+b(e)+".test("+O+"["+I+"])"},F=Object.keys(f||{}).map(R).concat(Object.keys(r.patternProperties||{}).map(j)).join(" && ")||"true";C("var %s = Object.keys(%s)",O,e)("for (var %s = 0; %s < %s.length; %s++) {",I,I,O,I)("if (%s) {",F),r.additionalProperties===!1?(l&&C("delete %s",e+"["+O+"["+I+"]]"),T("has additional properties",null,JSON.stringify(e+".")+" + "+O+"["+I+"]")):E(e+"["+O+"["+I+"]]",r.additionalProperties,o,l),C("}")("}"),"object"!==y&&C("}")}if(r.$ref){var L=s(i,d&&d.schemas||{},r.$ref);if(L){var M=t[r.$ref];M||(t[r.$ref]=function(e){return M(e)},M=p(L,t,i,!1,d));var D=_("ref");m[D]=M,C("if (!(%s(%s))) {",D,e),T("referenced schema does not match"),C("}")}}if(r.not){var B=_("prev");C("var %s = errors",B),E(e,r.not,!1,l),C("if (%s === errors) {",B),T("negative schema matches"),C("} else {")("errors = %s",B)("}")}if(r.items&&!x){"array"!==y&&C("if (%s) {",c.array(e));var I=S();C("for (var %s = 0; %s < %s.length; %s++) {",I,I,e,I),E(e+"["+I+"]",r.items,o,l),C("}"),"array"!==y&&C("}")}if(r.patternProperties){"object"!==y&&C("if (%s) {",c.object(e));var O=_("keys"),I=S();C("var %s = Object.keys(%s)",O,e)("for (var %s = 0; %s < %s.length; %s++) {",I,I,O,I),Object.keys(r.patternProperties).forEach(function(t){var n=b(t);C("if (%s.test(%s)) {",n,O+"["+I+"]"),E(e+"["+O+"["+I+"]]",r.patternProperties[t],o,l),C("}")}),C("}"),"object"!==y&&C("}")}if(r.pattern){var U=b(r.pattern);"string"!==y&&C("if (%s) {",c.string(e)),C("if (!(%s.test(%s))) {",U,e),T("pattern mismatch"),C("}"),"string"!==y&&C("}")}if(r.allOf&&r.allOf.forEach(function(t){E(e,t,o,l)}),r.anyOf&&r.anyOf.length){var B=_("prev");r.anyOf.forEach(function(t,n){0===n?C("var %s = errors",B):C("if (errors !== %s) {",B)("errors = %s",B),E(e,t,!1,!1)}),r.anyOf.forEach(function(e,t){t&&C("}")}),C("if (%s !== errors) {",B),T("no schemas match"),C("}")}if(r.oneOf&&r.oneOf.length){var B=_("prev"),V=_("passes");C("var %s = errors",B)("var %s = 0",V),r.oneOf.forEach(function(t){E(e,t,!1,!1),C("if (%s === errors) {",B)("%s++",V)("} else {")("errors = %s",B)("}")}),C("if (%s !== 1) {",V),T("no (or more than one) schemas match"),C("}")}if(void 0!==r.multipleOf){"number"!==y&&"integer"!==y&&C("if (%s) {",c.number(e));var Q=(0|r.multipleOf)!==r.multipleOf?Math.pow(10,r.multipleOf.toString().split(".").pop().length):1;Q>1?C("if ((%d*%s) % %d) {",Q,e,Q*r.multipleOf):C("if (%s % %d) {",e,r.multipleOf),T("has a remainder"),C("}"),"number"!==y&&"integer"!==y&&C("}")}for(void 0!==r.maxProperties&&("object"!==y&&C("if (%s) {",c.object(e)),C("if (Object.keys(%s).length > %d) {",e,r.maxProperties),T("has more properties than allowed"),C("}"),"object"!==y&&C("}")),void 0!==r.minProperties&&("object"!==y&&C("if (%s) {",c.object(e)),C("if (Object.keys(%s).length < %d) {",e,r.minProperties),T("has less properties than allowed"),C("}"),"object"!==y&&C("}")),void 0!==r.maxItems&&("array"!==y&&C("if (%s) {",c.array(e)),C("if (%s.length > %d) {",e,r.maxItems),T("has more items than allowed"),C("}"),"array"!==y&&C("}")),void 0!==r.minItems&&("array"!==y&&C("if (%s) {",c.array(e)),C("if (%s.length < %d) {",e,r.minItems),T("has less items than allowed"),C("}"),"array"!==y&&C("}")),void 0!==r.maxLength&&("string"!==y&&C("if (%s) {",c.string(e)),C("if (%s.length > %d) {",e,r.maxLength),T("has longer length than allowed"),C("}"),"string"!==y&&C("}")),void 0!==r.minLength&&("string"!==y&&C("if (%s) {",c.string(e)),C("if (%s.length < %d) {",e,r.minLength),T("has less length than allowed"),C("}"),"string"!==y&&C("}")),void 0!==r.minimum&&(C("if (%s %s %d) {",e,r.exclusiveMinimum?"<=":"<",r.minimum),T("is less than minimum"),C("}")),void 0!==r.maximum&&(C("if (%s %s %d) {",e,r.exclusiveMaximum?">=":">",r.maximum),T("is more than maximum"),C("}")),f&&Object.keys(f).forEach(function(t){E(n(e,t),f[t],o,l)});w--;)C("}")},C=r("function validate(data) {")("validate.errors = null")("var errors = 0");return E("data",e,f,d&&d.filter),C("return errors === 0")("}"),C=C.toFunction(m),C.errors=null,C.__defineGetter__("error",function(){return C.errors?C.errors.map(function(e){return e.field+" "+e.message}).join("\n"):""}),C.toJSON=function(){return e},C};t.exports=function(e,t){return"string"==typeof e&&(e=JSON.parse(e)),p(e,{},e,!0,t)},t.exports.filter=function(e,n){var r=t.exports(e,o(n,{filter:!0}));return function(e){return r(e),e}}},{"./formats":137,"generate-function":139,"generate-object-property":140,jsonpointer:142,xtend:143}],139:[function(e,t){var n=e("util"),r=/[\{\[]/,i=/[\}\]]/;t.exports=function(){var e=[],t=0,o=function(n){for(var r="";r.length<2*t;)r+="  ";e.push(r+n)},a=function(e){return e?i.test(e.trim()[0])&&r.test(e[e.length-1])?(t--,o(n.format.apply(n,arguments)),t++,a):r.test(e[e.length-1])?(o(n.format.apply(n,arguments)),t++,a):i.test(e.trim()[0])?(t--,o(n.format.apply(n,arguments)),a):(o(n.format.apply(n,arguments)),a):a};return a.toString=function(){return e.join("\n")},a.toFunction=function(e){var t="return ("+a.toString()+")",n=Object.keys(e||{}).map(function(e){return e}),r=n.map(function(t){return e[t]});return Function.apply(null,n.concat(t)).apply(null,r)},arguments.length&&a.apply(null,arguments),a}},{util:10}],140:[function(e,t){var n=e("is-property"),r=function(e,t){return n(t)?e+"."+t:e+"["+JSON.stringify(t)+"]"};r.valid=n,r.property=function(e){return n(e)?e:JSON.stringify(e)},t.exports=r},{"is-property":141}],141:[function(e,t){"use strict";function n(e){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(e)}t.exports=n},{}],142:[function(e,t,n){e("console");var r=function(e){return e.replace(/~./g,function(e){switch(e){case"~0":return"~";case"~1":return"/"}throw"Invalid tilde escape: "+e})},i=function(e,t,n){var o=r(t.shift());if("undefined"==typeof e[o])throw"Value for pointer '"+t+"' not found.";if(0!==t.length)return i(e[o],t,n);if("undefined"==typeof n)return e[o];var a=e[o];return null===n?delete e[o]:e[o]=n,a},o=function(e,t){if("object"!=typeof e)throw"Invalid input object.";if(""===t)return[];if(!t)throw"Invalid JSON pointer.";t=t.split("/");var n=t.shift();if(""!==n)throw"Invalid JSON pointer.";return t},a=function(e,t){return t=o(e,t),0===t.length?e:i(e,t)},s=function(e,t,n){if(t=o(e,t),0===t.length)throw"Invalid JSON pointer for set.";return i(e,t,n)};n.get=a,n.set=s},{console:4}],143:[function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}t.exports=n},{}],144:[function(e,t){"use strict";function n(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=Object.assign||function(e){for(var t,r,i=n(e),o=1;o<arguments.length;o++){t=arguments[o],r=Object.keys(Object(t));for(var a=0;a<r.length;a++)i[r[a]]=t[r[a]]}return i}},{}],145:[function(e,t){"use strict";function n(e){var t=o.get(e),n=t&&t.schema;return n?Array.isArray(n)?{type:"array",items:[{"enum":[0,1,2]}].concat(n),minItems:1,maxItems:n.length+1}:n:{type:"array",items:[{"enum":[0,1,2]}],minItems:1}}function r(e,t,r){var i,o=s.rules[e];if(o||(o=a(n(e),{verbose:!0}),s.rules[e]=o),"number"==typeof t&&(t=[t]),o(t),o.errors)throw i=[r,":\n",'	Configuration for rule "',e,'" is invalid:\n'],o.errors.forEach(function(e){i.push('	Value "',e.value,'" ',e.message,".\n")}),new Error(i.join(""))}function i(e,t){"object"==typeof e.rules&&Object.keys(e.rules).forEach(function(n){r(n,e.rules[n],t)})}var o=e("./rules"),a=e("is-my-json-valid"),s={rules:Object.create(null)};t.exports={getRuleOptionsSchema:n,validate:i,validateRuleOptions:r}},{"./rules":149,"is-my-json-valid":138}],146:[function(e,t){"use strict";function n(e){var t={};return e=e.replace(/\s*:\s*/g,":"),e=e.replace(/\s*,\s*/g,","),e.split(/\s|,+/).forEach(function(e){if(e){var n,r=e.indexOf(":");-1!==r&&(n=e.substring(r+1,e.length),e=e.substring(0,r)),t[e]="true"===n}}),t}function r(e,t,n){var r={};e=e.replace(/([a-zA-Z0-9\-\/]+):/g,'"$1":').replace(/(\]|[0-9])\s+(?=")/,"$1,");try{r=JSON.parse("{"+e+"}")}catch(i){n.push({fatal:!0,severity:2,message:"Failed to parse JSON from '"+e+"': "+i.message,line:t.start.line,column:t.start.column})}return r}function i(e){var t={};return e=e.replace(/\s*,\s*/g,","),e.split(/,+/).forEach(function(e){e=e.trim(),e&&(t[e]=!0)}),t}function o(e,t){var n=null;return e.variables.some(function(e){return e.name===t?(n=e,!0):!1}),n}function a(e,t,n){var r={},i={},a=h.builtin;m(r,a),Object.keys(n.env).forEach(function(e){if(n.env[e]){var t=h[e]&&h[e].globals;t&&m(r,t)}}),m(r,n.globals),m(i,n.astGlobals),Object.keys(r).forEach(function(e){var n=o(t,e);n||(n=new d.Variable(e,t),n.eslintExplicitGlobal=!1,t.variables.push(n)),n.writeable=r[e]}),Object.keys(i).forEach(function(e){var n=o(t,e);n||(n=new d.Variable(e,t),n.eslintExplicitGlobal=!0,t.variables.push(n)),n.writeable=i[e]})}function s(e,t,n){n.length?n.forEach(function(n){e.push({start:t,end:null,rule:n})}):e.push({start:t,end:null,rule:null})}function u(e,t,n){var r;if(n.length)n.forEach(function(n){for(r=e.length-1;r>=0;r--)if(!e[r].end&&e[r].rule===n){e[r].end=t;break}});else{var i;for(r=e.length-1;r>=0&&(!i||i===e[r].start);r--)e[r].end||(e[r].end=t,i=e[r].start)}}function c(e,t,o,a,c){var l={astGlobals:{},rules:{},env:{}},p={};t.comments.forEach(function(t){var o=t.value.trim(),f=/^(eslint-\w+|eslint-\w+-\w+|eslint|globals?)(\s|$)/.exec(o);if(f)if(o=o.substring(f.index+f[1].length),"Block"===t.type)switch(f[1]){case"globals":case"global":m(l.astGlobals,n(o));break;case"eslint-env":m(l.env,i(o));break;case"eslint-disable":s(a,t.loc.start,Object.keys(i(o)));break;case"eslint-enable":u(a,t.loc.start,Object.keys(i(o)));break;case"eslint":var d=r(o,t.loc,c);Object.keys(d).forEach(function(n){var r=d[n];S.validateRuleOptions(n,r,e+" line "+t.loc.start.line),p[n]=r})}else"eslint-disable-line"===f[1]&&(s(a,{line:t.loc.start.line,column:0},Object.keys(i(o))),u(a,t.loc.end,Object.keys(i(o))))}),Object.keys(l.env).forEach(function(e){h[e]&&v.mergeConfigs(l,h[e])}),m(l.rules,p),v.mergeConfigs(o,l)}function l(e,t,n){for(var r=0,i=e.length;i>r;r++){var o=e[r];if((!o.rule||o.rule===t)&&(n.line>o.start.line||n.line===o.start.line&&n.column>=o.start.column)&&(!o.end||n.line<o.end.line||n.line===o.end.line&&n.column<=o.end.column))return!0}return!1}function p(e){e.globals=e.globals||e.global||{},delete e.global;var t,n={},r={};return"object"==typeof e.rules&&Object.keys(e.rules).forEach(function(t){var r=e.rules[t];if(null===r)throw new Error("Invalid config for rule '"+t+"'.");n[t]=Array.isArray(r)?r.slice():r}),"object"==typeof e.env&&Object.keys(e.env).forEach(function(t){e.env[t]&&h[t].ecmaFeatures&&m(r,h[t].ecmaFeatures)}),t={rules:n,parser:e.parser||"espree",globals:v.mergeConfigs({},e.globals),env:v.mergeConfigs({},e.env||{}),settings:v.mergeConfigs({},e.settings||{}),ecmaFeatures:v.mergeConfigs(r,e.ecmaFeatures||{})},t.ecmaFeatures.modules&&(t.ecmaFeatures.globalReturn=!1),t}var f=e("estraverse-fb"),d=e("escope"),h=e("../conf/environments"),m=e("object-assign"),g=e("./rules"),v=e("./util"),y=e("./rule-context"),_=e("./timing"),x=e("./token-store.js"),b=e("events").EventEmitter,w=e("escape-string-regexp"),S=e("./config-validator");f.Syntax.Super="Super",f.VisitorKeys.Super=[],t.exports=function(){function t(t,n){var r;try{r=e(n.parser)}catch(i){return h.push({fatal:!0,severity:2,message:i.message,line:0,column:0}),null}try{return r.parse(t,{loc:!0,range:!0,raw:!0,tokens:!0,comment:!0,attachComment:!0,ecmaFeatures:n.ecmaFeatures})}catch(i){var o=i.message.replace(/^line \d+:/i,"").trim();return h.push({fatal:!0,severity:2,message:o,line:i.lineNumber,column:i.column}),null}}function n(e,t,n){e.length&&e.forEach(function(e){t.indexOf(e.loc)>=0?t.splice(t.indexOf(e.loc),1):(t.push(e.loc),u.emit(e.type+n,e))})}function r(e){n(e,N,"Comment")}function i(e){n(e,k,"Comment:exit")}function o(e){return"number"==typeof e?e:Array.isArray(e)?e[0]:0}function s(e){return Array.isArray(e)?e.slice(1):[]}var u=Object.create(new b),h=[],m=null,v=[],S=null,E=null,C=null,T=null,P=null,I=null,D=null,A=[],N=[],k=[],O=null;u.setMaxListeners(0),u.reset=function(){this.removeAllListeners(),h=[],O=null,S=null,m=null,v=[],E=null,C=null,T=null,P=null,D=null,A=[],N=[],k=[]},u.verify=function(e,n,l,b){var w,N,k,R;return I=l,b||this.reset(),0===e.trim().length?(m=e,h):(n=p(n||{}),w=t(e.replace(/^#!([^\r\n]+)/,function(e,t){return N=t,"//"+t}),n),w&&(O=w,c(l,w,n,A,h),Object.keys(n.rules).filter(function(e){return o(n.rules[e])>0}).forEach(function(e){var t,r=g.get(e),i=o(n.rules[e]),a=s(n.rules[e]);if(!r)throw new Error("Definition for rule '"+e+"' was not found.");try{t=r(new y(e,u,i,a,n.settings,n.ecmaFeatures)),Object.keys(t).forEach(function(n){u.on(n,_.enabled?_.time(e,t[n]):t[n])})}catch(c){throw c.message="Error while loading rule '"+e+"': "+c.message,c}}),S=n,m=e,D=new f.Controller,k=S.ecmaFeatures,R=k.blockBindings||k.classes||k.modules||k.defaultParams||k.destructuring?6:5,P=d.analyze(w,{ignoreEval:!0,nodejsScope:k.globalReturn,ecmaVersion:R,sourceType:k.modules?"module":"script"}),C=P.scopes,T=[],C.forEach(function(e,t){var n=e.block.range[0];T[n]||(T[n]=t)}),v=m.split(/\r\n|\r|\n|\u2028|\u2029/g),Object.freeze(v),E=x(w.tokens),Object.keys(E).forEach(function(e){u[e]=E[e]}),a(w,C[0],S),N&&w.comments.length&&w.comments[0].value===N&&(w.comments.splice(0,1),w.body.length&&w.body[0].leadingComments&&w.body[0].leadingComments[0].value===N&&w.body[0].leadingComments.splice(0,1)),D.traverse(w,{enter:function(e,t){var n=u.getComments(e);r(n.leading),e.parent=t,u.emit(e.type,e),r(n.trailing)},leave:function(e){var t=u.getComments(e);i(t.trailing),u.emit(e.type+":exit",e),i(t.leading)}})),h.sort(function(e,t){var n=e.line-t.line;return 0===n?e.column-t.column:n}),h)},u.report=function(e,t,n,r,i,o){"string"==typeof r&&(o=i,i=r,r=n.loc.start),Object.keys(o||{}).forEach(function(e){var t=new RegExp(w("{{"+e+"}}"),"g");i=i.replace(t,o[e])}),l(A,e,r)||h.push({ruleId:e,severity:t,message:i,line:r.line,column:r.column,nodeType:n.type,source:v[r.line-1]||""})},u.getSource=function(e,t,n){return e?null!==m?m.slice(Math.max(e.range[0]-(t||0),0),e.range[1]+(n||0)):null:m},u.getSourceLines=function(){return v},u.getAllComments=function(){return O.comments},u.getComments=function(e){var t=e.leadingComments||[],n=e.trailingComments||[];return"Program"===e.type&&0===e.body.length&&(t=e.comments),{leading:t,trailing:n}},u.getJSDocComment=function(e){function t(e){if(e)for(var t=e.length-1;t>=0;t--)if("Block"===e[t].type&&"*"===e[t].value.charAt(0)){if(i-e[t].loc.end.line<=1)return e[t];break}return null}function n(e){return"ExportDefaultDeclaration"===e.type||"ExportNamedDeclaration"===e.type||"ExportAllDeclaration"===e.type||"ExportSpecifier"===e.type}var r=e.parent,i=e.loc.start.line;switch(e.type){case"FunctionDeclaration":return n(r)?t(r.leadingComments):t(e.leadingComments);case"ArrowFunctionExpression":case"FunctionExpression":if("CallExpression"!==r.type||r.callee!==e){for(;r&&!r.leadingComments&&!/Function/.test(r.type);)r=r.parent;return r&&"FunctionDeclaration"!==r.type?t(r.leadingComments):null}default:return null}},u.getAncestors=function(){return D.parents()},u.getNodeByRangeIndex=function(e){var t=null;return f.traverse(D.root,{enter:function(n){n.range[0]<=e&&e<n.range[1]?t=n:this.skip()},leave:function(e){e===t&&this.break()}}),t},u.getScope=function(){var e=D.parents(),t=C[0];if(e.length){var n=D.current();["FunctionDeclaration","FunctionExpression","ArrowFunctionExpression","SwitchStatement"].indexOf(n.type)>=0&&e.push(n);for(var r=e.length-1;r>=0;--r)if(t=P.acquire(e[r]))return"function-expression-name"===t.type?t.childScopes[0]:t}return C[0]},u.markVariableAsUsed=function(e){var t,n,r,i=this.getScope(),o=S.ecmaFeatures.globalReturn||S.ecmaFeatures.modules;"global"===i.type&&o&&(i=i.childScopes[0]);do for(t=i.variables,n=0,r=t.length;r>n;n++)if(t[n].name===e)return t[n].eslintUsed=!0,!0;while(i=i.upper);return!1},u.getFilename=function(){return"string"==typeof I?I:"<input>"};var R=u.defineRule=function(e,t){g.define(e,t)};return u.defineRules=function(e){Object.getOwnPropertyNames(e).forEach(function(t){R(t,e[t])})},u.defaults=function(){return e("../conf/eslint.json")},u}()},{"../conf/environments":1,"../conf/eslint.json":2,"./config-validator":145,"./rule-context":148,"./rules":149,"./timing":318,"./token-store.js":319,"./util":320,"escape-string-regexp":20,escope:22,"estraverse-fb":131,events:6,"object-assign":144}],147:[function(e,t){t.exports=function(){var t=Object.create(null);return t["accessor-pairs"]=e("./rules/accessor-pairs"),t["array-bracket-spacing"]=e("./rules/array-bracket-spacing"),t["block-scoped-var"]=e("./rules/block-scoped-var"),t["brace-style"]=e("./rules/brace-style"),t.camelcase=e("./rules/camelcase"),t["comma-dangle"]=e("./rules/comma-dangle"),t["comma-spacing"]=e("./rules/comma-spacing"),t["comma-style"]=e("./rules/comma-style"),t.complexity=e("./rules/complexity"),t["computed-property-spacing"]=e("./rules/computed-property-spacing"),t["consistent-return"]=e("./rules/consistent-return"),t["consistent-this"]=e("./rules/consistent-this"),t.curly=e("./rules/curly"),t["default-case"]=e("./rules/default-case"),t["dot-location"]=e("./rules/dot-location"),t["dot-notation"]=e("./rules/dot-notation"),t["eol-last"]=e("./rules/eol-last"),t.eqeqeq=e("./rules/eqeqeq"),t["func-names"]=e("./rules/func-names"),t["func-style"]=e("./rules/func-style"),t["generator-star-spacing"]=e("./rules/generator-star-spacing"),t["generator-star"]=e("./rules/generator-star"),t["global-strict"]=e("./rules/global-strict"),t["guard-for-in"]=e("./rules/guard-for-in"),t["handle-callback-err"]=e("./rules/handle-callback-err"),t.indent=e("./rules/indent"),t["key-spacing"]=e("./rules/key-spacing"),t["linebreak-style"]=e("./rules/linebreak-style"),t["lines-around-comment"]=e("./rules/lines-around-comment"),t["max-depth"]=e("./rules/max-depth"),t["max-len"]=e("./rules/max-len"),t["max-nested-callbacks"]=e("./rules/max-nested-callbacks"),t["max-params"]=e("./rules/max-params"),t["max-statements"]=e("./rules/max-statements"),t["new-cap"]=e("./rules/new-cap"),t["new-parens"]=e("./rules/new-parens"),t["newline-after-var"]=e("./rules/newline-after-var"),t["no-alert"]=e("./rules/no-alert"),t["no-array-constructor"]=e("./rules/no-array-constructor"),t["no-bitwise"]=e("./rules/no-bitwise"),t["no-caller"]=e("./rules/no-caller"),t["no-catch-shadow"]=e("./rules/no-catch-shadow"),t["no-comma-dangle"]=e("./rules/no-comma-dangle"),t["no-cond-assign"]=e("./rules/no-cond-assign"),t["no-console"]=e("./rules/no-console"),t["no-constant-condition"]=e("./rules/no-constant-condition"),t["no-continue"]=e("./rules/no-continue"),t["no-control-regex"]=e("./rules/no-control-regex"),t["no-debugger"]=e("./rules/no-debugger"),t["no-delete-var"]=e("./rules/no-delete-var"),t["no-div-regex"]=e("./rules/no-div-regex"),t["no-dupe-args"]=e("./rules/no-dupe-args"),t["no-dupe-keys"]=e("./rules/no-dupe-keys"),t["no-duplicate-case"]=e("./rules/no-duplicate-case"),t["no-else-return"]=e("./rules/no-else-return"),t["no-empty-character-class"]=e("./rules/no-empty-character-class"),t["no-empty-class"]=e("./rules/no-empty-class"),t["no-empty-label"]=e("./rules/no-empty-label"),t["no-empty"]=e("./rules/no-empty"),t["no-eq-null"]=e("./rules/no-eq-null"),t["no-eval"]=e("./rules/no-eval"),t["no-ex-assign"]=e("./rules/no-ex-assign"),t["no-extend-native"]=e("./rules/no-extend-native"),t["no-extra-bind"]=e("./rules/no-extra-bind"),t["no-extra-boolean-cast"]=e("./rules/no-extra-boolean-cast"),t["no-extra-parens"]=e("./rules/no-extra-parens"),t["no-extra-semi"]=e("./rules/no-extra-semi"),t["no-extra-strict"]=e("./rules/no-extra-strict"),t["no-fallthrough"]=e("./rules/no-fallthrough"),t["no-floating-decimal"]=e("./rules/no-floating-decimal"),t["no-func-assign"]=e("./rules/no-func-assign"),t["no-implied-eval"]=e("./rules/no-implied-eval"),t["no-inline-comments"]=e("./rules/no-inline-comments"),t["no-inner-declarations"]=e("./rules/no-inner-declarations"),t["no-invalid-regexp"]=e("./rules/no-invalid-regexp"),t["no-irregular-whitespace"]=e("./rules/no-irregular-whitespace"),t["no-iterator"]=e("./rules/no-iterator"),t["no-label-var"]=e("./rules/no-label-var"),t["no-labels"]=e("./rules/no-labels"),t["no-lone-blocks"]=e("./rules/no-lone-blocks"),t["no-lonely-if"]=e("./rules/no-lonely-if"),t["no-loop-func"]=e("./rules/no-loop-func"),t["no-mixed-requires"]=e("./rules/no-mixed-requires"),t["no-mixed-spaces-and-tabs"]=e("./rules/no-mixed-spaces-and-tabs"),t["no-multi-spaces"]=e("./rules/no-multi-spaces"),t["no-multi-str"]=e("./rules/no-multi-str"),t["no-multiple-empty-lines"]=e("./rules/no-multiple-empty-lines"),t["no-native-reassign"]=e("./rules/no-native-reassign"),t["no-negated-in-lhs"]=e("./rules/no-negated-in-lhs"),t["no-nested-ternary"]=e("./rules/no-nested-ternary"),t["no-new-func"]=e("./rules/no-new-func"),t["no-new-object"]=e("./rules/no-new-object"),t["no-new-require"]=e("./rules/no-new-require"),t["no-new-wrappers"]=e("./rules/no-new-wrappers"),t["no-new"]=e("./rules/no-new"),t["no-obj-calls"]=e("./rules/no-obj-calls"),t["no-octal-escape"]=e("./rules/no-octal-escape"),t["no-octal"]=e("./rules/no-octal"),t["no-param-reassign"]=e("./rules/no-param-reassign"),t["no-path-concat"]=e("./rules/no-path-concat"),t["no-plusplus"]=e("./rules/no-plusplus"),t["no-process-env"]=e("./rules/no-process-env"),t["no-process-exit"]=e("./rules/no-process-exit"),t["no-proto"]=e("./rules/no-proto"),t["no-redeclare"]=e("./rules/no-redeclare"),t["no-regex-spaces"]=e("./rules/no-regex-spaces"),t["no-reserved-keys"]=e("./rules/no-reserved-keys"),t["no-restricted-modules"]=e("./rules/no-restricted-modules"),t["no-return-assign"]=e("./rules/no-return-assign"),t["no-script-url"]=e("./rules/no-script-url"),t["no-self-compare"]=e("./rules/no-self-compare"),t["no-sequences"]=e("./rules/no-sequences"),t["no-shadow-restricted-names"]=e("./rules/no-shadow-restricted-names"),t["no-shadow"]=e("./rules/no-shadow"),t["no-space-before-semi"]=e("./rules/no-space-before-semi"),t["no-spaced-func"]=e("./rules/no-spaced-func"),t["no-sparse-arrays"]=e("./rules/no-sparse-arrays"),t["no-sync"]=e("./rules/no-sync"),t["no-ternary"]=e("./rules/no-ternary"),t["no-throw-literal"]=e("./rules/no-throw-literal"),t["no-trailing-spaces"]=e("./rules/no-trailing-spaces"),t["no-undef-init"]=e("./rules/no-undef-init"),t["no-undef"]=e("./rules/no-undef"),t["no-undefined"]=e("./rules/no-undefined"),t["no-underscore-dangle"]=e("./rules/no-underscore-dangle"),t["no-unneeded-ternary"]=e("./rules/no-unneeded-ternary"),t["no-unreachable"]=e("./rules/no-unreachable"),t["no-unused-expressions"]=e("./rules/no-unused-expressions"),t["no-unused-vars"]=e("./rules/no-unused-vars"),t["no-use-before-define"]=e("./rules/no-use-before-define"),t["no-var"]=e("./rules/no-var"),t["no-void"]=e("./rules/no-void"),t["no-warning-comments"]=e("./rules/no-warning-comments"),t["no-with"]=e("./rules/no-with"),t["no-wrap-func"]=e("./rules/no-wrap-func"),t["object-curly-spacing"]=e("./rules/object-curly-spacing"),t["object-shorthand"]=e("./rules/object-shorthand"),t["one-var"]=e("./rules/one-var"),t["operator-assignment"]=e("./rules/operator-assignment"),t["operator-linebreak"]=e("./rules/operator-linebreak"),t["padded-blocks"]=e("./rules/padded-blocks"),t["prefer-const"]=e("./rules/prefer-const"),t["quote-props"]=e("./rules/quote-props"),t.quotes=e("./rules/quotes"),t.radix=e("./rules/radix"),t["semi-spacing"]=e("./rules/semi-spacing"),t.semi=e("./rules/semi"),t["sort-vars"]=e("./rules/sort-vars"),t["space-after-function-name"]=e("./rules/space-after-function-name"),t["space-after-keywords"]=e("./rules/space-after-keywords"),t["space-before-blocks"]=e("./rules/space-before-blocks"),t["space-before-function-paren"]=e("./rules/space-before-function-paren"),t["space-before-function-parentheses"]=e("./rules/space-before-function-parentheses"),t["space-in-brackets"]=e("./rules/space-in-brackets"),t["space-in-parens"]=e("./rules/space-in-parens"),t["space-infix-ops"]=e("./rules/space-infix-ops"),t["space-return-throw-case"]=e("./rules/space-return-throw-case"),t["space-unary-ops"]=e("./rules/space-unary-ops"),t["spaced-comment"]=e("./rules/spaced-comment"),t["spaced-line-comment"]=e("./rules/spaced-line-comment"),t.strict=e("./rules/strict"),t["use-isnan"]=e("./rules/use-isnan"),t["valid-jsdoc"]=e("./rules/valid-jsdoc"),t["valid-typeof"]=e("./rules/valid-typeof"),t["vars-on-top"]=e("./rules/vars-on-top"),t["wrap-iife"]=e("./rules/wrap-iife"),t["wrap-regex"]=e("./rules/wrap-regex"),t.yoda=e("./rules/yoda"),t
}},{"./rules/accessor-pairs":150,"./rules/array-bracket-spacing":151,"./rules/block-scoped-var":152,"./rules/brace-style":153,"./rules/camelcase":154,"./rules/comma-dangle":155,"./rules/comma-spacing":156,"./rules/comma-style":157,"./rules/complexity":158,"./rules/computed-property-spacing":159,"./rules/consistent-return":160,"./rules/consistent-this":161,"./rules/curly":162,"./rules/default-case":163,"./rules/dot-location":164,"./rules/dot-notation":165,"./rules/eol-last":166,"./rules/eqeqeq":167,"./rules/func-names":168,"./rules/func-style":169,"./rules/generator-star":171,"./rules/generator-star-spacing":170,"./rules/global-strict":172,"./rules/guard-for-in":173,"./rules/handle-callback-err":174,"./rules/indent":175,"./rules/key-spacing":176,"./rules/linebreak-style":177,"./rules/lines-around-comment":178,"./rules/max-depth":179,"./rules/max-len":180,"./rules/max-nested-callbacks":181,"./rules/max-params":182,"./rules/max-statements":183,"./rules/new-cap":184,"./rules/new-parens":185,"./rules/newline-after-var":186,"./rules/no-alert":187,"./rules/no-array-constructor":188,"./rules/no-bitwise":189,"./rules/no-caller":190,"./rules/no-catch-shadow":191,"./rules/no-comma-dangle":192,"./rules/no-cond-assign":193,"./rules/no-console":194,"./rules/no-constant-condition":195,"./rules/no-continue":196,"./rules/no-control-regex":197,"./rules/no-debugger":198,"./rules/no-delete-var":199,"./rules/no-div-regex":200,"./rules/no-dupe-args":201,"./rules/no-dupe-keys":202,"./rules/no-duplicate-case":203,"./rules/no-else-return":204,"./rules/no-empty":208,"./rules/no-empty-character-class":205,"./rules/no-empty-class":206,"./rules/no-empty-label":207,"./rules/no-eq-null":209,"./rules/no-eval":210,"./rules/no-ex-assign":211,"./rules/no-extend-native":212,"./rules/no-extra-bind":213,"./rules/no-extra-boolean-cast":214,"./rules/no-extra-parens":215,"./rules/no-extra-semi":216,"./rules/no-extra-strict":217,"./rules/no-fallthrough":218,"./rules/no-floating-decimal":219,"./rules/no-func-assign":220,"./rules/no-implied-eval":221,"./rules/no-inline-comments":222,"./rules/no-inner-declarations":223,"./rules/no-invalid-regexp":224,"./rules/no-irregular-whitespace":225,"./rules/no-iterator":226,"./rules/no-label-var":227,"./rules/no-labels":228,"./rules/no-lone-blocks":229,"./rules/no-lonely-if":230,"./rules/no-loop-func":231,"./rules/no-mixed-requires":232,"./rules/no-mixed-spaces-and-tabs":233,"./rules/no-multi-spaces":234,"./rules/no-multi-str":235,"./rules/no-multiple-empty-lines":236,"./rules/no-native-reassign":237,"./rules/no-negated-in-lhs":238,"./rules/no-nested-ternary":239,"./rules/no-new":244,"./rules/no-new-func":240,"./rules/no-new-object":241,"./rules/no-new-require":242,"./rules/no-new-wrappers":243,"./rules/no-obj-calls":245,"./rules/no-octal":247,"./rules/no-octal-escape":246,"./rules/no-param-reassign":248,"./rules/no-path-concat":249,"./rules/no-plusplus":250,"./rules/no-process-env":251,"./rules/no-process-exit":252,"./rules/no-proto":253,"./rules/no-redeclare":254,"./rules/no-regex-spaces":255,"./rules/no-reserved-keys":256,"./rules/no-restricted-modules":257,"./rules/no-return-assign":258,"./rules/no-script-url":259,"./rules/no-self-compare":260,"./rules/no-sequences":261,"./rules/no-shadow":263,"./rules/no-shadow-restricted-names":262,"./rules/no-space-before-semi":264,"./rules/no-spaced-func":265,"./rules/no-sparse-arrays":266,"./rules/no-sync":267,"./rules/no-ternary":268,"./rules/no-throw-literal":269,"./rules/no-trailing-spaces":270,"./rules/no-undef":272,"./rules/no-undef-init":271,"./rules/no-undefined":273,"./rules/no-underscore-dangle":274,"./rules/no-unneeded-ternary":275,"./rules/no-unreachable":276,"./rules/no-unused-expressions":277,"./rules/no-unused-vars":278,"./rules/no-use-before-define":279,"./rules/no-var":280,"./rules/no-void":281,"./rules/no-warning-comments":282,"./rules/no-with":283,"./rules/no-wrap-func":284,"./rules/object-curly-spacing":285,"./rules/object-shorthand":286,"./rules/one-var":287,"./rules/operator-assignment":288,"./rules/operator-linebreak":289,"./rules/padded-blocks":290,"./rules/prefer-const":291,"./rules/quote-props":292,"./rules/quotes":293,"./rules/radix":294,"./rules/semi":296,"./rules/semi-spacing":295,"./rules/sort-vars":297,"./rules/space-after-function-name":298,"./rules/space-after-keywords":299,"./rules/space-before-blocks":300,"./rules/space-before-function-paren":301,"./rules/space-before-function-parentheses":302,"./rules/space-in-brackets":303,"./rules/space-in-parens":304,"./rules/space-infix-ops":305,"./rules/space-return-throw-case":306,"./rules/space-unary-ops":307,"./rules/spaced-comment":308,"./rules/spaced-line-comment":309,"./rules/strict":310,"./rules/use-isnan":311,"./rules/valid-jsdoc":312,"./rules/valid-typeof":313,"./rules/vars-on-top":314,"./rules/wrap-iife":315,"./rules/wrap-regex":316,"./rules/yoda":317}],148:[function(e,t){"use strict";function n(e,t,n,i,o,a){Object.defineProperty(this,"id",{value:e}),Object.defineProperty(this,"options",{value:i}),Object.defineProperty(this,"settings",{value:o}),Object.defineProperty(this,"ecmaFeatures",{value:Object.create(a)}),Object.freeze(this.ecmaFeatures),r.forEach(function(e){this[e]=function(){return t[e].apply(t,arguments)}},this),this.report=function(r,i,o,a){t.report(e,n,r,i,o,a)}}var r=["getAllComments","getAncestors","getComments","getFilename","getFirstToken","getFirstTokens","getJSDocComment","getLastToken","getLastTokens","getNodeByRangeIndex","getScope","getSource","getSourceLines","getTokenAfter","getTokenBefore","getTokenByRangeStart","getTokens","getTokensAfter","getTokensBefore","getTokensBetween","markVariableAsUsed","isMarkedAsUsed"];n.prototype={constructor:n},t.exports=n},{}],149:[function(e,t,n){"use strict";function r(e,t){a[e]=t}function i(e){var t=o(e);Object.keys(t).forEach(function(e){r(e,t[e])})}var o=e("./load-rules"),a=Object.create(null);n.define=r,n.load=i,n.import=function(e,t){Object.keys(e).forEach(function(n){var i=t+"/"+n,o=e[n];r(i,o)})},n.get=function(e){return a[e]},n.testClear=function(){a=Object.create(null)},i()},{"./load-rules":147}],150:[function(e,t){"use strict";t.exports=function(e){function t(t){for(var n=!1,o=!1,a=t.properties.length,s=0;a>s;s++){var u="init"===t.properties[s].kind?t.properties[s].key.name:t.properties[s].kind;switch(u){case"set":n=!0;break;case"get":o=!0}if(n&&o)break}i&&n&&!o?e.report(t,"Getter is not present"):r&&o&&!n&&e.report(t,"Setter is not present")}var n=e.options[0]||{},r=n.getWithoutSet===!0,i=n.setWithoutGet!==!1;return{ObjectExpression:function(e){(i||r)&&t(e)}}}},{}],151:[function(e,t){"use strict";t.exports=function(e){function t(t){return null!=e.options[1]?e.options[1][t]===!c:!1}function n(e,t){return e.range[1]<t.range[0]}function r(e,t){return e.loc.start.line===t.loc.start.line}function i(t,n){e.report(t,n.loc.start,"There should be no space after '"+n.value+"'")}function o(t,n){e.report(t,n.loc.start,"There should be no space before '"+n.value+"'")}function a(t,n){e.report(t,n.loc.start,"A space is required after '"+n.value+"'")}function s(t,n){e.report(t,n.loc.start,"A space is required before '"+n.value+"'")}function u(t){if(0!==t.elements.length){var u=e.getFirstToken(t),c=e.getFirstToken(t,1),p=e.getLastToken(t,1),f=e.getLastToken(t),d=l.objectsInArraysException&&"{"===c.value||l.arraysInArraysException&&"["===c.value||l.singleElementException&&1===t.elements.length?!l.spaced:l.spaced,h=l.objectsInArraysException&&"}"===p.value||l.arraysInArraysException&&"]"===p.value||l.singleElementException&&1===t.elements.length?!l.spaced:l.spaced;r(u,c)&&(d&&!n(u,c)&&a(t,u),!d&&n(u,c)&&i(t,u)),r(p,f)&&(h&&!n(p,f)&&s(t,f),!h&&n(p,f)&&o(t,f))}}var c="always"===e.options[0],l={spaced:c,singleElementException:t("singleValue"),objectsInArraysException:t("objectsInArrays"),arraysInArraysException:t("arraysInArrays")};return{ArrayPattern:u,ArrayExpression:u}},t.exports.schema=[{"enum":["always","never"]},{type:"object",properties:{singleValue:{type:"boolean"},objectsInArrays:{type:"boolean"},arraysInArrays:{type:"boolean"}},additionalProperties:!1}]},{}],152:[function(e,t){"use strict";t.exports=function(e){function t(e,t){switch(t.type){case"FunctionDeclaration":case"FunctionExpression":return t.params.indexOf(e)>-1||e===t.id;case"VariableDeclarator":return e===t.id;case"CatchClause":return e===t.param;default:return!1}}function n(e,t){switch(t.type){case"MemberExpression":return e===t.property&&!t.computed;case"Property":return e===t.key;default:return!1}}function r(){h.push([])}function i(){h.pop()}function o(e){[].push.apply(h[h.length-1],e)}function a(e){o([e.local.name]),e.imported&&e.imported.name!==e.local.name&&o([e.imported.name])}function s(e){e.id&&o([e.id.name]),r()}function u(e){r(),o([e.key.name])}function c(e){var t=[];switch(e.type){case"Identifier":t.push(e.name);break;case"ObjectPattern":e.properties.forEach(function(e){t.push(e.key.name),e.value&&t.push(e.value.name)});break;case"ArrayPattern":e.elements.forEach(function(e){e&&t.push(e.name)});break;case"AssignmentPattern":c(e.left);break;case"RestElement":c(e.argument)}o(t)}function l(e){r(),e.params.forEach(function(e){c(e)}),o(e.rest?[e.rest.name]:[]),o(["arguments"])}function p(e){o(e.id?[e.id.name]:[]),l(e)}function f(e){l(e),o(e.id?[e.id.name]:[])}function d(e){e.declarations.forEach(function(e){c(e.id)})}var h=[];return{Program:function(){var t=e.getScope();h=[t.variables.map(function(e){return e.name})],e.ecmaFeatures.globalReturn&&(t=t.childScopes[0],h.push(t.variables.map(function(e){return e.name})))},ImportSpecifier:a,ImportDefaultSpecifier:a,ImportNamespaceSpecifier:a,BlockStatement:function(e){var t=e.body;r(),t.forEach(function(e){"VariableDeclaration"===e.type?d(e):"FunctionDeclaration"===e.type&&o([e.id.name])})},VariableDeclaration:function(e){d(e)},"BlockStatement:exit":i,CatchClause:function(e){r(),o([e.param.name])},"CatchClause:exit":i,FunctionDeclaration:p,"FunctionDeclaration:exit":i,ClassDeclaration:s,"ClassDeclaration:exit":i,ClassExpression:s,"ClassExpression:exit":i,MethodDefinition:u,"MethodDefinition:exit":i,FunctionExpression:f,"FunctionExpression:exit":i,ArrowFunctionExpression:l,"ArrowFunctionExpression:exit":i,ForStatement:function(){r()},"ForStatement:exit":i,ForInStatement:function(){r()},"ForInStatement:exit":i,ForOfStatement:function(){r()},"ForOfStatement:exit":i,Identifier:function(r){var i=e.getAncestors().pop();if(!t(r,i)&&!n(r,i)&&"LabeledStatement"!==i.type){for(var o=0,a=h.length;a>o;o++)if(h[o].indexOf(r.name)>-1)return;e.report(r,'"'+r.name+'" used outside of binding context.')}}}},t.exports.schema=[]},{}],153:[function(e,t){"use strict";t.exports=function(e){function t(e){return e&&"BlockStatement"===e.type}function n(e){return"{"===e.value||"}"===e.value}function r(){var n=arguments;return function(r){[].forEach.call(n,function(n){var i,o,a,s,u=r[n];u=r[n],t(u)&&(i=e.getTokenBefore(u),o=e.getFirstToken(u),a=e.getLastToken(u),s=o.loc.start.line===a.loc.start.line,i.loc.start.line!==o.loc.start.line?e.report(r,l):u.body.length&&c.allowSingleLine?o.loc.start.line!==u.body[0].loc.start.line||s?a.loc.start.line!==u.body[u.body.length-1].loc.start.line||s||e.report(u.body[u.body.length-1],d):e.report(u.body[0],p):u.body.length&&o.loc.start.line===u.body[0].loc.start.line&&e.report(u.body[0],p))})}}function i(i){var o,a=!1,s=!1;r("consequent","alternate")(i),i.alternate&&(a=t(i.alternate),s="IfStatement"===i.alternate.type&&t(i.alternate.consequent),(a||s)&&(o=e.getTokensBefore(i.alternate,2),"1tbs"===u?o[0].loc.start.line!==o[1].loc.start.line&&n(o[0])&&e.report(i.alternate,f):"stroustrup"===u&&o[0].loc.start.line===o[1].loc.start.line&&e.report(i.alternate,h)))}function o(n){var i;r("block","finalizer")(n),t(n.finalizer)&&(i=e.getTokensBefore(n.finalizer,2),"1tbs"===u?i[0].loc.start.line!==i[1].loc.start.line&&e.report(n.finalizer,f):"stroustrup"===u&&i[0].loc.start.line===i[1].loc.start.line&&e.report(n.finalizer,h))}function a(n){var i=e.getTokenBefore(n),o=e.getFirstToken(n);r("body")(n),t(n.body)&&("1tbs"===u?i.loc.start.line!==o.loc.start.line&&e.report(n,f):"stroustrup"===u&&i.loc.start.line===o.loc.start.line&&e.report(n,h))}function s(t){var n;t.cases&&t.cases.length?(n=e.getTokensBefore(t.cases[0],2),n[0].loc.start.line!==n[1].loc.start.line&&e.report(t,l)):(n=e.getLastTokens(t,3),n[0].loc.start.line!==n[1].loc.start.line&&e.report(t,l))}var u=e.options[0]||"1tbs",c=e.options[1]||{},l="Opening curly brace does not appear on the same line as controlling statement.",p="Statement inside of curly braces should be on next line.",f="Closing curly brace does not appear on the same line as the subsequent block.",d="Closing curly brace should be on the same line as opening curly brace or on the line after the previous block.",h="Closing curly brace appears on the same line as the subsequent block.";return{FunctionDeclaration:r("body"),FunctionExpression:r("body"),ArrowFunctionExpression:r("body"),IfStatement:i,TryStatement:o,CatchClause:a,DoWhileStatement:r("body"),WhileStatement:r("body"),WithStatement:r("body"),ForStatement:r("body"),ForInStatement:r("body"),ForOfStatement:r("body"),SwitchStatement:s}},t.exports.schema=[{"enum":["1tbs","stroustrup"]},{type:"object",properties:{allowSingleLine:{type:"boolean"}},additionalProperties:!1}]},{}],154:[function(e,t){"use strict";t.exports=function(e){function t(e){return e.indexOf("_")>-1&&e!==e.toUpperCase()}function n(t){e.report(t,"Identifier '{{name}}' is not in camel case.",{name:t.name})}var r=e.options[0]||{},i=r.properties||"";return"always"!==i&&"never"!==i&&(i="always"),{Identifier:function(e){var r=e.name.replace(/^_+|_+$/g,""),o="MemberExpression"===e.parent.type?e.parent.parent:e.parent;if("MemberExpression"===e.parent.type){if("never"===i)return;"Identifier"===e.parent.object.type&&e.parent.object.name===e.name&&t(r)?n(e):"AssignmentExpression"===o.type&&t(r)&&("MemberExpression"!==o.right.type||"MemberExpression"===o.left.type&&o.left.property.name===e.name)&&n(e)}else if("Property"===e.parent.type){if("never"===i)return;t(r)&&"CallExpression"!==o.type&&n(e)}else t(r)&&"CallExpression"!==o.type&&n(e)}}},t.exports.schema=[{type:"object",properties:{properties:{"enum":["always","never"]}},additionalProperties:!1}]},{}],155:[function(e,t){"use strict";t.exports=function(e){function t(t){var a,s,u,c,l=t.properties||t.elements,p=l.length;p&&(s=l[p-1],s&&(u=e.getLastToken(t,1),c=","===u.value,r&&c?e.report(s,u.loc.start,i):"always-multiline"===n?(a=t.loc.end.line!==u.loc.end.line,c&&!a?e.report(s,u.loc.start,i):!c&&a&&e.report(s,u.loc.end,o)):"always"!==n||c||e.report(s,s.loc.end,o)))}var n=e.options[0],r="always-multiline"!==n&&"always"!==n,i="Unexpected trailing comma.",o="Missing trailing comma.";return{ObjectExpression:t,ArrayExpression:t}},t.exports.schema=[{"enum":["always","always-multiline","never"]}]},{}],156:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return u.reduce(function(n,r){return e.range[1]<=r.range[0]&&r.range[1]<=t.range[0]&&(n=n+r.range[1]-r.range[0]),n},0)}function n(n,r){var i=e.getTokensBetween(n,r).length,o=t(n,r);return n.range[1]+i+o<r.range[0]}function r(e,t){return e.loc.end.line===t.loc.start.line}function i(e){return!!e&&"Punctuator"===e.type&&","===e.value}function o(t,n){e.report(t,c[n]?"A space is required "+n+" ','.":"There should be no space "+n+" ','.")}function a(e,t){e.left&&r(e.left,e.comma)&&c.before!==n(e.left,e.comma)&&o(t,"before"),e.right&&r(e.comma,e.right)&&c.after!==n(e.comma,e.right)&&o(t,"after")}function s(e,t){for(var n;l<t.length;){if(n=t[l],n.range[0]<=e&&e<n.range[1])return!0;if(!(e>n.range[1]))break;l++}return!1}var u,c={before:e.options[0]?!!e.options[0].before:!1,after:e.options[0]?!!e.options[0].after:!0},l=0;return{Program:function(){var t,n,r,o=e.getSource(),c=/,/g;for(u=e.getAllComments();c.test(o);)s(c.lastIndex,u)||(t=e.getTokenByRangeStart(c.lastIndex-1),t&&"JSXText"!==t.type&&(n=e.getTokenBefore(t),r=e.getTokenAfter(t),a({comma:t,left:i(n)?null:n,right:i(r)?null:r},t)))}}},t.exports.schema=[{type:"object",properties:{before:{type:"boolean"},after:{type:"boolean"}},additionalProperties:!1}]},{}],157:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.loc.end.line===t.loc.start.line}function n(e){return!!e&&"Punctuator"===e.type&&","===e.value}function r(n,r,i,a){t(r,i)&&t(n,r)||(t(r,i)||t(n,r)?"first"!==o||t(r,i)?"last"===o&&t(r,i)&&e.report(a,{line:r.loc.end.line,column:r.loc.end.column},"',' should be placed last."):e.report(a,"',' should be placed first."):e.report(a,{line:r.loc.end.line,column:r.loc.start.column},"Bad line breaking before and after ','."))}function i(t,i){var o,a=t[i],s="ArrayExpression"===t.type;if((a.length>1||s)&&(o=e.getFirstToken(t),a.forEach(function(t){var i=t?e.getTokenBefore(t):o,a=t?e.getFirstToken(t):e.getTokenAfter(i),s=t||a;n(i)&&r(o,i,a,s),o=t?e.getLastToken(t):o}),s)){var u=e.getLastToken(t),c=e.getTokenBefore(u);n(c)&&r(e.getTokenBefore(c),c,u,u)}}var o=e.options[0]||"last",a={};2===e.options.length&&e.options[1].hasOwnProperty("exceptions")&&(a=e.options[1].exceptions);var s={};return a.VariableDeclaration||(s.VariableDeclaration=function(e){i(e,"declarations")}),a.ObjectExpression||(s.ObjectExpression=function(e){i(e,"properties")}),a.ArrayExpression||(s.ArrayExpression=function(e){i(e,"elements")}),s},t.exports.schema=[{"enum":["first","last"]},{type:"object",properties:{exceptions:{type:"object",additionalProperties:{type:"boolean"}}},additionalProperties:!1}]},{}],158:[function(e,t){"use strict";t.exports=function(e){function t(){s.push(1)}function n(t){var n=s.pop(),r="anonymous";t.id?r=t.id.name:"MethodDefinition"===t.parent.type&&(r=t.parent.key.name),n>a&&e.report(t,"Function '{{name}}' has a complexity of {{complexity}}.",{name:r,complexity:n})}function r(){s.length&&s[s.length-1]++}function i(e){e.test&&r(e)}function o(e){"||"===e.operator&&r(e)}var a=e.options[0],s=[];return{FunctionDeclaration:t,FunctionExpression:t,ArrowFunctionExpression:t,"FunctionDeclaration:exit":n,"FunctionExpression:exit":n,"ArrowFunctionExpression:exit":n,CatchClause:r,ConditionalExpression:r,LogicalExpression:o,ForStatement:r,ForInStatement:r,ForOfStatement:r,IfStatement:r,SwitchCase:i,WhileStatement:r,DoWhileStatement:r}},t.exports.schema=[{type:"integer"}]},{}],159:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.range[1]<t.range[0]}function n(e,t){return e.loc.start.line===t.loc.start.line}function r(t,n){e.report(t,n.loc.start,"There should be no space after '"+n.value+"'")}function i(t,n){e.report(t,n.loc.start,"There should be no space before '"+n.value+"'")}function o(t,n){e.report(t,n.loc.start,"A space is required after '"+n.value+"'")}function a(t,n){e.report(t,n.loc.start,"A space is required before '"+n.value+"'")}function s(s){return function(c){if(c.computed){var l=c[s],p=e.getTokenBefore(l),f=e.getFirstToken(l),d=e.getLastToken(l),h=e.getTokenAfter(l);n(p,f)&&(u?!t(p,f)&&n(p,f)&&o(c,p):t(p,f)&&r(c,p)),n(d,h)&&(u?!t(d,h)&&n(d,h)&&a(c,h):t(d,h)&&i(c,h))}}}var u="always"===e.options[0];return{Property:s("key"),MemberExpression:s("property")}},t.exports.schema=[{"enum":["always","never"]}]},{}],160:[function(e,t){"use strict";t.exports=function(e){function t(){r.push({})}function n(){r.pop()}var r=[];return{Program:t,FunctionDeclaration:t,FunctionExpression:t,ArrowFunctionExpression:t,"Program:exit":n,"FunctionDeclaration:exit":n,"FunctionExpression:exit":n,"ArrowFunctionExpression:exit":n,ReturnStatement:function(t){var n=r[r.length-1],i="type"in n;i?n.type!==!!t.argument&&e.report(t,"Expected "+(n.type?"a":"no")+" return value."):n.type=!!t.argument}}},t.exports.schema=[]},{}],161:[function(e,t){"use strict";t.exports=function(e){function t(t){e.report(t,"Designated alias '{{alias}}' is not assigned to 'this'.",{alias:i})}function n(n,r,o){var a="ThisExpression"===o.type;r===i?(!a||n.operator&&"="!==n.operator)&&t(n):a&&e.report(n,"Unexpected alias '{{name}}' for 'this'.",{name:r})}function r(){var n=e.getScope();n.variables.some(function(e){var r;return e.name===i?e.defs.some(function(e){return"VariableDeclarator"===e.node.type&&null!==e.node.init})?!0:(r="global"===n.type?n:e,r.references.some(function(e){var t=e.writeExpr;return e.from===n&&t&&"ThisExpression"===t.type&&"="===t.parent.operator?!0:void 0})||e.defs.map(function(e){return e.node}).forEach(t),!0):void 0})}var i=e.options[0];return{"Program:exit":r,"FunctionExpression:exit":r,"FunctionDeclaration:exit":r,VariableDeclarator:function(e){var t=e.id,r="ArrayPattern"===t.type||"ObjectPattern"===t.type;null===e.init||r||n(e,t.name,e.init)},AssignmentExpression:function(e){"Identifier"===e.left.type&&n(e,e.left.name,e.right)}}},t.exports.schema=[{type:"string"}]},{}],162:[function(e,t){"use strict";t.exports=function(e){function t(t){var n=e.getTokenBefore(t),r=e.getLastToken(t);return n.loc.start.line===r.loc.end.line}function n(n,o,a,s){var u="BlockStatement"===o.type;r?u&&1===o.body.length&&e.report(n,"Unnecessary { after '{{name}}'{{suffix}}.",{name:a,suffix:s?" "+s:""}):i?u||t(o)||e.report(n,"Expected { after '{{name}}'{{suffix}}.",{name:a,suffix:s?" "+s:""}):u||e.report(n,"Expected { after '{{name}}'{{suffix}}.",{name:a,suffix:s?" "+s:""})}var r="multi"===e.options[0],i="multi-line"===e.options[0];return{IfStatement:function(e){n(e,e.consequent,"if","condition"),e.alternate&&"IfStatement"!==e.alternate.type&&n(e,e.alternate,"else")},WhileStatement:function(e){n(e,e.body,"while","condition")},DoWhileStatement:function(e){n(e,e.body,"do")},ForStatement:function(e){n(e,e.body,"for","condition")}}},t.exports.schema=[{"enum":["all","multi","multi-line"]}]},{}],163:[function(e,t){"use strict";var n="no default";t.exports=function(e){function t(e){return e[e.length-1]}return{SwitchStatement:function(r){if(r.cases.length){var i=r.cases.some(function(e){return null===e.test});if(!i){var o,a,s=t(r.cases);a=e.getComments(s).trailing,a.length&&(o=t(a)),o&&o.value.trim()===n||e.report(r,"Expected a default case.")}}}}},t.exports.schema=[]},{}],164:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.loc.end.line===t.loc.start.line}function n(n,r,i){var a=e.getTokenBefore(r);"Punctuator"===a.type&&"."===a.value&&(o?t(n,a)||e.report(i,a.loc.start,"Expected dot to be on same line as object."):t(a,r)||e.report(i,a.loc.start,"Expected dot to be on same line as property."))}function r(e){n(e.object,e.property,e)}var i=e.options[0],o="object"===i||!i;return{MemberExpression:r}}},{}],165:[function(e,t){"use strict";var n=/^[a-zA-Z_$][a-zA-Z0-9_$]*$/,r=["this","function","if","return","var","else","for","new","in","typeof","while","case","break","try","catch","delete","throw","switch","continue","default","instanceof","do","void","finally","with","debugger","implements","interface","package","private","protected","public","static","class","enum","export","extends","import","super","true","false","null","abstract","boolean","byte","char","const","double","final","float","goto","int","long","native","short","synchronized","throws","transient","volatile"];t.exports=function(e){var t,i=e.options[0]||{},o=void 0===i.allowKeywords||!!i.allowKeywords;return i.allowPattern&&(t=new RegExp(i.allowPattern)),{MemberExpression:function(i){i.computed&&"Literal"===i.property.type&&n.test(i.property.value)&&(o||-1===r.indexOf(""+i.property.value))&&(t&&t.test(i.property.value)||e.report(i,"["+JSON.stringify(i.property.value)+"] is better written in dot notation.")),o||i.computed||-1===r.indexOf(""+i.property.name)||e.report(i,"."+i.property.name+" is a syntax error.")}}},t.exports.schema=[{type:"object",properties:{allowKeywords:{type:"boolean"},allowPattern:{type:"string"}},additionalProperties:!1}]},{}],166:[function(e,t){"use strict";t.exports=function(e){return{Program:function(t){var n=e.getSource(),r={column:1};0!==n.length&&"\n"!==n[n.length-1]&&(r.line=n.split(/\n/g).length,e.report(t,r,"Newline required at end of file but not found."))}}},t.exports.schema=[]},{}],167:[function(e,t){"use strict";t.exports=function(e){function t(e){return"UnaryExpression"===e.type&&"typeof"===e.operator}function n(e){return t(e.left)||t(e.right)}function r(e){return"Literal"===e.left.type&&"Literal"===e.right.type&&typeof e.left.value==typeof e.right.value}function i(e){return"Literal"===e.right.type&&null===e.right.value||"Literal"===e.left.type&&null===e.left.value}function o(t){var n=e.getTokenAfter(t.left);return{line:n.loc.start.line,column:n.loc.start.column}}return{BinaryExpression:function(t){("=="===t.operator||"!="===t.operator)&&("smart"===e.options[0]&&(n(t)||r(t))||i(t)||"allow-null"===e.options[0]&&i(t)||e.report(t,o(t),"Expected '{{op}}=' and instead saw '{{op}}'.",{op:t.operator}))}}},t.exports.schema=[{"enum":["smart","allow-null"]}]},{}],168:[function(e,t){"use strict";t.exports=function(e){function t(){var t=e.getAncestors().pop();return"MethodDefinition"===t.type||"Property"===t.type&&(t.method||"get"===t.kind||"set"===t.kind)}return{FunctionExpression:function(n){var r=n.id&&n.id.name;r||t()||e.report(n,"Missing function expression name.")}}},t.exports.schema=[]},{}],169:[function(e,t){"use strict";t.exports=function(e){var t=e.options[0],n="declaration"===t;return{FunctionDeclaration:function(t){n||e.report(t,"Expected a function expression.")},FunctionExpression:function(){var t=e.getAncestors().pop();n&&"VariableDeclarator"===t.type&&e.report(t,"Expected a function declaration.")},ArrowFunctionExpression:function(){var t=e.getAncestors().pop();n&&"VariableDeclarator"===t.type&&e.report(t,"Expected a function declaration.")}}},t.exports.schema=[{"enum":["declaration","expression"]}]},{}],170:[function(e,t){"use strict";t.exports=function(e){function t(t,n,i){!!(i.range[0]-n.range[1])!==r[t]&&e.report("*"===n.value?n:i,"{{type}} space {{side}} *.",{type:r[t]?"Missing":"Unexpected",side:t})}function n(n){var r,i,o;n.generator&&(i=n.parent.method||"MethodDefinition"===n.parent.type?e.getTokenBefore(n,1):e.getFirstToken(n,1),r=e.getTokenBefore(i),("function"===r.value||"static"===r.value)&&t("before",r,i),o=e.getTokenAfter(i),"Identifier"===o.type&&t("after",i,o))}var r={before:{before:!0,after:!1},after:{before:!1,after:!0},both:{before:!0,after:!0},neither:{before:!1,after:!1}}[e.options[0]||"before"];return{FunctionDeclaration:n,FunctionExpression:n}},t.exports.schema=[{"enum":["before","after","both","neither"]}]},{}],171:[function(e,t){"use strict";t.exports=function(e){function t(t){var r;t.generator&&(e.getAncestors().pop().method||(r=e.getFirstToken(t,1),"end"===n&&r.range[1]!==e.getTokenAfter(r).range[0]&&e.report(t,"Expected a space before *."),"start"===n&&r.range[0]!==e.getTokenBefore(r).range[1]&&e.report(t,"Expected no space before *."),"middle"===n&&(r.range[0]<=e.getTokenBefore(r).range[1]||r.range[1]>=e.getTokenAfter(r).range[0])&&e.report(t,"Expected spaces around *.")))}var n=e.options[0]||"end";return{FunctionDeclaration:t,FunctionExpression:t}},t.exports.schema=[{"enum":["start","middle","end"]}]},{}],172:[function(e,t){"use strict";t.exports=function(e){var t=e.options[0];return"always"===t?{Program:function(t){if(t.body.length>0){var n=t.body[0];("ExpressionStatement"!==n.type||"use strict"!==n.expression.value)&&e.report(t,'Use the global form of "use strict".')}}}:{ExpressionStatement:function(t){var n=e.getAncestors().pop();"use strict"===t.expression.value&&"Program"===n.type&&e.report(t,'Use the function form of "use strict".')}}},t.exports.schema=[{"enum":["always","never"]}]},{}],173:[function(e,t){"use strict";t.exports=function(e){return{ForInStatement:function(t){var n="BlockStatement"===t.body.type?t.body.body[0]:t.body;n&&"IfStatement"!==n.type&&e.report(t,"The body of a for-in should be wrapped in an if statement to filter unwanted properties from the prototype.")}}},t.exports.schema=[]},{}],174:[function(e,t){"use strict";t.exports=function(e){function t(e){var t=e[0];return"^"===t}function n(e){if(t(a)){var n=new RegExp(a);return n.test(e)}return e===a}function r(e){u++;var t=e.params&&e.params[0];t&&n(t.name)&&s.push({handled:!1,depth:u,errorVariableName:t.name})}function i(t){var n=s[s.length-1]||{};n.depth===u&&(s.pop(),n.handled||e.report(t,"Expected error to be handled.")),u--}function o(e){if(s.length>0){var t=s[s.length-1]||{},n=e.name===t.errorVariableName,r=["FunctionDeclaration","ArrowFunctionExpression","FunctionExpression","CatchClause"],i=-1===r.indexOf(e.parent.type);n&&i&&(t.handled=!0)}}var a=e.options[0]||"err",s=[],u=0;return{FunctionDeclaration:r,FunctionExpression:r,ArrowFunctionExpression:r,Identifier:o,"FunctionDeclaration:exit":i,"FunctionExpression:exit":i,"ArrowFunctionExpression:exit":i}},t.exports.schema=[{type:"string"}]},{}],175:[function(e,t){"use strict";t.exports=function(e){function t(e){S[e].check=!0}function n(e){t(e.loc.start.line-1)}function r(e,t){S[e.loc.start.line-1].push.push(t)}function i(e,t){S[e.loc.end.line-1].pop.push(t)}function o(e){S[e.loc.start.line-1].pushAltLine.push(e.loc.end.line-1)}function a(e,n){r(e,n),t(e.loc.end.line-1)}function s(e,t){var n=p(t);n?(null===E&&(E=e.loc.start.column===n.loc.start.column?1:0),i(n,E)):i(e,0)}function u(e){d(e).forEach(function(t){(t.loc.start.line!==e.loc.start.line||"Program"===e.type)&&n(t)})}function c(e,t){var r=e[t];r&&"BlockStatement"===r.type&&n(r)}function l(e){return e.loc.start.line!==e.loc.end.line}function p(e){var t;return e.some(function(e){return"BreakStatement"===e.type?(t=e,!0):void 0}),t}function f(e){var t=e.parent;return"IfStatement"===t.type&&t.alternate===e?e:"DoWhileStatement"===t.type?e:-1===T.indexOf(t.type)?e:t}function d(e){var t=P[e.type];return e[t]}function h(e){var t=new RegExp("[^"+y+"]"),n=b[e].search(t);return-1===n&&(n=b[e].length),n}function m(t){S.forEach(function(n,r){var i=h(r),o=g(n,i);n.check&&i!==o&&(e.report(t,{line:r+1,column:o},"Expected indentation of "+o+" characters."),i=o),n.push.length&&v(n,i)})}function g(e,t){var n=_*Math.max.apply(null,e.pop),r=w.length-1,i=w[r];return Array.isArray(i)||(i=[i]),i=i.map(function(t){return e.pop.length&&(t-=n),t}).reduce(function(e,n){return t===n?n:e}),w[r]=i,e.pop.forEach(function(){w.pop()}),i}function v(e,t){var n=Math.max.apply(null,e.push),r=t+_*n;e.pushAltLine.length&&(r=[r],e.pushAltLine.forEach(function(e){r.push(h(e)+_*n)})),e.push.forEach(function(){w.push(r)})}var y=" ",_=4,x={indentSwitchCase:!1},b=null,w=[0],S=null,E=null;if(e.options.length&&("tab"===e.options[0]?(y="	",_=1):"number"==typeof e.options[0]&&(_=e.options[0]),e.options[1])){var C=e.options[1];x.indentSwitchCase=C.indentSwitchCase===!0}var T=["IfStatement","WhileStatement","DoWhileStatement","ForStatement","ForInStatement","ForOfStatement","FunctionDeclaration","FunctionExpression","ArrowExpression","CatchClause","WithStatement"],P={BlockStatement:"body",Program:"body",ObjectExpression:"properties",ArrayExpression:"elements",SwitchStatement:"cases"};return x.indentSwitchCase&&(P.SwitchCase="consequent"),{Program:function(t){b=e.getSourceLines(),S=b.map(function(){return{push:[],pushAltLine:[],pop:[],check:!1}}),l(t)&&u(t)},"Program:exit":function(e){m(e)},BlockStatement:function(e){l(e)&&(u(e),i(e,1),a(f(e),1))},IfStatement:function(e){c(e,"alternate")},TryStatement:function(e){c(e,"handler"),c(e,"finalizer")},SwitchStatement:function(e){if(l(e)){var t=1,n=d(e);n.length&&e.loc.start.column===n[0].loc.start.column&&(t=0),u(e),i(e,t),a(e,t)}},SwitchCase:function(e){if(x.indentSwitchCase&&l(e)){var t=d(e);(1!==t.length||"BlockStatement"!==t[0].type)&&(r(e,1),n(e),u(e),s(e,t))}},FunctionDeclaration:function(e){o(e)},FunctionExpression:function(e){o(e)}}},t.exports.schema=[{oneOf:[{"enum":["tab"]},{type:"integer"}]},{type:"object",properties:{indentSwitchCase:{type:"boolean"}},additionalProperties:!1}]},{}],176:[function(e,t){"use strict";function n(e){return/[\n\r\u2028\u2029]/.test(e)}function r(e){return e[e.length-1]}function i(e,t){var n,i,o=e.loc.start.line,a=t.loc.start.line;if(1>=a-o)return!0;if(n=t.leadingComments,n&&n[0].loc.start.line-o<=1&&a-r(n).loc.end.line<=1){for(i=1;i<n.length;i++)if(n[i].loc.start.line-n[i-1].loc.end.line>1)return!1;
return!0}return!1}function o(e){return e.loc.end.line===e.loc.start.line}var a={key:'{{error}} space after {{computed}}key "{{key}}".',value:'{{error}} space before value for {{computed}}key "{{key}}".'};t.exports=function(e){function t(t){var n=t.key;return t.computed?e.getSource().slice(n.range[0],n.range[1]):t.key.name||t.key.value}function s(r,i,o,s){var u=o.length-s,c=r.key,l=e.getTokenAfter(c,1),p="key"===i?c.loc.start:l.loc.start;!u||s&&n(o)||e.report(r[i],p,a[i],{error:u>0?"Extra":"Missing",computed:r.computed?"computed ":"",key:t(r)})}function u(t){var n,r,i=t.key;return t.computed?(n=e.getTokenBefore(i),r=e.getTokenAfter(i),r.range[1]-n.range[0]):"Identifier"===i.type?i.name.length:"Literal"===i.type?i.raw.length:void 0}function c(t){var n=/(\s*):(\s*)/.exec(e.getSource().slice(t.key.range[1],t.value.range[0]));return n?{beforeColon:n[1],afterColon:n[2]}:void 0}function l(e){return 1===e.properties.length?[e.properties]:e.properties.reduce(function(e,t){var n=r(e),o=r(n);return!o||i(o,t)?n.push(t):e.push([t]),e},[[]])}function p(e){var t,n,r,i,o=e.length,a=e.map(u),l=Math.max.apply(null,a);for(l+="colon"===g?v:y,t=0;o>t;t++)n=e[t],r=c(n),r&&(i=a[t],"value"===g?(s(n,"key",r.beforeColon,v),s(n,"value",r.afterColon,l-i)):(s(n,"key",r.beforeColon,l-i),s(n,"value",r.afterColon,y)))}function f(e){l(e).forEach(function(e){p(e)})}function d(e){var t=c(e);t&&(s(e,"key",t.beforeColon,v),s(e,"value",t.afterColon,y))}function h(e){for(var t=e.length,n=0;t>n;n++)d(e[n])}var m=e.options[0]||{},g=m.align,v=+!!m.beforeColon,y=+!(m.afterColon===!1);return g?{ObjectExpression:function(e){o(e)?h(e.properties):f(e)}}:{Property:function(e){d(e)}}},t.exports.schema=[{type:"object",properties:{align:{"enum":["colon","value"]},beforeColon:{type:"boolean"},afterColon:{type:"boolean"}},additionalProperties:!1}]},{}],177:[function(e,t){"use strict";t.exports=function(e){var t="Expected linebreaks to be 'LF' but found 'CRLF'.",n="Expected linebreaks to be 'CRLF' but found 'LF'.";return{Program:function(r){var i=e.options[0]||"unix",o="unix"===i,a=e.getSource().match(/\r\n|\r|\n|\u2028|\u2029/g),s=-1;null!==a&&(s=a.indexOf(o?"\r\n":"\n")),-1!==s&&e.report(r,{line:s+1,column:e.getSourceLines()[s].length},o?t:n)}}},t.exports.schema=[{"enum":["unix","windows"]}]},{}],178:[function(e,t){"use strict";function n(e){var t=e.map(function(e,t){return{code:e.trim(),num:t+1}}).filter(function(e){return!e.code}).map(function(e){return e.num});return t}function r(e){var t=[];return e.forEach(function(e){var n=e.loc.start.line,r=e.loc.end.line;t.push(n,r)}),t}function i(e,t){return t.indexOf(e)>-1}t.exports=function(e){function t(t){var n=e.getSourceLines(),r=n[t.loc.start.line-1],i=n[t.loc.end.line-1],o=r.slice(0,t.loc.start.column).trim(),a=i.slice(t.loc.end.column).trim();return!(!o&&!a)}function o(t){var n,r=e.getAncestors();return r.length&&(n=r.pop()),n&&("BlockStatement"===n.type||"BlockStatement"===n.body.type)&&1===t.loc.start.line-n.loc.start.line}function a(t){var n,r=e.getAncestors();return r.length&&(n=r.pop()),n&&("BlockStatement"===n.type||"BlockStatement"===n.body.type)&&1===n.loc.end.line-t.loc.end.line}function s(s,c){var l=e.getSourceLines(),p=l.length+1,f=e.getAllComments(),d=r(f),h=n(l),m=d.concat(h),g=c.after,v=c.before,y=s.loc.start.line-1,_=s.loc.end.line+1,x=t(s),b=u.allowBlockStart&&o(s),w=u.allowBlockEnd&&a(s);1>y&&(v=!1),_>=p&&(g=!1),x||(b||!v||i(y,m)||e.report(s,"Expected line before comment."),w||!g||i(_,m)||e.report(s,"Expected line after comment."))}var u=e.options[0]||{};return u.beforeLineComment=u.beforeLineComment||!1,u.afterLineComment=u.afterLineComment||!1,u.beforeBlockComment="undefined"!=typeof u.beforeBlockComment?u.beforeBlockComment:!0,u.afterBlockComment=u.afterBlockComment||!1,u.allowBlockStart=u.allowBlockStart||!1,u.allowBlockEnd=u.allowBlockEnd||!1,{LineComment:function(e){(u.beforeLineComment||u.afterLineComment)&&s(e,{after:u.afterLineComment,before:u.beforeLineComment})},BlockComment:function(e){(u.beforeBlockComment||u.afterBlockComment)&&s(e,{after:u.afterBlockComment,before:u.beforeBlockComment})}}},t.exports.schema=[{type:"object",properties:{beforeBlockComment:{type:"boolean"},afterBlockComment:{type:"boolean"},beforeLineComment:{type:"boolean"},afterLineComment:{type:"boolean"},allowBlockStart:{type:"boolean"},allowBlockEnd:{type:"boolean"}},additionalProperties:!1}]},{}],179:[function(e,t){"use strict";t.exports=function(e){function t(){o.push(0)}function n(){o.pop()}function r(t){var n=++o[o.length-1];n>a&&e.report(t,"Blocks are nested too deeply ({{depth}}).",{depth:n})}function i(){o[o.length-1]--}var o=[],a=e.options[0]||4;return{Program:t,FunctionDeclaration:t,FunctionExpression:t,ArrowFunctionExpression:t,IfStatement:function(e){"IfStatement"!==e.parent.type&&r(e)},SwitchStatement:r,TryStatement:r,DoWhileStatement:r,WhileStatement:r,WithStatement:r,ForStatement:r,ForInStatement:r,ForOfStatement:r,"IfStatement:exit":i,"SwitchStatement:exit":i,"TryStatement:exit":i,"DoWhileStatement:exit":i,"WhileStatement:exit":i,"WithStatement:exit":i,"ForStatement:exit":i,"ForInStatement:exit":i,"ForOfStatement:exit":i,"FunctionDeclaration:exit":n,"FunctionExpression:exit":n,"ArrowFunctionExpression:exit":n,"Program:exit":n}},t.exports.schema=[{type:"integer"}]},{}],180:[function(e,t){"use strict";t.exports=function(e){function t(e,t){var n="";for(t|=0;t>0;t>>>=1,e+=e)1&t&&(n+=e);return n}function n(t){var n=e.getSourceLines();n.forEach(function(n,r){n.replace(/\t/g,o).length>i&&e.report(t,{line:r+1,col:1},"Line "+(r+1)+" exceeds the maximum line length of "+i+".")})}var r=e.options[1]||4,i=e.options[0]||80,o=t(" ",r);return{Program:n}},t.exports.schema=[{type:"integer",minimum:0},{type:"integer",minimum:0}]},{}],181:[function(e,t){"use strict";t.exports=function(e){function t(t){var n=t.parent;if("CallExpression"===n.type&&i.push(t),i.length>r){var o={num:i.length,max:r};e.report(t,"Too many nested callbacks ({{num}}). Maximum allowed is {{max}}.",o)}}function n(){i.pop()}var r=e.options[0],i=[];return{ArrowFunctionExpression:t,"ArrowFunctionExpression:exit":n,FunctionExpression:t,"FunctionExpression:exit":n}},t.exports.schema=[{type:"integer"}]},{}],182:[function(e,t){"use strict";t.exports=function(e){function t(t){t.params.length>n&&e.report(t,"This function has too many parameters ({{count}}). Maximum allowed is {{max}}.",{count:t.params.length,max:n})}var n=e.options[0]||3;return{FunctionDeclaration:t,ArrowFunctionExpression:t,FunctionExpression:t}},t.exports.schema=[{type:"integer"}]},{}],183:[function(e,t){"use strict";t.exports=function(e){function t(){i.push(0)}function n(t){var n=i.pop();n>o&&e.report(t,"This function has too many statements ({{count}}). Maximum allowed is {{max}}.",{count:n,max:o})}function r(e){i[i.length-1]+=e.body.length}var i=[],o=e.options[0]||10;return{FunctionDeclaration:t,FunctionExpression:t,ArrowFunctionExpression:t,BlockStatement:r,"FunctionDeclaration:exit":n,"FunctionExpression:exit":n,"ArrowFunctionExpression:exit":n}},t.exports.schema=[{type:"integer"}]},{}],184:[function(e,t){"use strict";function n(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)&&!Array.isArray(e[t]))throw new TypeError(t+", if provided, must be an Array");return e[t]||n}function r(e,t){return e[t]=!0,e}function i(e){var t=n(e,"capIsNewExceptions",o);return t!==o&&(t=t.concat(o)),t.reduce(r,{})}var o=["Array","Boolean","Date","Error","Function","Number","Object","RegExp","String","Symbol"];t.exports=function(e){function t(e){var t,n="";return"MemberExpression"===e.callee.type?(t=e.callee.property,"Literal"===t.type&&"string"==typeof t.value?n=t.value:"Identifier"!==t.type||e.callee.computed||(n=t.name)):n=e.callee.name,n}function o(e){var t=e.charAt(0),n=t.toLowerCase(),r=t.toUpperCase();return n===r?"non-alpha":t===n?"lower":"upper"}function a(e,t,n){return e[n]?!0:"UTC"===n&&"MemberExpression"===t.callee.type?"Identifier"===t.callee.object.type&&"Date"===t.callee.object.name:!1}function s(t,n){var r=t.callee;"MemberExpression"===r.type&&(r=r.property),e.report(t,r.loc.start,n)}var u=e.options[0]||{};u.newIsCap=u.newIsCap!==!1,u.capIsNew=u.capIsNew!==!1;var c=n(u,"newIsCapExceptions",[]).reduce(r,{}),l=i(u),p={};return u.newIsCap&&(p.NewExpression=function(e){var n=t(e);if(n){var r=o(n),i="lower"!==r||a(c,e,n);i||s(e,"A constructor name should not start with a lowercase letter.")}}),u.capIsNew&&(p.CallExpression=function(e){var n=t(e);if(n){var r=o(n),i="upper"!==r||a(l,e,n);i||s(e,"A function with a name starting with an uppercase letter should only be used as a constructor.")}}),p},t.exports.schema=[{type:"object",properties:{newIsCap:{type:"boolean"},capIsNew:{type:"boolean"},newIsCapExceptions:{type:"array",items:{type:"string"}},capIsNewExceptions:{type:"array",items:{type:"string"}}},additionalProperties:!1}]},{}],185:[function(e,t){"use strict";t.exports=function(e){return{NewExpression:function(t){var n=e.getTokens(t),r=n.filter(function(e){return"("===e.value||")"===e.value});r.length<2&&e.report(t,"Missing '()' invoking a constructor")}}},t.exports.schema=[]},{}],186:[function(e,t){"use strict";t.exports=function(e){function t(e){return"var"===e||"let"===e||"const"===e}function n(e){return"ForStatement"===e||"ForInStatement"===e||"ForOfStatement"===e}function r(e){return"ExportNamedDeclaration"===e||"ExportSpecifier"===e||"ExportDefaultDeclaration"===e||"ExportAllDeclaration"===e}function i(i){var c,l,p=e.getLastToken(i),f=e.getTokenAfter(i),d=p.loc.end.line+1;f&&(n(i.parent.type)||r(i.parent.type)||"Keyword"===f.type&&t(f.value)||(c=f.loc.start.line>d,l=u.indexOf(d)>=0,"never"===s&&c&&!l&&e.report(i,a,{identifier:i.name}),"always"!==s||c&&!l||e.report(i,o,{identifier:i.name})))}var o="Expected blank line after variable declarations.",a="Unexpected blank line after variable declarations.",s="never"===e.options[0]?"never":"always",u=e.getAllComments().map(function(e){return e.loc.start.line});return{VariableDeclaration:i}},t.exports.schema=[{"enum":["never","always"]}]},{}],187:[function(e,t){"use strict";function n(e){return/^(alert|confirm|prompt)$/.test(e)}function r(e,t,n){e.report(t,"Unexpected {{name}}.",{name:n})}function i(e){return e.computed?"Literal"===e.property.type?e.property.value:void 0:e.property.name}function o(e,t){var n=e.references.filter(function(e){return e.identifier.range[0]===t.range[0]&&e.identifier.range[1]===t.range[1]});return 1===n.length?n[0]:void 0}function a(e,t){return e.variables.some(function(e){return e.name===t&&e.defs.length>0})}function s(e,t,n){var r=o(e,n),i=n.name;return r&&(r.resolved||a(t,i))?!0:!1}function u(e,t,n){return"global"===e.type&&"ThisExpression"===n.type?!0:"window"===n.name?!s(e,t,n):!1}t.exports=function(e){var t;return{Program:function(){t=e.getScope()},CallExpression:function(o){var a,c=o.callee,l=e.getScope();"Identifier"===c.type?(a=c.name,!s(l,t,c)&&n(c.name)&&r(e,o,a)):"MemberExpression"===c.type&&u(l,t,c.object)&&(a=i(c),n(a)&&r(e,o,a))}}},t.exports.schema=[]},{}],188:[function(e,t){"use strict";t.exports=function(e){function t(t){1!==t.arguments.length&&"Identifier"===t.callee.type&&"Array"===t.callee.name&&e.report(t,"The array literal notation [] is preferrable.")}return{CallExpression:t,NewExpression:t}},t.exports.schema=[]},{}],189:[function(e,t){"use strict";t.exports=function(e){function t(t){e.report(t,"Unexpected use of '{{operator}}'.",{operator:t.operator})}function n(e){return-1!==i.indexOf(e.operator)}function r(e){n(e)&&t(e)}var i=["^","|","&","<<",">>",">>>","^=","|=","&=","<<=",">>=",">>>=","~"];return{AssignmentExpression:r,BinaryExpression:r,UnaryExpression:r}},t.exports.schema=[]},{}],190:[function(e,t){"use strict";t.exports=function(e){return{MemberExpression:function(t){var n=t.object.name,r=t.property.name;"arguments"===n&&!t.computed&&r&&r.match(/^calle[er]$/)&&e.report(t,"Avoid arguments.{{property}}.",{property:r})}}},t.exports.schema=[]},{}],191:[function(e,t){"use strict";t.exports=function(e){function t(e,n){var r=e.variables.some(function(e){return e.name===n});return r?!0:e.upper?t(e.upper,n):!1}return{CatchClause:function(n){var r=e.getScope();t(r,n.param.name)&&e.report(n,"Value of '{{name}}' may be overwritten in IE 8 and earlier.",{name:n.param.name})}}},t.exports.schema=[]},{}],192:[function(e,t){"use strict";t.exports=function(e){function t(t){var n,r,i=t.properties||t.elements,o=i.length;o&&(n=i[o-1],n&&(r=e.getLastToken(t,1),","===r.value&&e.report(n,r.loc.start,"Trailing comma.")))}return{ObjectExpression:t,ArrayExpression:t}},t.exports.schema=[]},{}],193:[function(e,t){"use strict";var n={DoWhileStatement:"a 'do...while' statement",ForStatement:"a 'for' statement",IfStatement:"an 'if' statement",WhileStatement:"a 'while' statement"};t.exports=function(e){function t(e){return e.parent&&e.parent.test&&e===e.parent.test}function r(e){for(var n=e;n=n.parent;)if(t(n))return n.parent;return null}function i(t){var n=e.getTokenBefore(t),r=e.getTokenAfter(t);return"("===n.value&&n.range[1]<=t.range[0]&&")"===r.value&&r.range[0]>=t.range[1]}function o(t){var n=e.getTokenBefore(t,1),r=e.getTokenAfter(t,1);return i(t)&&"("===n.value&&n.range[1]<=t.range[0]&&")"===r.value&&r.range[0]>=t.range[1]}function a(t){t.test&&"AssignmentExpression"===t.test.type&&!o(t.test)&&e.report(t,"Expected a conditional expression and instead saw an assignment.")}function s(t){var i=r(t);i&&e.report(i,"Unexpected assignment within {{type}}.",{type:n[i.type]||i.type})}var u=e.options[0]||"except-parens";return"always"===u?{AssignmentExpression:s}:{DoWhileStatement:a,ForStatement:a,IfStatement:a,WhileStatement:a}},t.exports.schema=[{"enum":["except-parens","always"]}]},{}],194:[function(e,t){"use strict";t.exports=function(e){return{MemberExpression:function(t){"console"===t.object.name&&e.report(t,"Unexpected console statement.")}}},t.exports.schema=[]},{}],195:[function(e,t){"use strict";t.exports=function(e){function t(e){switch(e.type){case"Literal":case"ArrowFunctionExpression":case"FunctionExpression":case"ObjectExpression":case"ArrayExpression":return!0;case"UnaryExpression":return t(e.argument);case"BinaryExpression":case"LogicalExpression":return t(e.left)&&t(e.right);case"AssignmentExpression":return"="===e.operator&&t(e.right);case"SequenceExpression":return t(e.expressions[e.expressions.length-1])}return!1}function n(n){n.test&&t(n.test)&&e.report(n,"Unexpected constant condition.")}return{ConditionalExpression:n,IfStatement:n,WhileStatement:n,DoWhileStatement:n,ForStatement:n}},t.exports.schema=[]},{}],196:[function(e,t){"use strict";t.exports=function(e){return{ContinueStatement:function(t){e.report(t,"Unexpected use of continue statement")}}},t.exports.schema=[]},{}],197:[function(e,t){"use strict";t.exports=function(e){function t(t){if(t.value instanceof RegExp)return t.value;if("string"!=typeof t.value)return null;var n=e.getAncestors().pop();if(("NewExpression"===n.type||"CallExpression"===n.type)&&"Identifier"===n.callee.type&&"RegExp"===n.callee.name)try{return new RegExp(t.value)}catch(r){return null}}return{Literal:function(n){var r,i=t(n);i&&(r=i.toString(),/[\x00-\x1f]/.test(r)&&e.report(n,"Unexpected control character in regular expression."))}}},t.exports.schema=[]},{}],198:[function(e,t){"use strict";t.exports=function(e){return{DebuggerStatement:function(t){e.report(t,"Unexpected 'debugger' statement.")}}},t.exports.schema=[]},{}],199:[function(e,t){"use strict";t.exports=function(e){return{UnaryExpression:function(t){"delete"===t.operator&&"Identifier"===t.argument.type&&e.report(t,"Variables should not be deleted.")}}},t.exports.schema=[]},{}],200:[function(e,t){"use strict";t.exports=function(e){return{Literal:function(t){var n=e.getFirstToken(t);"RegularExpression"===n.type&&"="===n.value[1]&&e.report(t,"A regular expression literal can be confused with '/='.")}}},t.exports.schema=[]},{}],201:[function(e,t){"use strict";t.exports=function(e){function t(t){function n(e){r.hasOwnProperty(e)?i[e]=1:r[e]=1}var r={},i={};t.params.forEach(function(e){switch(e.type){case"Identifier":n(e.name);break;case"ObjectPattern":e.properties.forEach(function(e){n(e.key.name)});break;case"ArrayPattern":e.elements.forEach(function(e){n(e.name)})}}),Object.keys(i).forEach(function(n){e.report(t,"Duplicate param '{{key}}'.",{key:n})})}return{FunctionDeclaration:t,FunctionExpression:t}},t.exports.schema=[]},{}],202:[function(e,t){"use strict";t.exports=function(e){return{ObjectExpression:function(t){var n=Object.create(null);t.properties.forEach(function(r){var i=r.key.name||r.key.value,o=r.kind+"-"+i,a=!r.computed||"Literal"===r.key.type;a&&(n[o]?e.report(t,"Duplicate key '{{key}}'.",{key:i}):n[o]=!0)})}}},t.exports.schema=[]},{}],203:[function(e,t){"use strict";t.exports=function(e){function t(e){return"Literal"===e.type?e.type+typeof e.value+e.value:"Identifier"===e.type?e.type+typeof e.name+e.name:"MemberExpression"===e.type?e.type+t(e.object)+t(e.property):"CallExpression"===e.type?e.type+t(e.callee)+e.arguments.map(t).join(""):"BinaryExpression"===e.type?e.type+t(e.left)+e.operator+t(e.right):"ConditionalExpression"===e.type?e.type+t(e.test)+t(e.consequent)+t(e.alternate):void 0}var n=[];return{SwitchStatement:function(){n.push({})},"SwitchStatement:exit":function(){n.pop()},SwitchCase:function(r){var i,o=n[n.length-1];r.test&&(i=t(r.test),"undefined"!=typeof i&&o.hasOwnProperty(i)?e.report(r,"Duplicate case label."):o[i]=!0)}}},t.exports.schema=[]},{}],204:[function(e,t){"use strict";t.exports=function(e){function t(t){e.report(t,"Unexpected 'else' after 'return'.")}function n(e){return"ReturnStatement"===e.type}function r(e){if("BlockStatement"===e.type){var t=e.body,r=t[t.length-1];return r&&n(r)}return n(e)}function i(e){return e.alternate&&e.consequent&&"IfStatement"!==e.alternate.type}function o(e){return"IfStatement"===e.type&&i(e)&&r(e.alternate)&&r(e.consequent)}function a(e,r){(n(e)||o(e))&&t(r)}return{IfStatement:function(e){if(i(e)){var t=e.consequent,n=e.alternate;if("BlockStatement"===t.type){var r=t.body;r.forEach(function(e){a(e,n)})}else a(t,n)}}}},t.exports.schema=[]},{}],205:[function(e,t){"use strict";var n=/^\/([^\\[]|\\.|\[([^\\\]]|\\.)+\])*\/[gimuy]*$/;t.exports=function(e){return{Literal:function(t){var r=e.getFirstToken(t);"RegularExpression"!==r.type||n.test(r.value)||e.report(t,"Empty class.")}}}},{}],206:[function(e,t){"use strict";var n=/^\/([^\\[]|\\.|\[([^\\\]]|\\.)+\])*\/[gimy]*$/;t.exports=function(e){return{Literal:function(t){var r=e.getFirstToken(t);"RegularExpression"!==r.type||n.test(r.value)||e.report(t,"Empty class.")}}},t.exports.schema=[]},{}],207:[function(e,t){"use strict";t.exports=function(e){return{LabeledStatement:function(t){var n=t.body.type;"ForStatement"!==n&&"WhileStatement"!==n&&"DoWhileStatement"!==n&&"SwitchStatement"!==n&&"ForInStatement"!==n&&"ForOfStatement"!==n&&e.report(t,"Unexpected label {{l}}",{l:t.label.name})}}},t.exports.schema=[]},{}],208:[function(e,t){"use strict";t.exports=function(e){return{BlockStatement:function(t){var n=t.parent,r=n.type;0===t.body.length&&"FunctionDeclaration"!==r&&"FunctionExpression"!==r&&"ArrowFunctionExpression"!==r&&(e.getComments(t).trailing.length>0||e.report(t,"Empty block statement."))},SwitchStatement:function(t){("undefined"==typeof t.cases||0===t.cases.length)&&e.report(t,"Empty switch statement.")}}},t.exports.schema=[]},{}],209:[function(e,t){"use strict";t.exports=function(e){return{BinaryExpression:function(t){var n="=="===t.operator||"!="===t.operator;("Literal"===t.right.type&&"null"===t.right.raw&&n||"Literal"===t.left.type&&"null"===t.left.raw&&n)&&e.report(t,"Use ‘===’ to compare with ‘null’.")}}},t.exports.schema=[]},{}],210:[function(e,t){"use strict";t.exports=function(e){return{CallExpression:function(t){"eval"===t.callee.name&&e.report(t,"eval can be harmful.")}}},t.exports.schema=[]},{}],211:[function(e,t){"use strict";t.exports=function(e){var t=[];return{CatchClause:function(e){t.push(e.param.name)},"CatchClause:exit":function(){t.pop()},AssignmentExpression:function(n){if(t.length>0){var r=t[t.length-1];n.left.name&&n.left.name===r&&e.report(n,"Do not assign to the exception parameter.")}}}},t.exports.schema=[]},{}],212:[function(e,t){"use strict";var n=["Object","Function","Array","String","Boolean","Number","Date","RegExp","Error","EvalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"];t.exports=function(e){var t=e.options[0]||{},r=t.exceptions||[],i=n;return r.length&&(i=n.filter(function(e){return-1===r.indexOf(e)})),{AssignmentExpression:function(t){var n,r=t.left;"MemberExpression"===r.type&&"MemberExpression"===r.object.type&&(n=r.object.computed?"Literal"===r.object.property.type&&"prototype"===r.object.property.value:"prototype"===r.object.property.name,n&&i.forEach(function(n){r.object.object.name===n&&e.report(t,n+" prototype is read only, properties should not be added.")}))},CallExpression:function(t){var n,r,o=t.callee;"MemberExpression"===o.type&&"Object"===o.object.name&&"defineProperty"===o.property.name&&(n=t.arguments[0],r=n.object,r&&"Identifier"===r.type&&i.indexOf(r.name)>-1&&"prototype"===n.property.name&&e.report(t,r.name+" prototype is read only, properties should not be added."))}}},t.exports.schema=[{type:"object",properties:{exceptions:{type:"array",items:{type:"string"},uniqueItems:!0}},additionalProperties:!1}]},{}],213:[function(e,t){"use strict";t.exports=function(e){function t(){return i[i.length-1]}function n(){var e=t();e.depth++}function r(){var e=t();e.depth--}var i=[{depth:-1,found:0}];return{CallExpression:function(e){1===e.arguments.length&&"MemberExpression"===e.callee.type&&"bind"===e.callee.property.name&&/FunctionExpression$/.test(e.callee.object.type)&&i.push({call:e,depth:-1,found:0})},"CallExpression:exit":function(n){var r=t();r.call===n&&0===r.found&&(e.report(n,"The function binding is unnecessary."),i.pop())},ArrowFunctionExpression:n,"ArrowFunctionExpression:exit":r,FunctionExpression:n,"FunctionExpression:exit":r,FunctionDeclaration:n,"FunctionDeclaration:exit":r,ThisExpression:function(){var e=t();0===e.depth&&e.found++}}},t.exports.schema=[]},{}],214:[function(e,t){"use strict";t.exports=function(e){return{UnaryExpression:function(t){var n=e.getAncestors(),r=n.pop(),i=n.pop();"!"===t.operator&&"UnaryExpression"===r.type&&"!"===r.operator&&("IfStatement"===i.type?e.report(t,"Redundant double negation in an if statement condition."):"DoWhileStatement"===i.type?e.report(t,"Redundant double negation in a do while loop condition."):"WhileStatement"===i.type?e.report(t,"Redundant double negation in a while loop condition."):"ConditionalExpression"===i.type&&r===i.test?e.report(t,"Redundant double negation in a ternary condition."):"ForStatement"===i.type&&r===i.test?e.report(t,"Redundant double negation in a for loop condition."):"UnaryExpression"===i.type&&"!"===i.operator?e.report(t,"Redundant multiple negation."):"CallExpression"===i.type&&"Identifier"===i.callee.type&&"Boolean"===i.callee.name?e.report(t,"Redundant double negation in call to Boolean()."):"NewExpression"===i.type&&"Identifier"===i.callee.type&&"Boolean"===i.callee.name&&e.report(t,"Redundant double negation in Boolean constructor call."))}}},t.exports.schema=[]},{}],215:[function(e,t){"use strict";t.exports=function(e){function t(e){return p||"FunctionExpression"===e.type||"ArrowFunctionExpression"===e.type}function n(t){var n=e.getTokenBefore(t),r=e.getTokenAfter(t);return n&&r&&"("===n.value&&n.range[1]<=t.range[0]&&")"===r.value&&r.range[0]>=t.range[1]}function r(t){var r=e.getTokenBefore(t,1),i=e.getTokenAfter(t,1);return n(t)&&r&&i&&"("===r.value&&r.range[1]<=t.range[0]&&")"===i.value&&i.range[0]>=t.range[1]}function i(e){return t(e)&&n(e)}function o(e){return t(e)&&r(e)}function a(e){switch(e.type){case"SequenceExpression":return 0;case"AssignmentExpression":case"ArrowFunctionExpression":case"YieldExpression":return 1;case"ConditionalExpression":return 3;case"LogicalExpression":switch(e.operator){case"||":return 4;case"&&":return 5}case"BinaryExpression":switch(e.operator){case"|":return 6;case"^":return 7;case"&":return 8;case"==":case"!=":case"===":case"!==":return 9;case"<":case"<=":case">":case">=":case"in":case"instanceof":return 10;case"<<":case">>":case">>>":return 11;case"+":case"-":return 12;case"*":case"/":case"%":return 13}case"UnaryExpression":return 14;case"UpdateExpression":return 15;case"CallExpression":return"FunctionExpression"===e.callee.type?-1:16;case"NewExpression":return 17}return 18}function s(t){var n=e.getTokenBefore(t);e.report(t,n.loc.start,"Gratuitous parentheses around expression.")}function u(e){i(e.argument)&&a(e.argument)>=a(e)&&s(e.argument)}function c(e){i(e.callee)&&a(e.callee)>=a(e)&&("CallExpression"!==e.type||"FunctionExpression"!==e.callee.type||o(e.callee))&&s(e.callee),1===e.arguments.length?o(e.arguments[0])&&a(e.arguments[0])>=a({type:"AssignmentExpression"})&&s(e.arguments[0]):[].forEach.call(e.arguments,function(e){i(e)&&a(e)>=a({type:"AssignmentExpression"})&&s(e)})}function l(e){var t=a(e);i(e.left)&&a(e.left)>=t&&s(e.left),i(e.right)&&a(e.right)>t&&s(e.right)}var p="functions"!==e.options[0];return{ArrayExpression:function(e){[].forEach.call(e.elements,function(e){e&&i(e)&&a(e)>=a({type:"AssignmentExpression"})&&s(e)})},ArrowFunctionExpression:function(e){if("BlockStatement"!==e.body.type){if("ObjectExpression"!==e.body.type&&i(e.body)&&a(e.body)>=a({type:"AssignmentExpression"}))return s(e.body),void 0;if("ObjectExpression"===e.body.type&&o(e.body))return s(e.body),void 0}},AssignmentExpression:function(e){i(e.right)&&a(e.right)>=a(e)&&s(e.right)},BinaryExpression:l,CallExpression:c,ConditionalExpression:function(e){i(e.test)&&a(e.test)>=a({type:"LogicalExpression",operator:"||"})&&s(e.test),i(e.consequent)&&a(e.consequent)>=a({type:"AssignmentExpression"})&&s(e.consequent),i(e.alternate)&&a(e.alternate)>=a({type:"AssignmentExpression"})&&s(e.alternate)},DoWhileStatement:function(e){o(e.test)&&s(e.test)},ExpressionStatement:function(t){var n;i(t.expression)&&"CallExpression"!==t.expression.type&&(n=e.getFirstToken(t.expression),("{"!==n.value||"ObjectExpression"===t.expression.type)&&s(t.expression))},ForInStatement:function(e){i(e.right)&&s(e.right)},ForOfStatement:function(e){i(e.right)&&s(e.right)},ForStatement:function(e){e.init&&i(e.init)&&s(e.init),e.test&&i(e.test)&&s(e.test),e.update&&i(e.update)&&s(e.update)},IfStatement:function(e){o(e.test)&&s(e.test)},LogicalExpression:l,MemberExpression:function(t){i(t.object)&&a(t.object)>=a(t)&&(t.computed||!("Literal"===t.object.type&&"number"==typeof t.object.value&&/^[0-9]+$/.test(e.getFirstToken(t.object).value)||"Literal"===t.object.type&&t.object.regex))&&s(t.object),t.computed&&i(t.property)&&s(t.property)},NewExpression:c,ObjectExpression:function(e){[].forEach.call(e.properties,function(e){var t=e.value;t&&i(t)&&a(t)>=a({type:"AssignmentExpression"})&&s(t)})},ReturnStatement:function(e){!e.argument||!i(e.argument)||"Literal"===e.argument.type&&e.argument.regex||s(e.argument)},SequenceExpression:function(e){[].forEach.call(e.expressions,function(t){i(t)&&a(t)>=a(e)&&s(t)})},SwitchCase:function(e){e.test&&i(e.test)&&s(e.test)},SwitchStatement:function(e){o(e.discriminant)&&s(e.discriminant)},ThrowStatement:function(e){i(e.argument)&&s(e.argument)},UnaryExpression:u,UpdateExpression:u,VariableDeclarator:function(e){e.init&&i(e.init)&&a(e.init)>=a({type:"AssignmentExpression"})&&("Literal"!==e.init.type||!e.init.regex)&&s(e.init)},WhileStatement:function(e){o(e.test)&&s(e.test)},WithStatement:function(e){o(e.object)&&s(e.object)}}},t.exports.schema=[{"enum":["all","functions"]}]},{}],216:[function(e,t){"use strict";t.exports=function(e){return{EmptyStatement:function(t){e.report(t,"Unnecessary semicolon.")}}},t.exports.schema=[]},{}],217:[function(e,t){"use strict";t.exports=function(e){function t(e){var t,n,r,i=[],o=e.body;if(o)for(n=0,r=o.length;r>n&&(t=o[n],"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value);++n)i.push(t.expression);return i}function n(e){return"use strict"===e.value}function r(r){var i,o,a=t(r).filter(n);switch(a.length){case 0:break;case 1:i=e.getScope(),o=i.upper,o&&o.functionExpressionScope&&(o=o.upper),o&&o.isStrict&&e.report(a[0],"Unnecessary 'use strict'.");break;default:e.report(a[1],"Multiple 'use strict' directives.")}}return{Program:r,ArrowFunctionExpression:function(e){r(e.body)},FunctionExpression:function(e){r(e.body)},FunctionDeclaration:function(e){r(e.body)}}},t.exports.schema=[]},{}],218:[function(e,t){"use strict";var n=/falls\sthrough/;t.exports=function(e){var t=[];return{SwitchCase:function(r){var i,o,a,s=r.consequent,u=t[t.length-1];if(1===s.length&&"BlockStatement"===s[0].type&&(s=s[0]),u.lastCaseClosed||(o=e.getComments(u.lastCase).trailing,a=o[o.length-1],a||(o=e.getComments(r).leading,a=o[o.length-1]),a&&n.test(a.value)||e.report(u.lastCase,'Expected a "break" statement before "{{code}}".',{code:r.test?"case":"default"})),u.lastCaseClosed=!1,u.lastCase=r,s.length){for(i=s.length-1;i>=0;i--)if(/(?:Break|Continue|Return|Throw)Statement/.test(s[i].type)){u.lastCaseClosed=!0;break}}else u.lastCaseClosed=!0},SwitchStatement:function(e){t.push({node:e,lastCaseClosed:!0,lastCase:null})},"SwitchStatement:exit":function(){t.pop()}}},t.exports.schema=[]},{}],219:[function(e,t){"use strict";t.exports=function(e){return{Literal:function(t){"number"==typeof t.value&&(0===t.raw.indexOf(".")&&e.report(t,"A leading decimal point can be confused with a dot."),t.raw.indexOf(".")===t.raw.length-1&&e.report(t,"A trailing decimal point can be confused with a dot."))}}},t.exports.schema=[]},{}],220:[function(e,t){"use strict";t.exports=function(e){function t(e,n){var r,i,o,a;for(o=0;o<e.variables.length;o++)for(r=e.variables[o],a=0;a<r.defs.length;a++){if(i=r.defs[a],"FunctionName"===i.type&&i.name.name===n)return!0;if(i.name&&i.name.name===n)return!1}return e.upper?t(e.upper,n):!1}return{AssignmentExpression:function(n){var r=e.getScope(),i=n.left.name;t(r,i)&&e.report(n,"'{{name}}' is a function.",{name:i})}}},t.exports.schema=[]},{}],221:[function(e,t){"use strict";t.exports=function(e){function t(e){var t=e.arguments[0];return t&&"Literal"===t.type&&"string"==typeof t.value}function n(e){var t=e.object,n=e.property,r=i.test(n.name)||i.test(n.value);return"window"===t.name&&r}function r(e){var r="MemberExpression"===e.callee.type,o="Identifier"===e.callee.type,a=o&&i.test(e.callee.name)||r&&n(e.callee);return a&&t(e)}var i=/set(?:Timeout|Interval)/;return{CallExpression:function(t){r(t)&&e.report(t,"Implied eval. Consider passing a function instead of a string.")}}},t.exports.schema=[]},{}],222:[function(e,t){"use strict";t.exports=function(e){function t(t){var n=String(e.getSourceLines()[t.loc.start.line-1]),r=String(e.getSourceLines()[t.loc.end.line-1]),i=n.slice(0,t.loc.start.column).trim(),o=r.slice(t.loc.end.column).trim();(i||o)&&e.report(t,"Unexpected comment inline with code.")}return{LineComment:t,BlockComment:t}},t.exports.schema=[]},{}],223:[function(e,t){"use strict";t.exports=function(e){function t(){for(var t=e.getAncestors(),n=t.pop(),r=1;n&&["Program","FunctionDeclaration","FunctionExpression","ArrowFunctionExpression"].indexOf(n.type)<0;)r+=1,n=t.pop();return{type:n.type,distance:r}}function n(n){var r=t(n),i="Program"===r.type&&1===r.distance||2===r.distance;i||e.report(n,"Move {{type}} declaration to {{body}} root.",{type:"FunctionDeclaration"===n.type?"function":"variable",body:"Program"===r.type?"program":"function body"})}return{FunctionDeclaration:n,VariableDeclaration:function(t){"both"===e.options[0]&&"var"===t.kind&&n(t)}}},t.exports.schema=[{"enum":["functions","both"]}]},{}],224:[function(e,t){"use strict";var n=e("espree");t.exports=function(e){function t(e){return e&&"Literal"===e.type&&"string"==typeof e.value}function r(r){if("Identifier"===r.callee.type&&"RegExp"===r.callee.name&&t(r.arguments[0])){var i=t(r.arguments[1])?r.arguments[1].value:"";try{void new RegExp(r.arguments[0].value)
}catch(o){e.report(r,o.message)}if(i)try{n.parse("/./"+i,{ecmaFeatures:e.ecmaFeatures})}catch(a){e.report(r,"Invalid flags supplied to RegExp constructor '"+i+"'")}}}return{CallExpression:r,NewExpression:r}},t.exports.schema=[]},{espree:"espree"}],225:[function(e,t){"use strict";t.exports=function(e){function t(e){var t=e.loc.start,n=e.loc.end;s=s.filter(function(e){var r=e[1];return r.line>=t.line&&r.line<=n.line&&r.column>=t.column&&(r.column<=n.column||r.line<n.line)?!1:!0})}function n(e){"string"==typeof e.value&&(e.raw.match(o)||e.raw.match(a))&&t(e)}function r(t){var n=e.getSourceLines();n.forEach(function(e,n){for(var r,i,a=n+1;null!==(i=o.exec(e));)r={line:a,column:i.index},s.push([t,r,"Irregular whitespace not allowed"])})}function i(t){for(var n,r,i,o=e.getSource(),u=e.getSourceLines(),c=o.match(/\r\n|\r|\n|\u2028|\u2029/g),l=-1;null!==(i=a.exec(o));)n=c.indexOf(i[0],l+1)||0,r={line:n+1,column:u[n].length},s.push([t,r,"Irregular whitespace not allowed"]),l=n}var o=/[\u0085\u00A0\ufeff\f\v\u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u202f\u205f\u3000]+/gm,a=/[\u2028\u2029]/gm,s=[];return{Program:function(e){r(e),i(e)},Identifier:n,Literal:n,"Program:exit":function(){s.forEach(function(t){e.report.apply(this,t)})}}},t.exports.schema=[]},{}],226:[function(e,t){"use strict";t.exports=function(e){return{MemberExpression:function(t){(t.property&&"Identifier"===t.property.type&&"__iterator__"===t.property.name&&!t.computed||"Literal"===t.property.type&&"__iterator__"===t.property.value)&&e.report(t,"Reserved name '__iterator__'.")}}},t.exports.schema=[]},{}],227:[function(e,t){"use strict";t.exports=function(e){function t(e,n){var r=!1;return e.variables.forEach(function(e){e.name===n&&(r=!0)}),e.references.forEach(function(e){e.identifier.name===n&&(r=!0)}),e.upper&&!r?t(e.upper,n):r}return{LabeledStatement:function(n){var r=e.getScope();t(r,n.label.name)&&e.report(n,"Found identifier with same name as label.")}}},t.exports.schema=[]},{}],228:[function(e,t){"use strict";t.exports=function(e){return{LabeledStatement:function(t){e.report(t,"Unexpected labeled statement.")},BreakStatement:function(t){t.label&&e.report(t,"Unexpected label in break statement.")},ContinueStatement:function(t){t.label&&e.report(t,"Unexpected label in continue statement.")}}},t.exports.schema=[]},{}],229:[function(e,t){"use strict";t.exports=function(e){function t(t){var n=e.getAncestors().pop();e.report(t,"Program"===n.type?"Block is redundant.":"Nested block is redundant.")}function n(){var t=e.getAncestors().pop();return"BlockStatement"===t.type||"Program"===t.type}function r(){if(0!==o.length){var t=e.getAncestors().pop();o[o.length-1]===t&&o.pop()}}var i,o=[];return i={BlockStatement:function(e){n(e)&&t(e)}},(e.ecmaFeatures.blockBindings||e.ecmaFeatures.classes)&&(i={BlockStatement:function(e){n(e)&&o.push(e)},"BlockStatement:exit":function(e){o.length>0&&o[o.length-1]===e&&(o.pop(),t(e))}}),e.ecmaFeatures.blockBindings&&(i.VariableDeclaration=function(e){("let"===e.kind||"const"===e.kind)&&r(e)},i.FunctionDeclaration=function(t){e.getScope().isStrict&&r(t)}),e.ecmaFeatures.classes&&(i.ClassDeclaration=r),i},t.exports.schema=[]},{}],230:[function(e,t){"use strict";t.exports=function(e){return{IfStatement:function(t){var n=e.getAncestors(),r=n.pop(),i=n.pop();r&&"BlockStatement"===r.type&&1===r.body.length&&i&&"IfStatement"===i.type&&r===i.alternate&&e.report(t,"Unexpected if as the only statement in an else block.")}}},t.exports.schema=[]},{}],231:[function(e,t){"use strict";t.exports=function(e){function t(t){function n(e,t){switch(e.type){case"ForStatement":return e.init!==r[t+1];case"ForInStatement":case"ForOfStatement":return e.right!==r[t+1];case"WhileStatement":case"DoWhileStatement":return!0;default:return!1}}var r=e.getAncestors();r.some(n)&&e.report(t,"Don't make functions within a loop")}return{ArrowFunctionExpression:t,FunctionExpression:t,FunctionDeclaration:t}},t.exports.schema=[]},{}],232:[function(e,t){"use strict";t.exports=function(e){function t(){return["assert","buffer","child_process","cluster","crypto","dgram","dns","domain","events","fs","http","https","net","os","path","punycode","querystring","readline","repl","smalloc","stream","string_decoder","tls","tty","url","util","v8","vm","zlib"]}function n(e){return e?"CallExpression"===e.type&&"Identifier"===e.callee.type&&"require"===e.callee.name?s:"MemberExpression"===e.type?n(e.object):c:u}function r(e){if("MemberExpression"===e.type)return r(e.object);if(0===e.arguments.length)return d;var t=e.arguments[0];return"Literal"!==t.type||"string"!=typeof t.value?d:-1!==a.indexOf(t.value)?l:/^\.{0,2}\//.test(t.value)?p:f}function i(e){var t={};return e.forEach(function(e){var r=n(e.init);t[r]=!0}),!(!t[s]||!t[u]&&!t[c])}function o(e){var t={};return e.forEach(function(e){n(e.init)===s&&(t[r(e.init)]=!0)}),Object.keys(t).length<=1}var a=t(),s="require",u="uninitialized",c="other",l="core",p="file",f="module",d="computed";return{VariableDeclaration:function(t){var n=!!e.options[0];i(t.declarations)?e.report(t,"Do not mix 'require' and other declarations."):n&&!o(t.declarations)&&e.report(t,"Do not mix core, module, file and computed requires.")}}},t.exports.schema=[{type:"boolean"}]},{}],233:[function(e,t){"use strict";t.exports=function(e){var t;switch(e.options[0]){case!0:case"smart-tabs":t=!0;break;default:t=!1}var n=/^\s*\/\*/,r=/^\s*\*/;return{Program:function(i){var o,a=/^(?=[\t ]*(\t | \t))/,s=e.getSourceLines();t&&(a=/^(?=[\t ]* \t)/),s.forEach(function(t,u){o=a.exec(t),o&&(r.test(t)||n.test(s[u-1])||e.report(i,{line:u+1,column:o.index+1},"Mixed spaces and tabs."))})}}},t.exports.schema=[{"enum":["smart-tabs",!0,!1]}]},{}],234:[function(e,t){"use strict";t.exports=function(e){function t(e,t){for(var n;o<t.length;){if(n=t[o],n.range[0]<=e&&e<n.range[1])return!0;if(!(e>n.range[1]))break;o++}return!1}var n={Property:!0},r=!0,i=e.options[0],o=0;return i&&i.exceptions&&(Object.keys(i.exceptions).forEach(function(e){i.exceptions[e]?n[e]=!0:delete n[e]}),r=Object.keys(n).length>0),{Program:function(){for(var i,o,a=e.getSource(),s=e.getAllComments(),u=/[^\n\r\u2028\u2029 ] {2,}/g;u.test(a);)t(u.lastIndex,s)||(i=e.getTokenByRangeStart(u.lastIndex),i&&(r&&(o=e.getNodeByRangeIndex(u.lastIndex-1)),o&&n[o.type]||e.report(i,i.loc.start,"Multiple spaces found before '{{value}}'.",{value:i.value})))}}},t.exports.schema=[{type:"object",properties:{exceptions:{type:"object",patternProperties:{"^([A-Z][a-z]*)+$":{type:"boolean"}},additionalProperties:!1}},additionalProperties:!1}]},{}],235:[function(e,t){"use strict";t.exports=function(e){function t(e){return 0===e.type.indexOf("JSX")}return{Literal:function(n){var r=/\n/;r.test(n.raw)&&!t(n.parent)&&e.report(n,"Multiline support is limited to browsers supporting ES5 only.")}}},t.exports.schema=[]},{}],236:[function(e,t){"use strict";t.exports=function(e){var t=2,n=[];return e.options.length&&(t=e.options[0].max),{TemplateLiteral:function(e){for(var t=e.loc.start.line,r=e.loc.end.line;r>=t;)n.push(t),t++},"Program:exit":function(r){var i,o,a=e.getSourceLines(),s=-1,u=0,c=a.map(function(e){return e.trim()});for(n.forEach(function(e,t){c[t]=e}),""===c[c.length-1]&&(c=c.slice(0,-1)),i=s,s=c.indexOf("",s+1);-1!==s;)i=s,s=c.indexOf("",s+1),i===s-1?u++:(u>=t&&(o={line:i+1,column:a[i].length},e.report(r,o,"Multiple blank lines not allowed.")),u=0)}}},t.exports.schema=[{type:"object",properties:{max:{type:"integer"}},required:["max"],additionalProperties:!1}]},{}],237:[function(e,t){"use strict";t.exports=function(e){var t=["Array","Boolean","Date","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","Error","eval","EvalError","Function","isFinite","isNaN","JSON","Math","Number","Object","parseInt","parseFloat","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","Map","NaN","Set","WeakMap","Infinity","undefined"],n=e.options[0]||{},r=n.exceptions||[],i=t;return r.length&&(i=t.filter(function(e){return-1===r.indexOf(e)})),{AssignmentExpression:function(t){i.indexOf(t.left.name)>=0&&e.report(t,t.left.name+" is a read-only native object.")},VariableDeclarator:function(t){i.indexOf(t.id.name)>=0&&e.report(t,"Redefinition of '{{nativeObject}}'.",{nativeObject:t.id.name})}}},t.exports.schema=[{type:"object",properties:{exceptions:{type:"array",items:{type:"string"},uniqueItems:!0}},additionalProperties:!1}]},{}],238:[function(e,t){"use strict";t.exports=function(e){return{BinaryExpression:function(t){"in"===t.operator&&"UnaryExpression"===t.left.type&&"!"===t.left.operator&&e.report(t,"The `in` expression's left operand is negated")}}},t.exports.schema=[]},{}],239:[function(e,t){"use strict";t.exports=function(e){return{ConditionalExpression:function(t){("ConditionalExpression"===t.alternate.type||"ConditionalExpression"===t.consequent.type)&&e.report(t,"Do not nest ternary expressions")}}},t.exports.schema=[]},{}],240:[function(e,t){"use strict";t.exports=function(e){return{NewExpression:function(t){"Function"===t.callee.name&&e.report(t,"The Function constructor is eval.")}}},t.exports.schema=[]},{}],241:[function(e,t){"use strict";t.exports=function(e){return{NewExpression:function(t){"Object"===t.callee.name&&e.report(t,"The object literal notation {} is preferrable.")}}},t.exports.schema=[]},{}],242:[function(e,t){"use strict";t.exports=function(e){return{NewExpression:function(t){"Identifier"===t.callee.type&&"require"===t.callee.name&&e.report(t,"Unexpected use of new with require.")}}},t.exports.schema=[]},{}],243:[function(e,t){"use strict";t.exports=function(e){return{NewExpression:function(t){var n=["String","Number","Boolean","Math","JSON"];n.indexOf(t.callee.name)>-1&&e.report(t,"Do not use {{fn}} as a constructor.",{fn:t.callee.name})}}},t.exports.schema=[]},{}],244:[function(e,t){"use strict";t.exports=function(e){return{ExpressionStatement:function(t){"NewExpression"===t.expression.type&&e.report(t,"Do not use 'new' for side effects.")}}},t.exports.schema=[]},{}],245:[function(e,t){"use strict";t.exports=function(e){return{CallExpression:function(t){if("Identifier"===t.callee.type){var n=t.callee.name;("Math"===n||"JSON"===n)&&e.report(t,"'{{name}}' is not a function.",{name:n})}}}},t.exports.schema=[]},{}],246:[function(e,t){"use strict";t.exports=function(e){return{Literal:function(t){if("string"==typeof t.value){var n,r=t.raw.match(/^([^\\]|\\[^0-7])*\\([0-3][0-7]{1,2}|[4-7][0-7]|[0-7])/);r&&(n=r[2],("0"!==r[2]||"undefined"!=typeof r[3])&&e.report(t,"Don't use octal: '\\{{octalDigit}}'. Use '\\u....' instead.",{octalDigit:n}))}}}},t.exports.schema=[]},{}],247:[function(e,t){"use strict";t.exports=function(e){return{Literal:function(t){"number"==typeof t.value&&/^0[0-7]/.test(t.raw)&&e.report(t,"Octal literals should not be used.")}}},t.exports.schema=[]},{}],248:[function(e,t){"use strict";t.exports=function(e){function t(e,n){for(var r=e.variables,i=0;i<r.length;i++)if(r[i].name===n)return r[i];return e.upper?t(e.upper,n):null}function n(e){for(var t=e.defs,n=0;n<t.length;n++)if("Parameter"===t[n].type)return!0;return!1}function r(r,i){var o=t(e.getScope(),i);o&&n(o)&&e.report(r,"Assignment to function parameter '{{name}}'.",{name:i})}return{AssignmentExpression:function(e){r(e,e.left.name)},UpdateExpression:function(e){r(e,e.argument.name)}}},t.exports.schema=[]},{}],249:[function(e,t){"use strict";t.exports=function(e){var t=/^__(?:dir|file)name$/;return{BinaryExpression:function(n){var r=n.left,i=n.right;"+"===n.operator&&("Identifier"===r.type&&t.test(r.name)||"Identifier"===i.type&&t.test(i.name))&&e.report(n,"Use path.join() or path.resolve() instead of + to create paths.")}}},t.exports.schema=[]},{}],250:[function(e,t){"use strict";t.exports=function(e){return{UpdateExpression:function(t){e.report(t,"Unary operator '"+t.operator+"' used.")}}},t.exports.schema=[]},{}],251:[function(e,t){"use strict";t.exports=function(e){return{MemberExpression:function(t){var n=t.object.name,r=t.property.name;"process"===n&&!t.computed&&r&&"env"===r&&e.report(t,"Unexpected use of process.env.")}}},t.exports.schema=[]},{}],252:[function(e,t){"use strict";t.exports=function(e){return{CallExpression:function(t){var n=t.callee;"MemberExpression"===n.type&&"process"===n.object.name&&"exit"===n.property.name&&e.report(t,"Don't use process.exit(); throw an error instead.")}}},t.exports.schema=[]},{}],253:[function(e,t){"use strict";t.exports=function(e){return{MemberExpression:function(t){(t.property&&"Identifier"===t.property.type&&"__proto__"===t.property.name&&!t.computed||"Literal"===t.property.type&&"__proto__"===t.property.value)&&e.report(t,"The '__proto__' property is deprecated.")}}},t.exports.schema=[]},{}],254:[function(e,t){"use strict";t.exports=function(e){function t(t){t.variables.forEach(function(t){if(t.identifiers&&t.identifiers.length>1){t.identifiers.sort(function(e,t){return e.range[1]-t.range[1]});for(var n=1,r=t.identifiers.length;r>n;n++)e.report(t.identifiers[n],"{{a}} is already defined",{a:t.name})}})}function n(n){var r=e.getScope();t(r),"Program"===n.type&&e.ecmaFeatures.globalReturn&&t(r.childScopes[0])}return e.ecmaFeatures.blockBindings?{Program:n,BlockStatement:n,SwitchStatement:n}:{Program:n,FunctionDeclaration:n,FunctionExpression:n,ArrowFunctionExpression:n}},t.exports.schema=[]},{}],255:[function(e,t){"use strict";t.exports=function(e){return{Literal:function(t){var n,r=e.getFirstToken(t),i=r.type,o=r.value,a=/( {2,})+?/;"RegularExpression"===i&&(n=a.exec(o),null!==n&&e.report(t,"Spaces are hard to count. Use {"+n[0].length+"}."))}}},t.exports.schema=[]},{}],256:[function(e,t){"use strict";t.exports=function(e){var t="Reserved word '{{key}}' used as key.",n=["abstract","boolean","break","byte","case","catch","char","class","const","continue","debugger","default","delete","do","double","else","enum","export","extends","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","long","native","new","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","try","typeof","var","void","volatile","while","with"];return{ObjectExpression:function(r){r.properties.forEach(function(i){if("Identifier"===i.key.type){var o=i.key.name;-1!==n.indexOf(""+o)&&e.report(r,t,{key:o})}})}}},t.exports.schema=[]},{}],257:[function(e,t){"use strict";t.exports=function(e){function t(e){return e&&"Literal"===e.type&&"string"==typeof e.value}function n(e){return"Identifier"===e.callee.type&&"require"===e.callee.name}function r(e){var n;if(e.arguments.length&&t(e.arguments[0])){var r=e.arguments[0].value.trim();-1!==i.indexOf(r)&&(n=r)}return n}var i=e.options;return 0===i.length?{}:{CallExpression:function(t){if(n(t)){var i=r(t);i&&e.report(t,"'{{moduleName}}' module is restricted from being used.",{moduleName:i})}}}},t.exports.schema={type:"array",items:[{"enum":[0,1,2]}],additionalItems:{type:"string"},uniqueItems:!0}},{}],258:[function(e,t){"use strict";t.exports=function(e){return{ReturnStatement:function(t){t.argument&&"AssignmentExpression"===t.argument.type&&e.report(t,"Return statement should not contain assignment.")}}},t.exports.schema=[]},{}],259:[function(e,t){"use strict";t.exports=function(e){return{Literal:function(t){var n;t.value&&"string"==typeof t.value&&(n=t.value.toLowerCase(),0===n.indexOf("javascript:")&&e.report(t,"Script URL is a form of eval."))}}},t.exports.schema=[]},{}],260:[function(e,t){"use strict";t.exports=function(e){return{BinaryExpression:function(t){var n=["===","==","!==","!=",">","<",">=","<="];n.indexOf(t.operator)>-1&&("Identifier"===t.left.type&&"Identifier"===t.right.type&&t.left.name===t.right.name||"Literal"===t.left.type&&"Literal"===t.right.type&&t.left.value===t.right.value)&&e.report(t,"Comparing to itself is potentially pointless.")}}},t.exports.schema=[]},{}],261:[function(e,t){"use strict";t.exports=function(e){function t(e){return e.parent&&null!=i[e.parent.type]&&e===e.parent[i[e.parent.type]]}function n(t){var n=e.getTokenBefore(t),r=e.getTokenAfter(t);return n&&r&&"("===n.value&&n.range[1]<=t.range[0]&&")"===r.value&&r.range[0]>=t.range[1]}function r(t){var r=e.getTokenBefore(t,1),i=e.getTokenAfter(t,1);return n(t)&&r&&i&&"("===r.value&&r.range[1]<=t.range[0]&&")"===i.value&&i.range[0]>=t.range[1]}var i={DoWhileStatement:"test",IfStatement:"test",SwitchStatement:"discriminant",WhileStatement:"test",WithStatement:"object"};return{SequenceExpression:function(i){if("ForStatement"!==i.parent.type||i!==i.parent.init&&i!==i.parent.update){if(t(i)){if(r(i))return}else if(n(i))return;e.report(i,"Unexpected use of comma operator.")}}}},t.exports.schema=[]},{}],262:[function(e,t){"use strict";t.exports=function(e){function t(t){n.indexOf(t.name)>-1&&e.report(t,'Shadowing of global property "'+t.name+'".')}var n=["undefined","NaN","Infinity","arguments","eval"];return{VariableDeclarator:function(e){t(e.id)},ArrowFunctionExpression:function(e){e.id&&t(e.id),[].map.call(e.params,t)},FunctionExpression:function(e){e.id&&t(e.id),[].map.call(e.params,t)},FunctionDeclaration:function(e){e.id&&(t(e.id),[].map.call(e.params,t))},CatchClause:function(e){t(e.param)}}},t.exports.schema=[]},{}],263:[function(e,t){"use strict";t.exports=function(e){function t(e){var t=e.scope.block;return"ClassDeclaration"===t.type&&t.id===e.identifiers[0]}function n(e,t){var n=t.scope,r=t.defs[0],i=r&&r.parent&&r.parent.range,o=e.scope,a=e.defs[0],s=a&&a.name.range;return null!=i&&null!=s&&i[0]<s[0]&&s[1]<i[1]&&("FunctionName"===a.type&&"FunctionExpression"===a.node.type||"ClassExpression"===a.node.type)&&n===o.upper}function r(e){var t=e.defs[0];return t&&t.name.range}function i(e,t){var n=t.defs[0],i=r(e),o=r(t);return null!=i&&null!=o&&i[1]<o[0]&&("functions"!==u.hoist||null==n||"FunctionDeclaration"!==n.node.type)}function o(e,r){return r.some(function(r){return r.identifiers.length>0&&e.name===r.name&&!t(r)&&!n(e,r)&&!("all"!==u.hoist&&i(e,r))})}function a(t,n){var r=[];return t.forEach(function(t){t.identifiers.length>0&&o(t,n.variables)?e.report(t.identifiers[0],"{{name}} is already declared in the upper scope.",{name:t.name}):r.push(t)}),r}function s(e){for(var n=e.variables.filter(function(e){return e.identifiers.length>0&&!t(e)}),r=e.upper;r&&n.length;)n=a(n,r),r=r.upper}var u={hoist:e.options[0]&&e.options[0].hoist||"functions"};return{"Program:exit":function(){for(var t,n=e.getScope(),r=n.childScopes.slice();r.length;)t=r.pop(),r.push.apply(r,t.childScopes),s(t)}}},t.exports.schema=[{type:"object",properties:{hoist:{"enum":["all","functions","never"]}}}]},{}],264:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.range[1]<t.range[0]}function n(e,t){return e.loc.end.line===t.loc.start.line}function r(r){var i=e.getTokenBefore(r);return n(i,r)&&t(i,r)}function i(e){return"Punctuator"===e.type&&";"===e.value}function o(t,n){i(t)&&r(t)&&e.report(n,t.loc.start,"Unexpected whitespace before semicolon.")}function a(t){var n=e.getLastToken(t);o(n,t)}return{VariableDeclaration:a,ExpressionStatement:a,BreakStatement:a,ContinueStatement:a,DebuggerStatement:a,ReturnStatement:a,ThrowStatement:a,ForStatement:function(t){t.init&&o(e.getTokenAfter(t.init),t),t.test&&o(e.getTokenAfter(t.test),t)}}},t.exports.schema=[]},{}],265:[function(e,t){"use strict";t.exports=function(e){function t(t){for(var n=e.getLastToken(t.callee),r=e.getTokens(t),i=r.indexOf(n),o=r.length;o>i&&"("!==r[i].value;)++i;i>=o||r[i-1].range[1]!==r[i].range[0]&&e.report(t,"Unexpected space between function name and paren.")}return{CallExpression:t,NewExpression:t}},t.exports.schema=[]},{}],266:[function(e,t){"use strict";t.exports=function(e){return{ArrayExpression:function(t){var n=t.elements.indexOf(null)>-1;n&&e.report(t,"Unexpected comma in middle of array.")}}},t.exports.schema=[]},{}],267:[function(e,t){"use strict";t.exports=function(e){return{MemberExpression:function(t){var n=t.property.name,r=/.*Sync$/;null!==r.exec(n)&&e.report(t,"Unexpected sync method: '"+n+"'.")}}},t.exports.schema=[]},{}],268:[function(e,t){"use strict";t.exports=function(e){return{ConditionalExpression:function(t){e.report(t,"Ternary operator used.")}}},t.exports.schema=[]},{}],269:[function(e,t){"use strict";t.exports=function(e){return{ThrowStatement:function(t){"Literal"===t.argument.type?e.report(t,"Do not throw a literal."):"Identifier"===t.argument.type&&"undefined"===t.argument.name&&e.report(t,"Do not throw undefined.")}}},t.exports.schema=[]},{}],270:[function(e,t){"use strict";t.exports=function(e){var t="[ 	  -​\u2028\u2029　]",n="^"+t+"*$",r=t+"$",i=e.options[0]||{},o=i.skipBlankLines||!1;return{Program:function(t){for(var i,a,s=e.getSource(),u=new RegExp(r),c=new RegExp(n),l=s.split(/\r?\n/),p=0,f=l.length;f>p;p++)if(i=u.exec(l[p])){if(o&&c.test(l[p]))continue;a={line:p+1,column:l[p].length-i[0].length+1},e.report(t,a,"Trailing spaces not allowed.")}}}},t.exports.schema=[{type:"object",properties:{skipBlankLines:{type:"boolean"}},additionalProperties:!1}]},{}],271:[function(e,t){"use strict";t.exports=function(e){return{VariableDeclarator:function(t){var n=t.id.name,r=t.init&&t.init.name;"undefined"===r&&e.report(t,"It's not necessary to initialize '{{name}}' to undefined.",{name:n})}}},t.exports.schema=[]},{}],272:[function(e,t){"use strict";function n(e){return e.defs.every(function(e){return"ImplicitGlobalVariable"===e.type})}function r(e,t){var r=null;return e.variables.some(function(e){return e.name!==t.identifier.name||n(e)&&!{}.hasOwnProperty.call(e,"writeable")?!1:(r=e,!0)}),r}function i(e){var t=e.parent;return"UnaryExpression"===t.type&&"typeof"===t.operator}t.exports=function(e){var t='"{{name}}" is not defined.',n='"{{name}}" is read only.';return{"Program:exit":function(){var o=e.getScope();o.through.forEach(function(a){var s=r(o,a),u=a.identifier.name;i(a.identifier)||(s?a.isWrite()&&s.writeable===!1&&e.report(a.identifier,n,{name:u}):e.report(a.identifier,t,{name:u}))})}}},t.exports.schema=[]},{}],273:[function(e,t){"use strict";t.exports=function(e){return{Identifier:function(t){if("undefined"===t.name){var n=e.getAncestors().pop();(!n||"MemberExpression"!==n.type||t!==n.property||n.computed)&&e.report(t,"Unexpected use of undefined.")}}}},t.exports.schema=[]},{}],274:[function(e,t){"use strict";t.exports=function(e){function t(e){var t=e.length;return"_"!==e&&("_"===e[0]||"_"===e[t-1])}function n(e){return"__proto__"===e}function r(e){return"_"===e}function i(n){if(n.id){var r=n.id.name;"undefined"!=typeof r&&t(r)&&e.report(n,'Unexpected dangling "_" in "'+r+'".')}}function o(n){var i=n.id.name;"undefined"!=typeof i&&t(i)&&!r(i)&&e.report(n,'Unexpected dangling "_" in "'+i+'".')}function a(r){var i=r.property.name;"undefined"!=typeof i&&t(i)&&!n(i)&&e.report(r,'Unexpected dangling "_" in "'+i+'".')}return{FunctionDeclaration:i,VariableDeclarator:o,MemberExpression:a}},t.exports.schema=[]},{}],275:[function(e,t){"use strict";t.exports=function(e){function t(t,n){e.report(t,n.loc.start,"Unnecessary use of boolean literals in conditional expression")}function n(e){return"Literal"===e.type&&"boolean"==typeof e.value}return{ConditionalExpression:function(e){n(e.alternate)&&n(e.consequent)&&t(e,e.consequent)}}},t.exports.schema=[]},{}],276:[function(e,t){"use strict";function n(e,t,n){var r;switch(n){case"BreakStatement":r="break";break;case"ContinueStatement":r="continue";break;case"ReturnStatement":r="return";break;case"ThrowStatement":r="throw";break;default:return}e.report(t,"Found unexpected statement after a {{type}}.",{type:r})}t.exports=function(e){function t(e){return"FunctionDeclaration"===e.type||"VariableDeclaration"===e.type&&e.declarations.every(function(e){return"VariableDeclarator"===e.type&&null===e.init})}function r(r){var i,o,a,s=e.getAncestors().pop();switch(s.type){case"SwitchCase":i="consequent";break;case"Program":case"BlockStatement":i="body";break;default:return}for(o=s[i].length-1;o>=0;o--){if(a=s[i][o],a===r)return;t(a)||n(e,a,r.type)}}return{ReturnStatement:r,ThrowStatement:r,ContinueStatement:r,BreakStatement:r}},t.exports.schema=[]},{}],277:[function(e,t){"use strict";t.exports=function(e){function t(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value}function n(e,t){for(var n=0,r=t.length;r>n&&e(t[n]);++n);return[].slice.call(t,0,n)}function r(e){return n(t,e.body)}function i(e,t){var n=t[t.length-1],i=t[t.length-2];return("Program"===n.type||"BlockStatement"===n.type&&/Function/.test(i.type))&&r(n).indexOf(e)>=0}return{ExpressionStatement:function(t){var n=t.expression.type,r=e.getAncestors();/^(?:Assignment|Call|New|Update|Yield)Expression$/.test(n)||!("UnaryExpression"!==n||["delete","void"].indexOf(t.expression.operator)<0)||i(t,r)||e.report(t,"Expected an assignment or function call and instead saw an expression.")}}},t.exports.schema=[]},{}],278:[function(e,t){"use strict";t.exports=function(e){function t(e){var t=e.defs[0];if(t){var n=t.node;if("VariableDeclarator"===n.type)n=n.parent;else if("Parameter"===t.type&&"FunctionDeclaration"===n.type)return!1;return 0===n.parent.type.indexOf("Export")}return!1}function n(e){return e.isRead()}function r(e,t){for(var n=e.from;null!=n;){if(t.indexOf(n.block)>=0)return!0;n=n.upper}return!1}function i(e,t){var i=e.defs.filter(function(e){return"FunctionName"===e.type}).map(function(e){return e.node}),o=i.length>0;return t.some(function(e){return n(e)&&!(o&&r(e,i))})}function o(e){var t=Object.create(null);if("all"===u.vars)for(var r=0,i=e.through.length;i>r;++r){var o=e.through[r],a=o.identifier.name;n(o)&&(t[a]||(t[a]=[]),t[a].push(o))}return t}function a(e,n,r){var o,s,c=e.variables,l=e.childScopes;if("TDZ"!==e.type&&("global"!==e.type||"all"===u.vars))for(o=0,s=c.length;s>o;++o){var p=c[o];if(!("class"===e.type&&e.block.id===p.identifiers[0]||e.functionExpressionScope||p.eslintUsed||"function"===e.type&&"arguments"===p.name&&0===p.identifiers.length)){var f=p.defs[0];if(null!=f){var d=f.type;if("CatchClause"===d)continue;if("Parameter"===d&&"Property"===f.node.parent.type&&"set"===f.node.parent.kind)continue;if("none"===u.args&&"Parameter"===d)continue;if("after-used"===u.args&&"Parameter"===d&&f.index<f.node.params.length-1)continue}var h=("global"===e.type?n[p.name]:null)||p.references;i(p,h)||t(p)||r.push(p)}}for(o=0,s=l.length;s>o;++o)a(l[o],n,r);return r}var s="{{name}} is defined but never used",u={vars:"all",args:"after-used"};return e.options[0]&&("string"==typeof e.options[0]?u.vars=e.options[0]:(u.vars=e.options[0].vars||u.vars,u.args=e.options[0].args||u.args)),{"Program:exit":function(t){for(var n=e.getScope(),r=o(n),i=a(n,r,[]),u=0,c=i.length;c>u;++u){var l=i[u];l.eslintExplicitGlobal?e.report(t,s,l):l.defs.length>0&&e.report(l.identifiers[0],s,l)}}}},t.exports.schema=[{oneOf:[{"enum":["all","local"]},{type:"object",properties:{vars:{"enum":["all","local"]},args:{"enum":["all","after-used","none"]}}}]}]},{}],279:[function(e,t){"use strict";var n="nofunc";t.exports=function(e){function t(e,n){for(var r=0,i=n.variables.length;i>r;r++)if(n.variables[r].name===e)return n.variables[r];return n.upper?t(e,n.upper):void 0}function r(r){function i(t,r){(o!==n||"FunctionName"!==r.defs[0].type)&&r.identifiers[0].range[1]>t.identifier.range[1]&&e.report(t.identifier,"{{a}} was used before it was defined",{a:t.identifier.name})}var o=e.options[0];r.references.forEach(function(e){if(e.resolved&&e.resolved.identifiers.length>0)i(e,e.resolved);else{var n=t(e.identifier.name,r);n&&0!==n.identifiers.length&&i(e,n)}})}function i(){var t=e.getScope();r(t)}return{Program:function(){var t=e.getScope();r(t),(e.ecmaFeatures.globalReturn||e.ecmaFeatures.modules)&&r(t.childScopes[0])},FunctionExpression:i,FunctionDeclaration:i,ArrowFunctionExpression:i}},t.exports.schema=[{"enum":["nofunc"]}]},{}],280:[function(e,t){"use strict";t.exports=function(e){return{VariableDeclaration:function(t){"var"===t.kind&&e.report(t,"Unexpected var, use let or const instead.")}}},t.exports.schema=[]},{}],281:[function(e,t){"use strict";t.exports=function(e){return{UnaryExpression:function(t){"void"===t.operator&&e.report(t,"Expected 'undefined' and instead saw 'void'.")}}},t.exports.schema=[]},{}],282:[function(e,t){"use strict";t.exports=function(e){function t(e){var t,n=e.replace(/[-\/\\$\^*+?.()|\[\]{}]/g,"\\$&"),r=/\w$/.test(e)?"\\b":"";return t="start"===s?"^\\s*":/^\w/.test(e)?"\\b":"",new RegExp(t+n+r,"i")}function n(e){var t=[];return i.forEach(function(n,r){n.test(e)&&t.push(a[r])}),t}function r(t){var r=n(t.value);r.forEach(function(n){e.report(t,"Unexpected "+n+" comment.")})}var i,o=e.options[0]||{},a=o.terms||["todo","fixme","xxx"],s=o.location||"start";return i=a.map(t),{BlockComment:r,LineComment:r}},t.exports.schema=[{type:"object",properties:{terms:{type:"array",items:{type:"string"}},location:{"enum":["start","anywhere"]}},additionalProperties:!1}]},{}],283:[function(e,t){"use strict";t.exports=function(e){return{WithStatement:function(t){e.report(t,"Unexpected use of 'with' statement.")}}},t.exports.schema=[]},{}],284:[function(e,t){"use strict";t.exports=function(e){function t(t){var n,r,i;"ArrowFunctionExpression"===t.type&&/(?:Call|New|Logical|Binary|Conditional|Update)Expression/.test(t.parent.type)||("MemberExpression"!==t.parent.type||t.parent.object!==t)&&(i=/CallExpression|NewExpression/.test(t.parent.type),i&&t.parent.callee===t||(n=e.getTokenBefore(t),r=e.getTokenAfter(t),i&&t.parent.callee.range[1]===n.range[0]||"("===n.value&&")"===r.value&&e.report(t,"Wrapping non-IIFE function literals in parens is unnecessary.")))}return{ArrowFunctionExpression:t,FunctionExpression:t}},t.exports.schema=[]},{}],285:[function(e,t){"use strict";t.exports=function(e){function t(t){return null!=e.options[1]?e.options[1][t]===!c:!1}function n(e,t){return e.range[1]<t.range[0]}function r(e,t){return e.loc.start.line===t.loc.start.line}function i(t,n){e.report(t,n.loc.start,"There should be no space after '"+n.value+"'")}function o(t,n){e.report(t,n.loc.start,"There should be no space before '"+n.value+"'")}function a(t,n){e.report(t,n.loc.start,"A space is required after '"+n.value+"'")}function s(t,n){e.report(t,n.loc.start,"A space is required before '"+n.value+"'")}function u(e,t,u,c,p){var f=l.objectsInObjectsException&&"}"===c.value?!l.spaced:l.spaced;r(t,u)&&(l.spaced&&!n(t,u)&&a(e,t),!l.spaced&&n(t,u)&&i(e,t)),r(c,p)&&(f&&!n(c,p)&&s(e,p),!f&&n(c,p)&&o(e,p))}var c="always"===e.options[0],l={spaced:c,objectsInObjectsException:t("objectsInObjects")};return{ObjectPattern:function(t){var n=t.properties[0],r=t.properties[t.properties.length-1],i=e.getTokenBefore(n),o=e.getFirstToken(n),a=e.getLastToken(r),s=e.getTokenAfter(r);","===s.value&&(a=s,s=e.getTokenAfter(s)),u(t,i,o,a,s)},ImportDeclaration:function(t){var n=t.specifiers[0],r=t.specifiers[t.specifiers.length-1];if(n&&r&&"ImportSpecifier"===n.type&&"ImportSpecifier"===r.type){var i=e.getTokenBefore(n),o=e.getFirstToken(n),a=e.getLastToken(r),s=e.getTokenAfter(r);u(t,i,o,a,s)}},ExportNamedDeclaration:function(t){if(t.specifiers.length){var n=t.specifiers[0],r=t.specifiers[t.specifiers.length-1],i=e.getTokenBefore(n),o=e.getFirstToken(n),a=e.getLastToken(r),s=e.getTokenAfter(r);u(t,i,o,a,s)}},ObjectExpression:function(t){if(0!==t.properties.length){var n=e.getFirstToken(t),r=e.getFirstToken(t,1),i=e.getLastToken(t,1),o=e.getLastToken(t);u(t,n,r,i,o)}}}}},{}],286:[function(e,t){"use strict";var n={always:"always",never:"never",methods:"methods",properties:"properties"};t.exports=function(e){var t=e.options[0]||n.always,r=t===n.methods||t===n.always,i=t===n.properties||t===n.always,o=t===n.never;return{Property:function(t){var n,a=t.method||t.shorthand;o&&a&&(n=t.method?"method":"property",e.report(t,"Expected longform "+n+" syntax.")),o||a||"get"!==t.kind&&"set"!==t.kind&&("FunctionExpression"===t.value.type&&null==t.value.id&&r?e.report(t,"Expected method shorthand."):"Identifier"===t.value.type&&t.key.name===t.value.name&&i?e.report(t,"Expected property shorthand."):"Identifier"===t.value.type&&"Literal"===t.key.type&&t.key.value===t.value.name&&i&&e.report(t,"Expected property shorthand."))
}}},t.exports.schema=[{"enum":["always","methods","properties","never"]}]},{}],287:[function(e,t){"use strict";t.exports=function(e){function t(){h.push({let:{initialized:!1,uninitialized:!1},"const":{initialized:!1,uninitialized:!1}})}function n(){d.push({initialized:!1,uninitialized:!1}),t()}function r(){h.pop()}function i(){d.pop(),r()}function o(e,t,n){for(var r=0;r<t.length;r++)null===t[r].init?f[e]&&f[e].uninitialized===c&&(n.uninitialized=!0):f[e]&&f[e].initialized===c&&(n.initialized=!0)}function a(e){var t;return"var"===e?t=d[d.length-1]:"let"===e?t=h[h.length-1].let:"const"===e&&(t=h[h.length-1].const),t}function s(e){for(var t={uninitialized:0,initialized:0},n=0;n<e.length;n++)null===e[n].init?t.uninitialized++:t.initialized++;return t}function u(e,t){var n=s(t),r=f[e]||{},i=a(e);return r.uninitialized===c&&r.initialized===c&&(i.uninitialized||i.initialized)?!1:n.uninitialized>0&&r.uninitialized===c&&i.uninitialized?!1:n.initialized>0&&r.initialized===c&&i.initialized?!1:(o(e,t,i),!0)}var c="always",l="never",p=e.options[0],f={};"string"==typeof p?(f.var={uninitialized:p,initialized:p},f.let={uninitialized:p,initialized:p},f.const={uninitialized:p,initialized:p}):"object"==typeof p&&(p.hasOwnProperty("var")&&"string"==typeof p.var&&(f.var={uninitialized:p.var,initialized:p.var}),p.hasOwnProperty("let")&&"string"==typeof p.let&&(f.let={uninitialized:p.let,initialized:p.let}),p.hasOwnProperty("const")&&"string"==typeof p.const&&(f.const={uninitialized:p.const,initialized:p.const}),p.hasOwnProperty("uninitialized")&&(f.var||(f.var={}),f.let||(f.let={}),f.const||(f.const={}),f.var.uninitialized=p.uninitialized,f.let.uninitialized=p.uninitialized,f.const.uninitialized=p.uninitialized),p.hasOwnProperty("initialized")&&(f.var||(f.var={}),f.let||(f.let={}),f.const||(f.const={}),f.var.initialized=p.initialized,f.let.initialized=p.initialized,f.const.initialized=p.initialized));var d=[],h=[];return{Program:n,FunctionDeclaration:n,FunctionExpression:n,ArrowFunctionExpression:n,BlockStatement:t,ForStatement:t,SwitchStatement:t,VariableDeclaration:function(t){var n,r,i,o=t.parent;if(n=t.kind,f[n]&&(r=t.declarations,i=s(r),u(n,r)||(f[n].initialized===c&&f[n].uninitialized===c?e.report(t,"Combine this with the previous '"+n+"' statement."):(f[n].initialized===c&&e.report(t,"Combine this with the previous '"+n+"' statement with initialized variables."),f[n].uninitialized===c&&e.report(t,"Combine this with the previous '"+n+"' statement with uninitialized variables."))),"ForStatement"!==o.type||o.init!==t)){var a=i.uninitialized+i.initialized;a>1&&(f[n].initialized===l&&f[n].uninitialized===l?e.report(t,"Split '"+n+"' declarations into multiple statements."):f[n].initialized===l&&i.initialized>0?e.report(t,"Split initialized '"+n+"' declarations into multiple statements."):f[n].uninitialized===l&&i.uninitialized>0&&e.report(t,"Split uninitialized '"+n+"' declarations into multiple statements."))}},"ForStatement:exit":r,"SwitchStatement:exit":r,"BlockStatement:exit":r,"Program:exit":i,"FunctionDeclaration:exit":i,"FunctionExpression:exit":i,"ArrowFunctionExpression:exit":i}},t.exports.schema=[{oneOf:[{"enum":["always","never"]},{type:"object",properties:{"var":{"enum":["always","never"]},let:{"enum":["always","never"]},"const":{"enum":["always","never"]}},additionalProperties:!1},{type:"object",properties:{initialized:{"enum":["always","never"]},uninitialized:{"enum":["always","never"]}},additionalProperties:!1}]}]},{}],288:[function(e,t){"use strict";function n(e){return["*","&","^","|"].indexOf(e)>=0}function r(e){return["+","-","/","%","<<",">>",">>>"].indexOf(e)>=0}function i(e,t){if(e.type!==t.type)return!1;switch(e.type){case"Identifier":return e.name===t.name;case"Literal":return e.value===t.value;case"MemberExpression":return i(e.object,t.object)&&i(e.property,t.property);default:return!1}}t.exports=function(e){function t(t){var o,a,s;"="===t.operator&&"BinaryExpression"===t.right.type&&(a=t.left,o=t.right,s=o.operator,n(s)?(i(a,o.left)||i(a,o.right))&&e.report(t,"Assignment can be replaced with operator assignment."):r(s)&&i(a,o.left)&&e.report(t,"Assignment can be replaced with operator assignment."))}function o(t){"="!==t.operator&&e.report(t,"Unexpected operator assignment shorthand.")}return{AssignmentExpression:"never"!==e.options[0]?t:o}},t.exports.schema=[{"enum":["always","never"]}]},{}],289:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.loc.end.line===t.loc.start.line}function n(n){for(var i=e.getLastToken(n.left||n.id),o=e.getTokenAfter(i);")"===o.value;)i=o,o=e.getTokenAfter(o);var a=e.getTokenAfter(o),s=o.value;t(i,o)&&t(o,a)||(t(i,o)||t(o,a)?"before"===r&&t(i,o)?e.report(n,{line:o.loc.end.line,column:o.loc.end.column},"'"+s+"' should be placed at the beginning of the line."):"after"===r&&t(o,a)?e.report(n,{line:o.loc.end.line,column:o.loc.end.column},"'"+s+"' should be placed at the end of the line."):"none"===r&&e.report(n,{line:o.loc.end.line,column:o.loc.end.column},"There should be no line break before or after '"+s+"'"):e.report(n,{line:o.loc.end.line,column:o.loc.end.column},"Bad line breaking before and after '"+s+"'."))}var r=e.options[0]||"after";return{BinaryExpression:n,LogicalExpression:n,AssignmentExpression:n,VariableDeclarator:function(e){e.init&&n(e)}}},t.exports.schema=[{"enum":["after","before","none"]}]},{}],290:[function(e,t){"use strict";t.exports=function(e){function t(t){var n=t.loc.start.line,r=t.body[0],i=r.loc.start.line,o=n+2,a=e.getComments(r).leading;return a.length>0&&(i=a[0].loc.start.line),i>=o}function n(t){var n=t.loc.end.line,r=t.body[t.body.length-1],i=e.getLastToken(r).loc.end.line,o=n-2,a=e.getComments(r).trailing;return a.length>0&&(i=a[a.length-1].loc.end.line),o>=i}function r(r){if(r.body.length>0){var s=t(r),u=n(r);i?(s||e.report(r,o),u||e.report(r,r.loc.end,o)):(s&&e.report(r,a),u&&e.report(r,r.loc.end,a))}}var i="never"!==e.options[0],o="Block must be padded by blank lines.",a="Block must not be padded by blank lines.";return{BlockStatement:r}},t.exports.schema=[{"enum":["always","never"]}]},{}],291:[function(e,t){"use strict";t.exports=function(e){function t(e){return e.init===!0}function n(e){return e.isReadOnly()||e.init===!0}function r(r){if("TDZ"!==r.type)for(var i=r.variables,o=0,a=i.length;a>o;++o){var s=i[o],u=s.defs[0],c=u&&u.parent,l=c&&c.parent,p=s.references,f=s.identifiers[0];null!=l&&null!=f&&"VariableDeclaration"===c.type&&"let"===c.kind&&("ForStatement"!==l.type||l.init!==c)&&p.some(t)&&p.every(n)&&e.report(f,"`{{name}}` is never modified, use `const` instead.",{name:f.name})}}var i=Function.apply.bind(Array.prototype.push);return{"Program:exit":function(){for(var t=[e.getScope()];t.length;){var n=t.pop();i(t,n.childScopes),r(n)}}}},t.exports.schema=[]},{}],292:[function(e,t){"use strict";var n=e("espree");t.exports=function(e){function t(t){var r,i=t.key;if("Literal"===i.type&&"string"==typeof i.value){try{r=n.tokenize(i.value)}catch(o){return}1===r.length&&(["Identifier","Null","Boolean"].indexOf(r[0].type)>=0||"Numeric"===r[0].type&&""+ +r[0].value===r[0].value)&&e.report(t,"Unnecessarily quoted property `{{value}}` found.",i)}}function r(t){var n=t.key;t.method||"Literal"===n.type&&"string"==typeof n.value||e.report(t,"Unquoted property `{{key}}` found.",{key:n.name||n.value})}var i=e.options[0];return{Property:"as-needed"===i?t:r}},t.exports.schema=[{"enum":["always","as-needed"]}]},{espree:"espree"}],293:[function(e,t){"use strict";var n={"double":{quote:'"',alternateQuote:"'",description:"doublequote"},single:{quote:"'",alternateQuote:'"',description:"singlequote"},backtick:{quote:"`",alternateQuote:'"',description:"backtick"}},r="avoid-escape";t.exports=function(e){function t(e,t){return e[0]===t&&e[e.length-1]===t}function i(e){return 0===e.type.indexOf("JSX")}return{Literal:function(o){var a,s=o.value,u=o.raw,c=e.options[0],l=n[c||"double"],p=e.options[1]===r;l&&"string"==typeof s&&(a=i(o.parent)||t(u,l.quote),!a&&p&&(a=t(u,l.alternateQuote)&&u.indexOf(l.quote)>=0),a||e.report(o,"Strings must use "+l.description+"."))}}},t.exports.schema=[{"enum":["single","double","backtick"]},{"enum":["avoid-escape"]}]},{}],294:[function(e,t){"use strict";t.exports=function(e){return{CallExpression:function(t){var n;"parseInt"===t.callee.name&&(t.arguments.length<2?e.report(t,"Missing radix parameter."):(n=t.arguments[1],("Literal"===n.type&&"number"!=typeof n.value||"Identifier"===n.type&&"undefined"===n.name)&&e.report(t,"Invalid radix parameter.")))}}},t.exports.schema=[]},{}],295:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.range[1]<t.range[0]}function n(e,t){return e.loc.end.line===t.loc.start.line}function r(r){var i=e.getTokenBefore(r);return i&&n(i,r)&&t(i,r)}function i(r){var i=e.getTokenAfter(r);return i&&n(r,i)&&t(r,i)}function o(t){var r=e.getTokenAfter(t);return!(r&&n(t,r))}function a(e){return"Punctuator"===e.type&&";"===e.value}function s(t,n){var s;a(t)&&(s=t.loc.start,r(t)?l||e.report(n,s,"Unexpected whitespace before semicolon."):l&&e.report(n,s,"Missing whitespace before semicolon."),o(t)||(i(t)?p||e.report(n,s,"Unexpected whitespace after semicolon."):p&&e.report(n,s,"Missing whitespace after semicolon.")))}function u(t){var n=e.getLastToken(t);s(n,t)}var c=e.options[0],l=!1,p=!0;return"object"==typeof c&&(c.hasOwnProperty("before")&&(l=c.before),c.hasOwnProperty("after")&&(p=c.after)),{VariableDeclaration:u,ExpressionStatement:u,BreakStatement:u,ContinueStatement:u,DebuggerStatement:u,ReturnStatement:u,ThrowStatement:u,ForStatement:function(t){t.init&&s(e.getTokenAfter(t.init),t),t.test&&s(e.getTokenAfter(t.test),t)}}},t.exports.schema=[{type:"object",properties:{before:{type:"boolean"},after:{type:"boolean"}},additionalProperties:!1}]},{}],296:[function(e,t){"use strict";t.exports=function(e){function t(t){var n=s?"Missing semicolon.":"Extra semicolon.";e.report(t,e.getLastToken(t).loc.end,n)}function n(e){return"Punctuator"===e.type&&";"===e.value}function r(t){var r,i,o,s,u;return n(t)?(s=e.getTokenAfter(t))?(o=t.loc.end.line,u=s.loc.start.line,i=a.test(s.value),r="}"===s.value||";"===s.value,o!==u&&!i||r):!0:!1}function i(i){var o=e.getLastToken(i);s?n(o)||t(i):r(o)&&t(i)}function o(t){var n=e.getAncestors(),r=n.length-1,o=n[r];"ForStatement"===o.type&&o.init===t||/^For(?:In|Of)Statement/.test(o.type)&&o.left===t||i(t)}var a=/[\[\(\/\+\-]/,s="never"!==e.options[0];return{VariableDeclaration:o,ExpressionStatement:i,ReturnStatement:i,ThrowStatement:i,DebuggerStatement:i,BreakStatement:i,ContinueStatement:i,ImportDeclaration:i,ExportAllDeclaration:i,ExportNamedDeclaration:function(e){e.declaration||i(e)},ExportDefaultDeclaration:function(e){/(?:Class|Function)Declaration/.test(e.declaration.type)||i(e)}}},t.exports.schema=[{"enum":["always","never"]}]},{}],297:[function(e,t){"use strict";t.exports=function(e){var t=e.options[0]||{},n=t.ignoreCase||!1;return{VariableDeclaration:function(t){t.declarations.reduce(function(t,r){var i=t.id.name,o=r.id.name;return n&&(i=i.toLowerCase(),o=o.toLowerCase()),i>o?(e.report(r,"Variables within the same declaration block should be sorted alphabetically"),t):r},t.declarations[0])}}},t.exports.schema=[{type:"object",properties:{ignoreCase:{type:"boolean"}},additionalProperties:!1}]},{}],298:[function(e,t){"use strict";t.exports=function(e){function t(t){var r=e.getFirstTokens(t,3),i=r[1].range[1]<r[2].range[0];i!==n&&e.report(t,'Function name "{{name}}" must {{not}}be followed by whitespace.',{name:t.id.name,not:n?"":"not "})}var n="always"===e.options[0];return{FunctionDeclaration:t,FunctionExpression:function(e){e.id&&t(e)}}},t.exports.schema=[{"enum":["always","never"]}]},{}],299:[function(e,t){"use strict";t.exports=function(e){function t(t,n,i){var o=n.range[1]<i.range[0],a=n.value;o!==r&&e.report(t,'Keyword "{{value}}" must {{not}}be followed by whitespace.',{value:a,not:r?"":"not "})}function n(n){var r=e.getFirstTokens(n,2);t(n,r[0],r[1])}var r="never"!==e.options[0];return{IfStatement:function(r){n(r),r.alternate&&"IfStatement"!==r.alternate.type&&t(r.alternate,e.getTokenBefore(r.alternate),e.getFirstToken(r.alternate))},ForStatement:n,ForOfStatement:n,ForInStatement:n,WhileStatement:n,DoWhileStatement:function(r){n(r);var i=e.getTokensBefore(r.test,2);t(r,i[0],i[1])},SwitchStatement:n,TryStatement:function(r){n(r),r.finalizer&&t(r.finalizer,e.getTokenBefore(r.finalizer),e.getFirstToken(r.finalizer))},CatchStatement:n,WithStatement:n}},t.exports.schema=[{"enum":["always","never"]}]},{}],300:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.range[1]<t.range[0]}function n(e,t){return e.loc.start.line===t.loc.start.line}function r(r){var i,a=e.getTokenBefore(r);a&&n(a,r)&&(i=t(a,r),o?i||e.report(r,"Missing space before opening brace."):i&&e.report(r,"Unexpected space before opening brace."))}function i(t){var n,i,o=t.cases;o.length>0?(n=o[0],i=e.getTokenBefore(n)):i=e.getLastToken(t,1),r(i)}var o="never"!==e.options[0];return{BlockStatement:r,SwitchStatement:i}},t.exports.schema=[{"enum":["always","never"]}]},{}],301:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.range[1]<t.range[0]}function n(t){var n;return t.id?!0:(n=e.getAncestors().pop(),"MethodDefinition"===n.type||"Property"===n.type&&("get"===n.kind||"set"===n.kind||n.method))}function r(r){var i,s,u,c,l=n(r);(!r.generator||l)&&(i=e.getTokens(r),r.generator?r.id?(s=i[2],u=i[3]):(s=e.getTokenBefore(r),u=i[0]):l?r.id?(s=i[1],u=i[2]):(s=e.getTokenBefore(r),u=i[0]):(s=i[0],u=i[1]),c=s.loc.end,t(s,u)?(l&&!a||!l&&!o)&&e.report(r,c,"Unexpected space before function parentheses."):(l&&a||!l&&o)&&e.report(r,c,"Missing space before function parentheses."))}var i=e.options[0],o=!0,a=!0;return"object"==typeof i?(o="never"!==i.anonymous,a="never"!==i.named):"never"===i&&(o=!1,a=!1),{FunctionDeclaration:r,FunctionExpression:r}},t.exports.schema=[{oneOf:[{"enum":["always","never"]},{type:"object",properties:{anonymous:{"enum":["always","never"]},named:{"enum":["always","never"]}},additionalProperties:!1}]}]},{}],302:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return e.range[1]<t.range[0]}function n(t){var n;return t.id?!0:(n=e.getAncestors().pop(),"MethodDefinition"===n.type||"Property"===n.type&&("get"===n.kind||"set"===n.kind||n.method))}function r(r){var i,s,u,c,l=n(r);(!r.generator||l)&&(i=e.getTokens(r),r.generator?r.id?(s=i[2],u=i[3]):(s=e.getTokenBefore(r),u=i[0]):l?r.id?(s=i[1],u=i[2]):(s=e.getTokenBefore(r),u=i[0]):(s=i[0],u=i[1]),c=s.loc.end,t(s,u)?(l&&!a||!l&&!o)&&e.report(r,c,"Unexpected space before function parentheses."):(l&&a||!l&&o)&&e.report(r,c,"Missing space before function parentheses."))}var i=e.options[0],o=!0,a=!0;return"object"==typeof i?(o="never"!==i.anonymous,a="never"!==i.named):"never"===i&&(o=!1,a=!1),{FunctionDeclaration:r,FunctionExpression:r}},t.exports.schema=[{oneOf:[{"enum":["always","never"]},{type:"object",properties:{anonymous:{"enum":["always","never"]},named:{"enum":["always","never"]}},additionalProperties:!1}]}]},{}],303:[function(e,t){"use strict";t.exports=function(e){function t(t){return null!=e.options[1]?e.options[1][t]===!c:!1}function n(e,t){return e.range[1]<t.range[0]}function r(e,t){return e.loc.start.line===t.loc.start.line}function i(t,n){e.report(t,n.loc.start,"There should be no space after '"+n.value+"'")}function o(t,n){e.report(t,n.loc.start,"There should be no space before '"+n.value+"'")}function a(t,n){e.report(t,n.loc.start,"A space is required after '"+n.value+"'")}function s(t,n){e.report(t,n.loc.start,"A space is required before '"+n.value+"'")}function u(e,t,u,c,p){var f=l.arraysInObjectsException&&"]"===c.value||l.objectsInObjectsException&&"}"===c.value?!l.spaced:l.spaced;r(t,u)&&(l.spaced&&!n(t,u)&&a(e,t),!l.spaced&&n(t,u)&&i(e,t)),r(c,p)&&(f&&!n(c,p)&&s(e,p),!f&&n(c,p)&&o(e,p))}var c="always"===e.options[0],l={spaced:c,singleElementException:t("singleValue"),objectsInArraysException:t("objectsInArrays"),arraysInArraysException:t("arraysInArrays"),arraysInObjectsException:t("arraysInObjects"),objectsInObjectsException:t("objectsInObjects"),propertyNameException:t("propertyName")};return{MemberExpression:function(t){if(t.computed){var u=t.property,c=e.getTokenBefore(u),p=e.getFirstToken(u),f=e.getLastToken(u),d=e.getTokenAfter(u),h=l.propertyNameException?!l.spaced:l.spaced;r(c,p)&&(h?!n(c,p)&&r(c,p)&&a(t,c):n(c,p)&&i(t,c)),r(f,d)&&(h?!n(f,d)&&r(f,d)&&s(t,d):n(f,d)&&o(t,d))}},ArrayExpression:function(t){if(0!==t.elements.length){var u=e.getFirstToken(t),c=e.getFirstToken(t,1),p=e.getLastToken(t,1),f=e.getLastToken(t),d=l.objectsInArraysException&&"{"===c.value||l.arraysInArraysException&&"["===c.value||l.singleElementException&&1===t.elements.length?!l.spaced:l.spaced,h=l.objectsInArraysException&&"}"===p.value||l.arraysInArraysException&&"]"===p.value||l.singleElementException&&1===t.elements.length?!l.spaced:l.spaced;r(u,c)&&(d&&!n(u,c)&&a(t,u),!d&&n(u,c)&&i(t,u)),r(p,f)&&(h&&!n(p,f)&&s(t,f),!h&&n(p,f)&&o(t,f))}},ImportDeclaration:function(t){var n=t.specifiers[0],r=t.specifiers[t.specifiers.length-1];if(n&&r&&"ImportSpecifier"===n.type&&"ImportSpecifier"===r.type){var i=e.getTokenBefore(n),o=e.getFirstToken(n),a=e.getLastToken(r),s=e.getTokenAfter(r);u(t,i,o,a,s)}},ExportNamedDeclaration:function(t){if(t.specifiers.length){var n=t.specifiers[0],r=t.specifiers[t.specifiers.length-1],i=e.getTokenBefore(n),o=e.getFirstToken(n),a=e.getLastToken(r),s=e.getTokenAfter(r);u(t,i,o,a,s)}},ObjectExpression:function(t){if(0!==t.properties.length){var n=e.getFirstToken(t),r=e.getFirstToken(t,1),i=e.getLastToken(t,1),o=e.getLastToken(t);u(t,n,r,i,o)}}}},t.exports.schema=[{"enum":["always","never"]},{type:"object",properties:{singleValue:{type:"boolean"},objectsInArrays:{type:"boolean"},arraysInArrays:{type:"boolean"},arraysInObjects:{type:"boolean"},objectsInObjects:{type:"boolean"},propertyName:{type:"boolean"}},additionalProperties:!1}]},{}],304:[function(e,t){"use strict";t.exports=function(e){function t(e){var t,n,r=[],i=[],o=["\\s"],a=["\\s"];return e.braceException&&(r.push("\\{"),i.push("\\}"),o.push("\\{"),a.push("\\}")),e.bracketException&&(r.push("\\["),i.push("\\]"),o.push("\\["),a.push("\\]")),e.parenException&&(r.push("\\("),i.push("\\)"),o.push("\\("),a.push("\\)")),e.empty&&(r.push("\\)"),i.push("\\("),o.push("\\)"),a.push("\\(")),r.length&&(t="\\(("+r.join("|")+")",i.length&&(t+="|")),i.length&&(t+="("+i.join("|")+")\\)"),n="\\( +[^"+o.join("")+"]",n+="|[^"+a.join("")+"] +\\)",{missingSpace:t||".^",rejectedSpace:n}}function n(e){var t,n,r=["\\s","\\)"],i=["\\s","\\("],o=[],a=[];return e.braceException&&(r.push("\\{"),i.push("\\}"),o.push(" \\{"),a.push("\\} ")),e.bracketException&&(r.push("\\["),i.push("\\]"),o.push(" \\["),a.push("\\] ")),e.parenException&&(r.push("\\("),i.push("\\)"),o.push(" \\("),a.push("\\) ")),e.empty&&(o.push(" \\)"),a.push("\\( ")),t="\\([^"+r.join("")+"]",t+="|[^"+i.join("")+"]\\)",o.length&&(n="\\(("+o.join("|")+")",a.length&&(n+="|")),a.length&&(n+="("+a.join("|")+")\\)"),{missingSpace:t,rejectedSpace:n||".^"}}function r(e){d.push(e.range)}function i(){d.sort(function(e,t){return e[0]-t[0]})}function o(e){var t,n,r;for(t=0,n=d.length;n>t&&(r=d[t],!(e<r[0]));t+=1)if(e<r[1])return!0;return!1}var a,s,u,c="There must be a space inside this paren.",l="There should be no spaces inside this paren.",p=2===e.options.length?e.options[1].exceptions:[],f={};p&&p.length&&(f.braceException=-1!==p.indexOf("{}")||!1,f.bracketException=-1!==p.indexOf("[]")||!1,f.parenException=-1!==p.indexOf("()")||!1,f.empty=-1!==p.indexOf("empty")||!1),u="always"===e.options[0]?n(f):t(f),s=new RegExp(u.missingSpace,"mg"),a=new RegExp(u.rejectedSpace,"mg");var d=[];return{"Program:exit":function(t){function n(n,r){if("("!==d.charAt(n.index)&&(n.index+=1),!o(n.index)){for(;-1!==(u=d.indexOf("\n",h))&&u<n.index;)h=u+1,f+=1;p=n.index-h,e.report(t,{line:f,column:p},r)}}var r,u,p,f=1,d=e.getSource(),h=0;for(i();null!==(r=a.exec(d));)n(r,l);for(;null!==(r=s.exec(d));)n(r,c)},LineComment:r,BlockComment:r,Literal:r}},t.exports.schema=[{"enum":["always","never"]},{type:"object",properties:{exceptions:{type:"array",items:{"enum":["{}","[]","()","empty"]},uniqueItems:!0}},additionalProperties:!1}]},{}],305:[function(e,t){"use strict";t.exports=function(e){function t(t,n){for(var r,i=e.getTokensBetween(t,n,1),o=1,a=i.length-1;a>o;++o)if(r=i[o],"Punctuator"===r.type&&s.indexOf(r.value)>=0&&(i[o-1].range[1]>=r.range[0]||r.range[1]>=i[o+1].range[0]))return r;return null}function n(t,n){e.report(t,n.loc.start,"Infix operators must be spaced.")}function r(r){var i=t(r.left,r.right);i&&(a&&"|0"===e.getSource(r).substr(-2)||n(r,i))}function i(e){var r=t(e.test,e.consequent),i=t(e.consequent,e.alternate);r?n(e,r):i&&n(e,i)}function o(e){var r;e.init&&(r=t(e.id,e.init),r&&n(e,r))}var a=e.options[0]?e.options[0].int32Hint===!0:!1,s=["*","/","%","+","-","<<",">>",">>>","<","<=",">",">=","in","instanceof","==","!=","===","!==","&","^","|","&&","||","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","^=","|=","?",":",","];return{AssignmentExpression:r,BinaryExpression:r,LogicalExpression:r,ConditionalExpression:i,VariableDeclarator:o}},t.exports.schema=[{type:"object",properties:{int32Hint:{type:"boolean"}},additionalProperties:!1}]},{}],306:[function(e,t){"use strict";t.exports=function(e){function t(t){var n=e.getFirstTokens(t,2),r=n[0].value;n[0].range[1]>=n[1].range[0]&&e.report(t,'Keyword "'+r+'" must be followed by whitespace.')}return{ReturnStatement:function(e){e.argument&&t(e)},SwitchCase:function(e){e.test&&t(e)},ThrowStatement:t}},t.exports.schema=[]},{}],307:[function(e,t){"use strict";t.exports=function(e){function t(e){return e&&e.parent&&"UnaryExpression"===e.parent.type&&"!"===e.parent.operator}function n(e){return e.argument&&e.argument.type&&"ObjectExpression"===e.argument.type}function r(t,r,i){o.words&&i.range[0]===r.range[1]&&e.report(t,'Unary word operator "'+r.value+'" must be followed by whitespace.'),!o.words&&n(t)&&i.range[0]>r.range[1]&&e.report(t,'Unexpected space after unary word operator "'+r.value+'".')}function i(n){var i=e.getFirstTokens(n,2),a=i[0],s=i[1];if(("NewExpression"===n.type||n.prefix)&&"Keyword"===a.type)return r(n,a,s),void 0;if(o.nonwords)if(n.prefix){if(t(n))return void 0;a.range[1]===s.range[0]&&e.report(n,'Unary operator "'+a.value+'" must be followed by whitespace.')}else a.range[1]===s.range[0]&&e.report(n,'Space is required before unary expressions "'+s.value+'".');else n.prefix?s.range[0]>a.range[1]&&e.report(n,'Unexpected space after unary operator "'+a.value+'".'):s.range[0]>a.range[1]&&e.report(n,'Unexpected space before unary operator "'+s.value+'".')}var o=e.options&&Array.isArray(e.options)&&e.options[0]||{words:!0,nonwords:!1};return{UnaryExpression:i,UpdateExpression:i,NewExpression:i}},t.exports.schema=[{type:"object",properties:{words:{type:"boolean"},nonwords:{type:"boolean"}},additionalProperties:!1}]},{}],308:[function(e,t){"use strict";t.exports=function(e){function t(e){return e.replace(/([.*+?${}()|\^\[\]\/\\])/g,"\\$1")}function n(e){return"Block"===e.type&&c.test(e.value)}function r(t){var r="Block"===t.type?"/*":"//";if(a){if(0===t.value.length)return;if(n(t))return;if(h&&u.test(t.value))return;0!==t.value.indexOf(" ")&&0!==t.value.indexOf("	")&&0!==t.value.indexOf("\n")&&(f&&!s.test(t.value)?e.report(t,"Expected exception block, space or tab after "+r+" in comment."):f||e.report(t,"Expected space or tab after "+r+" in comment."))}else if((0===t.value.indexOf(" ")||0===t.value.indexOf("	"))&&e.report(t,"Unexpected space or tab after "+r+" in comment."),h&&u.test(t.value)){var i=t.value.match(u),o=i.length?i[0]:"";e.report(t,"Unexpected space or tab after marker ("+o+") in comment.")}}var i,o,a="never"!==e.options[0],s=new RegExp(" "),u=new RegExp(" "),c=new RegExp("((^(\\*)))[ \\n]"),l=2===e.options.length,p=l?e.options[1]:{},f=l&&p.exceptions&&p.exceptions.length,d=f?p.exceptions:[],h=l&&p.markers&&p.markers.length,m=h?p.markers:[];return f&&(i=d.map(t),s=new RegExp("(^("+i.join(")+$)|(^(")+")+$)")),h&&(o=m.map(t),u=new RegExp("((^("+o.join("))|(^(")+")))[ \\t\\n]")),{LineComment:r,BlockComment:r}},t.exports.schema=[{"enum":["always","never"]},{type:"object",properties:{exceptions:{type:"array",items:{type:"string"}},markers:{type:"array",items:{type:"string"}}},additionalProperties:!1}]},{}],309:[function(e,t){"use strict";t.exports=function(e){var t,n="never"!==e.options[0],r=new RegExp(" "),i=2===e.options.length,o=i?e.options[1].exceptions:[];return o.length&&(t=o.map(function(e){return e.replace(/([.*+?${}()|\^\[\]\/\\])/g,"\\$1")}),r=new RegExp("(^("+t.join(")+$)|(^(")+")+$)")),{LineComment:function(t){if(n){if(0===t.value.length)return;0!==t.value.indexOf(" ")&&0!==t.value.indexOf("	")&&(i&&!r.test(t.value)?e.report(t,"Expected exception block, space or tab after // in comment."):i||e.report(t,"Expected space or tab after // in comment."))}else(0===t.value.indexOf(" ")||0===t.value.indexOf("	"))&&e.report(t,"Unexpected space or tab after // in comment.")}}},t.exports.schema=[{"enum":["always","never"]},{type:"object",properties:{exceptions:{type:"array",items:{type:"string"}}},additionalProperties:!1}]},{}],310:[function(e,t){"use strict";function n(e){var t,n,r=[];for(t=0;t<e.length&&(n=e[t],"ExpressionStatement"===n.type&&"Literal"===n.expression.type&&"use strict"===n.expression.value);t++)r[t]=n;return r}var r={"function":'Use the function form of "use strict".',global:'Use the global form of "use strict".',multiple:'Multiple "use strict" directives.',never:"Strict mode is not permitted.",unnecessary:'Unnecessary "use strict" directive.'};t.exports=function(e){function t(t,n){var r;if(Array.isArray(t))for(r=0;r<t.length;r++)e.report(t[r],n);else e.report(t,n)}function i(e){return e&&"ExpressionStatement"===e.type&&"use strict"===e.expression.value}function o(t){var n=!1,r="Program"===t.type,o=1===f.length,a=f.length?f[f.length-1]:!1;n=l?!0:r?i(t.body[0])||a:t.body.body&&i(t.body.body[0])||a,f.push(n),a||n||!o||e.report(t,'Missing "use strict" statement.')}function a(){f.pop()}function s(e){var i=n(e.body.body),o=0===f.length,a=l||f.length&&f[f.length-1],s=i.length>0||l;s?(a&&i.length&&t(i[0],r.unnecessary),t(i.slice(1),r.multiple)):o&&!l&&t(e,r.function),f.push(a||s)}function u(){f.pop()}var c=e.options[0],l=e.ecmaFeatures.modules,p={},f=[];return p.deprecated={Program:o,FunctionDeclaration:o,FunctionExpression:o,ArrowFunctionExpression:o,"Program:exit":a,"FunctionDeclaration:exit":a,"FunctionExpression:exit":a,"ArrowFunctionExpression:exit":a},p.never={Program:function(e){t(n(e.body),r.never)},FunctionDeclaration:function(e){t(n(e.body.body),r.never)},FunctionExpression:function(e){t(n(e.body.body),r.never)}},p.global={Program:function(e){var i=n(e.body);!l&&e.body.length&&i.length<1?t(e,r.global):l?t(i,r.unnecessary):t(i.slice(1),r.multiple)},FunctionDeclaration:function(e){t(n(e.body.body),r.global)},FunctionExpression:function(e){t(n(e.body.body),r.global)}},p.function={Program:function(e){t(n(e.body),r.function)},FunctionDeclaration:s,FunctionExpression:s,"FunctionDeclaration:exit":u,"FunctionExpression:exit":u},p[c||"deprecated"]},t.exports.schema=[{"enum":["never","global","function"]}]},{}],311:[function(e,t){"use strict";t.exports=function(e){return{BinaryExpression:function(t){!/^(?:[<>]|[!=]=)=?$/.test(t.operator)||"NaN"!==t.left.name&&"NaN"!==t.right.name||e.report(t,"Use the isNaN function to compare with NaN.")}}},t.exports.schema=[]},{}],312:[function(e,t){"use strict";var n=e("doctrine");t.exports=function(e){function t(){l.push({returnPresent:!1})}function r(e){var t=l[l.length-1];t&&null!==e.argument&&(t.returnPresent=!0)}function i(t){var r,i=e.getJSDocComment(t),o=l.pop(),p=!1,f=!1,d=Object.create(null);if(i){try{r=n.parse(i.value,{strict:!0,unwrap:!0,sloppy:!0})}catch(h){return/braces/i.test(h.message)?e.report(i,"JSDoc type missing brace."):e.report(i,"JSDoc syntax error."),void 0}r.tags.forEach(function(t){switch(t.title){case"param":t.type||e.report(i,"Missing JSDoc parameter type for '{{name}}'.",{name:t.name}),!t.description&&u&&e.report(i,"Missing JSDoc parameter description for '{{name}}'.",{name:t.name}),d[t.name]?e.report(i,"Duplicate JSDoc parameter '{{name}}'.",{name:t.name}):-1===t.name.indexOf(".")&&(d[t.name]=1);break;case"return":case"returns":p=!0,s||o.returnPresent||"void"===t.type.name||"undefined"===t.type.name?(t.type||e.report(i,"Missing JSDoc return type."),"void"!==t.type.name&&!t.description&&c&&e.report(i,"Missing JSDoc return description.")):e.report(i,"Unexpected @"+t.title+" tag; function has no return statement.");break;case"constructor":case"class":f=!0}a.hasOwnProperty(t.title)&&e.report(i,"Use @{{name}} instead.",{name:a[t.title]})}),p||f||(s||o.returnPresent)&&e.report(i,"Missing JSDoc @returns for function.");var m=Object.keys(d);t.params.forEach(function(t,n){var r=t.name;"Identifier"===t.type&&(m[n]&&r!==m[n]?e.report(i,"Expected JSDoc for '{{name}}' but found '{{jsdocName}}'.",{name:r,jsdocName:m[n]}):d[r]||e.report(i,"Missing JSDoc for parameter '{{name}}'.",{name:r}))})}}var o=e.options[0]||{},a=o.prefer||{},s=o.requireReturn!==!1,u=o.requireParamDescription!==!1,c=o.requireReturnDescription!==!1,l=[];return{ArrowFunctionExpression:t,FunctionExpression:t,FunctionDeclaration:t,"ArrowFunctionExpression:exit":i,"FunctionExpression:exit":i,"FunctionDeclaration:exit":i,ReturnStatement:r}},t.exports.schema=[{type:"object",properties:{prefer:{type:"object",additionalProperties:{type:"string"}},requireReturn:{type:"boolean"},requireParamDescription:{type:"boolean"},requireReturnDescription:{type:"boolean"}},additionalProperties:!1}]},{doctrine:11}],313:[function(e,t){"use strict";t.exports=function(e){var t=["symbol","undefined","object","boolean","number","string","function"],n=["==","===","!=","!=="];return{UnaryExpression:function(r){var i,o;"typeof"===r.operator&&(i=e.getAncestors().pop(),"BinaryExpression"===i.type&&-1!==n.indexOf(i.operator)&&(o=i.left===r?i.right:i.left,"Literal"===o.type&&-1===t.indexOf(o.value)&&e.report(o,"Invalid typeof comparison value")))}}},t.exports.schema=[]},{}],314:[function(e,t){"use strict";t.exports=function(e){function t(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value}function n(e){return"ImportDeclaration"===e.type||"ImportSpecifier"===e.type||"ImportDefaultSpecifier"===e.type||"ImportNamespaceSpecifier"===e.type}function r(e,r){for(var i=0,o=r.length;o>i&&(t(r[i])||n(r[i]));++i);for(;o>i;++i){if("VariableDeclaration"!==r[i].type)return!1;if(r[i]===e)return!0}}function i(t,n){r(t,n.body)||e.report(t,a)}function o(t,n,i){/Function/.test(i.type)&&"BlockStatement"===n.type&&r(t,n.body)||e.report(t,a)}var a='All "var" declarations must be at the top of the function scope.';return{VariableDeclaration:function(t){var n=e.getAncestors(),r=n.pop(),a=n.pop();"var"===t.kind&&("Program"===r.type?i(t,r):o(t,r,a))}}},t.exports.schema=[]},{}],315:[function(e,t){"use strict";t.exports=function(e){function t(t){var n=e.getTokenBefore(t),r=e.getTokenAfter(t);return n&&"("===n.value&&r&&")"===r.value}var n=e.options[0]||"outside";return{CallExpression:function(r){if("FunctionExpression"===r.callee.type){var i=t(r),o=t(r.callee);i||o?"inside"!==n||o?"outside"!==n||i||e.report(r,"Move the invocation into the parens that contain the function."):e.report(r,"Wrap only the function expression in parens."):e.report(r,"Wrap an immediate function invocation in parentheses.")}}}},t.exports.schema=[{"enum":["outside","inside","any"]}]},{}],316:[function(e,t){"use strict";t.exports=function(e){return{Literal:function(t){var n,r,i,o=e.getFirstToken(t),a=o.type;"RegularExpression"===a&&(n=e.getTokenBefore(t),i=e.getAncestors(),r=i[i.length-1],"MemberExpression"!==r.type||r.object!==t||n&&"("===n.value||e.report(t,"Wrap the regexp literal in parens to disambiguate the slash."))}}},t.exports.schema=[]},{}],317:[function(e,t){"use strict";
function n(e){return/^(==|===|!=|!==|<|>|<=|>=)$/.test(e)}function r(e){return/^(==|===)$/.test(e)}function i(e){return["<","<="].indexOf(e)>=0}function o(e){return"UnaryExpression"===e.type&&"-"===e.operator&&e.prefix&&"Literal"===e.argument.type&&"number"==typeof e.argument.value}function a(e){return"Literal"===e.type?e:o(e)?{type:"Literal",value:-e.argument.value,raw:"-"+e.argument.value}:null}function s(e,t){if(e.type!==t.type)return!1;switch(e.type){case"Identifier":return e.name===t.name;case"Literal":return e.value===t.value;case"MemberExpression":return s(e.object,t.object)&&s(e.property,t.property);case"ThisExpression":return!0;default:return!1}}t.exports=function(e){function t(t){function n(){var e,n;return"&&"===t.operator&&(e=a(u.left))&&(n=a(c.right))&&e.value<=n.value&&s(u.right,c.left)}function r(){var e,n;return"||"===t.operator&&(e=a(u.right))&&(n=a(c.left))&&e.value<=n.value&&s(u.left,c.right)}function o(){var n,r;return(n=e.getTokenBefore(t))&&"("===n.value&&(r=e.getTokenAfter(t))&&")"===r.value}var u=t.left,c=t.right;return"LogicalExpression"===t.type&&"BinaryExpression"===u.type&&"BinaryExpression"===c.type&&i(u.operator)&&i(c.operator)&&(n()||r())&&o()}var u="always"===e.options[0],c=e.options[1]&&e.options[1].exceptRange,l=e.options[1]&&e.options[1].onlyEquality;return{BinaryExpression:u?function(i){"Literal"!==i.right.type&&!o(i.right)||!r(i.operator)&&l||!n(i.operator)||c&&t(e.getAncestors().pop())||e.report(i,"Expected literal to be on the left side of "+i.operator+".")}:function(i){"Literal"!==i.left.type&&!o(i.left)||!r(i.operator)&&l||!n(i.operator)||c&&t(e.getAncestors().pop())||e.report(i,"Expected literal to be on the right side of "+i.operator+".")}}},t.exports.schema=[{"enum":["always","never"]},{type:"object",properties:{exceptRange:{type:"boolean"},onlyEquality:{type:"boolean"}},additionalProperties:!1}]},{}],318:[function(e,t){(function(e){"use strict";function n(e,t,n){return e+new Array(t-e.length+1).join(n||" ")}function r(e,t,n){return new Array(t-e.length+1).join(n||" ")+e}function i(e){var t=0,n=Object.keys(e).map(function(n){var r=e[n];return t+=r,[n,r]}).sort(function(e,t){return t[1]-e[1]}).slice(0,10);n.forEach(function(e){e.push((100*e[1]/t).toFixed(1)+"%"),e[1]=e[1].toFixed(3)}),n.unshift(a);var r=[];n.forEach(function(e){var t,n,i=e.length;for(t=0;i>t;t++)n=e[t].length,(!r[t]||n>r[t])&&(r[t]=n)});var i=n.map(function(e){return e.map(function(e,t){return s[t](e,r[t])}).join(" | ")});i.splice(1,0,r.map(function(e,t){return 0!==t&&t!==r.length-1&&e++,s[t](":",e+1,"-")}).join("|")),console.log(i.join("\n"))}var o=!!e.env.TIMING,a=["Rule","Time (ms)","Relative"],s=[n,r,r];t.exports=function(){function t(t,r){return"undefined"==typeof n[t]&&(n[t]=0),function(){var i=e.hrtime();r.apply(null,Array.prototype.slice.call(arguments)),i=e.hrtime(i),n[t]+=1e3*i[0]+i[1]/1e6}}var n=Object.create(null);return o&&e.on("exit",function(){i(n)}),{time:t,enabled:o}}()}).call(this,e("_process"))},{_process:8}],319:[function(e,t){"use strict";t.exports=function(e){function t(t,n){var r,o=[];for(r=Math.max(0,t);n>r&&i>r;r++)o.push(e[r]);return o}function n(e){var t=e.range[1],n=u[t];return"undefined"==typeof n&&(n=s[t]-1),isNaN(n)&&(n=i-1),n}var r,i,o,a={},s=Object.create(null),u=Object.create(null);for(r=0,i=e.length;i>r;r++)o=e[r].range,s[o[0]]=r,u[o[1]]=r;return a.getTokensBefore=function(e,n){var r=s[e.range[0]];return t(r-(n||0),r)},a.getTokenBefore=function(t,n){return e[s[t.range[0]]-(n||0)-1]},a.getTokensAfter=function(e,r){var i=n(e)+1;return t(i,i+(r||0))},a.getTokenAfter=function(t,r){return e[n(t)+(r||0)+1]},a.getTokens=function(e,r,i){return t(s[e.range[0]]-(r||0),n(e)+(i||0)+1)},a.getFirstTokens=function(e,r){var i=s[e.range[0]];return t(i,Math.min(n(e)+1,i+(r||0)))},a.getFirstToken=function(t,n){return e[s[t.range[0]]+(n||0)]},a.getLastTokens=function(e,r){var i=n(e)+1;return t(Math.max(s[e.range[0]],i-(r||0)),i)},a.getLastToken=function(t,r){return e[n(t)-(r||0)]},a.getTokensBetween=function(e,r,i){return i=i||0,t(n(e)+1-i,s[r.range[0]]+i)},a.getTokenByRangeStart=function(t){return e[s[t]]||null},a}},{}],320:[function(e,t,n){"use strict";var r="eslint-plugin-",i=/^@.*\//i;n.mergeConfigs=function o(e,t){return Object.keys(t).forEach(function(n){var r=t[n];return"plugins"===n?(e[n]||(e[n]=[]),r.forEach(function(t){-1===e[n].indexOf(t)&&e[n].push(t)}),void 0):Array.isArray(e[n])&&!Array.isArray(r)&&"number"==typeof r?(e[n][0]=t[n],void 0):(e[n]="object"!=typeof r||Array.isArray(r)||null===r?t[n]:o(e[n]||{},t[n]),void 0)}),e},n.removePluginPrefix=function(e){return 0===e.indexOf(r)?e.substring(r.length):e},n.getNamespace=function(e){return e.match(i)?e.match(i)[0]:""},n.removeNameSpace=function(e){return e.replace(i,"")},n.PLUGIN_NAME_PREFIX=r},{}]},{},[146])(146)})}(),define("sap.watt.saptoolsets.fiori.editor.fioriJsValidator/util/JSValidatorHelper",["../lib/eslint/eslint"],function(e){"use strict";return{getIssues:function(t,n,r,i){var o=[],a=n.additionalRuleMetadata;i&&(Object.getOwnPropertyNames(i).forEach(function(e){try{var t=new Function(i[e]);i[e]=t()}catch(n){o.push(e)}}),this._defineCustomRulesToLinter(i));var s=e.verify(t,n,r,!1);e.reset();for(var u={root:{},issues:[]},c=0;c<s.length;c++){var l=s[c];switch(l.fatal&&(l.ruleId="syntax-parse"),l.severity=l.fatal?"error":a[l.ruleId].severity,l.category=l.fatal?"Syntax Error":a[l.ruleId].category,l.helpUrl=l.fatal?"http://www.ecma-international.org/ecma-262/5.1/":a[l.ruleId].helpUrl||a[l.ruleId].help,l.severity=l.severity.toLowerCase(),l.severity){case"e":case"error":l.severity="error";break;case"w":case"warning":l.severity="warning";break;case"i":case"info":l.severity="info";break;default:l.severity="warning"}void 0===u.root.severity&&l.fatal&&(u.root.severity=l.severity),u.issues.push({category:l.category,checker:"ESLint",column:l.column,helpUrl:l.helpUrl,line:l.line,message:l.message,path:r,ruleId:l.ruleId,severity:l.severity,source:l.source})}return u},_defineCustomRulesToLinter:function(t){e.defineRules(t)}}}),define("sap.watt.saptoolsets.fiori.editor.fioriJsValidator/service/JSValidator",["../util/configReader","../util/JSValidatorHelper","sap/watt/lib/lodash/lodash"],function(e,t,n){"use strict";return{init:function(){return e._loadDefaultConfig()},validate:function(){},getDefaultConfiguration:function(e){return this.context.service.fioriJsDisplayValidatorConfiguration.getDefaultConfiguration(e)},getIssuesSynchronously:function(e,n,r,i){return t.getIssues(e,n,r,i)},getPathToImplementationModule:function(){return"sap/watt/saptoolsets/fiori/editor/plugin/fioriJsValidator/util/JSValidatorHelper"},getConfiguration:function(e,t,r){var i=n.merge(t||{},r||{});return this._getFilteredConfiguration(i,e)},getCustomRulesContent:function(e){var t=this;return t._getFioriRules().then(function(r){return t._getCustomRules(e).then(function(e){return n.forEach(e,function(e,t){r[t]||(r[t]=e)}),r})})},_getFilteredConfiguration:function(e,t){if(!t)return e;var r=e.rules||{},i=e.additionalRuleMetadata,o={i:t.indexOf("info")>=0,w:t.indexOf("warning")>=0,e:t.indexOf("error")>=0};return n.forEach(r,function(e,t){if(r.hasOwnProperty(t)){var n;n=i[t]?i[t].severity:"warning",o[n]||("number"==typeof e?r[t]=0:e instanceof Array&&(e[0]=0))}}),e},_getFioriRules:function(){return e.getFioriRules()},_getCustomRules:function(e){var t={},n=[],r=[],i=this.context.service;return e?i.filesystem.documentProvider.getDocument(e).then(function(e){return e?e.getCurrentMetadata(!0).then(function(e){return jQuery.each(e,function(e,t){t.folder||-1===t.name.indexOf(".js")||(n.push(t.name.replace(/\.js/,"")),r.push(i.filesystem.documentProvider.getDocument(t.path).then(function(e){return e.getContent()})))}),Q.all(r).then(function(e){return jQuery.each(e,function(e,r){r=r.replace(/(\s*(module\.exports)\s*=)/,"\n return "),t[n[e]]=r}),t})}):Q()}):Q()}}}),define("sap.watt.saptoolsets.fiori.editor.fioriJsValidator/util/rulesSecurity",[],{scan:function(e){var t,n="",r=["eval","ajax","ActiveXObject","XMLHttpRequest","XHR","require","src","alert\\.","alert\\("];for(t=0;t<r.length;t++)n+="\\b"+r[t]+"\\b",t!==r.length-1&&(n+="|");n+="";var i=new RegExp(n,"i"),o=i.test(e);return!o}}),define("sap.watt.saptoolsets.fiori.editor.fioriJsValidator/service/JSDisplayValidatorConfiguration",["../util/configReader","sap/watt/lib/lodash/lodash","../util/rulesSecurity"],function(e,t,n){"use strict";return{FILE_TYPE:"file",CUSTOM_RULES_DEFAULTS:{enabled:0,severity:"w",category:"Best Practice"},init:function(){return e._loadDefaultConfig()},getDefaultConfiguration:function(n){var r=this;try{return e.getFioriConfiguration().then(function(e){var i=t.cloneDeep(e)||{};return r._adaptMetadataConfiguration(i),n?r._setCustomConfiguration(n).then(function(e){return e?(e=t.cloneDeep(e),r._mergeRules(e,i)):i}):i})}catch(i){return r.context.service.log.error("javascript eslint - failed to get default rules",i.message).done(),{}}},getUpdatedConfiguration:function(){},getDiffConfigurationToStore:function(e,n,r){var i=this,o=t.cloneDeep(e);i._adaptMetadataConfiguration(o);var a=i._reduceConfigurations(n,o),s=i._reduceConfigurations(r,a),u=t.merge(a,s);i._adaptMetadataConfiguration(r);var c=i._diffConfigurations(r,o);return t.merge(u,c)},convertConfigurationToDisplayFormat:function(e){var t={};if(!e)return t;var n=e.rules||{},r=e.additionalRuleMetadata;$.each(n,function(e,n){var i={},o=r[e];switch(i.ruleId=e,o.severity.toLowerCase()[0]){case"e":i.severity="error";break;case"w":i.severity="warning";break;case"i":i.severity="info"}"number"==typeof n?i.enable=0===n?!1:!0:n instanceof Array&&(i.enable=0===n[0]?!1:!0,i.additionalProperties=n.slice(1)),i.category=o.category,i.helpUrl=o.help,t[e]=i});var i={};return i.rules=t,i.header={},e.globals&&(i.header.globals=e.globals),e.env&&(i.header.env=e.env),i},convertConfigurationToConcreteFormat:function(e){var t=this,n={},r={},i=e||{};$.each(i.rules||{},function(e,i){n[i.ruleId]={},i.additionalProperties?(n[i.ruleId]=[],n[i.ruleId][0]=i.enable===!1?t._convertRuleValFromSeverity():t._convertRuleValFromSeverity(i.severity),n[i.ruleId]=n[i.ruleId].concat(i.additionalProperties)):n[i.ruleId]=i.enable===!1?t._convertRuleValFromSeverity():t._convertRuleValFromSeverity(i.severity),r[i.ruleId]={},r[i.ruleId].severity=i.severity?i.severity.toLowerCase()[0]:"w",r[i.ruleId].category=i.category,r[i.ruleId].help=i.helpUrl});var o=i.header||{};return t._buildConfigurationTemplate(n,o.globals,o.env,r)},mergeConfigurations:function(e,n){return t.merge(e||{},n||{})},_convertRuleValFromSeverity:function(e){if(!e)return 0;var t=e.toLowerCase()[0];return"w"===t||"i"===t?1:"e"===t?2:0},_diffObjects:function(e,n){if(!e&&n)return{};if(!n)return e;var r=t.omit(e,function(e,r){return t.isEqual(n[r],e)});return t.isEmpty(r)?void 0:r},_diffConfigurations:function(e,t){var n=e||{},r=t||{},i=this._diffObjects(n.rules,r.rules),o=this._diffObjects(n.env,r.env),a=this._diffObjects(n.globals,r.globals),s=this._diffObjects(e.additionalRuleMetadata,t.additionalRuleMetadata);return this._buildConfigurationTemplate(i,a,o,s)},_reduceConfigurations:function(e,n){var r=t.cloneDeep(e||{}),i=r||{},o=n||{},a=t.omit(i.rules,function(e,n){return!t.has(o.rules,n)}),s=t.omit(r.additionalRuleMetadata,function(e,r){return!t.has(n.additionalRuleMetadata,r)});return this._buildConfigurationTemplate(a,void 0,void 0,s)},_mergeExists:function(e,n){var r=t.omit(n,function(n,r){return!t.has(e,r)}),i=t.cloneDeep(e);return t.merge(i,r)},_adaptMetadataConfiguration:function(e){e&&t.each(e.additionalRuleMetadata,function(e){e.severity=e.severity||"w",delete e.priority})},_buildConfigurationTemplate:function(e,n,r,i){var o={};return e&&(o.rules=e),i&&(o.additionalRuleMetadata=i),n&&(o.globals=n),r&&(o.env=r),t.isEmpty(o)&&!o.additionalRuleMetadata?void 0:o},_setCustomConfiguration:function(e){var n="js",r=[],i=this;return e?this.context.service.filesystem.documentProvider.getDocument(e).then(function(o){return o?o.getCurrentMetadata(!0).then(function(o){return jQuery.each(o,function(o,a){a.folder||(t.endsWith(a.name,n)?r.push(i.context.service.filesystem.documentProvider.getDocument(a.path)):i.context.service.log.warn(i.context.service.fioriJsValidator.getProxyMetadata().getName()," user defined RulesDirectory: found files other then "+n+" in: "+e,["user"]).done())}),Q.all(r).then(function(e){return e.length>0?i._securityScan(e).then(function(e){return i._createCustomRulesStruct(e)}):null})}):(i.context.service.log.warn(i.context.service.fioriJsValidator.getProxyMetadata().getName()," user defined RulesDirectory "+e+" defined under project settings was not found",["user"]).done(),null)}):Q()},_createCustomRulesStruct:function(e){var t=this,n=t._getRulesConfigurationTemplate(),r=n.additionalRuleMetadata,i=n.rules;return jQuery.each(e,function(e,n){"length"!==n&&(i[n]={},i[n]=t.CUSTOM_RULES_DEFAULTS.enabled,r[n]={},r[n].severity=t.CUSTOM_RULES_DEFAULTS.severity,r[n].category=t.CUSTOM_RULES_DEFAULTS.category)}),n},_getRulesConfigurationTemplate:function(){return{additionalRuleMetadata:{},rules:{}}},_mergeRules:function(e,n){return e?n?t.merge(e,n):(this.context.service.log.warning("javascript eslint - an element to be merged not supplied: ",JSON.stringify(n)).done(),e):(this.context.service.log.warn("javascript eslint - an element to be merged not supplied: ",JSON.stringify(e)).done(),n)},_securityScan:function(e){var r=[],i=[];return t.each(e,function(e){i.push(e.getContent().then(function(t){return{content:t,document:e}}))}),Q.all(i).then(function(e){return t.each(e,function(e){var t=e.content,i=e.document;n.scan(t)&&r.push(i.getTitle().replace(/\.js/,""))}),r})}}}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/UsageMonitoringUtils",["sap/watt/lib/lodash/lodash"],function(e){"use strict";var t=null,n={init:e.once(function(n){jQuery.sap.assert(n,"oContext must be a valid service context"),t=e.get(n,"service.usagemonitoring"),jQuery.sap.assert(t,"usagemonitoring service does not exists in the given context")}),report:function(e,n){jQuery.sap.assert(t,"UsageMonitoringUtils is not initialized"),t.report("w5g",e,n).done()},startPerf:function(e){jQuery.sap.assert(t,"UsageMonitoringUtils is not initialized"),t.startPerf("w5g",e).done()}};return n}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/W5gUi5LibraryMediator",["sap/watt/lib/lodash/lodash"],function(e){"use strict";function t(e){return jQuery.sap.assert(d,"W5gUi5LibraryMediator is not initialized"),d&&d.alert(e)}function n(t){var n=(t||"").split(".");e.each(n,function(e,t){n[t]=parseInt(e,10)});var i=r(n,g);return!!(isNaN(i)||0>=i)}function r(e,t){for(var n=Math.min(e.length,t.length),r=0;n>r;r++)if(e[r]!==t[r])return e[r]>t[r]?1:e[r]<t[r]?-1:0/0;return e.length===t.length?0:e.length<t.length?-1:1}function i(e){return e.name&&e.version?a(e).then(function(t){return m[e.version]=t,t}).fail(function(e){return t(e.message)}):Q()}function o(e){return e.remPath&&e.remPath.search("/sapui5")>=0}function a(e){return o(e)?s(e):u(e)}function s(t){return h.libmetadataprovider.getLibraryMetaFromHCP(t.remPath,"sapui5","xml").then(function(n){var r=[];return e.each(n,function(t){e.each(t.files,function(e){e&&e._data&&e.name&&e.name.search("meta.json")>=0&&r.push(JSON.parse(e.asText()))})}),{libId:t.name+";"+t.version,meta:r}})}function u(t){var n=new Q.defer,r=require.toUrl(t.libMetadata),i=new XMLHttpRequest;return i.open("GET",r,!0),i.responseType="arraybuffer",i.onload=function(){if(4===this.readyState&&this.status<300)try{var r=[],i=new JSZip;i.load(this.response),e.each(i.files,function(e){if(e)try{r.push(JSON.parse(e.asText()))}catch(t){jQuery.sap.log.error("Zip file: "+e.name+" could not be parsed")}}),n.resolve({libId:t.name+";"+t.version,meta:r})}catch(o){jQuery.sap.log.error(o),n.reject(o)}else jQuery.sap.log.error(t.libMetadata+" request failed. State is "+this.readyState+" Status is "+this.status),n.reject(new Error(t.libMetadata))},i.onerror=function(e){n.reject(e)},i.send(null),n.promise}function c(t){return m[f]?(m[f].flatMeta||(m[f].flatMeta=e.assign.apply(void 0,e.map(m[f].meta,"metadatas"))),m[f].flatMeta&&m[f].flatMeta[t]):!0}function l(t,n){var r=t.getMetadata(),i=r?r["getAll"+e.capitalize(n)]():{},o=i;if(m[f]){var a={};p(this,t,a,n),e.keys(a).length&&(o={},e.each(e.keys(i),function(e){a[e]||(o[e]=i[e])}))}return o}function p(t,n,r,i){var o=n.getMetadata()||{},a=c(o._sClassName);if(a){var s=a[i]||{};e.each(e.keys(o["get"+e.capitalize(i)]()),function(e){s[e]||(r[e]=e)})}var u=n.getParent();return u?p(t,u,r,i):r}var f,d=null,h=null,m={},g=sap.ui.version.split("."),v={init:e.once(function(t){d=e.get(t,"service.usernotification"),h=e.get(t,"service.intellisence"),jQuery.sap.assert(t,"oContext must be a valid service context"),jQuery.sap.assert(d,"usernotification service does not exists in the given context"),jQuery.sap.assert(h,"intellisence service does not exists in the given context"),e.each(g,function(e,t){g[t]=parseInt(e,10)})}),loadLibrary:function(n){return jQuery.sap.assert(h,"W5gUi5LibraryMediator is not initialized"),h.getCalculatedLibraries(n).then(function(t){var n=[];return e.each(t,function(e){e&&!m[e.version]&&n.push(i(e)),f=e.version}),Q.all(n).then(function(t){e.each(t,function(e){e&&jQuery.sap.log.debug("Library "+e.libId+" loaded")})})}).fail(function(e){return t(e.message)})},getSupportedControls:function(t){var n=[];return t&&(n=e.map(t.getDesignTimeMetadata(),function(t,n){return e.assign({title:t.name||n.substring(n.lastIndexOf(".")+1).replace(/([a-z])([A-Z])/g,"$1 $2")},t,{name:n})}),e.remove(n,function(e){return!v.isControlSupported(e.name)})),n},isControlSupported:function(e){return!!c(e)},getAllSupportedControlProperties:function(e){return l(e,"properties")},getAllSupportedControlEvents:function(e){return l(e,"events")},__QUnit_setMockInitLibrary:function(e,t){m[e.version]=t},__QUnit_getLastUI5version:function(){return g},__QUnit_getLoadedLibraries:function(){return m},__QUnit_getIsLibraryLowerThenCompiledFunction:function(){return n}};return v}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/ControlMetadata",["sap/watt/lib/lodash/lodash","./W5gUi5LibraryMediator"],function(e,t){"use strict";function n(e){return e.getMetadata&&(e=e.getMetadata().getName()),e}var r=null,i={setDesignTime:function(e){r=e},getDesignTimeData:function(e){return r&&r.getDesignTimeMetadata()[n(e)]||{}},getDefaultPropertyValue:function(e,t){var n,r,o=e.getMetadata(),a=i.getDesignTimeData(e).defaultSettings,s=a&&a[t];return void 0===s&&(n=o.getAllProperties()[t],r=sap.ui.base.DataType.getType(n.type),n&&null!==n.defaultValue?s=n.defaultValue:r&&r.getDefaultValue&&(s=r.getDefaultValue())),s},isControlUnsupported:function(e){return!i.getDesignTimeData(e).supported},isControlToBeSupported:function(e){return!t.isControlSupported(n(e))},isControlDeprecated:function(e){return e.getMetadata().isDeprecated?e.getMetadata().isDeprecated():!0},getDesignTimeAggregations:function(e){return i.getDesignTimeData(e).aggregations||{}},isControlNotDroppable:function(e){return!i.getDesignTimeData(e).droppable},getDesignTimeBehaviorPart:function(t,n){return e.get(i.getDesignTimeData(t),["behavior",n])},getAggregationsAdapterFunction:function(e,t,n){var r=i.getDesignTimeAggregations(e);return r&&r[t]&&r[t][n]},isControlEditable:function(e){return!(i.isControlUnsupported(e)||i.isControlToBeSupported(e))},getHiddenAggregations:function(){return["customData","layoutData"].concat(i.getUnsupportedAggregations())},getUnsupportedAggregations:function(){return["tooltip","dependents"]},getAllPublicAggregations:function(t,n){return e.filter(t.getMetadata().getAllAggregations(),function(t,r){return"public"===t.visibility&&!e.include(n,r)})},isContainer:function(t){return t?!e.isEmpty(i.getAllPublicAggregations(t,i.getHiddenAggregations())):!1}};return i}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/W5gUtils",["sap/watt/lib/lodash/lodash","./UsageMonitoringUtils","./ControlMetadata"],function(e,t,n){"use strict";function r(e){var t=(e||"").split(".");return t[t.length-1]}jQuery.sap.require("sap.ui.commons.RichTooltip");var i=null,o="",a={"sap.m.ObjectHeader":!0,"sap.m.ObjectIdentifier":!0,"sap.m.ObjectNumber":!0,"sap.m.ObjectListItem":!0,"sap.m.FeedListItem":!0,"sap.m.DisplayListItem":!0,"sap.m.StandardListItem":!0},s={init:e.once(function(t){jQuery.sap.assert(t,"oContext must be a valid service context"),i=e.get(t,"i18n"),jQuery.sap.assert(i,"i18n service does not exists in the given context")}),getFakeOsUrlParam:function(e){switch(e){case"phone":return"&sap-ui-xx-fakeOS=iphone";case"tablet":return"&sap-ui-xx-fakeOS=ipad";default:return""}},getCssImagesFolderPath:function(){return o||(o=require.toUrl("sap/watt/saptoolsets/fiori/editor/plugin/ui5wysiwygeditor/styles/images/")),o},getDesignTimeCssId:function(e){return jQuery.sap.assert(/\.css$/.test(e),"wrong css file name"),"w5g-"+e.slice(0,-4).replace(/\./,"-").toLowerCase()},getControlName:function(e){return e&&e.getMetadata().getName()||""},isControlOrParentSelected:function(e,t){return e&&t?e&&t&&e.getId()===t.getId()?!0:s.isControlOrParentSelected(s.getWYSIWYGParent(e),t):!1},isBindingValue:function(e){return"string"==typeof e&&jQuery.sap.startsWith(e,"{")&&jQuery.sap.endsWith(e,"}")},getFileFullPathFromModulePath:function(t){var n,r="/file/",i=t,o=t.indexOf(r);return-1!==o&&(n=t.substring(t.indexOf(r)+r.length),i=n.substring(n.indexOf("/")+1).replace(/\.\//g,""),e.startsWith(i,"/")||(i="/"+i)),i},getControllerPathByView:function(e,t){var n=e.getControllerName();if(!n)return"";var r=t.jQuery.sap.getModulePath(n,".controller.js");return s.getFileFullPathFromModulePath(r)},getFilePathByControl:function(e,t){var n,r,i;if(s.isControlFragment(e))n=e.__FragmentName,r=".fragment.xml";else{if(!s.isControlSubView(e))return"";n=e.getViewName(),r=".view.xml"}return i=t.jQuery.sap.getModulePath(n,r),s.getFileFullPathFromModulePath(i)},isControlSubView:function(e){return e&&"sap.ui.core.mvc.XMLView"===e.getMetadata().getName()&&e.getParent()&&"sap.ui.core.UIArea"!==e.getParent().getMetadata().getName()},getWindowFor:function(e){for(var t=e,n=t.getDomRef();t&&!n;)t=t.getParent(),n=t&&t.getDomRef&&t.getDomRef();if(!n)return null;var r=n.ownerDocument;return r.defaultView||r.parentWindow},getControlOverlay:function(t,n){if(!t)return null;n||(n=s.getWindowFor(t));var r=e.get(n,"sap.ui.dt.OverlayRegistry");return r&&r.getOverlay(t)},isControlFragment:function(e){return Boolean(e&&e.__FragmentName)},testAncestors:function(t,n,r,i){function o(t){var r=!1;return e.each(n,function(e){return e(t)?(r=!0,!1):void 0}),r}if(!n)return!1;jQuery.isArray(n)||(n=[n]);for(var a=n.length-1;a>=0;a--){var u=n[a];"function"!=typeof u&&n.splice(a,1)}if(!n.length)return!1;if(3===arguments.length&&"boolean"==typeof r&&(i=r,r=void 0),!i&&o(t))return!0;for(var c=s.getWYSIWYGParent(t,r);c;){if(o(c))return!0;c=s.getWYSIWYGParent(c,r)}return!1},isCompositeControl:function(e){return Boolean(e)&&!!a[e.getMetadata().getName()]},isNestedView:function(e){return!(!e||!e.getParent()||"sap.ui.core.mvc.XMLView"!==e.getMetadata().getName()||"sap.ui.core.UIArea"===e.getParent().getMetadata().getName())},isControlTemplate:function(e,t){var n=s.getWYSIWYGParentAggregationInfo(e,t);return!(!n.parent||!n.parent.getBindingInfo(n.aggregationName))},getWYSIWYGParentAggregationInfo:function(e,t){if(e){var n=s.getControlOverlay(e,t),r=n&&n.getParentAggregationOverlay();if(r)return{parent:r.getElementInstance(),aggregationName:r.getAggregationName()}}return{parent:null,aggregationName:null}},removeControl:function(e,t,n){var r,i,o,a,u,c,l=s.getWYSIWYGParentAggregationInfo(e),p=l.parent;if(t.emitHideEvent(e),p&&(r=p.getMetadata().getAggregation(l.aggregationName),r.multiple?p[r._sRemoveMutator](e):p[r._sMutator](null)),e.destroy(),p)for(i=p.__XMLNode||{},u=i.attributes||[],c=u.length-1;c>=0;c--)o=u[c],/^selected/.test(o.name)&&!s.isBindingValue(o.value)&&(a=n?void 0:s.getPropertyOrAssociationValue(p,o.name)+"",o.value!==a&&t.emitPropertyChangeEvent(p,o.name,a))},destroyControl:function(e){var t,n=s.getWYSIWYGParentAggregationInfo(e),r=n.parent;r&&(t=r.getMetadata().getAggregation(n.aggregationName),t.multiple?r[t._sRemoveMutator](e):r[t._sMutator](null)),e.destroy()},getPropertyOrAssociationValue:function(e,t){var n=e.getMetadata(),r=n.getAllProperties();return r[t]?e[r[t]._sGetter]():(r=n.getAllAssociations(),r[t]?e[r[t]._sGetter]():null)},getWYSIWYGParent:function(e,t){var n=s.getControlOverlay(e,t),r=n&&n.getParentAggregationOverlay();return r?r.getElementInstance():null},getControlTemplate:function(e){var t=s.getWYSIWYGParentAggregationInfo(e),n=t.parent,r=t.aggregationName;if(!r||!n)return null;var i=n.mBindingInfos,o=i[r];return o?(o.parts&&(o=o.parts[0]),o.template):null},getXMLNode:function(e){return e.__XMLNode||(s.getControlTemplate(e)||{}).__XMLNode},getXMLRootNode:function(e){return e.__XMLRootNode||(s.getControlTemplate(e)||{}).__XMLRootNode},isControlSelectable:function(e,t){var n=s.getControlOverlay(e,t);return n&&n.isSelectable()||!1},destroyPrivateAggregations:function(){var e=this;e instanceof sap.ui.core.Control&&jQuery.each(e.getMetadata().getAllPrivateAggregations(),function(){var t=e.getAggregation(this.name);t&&t.destroy()})},addPlaceHolderToSearchField:function(e,t){e&&e.$().find("input").attr("placeholder",s.getText(t||""))},getControlTitle:function(t){if(!t)return void 0;var r=t;if("string"!=typeof t){if(s.isControlFragment(t))return"Fragment";r=n.getDesignTimeData(t).name||t.getMetadata().getName()}return r=r.substring(r.lastIndexOf(".")+1),"HBox"===r||"VBox"===r?r:e.startCase(r)},deleteControlWithConfirmationDialog_aux:function(e){return Q.all([e.service.ui5wysiwygeditor.getCurrentSelectedControl(),e.service.ui5wysiwygeditor.getRoot()]).spread(function(t,n){return t===n?{bResult:!1,sResult:"CANCEL"}:s.deleteControlWithConfirmationDialog(t,e)})},deleteControlWithConfirmationDialog:function(n,r){jQuery.sap.require("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Utils");var i=sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Utils,o=i.getAggregationFilter()||[],a=e.find(n.getMetadata().getAllAggregations(),function(e,t){return-1===o.indexOf(t)&&i.getAggregationByName(n,t).length});if(a){var u=r.service.usernotification.confirmYesNo(s.getText("editor_delete_control_confirm_message",[s.getControlTitle(n)]));return u.then(function(e){e.bResult?t.report("delete_confirm_OK",n.getMetadata().getName()):t.report("delete_confirm_CANCEL",n.getMetadata().getName())}).done(),u}return{bResult:!0,sResult:"YES"}},getText:function(e){return jQuery.sap.assert(i,"W5gUtils is not initialized"),i?i.getText.apply(i,arguments):e},applyBundleTo:function(){jQuery.sap.assert(i,"W5gUtils is not initialized"),i&&i.applyTo.apply(i,arguments)},xmlNodeToSourceRange:function(t,n,r){function i(t){var n=r.substr(0,t),i=e.filter(n,function(e){return"\n"===e}).length,o=n.lastIndexOf("\n");return{row:i,column:t-o-1}}var o={start:{row:0,column:0},end:{row:0,column:0}};if(!t||!n)return o;var a,s,u,c,l="\\w\\.-",p="^"+l,f="((.|\\n)*?)",d=new RegExp("(["+l+"]+:)?(["+l+"]+)","g"),h=t.tagName,m=d.exec(h)[2],g="<"+h+"["+p+"]",v="["+p+"]"+f+"/"+h+">"+"|"+"<"+h+"["+p+"]"+f+"/>",y=new RegExp(g,"g"),_=0;try{for(e.find(n.getElementsByTagName(m),function(e){return e.tagName===h?(_=y.exec(r).index,e===t):void 0}),s=1,c=u=_,y=new RegExp(g);s>0;){var x=y.exec(r.substring(c+1,r.length));a=x?x.index+c+1:-1;var b=new RegExp(v).exec(r.substring(c,r.length));u=b.index+b[0].length+c,-1===a||a>u?(s--,c=u):(c=a+1,u>a&&s++)}var w=i(_),S=i(u);return{start:w,end:S}}catch(E){return jQuery.sap.log.error(E),o}},openViewFromProject:function(e,t,n){var r,i=e.service;return r="/"+t+"/view/"+n+".view.xml",i.document.getDocumentByPath(r).then(function(e){return i.repositorybrowser.setSelection(e,!0).then(function(){return i.content.open(e,i.ui5wysiwygeditor)})})},getValidAggregations:function(t,n){jQuery.sap.require("sap.ui.dt.ElementUtil");var r=s.getControlOverlay(t),i=e.values(r.getAggregationOverlays());return i.filter(function(e){return s.isValidForAggregation(t,e,n)})},canAggregationOverlayContain:function(e,t){var n=e.getElementInstance();return s.isValidForAggregation(n,e,t)},validateDropTarget:function(e,t,r){var i=n.getDesignTimeBehaviorPart(e,"validateDropTarget");return i?jQuery.isArray(i.list)&&-1!==i.list.indexOf(r.getMetadata().getName())?!0:jQuery.isFunction(i.test)?i.test.call(e,t,r):!1:!0},getValidateDropTargetList:function(t){var n=e.get(t.getDesignTimeMetadata().getData(),"behavior.validateDropTarget");return n&&n.list||[]},validateAsDropTarget:function(e,t,r){jQuery.sap.require("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Utils");var i=t.getAggregationName();if(e.isBound(i))return!1;if(!e.getMetadata().getAggregation(i).multiple&&sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Utils.getAggregation(t))return!1;var o=n.getAggregationsAdapterFunction(e,i,"validateAsDropTarget");return o?o.call(e,t,r):!0},isValidForAggregation:function(t,r,i){var o=r.getAggregationName(),a=t.getMetadata().getAggregation(o),u=s.getWindowFor(t);return u.jQuery.sap.require("sap.ui.dt.ElementUtil"),!e.includes(n.getUnsupportedAggregations(),r.getAggregationName())&&s.validateAsDropTarget(t,r,i)&&s.validateDropTarget(i,r,t)?a?u.sap.ui.dt.ElementUtil.isValidForAggregation(t,o,i):!1:!1},navigateUI5Control:function(t,r){var i,o=r.getSelection()[0];if(!o)return null;if("down"===t)if(o.__oChildOverlaySelectedBefore)i=o.__oChildOverlaySelectedBefore;else{var a=e.keys(n.getDesignTimeAggregations(o.getElementInstance())),s=e.find(o.getAggregationOverlays(),function(t){var n=e.includes(a,t.getAggregationName());return n&&0!==t.getChildren().length?!0:void 0});if(s&&(i=s.getChildren()[0]),!i)return null}else{var u=o.getParentAggregationOverlay();if(!u)return null;var c=u.getChildren(),l=c.indexOf(o);if("next"===t){if(1===c.length)return null;i=c[(l+1)%c.length]}else if("previous"===t){if(1===c.length)return null;i=0===l?c[c.length-1]:c[(l-1)%c.length]}else"up"===t&&u&&(i=u.getParent(),i.__oChildOverlaySelectedBefore=o)}return i&&i.getElementInstance()},getSelectedControl:function(e){if(e){var t=e.getSelection();if(t&&t.length>0)return e.getSelection()[0].getElementInstance()}return null},getBadgeInfo:function(e,t,i){var o={fragment:s.isControlFragment(e),nestedView:s.isNestedView(e),unsupported:n.isControlUnsupported(e),toBeSupported:n.isControlToBeSupported(e),deprecated:n.isControlDeprecated(e),template:s.isControlTemplate(e,t)},a=[];return o.fragment?a.push(s.getText("w5g_badge_fragment",[r(e.__FragmentName)])):o.nestedView?a.push(s.getText("w5g_badge_subview",[r(e.getControllerName())])):o.unsupported?a.push(s.getText("w5g_badge_unsupported")):o.toBeSupported?a.push(s.getText("w5g_badge_tobe_supported")):i&&o.deprecated&&a.push(s.getText("w5g_badge_deprecated")),o.template&&a.push(s.getText("w5g_badge_template")),o.text=a.join(", "),o},createControl:function(t,n,r){var i=n.jQuery.sap.getObject(t),o=r.getDesignTimeMetadata(),a=new i(o[t].defaultSettings),s=e.get(o,[t,"behavior","constructor"]);return s&&s.call(a),a},isBaseOf:function(e,t,n){function r(e,t){return t?e.getName()===t.getName()||r(e,t.getParent()):!1}var i=n.jQuery.sap.getObject(t),o=n.jQuery.sap.getObject(e);return"function"==typeof i&&r(i.getMetadata(),o.getMetadata())||-1!==o.getMetadata()._aInterfaces.indexOf(t)},andBetweenTwoPromises:function(e,t){return Q.all([t,e]).spread(function(e,t){return e&&t})},getContainerTargetAggregation:function(t){var r=n.getAllPublicAggregations(t,n.getHiddenAggregations());if(r.length){var i=t.getMetadata(),o=i.getDefaultAggregationName(),a=e.find(r,function(e){return e.name===o});return a?o:r[0].name}return null},closeW5gTooltips:function(){jQuery.each(jQuery(".sapWysiwygTooltip:visible").control(),function(){this._closeOrPreventOpen&&this._closeOrPreventOpen()})},goToCode:function(t,n,r){return t.service.document.open(n).then(function(){return t.service.content.getCurrentEditor().then(function(t){return t.getUI5Editor().then(function(n){return r?(e.isArray(r)&&2==r.length&&(r={start:n.indexToPosition(r[0]),end:n.indexToPosition(r[1])}),Q.delay().then(function(){return t.setHighlight([e.assign(r,{isBackwards:!1})],"selection"),n.moveCursorTo(r.start.row,1)
})):void 0})})})},getControllerDocument:function(e,t,n){return e.service.filesystem.documentProvider.getDocument(this.getControllerPathByView(t,n))}};return s}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/W5gCommand",["sap/watt/common/error/AssertError"],function(e){return{isAvailable:function(){var t=this.context.service;return this.context.service.ui5wysiwygeditor.getState().then(function(n){if(null===n)return t.selection.assertOwner(t.ui5wysiwygeditor).fail(function(){return t.selection.assertOwner(t.w5gOutline)});throw new e("Command is not available yet.")})},isEnabled:function(){return this.context.service.ui5wysiwygeditor.getSelection().then(function(e){return!(!e||!e[0].control)})}}}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/ControlLevelCommand",["./W5gCommand"],function(e){"use strict";return jQuery.extend({},e,{isEnabled:function(){return this.context.service.ui5wysiwygeditor.getSelection().then(function(e){return!(!e||!e[0].control||e[0].aggregation)})}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/Remove",["../utils/W5gUtils","../utils/ControlMetadata","./ControlLevelCommand"],function(e,t,n){"use strict";return jQuery.extend({},n,{execute:function(e){for(var t=e&&e.srcElement;t;){if("sap-ui-static"===t.getAttribute("id"))return!1;t=t.parentElement}return this.context.service.ui5wysiwygeditor.deleteUI5ControlWithValidations()},isEnabled:function(){var e=this;return n.isEnabled.apply(this).then(function(n){return n&&e.context.service.ui5wysiwygeditor.getSelection().then(function(e){var n=t.getDesignTimeData((e&&e[0]||{}).control);return!(!n||!n.removable)})})}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/Toggle",["./W5gCommand"],function(e){"use strict";return jQuery.extend({},e,{execute:function(){return this.context.service.ui5wysiwygeditor.deselectUI5Control()}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/GoPreviousSibling",["./W5gCommand"],function(e){"use strict";return jQuery.extend({},e,{execute:function(){return this.context.service.ui5wysiwygeditor.navigateUI5Control("previous")}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/GoNextSibling",["./W5gCommand"],function(e){"use strict";return jQuery.extend({},e,{execute:function(){return this.context.service.ui5wysiwygeditor.navigateUI5Control("next")}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/GoParent",["./W5gCommand"],function(e){"use strict";return jQuery.extend({},e,{execute:function(){return this.context.service.ui5wysiwygeditor.navigateUI5Control("up")}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/GoChild",["./W5gCommand"],function(e){"use strict";return jQuery.extend({},e,{execute:function(){return this.context.service.ui5wysiwygeditor.navigateUI5Control("down")}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/GoToCode",["./W5gCommand"],function(e){"use strict";return jQuery.extend({},e,{execute:function(){return this.context.service.ui5wysiwygeditor.goToCode()}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/OpenInLayoutEditor",["./W5gCommand"],function(e){"use strict";return jQuery.extend({},e,{execute:function(){this.context.service.ui5wysiwygeditor.openInLayoutEditor()}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/OpenFragmentInLayoutEditor",["../utils/W5gUtils","./OpenInLayoutEditor"],function(e,t){"use strict";return jQuery.extend({},t,{isAvailable:function(){return Q.all([this.context.service.selection.assertOwner(this.context.service.ui5wysiwygeditor),this.context.service.ui5wysiwygeditor.getSelection()]).spread(function(t,n){var r=n&&n[0].control,i=r?e.isControlFragment(r):!1;return!!t&&i})}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/OpenSubviewInLayoutEditor",["../utils/W5gUtils","./OpenInLayoutEditor"],function(e,t){"use strict";return jQuery.extend({},t,{isAvailable:function(){return Q.all([this.context.service.selection.assertOwner(this.context.service.ui5wysiwygeditor),this.context.service.ui5wysiwygeditor.getSelection()]).spread(function(t,n){var r=n&&n[0].control,i=r?e.isControlSubView(r):!1;return!!t&&i})}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/Cut",["./ControlLevelCommand"],function(e){"use strict";return jQuery.extend({},e,{execute:function(){return this.context.service.ui5wysiwygeditor.cut()}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/Copy",["./ControlLevelCommand"],function(e){"use strict";return jQuery.extend({},e,{execute:function(){return this.context.service.ui5wysiwygeditor.copy()}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/Paste",["../utils/W5gUtils","../utils/ControlMetadata","./W5gCommand"],function(e,t,n){"use strict";return jQuery.extend({},n,{execute:function(){return this.context.service.ui5wysiwygeditor.paste()},isEnabled:function(){var r=this;return r.context.service.ui5wysiwygeditor.getCurrentSelectedControl().then(function(i){return e.andBetweenTwoPromises(r.context.service.ui5wysiwygeditor.hasClipboard(),n.isEnabled.apply(r)).then(function(e){return e&&t.isControlEditable(i)})}).fail(function(e){jQuery.sap.log.error(e)})}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/PasteBefore",["../utils/W5gUtils","./ControlLevelCommand"],function(e,t){"use strict";return jQuery.extend({},t,{execute:function(){return this.context.service.ui5wysiwygeditor.pasteSibling(0)},isEnabled:function(){return e.andBetweenTwoPromises(this.context.service.ui5wysiwygeditor.hasClipboard(),t.isEnabled.apply(this))}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/PasteAfter",["../utils/W5gUtils","./ControlLevelCommand"],function(e,t){"use strict";return jQuery.extend({},t,{execute:function(){return this.context.service.ui5wysiwygeditor.pasteSibling(1)},isEnabled:function(){return e.andBetweenTwoPromises(this.context.service.ui5wysiwygeditor.hasClipboard(),t.isEnabled.apply(this))}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/DocuUtils",["sap/watt/lib/lodash/lodash"],function(e){"use strict";function t(e,t){return e?-1!==e.indexOf("/")?e.replace(/\//g,"."):-1===e.indexOf(".")&&-1!==h.indexOf(e)?"sap.ui.core."+e:t.split(".").slice(0,-1).concat([e.replace(/\//g,".")]).join("."):null}function n(e,n){var o=jQuery(e.documentElement),a=o.children("baseType").text(),s={baseType:t(a,n),doc:i(o),properties:{},events:{}};return r(o,"properties/property",function(e){s.properties[e.attr("name")]={type:t(e.attr("type")||"string",n),defaultValue:e.attr("defaultValue")||"empty/undefined",doc:i(e),since:e.attr("since")}}),r(o,"events/event",function(e){s.events[e.attr("name")]={doc:i(e)}}),s}function r(e,t,n){jQuery.each(t.split("/"),function(){e=e.children(this)}),e.each(function(){n(jQuery(this))})}function i(e){return e.children("documentation").text()}function o(t){return g(t).then(function(t){var n=t.baseType;return n?o(n).then(function(n){return e.assign({},n,t.properties,t.events)}):e.assign({},t.properties,t.events)})}function a(e){return jQuery.each(e,function(t,n){e.hasOwnProperty(t)&&0!==t.indexOf("_")&&(n.name=t,n.type=u(n.type),n.typeText=c(n.type),n.defaultValue=n.defaultValue?String(n.defaultValue).replace("empty/undefined","-"):"")}),e}function s(e){return jQuery.each(e,function(t,n){e.hasOwnProperty(t)&&0!==t.indexOf("_")&&(n.name=t)}),e}function u(e){return e&&e.replace("[]","")}function c(e){return e?(e=e.replace("sap.ui.core.",""),e.substr(e.lastIndexOf(".")+1)):null}function l(e,t){if(!e)return"";var n=[];return d(n,"Property name",e.name,t),d(n,"Property type",e.typeText),d(n,"Description",(t?"DEPRECATED. ":"")+e.doc),d(n,"Default Value",e.defaultValue),n.join("")}function p(e,t){if(!e)return"";var n=[];return d(n,"Description",(t?"DEPRECATED. ":"")+e.doc),n.join("")}function f(e){return"events"===e?p:l}function d(e,t,n,r){e.push("<div class='row'><div class='title'>"+t+":</div> <div class='value"),r&&e.push(" deprecated"),e.push("'>"+n+"</div></div>")}jQuery.sap.require("sap.ui.commons.RichTooltip");var h="boolean int float number function object string void any Element Control Component",m=e.once(function(){return Date.now()}),g=e.memoize(function(e){var t=Q.defer(),r=Math.max(6e4-(Date.now()-m()),0);return setTimeout(function(){jQuery.ajax({cache:!0,url:jQuery.sap.getModulePath(e,".control"),dataType:"xml",success:function(r){t.resolve(n(r,e))},error:function(){jQuery.sap.log.debug("tried to load entity documentation for: "+e+".control"),t.resolve("")}})},r),t.promise}),v={enrichPropertiesAndEventsInfo:function(e,t,n){return o(e).then(function(e){var r=a(e),i=s(e);t.forEach(function(e){e.docu=r[e.name]||e.docu||{defaultValue:"-",doc:"",name:e.name,type:u(e.typeName),typeText:c(e.typeName)}}),n.forEach(function(e){e.docu=i[e.name]||e.docu||{doc:"",name:e.name}})})},enrichControlInfo:function(e,t){return g(e).then(function(e){t.description=e.doc})},enrichControlInfos:function(e){var t=e.map(function(e){return v.enrichControlInfo(e.name,e)});return Q.all(t)},createDocuTooltip:function(e,t){return new sap.ui.commons.RichTooltip(jQuery.extend({title:"{title}",openDelay:300,offset:"-10 3",myPosition:"end top",atPosition:"begin top",text:{parts:[{path:"docu"},{path:"isDeprecated"}],formatter:f(t)}},e||{})).addStyleClass("sapWysiwygTooltip")}};return v}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/control/palette/ControlItem",["../../utils/W5gUtils"],function(){"use strict";function e(){this.$().addClass("defaultIcon")}jQuery.sap.declare("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.palette.ControlItem"),jQuery.sap.require("sap.ui.commons.Image"),jQuery.sap.require("sap.ui.commons.Label");var t=sap.ui.core.Control.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.palette.ControlItem",{metadata:{properties:{icon:{type:"string",group:"Misc",defaultValue:null},name:{type:"string",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null}},aggregations:{image:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"},label:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"},tooltipImage:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"}},events:{press:{}}},constructor:function(){sap.ui.core.Control.apply(this,arguments);var t=new sap.ui.commons.Image({src:this.getIcon()});t.addEventDelegate({onAfterRendering:function(){this.$().on("error",jQuery.proxy(e,this))}},t),this.setAggregation("image",t,!0),this.setAggregation("label",new sap.ui.commons.Label({text:this.getTitle(),textAlign:sap.ui.core.TextAlign.Begin}),!0),this.setAggregation("tooltipImage",new sap.ui.core.Icon({size:"12px",src:"sap-icon://question-mark",tooltip:new sap.ui.commons.RichTooltip({openDelay:300,closeDelay:0,atPosition:"end top",title:"{name}",text:"{description}"}).addStyleClass("sapWysiwygTooltip")}).addStyleClass("sapWysiwygPaletteItemTooltip"),!0)},renderer:function(e,t){t.getVisible()&&(e.write("<div"),e.writeControlData(t),e.addClass("sapWysiwygPaletteItem"),e.writeClasses(),e.write("tabindex='0'"),e.write(">"),e.renderControl(t.getAggregation("image")),e.renderControl(t.getAggregation("label")),e.renderControl(t.getAggregation("tooltipImage")),e.write("</div>"))}});return t.prototype.onclick=function(e){this.firePress({}),e.preventDefault(),e.stopPropagation()},t.prototype.setIcon=function(e){return this.getAggregation("image").setSrc(e),this.setProperty("icon",e,!0),this},t.prototype.setTitle=function(e){return this.getAggregation("label").setText(e),this.setProperty("title",e,!0),this},t.prototype.setVisible=function(e){return e?this.$().show():this.$().hide(),this.setProperty("visible",e,!0),this},t}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/Add",["sap/watt/lib/lodash/lodash","../utils/W5gUtils","../utils/ControlMetadata","../utils/UsageMonitoringUtils","../utils/W5gUi5LibraryMediator","./W5gCommand","../utils/DocuUtils","../control/palette/ControlItem"],function(e,t,n,r,i,o,a,s){"use strict";return jQuery.extend({},o,{_buildItems:function(e,n,r){return i.getSupportedControls(n).filter(function(n){return t.isBaseOf(n.name,e,r)}).sort(function(e,t){return e.name.localeCompare(t.name)})},execute:function(){var n=this;return this.context.service.ui5wysiwygeditor.getSelection().then(function(i){var o=e.get(i,"[0].aggregation"),u=o?"aggregation":"control",c=n.context.service.ui5wysiwygeditor;return Q.all([c.getCurrentSelectedControl(),c.getDesignTime(),c.getScope()]).spread(function(e,i,l){if(e){"control"===u&&(o=t.getContainerTargetAggregation(e));var p=e.getMetadata().getAggregation(o);if(p){var f,d,h=p.type,m=n._buildItems(h,i,l),g=new sap.ui.model.json.JSONModel(m);if(g.setSizeLimit(1/0),a.enrichControlInfos(m).then(function(){g.checkUpdate()}).done(),m.length>0){var v=new sap.ui.commons.SearchField({enableListSuggest:!1,enableClear:!0,startSuggestion:0,width:"100%",suggest:function(e){var t=e.getParameter("value").toLowerCase(),n=!1;g.getData().forEach(function(e){var r=-1!==e.name.toLowerCase().indexOf(t);r!==(void 0===e._visible||!!e._visible)&&(n=!0),e._visible=r}),n&&g.checkUpdate(!0)}});d=[v,new sap.ui.commons.Panel({content:{path:"/",factory:function(){return new s({name:"{name}",title:"{title}",icon:"{icon}",visible:"{_visible}",press:function(e){f.close();var t=e.getSource().getBindingContext().getProperty("name");r.report("outline_control_added",t+" [ "+o+" ]"),c.injectElementToAggregation(t,o).done()}})}},areaDesign:sap.ui.commons.enums.AreaDesign.Plain,borderDesign:sap.ui.commons.enums.BorderDesign.None})]}else{var y=new sap.ui.commons.Label({text:"{i18n>w5g_outline_no_available_control}"});d=[y]}var _=t.getText("w5g_editor_command_add_control_dialog_title",[o]);f=new sap.ui.commons.Dialog({title:_,resizable:!1,autoClose:!0,minWidth:"220px",content:d}),f.setModel(g),f.addStyleClass("sapWysiwygControlAddDialog"),t.applyBundleTo([f]),f.open()}}})})},isEnabled:function(){return t.andBetweenTwoPromises(this.context.service.ui5wysiwygeditor.getSelection().then(function(e){var t=e&&e[0];return t?!!(t.control&&t.aggregation||t.control&&!t.aggregation&&n.isContainer(t.control)):!1}),o.isEnabled.apply(this))}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/command/QuickStartWithLayoutEditor",["./W5gCommand"],function(e){"use strict";return jQuery.extend({},e,{execute:function(){return this.context.service.quickstart.quickStartWithLayoutEditor()},isAvailable:function(){return jQuery.browser.chrome},isEnabled:function(){return!0}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/EventsHelper",["sap/watt/lib/lodash/lodash"],function(e){"use strict";var t=null,n=null,r={init:e.once(function(r){jQuery.sap.assert(r,"oContext must be a valid service context"),t=e.get(r,"event"),n=e.get(r,"service.ui5wysiwygeditor"),jQuery.sap.assert(t,"event does not exists in the given context"),jQuery.sap.assert(n,"ui5wysiwygeditor does not exists in the given context")}),fireViewHasChanged:function(){return jQuery.sap.assert(t,"EventsHelper is not initialized"),t?t.fireViewHasChanged({editor:n}):Q()}};return r}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/control/serialization/XMLManipulator",["sap/watt/lib/lodash/lodash","../../utils/W5gUtils","../../utils/EventsHelper"],function(e,t){"use strict";function n(e){return e.localName||e.baseName||e.nodeName}function r(e){return"ExtensionPoint"===n(e)&&"sap.ui.core"===e.namespaceURI}function i(e,t){for(var n=e.childNodes,r=0;r<n.length;r++)if(n[r].tagName===t)return n[r]}function o(e,t,r){jQuery.sap.require("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Utils");var i=e.getMetadata().getAllAggregations();if(i){var a;for(a in i){var s=jQuery(t).children().filter(function(e,t){return n(t)===a});if(s.length){var u=sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Utils.aggregationGetter(e,i[a]);jQuery.each(u,function(e,t){s[0].children&&s[0].children.length>e&&o(t,s[0].children[e],r)})}}}e.__XMLNode||(jQuery.sap.log.debug("innerControls2xml: adding "+n(t)+" to control "+e.sId),t.setAttribute("id",e.sId),e.__XMLNode=t),e.__XMLRootNode||(e.__XMLRootNode=r)}var a=new DOMParser,s=function(e,t){this._scope=e,this._flushFunc=t};return s.prototype._require=function(e){return this._scope.jQuery.sap.require(e)},s.prototype._getCore=function(){return this._scope&&this._scope.sap.ui.getCore()},s.prototype.emitAddEvent=function(e,t,n,r,i){var o=t,a=this._getXMLNodeById(n),s=this._control2XML(e,n);if(s.node){var u=s.node;e.__XMLNode=u,e.__XMLRootNode=this._getXMLRootNodeById(n);var c=this._getAggregation(e,o,a,r,i);if(c){var l=c.childNodes,p=this._findInsertPoint(l,u,r);if(p>-1){var f;p<l.length&&(f=l[p]),f?c.insertBefore(u,f):c.appendChild(u),this._formatDOM(u)}}}},s.prototype.emitHideEvent=function(e){var n=t.getXMLNode(e);n&&(this._formatBeforeRemove(n),n.parentElement&&n.parentElement.removeChild(n))},s.prototype.emitDataEvent=function(e){var n=t.getXMLNode(e);if(n){var r=t.getXMLRootNode(e);if(r){var o=s.getNamespaceMap(r);o["sap.ui.core"]||(r.setAttribute("xmlns:core","sap.ui.core"),o=s.getNamespaceMap(r))}var u=this._scope;this._require("sap.ui.core.util.serializer.Serializer"),this._require("sap.ui.core.util.serializer.delegate.XML");var c=new u.sap.ui.core.util.serializer.Serializer(e,new u.sap.ui.core.util.serializer.delegate.XML("sap.m"),!1),l=c.serialize();o&&(l=l.replace(/sap\.ui\.core\:CustomData/g,o["sap.ui.core"]+":CustomData"));var p=a.parseFromString(l,"text/xml"),f=i(p.childNodes[0],"customData"),d=i(n,"customData");d&&n.removeChild(d),f&&n.appendChild(f)}},s.prototype.emitPropertyChangeEvent=function(e,n,r){var i=t.getXMLNode(e);i&&(void 0===r?i.removeAttribute(n):i.setAttribute(n,r))},s.prototype.emitMoveEvent=function(e,n,r,i,o){var a=n,s=this._getXMLNodeById(i),u=this._getAggregation(e,a,s);if(u){var c=t.getXMLNode(e);this._formatBeforeRemove(c);var l=u.childNodes;if(l.length>0){var p=this._findInsertPoint(l,c,o);p>-1&&u.insertBefore(c,l[p])}else u.appendChild(c);this._formatAfterInsert(c)}},s.prototype._findInsertPoint=function(e,t,n){for(var i=0,o=0;o<e.length&&1!==e[o].nodeType;)o++;for(;n>i&&o<e.length;){var a=e[o];1!==a.nodeType||r(a)||a===t||i++,o++}return i===n?o:-1},s.prototype._splitName=function(e){var t={name:"",nmspc:""},n=e.lastIndexOf(".");return n>0&&(t.nmspc=e.substr(0,n),t.name=e.substr(n+1,e.length)),t},s.getNamespaceMap=function(e){var t={};if(e&&e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n];if(r.name.lastIndexOf("xmlns")>-1){var i=r.name.split(":");t[r.value]=2===i.length?i[1]:""}}return t},s.prototype._control2XML=function(t,n){var r={nmspc:void 0,node:void 0},i=this._getXMLRootNodeById(n);if(!i)return jQuery.sap.log.error("Unable to add control under parent node (id="+n+")"),r;var u=this._splitName(t.getMetadata().getName()),c=s.getNamespaceMap(i);c["sap.ui.core"]||(i.setAttribute("xmlns:sap.ui.core","sap.ui.core"),c=s.getNamespaceMap(i));var l=c[u.nmspc];l||""===l||(i.setAttribute("xmlns:"+u.nmspc,u.nmspc),c=s.getNamespaceMap(i),l=c[u.nmspc]);var p=this._scope;this._require("sap.ui.core.util.serializer.Serializer"),this._require("sap.ui.core.util.serializer.delegate.XML");var f=e.invert(c)[""],d=new p.sap.ui.core.util.serializer.Serializer(t,new p.sap.ui.core.util.serializer.delegate.XML(f),!1),h=d.serialize();for(var m in c){var g=c[m];if(""!==g){var v=new RegExp(m+":","g");h=h.replace(v,g+":")}}h=this._addXMLEnvelope(c,h);var y=a.parseFromString(h,"text/xml");if(y.getElementsByTagName("parsererror").length>0){var _=y.getElementsByTagName("parsererror")[0].childNodes[1].innerHTML;throw new Error("Unable to add control to layout editor"+_)}return y=y.children[0],y=y.children[0],r.node=y,o(t,r.node,i),r},s.prototype._addXMLEnvelope=function(e,t){var n="<content";for(var r in e)n+=""===e[r]?" xmlns:"+r+"="+'"'+r+'"':" xmlns:"+e[r]+"="+'"'+r+'"';return n+">"+t+"</content>"},s.prototype._getAggregation=function(e,t,n,i,o){var a,s=o?o.__XMLNode:e.getParent().__XMLNode;if(s&&(s.tagName.indexOf(":View")>-1||s.tagName.indexOf(":FragmentDefinition")>-1)&&(a=s),!a&&(a=this._hasTagName(n.children,t),!a)){var u=n.nodeName.split(":");t=u.length>1?u[0]+":"+t:t;var c=n.ownerDocument.createElement(t);n.appendChild(c),this._formatAfterInsert(c),a=c}var l=[];return jQuery.each(a.children,function(e,t){r(t)||l.push(t)}),i&&i>l.length&&(a=e.getParent().__XMLNode),a},s.prototype._hasTagName=function(e,t){for(var n,r=0;r<e.length;r++){var i=e[r].tagName;if(i===t||i.indexOf(":"+t)>-1){n=e[r];break}}return n},s.prototype._formatBeforeRemove=function(e){if(e){var t=e.parentNode;if(t){var n=e.previousSibling;n&&n.nodeType===n.TEXT_NODE&&t.removeChild(n)}}},s.prototype._formatAfterInsert=function(e){if(e){var t=e.parentNode;if(t){var n=t?t.previousSibling:void 0,r=e.previousSibling,i=r?r.previousSibling:void 0,o=e.nextSibling;i&&i.nodeType===i.TEXT_NODE?t.insertBefore(i.cloneNode(!1),e):r&&r.nodeType===r.TEXT_NODE?o?t.insertBefore(r.cloneNode(!1),o):t.appendChild(r.cloneNode(!1)):n&&n.nodeType===n.TEXT_NODE&&t.insertBefore(e.ownerDocument.createTextNode(n.textContent+"    "),e),n&&1===t.children.length&&t.appendChild(e.ownerDocument.createTextNode(n.textContent)),jQuery.each(t.childNodes,function(e,n){n&&n.nodeType===n.TEXT_NODE&&n.nextSibling&&n.nextSibling.nodeType===n.nextSibling.TEXT_NODE&&t.removeChild(n.nextSibling)})}}},s.prototype._formatDOM=function(e){var t=[];t.push(e);var n=e.previousSibling,r="";n&&n.nodeType===n.TEXT_NODE&&(r=n.textContent),this._formatLinearDOM(t,r,0)},s.prototype._formatLinearDOM=function(e,t){for(;e.length>0;){var n=e[0];e.shift(),this._formatAfterInsert(n);for(var r=n.childNodes,i=0;i<r.length;i++)e.push(r[i]);this._formatLinearDOM(e,t)}},s.prototype._getXMLNodeById=function(e){var n=this._getCore().byId(e);return t.getXMLNode(n)},s.prototype._getXMLRootNodeById=function(e){var n=this._getCore().byId(e);return t.getXMLRootNode(n)},s.prototype=e.mapValues(s.prototype,function(t,n){return e.startsWith(n,"emit")&&"function"==typeof t?function(){var e=t.apply(this,arguments);return this._flushFunc&&this._flushFunc(),e}:t}),s}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/BindingUtils",["sap/watt/lib/lodash/lodash","./W5gUtils"],function(e,t){"use strict";var n="UNBINDKEY",r="dataBinding",i=null,o={init:e.once(function(t){jQuery.sap.assert(t,"oContext must be a valid service context"),i=e.get(t,"service.setting.project"),jQuery.sap.assert(i,"project service does not exists in the given context")}),getUnbindKey:function(){return n},getDataBindingSetting:function(e){return jQuery.sap.assert(i,"BindingUtils is not initialized"),i.getProjectSettings(r,e).then(function(e){return e||{}}).fail(function(e){return jQuery.sap.log.error(e),{}})},setDataBindingSetting:function(e,t,n){return jQuery.sap.assert(i,"BindingUtils is not initialized"),t=t||{},void 0!==n&&(t[o.getDataBindingSettingKey(e)]={entitySet:n}),i.setProjectSettings(r,t,e)},getDataBindingSettingKey:function(e){return e?e.getEntity().getProjectRelativePath():"."},getBindingInfo:function(e,t){if(1===arguments.length&&(t=e.aggregationName,e=e.parent),!e)return null;var n=e.getBindingInfo(t);return n&&n.parts&&(n=n.parts[0]),n},getClosestBindingInfo:function(e){var n=t.getWYSIWYGParentAggregationInfo(e),r=o.getBindingInfo(n);return r||n.parent&&o.getClosestBindingInfo(n.parent)},getEntityByKeySet:function(t,n){return n=o.normalizeDataSetPath(n),e.find(t,function(e){return e.key===n})},normalizeDataSetPath:function(e){return!e||e===n||jQuery.sap.startsWith(e,"/")?e:"/"+e}};return o}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/ModulePath",["sap/watt/lib/lodash/lodash"],function(e){"use strict";function t(t,n,r,i){var o=t.getEntity(),a=o.getBackendData().location,s=o.getFullPath(),u=new RegExp(s+"$"),c=a.replace(u,""),l=c+n+"/",p={};return p[r]="./",i&&e.assign(p,i.resourceRoots),{parentFolder:l,resourcesroots:p}}function n(t){return t.isProject()?null:t.getParent().then(function(t){return t.getFolderContent().then(function(i){var o=e.find(i,function(e){var t=e.getEntity().getName().toUpperCase();return"index.html".toUpperCase()===t||"localIndex.html".toUpperCase()===t});return o?o.getContent().then(function(e){var n=jQuery("<div/>").append(jQuery(e)).find("script["+r+"]").attr(r);return n?{parentFolder:t.getEntity().getBackendData().location,resourcesroots:JSON.parse(n)}:null}):n(t)})})}var r="data-sap-ui-resourceroots",i=null;return{init:e.once(function(t){jQuery.sap.assert(t,"oContext must be a valid service context"),i=e.get(t,"service.ui5projecthandler"),jQuery.sap.assert(i,"project service does not exists in the given context")}),getModulePaths:function(e){return Q.all([i.getHandlerFilePath(e),i.getAppNamespace(e)]).spread(function(r,o){return r&&o?i.getAttribute(e,"sap.ui5").then(function(e){return e}).catch(function(){}).then(function(n){return t(e,r,o,n)}):n(e)}).catch(function(){return n(e)})}}}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/PropertyBindingDialogHelper",["sap/watt/lib/lodash/lodash","./W5gUtils","./BindingUtils"],function(e,t){"use strict";function n(e,t){var n,i=[];return e.forEach(function(e){"string"===t?i.push(e):(n=r(e.type),"string"===n&&"enum"===t?i.push(e):n===t&&i.push(e))}),i}function r(e){switch(e=(e||"").toUpperCase()){case"EDM.SBYTE":case"EDM.INT16":case"EDM.INT32":case"EDM.INT64":return"int";case"EDM.DECIMAL":case"EDM.DOUBLE":case"EDM.SINGLE":return"float";case"EDM.BOOLEAN":return"boolean";case"EDM.STRING":return"string";default:return a.test(e)?a.exec(e)[1].toLowerCase():null}}function i(e){return a.test(e)?a.exec(e)[1].toLowerCase():(e||"").toLowerCase()}function o(e){this.setValue(e),this.fireLiveChange({liveValue:e})}var a=/^EDM\.(.*)/i,s={showPropertyEditor:function(r){function a(e,t){return new sap.ui.commons.Button({text:"{i18n>"+e+"}",press:u.bind(this,t)})}function u(e){h=e,x.close()}function c(){x.detachClosed(c),x.destroy(),f.resolve({accepted:h,value:e.trim(l.getProperty("/value"))})}var l=new sap.ui.model.json.JSONModel({value:r.value,fields:n(r.fields,r.propertyType)}),p=r.propertyDefaultValue,f=Q.defer(),d=t.getText("binding_fields_no_data",[r.propertyTypeName]),h=!1,m=new sap.ui.commons.ListBox({items:{path:"fields",template:new sap.ui.core.ListItem({text:{parts:[{path:"name"},{path:"type"}],formatter:function(e,t){return e+" ("+i(t)+")"}},key:"{key}"})},width:"100%",visibleItems:6}).addEventDelegate({onAfterRendering:function(){var e=d,n=m.getBinding("items");(n.aFilters||[]).length&&(e=t.getText("binding_fields_filter_no_data",[g.$().find("input").val(),r.propertyTypeName])),m.$().attr("empty-message",e),m.getItems().length||m.addStyleClass("emptyList")}}),g=new sap.ui.commons.SearchField({enableListSuggest:!1,showListExpander:!1,enableClear:!0,enableFilterMode:!0,startSuggestion:0,width:"100%",suggest:function(e){s._applyFilter(e.getParameter("value"),m,v.getValue())}}),v=new sap.ui.commons.TextArea({value:"{value}",width:"100%",height:"100%"}),y=new sap.ui.commons.layout.MatrixLayout({width:"100%",height:"100%",widths:["35%","65%"],rows:[new sap.ui.commons.layout.MatrixLayoutRow({height:"40px",cells:[new sap.ui.commons.layout.MatrixLayoutCell({colSpan:2,vAlign:sap.ui.commons.layout.VAlign.Top,padding:sap.ui.commons.layout.Padding.Both,content:new sap.ui.commons.FormattedTextView({htmlText:t.getText("binding_description_message",[r.propertyName,r.controlName])})})]}),new sap.ui.commons.layout.MatrixLayoutRow({height:"40px",cells:[new sap.ui.commons.layout.MatrixLayoutCell({padding:sap.ui.commons.layout.Padding.Begin,vAlign:sap.ui.commons.layout.VAlign.Bottom,content:new sap.ui.commons.Label({text:"{i18n>binding_fields_label}"})}),new sap.ui.commons.layout.MatrixLayoutCell({padding:sap.ui.commons.layout.Padding.Begin,vAlign:sap.ui.commons.layout.VAlign.Bottom,content:new sap.ui.commons.Label({text:t.getText("binding_expression_label",[r.propertyTypeName])})})]}),new sap.ui.commons.layout.MatrixLayoutRow({cells:[new sap.ui.commons.layout.MatrixLayoutCell({padding:sap.ui.commons.layout.Padding.End,vAlign:sap.ui.commons.layout.VAlign.Top,content:new sap.ui.layout.VerticalLayout({content:[g,m]})}),new sap.ui.commons.layout.MatrixLayoutCell({padding:sap.ui.commons.layout.Padding.Begin,vAlign:sap.ui.commons.layout.VAlign.Top,content:v})]})]}).addEventDelegate({onAfterRendering:function(){t.addPlaceHolderToSearchField(g,"binding_search_field_placeholder"),setTimeout(function(){var e=m.$().outerHeight()+g.$().outerHeight(!0);v.focus(),v.setCursorPos(v.getValue().length).$().css("height",e+"px")})}}),_=[new sap.ui.commons.Button({text:"{i18n>binding_reset_button}",tooltip:"{i18n>binding_reset_tooltip}",press:o.bind(v,p)}).addStyleClass("rightTBButton"),new sap.ui.commons.Button({text:"{i18n>binding_clear_button}",tooltip:"{i18n>binding_clear_tooltip}",press:o.bind(v,"")}).addStyleClass("rightTBButton"),a("binding_dialog_cancel_button",!1),a("binding_dialog_ok_button",!0)],x=new sap.ui.commons.Dialog({applyContentPadding:!1,title:t.getText("binding_property_binding_dialog_title",[r.controlName]),resizable:!1,modal:!0,content:y,buttons:_,initialFocus:v,defaultButton:_[_.length-1],closed:c}).bindElement("/").setModel(l).addStyleClass("sapWysiwygDialog").addStyleClass("sapWysiwygDialogWide");return m.ondblclick=function(e){var t=jQuery(e.target).control()[0],n=t&&t.getBindingContext();if(n&&n.getProperty("key")){var r=v.getValue(),i="{"+n.getProperty("key")+"}";v.focus(),v.setValue([r.slice(0,v.getCursorPos()),i,r.slice(v.getCursorPos())].join("")).setCursorPos(v.getCursorPos()+i.length)}},(void 0===p||null===p)&&(p=""),p+="",t.applyBundleTo(x),x.open(),f.promise},_applyFilter:function(e,t){t.clearSelection();var n=t.getBinding("items"),r=n.filter(e?[new sap.ui.model.Filter("name",sap.ui.model.FilterOperator.Contains,e)]:[]);t.toggleStyleClass("emptyList",!r.aIndices.length)}};return s}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/ResourcesHelper",["sap/watt/lib/lodash/lodash","./BindingUtils"],function(e,t){"use strict";function n(e){m={project:e?null:m.project,path:null,content:null,entities:null,noMetadata:!1}}function r(t,n,r){jQuery.sap.assert("function"==typeof n,"ResourcesHelper.attach"+t+": fnFunction must be a function"),jQuery.sap.assert(!r||"object"==typeof r,"ResourcesHelper.attach"+t+": oListener must be empty or an object");var i=u[t];e.where(i,{oListener:r,fnFunction:n}).length||i.push({oListener:r,fnFunction:n})}function i(e,t){for(var n in e)e.hasOwnProperty(n)&&jQuery.isArray(e[n])&&(t&&"extensions"===n&&e[n].forEach(function(t){"http://www.sap.com/Protocols/SAPData"===t.namespace&&(e["sap:"+t.name]=t.value)}),delete e[n]);return e}function o(e,t){return Q.all([h.getProperties(e,t),h.getNavigations(e,t)]).spread(function(e,t){return{properties:e||[],navProperties:t||[]}})}var a=/^xml$/i,s=!1,u={loaded:[],changed:[]},c={renamed:"renamed",deleted:"deleted"},l="sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor",p=null,f=null,d=null,h=null,m={},g={init:e.once(function(t){jQuery.sap.assert(t,"oContext must be a valid service context");var r=e.get(t,"service.document");d=e.get(t,"service.metadataHandler"),h=e.get(t,"service.odataProvider"),p=e.get(t,"service.preferences"),f=e.get(t,"service.content"),jQuery.sap.assert(d,"metadataHandler service does not exists in the given context"),jQuery.sap.assert(h,"odataProvider service does not exists in the given context"),jQuery.sap.assert(r,"document service does not exists in the given context"),jQuery.sap.assert(p,"preferences service does not exists in the given context"),jQuery.sap.assert(f,"content service does not exists in the given context"),r.attachEvent("changed",g.onResourceChanged),r.attachEvent("created",g.onMetadataChanged),r.attachEvent("deleted",g.onMetadataChanged),r.attachEvent("changed",g.onMetadataChanged),n(!0)
}),onMetadataChanged:function(e){if(m.project&&e&&e.source&&"document"===e.source._sName&&e.params){var t=e.params.document;m.path===t.getEntity().getFullPath()?"deleted"===e.name?(n(),g.fireMetadataChanged()):m.entities&&"changed"===e.name&&"content"===e.params.changeType&&t.getContent().then(function(e){m.content!==e&&(m.content=e,m.entities=null)}).done():"created"===e.name&&a.test(t.getEntity().getFileExtension())&&t.getProject().then(function(e){m.project===e.getEntity().getName()&&(n(),g.fireMetadataChanged())}).done()}},onResourceChanged:function(e){if(g.isSupportedResourceChangeEvent(e)){var n=e.params.document,r=e.params.newDocument,i=e.params.changeType;t.getDataBindingSetting(n).then(function(e){var o=t.getDataBindingSettingKey(n),a=e[o],s=(a||{}).entitySet;return a?(delete e[o],c.deleted===i&&(r=n,s=void 0),Q.all([n.getProject(),r.getProject()]).then(function(n){return n[0].getKeyString()===n[1].getKeyString()?t.setDataBindingSetting(r,e,s):void 0})):void 0}).fail(function(e){jQuery.sap.log.error(e)}).done()}},loadMetadata:function(t){return jQuery.sap.assert(d&&h,"ResourcesHelper is not initialized"),Q().then(function(){return s=!1,t.getProject().then(function(t){var r=t.getEntity().getName();return m.project===r&&(m.entities||m.noMetadata)?m.entities:(m.project=r,m.noMetadata=!1,d.getMetadataDocuments(t).then(function(t){if(jQuery.isArray(t)&&t[0]){jQuery.sap.assert(1===t.length,"ResourcesHelper.loadMetadata: more than one metadata in the project '"+r+"'");var a=t[0].getEntity(),s=a&&a.getFullPath();return h.getMetadataFromWorkspace(s).then(function(n){return n?t[0].getContent().then(function(e){m.path=s,m.content=e}).then(function(){return h.getEntitySets(n).then(function(t){var r=t.map(function(e){return o(n,e)});return Q.all(r).then(function(n){var r,o={},a={};return n.forEach(function(e,n){r=i(t[n]),a[r.name]=r,r.properties=e.properties,r.key="/"+r.name,e.properties.forEach(function(e){i(e,!0),e.key=e.name}),e.navProperties.forEach(function(e){o[r.name+"/"+e.name]=e.targetEntitySetName})}),t.concat(e.map(o,function(e,t){return{properties:a[e].properties,key:"/"+t,name:t+" ("+e+")"}}))})})}):void 0})}n(),m.noMetadata=!0}).fail(function(e){n(),jQuery.sap.log.error("No metadata document : "+e)}))})}).then(function(e){return m.entities=e,m.entities}).finally(g.fireMetadataLoaded)},isSupportedResourceChangeEvent:function(e){return e&&e.source&&"document"===e.source._sName&&"changed"===e.name&&e.params?!!c[e.params.changeType]:!1},isMetadataLoaded:function(){return s},isMetadataReloadNeeded:function(){return s&&!m.noMetadata&&!m.entities},fireMetadataLoaded:function(){s=!0,jQuery.each(u.loaded,function(){this.fnFunction.call(this.oListener||g)}),u.loaded=[]},fireMetadataChanged:function(){f.getCurrentEditor().then(function(e){e&&"ui5wysiwygeditor"==e._sName&&jQuery.each(u.changed,function(){this.fnFunction.call(this.oListener||g)})}).done()},attachMetadataChanged:function(e,t){r("changed",e,t)},attachMetadataLoadedOnce:function(e,t){r("loaded",e,t)},retrieveUserPreferences:function(){return jQuery.sap.assert(p,"ResourcesHelper is not initialized"),p.get(l).then(function(e){return e||{}}).fail(function(e){return jQuery.sap.log.error("could not read WYSIWYG settings! "+e),{}})},updateUserPreferences:function(e){return jQuery.sap.assert(p,"ResourcesHelper is not initialized"),jQuery.sap.assert(e&&!jQuery.isEmptyObject(e),"mSettings must be not empty object"),g.retrieveUserPreferences().then(function(t){return jQuery.sap.equal(e,t,!0)?void 0:(t=jQuery.extend({},t,e),p.set(t,l).fail(function(e){jQuery.sap.log.error("could not write WYSIWYG settings! "+e)}))})}};return g}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/W5gBindingHelper",["sap/watt/lib/lodash/lodash","./PropertyBindingDialogHelper","./EventsHelper","./ResourcesHelper","./BindingUtils","./W5gUtils","./ControlMetadata","./UsageMonitoringUtils"],function(e,t,n,r,i,o,a,s){"use strict";function u(t){var n=C.getProperty("/isRoot"),r=e.filter(C.getProperty("/_entitySets"),function(e){var r=e.key.split("/");return r.length<3||!n&&r[1]===t});C.setProperty("/entitySets",r)}function c(e,t){1===arguments.length&&(t=C.getProperty("/_entitySets")),e._entitySets=t,e.isMetadataExists=!!t,e.viewES=i.normalizeDataSetPath(e.viewES||C.getProperty("/viewES")),delete e.entitySets,C.setData(jQuery.extend({_entitySets:null,controlES:null,entitySets:[],isMetadataExists:!1,isTemplate:!1,isTemplateVisible:!1,templateTooltip:"",isDefaultModel:!0,isRoot:!1,viewES:S},e)),x(e.viewES)}function l(){var e,t=I&&I.getContent()[0];return t&&(e=t.data("sapDtResourcePath"),e||jQuery("CustomData [key='sapDtResourcePath']",I.__XMLNode).each(function(){if(e){if($(this).attr("value")!==e)return e=void 0,!1}else e=$(this).attr("value")})),e||S}function p(e){var t=o.getWYSIWYGParentAggregationInfo(e),r=t.parent,a=i.getBindingInfo(t);r&&(a&&(a.template&&a.template.data("sapDtResourcePath",null),r.data("sapDtResourcePath",null)),e.data("sapDtResourcePath",null),A.emitPropertyChangeEvent(r,t.aggregationName),r.unbindAggregation(t.aggregationName,!0),C.setProperty("/controlES",S),C.setProperty("/isTemplate",!1),C.setProperty("/templateTooltip",_(e,t)),T.event.fireBindingChanged().then(function(){return n.fireViewHasChanged()}).done())}function f(e,t){var r=o.getWYSIWYGParentAggregationInfo(e),a=r.parent;if(a){var s=t,u=t.split("/"),c=a.getBindingInfo(r.aggregationName);u[0]||(s=i.normalizeDataSetPath(t),u.splice(0,1)),u.length>1&&(s=u[1]),A.emitPropertyChangeEvent(a,r.aggregationName,"{"+s+"}"),a.bindAggregation(r.aggregationName,{path:s,template:c&&c.template||e.clone()}),C.setProperty("/controlES",t),C.setProperty("/isTemplate",!0),C.setProperty("/templateTooltip",_(e,r)),T.event.fireBindingChanged().then(function(){return n.fireViewHasChanged()}).then(function(){var e=sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Utils.getAggregationByName(r.parent,r.aggregationName);return e.length?T.service.ui5wysiwygeditor.selectUI5Control(e[0].getId()):void 0}).done()}}function d(e,t){return e.unbindProperty(t,!1),e.data("sapDtResourcePath",null),T.event.fireBindingChanged()}function h(e,t,n){e.bindProperty(t,n),T.event.fireBindingChanged().done()}function m(e,t,n){t?((n||[]).forEach(function(e){o.removeControl(e,A,!0)}),f(e,C.getProperty("/viewES"))):p(e)}function g(e,t){e===I?x(t,!0):t===S?p(e):f(e,t)}function v(e,t,n,r,a){var s,u=!!i.getBindingInfo(e,n.name);A.emitPropertyChangeEvent(e,n.name,t),o.isBindingValue(t)?(r&&r(),h(e,n.name,t.slice(1,-1))):(u&&(s=d(e,n.name)),Q(s).then(function(){a&&a.setValue(t)}).done())}function y(e){if(e===I)return!1;var t=w.aggregations,n=e.getParent(),r=e.getMetadata()._sClassName;if(-1!==w.controls.indexOf(r))return!1;for(;n;){if(r=n.getMetadata()._sClassName,r in t){if(-1!==sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Utils.getAggregationByName(n,t[r]).indexOf(e))return!1;break}n=n.getParent()}return!0}function _(e,t){var n="",r=t.parent;return e&&r&&(n=C.getProperty("/isTemplate")?o.getText("binding_unset_as_template_tooltip",[t.aggregationName,o.getControlName(r)]):o.getText("binding_set_as_template_tooltip",[o.getControlName(e),t.aggregationName,o.getControlName(r)])),n}function x(t,n){u(e.trimLeft(t,"/")),C.setProperty("/viewES",i.normalizeDataSetPath(t)),C.getProperty("/entitySets/length")&&C.setProperty("/entitySets/0/name",E[t===S?"NOT_DEFINED":"UNBIND"]),n&&P&&i.getDataBindingSetting(P).then(function(n){var r=n[i.getDataBindingSettingKey(P)];return t=t===S?"":e.trimLeft(t,"/"),(r||{}).entitySet!==t?i.setDataBindingSetting(P,n,t):void 0}).done()}function b(){return i.getDataBindingSetting(P).then(function(e){var t=i.getDataBindingSettingKey(P),n=e[t],o=(n||{}).entitySet;return r.loadMetadata(P).then(function(r){r=r&&r.slice(),o&&(i.getEntityByKeySet(r,o)||(o=S,delete e[t],i.setDataBindingSetting(P,e,void 0).done())),n||(o=l(),i.getEntityByKeySet(r,o)?i.setDataBindingSetting(P,e,o).done():o=S),r&&r.unshift({name:E.UNBIND,properties:[],key:S}),c({viewES:o||S},r)})})}jQuery.sap.require("sap.ui.commons.MessageBox"),jQuery.sap.require("sap.ui.base.DataType");var w={aggregations:{"sap.ui.core.mvc.XMLView":"content","sap.ui.layout.form.SimpleForm":"content"},controls:[]},S=i.getUnbindKey(),E={},C=new sap.ui.model.json.JSONModel({}),T=null,P=null,I=null,D=null,A=null,N={init:e.once(function(t){jQuery.sap.assert(t,"oContext must be a valid service context"),jQuery.sap.assert(e.get(t,"service.usernotification"),"usernotification service does not exists in the given context"),jQuery.sap.assert(e.get(t,"service.ui5icons"),"ui5icons service does not exists in the given context"),jQuery.sap.assert(e.get(t,"event"),"service event does not exists in the given context"),r.attachMetadataChanged(function(){N.setSelection(D).done()}),T=t,E={UNBIND:o.getText("binding_unbind_item"),NOT_DEFINED:o.getText("binding_not_defined_item"),UNBIND_ENTITY_SET:o.getText("binding_unbind_data_set_warning_message"),BIND_ENTITY_SET:o.getText("binding_bind_data_set_warning_message"),BIND_ENTITY_SET2:o.getText("binding_bind_data_set_warning2_message")}}),getDataModel:function(){return C},setDocumentData:function(e,t,n){return P=e,I=t,A=n,b()},setSelection:function(e){var t=Q();return!I||e&&I.__XMLRootNode!==e.__XMLRootNode?t:(r.isMetadataReloadNeeded()&&(t=b()),D=e,t.then(function(){if(C&&C.getProperty("/isMetadataExists")&&e){var t=o.getWYSIWYGParentAggregationInfo(e),n=i.getClosestBindingInfo(e),r=S;if(c({isRoot:e===I,isTemplateVisible:y(e),isTemplate:o.isControlTemplate(e),templateTooltip:_(e,t)}),n){if(n.model)return C.setProperty("/isDefaultModel",!1),void 0;r=n.path,jQuery.sap.startsWith(r,"/")||(r=C.getProperty("/viewES")+"/"+r)}r===S&&C.setProperty("/isTemplate",!1),C.setProperty("/controlES",i.normalizeDataSetPath(r))}}))},openIconDialog:function(e){var t=e.getSource(),n=t.getBindingContext(),r=n.getObject(),i=this.getModel(),o=i.getControl(),a=function(){i.setProperty("rejectedValue",void 0,n)};T.service.ui5icons.openIconDialog(t.getValue()).then(function(e){e.accepted&&v(o,"sap-icon://"+e.icon,r,a,t)})},startPropertyBinding:function(e,n){var r=e.getSource().getBindingContext(),o=r.getObject(),u=this.getModel(),c=u.getControl(),l=c.getBindingInfo(o.name),p=l&&l.parts&&l.parts[0],f=S,d="",h=C.getProperty("/entitySets"),m=C.getProperty("/controlES"),g=function(){u.setProperty("rejectedValue",void 0,r)};p?(f=p.model?"":p.path,d=l.bindingString||"{"+f+"}"):(d=n.getValue(),d&&(f="")),m===S&&(m=C.getProperty("/viewES")),t.showPropertyEditor({controlName:u.getProperty("/controlName"),propertyName:o.title,propertyType:o.type,propertyTypeName:o.typeName,propertyDefaultValue:a.getDefaultPropertyValue(c,o.name),fields:(i.getEntityByKeySet(h,m)||{}).properties||[],selected:f,value:d}).then(function(e){var t=c.getMetadata().getName()+"."+o.name;e.accepted?(s.report("data_binding_OK",t),v(c,e.value,o,g,n)):s.report("data_binding_CANCEL",t)}).done()},onPropertyChange:function(e){var t=e.getParameter("selectedItem"),n=t&&t.getBindingContext("dataModel"),r=n?n.getProperty("value"):e.getParameter("newValue"),i=this.getModel().getControl(),o=e.getSource().getBindingContext().getObject();e&&e.getSource().getProperty("valueState")!==sap.ui.core.ValueState.Error&&v(i,r,o)},onSetAsTemplateChange:function(e){var t,n,r=e.getParameter("checked"),i=this.getModel().getControl(),a=null,s=null;r?(t=o.getWYSIWYGParentAggregationInfo(i),n=sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Utils.getAggregationByName(t.parent,t.aggregationName),n.length>1?(a=n.filter(function(e){return e!==i}),s=[E.BIND_ENTITY_SET].concat(a.map(function(e){return" * "+o.getControlName(e)+": "+e.getId()})).join("\n")):s=E.BIND_ENTITY_SET2):s=E.UNBIND_ENTITY_SET,s?T.service.usernotification.confirm(s).then(function(e){e.bResult?m(i,r,a):C.setProperty("/isTemplate",!r)}).done():m(i,r)},onEntitySetChange:function(e){var t=e.getParameter("selectedItem").getBindingContext("dataModel").getProperty("key"),n=this,r=this.getModel().getControl();T.service.usernotification.confirm(E.UNBIND_ENTITY_SET).then(function(e){e.bResult?g(r,t):(t=C.getProperty("/controlES"),t===S&&(t=C.getProperty("/viewES")),n.setSelectedKey(i.normalizeDataSetPath(t)))}).done()},beforeRemoveControl:function(e){if(C.getProperty("/isTemplate")){var t=o.getWYSIWYGParentAggregationInfo(e),n=t.parent;if(n)return function(){n.unbindAggregation(t.aggregationName,!0),n.data("sapDtResourcePath",null),A.emitPropertyChangeEvent(n,t.aggregationName)}}return null}};return N}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/CopyPasteUtils",["sap/watt/lib/lodash/lodash","./W5gUtils"],function(e,t){"use strict";var n=/(_copy)(\d*)$/,r=/(id\s*=\s*"\w*")/,i=/id\s*=\s*"(\w*)"/,o={createNextId:function(e){var t=n.exec(e);if(null===t)return e+"_copy";var r=t[2];if(""===r)return e+2;var i=parseInt(r,10)+1;return e.substr(0,e.length-r.length)+i},isAlreadyUsed:function(t,n,r,i){return!!n.getElementById(t)||e.contains(i,t)||r(t)},fixAllIds:function(e,t,n){var a=e.split(r),s=[],u=a.map(function(e){var r=i.exec(e);if(null===r)return e;for(var a=r[1];o.isAlreadyUsed(a,t,n,s);)a=o.createNextId(a);return s.push(a),'id="'+a+'"'});return u.join("")},isControlCopyUnsupported:function(e,n){return t.isControlFragment(e)||"sap.m.Page"===e.getMetadata().getName()||e instanceof n.sap.ui.core.mvc.View},adjustControlBeforeAdd:function(t,n,r,i){if(t&&n&&i){var o=i.getDesignTimeMetadata(),a=e.get(o,[n.getMetadata().getName(),"aggregations",r,"beforeAdd"]);a&&a.call(n,t)}return t}};return o}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/control/layout/WysiwygLayout",["sap/watt/lib/lodash/lodash","../../utils/W5gUtils"],function(e,t){"use strict";function n(e){var t={left:{visible:!0},right:{visible:!0}};return e&&"object"==typeof e?(r(t,e,"left"),r(t,e,"right"),t):t}function r(e,t,n){var r=t[n];r&&"object"==typeof r&&(r.visible===!1&&(e[n].visible=!1),"number"==typeof r.width&&(e[n].width=r.width))}function i(n,r,i){var o=e.snakeCase(n),a="w5g"+e.capitalize(n)+"Closed",s=o+"_collapse_tooltip",u=o+"_expand_tooltip",c="leftPane"===n?"left":"right",l=t.getCssImagesFolderPath();return r.toggleStyleClass(a,!i),new sap.ui.commons.ToggleButton({press:function(){var e=u,t=r.getLayoutInfo();r.hasStyleClass(a)&&(e=s),r.toggleStyleClass(a),this.bindProperty("tooltip","i18n>"+e).$().blur(),t[c].visible=this.getPressed(),r.fireLayoutInfoChange({info:t})},pressed:i,icon:l+"panel-"+c+".png",iconHovered:l+"panel-"+c+"_on.png",iconSelected:l+"panel-"+c+"_on.png",tooltip:"{i18n>"+(i?s:u)+"}",lite:!0})}function o(e,n){var r=t.getCssImagesFolderPath();return new sap.ui.commons.Button({press:function(){"undo"===e?n.fireUndo():n.fireRedo(),this.$().blur()},enabled:"{layoutModel>/"+e+"Enabled}",icon:r+e+".png",iconHovered:r+e+"_on.png",iconSelected:r+e+"_on.png",tooltip:"{i18n>"+e+"_tooltip}",lite:!0}).addStyleClass("w5gUndoRedoBtn")}jQuery.sap.declare("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.layout.WysiwygLayout");var a=650,s=sap.ui.core.Control.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.layout.WysiwygLayout",{metadata:{properties:{layoutInfo:{type:"object",group:"Data",defaultValue:null},deviceType:{type:"sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Device",group:"Data",defaultValue:"phone"},showUndoRedo:{type:"boolean",group:"Appearance",defaultValue:!0}},aggregations:{canvas:{type:"sap.ui.core.Control",multiple:!1},outline:{type:"sap.ui.core.Control",multiple:!1},palette:{type:"sap.ui.core.Control",multiple:!1},leftPane:{type:"sap.ui.commons.TabStrip",multiple:!1,visibility:"hidden"},rightPane:{type:"sap.ui.core.Control",multiple:!1},notificationBar:{type:"sap.ui.core.Control",multiple:!1},messageBar:{type:"sap.ui.core.Control",multiple:!1},deviceTypeButton:{type:"sap.ui.commons.SegmentedButton",multiple:!1,visibility:"hidden"},leftPaneButton:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"},rightPaneButton:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"},undoButton:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"},redoButton:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"},leftResizeBar:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"},rightResizeBar:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"}},events:{deviceTypeChange:{parameters:{deviceType:{type:"string"}}},layoutInfoChange:{parameters:{info:{type:"object"}}},undo:{},redo:{}}},constructor:function(){sap.ui.core.Control.apply(this,arguments);var n=this,r=t.getCssImagesFolderPath(),a=this.getLayoutInfo();this.setAggregation("leftPane",new sap.ui.commons.TabStrip({height:"100%",tabs:[new sap.ui.commons.Tab({height:"100%",text:"{i18n>left_pane_tab_palette}"}),new sap.ui.commons.Tab({height:"100%",text:"{i18n>left_pane_tab_outline}"})]})),this.setAggregation("leftPaneButton",i("leftPane",this,!!a.left.visible)),this.setAggregation("rightPaneButton",i("rightPane",this,!!a.right.visible)),this.setAggregation("undoButton",o("undo",this)),this.setAggregation("redoButton",o("redo",this)),this.setAggregation("deviceTypeButton",new sap.ui.commons.SegmentedButton({buttons:e.map(["phone","tablet","desktop"],function(e){return new sap.ui.commons.Button(e,{lite:!0,tooltip:"{i18n>device_"+e+"_tooltip}",icon:r+"device-"+e+".png",iconHovered:r+"device-"+e+"_on.png",iconSelected:r+"device-"+e+"_on.png"})}),selectedButton:this.getDeviceType(),select:function(e){var t=e.getParameter("selectedButtonId");n.setProperty("deviceType",t,!0),n.fireDeviceTypeChange({deviceType:t})}}))},renderer:function(t,n){function r(n,r){t.write("<div"),t.addClass("wysiwygLayout"+e.capitalize(n)+r),t.writeClasses(),t.write(">")}function i(){t.write("</div>")}function o(e){r(e,"Container"),t.renderControl(n.getAggregation(e)),i()}function a(e,a,u){r(e,"Wrapper"),jQuery.each(a||[],function(){o(this)}),jQuery.each(u||[],function(){"TBS"===this?s():t.renderControl(n.getAggregation(this))}),i()}function s(){t.write("<span "),t.addClass("w5gTbSeparator"),t.writeClasses(),t.writeAttribute("role","separator"),t.write("></span>")}var u=["deviceTypeButton","TBS","leftPaneButton","rightPaneButton"];t.write("<div"),t.writeControlData(n),t.addClass("wysiwygLayout"),n.getShowUndoRedo()&&(t.addClass("wysiwygLayoutHasUndoRedo"),u=u.concat(["TBS","undoButton","redoButton"])),t.writeClasses(),t.write(">"),r("top","Wrapper"),o("messageBar"),a("toolbar",null,u),i(),r("main","Wrapper"),o("leftPane"),a("canvas",["notificationBar","canvas"],["leftResizeBar","rightResizeBar"]),o("rightPane"),i(),t.write("</div>")}});return s.prototype.onAfterRendering=function(){var e=this.getLayoutInfo(),t=this.$(),n=t.find(".wysiwygLayoutLeftPaneContainer"),r=t.find(".wysiwygLayoutRightPaneContainer"),i=t.find(".wysiwygLayoutCanvasWrapper"),o=e.left.width;o?(n.css("width",o+"px"),i.css("left",o+"px")):(n.css("width",""),i.css("left","")),o=e.right.width,o?(r.css("width",o+"px"),i.css("right",o+"px")):(r.css("width",""),i.css("right",""))},s.prototype.setDeviceType=function(e){this.setProperty("deviceType",e,!0);var t=this.getAggregation("deviceTypeButton");return t&&t.setSelectedButton(e),this},s.prototype.setLayoutInfo=function(e){return e=n(e),this.setProperty("layoutInfo",e),this},s.prototype._getLeftPaneTab=function(e){switch(e){case"palette":return this.getAggregation("leftPane").getTabs()[0];case"outline":return this.getAggregation("leftPane").getTabs()[1]}return jQuery.sap.log.error("Wrong usage : WysiwygLayout._getLeftPaneTab("+e+")"),null},s.prototype.setAggregation=function(e,t,n){switch(e){case"palette":case"outline":var r=this._getLeftPaneTab(e);r.removeAllAggregation("content",!0),r.addAggregation("content",t,n);break;default:sap.ui.core.Control.prototype.setAggregation.apply(this,arguments)}return this},s.prototype.getAggregation=function(e,t){switch(e){case"palette":case"outline":return this._getLeftPaneTab(e).getContent()[0]||t||null}return sap.ui.core.Control.prototype.getAggregation.apply(this,arguments)},s.prototype.destroyAggregation=function(e,t){switch(e){case"palette":case"outline":this._getLeftPaneTab(e).destroyAggregation("content",t);break;default:sap.ui.core.Control.prototype.destroyAggregation.apply(this,arguments)}return this},s.prototype.removeAllContent=function(){var e=["outline","palette","notificationBar","canvas","messageBar","properties"],t=this;jQuery.each(e,function(){t.setAggregation(this,null)})},s.prototype.onkeydown=function(e){(e.srcControl instanceof sap.ui.commons.TextField||e.srcControl instanceof sap.ui.commons.CheckBox)&&(e.ctrlKey&&e.keyCode===jQuery.sap.KeyCodes.X||e.ctrlKey&&e.keyCode===jQuery.sap.KeyCodes.V||e.keyCode===jQuery.sap.KeyCodes.DELETE)&&e.stopPropagation()},function(){function e(e,t){var n=this.$(),r=e===this.getAggregation("leftResizeBar"),i=n.find(".wysiwygLayoutCanvasWrapper"),o=n.find(r?".wysiwygLayoutLeftPaneContainer":".wysiwygLayoutRightPaneContainer"),a=t.left-n.offset().left,s=this.getLayoutInfo();r||(a=n.width()-a-t.width),i.css(r?"left":"right",a),o.css("width",a),s[r?"left":"right"].width=a,this.setProperty("layoutInfo",s,!0),this.fireLayoutInfoChange({info:s})}function t(e){var t,n,r=sap.ui.getCore().getConfiguration().getRTL(),i=this.$(),o=a-250,s=e===this.getAggregation("leftResizeBar");return s&&!r||!s&&r?(t=i.offset().left+250,n=t+o):(n=i.offset().left+i.width()-250,t=n-o),{min:t,max:n}}s.prototype.init=function(){this.setAggregation("leftResizeBar",new s.ResizeBar),this.setAggregation("rightResizeBar",new s.ResizeBar({anchor:r.Right})),this.setLayoutInfo()},jQuery.sap.require("sap.ui.core.Popup");var n={Vertical:"Vertical",Horizontal:"Horizontal"},r={Top:"Top",Left:"Left",Right:"Right",Bottom:"Bottom"};sap.ui.core.Control.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.layout.WysiwygLayout.ResizeBar",{metadata:{visibility:"hidden",properties:{orientation:{type:"string",group:"Behavior",defaultValue:n.Horizontal},anchor:{type:"string",group:"Behavior",defaultValue:r.Left}}},onmousedown:function(e){this._oBounds=t.call(this.getParent(),this);var r=this.$(),i=r.offset(),o=r.height(),a=r.width(),s=this.getOrientation()===n.Horizontal?"sapUiVSBGhost":"sapUiHSBGhost",u=sap.ui.core.Popup.getLastZIndex()+5;20>u&&(u=20),jQuery(document.body).bind("selectstart",jQuery.proxy(this.splitterSelectStart,this)).append('<div id="'+this.getId()+'_ghost" class="'+s+'" style =" height:'+o+"px; width:"+a+"px; left:"+i.left+"px; top:"+i.top+"px;z-index:"+u+'"></div>').append('<div id="'+this.getId()+'_overlay" style ="left: 0px;'+" right: 0px; bottom: 0px; top: 0px; position:fixed; z-index:"+u+'" ></div>'),jQuery(document).bind("mouseup",jQuery.proxy(this.onGhostMouseRelease,this)).bind("mousemove",jQuery.proxy(this.onGhostMouseMove,this)),r.focus(),e.preventDefault(),e.stopPropagation()},splitterSelectStart:function(e){return e.preventDefault(),e.stopPropagation(),!1},onGhostMouseRelease:function(){var t=jQuery.sap.byId(this.getId()+"_ghost"),n=t.offset();e.call(this.getParent(),this,{left:n.left,top:n.top,width:t.width(),height:t.height()}),this._oBounds=null,t.remove(),jQuery.sap.byId(this.getId()+"_overlay").remove(),jQuery(document.body).unbind("selectstart",this.splitterSelectStart),jQuery(document).unbind("mouseup",this.onGhostMouseRelease).unbind("mousemove",this.onGhostMouseMove)},onGhostMouseMove:function(e){var t=this._oBounds.min||0,r=this._oBounds.max||Number.MAX_VALUE;this.getOrientation()===n.Horizontal?e.pageX>t&&e.pageX<r&&jQuery.sap.byId(this.getId()+"_ghost").css("left",e.pageX+"px"):e.pageY>t&&e.pageY<r&&jQuery.sap.byId(this.getId()+"_ghost").css("top",e.pageY+"px")},renderer:function(e,t){var r=t.getAnchor().toLowerCase();e.write("<div"),e.writeControlData(t),t.getOrientation()===n.Horizontal?e.addClass("sapUiVerticalSplitterBar"):e.addClass("sapUiHorizontalSplitterBar"),e.addClass(r+"ResizeBar"),e.addStyle("position","absolute"),e.addStyle(r,"0"),e.addStyle("width","4px"),e.writeClasses(),e.writeStyles(),e.writeAttribute("tabIndex","-1"),e.write("></div>")}})}(),s}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/control/layout/SelectionPath",[],function(){"use strict";function e(){t();var n=this.$(),i=r&&n.width()!==r;if(r=n.width(),i)return a=jQuery.sap.delayedCall(100,this,e),void 0;if(a&&(jQuery.sap.clearDelayedCall(a),a=null),r){var o=this.getDomRef(),u=n.children(),c=u.length,l=0;for(u.show(),u.eq(0).hide(),jQuery.each(this.getPath()||[],function(e){s.setProperty("/path/"+e+"/visible",!1)});(o.clientWidth+1<o.scrollWidth||o.clientHeight+1<o.scrollHeight)&&c>1;)u.eq(0).show(),s.setProperty("/path/"+l+"/visible",!0),u.eq(++l).hide(),c--}}function t(){i.close()}function n(e){this.fireNavigate({pathId:e.oSource.getBindingContext().getProperty("id")})}jQuery.sap.declare("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.layout.SelectionPath"),jQuery.sap.require("sap.ui.unified.MenuItem");var r,i,o,a,s=new sap.ui.model.json.JSONModel({path:[]}),u=sap.ui.core.Control.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.layout.SelectionPath",{metadata:{properties:{path:{type:"object[]",group:"Data",defaultValue:null}},aggregations:{menu:{type:"sap.ui.commons.Link",multiple:!1,visibility:"hidden"},items:{type:"sap.ui.commons.Link",multiple:!0,singularName:"link"}},events:{navigate:{parameters:{pathId:{type:"string"}}}}},constructor:function(){sap.ui.core.Control.apply(this,arguments);var e=n.bind(this);i=new sap.ui.unified.Menu({items:{path:"/path",template:new sap.ui.unified.MenuItem({text:"{name}",visible:"{visible}",select:e})}}),i.getPopup().attachOpened(function(){jQuery(window).bind("resize",t)}).attachClosed(function(){jQuery(window).unbind("resize",t)}),this.bindAggregation("items","/path",function(t,n){return new sap.ui.commons.Link({text:n.getProperty("name"),press:e})}),this.setAggregation("menu",new sap.ui.commons.Link({press:function(){i.open(!1,null,sap.ui.core.Popup.Dock.BeginTop,sap.ui.core.Popup.Dock.BeginBottom,this)}})),this.setModel(s),i.setModel(s)},renderer:function(e,t){e.write("<div"),e.writeControlData(t),e.addClass("selectionPath"),e.writeClasses(),e.write(">"),e.write("<span"),e.addClass("menu"),e.writeClasses(),e.writeAttribute("role","button"),e.writeAttribute("aria-haspopup","true"),e.writeAttribute("tabindex","-1"),e.write(">"),e.renderControl(t.getAggregation("menu")),e.write("</span>");for(var n=t.getItems(),r=n.length,i=0;r-1>i;i++)e.write("<span>"),e.renderControl(n[i]),e.write("</span>");r&&e.writeEscaped(n[r-1].getText()),e.write("</div>")}});return u.prototype.onAfterRendering=function(){r=0,e.apply(this),o=sap.ui.core.ResizeHandler.register(this.getDomRef(),jQuery.proxy(e,this)),this.$().find("a").attr("href",null)},u.prototype.onBeforeRendering=function(){o&&(sap.ui.core.ResizeHandler.deregister(o),o=null)},u.prototype.setPath=function(e){return e=e||[],this.setProperty("path",e,!0),s.setProperty("/path",e),this},u}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/control/layout/MessageBar",["sap/watt/lib/lodash/lodash","../../utils/W5gUtils","./SelectionPath"],function(e,t,n){"use strict";jQuery.sap.declare("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.layout.MessageBar");var r=sap.ui.core.Control.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.layout.MessageBar",{metadata:{properties:{selection:{type:"object",group:"Data",defaultValue:null}},aggregations:{path:{type:"sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.layout.SelectionPath",multiple:!1,visibility:"hidden"}},events:{navigate:{parameters:{controlId:{type:"string"}}}}},constructor:function(){sap.ui.core.Control.apply(this,arguments);var e=this;this.setAggregation("path",new n({navigate:function(t){e.fireNavigate({controlId:t.getParameter("pathId")})}}))},renderer:function(e,t){e.write("<div"),e.writeControlData(t),e.addClass("messageArea"),e.writeClasses(),e.write(">"),e.renderControl(t.getAggregation("path")),e.write("</div>")}});return r.prototype.setSelection=function(e){this.setProperty("selection",e,!0);for(var n=[],r=t.getControlOverlay(e);r;)e=r.getElementInstance(),n.push({id:e.getId(),name:t.getControlTitle(e)}),r=r.getParentElementOverlay();return n.length&&(n=n.reverse(),n[0].name="View"),this.getAggregation("path").setPath(n),this},r.prototype.__QUnit_getPath=function(){return e.pluck(this.getAggregation("path").getPath(),"name")},r}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/control/layout/NotificationBar",["sap/watt/lib/lodash/lodash"],function(){"use strict";function e(e){n&&clearTimeout(n),n=setTimeout(function(){e.$().fadeOut("slow",function(){e.removeStyleClass("notificationBarVisible"),jQuery(this).css("display","")})},e.getAutoCloseDelay())}function t(e,t){e=e||[],t=t||[];for(var n=0;2>n;n++)if((e[n]||"")!==(t[n]||""))return!1;return!0}jQuery.sap.declare("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.layout.NotificationBar");var n=null,r=sap.ui.core.Control.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.layout.NotificationBar",{metadata:{properties:{autoCloseDelay:{type:"number",group:"Data",defaultValue:6e3},messages:{type:"string[]",group:"Data",defaultValue:null}}},renderer:function(e,t){function n(t,n){e.write("<div"),e.addClass("notificationBar"+t),e.addClass("sapUiLblNowrap"),e.writeClasses(),e.write(">"),e.write(n),e.write("</div>")}var r=t.getMessages()||[];e.write("<div"),e.writeControlData(t),e.addClass("notificationBar"),e.writeClasses(),e.write(">"),n("TopLine",r[0]||""),n("BottomLine",r[1]||""),e.write("</div>")}});return r.prototype.setMessages=function(e){if(jQuery.sap.assert(null==e||jQuery.isArray(e),"aMessages must be null or an array"),e=e||[],t(e,this.getMessages()))return this;var r=this.getDomRef();this.setProperty("messages",e,!!r),n&&(clearTimeout(n),n=null);var i=this.hasStyleClass("notificationBarVisible"),o=!e[0]&&!e[1];return r&&jQuery(r).children().each(function(t){jQuery(this).html(e[t]||"")}),i===o&&this.toggleStyleClass("notificationBarVisible"),this},r.prototype.updateMessageArea=function(t,n,r){this.setMessages([t,n]),r&&(t||n)&&e(this)},r}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/control/palette/PaletteItem",["../../utils/W5gUtils","./ControlItem"],function(e,t){"use strict";jQuery.sap.declare("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.palette.PaletteItem"),jQuery.sap.require("sap.ui.commons.Image"),jQuery.sap.require("sap.ui.commons.Label");var n=t.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.palette.PaletteItem",{metadata:{library:"sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe",properties:{window:{type:"object",group:"Misc",defaultValue:null},designTime:{type:"object",group:"Misc",defaultValue:null}}},renderer:{}});return n.prototype.onAfterRendering=function(){var t,n=this,r=this.getWindow();this.$().attr("draggable",!0).on("dragstart",function(){var i=e.createControl(n.getName(),r,n.getDesignTime());t=n.getDesignTime().createOverlayFor(i),t.setDraggable(!0),t.placeAt("overlay-container"),r.sap.ui.getCore().applyChanges(),t.$().trigger("dragstart"),e.closeW5gTooltips()}).on("dragend",function(){t.$().trigger("dragend")})},n.prototype.exit=function(){this.setWindow(null),this.setDesignTime(null)},n.prototype.rebind=function(e){return this.setWindow(e.getWindow()),this.setDesignTime(e.getDesignTime()),this.onAfterRendering(),this},n}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/models/W5gPaletteModel",["../utils/DocuUtils"],function(e){"use strict";function t(e,t,n){return e[n]>t[n]?1:e[n]<t[n]?-1:0}function n(e,n){return t(e,n,"title")}function r(e,n){return t(e,n,"name")}jQuery.sap.declare("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.models.W5gPaletteModel"),jQuery.sap.require("sap.ui.model.json.JSONModel");var i=sap.ui.model.json.JSONModel.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.models.W5gPaletteModel");
return i.prototype.setControls=function(t){var i=this,o={data:[]};return t.sort(n).forEach(function(e){if(void 0!==e.category){e.visible=!0;var t=null;jQuery.each(o.data,function(){return this.name===e.category?(t=this,!1):void 0}),t||(t={name:e.category,collapsed:!0,controls:[]},o.data.push(t)),t.controls.push(e)}}),e.enrichControlInfos(t.filter(function(e){return!!e.category})).then(function(){i.checkUpdate(!1)}).done(),o.data.sort(r),o.data.length&&(o.data[0].collapsed=!1),this.setData(o),this},i.prototype.applyFilter=function(e){var t,n,r,i=this.getData(),o=0===e.length,a=e.toLowerCase(),s=jQuery.extend(!0,{},i.data);i.data.forEach(function(e){t=!0,e.controls.forEach(function(e){n=o,o||(r=e.name.substr(e.name.lastIndexOf(".")+1),n=-1!==r.toLowerCase().indexOf(a)||-1!==e.title.toLowerCase().indexOf(a),t&=!n),e.visible=n}),e.collapsed=!!t}),o&&i.data.length>0&&i.data[0]&&(i.data[0].collapsed=!1),jQuery.sap.equal(jQuery.extend(!0,{},i.data),s)||this.checkUpdate(!0)},i}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/control/palette/Palette",["../../utils/W5gUtils","./PaletteItem","../../models/W5gPaletteModel","../../utils/W5gUi5LibraryMediator"],function(e,t,n,r){"use strict";function i(e){a(this,e.getParameter("value"),!0),this.getAggregation("searchField").focus()}function o(e,t){var n=0;if(_.each(_.pluck(e,"controls"),function(e){n+=e.length}),n!==t.length)return!1;var r=!0;return _.each(e,function(e){r&=_.all(e.controls,function(e){return _.find(t,function(t){return t.name===e.name&&t.category===e.category})})}),r}function a(e,t,n){c=t,n||e.getAggregation("searchField").setValue(c),e.getModel().applyFilter(t)}function s(e){e.getAggregation("sections").forEach(function(t){(t.getContent()||[]).forEach(function(t){t.rebind(e)})})}function u(e){return e.getDesignTime()?(e.bindAggregation("sections","/data",new sap.ui.commons.Panel({showCollapseIcon:!0,title:new sap.ui.commons.Title({text:"{name}"}),content:{path:"controls",factory:function(){return new t({name:"{name}",title:"{title}",icon:"{icon}",visible:"{visible}",window:e.getWindow(),designTime:e.getDesignTime()})}},visible:{parts:["controls"],formatter:function(e){return!!(e||[]).length}},collapsed:"{collapsed}",areaDesign:sap.ui.commons.enums.AreaDesign.Plain,borderDesign:sap.ui.commons.enums.BorderDesign.None}).addStyleClass("sapWysiwygSectionPanel")),void 0):(e.destroyAggregation("sections"),void 0)}jQuery.sap.declare("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.palette.Palette"),jQuery.sap.require("sap.ui.commons.SearchField");var c="",l={},p=null,f=sap.ui.core.Control.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.palette.Palette",{metadata:{properties:{designTime:{type:"object",group:"Misc",defaultValue:null},window:{type:"object",group:"Misc",defaultValue:null}},aggregations:{searchField:{type:"sap.ui.commons.SearchField",multiple:!1,visibility:"hidden"},sections:{type:"sap.ui.commons.Panel",multiple:!0,singularName:"panel"}}},constructor:function(){sap.ui.core.Control.apply(this,arguments),this.setAggregation("searchField",new sap.ui.commons.SearchField(this.getId()+"-filter",{enableListSuggest:!1,showListExpander:!1,enableFilterMode:!0,enableClear:!0,startSuggestion:0,suggest:[i,this]}).addStyleClass("sapWysiwygFilter")).addEventDelegate({oncontextmenu:function(e){e.preventDefault()}}),u(this)},renderer:function(e,t){var n=t.getAggregation("searchField");e.renderControl(n),e.write("<span"),e.writeControlData(t),e.addClass("sapWysiwygPalette"),e.writeClasses(),e.write(">"),(t.getAggregation("sections")||[]).forEach(function(t){e.renderControl(t)}),e.write("</span>")}});return f.prototype.onAfterRendering=function(){e.addPlaceHolderToSearchField(this.getAggregation("searchField"),"palette_search_field_placeholder")},f.prototype.exit=function(){this.reset()},f.prototype.reset=function(){this.setDesignTime(null),this.setWindow(null)},f.prototype.restoreFilter=function(e){e&&(e!==p&&(p&&(l[p.getKeyString()]=c),p=e,c=l[e.getKeyString()]||""),a(this,c))},f.prototype.cleanUpFilter=function(){l&&p&&(delete l[p.getKeyString()],p=null),c="",this.getAggregation("searchField").setValue(c)},f.prototype.onCanvasLoaded=function(){this._setPaletteModel(r.getSupportedControls(this.getDesignTime()))},f.prototype._setPaletteModel=function(e){var t=this.getModel();t instanceof n||(t=new n,this.setModel(t)),t.getData().data&&o(t.getData().data,e)?t.getData().data&&s(this):(t.setControls(e),u(this))},f.prototype.onclick=function(e){if("heading"===e.target.getAttribute("role")){var t=e.srcControl;t.setCollapsed(!t.getCollapsed())}},f}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/UndoRedoStack",["sap/watt/lib/lodash/lodash"],function(e){"use strict";function t(e){this._iMaxSize=e,this._aUndoStack=[],this._aRedoStack=[]}return t.prototype.push=function(t){t&&(t.equalTo(e.last(this._aUndoStack))||(this._aRedoStack=[],this._aUndoStack.push(t),this._aUndoStack.length>this._iMaxSize&&this._aUndoStack.shift()))},t.prototype.undo=function(){if(this._aUndoStack.length<=1)return null;var t=this._aUndoStack.pop();return this._aRedoStack.push(t),e.last(this._aUndoStack)},t.prototype.redo=function(){if(0===this._aRedoStack.length)return null;var e=this._aRedoStack.pop();return this._aUndoStack.push(e),e},t.prototype.hasUndo=function(){return this._aUndoStack.length>1},t.prototype.hasRedo=function(){return this._aRedoStack.length>0},t.prototype.clean=function(){this._aUndoStack=[],this._aRedoStack=[]},t.prototype.isClean=function(){return 0===this._aUndoStack.length+this._aRedoStack.length},t}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/databinding/DataBinding",["sap/watt/lib/lodash/lodash"],function(e){"use strict";function t(t,o){if(t.mBindingInfos){var a,c,l,p,f=t.mBindingInfos||{},d={},h=o.sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.models.W5gDataBindingModel,m=o.sap.ui.base.DataType;jQuery.each(f,function(o,f){a=t.getMetadata().getAllProperties()[o],(!a||i(a.type,m))&&(c=f.path,l=f.model,p=u,f.template||f.factory?"/"!==c&&(c=e.trimLeft(c,"/")):(f.parameters={pathPrefix:o+s},f.parts&&(l=f.parts[0].model,c=f.parts[0].path),c=f.parameters.pathPrefix+c,p=r(f)),d[l]||(d[l]={}),f.template&&"/"===c?d[l]=u:n(d[l],c,p))}),jQuery.each(d,function(e,n){"undefined"===e&&(e=void 0),t.setModel(new h(n),e)})}}function n(e,t,n){t=t||"";var r=t.split("/"),i=r.length,o=e;jQuery.each(r,function(e,n){t=n,e!==i-1&&(o[t]||(o[t]={}),o=o[t])}),o[t]=n}function r(t){var n=t.path,r=t.model;return t.parts?"{"+e.map(t.parts,function(e){return(e.model?e.model+">":"")+e.path}).join(", ")+"}":"{"+(r?r+">":"")+n+"}"}function i(e,t){if(e){var n=t.getType(e);return n instanceof t?"string"===n.getPrimitiveType().getName():!0}return!1}jQuery.sap.declare("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.databinding.DataBinding");var o,a,s="###",u=[{}],c=function(e){this._init(),e.jQuery.sap.require("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.models.W5gDataBindingModel"),e.jQuery.sap.require("sap.ui.base.DataType"),this._oWindow=e};return c.prototype._init=e.once(function(){jQuery.sap.require("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Utils"),a=sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Utils,o=a.getAggregationFilter().concat(["dependents"])}),c.prototype.displayDataBinding=function(e,n){arguments.length<2&&(n=e);var r=this;jQuery.each(n||[],function(){t(this,r._oWindow),a.iterateOverAllPublicAggregations(this,r.displayDataBinding.bind(r),null,o)})},c}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/dtplugins/listener/NotificationListener",["../../utils/W5gUtils","../../utils/ControlMetadata"],function(e,t){"use strict";function n(t){return!!e.getValidateDropTargetList(t).length}function r(){function e(e){e.getDroppable()&&!_.includes(t.getHiddenAggregations(),e.getAggregationName())&&n.push(e)}var n=[];return this._oDragDropPlugin._iterateAllAggregations(e),n}function i(t){var n,r=e.getValidateDropTargetList(t),i="";if(r.length)if(n=e.getControlTitle(t.getElementInstance()),r=r.map(function(t){return e.getControlTitle(t)}),1===r.length)i=e.getText("message_area_invalid_drop_area",[n,r[0]]);else{var o,a=_.dropRight(r),s=_.last(r);o=2===r.length?[n,a[0],s]:[n,a.join(", ")+",",s],i=e.getText("message_area_invalid_drop_areas",o)}return i}function o(t,n){if(this._oNotificationBar){var r=this._oDragDropPlugin.getDraggedOverlay(),i=r?r.getElementInstance():null,o=t&&e.getControlTitle(t),a=n?e.getText("message_area_drop_target_info",[o,n]):"",s="";i&&"sap.m.Label"===i.getMetadata().getName()&&t&&"sap.ui.layout.form.SimpleForm"===t.getMetadata().getName()&&(s=e.getText("message_area_drop_label_on_form")),this._oNotificationBar.updateMessageArea(a,s)}}var a=function(e,t){this._oNotificationBar=e,this._oDragDropPlugin=t};return a.prototype.onDragStart=function(t){var o="",a="";n(t)&&0===r.call(this).length?o=i.call(this,t):"sap.m.PullToRefresh"===t.getElementInstance().getMetadata().getName()&&(o=e.getText("message_area_warning"),a=e.getText("message_area_pull_to_refresh_warning")),this._oNotificationBar&&this._oNotificationBar.updateMessageArea(o,a)},a.prototype.onDragEnd=function(){this._oNotificationBar&&this._oNotificationBar.updateMessageArea()},a.prototype.onDragOver=function(n){if(this._oNotificationBar){var r,i=n.getElementInstance(),a=i&&e.getControlTitle(i);t.isControlNotDroppable(i)?(r=e.getText("message_area_invalid_drop_to_outline_controls",[a]),this._oNotificationBar.updateMessageArea(r)):o.call(this,n.getParentAggregationOverlay().getElementInstance(),n.getParentAggregationOverlay().getAggregationName())}},a.prototype.onControlAdded=function(e,t){o.call(this,e,t)},a}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/dtplugins/listener/XMLAdaptListener",["../../utils/W5gUtils"],function(e){"use strict";var t=function(e,t){this._oXMLManipulator=e,this._oWindow=t,this._oInitialState=null};return t.prototype.onDragStart=function(t){if(this._oSourceDraggedOverlayContainer=t.getParentElementOverlay(),this._oSourceDraggedOverlayContainer){var n=t.getElementInstance(),r=e.getWYSIWYGParentAggregationInfo(n,this._oWindow),i=r.parent.getMetadata().getAggregation(r.aggregationName),o=i.multiple,a=o?r.parent[i._sGetter]().indexOf(n):0;this._oInitialState={control:n,parent:r.parent,aggregation:r.aggregationName,index:a,multiple:o}}},t.prototype.onAggregationDrop=function(){this._bDroppedOnCanvas=!0},t.prototype.onCanvasDrop=t.prototype.onAggregationDrop,t.prototype.onDragEnd=function(t){var n=t.getElementInstance(),r=t.getParentAggregationOverlay();if(this._bDroppedOnCanvas){if(r){var i=t.getParentAggregationOverlay().getAggregationName(),o=t.getParentElementOverlay().getElementInstance().sId,a=this._oWindow.sap.ui.dt.ElementUtil.getAggregation(t.getParentElementOverlay().getElementInstance(),i),s=a.indexOf(n);if(this._oSourceDraggedOverlayContainer){var u=this._oSourceDraggedOverlayContainer.getElementInstance().sId;this._oXMLManipulator.emitMoveEvent(n,i,u,o,s)}else this._oXMLManipulator.emitAddEvent(n,i,o,s)}}else this._oSourceDraggedOverlayContainer?this._oInitialState.multiple?this._oWindow.sap.ui.dt.ElementUtil.insertAggregation(this._oInitialState.parent,this._oInitialState.aggregation,this._oInitialState.control,this._oInitialState.index):this._oWindow.sap.ui.dt.ElementUtil.addAggregation(this._oInitialState.parent,this._oInitialState.aggregation,this._oInitialState.control):e.destroyControl(n);delete this._oSourceDraggedOverlayContainer,delete this._bDroppedOnCanvas},t}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/dtplugins/listener/OverlappingOverlaysShrinkListener",[],function(){"use strict";var e=function(e){this._oDragDropPlugin=e,this._aSrinkedElements=[]};return e.prototype.onDragStart=function(){var e=this;this._oDragDropPlugin._iterateAllAggregations(function(t){if(t.isDroppable()){var n=t.getParent(),r=n.getParentAggregationOverlay(),i=t.$();if(r&&r.isDroppable()&&i.width()>0&&i.height()>0){var o=n.getElementInstance();o.addStyleClass("wysiwygShrink"),e._aSrinkedElements.push(o)}}})},e.prototype.onDragEnd=function(){this._aSrinkedElements.forEach(function(e){e.removeStyleClass("wysiwygShrink")}),this._aSrinkedElements=[]},e}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/dtplugins/listener/HiddenControlPartsListener",["../../utils/ControlMetadata"],function(e){"use strict";var t=function(e){this._oDragDropPlugin=e,this._aOnDragEndHandlers=[]};return t.prototype.onDragStart=function(){var t,n,r,i=this;this._oDragDropPlugin._iterateAllAggregations(function(o){o.isDroppable()&&(t=o.getElementInstance(),n=e.getAggregationsAdapterFunction(t,o.getAggregationName(),"showInvisibleParts"),n&&(r=n.call(t),r.length&&(i._aOnDragEndHandlers=i._aOnDragEndHandlers.concat(r))))})},t.prototype.onDragEnd=function(){this._aOnDragEndHandlers.forEach(function(e){e()}),this._aOnDragEndHandlers=[]},t}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/ViewState",["sap/watt/lib/lodash/lodash"],function(){"use strict";function e(e,t){this._sViewStateContent=e,this._sViewStateSelectedControlId=t}return e.prototype.equalTo=function(e){return e&&this._sViewStateContent===e.getViewStateContent()},e.prototype.getViewStateContent=function(){return this._sViewStateContent},e.prototype.getViewStateSelectedControlId=function(){return this._sViewStateSelectedControlId},e}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/EventBusHelper",[],function(){"use strict";var e=sap.ui.getCore().getEventBus(),t="w5g",n={IDENTIFIERS:{NOTIFICATION_BAR_ADD_MESSAGE:"notificationBarAddMessage",EVENTS_NEW_FUNC_ADDED:"eventsNewFunctionAdded",EVENTS_NAVIGATE_TO_CONTROLLER:"eventsNavToControiller",PROP_MODEL_CONTROL_UPDATED:"propModelControlUpdated"},publish:function(n,r){e.publish(t,n,r)},subscribe:function(n,r){e.subscribe(t,n,function(e,t,n){r(n)})}};return n}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/service/WysiwygEditor",["sap/watt/common/plugin/platform/service/ui/AbstractEditor","../control/serialization/XMLManipulator","sap/watt/lib/lodash/lodash","../utils/BindingUtils","../utils/ModulePath","../utils/W5gBindingHelper","../utils/ResourcesHelper","../utils/W5gUtils","../utils/CopyPasteUtils","../control/layout/WysiwygLayout","../control/layout/MessageBar","../control/layout/NotificationBar","../control/palette/Palette","../utils/UndoRedoStack","../databinding/DataBinding","../utils/UsageMonitoringUtils","../utils/W5gUi5LibraryMediator","../dtplugins/listener/NotificationListener","../dtplugins/listener/XMLAdaptListener","../dtplugins/listener/OverlappingOverlaysShrinkListener","../dtplugins/listener/HiddenControlPartsListener","../utils/EventsHelper","../utils/ViewState","../utils/ControlMetadata","../utils/EventBusHelper"],function(e,t,n,r,i,o,a,s,u,c,l,p,f,d,h,m,g,v,y,_,x,b,w,S,E){"use strict";jQuery.sap.require("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Wysiwyg"),jQuery.sap.require("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Utils"),jQuery.sap.require("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.WysiwygRenderer"),jQuery.sap.require("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.view.OutlineTreeNode");var C="alert",T=e.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.service.WysiwygEditor",{constructor:function(){this._oCurrentDocument=null,this._oWysiwygCtrl=null,this._aCssStyles=[],this._oCurrentInjectedView=null,this._oEditorContentLayout=null,this._mOpenedDocuments={},this._oLayoutModel=new sap.ui.model.json.JSONModel,this._sLastViewContent=null,this._oOnViewLoadedPromise=null,this._oIsFlushingPromise=null,this._mSelectedUI5Control={},this._sEditorOpenState=null,this._mDocumentUndoRedoStacks={},this._oContextMenuGroup=null,this._sClipboardControlXML=null},configure:function(e){var t=this;return this._aCssStyles=e.styles,e.contextMenu?this.getContext().service.commandGroup.getGroup(e.contextMenu).then(function(e){t._oContextMenuGroup=e}):void 0},init:function(){var e=this,t=this.getContext();s.init(t),a.init(t),o.init(t),m.init(t),g.init(t),r.init(t),i.init(t),b.init(t),a.retrieveUserPreferences().then(function(t){e._sDevice=t.device,e._oLayoutInfo={left:t.left,right:t.right},/phone|tablet|desktop/.test(e._sDevice)||(e._sDevice="tablet",e._updateUserPreferences({device:e._sDevice}))}).done(),$("body").on("mouseup",function(){var t=e.getCurrentSelectedControl(),n=e.getScope(),r=s.getControlOverlay(t,n);r&&r.$().hasClass("ui-resizable-resizing")&&n.$("body").mouseup()}),E.subscribe(E.IDENTIFIERS.NOTIFICATION_BAR_ADD_MESSAGE,function(t){e._addMessageToNotificationBar(t.sLine1,t.sLine2,!0)})},getState:function(){return this._sEditorOpenState},getContext:function(){return this.context.service.ui5wysiwygeditor.context},isRestorable:function(){return jQuery.browser.chrome},isAvailable:function(){return"xs2"!==sap.watt.getEnv("server_type")},open:function(e){return this._open(e)},_open:function(t,r){var i=this;i._sEditorOpenState="loading";var o=Q(i._oOnViewLoadedPromise&&i._oOnViewLoadedPromise.promise);return i._oOnViewLoadedPromise=Q.defer(),o.catch(n.noop).then(function(){if(!jQuery.browser.chrome){var n=s.getText("editor_unsupported_browser_error_message"),o=new Error(n);return o.sMessageType="alert",i._handleViewCreationError(o),jQuery.sap.log.error(n),i._oOnViewLoadedPromise.promise}m.startPerf("open_w5g"),e.prototype.open.apply(i,arguments);var a=i._oCurrentDocument!==t;i._oCurrentDocument=t;var u=s.getText("editor_loading_layout_editor_message"),c="new";return i._showProgress(u,r).then(function(){return Q.all([t.getContent(),g.loadLibrary(t)]).spread(function(e){if(i._mOpenedDocuments[t.getKeyString()])c="existed",i._openExistingDocument(a,e);else{if(!i._isXMLFragment(t)&&!i._ensureIsXMLView(t))return Q();i._openNewDocument(t)}i.oCommandService=i.getContext().service.command;var n=i.getCurrentSelectedControl(),r=n&&n.getId();return i._getCurrentUndoRedoStack().push(new w(e,r)),i._oOnViewLoadedPromise.promise.then(function(){return b.fireViewHasChanged()}).then(function(){return i.selectUI5Control(r||i.getRoot(),r&&i._getSelectedAggregation())}).then(function(){i._sEditorOpenState=null})}).finally(function(){return m.report("open_w5g",c+"#"+t.getKeyString()),i._hideProgress()})})})},_showProgress:function(e,t){return this.getContext().service.dialogprogress.show(e,t)},_setProgress:function(e){return this.getContext().service.dialogprogress.setProgress(e||0)},_hideProgress:function(){return this.getContext().service.dialogprogress.hide()},_updateUserPreferences:function(e){a.updateUserPreferences(e).done()},_openInWysiwyg:function(){var e=this;return e._removeViewInstance(),e._setProgress(50).then(function(){var t=window.parent["sap-ui-debug"]?"true":"false",n=require.toUrl("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/control/staticIndex.html?sap-ui-debug="+t)+s.getFakeOsUrlParam(e._sDevice);e._oWysiwygCtrl.getSrc()!==n?(e._oWysiwygCtrl.attachEventOnce("loaded",e._onOpen.bind(e)),e._oWysiwygCtrl.setSrc(n),e._oWysiwygCtrl.setDevice(e._sDevice)):e._onOpen()})},_openNewDocument:function(e){var t=this;this._mOpenedDocuments[e.getKeyString()]=e,this._createUIControls().then(function(){return t._openInWysiwyg()}).done()},_openExistingDocument:function(e,t){var n=this;return e||this._sLastViewContent!==t?(this._openInWysiwyg(),void 0):n.fireViewElementSelected().then(function(){n._oOnViewLoadedPromise.resolve()}).done()},onDataBindingChanged:function(){var e=this;this.iterateOverAllPublicAggregationsOfRootControl(function(t,n){e._oDataBinding.displayDataBinding(n)})},onDocumentChanged:function(e){if(a.isSupportedResourceChangeEvent(e)){var t=this;this.getContext().service.content.getDocuments().then(function(e){var r=e.map(function(e){return e.getKeyString()});t._mOpenedDocuments=n.pick(t._mOpenedDocuments,r)}).done()}},_onOpen:function(){var e=this;e._oXmlManipulator=new t(e.getScope(),n.bindKey(e,"_flushWrapper")),e.getScope().jQuery.sap.require("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.adapter"),this._createView().then(function(t){return e._injectViewInstance(t),e._setProgress(70)}).fail(function(t){return e._handleViewCreationError(t)}).done()},getXmlManipulator:function(){return this._oXmlManipulator},serialize:function(){return this.getRoot().__XMLRootNode.outerHTML},_rememberInitialViewContent:function(){var e=this;return this._sOriginalSerializedViewContent=this.serialize(),this._oCurrentDocument.getContent().then(function(t){e._sOriginalViewContent=t})},_handleViewCreationError:function(e){e||(e=new Error),this.getContext().service.log.error(e.message),e.message=s.getText("editor_view_creation_error"),e.sMessageType=e.sMessageType||C,this._oOnViewLoadedPromise.reject(e),this._hideProgress().done()},_getMessagesOnSelection:function(e){var t={line1:"",line2:""},n=e&&s.getControlTitle(e);return e&&(s.isCompositeControl(e)?t.line1=s.getText("message_area_cannot_change_inner_properties_from_canvas",[n]):S.isControlUnsupported(e)?t.line1=s.getText("unsupported_message"):S.isControlToBeSupported(e)&&(t.line1=s.getText("properties_tobe_supported_message"))),t},onViewElementSelected:function(e){if(this._oMessageBar){var t=e.params.selection[0].control;if(t!==this._oMessageBar.getSelection()){this._oMessageBar.setSelection(t);var n=this._getMessagesOnSelection(t);this._oNotificationBar.updateMessageArea(n.line1,n.line2,!0)}}},_onDesignTimeReady:function(){var e=this;this.palette.onCanvasLoaded(),this._oDataBinding=new h(this.getScope()),this.iterateOverAllPublicAggregationsOfRootControl(function(t,n){try{e._oDataBinding.displayDataBinding(n)}catch(r){return jQuery.sap.log.error(r),e._oOnViewLoadedPromise.reject(r)}}),e._setProgress(100).then(function(){return e.getContext().event.fireOpened({document:e._oCurrentDocument})}).then(function(){return e.oCommandService.registerDocument(e.getScope().document)}).then(function(){return e._rememberInitialViewContent()}).then(function(){return o.setDocumentData(e._oCurrentDocument,e.getRoot(),e._oXmlManipulator)}).finally(function(){return e._oEditorContentLayout.setBusy(!1),e._oCurrentDocument&&e.palette&&e.palette.restoreFilter(e._oCurrentDocument),e._hideProgress().then(function(){e._updateLayoutModel(),e._oOnViewLoadedPromise.resolve()})}).catch(function(t){jQuery.sap.log.error(t),e._oOnViewLoadedPromise.reject(t)}).done()},_ensureIsXMLView:function(e){var t=this,n=new RegExp("(.+)(.view)(.+)"),r=e.getEntity().getName(),i=n.exec(r);if(!i||-1===(i&&i.indexOf(".xml"))){var o=s.getText("editor_wrong_file_type_message");return t._oOnViewLoadedPromise.reject({message:o}),!1}return!0},_isXMLFragment:function(e){var t=new RegExp("(.+)(.fragment)(.+)"),n=e.getEntity().getName(),r=t.exec(n);return!!r},_injectViewInstance:function(e){this.getScope().oView=this._oCurrentInjectedView=e.placeAt("content").addStyleClass("sapUiScroll"),this._createDesignTime(e)},_loadDesignTimeCSS:function(e,t){function n(t){return e.jQuery.sap.getResourcePath("sap/watt/saptoolsets/fiori/editor/plugin/ui5wysiwygeditor/iframe/style/"+t)}function r(t){var r=s.getDesignTimeCssId(t);if(!e.jQuery("link[id="+r+"]").length){var i=e.jQuery("<link type='text/css' rel='stylesheet' href='"+n(t)+"' id='"+r+"' />");e.document.head.appendChild(i[0])}}r("style.css"),jQuery.each(t,function(){this.css&&r(this.css)})},_createDesignTime:function(e){var t=this,r=this.getScope();r._=n,r.Q=Q;var i=r.sap.ui,o=r.jQuery.sap.require,a=i.getCore();a.loadLibrary("sap.ui.dt"),o("sap.ui.dt.DesignTime"),o("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.dtplugins.W5gDragDrop"),o("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.dtplugins.W5gBadge"),o("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.dtplugins.W5gMouseSelection"),o("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.dtplugins.W5gContextMenu"),o("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.dtplugins.Actions"),o("sap.ui.dt.ElementUtil"),o("sap.ui.dt.Preloader");var u=i.dt.ElementUtil.findAllPublicElements(e);u=u.concat(n.keys(r.sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.adapter.designTimeMetadata)),i.dt.Preloader.load(u).then(function(){var n=new r.sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.dtplugins.W5gDragDrop({w5gUtils:s,controlMetadata:S,editor:t});n.setListeners([new v(t._oNotificationBar,n),new y(t._oXmlManipulator,r),new _(n),new x(n)]),t._oDesignTime=new i.dt.DesignTime({designTimeMetadata:r.sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.adapter.designTimeMetadata,rootElements:[e],plugins:[new r.sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.dtplugins.W5gMouseSelection({w5gUtils:s,editor:t}),new r.sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.dtplugins.W5gContextMenu({context:t.context,contextMenuConfig:{group:t._oContextMenuGroup,getIFramePosition:t._oWysiwygCtrl.getIFramePosition()}}),n,new r.sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.dtplugins.W5gBadge({w5gUtils:s}),new r.sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.dtplugins.Actions]}),t._loadDesignTimeCSS(r,r.sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.adapter.designTimeMetadata),t.palette.setDesignTime(t._oDesignTime),S.setDesignTime(t._oDesignTime),t.palette.setWindow(t.getScope()),t._onDesignTimeReady()})},getDesignTime:function(){return this._oDesignTime},_registerUI5ModulePaths:function(){var e=this;return i.getModulePaths(this._oCurrentDocument).then(function(t){return t?(n.forEach(t.resourcesroots,function(n,r){var i=e._calculateUrlFromDocument(t.parentFolder,n);e.getScope().jQuery.sap.registerModulePath(r,i)}),!0):!1})},_registerExtensionModulePaths:function(e){var t=this,n={getProxyMetadata:function(){return{getName:function(){return"extensibility"}}}};return t.getContext().service.setting.project.get(n,e).then(function(n){if(n){var r,i=n.namespace;switch(n.type){case"Workspace":case"abaprep":case"hcp":r=n.parentResourceRootUrl}if(r&&i)return e.getProject().then(function(e){var n=t._calculateUrlFromDocument(e.getEntity().getBackendData().location,r);t.getScope().jQuery.sap.registerModulePath(i,n)})}})},_calculateUrlFromDocument:function(e,t){if(0===t.indexOf("/"))return t;var n=sap.watt.getEnv("orion_server");return n&&n.lastIndexOf("/")===n.length-1&&(n=n.substring(0,n.length-1)),"/"!==e[0]&&(e="/"+e),n+e+t},_removeViewInstance:function(){var e=this.getScope(),t=e&&e.sap.ui.getCore();this._oDesignTime&&(this.palette.reset(),this._oDesignTime.destroy(),this._oDesignTime=null),this._oCurrentInjectedView&&this._oCurrentInjectedView.destroy&&(this._oCurrentInjectedView.destroy(),this._oCurrentInjectedView=null),t&&t.reset()},_createView:function(){var e=this;return this._oCurrentDocument.getContent().then(function(t){var n=e._registerUI5ModulePaths(),r=e._registerExtensionModulePaths(e._oCurrentDocument);return Q.all([n,r]).spread(function(n){var r;if(!e._oWysiwygCtrl)return null;var i=e._oCurrentDocument.getEntity().getFileExtension().toUpperCase(),o=e.getScope().sap.ui;if(0===t.length)throw r=new Error(s.getText("editor_empty_view_error_message")),r.sMessageType="alert",r;var a=new DOMParser,u=a.parseFromString(t,"text/xml");if(u.getElementsByTagName("parsererror").length>0){var c=u.getElementsByTagName("parsererror")[0].childNodes[1].innerHTML;throw r=new Error(s.getText("editor_view_xml_malformed_message")+"\n\n"+c),r.sMessageType="alert",r}var l;try{l=o.view({viewContent:t,type:o.core.mvc.ViewType[i]})}catch(p){if(!n){var f=s.getText("editor_view_xml_no_resource_roots_message");p.message=f+"\n\n"+p.message}throw p.sMessageType="alert",jQuery.sap.log.error(p),p}return l})})},_flushWrapper:function(){var e=this;return b.fireViewHasChanged().then(function(){return e.flush()}).done()},iterateOverAllPublicAggregationsOfRootControl:function(e,t,n){if(!this._oDesignTime)return Q();var r=this.getScope();if(r.oView instanceof r.sap.ui.core.mvc.View){var i=sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Utils,o=n||i.getAggregationFilter();return i.iterateOverAllPublicAggregations(r.oView,e,t,o)}},_getUndoRedoStackForDocument:function(e){var t=e.getKeyString();return this._mDocumentUndoRedoStacks[t]||(this._mDocumentUndoRedoStacks[t]=new d(15)),this._mDocumentUndoRedoStacks[t]},_getCurrentUndoRedoStack:function(){return this._oCurrentDocument?this._getUndoRedoStackForDocument(this._oCurrentDocument):new d(0)},flush:function(){var e=this;return this._oOnViewLoadedPromise.promise.isRejected()||!this._oCurrentDocument?Q():(this._oIsFlushingPromise=Q.defer(),this._oOnViewLoadedPromise.promise.then(function(){var t=e._getSerializedViewContent();return e._oCurrentDocument.setContent(t,e.getContext().self).then(function(){return e._getCurrentUndoRedoStack().push(new w(t,e.getCurrentSelectedControl()&&e.getCurrentSelectedControl().getId())),e._sLastViewContent=t,e.fireViewElementSelected()}).then(function(){return e._updateLayoutModel(),e._oIsFlushingPromise.resolve(),e._oIsFlushingPromise.promise})}))},_updateLayoutModel:function(){this._oLayoutModel.setData({undoEnabled:this.hasUndo(),redoEnabled:this.hasRedo()})},_getSerializedViewContent:function(){var e=this.serialize();return e===this._sOriginalSerializedViewContent&&(e=this._sOriginalViewContent),e},close:function(t){this.palette&&this.palette.cleanUpFilter();var n=this,r=arguments;return Q(this._oIsFlushingPromise).then(function(){var i=t.getKeyString();return delete n._mOpenedDocuments[i],delete n._mSelectedUI5Control[i],t===n._oCurrentDocument&&(n._oCurrentDocument=null),delete n._mDocumentUndoRedoStacks[i],e.prototype.close.apply(n,r)})},getContent:function(){var e=this;return e._createUIControls().then(function(){return e.getContext().service.resource.includeStyles(e._aCssStyles).then(function(){return e._oEditorContentLayout.setBusy(!0),e._oEditorContentLayout})})},_onDeviceTypeChanged:function(e){return this._sDevice=e.getParameter("deviceType"),this._updateUserPreferences({device:this._sDevice}),this._mOpenedDocuments[this._oCurrentDocument.getKeyString()]=null,this.open(this._oCurrentDocument)},_createUIControls:n.once(function(){var e=this;return e._setProgress().then(function(){e._oWysiwygCtrl=new sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Wysiwyg({device:e._sDevice}),e._oMessageBar=new l({navigate:function(t){m.report("breadcrumb");var n=t.getParameter("controlId");return e.selectUI5Control(n)}}),e._oNotificationBar=new p,e.palette=new f}).then(function(){return e._setProgress(20)}).then(function(){e._oEditorContentLayout||(e._oEditorContentLayout=new c("wysiwygContainerLayout"+e._oWysiwygCtrl.getId(),{deviceType:e._oWysiwygCtrl.getDevice(),layoutInfo:e._oLayoutInfo,deviceTypeChange:function(t){e._onDeviceTypeChanged(t).done()},layoutInfoChange:function(t){e._oLayoutInfo=t.getParameter("info"),e._updateUserPreferences(e._oLayoutInfo)},undo:e.undo.bind(e),redo:e.redo.bind(e)}).addStyleClass("wysiwygContainerLayout"),s.applyBundleTo(e._oEditorContentLayout),e._oEditorContentLayout.setModel(e._oLayoutModel,"layoutModel"),e._oEditorContentLayout.addEventDelegate({onAfterRendering:function(){e._oWysiwygCtrl&&e._oWysiwygCtrl.$().parents(".wysiwygLayoutCanvasContainer").unbind("click").bind("click",function(){e.deselectUI5Control()})}}))}).then(function(){return e._setProgress(30)}).then(function(){return e.getContext().service.w5gOutline.getContent()}).then(function(t){return e._oEditorContentLayout.setMessageBar(e._oMessageBar),e._oEditorContentLayout.setNotificationBar(e._oNotificationBar),e._oEditorContentLayout.setPalette(e.palette),e._oEditorContentLayout.setOutline(t),e._oEditorContentLayout.setCanvas(e._oWysiwygCtrl),e.getContext().service.w5gproperties.getContent().then(function(t){return e._oEditorContentLayout.setRightPane(t),e._setProgress(40)})})}),getTitle:function(){return this._oCurrentDocument?this._oCurrentDocument.getEntity().getName():""
},getTooltip:function(){return this._oCurrentDocument?this._oCurrentDocument.getEntity().getFullPath():""},openInLayoutEditor:function(){var e=this.getCurrentSelectedControl(),t=this,n=this.getScope();return this.getContext().service.filesystem.documentProvider.getDocument(s.getFilePathByControl(e,n)).then(function(e){return t.getContext().service.content.open(e,t.getContext().service.ui5wysiwygeditor)})},_addXMLNamespaces:function(e,t){var r=t.split(/\/?>/),i=r[0];return i+=n.map(e,function(e,t){var n=""===e?' xmlns="'+t+'"':" xmlns:"+e+"="+'"'+t+'"';return-1===i.indexOf(n)?n:""}).join(""),t.replace(r[0],i)},_controlToXML:function(e){var n=e.__XMLNode.outerHTML,r=t.getNamespaceMap(e.__XMLRootNode);for(var i in r){var o=r[i];if(""!==o){var a=new RegExp(i+":","g");n=n.replace(a,o+":")}}return this._addXMLNamespaces(r,n)},_copyAndMaybeDelete:function(e){var t=this.getCurrentSelectedControl(),n=t&&s.getControlTitle(t);if(u.isControlCopyUnsupported(t,this.getScope())){var r=s.getText("message_area_control_copy_unsupported",[n]);this._oNotificationBar.updateMessageArea(r,"")}else if(this._sClipboardControlXML=this._controlToXML(t),e)return this.deleteUI5Control(t)},cut:function(){return this._copyAndMaybeDelete(!0)},copy:function(){return this._copyAndMaybeDelete(!1)},injectElementToAggregation:function(e,t){var n,r=sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Utils,i=s.createControl(e,this.getScope(),this._oDesignTime);this._oDesignTime.createOverlayFor(i);var o=this.getCurrentSelectedControl();return s.getControlOverlay(o,this.getScope()),n=r.getAggregationByName(o,t).length,this._insertControl(o,t,i,n)},_insertControl:function(e,t,r,i){var o=n.find(s.getControlOverlay(e,this.getScope()).getAggregationOverlays(),function(e){return e.getAggregationName()===t});return s.canAggregationOverlayContain(o,r)?(r=u.adjustControlBeforeAdd(r,e,t,this.getDesignTime()),this.getScope().jQuery.sap.require("sap.ui.dt.ElementUtil"),e.getMetadata().getAggregation(t).multiple?this.getScope().sap.ui.dt.ElementUtil.insertAggregation(e,t,r,i):this.getScope().sap.ui.dt.ElementUtil.addAggregation(e,t,r),this._oXmlManipulator.emitAddEvent(r,t,e.getId(),i),this.onDataBindingChanged(),this.selectUI5Control(r),void 0):(this._notifyInvalidPaste(r,e,t),r.destroy(),Q())},_getControlFromClipboard:function(){var e=u.fixAllIds(this._sClipboardControlXML,this.getRoot().__XMLRootNode.parentNode,this._getUI5ControlById.bind(this));return this.getScope().sap.ui.xmlfragment({fragmentContent:e})},_notifyInvalidPaste:function(e,t,n){var r,i=e&&s.getControlTitle(e),o=s.getControlTitle(t);r=n?s.getText("message_area_control_insert_invalid_in_aggregation",[i,o,n]):s.getText("message_area_control_insert_invalid",[i,o]),this._oNotificationBar.updateMessageArea(r,"")},paste:function(){var e,t=this,r=this.getCurrentSelectedControl(),i=this._getSelectedAggregation(),o=sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.iframe.Utils;if(i)return e=o.getAggregationByName(r,i).length,t._insertControl(r,i,t._getControlFromClipboard(),e);if(!S.isContainer(r))return t.pasteSibling(1);var a=t._getControlFromClipboard(),u=s.getValidAggregations(r,a),c=n.map(u,function(e){return e.getAggregationName()});return 0!==u.length?(i=r.getMetadata().getDefaultAggregationName(),-1===c.indexOf(i)&&(i=c[0]),e=o.getAggregationByName(r,i).length,t._insertControl(r,i,a,e)):(t._notifyInvalidPaste(a,r),void 0)},pasteSibling:function(e){var t=this,n=this.getCurrentSelectedControl(),r=this._getControlFromClipboard(),i=s.getControlOverlay(n),o=i.getParentAggregationOverlay(),a=o.getChildren().indexOf(i)+e,u=o.getElementInstance();return t._insertControl(u,o.getAggregationName(),r,a)},hasClipboard:function(){return!!this._sClipboardControlXML},getCurrentSelectedControl:function(){var e=this._getSelectedControlAndAggregation();return e=e&&e.control,"string"==typeof e&&(e=this._getUI5ControlById(e)),e},_getSelectedAggregation:function(){var e=this._getSelectedControlAndAggregation();return e&&e.aggregation},_getSelectedControlAndAggregation:function(){return this._oCurrentDocument&&this._mSelectedUI5Control[this._oCurrentDocument.getKeyString()]},getRoot:function(){return this._oCurrentInjectedView},_getUI5ControlById:function(e){var t,n=this.getRoot();return this._oWysiwygCtrl&&this.getScope()&&(t=this.getScope().sap.ui.getCore().byId(e)),t||n&&n.byId(e)},getScope:function(){return this._oWysiwygCtrl&&this._oWysiwygCtrl.getScope()},selectUI5Control:function(e,t){var n=this;if(!e)return this.deselectUI5Control();var r=this._getOverlay(e);return r&&r.setSelected(!0),this._mSelectedUI5Control[this._oCurrentDocument.getKeyString()]={control:e,aggregation:t},this.focus().then(function(){return n.fireViewElementSelected()})},deselectUI5Control:function(){var e=this.getCurrentSelectedControl(),t=this._getOverlay(e);return t&&t.setSelected(!1),delete this._mSelectedUI5Control[this._oCurrentDocument.getKeyString()],this.fireViewElementSelected()},highlightUI5Control:function(e){var t=this._getOverlay(e);t&&t.addStyleClass("widget-overlay-highlighted")},downplayUI5Control:function(e){var t=this._getOverlay(e);t&&t.removeStyleClass("widget-overlay-highlighted")},deleteUI5ControlWithValidations:function(){var e=this;return s.deleteControlWithConfirmationDialog_aux(e.getContext()).then(function(t){return t.bResult?e.deleteUI5Control():void 0})},_selectAnother:function(e){var t=this,r=null;return n.forEach(["next","previous","up"],function(n){return r=s.navigateUI5Control(n,t._oDesignTime),r&&r!==e?!1:void 0}),this.selectUI5Control(r)},deleteUI5Control:function(e){var t=this;if(e=e||this.getCurrentSelectedControl()){m.report("delete_control",e.getMetadata().getName());var n=o.beforeRemoveControl(e);return t._selectAnother(e).then(function(){s.removeControl(e,t._oXmlManipulator),n&&n()})}},navigateUI5Control:function(e){var t=s.navigateUI5Control(e,this._oDesignTime);return t?this.selectUI5Control(t):void 0},getSelection:function(){return this._oCurrentDocument?[{document:this._oCurrentDocument,control:this.getCurrentSelectedControl(),aggregation:this._getSelectedAggregation()}]:null},fireViewElementSelected:function(){return this.getContext().event.fireViewElementSelected({selection:this.getSelection()})},goToCode:function(){var e=this;return e._oCurrentDocument.getContent().then(function(t){var n=e.getCurrentSelectedControl(),r=s.xmlNodeToSourceRange(s.getXMLNode(n),s.getXMLRootNode(n),t);return s.goToCode(e.context,e._oCurrentDocument,r)})},getFocusElement:function(){var e=[],t=this._oWysiwygCtrl&&this._oWysiwygCtrl.getIFrameDomRef();if(t){var n=this._oEditorContentLayout.$().find(".wysiwygLayoutCanvasContainer")[0];n&&(e=[t,n])}return e},_reopenWithViewState:function(e){var t=e.getViewStateContent(),n=e.getViewStateSelectedControlId(),r=this;return r._oCurrentDocument.setContent(t,r.getContext().self).then(function(){return r._sLastViewContent=null,r._open(r._oCurrentDocument,!0)}).then(function(){r.selectUI5Control(n)})},undo:function(){return this._reopenWithViewState(this._getCurrentUndoRedoStack().undo())},redo:function(){return this._reopenWithViewState(this._getCurrentUndoRedoStack().redo())},hasUndo:function(){return this._getCurrentUndoRedoStack().hasUndo()},hasRedo:function(){return this._getCurrentUndoRedoStack().hasRedo()},markClean:function(){this._getCurrentUndoRedoStack().clean()},isClean:function(){this._getCurrentUndoRedoStack().isClean()},_getOverlay:function(e){return"string"==typeof e&&(e=this._getUI5ControlById(e)),s.getControlOverlay(e,this.getScope())},_addMessageToNotificationBar:function(e,t,n){this._oNotificationBar&&this._oNotificationBar.updateMessageArea(e,t,n)}});return T});var Handlebars=function(){var e=function(){"use strict";function e(e){this.string=e}var t;return e.prototype.toString=function(){return""+this.string},t=e}(),t=function(e){"use strict";function t(e){return s[e]||"&amp;"}function n(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function r(e){return e instanceof a?e.toString():e||0===e?(e=""+e,c.test(e)?e.replace(u,t):e):""}function i(e){return e||0===e?f(e)&&0===e.length?!0:!1:!0}var o={},a=e,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,c=/[&<>"'`]/;o.extend=n;var l=Object.prototype.toString;o.toString=l;var p=function(e){return"function"==typeof e};p(/x/)&&(p=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)});var p;o.isFunction=p;var f=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===l.call(e):!1};return o.isArray=f,o.escapeExpression=r,o.isEmpty=i,o}(e),n=function(){"use strict";function e(e,t){var r;t&&t.firstLine&&(r=t.firstLine,e+=" - "+r+":"+t.firstColumn);for(var i=Error.prototype.constructor.call(this,e),o=0;o<n.length;o++)this[n[o]]=i[n[o]];r&&(this.lineNumber=r,this.column=t.firstColumn)}var t,n=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=new Error,t=e}(),r=function(e,t){"use strict";function n(e,t){this.helpers=e||{},this.partials=t||{},r(this)}function r(e){e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new s("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse||function(){},i=n.fn;return f(t)&&(t=t.call(this)),t===!0?i(this):t===!1||null==t?r(this):p(t)?t.length>0?e.helpers.each(t,n):r(this):i(t)}),e.registerHelper("each",function(e,t){var n,r=t.fn,i=t.inverse,o=0,a="";if(f(e)&&(e=e.call(this)),t.data&&(n=g(t.data)),e&&"object"==typeof e)if(p(e))for(var s=e.length;s>o;o++)n&&(n.index=o,n.first=0===o,n.last=o===e.length-1),a+=r(e[o],{data:n});else for(var u in e)e.hasOwnProperty(u)&&(n&&(n.key=u,n.index=o,n.first=0===o),a+=r(e[u],{data:n}),o++);return 0===o&&(a=i(this)),a}),e.registerHelper("if",function(e,t){return f(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||a.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){return f(e)&&(e=e.call(this)),a.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,n){var r=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(r,t)})}function i(e,t){m.log(e,t)}var o={},a=e,s=t,u="1.3.0";o.VERSION=u;var c=4;o.COMPILER_REVISION=c;var l={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};o.REVISION_CHANGES=l;var p=a.isArray,f=a.isFunction,d=a.toString,h="[object Object]";o.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:m,log:i,registerHelper:function(e,t,n){if(d.call(e)===h){if(n||t)throw new s("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){d.call(e)===h?a.extend(this.partials,e):this.partials[e]=t}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(m.level<=e){var n=m.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};o.logger=m,o.log=i;var g=function(e){var t={};return a.extend(t,e),t};return o.createFrame=g,o}(t,n),i=function(e,t,n){"use strict";function r(e){var t=e&&e[0]||1,n=f;if(t!==n){if(n>t){var r=d[n],i=d[t];throw new p("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new p("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function i(e,t){if(!t)throw new p("No environment passed to template");var n=function(e,n,r,i,o,a){var s=t.VM.invokePartial.apply(this,arguments);if(null!=s)return s;if(t.compile){var u={helpers:i,partials:o,data:a};return o[n]=t.compile(e,{data:void 0!==a},t),o[n](r,u)}throw new p("The partial "+n+" could not be compiled when running in runtime-only mode")},r={escapeExpression:l.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var r=this.programs[e];return n?r=a(e,t,n):r||(r=this.programs[e]=a(e,t)),r},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},l.extend(n,t),l.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,i){i=i||{};var o,a,s=i.partial?i:t;i.partial||(o=i.helpers,a=i.partials);var u=e.call(r,s,n,o,a,i.data);return i.partial||t.VM.checkRevision(r.compilerInfo),u}}function o(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=function(e,i){return i=i||{},t.apply(this,[e,i.data||n].concat(r))};return i.program=e,i.depth=r.length,i}function a(e,t,n){var r=function(e,r){return r=r||{},t(e,r.data||n)};return r.program=e,r.depth=0,r}function s(e,t,n,r,i,o){var a={partial:!0,helpers:r,partials:i,data:o};if(void 0===e)throw new p("The partial "+t+" could not be found");return e instanceof Function?e(n,a):void 0}function u(){return""}var c={},l=e,p=t,f=n.COMPILER_REVISION,d=n.REVISION_CHANGES;return c.checkRevision=r,c.template=i,c.programWithDepth=o,c.program=a,c.invokePartial=s,c.noop=u,c}(t,n,r),o=function(e,t,n,r,i){"use strict";var o,a=e,s=t,u=n,c=r,l=i,p=function(){var e=new a.HandlebarsEnvironment;return c.extend(e,a),e.SafeString=s,e.Exception=u,e.Utils=c,e.VM=l,e.template=function(t){return l.template(t,e)},e},f=p();return f.create=p,o=f}(r,e,n,t,i),a=function(e){"use strict";function t(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var n,r=e,i={ProgramNode:function(e,n,r,o){var a,s;3===arguments.length?(o=r,r=null):2===arguments.length&&(o=n,n=null),t.call(this,o),this.type="program",this.statements=e,this.strip={},r?(s=r[0],s?(a={first_line:s.firstLine,last_line:s.lastLine,last_column:s.lastColumn,first_column:s.firstColumn},this.inverse=new i.ProgramNode(r,n,a)):this.inverse=new i.ProgramNode(r,n),this.strip.right=n.left):n&&(this.strip.left=n.right)},MustacheNode:function(e,n,r,o,a){if(t.call(this,a),this.type="mustache",this.strip=o,null!=r&&r.charAt){var s=r.charAt(3)||r.charAt(2);this.escaped="{"!==s&&"&"!==s}else this.escaped=!!r;this.sexpr=e instanceof i.SexprNode?e:new i.SexprNode(e,n),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,n,r){t.call(this,r),this.type="sexpr",this.hash=n;var i=this.id=e[0],o=this.params=e.slice(1),a=this.eligibleHelper=i.isSimple;this.isHelper=a&&(o.length||n)},PartialNode:function(e,n,r,i){t.call(this,i),this.type="partial",this.partialName=e,this.context=n,this.strip=r},BlockNode:function(e,n,i,o,a){if(t.call(this,a),e.sexpr.id.original!==o.path.original)throw new r(e.sexpr.id.original+" doesn't match "+o.path.original,this);this.type="block",this.mustache=e,this.program=n,this.inverse=i,this.strip={left:e.strip.left,right:o.strip.right},(n||i).strip.left=e.strip.right,(i||n).strip.right=o.strip.left,i&&!n&&(this.isInverse=!0)},ContentNode:function(e,n){t.call(this,n),this.type="content",this.string=e},HashNode:function(e,n){t.call(this,n),this.type="hash",this.pairs=e},IdNode:function(e,n){t.call(this,n),this.type="ID";for(var i="",o=[],a=0,s=0,u=e.length;u>s;s++){var c=e[s].part;if(i+=(e[s].separator||"")+c,".."===c||"."===c||"this"===c){if(o.length>0)throw new r("Invalid path: "+i,this);".."===c?a++:this.isScoped=!0}else o.push(c)}this.original=i,this.parts=o,this.string=o.join("."),this.depth=a,this.isSimple=1===e.length&&!this.isScoped&&0===a,this.stringModeValue=this.string},PartialNameNode:function(e,n){t.call(this,n),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,n){t.call(this,n),this.type="DATA",this.id=e},StringNode:function(e,n){t.call(this,n),this.type="STRING",this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,n){t.call(this,n),this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},BooleanNode:function(e,n){t.call(this,n),this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},CommentNode:function(e,n){t.call(this,n),this.type="comment",this.comment=e}};return n=i}(n),s=function(){"use strict";var e,t=function(){function e(e,t){return{left:"~"===e.charAt(2),right:"~"===t.charAt(0)||"~"===t.charAt(1)}}function t(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(t,n,r,i,o,a){var s=a.length-1;switch(o){case 1:return new i.ProgramNode(a[s-1],this._$);case 2:return new i.ProgramNode([],this._$);case 3:this.$=new i.ProgramNode([],a[s-1],a[s],this._$);break;case 4:this.$=new i.ProgramNode(a[s-2],a[s-1],a[s],this._$);break;case 5:this.$=new i.ProgramNode(a[s-1],a[s],[],this._$);break;case 6:this.$=new i.ProgramNode(a[s],this._$);break;case 7:this.$=new i.ProgramNode([],this._$);break;case 8:this.$=new i.ProgramNode([],this._$);break;case 9:this.$=[a[s]];break;case 10:a[s-1].push(a[s]),this.$=a[s-1];break;case 11:this.$=new i.BlockNode(a[s-2],a[s-1].inverse,a[s-1],a[s],this._$);break;case 12:this.$=new i.BlockNode(a[s-2],a[s-1],a[s-1].inverse,a[s],this._$);break;case 13:this.$=a[s];break;case 14:this.$=a[s];break;case 15:this.$=new i.ContentNode(a[s],this._$);break;case 16:this.$=new i.CommentNode(a[s],this._$);break;case 17:this.$=new i.MustacheNode(a[s-1],null,a[s-2],e(a[s-2],a[s]),this._$);break;case 18:this.$=new i.MustacheNode(a[s-1],null,a[s-2],e(a[s-2],a[s]),this._$);break;case 19:this.$={path:a[s-1],strip:e(a[s-2],a[s])};break;case 20:this.$=new i.MustacheNode(a[s-1],null,a[s-2],e(a[s-2],a[s]),this._$);break;case 21:this.$=new i.MustacheNode(a[s-1],null,a[s-2],e(a[s-2],a[s]),this._$);break;case 22:this.$=new i.PartialNode(a[s-2],a[s-1],e(a[s-3],a[s]),this._$);break;case 23:this.$=e(a[s-1],a[s]);break;case 24:this.$=new i.SexprNode([a[s-2]].concat(a[s-1]),a[s],this._$);break;case 25:this.$=new i.SexprNode([a[s]],null,this._$);break;case 26:this.$=a[s];break;case 27:this.$=new i.StringNode(a[s],this._$);break;case 28:this.$=new i.IntegerNode(a[s],this._$);break;case 29:this.$=new i.BooleanNode(a[s],this._$);break;case 30:this.$=a[s];break;case 31:a[s-1].isHelper=!0,this.$=a[s-1];break;case 32:this.$=new i.HashNode(a[s],this._$);break;case 33:this.$=[a[s-2],a[s]];break;case 34:this.$=new i.PartialNameNode(a[s],this._$);break;case 35:this.$=new i.PartialNameNode(new i.StringNode(a[s],this._$),this._$);break;case 36:this.$=new i.PartialNameNode(new i.IntegerNode(a[s],this._$));break;case 37:this.$=new i.DataNode(a[s],this._$);break;case 38:this.$=new i.IdNode(a[s],this._$);break;case 39:a[s-2].push({part:a[s],separator:a[s-1]}),this.$=a[s-2];break;case 40:this.$=[{part:a[s]}];break;case 43:this.$=[];break;case 44:a[s-1].push(a[s]);break;case 47:this.$=[a[s]];break;case 48:a[s-1].push(a[s])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(e){throw new Error(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],o=[],a=this.table,s="",u=0,c=0,l=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var p=this.lexer.yylloc;o.push(p);var f=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,h,m,g,v,y,_,x,b,w={};;){if(m=r[r.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===d||"undefined"==typeof d)&&(d=t()),g=a[m]&&a[m][d]),"undefined"==typeof g||!g.length||!g[0]){var S="";if(!l){b=[];for(y in a[m])this.terminals_[y]&&y>2&&b.push("'"+this.terminals_[y]+"'");S=this.lexer.showPosition?"Parse error on line "+(u+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(u+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:p,expected:b})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+d);switch(g[0]){case 1:r.push(d),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),r.push(g[1]),d=null,h?(d=h,h=null):(c=this.lexer.yyleng,s=this.lexer.yytext,u=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:if(_=this.productions_[g[1]][1],w.$=i[i.length-_],w._$={first_line:o[o.length-(_||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(_||1)].first_column,last_column:o[o.length-1].last_column},f&&(w._$.range=[o[o.length-(_||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(w,s,c,u,this.yy,g[1],i,o),"undefined"!=typeof v)return v;_&&(r=r.slice(0,2*-1*_),i=i.slice(0,-1*_),o=o.slice(0,-1*_)),r.push(this.productions_[g[1]][0]),i.push(w.$),o.push(w._$),x=a[r[r.length-2]][r[r.length-1]],r.push(x);break;case 3:return!0}}return!0}},r=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(n=this._input.match(this.rules[o[a]]),!n||t&&!(n[0].length>t[0].length)||(t=n,r=a,this.options.flex));a++);return t?(i=t[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,r){function i(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return i(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return i(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return t.yytext=i(1,2).replace(/\\"/g,'"'),32;case 24:return t.yytext=i(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return t.yytext=i(1,2),40;case 31:return"INVALID";case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e
}();return n.lexer=r,t.prototype=n,n.Parser=t,new t}();return e=t}(),u=function(e,t){"use strict";function n(e){return e.constructor===o.ProgramNode?e:(i.yy=o,i.parse(e))}var r={},i=e,o=t;return r.parser=i,r.parse=n,r}(s,a),c=function(e){"use strict";function t(){}function n(e,t,n){if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var r=n.parse(e),i=(new n.Compiler).compile(r,t);return(new n.JavaScriptCompiler).compile(i,t)}function r(e,t,n){function r(){var r=n.parse(e),i=(new n.Compiler).compile(r,t),o=(new n.JavaScriptCompiler).compile(i,t,void 0,!0);return n.template(o)}if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var i;return function(e,t){return i||(i=r()),i.call(this,e,t)}}var i={},o=e;return i.Compiler=t,t.prototype={compiler:t,disassemble:function(){for(var e,t,n,r=this.opcodes,i=[],o=0,a=r.length;a>o;o++)if(e=r[o],"DECLARE"===e.opcode)i.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var s=0;s<e.args.length;s++)n=e.args[s],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),t.push(n);i.push(e.opcode+" "+t.join(" "))}return i.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;t>n;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length)return!1;for(var o=0;o<r.args.length;o++)if(r.args[o]!==i.args[o])return!1}if(t=this.children.length,e.children.length!==t)return!1;for(n=0;t>n;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.accept(e)},accept:function(e){var t,n=e.strip||{};return n.left&&this.opcode("strip"),t=this[e.type](e),n.right&&this.opcode("strip"),t},program:function(e){for(var t=e.statements,n=0,r=t.length;r>n;n++)this.accept(t[n]);return this.isSimple=1===r,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,n=(new this.compiler).compile(e,this.options),r=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[r]=n;for(var i=0,o=n.depths.list.length;o>i;i++)t=n.depths.list[i],2>t||this.addDepth(t-1);return r},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=t.sexpr,o=this.classifySexpr(i);"helper"===o?this.helperSexpr(i,n,r):"simple"===o?(this.simpleSexpr(i),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(i,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,n,r=e.pairs;this.opcode("pushHash");for(var i=0,o=r.length;o>i;i++)t=r[i],n=t[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type),"sexpr"===n.type&&this.sexpr(n)):this.accept(n),this.opcode("assignToHash",t[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(e,t,n){var r=e.id,i=r.parts[0],o=null!=t||null!=n;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i,o)},simpleSexpr:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.id.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",r.length,i);else{if(this.options.knownHelpersOnly)throw new o("You specified knownHelpersOnly, but used the unknown helper "+i,e);this.opcode("invokeHelper",r.length,i,e.isRoot)}},sexpr:function(e){var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;r>n;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new o("Scoped data references are not supported: "+e.original,e);this.opcode("lookupData");for(var t=e.id.parts,n=0,r=t.length;r>n;n++)this.opcode("lookup",t[n])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifySexpr:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){for(var t,n=e.length;n--;)t=e[n],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),"sexpr"===t.type&&this.sexpr(t)):this[t.type](t)},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}},i.precompile=n,i.compile=r,i}(n),l=function(e,t){"use strict";function n(e){this.value=e}function r(){}var i,o=e.COMPILER_REVISION,a=e.REVISION_CHANGES,s=e.log,u=t;r.prototype={nameLookup:function(e,t){var n,i;return 0===e.indexOf("depth")&&(n=!0),i=/^[0-9]+$/.test(t)?e+"["+t+"]":r.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']",n?"("+e+" && "+i+")":i},compilerInfo:function(){var e=o,t=a[e];return"this.compilerInfo = ["+e+",'"+t+"'];\n"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,r){this.environment=e,this.options=t||{},s("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var i,o=e.opcodes;this.i=0;for(var a=o.length;this.i<a;this.i++)i=o[this.i],"DECLARE"===i.opcode?this[i.name]=i.value:this[i.opcode].apply(this,i.args),i.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new u("Compile completed with content left on stack");return this.createFunctionContext(r)},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,n="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(n+=" data = data || {};"),e.push(n)}this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var r=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],i=0,o=this.environment.depths.list.length;o>i;i++)r.push("depth"+this.environment.depths.list[i]);var a=this.mergeSource();if(this.isChild||(a=this.compilerInfo()+a),e)return r.push(a),Function.apply(this,r);var u="function "+(this.name||"")+"("+r.join(",")+") {\n  "+a+"}";return s("debug",u+"\n\n"),u},mergeSource:function(){for(var e,t="",n=0,r=this.source.length;r>n;n++){var i=this.source[n];i.appendToBuffer?e=e?e+"\n    + "+i.content:i.content:(e&&(t+="buffer += "+e+";\n  ",e=void 0),t+=i+"\n  ")}return t},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"sexpr"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+e.contexts.join(",")+"}"),this.push("{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var r=this.lastHelper=this.setupHelper(e,t,!0),i=this.nameLookup("depth"+this.lastContext,t,"context"),o="helper = "+r.name+" || "+i;r.paramsInit&&(o+=","+r.paramsInit),this.push("("+o+",helper "+"? helper.call("+r.callParams+") "+": helperMissing.call("+r.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var n=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=this.nameLookup("depth"+this.lastContext,e,"context"),o=this.nextStack();n.paramsInit&&this.pushSource(n.paramsInit),this.pushSource("if (helper = "+r+") { "+o+" = helper.call("+n.callParams+"); }"),this.pushSource("else { helper = "+i+"; "+o+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t,n,r=this.popStack();this.options.stringParams&&(n=this.popStack(),t=this.popStack());var i=this.hash;t&&i.contexts.push("'"+e+"': "+t),n&&i.types.push("'"+e+"': "+n),i.values.push("'"+e+"': ("+r+")")},compiler:r,compileChildren:function(e,t){for(var n,r,i=e.children,o=0,a=i.length;a>o;o++){n=i[o],r=new this.compiler;var s=this.matchExistingProgram(n);null==s?(this.context.programs.push(""),s=this.context.programs.length,n.index=s,n.name="program"+s,this.context.programs[s]=r.compile(n,t,this.context),this.context.environments[s]=n):(n.index=s,n.name="program"+s)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;n>t;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,n=this.environment.children[e],r=n.depths.list,i=[n.index,n.name,"data"],o=0,a=r.length;a>o;o++)t=r[o],1===t?i.push("depth0"):i.push("depth"+(t-1));return(0===r.length?"self.program(":"self.programWithDepth(")+i.join(", ")+")"},register:function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new n(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,r,i,o="",a=this.isInline();if(a){var s=this.popStack(!0);if(s instanceof n)t=s.value,i=!0;else{r=!this.stackSlot;var u=r?this.incrStack():this.topStackName();o="("+this.push(u)+" = "+s+"),",t=this.topStack()}}else t=this.topStack();var c=e.call(this,t);return a?(i||this.popStack(),r&&this.stackSlot--,this.push("("+o+c+")")):(/^stack/.test(t)||(t=this.nextStack()),this.pushSource(t+" = ("+o+c+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,r=e.length;r>t;t++){var i=e[t];i instanceof n?this.compileStack.push(i):this.pushStack(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),r=(t?this.inlineStack:this.compileStack).pop();if(!e&&r instanceof n)return r.value;if(!t){if(!this.stackSlot)throw new u("Invalid stack pop");this.stackSlot--}return r},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,r=t[t.length-1];return!e&&r instanceof n?r.value:r},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var r=[],i=this.setupParams(e,r,n),o=this.nameLookup("helpers",t,"helper");return{params:r,paramsInit:i,name:o,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupOptions:function(e,t){var n,r,i,o=[],a=[],s=[];o.push("hash:"+this.popStack()),this.options.stringParams&&(o.push("hashTypes:"+this.popStack()),o.push("hashContexts:"+this.popStack())),r=this.popStack(),i=this.popStack(),(i||r)&&(i||(this.context.aliases.self="this",i="self.noop"),r||(this.context.aliases.self="this",r="self.noop"),o.push("inverse:"+r),o.push("fn:"+i));for(var u=0;e>u;u++)n=this.popStack(),t.push(n),this.options.stringParams&&(s.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(o.push("contexts:["+a.join(",")+"]"),o.push("types:["+s.join(",")+"]")),this.options.data&&o.push("data:data"),o},setupParams:function(e,t,n){var r="{"+this.setupOptions(e,t).join(",")+"}";return n?(this.useRegister("options"),t.push("options"),"options="+r):(t.push(r),"")}};for(var c="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),l=r.RESERVED_WORDS={},p=0,f=c.length;f>p;p++)l[c[p]]=!0;return r.isValidJavaScriptVariableName=function(e){return!r.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)?!0:!1},i=r}(r,n),p=function(e,t,n,r,i){"use strict";var o,a=e,s=t,u=n.parser,c=n.parse,l=r.Compiler,p=r.compile,f=r.precompile,d=i,h=a.create,m=function(){var e=h();return e.compile=function(t,n){return p(t,n,e)},e.precompile=function(t,n){return f(t,n,e)},e.AST=s,e.Compiler=l,e.JavaScriptCompiler=d,e.Parser=u,e.parse=c,e};return a=m(),a.create=m,o=a}(o,a,u,c,l);return p}();define("sap/watt/lib/handlebars/handlebars",function(){}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/EventsUtils",["sap/watt/lib/lodash/lodash","sap/watt/lib/orion/javascript/esprima/esprimaVisitor","./W5gUtils","./EventBusHelper","sap/watt/lib/orion/ui/esprima/esprima","sap/watt/lib/orion/ui/escodegen/escodegen.browser","sap/watt/lib/handlebars/handlebars"],function(e,t,n,r){"use strict";var i=function(e,t){if(e.type===esprima.Syntax.CallExpression&&e.callee&&e.callee.property&&e.callee.property.type===esprima.Syntax.Identifier&&("extend"===e.callee.property.name||"controller"===e.callee.property.name)){var n=e.arguments[1].properties;return t.aItems=t.collect(n,t),!1}return!0},o=function(e,t){return e.type===esprima.Syntax.CallExpression&&e.callee&&e.callee.property&&e.callee.property.type===esprima.Syntax.Identifier&&("extend"===e.callee.property.name||"controller"===e.callee.property.name)?(e.arguments[1].properties.push(t.methodAst),!1):!0},a=function(t){for(var n=[],r=0;r<t.length;r++)if(t[r].value.type===esprima.Syntax.FunctionExpression){var i=t[r];if(i.key&&i.key.name){var o=i.key.name,a=[];i.value&&i.value.params&&i.value.params.length>0&&(a=e.map(i.value.params,"name")),n.push({signature:o,params:a})}}return n},s=function(e,t){for(var n=[],r=0;r<e.length;r++)if(e[r].value.type===esprima.Syntax.FunctionExpression){var i=e[r];i.key&&i.key.name&&i.key.name===t.functionName&&n.push(i.range)}return n},u=Handlebars.compile("var d = { /**\n	*@memberOf {{controllerName}}\n	*/\n	{{funcName}}: function(){\n 		//This code was generated by the layout editor.\n}}"),c=null,l=null,p={init:e.once(function(t){jQuery.sap.assert(t,"oContext must be a valid service context"),c=e.get(t.service,"document"),l=e.get(t.service,"content"),jQuery.sap.assert(c,"document service does not exists in the given context"),jQuery.sap.assert(l,"content service does not exists in the given context")}),fetchMethodsFromController:function(e){var n,r;return n=t.parse(e,{comment:!0}),r={collect:a},t.visit(n,r,i),r.aItems||[]},fetchMethodRangeFromController:function(n,r){var o,a;return o=t.parse(n,{comment:!0}),a={collect:s,functionName:r},t.visit(o,a,i),e.get(a,"aItems[0]")},injectEventToController:function(e,i,a){var s,c;if(s=t.parse(e,{range:!0,tokens:!0,comment:!0}),s=escodegen.attachComments(s,s.comments,s.tokens),s.errors.length)return r.publish(r.IDENTIFIERS.NOTIFICATION_BAR_ADD_MESSAGE,{sLine1:n.getText("events_cannot_parse_controller")}),void 0;var l=esprima.parse(u({funcName:i,controllerName:a}),{range:!0,tokens:!0,comment:!0});return l=escodegen.attachComments(l,l.comments,l.tokens),c={methodAst:l.body[0].declarations[0].init.properties[0]},t.visit(s,c,o),escodegen.generate(s,{comment:!0,format:{quotes:"double",indent:{style:"	"}}})},showNewFunctionDialog:function(t){function r(e,t){var n=new sap.ui.commons.RichTooltip({text:e}).addStyleClass("wysiwygErrorTooltip");t.setTooltip(n)}function i(e){var i=e.getParameter("liveValue"),o=!0,a="";/^[$A-Z_][0-9A-Z_$]*$/i.test(i)?t&&-1!==t.indexOf(i)&&(o=!1,a=n.getText("events_js_function_exists_error")):(o=!1,a=n.getText("events_js_function_name_error")),o?(d.setValueState(sap.ui.core.ValueState.None),d.setTooltip(""),p.setEnabled(!0)):(d.setValueState(sap.ui.core.ValueState.Error),p.setEnabled(!1),r(a,d))}function o(e){u=e,v.close()}function a(){v.detachClosed(a),v.destroy(),c.resolve({accepted:u,value:e.trim(s.getProperty("/value"))})}var s=new sap.ui.model.json.JSONModel({value:null}),u=!1,c=Q.defer(),l=new sap.ui.commons.Button({text:n.getText("events_dialog_cancel_button"),press:o.bind(null,!1)}),p=new sap.ui.commons.Button({text:n.getText("events_dialog_ok_button"),press:o.bind(null,!0),enabled:!1}),f=[p,l],d=new sap.ui.commons.TextField({width:"100%",value:"{value}",placeholder:n.getText("events_add_function_placeholder"),liveChange:i}),h=new sap.ui.commons.Label({text:n.getText("events_add_function_message")}),m=new sap.ui.commons.Label({text:n.getText("events_dialog_func_name_label"),labelFor:d}),g=new sap.ui.layout.VerticalLayout({content:[h,m,d]}),v=new sap.ui.commons.Dialog({applyContentPadding:!1,title:n.getText("events_new_function_dialog_title"),resizable:!1,modal:!0,content:g,buttons:f,defaultButton:l,closed:a}).bindElement("/").setModel(s).addStyleClass("wysiwygNewFunctionDialog");return v.open(),c.promise},navigateToControllerAndSelectFunction:function(e,t){var r=this;return e.getContent().then(function(i){var o;t&&(o=r.fetchMethodRangeFromController(i,t));var a={service:{document:c,content:l}};return n.goToCode(a,e,o)})}};return p}),define("sap/watt/core/utils",[],function(){return{debounce:function(e,t,n){var r,i;return function(){var o=this,a=arguments,s=function(){i=e.apply(o,a),Q&&Q.isPromise&&Q.isPromise(i)&&i.done()},u=function(){r=null,n||s()},c=n&&!r;clearTimeout(r),r=setTimeout(u,t),c&&s()}}}}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/models/W5gPropertiesModel",["sap/watt/lib/lodash/lodash","sap/watt/core/utils","../utils/W5gUtils","../utils/ControlMetadata","../utils/DocuUtils","../utils/UsageMonitoringUtils","../control/serialization/XMLManipulator","../utils/W5gUi5LibraryMediator","../utils/EventBusHelper"],function(e,t,n,r,i,o,a,s,u){"use strict";function c(e,t,n){var r=!1;return jQuery.each(e.children||{},function(){return this!==n?this.getAttribute("id")===t?(r=!0,!1):(this.children&&(r|=c(this,t,n)),r?!1:void 0):void 0}),!!r}function l(t,n){var r,i,o,a=[],u=[],c=s.getAllSupportedControlProperties(t),l=s.getAllSupportedControlEvents(t);for(r in c)"visible"!==r&&y(n,r)&&(i=c[r],o=f({name:r,isIcon:_(t,r),isDeprecated:i.deprecated,title:e.startCase(r),typeName:i.type,priority:x(n,C,r,"priority",0),validator:x(n,C,r,"validator"),editControlFactory:x(n,C,r,"editControlFactory")}),d(t,o),o.type?a.push(o):jQuery.sap.log.warning("Property "+o.name+" of "+t.getMetadata().getName()+" is ignored in WYSIWYG properties panel: not supported type - "+o.typeName,this));o=f({docu:{defaultValue:"-",doc:"The unique identifier within a page, either configured or automatically generated.",name:"id",type:"sap.ui.core.ID",typeText:"ID"},priority:1e4,name:"id",title:"Element ID",typeName:"idType",type:"idType",bindingType:I,placeholder:""}),a.push(o);for(var p in l)u.push({name:p,title:e.startCase(p),isDeprecated:!!l[p].deprecated,priority:x(n,T,p,"priority",0)});return{properties:a,events:u}}function p(e,t){"object"===t.typeName}function f(e){return jQuery.extend(!0,{priority:0,name:void 0,isArray:!1,isIcon:!1,isDeprecated:!1,title:void 0,editControlFactory:void 0,type:void 0,bindingType:void 0,typeName:void 0,typeObject:void 0,placeholder:void 0,rejectedValue:void 0},e)}function d(e,t){if(t.typeName){if(t.typeName.indexOf("[]")>0&&(t.typeName=t.typeName.substring(0,t.typeName.indexOf("[]")),t.isArray=!0),"void"===t.typeName||"object"===t.typeName)return p(e,t),void 0;if(0===t.typeName.toLowerCase().indexOf("int")&&(t.typeName="int"),"any"===t.typeName&&(t.typeName="string"),"boolean"===t.typeName||"int"===t.typeName||"float"===t.typeName||"string"===t.typeName)t.type=t.typeName,t.bindingType=O[t.typeName];else{var n=A.sap.ui.base.DataType;t.typeObject||(t.typeObject=n.getType(t.typeName)),t.type=t.typeObject&&Object.getPrototypeOf(t.typeObject).getName()||"enum","enum"===t.type?(t.typeObject=A.jQuery.sap.getObject(t.typeName),t.bindingType=O.string):t.bindingType=O[t.type]}}}function h(t,n){var r=v(t,n);return(e.isNull(r)||e.isUndefined(r))&&t.getMetadata().getAllProperties()[n]?t[t.getMetadata().getAllProperties()[n]._sGetter]():r}function m(e,t,n){e.getMetadata().getAllProperties()[t]?e[e.getMetadata().getAllProperties()[t]._sMutator](n):e[e.getMetadata().getAllEvents()[t]._sMutator](n),jQuery.sap.assert(N,"XmlManipulator doesn't exist"),N.emitPropertyChangeEvent(e,t,n)}function g(e){return e.__XMLNode&&e.__XMLNode.id}function v(e,t){return e.__XMLNode&&e.__XMLNode.getAttribute(t)}function y(e,t){return!!x(e,C,t,"visible",!0)}function _(e,t){return P.test(t)&&"sap.m.Image"!==e.getMetadata().getName()}function x(t,n,r,i,o){return e.get(t,[n,r,i],o)}function b(e){var t=n.getWYSIWYGParentAggregationInfo(e),r=t.parent,i=r&&r.getBindingInfo(t.aggregationName);return i&&i.template&&(e=i.template),e}function w(t){return e.sortByOrder(t,["priority","title"],[!1,!0])}function S(t,n){var r=t.getMetadata().getEvents();return e.sortBy(n.reverse(),function(e){return r[e.name]?-1:1})}function E(e,t){var r=n.getControlOverlay(D,A);if(r){var i=t?r.attachEvent:r.detachEvent;i.call(r,"elementModified",j,e)}}jQuery.sap.require("sap.ui.base.DataType"),jQuery.sap.require("sap.ui.model.type.String"),jQuery.sap.require("sap.ui.core.mvc.View");var C="properties",T="events";sap.ui.model.type.String.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.models.W5gPropertiesModel.IdType",{validateValue:function(e){if(""!==e){if(!sap.ui.core.ID.isValid(e)||e.indexOf("-")>-1)throw new sap.ui.model.ValidateException("The ID contains invalid characters",[]);if(D&&c(D.__XMLRootNode,e,D.__XMLNode))throw new sap.ui.model.ValidateException("The ID is not unique",[])}}});var P=/src|.*icon$|^icon.*/i,I=new sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.models.W5gPropertiesModel.IdType,D=null,A=window,N=null,k=null,O={"boolean":new sap.ui.model.type.Boolean,"int":new sap.ui.model.type.Integer,string:new sap.ui.model.type.String,"float":new sap.ui.model.type.Float,date:new sap.ui.model.type.Date,time:new sap.ui.model.type.Time,datetime:new sap.ui.model.type.DateTime},R=null,j=t.debounce(function(){this.refresh()},100),F=sap.ui.model.json.JSONModel.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.models.W5gPropertiesModel");return F.prototype.setMethods=function(e){R=e,this.setProperty("/methods",R)},F.prototype.addMethod=function(e){R?R.push(e):R=[e],this.setProperty("/methods",R)},F.prototype.getControl=function(){return k||D},F.prototype.setControl=function(e,t,o){var a,s,c=this,p="",f=[],d=[],h=!1;if(A=t||window,N=o,e&&"object"==typeof e){if(s=r.getDesignTimeData(e),k=e,e=b(e),k===e&&(k=null),D===e)return;E(this,!1),D=e,E(this,!0),a=D.getMetadata(),p=n.getControlTitle(D);var m=l(e,s);f=w(m.properties),d=S(e,m.events),i.enrichPropertiesAndEventsInfo(a.getName(),f,d).then(function(){c.checkUpdate(!1)}).done(),h=!(!D.getMetadata().isDeprecated||!D.getMetadata().isDeprecated())}else E(this,!1),D=null;this.setData({properties:f,events:d,controlName:p,isDeprecated:h,methods:R}),u.publish(u.IDENTIFIERS.PROP_MODEL_CONTROL_UPDATED)},F.prototype.setProperty=function(e,t,n){var r,i=e.substring(0,e.lastIndexOf("/")),a=e.substr(e.lastIndexOf("/")+1),s=!0,u=!0;i||n||(n=this.oData);var c=this._getObject(i,n);switch(a){case"value":o.report("property_change",D.getMetadata().getName()+"."+c.name),D.isBound(c.name)&&D.unbindProperty(c.name),"object"==typeof c.typeObject&&jQuery.isFunction(c.typeObject.isValid)&&(u=c.typeObject.isValid(t)),u?("id"===c.name?(r=g(D),t=t||void 0,N.emitPropertyChangeEvent(D,c.name,t)):(m(D,c.name,t),k&&m(k,c.name,t)),c.rejectedValue=void 0):(c.rejectedValue=t,s=!1);break;case"rejectedValue":c[a]=t,s=!1;break;case"methods":c[a]=t,R=t;break;default:throw new Error("Only some values can be set in the properties model")}if(this.refresh(),s&&"id"===c.name&&(k||D).fireEvent("_change",{id:(k||D).getId(),name:c.name,oldValue:r,newValue:t}),!u){var l="Invalid value of type "+c.typeObject.getName();throw new sap.ui.model.ValidateException(l,[])}},F.prototype._getObject=function(e,t){var n=this.isLegacySyntax()?this.oData:null;if(t instanceof sap.ui.model.Context?n=this._getObject(t.getPath()):t&&(n=t),!e)return n;var r=e.split("/"),i=0;for(r[0]||(n=this.oData,i++);n&&r[i];){switch(r[i]){case"value":if(void 0===n.rejectedValue){if("undefined"==typeof n.name)return null;if("id"===n.name)n=D,n&&(n=g(n));else{var o=D.getBindingInfo(n.name),a=o&&o.parts&&o.parts[0];n=o?o.bindingString||"{"+(a.model?a.model+">":"")+a.path+"}":h(D,n.name)}}else n=n.rejectedValue;break;case"valueState":n="undefined"==typeof n.rejectedValue?sap.ui.core.ValueState.None:sap.ui.core.ValueState.Error;break;default:n=n[r[i]]}i++}return n},F.__QUnit_getUi5CtrlProperties=function(e){var t=[];return e&&"object"==typeof e&&(t=l(e,r.getDesignTimeData(e)),t=w(t.properties)),t},F.__QUnit_validateControlID=function(e){I.validateValue(e)},F}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/control/properties/PropertyEditor",["sap/watt/lib/lodash/lodash","../../utils/W5gUtils","../../utils/DocuUtils","../../utils/W5gBindingHelper","../../utils/BindingUtils"],function(e,t,n,r,i){"use strict";function o(e){var t;if("enum"===e.type)t=new sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor.String2StringType(e.typeName,e.typeObject);else if("idType"===e.typeName)t=e.bindingType;else{var n=u[e.type];n&&(t=new n)}if(t&&e.validator){var r=t.parseValue;t.parseValue=function(){var t=r.apply(this,arguments);try{e.validator.apply(null,arguments)}catch(n){throw new sap.ui.model.ParseException(n.message)}return t}}return t}function a(e,t){var n,i={path:"value",type:t.editControlFactory?t.bindingType:o(t)};return e+="--"+t.name,t.editControlFactory?n=t.editControlFactory(window,e,i,{valueState:"{valueState}",placeholder:"{placeholder}"}):t.isIcon&&"sap.ui.core.URI"===t.typeName?(n=new sap.ui.commons.ValueHelpField(e,{value:i,valueState:"{valueState}",placeholder:"{placeholder}",tooltip:"{i18n>properties_icon_tooltip}",width:"100%",valueHelpRequest:r.openIconDialog}),n.getTooltip_AsString=n.getTooltip_Text):"boolean"===t.type||"enum"===t.type?("boolean"===t.type&&(t.typeObject={"true":!0,"false":!1}),n=new sap.ui.commons.ComboBox(e,{value:i,maxPopupItems:5,valueState:"{valueState}",placeholder:"{placeholder}",width:"100%",items:Object.keys(t.typeObject||{}).map(function(e){return new sap.ui.core.ListItem({text:e})
})})):n=new sap.ui.commons.TextField(e,{value:i,valueState:"{valueState}",placeholder:"{placeholder}",width:"100%"}),n.attachEvent("change",r.onPropertyChange)}function s(e){return"id"===e.name||e.editControlFactory?!1:"{dataModel>/isMetadataExists}"}jQuery.sap.declare("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.properties.PropertyEditor"),jQuery.sap.require("sap.ui.model.type.Boolean"),jQuery.sap.require("sap.ui.model.type.Integer"),jQuery.sap.require("sap.ui.model.type.Float"),jQuery.sap.require("sap.ui.model.type.String"),sap.ui.model.type.Boolean.extend("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor.Boolean2StringType",{formatValue:function(e){return void 0===e||null===e?e:e.toString()},parseValue:function(e){if(void 0===e||null===e)return e;if(e+="","true"===e.toLowerCase())return!0;if("false"===e.toLowerCase())return!1;if(t.isBindingValue(e))return null;throw new sap.ui.model.ParseException(t.getText("properties_parse_error_detail_boolean",[e]))}}),sap.ui.model.type.Integer.extend("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor.Integer2StringType",{formatValue:function(e){if(void 0===e||null===e||""===e)return e;if(t.isBindingValue(e))return e;var n=this.oOutputFormat.parse(e+"");return isNaN(n)?e:sap.ui.model.type.Integer.prototype.formatValue.apply(this,arguments)},parseValue:function(e){if(void 0===e||null===e)return e;if(t.isBindingValue(e))return null;if(""===e)throw new sap.ui.model.ParseException(t.getText("properties_parse_error_detail_empty_string"));return sap.ui.model.type.Integer.prototype.parseValue.apply(this,arguments)}}),sap.ui.model.type.Float.extend("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor.Float2StringType",{formatValue:function(e){if(void 0===e||null===e||""===e)return e;if(t.isBindingValue(e))return e;var n=this.oOutputFormat.parse(e+"");return isNaN(n)?e:sap.ui.model.type.Float.prototype.formatValue.apply(this,arguments)},parseValue:function(e){if(void 0===e||null===e)return e;if(t.isBindingValue(e))return null;if(""===e)throw new sap.ui.model.ParseException(t.getText("properties_parse_error_detail_empty_string"));return sap.ui.model.type.Float.prototype.parseValue.apply(this,arguments)}}),sap.ui.model.type.String.extend("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor.String2StringType",{constructor:function(e,t){String.apply(this),this.sName=e,this.mEnumValues=t||{}},formatValue:function(e){return e},parseValue:function(e){if(void 0===e||null===e)return e;if(t.isBindingValue(e))return null;if(this.mEnumValues[e])return e;throw new sap.ui.model.ParseException(t.getText("properties_parse_error_detail_enum",[e]))}});var u={"boolean":sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor.Boolean2StringType,"int":sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor.Integer2StringType,"float":sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor.Float2StringType,string:sap.ui.model.type.String},c=sap.ui.core.Control.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.properties.PropertyEditor",{metadata:{aggregations:{label:{type:"sap.ui.commons.Label",multiple:!1,visibility:"hidden"},deprecated:{type:"sap.ui.commons.Label",multiple:!1,visibility:"hidden"},field:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"},button:{type:"sap.ui.commons.Button",multiple:!1,visibility:"hidden"}}},constructor:function(e,t){"string"!=typeof e&&arguments.length>0&&(t=e,e=t&&t.id?t.id:null),sap.ui.core.Control.apply(this,[e]);var o=a(e,t),u=i.getUnbindKey();this.setAggregation("field",o),this.setAggregation("label",new sap.ui.commons.Label({text:"{title}",tooltip:n.createDocuTooltip({},"properties"),labelFor:o.getId()})),this.setAggregation("deprecated",new sap.ui.commons.Label({text:"{i18n>properties_control_deprecated_label}",visible:"{isDeprecated}",labelFor:o.getId()}).addStyleClass("sapPropertiesEditorLabelAdditionalText")),this.setAggregation("button",new sap.ui.commons.Button({visible:s(t),enabled:{parts:[{path:"dataModel>/isDefaultModel"},{path:"dataModel>/viewES"},{path:"dataModel>/controlES"}],formatter:function(e,t,n){return e&&(n!==u||t!==u)}},tooltip:{parts:[{path:"dataModel>/viewES"},{path:"dataModel>/isRoot"},{path:"i18n>binding_button_no_default_data_set_tooltip"},{path:"i18n>binding_button_default_tooltip"}],formatter:function(e,t,n,r){return t||e!==u?r:n}},press:[o,r.startPropertyBinding],icon:"sap-icon://chain-link"}))},renderer:function(e,t){var n=t.getAggregation("button");e.write("<div"),e.writeControlData(t),e.addClass("sapWysiwygPropertyEditor"),e.writeClasses(),e.write(">"),e.write("<div"),e.addClass("sapWysiwygPropertyEditorLabelRow"),e.writeClasses(),e.write(">"),e.write("<div"),e.addClass("sapWysiwygPropertyEditorLabelWrapper"),e.writeClasses(),e.write(">"),e.renderControl(t.getAggregation("label")),e.write("</div>"),e.write("<div"),e.addClass("sapWysiwygPropertyEditorDeprecatedLabelWrapper"),e.writeClasses(),e.write(">"),e.renderControl(t.getAggregation("deprecated")),e.write("</div>"),e.write("</div>"),e.write("<div"),e.addClass("sapWysiwygPropertyEditorFieldRow"),n.getVisible()&&e.addClass("sapWysiwygPropertyEditorFieldRowPadding"),e.writeClasses(),e.write(">"),e.renderControl(t.getAggregation("field")),e.renderControl(n),e.write("</div>"),e.write("</div>")}});return c.prototype.onAfterRendering=function(){var e,t,n=this.getAggregation("deprecated",null);n&&(t=n.$(),t.css("position","absolute"),e=t.innerWidth(),t.css("position",""),this.$().find(".sapWysiwygPropertyEditorLabelWrapper").css("right",e+"px"))},c.prototype.exit=t.destroyPrivateAggregations,c.prototype.getFocusDomRef=function(){return this.getAggregation("field").getFocusDomRef()},c}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/control/properties/DataBindingEditor",["../../utils/W5gUtils","../../utils/DocuUtils","../../utils/W5gBindingHelper","../../utils/BindingUtils"],function(e,t,n,r){"use strict";jQuery.sap.declare("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.properties.DataBindingEditor");var i=sap.ui.core.Control.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.properties.DataBindingEditor",{metadata:{properties:{noDefaultDataSet:{type:"string",defaultValue:null}},aggregations:{label:{type:"sap.ui.commons.Label",multiple:!1,visibility:"hidden"},field:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"},checkBox:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"}}},constructor:function(){sap.ui.core.Control.apply(this,arguments);var e=this.getId()+"--dataSet",i=r.getUnbindKey();this.bindProperty("noDefaultDataSet",{parts:[{path:"dataModel>/isMetadataExists"},{path:"dataModel>/viewES"},{path:"dataModel>/isRoot"}],formatter:function(e,t,n){return e?n||t!==i?null:"binding_no_default_data_set_tooltip":"binding_no_metadata_tooltip"}}),this.setAggregation("label",new sap.ui.commons.Label({text:"{i18n>binding_data_sets_label}",labelFor:e}).addStyleClass("sapWysiwygPropertyEditorLabelRow")),this.setAggregation("field",new sap.ui.commons.DropdownBox(e,{enabled:{parts:[{path:"dataModel>/isTemplate"},{path:"dataModel>/isRoot"}],formatter:function(e,t){return e||t}},items:{path:"dataModel>/entitySets",template:new sap.ui.core.ListItem({text:"{dataModel>name}",key:"{dataModel>key}"})},selectedKey:{parts:[{path:"dataModel>/viewES"},{path:"dataModel>/controlES"}],formatter:function(e,t){return r.normalizeDataSetPath(t===i?e:t)}},maxPopupItems:5,width:"100%",change:n.onEntitySetChange,tooltip:{parts:[{path:"dataModel>/isMetadataExists"},{path:"dataModel>/isTemplate"},{path:"dataModel>/isRoot"},{path:"dataModel>/viewES"}],formatter:function(e,n,r,o){return n||r?"":o!==i?t.createDocuTooltip({title:"",text:"{i18n>binding_data_set_selected_but_disabled_tooltip}"}):t.createDocuTooltip({title:"",text:e?"{i18n>binding_no_default_data_set_tooltip}":"{i18n>binding_no_metadata_tooltip}"})}}})),this.setAggregation("checkBox",new sap.ui.commons.CheckBox({enabled:{parts:[{path:"dataModel>/viewES"},{path:"dataModel>/isTemplate"}],formatter:function(e,t){return t||e!==i}},tooltip:t.createDocuTooltip({title:"",text:"{dataModel>/templateTooltip}"}),checked:"{dataModel>/isTemplate}",visible:"{dataModel>/isTemplateVisible}",text:"{i18n>binding_set_as_template_label}",change:n.onSetAsTemplateChange}))},renderer:function(e,t){e.write("<div"),e.addClass("sapWysiwygDataBindingEditor"),e.writeClasses(),e.writeControlData(t),e.write(">"),e.write("<div"),e.addClass("sapWysiwygDataBindingEditorPadding"),e.writeClasses(),e.write(">"),e.renderControl(t.getAggregation("label")),e.renderControl(t.getAggregation("field")),e.write("</div>"),e.renderControl(t.getAggregation("checkBox")),e.write("</div>")}});return i.prototype.exit=e.destroyPrivateAggregations,i.prototype.setNoDefaultDataSet=function(e){this.setProperty("noDefaultDataSet",e,!0);var n=this.getAggregation("label");return n.setTooltip(e?t.createDocuTooltip({text:"{i18n>"+e+"}"}):void 0),n.toggleStyleClass("warning",!!e),this},i}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/control/properties/PropertiesEditorForm",["../../utils/W5gUtils","./PropertyEditor","./DataBindingEditor"],function(e,t,n){"use strict";function r(t){var n=this.getModel(),r=n.getProperty("title",t.getParameter("element").getBindingContext()),i=e.getText("properties_parse_error_tooltip",[r,t.getParameter("newValue"),t.getParameter("type").getName()]),o=t.getParameter("message");a(n,t,i+" "+o)}function i(e){a(this.getModel(),e,e.getParameter("exception").message)}function o(e){var t=e.getParameter("element"),n=this.getModel();n.setProperty("rejectedValue",void 0,t.getBindingContext()),t.setTooltip(""),n.refresh()}function a(e,t,n){var r=t.getParameter("element");e.setProperty("rejectedValue",t.getParameter("newValue"),r.getBindingContext()),r.setTooltip(n),e.refresh()}function s(e){var t=u.getBinding("rows"),n=("object"==typeof e?e.getParameter("value"):e).toLowerCase();t&&c!==n&&(c=n,t.refresh(!0))}jQuery.sap.declare("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.properties.PropertiesEditorForm");var u=null,c="",l=sap.ui.core.Control.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.properties.PropertiesEditorForm",{metadata:{properties:{hasMetadata:{type:"boolean",defaultValue:!1},title:{type:"string",group:"Misc",defaultValue:null},message:{type:"string",group:"Misc",defaultValue:null},deprecated:{type:"string",group:"Behavior",defaultValue:null}},aggregations:{search:{type:"sap.ui.commons.SearchField",multiple:!1,visibility:"hidden"},dataBinding:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"},form:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"}}},constructor:function(){sap.ui.core.Control.apply(this,arguments);var e=this.getId();this.attachParseError(r,this),this.attachValidationError(i,this),this.attachValidationSuccess(o,this),this.bindProperty("hasMetadata","dataModel>/isMetadataExists"),this.setAggregation("search",new sap.ui.commons.SearchField(e+"--filter",{enableListSuggest:!1,showListExpander:!1,enableClear:!0,enableFilterMode:!0,startSuggestion:0,suggest:s}).addStyleClass("sapWysiwygFilter")),this.setAggregation("dataBinding",new sap.ui.commons.layout.MatrixLayout({widths:["100%"],rows:[new sap.ui.commons.layout.MatrixLayoutRow({cells:[new sap.ui.commons.layout.MatrixLayoutCell({padding:sap.ui.commons.layout.Padding.None,content:new n})]})]})),u=new sap.ui.commons.layout.MatrixLayout({widths:["100%"],rows:{path:"/properties",factory:function(n,r){var i=r.getObject();return new sap.ui.commons.layout.MatrixLayoutRow(n,{cells:[new sap.ui.commons.layout.MatrixLayoutCell({content:new t(e+"_"+n+"_"+i.name,i)})]})},filters:[new sap.ui.model.Filter("title",function(e){return!c||-1!==e.toLowerCase().indexOf(c)})]}}),this.setAggregation("form",u)},renderer:function(e,t){var n=t.getMessage(),r=t.getDeprecated();e.write("<div"),e.writeControlData(t),e.addClass("sapPropertiesEditor"),e.writeClasses(),e.write(">"),e.write("<div"),e.addClass("w5gPropertiesPanelHdr"),e.writeClasses(),e.write(">"),n?(e.write("<div"),e.addClass("propertyEditorTitleSpecial"),e.addClass("w5gPropertiesPanelHdrItem"),e.writeClasses(),e.write(">"),e.writeEscaped(n),e.write("</div>"),e.write("</div>")):(e.write("<div"),e.addClass("w5gPropertiesTitle"),e.addClass("w5gPropertiesPanelHdrItem"),e.writeClasses(),e.write(">"),e.writeEscaped(t.getTitle()),e.write("</div>"),r&&(e.write("<div"),e.addClass("w5gPropertiesDeprecated"),e.addClass("w5gPropertiesPanelHdrItem"),e.writeClasses(),e.write(">"),e.writeEscaped(r),e.write("</div>")),e.write("</div>"),e.write("<div"),e.addClass("sapWysiwygDataBindingBox"),e.writeClasses(),e.write(">"),e.renderControl(t.getAggregation("dataBinding")),e.write("</div>"),e.renderControl(t.getAggregation("search")),e.write("<div"),e.addClass("w5gPropertiesPanelCnt"),e.writeClasses(),e.write(">"),e.renderControl(t.getAggregation("form")),e.write("</div>")),e.write("</div>")}});return l.prototype.onAfterRendering=function(){var t=this.$().find(".sapWysiwygFilter");t.length&&this.$().find(".w5gPropertiesPanelCnt").css("top",t.position().top+t.outerHeight(!0)+"px"),e.addPlaceHolderToSearchField(this.getAggregation("search"),"properties_search_field_placeholder")},l.prototype.resetFilter=function(){this.getAggregation("search").setValue(""),s("")},l}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/view/ui5ctrlpropertieseditor.controller",["../utils/W5gBindingHelper","../models/W5gPropertiesModel","../control/properties/PropertiesEditorForm","../utils/W5gUtils","../utils/ControlMetadata"],function(e,t,n,r,i){"use strict";sap.ui.controller("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.view.ui5ctrlpropertieseditor",{_oOwnerEditor:null,_oView:null,_sDeprecated:"",_oTitleModel:new sap.ui.model.json.JSONModel({title:"",message:"",isDeprecated:!1}),_oModel:null,_oEditor:null,_oControl:null,_update:function(){var e=this;return e._getSelectionOwningWindowScope().spread(function(t,n){var o=!0,a=null;return e._oControl?e._oControl.getMetadata&&e._oControl.getMetadata()?i.isControlUnsupported(e._oControl)||r.testAncestors(e._oControl,r.isControlFragment,t)?(o=!1,a="unsupported_message"):i.isControlToBeSupported(e._oControl)&&(o=!1,a="properties_tobe_supported_message"):(o=!1,a="properties_no_metadata_message"):(o=!1,a="properties_select_item_message"),o?(e._oView.getModel()||e._oView.setModel(e._oModel),e._oModel.setControl(e._oControl,t,n),e._setTitle(e._oModel.getProperty("/controlName")),void 0):(e._oModel&&e._oModel.setControl(null),e._setTitle(r.getText(a),!0),void 0)})},_updateWrapper:function(){this._update().done()},_getSelectionOwningWindowScope:function(){return this._oOwnerEditor&&this._oOwnerEditor.getScope?Q.all([this._oOwnerEditor.getScope(),this._oOwnerEditor.getXmlManipulator()]):Q([])},_setTitle:function(e,t){this._oTitleModel.setData({title:t?"":e,message:t?e:"",deprecated:this._oModel&&this._oModel.getProperty("/isDeprecated")?this._sDeprecated:""})},onInit:function(){this._oView=this.getView(),this._oEditor=this.byId("propertieseditor"),this._oView.setModel(this._oTitleModel,"titleModel").setModel(e.getDataModel(),"dataModel"),this._sDeprecated=r.getText("properties_control_deprecated_label")},setSelection:function(t,n){var r=this;return e.setSelection(t).then(function(){return r._oControl!==t?(r._oControl&&r._oControl.detachEvent("_change",r._updateWrapper.bind(r)),t&&t.attachEvent("_change",r._updateWrapper.bind(r)),n&&n.instanceOf("sap.watt.common.service.editor.Editor")&&(r._oOwnerEditor=n),r._oControl=t,r._update().then(function(){r._oEditor.resetFilter()})):void 0})},setModel:function(e){this._oModel=e}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/control/events/EventsDropdownBox",[],function(){"use strict";jQuery.sap.declare("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.events.EventsDropdownBox"),jQuery.sap.require("sap.ui.commons.DropdownBox");var e=sap.ui.commons.DropdownBox.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.events.EventsDropdownBox",{metadata:{},renderer:{}});return e.prototype._doTypeAhead=function(e,t,n,r){if(this.__doTypeAhead!==!0){this.__doTypeAhead=!0,this._sWantedSelectedKey=void 0,this._sWantedSelectedItemId=void 0,this._sWantedValue=void 0;var i=this._getListBox(),o=this.getMaxPopupItems(),a=this.__aItems||i.getItems(),s=a.length,u=this.getMaxHistoryItems()>0&&a.length>this._iItemsForHistory,c=!n&&u,l=e+t,p=new RegExp("[.*+?|()\\[\\]{}\\\\]","g"),f=l.toLowerCase().replace(p,"\\$&"),d=RegExp("^"+f+".*$"),h=t&&t.length||0,m=jQuery(this.getInputDomRef());if(this.__aItems=a,0>=s)return this.__doTypeAhead=!1,!1;var g,v=this._getFilteredItems(a,d),y=v.length>0;y||(c=!1),g=c?v:a.slice(0);var _=[];u&&(_=this._addHistoryItems(g,c&&d),i.setItems(g,!1,!0),s=g.length),i.setVisibleItems(s>o?o:-1);var x,b=_.length,w=0;if(r>=0&&(x=a[r]),!c&&b>0&&y&&(_=this._getFilteredItems(_,d),x=_[0]),c)x=v[0];else if(!x)if(v.length>0)x=v[0];else{var S=m.val(),E=0;for(w=0;w<g.length;w++){var C=g[w];if(C.getEnabled()&&(E||(E=w),C.getText()==S)){x=C;break}}x||(x=g[E])}var T=this._searchHelpItem;T&&(g.splice(b++,0,T[0],T[1]),i.setItems(g,!1,!0)),w=i.indexOfItem(x);var P=x.getText(),I=w+1,D=g.length;return _.length>0&&(D-=1),T&&(D-=2),I>_.length&&(_.length>0&&(I-=1),T&&(I-=2)),this._updatePosInSet(m,I,x.getAdditionalText?x.getAdditionalText():""),m.attr("aria-setsize",D),m.val(P),this._sTypedChars=l,this._doSelect(e.length+h,P.length),i.setSelectedIndex(w),T&&2==w?i.scrollToIndex(0):i.scrollToIndex(w),this._iClosedUpDownIdx=w,y||(m=this.$(),m.addClass("sapUiTfErr"),jQuery.sap.delayedCall(300,m,"removeClass",["sapUiTfErr"]),m.cursorPos(e.length),this._doSelect(e.length,P.length)),this.__doTypeAhead=!1,y}},e.prototype._prepareOpen=function(){return this._bOpening=!0,sap.ui.commons.DropdownBox.prototype._prepareOpen.apply(this,arguments)},e.prototype._cleanupClose=function(){return this._bOpening=void 0,sap.ui.commons.DropdownBox.prototype._cleanupClose.apply(this,arguments)},e.prototype.applyFocusInfo=function(){return sap.ui.commons.ComboBox.prototype.applyFocusInfo.apply(this,arguments),this._bOpening||this.oPopup&&this.oPopup.isOpen()||this._cleanupClose(this._getListBox()),this},e.prototype.onsapfocusleave=function(e){var t=this._getListBox();e.relatedControlId&&jQuery.sap.containsOrEquals(t.getFocusDomRef(),sap.ui.getCore().byId(e.relatedControlId).getFocusDomRef())?this.focus():(this.oPopup&&this.oPopup.isOpen()&&this._close(),sap.ui.commons.TextField.prototype.onsapfocusleave.apply(this,arguments))},e}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/control/events/EventHandlersEditor",["sap/watt/lib/lodash/lodash","../../utils/W5gUtils","../../utils/DocuUtils","../../utils/EventsUtils","../../utils/EventBusHelper","./EventsDropdownBox"],function(e,t,n,r,i,o){"use strict";function a(t,n){var r=this;return t+="--"+n,new o(t,{value:"{value}",maxPopupItems:5,placeholder:"{placeholder}",searchHelpEnabled:!0,searchHelpText:"{i18n>events_new_function_label}",searchHelp:function(){s.call(r,e.map(this.getItems(),function(e){return e.getText()})).done()},width:"100%",items:{path:"/methods",template:new sap.ui.core.ListItem({text:"{signature}"})}})}function s(e){var t=this;return r.showNewFunctionDialog(e).then(function(e){e.accepted&&i.publish(i.IDENTIFIERS.EVENTS_NEW_FUNC_ADDED,{funcName:e.value,path:t.getBindingContext().getPath()+"/value"})})}jQuery.sap.declare("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.events.EventHandlersEditor"),jQuery.sap.require("sap.ui.model.type.String");var u=sap.ui.core.Control.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.events.EventHandlersEditor",{metadata:{aggregations:{label:{type:"sap.ui.commons.Label",multiple:!1,visibility:"hidden"},deprecated:{type:"sap.ui.commons.Label",multiple:!1,visibility:"hidden"},field:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"},button:{type:"sap.ui.commons.Button",multiple:!1,visibility:"hidden"}}},constructor:function(e,t){sap.ui.core.Control.apply(this,[e]);var r=a.call(this,e,t);this.setAggregation("field",r),this.setAggregation("label",new sap.ui.commons.Label({text:"{title}",tooltip:n.createDocuTooltip({},"events"),labelFor:r.getId()})),this.setAggregation("deprecated",new sap.ui.commons.Label({text:"{i18n>properties_control_deprecated_label}",visible:"{isDeprecated}",labelFor:r.getId()}).addStyleClass("sapPropertiesEditorLabelAdditionalText")),this.setAggregation("button",new sap.ui.commons.Button({tooltip:"{i18n>events_button_nav_to_controller_tooltip}",press:function(){i.publish(i.IDENTIFIERS.EVENTS_NAVIGATE_TO_CONTROLLER,{funcName:r.getValue()})},icon:"sap-icon://watt/gotocode"}))},renderer:function(e,t){e.write("<div"),e.writeControlData(t),e.addClass("sapWysiwygPropertyEditor"),e.writeClasses(),e.write(">"),e.write("<div"),e.addClass("sapWysiwygPropertyEditorLabelRow"),e.writeClasses(),e.write(">"),e.write("<div"),e.addClass("sapWysiwygPropertyEditorLabelWrapper"),e.writeClasses(),e.write(">"),e.renderControl(t.getAggregation("label")),e.write("</div>"),e.write("<div"),e.addClass("sapWysiwygPropertyEditorDeprecatedLabelWrapper"),e.writeClasses(),e.write(">"),e.renderControl(t.getAggregation("deprecated")),e.write("</div>"),e.write("</div>"),e.write("<div"),e.addClass("sapWysiwygPropertyEditorFieldRow"),e.addClass("sapWysiwygPropertyEditorFieldRowPadding"),e.writeClasses(),e.write(">"),e.renderControl(t.getAggregation("field")),e.renderControl(t.getAggregation("button")),e.write("</div>"),e.write("</div>")}});return u.prototype.onAfterRendering=function(){var e,t,n=this.getAggregation("deprecated",null);n&&(t=n.$(),t.css("position","absolute"),e=t.innerWidth(),t.css("position",""),this.$().find(".sapWysiwygPropertyEditorLabelWrapper").css("right",e+"px"))},u.prototype.exit=t.destroyPrivateAggregations,u.prototype.getFocusDomRef=function(){return this.getAggregation("field").getFocusDomRef()},u}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/control/events/EventsEditorForm",["../../utils/W5gUtils","./EventHandlersEditor"],function(e,t){"use strict";function n(t){var n=this.getModel(),r=n.getProperty("title",t.getParameter("element").getBindingContext()),i=e.getText("properties_parse_error_tooltip",[r,t.getParameter("newValue"),t.getParameter("type").getName()]);o(n,t,i)}function r(e){o(this.getModel(),e,e.getParameter("exception").message)}function i(e){var t=e.getParameter("element"),n=this.getModel();n.setProperty("rejectedValue",void 0,t.getBindingContext()),t.setTooltip(""),n.refresh()}function o(e,t,n){var r=t.getParameter("element");e.setProperty("rejectedValue",t.getParameter("newValue"),r.getBindingContext()),r.setTooltip(n),e.refresh()}function a(e){var t=s.getBinding("rows"),n=("object"==typeof e?e.getParameter("value"):e).toLowerCase();t&&u!==n&&(u=n,t.refresh(!0))}jQuery.sap.declare("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.events.EventsEditorForm");var s=null,u="",c=sap.ui.core.Control.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.control.events.EventsEditorForm",{metadata:{properties:{title:{type:"string",group:"Misc",defaultValue:null},message:{type:"string",group:"Misc",defaultValue:null},deprecated:{type:"string",group:"Behavior",defaultValue:null}},aggregations:{search:{type:"sap.ui.commons.SearchField",multiple:!1,visibility:"hidden"},form:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"}}},constructor:function(){sap.ui.core.Control.apply(this,arguments);var e=this.getId();this.attachParseError(n,this),this.attachValidationError(r,this),this.attachValidationSuccess(i,this),this.setAggregation("search",new sap.ui.commons.SearchField(e+"--filter",{enableListSuggest:!1,showListExpander:!1,enableClear:!0,enableFilterMode:!0,startSuggestion:0,suggest:a}).addStyleClass("sapWysiwygFilter")),s=new sap.ui.commons.layout.MatrixLayout({widths:["100%"],rows:{path:"/events",factory:function(n,r){var i=r.getObject().name;return new sap.ui.commons.layout.MatrixLayoutRow(n,{cells:[new sap.ui.commons.layout.MatrixLayoutCell({content:new t(e+"_"+n+"_"+i,i)})]})},filters:[new sap.ui.model.Filter("title",function(e){return!u||-1!==e.toLowerCase().indexOf(u)})]}}),this.setAggregation("form",s)},renderer:function(e,t){var n=t.getMessage(),r=t.getDeprecated();e.write("<div"),e.writeControlData(t),e.addClass("sapPropertiesEditor"),e.writeClasses(),e.write(">"),e.write("<div"),e.addClass("w5gPropertiesPanelHdr"),e.writeClasses(),e.write(">"),n?(e.write("<div"),e.addClass("propertyEditorTitleSpecial"),e.addClass("w5gPropertiesPanelHdrItem"),e.writeClasses(),e.write(">"),e.writeEscaped(n),e.write("</div>"),e.write("</div>")):(e.write("<div"),e.addClass("w5gPropertiesTitle"),e.addClass("w5gPropertiesPanelHdrItem"),e.writeClasses(),e.write(">"),e.writeEscaped(t.getTitle()),e.write("</div>"),r&&(e.write("<div"),e.addClass("w5gPropertiesDeprecated"),e.addClass("w5gPropertiesPanelHdrItem"),e.writeClasses(),e.write(">"),e.writeEscaped(r),e.write("</div>")),e.write("</div>"),e.renderControl(t.getAggregation("search")),e.write("<div"),e.addClass("w5gPropertiesPanelCnt"),e.writeClasses(),e.write(">"),e.renderControl(t.getAggregation("form")),e.write("</div>")),e.write("</div>")}});return c.prototype.onAfterRendering=function(){var t=this.$().find(".sapWysiwygFilter");t.length&&this.$().find(".w5gPropertiesPanelCnt").css("top",t.position().top+t.outerHeight(!0)+"px"),e.addPlaceHolderToSearchField(this.getAggregation("search"),"events_search_field_placeholder")},c.prototype.resetFilter=function(){this.getAggregation("search").setValue(""),a("")},c}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/view/ui5ctrleventseditor.controller",["../models/W5gPropertiesModel","../control/events/EventsEditorForm","../utils/W5gUtils","../utils/ControlMetadata","../utils/EventBusHelper"],function(e,t,n,r,i){"use strict";var o=null,a=null;sap.ui.controller("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.view.ui5ctrleventseditor",{_oOwnerEditor:null,_oView:null,_sDeprecated:"",_oTitleModel:new sap.ui.model.json.JSONModel({title:"",message:"",isDeprecated:!1}),_oModel:null,_oEditor:null,_oControl:null,_update:function(){var e=this;return e._getSelectionOwningWindowScope().spread(function(t){var i=null;return a=!0,e._oControl?e._oControl.getMetadata&&e._oControl.getMetadata()?r.isControlUnsupported(e._oControl)||n.testAncestors(e._oControl,n.isControlFragment,t)?(a=!1,i="unsupported_message"):r.isControlToBeSupported(e._oControl)?(a=!1,i="properties_tobe_supported_message"):o||(a=!1,i="events_controller_not_available"):(a=!1,i="properties_no_metadata_message"):(a=!1,i="events_select_item_message"),a?(e._oView.getModel()||e._oView.setModel(e._oModel),void 0):(e._setTitle(n.getText(i),!0),void 0)})},_updateWrapper:function(){this._update().done()},_getSelectionOwningWindowScope:function(){return this._oOwnerEditor&&this._oOwnerEditor.getScope?Q.all([this._oOwnerEditor.getScope(),this._oOwnerEditor.getXmlManipulator()]):Q([])},_setTitle:function(e,t){this._oTitleModel.setData({title:t?"":e,message:t?e:"",deprecated:this._oModel&&this._oModel.getProperty("/isDeprecated")?this._sDeprecated:""})},onInit:function(){this._oView=this.getView(),this._oEditor=this.byId("eventseditor"),this._oView.setModel(this._oTitleModel,"titleModel"),this._sDeprecated=n.getText("properties_control_deprecated_label");var e=this;i.subscribe(i.IDENTIFIERS.PROP_MODEL_CONTROL_UPDATED,function(){a&&e._setTitle(e._oModel.getProperty("/controlName"))})},setSelection:function(e,t){if(this._oControl===e)return Q();this._oControl&&this._oControl.detachEvent("_change",this._updateWrapper.bind(this)),e&&e.attachEvent("_change",this._updateWrapper.bind(this)),t&&t.instanceOf("sap.watt.common.service.editor.Editor")&&(this._oOwnerEditor=t),this._oControl=e;var n=this;return n._update().then(function(){n._oEditor.resetFilter()})},setControllerAvailable:function(e){o=e},setModel:function(e){this._oModel=e}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/service/W5gProperties",["sap/watt/common/plugin/platform/service/ui/AbstractPart","sap/watt/lib/lodash/lodash","../utils/ResourcesHelper","../utils/W5gUtils","../utils/EventsUtils","../utils/EventBusHelper","../models/W5gPropertiesModel","../view/ui5ctrlpropertieseditor.controller","../view/ui5ctrleventseditor.controller"],function(e,t,n,r,i,o,a){"use strict";function s(e,t,n){var r=new sap.ui.commons.AccordionSection({title:e,content:t});_.insertSection(r,n),d[n].ui=r.getId()}function u(e){d.length>e&&_.openSection(d[e].ui)}function c(){return _?t.every(_.getSections(),function(e){return e.getCollapsed()}):!0}function l(e){if("resize"!==e.type||e.size.height&&e.oldSize.height!==e.size.height){var t=_.$(),n=t.height()-t.find(".sapUiAcdSectionHdr").height()*(d.length-1)-7;jQuery.each(_.getSections(),function(){return this.getCollapsed()===!1?(this.setMaxHeight(n+"px"),!1):void 0})}}function p(e,n){var r=[];return y||(b=sap.ui.view({viewName:"sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.view.ui5ctrlpropertieseditor",type:sap.ui.core.mvc.ViewType.XML}),w=sap.ui.view({viewName:"sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.view.ui5ctrleventseditor",type:sap.ui.core.mvc.ViewType.XML}),S=new a,b.getController().setModel(S),w.getController().setModel(S),_=new sap.ui.commons.Accordion({sectionOpen:l}).addStyleClass("sapWysiwygRightSection").addEventDelegate({onAfterRendering:function(){x=sap.ui.core.ResizeHandler.register(_.getDomRef(),l);var e=_.getSections();e.forEach(function(e,t){d[t].iconClass&&e.$().find(".sapUiAcdSectionLabel").addClass(d[t].iconClass)})},onBeforeRendering:function(){x&&(sap.ui.core.ResizeHandler.deregister(x),x=null)}}).attachSectionClose(function(e){var n=e.getParameters().closeSectionId,r=t.findIndex(d,function(e){return e.ui===n});d.length===r+1?u(r-1):u(r+1)}),d.unshift({title:e.i18n.getText("w5g_properties_editor_title"),service:null,view:b,prio:1,iconClass:"sapWysiwygPropertiesIcon"},{title:e.i18n.getText("w5g_events_editor_title"),service:null,view:w,prio:0,iconClass:"sapWysiwygEventsIcon"}),d.sort(function(e,t){return e.prio-t.prio}).forEach(function(e,t){var n=e.service;n?r.push(n.getContent().then(function(n){s(e.title,n,t)})):s(e.title,e.view,t)}),y=_.addEventDelegate({onAfterRendering:function(){e.service.focus.attachFocus(e.self).done()},onBeforeRendering:function(){e.service.focus.detachFocus(e.self).done()}})),Q.all(r).then(function(){return n?[b,w]:y})}function f(e,t,n){return v=n,p(e,!0).then(function(e){var n=e.map(function(e){return e.getController().setSelection(v,t)});return Q.all(n).then(function(){c()&&u(1)})})}var d=null,h=null,m=null,g=null,v=null,y=null,_=null,x=null,b=null,w=null,S=null;return e.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.service.W5gProperties",{configure:function(e){d=e.sections||[]},init:function(){var e=this;i.init(this.context),o.subscribe(o.IDENTIFIERS.EVENTS_NEW_FUNC_ADDED,function(t){e.addFunctionToController(e.context,t.funcName,t.path)}),o.subscribe(o.IDENTIFIERS.EVENTS_NAVIGATE_TO_CONTROLLER,function(t){e.navigateToController(e.context,t.funcName)})},onViewHasChanged:function(e){var t=this,n=e.params.editor,o=!1;return Q.all([n.getRoot(),n.getScope(),n.getSelection()]).spread(function(e,a,s){var u=t.getContext(),c=s&&s[0]||{};return m=e,g=a,h=c.document,f(u,n,c.control).then(function(){return r.getControllerDocument(u,m,g).then(function(e){return e?e.getContent().then(function(e){var t=[{signature:""}].concat(i.fetchMethodsFromController(e));S&&S.setMethods(t),o=!0}):void 0}).catch(function(e){jQuery.sap.log.error(e)}).finally(function(){w&&w.getController().setControllerAvailable(o)})})})},getFocusElement:function(){return y},getTitle:function(){return this.getContext().i18n.getText("w5g_properties_title")},getTooltip:function(){return this.getContext().i18n.getText("w5g_properties_tooltip")},setVisible:function(t){return e.prototype.setVisible.apply(this,arguments).then(function(){return y.setVisible(t)
})},isVisible:function(){return!!(y&&y.$()&&y.$().is(":visible"))},getSelection:function(){return[{document:h,control:y}]},getContext:function(){return this.context.service.ui5wysiwygeditor.context},getContent:function(){var t=this.getContext();return e.prototype.getContent.apply(this,arguments).then(function(){return p(t)})},onViewElementSelected:function(e){var t=e.params.owner,r={},i=this.getContext();if(e.params.selection.length&&(r=e.params.selection[0],h=r.document),v===r.control)return Q();if(!n.isMetadataLoaded()){var o=Q.defer(),a=r.control;return n.attachMetadataLoadedOnce(function(){f(i,t,a).then(function(){o.resolve()}).done()}),o.promise}return f(i,t,r.control)},addFunctionToController:function(e,t,n){return r.getControllerDocument(e,m,g).then(function(e){return e?e.getContent().then(function(r){var o=i.injectEventToController(r,t,m.getControllerName());if(o){var a=e.isDirty();return e.setContent(o).then(function(){return a?void 0:e.save()}).then(function(){S.addMethod({signature:t}),S.setProperty(n,t)})}}):void 0})},navigateToController:function(e,t){return r.getControllerDocument(e,m,g).then(function(e){return e?i.navigateToControllerAndSelectFunction(e,t):void 0})}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/view/OutlineTree.controller",["sap/watt/lib/lodash/lodash","../utils/W5gUtils","../utils/ControlMetadata","../utils/UsageMonitoringUtils"],function(e,t,n,r){"use strict";function i(e){return e.__data&&e.__data.sType&&"control"===e.__data.sType}jQuery.sap.require("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.view.OutlineTreeNode");var o=new sap.ui.model.json.JSONModel({isAddable:!1,isDeletable:!1});sap.ui.controller("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.view.OutlineTree",{_oUI5Tree:null,_oContext:null,_oScope:null,_sDocKey:null,_oTreeRootNode:null,_sSelectedNodeTag:null,_iTreeDefaultExpandedDepth:3,_oContextMenuGroup:null,_mNodeExpandStates:{},_oAddCommand:null,_oRemoveCommand:null,onInit:function(){sap.ui.commons.TreeNode.ANIMATION_DURATION=0,this._oUI5Tree=this.byId("outlineTree"),this.getView().setModel(o,"toolbarModel")},init:function(e,n){var r=this;return this._oContext=e,this._oContextMenuGroup=n,t.init(e),t.applyBundleTo([this.getView()]),Q.all([this._oContext.service.command.getCommand("ui5wysiwygeditor.control.add"),this._oContext.service.command.getCommand("ui5wysiwygeditor.control.remove")]).spread(function(e,t){r._oAddCommand=e,r._oRemoveCommand=t})},onAfterRendering:function(){var e=this;this._oContext.service.focus.attachFocus(this._oContext.self).done(),this._sSelectedNodeTag&&this.selectNodeByTag(this._sSelectedNodeTag),$(document).on("mouseenter mouseleave",".sapWattOutlineTree .sapUiTreeNode",function(t){var n=t.currentTarget.getAttribute("tag"),r=e._getNodeByTag(n);if(r&&i(r)){var o="mouseenter"===t.type?"highlight":"downplay";e.fireEvent(o+"NodeInCanvas",{sId:r.getTag()})}}),this.getView().addEventDelegate({oncontextmenu:function(t){t.preventDefault();for(var n=t.target;n&&!n.attributes.id;)n=n.parentElement;if(n&&n.attributes.id){var r=n.attributes.id.value,i=sap.ui.getCore().byId(r),o=i&&i.getTag();if(o){var a,s=e._getNodeByTag(o);if(s.getIsSelected()?a=Q():s.getSelectable()&&(a=e.triggerEditorSelectionForNode(s)),a)return a.then(function(){e._oContext.service.contextMenu.open(e._oContextMenuGroup,t.pageX,t.pageY).done()}).done()}}}})},_expandHandler:function(t){var n=t.getSource().getTag();e.set(this._mNodeExpandStates,[this._sDocKey,n],t.getParameters().opened)},_isTagExpanded:function(t){return e.get(this._mNodeExpandStates,[this._sDocKey,t],!1)},initOutline:function(e,t,n,r,i){return this._sDocKey=e,this._oScope=r,this._oEditor=i,this._oUI5Tree.destroyNodes(),this._oTreeRootNode=new sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.view.OutlineTreeNode({tag:n.getId(),controlId:n.getId(),text:t,selectable:!0,expanded:this._isExpanded(0),toggleOpenState:this._expandHandler.bind(this)}),this._oTreeRootNode.data("isRoot",!0),this._oTreeRootNode.__data={sType:"control",oControl:n},this._oTreeRootNode.attachSelected(null,this._onNodeSelected,this),this._oUI5Tree.addNode(this._oTreeRootNode),this._createTree({oValue:n.getContent(),iDepth:1})},_createTree:function(e){var t=this;return this._createNodeFromAggregation(e).then(function(){return t._oUI5Tree.rerender(),t.selectNodeByTag(t._sSelectedNodeTag)})},_createNodeFromAggregation:function(e){var t=this,r=e.oValue,i=e.iDepth,o=e.oParent||this._oTreeRootNode,a=e.bHasUnsupportedParent,s=[];return r&&r.length&&jQuery.map(r,function(e){s.push(t._addNodeForControl(e,o,i,a).then(function(r){return t._iterateOverAllPublicAggregations({oControl:e,bHasUnsupportedParent:a,fnCallback:function(n){var o=r;if(n.sCustomName){var a=e.getMetadata().getAllAggregations()[n.sCustomName].deprecated;o=t._addNodeForAggregation({sName:n.sCustomName,oParent:r,iDepth:i,isDeprecated:a,isSelectable:n.isSelectable}),i++}return t._createNodeFromAggregation({oParent:o,oValue:n.oValue,iDepth:i+1,bHasUnsupportedParent:n.bHasUnsupportedParent})},aFilter:n.getUnsupportedAggregations()})}))}),Q.all(s)},_iterateOverAllPublicAggregations:function(e){if(e.oControl.bIsDestroyed)return Q();var r=e.oControl,i=e.bHasUnsupportedParent,o=e.fnCallback,a=e.aFilter,s=i||n.isControlUnsupported(r)||n.isControlToBeSupported(r),u=t.isControlSelectable(r,this._oScope),c=r.getMetadata().getAllAggregations(),l=[];for(var p in c)if(!a||-1===a.indexOf(p)){var f=c[p];if(f._sGetter&&r[f._sGetter]){var d=r[f._sGetter]();if("object"!=typeof d)continue;d=d?d:[],d=d.splice?d:[d],l.push(o({sCustomName:p,oValue:d,isSelectable:u,bHasUnsupportedParent:s}))}}return Q.all(l)},_addBindingString:function(e,t,n){if(t.mBindingInfos[n])if(t.mBindingInfos[n].parts&&t.mBindingInfos[n].parts.length){var r=t.data().sapDtResourcePath,i=t.mBindingInfos[n].parts[0].model,o=t.mBindingInfos[n].parts[0].path;o=i?i?i+">"+o:o:r?r+"."+o:o,e.__data.sBindingString="{"+o+"}"}else if(t.mBindingInfos[n].path){var a=t.mBindingInfos[n].path;0===a.indexOf("/")&&(a=a.slice(1)),e.__data.sBindingString="{"+a+"}"}},_addNodeForControl:function(e,t,n,r){var i=this._createNodeForControl(e,n,r);return i&&(t||this._oUI5Tree).addNode(i),Q(i)},_addNodeForAggregation:function(e){var t=this._createNodeForAggregation({sName:e.sName,oParent:e.oParent,iDepth:e.iDepth,isDeprecated:e.isDeprecated,isSelectable:e.isSelectable});return t?(e.oParent.addNode(t),t):void 0},_createNodeForControl:function(e,n){var r=e.sId,i=new sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.view.OutlineTreeNode({tag:r,controlId:r,selectable:t.isControlSelectable(e,this._oScope),text:e.getMetadata()._sClassName,expanded:this._isExpanded(n,r),toggleOpenState:this._expandHandler.bind(this)});return i.__data={sType:"control",sAdditionalText:t.getBadgeInfo(e,this._oScope,!0).text,oControl:e},i.attachSelected(null,this._onNodeSelected,this),i},_createTagForAggregation:function(e,t){var n=t.getTag?t.getTag():t.sId;return n.replace(/(-__clone\d+)+/g,"-__template")+"-"+e},_createNodeForAggregation:function(e){e.isSelectable!==!1&&(e.isSelectable=!0);var n=this._createTagForAggregation(e.sName,e.oParent),r=new sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.view.OutlineTreeNode({tag:n,controlId:e.oParent.__data.oControl.getId(),aggregationName:e.sName,selectable:e.isSelectable,text:e.sName,expanded:e.iDepth?this._isExpanded(e.iDepth,n):!1,toggleOpenState:this._expandHandler.bind(this)});return r.__data={sType:"aggregation",sAdditionalText:e.isDeprecated?t.getText("w5g_badge_deprecated"):""},this._addBindingString(r,e.oParent.__data.oControl,e.sName),r.attachSelected(null,this._onNodeSelected,this),r},triggerEditorSelectionForNode:function(e){return this._oEditor.selectUI5Control(e.getControlId(),e.getAggregationName())},_onNodeSelected:function(e){r.report("outline_press"),this.triggerEditorSelectionForNode(e.getSource()).done()},setSelectedNodeTag:function(e){this._sSelectedNodeTag=e},_getNodeByTag:function(e){var t=null,n=function(r){!t&&r.length&&r.map(function(r){r.getTag()===e&&(t=r),n(r.getNodes())})};return n(this._oUI5Tree.getNodes()),t},_getControlTag:function(e){return e&&e.sId},updateToolbarModel:function(){function e(e,t){return e._oService.isEnabled().then(function(e){o.setProperty(t,e)})}return Q.all([e(this._oAddCommand,"/isAddable"),e(this._oRemoveCommand,"/isDeletable")])},selectNodeFromSelection:function(t,n){var r=this._getControlTag(t),i=this._getNodeByTag(r);i&&n&&(i=e.find(i.getNodes(),function(e){return e.getAggregationName()===n}),r=i.getTag()),r!==this._sSelectedNodeTag&&(r?this.selectNodeByTag(r):this.deselectAllNodes(),this.setSelectedNodeTag(r))},selectNodeByTag:function(e){var t=this._getNodeByTag(e);t&&(t.getDomRef()||t.rerender(),this.deselectAllNodes(),this._selectNode(t))},getSelectedNode:function(){return this._sSelectedNodeTag&&this._getNodeByTag(this._sSelectedNodeTag)},_selectNode:function(e){var t=this;e.detachSelected(this._onNodeSelected,this),this.setSelectedNodeTag(e.getTag());var n=function(e){e.getParent()!==t._oUI5Tree&&n(e.getParent()),e.getExpanded()||e.expand()};n(e),e.select(),e.attachSelected(null,this._onNodeSelected,this)},_deselectNodeByTag:function(e){var t=this._getNodeByTag(e);if(t){var n=t.getSelectable();t.setSelectable(!1),t.setSelectable(n),t.rerender()}this._sSelectedNodeTag===e&&this.setSelectedNodeTag(null)},deselectAllNodes:function(){this._sSelectedNodeTag&&this._deselectNodeByTag(this._sSelectedNodeTag)},_isExpanded:function(e,t){return e<this._iTreeDefaultExpandedDepth||this._isTagExpanded(t)},_getFragmentName:function(e){var t=e.__FragmentName.split(".");return t&&t.length>0?": "+t[t.length-1]:" "},_getSubviewName:function(e){var t=e.getControllerName().split(".");return t.length>0?": "+t[t.length-1]:" "},onAdd:function(){return this._oAddCommand.execute().done()},onDelete:function(){return this._oRemoveCommand.execute().done()}})}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/service/W5GOutline",["sap/watt/lib/lodash/lodash","sap/watt/common/plugin/platform/service/ui/AbstractPart","../view/OutlineTree.controller"],function(e,t){"use strict";var n=t.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.service.W5GOutline",{_oView:null,_oController:null,_oEditor:null,_oQueue:null,_oContextMenuGroup:null,init:function(){this._oQueue=new Q.sap.Queue},configure:function(e){var t=this;return t._aStyles=e.styles,e.contextMenu?t.getContext().service.commandGroup.getGroup(e.contextMenu).then(function(e){t._oContextMenuGroup=e}):void 0},getContext:function(){return this.context.service.w5gOutline.context},getContent:function(){var e=this;return this._oView?this._oView:(this._oView=sap.ui.view({viewName:"sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.view.OutlineTree",type:sap.ui.core.mvc.ViewType.XML}),this._oController=this._oView.getController(),this._oController.attachEvent("highlightNodeInCanvas",this._highlightNodeInCanvas,this),this._oController.attachEvent("downplayNodeInCanvas",this._downplayNodeInCanvas,this),this._oController.init(this.getContext(),this._oContextMenuGroup).then(function(){return t.prototype.getContent.apply(e,arguments)}).then(function(){return e._oView}))},canHandle:function(e){var t=this,n=e.params.owner;return t.context.self===n?!1:n.instanceOf("sap.watt.common.service.selection.UI5ControlProvider")?!0:void 0},onViewElementSelected:function(t){var n=e.get(t,"params.selection[0]");return n&&this._oController.selectNodeFromSelection(n.control,n.aggregation),this._oController.updateToolbarModel()},onViewHasChanged:function(e){var t=this;return t._oEditor=e.params.editor,t._oQueue.next(function(){return Q.all([t._oEditor.getRoot(),t._oEditor.getTitle(),t._oEditor.getScope(),t._oEditor.getSelection()])}).spread(function(e,n,r,i){return t._oDocument=t._getSelectedDocument(i),t._oController.initOutline(t._oDocument.getKeyString(),n,e,r,t._oEditor)})},_getSelectedDocument:function(t){return e.get(t,"[0].document")},_highlightNodeInCanvas:function(e){if(this._oEditor){var t=e.getParameter("sId");this._oEditor.highlightUI5Control(t).done()}},_downplayNodeInCanvas:function(e){if(this._oEditor){var t=e.getParameter("sId");this._oEditor.downplayUI5Control(t).done()}},getSelection:function(){return this._oEditor.getSelection()}});return n}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/service/W5GEmptyOutline",["sap/watt/common/plugin/platform/service/ui/AbstractPart","../utils/W5gUtils"],function(e,t){"use strict";var n=e.extend("sap.watt.saptoolsets.fiori.editor.plugin.ui5wysiwygeditor.service.W5GEmptyOutline",{_oView:null,init:function(){this._oView=sap.ui.xmlview({viewContent:'<core:View xmlns="sap.ui.commons" xmlns:core="sap.ui.core" xmlns:commons="sap.ui.commons"><TextView text="{i18n>w5g_outline_empty_pane_message}"/></core:View>'}).addStyleClass("wysiwygEmptyOutline"),t.applyBundleTo([this._oView])},getContent:function(){return this._oView},canHandle:function(e){return e.params.owner.instanceOf("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor.WYSIWYGEditor")},onSelectionChanged:function(e){return this.canHandle(e)?this.setVisible(!0):void 0}});return n}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/utils/QuickStartProjectGenerationUtils",["sap/watt/lib/lodash/lodash"],function(e){"use strict";function t(){jQuery.sap.assert(r,"QuickStartProjectGenerationUtils is not initialized");var e=[];return r.getRoot().then(function(t){return t.getCurrentMetadata().then(function(t){for(var n in t)e.push(t[n].name);return e})})}function n(e){var t=!1,n=2;if(-1===e.indexOf(u))return u;for(;!t;){if(-1===e.indexOf(u+n))return u+n;n++}}var r=null,i=null,o=null,a=null,s=null,u="QuickStartApplication",c=null,l=null,p={init:e.once(function(t){jQuery.sap.assert(t,"oContext must be a valid service context"),r=e.get(t,"service.filesystem.documentProvider"),jQuery.sap.assert(r,"filesystem.documentProvider service does not exist in the given context"),i=e.get(t,"service.generation"),jQuery.sap.assert(i,"generation service does not exist in the given context"),o=e.get(t,"service.template"),jQuery.sap.assert(o,"template service does not exist in the given context"),a=e.get(t,"service.dialogprogress"),jQuery.sap.assert(a,"progress service does not exist in the given context"),s=e.get(t,"service.usernotification"),jQuery.sap.assert(s,"progress usernotification does not exist in the given context"),c=e.get(t,"i18n"),jQuery.sap.assert(c,"i18n service does not exists in the given context")}),getQuickStartProjectName:function(){return t().then(function(e){return n(e)})},createQuickStartProject:function(e){var t,n=10,u="wysiwygtemplate.quickStart",p={quickStart:{parameters:{ProjectNamespace:{value:e}}}};return jQuery.sap.assert(o&&r&&i,"QuickStartProjectGenerationUtils is not initialized"),a.show(c.getText("w5g_editor_command_quickStart_generation_wait")).then(function(){return a.setProgress(n).then(function(){return o.getTemplates().then(function(r){return t=r[u],l=setInterval(function(){n+=20,n>100&&clearInterval(l),a.setProgress(n)},2e3),i.generateProject(e,t,p,!1).then(function(){clearInterval(l)})}).fail(function(e){s.alert(e.message).done()}).fin(function(){a.hide().done()})})})}};return p}),define("sap.watt.saptoolsets.fiori.editor.ui5wysiwygeditor/service/QuickStartService",["../utils/W5gUtils","../utils/QuickStartProjectGenerationUtils"],function(e,t){"use strict";var n=null,r={getContext:function(){return this.context.service.ui5wysiwygeditor.context},init:function(){t.init(this.getContext())},onMetadataUploaded:function(){n&&n.resolve()},quickStartWithLayoutEditor:function(){var r="view1",i=this;return n=Q.defer(),t.getQuickStartProjectName().then(function(o){return t.createQuickStartProject(o).then(function(){return n.promise.then(function(){return e.openViewFromProject(i.context,o,r)})})})}};return r}),define("sap.watt.saptoolsets.fiori.run.qunitrunner/service/QunitRunner",["sap/watt/lib/lodash/lodash","sap/watt/saptoolsets/fiori/run/plugin/commonrunners/util/configEnum","sap.watt.ideplatform.run/error/ConfigurationError"],function(e,t,n){"use strict";var r={run:function(e,t,n,r,i){var o,a=this,s=this._getRunParameters(r);if(s.sFilePath){if(i)return a.context.service.usagemonitoring.report("runner","unit_test",s.sFilePath.split("/")[1]).done(),a.context.service.usagemonitoring.report("runner","preview","qunitrunner").done(),a.context.service.preview.showPreview(i,t,s.bNoFrame,null,s.oRunConfiguration).then(function(){a.context.service.usagemonitoring.report("runner","preview","qunitrunner").done()});o=a.context.i18n.getText("i18n","file_not_found_error_msg",[s.sFilePath,r._metadata.displayName]),a._logAndThrowError(o)}else o=a.context.i18n.getText("i18n","file_null_error_msg",[r._metadata.displayName]),a._logAndThrowError(o)},createDefaultConfiguration:function(e,t,n){var r=this;if(null!=e){var i=[],o=e.getEntity().getFullPath();return r._isHtmlFile(e)?r._buildDefaultConfigObj(o,i):(o=null,r._getUnitTestFiles(e).then(function(e){switch(e.length){case 0:o=null;break;case 1:o=e[0].fullPath;break;default:if(!t)return n?r.context.service.choosefilepopup.getContent(e,n).then(function(e){return e?r.context.service.choosefilepopup.getResult().then(function(e){return r._buildDefaultConfigObj(e,i)}):null}):null}return r._buildDefaultConfigObj(o,i)}))}return null},getConfigurationUi:function(e){var t=this;return{getContent:function(){return"local_hcproxy"===sap.watt.getEnv("server_type")?t._getContentLocal(e):t._getContentExternalInternal(e)}}},_oRunnableFiles:{include:[".*[.]html$"],exclude:["mock_preview_sapui5.html","visual_ext_index.html"]},_aValidations:[{isRegex:!1,rule:".html"}],_getRunParameters:function(e){var t={bPreferWorkspace:"withWorkspace"===e.workspace},n={oAppsVersion:e.appsVersion,oUrlParameters:e.urlParameters,oHashParameter:e.hashParameter,oAppForwarding:t,bIsMock:0===e.dataMode,sUi5Version:e.ui5ActiveVersion,sUi5VerSource:e.ui5VerSource,oSwitchBackendParameter:e.backendSystem},r={bNoFrame:1===e.previewMode,sFilePath:e.filePath,oRunConfiguration:n};return r},_logAndThrowError:function(e){throw this.context.service.log.error("QunitRunner",e,["user"]).done(),new n(e)},_getUnitTestFiles:function(e){var t=this;return t.context.service.filesearchutil.getRunnableFiles(e,t._oRunnableFiles).then(function(e){return t._getRelevantTestFiles(e)})},_buildDefaultConfigObj:function(e,n){return{filePath:e,previewMode:t.displayStates.withoutPreview,dataMode:t.dataStates.withoutMock,ui5ActiveVersion:null,ui5VerSource:null,workspace:"withoutWorkspace",urlParameters:null,backendSystem:n}},_getRelevantTestFiles:function(t){var n=this,r=[];return null!=t&&t.length>0&&e.each(t,function(e){var t=e.name;n._isTestFile(t)===!0&&r.push(e)}),r},_isHtmlFile:function(e){return"file"===e.getType()&&"html"===e.getEntity().getFileExtension()?!0:!1},_aSearchSubstrings:["qunit","testsuite"],_isTestFile:function(e){for(var t=this,n=t._aSearchSubstrings.length,r=0;n>r;r++){var i=t._aSearchSubstrings[r],o=e.search(i);if(-1!==o)return!0}return!1},isConfigurationValid:function(e){var t=!1;if(e&&e.filePath){var n=e.filePath;t=!n||/^\s*$/.test(n)?!1:!0}return t},_isInternal:function(){var e=!1;return"local_hcproxy"!==sap.watt.getEnv("server_type")&&sap.watt.getEnv("internal")===!0&&(e=!0),e},_getContentLocal:function(e){var t=[];t.push(this._getUnitTestFiles(e));var n=this;return Q.all(t).spread(function(t){var r=[];return r.push(n.context.service.runconfig.filepath.getControl(e,t,n._aValidations)),Q.all(r).spread(function(e){var t=new sap.ui.layout.Grid({hSpacing:0,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})});t.addContent(e);var r=[{name:n.context.i18n.getText("i18n","lbl_general"),content:t}];return r})})},_getContentExternalInternal:function(e){var t=[];t.push(this._getUnitTestFiles(e)),t.push(this.context.service.UI5VersionsUtil.getUi5VersionsList(e)),t.push(this.context.service.UI5VersionsUtil.getUI5CurrentVersion(e)),t.push(this.context.service.destinationsutil.getNeoAppDestinations(e)),t.push(this.context.service.destinationsutil.getHcpDestinations());var n=this;return Q.all(t).spread(function(t,r,i,o,a){var s=[];return s.push(n.context.service.runconfig.filepath.getControl(e,t,n._aValidations)),s.push(n.context.service.runconfig.ui5versions.getControl(e,r,i)),s.push(n.context.service.runconfig.destinationmapping.getControl(e,o,a)),s.push(n.context.service.runconfig.resourcemapping.getControl(e)),Q.all(s).spread(function(e,t,r,i){var o=new sap.ui.layout.Grid({hSpacing:0,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})});o.addContent(e);var a=new sap.ui.layout.form.SimpleForm({layout:sap.ui.layout.form.SimpleFormLayout.ResponsiveGridLayout,labelSpanL:1,labelSpanM:1});a.addContent(t),a.addContent(r),a.addContent(i);var s=[{name:n.context.i18n.getText("i18n","lbl_general"),content:o}];return s.push({name:n.context.i18n.getText("i18n","lbl_advanced_setting"),content:a}),s})})}};return r}),define("sap.watt.saptoolsets.fiori.run.fiorirunner/service/FioriRunner",["sap/watt/saptoolsets/fiori/run/plugin/commonrunners/util/configEnum","sap.watt.ideplatform.run/error/ConfigurationError"],function(e,t){"use strict";var n={configure:function(){this.context.service.ushellsandboxpreview.showPreview().fail(function(){}).done(),this.context.service.destinationsutil.getNeoAppDestinations().fail(function(){}).done(),this.context.service.filesearchutil.getRunnableFiles().fail(function(){}).done()},run:function(e,t,n,r,i){var o,a=this,s=this._getRunParameters(r);if(s.oRunConfiguration.sRunnerId="fiorirunner",s.sFilePath)if(i){if(a._isFiori(i))return a._addUsageAnalytics(s),a.context.service.ushellsandboxpreview.showPreview(i,t,s.bNoFrame,s.oRunConfiguration).then(function(){a.context.service.usagemonitoring.report("runner","preview","sandboxrunner").done()});o=a.context.i18n.getText("i18n","file_not_fiori_error_msg"),a._logAndThrowError(o)}else o=a.context.i18n.getText("i18n","file_not_found_error_msg",[s.sFilePath,r._metadata.displayName]),a._logAndThrowError(o);else o=a.context.i18n.getText("i18n","file_null_error_msg",[r._metadata.displayName]),a._logAndThrowError(o)},createDefaultConfiguration:function(t,n,r){var i=[],o=this.context.service;return o.setting.project.get(o.appparams,t).then(function(a){var s;s=a?JSON.parse(JSON.stringify(a)):[];var u=["Component.js"],c=t.getEntity().getName();if(u.indexOf(c)>-1||new RegExp(".*fiorisandboxconfig.*[.]json","i").test(c))return{filePath:t.getEntity().getFullPath(),previewMode:e.displayStates.withoutPreview,dataMode:e.dataStates.withoutMock,workspace:"withoutWorkspace",ui5ActiveVersion:null,ui5VerSource:null,isDefaultVersion:0,urlParameters:s,hashParameter:"",backendSystem:i};var l={include:["Component.js"],exclude:[]};return o.filesearchutil.getRunnableFiles(t,l).then(function(t){var a=null;if(null!==t&&void 0!==t){switch(t.length){case 0:a=null;break;case 1:a=t[0].fullPath;break;default:if(!n)return r?o.choosefilepopup.getContent(t,r).then(function(t){return t?o.choosefilepopup.getResult().then(function(t){return{filePath:t,previewMode:e.displayStates.withoutPreview,dataMode:e.dataStates.withoutMock,workspace:"withoutWorkspace",ui5ActiveVersion:null,ui5VerSource:null,isDefaultVersion:0,urlParameters:s,hashParameter:"",backendSystem:i}}):null}):null}return{filePath:a,previewMode:e.displayStates.withoutPreview,dataMode:e.dataStates.withoutMock,workspace:"withoutWorkspace",ui5ActiveVersion:null,ui5VerSource:null,isDefaultVersion:0,urlParameters:s,urlParametersNotNeeded:!1,hashParameter:"",backendSystem:i}}})})},getConfigurationUi:function(e){var t=this;return{model:new sap.ui.model.json.JSONModel({}),getContent:function(){return"local_hcproxy"===sap.watt.getEnv("server_type")?t._getContentLocal(e):sap.watt.getEnv("internal")?t._getContentInternal(e):t._getContentExternal(e)}}},isConfigurationValid:function(e,t){return this.context.service.inputvalidatorutil.isConfigurationValid(e,t,this._aValidations)},_oRunnableFiles:{include:["Component.js",".*fiorisandboxconfig.*[.]json"],exclude:[]},_aValidations:[{isRegex:!1,rule:"Component.js"},{isRegex:!0,rule:".*fiorisandboxconfig.*[.]json"}],_addUsageAnalytics:function(e){this.context.service.usagemonitoring.report("runner","fiori_sandbox",e.sFilePath.split("/")[1]).done();var t="";t+=e.bNoFrame?"_NoFrame":"_Frame",e.oRunConfiguration.bIsMock&&(t+="_Mock"),e.oRunConfiguration.sUi5Version&&(t+="_ui5Version"),this.context.service.usagemonitoring.report("runner","fiori_sandbox_config",t).done()},_getRunParameters:function(e){var t={bPreferWorkspace:"withWorkspace"===e.workspace},n={oAppsVersion:e.appsVersion,oUrlParameters:e.urlParameters,oHashParameter:e.hashParameter,oAppForwarding:t,bIsMock:0===e.dataMode,sUi5Version:e.ui5ActiveVersion,sUi5VerSource:e.ui5VerSource,oSwitchBackendParameter:e.backendSystem},r={bNoFrame:1===e.previewMode,sFilePath:e.filePath,oRunConfiguration:n};return r},_logAndThrowError:function(e){throw this.context.service.log.error("FioriRunner",e,["user"]).done(),new t(e)},_isFiori:function(e){var t=null,n=null;return e&&(t=e.getEntity().getName(),n=e.getType()),"file"===n&&("Component.js"===t||new RegExp(".*fiorisandboxconfig.*.json","i").test(t))},_getContentLocal:function(e){var t=[];t.push(this.context.service.filesearchutil.getRunnableFiles(e,this._oRunnableFiles));var n=this;return Q.all(t).spread(function(t){var r=[];return r.push(n.context.service.runconfig.filepath.getControl(e,t,n._aValidations)),r.push(n.context.service.runconfig.preview.getControl(e)),r.push(n.context.service.runconfig.withmock.getControl(e)),r.push(n.context.service.runconfig.urlparameters.getControl()),Q.all(r).spread(function(e,t,r,i){return n._buildRunnerUi({oFilePath:e,oPreview:t,oWithMock:r,oURLParameters:i})})})},_getContentExternal:function(e){var t=this._getPreloadServices(e),n=this;return Q.all(t).spread(function(t,r,i,o,a){var s=n._getUiControls(!1,e,t,r,i,o,a);return Q.all(s).spread(function(e,t,r,i,o,a){return n._buildRunnerUi({oFilePath:e,oPreview:t,oURLParameters:r,oUi5Version:i,oDestinationMapping:o,oReuseLibsControl:a})})})},_getContentInternal:function(e){var t=this._getPreloadServices(e),n=this;return Q.all(t).spread(function(t,r,i,o,a){var s=n._getUiControls(!0,e,t,r,i,o,a);return Q.all(s).spread(function(e,t,r,i,o,a,s){return n._buildRunnerUi({oFilePath:e,oPreview:t,oWithMock:r,oURLParameters:i,oUi5Version:o,oDestinationMapping:a,oReuseLibsControl:s})})})},_getPreloadServices:function(e){var t=[];return t.push(this.context.service.filesearchutil.getRunnableFiles(e,this._oRunnableFiles)),t.push(this.context.service.UI5VersionsUtil.getUi5VersionsList(e)),t.push(this.context.service.UI5VersionsUtil.getUI5CurrentVersion(e)),t.push(this.context.service.destinationsutil.getNeoAppDestinations(e)),t.push(this.context.service.destinationsutil.getHcpDestinations()),t},_getUiControls:function(e,t,n,r,i,o,a){var s=[];return s.push(this.context.service.runconfig.filepath.getControl(t,n,this._aValidations)),s.push(this.context.service.runconfig.preview.getControl(t)),e&&s.push(this.context.service.runconfig.withmock.getControl(t)),s.push(this.context.service.runconfig.urlparameters.getControl()),s.push(this.context.service.runconfig.ui5versions.getControl(t,r,i)),s.push(this.context.service.runconfig.destinationmapping.getControl(t,o,a)),s.push(this.context.service.runconfig.resourcemapping.getControl(t)),s},_buildRunnerUi:function(e){var t=new sap.ui.layout.Grid({hSpacing:0,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})});t.addContent(e.oFilePath),t.addContent(e.oPreview),e.oWithMock&&t.addContent(e.oWithMock);var n=[{name:this.context.i18n.getText("i18n","lbl_general"),content:t}],r=new sap.ui.layout.form.SimpleForm({layout:sap.ui.layout.form.SimpleFormLayout.ResponsiveGridLayout,labelSpanL:1,labelSpanM:1});if(r.addContent(e.oURLParameters),n.push({name:this.context.i18n.getText("i18n","lbl_parameters"),content:r}),e.oUi5Version&&e.oDestinationMapping&&e.oReuseLibsControl){var i=new sap.ui.layout.form.SimpleForm({layout:sap.ui.layout.form.SimpleFormLayout.ResponsiveGridLayout,labelSpanL:1,labelSpanM:1});i.addContent(e.oUi5Version),i.addContent(e.oDestinationMapping),i.addContent(e.oReuseLibsControl),n.push({name:this.context.i18n.getText("i18n","lbl_advanced_setting"),content:i})}return n}};return n}),define("sap.watt.saptoolsets.fiori.run.ui5versionsutil/service/UI5VersionsUtil",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{_aUi5Versions:null,getUi5VersionsList:function(e){var t=this;if(null===t._aUi5Versions){var n=t._getUI5Versions();n&&n.length>0&&(t._aUi5Versions=n)}return t._getUI5VersionFromAppDescriptor(e).then(function(e){return e?t._sortOutVersionsBelowAppDescriptorVersion(e,t._aUi5Versions):t._aUi5Versions})},getUI5CurrentVersion:function(e){return this.context.service.appmetadata.getNeoMetadata(e).then(function(e){if(null===e)return void 0;if(null!==e.routes&&void 0!==e.routes)for(var t=0;t<e.routes.length;t++)if(e.routes[t].target.version&&"service"===e.routes[t].target.type&&"sapui5"===e.routes[t].target.name)return e.routes[t].target.version}).fail(function(){return void 0})},_getUI5Versions:function(){var e=this,t=this._getUI5Data("/sapui5versions/neo-app.json");if(sap.watt.getEnv("internal")){var n=e._getUI5Data("/sapui5versionsinternal/neo-app.json");return e._getUI5AllVersions(t,n)}return e._getUI5AllVersions(t)},_getUI5AllVersions:function(e,t){var n=[];return null!==e&&void 0!==e&&this._addUi5versions(e,n,"external"),null!==t&&void 0!==t&&this._addUi5versions(t,n,"internal"),n.sort(this._sortVersions),sap.watt.getEnv("internal")&&n.splice(0,0,{display:"snapshot",value:"snapshot",source:"external"}),n},_addUi5versions:function(e,t,n){var r;if(null!==e.routes&&void 0!==e.routes)for(var i=0;i<e.routes.length;i++)r=this._findDupRecords(t,e,i),-1===r&&t.push({display:e.routes[i].target.version,value:e.routes[i].target.version,source:n})},_findDupRecords:function(t,n,r){return e.findIndex(t,function(e){return e.display===n.routes[r].target.version})},_getUI5Data:function(e){var t;return window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),jQuery.ajax({url:window.location.origin+e,dataType:"json",success:function(e){t=e},async:!1}),t||this.context.service.log.warn("Run Configuration","Error while fetching data for SAPUI5 Verions from "+e,["user"]).done(),t},_sortVersions:function(e,t){for(var n,r=e.value.split("."),i=t.value.split("."),o=0;o<Math.max(r.length,i.length);o++){if(void 0===i[o])return-1;if(void 0===r[o])return 1;if(i[o]=parseInt(i[o],10),r[o]=parseInt(r[o],10),n=i[o]-r[o],0!==n)return n}},_sortOutVersionsBelowAppDescriptorVersion:function(e,t){var n=[];if(e&&t){n.push(t[0]);for(var r=1;r<t.length;r++){for(var i=0,o=0,a=!1,s=t[r].display.split("."),u=e.split("."),c=0;c<u.length;c++){if(i=parseInt(s[c],10),o=parseInt(u[c],10),c===u.length-1&&(a=!0),i>o){a=!0;break}if(i!==o&&o>i){a=!1;break}}a&&n.push(t[r])}return n}return t},_getUI5VersionFromAppDescriptor:function(e){var t=this;return t.context.service.ui5projecthandler.getDependencies(e).then(function(e){return e?e.minUI5Version:void 0}).fail(function(){return void 0})}}}),define("sap.watt.saptoolsets.fiori.run.destinationsutil/service/DestinationsUtil",[],function(){"use strict";return{getHcpDestinations:function(){var e=this;return this.context.service.destination.getDestinations().then(function(t){var n=[];if(null!==t&&0!==t.length)for(var r=0;r<t.length;r++)n.push(t[r].name);return e._sortAndUniqueArray(n)})},getNeoAppDestinations:function(e){var t=this;return this.context.service.appmetadata.getNeoMetadata(e).then(function(e){var n=[];if(null!==e&&0!==e.length&&e.routes.length>0)for(var r=0;r<e.routes.length;r++)"destination"===e.routes[r].target.type&&n.push(e.routes[r].target.name);return t._sortAndUniqueArray(n)})},_sortAndUniqueArray:function(e){if(e.length>0){e=e.sort();for(var t=[e[0]],n=1;n<e.length;n++)e[n-1]!==e[n]&&t.push(e[n]);return t
}return e}}}),define("sap.watt.saptoolsets.fiori.run.reuselibsutil/service/ReuseLibsUtil",[],function(){"use strict";return{getLibsFromHCPandWorkspace:function(e){var t=this,n=[t.context.service.libraryDiscovery.getLibrariesFromHCP()];return e===!0&&n.push(t.context.service.libraryDiscovery.getLibrariesFromWorkspace()),Q.all(n).spread(function(e,t){return{hcp:e,ws:t}})}}}),define("sap.watt.saptoolsets.fiori.run.webapprunner/service/WebAppRunner",["sap/watt/lib/lodash/lodash","sap/watt/saptoolsets/fiori/run/plugin/commonrunners/util/configEnum","sap.watt.ideplatform.run/util/DocumentWindowsUtil","sap.watt.ideplatform.run/error/ConfigurationError"],function(e,t,n,r){"use strict";var i={configure:function(){this.context.service.runnerrunutil.runHtmlFile().fail(function(){}).done(),this.context.service.destinationsutil.getNeoAppDestinations().fail(function(){}).done(),this.context.service.filesearchutil.getRunnableFiles().fail(function(){}).done()},run:function(e,t,n,r,i){var o,a=this,s=this._getRunParameters(r);if(s.sFilePath){if(i)return a._addUsageAnalytics(s),a.context.service.runnerrunutil.runHtmlFile(t,i,s).then(function(){a.context.service.usagemonitoring.report("runner","preview","webapprunner").done()});o=a.context.i18n.getText("i18n","file_not_found_error_msg",[s.sFilePath,r._metadata.displayName]),a._logAndThrowError(o)}else o=a.context.i18n.getText("i18n","file_null_error_msg",[r._metadata.displayName]),a._logAndThrowError(o)},createDefaultConfiguration:function(e,n,r){var i,o=this,a=[],s=this.context.service;return s.setting.project.get(s.appparams).then(function(u){i=u?JSON.parse(JSON.stringify(u)):[];var c=e.getEntity().getFullPath();return o._isHtmlFile(c)?{filePath:c,previewMode:t.displayStates.withoutPreview,dataMode:t.dataStates.withoutMock,workspace:"withoutWorkspace",ui5ActiveVersion:null,ui5VerSource:null,isDefaultVersion:0,urlParameters:i,hashParameter:"",backendSystem:a}:(c=null,s.filesearchutil.getRunnableFiles(e,o._oRunnableFiles).then(function(e){if(null!==e&&void 0!==e){switch(e.length){case 0:c=null;break;case 1:c=e[0].fullPath;break;default:if(!n)return r?s.choosefilepopup.getContent(e,r).then(function(e){return e?s.choosefilepopup.getResult().then(function(e){return{filePath:e,previewMode:t.displayStates.withoutPreview,dataMode:t.dataStates.withoutMock,workspace:"withoutWorkspace",ui5ActiveVersion:null,ui5VerSource:null,isDefaultVersion:0,urlParameters:i,hashParameter:"",backendSystem:a}}):null}):null}return{filePath:c,previewMode:t.displayStates.withoutPreview,dataMode:t.dataStates.withoutMock,workspace:"withoutWorkspace",ui5ActiveVersion:null,ui5VerSource:null,isDefaultVersion:0,urlParameters:i,urlParametersNotNeeded:!1,hashParameter:"",backendSystem:a}}}))})},getConfigurationUi:function(e){var t=this;return{model:new sap.ui.model.json.JSONModel({}),getContent:function(){return"local_hcproxy"===sap.watt.getEnv("server_type")?t._getContentLocal(e):t._getContentExternalInternal(e)}}},isConfigurationValid:function(e,t){return this.context.service.inputvalidatorutil.isConfigurationValid(e,t,this._aValidations)},_oRunnableFiles:{include:[".*[.]html$"],exclude:["mock_preview_sapui5.html","visual_ext_index.html"]},_aValidations:[{isRegex:!1,rule:".html"}],_addUsageAnalytics:function(e){this.context.service.usagemonitoring.report("runner","web_app",e.sFilePath.split("/")[1]).done();var t="";t+=e.bNoFrame?"_NoFrame":"_Frame",e.oRunConfiguration.bIsMock&&(t+="_Mock"),e.oRunConfiguration.sUi5Version&&(t+="_ui5Version"),this.context.service.usagemonitoring.report("runner","web_app_config",t).done()},_getRunParameters:function(e){var t={bPreferWorkspace:"withWorkspace"===e.workspace},n={oAppsVersion:e.appsVersion,oUrlParameters:e.urlParameters,oHashParameter:e.hashParameter,oAppForwarding:t,bIsMock:0===e.dataMode,sUi5Version:e.ui5ActiveVersion,sUi5VerSource:e.ui5VerSource,oSwitchBackendParameter:e.backendSystem},r={bNoFrame:1===e.previewMode,sFilePath:e.filePath,oRunConfiguration:n};return r},_logAndThrowError:function(e){throw this.context.service.log.error("WebAppRunner",e,["user"]).done(),new r(e)},_getContentLocal:function(e){var t=[];t.push(this.context.service.filesearchutil.getRunnableFiles(e,this._oRunnableFiles));var n=this;return Q.all(t).spread(function(t){var r=[];return r.push(n.context.service.runconfig.filepath.getControl(e,t,n._aValidations)),r.push(n.context.service.runconfig.preview.getControl(e)),r.push(n.context.service.runconfig.withmock.getControl(e)),r.push(n.context.service.runconfig.urlparameters.getControl()),Q.all(r).spread(function(e,t,r,i){return n._buildRunnerUi({oFilePath:e,oPreview:t,oWithMock:r,oURLParameters:i})})})},_getContentExternalInternal:function(e){var t=this._getPreloadServices(e),n=this;return Q.all(t).spread(function(t,r,i,o,a){var s=n._getUiControls(e,t,r,i,o,a);return Q.all(s).spread(function(e,t,r,i,o,a,s){return n._buildRunnerUi({oFilePath:e,oPreview:t,oWithMock:r,oURLParameters:i,oUi5Version:o,oDestinationMapping:a,oReuseLibsControl:s})})})},_getPreloadServices:function(e){var t=[];return t.push(this.context.service.filesearchutil.getRunnableFiles(e,this._oRunnableFiles)),t.push(this.context.service.UI5VersionsUtil.getUi5VersionsList(e)),t.push(this.context.service.UI5VersionsUtil.getUI5CurrentVersion(e)),t.push(this.context.service.destinationsutil.getNeoAppDestinations(e)),t.push(this.context.service.destinationsutil.getHcpDestinations()),t},_getUiControls:function(e,t,n,r,i,o){var a=[];return a.push(this.context.service.runconfig.filepath.getControl(e,t,this._aValidations)),a.push(this.context.service.runconfig.preview.getControl(e)),a.push(this.context.service.runconfig.withmock.getControl(e)),a.push(this.context.service.runconfig.urlparameters.getControl()),a.push(this.context.service.runconfig.ui5versions.getControl(e,n,r)),a.push(this.context.service.runconfig.destinationmapping.getControl(e,i,o)),a.push(this.context.service.runconfig.resourcemapping.getControl(e)),a},_buildRunnerUi:function(e){var t=new sap.ui.layout.Grid({hSpacing:0,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12"})});t.addContent(e.oFilePath),t.addContent(e.oPreview),t.addContent(e.oWithMock);var n=[{name:this.context.i18n.getText("i18n","lbl_general"),content:t}],r=new sap.ui.layout.form.SimpleForm({layout:sap.ui.layout.form.SimpleFormLayout.ResponsiveGridLayout,labelSpanL:1,labelSpanM:1});if(r.addContent(e.oURLParameters),n.push({name:this.context.i18n.getText("i18n","lbl_parameters"),content:r}),e.oUi5Version&&e.oDestinationMapping&&e.oReuseLibsControl){var i=new sap.ui.layout.form.SimpleForm({layout:sap.ui.layout.form.SimpleFormLayout.ResponsiveGridLayout,labelSpanL:1,labelSpanM:1});i.addContent(e.oUi5Version),i.addContent(e.oDestinationMapping),i.addContent(e.oReuseLibsControl),n.push({name:this.context.i18n.getText("i18n","lbl_advanced_setting"),content:i})}return n},_isHtmlFile:function(e){var t=e.split(".");return"html"===t[t.length-1]?!0:!1}};return i}),define("sap.watt.saptoolsets.fiori.run.commonrunners/service/RunConfigUiHandler",{_oRunConfigurationUiFragment:null,_sRunnerId:null,_oConfigurationUiElements:null,_projctRunnableFiles:null,_oDocument:null,getContent:function(e,t,n){var r=this;require(["sap/watt/lib/lodash/lodash"],function(e){_=e});var i=e.sRunnerId;return this._projctRunnableFiles=t,this._oDocument=n,this.context.service.ui5versionsdropdown.initDropdown(n).then(function(){return r._oRunConfigurationUiFragment&&r._sRunConfigurationId===i||(r._sRunnerId=i,r._oConfigurationUiElements=e,r._oRunConfigurationUiFragment=sap.ui.jsfragment("sap.watt.saptoolsets.fiori.run.plugin.commonrunners.view.RunConfigUi",r)),r.context.i18n.applyTo(r._oRunConfigurationUiFragment),r.context.service.errorhandler.subscribe(r._oRunConfigurationUiFragment).then(function(){return r._oRunConfigurationUiFragment})})},updateCB:function(e,t,n,r){var i=e.getSource().getModel();i.setProperty(t,n?r[0]:r[1])},configure:function(e){e.styles&&this.context.service.resource.includeStyles(e.styles).done()},setOption:function(e,t){var n=["withoutWorkspace","withWorkspace"],r=e.getSource(),i=r.getModel();i.setProperty("/workspace",n[t])},checkFileVisible:function(e){var t=!1;return void 0!==e&&null!==e&&(jQuery.sap.endsWith(e,"Component.js")||new RegExp(".*fiorisandboxconfig.*[.]json","i").test(e))&&(t=!0),t},getSuggestItemes:function(){return this._projctRunnableFiles},getFocusElement:function(){},getTitle:function(){},getTooltip:function(){},setVisible:function(){},isVisible:function(){},onAfterBackendDropDownRendering:function(e){var t=this,n=e.srcControl,r=n.getModel(),i=[];return t.context.service.destination.getDestinations().then(function(o){i=t._createOneDestinationList(o,i);var a=[];jQuery.each(i,function(e,t){-1===jQuery.inArray(t,a)&&a.push(t)});var s=r.getProperty("/backendSystem"),u=e.srcControl.getBindingContext().getPath();u=u.slice(15);var c=new sap.ui.core.ListItem;n.addItem(c);for(var l=0;l<a.length;l++)c=new sap.ui.core.ListItem({key:a[l],text:a[l]}),n.addItem(c);n.setValue(s[u].destinations)})},onBackendChange:function(e){var t=e.getSource(),n=t.getModel(),r=n.getProperty("/backendSystem"),i=e.getSource().getBindingContext().sPath;i=i.slice(15),r[i].destinations=e.mParameters.newValue,n.setProperty("/backendSystem",r)},onUI5VersionChange:function(e){var t=e.getSource(),n=t.getModel();this.context.service.ui5versionsdropdown.updateModel(n,t.getValue()).done()},onAfterRBGRendering:function(e){var t=e.srcControl,n=t.getModel(),r=n.getProperty("/isDefaultVersion");0===r?t.setSelectedIndex(0):t.setSelectedIndex(1)},onAfterDropDownRendering:function(e){var t=e.srcControl,n=t.getModel(),r=n.getProperty("/isDefaultVersion");1===r?this.context.service.ui5versionsdropdown.handleDropDownVersions(this._oDocument,t).done():t.setBusy(!1)},onRadioButtonSelection:function(e,t){var n=e.getModel(),r=e.getSelectedIndex();if(1===r)this.context.service.ui5versionsdropdown.handleDropDownVersions(this._oDocument,t).done();else{var i=this;this.context.service.ui5versionsdropdown.clearDropdown().then(function(){t.removeAllItems(),t.setEnabled(!1),i.context.service.ui5versionsdropdown.updateModel(n,null).done()})}n.setProperty("/isDefaultVersion",r)},onLibVersionChange:function(e){var t=e.getSource(),n=t.getModel();n.setProperty(t.getBindingContext().getPath()+"/libraryVersion",t.getSelectedKey())},getLibVersions:function(){var e=this,t=[];return e.context.service.neoapp.getAppllications(e._oDocument).then(function(n){if(n.length>0){var r,i=[e.context.service.libraryDiscovery.getLibrariesFromHCP()];if(null!==e._oRunConfigurationUiFragment&&(r=e._oRunConfigurationUiFragment.getModel()),void 0!==r){var o=r.getProperty("/workspace/");"withWorkspace"===o&&i.push(e.context.service.libraryDiscovery.getLibrariesFromWorkspace())}return Q.all(i).spread(function(r,i){for(var o in n){var a=_.find(i,{externalName:n[o].name}),s=_.find(r,{externalName:n[o].name});if(void 0!==s&&void 0===a){var u,c,l=[{version:"Active",details:"Active"}];for(var p in s.versions)if(void 0!==s.versions[p].version){var f=s.versions[p].version;s.versions[p].isActive&&(u=s.versions[p].version),n[o].version===s.versions[p].version&&(c=s.versions[p].version),l.push({version:s.versions[p].version,details:f})}var d=void 0===n[o].version?"Active":n[o].version;t.push({libraryName:n[o].name,versions:l,activeVersion:u,neoappVersion:c,libraryVersion:d,detailVersion:d})}else t.push({libraryName:n[o].name,versions:[{version:"Workspace",details:"Version from Workspace"}]})}if(null!==e._oRunConfigurationUiFragment){var h=e._oRunConfigurationUiFragment.getModel();if(void 0!==h){var m=h.getProperty("/appsVersion/");if(void 0!==m)for(var g=0;g<m.length;g++)if(void 0!==m[g].libraryVersion){var v=_.find(t,{libraryName:m[g].libraryName});void 0!==v&&void 0!==v.libraryVersion&&(m[g].libraryVersion=v.libraryVersion)}}}return t})}return t})},validatePathInput:function(e){var t=this;switch(t._sRunnerId){case"webapprunner":return t.context.service.inputvalidatorutil.validatePath(e,t._oDocument,[{isRegex:!1,rule:".html"}]);case"fiorirunner":return t.context.service.inputvalidatorutil.validatePath(e,t._oDocument,[{isRegex:!1,rule:"Component.js"},{isRegex:!0,rule:".*fiorisandboxconfig.*[.]json"}]);case"qunitrunner":return t.context.service.inputvalidatorutil.validatePath(e,t._oDocument,[{isRegex:!1,rule:".html"}]);case"chewebapprunner":return t.context.service.inputvalidatorutil.validatePath(e,t._oDocument,[{isRegex:!1,rule:".html"}]);default:return!0}},onPathFieldChange:function(e){var t=this;t._validatePathFieldChange(e).then(function(e){return t.context.service.errorhandler.update(e)}).done()},onAfterPathFieldRendering:function(e){var t=this;t._validateAfterPathFieldRendering(e).then(function(e){return t.context.service.errorhandler.update(e)}).done()},onAfterParamNameRendering:function(e){var t=this;t._validateAfterParamNameRendering(e).then(function(e){return t.context.service.errorhandler.update(e)}).done()},onResourceMappingChange:function(e){var t=this,n=e.getSource(),r=n.getChecked();t.setOption(e,r===!1?0:1)},_createControlData:function(e,t,n,r,i){var o={oControl:e,sControlId:t,isControlValid:n,sInvalidMessage:r,sValidMessage:i};return o},_validateAfterPathFieldRendering:function(e){var t=this,n=e.srcControl,r=n.getModel(),i=r.getData(),o=i.filePath;return t.validatePathInput(o).then(function(e){return t._createControlData(n,n.getId(),e.isValid,e.message,o)})},_createOneDestinationList:function(e,t){if(null!==e&&0!==e.length)for(var n=0;n<e.length;n++)t.push(e[n].name);return t},_validatePathFieldChange:function(e){var t=this,n="",r=e.getSource(),i=e.getParameter("selectedItem");n=null!=i?i.getKey():r.getValue();var o=n.split("/");return t._oDocument.getProject().then(function(e){var i=e.getEntity().getName(),a=_.indexOf(o,i);return-1===a&&""===o[0]&&(n="/"+i+n),t.validatePathInput(n).then(function(e){var i=r.getModel(),o=i.getData();return o.filePath=n,r.setValue(n),i.setData(o),t._createControlData(r,r.getId(),e.isValid,e.message,n)})})}}),define("sap.watt.saptoolsets.fiori.run.commonrunners/service/RunnerRunUtil",["sap/watt/saptoolsets/fiori/run/plugin/commonrunners/util/configEnum"],function(e){"use strict";var t={configure:function(){this.context.service.preview.showPreview().fail(function(){}).done(),this.context.service.mockpreview.getRunnableMockSettings().fail(function(){}).done()},readConfigurationFile:function(t){var n=!1;t.dataMode===e.dataStates.withMock&&(n=!0);var r=!0;t.previewMode===e.displayStates.withPreview&&(r=!1);var i=!1;"withWorkspace"===t.workspace&&(i=!0);var o={bPreferWorkspace:i},a=t.filePath,s=t.urlParameters,u=t.hashParameter,c=t.ui5ActiveVersion,l=t.ui5VerSource,p=t.backendSystem,f=t.appsVersion,d={oAppsVersion:f,oUrlParameters:s,oHashParameter:u,oAppForwarding:o,bIsMock:n,sUi5Version:c,sUi5VerSource:l,oSwitchBackendParameter:p},h={bNoFrame:r,sFilePath:a,oRunConfiguration:d};return h},onRunError:function(e,t){e&&e.close(),this.context.service.usernotification.alert(t).done()},runHtmlFile:function(e,t,n){var r=this,i=t;if(n.oRunConfiguration.bIsMock){var o=this.context.service.mockpreview;return this.context.service.setting.project.get(o).then(function(t){return o.getRunnableMockSettings(i,t).then(function(t){return o.buildRunnableDocument(t,i,e).then(function(t){return r.context.service.preview.showPreview(t,e,n.bNoFrame,null,n.oRunConfiguration)})})})}return r.context.service.preview.showPreview(i,e,n.bNoFrame,null,n.oRunConfiguration)}};return t}),define("sap.watt.saptoolsets.fiori.run.commonrunners/service/InputValidatorUtil",{validatePath:function(e,t,n){var r=this,i={isValid:!0,message:""};return!e||/^\s*$/.test(e)?(i.isValid=!1,i.message=r.context.i18n.getText("msg_file_path_empty"),Q(i)):(i.isValid=!0,i.isValid?t.getProject().then(function(t){return r.context.service.filesystem.documentProvider.getDocument(e).then(function(o){var a=t.getEntity().getName(),s=e.split("/"),u=s[1];return o?a===u?r._checkPathWithRegexRule(n,e):(i.isValid=!1,i.message=r.context.i18n.getText("msg_file_path_doc"),i):a!==u?(e="/"+a+e,r.context.service.filesystem.documentProvider.getDocument(e).then(function(t){return t?r._checkPathWithRegexRule(n,e):(i.isValid=!1,i.message=r.context.i18n.getText("msg_file_path_not_exist"),i)})):(i.isValid=!1,i.message=r.context.i18n.getText("msg_file_path_not_exist"),i)}).fail(function(){return i.isValid=!1,i.message=r.context.i18n.getText("msg_file_path_not_exist"),i})}):Q(i))},validateUrlParameter:function(e){var t={isValid:!0,message:""};return!e||/^\s*$/.test(e)?(t.isValid=!1,t.message=this.context.i18n.getText("msg_appl_param_empty"),t):(t.isValid=!0,t)},isConfigurationValid:function(e,t,n){return e&&e.filePath?this.validatePath(e.filePath,t,n).then(function(t){if(t.isValid){var n=!0;if(e.urlParameters)for(var r=0;r<e.urlParameters.length;r++){var i=e.urlParameters[r];if(/^\s*$/.test(i.paramName)&&!/^\s*$/.test(i.paramValue)&&i.paramActive){n=!1;break}}return n}return!1}):!1},_checkPathWithRegexRule:function(e,t){for(var n=this,r={isValid:!0,message:""},i=0;i<e.length;i++){var o=e[i];if(o.isRegex){if(new RegExp(o.rule,"i").test(t)){r.isValid=!0;break}r.isValid=!1,r.message=n.context.i18n.getText("msg_file_path_type")}else{if(jQuery.sap.endsWith(t,o.rule)){r.isValid=!0;break}r.isValid=!1,r.message=n.context.i18n.getText("msg_file_path_type")}}return r}}),define("sap.watt.saptoolsets.fiori.run.commonrunners/service/UI5Versions",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{getUI5Versions:function(){var e=this,t=this._getUI5Data("/sapui5versions/neo-app.json");if(sap.watt.getEnv("internal")){var n=e._getUI5Data("/sapui5versionsinternal/neo-app.json");return e._getUI5Versions(t,n)}return e._getUI5Versions(t)},getUI5CurrentVersion:function(e){return this.context.service.appmetadata.getNeoMetadata(e).then(function(e){if(null!==e&&null!==e.routes&&void 0!==e.routes)for(var t=0;t<e.routes.length;t++)if(e.routes[t].target.version&&"service"===e.routes[t].target.type&&"sapui5"===e.routes[t].target.name)return e.routes[t].target.version;try{return sap.ui.getVersionInfo().version}catch(n){return void 0}}).fail(function(){return void 0})},_getUI5Versions:function(e,t){var n=[];return null!==e&&void 0!==e&&this._addUi5versions(e,n,"external"),null!==t&&void 0!==t&&this._addUi5versions(t,n,"internal"),n.sort(this._sortVersions),sap.watt.getEnv("internal")&&n.splice(0,0,{display:"snapshot",value:"snapshot",source:"external"}),n},_addUi5versions:function(e,t,n){var r;if(null!==e.routes&&void 0!==e.routes)for(var i=0;i<e.routes.length;i++)r=this._findDupRecords(t,e,i),-1===r&&t.push({display:e.routes[i].target.version,value:e.routes[i].target.version,source:n})},_findDupRecords:function(t,n,r){return e.findIndex(t,function(e){return e.display===n.routes[r].target.version})},_getUI5Data:function(e){var t;return window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),jQuery.ajax({url:window.location.origin+e,dataType:"json",success:function(e){t=e},async:!1}),t||this.context.service.log.warn("Run Configuration","Error while fetching data for SAPUI5 Verions from "+e,["user"]).done(),t},_sortVersions:function(e,t){for(var n,r=e.value.split("."),i=t.value.split("."),o=0;o<Math.max(r.length,i.length);o++){if(void 0===i[o])return-1;if(void 0===r[o])return 1;if(i[o]=parseInt(i[o],10),r[o]=parseInt(r[o],10),n=i[o]-r[o],0!==n)return n}},sortOutVersionsBelowAppDescriptorVersion:function(e,t){var n=[];if(e&&t){n.push(t[0]);for(var r=1;r<t.length;r++){for(var i=0,o=0,a=!1,s=t[r].display.split("."),u=e.split("."),c=0;c<u.length;c++){if(i=parseInt(s[c],10),o=parseInt(u[c],10),c===u.length-1&&(a=!0),i>o){a=!0;break}if(i!==o&&o>i){a=!1;break}}a&&n.push(t[r])}return n}return t},getUI5VersionFromAppDescriptor:function(e){var t=this;return t.context.service.ui5projecthandler.getDependencies(e).then(function(e){return e?e.minUI5Version:void 0}).fail(function(){return void 0})}}}),define("sap.watt.saptoolsets.fiori.run.commonrunners/service/RunConfigErrorHandler",{_aErrorFields:null,_oRunConfigurationUiFragment:null,subscribe:function(e){this._oRunConfigurationUiFragment=e,this._aErrorFields=[]},update:function(e){this._updateStack(e.sControlId,e.isControlValid),e.isControlValid?this._switchToValidUi(e.oControl,e.sValidMessage):this._switchToInvalidUi(e.oControl,e.sInvalidMessage,e.bDisplayRtt),this._fireEvent()},_switchToInvalidUi:function(e,t,n){e.hasStyleClass("inputError")||(e.removeStyleClass("inputConfirmed"),e.addStyleClass("inputError"),("undefined"==typeof n||n===!0)&&this._addRichToolTip(e,t))},_switchToValidUi:function(e,t){e.hasStyleClass("inputError")&&(e.removeStyleClass("inputError"),e.addStyleClass("inputConfirmed"),setTimeout(function(){e.removeStyleClass("inputConfirmed")},3e3),e.setTooltip(t))},_fireEvent:function(){this._oRunConfigurationUiFragment.fireEvent("ConfigurationValidationEvent",{isValid:0===this._aErrorFields.length})},_updateStack:function(e,t){var n=this._hasError(e);n&&t&&this._removeError(e),n||t||this._aErrorFields.push(e)},_removeError:function(e){this._aErrorFields=jQuery.grep(this._aErrorFields,function(t){return""+t!=""+e})},_hasError:function(e){for(var t=0;t<this._aErrorFields.length;t++)if(this._aErrorFields[t]===e)return!0;return!1},_addRichToolTip:function(e,t){var n=new sap.ui.commons.RichTooltip({text:t,myPosition:"begin bottom",atPosition:"begin top",title:"{i18n>lbl_error}"}).addStyleClass("runConfigRtt");e.setTooltip(n)}}),define("sap.watt.saptoolsets.fiori.run.commonrunners/service/Ui5VersionsDropdown",["sap/watt/lib/lodash/lodash"],function(e){"use strict";return{_neoappUi5Version:null,_isUi5VersionsLoaded:null,_aUi5Versions:null,initDropdown:function(e){var t=this;return this._isUi5VersionsLoaded=!1,this._getNeoappVersion(e).then(function(e){t._neoappUi5Version=e})},getUi5VersionsList:function(e){var t=this;return null===t._aUi5Versions&&this._getUi5Versions().then(function(e){t._aUi5Versions=e}).done(),t.context.service.ui5versions.getUI5VersionFromAppDescriptor(e).then(function(e){return e?t.context.service.ui5versions.sortOutVersionsBelowAppDescriptorVersion(e,t._aUi5Versions):t._aUi5Versions})},handleDropDownVersions:function(e,t){var n=this;t.setBusy(!0),t.setEnabled(!0),null===this._aUi5Versions&&this._getUi5Versions().then(function(e){n._aUi5Versions=e}).done(),this.context.service.ui5versions.getUI5VersionFromAppDescriptor(e).then(function(e){return e?n.context.service.ui5versions.sortOutVersionsBelowAppDescriptorVersion(e,n._aUi5Versions).then(function(e){return n._fillDropDownVersions(t,e)}):n._fillDropDownVersions(t,n._aUi5Versions)}).done(function(){t.setBusy(!1)})},_fillDropDownVersions:function(t,n){var r=t.getModel();if(!this._isUi5VersionsLoaded){this._isUi5VersionsLoaded=!0;var i=r.getProperty("/ui5ActiveVersion");null===i&&(i=e.findIndex(n,"value",this._neoappUi5Version)>=0?this._neoappUi5Version:n[0].value,this.updateModel(r,i));for(var o=0;o<n.length;o++){var a=new sap.ui.core.ListItem({key:n[o].value,text:n[o].display});t.addItem(a)}t.setValue(i)}},clearDropdown:function(){this._isUi5VersionsLoaded=!1},updateModel:function(e,t){e.setProperty("/ui5ActiveVersion",t),e.setProperty("/ui5VerSource",this._getUi5VersionSource(t,this._aUi5Versions))},_getUi5Versions:function(e){return this.context.service.ui5versions.getUI5Versions(e).then(function(e){return e})},_getUi5VersionSource:function(e,t){var n=$.grep(t,function(t){return t.value===e});return n.length>0?n[0].source:null},_getNeoappVersion:function(e){return this.context.service.ui5versions.getUI5CurrentVersion(e).then(function(e){return e})}}}),define("sap.watt.saptoolsets.fiori.run.commonrunners/service/SwitchBackends",[],function(){"use strict";return{configure:function(){this._preloadServices()},_preloadServices:function(){this.context.service.appmetadata.getNeoMetadata().fail(function(){}).done()},getBackendsInfo:function(e){var t=this;return t.context.service.appmetadata.getNeoMetadata(e).then(function(e){var n,r=[],i={aBackendSystems:[]};if(null!==e&&0!==e.length){if(e.routes.length>0)for(var o=0;o<e.routes.length;o++)"destination"===e.routes[o].target.type&&(n={source:e.routes[o].target.name,destinations:e.routes[o].target.name},r.push(n));i.aBackendSystems=t._checkDuplicates(r)}return i})},getExistingRunnersBackendsInfo:function(e,t){var n=this;return n.context.service.switchbackends.getBackendsInfo(e).then(function(e){var n=e.aBackendSystems;if(n)if(t.backendSystem){for(var r=0;r<n.length;r++)for(var i=0;i<t.backendSystem.length;i++)if(n[r].source===t.backendSystem[i].source){n[r].destinations=t.backendSystem[i].destinations;break}t.backendSystem=n}else t.backendSystem=n;else t.backendSystem=[];return t})},getChangedBackends:function(e){var t="";if(e.oSwitchBackendParameter)for(var n=0;n<e.oSwitchBackendParameter.length;n++)""!==e.oSwitchBackendParameter[n].destinations&&e.oSwitchBackendParameter[n].source!==e.oSwitchBackendParameter[n].destinations&&(t+=e.oSwitchBackendParameter[n].destinations);return t},_checkDuplicates:function(e){for(var t=[],n=!1,r=0;r<e.length;++r){n=!1;for(var i=0;i<t.length;++i)if(e[r].source===t[i].source){n=!0;break}n||t.push(e[r])}return t}}}),define("sap.watt.saptoolsets.fiori.run.embeddedrunner/service/EmbeddedRunner",["sap.watt.ideplatform.run/error/ConfigurationError"],function(e){"use strict";var t={_oConstants:{EMBEDDED_FOLDER_NAME:".proxy",README_FILE_NAME:"readme.txt",NEOAPP_FILE_NAME:"neo-app.json",SRC_ENTRY_PATH:"src/main/webapp",WEBAPP_ENTRY_PATH:"webapp",REUSELIB_PROJECT_TYPE:"com.watt.uitools.plugin.reuselibrary"},_aRoutes:[],run:function(t,n,r,i,o){var a=this,s=a.context.service.ushellpreview,u=[];return a._aRoutes=[],i.flpAppName=i.flpAppName.toLowerCase(),"HCP"===i.emdType?s.showPreviewEmbeddedFlp(o,n,i):(jQuery.each(i.workspaceApplications,function(e,t){var n=a._handleProjectJsonFile(t.localPath).then(function(e){return e.sBspName=t.bspName.toLowerCase(),a._appendWorkspaceAppRoutes(e)});u.push(n)}),Q.all(u).then(function(){return a._handleProjectJsonFile(i.filePath).then(function(e){return a._handleNeoAppFile(i,e.sLocalAppName).then(function(e){return a._generateReadMeFile(e).then(function(){return a.context.service.usagemonitoring.report("runner","embedded","true").done(),s.showPreviewEmbedded(e,n,i).then(function(){a.context.service.usagemonitoring.report("runner","preview","embeddedrunner").done()})})})})}).fail(function(t){this.context.service.log.error("EmbeddedModeRunner",t.message,["user"]).done();var n=a.context.i18n.getText("i18n","config_error_msg");throw new e(n)}))},_generateReadMeFile:function(e){var t=this;return e.touch(t._oConstants.README_FILE_NAME).then(function(e){var n=t.context.i18n.getText("i18n","embedded_readme_content");return e.setContent(n).then(function(){return e.save()})})},_handleProjectJsonFile:function(e){var t=this,n=t.context.service.filesystem.documentProvider;return n.getDocument(e).then(function(e){return e?t._generateHcpdeployBlock(e).then(function(n){return t._handleSuffix(e,n)}):void 0})},_generateHcpdeployBlock:function(e){var t=this,n=this.context.service.filesystem.documentProvider,r=t.context.service.system,i=t.context.service.setting.project,o="hcpdeploy";return r.getSystemInfo().then(function(r){return i.getProjectSettings(o,e).then(function(a){return a&&a.entryPath?t._addHcpdeployBlock(a,a.entryPath,e,r,r,i,o):e.getProject().then(function(s){var u=s.getEntity().getFullPath(),c=u+"/src/main/webapp";return n.getDocument(c).then(function(s){return s?t._addHcpdeployBlock(a,t._oConstants.SRC_ENTRY_PATH,e,r,i,o):(c=u+"/webapp",n.getDocument(c).then(function(n){return n?t._addHcpdeployBlock(a,t._oConstants.WEBAPP_ENTRY_PATH,e,r,i,o):t._addHcpdeployBlock(a,"",e,r,i,o)}))})})})})},_addHcpdeployBlock:function(e,t,n,r,i,o){var a={};if(a.sLocalAppName=e?e.name:n.getEntity().getFullPath().split("/")[1].replace(/\./g,"").toLowerCase(),a.sEntryPath=t,a.sAccount=e?e.account:r.sAccount,a.sSuffix="",!e){var s={account:a.sAccount,name:a.sLocalAppName,lastVersionWeTriedToDeploy:"1",entryPath:a.sEntryPath};return i.setProjectSettings(o,s,n).then(function(){return a})}return a},_handleSuffix:function(e,t){var n=this,r=n.context.service.setting.project,i="projectType";return r.getProjectSettings(i,e).then(function(e){if(e)for(var r=0;r<e.length;r++){var i=e[r];if(i===n._oConstants.REUSELIB_PROJECT_TYPE){t.sSuffix="/library-preload.json";break}}return t})},_handleNeoAppFile:function(e,t){var n=this,r=e.filePath,i=n.context.service.neoapp,o=n.context.service.filesystem.documentProvider;return o.getDocument(r).then(function(r){return i.getNeoappDocumentAndContent(r).spread(function(r,i){var o=i.routes;n._removeSAProutes(o);var a={aDestinations:o,sFlpAppName:e.flpAppName,sFlpDestName:e.flpDestName,sLocalAppName:t};n._appendOriginAppRoutes(a);var s={};return s.routes=n._aRoutes.concat(o),s.headerWhiteList=["X-UI5-Component"],n._getEmbeddedFolder().then(function(e){return e.touch(n._oConstants.NEOAPP_FILE_NAME).then(function(t){var r=JSON.stringify(s);return n.context.service.beautifier.beautify(r).then(function(n){return t.setContent(n).then(function(){return t.save().then(function(){return e})})})})})})})},_removeSAProutes:function(e){for(var t=0;t<e.length;t++)0===e[t].path.indexOf("/sap")&&e.splice(t,1)},_appendWorkspaceAppRoutes:function(e){e.sSuffix&&this._aRoutes.push({path:"/sap/bc/ui5_ui5/sap/"+e.sBspName+e.sSuffix,target:{type:"destination",name:""}}),this._aRoutes.push({path:"/sap/bc/ui5_ui5/sap/"+e.sBspName,target:{type:"application",name:e.sLocalAppName},description:"Route to application in local workspace"})},_appendOriginAppRoutes:function(e){e.aDestinations.push({path:"/sap/bc/ui5_ui5/sap/"+e.sFlpAppName,target:{type:"application",name:e.sLocalAppName},description:"Route to application in local workspace"}),e.aDestinations.push({path:"/sap",target:{type:"destination",name:e.sFlpDestName,entryPath:"/sap"}})},_getEmbeddedFolder:function(){var e=this,t=this.context.service.filesystem.documentProvider;return t.getDocument("/"+e._oConstants.EMBEDDED_FOLDER_NAME).then(function(n){return n?n:t.getDocument("/").then(function(t){return t.createFolder(e._oConstants.EMBEDDED_FOLDER_NAME)})})},_createEmptyUrlParamModel:function(){return[{paramName:"",paramValue:"",paramActive:!1},{paramName:"",paramValue:"",paramActive:!1}]},createDefaultConfiguration:function(e){var t=this,n=this.context.service.embeddedrunnerutil;return n.getDefaultAppName(e).then(function(r){return n.getDefaultDestName(e).then(function(n){return t.context.service.system.getSystemInfo().then(function(t){return{flpAppName:r,flpDestName:n,hcpAccount:t.sAccount,flpName:"",hcpProvider:"",emdType:"ABAP",filePath:e.getEntity().getFullPath(),workspaceApplications:[],oUrlParameters:[],urlParametersNotNeeded:!1,oHashParameter:""}})})})},getConfigurationUi:function(e){var t=this;return{model:new sap.ui.model.json.JSONModel({}),getContent:function(){var n;return n={sRunnerId:"embeddedrunner",iSAPFioriLaunchpadSection:1},t.context.service.embeddedrunnerconfigui.getContent(n,null,e).then(function(r){var i=[{name:t.context.i18n.getText("i18n","lbl_general"),content:r}];return t.context.service.runconfig.urlparameters.getControl().then(function(r){var o=new sap.ui.layout.form.SimpleForm({layout:sap.ui.layout.form.SimpleFormLayout.ResponsiveGridLayout,labelSpanL:1,labelSpanM:1});return o.addContent(r),i.push({name:t.context.i18n.getText("i18n","lbl_parameters"),content:o}),n={sRunnerId:"embeddedrunner",iAdditionalApplicationsFromWsSection:1},t.context.service.embeddedrunnerconfigui.getContent(n,null,e).then(function(e){return i.push({name:t.context.i18n.getText("i18n","lbl_advanced_setting"),content:e}),i})})})},setConfiguration:function(e){if(e.workspaceApplications||(e.workspaceApplications=[]),e.oUrlParameters&&0!==e.oUrlParameters.length){for(var n=!1,r=0;r<e.oUrlParameters.length;r++){var i=e.oUrlParameters[r];/^\s*$/.test(i.paramName)&&/^\s*$/.test(i.paramValue)&&i.paramActive?i.paramActive=!1:/^\s*$/.test(i.paramName)&&!/^\s*$/.test(i.paramValue)&&i.paramActive&&(n=!0)
}n&&(e.oUrlParameters=e.oUrlParameters.filter(function(e){return/^\s*$/.test(e.paramName)&&/^\s*$/.test(e.paramValue)?!1:!0}))}else e.oUrlParameters=t._createEmptyUrlParamModel();this.model.setData(e)},getConfiguration:function(){var e=this.model.getProperty("/oUrlParameters");if(e){var t=e.filter(function(e){return e.paramName});this.model.setProperty("/oUrlParameters",t)}return this.model.getData()}}},isConfigurationValid:function(e){if(e){if(e.workspaceApplications)for(var t=0;t<e.workspaceApplications.length;t++){var n=e.workspaceApplications[t];if(""===n.localPath||""===n.bspName)return!1}return!!e.flpDestName&&""!==e.flpDestName&&""!==e.flpAppName}return!1}};return t}),define("sap.watt.saptoolsets.fiori.run.embeddedrunner/service/EmbeddedRunnerUiHandler",{_oRunConfigurationUiFragment:null,_sRunnerId:null,_oConfigurationUiElements:null,_projctRunnableFiles:null,_oDocument:null,_aSubscriptions:null,_aDestinations:null,_sHcpAccount:null,_sHcpUsername:null,_sHcpPassword:null,getContent:function(e,t,n){var r=this,i=e.sRunnerId;return this._projctRunnableFiles=t,this._oDocument=n,r._oRunConfigurationUiFragment&&this._sRunConfigurationId===i||(r._sRunnerId=i,r._oConfigurationUiElements=e,r._oRunConfigurationUiFragment=sap.ui.jsfragment("sap.watt.saptoolsets.fiori.run.plugin.embeddedrunner.view.EmbeddedRunnerUi",r)),this.context.i18n.applyTo(this._oRunConfigurationUiFragment),r.context.service.runconfigerrorhandler.subscribe(this._oRunConfigurationUiFragment).then(function(){return r._oRunConfigurationUiFragment})},getFocusElement:function(){},getTitle:function(){},getTooltip:function(){},setVisible:function(){},isVisible:function(){},createAdditionalWsAppLine:function(e){var t=e.getModel(),n=t.getProperty("/workspaceApplications");n.push({localPath:"",bspName:""}),t.setProperty("/workspaceApplications",n)},deleteAdditionalWsAppLine:function(e){for(var t=this,n=e.getParent().getParent().getContent(),r=[],i=t.context.service.runconfigerrorhandler,o=0;o<n.length;o++){var a=n[o].getContent(),s=a[0],u=a[1],c=t._createControlData(s,!0,"","",s.getId()),l=t._createControlData(u,!0,"","",u.getId());r.push(i.update(l),i.update(c))}Q.all(r).then(function(){var t=e.getBindingContext().sPath,n=t.split("/"),r=n[n.length-1],i=e.getBindingContext().getModel(),o=i.getProperty("/workspaceApplications");o.splice(r,1),i.setProperty("/workspaceApplications",o)})},deleteParameterLine:function(e){for(var t=this,n=e.getParent().getParent().getContent(),r=[],i=t.context.service.runconfigerrorhandler,o=0;o<n.length;o++){var a=n[o].getContent(),s=a[1],u=t._createControlData(s,!0,"","",n[o].getId());r.push(i.update(u))}Q.all(r).then(function(){var t=e.getBindingContext().sPath,n=t.split("/"),r=n[n.length-1],i=e.getBindingContext().getModel(),o=i.getProperty("/oUrlParameters");o.splice(r,1),i.setProperty("/oUrlParameters",o)})},onParamNameChange:function(e){var t=this;t._validateParamNameChange(e).then(function(e){return t.context.service.runconfigerrorhandler.update(e)}).done()},onCheckBoxChange:function(e){var t=this;t._validateCheckBoxChange(e).then(function(e){return t.context.service.runconfigerrorhandler.update(e)}).done()},createNewParameterLine:function(){var e=this.getModel(),t=e.getProperty("/oUrlParameters");t.push({paramName:"",paramValue:"",paramActive:!1}),e.setProperty("/oUrlParameters",t)},onAfterWorkspaceAppsDropDownRendering:function(e){var t=this,n=e.srcControl;t._onAfterWorkspaceAppsDropDownRendering(n).then(function(e){return t.context.service.runconfigerrorhandler.update(e)}).done()},_onAfterWorkspaceAppsDropDownRendering:function(e){var t=this;return t._fillWorkspaceAppsDropDown(e).then(function(){var n=e.getSelectedKey();return t._createControlData(e,""!==n,"plh_run_config_ui_embmode_wsapps_projname","tlt_run_config_ui_embmode_wsapps_projname",e.getId(),!1)})},onWorkspaceAppsDropDownChange:function(e){var t=this,n=e.getSource();t._onWorkspaceAppsDropDownChange(n).then(function(e){return t.context.service.runconfigerrorhandler.update(e).then(function(){return t._getDefaultAppName(n).then(function(e){return t.context.service.runconfigerrorhandler.update(e)})})}).done()},_onWorkspaceAppsDropDownChange:function(e){var t=e.getSelectedKey();return Q(this._createControlData(e,""!==t,"plh_run_config_ui_embmode_wsapps_projname","tlt_run_config_ui_embmode_wsapps_projname",e.getId(),!1))},validateParameterNameInput:function(e){return this.context.service.inputvalidatorutil.validateUrlParameter(e)},onAfterWorkspaceAppTextFieldRendering:function(e){var t=this,n=e.srcControl;t._onAfterWorkspaceAppTextFieldRendering(n).then(function(e){return t.context.service.runconfigerrorhandler.update(e)}).done()},_onAfterWorkspaceAppTextFieldRendering:function(e){var t=e.getValue();return Q(this._createControlData(e,""!==t,"plh_run_config_ui_embmode_app_name","tlt_run_config_ui_embmode_app_name",e.getId()))},onWorkspaceAppTextFieldChange:function(e){var t=this,n=e.getSource();t._onWorkspaceAppTextFieldChange(n).then(function(e){return t.context.service.runconfigerrorhandler.update(e)}).done()},onRadioSelect:function(e){var t;t=0===e.getParameters().selectedIndex?"ABAP":"HCP";var n=e.getSource().getModel();n.setProperty("/emdType",t)},isAbapFieldVisible:function(e){return e&&"ABAP"!==e?!1:!0},isHcpFieldVisible:function(e){return"HCP"===e?!0:!1},selectedRgbIndex:function(e){return e&&"ABAP"!==e?1:0},_onWorkspaceAppTextFieldChange:function(e){var t=e.getValue();return Q(this._createControlData(e,""!==t,"plh_run_config_ui_embmode_app_name","tlt_run_config_ui_embmode_app_name",e.getId()))},_getDefaultAppName:function(e){var t=this,n=e.getSelectedKey(),r=e.getParent(),i=r.getContent()[1],o=i.getValue();if(""!==n){var a=t.context.service.embeddedrunnerutil,s=t.context.service.filesystem.documentProvider;return s.getDocument(n).then(function(e){return a.getDefaultAppName(e).then(function(e){return i.setValue(e),t._createControlData(i,""!==e,"plh_run_config_ui_embmode_app_name","tlt_run_config_ui_embmode_app_name",i.getId())})})}return Q(t._createControlData(i,""!==o,"plh_run_config_ui_embmode_app_name","tlt_run_config_ui_embmode_app_name",i.getId()))},_fillWorkspaceAppsDropDown:function(e){var t=this;return e.setBusy(!0),t.context.service.embeddedrunnerutil.getWorkspaceApps().then(function(n){var r=new sap.ui.core.ListItem({key:null,text:null});e.addItem(r);for(var i=0;i<n.length;i++){var o=n[i],a=t._oDocument.getTitle();a!==o.wsName&&(r=new sap.ui.core.ListItem({key:o.wsPath,text:o.wsName}),e.addItem(r))}e.setBusy(!1)})},onAfterSystemsDropDownRendering:function(e){var t=this;t._onAfterSystemsDropDownRendering(e).then(function(e){return t.context.service.runconfigerrorhandler.update(e)}).fail(function(e){var n=e.message;t.context.service.log.info("embedded-mode-configuration",n,["system"]).done()}).done()},_onAfterSystemsDropDownRendering:function(e){var t=this,n=e.getModel(),r=n.getProperty("/flpDestName");return this._aDestinations?(e.destroyItems(),t._fillSystemsDropDown(e,t._aDestinations),e.setBusy(!1),r&&e.setSelectedKey(r),Q(t._createControlData(e,""!==r,"tlt_run_config_ui_embmode_err_dest_name","tlt_run_config_ui_embmode_dest_name",e.getId()))):t.context.service.embeddedrunnerutil.getDestinations().then(function(n){var i=n.filter(function(e){return e.name===r?!0:!1});return t._aDestinations=n,t._fillSystemsDropDown(e,n),e.setBusy(!1),r&&e.setSelectedKey(r),t._createControlData(e,r&&""!==r&&i.length>0,"tlt_run_config_ui_embmode_err_dest_name","tlt_run_config_ui_embmode_dest_name",e.getId())})},onSystemsDropDownChange:function(e){var t=this,n=e.getSource();t._onSystemsDropDownChange(n).then(function(e){return t.context.service.runconfigerrorhandler.update(e)}).done()},_onSystemsDropDownChange:function(e){var t=e.getModel(),n=e.getSelectedKey();return t.setProperty("/flpDestName",n),Q(this._createControlData(e,""!==n,"tlt_run_config_ui_embmode_err_dest_name","tlt_run_config_ui_embmode_dest_name",e.getId()))},onAfterAppsTextFieldRendering:function(e){var t=this;t._onAfterAppsTextFieldRendering(e).then(function(e){return t.context.service.runconfigerrorhandler.update(e)}).done()},_onAfterAppsTextFieldRendering:function(e){var t=e.getModel(),n=t.getProperty("/flpAppName");return e.setValue(n),Q(this._createControlData(e,""!==n,"tlt_run_config_ui_embmode_err_app_name_bsp","tlt_run_config_ui_embmode_app_name_bsp",e.getId()))},onAppsTextFieldChange:function(e){var t=this,n=e.getSource();t._onAppsTextFieldChange(n).then(function(e){return t.context.service.runconfigerrorhandler.update(e)}).done()},onAfterAccountTextFieldRendering:function(e){var t=e.getModel(),n=t.getProperty("/hcpAccount");e.setValue(n)},removeDropDownMsg:function(e){var t=this._createControlData(e,!0,"","",e.getId());return this.context.service.runconfigerrorhandler.update(t)},onAfterProviderDropDownRendering:function(e){var t=this;t._onAfterProviderDropDownRendering(e).then(function(e){return t.context.service.runconfigerrorhandler.update(e)}).fail(function(e){var n=e.message;t.context.service.log.info("embedded-mode-configuration",n,["system"]).done()}).done()},_onAfterProviderDropDownRendering:function(e){var t=this,n=e.getModel(),r=n.getProperty("/flpName"),i=n.getProperty("/emdType");return this._aSubscriptions?(e.destroyItems(),t._fillProviderDropDown(e,this._aSubscriptions),e.setBusy(!1),r&&e.setSelectedKey(r),t._updateHcpAppName(n),Q(t._createControlData(e,""!==r&&"HCP"===i,"tlt_run_config_ui_embmode_err_provider_name","tlt_run_config_ui_embmode_provider_name",e.getId()))):t.context.service.hcpauthentication.authenticate().then(function(o){return t._sHcpAccount=o.account,t._sHcpUsername=o.username,t._sHcpPassword=o.password,t.context.service.fiorilaunchpad.getAllFlpSubscriptions(o.account,o.username,o.password).then(function(o){var a=o.filter(function(e){return e.name===r?!0:!1});return t._aSubscriptions=o,t._fillProviderDropDown(e,o),e.setBusy(!1),r&&e.setSelectedKey(r),t._updateHcpAppName(n),t._createControlData(e,""!==r&&a.length>0&&"HCP"===i,"tlt_run_config_ui_embmode_err_provider_name","tlt_run_config_ui_embmode_provider_name",e.getId())})}).fail(function(){return t._createControlData(e,""!==r&&"HCP"===i,"tlt_run_config_ui_embmode_err_provider_name","tlt_run_config_ui_embmode_provider_name",e.getId())})},_updateHcpAppName:function(e){var t=e.getProperty("/hcpAppName");t||this.context.service.hcpconnectivity.getHCPAppName(this._oDocument,this._sHcpUsername,this._sHcpPassword,this._sHcpAccount).then(function(t){e.setProperty("/hcpAppName",t)}).done()},onProviderDropDownChange:function(e){var t=this,n=e.getSource();t._onProviderDropDownChange(n).then(function(e){return t.context.service.runconfigerrorhandler.update(e)}).done()},_onProviderDropDownChange:function(e){var t=e.getModel(),n=e.getSelectedKey();return t.setProperty("/flpName",n),Q(this._createControlData(e,""!==n,"tlt_run_config_ui_embmode_err_provider_name","tlt_run_config_ui_embmode_provider_name",e.getId()))},_fillProviderDropDown:function(e,t){var n=new sap.ui.core.ListItem({key:null,text:null});e.addItem(n);for(var r=0;r<t.length;r++){var i=t[r];n=new sap.ui.core.ListItem({key:i.name,text:i.providerAccount+" ("+i.name+")"}),e.addItem(n)}},onAfterParamNameRendering:function(e){var t=this;t._validateAfterParamNameRendering(e).then(function(e){return t.context.service.runconfigerrorhandler.update(e)}).done()},_onAppsTextFieldChange:function(e){var t=e.getModel(),n=e.getValue();return t.setProperty("/flpAppName",n),Q(this._createControlData(e,""!==n,"tlt_run_config_ui_embmode_err_app_name_bsp","tlt_run_config_ui_embmode_app_name_bsp",e.getId()))},_fillSystemsDropDown:function(e,t){var n=new sap.ui.core.ListItem({key:null,text:null});e.addItem(n);for(var r=0;r<t.length;r++){var i=t[r];n=new sap.ui.core.ListItem({key:i.name,text:i.description}),e.addItem(n)}},_validateAfterParamNameRendering:function(e){var t=this,n=e.srcControl,r=n.getParent().getContent()[0].getChecked(),i=n.getValue();return r?t.validateParameterNameInput(i).then(function(e){return t._createControlData(n,e.isValid,e.message,i,n.getParent().getId())}):Q(t._createControlData(n,!0,"",i,n.getParent().getId()))},_validateParamNameChange:function(e){var t=this,n=e.getSource(),r=n.getParent().getContent(),i=r[0],o=i.getChecked(),a=n.getValue();return t.validateParameterNameInput(a).then(function(e){return n.setValue(a),o===!1&&i.setChecked(!0),t._createControlData(n,e.isValid,e.message,a,n.getParent().getId())})},_validateCheckBoxChange:function(e){var t=this,n=e.getSource(),r=n.getParent().getContent(),i=r[1],o=n.getChecked(),a=i.getValue();return o?t.validateParameterNameInput(a).then(function(e){return n.setChecked(!0),t._createControlData(i,e.isValid,e.message,a,i.getParent().getId())}):(n.setChecked(!1),Q(t._createControlData(i,!0,"",a,n.getParent().getId())))},_createControlData:function(e,t,n,r,i,o){var a=this.context.i18n.getText("i18n",n),s=this.context.i18n.getText("i18n",r),u={oControl:e,sControlId:i,isControlValid:t,sInvalidMessage:a,sValidMessage:s};return"undefined"!=typeof o&&(u.bDisplayRtt=!1),u}}),define("sap/watt/saptoolsets/fiori/run/plugin/commonrunners/util/genericRunnersUtil",{removeById:function(e,t){t=jQuery.grep(t,function(t){return""+t!=""+e})},contains:function(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}}),define("sap.watt.saptoolsets.fiori.run.embeddedrunner/service/EmbeddedRunnerUtil",["sap/watt/saptoolsets/fiori/run/plugin/commonrunners/util/genericRunnersUtil"],function(e){"use strict";return{_mSystemsApplicationsMap:{},_oSystems:[],_aWattUsages:["ui5_execute_abap"],getWorkspaceApps:function(){var e=this.context.service.filesystem.documentProvider;return e.getRoot().then(function(e){return e.getCurrentMetadata().then(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i={};i.wsName=r.name,i.wsPath=r.path,t.push(i)}return t})})},getDefaultAppName:function(e){var t=this.context.service.ui5projecthandler;return t.getAttribute(e,"sap.platform.abap").then(function(e){if(e){var t=e.uri.split("/");return t[t.length-1]}return""}).fail(function(){return""})},getDefaultDestName:function(e){var t=this.context.service.neoapp;return this.getDestinations().then(function(n){return t.getNeoappDocumentAndContent(e).spread(function(e,t){for(var r=t.routes,i=0;i<r.length;i++){var o=r[i];if(o.path.startsWith("/sap/opu/odata")){var a=o.target;if(a&&"destination"===a.type)for(var s=a.name,u=0;u<n.length;u++)if(s===n[u].name)return s}}return null})})},getApplications:function(e){if(this._look(e))return Q(this._look(e));var t=this,n=this._getSystemObject(e),r=this.context.service.abaprepository,i=this.context.service.discovery;return i.getStatusBySystem(n).then(function(n){var i=n;return i?r.getApplications(i).then(function(n){var r=[];if(!n)return r;for(var i=0;i<n.length;i++){var o=n[i].title;r.push(o)}return t._mSystemsApplicationsMap[e]=r,r}):void 0}).fail(function(e){throw new Error([e.message])})},getDestinations:function(){if(this._oSystems.length>0)return Q(this._oSystems);var e,t=this,n=[];for(e=0;e<t._aWattUsages.length;e++){var r=t._aWattUsages[e];n.push(this._getDestinationsByUsage(r))}return Q.all(n).then(function(n){for(e=0;e<n.length;e++){var r=n[e];r.length>0&&t._addDestinations(r)}return t._removeDuplicates(),t._oSystems})},_getDestinationsByUsage:function(e){var t=[],n=this.context.service.destination;return n.getDestinations(e).then(function(e){for(var n=0;n<e.length;n++)t.push(e[n]);return t})},_addDestinations:function(e){for(var t=0;t<e.length;t++)this._oSystems.push(e[t])},_removeDuplicates:function(){for(var t=[],n=[],r=0;r<this._oSystems.length;r++)e.contains(this._oSystems[r].name,t)||(t.push(this._oSystems[r].name),n.push(this._oSystems[r]));this._oSystems=n},_getSystemObject:function(e){for(var t=0;t<this._oSystems.length;t++){var n=this._oSystems[t].name;if(e===n)return this._oSystems[t]}return null},_look:function(e){return this._mSystemsApplicationsMap[e]}}}),define("sap.watt.saptoolsets.fiori.run.runronfigerrorhandler/service/RunConfigErrorHandler",{_aErrorFields:null,_oRunConfigurationUiFragment:null,subscribe:function(e){this._oRunConfigurationUiFragment=e,this._aErrorFields=[]},update:function(e){this._updateStack(e.sControlId,e.isControlValid),e.isControlValid?this._switchToValidUi(e.oControl,e.sValidMessage):this._switchToInvalidUi(e.oControl,e.sInvalidMessage,e.bDisplayRtt),this._fireEvent(e)},_switchToInvalidUi:function(e,t,n){e.hasStyleClass("inputError")||(e.removeStyleClass("inputConfirmed"),e.addStyleClass("inputError"),("undefined"==typeof n||n===!0)&&this._addRichToolTip(e,t))},_switchToValidUi:function(e,t){e.hasStyleClass("inputError")&&(e.removeStyleClass("inputError"),e.addStyleClass("inputConfirmed"),setTimeout(function(){e.removeStyleClass("inputConfirmed")},3e3),e.setTooltip(t))},_fireEvent:function(){this._oRunConfigurationUiFragment.fireEvent("ConfigurationValidationEvent",{isValid:0===this._aErrorFields.length},!1,!0)},_updateStack:function(e,t){var n=this._hasError(e);n&&t&&this._removeError(e),n||t||this._aErrorFields.push(e)},_removeError:function(e){this._aErrorFields=jQuery.grep(this._aErrorFields,function(t){return""+t!=""+e})},_hasError:function(e){for(var t=0;t<this._aErrorFields.length;t++)if(this._aErrorFields[t]===e)return!0;return!1},_addRichToolTip:function(e,t){var n=new sap.ui.commons.RichTooltip({text:t,myPosition:"begin bottom",atPosition:"begin top",title:"{i18n>lbl_error}"}).addStyleClass("runConfigRtt");e.setTooltip(n)}}),define("sap.watt.saptoolsets.fiori.run.ushellsandbox/command/RunInSandbox",[],function(){"use strict";return{_sServerType:sap.watt.getEnv("server_type"),execute:function(e,t){var n=this.context.service.selection,r=this.context.service.ushellsandboxpreview;n.assertNotEmpty().then(function(e){return r.showPreview(e[0].document,t)}).fail(function(e){throw e}).done()},isAvailable:function(){var e=this._sServerType;return"java"===e||"hcproxy"===e||"local_hcproxy"===e},isEnabled:function(){var e=this.context.service.selection;this.context.service.ushellsandboxpreview;var t=this;return e.assertNotEmpty().then(function(e){return t._isExecutable(e[0])})},_isExecutable:function(e){var t=null,n=null,r=null;return e&&e.document&&(t=e.document,n=t.getEntity().getName(),r=t.getType()),"file"===r&&("Component.js"===n||new RegExp(".*fiorisandboxconfig.*.json","i").test(n))}}}),define("sap.watt.saptoolsets.fiori.run.ushellsandbox/service/PreviewImpl",[],function(){"use strict";return{_sServerType:sap.watt.getEnv("server_type"),_sPreviewUrl:sap.watt.getEnv("orion_preview"),configure:function(){this._preloadServices()},_preloadServices:function(){this.context.service.preview.showPreview().fail(function(){}).done(),this.context.service.switchbackends.getChangedBackends().fail(function(){}).done()},_showPreview:function(e,t,n,r){return this.context.service.preview.showPreview(e,t,n,null,r)},_getComponentName:function(e,t){var n=/.extend\(\"(.*).Component\"/.exec(e);if(n)return n[1];if(n=/jQuery.sap.declare\(\"(.*).Component\"\)/.exec(e))return n[1];throw new Error(this.context.i18n.getText("i18n","previewImpl_undeclaredComponent",[t]))},_getSandboxUrlForComponent:function(e,t,n){var r,i=this._getSandboxUri(e);if(!t)throw new Error(this.context.i18n.getText("i18n","previewImpl_undefinedComponent"));return r=URI(e).relativeTo(i).segment(-1,""),this._constructUrlForComponent(i,r.path(),t,n)},_constructUrlForComponent:function(e,t,n,r){var i=new URI(e.toString()),o=this._getAppSysUrlParams(r),a=URI(t);return a=this._addUrlParams(a,o.aAppParams),t=a.toString(),i=this._addUrlParams(i,o.aSysParams),i.addSearch("sap-ushell-test-url-url",t),i.addSearch("sap-ushell-test-url-additionalInformation","SAPUI5.Component="+n),r&&r.bIsMock&&i.addSearch("responderOn","true"),i.fragment("Test-url"),i.toString()},_getSandboxUrlForConfig:function(e,t){var n=this._getSandboxUri(e),r=this._getAppSysUrlParams(t);n=this._addUrlParams(n,r.aSysParams);var i=new URI(e).relativeTo(n).path();return n.addSearch("sap-ushell-sandbox-config",i),t&&t.bIsMock&&n.addSearch("responderOn","true"),n.toString()},_getComponentNameFromApplicationData:function(e){var t=/SAPUI5\.Component=(.*)/;if(!t.test(e))throw new Error(this.context.i18n.getText("i18n","previewImpl_applicationDataMissingString"));return t.exec(e)[1]},_getSandboxUri:function(e){var t,n="test-resources/sap/ushell/shells/sandbox/fioriSandbox.html",r=this._sServerType;if(!e)throw new Error(this.context.i18n.getText("i18n","previewImpl_undefinedUrl"));if("java"==r)t=new URI("").protocol(window.location.protocol).host(window.location.host).path("/sapui5-sdk-dist/"+n);else{if("hcproxy"!=r&&"local_hcproxy"!=r)throw new Error(this.context.i18n.getText("i18n","previewImpl_unsupportedServerType",[r]));t=new URI(e).path(new URI(this._sPreviewUrl).path()).segment(n)}return t},showPreview:function(e,t,n,r){var i,o=this,a=e.getEntity().getName(),s=null,u=r?r.sUi5Version:null;return o.context.service.switchbackends.getChangedBackends(r).then(function(c){var l=r?r.oAppForwarding:null,p=r?r.sRelativePath:null;if("Component.js"===a)return o.context.service.preview.getPreviewUrl(e,null,l,u,null,p,c).then(function(t){return i=t.toString(),e.getContent()}).then(function(a){var u=o._getComponentName(a,e.getEntity().getFullPath());return s=o._getSandboxUrlForComponent(i,u,r),o._showPreview(s,t,n,r)});if(new RegExp(".*fiorisandboxconfig.*[.]json","i").test(a))return o.context.service.preview.getPreviewUrl(e,null,l,u,null,p,c).then(function(e){return i=e.toString(),s=o._getSandboxUrlForConfig(i,r),o._showPreview(s,t,n,r)});throw new Error(this.context.i18n.getText("i18n","previewImpl_unsupportedFile",[a]))})},showPreviewWithParameters:function(e,t,n,r){var i=this,o=i._getComponentNameFromApplicationData(t);return i.context.service.preview.getPreviewUrl(n).then(function(e){return i._getSandboxUri(e.toString())}).then(function(t){i._showPreview(i._constructUrlForComponent(t,e,o,!1),r)})},_getAppSysUrlParams:function(e){var t=["saml2idp"],n={},r=[],i=[];if(e?(n=e.oUrlParameters,this._addIdeUrlParams(t,n)):e={},n)for(var o=0;o<n.length;o++){var a=n[o];this._isSystemParameter(a.paramName,t)?i.push(a):r.push(a)}var s={aAppParams:r,aSysParams:i};return s},_isSystemParameter:function(e,t){for(var n=["sap-ui-appCacheBuster","sap-ui-debug"],r=0;r<n.length;r++){var i=n[r];if(e===i)return!0}for(var r=0;r<t.length;r++){var o=t[r];if(e===o)return!0}return!1},_addUrlParams:function(e,t){var n=e;if(t)for(var r=0;r<t.length;r++)n.addSearch(t[r].paramName,t[r].paramValue);return n},_addIdeUrlParams:function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=this._getIdeParameterValue(r);if(i&&!this._isInUrlParameters(r,t)){var o={paramName:r,paramValue:i};t.push(o)}}},_isInUrlParameters:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.paramName===e)return!0}return!1},_getIdeParameterValue:function(e){for(var t,n=window.location.search.substr(1).split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]===e){t=i[1];break}}return t}}}),define("sap.watt.saptoolsets.fiori.run.ushell/service/PreviewImpl",[],function(){"use strict";return{configure:function(){this._preloadServices()},_preloadServices:function(){this.context.service.preview.showPreview().fail(function(){}).done()},_sServerType:sap.watt.getEnv("server_type"),_sPreviewUrl:sap.watt.getEnv("orion_preview"),_showPreview:function(e,t,n,r){return this.context.service.preview.showPreview(e,t,n,null,r)},_getEmbeddedUri:function(e){var t,n="sap/bc/ui5_ui5/ui2/ushell/shells/abap/Fiorilaunchpad.html",r=this._sServerType;if("java"===r)t=new URI("").protocol(window.location.protocol).host(window.location.host).path("/sapui5-sdk-dist/"+n);else{if("hcproxy"!==r&&"local_hcproxy"!==r)throw new Error(this.context.i18n.getText("i18n","previewImpl_unsupportedServerType",[r]));t=new URI(e).path(new URI(this._sPreviewUrl).path()).segment(n)}return t},showPreviewEmbedded:function(e,t,n){var r,i=this,o=null;return i.context.service.preview.getPreviewUrl(e,null,{bPreferWorkspace:!0},null,!0).then(function(e){return e.addQuery("sap-ushell-nocb",!0),r=e.toString(),o=i._getEmbeddedUri(r),i._showPreview(o,t,!0,n)})},showPreviewEmbeddedFlp:function(e,t,n){var r=this,i=window.location.protocol+"//"+n.flpName+"-"+n.hcpAccount+".dispatcher.neo.ondemand.com"+"/sap/hana/uis/clients/ushell-app/shells/fiori/FioriLaunchpad.html?hc_reset",o=new URI(i),a=this._getHeliumPath(e);return o.addSearch("hc_wsmapping."+n.hcpAppName,a),this._getWorkSpaceApps(o,n.workspaceApplications).then(function(e){return r._showPreview(e,t,!0,n)})},_getHeliumPath:function(e){var t=e.getEntity().getBackendData().location;return t=t.indexOf("/s2s/file")>-1?t.replace("/s2s/file",""):t.replace("/file","")},_getWorkSpaceApps:function(e,t){var n=this,r=[],i=[];if(t){for(var o=0;o<t.length;o++){var a=t[o];r.push(this.context.service.filesystem.documentProvider.getDocument("/"+a.localPath)),i.push(a.bspName.toLowerCase())}return Q.all(r).then(function(t){if(t)for(var r=0;r<t.length;r++){var o=n._getHeliumPath(t[r]);e.addSearch("hc_wsmapping."+i[r],o)}return e})}return Q(e)}}}),define("sap.watt.saptoolsets.fiori.run.mockpreview/command/RunWithMock",{execute:function(e,t){var n=this.context.service;return n.selection.getSelection().then(function(e){var r=e[0];if(!r||!r.document)throw new Error("Unexpected Error");var i=r.document,o=n.preview,a=n.mockpreview;return n.setting.project.get(a).then(function(e){return n.usagemonitoring.report("runner","run_with_mock_old",i.getEntity().getParentPath()[1]).done(),!e||e.responderOn?o.getPreviewUrl(i).then(function(e){return e.addQuery({responderOn:!0}),o.showPreview(e,t)}):a.getRunnableMockSettings(i,e).then(function(e){return a.buildRunnableDocument(e,i,t).then(function(e){return o.getPreviewUrl(e).then(function(e){return o.showPreview(e,t,!1,null,{})})})})})})},isEnabled:function(){var e=this.context.service.selection;return e.assertNotEmpty().then(function(e){var t=e[0].document;if(!t.getEntity&&!t.getType)return!1;var n=t.getEntity().getName(),r=t.getType();return"file"===r&&jQuery.sap.endsWith(n,".html")})}}),define("sap.watt.saptoolsets.fiori.run.mockpreview/service/MockPreviewImpl",{_sUI5Id:"#sap-ui-bootstrap",_sNewFileName:"mock_preview_sapui5.html",_sUI5BootScript:'<script src="/resources/sap-ui-core.js"	id="sap-ui-bootstrap" data-sap-ui-libs="sap.ui.commons"></script>',_sMockScript:"\n{{customScript}}<script>\nvar bRunWithMock = true;\nvar sRunWithMock = jQuery.sap.getUriParameters().get('run-with-mock');\nif (sRunWithMock === 'false') {\nbRunWithMock = false;\n}\nif (bRunWithMock) {\njQuery.sap.require('sap.ui.core.util.MockServer');\nvar uri = '{{rootUri}}';\nvar oMock = new sap.ui.core.util.MockServer({rootUri : uri});\n{{simulate}}\n{{customRequestsPart}}{{annotations}}}\n</script>\n",configure:function(){this._preloadServices()},_preloadServices:function(){this.context.service.appdescriptorutil.getAnnotations().fail(function(){}).done(),this.context.service.fioriodata.getServiceUrl().fail(function(){}).done(),this.context.service.metadataHandler.getMetadataDocuments().fail(function(){}).done()},buildRunnableDocument:function(e,t,n){var r=this,i=this.context.service.filesystem.documentProvider,o=t.getEntity().getParentPath();return i.getDocument(o).then(function(i){return r.context.service.appdescriptorutil.getAppNamespace(i).then(function(o){var a=r._sMockScript.replace("{{rootUri}}",e.mockUri.split("?")[0].replace(/\/?$/,"/")),s=o.replace(/\/?$/,"/"),u=e.metadataFilePath;if(!u)return n&&n.close(),r.context.service.usernotification.alert(r.context.i18n.getText("i18n","msg_mock_model_missing")).then(function(){throw new Error(r.context.i18n.getText("i18n","msg_mock_fail"))});r.updateSettings(i,{metadataFilePath:u,mockUri:e.mockUri}).done();var c=e.mockRequestsFilePath?e.mockRequestsFilePath:u.replace(/[^\/]+$/,"");if(o)var l='var _sAppModulePath = "'+s+'";\nvar sMetadataPath = "'+u+'";\nvar sMetadataUrl = jQuery.sap.getModulePath(_sAppModulePath + sMetadataPath.replace(".xml", ""), ".xml");\n';else l="var sMetadataUrl = '"+u+"';\n";if(e.loadJSONFiles){var p;p=u.indexOf("localService")>-1?u.replace(/[^\/]+$/,"mockdata"):u.replace(/[^\/]+$/,""),l+="oMock.simulate(sMetadataUrl, { sMockdataBaseUrl : '"+p+"', bGenerateMissingMockData : true });"}else l+="oMock.simulate(sMetadataUrl);";a=a.replace("{{simulate}}",l);var f="",d="oMock.start();\n	jQuery(document).ready(function($) {  sap.m.MessageToast.show('Running in demo mode with mock data.', {  duration : 4000 });\n});\n";e.loadCustomRequests&&(f='<script src="'+c.replace(/[^\/]+$/,"")+'mockRequests.js"> </script>\n',d="try {\n var aMockRequest = webide.mock.ext.mockRequests.getRequests();\nif (aMockRequest && aMockRequest.length > 0) {\n  oMock.setRequests(oMock.getRequests().concat(aMockRequest));\n}\n} catch(oErr) {\njQuery.sap.log.debug(oErr.message);\n}finally {\n oMock.start();\n	jQuery(document).ready(function($) {  sap.m.MessageToast.show('Running in demo mode with mock data.', {  duration : 4000 }); });\n }"),a=a.replace("{{customScript}}",f),a=a.replace("{{customRequestsPart}}",d);var h="";if(e.aAnnotations&&e.aAnnotations.length>0){for(var m=e.aAnnotations,g=0;g<m.length;g++){var v=m[g],y=v.annotationUri,_=v.annotationLocalUri;h+='new sap.ui.core.util.MockServer({rootUri: "'+y+'", requests: [{ method: "GET", path: new RegExp(""),\nresponse: function(oXhr) { \n'+'jQuery.sap.require("jquery.sap.xml");\nvar oAnnotations = jQuery.sap.sjax({ url: jQuery.sap.getModulePath(_sAppModulePath + "'+_+'".replace(".xml", ""), ".xml"),\n'+'dataType: "xml"}).data;\noXhr.respondXML(200, {}, jQuery.sap.serializeXML(oAnnotations));\n'+"return true;\n}\n}]\n}).start();\n"}h+='//Fake LREP\njQuery.sap.require("sap.ui.fl.FakeLrepConnector");\nsap.ui.fl.FakeLrepConnector.enableFakeConnector("fakeLRep.json");\n'}return a=a.replace("{{annotations}}",h),t.getContent().then(function(e){var t,n=e.search('<script[^>]+id(| )*=(| )*"(| )*sap-ui-bootstrap(| )*"');if(-1===n){var o=e.search("<head>");t=e.substr(0,o+"<head>".length)+r._sUI5BootScript+a+e.substr(o+"<head>".length+1)}else{var s=new RegExp("(| )*</(| )*script(| )*>"),u=s.exec(e.substr(n))[0],c=e.indexOf(u,n)+u.length;t=e.substr(0,c)+a+e.substr(c+1)}return i.importFile(new Blob([t]),!1,!0,r._sNewFileName).then(function(e){if(!e)throw new Error(r.context.i18n.getText("i18n","msg_mock_fail"));return e})}).fail(function(){r.context.service.usernotification.alert(r.context.i18n.getText("i18n","msg_mock_fail")).done()})}).fail(function(){r.context.service.usernotification.alert(r.context.i18n.getText("i18n","msg_mock_fail")).done()})})},runWithMock:function(e,t,n,r){var i=this,o=this.context.service.filesystem.documentProvider,a=this.context.service.preview,s=n.getEntity().getParentPath();return o.getDocument(s).then(function(o){var s=i._sMockScript.replace("{{rootUri}}",e.mockUri.split("?")[0].replace(/\/?$/,"/")),u=e.metadataFilePath?e.metadataFilePath:i._getMetadataRelativeURL(t,n);i.updateSettings(t,{mockUri:e.mockUri,metadataFilePath:u}).done();var c=e.mockRequestsFilePath?e.mockRequestsFilePath:u.replace(/[^\/]+$/,""),l="oMock.simulate('"+u+"');";e.loadJSONFiles&&(l="oMock.simulate('"+u+"', { sMockdataBaseUrl : '"+u.replace(/[^\/]+$/,"")+"', bGenerateMissingMockData : true });"),s=s.replace("{{simulate}}",l);var p="",f="oMock.start();\n	jQuery(document).ready(function($) {  sap.m.MessageToast.show('Running in demo mode with mock data.', {  duration : 4000 });\n});\n";return e.loadCustomRequests&&(p='<script src="'+c.replace(/[^\/]+$/,"")+'mockRequests.js"> </script>\n',f="try {\n var aMockRequest = webide.mock.ext.mockRequests.getRequests();\nif (aMockRequest && aMockRequest.length > 0) {\n  oMock.setRequests(oMock.getRequests().concat(aMockRequest));\n}\n} catch(oErr) {\njQuery.sap.log.debug(oErr.message);\n}finally {\n oMock.start();\n	jQuery(document).ready(function($) {  sap.m.MessageToast.show('Running in demo mode with mock data.', {  duration : 4000 }); });\n }"),s=s.replace("{{customScript}}",p),s=s.replace("{{customRequestsPart}}",f),n.getContent().then(function(e){var t,n=e.search('<script[^>]+id(| )*=(| )*"(| )*sap-ui-bootstrap(| )*"');
if(-1===n){var u=e.search("<head>");t=e.substr(0,u+"<head>".length)+i._sUI5BootScript+s+e.substr(u+"<head>".length+1)}else{var c=new RegExp("(| )*</(| )*script(| )*>"),l=c.exec(e.substr(n))[0],p=e.indexOf(l,n)+l.length;t=e.substr(0,p)+s+e.substr(p+1)}return o.importFile(new Blob([t]),!1,!0,i._sNewFileName).then(function(e){if(!e)throw new Error(i.context.i18n.getText("i18n","msg_mock_fail"));return a.getPreviewUrl(e).then(function(e){return a.showPreview(e,r)})})}).fail(function(){i.context.service.usernotification.alert(i.context.i18n.getText("i18n","msg_mock_fail")).done()})})},updateSettings:function(e,t){var n=this;return t=t?t:{},this.context.service.setting.project.get(this.context.self,e).then(function(r){return r?(r.mockUri=t.mockUri?t.mockUri:r.mockUri||"",r.metadataFilePath=t.metadataFilePath?t.metadataFilePath:r.metadataFilePath||"",r.loadJSONFiles=t.loadJSONFiles?t.loadJSONFiles:r.loadJSONFiles||!1,r.loadCustomRequests=t.loadCustomRequests?t.loadCustomRequests:r.loadCustomRequests||!1,r.mockRequestsFilePath=t.mockRequestsFilePath?t.mockRequestsFilePath:r.mockRequestsFilePath||""):r={mockUri:t.mockUri||"",metadataFilePath:t.metadataFilePath||"",loadJSONFiles:t.loadJSONFiles||!1,loadCustomRequests:t.loadCustomRequests||!1,mockRequestsFilePath:t.mockRequestsFilePath||""},n.context.service.setting.project.set(n.context.self,r,e)})},getRunnableMockSettings:function(e,t){var n=this,r={};return n._getServiceURI(e,t).then(function(i){return r.mockUri=i,n._getMetadataFilePath(e,t).then(function(i){return r.metadataFilePath=i,n.context.service.appdescriptorutil.getAnnotations(e).then(function(e){return r.aAnnotations=e,r.loadJSONFiles=t?t.loadJSONFiles:void 0,r.loadCustomRequests=t?t.loadCustomRequests:void 0,r.mockRequestsFilePath=t?t.mockRequestsFilePath:void 0,r})})})},_getServiceURI:function(e,t){var n=this;return e.getProject().then(function(e){var r=e.getEntity().getFullPath();return n.context.service.fioriodata.getServiceUrl(r,"OData").then(function(e){return"undefined"!=typeof e?e:(t=t?t:{mockUri:""},t.mockUri?t.mockUri:"")})})},_getMetadataFilePath:function(e,t){var n=this;return n.context.service.appdescriptorutil.getMetadataPath(e).then(function(r){return r?r:t&&t.metadataFilePath?t.metadataFilePath:e.getProject().then(function(t){return n.context.service.metadataHandler.getMetadataDocuments(t).then(function(t){return 0===t.length?"":n._getMetadataRelativeURL(t[0],e)})})})},_getMetadataRelativeURL:function(e,t){for(var n=e.getEntity().getFullPath().split("/"),r=t.getEntity().getFullPath().split("/"),i="",o=0;n[o]===r[o];)o++;for(var a=r.length-1-o,s=0;a>s;s++)i+="../";return i+=n.splice(o,n.length).join("/"),i.substring(0,i.length)},onAfterGenerate:function(e){var t=e.params.model.connectionData;if(t){var n=t.runtimeUrl;t.destination&&"river"===t.destination.wattUsage&&(n=t.url),n&&n.lastIndexOf("/")===n.length-1&&(n=n.substring(0,n.length-1));var r={mockUri:n};return this.updateSettings(e.params.targetDocument,r)}}}),define("sap.watt.saptoolsets.fiori.run.mockpreview/service/MockPreviewProjectConfig",["sap/watt/common/plugin/platform/service/ui/AbstractConfig","sap/watt/lib/lodash/lodash"],function(e){"use strict";return e.extend("sap.watt.common.plugin.preview.service.MockPreviewProjectConfig",{_oContent:null,_i18n:null,_oProjectSettings:null,getProjectSettingContent:function(){jQuery.sap.includeStyleSheet("resources/sap/watt/saptoolsets/fiori/run/plugin/mockpreview/css/mockDataSettings.css");var e=this,t=this.context.service;return this._i18n=this.context.i18n,this._oContent||(this._oContent=this._createUI(),this._i18n.applyTo(this._oContent),this._oContent.setModel(new sap.ui.model.json.JSONModel)),t.selection.getSelection().then(function(n){var r=n[0];return r.document.getProject().then(function(n){var r=n.getEntity().getFullPath();return t.fioriodata.getServiceUrl(r,"OData").then(function(r){return t.appdescriptorutil.getMetadataPath(n).then(function(n){return t.setting.project.get(t.mockpreview).then(function(i){var o=i||{mockUri:"",metadataFilePath:"",mockRequestsFilePath:"",loadJSONFiles:!1,loadCustomRequests:!1};return e._oContent.getModel().setProperty("/mockUriEnabled",!0),e._oContent.getModel().setProperty("/metadataPathEnabled",!0),"undefined"!=typeof r&&(o.mockUri!==r&&(o.mockUri=r,t.setting.project.set(t.mockpreview,o).done()),e._oContent.getModel().setProperty("/mockUriEnabled",!1)),n&&(o.metadataFilePath!==n&&(o.metadataFilePath=n,t.setting.project.set(t.mockpreview,o).done()),e._oContent.getModel().setProperty("/metadataPathEnabled",!1)),o.mockUri||(o.mockUri=""),e._oContent.getModel().setProperty("/ProjectSettings",o),e.oMockDataSourceRBGroup.setSelectedIndex(o.loadJSONFiles?1:0),e.oExtendMockCB.setChecked(o.loadCustomRequests),e._oContent})})})})}).fail(function(){e.context.service.log.error("project settings","Failed to load Mock Data settings",["user"]).done()})},saveProjectSetting:function(){var e=this.context.service,t=this._oContent.getModel().getProperty("/ProjectSettings"),n=t.mockUri.trim();n.lastIndexOf("/")===n.length-1&&(t.mockUri=n.substring(0,n.length-1)),t.loadJSONFiles=1===this.oMockDataSourceRBGroup.getSelectedIndex(),t.loadCustomRequests=this.oExtendMockCB.getChecked(),e.setting.project.set(e.mockpreview,t).done()},_createUI:function(){var e=this,t=new sap.ui.commons.TextField({value:"{mockUri}",placeholder:{path:"/mockUriEnabled",formatter:function(t){return t?e._i18n.getText("i18n","runWithMock_config_serviceURL_description"):""}},width:"100%",editable:"{/mockUriEnabled}",tooltip:{path:"/mockUriEnabled",formatter:function(t){return t?"":e._i18n.getText("i18n","tlt_runWithMock_config_serviceURL_notEditable")}},layoutData:new sap.ui.layout.GridData({span:"L10 M10 S10"})}),n=new sap.ui.commons.TextField({value:"{metadataFilePath}",placeholder:{path:"/metadataPathEnabled",formatter:function(t){return t?e._i18n.getText("i18n","runWithMock_config_metadata_path_placeholder"):""}},width:"100%",editable:"{/metadataPathEnabled}",tooltip:{path:"/metadataPathEnabled",formatter:function(t){return t?"":e._i18n.getText("i18n","tlt_runWithMock_config_metadataPath_notEditable")}},layoutData:new sap.ui.layout.GridData({span:"L10 M10 S10"})});this.oMockDataSourceRBGroup=new sap.ui.commons.RadioButtonGroup({columns:1,items:[new sap.ui.core.Item({text:"{i18n>runWithMock_config_mockdata_source_gendata}"}),new sap.ui.core.Item({text:"{i18n>runWithMock_config_mockdata_source_jsondata}"})]}),this.oExtendMockCB=new sap.ui.commons.CheckBox({text:"{i18n>runWithMock_config_loadCustomRequests_checkbox}",checked:"{loadCustomRequests}",layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreak:!0})});var r=new sap.ui.commons.TextField({value:"{mockRequestsFilePath}",placeholder:"{i18n>runWithMock_config_extensionfile_placeholder}",enabled:"{loadCustomRequests}",width:"100%",layoutData:new sap.ui.layout.GridData({span:"L10 M10 S10"})}),i=new sap.ui.layout.form.SimpleForm({layout:sap.ui.layout.form.SimpleFormLayout.ResponsiveGridLayout,content:[new sap.ui.commons.Label({text:"{i18n>runWithMock_config_service_root_uri}",tooltip:"{i18n>runWithMock_config_serviceURL_tooltip}"}),t,new sap.ui.commons.Label({text:"{i18n>runWithMock_config_service_metadata_path}",tooltip:"{i18n>runWithMock_config_metadata_path_tooltip}"}),n,new sap.ui.commons.Label({text:"{i18n>runWithMock_config_mockdata_source}"}),this.oMockDataSourceRBGroup,this.oExtendMockCB,new sap.ui.commons.Label({text:"{i18n>runWithMock_config_extensionfile}",tooltip:"{i18n>runWithMock_config_extensionfile_tooltip}"}),r]}).addStyleClass("mockDataSettingsSpacing");return i.bindElement("/ProjectSettings"),i}})}),define("sap.watt.saptoolsets.fiori.run.mockpreview/service/AppDescriptorUtil",["sap/watt/lib/lodash/lodash"],function(e){"use strict";var t={getMetadataPath:function(t){var n=this;return n.context.service.ui5projecthandler.isManifestProjectGuidelinesType(t).then(function(r){var i;return r?n.context.service.ui5projecthandler.getDataSourcesByType(t,"OData").then(function(t){if(t){var n=e.values(t);n[0]&&n[0].settings&&(i=n[0].settings.localUri)}return i}):i}).fail(function(){return void 0})},getAnnotations:function(t){var n=this;return n.context.service.ui5projecthandler.getDataSourcesByType(t,"ODataAnnotation").then(function(t){if(t){for(var n=e.values(t),r=[],i=0;i<n.length;i++)r.push({annotationUri:n[i].uri,annotationLocalUri:n[i].settings?n[i].settings.localUri:void 0});return r}return[]}).fail(function(){return[]})},getAppNamespace:function(e){return this.context.service.ui5projecthandler.getAppNamespace(e).then(function(e){return e}).fail(function(){return""})}};return t}),define("sap.watt.saptoolsets.fiori.problemsView/command/openProblemsView",["sap.watt.ideplatform.orion.orionbackend/featuretoggle/FeatureToggle"],function(e){"use strict";function t(t){return e.isFeatureSupported(n,t)}var n="problemsView";return{execute:function(){var e=this;return this.context.service.problemsView.isVisible().then(function(t){return e.context.service.problemsView.setVisible(!t)})},isAvailable:function(){return t(n+"UI").then(function(e){return e})},isEnabled:function(){var e=this.context.service.perspective;return e.getCurrentPerspective().then(function(e){return"development"===e})}}}),define("sap.watt.saptoolsets.fiori.problemsView/service/ProblemsView",["sap/watt/common/plugin/platform/service/ui/AbstractPart","sap/watt/lib/lodash/lodash"],function(e){"use strict";var t=e.extend("sap.watt.common.plugin.problemsView.service.ProblemsView",{_longRunningTask:{problemStage:void 0,progressBarID:void 0,integrityStatus:void 0,integrityInfo:void 0},_pvVisible:!1,configure:function(){},init:function(){var e=[{uri:"sap/watt/saptoolsets/fiori/problemsView/css/problemsView.css"}];return this._oView=sap.ui.view("ProblemsView",{viewName:"sap.watt.saptoolsets.fiori.problemsView.view.ProblemsView",type:sap.ui.core.mvc.ViewType.XML}),this.context.i18n.applyTo(this._oView),this.context.self.attachEvent("visibilityChanged",this._onVisibilityChanged,this),this._oView.getController().setWebIdeContext(this.context),this.context.service.resource.includeStyles(e)},isLongRunningTaskExecuting:function(){return this._longRunningTaskID},activateProblemsViewEffectOnOthers:function(e){var t=this;if(e){if(void 0===this._longRunningTask.progressBarID&&"start"===this._longRunningTask.problemStage){var n=this.context.service.perspective;n.getCurrentPerspective().then(function(e){"development"===e&&t._pvVisible&&t.context.service.progress.startTask("Code-validation processing","Validating code in the background").then(function(e){t._longRunningTask.progressBarID=e,t.context.service.usernotification.liteInfo(t.context.i18n.getText("problemView_longTask_start",["user"])).done()}).done()}).done()}}else this._longRunningTask.progressBarID&&(this.context.service.progress.stopTask(this._longRunningTask.progressBarID).then(function(){t._longRunningTask.progressBarID=void 0}).done(),"end"===t._longRunningTask.problemStage&&this._liteInfoToEndUser(t._longRunningTask.integrityStatus))},onWaitingForLongRunningProblemsCalc:function(e){var t=e.params.taskStage;"end"===t?(this._longRunningTask.problemStage="end",this._longRunningTask.integrityStatus=e.params.taskIntegrity.status,this._longRunningTask.integrityInfo=e.params.taskIntegrity.info,this.activateProblemsViewEffectOnOthers(!1)):"start"===t&&(this._longRunningTask.problemStage="start",this.activateProblemsViewEffectOnOthers(!0))},getContent:function(){return this._oView},getFocusElement:function(){return this.getContent()},onProblemsUpdate:function(e){var t=e.params.domain,n=e.params.problems;this._oView.getController().setProblems(t,n)},onProblemsDelete:function(e){var t=e.params.IDs,n=e.params.domain;this._oView.getController().clearProblems(n,t)},onTitleUpdate:function(e){var t=e.params.title;this._oView.getController().setTitle(t)},onTitleDelete:function(){this._oView.getController().clearTitle()},onTabClosed:function(){this._oView.getController().setProblems([])},_onVisibilityChanged:function(e){e.source.getProxyMetadata().getName()===this.context.service.problemsView.getProxyMetadata().getName()&&(this._pvVisible=e.params.visible,this.activateProblemsViewEffectOnOthers(this._pvVisible),this.context.event.fireProblemsViewVisibilityChanged({visible:this._pvVisible}).done())},_liteInfoToEndUser:function(e){var t=this;this.context.service.problemsViewValidation.problemsProcessingIntegrityStatus().then(function(n){var r={};r[n.OK]=function(){return t.context.i18n.getText("problemView_longTask_good_end",["user"])},r[n.ERROR]=function(){return t.context.i18n.getText("problemView_longTask_error_end",["user"])},r[n.PARTIAL_ERROR]=function(){return t.context.i18n.getText("problemView_longTask_partial_error_end",["user"])},"function"!=typeof r[e]?t.context.service.log.error(t.context.service.problemsView.getProxyMetadata().getName(),"wrong integrity value sent by long running Task event",["system"]).done():t.context.service.usernotification.liteInfo(r[e].call(t)).done()}).fail(function(){})}});return t}),define("sap.watt.uitools.ide/command/Help",[],function(){"use strict";return{execute:function(e,t){var n=this.context.service.help,r=t?t:window.open("","Help");n.getHelpUrl().then(function(e){r.location.href=e}),this.context.service.usagemonitoring.report("IDE","Commands",this.context.self._sName).done()}}}),define("sap.watt.uitools.ide/command/Shortcuts",[],function(){"use strict";return{execute:function(e,t){var n=this.context.service.help,r=t?t:window.open("","ShortcutHelp");this.context.service.usagemonitoring.report("IDE","Commands",this.context.self._sName).done(),n.getHelpUrl().then(function(e){r.location.href="local_hcproxy"!==sap.watt.getEnv("server_type")||sap.watt.getEnv("internal")?e+"?e8b492c0264d4eaf80b344153535a262.html":e+"#5.3 Keyboard Shortcuts"})}}}),define("sap.watt.uitools.ide/command/About",[],function(){"use strict";return{_oContent:null,_oDialog:null,_oOkButton:null,_oDialogLayout:null,init:function(){var e=this;this._oContent=new sap.ui.core.HTML({}),this._oOkButton=new sap.ui.commons.Button({text:this.context.i18n.getText("i18n","about_ok"),enabled:!0,press:[e._closeDialog,e]}),this._oDialog=new sap.ui.commons.Dialog("AboutDialog",{title:this.context.i18n.getText("i18n","about_about"),buttons:[this._oOkButton],defaultButton:this._oOkButton,resizable:!1,keepInWindow:!0,modal:!0})},execute:function(){var e=this,t=function(t){t&&""!=t||(t=this.context.i18n.getText("i18n","about_noVersionAvailable")),e._oContent.setContent(t),e._oDialog.removeAllContent(),e._oDialog.addContent(e._oContent),e._oDialog.open()},n=jQuery.sap.getModulePath("sap.watt.uitools.version",".json");Q(jQuery.ajax({url:n,dataType:"json"}).then(function(n){var r="<td>Version:</td><td id='watt--ide--version'>"+n.version.replace("SNAPSHOT",n.timestamp)+"</td>",i="";sap.watt.getEnv("internal")&&(i="<td colspan=2><br>"+e.context.i18n.getText("i18n","about_internal")+"</td>");var o="<table><tr>"+r+"</tr>"+"<tr>"+i+"</tr>"+"</table>";t(o)},function(){t()})).done(),this.context.service.usagemonitoring.report("IDE","Commands",this.context.self._sName).done()},_closeDialog:function(){this._oDialog.close()}}}),define("sap.watt.uitools.ide/command/Terms",[],function(){"use strict";return{execute:function(e,t){var n=t?t:window.open("","Terms"),r="https://accounts.sap.com/ui/public/viewTextResource?scenario=SAP_HANA_Cloud_Developer_Edition&resourceType=RESOURCE_TERMS_OF_USE&locale=en_US&spDisplayName=SAP%20HANA%20Cloud%20Developer%20Edition";n.location.href=r,this.context.service.usagemonitoring.report("IDE","Commands",this.context.self._sName).done()}}}),define("sap.watt.uitools.ide/command/Legal",[],function(){"use strict";return{execute:function(e,t){var n=t?t:window.open("","Legal");n.location.href="http://global.sap.com/corporate-en/legal/impressum.epx",this.context.service.usagemonitoring.report("IDE","Commands",this.context.self._sName).done()}}}),define("sap.watt.uitools.ide/command/Privacy",[],function(){"use strict";return{_oDialog:null,_oAllowTrackingoCheckBox:null,init:function(){var e=this,t=this.context.i18n,n=new sap.ui.commons.Button({text:t.getText("i18n","privacy_button_ok"),press:[e._savePrivacy,e]}),r=new sap.ui.commons.Button({text:t.getText("i18n","privacy_button_cancel"),press:[e._closeDialog,e]}),i=new sap.ui.commons.Link({text:t.getText("i18n","privacy_form_statement_link_SAP_HANA_Cloud_Privacy_Statement"),press:function(){window.open("https://help.hana.ondemand.com/privacy.htm")}}).addStyleClass("privacyLink"),o=t.getText("i18n","privacy_form_statement_this_site_is_governed");o+='<embed data-index="0">.<br><br>',o+=t.getText("i18n","privacy_form_statement_details1"),o+="<br><br>",o+=t.getText("i18n","privacy_form_statement_details2"),o+="<br><br>";var a=new sap.ui.commons.FormattedTextView({});a.setHtmlText(o),a.addControl(i),this._oAllowTrackingoCheckBox=new sap.ui.commons.CheckBox({text:t.getText("i18n","allow_tracking")}),this._oDialog=new sap.ui.commons.Dialog("PrivacyDialog",{title:t.getText("i18n","privacy_form_title"),content:[a,this._oAllowTrackingoCheckBox],buttons:[n,r],resizable:!1,keepInWindow:!0,modal:!0,width:"30%"})},_savePrivacy:function(){this.context.service.preferences.set({allowTracking:this._oAllowTrackingoCheckBox.getChecked()},"UsageAnalytics"),this._oDialog.close()},_closeDialog:function(){this._oDialog.close()},execute:function(){var e=this;return this.context.service.usagemonitoring.report("IDE","Commands",this.context.self._sName).done(),this.context.service.preferences.get("UsageAnalytics").then(function(t){e._oAllowTrackingoCheckBox.setChecked(!0),t&&t.allowTracking===!1&&e._oAllowTrackingoCheckBox.setChecked(!1),e._oDialog.open()})}}}),define("sap.watt.uitools.ide/command/Feedback",[],function(){"use strict";return{execute:function(e,t){var n=t?t:window.open("","Feedback");n.location.href=sap.watt.getEnv("internal")?"https://jam4.sapjam.com/groups/about_page/7MFgdXHJVVv2BWC8g0Ubep":"http://scn.sap.com/community/developer-center/front-end/content",this.context.service.usagemonitoring.report("IDE","Commands",this.context.self._sName).done()}}}),define("sap.watt.uitools.ide/command/Cloud",[],function(){"use strict";return{execute:function(e,t){var n=t?t:window.open("","Cloud");n.location.href="http://marketplace.saphana.com/p/3334",this.context.service.usagemonitoring.report("IDE","Commands",this.context.self._sName).done()}}}),define("sap.watt.uitools.sapui5clientbuild/service/builder/SAPUI5ClientBuildConfiguration",["sap/watt/common/plugin/platform/service/ui/AbstractConfig"],function(e){"use strict";return e.extend("sap.watt.uitools.plugin.sapui5clientbuild.service.builder.sapui5ClientBuildConfiguration",{_oProjectView:null,_oUserPreferenceView:null,getProjectSettingContent:function(e,t,n){var r=this;return this.context.service.document.getDocumentByPath(n).then(function(e){return r.setGetDefaultConfiguration(e).then(function(t){return r._oProjectView=sap.ui.view({viewName:"sap.watt.uitools.plugin.sapui5clientbuild.ui.builderConfig",type:sap.ui.core.mvc.ViewType.XML,viewData:{context:r.context,projectDocument:e,buildSettings:t}}),r._oProjectView})})},saveProjectSetting:function(){var e=this._oProjectView.getModel().getData();delete e.isDeepStructure;for(var t=0;t<e.excludedFolders.length;t++)""===e.excludedFolders[t]&&e.excludedFolders.splice(t);for(var n=0;t<e.excludedFiles.length;n++)""===e.excludedFiles[n]&&e.excludedFiles.splice(n);return this.setBuildSettings(this._oProjectView.getViewData().projectDocument,e)},getUserPreferenceContent:function(){},saveUserPreference:function(){},_getBuildService:function(){return{getProxyMetadata:function(){return{getName:function(){return"build"}}}}},getBuildSettings:function(e){return this.context.service.setting.project.get(this._getBuildService(),e)},setBuildSettings:function(e,t){return this.context.service.setting.project.set(this._getBuildService(),t,e)},setGetDefaultConfiguration:function(e){var t=this;return Q.spread([e.getCurrentMetadata(!0),this.context.service.ui5projecthandler.getHandlerFilePath(e),this.getBuildSettings(e)],function(n,r,i){return i||(i=r!==e.getEntity().getName()?{buildRequired:!0,lastBuildDateTime:void 0,sourceFolder:t._webappExists(e,n)===!0?"webapp":void 0,targetFolder:"dist",excludedFolders:[],excludedFiles:[]}:{buildRequired:!0,lastBuildDateTime:void 0},t.setBuildSettings(e,i).done()),Q(i)})},_webappExists:function(e,t){for(var n=0;n<t.length;n++){var r=t[n].path.substring(e.getEntity().getName().length+2);if(0===r.indexOf("webapp"))return!0}return!1}})}),define("sap.watt.uitools.sapui5clientbuild/service/builder/ResourceLocator",[],function(){"use strict";function e(e){var t=this,n=e?this.sTargetFolderPath:this.sSourceFolderPath;return this.oContext.service.document.getDocumentByPath(n).then(function(e){if(e)return e.getCurrentMetadata(!0);throw new Error(t.oContext.i18n.getText("i18n","builder_no_source_folder",n))})}function t(e,t){var n={preloadObjectPath:e,preloadObjectContent:t};this.aWrittenResources.push(n)}function n(){return this.aWrittenResources}function r(e){var t=Q.defer(),n=this.oContext.service.document.getDocumentByPath(e).then(function(e){return e.getContent()});return t.resolve(n),t.promise}function i(e){return e.substring(this.sSourceFolderPath.length)}function o(e,t,n,r){this.oProjectDocument=e,this.oContext=t,this.sSourceFolderPath=n,this.sTargetFolderPath=r,this.aWrittenResources=[]}return o.prototype={listResources:e,writeResource:t,getWrittenResources:n,getResourcePath:i,getDocumentContentByPath:r},{ResourceLocator:o}}),define("sap.watt.uitools.sapui5clientbuild/service/builder/PreloadComponentCreator",[],function(){"use strict";function e(){var e=this;return this.oResourceLocator.listResources().then(function(t){function n(t){if(e.aExcludedFiles)for(var n=0;n<e.aExcludedFiles.length;n++)if(t.indexOf("/"+e.aExcludedFiles[n])>-1)return!0;if(e.aExcludedFolders)for(var r=0;r<e.aExcludedFolders.length;r++)if(t.indexOf("/"+e.aExcludedFolders[r])>-1)return!0;return!1}for(var r=0;r<t.length;r++){var i=t[r].path;if(/Component\.js$/.test(i)){var o={moduleName:"Component-preload",ext:".js",indicatorFile:"Component.js",processContent:function(e){return"jQuery.sap.registerPreloadedModules("+e+");"}},a=i.substring(1,i.length-"Component.js".length),s={version:"2.0",name:e.sNamespace+"/"+o.moduleName,modules:{}},u=[];return t.forEach(function(t){var r=e.oResourceLocator.getResourcePath(t.path);if(r.match(/\.(js|(view|fragment)\.(xml|html|json))$/)&&!n(r)){var i=e.oResourceLocator.getDocumentContentByPath(t.path).then(function(t){s.modules[e.sNamespace+r]=t});u.push(i)}}),Q.allSettled(u).then(function(){var t=JSON.stringify(s,null,"	");"function"==typeof o.processContent&&(t=o.processContent(t));var n=a+o.moduleName+o.ext;return e.oResourceLocator.writeResource(n,t)})}}})}function t(e,t,n,r){this.oResourceLocator=e,this.sNamespace=t.replace(/\./g,"/"),this.aExcludedFolders=n,this.aExcludedFiles=r}return t.prototype={create:e},{PreloadComponentCreator:t}}),define("sap.watt.uitools.sapui5clientbuild/service/builder/ResourcesJsonCreator",[],function(){"use strict";function e(){var e=this,t={resources:[]};return this.oResourceLocator.listResources(!0).then(function(n){function r(e){var t=e.split(".");return t.length>1?t.pop():""}for(var i=0;i<n.length;i++){var o=n[i].name,a=n[i].path,s=r(n[i].path);if(n[i].folder===!1&&-1===a.indexOf(".git")&&"sap-ui-cachebuster-info.json"!==o){var u={};if(u.name=a.substring(e.sTargetFolderPath.length+1),("Component-preload.js"===o||"resources.json"===o)&&(u.merged=!0),"properties"===s&&o.indexOf("i18n")>-1?u.raw="i18n/i18n.properties":"properties"===s&&o.indexOf("messageBundle")>-1&&(u.raw="messageBundle.properties"),u.raw){var c=o.indexOf("_"),l=o.indexOf(".properties");c>-1&&l>-1&&(n.locale=o.substring(c,l))}t.resources.push(u)}}return JSON.stringify(t,null,4)})}function t(e,t){this.oResourceLocator=e,this.sTargetFolderPath=t}return t.prototype={create:e},{ResourcesJsonCreator:t}}),define("sap.watt.uitools.sapui5clientbuild/service/builder/SAPUI5ClientBuilder",["./ResourceLocator","./PreloadComponentCreator","./ResourcesJsonCreator","sap/watt/lib/lodash/lodash"],function(e,t,n,r){"use strict";return{DEFAULT_TARGET_FOLDER:"dist",DEFAULT_SOURCE_TEST_FOLDER:"test",DEFAULT_TARGET_TEST_FOLDER:"test-resources",build:function(r){var i=this;return Q.spread([this.getSourceFolderPath(r),this.getTargetFolderPath(r),this._getBuildSettings(r)],function(o,a,s){return i._getSourceProjectDocument(o,r).then(function(u){return i.context.service.ui5projecthandler.getAppNamespace(u).then(function(c){var l=new e.ResourceLocator(u,i.context,o,a),p=s?s.excludedFolders:null,f=s?s.excludedFiles:null,d=new t.PreloadComponentCreator(l,c,p,f),h=new n.ResourcesJsonCreator(l,a);return d.create().then(function(){var e=l.getWrittenResources();return a!==u.getEntity().getFullPath()?i._createTargetFolder(e,o,a,u,r):i._createPreloadComponent(o,a,e)}).then(function(){return h.create().then(function(e){return i._createResourcesJson(a,e).then(function(){return i._updateRelativePathsInCopiedFiles(r,e,a).then(function(){return r.refresh()})})})})})})})},getTargetFolderByProjectSettings:function(e){return e.build&&e.build.targetFolder?e.build.targetFolder:null},getTargetFolder:function(e){var t=this;return this.getTargetFolderPath(e).then(function(e){return t.context.service.document.getDocumentByPath(e)})},getSourceFolder:function(e){var t=this;return this.getSourceFolderPath(e).then(function(e){return t.context.service.document.getDocumentByPath(e)})},getSourceFolderPath:function(e){var t=e.getEntity().getFullPath();return this._getBuildSettings(e).then(function(e){return e&&e.sourceFolder?0===e.sourceFolder.indexOf("/")?e.sourceFolder:t+"/"+e.sourceFolder:t})},getSourceFolderFromProject:function(e){return this._getBuildSettings(e).then(function(e){return e&&e.sourceFolder?e.sourceFolder:""})},getTargetFolderPath:function(e){var t=this;return this.getSourceFolderPath(e).then(function(n){return e.getEntity().getFullPath()===n?e.getEntity().getFullPath():t._getTargetFolderName(e).then(function(t){return 0===t.indexOf("/")?t:e.getEntity().getFullPath()+"/"+t})})},setLastBuildDateTime:function(e){var t=this;return this._getBuildSettings(e).then(function(n){return n||(n={}),n.lastBuildDateTime=(new Date).toUTCString(),n.buildRequired=!1,t._setBuildSettings(e,n)})},isBuildRequired:function(e){return this._getBuildSettings(e).then(function(e){return e&&void 0!==e.buildRequired?Q(e.buildRequired):Q(!0)})},setIsBuildRequired:function(e,t){var n=this,r=e.params.document,i=r.getEntity().getName(),o=this._isGeneratedFile(i);".project.json"!==i&&".user.project.json"!==i&&"neo-app.json"!==i&&(o||n.getSourceFolder(t).then(function(e){var i=r.getEntity().getFullPath();0===i.indexOf(e.getEntity().getFullPath())&&n._setBuildRequired(t,!0).done()})),"deleted"===e.name&&n.getTargetFolderPath(t).then(function(e){(r.getEntity().getFullPath()===e||o)&&n._setBuildRequired(t,!0).done()})},_getTargetFolderName:function(e){var t=this;return this._getBuildSettings(e).then(function(n){return n&&n.targetFolder?n.targetFolder:(n.targetFolder=t.DEFAULT_TARGET_FOLDER,t._setBuildSettings(e,n).then(function(){return t.DEFAULT_TARGET_FOLDER}))})},_setBuildRequired:function(e,t){var n=this;return this._getBuildSettings(e).then(function(r){return r||(r={}),r.buildRequired=t,n._setBuildSettings(e,r)})},_getGeneratedFileNames:function(){return["Component-preload.js","resources.json"]},_isGeneratedFile:function(e){var t=this._getGeneratedFileNames(),n=r.findIndex(t,function(t){return t===e});return n>-1?!0:!1},_createTargetFolder:function(e,t,n,r,i){var o=this;return this.context.service.document.getDocumentByPath(t).then(function(t){return o.context.service.document.getDocumentByPath(n).then(function(n){return n?o._deleteTargetFolderContent(n).then(function(){return o._copySourceToTarget(r,i,t,n,e)}):o._getTargetFolderName(i).then(function(n){return i.createFolder(n).then(function(n){return o.context.service.git.setIgnore(n.getEntity()).then(function(){return o._copySourceToTarget(r,i,t,n,e)})})})})})},_copySourceToTarget:function(e,t,n,r,i){var o=this;return this._getBuildSettings(t).then(function(a){var s=r.getEntity().getName();return o._copyFolderContent(n,t,s).then(function(){var s=n.getEntity().getFullPath(),u=r.getEntity().getFullPath();return o._createPreloadComponent(s,u,i).then(function(){return o._createRuntimeNeoApp(e,t,n,r).then(function(){var e=[],t=[];return a.excludedFolders&&a.excludedFolders.forEach(function(t){e.push(o.context.service.document.getDocumentByPath(u+"/"+t).then(function(e){return e?e.delete():void 0}))}),a.excludedFiles&&a.excludedFiles.forEach(function(e){t.push(o.context.service.document.getDocumentByPath(u+"/"+e).then(function(e){return e?e.delete():void 0}))}),0===t.length?Q.all(e):(Q.all(e).then(function(){return Q.all(t)}),void 0)})})})})},_createRuntimeNeoApp:function(e,t,n,r){var i=this,o=n.getEntity().getProjectRelativePath(),a=e.getEntity().getFullPath()+"/neo-app.json";return i.context.service.filesystem.documentProvider.getDocument(a).then(function(e){return e?e.getContent().then(function(e){var t=JSON.parse(e),n=t.routes;for(var a in n)0===n[a].path.indexOf(o)&&(n[a].path=n[a].path.substring(o.length));var s=t.welcomeFile;s&&0===s.indexOf(o)&&(t.welcomeFile=s.substring(o.length));var u=JSON.stringify(t);return i.context.service.beautifier.beautify(u).then(function(e){return r.createFile("neo-app.json").then(function(t){return t.setContent(e).then(function(){return t.save()})})})}):Q})},_createPreloadComponent:function(e,t,n){var r=this,i=[];return n.forEach(function(n){var o="/"+n.preloadObjectPath;e!==t&&(o=o.replace(e,t));var a=o.split("/"),s=a[a.length-1],u=o.substring(0,o.length-(s.length+1));i.push(r.context.service.document.getDocumentByPath(u).then(function(e){var t=e.getEntity().getFullPath()+"/"+s;return r.context.service.document.getDocumentByPath(t).then(function(t){var i=r.context.i18n.getText("i18n","builder_preloadCompAutoGeneratedText");return n.preloadObjectContent=i+n.preloadObjectContent,t?t.setContent(n.preloadObjectContent).then(function(){return t.save()}):e.createFile(s).then(function(e){return e.setContent(n.preloadObjectContent).then(function(){return e.save()})})})}))}),Q.allSettled(i)},_createResourcesJson:function(e,t){var n=this,r="resources.json",i=e+"/"+r;return n.context.service.document.getDocumentByPath(i).then(function(i){return i?i.setContent(t).then(function(){return i.save()}):n.context.service.document.getDocumentByPath(e).then(function(e){return e.createFile(r).then(function(e){return e.setContent(t).then(function(){return e.save()})})})})},_updateRelativePathsInCopiedFiles:function(e,t,n){var i=this;return this.context.service.ui5projecthandler.isManifestProjectGuidelinesType(e).then(function(o){return o?Q.spread([i._getTargetFolderName(e),i.getSourceFolderFromProject(e)],function(e,o){var a=JSON.parse(t),s=r.filter(a.resources,function(e){return"manifest.json"===e.name||r.endsWith(e.name,"/manifest.json")});if(1!==s.length)throw Error("The project contains multiple manifest.json files");r.dropRight(s[0].name.split("/"));var u=n+"/"+s[0].name;return i.context.service.document.getDocumentByPath(u).then(function(e){return e.getContent().then(function(t){var n=JSON.parse(t);if(n["sap.platform.hcp"]&&(n["sap.platform.hcp"].uri="/"),n["sap.platform.abap"]){var r=n["sap.platform.abap"].uri;if(o&&""!==o){var i=r.lastIndexOf(o);-1!==i&&(n["sap.platform.abap"].uri="/")}}return e.setContent(JSON.stringify(n,null,4)).then(function(){return e.save()})})})}):void 0})},_getBuildService:function(){return{getProxyMetadata:function(){return{getName:function(){return"build"}}}}},_getBuildSettings:function(e){return this.context.service.setting.project.get(this._getBuildService(),e)},_setBuildSettings:function(e,t){return this.context.service.setting.project.set(this._getBuildService(),t,e)},_getSourceProjectDocument:function(e,t){var n=e.substring(1),r="/"+n.substring(0,n.indexOf("/")),i=t.getEntity().getFullPath();
return r===i||e===i?Q(t):this.context.service.document.getDocumentByPath(r)},_deleteTargetFolderContent:function(e){return this.context.service.document.getContainedDocuments(e).then(function(e){for(var t=[],n=0;n<e.length;n++)".project.json"!==e[n].getEntity().getName()&&t.push(e[n].delete());return Q.all(t)})},_copyFolderContent:function(e,t,n){return t.getEntity().getName()===n?e.getFolderContent().then(function(e){for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(i.copy(t,i.getEntity().getName(),!0))}return Q.all(n)}):e.copy(t,n,!0)}}}),define("sap/watt/config-preload",function(){});