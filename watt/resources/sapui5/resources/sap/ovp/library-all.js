(function(){"use strict";sap.ui.controller("sap.ovp.cards.charts.bubble.BubbleChart",{onInit:function(){var v=this.getView().byId("bubbleChartCard");v.setVizProperties({valueAxis:{title:{visible:true},label:{formatString:"yValueAxisFormatter"}},valueAxis2:{title:{visible:true},label:{formatString:"yValueAxisFormatter"}},categoryAxis:{title:{visible:true},label:{formatString:"yValueAxisFormatter"}},legend:{isScrollable:false},title:{visible:false},interaction:{noninteractiveMode:true,selectability:{legendSelection:false,axisLabelSelection:false,mode:"NONE",plotLassoSelection:false,plotStdSelection:false}}});sap.ovp.cards.charts.Utils.formatChartYaxis();sap.ovp.cards.charts.Utils.AnalyticalCardHandler.call(this,v);},onBeforeRendering:function(){var v=this.getView().byId("bubbleChartCard");var b=v.getDataset().getBinding("data");b.attachDataReceived(function(){sap.ovp.cards.charts.Utils.hideDateTimeAxis(v,"valueAxis");});}});})();(function(){"use strict";sap.ui.controller("sap.ovp.cards.charts.donut.DonutChart",{onInit:function(){var m=[];var d=[];var v=this.getView().byId("donutChartCard");var a=v.getDataset().getMeasures();var b=v.getDataset().getDimensions();m.push(a[0].getName());d.push(b[0].getName());v.addFeed(new sap.viz.ui5.controls.common.feeds.FeedItem({'uid':"size",'type':"Measure",'values':m}));v.addFeed(new sap.viz.ui5.controls.common.feeds.FeedItem({'uid':"color",'type':"Dimension",'values':d}));v.setVizProperties({size:{title:{visible:false}},color:{title:{visible:false}},legend:{isScrollable:false},title:{visible:false},interaction:{noninteractiveMode:true,selectability:{legendSelection:false,axisLabelSelection:false,mode:"NONE",plotLassoSelection:false,plotStdSelection:false}}});sap.ovp.cards.charts.Utils.formatChartYaxis();sap.ovp.cards.charts.Utils.AnalyticalCardHandler.call(this,v);}});})();(function(){"use strict";sap.ui.controller("sap.ovp.cards.charts.line.LineChart",{onInit:function(){var v=this.getView().byId("lineChartCard");v.setVizProperties({valueAxis:{title:{visible:true},label:{formatString:"yValueAxisFormatter"}},categoryAxis:{title:{visible:true},label:{formatString:"yValueAxisFormatter"}},legend:{isScrollable:false},title:{visible:false},interaction:{noninteractiveMode:true,selectability:{legendSelection:false,axisLabelSelection:false,mode:"NONE",plotLassoSelection:false,plotStdSelection:false}}});sap.ovp.cards.charts.Utils.formatChartYaxis();sap.ovp.cards.charts.Utils.AnalyticalCardHandler.call(this,v);},onBeforeRendering:function(){var v=this.getView().byId("lineChartCard");var b=v.getDataset().getBinding("data");b.attachDataReceived(function(){sap.ovp.cards.charts.Utils.hideDateTimeAxis(v,"categoryAxis");});}});})();(function(){"use strict";sap.ui.controller("sap.ovp.cards.image.Image",{onInit:function(){},onListItemPress:function(e){this.doIntentBasedNavigation(e.getSource().getBindingContext());}});})();(function(){"use strict";sap.ui.controller("sap.ovp.cards.list.List",{maxValue:-1,onInit:function(){},onListItemPress:function(e){this.doIntentBasedNavigation(e.getSource().getBindingContext());},normalizeValueToPercentage:function(v){var e=this.getEntityType(),a=this.getCardPropertiesModel().getProperty("/annotationPath"),r=e[a],c=this.getMetaModel().createBindingContext(e.$path+"/"+a);if(sap.ovp.cards.AnnotationHelper.isFirstDataPointPercentageUnit(c,r)){return parseInt(v,10);}var m=this._getMaxValue();if(v>m){return 100;}else{var V=(parseInt(v,10)*100)/m;if(V!=0){return V;}else{return 0.5;}}},_getMaxValue:function(){if(this.maxValue!=-1){return this.maxValue;}var e=this.getEntityType(),a=this.getCardPropertiesModel().getProperty("/annotationPath"),r=e[a],c=this.getMetaModel().createBindingContext(e.$path+"/"+a);var d=sap.ovp.cards.AnnotationHelper.getFirstDataPointValue(c,r);var b=this.getView().byId("ovpList"),l=b.getBinding("items"),f=l.getCurrentContexts();for(var i=0;i<f.length;i++){if(parseInt(f[i].getObject()[d],10)>this.maxValue){this.maxValue=parseInt(f[i].getObject()[d],10);}}return this.maxValue;},getCardItemsBinding:function(){var l=this.getView().byId("ovpList");return l.getBinding("items");}});})();(function(){"use strict";sap.ui.controller("sap.ovp.cards.loading.Loading",{onInit:function(){},onAfterRendering:function(){var v=this.getView();v.addStyleClass("sapOvpLoadingCard");setTimeout(function(){this.addStyleClass('sapOvpLoadingCardAnimation');}.bind(v),1000);var l=v.byId("ovpLoadingFooter");setTimeout(function(){l.setBusy(true);},6000);setTimeout(function(){this.setBusy(false);this.setText(sap.ui.getCore().getLibraryResourceBundle("sap.ovp").getText("cannotLoadCard"));}.bind(l),9000);}});})();(function(){"use strict";sap.ui.controller("sap.ovp.cards.table.Table",{onInit:function(){},onColumnListItemPress:function(e){this.doIntentBasedNavigation(e.getSource().getBindingContext());},getCardItemsBinding:function(){var t=this.getView().byId("ovpTable");return t.getBinding("items");}});})();jQuery.sap.declare('sap.ovp.library-all');jQuery.sap.declare('sap.ovp.cards.charts.bubble.BubbleChart.controller');jQuery.sap.declare('sap.ovp.cards.charts.donut.DonutChart.controller');jQuery.sap.declare('sap.ovp.cards.charts.line.LineChart.controller');jQuery.sap.declare('sap.ovp.cards.image.Image.controller');jQuery.sap.declare('sap.ovp.cards.list.List.controller');jQuery.sap.declare('sap.ovp.cards.loading.Loading.controller');jQuery.sap.declare('sap.ovp.cards.table.Table.controller');if(!jQuery.sap.isDeclared('sap.ovp.app.Component')){(function(){"use strict";jQuery.sap.declare("sap.ovp.app.Component");jQuery.sap.require('sap.ui.model.odata.AnnotationHelper');sap.ui.core.UIComponent.extend("sap.ovp.app.Component",{metadata:{properties:{"cardContainerFragment":{"type":"string","defaultValue":"sap.ovp.app.CardContainer"}},version:"1.32.5",library:"sap.ovp.app",dependencies:{libs:["sap.m","sap.ui.comp","sap.uxap"],components:[]},config:{fullWidth:true,hideLightBackground:true}},createContent:function(){var o=this.getMetadata().getManifestEntry("sap.ovp");var a=this.getMetadata().getManifestEntry("sap.app");var u=this.getMetadata().getManifestEntry("sap.ui");var i=jQuery.sap.getObject("icons.icon",undefined,u);var c=this.getMetadata().getComponentName();o.baseUrl=jQuery.sap.getModulePath(c);var b=new sap.ui.model.json.JSONModel(o);b.setProperty("/title",jQuery.sap.getObject("title",undefined,a));b.setProperty("/description",jQuery.sap.getObject("description",undefined,a));b.setProperty("/cardContainerFragment",this.getCardContainerFragment());if(i){if(i.charAt(0)!=='/'){i=o.baseUrl+"/"+i;}b.setProperty("/icon",i);}var C=o.cards;var d=[];var e;for(var f in C){if(C.hasOwnProperty(f)){e=C[f];e.id=f;d.push(e);}}d.sort(function(g,h){if(g.id<h.id){return-1;}else if(g.id>h.id){return 1;}else{return 0;}});b.setProperty("/cards",d);this.setModel(b,"ui");this.setModel(this.getModel(o.globalFilterModel));return sap.ui.view({height:"100%",preprocessors:{xml:{bindingContexts:{ui:b.createBindingContext("/")},models:{ui:b}}},type:sap.ui.core.mvc.ViewType.XML,viewName:"sap.ovp.app.Main"});}});}());};if(!jQuery.sap.isDeclared('sap.ovp.cards.ActionUtils')){(function(){"use strict";jQuery.sap.declare("sap.ovp.cards.ActionUtils");sap.ovp.cards.ActionUtils={};sap.ovp.cards.ActionUtils.getActionInfo=function(c,a,e){function b(P,e,m){if(e&&P&&!P["com.sap.vocabularies.Common.v1.Label"]){var o=m.getODataProperty(e,P.name,false);if(o&&o["com.sap.vocabularies.Common.v1.Label"]){P["com.sap.vocabularies.Common.v1.Label"]=o["com.sap.vocabularies.Common.v1.Label"];}else if(o&&o["sap:label"]){P["sap:label"]=o["sap:label"];}}}var g=function(e){var K={};if(e&&e.key&&e.key.propertyRef){for(var i=0;i<e.key.propertyRef.length;i++){var s=e.key.propertyRef[i].name;K[s]=true;}}return K;};var m=c.getModel().getMetaModel();var f=a.action.split('/')[1];var C=c.getObject();var d={oContext:c,sFunctionImportPath:a.action,sFunctionLabel:a.label,oFunctionImport:m.getODataFunctionImport(f),parameterData:{},allParameters:[]};var p;if(d.oFunctionImport.parameter){var k=g(e);for(var i=0;i<d.oFunctionImport.parameter.length;i++){var P=d.oFunctionImport.parameter[i];b(P,e,m);if(k[P.name]){P.isKey=true;}if(typeof P.nullable==='undefined'){P.nullable=true;}if(C.hasOwnProperty(P.name)){p=C[P.name];}else{p="";}d.parameterData[P.name]=p;d.allParameters.push(P);}}return d;};sap.ovp.cards.ActionUtils.buildParametersForm=function(a,o){function g(p){var L="";if(p["com.sap.vocabularies.Common.v1.Label"]){L=p["com.sap.vocabularies.Common.v1.Label"].String;}else if(p["sap:label"]){L=p["sap:label"];}else{L=p.name;}return L;}jQuery.sap.require("sap.ui.layout.form.SimpleForm");jQuery.sap.require("sap.ui.comp.smartfield.SmartField");var f=new sap.ui.layout.form.SimpleForm({editable:true});var F=[];for(var i=0;i<a.allParameters.length;i++){var p=a.allParameters[i];var P=g(p);var b='{/'+p.name+'}';var j=null;var e=p.type;var m=p.maxLength?parseInt(p.maxLength,10):undefined;if(e==='Edm.Boolean'){j=sap.ui.comp.smartfield.JSONType.Boolean;}else if(e==='Edm.Byte'||e==='Edm.SByte'||e==='Edm.Int16'||e==='Edm.Int32'){j=sap.ui.comp.smartfield.JSONType.Integer;}else{j=sap.ui.comp.smartfield.JSONType.String;}var c=sap.ovp.cards.ActionUtils._isMandatoryParameter(p);var d=new sap.ui.comp.smartfield.SmartField({value:b,mandatory:c,jsontype:j,maxLength:m,editable:!p.isKey});d.attachChange(o);F.push(d);var l=new sap.ui.comp.smartfield.SmartLabel();l.setRequired(c&&!p.isKey);l.setText(P);l.setLabelFor(d);f.addContent(l);f.addContent(d);}return f;};sap.ovp.cards.ActionUtils.getParameters=function(p,f){var a=sap.ovp.cards.ActionUtils._validateParametersValue(p,f);return a.preparedParameterData;};sap.ovp.cards.ActionUtils.mandatoryParamsMissing=function(p,f){var v=sap.ovp.cards.ActionUtils._validateParametersValue(p,f);return v.missingMandatoryParameters&&v.missingMandatoryParameters.length>0;};sap.ovp.cards.ActionUtils._validateParametersValue=function(p,f){var m=[];var M=p.getObject('/');var P={};var v,a;for(var i=0;i<f.parameter.length;i++){var o=f.parameter[i];var s=o.name;if(M.hasOwnProperty(s)){v=M[s];a=sap.ovp.cards.ActionUtils._isMandatoryParameter(o);if(v===undefined||v===""){if(a){if(o.type==='Edm.Boolean'){P[s]=false;}else{m.push(o);}}}else{P[s]=v;}}else{throw new Error("Unknown parameter: "+s);}}return{preparedParameterData:P,missingMandatoryParameters:m};};sap.ovp.cards.ActionUtils._isMandatoryParameter=function(p){return!sap.ovp.cards.ActionUtils._toBoolean(p.nullable);};sap.ovp.cards.ActionUtils._toBoolean=function(p){if(typeof p==="string"){var v=p.toLowerCase();return!(v=="false"||v==""||v==" ");}return!!p;};}());};if(!jQuery.sap.isDeclared('sap.ovp.cards.AnnotationHelper')){
// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ovp.cards.AnnotationHelper");sap.ovp.cards.AnnotationHelper={};sap.ovp.cards.AnnotationHelper.formatFunctions={count:0};function g(C,K){if(C.getSetting){var a=C.getSetting("_ovpCache");return a[K];}return undefined;}function s(C,K,v){if(C.getSetting){var a=C.getSetting("_ovpCache");a[K]=v;}}function c(a){var S="None";if(a&&a.EnumMember){var v=a.EnumMember;if(e(v,'Negative')){S="Error";}else if(e(v,'Critical')){S="Warning";}else if(e(v,'Positive')){S="Success";}}return S;}function e(S,a){return S.indexOf(a,S.length-a.length)!==-1;}function d(a){return function(v){v=parseInt(v,10);var D=a.ImprovementDirection.EnumMember;var C={};if(e(D,"Minimize")){var i=a.DeviationRangeHighValue.Int;var T=a.ToleranceRangeHighValue.Int;if(v<=T){C.EnumMember="Positive";}else if(v>i){C.EnumMember="Negative";}else{C.EnumMember="Critical";}}else if(e(D,"Maximize")){var i=parseInt(a.DeviationRangeLowValue.Int,10);var T=parseInt(a.ToleranceRangeLowValue.Int,10);if(v>=T){C.EnumMember="Positive";}else if(v<i){C.EnumMember="Negative";}else{C.EnumMember="Critical";}}else if(e(D,"Target")){var b=a.DeviationRangeLowValue.Int;var u=a.DeviationRangeHighValue.Int;var w=a.ToleranceRangeLowValue.Int;var x=a.ToleranceRangeHighValue.Int;if(v>=w&&v<=x){C.EnumMember="Positive";}else if(v<b||v>u){C.EnumMember="Negative";}else{C.EnumMember="Critical";}}return c(C);};}function f(C,a){var b=C.getPath()+"-DataFields-Sorted";var S=g(C,b);if(!S){var D=h(C,a);var i=D.map(function(u){return u.Value.Path;});var S=a.filter(function(u){if(u.RecordType==="com.sap.vocabularies.UI.v1.DataField"&&i.indexOf(u.Value.Path)===-1){return true;}return false;});n(S);s(C,b,S);}return S;}function h(C,a){var b=C.getPath()+"-DataPoints-Sorted";var S=g(C,b);if(!S){var S=a.filter(function(u){if(u.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&u.Target.AnnotationPath.match(/@com.sap.vocabularies.UI.v1.DataPoint.*/)){return true;}return false;});n(S);for(var i=0;i<S.length;i++){var T=S[i].Target.AnnotationPath.slice(1);var E=C.getPath().substr(0,C.getPath().lastIndexOf("/")+1);var P=E+T;S[i]=C.getModel().getProperty(P);}s(C,b,S);}return S;}function j(C,a){var b=C.getPath()+"-Actions-Sorted";var S=g(C,b);if(!S){var S=k(a);s(C,b,S);}return S;}function k(C){var S=C.filter(function(i){return i.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction";});n(S);return S;}function l(C){var S=C.filter(function(i){return i.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation";});n(S);return S;}function m(D){var i;if(D["com.sap.vocabularies.UI.v1.Importance"]){i=D["com.sap.vocabularies.UI.v1.Importance"].EnumMember;}return i;}function n(C){C.sort(function(a,b){var i=m(a),I=m(b);if(i===I){return 0;}if(i==="com.sap.vocabularies.UI.v1.ImportanceType/High"){return-1;}else if(I==="com.sap.vocabularies.UI.v1.ImportanceType/High"){return 1;}else if(i==="com.sap.vocabularies.UI.v1.ImportanceType/Medium"){return-1;}else if(I==="com.sap.vocabularies.UI.v1.ImportanceType/Medium"){return 1;}else if(i==="com.sap.vocabularies.UI.v1.ImportanceType/Low"){return-1;}else if(I==="com.sap.vocabularies.UI.v1.ImportanceType/Low"){return 1;}return-1;});return C;}function o(C,a,i){var b=f(C,a)[i];if(b){return sap.ui.model.odata.AnnotationHelper.format(C,b.Value);}return"";}function p(C,a,i){var b=f(C,a)[i];if(b){return b.Label.String;}return"";}function q(C,a,i){var b=h(C,a)[i];if(b&&b.Title){return b.Title.String;}return"";}function r(C,a,i){var b=h(C,a)[i];if(b){return sap.ui.model.odata.AnnotationHelper.format(C,b.Value);}return"";}function t(C,a,i){var D=h(C,a);var S="None";if(D.length>i){var b=D[i];if(b.Criticality){S=c(b.Criticality);}else if(b.CriticalityCalculation){var F=sap.ui.model.odata.AnnotationHelper.format(C,b.Value);var P=F.match(/path *: *'.*?',/g);if(P){var u=d(b.CriticalityCalculation);sap.ovp.cards.AnnotationHelper.formatFunctions.count++;var N="formatCriticalityCalculation"+sap.ovp.cards.AnnotationHelper.formatFunctions.count;sap.ovp.cards.AnnotationHelper.formatFunctions[N]=u;S="{"+P+" formatter: 'sap.ovp.cards.AnnotationHelper.formatFunctions."+N+"'}";}}}return S;}sap.ovp.cards.AnnotationHelper.formatItems=function(C,E){var S=C.getSetting('ovpCardProperties').oData;var a=E["com.sap.vocabularies.Common.v1.SortOrder"];var b=false,u,v,w,x,y;if(S.sortBy){b=true;y="";v=S.sortBy;if(S.sortOrder){if(S.sortOrder.toLowerCase()==='descending'){x=true;}else{x=false;}}else{x=true;}y="{path: '"+v+"',descending: "+x+"}";}else if(a){b=true;y="";u;for(var i=0;i<a.length;i++){u=a[i];v=u.Property.PropertyPath;w=u.Descending?u.Descending.Value:'false';y=y+"{path: '"+v+"',descending: "+w+"},";}y=y.substring(0,y.length-1);}var z="{path: '/"+E.name+"', length: 5";if(b){z=z+", sorter: ["+y+"]";}z=z+"}";return z;};sap.ovp.cards.AnnotationHelper.formatUrl=function(C,u){if(u.charAt(0)==='/'||u.indexOf("http")===0){return u;}var b=C.getModel().getProperty("/baseUrl");if(b){return b+"/"+u;}return u;};sap.ovp.cards.AnnotationHelper.getDataPointsCount=function(C,a){var D=h(C,a);return D.length;};sap.ovp.cards.AnnotationHelper.getFirstDataPointValue=function(C,a){return sap.ovp.cards.AnnotationHelper.getDataPointValue(C,a,0);};sap.ovp.cards.AnnotationHelper.getSecondDataPointValue=function(C,a){return sap.ovp.cards.AnnotationHelper.getDataPointValue(C,a,1);};sap.ovp.cards.AnnotationHelper.getDataPointValue=function(C,a,i){var D=h(C,a),b=D[i];if(b&&b.Value&&b.Value.Path){return b.Value.Path;}return"";};sap.ovp.cards.AnnotationHelper.getFirstDataFieldName=function(C,a){return p(C,a,0);};sap.ovp.cards.AnnotationHelper.getSecondDataFieldName=function(C,a){return p(C,a,1);};sap.ovp.cards.AnnotationHelper.getThirdDataFieldName=function(C,a){return p(C,a,2);};sap.ovp.cards.AnnotationHelper.formatFirstDataFieldValue=function(C,a){return o(C,a,0);};sap.ovp.cards.AnnotationHelper.formatSecondDataFieldValue=function(C,a){return o(C,a,1);};sap.ovp.cards.AnnotationHelper.formatThirdDataFieldValue=function(C,a){return o(C,a,2);};sap.ovp.cards.AnnotationHelper.formatFourthDataFieldValue=function(C,a){return o(C,a,3);};sap.ovp.cards.AnnotationHelper.formatFifthDataFieldValue=function(C,a){return o(C,a,4);};sap.ovp.cards.AnnotationHelper.formatSixthDataFieldValue=function(C,a){return o(C,a,5);};sap.ovp.cards.AnnotationHelper.getFirstDataPointName=function(C,a){return q(C,a,0);};sap.ovp.cards.AnnotationHelper.getSecondDataPointName=function(C,a){return q(C,a,1);};sap.ovp.cards.AnnotationHelper.getThirdDataPointName=function(C,a){return q(C,a,2);};sap.ovp.cards.AnnotationHelper.formatFirstDataPointValue=function(C,a){return r(C,a,0);};sap.ovp.cards.AnnotationHelper.formatSecondDataPointValue=function(C,a){return r(C,a,1);};sap.ovp.cards.AnnotationHelper.formatThirdDataPointValue=function(C,a){return r(C,a,2);};sap.ovp.cards.AnnotationHelper.formatFirstDataPointState=function(C,a){return t(C,a,0);};sap.ovp.cards.AnnotationHelper.formatSecondDataPointState=function(C,a){return t(C,a,1);};sap.ovp.cards.AnnotationHelper.formatThirdDataPointState=function(C,a){return t(C,a,2);};sap.ovp.cards.AnnotationHelper.hasActions=function(C,a){var b=j(C,a);if(!b||b.length<1){return 0;}return 1;};sap.ovp.cards.AnnotationHelper.getFilteredSortedActions=function(R){var a=k(R);return a;};sap.ovp.cards.AnnotationHelper.getFilteredSortedIntentNavigations=function(R){var i=l(R);return i;};sap.ovp.cards.AnnotationHelper.isFirstDataPointPercentageUnit=function(C,a){var D=h(C,a)[0];if(D&&D.Value&&D.Value.Path){var E=C.getPath().substr(0,C.getPath().lastIndexOf("/")+1);var M=C.getModel();var b=M.getProperty(E);var P=M.getODataProperty(b,D.Value.Path);if(P&&P["Org.OData.Measures.V1.Unit"]){return P["Org.OData.Measures.V1.Unit"].String==="%";}}return false;};sap.ovp.cards.AnnotationHelper.resolveEntityTypePath=function(a){var A=a.getObject();var M=a.getModel();var b=M.getProperty("/metaModel");var E=b.getODataEntitySet(M.getProperty("/entitySet"));var i=b.getODataEntityType(E.entityType);A=i.$path+"/"+A;return b.createBindingContext(A);};sap.ovp.cards.AnnotationHelper.getFirstDataFieldName.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getSecondDataFieldName.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getThirdDataFieldName.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatFirstDataFieldValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatSecondDataFieldValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatThirdDataFieldValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatFourthDataFieldValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatFifthDataFieldValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatSixthDataFieldValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getDataPointsCount.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getFirstDataPointName.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getSecondDataPointName.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getThirdDataPointName.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatFirstDataPointValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatSecondDataPointValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatThirdDataPointValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatFirstDataPointState.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatSecondDataPointState.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatThirdDataPointState.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatItems.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatUrl.requiresIContext=true;sap.ovp.cards.AnnotationHelper.hasActions.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getFirstDataPointValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getSecondDataPointValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.isFirstDataPointPercentageUnit.requiresIContext=true;}());};if(!jQuery.sap.isDeclared('sap.ovp.cards.charts.AggregateNumber')){jQuery.sap.declare('sap.ovp.cards.charts.AggregateNumber');jQuery.sap.require('sap.ui.core.Control');sap.ui.define("sap/ovp/cards/charts/AggregateNumber",["sap/ui/core/Control"],function(C){"use strict";return C.extend("sap.ovp.cards.charts.AggregateNumber",{metadata:{aggregations:{singleton:{type:"sap.ui.core.Element"},content:{multiple:false}}},renderer:function(r,c){r.write("<div");r.writeElementData(c);r.writeClasses();r.write(">");if(c.getContent()){r.renderControl(c.getContent());}r.write("</div>");},updateBindingContext:function(){var b=this.getBinding("singleton");if(b){var t=this;b.attachEventOnce("dataReceived",function(){t.getContent().setBindingContext(this.getContexts()[0]);});}C.prototype.updateBindingContext.apply(this,arguments);}});},true);};if(!jQuery.sap.isDeclared('sap.ovp.cards.charts.Utils')){(function(){"use strict";jQuery.sap.declare("sap.ovp.cards.charts.Utils");sap.ovp.cards.charts.Utils=sap.ovp.cards.charts.Utils||{};sap.ovp.cards.charts.Utils.constants={DPQUALIFIER_KEY:"dataPointAnnotationPath",CHART_QUALIFIER_KEY:"chartAnnotationPath",SELVAR_QUALIFIER_KEY:"selectionAnnotationPath",PREVAR_QUALIFIER_KEY:"presentationAnnotationPath",CHART_DATA_SIZE:"4",DONUT_FRAGMENT:"sap.ovp.cards.charts.donut.DonutChart"};sap.ovp.cards.charts.Utils.getQualifier=function(c,a){if(typeof a==="undefined"||a===null){return"";}var s=c.getSetting('ovpCardProperties');if(!s){return"";}var S=s.oData;if(!S){return"";}var f=S&&S[a]?S[a]:"";return f===""?"":f.split("#")[1];};sap.ovp.cards.charts.Utils.wrapInBraces=function(w){return"{"+w+"}";};sap.ovp.cards.charts.Utils.formDimensionPath=function(d){var e=this.getModel('ovpCardProperties').getProperty("/entityType");var a=sap.ovp.cards.charts.Utils.getEdmTypeOfAll(e);var t=a[d];if(t=="Edm.DateTime"){return"{path:'"+d+"', formatter: 'sap.ovp.cards.charts.Utils.returnDateFormat'}";}else{return"{"+d+"}";}};sap.ovp.cards.charts.Utils.returnDateFormat=function(d){jQuery.sap.require("sap.ui.core.format.DateFormat");var D=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"dd-MMM"});return D.format(new Date(d));};sap.ovp.cards.charts.Utils.formatItems=function(c,e,s,p,D,M){var r="";var a=[];var b=[];var f=[];var F=typeof s!=="undefined";var S=typeof p!=="undefined";if(S){S=typeof p.SortOrder!=="undefined";}r+="{path: '/"+e.name+"'";if(F){var g=[];var h=null;var j=null;if(c&&c.getSetting('ovpCardProperties')){h=c.getSetting('ovpCardProperties').getProperty("/entityType");j=sap.ovp.cards.charts.Utils.getEdmTypeOfAll(h);}if(s&&s.SelectOptions){jQuery.each(s.SelectOptions,function(){var d=this.PropertyName.PropertyPath;jQuery.each(this.Ranges,function(){if(this.Sign.EnumMember==="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I"){var m=this.Low.String;if(j&&(j[d].substring(0,7)==="Edm.Int"||j[d].substring(0,11)==='Edm.Decimal')){m=Number(m);}var t={path:d,operator:this.Option.EnumMember.split("/")[1],value1:m};if(this.High){t.value2=this.High.String;}g.push(t);}});});}r+=", filters: "+JSON.stringify(g);}if(S){var o=p.SortOrder;var k="";var l;var n;var q;for(var i=0;i<o.length;i++){l=o[i];q=l.Property.PropertyPath;f.push(q);if(typeof l.Descending=="undefined"){n='true';}else{n=l.Descending.Boolean.toLowerCase()=='true'?'true':'false';}k=k+"{path: '"+q+"',descending: "+n+"},";}r+=", sorter: ["+k.substring(0,k.length-1)+"]";}jQuery.each(M,function(i,m){b.push(m.Measure.PropertyPath);});jQuery.each(D,function(i,d){a.push(d.Dimension.PropertyPath);});r+=", parameters: {select:'"+a.join(",")+","+b.join(",");if(f.length>0){r+=","+f.join(",");}r+="'}";r+=", length: "+sap.ovp.cards.charts.Utils.constants.CHART_DATA_SIZE+"}";return r;};sap.ovp.cards.charts.Utils.formatItems.requiresIContext=true;sap.ovp.cards.charts.Utils.listGroupBy=function(p){var P=typeof p!=="undefined";if(!P){return"";}var e=this.getModel('ovpCardProperties').getProperty("/entityType");var a=sap.ovp.cards.charts.Utils.getAllColumnLabels(e);var r="";var g;if(p.GroupBy.constructor===Array){g=p.GroupBy;}else{g=p.GroupBy.Collection;}jQuery.each(g,function(){if(typeof a[this.PropertyPath]=="undefined"){return;}r+=a[this.PropertyPath];r+=", ";});if(r[r.length-1]===" "&&r[r.length-2]===","){r=r.substring(0,r.length-2);}return r==""?"":"By "+r;};sap.ovp.cards.charts.Utils.listFilters=function(c,s){var r="";var f=typeof s!=="undefined";if(!f){return r;}if(s&&s.SelectOptions){jQuery.each(s.SelectOptions,function(){jQuery.each(this.Ranges,function(){if(this.Sign.EnumMember==="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I"){r+=this.Low.String;if(this.High){r+="-"+this.High.String;}r+=", ";}});});}if(r[r.length-1]===" "&&r[r.length-2]===","){r=r.substring(0,r.length-2);}return r;};sap.ovp.cards.charts.Utils.listFilters.requiresIContext=true;sap.ovp.cards.charts.Utils.getAggregateNumber=function(c,e,m,s){var a=c.getSetting('ovpCardProperties').getProperty("/entityType");var u=sap.ovp.cards.charts.Utils.getUnitColumn(m,a);var f=typeof s!=="undefined";var b="";if(f){var d=[];var g=null;if(c&&c.getSetting('ovpCardProperties')){g=sap.ovp.cards.charts.Utils.getEdmTypeOfAll(a);}if(s&&s.SelectOptions){jQuery.each(s.SelectOptions,function(){var p=this.PropertyName.PropertyPath;jQuery.each(this.Ranges,function(){if(this.Sign.EnumMember==="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I"){var h=this.Low.String;if(g&&(g[p].substring(0,7)==="Edm.Int"||g[p].substring(0,11)==='Edm.Decimal')){h=Number(h);}var i={path:p,operator:this.Option.EnumMember.split("/")[1],value1:h};if(this.High){i.value2=this.High.String;}d.push(i);}});});}b+=", filters: "+JSON.stringify(d);}if(!u){return"{path: '/"+e.name+"'"+", parameters:{select:'"+m+"'}"+b+"}";}return"{path: '/"+e.name+"'"+", parameters:{select:'"+m+","+u+"'}"+b+"}";};sap.ovp.cards.charts.Utils.getAggregateNumber.requiresIContext=true;sap.ovp.cards.charts.Utils.getFormattedNumber=function(v,U){var o=this.getModel("ovpCardProperties");if(!o){return;}var f=o.getProperty("/"+sap.ovp.cards.charts.Utils.constants.DPQUALIFIER_KEY);var e=o.getProperty("/entityType");var m=e[f].Value.Path;var i=sap.ovp.cards.charts.Utils.isACurrency(m,e);if(i){var c=sap.ui.core.format.NumberFormat.getCurrencyInstance({style:'short',showMeasure:false});return c.format(Number(v),U);}var d=Number(e[f].NumberFormat.NumberOfFractionalDigits.Int);var n=sap.ui.core.format.NumberFormat.getFloatInstance({style:'short',minFractionDigits:d,maxFractionDigits:d});return n.format(Number(v));};sap.ovp.cards.charts.Utils.returnSemanticColorForAggregateNumber=function(a){a=Number(a);var o=this.getModel("ovpCardProperties");if(!o){return;}var f=o.getProperty("/"+sap.ovp.cards.charts.Utils.constants.DPQUALIFIER_KEY);var d=o.getProperty("/entityType")[f];var i=d.CriticalityCalculation.ImprovementDirection.EnumMember.split("/")[1];var D,T,b,c;if(i=="Minimizing"){if(d.CriticalityCalculation.DeviationRangeHighValue&&d.CriticalityCalculation.ToleranceRangeHighValue&&d.CriticalityCalculation.DeviationRangeHighValue.String&&d.CriticalityCalculation.ToleranceRangeHighValue.String){D=Number(d.CriticalityCalculation.DeviationRangeHighValue.String);T=Number(d.CriticalityCalculation.ToleranceRangeHighValue.String);if(a<=T){return"Good";}else if(a>T&&a<=D){return"Critical";}else{return"Error";}}else{return"Neutral";}}else if(i=="Maximizing"){if(d.CriticalityCalculation.ToleranceRangeLowValue&&d.CriticalityCalculation.DeviationRangeLowValue&&d.CriticalityCalculation.ToleranceRangeLowValue.String&&d.CriticalityCalculation.DeviationRangeLowValue.String){b=Number(d.CriticalityCalculation.ToleranceRangeLowValue.String);c=Number(d.CriticalityCalculation.DeviationRangeLowValue.String);if(a>=b){return"Good";}else if(a<b&&a>=c){return"Critical";}else{return"Error";}}else{return"Neutral";}}else{if(d.CriticalityCalculation.DeviationRangeHighValue&&d.CriticalityCalculation.ToleranceRangeHighValue&&d.CriticalityCalculation.ToleranceRangeLowValue&&d.CriticalityCalculation.DeviationRangeLowValue&&d.CriticalityCalculation.DeviationRangeHighValue.String&&d.CriticalityCalculation.ToleranceRangeHighValue.String&&d.CriticalityCalculation.ToleranceRangeLowValue.String&&d.CriticalityCalculation.DeviationRangeLowValue.String){D=Number(d.CriticalityCalculation.DeviationRangeHighValue.String);T=Number(d.CriticalityCalculation.ToleranceRangeHighValue.String);b=Number(d.CriticalityCalculation.ToleranceRangeLowValue.String);c=Number(d.CriticalityCalculation.DeviationRangeLowValue.String);if((a<=T)&&(a>=b)){return"Good";}else if((a>T&&a<=D)||(a<b&&a>=c)){return"Critical";}else{return"Error";}}}};sap.ovp.cards.charts.Utils.returnTrendDirection=function(a){a=Number(a);var o=this.getModel("ovpCardProperties");if(!o){return;}var f=o.getProperty("/"+sap.ovp.cards.charts.Utils.constants.DPQUALIFIER_KEY);var d=o.getProperty("/entityType")[f];var r,u,b;if(!d.TrendCalculation){return;}if(d.TrendCalculation.ReferenceValue){r=Number(d.TrendCalculation.ReferenceValue.String);}if(d.TrendCalculation.UpDifference){u=Number(d.TrendCalculation.UpDifference.Int);}if(d.TrendCalculation.DownDifference){b=Number(d.TrendCalculation.DownDifference.Int);}if(r&&u&&(a-r>=u)){return"Up";}if(r&&b&&(a-r<=b)){return"Down";}};sap.ovp.cards.charts.Utils.returnPercentageChange=function(a){a=Number(a);var o=this.getModel("ovpCardProperties");if(!o){return;}var f=o.getProperty("/"+sap.ovp.cards.charts.Utils.constants.DPQUALIFIER_KEY);var d=o.getProperty("/entityType")[f];var r;if(!d.TrendCalculation){return;}if(d.TrendCalculation.ReferenceValue){r=Number(d.TrendCalculation.ReferenceValue.String);var p=((Number(a)-r)/r);var b=sap.ui.core.format.NumberFormat.getPercentInstance({style:'short',minFractionDigits:2,maxFractionDigits:2});if(p>0){return"+"+b.format(p);}return b.format(p);}};sap.ovp.cards.charts.Utils.formThePathForAggregateNumber=function(d){var m=d.Value.Path;var e=this.getModel('ovpCardProperties').getProperty("/entityType");var u=sap.ovp.cards.charts.Utils.getUnitColumn(m,e);return"{parts: [{path:'"+m+"'}, {path: '"+u+"'}], formatter: 'sap.ovp.cards.charts.Utils.getFormattedNumber'}";};sap.ovp.cards.charts.Utils.formThePathForUOM=function(d){var m=d.Value.Path;var e=this.getModel('ovpCardProperties').getProperty("/entityType");var u=sap.ovp.cards.charts.Utils.getUnitColumn(m,e);if(!u){return"";}return"{"+u+"}";};sap.ovp.cards.charts.Utils.formThePathForAggregateNumberColor=function(d){return"{parts: [{path:'"+d.Value.Path+"'}], formatter: 'sap.ovp.cards.charts.Utils.returnSemanticColorForAggregateNumber'}";};sap.ovp.cards.charts.Utils.formThePathForTrendIcon=function(d){return"{parts: [{path:'"+d.Value.Path+"'}], formatter: 'sap.ovp.cards.charts.Utils.returnTrendDirection'}";};sap.ovp.cards.charts.Utils.formPathForPercentageChange=function(d){return"{parts: [{path:'"+d.Value.Path+"'}], formatter: 'sap.ovp.cards.charts.Utils.returnPercentageChange'}";};sap.ovp.cards.charts.Utils.isACurrency=function(m,e){var p=e.property;for(var i=0,l=p.length;i<l;i++){if(p[i].name==m){if(p[i].hasOwnProperty("Org.OData.Measures.V1.ISOCurrency")){return true;}break;}}return false;};sap.ovp.cards.charts.Utils.getUnitColumn=function(m,e){var p=e.property;for(var i=0,l=p.length;i<l;i++){if(p[i].name==m){if(p[i].hasOwnProperty("sap:unit")){return p[i]["sap:unit"];}break;}}return null;};sap.ovp.cards.charts.Utils.getAllColumnProperties=function(p,e){var f={};var a=e.property;for(var i=0,l=a.length;i<l;i++){if(a[i].hasOwnProperty(p)&&p=="com.sap.vocabularies.Common.v1.Label"){f[a[i].name]=a[i][p].String;}else if(a[i].hasOwnProperty(p)){f[a[i].name]=a[i][p];}else{f[a[i].name]=a[i].name;}}return f;};sap.ovp.cards.charts.Utils.getAllColumnLabels=function(e){return sap.ovp.cards.charts.Utils.getAllColumnProperties("com.sap.vocabularies.Common.v1.Label",e);};sap.ovp.cards.charts.Utils.getAllColumnTexts=function(e){return sap.ovp.cards.charts.Utils.getAllColumnProperties("sap:text",e);};sap.ovp.cards.charts.Utils.getEdmTypeOfAll=function(e){return sap.ovp.cards.charts.Utils.getAllColumnProperties("type",e);};sap.ovp.cards.charts.Utils.formatChartYaxis=function(){jQuery.sap.require("sap.ui.core.format.NumberFormat");var c={locale:function(){},format:function(v,p){if(p=="yValueAxisFormatter"){var n=sap.ui.core.format.NumberFormat.getFloatInstance({style:'short',minFractionDigits:2,maxFractionDigits:2});return n.format(Number(v));}}};jQuery.sap.require("sap.viz.ui5.api.env.Format");sap.viz.ui5.api.env.Format.numericFormatter(c);};sap.ovp.cards.charts.Utils.hideDateTimeAxis=function(v,f){var e=v.getModel('ovpCardProperties').getProperty("/entityType");var a=sap.ovp.cards.charts.Utils.getEdmTypeOfAll(e);var b=v.getFeeds();for(var i=0;i<b.length;i++){if(b[i].getUid()==f){var c=b[i].getValues();for(var j=0;j<c.length;j++){if(a[c[j]]!="Edm.DateTime"){return;}}v.setVizProperties({categoryAxis:{title:{visible:false}}});return;}}};sap.ovp.cards.charts.Utils.LineChart=sap.ovp.cards.charts.Utils.LineChart||{};sap.ovp.cards.charts.Utils.LineChart.categoryAxisFeedList={};sap.ovp.cards.charts.Utils.LineChart.getValueAxisFeed=function(a){var r=[];jQuery.each(a,function(i,m){r.push(m.Measure.PropertyPath);});return r.join(",");};sap.ovp.cards.charts.Utils.LineChart.getCategoryAxisFeed=function(c,a){var r=[];var q;jQuery.each(a,function(i,d){if(d.Role.EnumMember.split("/")[1]==="Category"){r.push(d.Dimension.PropertyPath);}});if(r.length<1){r.push(a[0].Dimension.PropertyPath);}q=sap.ovp.cards.charts.Utils.getQualifier(c,sap.ovp.cards.charts.Utils.constants.CHART_QUALIFIER_KEY);sap.ovp.cards.charts.Utils.LineChart.categoryAxisFeedList[q]=r;return r.join(",");};sap.ovp.cards.charts.Utils.LineChart.getCategoryAxisFeed.requiresIContext=true;sap.ovp.cards.charts.Utils.LineChart.getColorFeed=function(c,a){var r=[];var q;jQuery.each(a,function(i,d){if(d.Role.EnumMember.split("/")[1]==="Series"){r.push(d.Dimension.PropertyPath);}});q=sap.ovp.cards.charts.Utils.getQualifier(c,sap.ovp.cards.charts.Utils.constants.CHART_QUALIFIER_KEY);r=jQuery.grep(r,function(v){if(!sap.ovp.cards.charts.Utils.LineChart.categoryAxisFeedList[q]){return true;}return v!=sap.ovp.cards.charts.Utils.LineChart.categoryAxisFeedList[q][0];});return r.join(",");};sap.ovp.cards.charts.Utils.LineChart.getColorFeed.requiresIContext=true;sap.ovp.cards.charts.Utils.LineChart.testColorFeed=function(c,d){return sap.ovp.cards.charts.Utils.LineChart.getColorFeed(c,d)!=="";};sap.ovp.cards.charts.Utils.LineChart.testColorFeed.requiresIContext=true;sap.ovp.cards.charts.Utils.BubbleChart=sap.ovp.cards.charts.Utils.BubbleChart||{};sap.ovp.cards.charts.Utils.BubbleChart.getMeasurePriorityList=function(a){var r=[null,null,null];jQuery.each(a,function(i,m){if(m.Role.EnumMember.split("/")[1]==="Axis1"){if(r[0]===null){r[0]=m.Measure.PropertyPath;}else if(r[1]===null){r[1]=m.Measure.PropertyPath;}else if(r[2]==null){r[2]=m.Measure.PropertyPath;}}});jQuery.each(a,function(i,m){if(m.Role.EnumMember.split("/")[1]==="Axis2"){if(r[0]===null){r[0]=m.Measure.PropertyPath;}else if(r[1]===null){r[1]=m.Measure.PropertyPath;}else if(r[2]==null){r[2]=m.Measure.PropertyPath;}}});jQuery.each(a,function(i,m){if(m.Role.EnumMember.split("/")[1]==="Axis3"){if(r[0]===null){r[0]=m.Measure.PropertyPath;}else if(r[1]===null){r[1]=m.Measure.PropertyPath;}else if(r[2]==null){r[2]=m.Measure.PropertyPath;}}});return r;};sap.ovp.cards.charts.Utils.BubbleChart.getValueAxisFeed=function(m){return sap.ovp.cards.charts.Utils.BubbleChart.getMeasurePriorityList(m)[0];};sap.ovp.cards.charts.Utils.BubbleChart.getValueAxis2Feed=function(m){return sap.ovp.cards.charts.Utils.BubbleChart.getMeasurePriorityList(m)[1];};sap.ovp.cards.charts.Utils.BubbleChart.getBubbleWidthFeed=function(m){return sap.ovp.cards.charts.Utils.BubbleChart.getMeasurePriorityList(m)[2];};sap.ovp.cards.charts.Utils.BubbleChart.getColorFeed=function(a){var r=[];jQuery.each(a,function(i,d){if(d.Role.EnumMember.split("/")[1]==="Series"){r.push(d.Dimension.PropertyPath);}});return r.join(",");};sap.ovp.cards.charts.Utils.BubbleChart.getShapeFeed=function(a){var r=[];jQuery.each(a,function(i,d){if(d.Role.EnumMember.split("/")[1]==="Category"){r.push(d.Dimension.PropertyPath);}});return r.join(",");};sap.ovp.cards.charts.Utils.BubbleChart.testColorFeed=function(d){return sap.ovp.cards.charts.Utils.BubbleChart.getColorFeed(d)!=="";};sap.ovp.cards.charts.Utils.BubbleChart.testShapeFeed=function(d){return sap.ovp.cards.charts.Utils.BubbleChart.getShapeFeed(d)!=="";};sap.ovp.cards.charts.Utils.AnalyticalCardHandler=function(v){this.sendParameters=0;this.parameterEntityType=undefined;this.entityTypeFunc=this.getEntityType;this._getEntityNavigationParametersFunc=this._getEntityNavigationParameters;this.clickHandler=function(){var p=this.getView().getModel('ovpCardProperties').getData();var a=p.hasOwnProperty("idenfiticationAnnotationPath")?p.idenfiticationAnnotationPath:"com.sap.vocabularies.UI.v1.Identification";var b=[];var e=this.getEntityType();var r=e[a];var c={};this.parameterEntityType={property:[]};for(var i=0;Array.isArray(r)&&i<r.length;i++){if(r[i].RecordType==='com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation'){b.push({semanticObject:r[i].SemanticObject.String,action:r[i].Action.String,label:r[i].Label.String});}if(r[i].RecordType==='com.sap.vocabularies.UI.v1.DataField'){c[r[i].Label.String]=r[i].Value.String;this.parameterEntityType.property.push({name:r[i].Label.String});}}var d={};d.getObject=function(){return c;};this.sendParameters=2;var f=b.length>0?b[0]:undefined;this.doIntentBasedNavigation(d,f);};this._getEntityNavigationParameters=function(e){if(this.sendParameters==2){this.sendParameters=1;}return this._getEntityNavigationParametersFunc.call(this,e);};this.getEntityType=function(){if(this.sendParameters!=1){return this.entityTypeFunc.apply(this);}this.sendParameters=0;return this.parameterEntityType;};this.getView().byId("ovpCardHeader").attachBrowserEvent("click",function(e){e.stopImmediatePropagation();this.clickHandler();}.bind(this));var t=this;v.attachBrowserEvent("click",t.clickHandler,t);};}());};if(!jQuery.sap.isDeclared('sap.ovp.cards.generic.Card.controller')){jQuery.sap.declare('sap.ovp.cards.generic.Card.controller');(function(){"use strict";var A=sap.ovp.cards.ActionUtils;sap.ui.controller("sap.ovp.cards.generic.Card",{onInit:function(){this.getView().byId("ovpCardHeader").attachBrowserEvent("click",this.onHeaderClick.bind(this));},onAfterRendering:function(){var f=this.getCardPropertiesModel().getProperty("/footerFragment");if(f){this._handleActionFooter();this._handleCountFooter();}},onHeaderClick:function(){this.doIntentBasedNavigation(this.getView().getBindingContext());},_handleActionFooter:function(f){var a=this.getView().byId("ovpActionFooter");if(a){var b=a.getContent();b=b.splice(1,b.length);var l=b[0].getLayoutData();l.setMoveToOverflow(false);l.setStayInOverflow(false);if(b.length===2){l=b[1].getLayoutData();l.setMoveToOverflow(false);l.setStayInOverflow(false);}}},_handleCountFooter:function(){var c=this.getView().byId("ovpCountFooter");if(c){var i=this.getCardItemsBinding();if(i){i.attachDataReceived(function(){var t=i.getLength();var C=i.getCurrentContexts().length;var a=sap.ui.getCore().getLibraryResourceBundle("sap.ovp").getText("Count_Footer",[C,t]);c.setText(a);});}}},getCardItemsBinding:function(){},onActionPress:function(e){var s=e.getSource(),c=this._getActionObject(s),a=s.getBindingContext();if(c.type.indexOf("DataFieldForIntentBasedNavigation")!==-1){this.doIntentBasedNavigation(a,c);}else{this.doAction(a,c);}},_getActionObject:function(s){var c=s.getCustomData();var C={};for(var i=0;i<c.length;i++){C[c[i].getKey()]=c[i].getValue();}return C;},doIntentBasedNavigation:function(c,i){var p,n,C,s,o=sap.ushell.Container.getService("CrossApplicationNavigation"),e=c?c.getObject():null;if(!i){i=this.getEntityIntents()[0];}if(o&&i){p=this._getEntityNavigationParameters(e);p.done(function(P){n={target:{semanticObject:i.semanticObject,action:i.action},params:P};C=o.hrefForExternal(n,this.getOwnerComponent(),true);C.done(function(I){s=o.isIntentSupported([I]);s.done(function(t){if(t[I].supported){o.toExternal(n,this.getOwnerComponent());}}.bind(this));}.bind(this));}.bind(this));}},doAction:function(c,a){this.actionData=A.getActionInfo(c,a,this.getEntityType());if(this.actionData.allParameters.length>0){this._loadParametersForm();}else{this._callFunction();}},getEntityIntents:function(a){var I=[];var e=this.getEntityType();if(!a){a='com.sap.vocabularies.UI.v1.Identification';}var r=e[a];for(var i=0;Array.isArray(r)&&i<r.length;i++){if(r[i].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){I.push({semanticObject:r[i].SemanticObject.String,action:r[i].Action.String,label:r[i].Label.String});}}return I;},getModel:function(){return this.getView().getModel();},getMetaModel:function(){return this.getModel().getMetaModel();},getCardPropertiesModel:function(){return this.getView().getModel("ovpCardProperties");},getEntitySet:function(){if(!this.entitySet){var e=this.getCardPropertiesModel().getProperty("/entitySet");this.entitySet=this.getMetaModel().getODataEntitySet(e);}return this.entitySet;},getEntityType:function(){if(!this.entityType){this.entityType=this.getMetaModel().getODataEntityType(this.getEntitySet().entityType);}return this.entityType;},_saveAppState:function(g){var d=jQuery.Deferred();var a=sap.ushell.Container.getService("CrossApplicationNavigation").createEmptyAppState(this.getOwnerComponent());var s=a.getKey();var o={selectionVariant:g};a.setData(o);var S=a.save();S.done(function(){d.resolve(s);});return d.promise();},_getEntityNavigationParameters:function(e){var d=jQuery.Deferred();var r={};var E;var c=this.getOwnerComponent().getComponentData();var g=c?c.globalFilter:undefined;var s;if(e){E=this.getEntityType();var k;for(var i=0;E.property&&i<E.property.length;i++){k=E.property[i].name;if(e.hasOwnProperty(k)){if(typeof e[k]==="string"){r[k]=e[k];}else if(window.Array.isArray(e[k])&&e[k].length===1){r[k]=e[k][0];}}}}if(g){s=this._saveAppState(g.getFilterDataAsString());s.done(function(a){r["sap-xapp-state"]=a;d.resolve(r);});s.fail(function(){jQuery.sap.log.error("appStateKey is not saved for OVP Application");d.resolve(r);});}else{d.resolve(r);}return d.promise();},_loadParametersForm:function(){var p=new sap.ui.model.json.JSONModel();p.setData(this.actionData.parameterData);var t=this;var P=new sap.m.Dialog('ovpCardActionDialog',{title:this.actionData.sFunctionLabel,afterClose:function(){P.destroy();}}).addStyleClass("sapUiNoContentPadding");var a=new sap.m.Button({text:this.actionData.sFunctionLabel,press:function(e){var m=A.getParameters(e.getSource().getModel(),t.actionData.oFunctionImport);P.close();t._callFunction(m);}});var c=new sap.m.Button({text:"Cancel",press:function(){P.close();}});P.setBeginButton(a);P.setEndButton(c);var o=function(e){var m=A.mandatoryParamsMissing(e.getSource().getModel(),t.actionData.oFunctionImport);a.setEnabled(!m);};var f=A.buildParametersForm(this.actionData,o);P.addContent(f);P.setModel(p);P.open();},_callFunction:function(u){var p={batchGroupId:"Changes",changeSetId:"Changes",urlParameters:u,forceSubmit:true,context:this.actionData.oContext,functionImport:this.actionData.oFunctionImport};var t=this;var P=new Promise(function(r,a){var m=t.actionData.oContext.getModel();var f;f="/"+p.functionImport.name;m.callFunction(f,{method:p.functionImport.httpMethod,urlParameters:p.urlParameters,batchGroupId:p.batchGroupId,changeSetId:p.changeSetId,headers:p.headers,success:function(d,R){r(R);},error:function(R){a(R);}});});P.then(function(r){return sap.m.MessageToast.show(sap.ui.getCore().getLibraryResourceBundle("sap.ovp").getText("Toast_Action_Success"),{duration:1000});},function(e){return sap.m.MessageToast.show(sap.ui.getCore().getLibraryResourceBundle("sap.ovp").getText("Toast_Action_Error"),{duration:1000});});}});})();};if(!jQuery.sap.isDeclared('sap.ovp.cards.generic.Component')){(function(){"use strict";jQuery.sap.declare("sap.ovp.cards.generic.Component");jQuery.sap.require('sap.ui.core.UIComponent');sap.ui.core.UIComponent.extend("sap.ovp.cards.generic.Component",{metadata:{properties:{"contentFragment":{"type":"string"},"headerExtensionFragment":{"type":"string"},"contentPosition":{"type":"string","defaultValue":"Middle"},"footerFragment":{"type":"string"}},version:"1.32.5",library:"sap.ovp",includes:[],dependencies:{libs:["sap.m"],components:[]},config:{}},getCustomPreprocessor:function(){},getPreprocessors:function(){var c=this.getComponentData(),s=c.settings,m=c.model,M,e,E;if(m){var M=m.getMetaModel();var o=M.getODataEntitySet(s.entitySet);var a=M.getODataEntityType(o.entityType);var b=M.getODataEntityContainer();var d=0;for(;d<b.entitySet.length;d++){if(b.entitySet[d]===o){break;}}E=M.createBindingContext(b.$path+"/entitySet/"+d);e=M.createBindingContext(a.$path);}var C=this._getCardPropertyDefaults();C=jQuery.extend(true,{metaModel:M,entityType:a},C,s);var O=new sap.ui.model.json.JSONModel(C);var D={xml:{bindingContexts:{entityType:e,entitySet:E},models:{entityType:M,entitySet:M,ovpMeta:M,ovpCardProperties:O},ovpCardProperties:O,_ovpCache:{}}};return jQuery.extend(true,{},this.getCustomPreprocessor(),D);},_getCardPropertyDefaults:function(){var c={};var p=this.getMetadata().getAllProperties();var P;for(var a in p){P=p[a];if(P.defaultValue){c[P.name]=P.defaultValue;}}return c;},createContent:function(){var c=this.getComponentData&&this.getComponentData();var m=c.model;var p=this.getPreprocessors();var v;v=sap.ui.view({preprocessors:p,type:sap.ui.core.mvc.ViewType.XML,viewName:"sap.ovp.cards.generic.Card"});v.setModel(m);v.setModel(p.xml.ovpCardProperties,"ovpCardProperties");return v;}});})();};if(!jQuery.sap.isDeclared('sap.ovp.cards.image.Component')){(function(){"use strict";jQuery.sap.declare("sap.ovp.cards.image.Component");sap.ovp.cards.generic.Component.extend("sap.ovp.cards.image.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.image.Image"}},version:"1.32.5",library:"sap.ovp",includes:[],dependencies:{libs:["sap.m"],components:[]},config:{},customizing:{"sap.ui.controllerExtensions":{"sap.ovp.cards.generic.Card":{controllerName:"sap.ovp.cards.image.Image"}}}}});})();};if(!jQuery.sap.isDeclared('sap.ovp.cards.list.Component')){(function(){"use strict";jQuery.sap.declare("sap.ovp.cards.list.Component");sap.ovp.cards.generic.Component.extend("sap.ovp.cards.list.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.list.List"},"annotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.LineItem"},"footerFragment":{"type":"string","defaultValue":"sap.ovp.cards.generic.CountFooter"}},version:"1.32.5",library:"sap.ovp",includes:[],dependencies:{libs:["sap.m"],components:[]},config:{},customizing:{"sap.ui.controllerExtensions":{"sap.ovp.cards.generic.Card":{controllerName:"sap.ovp.cards.list.List"}}}}});})();};if(!jQuery.sap.isDeclared('sap.ovp.cards.loading.Component')){(function(){"use strict";jQuery.sap.declare("sap.ovp.cards.loading.Component");sap.ovp.cards.generic.Component.extend("sap.ovp.cards.loading.Component",{metadata:{properties:{"footerFragment":{"type":"string","defaultValue":"sap.ovp.cards.loading.LoadingFooter"}},version:"1.32.5",library:"sap.ovp",customizing:{"sap.ui.controllerExtensions":{"sap.ovp.cards.generic.Card":{controllerName:"sap.ovp.cards.loading.Loading"}}}}});})();};if(!jQuery.sap.isDeclared('sap.ovp.cards.quickview.Component')){(function(){"use strict";jQuery.sap.declare("sap.ovp.cards.quickview.Component");sap.ovp.cards.generic.Component.extend("sap.ovp.cards.quickview.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.quickview.Quickview"},"footerFragment":{"type":"string","defaultValue":"sap.ovp.cards.generic.ActionsFooter"}},version:"1.32.5",library:"sap.ovp",includes:[],dependencies:{libs:["sap.m"],components:[]},config:{},customizing:{"sap.ui.controllerExtensions":{"sap.ovp.cards.generic.Card":{controllerName:"sap.ovp.cards.quickview.Quickview"}}}}});})();};if(!jQuery.sap.isDeclared('sap.ovp.cards.quickview.Quickview.controller')){jQuery.sap.declare('sap.ovp.cards.quickview.Quickview.controller');(function(){"use strict";sap.ui.controller("sap.ovp.cards.quickview.Quickview",{onInit:function(){},onAfterRendering:function(){}});})();};if(!jQuery.sap.isDeclared('sap.ovp.cards.stack.Component')){(function(){"use strict";jQuery.sap.declare("sap.ovp.cards.stack.Component");sap.ovp.cards.generic.Component.extend("sap.ovp.cards.stack.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.stack.Stack"},"contentPosition":{"type":"string","defaultValue":"Right"}},version:"1.32.5",library:"sap.ovp",includes:[],dependencies:{libs:["sap.m"],components:[]},config:{},customizing:{"sap.ui.controllerExtensions":{"sap.ovp.cards.generic.Card":{controllerName:"sap.ovp.cards.stack.Stack"}}}}});})();};if(!jQuery.sap.isDeclared('sap.ovp.cards.table.Component')){(function(){"use strict";jQuery.sap.declare("sap.ovp.cards.table.Component");sap.ovp.cards.generic.Component.extend("sap.ovp.cards.table.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.table.Table"},"annotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.LineItem"},"footerFragment":{"type":"string","defaultValue":"sap.ovp.cards.generic.CountFooter"}},version:"1.32.5",library:"sap.ovp",includes:[],dependencies:{libs:["sap.m"],components:[]},config:{},customizing:{"sap.ui.controllerExtensions":{"sap.ovp.cards.generic.Card":{controllerName:"sap.ovp.cards.table.Table"}}}}});})();};if(!jQuery.sap.isDeclared('sap.ovp.library')){jQuery.sap.declare("sap.ovp.library");jQuery.sap.require('sap.ui.core.Core');jQuery.sap.require('sap.ui.core.library');jQuery.sap.require('sap.ui.layout.library');jQuery.sap.require('sap.m.library');jQuery.sap.require('sap.ui.comp.library');sap.ui.getCore().initLibrary({name:"sap.ovp",dependencies:["sap.ui.core","sap.ui.layout","sap.m","sap.ui.comp"],types:[],interfaces:[],controls:[],elements:[],version:"1.32.5"});};if(!jQuery.sap.isDeclared('sap.ovp.ui.CardContentContainer')){
/*!
 * ${copyright}
 */
jQuery.sap.declare('sap.ovp.ui.CardContentContainer');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ovp/ui/CardContentContainer",["jquery.sap.global","sap/ovp/library"],function(q){"use strict";var C=sap.m.FlexBox.extend("sap.ovp.ui.CardContentContainer",{metadata:{library:"sap.ovp"},renderer:{render:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapOvpCardContentContainer");r.writeClasses();r.write(">");var a=c.getItems();for(var i=0;i<a.length;i++){r.renderControl(a[i]);}r.write("</div>");}}});return C;},true);};if(!jQuery.sap.isDeclared('sap.ovp.ui.EasyScanLayout')){jQuery.sap.declare('sap.ovp.ui.EasyScanLayout');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ovp/ui/EasyScanLayout",["jquery.sap.global","sap/ovp/library"],function(q){"use strict";var E=sap.ui.core.Control.extend("sap.ovp.ui.EasyScanLayout",{metadata:{library:"sap.ovp",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},defaultAggregation:"content",events:{afterRendering:{}},properties:{useMediaQueries:{group:"Misc",type:"sap.ui.core/boolean",defaultValue:false},debounceTime:{group:"Misc",type:"sap.ui.core/int",defaultValue:150}}},renderer:{render:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellEasyScanLayout");r.writeClasses();r.write(">");var d=c.columnCount;var e=Array.apply(null,new Array(d)).map(function(){return[];});var f=c.getContent();for(var i=0;i<f.length;i++){e[i%d].push(f[i]);}e.forEach(function(h){r.write("<div");r.addClass("easyScanLayoutColumn");r.writeClasses();r.write(">");h.forEach(function(j){r.write("<div");r.addClass("easyScanLayoutItemWrapper");r.writeClasses();r.write(">");r.renderControl(j);r.write("</div>");});r.write("</div>");});r.write("</div>");}}});var g=function(){return[{minWidth:0,styleClass:"columns-blank",columnCount:1},{minWidth:240,styleClass:"columns-block",columnCount:1},{minWidth:352,styleClass:"columns-narrow",columnCount:1},{minWidth:433,styleClass:"columns-wide",columnCount:1},{minWidth:704,styleClass:"columns-narrow",columnCount:2},{minWidth:864,styleClass:"columns-wide",columnCount:2},{minWidth:1024,styleClass:"columns-narrow",columnCount:3},{minWidth:1280,styleClass:"columns-wide",columnCount:3},{minWidth:1440,styleClass:"columns-narrow",columnCount:4},{minWidth:1920,styleClass:"columns-wide",columnCount:4},{minWidth:2560,styleClass:"columns-narrow",columnCount:5},{minWidth:3008,styleClass:"columns-wide",columnCount:5},{minWidth:3600,styleClass:"columns-narrow",columnCount:4},{minWidth:3840,styleClass:"columns-wide",columnCount:4},{minWidth:5120,styleClass:"columns-wide",columnCount:5},{minWidth:6016,styleClass:"columns-wide",columnCount:5}];};E.prototype.init=function(){this.columnResolutionList=g();this.columnCount=this.columnResolutionList[0].columnCount;this.columnStyle="";this.updateColumnClass(this.columnResolutionList[0].styleClass);if(this.getUseMediaQueries()){this.mediaQueryList=this.initMediaListeners(this.columnResolutionList);}else{this.resizeHandlerId=this.initResizeHandler(this.columnResolutionList);}};var m;var a=function(c,d,e){var f=function(h,i){this.updateColumnClass(i);this.refreshColumnCount(h,this.getContent());};if(e.matches){window.clearTimeout(m);m=window.setTimeout(f.bind(this,c,d),this.getDebounceTime());}};var b=function(c,t){var d=c.minWidth;var e=t&&t.minWidth;return"(min-width: "+d+"px)"+(e?" and (max-width: "+(e-1)+"px)":"");};E.prototype.initMediaListeners=function(c){var d=[];for(var i=0;i<c.length;i++){var e=b(c[i],c[i+1]);var f=window.matchMedia(e);var h=a.bind(this,c[i].columnCount,c[i].styleClass);f.addListener(h);f.bindedListener=h;h(f);d.push(f);}return d;};E.prototype.initResizeHandler=function(c){var r;var d=this.getDebounceTime();var e=function(){window.clearTimeout(r);r=window.setTimeout(this.oControl.resizeHandler.bind(this,c),d);};return sap.ui.core.ResizeHandler.register(this,e);};E.prototype.resizeHandler=function(c){var w=this.iWidth;var C=this.oControl;var r;for(var i=0;i<c.length;i++){if(!c[i+1]){r=c[i];break;}if(c[i].minWidth<=w&&c[i+1].minWidth>w){r=c[i];break;}}C.refreshColumnCount(r.columnCount,C.getContent());C.updateColumnClass(r.styleClass);};E.prototype.refreshColumnCount=function(c,d){if(this.columnCount===c){return;}this.columnCount=c;var e=q();for(var i=0;i<c;i++){e=e.add("<div class='easyScanLayoutColumn'/>");}for(var j=0;j<d.length;j++){e.get(j%c).appendChild(d[j].getDomRef().parentNode);}this.$().empty().append(e);};E.prototype.updateColumnClass=function(c){if(this.columnStyle===c){return;}this.removeStyleClass(this.columnStyle);this.addStyleClass(c);this.columnStyle=c;};E.prototype.onAfterRendering=function(){this.fireAfterRendering();};E.prototype.exit=function(){if(this.mediaQueryList){this.mediaQueryList.forEach(function(c){c.removeListener(c.bindedListener);});delete this.mediaQueryList;}if(this.resizeHandlerId){sap.ui.core.ResizeHandler.deregister(this.resizeHandlerId);}};return E;},true);};if(!jQuery.sap.isDeclared('sap.ovp.ui.ObjectStream')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5/OpenUI5)
 * (c) Copyright 2009-2014 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
jQuery.sap.require('sap.ui.core.delegate.ScrollEnablement');jQuery.sap.declare('sap.ovp.ui.ObjectStream');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ovp/ui/ObjectStream",['jquery.sap.global'],function(q){"use strict";var O=sap.ui.core.Control.extend("sap.ovp.ui.ObjectStream",{metadata:{library:"sap.ovp",properties:{title:{type:"string",defaultValue:""}},aggregations:{content:{type:"sap.ui.core.Control",multiple:true},placeHolder:{type:"sap.ui.core.Control",multiple:false}}}});O.prototype.init=function(){var t=this;this._closeIcon=new sap.ui.core.Icon({src:"sap-icon://decline",tooltip:"close"});this._closeIcon.addEventDelegate({onclick:function(){t.getParent().close();}});};O.prototype._startScroll=function(d){this._direction=d;var l;if(d=="left"){l=this.wrapper.scrollLeft;if(l<=0){return;}this.jqRightEdge.css("opacity",1);}else{l=this.wrapper.scrollWidth-this.wrapper.offsetWidth-this.wrapper.scrollLeft;if(l<=0){return;}this.jqLeftEdge.css("opacity",1);}var s=l*3;var t=(d=="left")?l:~l+1;q(this.container).one("transitionend",function(){this._mouseLeave({data:this});}.bind(this));this.container.style.transition='transform '+s+'ms linear';this.container.style.transform='translate('+t+'px, 0px) scale(1) translateZ(0px) ';};O.prototype._mouseLeave=function(e){var c=window.getComputedStyle(e.data.container).transform;e.data.container.style.transform=c;e.data.container.style.transition='';var t;var a=c.split(",");if(c.substr(0,8)=="matrix3d"){t=parseInt(a[12],10);}else if(c.substr(0,6)=="matrix"){t=parseInt(a[4],10);}if(isNaN(t)){return;}e.data.container.style.transform="none";e.data.wrapper.scrollLeft+=~t+(e.data._direction=="left"?-5:5);e.data._checkEdgesVisibility();};O.prototype._initScrollVariables=function(){var j=this.$();this.container=j.find(".sapOvpObjectStreamScroll").get(0);this.wrapper=j.find(".sapOvpObjectStreamCont").get(0);this.shouldShowScrollButton=!sap.ui.Device.system.phone&&!sap.ui.Device.system.tablet;this.jqRightEdge=j.find(".sapOvpOSEdgeRight");this.jqLeftEdge=j.find(".sapOvpOSEdgeLeft");if(this.shouldShowScrollButton){this.jqRightEdge.add(this.jqLeftEdge).on("mouseenter.objectStream",this,this._mouseEnter).on("mouseleave.objectStream",this,this._mouseLeave);}this._checkEdgesVisibility();};O.prototype._afterOpen=function(){this._initScrollVariables();this.jqBackground=q("<div id='objectStreamBackgroundId' class='objectStreamNoBackground'></div>");q.sap.byId("sap-ui-static").prepend(this.jqBackground);this.jqBackground.on('click.closePopup',function(){this._oPopup.close();}.bind(this));q(".sapUshellEasyScanLayout").addClass("bluredLayout");};O.prototype._beforeClose=function(){this.jqBackground.remove();this.jqLeftEdge.add(this.jqRightEdge).off(".objectStream");q(".sapUshellEasyScanLayout").removeClass("bluredLayout");};O.prototype._mouseEnter=function(e){if(e.target==e.data.jqRightEdge.get(0)){e.data._startScroll("right");}if(e.target==e.data.jqLeftEdge.get(0)){e.data._startScroll("left");}};O.prototype._checkEdgesVisibility=function(){var s=this.wrapper.scrollLeft;var l=this.wrapper.scrollWidth-this.wrapper.offsetWidth-this.wrapper.scrollLeft;(s==0)?this.jqLeftEdge.css("opacity",0):this.jqLeftEdge.css("opacity",1);(l==0)?this.jqRightEdge.css("opacity",0):this.jqRightEdge.css("opacity",1);};O.prototype._createPopup=function(){this._oPopup=new sap.m.Dialog({showHeader:false,afterOpen:this._afterOpen.bind(this),beforeClose:this._beforeClose.bind(this),content:[this],verticalScrolling:false,horizontalScrolling:false,stretchOnPhone:true}).removeStyleClass("sapUiPopupWithPadding").addStyleClass("sapOvpStackedCardPopup");this._oPopup.oPopup.setModal(false);};O.prototype.open=function(c){if(!this._oPopup){this._createPopup();}this._cardWidth=c;this.setCardsSize(this._cardWidth);this._oPopup.open();};O.prototype.onBeforeRendering=function(){if((!this._oScroller)&&(sap.ui.Device.os.ios)){this._oScroller=new sap.ui.core.delegate.ScrollEnablement(this,this.getId()+"-scroll",{horizontal:true,vertical:false,zynga:false,iscroll:false,preventDefault:false,nonTouchScrolling:"scrollbar",scrollbarClass:"sapMScrollbar"});}};O.prototype.onAfterRendering=function(){if(!this._oPopup||!this._oPopup.isOpen()||!this.getContent().length){return;}this.setCardsSize(this._cardWidth);setTimeout(function(){this._initScrollVariables();}.bind(this));};O.prototype.exit=function(){if(this._oPopup){this._oPopup.destroy();}this._closeIcon.destroy();if(this._oScroller){this._oScroller.destroy();this._oScroller=null;}};O.prototype.setCardsSize=function(c){var r=parseInt(window.getComputedStyle(document.documentElement).fontSize,10);var a=sap.ui.Device.system.phone?document.body.clientHeight/r-4.5:28.75;var b=this.getContent();b.map(function(C){C.setWidth(c+"px");C.setHeight(a+"rem");});var p=this.getPlaceHolder();if(p){p.setWidth(c+"px");p.setHeight(a+"rem");}};O.prototype.updateContent=function(r){var b=this.mBindingInfos["content"],B=b.binding,a=B.getContexts(b.startIndex,b.length);if(r==="change"){var f=b.factory,i=0,I=this.getContent(),c=q.proxy(function(C){var s=this.getId()+"-"+q.sap.uid(),o=f(s,C);o.setBindingContext(C,b.model);this.addContent(o);},this);for(i=0;i<a.length;++i){if(i<I.length){I[i].setBindingContext(a[i],b.model);}else{c(a[i]);}}if(I.length>a.length){for(;i<I.length;++i){I[i].destroy();}I.length=a.length;}}};return O;},true);};if(!jQuery.sap.isDeclared('sap.ovp.ui.ObjectStreamRenderer')){jQuery.sap.declare('sap.ovp.ui.ObjectStreamRenderer');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ovp/ui/ObjectStreamRenderer",['jquery.sap.global'],function(q){"use strict";var O={};O.render=function(r,c){if(!c.getVisible()){return;}r.write("<div");r.writeControlData(c);r.addClass("sapOvpObjectStream");r.writeClasses();r.write(">");r.write('<div class="sapOvpObjectStreamHeader">'+c.getTitle()+'</div>');r.write('<div class="sapOvpObjectStreamClose">');r.renderControl(c._closeIcon);r.write("</div>");r.write('<div id="'+c.getId()+'-cont" class="sapOvpObjectStreamCont">');r.write('<div id="'+c.getId()+'-scroll"');r.addClass("sapOvpObjectStreamScroll");r.writeClasses();r.write(">");var C=c.getContent();q.each(C,function(i,a){r.write("<div class='sapOvpObjectStreamItem'>");r.renderControl(a);r.write("</div>");});var p=c.getPlaceHolder();if(p){r.write("<div class='sapOvpObjectStreamItem'>");r.renderControl(p);r.write("</div>");}r.write("</div>");r.write('<div id="'+c.getId()+'-leftedge" class="sapOvpOSEdgeLeft">');r.renderControl(new sap.ui.core.Icon({src:"sap-icon://slim-arrow-left",useIconTooltip:false}));r.write('</div>');r.write('<div id="'+c.getId()+'-rightedge" class="sapOvpOSEdgeRight">');r.renderControl(new sap.ui.core.Icon({src:"sap-icon://slim-arrow-right",useIconTooltip:false}));r.write('</div>');r.write("</div>");r.write("</div>");};O.renderFooterContent=function(r,c){};return O;},true);};if(!jQuery.sap.isDeclared('sap.ovp.ui.SmartphoneHeaderToggle')){(function(){"use strict";jQuery.sap.declare("sap.ovp.ui.SmartphoneHeaderToggle");sap.ovp.ui.SmartphoneHeaderToggle={threshold:10,headerVisible:true,startY:undefined,app:undefined,jqView:undefined,startHandler:function(e){if(this.app.globalFilter.getVisible()){return;}this.startY=e.touches[0].pageY;},resizeHandler:function(){if(!this.headerVisible){this.animateHeader.call(this,this.headerVisible);}},animateHeader:function(s){var j=this.jqView.find('.ovpApplication > .sapUiFixFlexFixed > .sapMVBox');var a=this.jqView.find('.ovpApplication > .sapUiFixFlexFlexible');var b=a.children();var t;if(s){t="translateY(0px)";j.add(a).css({"transform":t,"-webkit-transform":t});a.one('transitionend',function(e){if(this.headerVisible){b.css({bottom:"0px"});}});}else{var h=this.view.byId('ovpPageHeader').$().height();b.css({bottom:"-"+h+"px"});t="translateY(-"+h+"px)";a.add(j).css({"transform":t,"-webkit-transform":t});}},moveHandler:function(e){var m=e.touches[0].pageY;if(typeof this.startY=="undefined"){if(this.app.globalFilter.getVisible()){return;}this.startY=m;}if(Math.abs(this.startY-m)<this.threshold){return;}if(this.startY>m&&this.headerVisible){this.headerVisible=false;this.startY=m;this.animateHeader.call(this,this.headerVisible);}if(this.startY<m&&!this.headerVisible){this.headerVisible=true;this.startY=m;this.animateHeader.call(this,this.headerVisible);}},endHandler:function(){this.startY=undefined;return;},enable:function(a){this.app=a;this.view=this.app.getView();this.jqView=this.view.$();this.jqView.on('touchstart.headerHiding',this.startHandler.bind(this));this.jqView.on('touchmove.headerHiding',this.moveHandler.bind(this));this.jqView.on('touchend.headerHiding touchcancel.headerHiding touchleave.headerHiding',this.endHandler.bind(this));jQuery(window).on("resize.headerHiding",this.resizeHandler.bind(this));},disable:function(){this.jqView.off('touchstart.headerHiding touchmove.headerHiding touchend.headerHiding touchcancel.headerHiding touchleave.headerHiding');jQuery(window).off("resize.headerHiding");}};}());};if(!jQuery.sap.isDeclared('sap.ovp.app.Main.controller')){jQuery.sap.declare('sap.ovp.app.Main.controller');(function(){"use strict";jQuery.sap.require('sap.ui.model.odata.ODataUtils');sap.ui.controller("sap.ovp.app.Main",{oCardsModels:{},oLoadedComponents:{},onInit:function(){},onBeforeRendering:function(){},onAfterRendering:function(){var v=this.getView();this._initGlobalFilter();var u=v.getModel("ui");var c=u.getProperty("/cards");var b=u.getProperty("/baseUrl");c.forEach(function(C,i){this.createLoadingCard(C);C.settings.baseUrl=b;this._initCardModel(C.model);this._loadCardComponent(C.template);},this);setTimeout(function(){c.forEach(function(C,i){this.createCard(C);},this);}.bind(this),1500);if(sap.ui.Device.system.phone){jQuery.sap.require("sap.ovp.ui.SmartphoneHeaderToggle");sap.ovp.ui.SmartphoneHeaderToggle.enable(this);}},verifyGlobalFilterLoaded:function(){if(this.globalFilter.search()){return true;}return false;},onGlobalFilterChange:function(){this.filterChanged=true;},onGlobalFilterSearch:function(){if(this.filterChanged){var b="ovp-"+new Date().getTime();for(var m in this.oCardsModels){if(this.oCardsModels.hasOwnProperty(m)){this.oCardsModels[m].refresh(false,false,b);}}this.filterChanged=false;}},_initGlobalFilter:function(){this.globalFilter=this.getView().byId("ovpGlobalFilter");if(!this.globalFilter){return;}this.oGlobalFilterLodedPromise=new Promise(function(r,a){this.globalFilter.attachAfterVariantLoad(function(){if(this.verifyGlobalFilterLoaded()){r();}},this);this.globalFilter.attachInitialise(function(){if(!this.globalFilter.getCurrentVariantId()){if(this.verifyGlobalFilterLoaded()){r();}}},this);this.globalFilter.attachSearch(function(){r();this.onGlobalFilterSearch();},this);this.globalFilter.attachFilterChange(this.onGlobalFilterChange,this);}.bind(this));},_loadCardComponent:function(c){if(!this.oLoadedComponents[c]){this.oLoadedComponents[c]=sap.ui.component.load({name:c,url:jQuery.sap.getModulePath(c),async:true});}},_initCardModel:function(c){if(this.oCardsModels[c]){return;}this.oCardsModels[c]=this.getView().getModel(c);this.oCardsModels[c].setUseBatch(true);if(this.globalFilter){this._overrideCardModelRead(this.oCardsModels[c]);}},toggleFilterBar:function toggleFilterBar(){function t(j,b,h){b.height(h);j.css('top',0);}function a(j,b,h){b.height(0);j.css("top","-"+h+"px");}var i=this.globalFilter.getVisible();if((sap.ui.Device.system.phone)||(sap.ui.Device.system.tablet)){this.globalFilter.setVisible(!i);return;}if(toggleFilterBar.animationInProcess){return;}toggleFilterBar.animationInProcess=true;if(i){var j=jQuery(this.globalFilter.getDomRef());var b=jQuery(this.getView().byId("ovpGlobalFilterWrapper").getDomRef());var h=b.height();t(j,b,h);b.height();b.one('transitionend',function(e){this.globalFilter.setVisible(false);toggleFilterBar.animationInProcess=false;}.bind(this));a(j,b,h);}else{this.globalFilter.setVisible(true);setTimeout(function(){var j=jQuery(this.globalFilter.getDomRef());var b=jQuery(this.getView().byId("ovpGlobalFilterWrapper").getDomRef());var h=j.outerHeight();a(j,b,h);b.height();b.one('transitionend',function(e){b.css("height","auto");toggleFilterBar.animationInProcess=false;});t(j,b,h);}.bind(this));}},_overrideCardModelRead:function(m){var o=m.read;var t=this;m.read=function(){var f=t.globalFilter.getFilters();var p=arguments[1];if(!p){p={};Array.prototype.push.call(arguments,p);}var e=t._getEntityTypeFromPath(m,arguments[0],p.context);if(e){var r=t._getEntityRelevantFilters(e,f);if(r.length>0){var a=-1;var u=p.urlParameters;if(u){for(var i=0;i<u.length;i++){if((u[i]).lastIndexOf("$filter=",0)===0){a=i;break;}}}if(a>=0){u[a]=u[a]+"%20and%20"+sap.ui.model.odata.ODataUtils.createFilterParams(f,m.oMetadata,e).substr(8);}else{p.filters=r;}}}o.apply(m,arguments);};},_getEntityTypeFromPath:function(m,p,c){var n=sap.ui.model.odata.v2.ODataModel.prototype._normalizePath.apply(m,[p,c]);var e=sap.ui.model.odata.ODataMetadata.prototype._getEntityTypeByPath.apply(m.oMetadata,[n]);return e;},_getEntityRelevantFilters:function(e,f){var r=[];if(f.length){var a=f[0].aFilters;var b=e.property;for(var i=0;i<a.length;i++){var c;if(a[i].aFilters){c=a[i].aFilters[0].sPath;}else{c=a[i].sPath;}for(var j=0;j<b.length;j++){if(b[j].name===c){r.push(a[i]);break;}}}}return r;},_checkIsCardValid:function(c){var C=c+".Component";var o,a;jQuery.sap.require(C);var b=jQuery.sap.getObject(C);if(!b){return false;}if((b!==sap.ovp.cards.generic.Component)&&!(b.prototype instanceof sap.ovp.cards.generic.Component)){return false;}if((o=b.getMetadata())&&(a=o.getCustomizing())){if(a["sap.ui.viewReplacements"]&&a["sap.ui.viewReplacements"]["sap.ovp.cards.generic.Card"]){return false;}}if(b.prototype.createContent!=sap.ovp.cards.generic.Component.prototype.createContent){return false;}if(b.prototype.getPreprocessors!=sap.ovp.cards.generic.Component.prototype.getPreprocessors){return false;}return true;},_createCardComponent:function(v,m,c){if(c.template&&this._checkIsCardValid(c.template)){var C={name:c.template,componentData:{model:m,settings:c.settings}};if(this.globalFilter){C.componentData.globalFilter={getFilterDataAsString:this.globalFilter.getDataSuiteFormat.bind(this.globalFilter)};}var o=sap.ui.component(C);var a=v.byId(c.id);var O=a.getComponentInstance();a.setComponent(o);if(O){setTimeout(function(){O.destroy();},0);}}else{jQuery.sap.log.error("Could not create Card from '"+c.template+"' template. Card is not valid.");}},createLoadingCard:function(c,o){var l=jQuery.extend(true,{},c,{template:"sap.ovp.cards.loading",settings:{opacityDelay:o}});this._createCardComponent(this.getView(),undefined,l);},createCard:function(c){var v=this.getView();var m=v.getModel(c.model);Promise.all([m.getMetaModel().loaded(),this.oGlobalFilterLodedPromise,this.oLoadedComponents[c.template]]).then(function(){this._createCardComponent(v,m,c);}.bind(this),function(r){jQuery.sap.log.error("Can't load card with id:'"+c.id+"' and type:'"+c.template+"', reason:"+r);});}});}());};if(!jQuery.sap.isDeclared('sap.ovp.cards.charts.generic.Component')){(function(){"use strict";jQuery.sap.declare("sap.ovp.cards.charts.generic.Component");sap.ovp.cards.generic.Component.extend("sap.ovp.cards.charts.generic.Component",{metadata:{properties:{"headerExtensionFragment":{"type":"string","defaultValue":"sap.ovp.cards.charts.AnalyticalHeader"}},version:"1.32.5",library:"sap.ovp",includes:[],dependencies:{libs:["sap.m"],components:[]},config:{}}});})();};if(!jQuery.sap.isDeclared('sap.ovp.cards.charts.line.Component')){(function(){"use strict";jQuery.sap.declare("sap.ovp.cards.charts.line.Component");sap.ovp.cards.charts.generic.Component.extend("sap.ovp.cards.charts.line.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.charts.line.LineChart"},"headerExtensionFragment":{"type":"string","defaultValue":"sap.ovp.cards.charts.AnalyticalHeader"}},version:"1.32.5",library:"sap.ovp",includes:[],dependencies:{libs:["sap.m"],components:[]},config:{},customizing:{"sap.ui.controllerExtensions":{"sap.ovp.cards.generic.Card":{controllerName:"sap.ovp.cards.charts.line.LineChart"}}}}});})();};if(!jQuery.sap.isDeclared('sap.ovp.cards.stack.Stack.controller')){jQuery.sap.declare('sap.ovp.cards.stack.Stack.controller');(function(){"use strict";sap.ui.controller("sap.ovp.cards.stack.Stack",{onInit:function(){var v=this.getView().byId("stackContent");v.addEventDelegate({onclick:this.openStack.bind(this)});},onExit:function(){this.oObjectStream.destroy();},onAfterRendering:function(){var v=this.getView();var m=v.getModel();var c=v.getModel("ovpCardProperties");var e=c.getProperty("/entitySet");var M=m.getMetaModel();var E=M.getODataEntitySet(e);var o=M.getODataEntityType(E.entityType);var i=20;this.oObjectStream=new sap.ovp.ui.ObjectStream({title:c.getObject("/category"),content:{path:"/"+e,length:i,factory:function(s,C){var b=sap.ui.component({name:"sap.ovp.cards.quickview",componentData:{model:m,settings:{category:o.name,entitySet:e}}});var d=new sap.ui.core.ComponentContainer({component:b});d.setBindingContext=function(C){b.setBindingContext(C);};return d;}}});var I=this.getEntityIntents();if(I.length>0){var a=I[0].label;var p=this._createPlaceHolder(a);var t=this;p.addEventDelegate({onclick:function(){t.doIntentBasedNavigation(null);}});this.oObjectStream.setPlaceHolder(p);}this.oObjectStream.setModel(m);var l=this.oObjectStream.getBinding("content");l.attachDataReceived(function(){var n=l.getCurrentContexts().length;v.byId("stackSize").setText(n);},this);},_createPlaceHolder:function(a){var i=new sap.ui.core.Icon({src:"sap-icon://offsite-work",layoutData:new sap.m.FlexItemData({growFactor:1,alignSelf:sap.m.FlexAlignSelf.Center})});i.addStyleClass("sapOvpStackPlaceHolderIcon");var l=new sap.m.Label({text:a});var s=sap.ui.getCore().getLibraryResourceBundle("sap.ovp").getText("ForMoreContentAppName",[a]);var t=new sap.m.Text({text:s});l.addStyleClass("sapOvpStackPlaceHolderAppName");t.addStyleClass("sapOvpStackPlaceHolderTextLine");var d=new sap.m.VBox({items:[l,t]});d.addStyleClass("sapOvpStackPlaceHolderLabelsContainer");var v=new sap.m.VBox({items:[i,d]});v.addStyleClass("sapOvpStackPlaceHolder");return v;},openStack:function(){var l=this.oObjectStream.getBinding("content");if(l.getCurrentContexts().length>0){var c=this.getView().$().width();this.oObjectStream.open(c);}}});})();};if(!jQuery.sap.isDeclared('sap.ovp.cards.charts.bubble.Component')){(function(){"use strict";jQuery.sap.declare("sap.ovp.cards.charts.bubble.Component");sap.ovp.cards.charts.generic.Component.extend("sap.ovp.cards.charts.bubble.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.charts.bubble.BubbleChart"},"headerExtensionFragment":{"type":"string","defaultValue":"sap.ovp.cards.charts.AnalyticalHeader"}},version:"1.32.5",library:"sap.ovp",includes:[],dependencies:{libs:["sap.m"],components:[]},config:{},customizing:{"sap.ui.controllerExtensions":{"sap.ovp.cards.generic.Card":{controllerName:"sap.ovp.cards.charts.bubble.BubbleChart"}}}}});})();};if(!jQuery.sap.isDeclared('sap.ovp.cards.charts.donut.Component')){(function(){"use strict";jQuery.sap.declare("sap.ovp.cards.charts.donut.Component");sap.ovp.cards.charts.generic.Component.extend("sap.ovp.cards.charts.donut.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.charts.donut.DonutChart"},"headerExtensionFragment":{"type":"string","defaultValue":"sap.ovp.cards.charts.AnalyticalHeader"}},version:"1.32.5",library:"sap.ovp",includes:[],dependencies:{libs:["sap.m"],components:[]},config:{},customizing:{"sap.ui.controllerExtensions":{"sap.ovp.cards.generic.Card":{controllerName:"sap.ovp.cards.charts.donut.DonutChart"}}}}});})();};
