// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.catalog.Catalog",{oPopover:null,onInit:function(){sap.ui.getCore().getEventBus().subscribe("showCatalogEvent",this.onShow,this);sap.ui.getCore().byId("catalogSelect").addEventDelegate({onBeforeRendering:this.onBeforeSelectRendering},this);var r=this.getView().parentComponent.getRouter();r.attachRoutePatternMatched(this.onShow.bind(this));},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("showCatalogEvent",this.onShow);},onBeforeRendering:function(){sap.ui.getCore().getEventBus().publish("showCatalog");setTimeout(function(){jQuery('#catalogSelect').focus();},0);},onAfterRendering:function(){var m=this.getView().getModel(),c=m.getProperty('/catalogs'),t=this;if(!c.length){m.setProperty('/catalogs',[{title:sap.ushell.resources.i18n.getText('catalogsLoading'),"static":true,tiles:[],numIntentSupportedTiles:-1}]);m.setProperty('/catalogsNoDataText',sap.ushell.resources.i18n.getText('loadingTiles'));}else if(c[0].title!=sap.ushell.resources.i18n.getText('catalogsLoading')){m.setProperty('/catalogsNoDataText',sap.ushell.resources.i18n.getText('noFilteredItems'));}if(!this.PagingManager){this.lastCatalogId=0;jQuery.sap.require("sap.ushell.components.flp.launchpad.PagingManager");this.PagingManager=new sap.ushell.components.flp.launchpad.PagingManager('catalogPaging',{elementClassName:'sapUshellTile',containerHeight:window.innerHeight,containerWidth:window.innerWidth});}if(this.PagingManager.currentPageIndex===0){t.allocateNextPage();}jQuery("#catalogTilesPage-cont").scroll(function(){var p=sap.ui.getCore().byId('catalogTilesPage'),s=p.getScrollDelegate(),a=s.getScrollTop(),b=s.getMaxScrollTop();if(b-a<=30+t.PagingManager.getTileHeight()){t.allocateNextPage();}});jQuery(window).resize(function(){var w=$(window).width(),a=$(window).height();t.PagingManager.setContainerSize(w,a);t.resetPageFilter();t.applyTileFilters();});},onShow:function(E){var h,m=this.getView().getModel(),c=m.getProperty("/catalogTiles")||[],d=E.getParameter('arguments').filters,D=d?JSON.parse(d):d,p=(D&&decodeURIComponent(D.targetGroup))||"",i;$.extend(this.getView().getViewData(),E);if(this.PagingManager){this.resetPageFilter();}this.categoryFilter=(D&&D.catalogSelector&&D.catalogSelector)||null;this.searchFilter=(D&&D.tileFilter&&D.tileFilter)||null;h=(D&&D.tagFilter&&D.tagFilter)||"";p=p==='undefined'?undefined:p;this._updateModelWithGroupContext(p);if(h){try{this.tagFilter=JSON.parse(h);}catch(e){this.tagFilter=[];}}else{this.tagFilter=[];}if(this.tagFilter){m.setProperty("/selectedTags",this.tagFilter);}m.setProperty("/showCatalogHeaders",true);m.setProperty("/catalogSearchFilter",this.searchFilter);for(i=0;i<c.length;i=i+1){c[i].active=false;}if(this.categoryFilter||this.searchFilter){sap.ui.getCore().byId("catalogSelect").rerender();}else{sap.ui.getCore().byId("catalogSelect").setSelectedItemId("");}this.oRenderingFilter=new sap.ui.model.Filter('','EQ','a');this.oRenderingFilter.fnTest=function(v){if(v.catalogIndex<=this.lastCatalogId){return true;}if(this.allocateTiles>0){this.lastCatalogId=v.catalogIndex;this.allocateTiles--;return true;}return false;}.bind(this);if(this.PagingManager){this.applyTileFilters();}},resetPageFilter:function(){this.lastCatalogId=0;this.allocateTiles=this.PagingManager.getNumberOfAllocatedElements();},allocateNextPage:function(){if(!this.allocateTiles||this.allocateTiles===0){this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.applyTileFilters();}},onBeforeSelectRendering:function(){var s=sap.ui.getCore().byId("catalogSelect"),i=jQuery.grep(s.getItems(),jQuery.proxy(function(I){return I.getBindingContext().getObject().title===this.categoryFilter;},this));if(!i.length){i.push(s.getItemAt(0));}if(i[0]&&s.getSelectedItemId()!==i[0].getId()){window.setTimeout($.proxy(s.setSelectedItem,s,i[0].getId()),500);}},setTagsFilter:function(f){var p={catalogSelector:this.categoryFilter,tileFilter:this.searchFilter,tagFilter:f,targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('catalog',{filters:JSON.stringify(p)},true);},setCategoryFilter:function(f){var p={catalogSelector:f,tileFilter:this.searchFilter,tagFilter:JSON.stringify(this.tagFilter),targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('catalog',{filters:JSON.stringify(p)},true);},setSearchFilter:function(f){var p={catalogSelector:this.categoryFilter,tileFilter:f,tagFilter:JSON.stringify(this.tagFilter),targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('catalog',{'filters':JSON.stringify(p)});},getGroupContext:function(){var m=this.getView().getModel(),g=m.getProperty("/groupContext/path");return g?g:"";},applyTileFilters:function(){var f=[],o,s,c,C;if(this.tagFilter){o=new sap.ui.model.Filter('tags','EQ','v');o.fnTest=function(t){var i,a;if(this.tagFilter.length===0){return true;}for(i=0;i<this.tagFilter.length;i++){a=this.tagFilter[i];if(t.indexOf(a)===-1){return false;}}return true;}.bind(this);f.push(o);}if(this.searchFilter){s=new sap.ui.model.Filter($.map(this.searchFilter.split(/[\s,]+/),function(v){return(v&&new sap.ui.model.Filter("keywords",sap.ui.model.FilterOperator.Contains,v))||(v&&new sap.ui.model.Filter("title",sap.ui.model.FilterOperator.Contains,v))||undefined;}),true);f.push(s);}if(this.categoryFilter){C=this.categoryFilter;c=new sap.ui.model.Filter("catalog",sap.ui.model.FilterOperator.EQ,C);f.push(c);}f.push(new sap.ui.model.Filter("isTileIntentSupported",sap.ui.model.FilterOperator.EQ,true));if(this.oRenderingFilter){f.push(this.oRenderingFilter);}sap.ui.getCore().byId("catalogTiles").getBinding("tiles").filter(f);},onLiveFilter:function(e){var q=e.getParameter("newValue");if(q){this.setSearchFilter(q);}else{this.setSearchFilter();}},onTagsFilter:function(e){var s=e.getParameters("selectedItem").changedItem,a=e.getParameter("selected"),b=[],c=s.getText();if(this.tagFilter){b=this.tagFilter;}if(a){b.push(c);}else{b=b.filter(function(d){return d!==c;});}this.setTagsFilter(b.length>0?JSON.stringify(b):"");},onCategoryFilter:function(e){var s=e.getParameter("selectedItem"),S=s.getBindingContext(),m=S.getModel();if(m.getProperty("static",S)){m.setProperty("/showCatalogHeaders",true);this.setCategoryFilter();this.selectedCategory=undefined;}else{m.setProperty("/showCatalogHeaders",false);this.setCategoryFilter(s.getBindingContext().getObject().title);this.selectedCategory=s.getId();}},onTileAfterRendering:function(e){var f=e.getSource().getFootItems()[0];if(f!==undefined){f.addStyleClass("sapUshellCatalogPlusIcon");}},catalogTilePress:function(c){sap.ui.getCore().getEventBus().publish("launchpad","catalogTileClick");},onTileFooterClick:function(e){var s=e.getSource(),S=s.getBindingContext(),t=this,m=this.getView().getModel(),o,c,p,a=e.oSource,b=a.getDomRef(),P=this.createPopoverData(e),d=new sap.ui.model.json.JSONModel(P.userGroupList),i=192,g=m.getProperty("/groupContext/path"),l,f,n;if(g){this._handleTileFooterClickInGroupContext(S,g);}else{l=this._createPopoverGroupList(P);f=this._setPopoverContainer(i);n=this._createNewGroupUiElements(f,i);f.addContent(n.newGroupItemList);f.addContent(l);if(document.body.clientHeight-b.getBoundingClientRect().bottom>=310){p="Bottom";}else{p="Auto";}this.oPopover=new sap.m.ResponsivePopover({id:"groupsPopover",placement:p,content:[f],enableScrolling:true,title:sap.ushell.resources.i18n.getText("addTileToGroups_popoverTitle"),contentWidth:'20rem',afterClose:function(){n.newGroupItemList.destroy();n.newGroupNameInput.destroy();o.destroy();c.destroy();f.destroy();t.oPopover.destroy();t.oPopover=null;}});if(!sap.ui.Device.system.phone){this.oPopover.setContentHeight(i+"px");}else{this.oPopover.setContentHeight("100%");}o=this._createOkButton(S,d,P,t,t.oPopover,n.newGroupNameInput);c=this._createCancelButton(t.oPopover);this.oPopover.setBeginButton(o);this.oPopover.setEndButton(c);this.oPopover.setInitialFocus('newGroupItem');this.oPopover.openBy(a);}},_getCatalogTileIndexInModel:function(s){var t=s.sPath,a=t.split("/"),b=a[a.length-1];return b;},_handleTileFooterClickInGroupContext:function(s,g){var l=sap.ushell.Container.getService("LaunchPage"),m=this.getView().getModel(),c=this.getCatalogTileDataFromModel(s),a=c.tileData.associatedGroups,G=m.getProperty(g),b=l.getGroupId(G.object),C=$.inArray(b,a),t=this._getCatalogTileIndexInModel(s),o,A,r,T,d,e=this;if(c.isBeingProcessed){return;}m.setProperty('/catalogTiles/'+t+'/isBeingProcessed',true);if(C==-1){o=new sap.ui.model.Context(s.getModel(),g);A=this._addTile(s,o);A.done(function(f){if(f.status==1){e._groupContextOperationSucceeded(s,c,G,true);}else{e._groupContextOperationFailed(c,G,true);}});A.always(function(){m.setProperty('/catalogTiles/'+t+'/isBeingProcessed',false);});}else{T=s.getModel().getProperty(s.getPath()).id;d=g.split('/')[2];r=this._removeTile(T,d);r.done(function(f){if(f.status==1){e._groupContextOperationSucceeded(s,c,G,false);}else{e._groupContextOperationFailed(c,G,false);}});r.always(function(){m.setProperty('/catalogTiles/'+t+'/isBeingProcessed',false);});}},_createPopoverGroupList:function(p){var u=[],P,l=new sap.m.List({mode:sap.m.ListMode.MultiSelect,includeItemInSelection:true}),L=new sap.m.DisplayListItem({label:"{title}",selected:"{selected}",tooltip:"{title}",type:sap.m.ListType.Active}),t=this;l.addEventDelegate({onsapup:function(E){try{E.preventDefault();if(t.getView().getModel().getProperty("/groups/length")){var j,c=jQuery(":focus");if(c.index()==0){j=jQuery("#newGroupItem");j.focus();E._bIsStopHandlers=true;}}}catch(e){}}});l.attachItemPress(function(e){var c=e.getParameter('listItem'),s=e.getParameter('srcControl'),S;if(s.getMetadata().getName()==='sap.m.CheckBox'){S=c.isSelected();s.setSelected(!S);c.setSelected(!S);}});u.push(new sap.ui.model.Filter("isGroupLocked",sap.ui.model.FilterOperator.EQ,false));if(this.getView().getModel().getProperty('/enableHideGroups')){u.push(new sap.ui.model.Filter("isGroupVisible",sap.ui.model.FilterOperator.EQ,true));}l.bindItems("/",L,null,u);P=new sap.ui.model.json.JSONModel(p.userGroupList);l.setModel(P);return l;},_setPopoverContainer:function(p){var a="popoverContainer",b=new sap.m.ScrollContainer({id:a,horizontal:false,vertical:true});if(!sap.ui.Device.system.phone){b.setHeight((p-2)+"px");}else{b.setHeight("100%");}return b;},_createNewGroupUiElements:function(p,P){var m=this.getView().getModel(),n,b,N,h,o,a,t=this;n=new sap.m.Input({id:"newGroupNameInput",type:"Text",placeholder:sap.ushell.resources.i18n.getText("new_group_name")});b=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("nav-back"),press:function(e){t.oPopover.removeAllContent();if(!sap.ui.Device.system.phone){t.oPopover.setContentHeight(P+"px");}else{t.oPopover.setContentHeight("100%");}t.oPopover.setVerticalScrolling(true);t.oPopover.addContent(p);t.oPopover.setTitle(sap.ushell.resources.i18n.getText("addTileToGroups_popoverTitle"));t.oPopover.setCustomHeader();n.enabled=false;n.setValue('');},tooltip:sap.ushell.resources.i18n.getText("newGroupGoBackBtn_tooltip")});b.addStyleClass("sapUshellCatalogNewGroupBackButton");N=new sap.m.Label({text:sap.ushell.resources.i18n.getText("newGroup_popoverTitle")});h=new sap.m.Bar({contentLeft:[b],contentMiddle:[N]});o=new sap.m.StandardListItem({id:"newGroupItem",title:sap.ushell.resources.i18n.getText("newGroup_listItemText"),type:"Navigation",press:function(){t._navigateToCreateNewGroupPanel(t.oPopover,n,h);}});a=new sap.m.List({});if(m.getProperty("/enableHelp")){o.addStyleClass('help-id-newGroupItem');}a.addItem(o);a.addEventDelegate({onsapdown:function(E){try{E.preventDefault();E._bIsStopHandlers=true;if(t.getView().getModel().getProperty("/groups/length")){var j=jQuery("#popoverContainer .sapMListModeMultiSelect li").first();j.focus();}}catch(e){}},onsaptabnext:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#okButton");j.focus();}catch(e){}}});return{newGroupItemList:a,newGroupNameInput:n};},_createOkButton:function(s,p,a,g,P,n,h){var o=new sap.m.Button({id:"okButton",press:function(e){e.preventDefault();e._bIsStopHandlers=true;var u,t=s.getModel().getProperty(s.getPath()).id,G=n.getValue().trim(),b=[],c=this;u=g._handlePopoverGroupsSelection(p,t,s,a,b,g);if(n.enabled){u=g._handleNewGroupCreationPanel(g,s,G,b,u);}jQuery.when.apply(jQuery,b).then(function(){g._handlePopoverGroupsActionPromises(g,c,s,a,u,arguments);});P.close();}.bind(p),text:sap.ushell.resources.i18n.getText("okBtn")});o.addEventDelegate({onsaptabprevious:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#newGroupItem");if(!j.length){j=jQuery("#newGroupNameInput input");}j.focus();}catch(e){}}});return o;},_createCancelButton:function(p){return new sap.m.Button({id:"cancelButton",press:function(e){e.preventDefault();e._bIsStopHandlers=true;p.close();},text:sap.ushell.resources.i18n.getText("cancelBtn")});},_handlePopoverGroupsSelection:function(p,t,s,a,b,g){var l=sap.ushell.Container.getService("LaunchPage"),c={},G,d,r,i,u={selectedGroupsIDsArray:[],numberOfAddedGroups:0,numberOfRemovedGroups:0,firstAddedGroupTitle:"",firstRemovedGroupTitle:""};for(i=0;i<a.userGroupList.length;i=i+1){d=p.oData[i];r=l.getGroupId(d.object);c[r]=d.title;if(d.selected){u.selectedGroupsIDsArray.push(r);G=new sap.ui.model.Context(s.getModel(),"/groups/"+i);if(!p.oData[i].initiallySelected){b.push(g._addTile(s,G));p.oData[i].initiallySelected=true;u.numberOfAddedGroups=u.numberOfAddedGroups+1;if(u.numberOfAddedGroups==1){u.firstAddedGroupTitle=d.title;}}}else if((!d.selected)&&(p.oData[i].initiallySelected)){b.push(g._removeTile(t,i));p.oData[i].initiallySelected=false;u.numberOfRemovedGroups=u.numberOfRemovedGroups+1;if(u.numberOfRemovedGroups==1){u.firstRemovedGroupTitle=d.title;}}}return u;},_handlePopoverGroupsActionPromises:function(g,p,s,a,u,P){if(!(u.numberOfAddedGroups==0&&u.numberOfRemovedGroups==0)){var l=sap.ushell.Container.getService("LaunchPage"),i=false,b=false,e=[],c,d;for(c=0;c<P.length&&(!i||!b);c++){if(P[c].action=="addTileToNewGroup"&&P[c].status==1){var t=p.oData[p.oData.length-1],r=l.getGroupId(t.object);u.selectedGroupsIDsArray.push(r);b=true;}if(!P[c].status){i=true;e.push(P[c]);}}if(i){var E=g.prepareErrorMessage(e,a.tileTitle),f=sap.ushell.components.flp.launchpad.DashboardManager();f.resetGroupsOnFailure(E.messageId,E.parameters);}else{s.getModel().setProperty("/catalogTiles/"+a.tileIndex+"/associatedGroups",u.selectedGroupsIDsArray);d=g.prepareDetailedMessage(a.tileTitle,u.numberOfAddedGroups,u.numberOfRemovedGroups,u.firstAddedGroupTitle,u.firstRemovedGroupTitle);sap.m.MessageToast.show(d,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});}}},_groupContextOperationSucceeded:function(s,c,g,t){var l=sap.ushell.Container.getService("LaunchPage"),G=l.getGroupId(g.object),a=c.tileData.associatedGroups,d,i;if(t){a.push(G);s.getModel().setProperty("/catalogTiles/"+c.tileIndex+"/associatedGroups",a);d=this.prepareDetailedMessage(c.tileData.title,1,0,g.title,"");}else{for(i in a){if(a[i]==G){a.splice(i,1);break;}}s.getModel().setProperty("/catalogTiles/"+c.tileIndex+"/associatedGroups",a);d=this.prepareDetailedMessage(c.tileData.title,0,1,"",g.title);}sap.m.MessageToast.show(d,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_groupContextOperationFailed:function(c,g,t){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),e;if(t){e=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[c.tileData.title,g.title]});}else{e=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[c.tileData.title,g.title]});}d.resetGroupsOnFailure(e.messageId,e.parameters);},_handleNewGroupCreationPanel:function(g,s,G,p,u){var n,e=sap.ushell.resources.i18n.getText("new_group_name");if(G.length>0){n=G;}else{n=e;}p.push(g._createGroupAndSaveTile(s,n));u.numberOfAddedGroups++;u.firstAddedGroupTitle=n;return u;},_navigateToCreateNewGroupPanel:function(p,n,h){p.removeAllContent();p.addContent(n.addStyleClass("sapUshellCatalogNewGroupInput"));p.setCustomHeader(h);p.setContentHeight("");n.setValueState(sap.ui.core.ValueState.None);n.setPlaceholder(sap.ushell.resources.i18n.getText("new_group_name"));n.enabled=true;setTimeout(function(){n.focus();},0);},prepareErrorMessage:function(e,t){var g,a,f,F,n=0,N=0,c=false,m;for(var i in e){g=e[i].group;a=e[i].action;if(a=='add'){n++;if(n==1){f=g.title;}}else if(a=='remove'){N++;if(N==1){F=g.title;}}else if(a=='addTileToNewGroup'){n++;if(n==1){f=g.title;}}else{c=true;}}if(c){if(e.length==1){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_create_new_group"});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}else if(e.length==1){if(n){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[t,f]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[t,F]});}}else{if(N==0){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_several_groups",parameters:[t]});}else if(n==0){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_several_groups",parameters:[t]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}return m;},prepareDetailedMessage:function(t,n,a,f,b){var m;if(n==0){if(a==1){m=sap.ushell.resources.i18n.getText("tileRemovedFromSingleGroup",[t,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileRemovedFromSeveralGroups",[t,a]);}}else if(n==1){if(a==0){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroup",[t,f]);}else if(a==1){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroupAndRemovedFromSingleGroup",[t,f,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroupAndRemovedFromSeveralGroups",[t,f,a]);}}else if(n>1){if(a==0){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroups",[t,n]);}else if(a==1){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSingleGroup",[t,n,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSeveralGroups",[t,n,a]);}}return m;},createPopoverData:function(e){var s=e.getSource(),S=s.getBindingContext(),a=sap.ushell.Container.getService("LaunchPage"),i,m,p,t,r,u=S.getModel().getProperty("/groups"),c=this.getCatalogTileDataFromModel(S),b=c.tileData.associatedGroups,d=c.tileIndex;for(i=0;i<u.length;i=i+1){r=a.getGroupId(u[i].object);u[i].selected=!($.inArray(r,b)==-1);u[i].initiallySelected=u[i].selected;}p=S.getPath(0);m=S.getModel();t=m.getProperty(p).title;return{userGroupList:u,catalogTile:c,tileTitle:t,tileIndex:d};},getCatalogTileDataFromModel:function(s){var t=this._getCatalogTileIndexInModel(s),m=s.getModel(),T=m.getProperty("/catalogTiles/"+t);return{tileData:T,tileIndex:t,isBeingProcessed:T.isBeingProcessed?true:false};},onAddTile:function(e){var s=e.getParameter("control").getBindingContext();if(!s.getProperty("active")){this._addTile(s,e.getSource().getBindingContext());}},onNavButtonPress:function(e){this.getView().parentComponent.getRouter().navTo('home');},_updateModelWithGroupContext:function(p){var l=sap.ushell.Container.getService("LaunchPage"),m=this.getView().getModel(),g,G={path:p,id:"",title:""};if(p&&p!==""){var t=function(){var M=m.getProperty("/groups");if(M.length){g=m.getProperty(p);G.id=l.getGroupId(g.object);G.title=g.title||l.getGroupTitle(g.object);return;}setTimeout(t,100);};t();}m.setProperty("/groupContext",G);},_addTile:function(t,g){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),a=jQuery.Deferred(),p=d.createTile({catalogTileContext:t,groupContext:g});p.done(function(b){a.resolve(b);});return a;},_removeTile:function(t,i){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),a=jQuery.Deferred(),p=d.deleteCatalogTileFromGroup({tileId:t,groupIndex:i});p.done(function(b){a.resolve(b);});return a;},_createGroupAndSaveTile:function(t,n){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),a=jQuery.Deferred(),p=d.createGroupAndSaveTile({catalogTileContext:t,newGroupName:n});p.done(function(b){a.resolve(b);});return a;}});}());
