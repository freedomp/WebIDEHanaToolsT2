/**
 * @license
 * lodash 3.8.0 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -o ./lodash.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */

(function(){function t(t,e){if(t!==e){var n=t===t,r=e===e;if(t>e||!n||t===E&&r)return 1;if(e>t||!r||e===E&&n)return-1}return 0}function e(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function n(t,e,n){if(e!==e)return h(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function r(t){return"function"==typeof t||!1}function i(t){return"string"==typeof t?t:null==t?"":t+""}function o(t){return t.charCodeAt(0)}function u(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function a(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function c(e,n){return t(e.criteria,n.criteria)||e.index-n.index}function s(e,n,r){for(var i=-1,o=e.criteria,u=n.criteria,a=o.length,c=r.length;++i<a;){var s=t(o[i],u[i]);if(s)return i>=c?s:s*(r[i]?1:-1)}return e.index-n.index}function f(t){return $e[t]}function l(t){return We[t]}function p(t){return"\\"+Ve[t]}function h(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!==o)return i}return-1}function v(t){return!!t&&"object"==typeof t}function g(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function _(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=B,o[++i]=n);return o}function d(t,e){for(var n,r=-1,i=t.length,o=-1,u=[];++r<i;){var a=t[r],c=e?e(a,r,t):a;r&&n===c||(n=c,u[++o]=a)}return u}function y(t){for(var e=-1,n=t.length;++e<n&&g(t.charCodeAt(e)););return e}function m(t){for(var e=t.length;e--&&g(t.charCodeAt(e)););return e}function w(t){return De[t]}function b(g){function H(t){if(v(t)&&!Sc(t)&&!(t instanceof $e)){if(t instanceof te)return t;if(Wu.call(t,"__chain__")&&Wu.call(t,"__wrapped__"))return ui(t)}return new te(t)}function X(){}function te(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function $e(t){this.__wrapped__=t,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Ea,this.__views__=null}function We(){var t=this.__actions__,e=this.__iteratees__,n=this.__views__,r=new $e(this.__wrapped__);return r.__actions__=t?nn(t):null,r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=e?nn(e):null,r.__takeCount__=this.__takeCount__,r.__views__=n?nn(n):null,r}function De(){if(this.__filtered__){var t=new $e(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function ze(){var t=this.__wrapped__.value();if(!Sc(t))return er(t,this.__actions__);var e=this.__dir__,n=0>e,r=Qr(0,t.length,this.__views__),i=r.start,o=r.end,u=o-i,a=n?o:i-1,c=_a(u,this.__takeCount__),s=this.__iteratees__,f=s?s.length:0,l=0,p=[];t:for(;u--&&c>l;){a+=e;for(var h=-1,v=t[a];++h<f;){var g=s[h],_=g.iteratee,d=g.type;if(d==U){if(g.done&&(n?a>g.index:a<g.index)&&(g.count=0,g.done=!1),g.index=a,!g.done){var y=g.limit;if(!(g.done=y>-1?g.count++>=y:!_(v)))continue t}}else{var m=_(v);if(d==Q)v=m;else if(!m){if(d==F)continue t;break t}}}p[l++]=v}return p}function Ve(){this.__data__={}}function Ye(t){return this.has(t)&&delete this.__data__[t]}function He(t){return"__proto__"==t?E:this.__data__[t]}function Ke(t){return"__proto__"!=t&&Wu.call(this.__data__,t)}function Ge(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Je(t){var e=t?t.length:0;for(this.data={hash:pa(null),set:new ia};e--;)this.push(t[e])}function Xe(t,e){var n=t.data,r="string"==typeof e||Co(e)?n.set.has(e):n.hash[e];return r?0:-1}function en(t){var e=this.data;"string"==typeof t||Co(t)?e.set.add(t):e.hash[t]=!0}function nn(t,e){var n=-1,r=t.length;for(e||(e=ju(r));++n<r;)e[n]=t[n];return e}function rn(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function on(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function un(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function an(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var u=t[n];e(u,n,t)&&(o[++i]=u)}return o}function cn(t,e){for(var n=-1,r=t.length,i=ju(r);++n<r;)i[n]=e(t[n],n,t);return i}function sn(t){for(var e=-1,n=t.length,r=ba;++e<n;){var i=t[e];i>r&&(r=i)}return r}function fn(t){for(var e=-1,n=t.length,r=Ea;++e<n;){var i=t[e];r>i&&(r=i)}return r}function ln(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function pn(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function hn(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function vn(t){for(var e=t.length,n=0;e--;)n+=+t[e]||0;return n}function gn(t,e){return t===E?e:t}function _n(t,e,n,r){return t!==E&&Wu.call(r,n)?t:e}function dn(t,e,n){var r=Fc(e);ea.apply(r,$a(e));for(var i=-1,o=r.length;++i<o;){var u=r[i],a=t[u],c=n(a,e[u],u,t,e);(c===c?c===a:a!==a)&&(a!==E||u in t)||(t[u]=c)}return t}function yn(t,e){for(var n=-1,r=null==t,i=!r&&Dr(t),o=i&&t.length,u=e.length,a=ju(u);++n<u;){var c=e[n];a[n]=i?zr(c,o)?t[c]:E:r?E:t[c]}return a}function mn(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}function wn(t,e,n){var r=typeof t;return"function"==r?e===E?t:ir(t,e,n):null==t?gu:"object"==r?Fn(t):e===E?bu(t):Qn(t,e)}function bn(t,e,n,r,i,o,u){var a;if(n&&(a=i?n(t,r,i):n(t)),a!==E)return a;if(!Co(t))return t;var c=Sc(t);if(c){if(a=qr(t),!e)return nn(t,a)}else{var s=zu.call(t),f=s==Y;if(s!=G&&s!=$&&(!f||i))return qe[s]?$r(t,s,e):i?t:{};if(a=Br(f?{}:t),!e)return Ma(a,t)}o||(o=[]),u||(u=[]);for(var l=o.length;l--;)if(o[l]==t)return u[l];return o.push(t),u.push(a),(c?rn:An)(t,function(r,i){a[i]=bn(r,e,n,i,t,o,u)}),a}function En(t,e,n){if("function"!=typeof t)throw new Uu(q);return oa(function(){t.apply(E,n)},e)}function xn(t,e){var r=t?t.length:0,i=[];if(!r)return i;var o=-1,u=Fr(),a=u==n,c=a&&e.length>=200?Fa(e):null,s=e.length;c&&(u=Xe,a=!1,e=c);t:for(;++o<r;){var f=t[o];if(a&&f===f){for(var l=s;l--;)if(e[l]===f)continue t;i.push(f)}else u(e,f,0)<0&&i.push(f)}return i}function In(t,e){var n=!0;return Oa(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Cn(t,e,n,r){var i=t.length;for(n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=r===E||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)t[n++]=e;return t}function Sn(t,e){var n=[];return Oa(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Pn(t,e,n,r){var i;return n(t,function(t,n,o){return e(t,n,o)?(i=r?n:t,!1):void 0}),i}function jn(t,e,n){for(var r=-1,i=t.length,o=-1,u=[];++r<i;){var a=t[r];if(v(a)&&Dr(a)&&(n||Sc(a)||yo(a))){e&&(a=jn(a,e,n));for(var c=-1,s=a.length;++c<s;)u[++o]=a[c]}else n||(u[++o]=a)}return u}function Rn(t,e){return La(t,e,$o)}function An(t,e){return La(t,e,Fc)}function Mn(t,e){return Na(t,e,Fc)}function kn(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var u=e[n];jc(t[u])&&(o[++i]=u)}return o}function On(t,e,n){if(null!=t){n!==E&&n in ii(t)&&(e=[n]);for(var r=-1,i=e.length;null!=t&&++r<i;)t=t[e[r]];return r&&r==i?t:E}}function Tn(t,e,n,r,i,o){if(t===e)return!0;var u=typeof t,a=typeof e;return"function"!=u&&"object"!=u&&"function"!=a&&"object"!=a||null==t||null==e?t!==t&&e!==e:Ln(t,e,Tn,n,r,i,o)}function Ln(t,e,n,r,i,o,u){var a=Sc(t),c=Sc(e),s=W,f=W;a||(s=zu.call(t),s==$?s=G:s!=G&&(a=Oo(t))),c||(f=zu.call(e),f==$?f=G:f!=G&&(c=Oo(e)));var l=s==G,p=f==G,h=s==f;if(h&&!a&&!l)return Tr(t,e,s);if(!i){var v=l&&Wu.call(t,"__wrapped__"),g=p&&Wu.call(e,"__wrapped__");if(v||g)return n(v?t.value():t,g?e.value():e,r,i,o,u)}if(!h)return!1;o||(o=[]),u||(u=[]);for(var _=o.length;_--;)if(o[_]==t)return u[_]==e;o.push(t),u.push(e);var d=(a?Or:Lr)(t,e,n,r,i,o,u);return o.pop(),u.pop(),d}function Nn(t,e,n,r,i){for(var o=-1,u=e.length,a=!i;++o<u;)if(a&&r[o]?n[o]!==t[e[o]]:!(e[o]in t))return!1;for(o=-1;++o<u;){var c=e[o],s=t[c],f=n[o];if(a&&r[o])var l=s!==E||c in t;else l=i?i(s,f,c):E,l===E&&(l=Tn(f,s,i,!0));if(!l)return!1}return!0}function Un(t,e){var n=-1,r=Dr(t)?ju(t.length):[];return Oa(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Fn(t){var e=Fc(t),n=e.length;if(!n)return vu(!0);if(1==n){var r=e[0],i=t[r];if(Gr(i))return function(t){return null==t?!1:t[r]===i&&(i!==E||r in ii(t))}}for(var o=ju(n),u=ju(n);n--;)i=t[e[n]],o[n]=i,u[n]=Gr(i);return function(t){return null!=t&&Nn(ii(t),e,o,u)}}function Qn(t,e){var n=Sc(t),r=Yr(t)&&Gr(e),i=t+"";return t=oi(t),function(o){if(null==o)return!1;var u=i;if(o=ii(o),!(!n&&r||u in o)){if(o=1==t.length?o:On(o,Yn(t,0,-1)),null==o)return!1;u=wi(t),o=ii(o)}return o[u]===e?e!==E||u in o:Tn(e,o[u],null,!0)}}function qn(t,e,n,r,i){if(!Co(t))return t;var o=Dr(e)&&(Sc(e)||Oo(e));if(!o){var u=Fc(e);ea.apply(u,$a(e))}return rn(u||e,function(a,c){if(u&&(c=a,a=e[c]),v(a))r||(r=[]),i||(i=[]),Bn(t,e,c,qn,n,r,i);else{var s=t[c],f=n?n(s,a,c,t,e):E,l=f===E;l&&(f=a),!o&&f===E||!l&&(f===f?f===s:s!==s)||(t[c]=f)}}),t}function Bn(t,e,n,r,i,o,u){for(var a=o.length,c=e[n];a--;)if(o[a]==c)return t[n]=u[a],void 0;var s=t[n],f=i?i(s,c,n,t,e):E,l=f===E;l&&(f=c,Dr(c)&&(Sc(c)||Oo(c))?f=Sc(s)?s:Dr(s)?nn(s):[]:Rc(c)||yo(c)?f=yo(s)?No(s):Rc(s)?s:{}:l=!1),o.push(c),u.push(f),l?t[n]=r(f,c,i,o,u):(f===f?f!==s:s===s)&&(t[n]=f)}function $n(t){return function(e){return null==e?E:e[t]}}function Wn(t){var e=t+"";return t=oi(t),function(n){return On(n,t,e)}}function Dn(t,e){for(var n=t?e.length:0;n--;){var r=parseFloat(e[n]);if(r!=i&&zr(r)){var i=r;ua.call(t,r,1)}}return t}function zn(t,e){return t+Xu(wa()*(e-t+1))}function Vn(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function Yn(t,e,n){var r=-1,i=t.length;e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),n=n===E||n>i?i:+n||0,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=ju(i);++r<i;)o[r]=t[r+e];return o}function Hn(t,e){var n;return Oa(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function Kn(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Gn(t,e,n){var r=Ur(),i=-1;e=cn(e,function(t){return r(t)});var o=Un(t,function(t){var n=cn(e,function(e){return e(t)});return{criteria:n,index:++i,value:t}});return Kn(o,function(t,e){return s(t,e,n)})}function Jn(t,e){var n=0;return Oa(t,function(t,r,i){n+=+e(t,r,i)||0}),n}function Xn(t,e){var r=-1,i=Fr(),o=t.length,u=i==n,a=u&&o>=200,c=a?Fa():null,s=[];c?(i=Xe,u=!1):(a=!1,c=e?[]:s);t:for(;++r<o;){var f=t[r],l=e?e(f,r,t):f;if(u&&f===f){for(var p=c.length;p--;)if(c[p]===l)continue t;e&&c.push(l),s.push(f)}else i(c,l,0)<0&&((e||a)&&c.push(l),s.push(f))}return s}function Zn(t,e){for(var n=-1,r=e.length,i=ju(r);++n<r;)i[n]=t[e[n]];return i}function tr(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Yn(t,r?0:o,r?o+1:i):Yn(t,r?o+1:0,r?i:o)}function er(t,e){var n=t;n instanceof $e&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var o=[n],u=e[r];ea.apply(o,u.args),n=u.func.apply(u.thisArg,o)}return n}function nr(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&Ca>=i){for(;i>r;){var o=r+i>>>1,u=t[o];(n?e>=u:e>u)?r=o+1:i=o}return i}return rr(t,e,gu,n)}function rr(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,u=e!==e,a=e===E;o>i;){var c=Xu((i+o)/2),s=n(t[c]),f=s===s;if(u)var l=f||r;else l=a?f&&(r||s!==E):r?e>=s:e>s;l?i=c+1:o=c}return _a(o,Ia)}function ir(t,e,n){if("function"!=typeof t)return gu;if(e===E)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,u){return t.call(e,n,r,i,o,u)}}return function(){return t.apply(e,arguments)}}function or(t){return Ku.call(t,0)}function ur(t,e,n){for(var r=n.length,i=-1,o=ga(t.length-r,0),u=-1,a=e.length,c=ju(o+a);++u<a;)c[u]=e[u];for(;++i<r;)c[n[i]]=t[i];for(;o--;)c[u++]=t[i++];return c}function ar(t,e,n){for(var r=-1,i=n.length,o=-1,u=ga(t.length-i,0),a=-1,c=e.length,s=ju(u+c);++o<u;)s[o]=t[o];for(var f=o;++a<c;)s[f+a]=e[a];for(;++r<i;)s[f+n[r]]=t[o++];return s}function cr(t,e){return function(n,r,i){var o=e?e():{};if(r=Ur(r,i,3),Sc(n))for(var u=-1,a=n.length;++u<a;){var c=n[u];t(o,c,r(c,u,n),n)}else Oa(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function sr(t){return lo(function(e,n){var r=-1,i=null==e?0:n.length,o=i>2&&n[i-2],u=i>2&&n[2],a=i>1&&n[i-1];for("function"==typeof o?(o=ir(o,a,5),i-=2):(o="function"==typeof a?a:null,i-=o?1:0),u&&Vr(n[0],n[1],u)&&(o=3>i?null:o,i=1);++r<i;){var c=n[r];c&&t(e,c,o)}return e})}function fr(t,e){return function(n,r){var i=n?Ba(n):0;if(!Kr(i))return t(n,r);for(var o=e?i:-1,u=ii(n);(e?o--:++o<i)&&r(u[o],o,u)!==!1;);return n}}function lr(t){return function(e,n,r){for(var i=ii(e),o=r(e),u=o.length,a=t?u:-1;t?a--:++a<u;){var c=o[a];if(n(i[c],c,i)===!1)break}return e}}function pr(t,e){function n(){var i=this&&this!==Ze&&this instanceof n?r:t;return i.apply(e,arguments)}var r=vr(t);return n}function hr(t){return function(e){for(var n=-1,r=pu(Xo(e)),i=r.length,o="";++n<i;)o=t(o,r[n],n);return o}}function vr(t){return function(){var e=ka(t.prototype),n=t.apply(e,arguments);return Co(n)?n:e}}function gr(t){function e(n,r,i){i&&Vr(n,r,i)&&(r=null);var o=kr(n,t,null,null,null,null,null,r);return o.placeholder=e.placeholder,o}return e}function _r(t,e){return function(n,r,i){i&&Vr(n,r,i)&&(r=null);var u=Ur(),a=null==r;if(u===wn&&a||(a=!1,r=u(r,i,3)),a){var c=Sc(n);if(c||!ko(n))return t(c?n:ri(n));r=o}return Nr(n,r,e)}}function dr(t,n){return function(r,i,o){if(i=Ur(i,o,3),Sc(r)){var u=e(r,i,n);return u>-1?r[u]:E}return Pn(r,i,t)}}function yr(t){return function(n,r,i){return n&&n.length?(r=Ur(r,i,3),e(n,r,t)):-1}}function mr(t){return function(e,n,r){return n=Ur(n,r,3),Pn(e,n,t,!0)}}function wr(t){return function(){var e=arguments.length;if(!e)return function(){return arguments[0]};for(var n,r=t?e:-1,i=0,o=ju(e);t?r--:++r<e;){var u=o[i++]=arguments[r];if("function"!=typeof u)throw new Uu(q);var a=n?"":qa(u);n="wrapper"==a?new te([]):n}for(r=n?-1:e;++r<e;){u=o[r],a=qa(u);var c="wrapper"==a?Qa(u):null;n=c&&Hr(c[0])&&c[1]==(M|P|R|k)&&!c[4].length&&1==c[9]?n[qa(c[0])].apply(n,c[3]):1==u.length&&Hr(u)?n[a]():n.thru(u)}return function(){var t=arguments;if(n&&1==t.length&&Sc(t[0]))return n.plant(t[0]).value();for(var r=0,i=o[r].apply(this,t);++r<e;)i=o[r].call(this,i);return i}}}function br(t,e){return function(n,r,i){return"function"==typeof r&&i===E&&Sc(n)?t(n,r):e(n,ir(r,i,3))}}function Er(t){return function(e,n,r){return("function"!=typeof n||r!==E)&&(n=ir(n,r,3)),t(e,n,$o)}}function xr(t){return function(e,n,r){return("function"!=typeof n||r!==E)&&(n=ir(n,r,3)),t(e,n)}}function Ir(t){return function(e,n,r){var i={};return n=Ur(n,r,3),An(e,function(e,r,o){var u=n(e,r,o);r=t?u:r,e=t?e:u,i[r]=e}),i}}function Cr(t){return function(e,n,r){return e=i(e),(t?e:"")+Rr(e,n,r)+(t?"":e)}}function Sr(t){var e=lo(function(n,r){var i=_(r,e.placeholder);return kr(n,t,null,r,i)});return e}function Pr(t,e){return function(n,r,i,o){var u=arguments.length<3;return"function"==typeof r&&o===E&&Sc(n)?t(n,r,i,u):Vn(n,Ur(r,o,4),i,u,e)}}function jr(t,e,n,r,i,o,u,a,c,s){function f(){for(var w=arguments.length,b=w,x=ju(w);b--;)x[b]=arguments[b];if(r&&(x=ur(x,r,i)),o&&(x=ar(x,o,u)),v||d){var S=f.placeholder,P=_(x,S);if(w-=P.length,s>w){var j=a?nn(a):null,M=ga(s-w,0),k=v?P:null,O=v?null:P,T=v?x:null,L=v?null:x;e|=v?R:A,e&=~(v?A:R),g||(e&=~(I|C));var N=[t,e,n,T,k,L,O,j,c,M],U=jr.apply(E,N);return Hr(t)&&Wa(U,N),U.placeholder=S,U}}var F=p?n:this;h&&(t=F[m]),a&&(x=ti(x,a)),l&&c<x.length&&(x.length=c);var Q=this&&this!==Ze&&this instanceof f?y||vr(t):t;return Q.apply(F,x)}var l=e&M,p=e&I,h=e&C,v=e&P,g=e&S,d=e&j,y=!h&&vr(t),m=t;return f}function Rr(t,e,n){var r=t.length;if(e=+e,r>=e||!ha(e))return"";var i=e-r;return n=null==n?" ":n+"",iu(n,Gu(i/n.length)).slice(0,i)}function Ar(t,e,n,r){function i(){for(var e=-1,a=arguments.length,c=-1,s=r.length,f=ju(a+s);++c<s;)f[c]=r[c];for(;a--;)f[c++]=arguments[++e];var l=this&&this!==Ze&&this instanceof i?u:t;return l.apply(o?n:this,f)}var o=e&I,u=vr(t);return i}function Mr(t){return function(e,n,r,i){var o=Ur(r);return o===wn&&null==r?nr(e,n,t):rr(e,n,o(r,i,1),t)}}function kr(t,e,n,r,i,o,u,a){var c=e&C;if(!c&&"function"!=typeof t)throw new Uu(q);var s=r?r.length:0;if(s||(e&=~(R|A),r=i=null),s-=i?i.length:0,e&A){var f=r,l=i;r=i=null}var p=c?null:Qa(t),h=[t,e,n,r,i,f,l,o,u,a];if(p&&(Jr(h,p),e=h[1],a=h[9]),h[9]=null==a?c?0:t.length:ga(a-s,0)||0,e==I)var v=pr(h[0],h[2]);else v=e!=R&&e!=(I|R)||h[4].length?jr.apply(E,h):Ar.apply(E,h);var g=p?Ua:Wa;return g(v,h)}function Or(t,e,n,r,i,o,u){var a=-1,c=t.length,s=e.length,f=!0;if(c!=s&&!(i&&s>c))return!1;for(;f&&++a<c;){var l=t[a],p=e[a];if(f=E,r&&(f=i?r(p,l,a):r(l,p,a)),f===E)if(i)for(var h=s;h--&&(p=e[h],!(f=l&&l===p||n(l,p,r,i,o,u))););else f=l&&l===p||n(l,p,r,i,o,u)}return!!f}function Tr(t,e,n){switch(n){case D:case z:return+t==+e;case V:return t.name==e.name&&t.message==e.message;case K:return t!=+t?e!=+e:t==+e;case J:case Z:return t==e+""}return!1}function Lr(t,e,n,r,i,o,u){var a=Fc(t),c=a.length,s=Fc(e),f=s.length;if(c!=f&&!i)return!1;for(var l=i,p=-1;++p<c;){var h=a[p],v=i?h in e:Wu.call(e,h);if(v){var g=t[h],_=e[h];v=E,r&&(v=i?r(_,g,h):r(g,_,h)),v===E&&(v=g&&g===_||n(g,_,r,i,o,u))}if(!v)return!1;l||(l="constructor"==h)}if(!l){var d=t.constructor,y=e.constructor;if(d!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof d&&d instanceof d&&"function"==typeof y&&y instanceof y))return!1}return!0}function Nr(t,e,n){var r=n?Ea:ba,i=r,o=i;return Oa(t,function(t,u,a){var c=e(t,u,a);((n?i>c:c>i)||c===r&&c===o)&&(i=c,o=t)}),o}function Ur(t,e,n){var r=H.callback||hu;return r=r===hu?wn:r,n?r(t,e,n):r}function Fr(t,e,r){var i=H.indexOf||di;return i=i===di?n:i,t?i(t,e,r):i}function Qr(t,e,n){for(var r=-1,i=n?n.length:0;++r<i;){var o=n[r],u=o.size;switch(o.type){case"drop":t+=u;break;case"dropRight":e-=u;break;case"take":e=_a(e,t+u);break;case"takeRight":t=ga(t,e-u)}}return{start:t,end:e}}function qr(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Wu.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Br(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Tu),new e}function $r(t,e,n){var r=t.constructor;switch(e){case ee:return or(t);case D:case z:return new r(+t);case ne:case re:case ie:case oe:case ue:case ae:case ce:case se:case fe:var i=t.buffer;return new r(n?or(i):i,t.byteOffset,t.length);case K:case Z:return new r(t);case J:var o=new r(t.source,Re.exec(t));o.lastIndex=t.lastIndex}return o}function Wr(t,e,n){null==t||Yr(e,t)||(e=oi(e),t=1==e.length?t:On(t,Yn(e,0,-1)),e=wi(e));var r=null==t?t:t[e];return null==r?E:r.apply(t,n)}function Dr(t){return null!=t&&Kr(Ba(t))}function zr(t,e){return t=+t,e=null==e?Pa:e,t>-1&&0==t%1&&e>t}function Vr(t,e,n){if(!Co(n))return!1;var r=typeof e;if("number"==r?Dr(n)&&zr(e,n.length):"string"==r&&e in n){var i=n[e];return t===t?t===i:i!==i}return!1}function Yr(t,e){var n=typeof t;if("string"==n&&Ee.test(t)||"number"==n)return!0;if(Sc(t))return!1;var r=!be.test(t);return r||null!=e&&t in ii(e)}function Hr(t){var e=qa(t);return!!e&&t===H[e]&&e in $e.prototype}function Kr(t){return"number"==typeof t&&t>-1&&0==t%1&&Pa>=t}function Gr(t){return t===t&&!Co(t)}function Jr(t,e){var n=t[1],r=e[1],i=n|r,o=M>i,u=r==M&&n==P||r==M&&n==k&&t[7].length<=e[8]||r==(M|k)&&n==P;if(!o&&!u)return t;r&I&&(t[2]=e[2],i|=n&I?0:S);var a=e[3];if(a){var c=t[3];t[3]=c?ur(c,a,e[4]):nn(a),t[4]=c?_(t[3],B):nn(e[4])}return a=e[5],a&&(c=t[5],t[5]=c?ar(c,a,e[6]):nn(a),t[6]=c?_(t[5],B):nn(e[6])),a=e[7],a&&(t[7]=nn(a)),r&M&&(t[8]=null==t[8]?e[8]:_a(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Xr(t,e){t=ii(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function Zr(t,e){var n={};return Rn(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function ti(t,e){for(var n=t.length,r=_a(e.length,n),i=nn(t);r--;){var o=e[r];t[r]=zr(o,n)?i[o]:E}return t}function ei(t){var e;if(H.support,!v(t)||zu.call(t)!=G||!Wu.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return Rn(t,function(t,e){n=e}),n===E||Wu.call(t,n)}function ni(t){for(var e=$o(t),n=e.length,r=n&&t.length,i=H.support,o=r&&Kr(r)&&(Sc(t)||i.nonEnumArgs&&yo(t)),u=-1,a=[];++u<n;){var c=e[u];(o&&zr(c,r)||Wu.call(t,c))&&a.push(c)}return a}function ri(t){return null==t?[]:Dr(t)?Co(t)?t:Tu(t):Yo(t)}function ii(t){return Co(t)?t:Tu(t)}function oi(t){if(Sc(t))return t;var e=[];return i(t).replace(xe,function(t,n,r,i){e.push(r?i.replace(Pe,"$1"):n||t)}),e}function ui(t){return t instanceof $e?t.clone():new te(t.__wrapped__,t.__chain__,nn(t.__actions__))}function ai(t,e,n){e=(n?Vr(t,e,n):null==e)?1:ga(+e||1,1);for(var r=0,i=t?t.length:0,o=-1,u=ju(Gu(i/e));i>r;)u[++o]=Yn(t,r,r+=e);return u}function ci(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i}function si(t,e,n){var r=t?t.length:0;return r?((n?Vr(t,e,n):null==e)&&(e=1),Yn(t,0>e?0:e)):[]}function fi(t,e,n){var r=t?t.length:0;return r?((n?Vr(t,e,n):null==e)&&(e=1),e=r-(+e||0),Yn(t,0,0>e?0:e)):[]}function li(t,e,n){return t&&t.length?tr(t,Ur(e,n,3),!0,!0):[]}function pi(t,e,n){return t&&t.length?tr(t,Ur(e,n,3),!0):[]}function hi(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Vr(t,e,n)&&(n=0,r=i),Cn(t,e,n,r)):[]}function vi(t){return t?t[0]:E}function gi(t,e,n){var r=t?t.length:0;return n&&Vr(t,e,n)&&(e=!1),r?jn(t,e):[]}function _i(t){var e=t?t.length:0;return e?jn(t,!0):[]}function di(t,e,r){var i=t?t.length:0;if(!i)return-1;if("number"==typeof r)r=0>r?ga(i+r,0):r;else if(r){var o=nr(t,e),u=t[o];return(e===e?e===u:u!==u)?o:-1}return n(t,e,r||0)}function yi(t){return fi(t,1)}function mi(){for(var t=[],e=-1,r=arguments.length,i=[],o=Fr(),u=o==n,a=[];++e<r;){var c=arguments[e];Dr(c)&&(t.push(c),i.push(u&&c.length>=120?Fa(e&&c):null))}if(r=t.length,2>r)return a;var s=t[0],f=-1,l=s?s.length:0,p=i[0];t:for(;++f<l;)if(c=s[f],(p?Xe(p,c):o(a,c,0))<0){for(e=r;--e;){var h=i[e];if((h?Xe(h,c):o(t[e],c,0))<0)continue t}p&&p.push(c),a.push(c)}return a}function wi(t){var e=t?t.length:0;return e?t[e-1]:E}function bi(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?ga(r+n,0):_a(n||0,r-1))+1;else if(n){i=nr(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return h(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function Ei(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Fr(),i=t.length;++n<i;)for(var o=0,u=t[n];(o=r(e,u,o))>-1;)ua.call(e,o,1);return e}function xi(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,o=[],u=t.length;for(e=Ur(e,n,3);++i<u;){var a=t[i];e(a,i,t)&&(r.push(a),o.push(i))}return Dn(t,o),r}function Ii(t){return si(t,1)}function Ci(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Vr(t,e,n)&&(e=0,n=r),Yn(t,e,n)):[]}function Si(t,e,n){var r=t?t.length:0;return r?((n?Vr(t,e,n):null==e)&&(e=1),Yn(t,0,0>e?0:e)):[]}function Pi(t,e,n){var r=t?t.length:0;return r?((n?Vr(t,e,n):null==e)&&(e=1),e=r-(+e||0),Yn(t,0>e?0:e)):[]}function ji(t,e,n){return t&&t.length?tr(t,Ur(e,n,3),!1,!0):[]}function Ri(t,e,n){return t&&t.length?tr(t,Ur(e,n,3)):[]}function Ai(t,e,r,i){var o=t?t.length:0;if(!o)return[];null!=e&&"boolean"!=typeof e&&(i=r,r=Vr(t,e,i)?null:e,e=!1);var u=Ur();return(u!==wn||null!=r)&&(r=u(r,i,3)),e&&Fr()==n?d(t,r):Xn(t,r)}function Mi(t){if(!t||!t.length)return[];var e=-1,n=0;t=an(t,function(t){return Dr(t)?(n=ga(t.length,n),!0):void 0});for(var r=ju(n);++e<n;)r[e]=cn(t,$n(e));return r}function ki(t,e,n){var r=t?t.length:0;if(!r)return[];var i=Mi(t);return null==e?i:(e=ir(e,n,4),cn(i,function(t){return ln(t,e,E,!0)}))}function Oi(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Dr(n))var r=r?xn(r,n).concat(xn(n,r)):n}return r?Xn(r):[]}function Ti(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||Sc(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Li(t){var e=H(t);return e.__chain__=!0,e}function Ni(t,e,n){return e.call(n,t),t}function Ui(t,e,n){return e.call(n,t)}function Fi(){return Li(this)}function Qi(){return new te(this.value(),this.__chain__)}function qi(t){for(var e,n=this;n instanceof X;){var r=ui(n);e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e}function Bi(){var t=this.__wrapped__;return t instanceof $e?(this.__actions__.length&&(t=new $e(this)),new te(t.reverse(),this.__chain__)):this.thru(function(t){return t.reverse()})}function $i(){return this.value()+""}function Wi(){return er(this.__wrapped__,this.__actions__)}function Di(t,e,n){var r=Sc(t)?un:In;return n&&Vr(t,e,n)&&(e=null),("function"!=typeof e||n!==E)&&(e=Ur(e,n,3)),r(t,e)}function zi(t,e,n){var r=Sc(t)?an:Sn;return e=Ur(e,n,3),r(t,e)}function Vi(t,e){return nc(t,Fn(e))}function Yi(t,e,n,r){var i=t?Ba(t):0;return Kr(i)||(t=Yo(t),i=t.length),i?(n="number"!=typeof n||r&&Vr(e,n,r)?0:0>n?ga(i+n,0):n||0,"string"==typeof t||!Sc(t)&&ko(t)?i>n&&t.indexOf(e,n)>-1:Fr(t,e,n)>-1):!1}function Hi(t,e,n){var r=Sc(t)?cn:Un;return e=Ur(e,n,3),r(t,e)}function Ki(t,e){return Hi(t,bu(e))}function Gi(t,e,n){var r=Sc(t)?an:Sn;return e=Ur(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})}function Ji(t,e,n){if(n?Vr(t,e,n):null==e){t=ri(t);var r=t.length;return r>0?t[zn(0,r-1)]:E}var i=Xi(t);return i.length=_a(0>e?0:+e||0,i.length),i}function Xi(t){t=ri(t);for(var e=-1,n=t.length,r=ju(n);++e<n;){var i=zn(0,e);e!=i&&(r[e]=r[i]),r[i]=t[e]}return r}function Zi(t){var e=t?Ba(t):0;return Kr(e)?e:Fc(t).length}function to(t,e,n){var r=Sc(t)?hn:Hn;return n&&Vr(t,e,n)&&(e=null),("function"!=typeof e||n!==E)&&(e=Ur(e,n,3)),r(t,e)}function eo(t,e,n){if(null==t)return[];n&&Vr(t,e,n)&&(e=null);var r=-1;e=Ur(e,n,3);var i=Un(t,function(t,n,i){return{criteria:e(t,n,i),index:++r,value:t}});return Kn(i,c)}function no(t,e,n,r){return null==t?[]:(r&&Vr(e,n,r)&&(n=null),Sc(e)||(e=null==e?[]:[e]),Sc(n)||(n=null==n?[]:[n]),Gn(t,e,n))}function ro(t,e){return zi(t,Fn(e))}function io(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Uu(q);var n=t;t=e,e=n}return t=ha(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function oo(t,e,n){return n&&Vr(t,e,n)&&(e=null),e=t&&null==e?t.length:ga(+e||0,0),kr(t,M,null,null,null,null,e)}function uo(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Uu(q);var r=t;t=e,e=r}return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}}function ao(t,e,n){function r(){p&&Ju(p),c&&Ju(c),c=p=h=E}function i(){var n=e-(hc()-f);if(0>=n||n>e){c&&Ju(c);var r=h;c=p=h=E,r&&(v=hc(),s=t.apply(l,a),p||c||(a=l=null))}else p=oa(i,n)}function o(){p&&Ju(p),c=p=h=E,(_||g!==e)&&(v=hc(),s=t.apply(l,a),p||c||(a=l=null))}function u(){if(a=arguments,f=hc(),l=this,h=_&&(p||!d),g===!1)var n=d&&!p;else{c||d||(v=f);var r=g-(f-v),u=0>=r||r>g;u?(c&&(c=Ju(c)),v=f,s=t.apply(l,a)):c||(c=oa(o,r))}return u&&p?p=Ju(p):p||e===g||(p=oa(i,e)),n&&(u=!0,s=t.apply(l,a)),!u||p||c||(a=l=null),s}var a,c,s,f,l,p,h,v=0,g=!1,_=!0;if("function"!=typeof t)throw new Uu(q);if(e=0>e?0:+e||0,n===!0){var d=!0;_=!1}else Co(n)&&(d=n.leading,g="maxWait"in n&&ga(+n.maxWait||0,e),_="trailing"in n?n.trailing:_);return u.cancel=r,u}function co(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Uu(q);var n=function(){var r=arguments,i=n.cache,o=e?e.apply(this,r):r[0];if(i.has(o))return i.get(o);var u=t.apply(this,r);return i.set(o,u),u};return n.cache=new co.Cache,n}function so(t){if("function"!=typeof t)throw new Uu(q);return function(){return!t.apply(this,arguments)}}function fo(t){return uo(2,t)}function lo(t,e){if("function"!=typeof t)throw new Uu(q);return e=ga(e===E?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=ga(n.length-e,0),o=ju(i);++r<i;)o[r]=n[e+r];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var u=ju(e+1);for(r=-1;++r<e;)u[r]=n[r];return u[e]=o,t.apply(this,u)}}function po(t){if("function"!=typeof t)throw new Uu(q);return function(e){return t.apply(this,e)}}function ho(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Uu(q);return n===!1?r=!1:Co(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Be.leading=r,Be.maxWait=+e,Be.trailing=i,ao(t,e,Be)}function vo(t,e){return e=null==e?gu:e,kr(e,R,null,[t],[])}function go(t,e,n,r){return e&&"boolean"!=typeof e&&Vr(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),n="function"==typeof n&&ir(n,r,1),bn(t,e,n)}function _o(t,e,n){return e="function"==typeof e&&ir(e,n,1),bn(t,!0,e)}function yo(t){return v(t)&&Dr(t)&&zu.call(t)==$}function mo(t){return t===!0||t===!1||v(t)&&zu.call(t)==D}function wo(t){return v(t)&&zu.call(t)==z}function bo(t){return!!t&&1===t.nodeType&&v(t)&&zu.call(t).indexOf("Element")>-1}function Eo(t){return null==t?!0:Dr(t)&&(Sc(t)||ko(t)||yo(t)||v(t)&&jc(t.splice))?!t.length:!Fc(t).length}function xo(t,e,n,r){if(n="function"==typeof n&&ir(n,r,3),!n&&Gr(t)&&Gr(e))return t===e;var i=n?n(t,e):E;return i===E?Tn(t,e,n):!!i}function Io(t){return v(t)&&"string"==typeof t.message&&zu.call(t)==V}function Co(t){var e=typeof t;return"function"==e||!!t&&"object"==e}function So(t,e,n,r){var i=Fc(e),o=i.length;if(!o)return!0;if(null==t)return!1;if(n="function"==typeof n&&ir(n,r,3),t=ii(t),!n&&1==o){var u=i[0],a=e[u];if(Gr(a))return a===t[u]&&(a!==E||u in t)}for(var c=ju(o),s=ju(o);o--;)a=c[o]=e[i[o]],s[o]=Gr(a);return Nn(t,i,c,s,n)}function Po(t){return Ao(t)&&t!=+t}function jo(t){return null==t?!1:zu.call(t)==Y?Yu.test($u.call(t)):v(t)&&Me.test(t)}function Ro(t){return null===t}function Ao(t){return"number"==typeof t||v(t)&&zu.call(t)==K}function Mo(t){return v(t)&&zu.call(t)==J}function ko(t){return"string"==typeof t||v(t)&&zu.call(t)==Z}function Oo(t){return v(t)&&Kr(t.length)&&!!Qe[zu.call(t)]}function To(t){return t===E}function Lo(t){var e=t?Ba(t):0;return Kr(e)?e?nn(t):[]:Yo(t)}function No(t){return mn(t,$o(t))}function Uo(t,e,n){var r=ka(t);return n&&Vr(t,e,n)&&(e=null),e?Ma(r,e):r}function Fo(t){return kn(t,$o(t))}function Qo(t,e,n){var r=null==t?E:On(t,oi(e),e+"");return r===E?n:r}function qo(t,e){if(null==t)return!1;var n=Wu.call(t,e);return n||Yr(e)||(e=oi(e),t=1==e.length?t:On(t,Yn(e,0,-1)),e=wi(e),n=null!=t&&Wu.call(t,e)),n}function Bo(t,e,n){n&&Vr(t,e,n)&&(e=null);for(var r=-1,i=Fc(t),o=i.length,u={};++r<o;){var a=i[r],c=t[a];e?Wu.call(u,c)?u[c].push(a):u[c]=[a]:u[c]=a}return u}function $o(t){if(null==t)return[];Co(t)||(t=Tu(t));var e=t.length;e=e&&Kr(e)&&(Sc(t)||Aa.nonEnumArgs&&yo(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=ju(e),u=e>0;++r<e;)o[r]=r+"";for(var a in t)u&&zr(a,e)||"constructor"==a&&(i||!Wu.call(t,a))||o.push(a);return o}function Wo(t){for(var e=-1,n=Fc(t),r=n.length,i=ju(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function Do(t,e,n){var r=null==t?E:t[e];return r===E&&(null==t||Yr(e,t)||(e=oi(e),t=1==e.length?t:On(t,Yn(e,0,-1)),r=null==t?E:t[wi(e)]),r=r===E?n:r),jc(r)?r.call(t):r}function zo(t,e,n){if(null==t)return t;var r=e+"";e=null!=t[r]||Yr(e,t)?[r]:oi(e);for(var i=-1,o=e.length,u=o-1,a=t;null!=a&&++i<o;){var c=e[i];Co(a)&&(i==u?a[c]=n:null==a[c]&&(a[c]=zr(e[i+1])?[]:{})),a=a[c]}return t}function Vo(t,e,n,r){var i=Sc(t)||Oo(t);if(e=Ur(e,r,4),null==n)if(i||Co(t)){var o=t.constructor;n=i?Sc(t)?new o:[]:ka(jc(o)&&o.prototype)}else n={};return(i?rn:An)(t,function(t,r,i){return e(n,t,r,i)}),n}function Yo(t){return Zn(t,Fc(t))}function Ho(t){return Zn(t,$o(t))}function Ko(t,e,n){return e=+e||0,"undefined"==typeof n?(n=e,e=0):n=+n||0,t>=_a(e,n)&&t<ga(e,n)}function Go(t,e,n){n&&Vr(t,e,n)&&(e=n=null);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=wa();return _a(t+o*(e-t+parseFloat("1e-"+((o+"").length-1))),e)}return zn(t,e)}function Jo(t){return t=i(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function Xo(t){return t=i(t),t&&t.replace(ke,f).replace(Se,"")}function Zo(t,e,n){t=i(t),e+="";var r=t.length;return n=n===E?r:_a(0>n?0:+n||0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n}function tu(t){return t=i(t),t&&de.test(t)?t.replace(ge,l):t}function eu(t){return t=i(t),t&&Ce.test(t)?t.replace(Ie,"\\$&"):t}function nu(t,e,n){t=i(t),e=+e;var r=t.length;if(r>=e||!ha(e))return t;var o=(e-r)/2,u=Xu(o),a=Gu(o);return n=Rr("",a,n),n.slice(0,u)+t+n}function ru(t,e,n){return n&&Vr(t,e,n)&&(e=0),ma(t,e)
}function iu(t,e){var n="";if(t=i(t),e=+e,1>e||!t||!ha(e))return n;do e%2&&(n+=t),e=Xu(e/2),t+=t;while(e);return n}function ou(t,e,n){return t=i(t),n=null==n?0:_a(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function uu(t,e,n){var r=H.templateSettings;n&&Vr(t,e,n)&&(e=n=null),t=i(t),e=dn(Ma({},n||e),r,_n);var o,u,a=dn(Ma({},e.imports),r.imports,_n),c=Fc(a),s=Zn(a,c),f=0,l=e.interpolate||Oe,h="__p += '",v=Lu((e.escape||Oe).source+"|"+l.source+"|"+(l===we?je:Oe).source+"|"+(e.evaluate||Oe).source+"|$","g"),g="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Fe+"]")+"\n";t.replace(v,function(e,n,r,i,a,c){return r||(r=i),h+=t.slice(f,c).replace(Te,p),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),a&&(u=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=c+e.length,e}),h+="';\n";var _=e.variable;_||(h="with (obj) {\n"+h+"\n}\n"),h=(u?h.replace(le,""):h).replace(pe,"$1").replace(he,"$1;"),h="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var d=Gc(function(){return Mu(c,g+"return "+h).apply(E,s)});if(d.source=h,Io(d))throw d;return d}function au(t,e,n){var r=t;return(t=i(t))?(n?Vr(r,e,n):null==e)?t.slice(y(t),m(t)+1):(e+="",t.slice(u(t,e),a(t,e)+1)):t}function cu(t,e,n){var r=t;return t=i(t),t?(n?Vr(r,e,n):null==e)?t.slice(y(t)):t.slice(u(t,e+"")):t}function su(t,e,n){var r=t;return t=i(t),t?(n?Vr(r,e,n):null==e)?t.slice(0,m(t)+1):t.slice(0,a(t,e+"")+1):t}function fu(t,e,n){n&&Vr(t,e,n)&&(e=null);var r=O,o=T;if(null!=e)if(Co(e)){var u="separator"in e?e.separator:u;r="length"in e?+e.length||0:r,o="omission"in e?i(e.omission):o}else r=+e||0;if(t=i(t),r>=t.length)return t;var a=r-o.length;if(1>a)return o;var c=t.slice(0,a);if(null==u)return c+o;if(Mo(u)){if(t.slice(a).search(u)){var s,f,l=t.slice(0,a);for(u.global||(u=Lu(u.source,(Re.exec(u)||"")+"g")),u.lastIndex=0;s=u.exec(l);)f=s.index;c=c.slice(0,null==f?a:f)}}else if(t.indexOf(u,a)!=a){var p=c.lastIndexOf(u);p>-1&&(c=c.slice(0,p))}return c+o}function lu(t){return t=i(t),t&&_e.test(t)?t.replace(ve,w):t}function pu(t,e,n){return n&&Vr(t,e,n)&&(e=null),t=i(t),t.match(e||Le)||[]}function hu(t,e,n){return n&&Vr(t,e,n)&&(e=null),v(t)?_u(t):wn(t,e)}function vu(t){return function(){return t}}function gu(t){return t}function _u(t){return Fn(bn(t,!0))}function du(t,e){return Qn(t,bn(e,!0))}function yu(t,e,n){if(null==n){var r=Co(e),i=r&&Fc(e),o=i&&i.length&&kn(e,i);(o?o.length:r)||(o=!1,n=e,e=t,t=this)}o||(o=kn(e,Fc(e)));var u=!0,a=-1,c=jc(t),s=o.length;n===!1?u=!1:Co(n)&&"chain"in n&&(u=n.chain);for(;++a<s;){var f=o[a],l=e[f];t[f]=l,c&&(t.prototype[f]=function(e){return function(){var n=this.__chain__;if(u||n){var r=t(this.__wrapped__),i=r.__actions__=nn(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}var o=[this.value()];return ea.apply(o,arguments),e.apply(t,o)}}(l))}return t}function mu(){return g._=Vu,this}function wu(){}function bu(t){return Yr(t)?$n(t):Wn(t)}function Eu(t){return function(e){return On(t,oi(e),e+"")}}function xu(t,e,n){n&&Vr(t,e,n)&&(e=n=null),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=ga(Gu((e-t)/(n||1)),0),o=ju(i);++r<i;)o[r]=t,t+=n;return o}function Iu(t,e,n){if(t=Xu(t),1>t||!ha(t))return[];var r=-1,i=ju(_a(t,xa));for(e=ir(e,n,1);++r<t;)xa>r?i[r]=e(r):e(r);return i}function Cu(t){var e=++Du;return i(t)+e}function Su(t,e){return(+t||0)+(+e||0)}function Pu(t,e,n){n&&Vr(t,e,n)&&(e=null);var r=Ur(),i=null==e;return r===wn&&i||(i=!1,e=r(e,n,3)),i?vn(Sc(t)?t:ri(t)):Jn(t,e)}g=g?tn.defaults(Ze.Object(),g,tn.pick(Ze,Ue)):Ze;var ju=g.Array,Ru=g.Date,Au=g.Error,Mu=g.Function,ku=g.Math,Ou=g.Number,Tu=g.Object,Lu=g.RegExp,Nu=g.String,Uu=g.TypeError,Fu=ju.prototype,Qu=Tu.prototype,qu=Nu.prototype,Bu=(Bu=g.window)&&Bu.document,$u=Mu.prototype.toString,Wu=Qu.hasOwnProperty,Du=0,zu=Qu.toString,Vu=g._,Yu=Lu("^"+eu(zu).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hu=jo(Hu=g.ArrayBuffer)&&Hu,Ku=jo(Ku=Hu&&new Hu(0).slice)&&Ku,Gu=ku.ceil,Ju=g.clearTimeout,Xu=ku.floor,Zu=jo(Zu=Tu.getOwnPropertySymbols)&&Zu,ta=jo(ta=Tu.getPrototypeOf)&&ta,ea=Fu.push,na=jo(na=Tu.preventExtensions)&&na,ra=Qu.propertyIsEnumerable,ia=jo(ia=g.Set)&&ia,oa=g.setTimeout,ua=Fu.splice,aa=jo(aa=g.Uint8Array)&&aa,ca=jo(ca=g.WeakMap)&&ca,sa=function(){try{var t=jo(t=g.Float64Array)&&t,e=new t(new Hu(10),0,1)&&t}catch(n){}return e}(),fa=function(){var t=na&&jo(t=Tu.assign)&&t;try{if(t){var e=na({1:0});e[0]=1}}catch(n){try{t(e,"xo")}catch(n){}return!e[1]&&t}return!1}(),la=jo(la=ju.isArray)&&la,pa=jo(pa=Tu.create)&&pa,ha=g.isFinite,va=jo(va=Tu.keys)&&va,ga=ku.max,_a=ku.min,da=jo(da=Ru.now)&&da,ya=jo(ya=Ou.isFinite)&&ya,ma=g.parseInt,wa=ku.random,ba=Ou.NEGATIVE_INFINITY,Ea=Ou.POSITIVE_INFINITY,xa=ku.pow(2,32)-1,Ia=xa-1,Ca=xa>>>1,Sa=sa?sa.BYTES_PER_ELEMENT:0,Pa=ku.pow(2,53)-1,ja=ca&&new ca,Ra={},Aa=H.support={};!function(t){var e=function(){this.x=t},n=arguments,r=[];e.prototype={valueOf:t,y:t};for(var i in new e)r.push(i);Aa.funcDecomp=/\bthis\b/.test(function(){return this}),Aa.funcNames="string"==typeof Mu.name;try{Aa.dom=11===Bu.createDocumentFragment().nodeType}catch(o){Aa.dom=!1}try{Aa.nonEnumArgs=!ra.call(n,1)}catch(o){Aa.nonEnumArgs=!0}}(1,0),H.templateSettings={escape:ye,evaluate:me,interpolate:we,variable:"",imports:{_:H}};var Ma=fa||function(t,e){return null==e?t:mn(e,$a(e),mn(e,Fc(e),t))},ka=function(){function t(){}return function(e){if(Co(e)){t.prototype=e;var n=new t;t.prototype=null}return n||g.Object()}}(),Oa=fr(An),Ta=fr(Mn,!0),La=lr(),Na=lr(!0),Ua=ja?function(t,e){return ja.set(t,e),t}:gu;Ku||(or=Hu&&aa?function(t){var e=t.byteLength,n=sa?Xu(e/Sa):0,r=n*Sa,i=new Hu(e);if(n){var o=new sa(i,0,n);o.set(new sa(t,0,n))}return e!=r&&(o=new aa(i,r),o.set(new aa(t,r))),i}:vu(null));var Fa=pa&&ia?function(t){return new Je(t)}:vu(null),Qa=ja?function(t){return ja.get(t)}:wu,qa=function(){return Aa.funcNames?"constant"==vu.name?$n("name"):function(t){for(var e=t.name,n=Ra[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}:vu("")}(),Ba=$n("length"),$a=Zu?function(t){return Zu(ii(t))}:vu([]),Wa=function(){var t=0,e=0;return function(n,r){var i=hc(),o=N-(i-e);if(e=i,o>0){if(++t>=L)return n}else t=0;return Ua(n,r)}}(),Da=lo(function(t,e){return Dr(t)?xn(t,jn(e,!1,!0)):[]}),za=yr(),Va=yr(!0),Ya=lo(function(e,n){n=jn(n);var r=yn(e,n);return Dn(e,n.sort(t)),r}),Ha=Mr(),Ka=Mr(!0),Ga=lo(function(t){return Xn(jn(t,!1,!0))}),Ja=lo(function(t,e){return Dr(t)?xn(t,e):[]}),Xa=lo(Mi),Za=lo(function(t){var e=t.length,n=t[e-2],r=t[e-1];return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof r?(--e,r):E,r=E),t.length=e,ki(t,n,r)}),tc=lo(function(t,e){return yn(t,jn(e))}),ec=cr(function(t,e,n){Wu.call(t,n)?++t[n]:t[n]=1}),nc=dr(Oa),rc=dr(Ta,!0),ic=br(rn,Oa),oc=br(on,Ta),uc=cr(function(t,e,n){Wu.call(t,n)?t[n].push(e):t[n]=[e]}),ac=cr(function(t,e,n){t[n]=e}),cc=lo(function(t,e,n){var r=-1,i="function"==typeof e,o=Yr(e),u=Dr(t)?ju(t.length):[];return Oa(t,function(t){var a=i?e:o&&null!=t&&t[e];u[++r]=a?a.apply(t,n):Wr(t,e,n)}),u}),sc=cr(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),fc=Pr(ln,Oa),lc=Pr(pn,Ta),pc=lo(function(t,e){if(null==t)return[];var n=e[2];return n&&Vr(e[0],e[1],n)&&(e.length=1),Gn(t,jn(e),[])}),hc=da||function(){return(new Ru).getTime()},vc=lo(function(t,e,n){var r=I;if(n.length){var i=_(n,vc.placeholder);r|=R}return kr(t,r,e,n,i)}),gc=lo(function(t,e){e=e.length?jn(e):Fo(t);for(var n=-1,r=e.length;++n<r;){var i=e[n];t[i]=kr(t[i],I,t)}return t}),_c=lo(function(t,e,n){var r=I|C;if(n.length){var i=_(n,_c.placeholder);r|=R}return kr(e,r,t,n,i)}),dc=gr(P),yc=gr(j),mc=lo(function(t,e){return En(t,1,e)}),wc=lo(function(t,e,n){return En(t,e,n)}),bc=wr(),Ec=wr(!0),xc=Sr(R),Ic=Sr(A),Cc=lo(function(t,e){return kr(t,k,null,null,null,jn(e))}),Sc=la||function(t){return v(t)&&Kr(t.length)&&zu.call(t)==W};Aa.dom||(bo=function(t){return!!t&&1===t.nodeType&&v(t)&&!Rc(t)});var Pc=ya||function(t){return"number"==typeof t&&ha(t)},jc=r(/x/)||aa&&!r(aa)?function(t){return zu.call(t)==Y}:r,Rc=ta?function(t){if(!t||zu.call(t)!=G)return!1;var e=t.valueOf,n=jo(e)&&(n=ta(e))&&ta(n);return n?t==n||ta(t)==n:ei(t)}:ei,Ac=sr(function(t,e,n){return n?dn(t,e,n):Ma(t,e)}),Mc=lo(function(t){var e=t[0];return null==e?e:(t.push(gn),Ac.apply(E,t))}),kc=mr(An),Oc=mr(Mn),Tc=Er(La),Lc=Er(Na),Nc=xr(An),Uc=xr(Mn),Fc=va?function(t){var e=null!=t&&t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Dr(t)?ni(t):Co(t)?va(t):[]}:ni,Qc=Ir(!0),qc=Ir(),Bc=sr(qn),$c=lo(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=cn(jn(e),Nu);return Xr(t,xn($o(t),e))}var n=ir(e[0],e[1],3);return Zr(t,function(t,e,r){return!n(t,e,r)})}),Wc=lo(function(t,e){return null==t?{}:"function"==typeof e[0]?Zr(t,ir(e[0],e[1],3)):Xr(t,jn(e))}),Dc=hr(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),zc=hr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Vc=Cr(),Yc=Cr(!0);8!=ma(Ne+"08")&&(ru=function(t,e,n){return(n?Vr(t,e,n):null==e)?e=0:e&&(e=+e),t=au(t),ma(t,e||(Ae.test(t)?16:10))});var Hc=hr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Kc=hr(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Gc=lo(function(t,e){try{return t.apply(E,e)}catch(n){return Io(n)?n:new Au(n)}}),Jc=lo(function(t,e){return function(n){return Wr(n,t,e)}}),Xc=lo(function(t,e){return function(n){return Wr(t,n,e)}}),Zc=_r(sn),ts=_r(fn,!0);return H.prototype=X.prototype,te.prototype=ka(X.prototype),te.prototype.constructor=te,$e.prototype=ka(X.prototype),$e.prototype.constructor=$e,Ve.prototype["delete"]=Ye,Ve.prototype.get=He,Ve.prototype.has=Ke,Ve.prototype.set=Ge,Je.prototype.push=en,co.Cache=Ve,H.after=io,H.ary=oo,H.assign=Ac,H.at=tc,H.before=uo,H.bind=vc,H.bindAll=gc,H.bindKey=_c,H.callback=hu,H.chain=Li,H.chunk=ai,H.compact=ci,H.constant=vu,H.countBy=ec,H.create=Uo,H.curry=dc,H.curryRight=yc,H.debounce=ao,H.defaults=Mc,H.defer=mc,H.delay=wc,H.difference=Da,H.drop=si,H.dropRight=fi,H.dropRightWhile=li,H.dropWhile=pi,H.fill=hi,H.filter=zi,H.flatten=gi,H.flattenDeep=_i,H.flow=bc,H.flowRight=Ec,H.forEach=ic,H.forEachRight=oc,H.forIn=Tc,H.forInRight=Lc,H.forOwn=Nc,H.forOwnRight=Uc,H.functions=Fo,H.groupBy=uc,H.indexBy=ac,H.initial=yi,H.intersection=mi,H.invert=Bo,H.invoke=cc,H.keys=Fc,H.keysIn=$o,H.map=Hi,H.mapKeys=Qc,H.mapValues=qc,H.matches=_u,H.matchesProperty=du,H.memoize=co,H.merge=Bc,H.method=Jc,H.methodOf=Xc,H.mixin=yu,H.negate=so,H.omit=$c,H.once=fo,H.pairs=Wo,H.partial=xc,H.partialRight=Ic,H.partition=sc,H.pick=Wc,H.pluck=Ki,H.property=bu,H.propertyOf=Eu,H.pull=Ei,H.pullAt=Ya,H.range=xu,H.rearg=Cc,H.reject=Gi,H.remove=xi,H.rest=Ii,H.restParam=lo,H.set=zo,H.shuffle=Xi,H.slice=Ci,H.sortBy=eo,H.sortByAll=pc,H.sortByOrder=no,H.spread=po,H.take=Si,H.takeRight=Pi,H.takeRightWhile=ji,H.takeWhile=Ri,H.tap=Ni,H.throttle=ho,H.thru=Ui,H.times=Iu,H.toArray=Lo,H.toPlainObject=No,H.transform=Vo,H.union=Ga,H.uniq=Ai,H.unzip=Mi,H.unzipWith=ki,H.values=Yo,H.valuesIn=Ho,H.where=ro,H.without=Ja,H.wrap=vo,H.xor=Oi,H.zip=Xa,H.zipObject=Ti,H.zipWith=Za,H.backflow=Ec,H.collect=Hi,H.compose=Ec,H.each=ic,H.eachRight=oc,H.extend=Ac,H.iteratee=hu,H.methods=Fo,H.object=Ti,H.select=zi,H.tail=Ii,H.unique=Ai,yu(H,H),H.add=Su,H.attempt=Gc,H.camelCase=Dc,H.capitalize=Jo,H.clone=go,H.cloneDeep=_o,H.deburr=Xo,H.endsWith=Zo,H.escape=tu,H.escapeRegExp=eu,H.every=Di,H.find=nc,H.findIndex=za,H.findKey=kc,H.findLast=rc,H.findLastIndex=Va,H.findLastKey=Oc,H.findWhere=Vi,H.first=vi,H.get=Qo,H.has=qo,H.identity=gu,H.includes=Yi,H.indexOf=di,H.inRange=Ko,H.isArguments=yo,H.isArray=Sc,H.isBoolean=mo,H.isDate=wo,H.isElement=bo,H.isEmpty=Eo,H.isEqual=xo,H.isError=Io,H.isFinite=Pc,H.isFunction=jc,H.isMatch=So,H.isNaN=Po,H.isNative=jo,H.isNull=Ro,H.isNumber=Ao,H.isObject=Co,H.isPlainObject=Rc,H.isRegExp=Mo,H.isString=ko,H.isTypedArray=Oo,H.isUndefined=To,H.kebabCase=zc,H.last=wi,H.lastIndexOf=bi,H.max=Zc,H.min=ts,H.noConflict=mu,H.noop=wu,H.now=hc,H.pad=nu,H.padLeft=Vc,H.padRight=Yc,H.parseInt=ru,H.random=Go,H.reduce=fc,H.reduceRight=lc,H.repeat=iu,H.result=Do,H.runInContext=b,H.size=Zi,H.snakeCase=Hc,H.some=to,H.sortedIndex=Ha,H.sortedLastIndex=Ka,H.startCase=Kc,H.startsWith=ou,H.sum=Pu,H.template=uu,H.trim=au,H.trimLeft=cu,H.trimRight=su,H.trunc=fu,H.unescape=lu,H.uniqueId=Cu,H.words=pu,H.all=Di,H.any=to,H.contains=Yi,H.detect=nc,H.foldl=fc,H.foldr=lc,H.head=vi,H.include=Yi,H.inject=fc,yu(H,function(){var t={};return An(H,function(e,n){H.prototype[n]||(t[n]=e)}),t}(),!1),H.sample=Ji,H.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return Ji(e,t)}):Ji(this.value())},H.VERSION=x,rn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){H[t].placeholder=H}),rn(["dropWhile","filter","map","takeWhile"],function(t,e){var n=e!=Q,r=e==U;$e.prototype[t]=function(t,i){var o=this.__filtered__,u=o&&r?new $e(this):this.clone(),a=u.__iteratees__||(u.__iteratees__=[]);return a.push({done:!1,count:0,index:0,iteratee:Ur(t,i,1),limit:-1,type:e}),u.__filtered__=o||n,u}}),rn(["drop","take"],function(t,e){var n=t+"While";$e.prototype[t]=function(n){var r=this.__filtered__,i=r&&!e?this.dropWhile():this.clone();if(n=null==n?1:ga(Xu(n)||0,0),r)e?i.__takeCount__=_a(i.__takeCount__,n):wi(i.__iteratees__).limit=n;else{var o=i.__views__||(i.__views__=[]);o.push({size:n,type:t+(i.__dir__<0?"Right":"")})}return i},$e.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()},$e.prototype[t+"RightWhile"]=function(t,e){return this.reverse()[n](t,e).reverse()}}),rn(["first","last"],function(t,e){var n="take"+(e?"Right":"");$e.prototype[t]=function(){return this[n](1).value()[0]}}),rn(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");$e.prototype[t]=function(){return this[n](1)}}),rn(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?Fn:bu;$e.prototype[t]=function(t){return this[n](r(t))}}),$e.prototype.compact=function(){return this.filter(gu)},$e.prototype.reject=function(t,e){return t=Ur(t,e,1),this.filter(function(e){return!t(e)})},$e.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return 0>t?n=this.takeRight(-t):t&&(n=this.drop(t)),e!==E&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n},$e.prototype.toArray=function(){return this.drop(0)},An($e.prototype,function(t,e){var n=H[e];if(n){var r=/^(?:filter|map|reject)|While$/.test(e),i=/^(?:first|last)$/.test(e);H.prototype[e]=function(){var e=arguments,o=this.__chain__,u=this.__wrapped__,a=!!this.__actions__.length,c=u instanceof $e,s=e[0],f=c||Sc(u);f&&r&&"function"==typeof s&&1!=s.length&&(c=f=!1);var l=c&&!a;if(i&&!o)return l?t.call(u):n.call(H,this.value());var p=function(t){var r=[t];return ea.apply(r,e),n.apply(H,r)};if(f){var h=l?u:new $e(this),v=t.apply(h,e);if(!i&&(a||v.__actions__)){var g=v.__actions__||(v.__actions__=[]);g.push({func:Ui,args:[p],thisArg:H})}return new te(v,o)}return this.thru(p)}}}),rn(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var e=(/^(?:replace|split)$/.test(t)?qu:Fu)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(t);H.prototype[t]=function(){var t=arguments;return r&&!this.__chain__?e.apply(this.value(),t):this[n](function(n){return e.apply(n,t)})}}),An($e.prototype,function(t,e){var n=H[e];if(n){var r=n.name,i=Ra[r]||(Ra[r]=[]);i.push({name:e,func:n})}}),Ra[jr(null,C).name]=[{name:"wrapper",func:null}],$e.prototype.clone=We,$e.prototype.reverse=De,$e.prototype.value=ze,H.prototype.chain=Fi,H.prototype.commit=Qi,H.prototype.plant=qi,H.prototype.reverse=Bi,H.prototype.toString=$i,H.prototype.run=H.prototype.toJSON=H.prototype.valueOf=H.prototype.value=Wi,H.prototype.collect=H.prototype.map,H.prototype.head=H.prototype.first,H.prototype.select=H.prototype.filter,H.prototype.tail=H.prototype.rest,H}var E,x="3.8.0",I=1,C=2,S=4,P=8,j=16,R=32,A=64,M=128,k=256,O=30,T="...",L=150,N=16,U=0,F=1,Q=2,q="Expected a function",B="__lodash_placeholder__",$="[object Arguments]",W="[object Array]",D="[object Boolean]",z="[object Date]",V="[object Error]",Y="[object Function]",H="[object Map]",K="[object Number]",G="[object Object]",J="[object RegExp]",X="[object Set]",Z="[object String]",te="[object WeakMap]",ee="[object ArrayBuffer]",ne="[object Float32Array]",re="[object Float64Array]",ie="[object Int8Array]",oe="[object Int16Array]",ue="[object Int32Array]",ae="[object Uint8Array]",ce="[object Uint8ClampedArray]",se="[object Uint16Array]",fe="[object Uint32Array]",le=/\b__p \+= '';/g,pe=/\b(__p \+=) '' \+/g,he=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ve=/&(?:amp|lt|gt|quot|#39|#96);/g,ge=/[&<>"'`]/g,_e=RegExp(ve.source),de=RegExp(ge.source),ye=/<%-([\s\S]+?)%>/g,me=/<%([\s\S]+?)%>/g,we=/<%=([\s\S]+?)%>/g,be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Ee=/^\w*$/,xe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Ie=/[.*+?^${}()|[\]\/\\]/g,Ce=RegExp(Ie.source),Se=/[\u0300-\u036f\ufe20-\ufe23]/g,Pe=/\\(\\)?/g,je=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Re=/\w*$/,Ae=/^0[xX]/,Me=/^\[object .+?Constructor\]$/,ke=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Oe=/($^)/,Te=/['\n\r\u2028\u2029\\]/g,Le=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Ne=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",Ue=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"],Fe=-1,Qe={};Qe[ne]=Qe[re]=Qe[ie]=Qe[oe]=Qe[ue]=Qe[ae]=Qe[ce]=Qe[se]=Qe[fe]=!0,Qe[$]=Qe[W]=Qe[ee]=Qe[D]=Qe[z]=Qe[V]=Qe[Y]=Qe[H]=Qe[K]=Qe[G]=Qe[J]=Qe[X]=Qe[Z]=Qe[te]=!1;var qe={};qe[$]=qe[W]=qe[ee]=qe[D]=qe[z]=qe[ne]=qe[re]=qe[ie]=qe[oe]=qe[ue]=qe[K]=qe[G]=qe[J]=qe[Z]=qe[ae]=qe[ce]=qe[se]=qe[fe]=!0,qe[V]=qe[Y]=qe[H]=qe[X]=qe[te]=!1;var Be={leading:!1,maxWait:0,trailing:!1},$e={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss"},We={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},De={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},ze={"function":!0,object:!0},Ve={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ye=ze[typeof exports]&&exports&&!exports.nodeType&&exports,He=ze[typeof module]&&module&&!module.nodeType&&module,Ke=Ye&&He&&"object"==typeof global&&global&&global.Object&&global,Ge=ze[typeof self]&&self&&self.Object&&self,Je=ze[typeof window]&&window&&window.Object&&window,Xe=He&&He.exports===Ye&&Ye,Ze=Ke||Je!==(this&&this.window)&&Je||Ge||this,tn=b();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ze._=tn,define("sap/watt/lib/lodash/lodash",[],function(){return tn})):Ye&&He?Xe?(He.exports=tn)._=tn:Ye._=tn:Ze._=tn}).call(this),define("sap/watt/core/ConfigPreload",["sap/watt/lib/lodash/lodash"],function(t){"use strict";var e={plugins:{},interfaces:{}},n=new URI(document.location.href),r=new URI(require.toUrl("a")).absoluteTo(new URI(document.location.href)),i={loadPreload:function(n){return sap.watt.getEnv("debugMode")?Q():Q(jQuery.ajax({url:n,dataType:"json"})).then(function(n){t.forEach(e,function(e,r){t.assign(e,n[r])})},function(t){return console.log("Could not load configuration preload from "+n+", Reason: "+t.statusText),null})},loadJSPreload:function(t){if(sap.watt.getEnv("debugMode"))return Q();var e=Q.defer();return require([t],function(){e.resolve()},function(n){console.log("Could not load JS preload for "+t+", Reason: "+n),e.resolve()}),e.promise},getPreload:function(t,n){var r=e&&e[t]&&e[t][n];return r?Q(r):Q.reject(new Error)},toInternalPath:function(t){var e=new URI(t).absoluteTo(n),i=e.relativeTo(r).path();return i=i.replace(/\/$/g,"")},pathToName:function(t){var e=this.toInternalPath(t);return e.replace(/\//g,".")}};return i}),define("sap/watt/core/Interface",["./ConfigPreload","sap/watt/lib/lodash/lodash"],function(t,e){"use strict";function n(t){return!e.isEmpty(t)}var r=function(t){this._vInterfaces=t,this._mInterfaces={},this._mConfigurationProperties={},this._mEvents={},this._mMethods={}};return r.mInterfaces={},r.create=function(t){var e=new r(t);return e.initialize()},r.register=function(t,e){return"string"==typeof e&&(e=require.toUrl(e)),r.mInterfaces[t]?new Error("Interface "+t+" has been provided twice!"):(r.mInterfaces[t]=e,void 0)},r.SUPPORTED_TYPES={string:!0,number:!0,"boolean":!0,object:!0,"[string]":!0,"[number]":!0,"[boolean]":!0,"[object]":!0},r.load=function(n){var i=r.mInterfaces,o=i[n];if(!o){var u=n.replace(/\./g,"/");o=require.toUrl(u)+".json",console.warn("Deprecation Warning: The interface '"+n+"' is not provided. Please provide the interface in a plugin.json file")}return e.isString(o)?t.getPreload("interfaces",n).then(null,function(){return Q(jQuery.ajax({url:o,dataType:"json"}).then(function(t){return t},function(){return new Error("Cannot parse interface '"+n+"' from path '"+o+"'")}))}).then(function(t){return i[n]=t}):Q(o)},r.prototype.initialize=function(){var t=this;return delete this.initialize,this._loadInterfaces(this._vInterfaces).then(function(){return t})},r.prototype.createConfigurationObject=function(){var t=this.getConfigurationProperties(),e={};for(var n in t){var r=t[n],i=void 0;r.multiple&&(i=[]),e[n]=i}return e},r.prototype.isConfigurationPropertyMultiple=function(t){return this.getConfigurationProperties()[t].multiple},r.prototype.isSimpleType=function(t){return"string"==typeof t&&r.SUPPORTED_TYPES[t]},r.prototype.isComplexType=function(t){return Array.isArray(t)||e.isPlainObject(t)},r.prototype.isProxyType=function(t){return!this.isSimpleType(t)&&!this.isComplexType(t)},r.prototype.hasConfigurationProperties=function(){return n(this.getConfigurationProperties())},r.prototype.getConfigurationProperties=function(){return this._mConfigurationProperties},r.prototype.hasMethods=function(){return n(this.getMethods())},r.prototype.getMethods=function(){return this._mMethods},r.prototype.hasEvents=function(){return n(this.getEvents())},r.prototype.getEvents=function(){return this._mEvents},r.prototype.hasInterfaces=function(){return n(this._mInterfaces)},r.prototype.hasInterface=function(t){return!!this._mInterfaces[t]},r.prototype.getMethodDefaultReturnValue=function(t){return"undefined"==typeof this._mMethods[t].returns?!1:{type:this._mMethods[t].returns.type,"default":this._mMethods[t].returns.default}},r.prototype._loadInterfaces=function(t,n){var i=this;n=n||{};var o=[];"string"==typeof t?o.push(t):Array.isArray(t)&&(o=t);var u=o.map(function(t){if(n[t])return new Error("Interface "+t+" inherits from itself");var o=e.clone(n);o[t]=!0;var u=r.load(t).then(function(t){return t.extends?i._loadInterfaces(t.extends,o).then(function(){return t}):t});return u});return Q.all(u).then(function(t){o.forEach(function(e,n){if(!i._mInterfaces[e]){var r=t[n];i._mInterfaces[e]=r,i._mergeInterface(r)}})})},r.prototype._mergeInterface=function(t){this._mergeInterfaceSection("_mConfigurationProperties","configurationProperties",t),this._mergeInterfaceSection("_mEvents","events",t),this._mergeInterfaceSection("_mMethods","methods",t)},r.prototype._mergeInterfaceSection=function(t,e,n){var r=n[e];if(r)for(var i in r){if(this[t][i])return new Error("Error during merging interface '"+n.name+"': The key '"+i+"' in section '"+e+"' is already defined by another interface");this[t][i]=r[i]}},r}),define("sap/watt/core/DebugHooks",[],function(){function t(t){try{throw t}catch(e){}}function e(t){var e=[];for(var n in t)E.call(t,n)&&e.push(n);return e}function n(){b.monitor&&(I++,this._promiseId=I,x[I]=this)}function r(){b.monitor&&delete x[this._promiseId]}function i(){b.monitor||(b.monitor={},b.on("created",n,!0),b.on("fulfilled",r,!0),b.on("rejected",r,!0),b.on("resolved",r,!0),b.on("cancelled",r,!0),b.monitor.getPendingPromises=function(){for(var t=[],n=e(x),r=0;r<n.length;r++)t.push(x[n[r]]);return t},b.monitor.getLeafPendingPromises=function(){for(var t=b.monitor.getPendingPromises(),e=[],n=0;n<t.length;n++){var r=t[n];"undefined"==typeof r._promise0&&"undefined"==typeof r._receiver0&&e.push(r)}return e})}function o(){b.monitor&&(b.off("created",n),b.off("fulfilled",r),b.off("rejected",r),b.off("resolved",r),b.off("cancelled",r),b.monitor=null,x=null)}function u(t){"undefined"==typeof this._chainLength&&(this._chainLength=0),t._chainLength=this._chainLength+1,t._chainLength>C&&P()}function a(t){C||(C=t,b.on("chained",u,!0),b.onChainLengthLimitExceeded=function(t){P=t})}function c(){C>0&&(b.off("chained",u),P=S,C=null)}function s(){j>0&&(R++,R>j&&M())}function f(){j&&R--}function l(t){j||(j=t,b.on("created",s,!0),b.on("fulfilled",f,!0),b.on("rejected",f,!0),b.on("resolved",f,!0),b.on("cancelled",f,!0),b.onPendingPromisesLimitExceeded=function(t){M=t})}function p(){j&&(j=null,R=0,M=A,b.off("created",s),b.off("fulfilled",f),b.off("rejected",f),b.off("resolved",f),b.off("cancelled",f))}function h(t){this._promiseId||(O++,this._promiseId=O),t._promiseId||(O++,t._promiseId=O),this._tracks||(this._tracks=[]),t._trackedBy||(t._trackedBy=[]),this._tracks.push(t),t._trackedBy.push(this)}function v(t){return t._trackedBy&&0!==t._trackedBy.length?(1!==t._trackedBy.length&&console.warn("Promise "+t._promiseId+" is tracked by more than one promise"),v(t._trackedBy[0])):t}function g(t,e){var n=[];if(e++,e>100)return null;var r=null,i="";if(t._trace){var o=t._trace.stack;i=',tooltip="'+o.replace(/(?:\r\n|\r|\n)/g,"&#13;&#10;")+'"';var u=o.split("\n")[4].trim(),a=/at (.*) \(.*[\\\/](.*:.*:.*)\)/g,c=a.exec(u);r=c&&3===c.length?t._promiseId+": "+c[1]+" at "+c[2]:t._promiseId}else r=t._promiseId;var s="";if(t.isRejected()&&(s=",color=blue"),t.isPending()&&(s=",color=red"),t.isCancelled()&&(s=",color=gray"),n.push(t._promiseId+'[label="'+r+'"'+s+i+"];"),t._tracks)for(var f=0;f<Math.min(t._tracks.length,1e3);f++)n.push(t._promiseId+"->"+t._tracks[f]._promiseId+";"),n=n.concat(g(t._tracks[f],e));return n}function _(){return"digraph promises {"+g(v(this),0).join("\n")+"}"}function d(){if(!this.isPending())throw new Error("This promise is not waiting for any other promise");if(this._tracks&&0!=this._tracks.length){for(var t=[],e=0;e<this._tracks.length;e++)this.isPending()&&(t=t.concat(this._tracks[e].findWaitingFor()));return t}return[this]}function y(){C||(k=!0,b.on("chained",h,!0),b.prototype.findWaitingFor=d,b.prototype.getDOTGraph=_)}function m(){C&&(k=!1,O=0,b.off("chained",h),b.prototype.findWaitingFor=null,b.prototype.getDOTGraph=null)}function w(t,e){b=t,"monitor"in e&&(e.monitor?i():o()),"tracing"in e&&(e.tracing?y():m()),"maxChainLength"in e&&(e.maxChainLength?"number"==typeof e.maxChainLength?a(e.maxChainLength):a(1e5):c()),"maxPendingPromises"in e&&(e.maxPendingPromises?"number"==typeof e.maxPendingPromises?l(e.maxPendingPromises):l(1e5):p())}var b=null,E={}.hasOwnProperty,x={},I=0,C=null,S=function(){throw new Error("Promises chain is too long, it reached limit of "+C+" promises")},P=S,j=null,R=0,A=function(){throw new Error("Too many pending promises, it reached limit of "+j+" promises")},M=A,k=!1,O=0;return{createStack:function(e){e=e||0,e+=2;var n=new Error;n.stack||(t(n),e++);for(var r=n.stack.split("\n"),i=0;e>i;i++)r.shift();return r.join("\n")},hookToBluebird:w}}),define("sap/watt/core/Constants",[],function(){"use strict";var t=function(){return 2},e={WATT_PREFIXED_ARGS_NUM:t};return Object.freeze(e),e}),define("sap/watt/core/RunTimeChecks",["sap/watt/lib/lodash/lodash","./Constants","./DebugHooks"],function(t,e,n){"use strict";function r(e){return t.isString(e)||t.isNumber(e)||t.isBoolean(e)||t.isNull(e)||t.isUndefined(e)?e:t.isArray(e)?"an array":t.isObject(e)?"an object":"unknown"}function i(e,n){return t.isNull(n)||t.isUndefined(n)?!0:t.every(e,function(t){return t(n)})}function o(e){return i([t.isString],e)}function u(e){return i([t.isNumber],e)}function a(e){return i([t.isBoolean],e)}function c(e){return i([t.isArray,w],e)}function s(e){return i([t.isArray,b],e)}function f(e){return i([t.isArray,E],e)}function l(e){return i([t.isArray],e)}function p(t,e,n){return"argument number "+n+", expected: "+t+" but actual: "+typeof e+" with value: "+r(e)}function h(t,e){return"unexpected return type expected: "+t+" but actual: "+typeof e+" with value: "+r(e)}function v(t,e,n,r){switch(t){case"string":return o(e)?x:n(t,e,r);case"number":return u(e)?x:n(t,e,r);case"boolean":return a(e)?x:n(t,e,r);case"[string]":return c(e)?x:n(t,e,r);case"[number]":return s(e)?x:n(t,e,r);case"[boolean]":return f(e)?x:n(t,e,r);case"[object]":return l(e)?x:n(t,e,r);case"object":default:return x}}function g(t,e,n,r,i,o,u){t[n]=!0,e.push({service:r,method:i,stack:u,issues:o})}function _(e,r,i,o,u){var a=o?o:[],c=a.length,s=t.filter(a,function(t){return t.optional===!0}),f=c-s.length,l=t.range(f,c+1),_=function(){function o(e){var n=v(u,e,h);return n&&j.push(n),t.isEmpty(j)||g(C,y,_,i,r,j,s),e}var s=n.createStack(2).split("\n"),_=i+"_^_"+r+"_ ^ _"+t.first(s);if(I[_])return e.apply(this,arguments);var w=Array.prototype.slice.call(arguments,m),b=t.take(w,a.length),E=t.take(a,b.length),x=t.compact(t.map(b,function(t,e){var n=E[e],r=n.type;return v(r,t,p,e)}));if(!t.contains(l,arguments.length-m)){var S="invoked with invalid number of arguments \nexpected: "+f+".."+c+" actual: "+(arguments.length-m);x.push(S)}t.isEmpty(x)||g(I,d,_,i,r,x,s);var P=e.apply(this,arguments),j=[];return u&&!C[_]?Q.isPromise(P)?P.then(o):o(P):P};return _}var d=window.CUSTOM_RUNTIME_CHECKS_CALLER_ISSUES||[],y=window.CUSTOM_RUNTIME_CHECKS_RETURN_TYPE_ISSUES||[],m=e.WATT_PREFIXED_ARGS_NUM(),w=t.partialRight(t.every,t.isString),b=t.partialRight(t.every,t.isNumber),E=t.partialRight(t.every,t.isBoolean),x=!1,I={},C={};return{decorateFnWithTypeChecking:_,getCallerIssues:function(){return d},getReturnTypeIssues:function(){return y},clearIssues:function(){d.length=0,y.length=0},_isStringType:o,_isNumberType:u,_isBooleanType:a,_isStringArrayType:c,_isNumberArrayType:s,_isBooleanArrayType:f,_isObjectArrayType:l}}),define("sap/watt/core/Proxy",["./Interface","./DebugHooks","./RunTimeChecks","sap/watt/lib/lodash/lodash","./Constants"],function(t,e,n,r,i){"use strict";var o=function(){this._mListeners={}};o.prototype._mListeners=null,o.prototype.emit=function(t){var e=Array.prototype.slice.call(arguments,1),n=[],r=[];if(e.push({}),this.hasListeners(t))for(var i=this._mListeners[t].concat(),o=0;o<i.length;o++){var u=i[o],a=u.listener,c=u.context;if(this._emitPreperation(u,n))try{r.push(Q(a.apply(c,e)))}catch(s){r.push(Q.reject(s))}}if(n.length>0)for(var o=0;o<n.length;o++){var u=n[o];this.off(t,u.listener,u.context)}return Q.allResolved(r)},o.prototype._emitPreperation=function(t,e){var n=!0,r=t.numberOfAllowedEmits;return"undefined"!=typeof r&&(r>0?(t.numberOfAllowedEmits--,0===t.numberOfAllowedEmits&&e.push({listener:t.listener,context:t.context})):n=!1),n},o.prototype.on=function(t,e,n){this._on(t,e,n)},o.prototype.once=function(t,e,n){this._on(t,e,n,1)},o.prototype._on=function(t,e,n,r){if(this.hasListener(t,e,n))throw new Error("Listener for event '"+t+"' is already registered");var i=this._mListeners[t]=this._mListeners[t]||[];i.push({listener:e,context:n,numberOfAllowedEmits:r})},o.prototype.off=function(t,e,n){this._visitListeners(t,function(t,e){return t.splice(e,1),!1},e,n)},o.prototype.hasListeners=function(t){if(!this._mListeners)throw new Error("EventEmitter constructor not called");return this._mListeners[t]&&this._mListeners[t].length>0
},o.prototype.hasListener=function(t,e,n){var r=!1;return this._visitListeners(t,function(){return r=!0,!1},e,n),r},o.prototype._visitListeners=function(t,e,n,r){var i=this.hasListeners(t);if(i)for(var o=this._mListeners[t],u=0;u<o.length;u++){var a=o[u],c=a.listener,s=a.context,f=!1;if(n?n===c&&r===s&&(f=e(o,u,c,s)===!1):f=e(o,u,c,s)===!1,f)break}return i};var u=function(t){this._sName=t};u.prototype.getName=function(){return this._sName};var a=function(t,e){return{create:function(n,r){return r=jQuery.extend(r||{},{"implements":t,module:e}),this.context.create(n,r)}}},c=function s(t,e){if(this._sName=t,this._oImpl=null,this._oImplSync=null,this._mConfig={module:null,className:null,"implements":null,lazy:!0},this._oInterface=null,e.isFactory===!0){var n=e.implements,i=e.module;delete e.isFactory,e.implements="Factory",e.module=a(n,i)}"string"==typeof e?this._mConfig.className=e:r.assign(this._mConfig,e),this._oEventEmitter=this._mConfig.eventEmitter||null,this._mConfiguration=this._mConfig.configuration||null,this.context=this._mConfig.context||{},this._oContext=this.context,this._oContext.self=this._mConfig.self||this;var o=this;this._oContext.create=function(t,e){return e.context=o._oContext,e.lazy=e.lazy===!1?!1:!0,s.create(t,e).then(function(t){return t})},!this._mConfig.module&&this._mConfig.className&&(console.warn("Service '"+this._sName+"': Using the property 'className' is deprecated. Please use 'module' instead"),this._mConfig.module=this._mConfig.className.replace(/\./g,"/")),this._oMetadata=new u(this._sName),this.$isLazy()&&(this.$=function(){return this._getImpl({}).then(function(t){return t})})};return c.create=function(t,e){var n=new c(t,e);return n.initialize()},c.LIFECYCLE_METHODS={init:!0,configure:!0},c.LIFECYCLE_METHODS_TIMEOUT=6e4,c.isLifecycleMethod=function(t){return this.LIFECYCLE_METHODS[t]},c.prototype.getProxyMetadata=function(){return this._oMetadata},c.prototype.instanceOf=function(t){return this._oInterface.hasInterface(t)},c.prototype.attachEvent=function(t,e,n){this._getEventEmitter().on(t,e,n)},c.prototype.attachEventOnce=function(t,e,n){this._getEventEmitter().once(t,e,n)},c.prototype.detachEvent=function(t,e,n){this._getEventEmitter().off(t,e,n)},c.prototype.initialize=function(){delete this.initialize;var e=this._mConfig["implements"],n=this,r=[t.create(e)];return this.$isLazy()||r.push(this._getImpl({})),Q.all(r).spread(function(t){return n._oInterface=t,n._decorateProxyWithInterfaceMethods(),n._mConfiguration=n._mConfiguration||t.createConfigurationObject(),n._injectEventsToContext(),n},function(t){n._error("Original error message: "+t.message+"\nError stack: "+t.stack+"\n -----------")})},c.prototype.$isLazy=function(){return this._mConfig.lazy},c.prototype.$getInterface=function(){return this._oInterface},c.prototype.$configure=function(t,e){if(this._oImpl&&this._oImpl.isFulfilled()){if(this.$isLazy())return this._invokeImplMethod("$configure",[t,e],!0,{});var n=this._addToConfig(this._oInterface.createConfigurationObject(),t,e);return this._invokeImplMethod("configure",[n],!1,{})}return this._addToConfig(this._mConfiguration,t,e),Q()},c.prototype._getEventEmitter=function(){return this._oEventEmitter||(this._oEventEmitter=new o),this._oEventEmitter},c.prototype._addToConfig=function(t,e,n){if(this._oInterface.isConfigurationPropertyMultiple(e)){Array.isArray(n)||this._error("Value for multiple configuration property '"+e+"' must be an array");for(var r=0;r<n.length;r++)t[e].push(n[r])}else"undefined"!=typeof this._mConfiguration[e]&&this._error("Non multiple property '"+e+"' is already set and can not be overriden by configuration"),t[e]=n,this._mConfiguration[e]=n;return t},c.prototype._fireEvent=function(t,e){var n=r.assign({params:{}},e,{source:this._oContext.self,name:t});return this._getEventEmitter().emit(t,n)},c.prototype.$invoke=function(t){if(this.$isLazy()){var e=arguments;return this._getImpl({}).then(function(t){return t.$invoke.apply(t,e)})}if(c.isLifecycleMethod(t))return this._error("Method is a lifecycle method. Do not call directly.",t),void 0;var e=Array.prototype.slice.call(arguments,i.WATT_PREFIXED_ARGS_NUM());return this._invokeImplMethod(t,e,!0)},c.prototype._charToUpperCase=function(t){return t&&t.length>1&&t.slice(0,1).toUpperCase()+t.slice(1)},c.prototype._invokeImplMethod=function(t,e,n){var r=this;return this._getImpl({}).then(function(i){return r._invokeMethod(i,t,e,n)})},c.prototype._invokeMethod=function(t,e,n,r){r=r===!1?!1:!0;var i=this,o=null;if(t[e])o=t[e].apply(t,n),Q.isPromise(o)||(o&&o.constructor===Array&&o.length>0&&Q.isPromise(o[0])?(console.error("Warning: unhandeled promisses array"),o=Q.all(o)):o=Q(o));else if(r){var u=this._oInterface.getMethodDefaultReturnValue(e);if(u)o=u.default,"object"===u.type&&(o=jQuery.extend(!0,{},o)),t[e]=function(){return Q(o)};else{if(!sap.watt.getEnv("devMode"))return console.error("Method: "+e+" not implemented"),Q();i._error("Method: "+e+" not implemented")}}return o},c.prototype._callLifeCycleMethod=function(t,e,n){var r=this;return this._fireEvent("$before"+this._charToUpperCase(e)).then(function(){return r._invokeMethod(t,e,n,!1)}).timeout(c.LIFECYCLE_METHODS_TIMEOUT)},c.prototype._getImplSync=function(){return this._oImplSync},c.prototype._getImpl=function(){if(!this._oImpl){var t=this;this._oImpl=this._createImplInstance().then(function(e){return t._oImplSync=e,e})}return this._oImpl},c.prototype._createImplInstance=function(){var t=this;if(this._mConfig.factory)return this._oContext.service[this._mConfig.factory].create(this._sName,{self:this._mConfig.self,eventEmitter:this._getEventEmitter(),configuration:this._mConfiguration});if(this.$isLazy()){var e=r.clone(this._mConfig);return e.lazy=!1,e.context=this._oContext,e.self=this,e.configuration=r.assign(this._mConfiguration,this._mConfig),e.eventEmitter=this._getEventEmitter(),c.create(this._sName,e)}var n=this._mConfig.module,i=function(e){var n=e;return"function"==typeof e?n=new n:(n.__bProxyImplInUse&&t._error("Error loading "+e+": Module instance is already in use. Please define module"+" as a class by returning a function instead of an object"),n.__bProxyImplInUse=!0),n.context=t.context,delete t.context,t._callLifeCycleMethod(n,"init",null).then(function(){return t._callLifeCycleMethod(n,"configure",[t._mConfiguration])}).then(function(){return n})};return"string"==typeof n?Q.sap.require(n).then(i)["catch"](function(e){t._error(e.message+"\nError stack: "+e.stack+"\n -----------")}):i(n)},c.prototype._error=function(t,e){c._error(t,this._sName,e)},c.prototype._decorateProxyWithInterfaceMethods=function(){for(var t=this._oInterface,e=t.getMethods(),n=Object.keys(e),r=n.length,i=0;r>i;i++){var o=n[i];if(this[o]||c.isLifecycleMethod(o))this._error("Interface method is not allowed as it is implemented by the proxy",o);else{var u=e[o],a=u.async===!1?!1:!0,s=this.$isLazy();this[o]=s||a?this._createAsyncProxyMethod(o,u):this._createSyncProxyMethod(o,u)}}},c.prototype._createSyncProxyMethod=function(t,e){var n=this,r=n._getImplSync(),i=this.decorateProxyMethod(r[t],t,e);return function(){return i.apply(n,arguments)}},c.prototype._createAsyncProxyMethod=function(t,e){var n=this,r=this.decorateProxyMethod(n.$invoke,t,e);return function(){var e=[t,{}];return e=e.concat(Array.prototype.slice.call(arguments)),r.apply(n,e)}},c.prototype.decorateProxyMethod=function(t,i,o){var u=t;if(o.deprecated){var a="Service '"+this._sName+"': Method '"+i+"' is deprecated";a+=o.deprecated.since?" since "+o.deprecated.since:"",a+=o.deprecated.until?" until "+o.deprecated.until:"",a+=". "+(o.deprecated.description?"Description: "+o.deprecated.description:""),u=function(){return console.warn(a),console.warn(e.createStack(2)),t.apply(this,arguments)}}if(sap.watt.getEnv("enableRuntimeChecks")){var c=r.isString(this._sName)?this._sName:this._sName.module;u=n.decorateFnWithTypeChecking(t,i,c,o.params,o.returns)}return u},c.prototype._injectEventsToContext=function(){var t=this._oInterface,e={},n=t.getEvents();e.fire=this._createFireEventFunction(n);for(var r=Object.keys(n),i=r.length,o=0;i>o;o++){var u=r[o];e["fire"+this._charToUpperCase(u)]=this._createFireSpecificEventFunction(u)}this._oContext.event=e},c.prototype._createFireEventFunction=function(t){var e=this;return function(n,r){return t[n]||e._error("The event '"+n+"' is not declared in the interface"),e._fireEvent(n,{params:r})}},c.prototype._createFireSpecificEventFunction=function(t){var e=this;return function(n){return e._fireEvent(t,{params:n})}},c._error=function(t,e,n){var r=[];throw e&&r.push("Name: "+e),n&&r.push("Method: "+n),t&&r.push("Message: "+t),new Error("Proxy: "+r.join(" | "))},c}),define("sap/watt/core/Service",["./Proxy"],function(){"use strict";var t={_mRegistry:{},$setServiceRegistry:function(t){this._oServiceRegistry=t},get:function(t){var e;try{throw new Error}catch(n){e=n.stack.split("\n")}var r=e[2]||"caller unkown";return console.error("Deprecated: Service.get() - use context.service instead - Caller: "+r),this._oServiceRegistry.get(t)}};return t}),define("sap/watt/core/ServiceRegistry",["./Proxy","sap/watt/lib/lodash/lodash"],function(t,e){"use strict";var n=function(){this._mRegistry={}};return n.prototype.register=function(e,n){if(this._mRegistry[e])throw new Error("Service "+e+" is already implemented");this._mRegistry[e]="Under construction";var r=this;return t.create(e,n).then(function(t){return r._mRegistry[e]=t,t})},n.prototype.get=function(t){var e=this._mRegistry[t];return e||this._error("Service not registered",t),e},n.prototype.getAllServiceNames=function(){return e.keys(this._mRegistry)},n.prototype._error=function(t,e){var n=[];throw e&&n.push("Service: "+e),t&&n.push("Message: "+t),new Error(n.join(" | "))},n}),define("sap/watt/core/I18nBundle",[],function(){"use strict";var t=RegExp("^{(.+)>(.+)}$"),e=function(t){this._sLocale=window.sap.watt.getLocale(),this._defaultBundleName="i18n";var e={};"string"==typeof t?e[this._defaultBundleName]=t:e=t;for(var n in e){var r,i=e[n].indexOf(".hdbtextbundle");i>0?(r=".hdbtextbundle",e[n]=e[n].substr(0,i)):r=".properties";var o=/([^\/]*)\/(.*)/.exec(e[n]);e[n]=sap.ui.resource(o[1],o[2]+r)}this._mI18nBundles=e,this._aResourceBundles={},this.locale=this._sLocale,this.bundles=e};return e.prototype={},e.prototype.getText=function(e,n,r){if(1===arguments.length){var i=t.exec(arguments[0]);i?(e=i[1],n=i[2]):(n=arguments[0],e=this._defaultBundleName)}else 2===arguments.length&&Array.isArray(arguments[1])&&(r=arguments[1],n=arguments[0],e=this._defaultBundleName);if("string"!=typeof e&&"string"==typeof n&&(!r||Array.isArray(r)))throw new Error("Wrong arguments");if(!this._aResourceBundles[e]){var o=this._mI18nBundles[e];if(!o)throw new Error("Error getting i18n resource bundle '"+e+"'");jQuery.sap.require("jquery.sap.resources"),this._aResourceBundles[e]=jQuery.sap.resources({url:o,locale:this._sLocale})}return this._aResourceBundles[e].getText(n,r)},e.prototype.applyTo=function(t){var e=this._mI18nBundles;jQuery.isArray(t)||(t=[t]);for(var n in e){var r=new sap.ui.model.resource.ResourceModel({bundleUrl:e[n],bundleLocale:this.locale});t.forEach(function(t){t.setModel(r,n)})}},e}),define("sap/watt/core/Validations",["../lib/lodash/lodash"],function(t){"use strict";function e(e){function r(t){return t._getImpl().then(function(t){return t._getImpl()})}var i=t.mapValues(e,function(t){return{expectedInterface:t._oInterface,actualImplPromise:r(t)}}),o=t.map(i,function(t){return t.actualImplPromise});return Q.all(o).then(function(e){var r=0,o=t.mapValues(i,function(t){return{expectedInterface:t.expectedInterface,actualImpl:e[r++]}}),u=t.mapValues(o,function(t){return n(t)}),a=t.omit(u,function(e){return t.isEmpty(e)});return a})}function n(e){var n=e.expectedInterface,i=e.actualImpl,o=r(n),u=t.functions(i),a=t.difference(o,u);return a}function r(e){var n=t.map(e._mInterfaces,function(e){return t.keys(t.omit(e.methods,function(t){return t.returns&&t.returns.hasOwnProperty("default")}))}),r=t.union(t.flatten(n));return r}function i(e,n,r){var i=[];t.isString(t.first(n))?i=n:t.isObject(t.first(n))&&(i=o(n)),r&&(i=t.union(i,r));var u=s(e),a=u?e.requires.services:[];return t.difference(a,i)}function o(e){var n=t.map(e,function(e){var n=c(e);return n?t.keys(e.provides.services):[]});return t.unique(t.flatten(n))}function u(e){if(!a(e))return[];var n=s(e),r=c(e),i=n?e.requires.services:[],o=r?t.keys(e.provides.services):[],u=t.keys(e.configures.services),f=t.map(u,function(t){return t.split(":")[0]}),l=t.reject(f,function(e){return t.contains(i,e)}),p=t.reject(f,function(e){return t.contains(o,e)});return t.intersection(l,p)}function a(e){return t.isObject(e.configures)&&t.isObject(e.configures.services)}function c(e){return t.isObject(e.provides)&&t.isObject(e.provides.services)}function s(e){return t.isObject(e.requires)&&t.isArray(e.requires.services)}return{checkAllMethodsOnInterfaceImplemented_forAll:e,checkAllMethodsOnInterfaceImplemented:n,checkConfiguredServicesWhichAreNotRequiredOrProvided:u,checkMissingRequiredServices:i}}),define("sap/watt/core/ErrorMessages",["../lib/lodash/lodash"],function(t){"use strict";function e(t){var e="Not all required services are provided: \n";return r(t,e,"missing required services --->")}function n(t){var e="Inconsistent Service Definition			- Not all configured services are required or provided: \n";return r(t,e,"services not required or provided --->")}function r(e,n,r){var i=t.reduce(e,function(t,e,n){var i="Plugin: "+n+" "+r+" "+e.join(", ")+"\n";return t+i},n);return i}return{getErrorMessage_configured_but_not_required_or_provided:n,getErrorMessage_missing_required_service:e}}),define("sap/watt/core/PluginRegistry",["./Service","./ServiceRegistry","./Proxy","./Interface","./ConfigPreload","./I18nBundle","./Validations","./ErrorMessages","sap/watt/lib/lodash/lodash"],function(t,e,n,r,i,o,u,a,c){"use strict";function s(t,e){return c.forEach(e,function(e,n){t[n]=t[n]?Array.isArray(e)?jQuery.merge(t[n],e):c.isPlainObject(e)?s(t[n],e):e:e}),t}function f(t,e){var n=!0,r=!0,i=".Plugin";return t.indexOf(".Plugin")===t.length-i.length&&(console.warn("Deprecation Warning: Wrong pattern for plugin 'name' "+t+". Please use a valid namespace, e.g. sap.watt.common.myplugin. "+"To use a Plugin.js please define a 'module', e.g. 'module':'sap.watt.common.myplugin/Plugin.js"),n=!1),e&&0===e.indexOf("./")&&(console.warn("Deprecation Warning: Wrong pattern for plugin 'module' "+t+". To use a Plugin.js please define a 'module', e.g. "+"'module':'sap.watt.common.myplugin/Plugin.js. If no module is needed, delete it."),r=!1),!r&&!n}function l(t){var e=c.mapValues(t,function(t){return u.checkConfiguredServicesWhichAreNotRequiredOrProvided(t)}),n=c.omit(e,function(t){return c.isEmpty(t)});return n}function p(t,e){var n=e.getAllServiceNames(),r=c.mapValues(t,function(t){return u.checkMissingRequiredServices(t,n)}),i=c.omit(r,function(t){return c.isEmpty(t)});return i}function h(t,e){var n={};n[t.getMetadata().name]=t.getMetadata();var r=l(n),i=p(n,e),o=[];if(c.isEmpty(r)||o.push(a.getErrorMessage_configured_but_not_required_or_provided(r)),c.isEmpty(i)||o.push(a.getErrorMessage_missing_required_service(i)),!c.isEmpty(o))throw new Error("Problems detected while checking service definition consistency:\n"+o.join("--------------------\n"))}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];if("rejected"===r.state){var i=t[n];i.sURI?r.baseURI=i.sURI:(r.name=i.getMetadata().name,r.description=i.getMetadata().description,r.baseURI=i.getMetadata().baseURI)}}}function g(t,e){v(t,e);var n=c.filter(t,function(t,n){return"fulfilled"===e[n].state}),r=c.filter(e,function(t){return"rejected"===t.state});return{successes:n,failures:r}}function _(t){var e=c.reduce(t,function(t,e){return t+"\n"+e.reason.stack},"");return e}var d=new e;t.$setServiceRegistry(d);var y={};y.assertConfiguredServicesAreRequiredOrProvided=l,y.assertAllRequiredAreInRegistry=p,y.assertServicesDefinitionConsistency=h,Object.freeze(y);var m=function(t,e){this._oMetadata=t,this._baseURI=t.baseURI,this._oProxy=e,this._oContext=e?e.context:{},this._registerInterfaces()};m.create=function(t,e){var r=function(t){t.baseURI&&m.registerRequirePath(t.name,t.baseURI);var r=e&&e[t.name],i=[];return(r||[]).forEach(function(t){var e=t.sURI.replace(/\/$/,"");i.push(m.loadMetadata(e,"plugin.ext.json"))}),Q.all(i).then(function(e){e.forEach(function(e){m.registerRequirePath(e.name,e.baseURI),t=m.mergeMetadata(t,e)});var r=Q();return f(t.name,t.module)?r=n.create(t.name,t.name):t.module&&(r=n.create(t.name,{module:t.module})),r.then(function(e){return new m(t,e)})})};if(c.isString(t)){var i=t.replace(/\/$/,"");return m.loadMetadata(i,"plugin.json").then(function(t){return r(t,i)})}return r(m._ensureSections(t))},m._ensureSections=function(t,e){if(!t.name)throw new Error("Failed to load metadata for Plugin "+e+"! Reason: No plugin name given");return jQuery.extend(!0,{baseURI:e,requires:{services:[]},provides:{services:{},interfaces:{}},configures:{services:{}},subscribes:{}},t)},m.registerRequirePath=function(t,e){var n={paths:{}};n.paths[t]=e,require.config(n),jQuery.sap.registerModulePath(t,e)},m.mergeMetadata=function(t,e){return t.requires.services=t.requires.services.concat(e.requires.services),s(t.provides.services,e.provides.services),s(t.configures.services,e.configures.services),s(t.subscribes,e.subscribes),t},m.loadMetadata=function(t,e){var n=t+"/"+e,r=i.toInternalPath(n.replace(e,"."));return i.getPreload("plugins",r).then(null,function(){return Q(jQuery.ajax({url:n,dataType:"json"}).then(null,function(t,e){return new Error("Failed to load metadata for Plugin "+n+"! Reason: "+e+" "+t.statusText)}))}).then(function(e){return m._ensureSections(e,t)})},m.prototype.initServices=function(t){delete this.initServices;var e=[],n=this._getServiceMetadataFor("provides");return c.forEach(n,function(t,n){var r=d.register(n,t);e.push(r)}),t?Q.allSettled(e):Q.all(e)},m.prototype.initialize=function(){var t=this;return Q.fcall(function(){delete t.initialize,t._initI18n(),t._initServiceContexts(),t._initSubscribes(),t._initServiceConfigurations()}).then(null,function(e){throw new Error("Error initializing plugin "+t._oMetadata.name+"\nOriginal error message: "+e.message+"\nError stack: "+e.stack+"\n -----------")})},m.prototype.getMetadata=function(){return this._oMetadata},m.prototype._registerInterfaces=function(){var t=this._getInterfaceMetadata();c.forEach(t,function(t,e){"string"==typeof t&&(t+=".json"),r.register(e,t)})},m.prototype._initServiceContexts=function(){var t=this._getServiceMetadataFor("requires"),e=this._getServiceMetadataFor("provides"),n=this._createServiceObjectForContext(e,t);this._oContext.service=n;var r=this;for(var i in e){var o=d.get(i);o.context.service=n,o.context.i18n=r._oContext.i18n}},m.prototype._initI18n=function(){var t=this.getMetadata().i18n,e=this._createI18nObjectForContext(t);this._oContext.i18n=e},m.prototype._initSubscribes=function(){var t=this,e=this.getMetadata().subscribes;c.forEach(e||{},function(e,n){var r=n.split(":");if(2!==r.length)throw new Error("Event subscribtion needs to be of the following format: <service>:<eventName>, but is '"+n+"'");var i=d.get(r[0]),o=r[1];"string"==typeof e&&(e=[e]),e.forEach(function(e){var n,r,u=e.split(":");if(1===u.length){if(n=u[0],r=t._oProxy,!r)throw new Error("Target service of event subscription is not available. Please define a plugin 'module' in the plugin.json of plugin: "+t.getMetadata().name)}else{var a=u[0];if(n=u[1],r=d.get(a),!t._oMetadata.provides||!t._oMetadata.provides.services||!t._oMetadata.provides.services[a])throw new Error("An event handling service needs to be provided by the plugin that defines the subscription - Plugin: "+t._oMetadata.name+" - Service: "+a)}if(n){var c=function(t,e){return r.$invoke(n,e||{},t)};i.attachEvent(o,c)}})})},m.prototype._initServiceConfigurations=function(){var t=this._getServiceMetadataFor("configures"),e=this;c.forEach(t||{},function(t,n){var r=n.split(":"),i=null;if(2!==r.length)throw new Error("Service Configuration: Syntax error in configuration for service '"+n+"' in Plugin '"+this.getMetadata().name+"'. No configuration property given.'");n=r[0],i=r[1];var o=d.get(n);o.attachEventOnce("$beforeInit",function(){return e._enrichServiceConfigurationValueAndConfigureService(i,t,o)})})},m.prototype._configureAnonymousService=function(t,e){var n=this,r=[];return c.forEach(e||{},function(e,i){r.push(n._enrichServiceConfigurationValueAndConfigureService(i,e,t))}),Q.all(r)},m.prototype._enrichServiceConfigurationValueAndConfigureService=function(t,e,n){return this._enrichServiceConfigurationValue(t,e,n).then(function(e){return n.$configure(t,e)})},m.prototype._enrichServiceConfigurationValue=function(t,e,n){var r=this,i=n.$getInterface(),o=n.getProxyMetadata().getName()||"anonymous";if(!i.hasConfigurationProperties())throw new Error("Service configuration: No configuration defined for '"+o+"'. Please define the configuration in the interface");var u=i.getConfigurationProperties(),a=u[t];if(!a)throw new Error("Service Configuration: Configuration property '"+t+"' not defined in configuration for service '"+o+"' in Plugin '"+this.getMetadata().name+"'.'");var c=a.type,s=[];if(i.isConfigurationPropertyMultiple(t)){if(!Array.isArray(e))throw new Error("Service configuration: Multiple configuration property '"+t+"' of service '"+o+"' needs to be an array");s=e.map(function(t,n){return r._enrichServiceConfigurationValueByType(c,t,i).then(function(t){e[n]=t})})}else s.push(this._enrichServiceConfigurationValueByType(c,e,i).then(function(t){e=t}));return Q.all(s).then(function(){return e})},m.prototype._enrichServiceConfigurationValueByType=function(t,e,n){var r=this,i=[];if(null===e||void 0===e)return Q(e);if(n.isComplexType(t))if(Array.isArray(t)){var o=t[0];i=e.map(function(t,i){return r._enrichServiceConfigurationValueByType(o,t,n).then(function(t){e[i]=t})})}else c.forEach(t,function(t,o){var u=t;c.isPlainObject(t)&&(u=t.type),i.push(r._enrichServiceConfigurationValueByType(u,e[o],n).then(function(t){e[o]=t}))});else n.isProxyType(t)?i.push(this._getServiceByConfigurationValue(e,t).then(function(t){e=t})):e=this._getTextFromResourceBundle(e);return Q.all(i).then(function(){return e})},m.prototype._getServiceByConfigurationValue=function(t,e){var r=this;if("string"==typeof t&&0===t.indexOf("@")){var i=t.substring(1),o=d.get(i);return o.instanceOf("Factory")&&"Factory"!==e?o.create().then(function(t){return t}):Q(o)}var u,a={};if(c.isString(t)?(a.implements=e,-1!=t.indexOf("/")?a.module=t:a.className=t):(a=t,u=t.configuration,delete a.configuration,a.implements&&""!==a.implements||(a.implements=e)),a.factory){var i=a.factory.substring(1),o=d.get(i);return o.create().then(function(t){return r._configureAnonymousService(t,u).then(function(){return t})})}return n.create(t,a).then(function(t){return r._configureAnonymousService(t,u).then(function(){return t.context.service=r._oContext.service,t.context.i18n=r._oContext.i18n,t})})},m.prototype._createServiceObjectForContext=function(t,e){var n=e.slice(0);for(i in t)n.push(i);for(var r={},i="",o=null,u=0;u<n.length;u++)i=n[u],o=d.get(i),this._setObjectValue(r,i,o);return r},m.prototype._setObjectValue=function(t,e,n){var r=e;if(-1!=r.indexOf(".")){for(var i=r.split("."),o=0;o<i.length-1;o++)t[i[o]]=t[i[o]]||{},t=t[i[o]];r=i[o]}t[r]=n},m.prototype._getServiceMetadataFor=function(t){return this.getMetadata()[t].services},m.prototype._getInterfaceMetadata=function(){return this.getMetadata().provides.interfaces},m.prototype._createI18nObjectForContext=function(t){return t?new o(t):null},m.prototype._getTextFromResourceBundle=function(t){if("string"==typeof t&&t.indexOf(">")>1){var e=t.match(/{(.+)>(.+)}/);if(3===e.length){var n=e[1],r=e[2];t=this._oContext.i18n.getText(n,r)}}return t};var w=function(){this._mRegistry={},this._assertUtils=y};return w.prototype.$getServiceRegistry=function(){return d},w.prototype.register=function(t,e){return this._registerMain(t,e).then(function(t){return t.required.successes})},w.prototype.registerWithFullDetails=function(t,e){return this._registerMain(t,e)},w.prototype._registerMain=function(t,e){var n=c.where(t,{required:!1}),r=c.difference(t,n),i=this;return i._createPlugins(r,e).then(function(t){if(!c.isEmpty(t.failures)){var r=_(t.failures);throw new Error("failure during creation of required plugins ->\n"+r)}return i._createPlugins(n,e).then(function(e){return c.isEmpty(e.failures)||(console.log("failure during creation of required plugins"),console.log(_(e.failures))),i._removeFailedPluginsFromPluginRegistry(e.failures),{required:{successes:t.successes,failures:t.failures},notRequired:{successes:e.successes,failures:e.failures}}})})},w.prototype._removeFailedPluginsFromPluginRegistry=function(t){var e=this;c.forEach(t,function(t){delete e._mRegistry[t.baseURI]})},w.prototype._createPlugins=function(t,e){if(c.isEmpty(t))return Q({successes:[],failures:[]});var n=this;return n._registerPlugins(t,e).then(function(t){return n._initServices(t.successes).then(function(e){return n._verifyPluginsServices(e.successes).then(function(r){return n._initPlugins(r.successes).then(function(n){var i=n.failures.concat(t.failures,e.failures,r.failures);return{successes:n.successes,failures:i}})})})})},w.prototype._registerPlugins=function(t,e){if(c.isEmpty(t))return Q({successes:[],failures:[]});var n=c.map(t,function(t){var n;return n=c.isPlainObject(t)&&t.sURI?t.sURI:t,this._register(n,e)},this);return Q.allSettled(n).then(function(e){v(t,e);var n=c.groupBy(e,function(t){return t.state}),r=n.fulfilled?n.fulfilled:[],i=n.rejected?n.rejected:[],o=c.collect(r,"value");return{successes:o,failures:i}})},w.prototype._verifyPluginsServices=function(t){if(c.isEmpty(t))return Q({successes:[],failures:[]});var e=this,n=c.map(t,function(t){return Q.fcall(function(){h(t,e.$getServiceRegistry())})},this);return Q.allSettled(n).then(function(e){return g(t,e)})},w.prototype._initServices=function(t){if(c.isEmpty(t))return Q({successes:[],failures:[]});var e=c.map(t,function(t){return Q(t).invoke("initServices").then(function(){console.log("READY: "+t.getMetadata().name)})},this);return Q.allSettled(e).then(function(e){return g(t,e)})},w.prototype._initPlugins=function(t){if(c.isEmpty(t))return Q({successes:[],failures:[]});var e=c.map(t,function(t){return t.initialize()});return Q.allSettled(e).then(function(e){return g(t,e)})},w.prototype._register=function(t,e){if(this._mRegistry[t]){var n=Q.defer();return n.reject(new Error("Plugin "+t+" is already registered")),n.promise}var r=this;return console.log("CREATE: "+t),m.create(t,e).then(function(e){return r._mRegistry[t]=e,e})},w.prototype.get=function(t){var e=this._mRegistry[t];return e||jQuery.sap.log.error("Plugin not registered",t),e&&e.getMetadata()},new w}),define("sap/watt/core/Core",["./PluginRegistry","./Interface","./ConfigPreload"],function(t,e,n){"use strict";var r=Q.defer(),i=null;r.promise.done();var o={_bStarted:!1,_oContext:null,start:function(e){var n=this;if(this._oContext=n.context,this._bStarted)throw new Error("Core can only be started once");return this._bStarted=!0,t.registerWithFullDetails(e.plugins,e.pluginExtensions).then(function(t){return n.context.event.fireStarted().then(function(){return t})})},getService:function(){return r.promise}};return e.register("sap.watt.core.Core",{methods:{start:{},getService:{}},events:{started:{},allPluginsStarted:{}}}),e.register("sap.watt.core.Config",{methods:{load:{}}}),e.register("Factory",{description:"The service factory service",methods:{create:{}}}),o.startup=t.$getServiceRegistry().register("core",{module:"sap/watt/core/Core","implements":"sap.watt.core.Core"}).then(function(e){return i=e,r.resolve(i),t.$getServiceRegistry().register("config",{module:"sap/watt/core/Config","implements":"sap.watt.core.Config"})}).then(function(t){var e=n.loadPreload(location.origin+"/"+sap.watt.getEnv("base_path")+"sap/watt/config-preload.json"),r=n.loadJSPreload("sap/watt/i18n/config-preload"),i=n.loadJSPreload("sap/watt/config-preload");return Q.all([t.load(),e,r,i])}).then(function(t){var e=t[0];return i.start(e)}),o.startup.then(function(e){o._oContext.event.fireAllPluginsStarted({params:e.notRequired.failures}).then(function(){if(sap.watt.getEnv("iframeMode")){var e=window.frameElement.id,n=window.parent,r=n.WEB_IDE_DEFERRED[e];r.resolve(t)}}).done()}).done(),o}),define("sap/watt/core/Core-preload",function(){});