// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";sap.ui.jsview("sap.ushell.ui.footerbar.SaveAsTile",{getControllerName:function(){return"sap.ushell.ui.footerbar.SaveAsTile";},createContent:function(c){this.oResourceBundle=sap.ushell.resources.i18n;this.viewData=this.getViewData()||{};this.appData=this.viewData.appData||{};this.oTitleInput=new sap.m.Input('bookmarkTitleInput',{tooltip:this.oResourceBundle.getText("bookmarkDialogoTitle_tooltip"),value:{path:"/title",mode:sap.ui.model.BindingMode.TwoWay}}).addStyleClass("sapUshellInputField");this.oTitleInput.addAriaLabelledBy("titleLbl");this.oSubTitleInput=new sap.m.Input('bookmarkSubTitleInput',{tooltip:this.oResourceBundle.getText("bookmarkDialogoSubTitle_tooltip"),value:{path:"/subtitle",mode:sap.ui.model.BindingMode.TwoWay}}).addStyleClass("sapUshellInputField");this.oSubTitleInput.addAriaLabelledBy("subtitleLbl");this.oInfoInput=new sap.m.Input('bookmarkInfoInput',{tooltip:this.oResourceBundle.getText("bookmarkDialogoInfo_tooltip"),value:{path:"/info",mode:sap.ui.model.BindingMode.TwoWay}}).addStyleClass("sapUshellInputField");this.oInfoInput.addAriaLabelledBy("infoLbl");var t={numberValue:"{/numberValue}",title:"{/title}",subtitle:"{/subtitle}",info:"{/info}",icon:"{/icon}",infoState:"{/infoState}",numberFactor:"{/numberFactor}",numberUnit:"{/numberUnit}",numberDigits:"{/numberDigits}",numberState:"{/numberState}",stateArrow:"{/stateArrow}",targetURL:"{/targetURL}",keywords:"{/keywords}"};var T,s;if(this.viewData.serviceUrl){T=new sap.ushell.ui.tile.DynamicTile("previewTile",t);s=(typeof(this.viewData.serviceUrl)==="function")?this.viewData.serviceUrl():this.viewData.serviceUrl;c.calcTileDataFromServiceUrl(s);}else{T=new sap.ushell.ui.tile.StaticTile("previewTile",t);}this.setTileView(T);var a=new sap.ushell.ui.launchpad.Tile({"long":false,"tall":false,tileViews:[T]}).addStyleClass("sapUshellBookmarkFormPreviewTileMargin");var p=new sap.m.Label("previewLbl",{text:" "+this.oResourceBundle.getText('previewFld')}),o=new sap.m.Label("titleLbl",{required:true,text:" "+this.oResourceBundle.getText('titleFld')}),S=new sap.m.Label("subtitleLbl",{text:this.oResourceBundle.getText('subtitleFld')}),i=new sap.m.Label("infoLbl",{text:this.oResourceBundle.getText('infoMsg')}),h=new sap.m.HBox("saveAsTileHBox",{items:[a],alignItems:sap.m.FlexAlignItems.Center,justifyContent:sap.m.FlexJustifyContent.Center}).addStyleClass("sapUiStrongBackgroundColor").addStyleClass("sapUshellBookmarkFormPreviewBoxBottomMargin");var g=new sap.m.Label("groupLbl",{text:this.oResourceBundle.getText('GroupListItem_label'),visible:"{/showGroupSelection}"});this.oGroupsSelect=new sap.m.Select("groupsSelect",{tooltip:"{i18n>bookmarkDialogoGroup_tooltip}",items:{path:"/groups",template:new sap.ui.core.ListItem({text:"{title}"})},width:"100%",visible:{path:"/showGroupSelection",formatter:function(b){if(b){this.oController.loadPersonalizedGroups();}return b;}.bind(this)}});this.oGroupsSelect.addAriaLabelledBy("groupLbl");return[p,h,o,this.oTitleInput,S,this.oSubTitleInput,i,this.oInfoInput,g,this.oGroupsSelect];},getTitleInput:function(){return this.oTitleInput;},getTileView:function(){return this.tileView;},setTileView:function(t){this.tileView=t;},getBookmarkTileData:function(){var s;if(this.oGroupsSelect&&this.oGroupsSelect.getSelectedItem()){s=this.oGroupsSelect.getSelectedItem().getBindingContext().getObject();}var u;if(this.viewData.customUrl){if(typeof(this.viewData.customUrl)==="function"){u=this.viewData.customUrl();}else{u=this.viewData.customUrl;}}else{u=hasher.getHash()?('#'+hasher.getHash()):window.location.href;}return{title:this.oTitleInput.getValue().trim(),subtitle:this.oSubTitleInput.getValue().trim(),url:u,icon:this.getModel().getProperty('/icon'),info:this.oInfoInput.getValue().trim(),numberUnit:this.viewData.numberUnit,serviceUrl:typeof(this.viewData.serviceUrl)==="function"?this.viewData.serviceUrl():this.viewData.serviceUrl,serviceRefreshInterval:this.viewData.serviceRefreshInterval,group:s,keywords:this.viewData.keywords};}});}());
