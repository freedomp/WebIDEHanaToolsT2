/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright
		2009-2015 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','sap/ui/core/ResizeHandler','sap/ui/core/Control','sap/ui/core/CustomData','sap/ui/core/delegate/ScrollEnablement','./ObjectPageSubSection','./ObjectPageSubSectionLayout','./LazyLoading','./ObjectPageLayoutITBHelper','./ObjectPageLayoutABHelper','./library'],function(q,R,C,a,S,O,b,L,I,A,l){"use strict";var c=C.extend("sap.uxap.ObjectPageLayout",{metadata:{library:"sap.uxap",properties:{showAnchorBar:{type:"boolean",defaultValue:true},showAnchorBarPopover:{type:"boolean",defaultValue:true},upperCaseAnchorBar:{type:"boolean",defaultValue:true},height:{type:"sap.ui.core.CSSSize",defaultValue:'100%'},enableLazyLoading:{type:"boolean",defaultValue:false},subSectionLayout:{type:"sap.uxap.ObjectPageSubSectionLayout",defaultValue:b.TitleOnTop},useIconTabBar:{type:"boolean",group:"Misc",defaultValue:false},showHeaderContent:{type:"boolean",group:"Misc",defaultValue:true},useTwoColumnsForLargeScreen:{type:"boolean",group:"Appearance",defaultValue:false},showTitleInHeaderContent:{type:"boolean",group:"Appearance",defaultValue:false},showOnlyHighImportance:{type:"boolean",group:"Behavior",defaultValue:false}},defaultAggregation:"sections",aggregations:{sections:{type:"sap.uxap.ObjectPageSection",multiple:true,singularName:"section"},headerTitle:{type:"sap.uxap.ObjectPageHeader",multiple:false},headerContent:{type:"sap.ui.core.Control",multiple:true,singularName:"headerContent"},_anchorBar:{type:"sap.uxap.AnchorBar",multiple:false,visibility:"hidden"},_iconTabBar:{type:"sap.m.IconTabBar",multiple:false,visibility:"hidden"},_headerContent:{type:"sap.uxap.ObjectPageHeaderContent",multiple:false,visibility:"hidden"}},events:{toggleAnchorBar:{parameters:{fixed:{type:"boolean"}}}}}});c.prototype.init=function(){this._bFirstRendering=true;this._bDomReady=false;this._bStickyAnchorBar=false;this._bInternalAnchorBarVisible=true;this._$opWrapper=[];this._$anchorBar=[];this._$headerTitle=[];this._$stickyAnchorBar=[];this._$headerContent=[];this._bMobileScenario=false;this._oSectionInfo={};this._aSectionBases=[];this._sScrolledSectionId="";this._iScrollToSectionDuration=600;this._$spacer=[];this.iHeaderContentHeight=0;this.iHeaderTitleHeight=0;this.iHeaderTitleHeightStickied=0;this.iAnchorBarHeight=0;this.iTotalHeaderSize=0;this._iResizeId=R.register(this,this._onUpdateScreenSize.bind(this));this._oLazyLoading=new L(this);this._oITBHelper=new I(this);this._oABHelper=new A(this);};c.prototype.onBeforeRendering=function(){this._initializeScroller();this._getHeaderContent().setContentDesign(this._getHeaderDesign());this._oABHelper._getAnchorBar().setUpperCase(this.getUpperCaseAnchorBar());if(this._bFirstRendering||!this.getUseIconTabBar()){this._applyUxRules();}if(!q.isEmptyObject(this._oSectionInfo)&&this._bFirstRendering){if(!this.getEnableLazyLoading()){this._connectModelsForSections(this.getSections());}else{this._connectModelsForSections(this._oLazyLoading.getSubsectionsToPreload(this._aSectionBases));}this._bFirstRendering=false;}this._bStickyAnchorBar=false;};c.prototype.onAfterRendering=function(){this._bMobileScenario=q("html").hasClass("sapUiMedia-Std-Phone")||sap.ui.Device.system.phone;this._ensureCorrectParentHeight();this._cacheDomElements();this._$opWrapper.on("scroll",this._onScroll.bind(this));this._shiftHeaderTitle();if(this._bDomReady&&this.$().parents(":hidden").length===0){this._onAfterRenderingDomReady();}else{q.sap.delayedCall(c.HEADER_CALC_DELAY,this,this._onAfterRenderingDomReady);}};c.prototype._onAfterRenderingDomReady=function(){this._bDomReady=true;this._adjustHeaderHeights();this._initAnchorBarScroll();if(this.getUseIconTabBar()){this._oITBHelper._setFacetInitialVisibility();}this._setSectionsFocusValues();};c.prototype.exit=function(){if(this._oScroller){this._oScroller.destroy();this._oScroller=null;}if(this._iResizeId){R.deregister(this._iResizeId);}};c.prototype.setShowOnlyHighImportance=function(v){var o=this.getShowOnlyHighImportance();if(o!==v){this.setProperty("showOnlyHighImportance",v,true);this.getSections().forEach(function(s){s._updateImportance();});}return this;};c.prototype._initializeScroller=function(){if(this._oScroller){this._oScroller.scrollTo(0,0,0);this._oScroller.destroy();}var e=(sap.ui.Device.os.blackberry&&sap.ui.Device.os.version>=10.0&&sap.ui.Device.os.version<11.0);this._oScroller=new S(this,this.getId()+"-scroll",{horizontal:false,vertical:true,zynga:e,preventDefault:true,nonTouchScrolling:"scrollbar",scrollbarClass:"sapUxAPObjectPageScroll"});};c.prototype._ensureCorrectParentHeight=function(){if(this.getParent().getHeight&&["","auto"].indexOf(this.getParent().getHeight())!==-1){this.$().parent().css("height","100%");}};c.prototype._cacheDomElements=function(){this._$headerTitle=q.sap.byId(this.getId()+"-headerTitle");this._$anchorBar=q.sap.byId(this.getId()+"-anchorBar");this._$stickyAnchorBar=q.sap.byId(this.getId()+"-stickyAnchorBar");this._$opWrapper=q.sap.byId(this.getId()+"-opwrapper");this._$spacer=q.sap.byId(this.getId()+"-spacer");this._$headerContent=q.sap.byId(this.getId()+"-headerContent");this._$contentContainer=q.sap.byId(this.getId()+"-scroll");};c.prototype._shiftHeaderTitle=function(){var r=0.0;if(sap.ui.Device.system.desktop){r=q.position.scrollbarWidth();}if(r>0){if(sap.ui.getCore().getConfiguration().getRTL()){this._$headerTitle.css("left",r+"px");}else{this._$headerTitle.css("right",r+"px");}}};c.prototype._getContainerElement=function(){return this.$().find(".sapUxAPObjectPageContainer")[0];};c.prototype._applyUxRules=function(i){var s,d,v,V,e,f,g,F,o;s=this.getSections()||[];V=0;f=this.getShowAnchorBar();g=this.getUseIconTabBar();F=null;this._cleanMemory();s.forEach(function(h){if(!h.getVisible()){return true;}this._registerSectionBaseInfo(h);d=h.getSubSections()||[];v=0;o=null;d.forEach(function(j){if(!j.getVisible()){return true;}this._registerSectionBaseInfo(j);e=j.getVisibleBlocksCount();if(e===0){j._setInternalVisible(false,i);q.sap.log.info("ObjectPageLayout :: noVisibleBlock UX rule matched","subSection "+j.getTitle()+" forced to hidden");}else{j._setInternalVisible(true,i);j._setInternalTitleVisible(true,i);v++;if(!o){o=j;}}},this);if(v==0){h._setInternalVisible(false,i);q.sap.log.info("ObjectPageLayout :: noVisibleSubSection UX rule matched","section "+h.getTitle()+" forced to hidden");}else{h._setInternalVisible(true,i);h._setInternalTitleVisible(true,i);if(!F){F=h;}if(this.getSubSectionLayout()===b.TitleOnTop&&v===1&&o.getTitle().trim()!==""){q.sap.log.info("ObjectPageLayout :: TitleOnTop.sectionGetSingleSubSectionTitle UX rule matched","section "+h.getTitle()+" is taking its single subsection title "+o.getTitle());h._setInternalTitle(o.getTitle(),i);o._setInternalTitleVisible(false,i);}else{h._setInternalTitle("",i);}V++;}if(g){h._setInternalTitleVisible(false,i);}},this);if(V<=1){f=false;g=false;q.sap.log.info("ObjectPageLayout :: notEnoughVisibleSection UX rule matched","anchorBar forced to hidden");}else if(F&&f){F._setInternalTitleVisible(false,i);q.sap.log.info("ObjectPageLayout :: firstSectionTitleHidden UX rule matched","section "+F.getTitle()+" title forced to hidden");}if(g){this._oITBHelper._buildIconTabBar();}else if(f){this._oABHelper._buildAnchorBar();}this._setInternalAnchorBarVisible(f,i);};c.prototype.setUseIconTabBar=function(v){if(v===true){this.setProperty("useIconTabBar",true);this.setProperty("showAnchorBar",false);}else{this.setProperty("useIconTabBar",false);}return this;};c.prototype.setShowAnchorBarPopover=function(v,s){this._oABHelper._getAnchorBar().setShowPopover(v);return this.setProperty("showAnchorBarPopover",v,true);};c.prototype._getInternalAnchorBarVisible=function(){return this._bInternalAnchorBarVisible;};c.prototype._setInternalAnchorBarVisible=function(v,i){if(v!=this._bInternalAnchorBarVisible){this._bInternalAnchorBarVisible=v;if(i===true){this.invalidate();}}};c.prototype._adjustLayout=function(e,i,n){if(!this._bDomReady){return;}if(this._iLayoutTimer){q.sap.log.debug("ObjectPageLayout :: _adjustLayout","delayed by "+c.DOM_CALC_DELAY+" ms because of dom modifications");q.sap.clearDelayedCall(this._iLayoutTimer);}if(i){this._updateScreenHeightSectionBasesAndSpacer();this._iLayoutTimer=undefined;}else{this._bNeedLazyLoading=this._bNeedLazyLoading!==undefined||n;this._iLayoutTimer=q.sap.delayedCall(c.DOM_CALC_DELAY,this,function(){q.sap.log.debug("ObjectPageLayout :: _adjustLayout","re-evaluating dom positions");this._updateScreenHeightSectionBasesAndSpacer();if(this._bNeedLazyLoading){this._oLazyLoading.doLazyLoading();}this._bNeedLazyLoading=undefined;this._iLayoutTimer=undefined;});}};c.prototype._adjustLayoutAndUxRules=function(){q.sap.log.debug("ObjectPageLayout :: _adjustLayout","refreshing ux rules");var s=this._getSelectedSectionId();this._applyUxRules(true);this._setSelectedSectionId(s);this._adjustLayout(null,false,true);};c.prototype._getSelectedSectionId=function(){var o=this.getAggregation("_anchorBar"),i=this.getAggregation("_iconTabBar"),s;if(o&&o.getSelectedSection()){s=o.getSelectedSection().getId();}if(i&&i.getSelectedKey()){var d=i.getSelectedKey(),e=sap.ui.getCore().byId(d);if(e&&e.data("selectedSection")){s=e.data("selectedSection").getId();}}return s;};c.prototype._setSelectedSectionId=function(s){var o=this.getAggregation("_anchorBar"),i=this.getAggregation("_iconTabBar"),d=s&&this._oSectionInfo[s];if(!d){return;}if(o&&d.buttonId){o.setSelectedButton(d.buttonId);}else if(i&&d.filterId){i.setSelectedKey(d.filterId);}};c.prototype.isFirstRendering=function(){return this._bFirstRendering;};c.prototype._cleanMemory=function(){var o=this.getAggregation("_anchorBar");if(o){o.destroyContent();}this._oSectionInfo={};this._aSectionBases=[];};c.prototype._registerSectionBaseInfo=function(s){this._oSectionInfo[s.getId()]={$dom:[],positionTop:0,positionTopMobile:0,realTop:0.0,buttonId:"",isSection:(s instanceof sap.uxap.ObjectPageSection)};this._aSectionBases.push(s);};c.prototype.scrollToSection=function(i,d,o){var s=sap.ui.getCore().byId(i);o=o||0;s._expandSection();this._adjustLayout(null,true);d=parseInt(d);d=d>=0?d:this._iScrollToSectionDuration;var f=s&&(s.getMetadata().getName()==="sap.uxap.ObjectPageSection");var e=this._bMobileScenario||f?this._oSectionInfo[i].positionTopMobile:this._oSectionInfo[i].positionTop;if(this._sCurrentScrollId!=i){this._sCurrentScrollId=i;if(this._iCurrentScrollTimeout){clearTimeout(this._iCurrentScrollTimeout);this._$contentContainer.parent().stop(true,false);}this._iCurrentScrollTimeout=q.sap.delayedCall(d,this,function(){this._sCurrentScrollId=undefined;this._iCurrentScrollTimeout=undefined;});if(this.getEnableLazyLoading()){if(sap.ui.Device.system.desktop){q.sap.delayedCall(50,this,function(){this._connectModelsForSections(this._oLazyLoading.getSubsectionsToPreload(this._aSectionBases,i));});}else{this._connectModelsForSections(this._oLazyLoading.getSubsectionsToPreload(this._aSectionBases,i));}}this._scrollTo(e+o,d);}};c.prototype.getScrollingSectionId=function(){return this._sScrolledSectionId;};c.prototype.setDirectScrollingToSection=function(d){this.sDirectSectionId=d;};c.prototype.getDirectScrollingToSection=function(){return this.sDirectSectionId;};c.prototype.clearDirectScrollingToSection=function(){this.sDirectSectionId=null;};c.prototype._scrollTo=function(y,t){if(this._oScroller){q.sap.log.debug("ObjectPageLayout :: scrolling to "+y);this._oScroller.scrollTo(0,y,t);}return this;};c.prototype._updateScreenHeightSectionBasesAndSpacer=function(){var i,o,s,p,P,h;this.iScreenHeight=this.$().height();h=this.iHeaderTitleHeightStickied-this.iHeaderTitleHeight;this._aSectionBases.forEach(function(d){var e=this._oSectionInfo[d.getId()],$=d.$(),f;if(!e||!$.length){return;}e.$dom=$;e.realTop=$.position().top;e.positionTop=Math.ceil(e.realTop)-this.iAnchorBarHeight-h;if(e.isSection){f=d.$("header");}else{f=d.$("headerTitle");}if(f.length>0){e.positionTopMobile=Math.ceil(f.position().top)+f.outerHeight()-this.iAnchorBarHeight-h;}else{e.positionTopMobile=e.positionTop;}if(this._bMobileScenario){if(P){this._oSectionInfo[P].positionBottom=e.positionTop;}P=d.getId();o=d;}else{if(e.isSection){if(P){this._oSectionInfo[P].positionBottom=e.positionTop;this._oSectionInfo[p].positionBottom=e.positionTop;}P=d.getId();p=null;}else{if(p){this._oSectionInfo[p].positionBottom=e.positionTop;}p=d.getId();o=d;}}},this);if(o){i=this._$spacer.position().top-this._oSectionInfo[o.getId()].realTop;if(this._bMobileScenario){this._oSectionInfo[P].positionBottom=this._oSectionInfo[P].positionTop+i;}else{this._oSectionInfo[p].positionBottom=this._oSectionInfo[p].positionTop+i;this._oSectionInfo[P].positionBottom=this._oSectionInfo[p].positionTop+i;}if(i<this.iScreenHeight){if(this.iHeaderContentHeight){s=this.iScreenHeight-i-this.iHeaderTitleHeightStickied-this.iAnchorBarHeight;}else{s=this.iScreenHeight-i-this.iAnchorBarHeight;}if(this._bMobileScenario){s+=(this._oSectionInfo[o.getId()].positionTopMobile-this._oSectionInfo[o.getId()].positionTop);}this._$spacer.height(s+"px");q.sap.log.debug("ObjectPageLayout :: bottom spacer is now "+s+"px");}}};c.prototype._initAnchorBarScroll=function(){this._adjustLayout(null,true);this._sScrolledSectionId="";this._onScroll({target:{scrollTop:0}});};c.prototype._setAsCurrentSection=function(s){var o,d,e;if(this._sScrolledSectionId===s){return;}q.sap.log.debug("ObjectPageLayout :: current section is "+s);this._sScrolledSectionId=s;o=this.getAggregation("_anchorBar");if(o&&this._getInternalAnchorBarVisible()){d=sap.ui.getCore().byId(s);e=d&&d instanceof O&&(d.getTitle().trim()===""||!d._getInternalTitleVisible()||d.getParent()._getIsHidden());if(e){s=d.getParent().getId();q.sap.log.debug("ObjectPageLayout :: current section is a subSection with an empty or hidden title, selecting parent "+s);}if(this._oSectionInfo[s]){o.setSelectedButton(this._oSectionInfo[s].buttonId);this._setSectionsFocusValues(s);}}};c.prototype._onUpdateScreenSize=function(e){if(!this._bDomReady){q.sap.log.info("ObjectPageLayout :: cannot _onUpdateScreenSize before dom is ready");return;}this._bMobileScenario=q("html").hasClass("sapUiMedia-Std-Phone")||sap.ui.Device.system.phone;this._oLazyLoading.setLazyLoadingParameters();q.sap.delayedCall(c.HEADER_CALC_DELAY,this,function(){this._adjustHeaderHeights();this._adjustLayout(null,true);this._oScroller.scrollTo(0,this._$opWrapper.scrollTop(),0);});};c.prototype._onScroll=function(e){var s=Math.max(e.target.scrollTop,0),p,h=this.getHeaderTitle(),d=s>=(this.iHeaderContentHeight-(this.iHeaderTitleHeightStickied-this.iHeaderTitleHeight)),f;p=this.iScreenHeight;if(d){p-=(this.iAnchorBarHeight+this.iHeaderTitleHeightStickied);}if((h&&this.getShowHeaderContent())||this.getShowAnchorBar()){this._toggleHeader(d);}else if(s==0&&((h&&this.getShowHeaderContent())||this.getShowAnchorBar())){this._toggleHeader(false);}this._adjustHeaderTitleBackgroundPosition(s);q.sap.log.debug("ObjectPageLayout :: lazy loading : Scrolling at "+s,"----------------------------------------");f=this._getClosestScrolledSectionId(s,p);if(f){var D=this.getDirectScrollingToSection();if(f!==this._sScrolledSectionId){q.sap.log.debug("ObjectPageLayout :: closest id "+f,"----------------------------------------");var D=this.getDirectScrollingToSection();if(D&&D!==f){return;}this.clearDirectScrollingToSection();this._setAsCurrentSection(f);}else if(f===this.getDirectScrollingToSection()){this.clearDirectScrollingToSection();}}if(this.getEnableLazyLoading()){this._oLazyLoading.lazyLoadDuringScroll(s,e.timeStamp,p);}if(h&&this.getShowHeaderContent()&&this.getShowTitleInHeaderContent()&&h.getShowTitleSelector()){if(s===0){q.sap.byId(this.getId()+"-scroll").css("z-index","1000");}else{q.sap.byId(this.getId()+"-scroll").css("z-index","0");}}};c.prototype._getClosestScrolledSectionId=function(s,p){var i=s+p,m=this._$contentContainer.height()-this.iScreenHeight,d;q.each(this._oSectionInfo,q.proxy(function(e,o){if(o.isSection||this._bMobileScenario){if(!d){d=e;}if(o.positionTop<=i&&s<=o.positionBottom){if(o.positionBottom-s<m){d=e;m=o.positionBottom-s;}}}},this));return d;};c.prototype._toggleHeader=function(s){var h=this.getHeaderTitle();this._$headerTitle.toggleClass("sapUxAPObjectPageHeaderStickied",s);if(h&&h.getIsActionAreaAlwaysVisible()&&!h.getIsObjectTitleAlwaysVisible()){h._setActionsPaddingStatus(!s);}if(!this._bStickyAnchorBar&&s){this._restoreFocusAfter(this._convertHeaderToStickied);h&&h._adaptLayout();this._adjustHeaderHeights();}else if(this._bStickyAnchorBar&&!s){this._restoreFocusAfter(this._convertHeaderToExpanded);h&&h._adaptLayout();this._adjustHeaderHeights();}};c.prototype._restoreFocusAfter=function(m){var o=sap.ui.getCore(),d=o.byId(o.getCurrentFocusedControlId());m.call(this);if(sap.ui.Device.system.phone!==true){if(!o.byId(o.getCurrentFocusedControlId())){d&&d.$().focus();}}return this;};c.prototype._convertHeaderToStickied=function(){this._$anchorBar.css("height",this.iAnchorBarHeight).children().appendTo(this._$stickyAnchorBar);this._toggleHeaderStyleRules(true);if(this.iHeaderTitleHeight!=this.iHeaderTitleHeightStickied){this._adjustHeaderBackgroundSize();}return this;};c.prototype._convertHeaderToExpanded=function(){this._$anchorBar.css("height","auto").append(this._$stickyAnchorBar.children());this._toggleHeaderStyleRules(false);return this;};c.prototype._toggleHeaderStyleRules=function(s){s=!!s;var v=s?"hidden":"inherit";this._bStickyAnchorBar=s;this._$headerContent.css("overflow",v);this._$headerContent.css("visibility",v);this._$anchorBar.css("visibility",v);this.fireToggleAnchorBar({fixed:s});};c.prototype.getScrollDelegate=function(){return this._oScroller;};c.prototype.setHeaderTitle=function(h,s){h.addEventDelegate({onAfterRendering:this._adjustHeaderHeights.bind(this)});return this.setAggregation("headerTitle",h,s);};c.prototype._adjustHeaderBackgroundSize=function(){var h=this.getHeaderTitle();if(h&&h.getHeaderDesign()=="Dark"){this.iTotalHeaderSize=this.iHeaderTitleHeight+this.iHeaderContentHeight;h.$().css("background-size","100% "+this.iTotalHeaderSize+"px");this._$headerContent.css("background-size","100% "+this.iTotalHeaderSize+"px");this._adjustHeaderTitleBackgroundPosition(0);}};c.prototype._adjustHeaderTitleBackgroundPosition=function(s){var h=this.getHeaderTitle();if(h&&h.getHeaderDesign()=="Dark"){if(this._bStickyAnchorBar){h.$().css("background-position","0px "+((this.iTotalHeaderSize-this.iHeaderTitleHeightStickied)*-1)+"px");}else{h.$().css("background-position","0px "+(this.iHeaderTitleHeight+this.iHeaderContentHeight-this.iTotalHeaderSize-s)+"px");}}};c.prototype._adjustHeaderHeights=function(){if(this._$headerTitle.length>0){var $=this._$headerTitle.clone();this.iHeaderContentHeight=this._$headerContent.height();this.iAnchorBarHeight=this._$anchorBar.height();$.css({left:"-10000px",top:"-10000px",width:this._$headerTitle.width()+"px"});if(this._bStickyAnchorBar){this.iHeaderTitleHeightStickied=this._$headerTitle.height()-this.iAnchorBarHeight;$.removeClass("sapUxAPObjectPageHeaderStickied");$.appendTo(this._$headerTitle.parent());this.iHeaderTitleHeight=$.is(":visible")?$.height()-this.iAnchorBarHeight:0;}else{this.iHeaderTitleHeight=this._$headerTitle.is(":visible")?this._$headerTitle.height():0;$.addClass("sapUxAPObjectPageHeaderStickied");$.appendTo(this._$headerTitle.parent());this.iHeaderTitleHeightStickied=$.height();}$.remove();this._$opWrapper.css("padding-top",this.iHeaderTitleHeight);this._adjustHeaderBackgroundSize();q.sap.log.info("ObjectPageLayout :: adjustHeaderHeight","headerTitleHeight: "+this.iHeaderTitleHeight+" - headerTitleStickiedHeight: "+this.iHeaderTitleHeightStickied+" - headerContentHeight: "+this.iHeaderContentHeight);}else{q.sap.log.debug("ObjectPageLayout :: adjustHeaderHeight","skipped as the objectPageLayout is being rendered");}};c.prototype._getHeaderDesign=function(){var h=this.getHeaderTitle(),d=sap.uxap.ObjectPageHeaderDesign.Light;if(h!=null){d=h.getHeaderDesign();}return d;};c.prototype._getVisibleSections=function(){return this.getSections().filter(function(s){return s.getVisible()&&s._getInternalVisible();});};c.prototype._setSectionsFocusValues=function(s){var d=this._getVisibleSections()||[],$,f='0',n='-1',t="tabIndex",o,F=d[0];d.forEach(function(e){$=e.$();if(s===e.sId){$.attr(t,f);o=e;e._setSubSectionsFocusValues();}else{$.attr(t,n);e._disableSubSectionsFocus();}});if(!o&&d.length>0){F.$().attr(t,f);F._setSubSectionsFocusValues();o=F;}return o;};c.prototype.setShowHeaderContent=function(s){var o=this.getShowHeaderContent();if(o!==s){this.setProperty("showHeaderContent",s);this._getHeaderContent().setProperty("visible",s);}return this;};c.prototype._headerTitleChangeHandler=function(){if(!this.getShowTitleInHeaderContent()||this._bFirstRendering){return;}var r=sap.ui.getCore().createRenderManager();this.getRenderer()._rerenderHeaderContentArea(r,this);r.destroy();};c.prototype.getHeaderContent=function(){return this._getHeaderContent().getAggregation("content");};c.prototype.insertHeaderContent=function(o,i,s){return this._getHeaderContent().insertAggregation("content",o,i,s);};c.prototype.addHeaderContent=function(o,s){return this._getHeaderContent().addAggregation("content",o,s);};c.prototype.removeAllHeaderContent=function(s){return this._getHeaderContent().removeAllAggregation("content",s);};c.prototype.removeHeaderContent=function(o,s){return this._getHeaderContent().removeAggregation("content",o,s);};c.prototype.destroyHeaderContent=function(s){return this._getHeaderContent().destroyAggregation("content",s);};c.prototype.indexOfHeaderContent=function(o){return this._getHeaderContent().indexOfAggregation("content",o);};c.prototype._getHeaderContent=function(){if(!this.getAggregation("_headerContent")){this.setAggregation("_headerContent",new sap.uxap.ObjectPageHeaderContent({visible:this.getShowHeaderContent(),contentDesign:this._getHeaderDesign(),content:this.getAggregation("headerContent")}),true);}return this.getAggregation("_headerContent");};c.prototype._connectModelsForSections=function(s){s=s||[];s.forEach(function(o){o.connectToModels();});};c.prototype._getHeightRelatedParameters=function(){return{iHeaderContentHeight:this.iHeaderContentHeight,iScreenHeight:this.iScreenHeight,iAnchorBarHeight:this.iAnchorBarHeight,iHeaderTitleHeightStickied:this.iHeaderTitleHeightStickied,iScrollTop:this._$opWrapper.scrollTop()};};c._getClosestOPL=function(o){while(o&&!(o instanceof sap.uxap.ObjectPageLayout)){o=o.getParent();}return o;};c.prototype._isFirstSection=function(s){var d=this._getVisibleSections();if(s===d[0]){return true;}return false;};c.HEADER_CALC_DELAY=350;c.DOM_CALC_DELAY=200;I._enrichPrototypeWithITBMutators(c);return c;});
