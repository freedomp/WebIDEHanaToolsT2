define("tinymce/imagetoolsplugin/Conversions",["tinymce/util/Promise","tinymce/imagetoolsplugin/Canvas","tinymce/imagetoolsplugin/Mime","tinymce/imagetoolsplugin/ImageSize"],function(P,C,M,I){function l(i){return new P(function(j){function k(){i.removeEventListener('load',k);j(i);}if(i.complete){j(i);}else{i.addEventListener('load',k);}});}function a(i){return l(i).then(function(i){var j,k;k=C.create(I.getWidth(i),I.getHeight(i));j=C.get2dContext(k);j.drawImage(i,0,0);return k;});}function b(i){return l(i).then(function(i){var s=i.src;if(s.indexOf('blob:')===0){return d(s);}if(s.indexOf('data:')===0){return e(s);}return a(i).then(function(j){return e(j.toDataURL(M.guessMimeType(s)));});});}function c(i){return new P(function(j){var k=new Image();function m(){k.removeEventListener('load',m);j(k);}k.addEventListener('load',m);k.src=URL.createObjectURL(i);if(k.complete){m();}});}function d(i){return new P(function(j){var x=new XMLHttpRequest();x.open('GET',i,true);x.responseType='blob';x.onload=function(){if(this.status==200){j(this.response);}};x.send();});}function e(j){return new P(function(k){var s,m,i,n,t,o;j=j.split(',');n=/data:([^;]+)/.exec(j[0]);if(n){t=n[1];}s=atob(j[1]);if(window.WebKitBlobBuilder){o=new WebKitBlobBuilder();m=new ArrayBuffer(s.length);for(i=0;i<m.length;i++){m[i]=s.charCodeAt(i);}o.append(m);k(o.getBlob(t));return;}m=new Uint8Array(s.length);for(i=0;i<m.length;i++){m[i]=s.charCodeAt(i);}k(new Blob([m],{type:t}));});}function u(i){if(i.indexOf('blob:')===0){return d(i);}if(i.indexOf('data:')===0){return e(i);}return null;}function f(i,t){return e(i.toDataURL(t));}function g(i){return new P(function(j){var k=new FileReader();k.onloadend=function(){j(k.result);};k.readAsDataURL(i);});}function h(i){return g(i).then(function(j){return j.split(',')[1];});}function r(i){URL.revokeObjectURL(i.src);}return{blobToImage:c,imageToBlob:b,uriToBlob:u,blobToDataUri:g,blobToBase64:h,imageToCanvas:a,canvasToBlob:f,revokeImageUrl:r};});
