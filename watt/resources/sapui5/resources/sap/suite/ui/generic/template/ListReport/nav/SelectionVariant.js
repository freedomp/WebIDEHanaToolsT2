/*
 * ! @copyright@
 */
sap.ui.define(["./Error","sap/suite/ui/generic/template/library"],function(E,T){"use strict";var S=T.ListReport.nav.Severity;var a=sap.ui.base.Object.extend("sap.suite.ui.generic.template.ListReport.nav.SelectionVariant",{_rValidateSign:new RegExp("[E|I]"),_rValidateOption:new RegExp("EQ|NE|LE|GE|LT|GT|BT|CP"),constructor:function(s){this._mParameters={};this._mSelectOptions={};this._sId="";if(s!==undefined){if(typeof s==="string"){this._parseFromString(s);}else if(typeof s==="object"){this._parseFromObject(s);}else{throw new E("SelectionVariant.INVALID_INPUT_TYPE",S.ERROR);}}},getID:function(){return this._sId;},setID:function(i){this._sId=i;},setText:function(n){if(typeof n!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE",S.ERROR);}this._sText=n;},getText:function(){return this._sText;},setParameterContextUrl:function(u){if(typeof u!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE",S.ERROR);}this._sParameterCtxUrl=u;},getParameterContextUrl:function(){return this._sParameterCtxUrl;},getFilterContextUrl:function(){return this._sFilterCtxUrl;},setFilterContextUrl:function(u){if(typeof u!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE",S.ERROR);}this._sFilterCtxUrl=u;},addParameter:function(n,v){if(typeof n!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE",S.ERROR);}if(typeof v!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE",S.ERROR);}if(n===""){throw new E("SelectionVariant.PARAMETER_WITHOUT_NAME",S.ERROR);}if(this._mSelectOptions[n]){throw new E("SelectionVariant.PARAMETER_SELOPT_COLLISION",S.ERROR);}this._mParameters[n]=v;return this;},removeParameter:function(n){if(typeof n!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE",S.ERROR);}if(n===""){throw new E("SelectionVariant.PARAMETER_WITHOUT_NAME",S.ERROR);}delete this._mParameters[n];return this;},renameParameter:function(n,N){if(typeof n!=="string"||typeof N!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE",S.ERROR);}if(n===""||N===""){throw new E("SelectionVariant.PARAMETER_WITHOUT_NAME",S.ERROR);}if(this._mParameters[n]!==undefined){if(this._mSelectOptions[N]){throw new E("SelectionVariant.PARAMETER_SELOPT_COLLISION",S.ERROR);}if(this._mParameters[N]){throw new E("SelectionVariant.PARAMETER_COLLISION",S.ERROR);}this._mParameters[N]=this._mParameters[n];delete this._mParameters[n];}return this;},getParameter:function(n){if(typeof n!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE",S.ERROR);}return this._mParameters[n];},getParameterNames:function(){return Object.keys(this._mParameters);},addSelectOption:function(p,s,o,l,h){if(typeof p!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE",S.ERROR);}if(p===""){throw new E("SelectionVariant.INVALID_PROPERTY_NAME",S.ERROR);}if(typeof s!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE",S.ERROR);}if(typeof o!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE",S.ERROR);}if(typeof l!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE",S.ERROR);}if(o==="BT"&&typeof h!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE",S.ERROR);}if(!this._rValidateSign.test(s.toUpperCase())){throw new E("SelectionVariant.INVALID_SIGN",S.ERROR);}if(!this._rValidateOption.test(o.toUpperCase())){throw new E("SelectionVariant.INVALID_OPTION",S.ERROR);}if(this._mParameters[p]){throw new E("SelectionVariant.PARAMETER_SELOPT_COLLISION",S.ERROR);}if(o!=="BT"){if((h!==undefined)&&(h!=="")&&(h!==null)){throw new E("SelectionVariant.HIGH_PROVIDED_THOUGH_NOT_ALLOWED",S.ERROR);}}if(this._mSelectOptions[p]===undefined){this._mSelectOptions[p]=[];}var e={Sign:s.toUpperCase(),Option:o.toUpperCase(),Low:l};if(o==="BT"){e.High=h;}else{e.High=null;}for(var i=0;i<this._mSelectOptions[p].length;i++){var b=this._mSelectOptions[p][i];if(b.Sign===e.Sign&&b.Option===e.Option&&b.Low===e.Low&&b.High===e.High){return this;}}this._mSelectOptions[p].push(e);return this;},removeSelectOption:function(n){if(typeof n!=="string"){throw new E("SelectionVariant.SELOPT_WRONG_TYPE",S.ERROR);}if(n===""){throw new E("SelectionVariant.SELOPT_WITHOUT_NAME",S.ERROR);}delete this._mSelectOptions[n];return this;},renameSelectOption:function(n,N){if(typeof n!=="string"||typeof N!=="string"){throw new E("SelectionVariant.SELOPT_WRONG_TYPE",S.ERROR);}if(n===""||N===""){throw new E("SelectionVariant.SELOPT_WITHOUT_NAME",S.ERROR);}if(this._mSelectOptions[n]!==undefined){if(this._mSelectOptions[N]){throw new E("SelectionVariant.SELOPT_COLLISION",S.ERROR);}if(this._mParameters[N]){throw new E("SelectionVariant.PARAMETER_SELOPT_COLLISION",S.ERROR);}this._mSelectOptions[N]=this._mSelectOptions[n];delete this._mSelectOptions[n];}return this;},getSelectOption:function(p){if(typeof p!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE",S.ERROR);}if(p===""){throw new E("SelectionVariant.INVALID_PROPERTY_NAME",S.ERROR);}var e=this._mSelectOptions[p];if(!e){return undefined;}return JSON.parse(JSON.stringify(e));},getSelectOptionsPropertyNames:function(){return Object.keys(this._mSelectOptions);},getValue:function(n){var v=this.getSelectOption(n);if(v!==undefined){return v;}var p=this.getParameter(n);if(p!==undefined){v=[{Sign:"I",Option:"EQ",Low:p,High:null}];return v;}return undefined;},toJSONObject:function(){var e={Version:{Major:"1",Minor:"0",Patch:"0"},SelectionVariantID:this._sId};if(this._sParameterCtxUrl){e.ParameterContextUrl=this._sParameterCtxUrl;}if(this._sFilterCtxUrl){e.FilterContextUrl=this._sFilterCtxUrl;}if(this._sText){e.Text=this._sText;}else{e.Text="Selection Variant with ID "+this._sId;}this._determineODataFilterExpression(e);this._serializeParameters(e);this._serializeSelectOptions(e);return e;},toJSONString:function(){return JSON.stringify(this.toJSONObject());},_determineODataFilterExpression:function(e){e.ODataFilterExpression="";},_serializeParameters:function(e){if(this._mParameters.length===0){return;}e.Parameters=[];jQuery.each(this._mParameters,function(p,P){var o={PropertyName:p,PropertyValue:P};e.Parameters.push(o);});},_serializeSelectOptions:function(e){if(this._mSelectOptions.length===0){return;}e.SelectOptions=[];jQuery.each(this._mSelectOptions,function(p,b){var s={PropertyName:p,Ranges:b};e.SelectOptions.push(s);});},_parseFromString:function(j){if(j===undefined){throw new E("SelectionVariant.UNABLE_TO_PARSE_INPUT",S.ERROR);}if(typeof j!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE",S.ERROR);}var i=JSON.parse(j);this._parseFromObject(i);},_parseFromObject:function(i){if(i.SelectionVariantID===undefined){jQuery.sap.log.warning("SelectionVariantID is not defined");i.SelectionVariantID="";}this.setID(i.SelectionVariantID);if(i.ParameterContextUrl!==undefined&&i.ParameterContextUrl!==""){this.setParameterContextUrl(i.ParameterContextUrl);}if(i.FilterContextUrl!==undefined&&i.FilterContextUrl!==""){this.setFilterContextUrl(i.FilterContextUrl);}if(i.Text!==undefined){this.setText(i.Text);}if(i.Parameters){this._parseFromStringParameters(i.Parameters);}if(i.SelectOptions){this._parseFromStringSelectOptions(i.SelectOptions);}},_parseFromStringParameters:function(p){jQuery.each(p,jQuery.proxy(function(i,e){this.addParameter(e.PropertyName,e.PropertyValue);},this));},_parseFromStringSelectOptions:function(s){jQuery.each(s,jQuery.proxy(function(i,o){if(!o.Ranges){jQuery.sap.log.warning("Select Option object does not contain a Ranges entry; ignoring entry");return true;}if(!jQuery.isArray(o.Ranges)){throw new E("SelectionVariant.SELECT_OPTION_RANGES_NOT_ARRAY",S.ERROR);}jQuery.each(o.Ranges,jQuery.proxy(function(I,r){this.addSelectOption(o.PropertyName,r.Sign,r.Option,r.Low,r.High);},this));},this));}});return a;});
